name: "Forestech Development Environment Setup"
description: "ConfiguraciÃ³n automÃ¡tica del entorno de desarrollo para monorepo Forestech"
version: "1.0.0"
language: "es-CO"

# ğŸš€ Setup automÃ¡tico para GitHub Copilot Agent
# Este archivo configura el entorno cuando Copilot Agent comienza a trabajar

setup_steps:
  - name: "ğŸ” Verificar estructura del monorepo"
    description: "Validar que estamos en el directorio correcto de Forestech"
    run: |
      echo "ğŸ“ Verificando estructura del monorepo Forestech..."
      ls -la
      if [ -f "CLAUDE.md" ] && [ -d "alimentacion" ] && [ -d "combustibles" ]; then
        echo "âœ… Estructura del monorepo Forestech confirmada"
      else
        echo "âŒ Error: No se detectÃ³ la estructura correcta del monorepo"
        exit 1
      fi

  - name: "ğŸ”§ Configurar Node.js y herramientas"
    description: "Asegurar versiÃ³n correcta de Node.js y herramientas globales"
    run: |
      echo "ğŸ”§ Configurando Node.js para Forestech..."
      node --version
      npm --version
      echo "âœ… Node.js configurado"

  - name: "ğŸ“¦ Instalar dependencias del monorepo"
    description: "Instalar todas las dependencias necesarias"
    run: |
      echo "ğŸ“¦ Instalando dependencias del monorepo Forestech..."
      echo "ğŸ”„ Instalando dependencias raÃ­z..."
      npm ci || npm install
      
      echo "ğŸ½ï¸ Instalando dependencias de AlimentaciÃ³n..."
      if [ -d "alimentacion" ]; then
        cd alimentacion && npm ci && cd ..
        echo "âœ… Dependencias de AlimentaciÃ³n instaladas"
      fi
      
      echo "â›½ Instalando dependencias de Combustibles..."
      if [ -d "combustibles" ]; then
        cd combustibles && npm ci && cd ..
        echo "âœ… Dependencias de Combustibles instaladas"
      fi
      
      echo "ğŸ‰ Todas las dependencias instaladas correctamente"

  - name: "ğŸ”¥ Configurar Firebase CLI"
    description: "Configurar Firebase para el proyecto Forestech"
    run: |
      echo "ğŸ”¥ Configurando Firebase CLI para Forestech..."
      
      # Verificar si Firebase CLI estÃ¡ disponible
      if command -v firebase &> /dev/null; then
        echo "âœ… Firebase CLI detectado"
        firebase --version
        
        # Configurar proyecto por defecto
        echo "ğŸ“ Configurando proyecto liquidacionapp-62962..."
        firebase use liquidacionapp-62962 --token "$FIREBASE_TOKEN" || echo "âš ï¸ Token Firebase no disponible en CI"
        echo "âœ… Firebase configurado para Forestech"
      else
        echo "ğŸ“¥ Instalando Firebase CLI..."
        npm install -g firebase-tools
        echo "âœ… Firebase CLI instalado"
      fi

  - name: "ğŸ§ª Ejecutar verificaciones de calidad"
    description: "Ejecutar linting y verificaciones bÃ¡sicas"
    run: |
      echo "ğŸ§ª Ejecutando verificaciones de calidad Forestech..."
      
      echo "ğŸ” Verificando linting de AlimentaciÃ³n..."
      if [ -d "alimentacion" ]; then
        npm run lint:alimentacion || echo "âš ï¸ Linting de AlimentaciÃ³n fallÃ³"
      fi
      
      echo "ğŸ” Verificando linting de Combustibles..."
      if [ -d "combustibles" ]; then
        npm run lint:combustibles || echo "âš ï¸ Linting de Combustibles fallÃ³"
      fi
      
      echo "âœ… Verificaciones de calidad completadas"

  - name: "ğŸ“š Cargar contexto del proyecto"
    description: "Leer documentaciÃ³n clave para contexto"
    run: |
      echo "ğŸ“š Cargando contexto del proyecto Forestech..."
      
      if [ -f "CLAUDE.md" ]; then
        echo "ğŸ“– Leyendo CLAUDE.md para contexto principal..."
        head -n 50 CLAUDE.md
        echo "âœ… Contexto principal cargado"
      fi
      
      if [ -f ".github/copilot/custom_instructions.md" ]; then
        echo "ğŸ› ï¸ Leyendo instrucciones personalizadas..."
        echo "âœ… Instrucciones de desarrollo cargadas"
      fi
      
      echo "ğŸ¯ Forestech es un sistema empresarial de gestiÃ³n con:"
      echo "  ğŸ½ï¸ MÃ³dulo AlimentaciÃ³n: Sistema de liquidaciones"
      echo "  â›½ MÃ³dulo Combustibles: GestiÃ³n de inventario y vehÃ­culos"
      echo "  ğŸ”§ Shared: Recursos compartidos"
      echo "  ğŸ”¥ Firebase: liquidacionapp-62962"
      echo "âœ… Contexto del proyecto completamente cargado"

# ğŸŒ Variables de entorno importantes  
environment:
  NODE_ENV: "development"
  TZ: "America/Bogota"
  LANG: "es_CO.UTF-8"
  FIREBASE_PROJECT: "liquidacionapp-62962"

# ğŸ¯ Objetivos del setup
success_criteria:
  - "âœ… Dependencias instaladas sin errores"
  - "âœ… Firebase CLI configurado y funcional"
  - "âœ… Linting pasa sin errores crÃ­ticos"
  - "âœ… Contexto del proyecto cargado"
  - "âœ… Variables de entorno configuradas"
  - "âœ… Comandos de desarrollo disponibles"

# ğŸ“ Notas para Copilot Agent
copilot_notes: |
  DespuÃ©s de ejecutar este setup:
  
  1. ğŸ¯ **Contexto**: Tienes acceso completo al monorepo Forestech
  2. ğŸ”§ **Herramientas**: Firebase, npm scripts, y linting configurados
  3. ğŸ“š **DocumentaciÃ³n**: CLAUDE.md es tu referencia principal
  4. ğŸŒ **Idioma**: Responde SIEMPRE en espaÃ±ol (ver .chatmode.md)
  5. ğŸ—ï¸ **Patrones**: Sigue custom_instructions.md para cÃ³digo
  6. ğŸ”¥ **Firebase**: Proyecto liquidacionapp-62962 configurado
  7. ğŸ“± **Apps**: AlimentaciÃ³n (puerto 5173) y Combustibles (puerto 5174)
  
  Â¡EstÃ¡s listo para trabajar en cualquier issue de Forestech!

---
# Metadata
created: "2025-01-13"
version: "1.0.0" 
compatibility: "GitHub Copilot Agent 2025"
project: "Forestech Monorepo"
language: "es-CO"