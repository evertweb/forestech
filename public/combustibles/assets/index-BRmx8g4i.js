(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&r(d)}).observe(document,{childList:!0,subtree:!0});function t(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(o){if(o.ep)return;o.ep=!0;const c=t(o);fetch(o.href,c)}})();var qm={exports:{}},Jl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ET;function Uw(){if(ET)return Jl;ET=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,o,c){var d=null;if(c!==void 0&&(d=""+c),o.key!==void 0&&(d=""+o.key),"key"in o){c={};for(var m in o)m!=="key"&&(c[m]=o[m])}else c=o;return o=c.ref,{$$typeof:s,type:r,key:d,ref:o!==void 0?o:null,props:c}}return Jl.Fragment=e,Jl.jsx=t,Jl.jsxs=t,Jl}var bT;function Fw(){return bT||(bT=1,qm.exports=Uw()),qm.exports}var u=Fw(),Bm={exports:{}},je={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AT;function zw(){if(AT)return je;AT=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),A=Symbol.iterator;function b(P){return P===null||typeof P!="object"?null:(P=A&&P[A]||P["@@iterator"],typeof P=="function"?P:null)}var D={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,F={};function w(P,ie,ue){this.props=P,this.context=ie,this.refs=F,this.updater=ue||D}w.prototype.isReactComponent={},w.prototype.setState=function(P,ie){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,ie,"setState")},w.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function G(){}G.prototype=w.prototype;function te(P,ie,ue){this.props=P,this.context=ie,this.refs=F,this.updater=ue||D}var ee=te.prototype=new G;ee.constructor=te,C(ee,w.prototype),ee.isPureReactComponent=!0;var Y=Array.isArray,U={H:null,A:null,T:null,S:null,V:null},he=Object.prototype.hasOwnProperty;function k(P,ie,ue,re,ye,Ve){return ue=Ve.ref,{$$typeof:s,type:P,key:ie,ref:ue!==void 0?ue:null,props:Ve}}function x(P,ie){return k(P.type,ie,void 0,void 0,void 0,P.props)}function I(P){return typeof P=="object"&&P!==null&&P.$$typeof===s}function M(P){var ie={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(ue){return ie[ue]})}var V=/\/+/g;function j(P,ie){return typeof P=="object"&&P!==null&&P.key!=null?M(""+P.key):ie.toString(36)}function R(){}function we(P){switch(P.status){case"fulfilled":return P.value;case"rejected":throw P.reason;default:switch(typeof P.status=="string"?P.then(R,R):(P.status="pending",P.then(function(ie){P.status==="pending"&&(P.status="fulfilled",P.value=ie)},function(ie){P.status==="pending"&&(P.status="rejected",P.reason=ie)})),P.status){case"fulfilled":return P.value;case"rejected":throw P.reason}}throw P}function xe(P,ie,ue,re,ye){var Ve=typeof P;(Ve==="undefined"||Ve==="boolean")&&(P=null);var Ie=!1;if(P===null)Ie=!0;else switch(Ve){case"bigint":case"string":case"number":Ie=!0;break;case"object":switch(P.$$typeof){case s:case e:Ie=!0;break;case _:return Ie=P._init,xe(Ie(P._payload),ie,ue,re,ye)}}if(Ie)return ye=ye(P),Ie=re===""?"."+j(P,0):re,Y(ye)?(ue="",Ie!=null&&(ue=Ie.replace(V,"$&/")+"/"),xe(ye,ie,ue,"",function(us){return us})):ye!=null&&(I(ye)&&(ye=x(ye,ue+(ye.key==null||P&&P.key===ye.key?"":(""+ye.key).replace(V,"$&/")+"/")+Ie)),ie.push(ye)),1;Ie=0;var kt=re===""?".":re+":";if(Y(P))for(var rt=0;rt<P.length;rt++)re=P[rt],Ve=kt+j(re,rt),Ie+=xe(re,ie,ue,Ve,ye);else if(rt=b(P),typeof rt=="function")for(P=rt.call(P),rt=0;!(re=P.next()).done;)re=re.value,Ve=kt+j(re,rt++),Ie+=xe(re,ie,ue,Ve,ye);else if(Ve==="object"){if(typeof P.then=="function")return xe(we(P),ie,ue,re,ye);throw ie=String(P),Error("Objects are not valid as a React child (found: "+(ie==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":ie)+"). If you meant to render a collection of children, use an array instead.")}return Ie}function X(P,ie,ue){if(P==null)return P;var re=[],ye=0;return xe(P,re,"","",function(Ve){return ie.call(ue,Ve,ye++)}),re}function ae(P){if(P._status===-1){var ie=P._result;ie=ie(),ie.then(function(ue){(P._status===0||P._status===-1)&&(P._status=1,P._result=ue)},function(ue){(P._status===0||P._status===-1)&&(P._status=2,P._result=ue)}),P._status===-1&&(P._status=0,P._result=ie)}if(P._status===1)return P._result.default;throw P._result}var ce=typeof reportError=="function"?reportError:function(P){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ie=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof P=="object"&&P!==null&&typeof P.message=="string"?String(P.message):String(P),error:P});if(!window.dispatchEvent(ie))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",P);return}console.error(P)};function Ne(){}return je.Children={map:X,forEach:function(P,ie,ue){X(P,function(){ie.apply(this,arguments)},ue)},count:function(P){var ie=0;return X(P,function(){ie++}),ie},toArray:function(P){return X(P,function(ie){return ie})||[]},only:function(P){if(!I(P))throw Error("React.Children.only expected to receive a single React element child.");return P}},je.Component=w,je.Fragment=t,je.Profiler=o,je.PureComponent=te,je.StrictMode=r,je.Suspense=g,je.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=U,je.__COMPILER_RUNTIME={__proto__:null,c:function(P){return U.H.useMemoCache(P)}},je.cache=function(P){return function(){return P.apply(null,arguments)}},je.cloneElement=function(P,ie,ue){if(P==null)throw Error("The argument must be a React element, but you passed "+P+".");var re=C({},P.props),ye=P.key,Ve=void 0;if(ie!=null)for(Ie in ie.ref!==void 0&&(Ve=void 0),ie.key!==void 0&&(ye=""+ie.key),ie)!he.call(ie,Ie)||Ie==="key"||Ie==="__self"||Ie==="__source"||Ie==="ref"&&ie.ref===void 0||(re[Ie]=ie[Ie]);var Ie=arguments.length-2;if(Ie===1)re.children=ue;else if(1<Ie){for(var kt=Array(Ie),rt=0;rt<Ie;rt++)kt[rt]=arguments[rt+2];re.children=kt}return k(P.type,ye,void 0,void 0,Ve,re)},je.createContext=function(P){return P={$$typeof:d,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null},P.Provider=P,P.Consumer={$$typeof:c,_context:P},P},je.createElement=function(P,ie,ue){var re,ye={},Ve=null;if(ie!=null)for(re in ie.key!==void 0&&(Ve=""+ie.key),ie)he.call(ie,re)&&re!=="key"&&re!=="__self"&&re!=="__source"&&(ye[re]=ie[re]);var Ie=arguments.length-2;if(Ie===1)ye.children=ue;else if(1<Ie){for(var kt=Array(Ie),rt=0;rt<Ie;rt++)kt[rt]=arguments[rt+2];ye.children=kt}if(P&&P.defaultProps)for(re in Ie=P.defaultProps,Ie)ye[re]===void 0&&(ye[re]=Ie[re]);return k(P,Ve,void 0,void 0,null,ye)},je.createRef=function(){return{current:null}},je.forwardRef=function(P){return{$$typeof:m,render:P}},je.isValidElement=I,je.lazy=function(P){return{$$typeof:_,_payload:{_status:-1,_result:P},_init:ae}},je.memo=function(P,ie){return{$$typeof:v,type:P,compare:ie===void 0?null:ie}},je.startTransition=function(P){var ie=U.T,ue={};U.T=ue;try{var re=P(),ye=U.S;ye!==null&&ye(ue,re),typeof re=="object"&&re!==null&&typeof re.then=="function"&&re.then(Ne,ce)}catch(Ve){ce(Ve)}finally{U.T=ie}},je.unstable_useCacheRefresh=function(){return U.H.useCacheRefresh()},je.use=function(P){return U.H.use(P)},je.useActionState=function(P,ie,ue){return U.H.useActionState(P,ie,ue)},je.useCallback=function(P,ie){return U.H.useCallback(P,ie)},je.useContext=function(P){return U.H.useContext(P)},je.useDebugValue=function(){},je.useDeferredValue=function(P,ie){return U.H.useDeferredValue(P,ie)},je.useEffect=function(P,ie,ue){var re=U.H;if(typeof ue=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return re.useEffect(P,ie)},je.useId=function(){return U.H.useId()},je.useImperativeHandle=function(P,ie,ue){return U.H.useImperativeHandle(P,ie,ue)},je.useInsertionEffect=function(P,ie){return U.H.useInsertionEffect(P,ie)},je.useLayoutEffect=function(P,ie){return U.H.useLayoutEffect(P,ie)},je.useMemo=function(P,ie){return U.H.useMemo(P,ie)},je.useOptimistic=function(P,ie){return U.H.useOptimistic(P,ie)},je.useReducer=function(P,ie,ue){return U.H.useReducer(P,ie,ue)},je.useRef=function(P){return U.H.useRef(P)},je.useState=function(P){return U.H.useState(P)},je.useSyncExternalStore=function(P,ie,ue){return U.H.useSyncExternalStore(P,ie,ue)},je.useTransition=function(){return U.H.useTransition()},je.version="19.1.0",je}var NT;function $p(){return NT||(NT=1,Bm.exports=zw()),Bm.exports}var le=$p(),Hm={exports:{}},ec={},Gm={exports:{}},$m={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ST;function qw(){return ST||(ST=1,function(s){function e(X,ae){var ce=X.length;X.push(ae);e:for(;0<ce;){var Ne=ce-1>>>1,P=X[Ne];if(0<o(P,ae))X[Ne]=ae,X[ce]=P,ce=Ne;else break e}}function t(X){return X.length===0?null:X[0]}function r(X){if(X.length===0)return null;var ae=X[0],ce=X.pop();if(ce!==ae){X[0]=ce;e:for(var Ne=0,P=X.length,ie=P>>>1;Ne<ie;){var ue=2*(Ne+1)-1,re=X[ue],ye=ue+1,Ve=X[ye];if(0>o(re,ce))ye<P&&0>o(Ve,re)?(X[Ne]=Ve,X[ye]=ce,Ne=ye):(X[Ne]=re,X[ue]=ce,Ne=ue);else if(ye<P&&0>o(Ve,ce))X[Ne]=Ve,X[ye]=ce,Ne=ye;else break e}}return ae}function o(X,ae){var ce=X.sortIndex-ae.sortIndex;return ce!==0?ce:X.id-ae.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;s.unstable_now=function(){return c.now()}}else{var d=Date,m=d.now();s.unstable_now=function(){return d.now()-m}}var g=[],v=[],_=1,A=null,b=3,D=!1,C=!1,F=!1,w=!1,G=typeof setTimeout=="function"?setTimeout:null,te=typeof clearTimeout=="function"?clearTimeout:null,ee=typeof setImmediate<"u"?setImmediate:null;function Y(X){for(var ae=t(v);ae!==null;){if(ae.callback===null)r(v);else if(ae.startTime<=X)r(v),ae.sortIndex=ae.expirationTime,e(g,ae);else break;ae=t(v)}}function U(X){if(F=!1,Y(X),!C)if(t(g)!==null)C=!0,he||(he=!0,j());else{var ae=t(v);ae!==null&&xe(U,ae.startTime-X)}}var he=!1,k=-1,x=5,I=-1;function M(){return w?!0:!(s.unstable_now()-I<x)}function V(){if(w=!1,he){var X=s.unstable_now();I=X;var ae=!0;try{e:{C=!1,F&&(F=!1,te(k),k=-1),D=!0;var ce=b;try{t:{for(Y(X),A=t(g);A!==null&&!(A.expirationTime>X&&M());){var Ne=A.callback;if(typeof Ne=="function"){A.callback=null,b=A.priorityLevel;var P=Ne(A.expirationTime<=X);if(X=s.unstable_now(),typeof P=="function"){A.callback=P,Y(X),ae=!0;break t}A===t(g)&&r(g),Y(X)}else r(g);A=t(g)}if(A!==null)ae=!0;else{var ie=t(v);ie!==null&&xe(U,ie.startTime-X),ae=!1}}break e}finally{A=null,b=ce,D=!1}ae=void 0}}finally{ae?j():he=!1}}}var j;if(typeof ee=="function")j=function(){ee(V)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,we=R.port2;R.port1.onmessage=V,j=function(){we.postMessage(null)}}else j=function(){G(V,0)};function xe(X,ae){k=G(function(){X(s.unstable_now())},ae)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(X){X.callback=null},s.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<X?Math.floor(1e3/X):5},s.unstable_getCurrentPriorityLevel=function(){return b},s.unstable_next=function(X){switch(b){case 1:case 2:case 3:var ae=3;break;default:ae=b}var ce=b;b=ae;try{return X()}finally{b=ce}},s.unstable_requestPaint=function(){w=!0},s.unstable_runWithPriority=function(X,ae){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var ce=b;b=X;try{return ae()}finally{b=ce}},s.unstable_scheduleCallback=function(X,ae,ce){var Ne=s.unstable_now();switch(typeof ce=="object"&&ce!==null?(ce=ce.delay,ce=typeof ce=="number"&&0<ce?Ne+ce:Ne):ce=Ne,X){case 1:var P=-1;break;case 2:P=250;break;case 5:P=1073741823;break;case 4:P=1e4;break;default:P=5e3}return P=ce+P,X={id:_++,callback:ae,priorityLevel:X,startTime:ce,expirationTime:P,sortIndex:-1},ce>Ne?(X.sortIndex=ce,e(v,X),t(g)===null&&X===t(v)&&(F?(te(k),k=-1):F=!0,xe(U,ce-Ne))):(X.sortIndex=P,e(g,X),C||D||(C=!0,he||(he=!0,j()))),X},s.unstable_shouldYield=M,s.unstable_wrapCallback=function(X){var ae=b;return function(){var ce=b;b=ae;try{return X.apply(this,arguments)}finally{b=ce}}}}($m)),$m}var wT;function Bw(){return wT||(wT=1,Gm.exports=qw()),Gm.exports}var Km={exports:{}},sn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xT;function Hw(){if(xT)return sn;xT=1;var s=$p();function e(g){var v="https://react.dev/errors/"+g;if(1<arguments.length){v+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)v+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+g+"; visit "+v+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function c(g,v,_){var A=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:A==null?null:""+A,children:g,containerInfo:v,implementation:_}}var d=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(g,v){if(g==="font")return"";if(typeof v=="string")return v==="use-credentials"?v:""}return sn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,sn.createPortal=function(g,v){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!v||v.nodeType!==1&&v.nodeType!==9&&v.nodeType!==11)throw Error(e(299));return c(g,v,null,_)},sn.flushSync=function(g){var v=d.T,_=r.p;try{if(d.T=null,r.p=2,g)return g()}finally{d.T=v,r.p=_,r.d.f()}},sn.preconnect=function(g,v){typeof g=="string"&&(v?(v=v.crossOrigin,v=typeof v=="string"?v==="use-credentials"?v:"":void 0):v=null,r.d.C(g,v))},sn.prefetchDNS=function(g){typeof g=="string"&&r.d.D(g)},sn.preinit=function(g,v){if(typeof g=="string"&&v&&typeof v.as=="string"){var _=v.as,A=m(_,v.crossOrigin),b=typeof v.integrity=="string"?v.integrity:void 0,D=typeof v.fetchPriority=="string"?v.fetchPriority:void 0;_==="style"?r.d.S(g,typeof v.precedence=="string"?v.precedence:void 0,{crossOrigin:A,integrity:b,fetchPriority:D}):_==="script"&&r.d.X(g,{crossOrigin:A,integrity:b,fetchPriority:D,nonce:typeof v.nonce=="string"?v.nonce:void 0})}},sn.preinitModule=function(g,v){if(typeof g=="string")if(typeof v=="object"&&v!==null){if(v.as==null||v.as==="script"){var _=m(v.as,v.crossOrigin);r.d.M(g,{crossOrigin:_,integrity:typeof v.integrity=="string"?v.integrity:void 0,nonce:typeof v.nonce=="string"?v.nonce:void 0})}}else v==null&&r.d.M(g)},sn.preload=function(g,v){if(typeof g=="string"&&typeof v=="object"&&v!==null&&typeof v.as=="string"){var _=v.as,A=m(_,v.crossOrigin);r.d.L(g,_,{crossOrigin:A,integrity:typeof v.integrity=="string"?v.integrity:void 0,nonce:typeof v.nonce=="string"?v.nonce:void 0,type:typeof v.type=="string"?v.type:void 0,fetchPriority:typeof v.fetchPriority=="string"?v.fetchPriority:void 0,referrerPolicy:typeof v.referrerPolicy=="string"?v.referrerPolicy:void 0,imageSrcSet:typeof v.imageSrcSet=="string"?v.imageSrcSet:void 0,imageSizes:typeof v.imageSizes=="string"?v.imageSizes:void 0,media:typeof v.media=="string"?v.media:void 0})}},sn.preloadModule=function(g,v){if(typeof g=="string")if(v){var _=m(v.as,v.crossOrigin);r.d.m(g,{as:typeof v.as=="string"&&v.as!=="script"?v.as:void 0,crossOrigin:_,integrity:typeof v.integrity=="string"?v.integrity:void 0})}else r.d.m(g)},sn.requestFormReset=function(g){r.d.r(g)},sn.unstable_batchedUpdates=function(g,v){return g(v)},sn.useFormState=function(g,v,_){return d.H.useFormState(g,v,_)},sn.useFormStatus=function(){return d.H.useHostTransitionStatus()},sn.version="19.1.0",sn}var IT;function Gw(){if(IT)return Km.exports;IT=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Km.exports=Hw(),Km.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CT;function $w(){if(CT)return ec;CT=1;var s=Bw(),e=$p(),t=Gw();function r(n){var i="https://react.dev/errors/"+n;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function c(n){var i=n,a=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(a=i.return),n=i.return;while(n)}return i.tag===3?a:null}function d(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function m(n){if(c(n)!==n)throw Error(r(188))}function g(n){var i=n.alternate;if(!i){if(i=c(n),i===null)throw Error(r(188));return i!==n?null:n}for(var a=n,l=i;;){var f=a.return;if(f===null)break;var p=f.alternate;if(p===null){if(l=f.return,l!==null){a=l;continue}break}if(f.child===p.child){for(p=f.child;p;){if(p===a)return m(f),n;if(p===l)return m(f),i;p=p.sibling}throw Error(r(188))}if(a.return!==l.return)a=f,l=p;else{for(var E=!1,N=f.child;N;){if(N===a){E=!0,a=f,l=p;break}if(N===l){E=!0,l=f,a=p;break}N=N.sibling}if(!E){for(N=p.child;N;){if(N===a){E=!0,a=p,l=f;break}if(N===l){E=!0,l=p,a=f;break}N=N.sibling}if(!E)throw Error(r(189))}}if(a.alternate!==l)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?n:i}function v(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n;for(n=n.child;n!==null;){if(i=v(n),i!==null)return i;n=n.sibling}return null}var _=Object.assign,A=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),D=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),F=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),G=Symbol.for("react.provider"),te=Symbol.for("react.consumer"),ee=Symbol.for("react.context"),Y=Symbol.for("react.forward_ref"),U=Symbol.for("react.suspense"),he=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),V=Symbol.iterator;function j(n){return n===null||typeof n!="object"?null:(n=V&&n[V]||n["@@iterator"],typeof n=="function"?n:null)}var R=Symbol.for("react.client.reference");function we(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===R?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case C:return"Fragment";case w:return"Profiler";case F:return"StrictMode";case U:return"Suspense";case he:return"SuspenseList";case I:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case D:return"Portal";case ee:return(n.displayName||"Context")+".Provider";case te:return(n._context.displayName||"Context")+".Consumer";case Y:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case k:return i=n.displayName||null,i!==null?i:we(n.type)||"Memo";case x:i=n._payload,n=n._init;try{return we(n(i))}catch{}}return null}var xe=Array.isArray,X=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ce={pending:!1,data:null,method:null,action:null},Ne=[],P=-1;function ie(n){return{current:n}}function ue(n){0>P||(n.current=Ne[P],Ne[P]=null,P--)}function re(n,i){P++,Ne[P]=n.current,n.current=i}var ye=ie(null),Ve=ie(null),Ie=ie(null),kt=ie(null);function rt(n,i){switch(re(Ie,i),re(Ve,n),re(ye,null),i.nodeType){case 9:case 11:n=(n=i.documentElement)&&(n=n.namespaceURI)?Y_(n):0;break;default:if(n=i.tagName,i=i.namespaceURI)i=Y_(i),n=X_(i,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}ue(ye),re(ye,n)}function us(){ue(ye),ue(Ve),ue(Ie)}function yi(n){n.memoizedState!==null&&re(kt,n);var i=ye.current,a=X_(i,n.type);i!==a&&(re(Ve,n),re(ye,a))}function Ps(n){Ve.current===n&&(ue(ye),ue(Ve)),kt.current===n&&(ue(kt),Ql._currentValue=ce)}var Tr=Object.prototype.hasOwnProperty,Er=s.unstable_scheduleCallback,br=s.unstable_cancelCallback,Go=s.unstable_shouldYield,$c=s.unstable_requestPaint,Pn=s.unstable_now,zd=s.unstable_getCurrentPriorityLevel,$o=s.unstable_ImmediatePriority,_a=s.unstable_UserBlockingPriority,Ar=s.unstable_NormalPriority,qd=s.unstable_LowPriority,Ta=s.unstable_IdlePriority,Ko=s.log,Kc=s.unstable_setDisableYieldValue,ft=null,Xe=null;function An(n){if(typeof Ko=="function"&&Kc(n),Xe&&typeof Xe.setStrictMode=="function")try{Xe.setStrictMode(ft,n)}catch{}}var tn=Math.clz32?Math.clz32:Nr,Qc=Math.log,Bd=Math.LN2;function Nr(n){return n>>>=0,n===0?32:31-(Qc(n)/Bd|0)|0}var Sr=256,wr=4194304;function Wn(n){var i=n&42;if(i!==0)return i;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Ea(n,i,a){var l=n.pendingLanes;if(l===0)return 0;var f=0,p=n.suspendedLanes,E=n.pingedLanes;n=n.warmLanes;var N=l&134217727;return N!==0?(l=N&~p,l!==0?f=Wn(l):(E&=N,E!==0?f=Wn(E):a||(a=N&~n,a!==0&&(f=Wn(a))))):(N=l&~p,N!==0?f=Wn(N):E!==0?f=Wn(E):a||(a=l&~n,a!==0&&(f=Wn(a)))),f===0?0:i!==0&&i!==f&&(i&p)===0&&(p=f&-f,a=i&-i,p>=a||p===32&&(a&4194048)!==0)?i:f}function xr(n,i){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&i)===0}function Qo(n,i){switch(n){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Yo(){var n=Sr;return Sr<<=1,(Sr&4194048)===0&&(Sr=256),n}function Xo(){var n=wr;return wr<<=1,(wr&62914560)===0&&(wr=4194304),n}function Ls(n){for(var i=[],a=0;31>a;a++)i.push(n);return i}function Us(n,i){n.pendingLanes|=i,i!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Zo(n,i,a,l,f,p){var E=n.pendingLanes;n.pendingLanes=a,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=a,n.entangledLanes&=a,n.errorRecoveryDisabledLanes&=a,n.shellSuspendCounter=0;var N=n.entanglements,O=n.expirationTimes,H=n.hiddenUpdates;for(a=E&~a;0<a;){var Z=31-tn(a),ne=1<<Z;N[Z]=0,O[Z]=-1;var $=H[Z];if($!==null)for(H[Z]=null,Z=0;Z<$.length;Z++){var K=$[Z];K!==null&&(K.lane&=-536870913)}a&=~ne}l!==0&&hs(n,l,0),p!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=p&~(E&~i))}function hs(n,i,a){n.pendingLanes|=i,n.suspendedLanes&=~i;var l=31-tn(i);n.entangledLanes|=i,n.entanglements[l]=n.entanglements[l]|1073741824|a&4194090}function Wo(n,i){var a=n.entangledLanes|=i;for(n=n.entanglements;a;){var l=31-tn(a),f=1<<l;f&i|n[l]&i&&(n[l]|=i),a&=~f}}function _i(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function ba(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Ti(){var n=ae.p;return n!==0?n:(n=window.event,n===void 0?32:pT(n.type))}function Yc(n,i){var a=ae.p;try{return ae.p=n,i()}finally{ae.p=a}}var ot=Math.random().toString(36).slice(2),It="__reactFiber$"+ot,Et="__reactProps$"+ot,Ln="__reactContainer$"+ot,Jo="__reactEvents$"+ot,Hd="__reactListeners$"+ot,Ei="__reactHandles$"+ot,Xc="__reactResources$"+ot,Ir="__reactMarker$"+ot;function bi(n){delete n[It],delete n[Et],delete n[Jo],delete n[Hd],delete n[Ei]}function Fs(n){var i=n[It];if(i)return i;for(var a=n.parentNode;a;){if(i=a[Ln]||a[It]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(n=eT(n);n!==null;){if(a=n[It])return a;n=eT(n)}return i}n=a,a=n.parentNode}return null}function ds(n){if(n=n[It]||n[Ln]){var i=n.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return n}return null}function fs(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n.stateNode;throw Error(r(33))}function hn(n){var i=n[Xc];return i||(i=n[Xc]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function vt(n){n[Ir]=!0}var el=new Set,Aa={};function Jn(n,i){zs(n,i),zs(n+"Capture",i)}function zs(n,i){for(Aa[n]=i,n=0;n<i.length;n++)el.add(i[n])}var Zc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Wc={},Cr={};function Jc(n){return Tr.call(Cr,n)?!0:Tr.call(Wc,n)?!1:Zc.test(n)?Cr[n]=!0:(Wc[n]=!0,!1)}function Ai(n,i,a){if(Jc(i))if(a===null)n.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":n.removeAttribute(i);return;case"boolean":var l=i.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){n.removeAttribute(i);return}}n.setAttribute(i,""+a)}}function ms(n,i,a){if(a===null)n.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(i);return}n.setAttribute(i,""+a)}}function Ht(n,i,a,l){if(l===null)n.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(a);return}n.setAttributeNS(i,a,""+l)}}var Rr,eu;function qs(n){if(Rr===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);Rr=i&&i[1]||"",eu=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Rr+n+eu}var Na=!1;function Sa(n,i){if(!n||Na)return"";Na=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(i){var ne=function(){throw Error()};if(Object.defineProperty(ne.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ne,[])}catch(K){var $=K}Reflect.construct(n,[],ne)}else{try{ne.call()}catch(K){$=K}n.call(ne.prototype)}}else{try{throw Error()}catch(K){$=K}(ne=n())&&typeof ne.catch=="function"&&ne.catch(function(){})}}catch(K){if(K&&$&&typeof K.stack=="string")return[K.stack,$.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=l.DetermineComponentFrameRoot(),E=p[0],N=p[1];if(E&&N){var O=E.split(`
`),H=N.split(`
`);for(f=l=0;l<O.length&&!O[l].includes("DetermineComponentFrameRoot");)l++;for(;f<H.length&&!H[f].includes("DetermineComponentFrameRoot");)f++;if(l===O.length||f===H.length)for(l=O.length-1,f=H.length-1;1<=l&&0<=f&&O[l]!==H[f];)f--;for(;1<=l&&0<=f;l--,f--)if(O[l]!==H[f]){if(l!==1||f!==1)do if(l--,f--,0>f||O[l]!==H[f]){var Z=`
`+O[l].replace(" at new "," at ");return n.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",n.displayName)),Z}while(1<=l&&0<=f);break}}}finally{Na=!1,Error.prepareStackTrace=a}return(a=n?n.displayName||n.name:"")?qs(a):""}function tl(n){switch(n.tag){case 26:case 27:case 5:return qs(n.type);case 16:return qs("Lazy");case 13:return qs("Suspense");case 19:return qs("SuspenseList");case 0:case 15:return Sa(n.type,!1);case 11:return Sa(n.type.render,!1);case 1:return Sa(n.type,!0);case 31:return qs("Activity");default:return""}}function wa(n){try{var i="";do i+=tl(n),n=n.return;while(n);return i}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function dn(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function nl(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Gd(n){var i=nl(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,i),l=""+n[i];if(!n.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var f=a.get,p=a.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return f.call(this)},set:function(E){l=""+E,p.call(this,E)}}),Object.defineProperty(n,i,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(E){l=""+E},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function xa(n){n._valueTracker||(n._valueTracker=Gd(n))}function sl(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var a=i.getValue(),l="";return n&&(l=nl(n)?n.checked?"true":"false":n.value),n=l,n!==a?(i.setValue(n),!0):!1}function Dr(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var $d=/[\n"\\]/g;function bt(n){return n.replace($d,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Nn(n,i,a,l,f,p,E,N){n.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?n.type=E:n.removeAttribute("type"),i!=null?E==="number"?(i===0&&n.value===""||n.value!=i)&&(n.value=""+dn(i)):n.value!==""+dn(i)&&(n.value=""+dn(i)):E!=="submit"&&E!=="reset"||n.removeAttribute("value"),i!=null?Ni(n,E,dn(i)):a!=null?Ni(n,E,dn(a)):l!=null&&n.removeAttribute("value"),f==null&&p!=null&&(n.defaultChecked=!!p),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"?n.name=""+dn(N):n.removeAttribute("name")}function jr(n,i,a,l,f,p,E,N){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(n.type=p),i!=null||a!=null){if(!(p!=="submit"&&p!=="reset"||i!=null))return;a=a!=null?""+dn(a):"",i=i!=null?""+dn(i):a,N||i===n.value||(n.value=i),n.defaultValue=i}l=l??f,l=typeof l!="function"&&typeof l!="symbol"&&!!l,n.checked=N?n.checked:!!l,n.defaultChecked=!!l,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(n.name=E)}function Ni(n,i,a){i==="number"&&Dr(n.ownerDocument)===n||n.defaultValue===""+a||(n.defaultValue=""+a)}function Bs(n,i,a,l){if(n=n.options,i){i={};for(var f=0;f<a.length;f++)i["$"+a[f]]=!0;for(a=0;a<n.length;a++)f=i.hasOwnProperty("$"+n[a].value),n[a].selected!==f&&(n[a].selected=f),f&&l&&(n[a].defaultSelected=!0)}else{for(a=""+dn(a),i=null,f=0;f<n.length;f++){if(n[f].value===a){n[f].selected=!0,l&&(n[f].defaultSelected=!0);return}i!==null||n[f].disabled||(i=n[f])}i!==null&&(i.selected=!0)}}function Je(n,i,a){if(i!=null&&(i=""+dn(i),i!==n.value&&(n.value=i),a==null)){n.defaultValue!==i&&(n.defaultValue=i);return}n.defaultValue=a!=null?""+dn(a):""}function Or(n,i,a,l){if(i==null){if(l!=null){if(a!=null)throw Error(r(92));if(xe(l)){if(1<l.length)throw Error(r(93));l=l[0]}a=l}a==null&&(a=""),i=a}a=dn(i),n.defaultValue=a,l=n.textContent,l===a&&l!==""&&l!==null&&(n.value=l)}function Un(n,i){if(i){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=i;return}}n.textContent=i}var Mr=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function tu(n,i,a){var l=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?n.setProperty(i,""):i==="float"?n.cssFloat="":n[i]="":l?n.setProperty(i,a):typeof a!="number"||a===0||Mr.has(i)?i==="float"?n.cssFloat=a:n[i]=(""+a).trim():n[i]=a+"px"}function il(n,i,a){if(i!=null&&typeof i!="object")throw Error(r(62));if(n=n.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||i!=null&&i.hasOwnProperty(l)||(l.indexOf("--")===0?n.setProperty(l,""):l==="float"?n.cssFloat="":n[l]="");for(var f in i)l=i[f],i.hasOwnProperty(f)&&a[f]!==l&&tu(n,f,l)}else for(var p in i)i.hasOwnProperty(p)&&tu(n,p,i[p])}function rl(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Kd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Qd=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ia(n){return Qd.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var Hs=null;function Fn(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Gs=null,$s=null;function al(n){var i=ds(n);if(i&&(n=i.stateNode)){var a=n[Et]||null;e:switch(n=i.stateNode,i.type){case"input":if(Nn(n,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+bt(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var l=a[i];if(l!==n&&l.form===n.form){var f=l[Et]||null;if(!f)throw Error(r(90));Nn(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<a.length;i++)l=a[i],l.form===n.form&&sl(l)}break e;case"textarea":Je(n,a.value,a.defaultValue);break e;case"select":i=a.value,i!=null&&Bs(n,!!a.multiple,i,!1)}}}var ps=!1;function nu(n,i,a){if(ps)return n(i,a);ps=!0;try{var l=n(i);return l}finally{if(ps=!1,(Gs!==null||$s!==null)&&(Yu(),Gs&&(i=Gs,n=$s,$s=Gs=null,al(i),n)))for(i=0;i<n.length;i++)al(n[i])}}function Vr(n,i){var a=n.stateNode;if(a===null)return null;var l=a[Et]||null;if(l===null)return null;a=l[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(n=n.type,l=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!l;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(r(231,i,typeof a));return a}var es=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),zn=!1;if(es)try{var kr={};Object.defineProperty(kr,"passive",{get:function(){zn=!0}}),window.addEventListener("test",kr,kr),window.removeEventListener("test",kr,kr)}catch{zn=!1}var gs=null,Si=null,Ks=null;function ol(){if(Ks)return Ks;var n,i=Si,a=i.length,l,f="value"in gs?gs.value:gs.textContent,p=f.length;for(n=0;n<a&&i[n]===f[n];n++);var E=a-n;for(l=1;l<=E&&i[a-l]===f[p-l];l++);return Ks=f.slice(n,1<l?1-l:void 0)}function vs(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function ys(){return!0}function ll(){return!1}function Pt(n){function i(a,l,f,p,E){this._reactName=a,this._targetInst=f,this.type=l,this.nativeEvent=p,this.target=E,this.currentTarget=null;for(var N in n)n.hasOwnProperty(N)&&(a=n[N],this[N]=a?a(p):p[N]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?ys:ll,this.isPropagationStopped=ll,this}return _(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ys)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ys)},persist:function(){},isPersistent:ys}),i}var Ye={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ca=Pt(Ye),Pr=_({},Ye,{view:0,detail:0}),su=Pt(Pr),Ra,Da,_s,Lr=_({},Pr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zr,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==_s&&(_s&&n.type==="mousemove"?(Ra=n.screenX-_s.screenX,Da=n.screenY-_s.screenY):Da=Ra=0,_s=n),Ra)},movementY:function(n){return"movementY"in n?n.movementY:Da}}),qn=Pt(Lr),iu=_({},Lr,{dataTransfer:0}),Yd=Pt(iu),Ur=_({},Pr,{relatedTarget:0}),ja=Pt(Ur),cl=_({},Ye,{animationName:0,elapsedTime:0,pseudoElement:0}),Oa=Pt(cl),ru=_({},Ye,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Ma=Pt(ru),Xd=_({},Ye,{data:0}),ul=Pt(Xd),Fr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},au={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ou={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hl(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=ou[n])?!!i[n]:!1}function zr(){return hl}var lu=_({},Pr,{key:function(n){if(n.key){var i=Fr[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=vs(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?au[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zr,charCode:function(n){return n.type==="keypress"?vs(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?vs(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Va=Pt(lu),cu=_({},Lr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),dl=Pt(cu),Qs=_({},Pr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zr}),uu=Pt(Qs),hu=_({},Ye,{propertyName:0,elapsedTime:0,pseudoElement:0}),du=Pt(hu),fu=_({},Lr,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),ka=Pt(fu),fn=_({},Ye,{newState:0,oldState:0}),mu=Pt(fn),pu=[9,13,27,32],Ts=es&&"CompositionEvent"in window,h=null;es&&"documentMode"in document&&(h=document.documentMode);var y=es&&"TextEvent"in window&&!h,T=es&&(!Ts||h&&8<h&&11>=h),S=" ",q=!1;function Q(n,i){switch(n){case"keyup":return pu.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function oe(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var ze=!1;function Ct(n,i){switch(n){case"compositionend":return oe(i);case"keypress":return i.which!==32?null:(q=!0,S);case"textInput":return n=i.data,n===S&&q?null:n;default:return null}}function qe(n,i){if(ze)return n==="compositionend"||!Ts&&Q(n,i)?(n=ol(),Ks=Si=gs=null,ze=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return T&&i.locale!=="ko"?null:i.data;default:return null}}var Lt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Rt(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!Lt[n.type]:i==="textarea"}function Ys(n,i,a,l){Gs?$s?$s.push(l):$s=[l]:Gs=l,i=th(i,"onChange"),0<i.length&&(a=new Ca("onChange","change",null,a,l),n.push({event:a,listeners:i}))}var Gt=null,Es=null;function fl(n){H_(n,0)}function gu(n){var i=fs(n);if(sl(i))return n}function hv(n,i){if(n==="change")return i}var dv=!1;if(es){var Zd;if(es){var Wd="oninput"in document;if(!Wd){var fv=document.createElement("div");fv.setAttribute("oninput","return;"),Wd=typeof fv.oninput=="function"}Zd=Wd}else Zd=!1;dv=Zd&&(!document.documentMode||9<document.documentMode)}function mv(){Gt&&(Gt.detachEvent("onpropertychange",pv),Es=Gt=null)}function pv(n){if(n.propertyName==="value"&&gu(Es)){var i=[];Ys(i,Es,n,Fn(n)),nu(fl,i)}}function pS(n,i,a){n==="focusin"?(mv(),Gt=i,Es=a,Gt.attachEvent("onpropertychange",pv)):n==="focusout"&&mv()}function gS(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return gu(Es)}function vS(n,i){if(n==="click")return gu(i)}function yS(n,i){if(n==="input"||n==="change")return gu(i)}function _S(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var Sn=typeof Object.is=="function"?Object.is:_S;function ml(n,i){if(Sn(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var a=Object.keys(n),l=Object.keys(i);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var f=a[l];if(!Tr.call(i,f)||!Sn(n[f],i[f]))return!1}return!0}function gv(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function vv(n,i){var a=gv(n);n=0;for(var l;a;){if(a.nodeType===3){if(l=n+a.textContent.length,n<=i&&l>=i)return{node:a,offset:i-n};n=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=gv(a)}}function yv(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?yv(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function _v(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var i=Dr(n.document);i instanceof n.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)n=i.contentWindow;else break;i=Dr(n.document)}return i}function Jd(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}var TS=es&&"documentMode"in document&&11>=document.documentMode,Pa=null,ef=null,pl=null,tf=!1;function Tv(n,i,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;tf||Pa==null||Pa!==Dr(l)||(l=Pa,"selectionStart"in l&&Jd(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),pl&&ml(pl,l)||(pl=l,l=th(ef,"onSelect"),0<l.length&&(i=new Ca("onSelect","select",null,i,a),n.push({event:i,listeners:l}),i.target=Pa)))}function qr(n,i){var a={};return a[n.toLowerCase()]=i.toLowerCase(),a["Webkit"+n]="webkit"+i,a["Moz"+n]="moz"+i,a}var La={animationend:qr("Animation","AnimationEnd"),animationiteration:qr("Animation","AnimationIteration"),animationstart:qr("Animation","AnimationStart"),transitionrun:qr("Transition","TransitionRun"),transitionstart:qr("Transition","TransitionStart"),transitioncancel:qr("Transition","TransitionCancel"),transitionend:qr("Transition","TransitionEnd")},nf={},Ev={};es&&(Ev=document.createElement("div").style,"AnimationEvent"in window||(delete La.animationend.animation,delete La.animationiteration.animation,delete La.animationstart.animation),"TransitionEvent"in window||delete La.transitionend.transition);function Br(n){if(nf[n])return nf[n];if(!La[n])return n;var i=La[n],a;for(a in i)if(i.hasOwnProperty(a)&&a in Ev)return nf[n]=i[a];return n}var bv=Br("animationend"),Av=Br("animationiteration"),Nv=Br("animationstart"),ES=Br("transitionrun"),bS=Br("transitionstart"),AS=Br("transitioncancel"),Sv=Br("transitionend"),wv=new Map,sf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");sf.push("scrollEnd");function ts(n,i){wv.set(n,i),Jn(i,[n])}var xv=new WeakMap;function Bn(n,i){if(typeof n=="object"&&n!==null){var a=xv.get(n);return a!==void 0?a:(i={value:n,source:i,stack:wa(i)},xv.set(n,i),i)}return{value:n,source:i,stack:wa(i)}}var Hn=[],Ua=0,rf=0;function vu(){for(var n=Ua,i=rf=Ua=0;i<n;){var a=Hn[i];Hn[i++]=null;var l=Hn[i];Hn[i++]=null;var f=Hn[i];Hn[i++]=null;var p=Hn[i];if(Hn[i++]=null,l!==null&&f!==null){var E=l.pending;E===null?f.next=f:(f.next=E.next,E.next=f),l.pending=f}p!==0&&Iv(a,f,p)}}function yu(n,i,a,l){Hn[Ua++]=n,Hn[Ua++]=i,Hn[Ua++]=a,Hn[Ua++]=l,rf|=l,n.lanes|=l,n=n.alternate,n!==null&&(n.lanes|=l)}function af(n,i,a,l){return yu(n,i,a,l),_u(n)}function Fa(n,i){return yu(n,null,null,i),_u(n)}function Iv(n,i,a){n.lanes|=a;var l=n.alternate;l!==null&&(l.lanes|=a);for(var f=!1,p=n.return;p!==null;)p.childLanes|=a,l=p.alternate,l!==null&&(l.childLanes|=a),p.tag===22&&(n=p.stateNode,n===null||n._visibility&1||(f=!0)),n=p,p=p.return;return n.tag===3?(p=n.stateNode,f&&i!==null&&(f=31-tn(a),n=p.hiddenUpdates,l=n[f],l===null?n[f]=[i]:l.push(i),i.lane=a|536870912),p):null}function _u(n){if(50<Fl)throw Fl=0,dm=null,Error(r(185));for(var i=n.return;i!==null;)n=i,i=n.return;return n.tag===3?n.stateNode:null}var za={};function NS(n,i,a,l){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wn(n,i,a,l){return new NS(n,i,a,l)}function of(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Xs(n,i){var a=n.alternate;return a===null?(a=wn(n.tag,i,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=i,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&65011712,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,i=n.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a.refCleanup=n.refCleanup,a}function Cv(n,i){n.flags&=65011714;var a=n.alternate;return a===null?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=a.childLanes,n.lanes=a.lanes,n.child=a.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=a.memoizedProps,n.memoizedState=a.memoizedState,n.updateQueue=a.updateQueue,n.type=a.type,i=a.dependencies,n.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),n}function Tu(n,i,a,l,f,p){var E=0;if(l=n,typeof n=="function")of(n)&&(E=1);else if(typeof n=="string")E=ww(n,a,ye.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case I:return n=wn(31,a,i,f),n.elementType=I,n.lanes=p,n;case C:return Hr(a.children,f,p,i);case F:E=8,f|=24;break;case w:return n=wn(12,a,i,f|2),n.elementType=w,n.lanes=p,n;case U:return n=wn(13,a,i,f),n.elementType=U,n.lanes=p,n;case he:return n=wn(19,a,i,f),n.elementType=he,n.lanes=p,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case G:case ee:E=10;break e;case te:E=9;break e;case Y:E=11;break e;case k:E=14;break e;case x:E=16,l=null;break e}E=29,a=Error(r(130,n===null?"null":typeof n,"")),l=null}return i=wn(E,a,i,f),i.elementType=n,i.type=l,i.lanes=p,i}function Hr(n,i,a,l){return n=wn(7,n,l,i),n.lanes=a,n}function lf(n,i,a){return n=wn(6,n,null,i),n.lanes=a,n}function cf(n,i,a){return i=wn(4,n.children!==null?n.children:[],n.key,i),i.lanes=a,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}var qa=[],Ba=0,Eu=null,bu=0,Gn=[],$n=0,Gr=null,Zs=1,Ws="";function $r(n,i){qa[Ba++]=bu,qa[Ba++]=Eu,Eu=n,bu=i}function Rv(n,i,a){Gn[$n++]=Zs,Gn[$n++]=Ws,Gn[$n++]=Gr,Gr=n;var l=Zs;n=Ws;var f=32-tn(l)-1;l&=~(1<<f),a+=1;var p=32-tn(i)+f;if(30<p){var E=f-f%5;p=(l&(1<<E)-1).toString(32),l>>=E,f-=E,Zs=1<<32-tn(i)+f|a<<f|l,Ws=p+n}else Zs=1<<p|a<<f|l,Ws=n}function uf(n){n.return!==null&&($r(n,1),Rv(n,1,0))}function hf(n){for(;n===Eu;)Eu=qa[--Ba],qa[Ba]=null,bu=qa[--Ba],qa[Ba]=null;for(;n===Gr;)Gr=Gn[--$n],Gn[$n]=null,Ws=Gn[--$n],Gn[$n]=null,Zs=Gn[--$n],Gn[$n]=null}var mn=null,mt=null,Qe=!1,Kr=null,bs=!1,df=Error(r(519));function Qr(n){var i=Error(r(418,""));throw yl(Bn(i,n)),df}function Dv(n){var i=n.stateNode,a=n.type,l=n.memoizedProps;switch(i[It]=n,i[Et]=l,a){case"dialog":Le("cancel",i),Le("close",i);break;case"iframe":case"object":case"embed":Le("load",i);break;case"video":case"audio":for(a=0;a<ql.length;a++)Le(ql[a],i);break;case"source":Le("error",i);break;case"img":case"image":case"link":Le("error",i),Le("load",i);break;case"details":Le("toggle",i);break;case"input":Le("invalid",i),jr(i,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),xa(i);break;case"select":Le("invalid",i);break;case"textarea":Le("invalid",i),Or(i,l.value,l.defaultValue,l.children),xa(i)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||l.suppressHydrationWarning===!0||Q_(i.textContent,a)?(l.popover!=null&&(Le("beforetoggle",i),Le("toggle",i)),l.onScroll!=null&&Le("scroll",i),l.onScrollEnd!=null&&Le("scrollend",i),l.onClick!=null&&(i.onclick=nh),i=!0):i=!1,i||Qr(n)}function jv(n){for(mn=n.return;mn;)switch(mn.tag){case 5:case 13:bs=!1;return;case 27:case 3:bs=!0;return;default:mn=mn.return}}function gl(n){if(n!==mn)return!1;if(!Qe)return jv(n),Qe=!0,!1;var i=n.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=n.type,a=!(a!=="form"&&a!=="button")||Im(n.type,n.memoizedProps)),a=!a),a&&mt&&Qr(n),jv(n),i===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));e:{for(n=n.nextSibling,i=0;n;){if(n.nodeType===8)if(a=n.data,a==="/$"){if(i===0){mt=ss(n.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++;n=n.nextSibling}mt=null}}else i===27?(i=mt,zi(n.type)?(n=jm,jm=null,mt=n):mt=i):mt=mn?ss(n.stateNode.nextSibling):null;return!0}function vl(){mt=mn=null,Qe=!1}function Ov(){var n=Kr;return n!==null&&(Tn===null?Tn=n:Tn.push.apply(Tn,n),Kr=null),n}function yl(n){Kr===null?Kr=[n]:Kr.push(n)}var ff=ie(null),Yr=null,Js=null;function wi(n,i,a){re(ff,i._currentValue),i._currentValue=a}function ei(n){n._currentValue=ff.current,ue(ff)}function mf(n,i,a){for(;n!==null;){var l=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,l!==null&&(l.childLanes|=i)):l!==null&&(l.childLanes&i)!==i&&(l.childLanes|=i),n===a)break;n=n.return}}function pf(n,i,a,l){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var p=f.dependencies;if(p!==null){var E=f.child;p=p.firstContext;e:for(;p!==null;){var N=p;p=f;for(var O=0;O<i.length;O++)if(N.context===i[O]){p.lanes|=a,N=p.alternate,N!==null&&(N.lanes|=a),mf(p.return,a,n),l||(E=null);break e}p=N.next}}else if(f.tag===18){if(E=f.return,E===null)throw Error(r(341));E.lanes|=a,p=E.alternate,p!==null&&(p.lanes|=a),mf(E,a,n),E=null}else E=f.child;if(E!==null)E.return=f;else for(E=f;E!==null;){if(E===n){E=null;break}if(f=E.sibling,f!==null){f.return=E.return,E=f;break}E=E.return}f=E}}function _l(n,i,a,l){n=null;for(var f=i,p=!1;f!==null;){if(!p){if((f.flags&524288)!==0)p=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var E=f.alternate;if(E===null)throw Error(r(387));if(E=E.memoizedProps,E!==null){var N=f.type;Sn(f.pendingProps.value,E.value)||(n!==null?n.push(N):n=[N])}}else if(f===kt.current){if(E=f.alternate,E===null)throw Error(r(387));E.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(Ql):n=[Ql])}f=f.return}n!==null&&pf(i,n,a,l),i.flags|=262144}function Au(n){for(n=n.firstContext;n!==null;){if(!Sn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Xr(n){Yr=n,Js=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function nn(n){return Mv(Yr,n)}function Nu(n,i){return Yr===null&&Xr(n),Mv(n,i)}function Mv(n,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},Js===null){if(n===null)throw Error(r(308));Js=i,n.dependencies={lanes:0,firstContext:i},n.flags|=524288}else Js=Js.next=i;return a}var SS=typeof AbortController<"u"?AbortController:function(){var n=[],i=this.signal={aborted:!1,addEventListener:function(a,l){n.push(l)}};this.abort=function(){i.aborted=!0,n.forEach(function(a){return a()})}},wS=s.unstable_scheduleCallback,xS=s.unstable_NormalPriority,Dt={$$typeof:ee,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function gf(){return{controller:new SS,data:new Map,refCount:0}}function Tl(n){n.refCount--,n.refCount===0&&wS(xS,function(){n.controller.abort()})}var El=null,vf=0,Ha=0,Ga=null;function IS(n,i){if(El===null){var a=El=[];vf=0,Ha=_m(),Ga={status:"pending",value:void 0,then:function(l){a.push(l)}}}return vf++,i.then(Vv,Vv),i}function Vv(){if(--vf===0&&El!==null){Ga!==null&&(Ga.status="fulfilled");var n=El;El=null,Ha=0,Ga=null;for(var i=0;i<n.length;i++)(0,n[i])()}}function CS(n,i){var a=[],l={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return n.then(function(){l.status="fulfilled",l.value=i;for(var f=0;f<a.length;f++)(0,a[f])(i)},function(f){for(l.status="rejected",l.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),l}var kv=X.S;X.S=function(n,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&IS(n,i),kv!==null&&kv(n,i)};var Zr=ie(null);function yf(){var n=Zr.current;return n!==null?n:at.pooledCache}function Su(n,i){i===null?re(Zr,Zr.current):re(Zr,i.pool)}function Pv(){var n=yf();return n===null?null:{parent:Dt._currentValue,pool:n}}var bl=Error(r(460)),Lv=Error(r(474)),wu=Error(r(542)),_f={then:function(){}};function Uv(n){return n=n.status,n==="fulfilled"||n==="rejected"}function xu(){}function Fv(n,i,a){switch(a=n[a],a===void 0?n.push(i):a!==i&&(i.then(xu,xu),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,qv(n),n;default:if(typeof i.status=="string")i.then(xu,xu);else{if(n=at,n!==null&&100<n.shellSuspendCounter)throw Error(r(482));n=i,n.status="pending",n.then(function(l){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=l}},function(l){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=l}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,qv(n),n}throw Al=i,bl}}var Al=null;function zv(){if(Al===null)throw Error(r(459));var n=Al;return Al=null,n}function qv(n){if(n===bl||n===wu)throw Error(r(483))}var xi=!1;function Tf(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ef(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Ii(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Ci(n,i,a){var l=n.updateQueue;if(l===null)return null;if(l=l.shared,(Ze&2)!==0){var f=l.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),l.pending=i,i=_u(n),Iv(n,null,a),i}return yu(n,l,i,a),_u(n)}function Nl(n,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var l=i.lanes;l&=n.pendingLanes,a|=l,i.lanes=a,Wo(n,a)}}function bf(n,i){var a=n.updateQueue,l=n.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var f=null,p=null;if(a=a.firstBaseUpdate,a!==null){do{var E={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};p===null?f=p=E:p=p.next=E,a=a.next}while(a!==null);p===null?f=p=i:p=p.next=i}else f=p=i;a={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:p,shared:l.shared,callbacks:l.callbacks},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=i:n.next=i,a.lastBaseUpdate=i}var Af=!1;function Sl(){if(Af){var n=Ga;if(n!==null)throw n}}function wl(n,i,a,l){Af=!1;var f=n.updateQueue;xi=!1;var p=f.firstBaseUpdate,E=f.lastBaseUpdate,N=f.shared.pending;if(N!==null){f.shared.pending=null;var O=N,H=O.next;O.next=null,E===null?p=H:E.next=H,E=O;var Z=n.alternate;Z!==null&&(Z=Z.updateQueue,N=Z.lastBaseUpdate,N!==E&&(N===null?Z.firstBaseUpdate=H:N.next=H,Z.lastBaseUpdate=O))}if(p!==null){var ne=f.baseState;E=0,Z=H=O=null,N=p;do{var $=N.lane&-536870913,K=$!==N.lane;if(K?(Be&$)===$:(l&$)===$){$!==0&&$===Ha&&(Af=!0),Z!==null&&(Z=Z.next={lane:0,tag:N.tag,payload:N.payload,callback:null,next:null});e:{var Ae=n,Te=N;$=i;var nt=a;switch(Te.tag){case 1:if(Ae=Te.payload,typeof Ae=="function"){ne=Ae.call(nt,ne,$);break e}ne=Ae;break e;case 3:Ae.flags=Ae.flags&-65537|128;case 0:if(Ae=Te.payload,$=typeof Ae=="function"?Ae.call(nt,ne,$):Ae,$==null)break e;ne=_({},ne,$);break e;case 2:xi=!0}}$=N.callback,$!==null&&(n.flags|=64,K&&(n.flags|=8192),K=f.callbacks,K===null?f.callbacks=[$]:K.push($))}else K={lane:$,tag:N.tag,payload:N.payload,callback:N.callback,next:null},Z===null?(H=Z=K,O=ne):Z=Z.next=K,E|=$;if(N=N.next,N===null){if(N=f.shared.pending,N===null)break;K=N,N=K.next,K.next=null,f.lastBaseUpdate=K,f.shared.pending=null}}while(!0);Z===null&&(O=ne),f.baseState=O,f.firstBaseUpdate=H,f.lastBaseUpdate=Z,p===null&&(f.shared.lanes=0),Pi|=E,n.lanes=E,n.memoizedState=ne}}function Bv(n,i){if(typeof n!="function")throw Error(r(191,n));n.call(i)}function Hv(n,i){var a=n.callbacks;if(a!==null)for(n.callbacks=null,n=0;n<a.length;n++)Bv(a[n],i)}var $a=ie(null),Iu=ie(0);function Gv(n,i){n=oi,re(Iu,n),re($a,i),oi=n|i.baseLanes}function Nf(){re(Iu,oi),re($a,$a.current)}function Sf(){oi=Iu.current,ue($a),ue(Iu)}var Ri=0,Oe=null,et=null,At=null,Cu=!1,Ka=!1,Wr=!1,Ru=0,xl=0,Qa=null,RS=0;function yt(){throw Error(r(321))}function wf(n,i){if(i===null)return!1;for(var a=0;a<i.length&&a<n.length;a++)if(!Sn(n[a],i[a]))return!1;return!0}function xf(n,i,a,l,f,p){return Ri=p,Oe=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,X.H=n===null||n.memoizedState===null?Iy:Cy,Wr=!1,p=a(l,f),Wr=!1,Ka&&(p=Kv(i,a,l,f)),$v(n),p}function $v(n){X.H=ku;var i=et!==null&&et.next!==null;if(Ri=0,At=et=Oe=null,Cu=!1,xl=0,Qa=null,i)throw Error(r(300));n===null||Ut||(n=n.dependencies,n!==null&&Au(n)&&(Ut=!0))}function Kv(n,i,a,l){Oe=n;var f=0;do{if(Ka&&(Qa=null),xl=0,Ka=!1,25<=f)throw Error(r(301));if(f+=1,At=et=null,n.updateQueue!=null){var p=n.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}X.H=PS,p=i(a,l)}while(Ka);return p}function DS(){var n=X.H,i=n.useState()[0];return i=typeof i.then=="function"?Il(i):i,n=n.useState()[0],(et!==null?et.memoizedState:null)!==n&&(Oe.flags|=1024),i}function If(){var n=Ru!==0;return Ru=0,n}function Cf(n,i,a){i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~a}function Rf(n){if(Cu){for(n=n.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Cu=!1}Ri=0,At=et=Oe=null,Ka=!1,xl=Ru=0,Qa=null}function yn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return At===null?Oe.memoizedState=At=n:At=At.next=n,At}function Nt(){if(et===null){var n=Oe.alternate;n=n!==null?n.memoizedState:null}else n=et.next;var i=At===null?Oe.memoizedState:At.next;if(i!==null)At=i,et=n;else{if(n===null)throw Oe.alternate===null?Error(r(467)):Error(r(310));et=n,n={memoizedState:et.memoizedState,baseState:et.baseState,baseQueue:et.baseQueue,queue:et.queue,next:null},At===null?Oe.memoizedState=At=n:At=At.next=n}return At}function Df(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Il(n){var i=xl;return xl+=1,Qa===null&&(Qa=[]),n=Fv(Qa,n,i),i=Oe,(At===null?i.memoizedState:At.next)===null&&(i=i.alternate,X.H=i===null||i.memoizedState===null?Iy:Cy),n}function Du(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Il(n);if(n.$$typeof===ee)return nn(n)}throw Error(r(438,String(n)))}function jf(n){var i=null,a=Oe.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var l=Oe.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(i={data:l.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=Df(),Oe.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(n),l=0;l<n;l++)a[l]=M;return i.index++,a}function ti(n,i){return typeof i=="function"?i(n):i}function ju(n){var i=Nt();return Of(i,et,n)}function Of(n,i,a){var l=n.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=a;var f=n.baseQueue,p=l.pending;if(p!==null){if(f!==null){var E=f.next;f.next=p.next,p.next=E}i.baseQueue=f=p,l.pending=null}if(p=n.baseState,f===null)n.memoizedState=p;else{i=f.next;var N=E=null,O=null,H=i,Z=!1;do{var ne=H.lane&-536870913;if(ne!==H.lane?(Be&ne)===ne:(Ri&ne)===ne){var $=H.revertLane;if($===0)O!==null&&(O=O.next={lane:0,revertLane:0,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null}),ne===Ha&&(Z=!0);else if((Ri&$)===$){H=H.next,$===Ha&&(Z=!0);continue}else ne={lane:0,revertLane:H.revertLane,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},O===null?(N=O=ne,E=p):O=O.next=ne,Oe.lanes|=$,Pi|=$;ne=H.action,Wr&&a(p,ne),p=H.hasEagerState?H.eagerState:a(p,ne)}else $={lane:ne,revertLane:H.revertLane,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},O===null?(N=O=$,E=p):O=O.next=$,Oe.lanes|=ne,Pi|=ne;H=H.next}while(H!==null&&H!==i);if(O===null?E=p:O.next=N,!Sn(p,n.memoizedState)&&(Ut=!0,Z&&(a=Ga,a!==null)))throw a;n.memoizedState=p,n.baseState=E,n.baseQueue=O,l.lastRenderedState=p}return f===null&&(l.lanes=0),[n.memoizedState,l.dispatch]}function Mf(n){var i=Nt(),a=i.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=n;var l=a.dispatch,f=a.pending,p=i.memoizedState;if(f!==null){a.pending=null;var E=f=f.next;do p=n(p,E.action),E=E.next;while(E!==f);Sn(p,i.memoizedState)||(Ut=!0),i.memoizedState=p,i.baseQueue===null&&(i.baseState=p),a.lastRenderedState=p}return[p,l]}function Qv(n,i,a){var l=Oe,f=Nt(),p=Qe;if(p){if(a===void 0)throw Error(r(407));a=a()}else a=i();var E=!Sn((et||f).memoizedState,a);E&&(f.memoizedState=a,Ut=!0),f=f.queue;var N=Zv.bind(null,l,f,n);if(Cl(2048,8,N,[n]),f.getSnapshot!==i||E||At!==null&&At.memoizedState.tag&1){if(l.flags|=2048,Ya(9,Ou(),Xv.bind(null,l,f,a,i),null),at===null)throw Error(r(349));p||(Ri&124)!==0||Yv(l,i,a)}return a}function Yv(n,i,a){n.flags|=16384,n={getSnapshot:i,value:a},i=Oe.updateQueue,i===null?(i=Df(),Oe.updateQueue=i,i.stores=[n]):(a=i.stores,a===null?i.stores=[n]:a.push(n))}function Xv(n,i,a,l){i.value=a,i.getSnapshot=l,Wv(i)&&Jv(n)}function Zv(n,i,a){return a(function(){Wv(i)&&Jv(n)})}function Wv(n){var i=n.getSnapshot;n=n.value;try{var a=i();return!Sn(n,a)}catch{return!0}}function Jv(n){var i=Fa(n,2);i!==null&&Dn(i,n,2)}function Vf(n){var i=yn();if(typeof n=="function"){var a=n;if(n=a(),Wr){An(!0);try{a()}finally{An(!1)}}}return i.memoizedState=i.baseState=n,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ti,lastRenderedState:n},i}function ey(n,i,a,l){return n.baseState=a,Of(n,et,typeof l=="function"?l:ti)}function jS(n,i,a,l,f){if(Vu(n))throw Error(r(485));if(n=i.action,n!==null){var p={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){p.listeners.push(E)}};X.T!==null?a(!0):p.isTransition=!1,l(p),a=i.pending,a===null?(p.next=i.pending=p,ty(i,p)):(p.next=a.next,i.pending=a.next=p)}}function ty(n,i){var a=i.action,l=i.payload,f=n.state;if(i.isTransition){var p=X.T,E={};X.T=E;try{var N=a(f,l),O=X.S;O!==null&&O(E,N),ny(n,i,N)}catch(H){kf(n,i,H)}finally{X.T=p}}else try{p=a(f,l),ny(n,i,p)}catch(H){kf(n,i,H)}}function ny(n,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){sy(n,i,l)},function(l){return kf(n,i,l)}):sy(n,i,a)}function sy(n,i,a){i.status="fulfilled",i.value=a,iy(i),n.state=a,i=n.pending,i!==null&&(a=i.next,a===i?n.pending=null:(a=a.next,i.next=a,ty(n,a)))}function kf(n,i,a){var l=n.pending;if(n.pending=null,l!==null){l=l.next;do i.status="rejected",i.reason=a,iy(i),i=i.next;while(i!==l)}n.action=null}function iy(n){n=n.listeners;for(var i=0;i<n.length;i++)(0,n[i])()}function ry(n,i){return i}function ay(n,i){if(Qe){var a=at.formState;if(a!==null){e:{var l=Oe;if(Qe){if(mt){t:{for(var f=mt,p=bs;f.nodeType!==8;){if(!p){f=null;break t}if(f=ss(f.nextSibling),f===null){f=null;break t}}p=f.data,f=p==="F!"||p==="F"?f:null}if(f){mt=ss(f.nextSibling),l=f.data==="F!";break e}}Qr(l)}l=!1}l&&(i=a[0])}}return a=yn(),a.memoizedState=a.baseState=i,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ry,lastRenderedState:i},a.queue=l,a=Sy.bind(null,Oe,l),l.dispatch=a,l=Vf(!1),p=zf.bind(null,Oe,!1,l.queue),l=yn(),f={state:i,dispatch:null,action:n,pending:null},l.queue=f,a=jS.bind(null,Oe,f,p,a),f.dispatch=a,l.memoizedState=n,[i,a,!1]}function oy(n){var i=Nt();return ly(i,et,n)}function ly(n,i,a){if(i=Of(n,i,ry)[0],n=ju(ti)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var l=Il(i)}catch(E){throw E===bl?wu:E}else l=i;i=Nt();var f=i.queue,p=f.dispatch;return a!==i.memoizedState&&(Oe.flags|=2048,Ya(9,Ou(),OS.bind(null,f,a),null)),[l,p,n]}function OS(n,i){n.action=i}function cy(n){var i=Nt(),a=et;if(a!==null)return ly(i,a,n);Nt(),i=i.memoizedState,a=Nt();var l=a.queue.dispatch;return a.memoizedState=n,[i,l,!1]}function Ya(n,i,a,l){return n={tag:n,create:a,deps:l,inst:i,next:null},i=Oe.updateQueue,i===null&&(i=Df(),Oe.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=n.next=n:(l=a.next,a.next=n,n.next=l,i.lastEffect=n),n}function Ou(){return{destroy:void 0,resource:void 0}}function uy(){return Nt().memoizedState}function Mu(n,i,a,l){var f=yn();l=l===void 0?null:l,Oe.flags|=n,f.memoizedState=Ya(1|i,Ou(),a,l)}function Cl(n,i,a,l){var f=Nt();l=l===void 0?null:l;var p=f.memoizedState.inst;et!==null&&l!==null&&wf(l,et.memoizedState.deps)?f.memoizedState=Ya(i,p,a,l):(Oe.flags|=n,f.memoizedState=Ya(1|i,p,a,l))}function hy(n,i){Mu(8390656,8,n,i)}function dy(n,i){Cl(2048,8,n,i)}function fy(n,i){return Cl(4,2,n,i)}function my(n,i){return Cl(4,4,n,i)}function py(n,i){if(typeof i=="function"){n=n();var a=i(n);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function gy(n,i,a){a=a!=null?a.concat([n]):null,Cl(4,4,py.bind(null,i,n),a)}function Pf(){}function vy(n,i){var a=Nt();i=i===void 0?null:i;var l=a.memoizedState;return i!==null&&wf(i,l[1])?l[0]:(a.memoizedState=[n,i],n)}function yy(n,i){var a=Nt();i=i===void 0?null:i;var l=a.memoizedState;if(i!==null&&wf(i,l[1]))return l[0];if(l=n(),Wr){An(!0);try{n()}finally{An(!1)}}return a.memoizedState=[l,i],l}function Lf(n,i,a){return a===void 0||(Ri&1073741824)!==0?n.memoizedState=i:(n.memoizedState=a,n=E_(),Oe.lanes|=n,Pi|=n,a)}function _y(n,i,a,l){return Sn(a,i)?a:$a.current!==null?(n=Lf(n,a,l),Sn(n,i)||(Ut=!0),n):(Ri&42)===0?(Ut=!0,n.memoizedState=a):(n=E_(),Oe.lanes|=n,Pi|=n,i)}function Ty(n,i,a,l,f){var p=ae.p;ae.p=p!==0&&8>p?p:8;var E=X.T,N={};X.T=N,zf(n,!1,i,a);try{var O=f(),H=X.S;if(H!==null&&H(N,O),O!==null&&typeof O=="object"&&typeof O.then=="function"){var Z=CS(O,l);Rl(n,i,Z,Rn(n))}else Rl(n,i,l,Rn(n))}catch(ne){Rl(n,i,{then:function(){},status:"rejected",reason:ne},Rn())}finally{ae.p=p,X.T=E}}function MS(){}function Uf(n,i,a,l){if(n.tag!==5)throw Error(r(476));var f=Ey(n).queue;Ty(n,f,i,ce,a===null?MS:function(){return by(n),a(l)})}function Ey(n){var i=n.memoizedState;if(i!==null)return i;i={memoizedState:ce,baseState:ce,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ti,lastRenderedState:ce},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ti,lastRenderedState:a},next:null},n.memoizedState=i,n=n.alternate,n!==null&&(n.memoizedState=i),i}function by(n){var i=Ey(n).next.queue;Rl(n,i,{},Rn())}function Ff(){return nn(Ql)}function Ay(){return Nt().memoizedState}function Ny(){return Nt().memoizedState}function VS(n){for(var i=n.return;i!==null;){switch(i.tag){case 24:case 3:var a=Rn();n=Ii(a);var l=Ci(i,n,a);l!==null&&(Dn(l,i,a),Nl(l,i,a)),i={cache:gf()},n.payload=i;return}i=i.return}}function kS(n,i,a){var l=Rn();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},Vu(n)?wy(i,a):(a=af(n,i,a,l),a!==null&&(Dn(a,n,l),xy(a,i,l)))}function Sy(n,i,a){var l=Rn();Rl(n,i,a,l)}function Rl(n,i,a,l){var f={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(Vu(n))wy(i,f);else{var p=n.alternate;if(n.lanes===0&&(p===null||p.lanes===0)&&(p=i.lastRenderedReducer,p!==null))try{var E=i.lastRenderedState,N=p(E,a);if(f.hasEagerState=!0,f.eagerState=N,Sn(N,E))return yu(n,i,f,0),at===null&&vu(),!1}catch{}finally{}if(a=af(n,i,f,l),a!==null)return Dn(a,n,l),xy(a,i,l),!0}return!1}function zf(n,i,a,l){if(l={lane:2,revertLane:_m(),action:l,hasEagerState:!1,eagerState:null,next:null},Vu(n)){if(i)throw Error(r(479))}else i=af(n,a,l,2),i!==null&&Dn(i,n,2)}function Vu(n){var i=n.alternate;return n===Oe||i!==null&&i===Oe}function wy(n,i){Ka=Cu=!0;var a=n.pending;a===null?i.next=i:(i.next=a.next,a.next=i),n.pending=i}function xy(n,i,a){if((a&4194048)!==0){var l=i.lanes;l&=n.pendingLanes,a|=l,i.lanes=a,Wo(n,a)}}var ku={readContext:nn,use:Du,useCallback:yt,useContext:yt,useEffect:yt,useImperativeHandle:yt,useLayoutEffect:yt,useInsertionEffect:yt,useMemo:yt,useReducer:yt,useRef:yt,useState:yt,useDebugValue:yt,useDeferredValue:yt,useTransition:yt,useSyncExternalStore:yt,useId:yt,useHostTransitionStatus:yt,useFormState:yt,useActionState:yt,useOptimistic:yt,useMemoCache:yt,useCacheRefresh:yt},Iy={readContext:nn,use:Du,useCallback:function(n,i){return yn().memoizedState=[n,i===void 0?null:i],n},useContext:nn,useEffect:hy,useImperativeHandle:function(n,i,a){a=a!=null?a.concat([n]):null,Mu(4194308,4,py.bind(null,i,n),a)},useLayoutEffect:function(n,i){return Mu(4194308,4,n,i)},useInsertionEffect:function(n,i){Mu(4,2,n,i)},useMemo:function(n,i){var a=yn();i=i===void 0?null:i;var l=n();if(Wr){An(!0);try{n()}finally{An(!1)}}return a.memoizedState=[l,i],l},useReducer:function(n,i,a){var l=yn();if(a!==void 0){var f=a(i);if(Wr){An(!0);try{a(i)}finally{An(!1)}}}else f=i;return l.memoizedState=l.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},l.queue=n,n=n.dispatch=kS.bind(null,Oe,n),[l.memoizedState,n]},useRef:function(n){var i=yn();return n={current:n},i.memoizedState=n},useState:function(n){n=Vf(n);var i=n.queue,a=Sy.bind(null,Oe,i);return i.dispatch=a,[n.memoizedState,a]},useDebugValue:Pf,useDeferredValue:function(n,i){var a=yn();return Lf(a,n,i)},useTransition:function(){var n=Vf(!1);return n=Ty.bind(null,Oe,n.queue,!0,!1),yn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,i,a){var l=Oe,f=yn();if(Qe){if(a===void 0)throw Error(r(407));a=a()}else{if(a=i(),at===null)throw Error(r(349));(Be&124)!==0||Yv(l,i,a)}f.memoizedState=a;var p={value:a,getSnapshot:i};return f.queue=p,hy(Zv.bind(null,l,p,n),[n]),l.flags|=2048,Ya(9,Ou(),Xv.bind(null,l,p,a,i),null),a},useId:function(){var n=yn(),i=at.identifierPrefix;if(Qe){var a=Ws,l=Zs;a=(l&~(1<<32-tn(l)-1)).toString(32)+a,i="«"+i+"R"+a,a=Ru++,0<a&&(i+="H"+a.toString(32)),i+="»"}else a=RS++,i="«"+i+"r"+a.toString(32)+"»";return n.memoizedState=i},useHostTransitionStatus:Ff,useFormState:ay,useActionState:ay,useOptimistic:function(n){var i=yn();i.memoizedState=i.baseState=n;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=zf.bind(null,Oe,!0,a),a.dispatch=i,[n,i]},useMemoCache:jf,useCacheRefresh:function(){return yn().memoizedState=VS.bind(null,Oe)}},Cy={readContext:nn,use:Du,useCallback:vy,useContext:nn,useEffect:dy,useImperativeHandle:gy,useInsertionEffect:fy,useLayoutEffect:my,useMemo:yy,useReducer:ju,useRef:uy,useState:function(){return ju(ti)},useDebugValue:Pf,useDeferredValue:function(n,i){var a=Nt();return _y(a,et.memoizedState,n,i)},useTransition:function(){var n=ju(ti)[0],i=Nt().memoizedState;return[typeof n=="boolean"?n:Il(n),i]},useSyncExternalStore:Qv,useId:Ay,useHostTransitionStatus:Ff,useFormState:oy,useActionState:oy,useOptimistic:function(n,i){var a=Nt();return ey(a,et,n,i)},useMemoCache:jf,useCacheRefresh:Ny},PS={readContext:nn,use:Du,useCallback:vy,useContext:nn,useEffect:dy,useImperativeHandle:gy,useInsertionEffect:fy,useLayoutEffect:my,useMemo:yy,useReducer:Mf,useRef:uy,useState:function(){return Mf(ti)},useDebugValue:Pf,useDeferredValue:function(n,i){var a=Nt();return et===null?Lf(a,n,i):_y(a,et.memoizedState,n,i)},useTransition:function(){var n=Mf(ti)[0],i=Nt().memoizedState;return[typeof n=="boolean"?n:Il(n),i]},useSyncExternalStore:Qv,useId:Ay,useHostTransitionStatus:Ff,useFormState:cy,useActionState:cy,useOptimistic:function(n,i){var a=Nt();return et!==null?ey(a,et,n,i):(a.baseState=n,[n,a.queue.dispatch])},useMemoCache:jf,useCacheRefresh:Ny},Xa=null,Dl=0;function Pu(n){var i=Dl;return Dl+=1,Xa===null&&(Xa=[]),Fv(Xa,n,i)}function jl(n,i){i=i.props.ref,n.ref=i!==void 0?i:null}function Lu(n,i){throw i.$$typeof===A?Error(r(525)):(n=Object.prototype.toString.call(i),Error(r(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n)))}function Ry(n){var i=n._init;return i(n._payload)}function Dy(n){function i(z,L){if(n){var B=z.deletions;B===null?(z.deletions=[L],z.flags|=16):B.push(L)}}function a(z,L){if(!n)return null;for(;L!==null;)i(z,L),L=L.sibling;return null}function l(z){for(var L=new Map;z!==null;)z.key!==null?L.set(z.key,z):L.set(z.index,z),z=z.sibling;return L}function f(z,L){return z=Xs(z,L),z.index=0,z.sibling=null,z}function p(z,L,B){return z.index=B,n?(B=z.alternate,B!==null?(B=B.index,B<L?(z.flags|=67108866,L):B):(z.flags|=67108866,L)):(z.flags|=1048576,L)}function E(z){return n&&z.alternate===null&&(z.flags|=67108866),z}function N(z,L,B,W){return L===null||L.tag!==6?(L=lf(B,z.mode,W),L.return=z,L):(L=f(L,B),L.return=z,L)}function O(z,L,B,W){var me=B.type;return me===C?Z(z,L,B.props.children,W,B.key):L!==null&&(L.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===x&&Ry(me)===L.type)?(L=f(L,B.props),jl(L,B),L.return=z,L):(L=Tu(B.type,B.key,B.props,null,z.mode,W),jl(L,B),L.return=z,L)}function H(z,L,B,W){return L===null||L.tag!==4||L.stateNode.containerInfo!==B.containerInfo||L.stateNode.implementation!==B.implementation?(L=cf(B,z.mode,W),L.return=z,L):(L=f(L,B.children||[]),L.return=z,L)}function Z(z,L,B,W,me){return L===null||L.tag!==7?(L=Hr(B,z.mode,W,me),L.return=z,L):(L=f(L,B),L.return=z,L)}function ne(z,L,B){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return L=lf(""+L,z.mode,B),L.return=z,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case b:return B=Tu(L.type,L.key,L.props,null,z.mode,B),jl(B,L),B.return=z,B;case D:return L=cf(L,z.mode,B),L.return=z,L;case x:var W=L._init;return L=W(L._payload),ne(z,L,B)}if(xe(L)||j(L))return L=Hr(L,z.mode,B,null),L.return=z,L;if(typeof L.then=="function")return ne(z,Pu(L),B);if(L.$$typeof===ee)return ne(z,Nu(z,L),B);Lu(z,L)}return null}function $(z,L,B,W){var me=L!==null?L.key:null;if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return me!==null?null:N(z,L,""+B,W);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case b:return B.key===me?O(z,L,B,W):null;case D:return B.key===me?H(z,L,B,W):null;case x:return me=B._init,B=me(B._payload),$(z,L,B,W)}if(xe(B)||j(B))return me!==null?null:Z(z,L,B,W,null);if(typeof B.then=="function")return $(z,L,Pu(B),W);if(B.$$typeof===ee)return $(z,L,Nu(z,B),W);Lu(z,B)}return null}function K(z,L,B,W,me){if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return z=z.get(B)||null,N(L,z,""+W,me);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case b:return z=z.get(W.key===null?B:W.key)||null,O(L,z,W,me);case D:return z=z.get(W.key===null?B:W.key)||null,H(L,z,W,me);case x:var ke=W._init;return W=ke(W._payload),K(z,L,B,W,me)}if(xe(W)||j(W))return z=z.get(B)||null,Z(L,z,W,me,null);if(typeof W.then=="function")return K(z,L,B,Pu(W),me);if(W.$$typeof===ee)return K(z,L,B,Nu(L,W),me);Lu(L,W)}return null}function Ae(z,L,B,W){for(var me=null,ke=null,ge=L,Ee=L=0,zt=null;ge!==null&&Ee<B.length;Ee++){ge.index>Ee?(zt=ge,ge=null):zt=ge.sibling;var Ke=$(z,ge,B[Ee],W);if(Ke===null){ge===null&&(ge=zt);break}n&&ge&&Ke.alternate===null&&i(z,ge),L=p(Ke,L,Ee),ke===null?me=Ke:ke.sibling=Ke,ke=Ke,ge=zt}if(Ee===B.length)return a(z,ge),Qe&&$r(z,Ee),me;if(ge===null){for(;Ee<B.length;Ee++)ge=ne(z,B[Ee],W),ge!==null&&(L=p(ge,L,Ee),ke===null?me=ge:ke.sibling=ge,ke=ge);return Qe&&$r(z,Ee),me}for(ge=l(ge);Ee<B.length;Ee++)zt=K(ge,z,Ee,B[Ee],W),zt!==null&&(n&&zt.alternate!==null&&ge.delete(zt.key===null?Ee:zt.key),L=p(zt,L,Ee),ke===null?me=zt:ke.sibling=zt,ke=zt);return n&&ge.forEach(function($i){return i(z,$i)}),Qe&&$r(z,Ee),me}function Te(z,L,B,W){if(B==null)throw Error(r(151));for(var me=null,ke=null,ge=L,Ee=L=0,zt=null,Ke=B.next();ge!==null&&!Ke.done;Ee++,Ke=B.next()){ge.index>Ee?(zt=ge,ge=null):zt=ge.sibling;var $i=$(z,ge,Ke.value,W);if($i===null){ge===null&&(ge=zt);break}n&&ge&&$i.alternate===null&&i(z,ge),L=p($i,L,Ee),ke===null?me=$i:ke.sibling=$i,ke=$i,ge=zt}if(Ke.done)return a(z,ge),Qe&&$r(z,Ee),me;if(ge===null){for(;!Ke.done;Ee++,Ke=B.next())Ke=ne(z,Ke.value,W),Ke!==null&&(L=p(Ke,L,Ee),ke===null?me=Ke:ke.sibling=Ke,ke=Ke);return Qe&&$r(z,Ee),me}for(ge=l(ge);!Ke.done;Ee++,Ke=B.next())Ke=K(ge,z,Ee,Ke.value,W),Ke!==null&&(n&&Ke.alternate!==null&&ge.delete(Ke.key===null?Ee:Ke.key),L=p(Ke,L,Ee),ke===null?me=Ke:ke.sibling=Ke,ke=Ke);return n&&ge.forEach(function(Lw){return i(z,Lw)}),Qe&&$r(z,Ee),me}function nt(z,L,B,W){if(typeof B=="object"&&B!==null&&B.type===C&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case b:e:{for(var me=B.key;L!==null;){if(L.key===me){if(me=B.type,me===C){if(L.tag===7){a(z,L.sibling),W=f(L,B.props.children),W.return=z,z=W;break e}}else if(L.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===x&&Ry(me)===L.type){a(z,L.sibling),W=f(L,B.props),jl(W,B),W.return=z,z=W;break e}a(z,L);break}else i(z,L);L=L.sibling}B.type===C?(W=Hr(B.props.children,z.mode,W,B.key),W.return=z,z=W):(W=Tu(B.type,B.key,B.props,null,z.mode,W),jl(W,B),W.return=z,z=W)}return E(z);case D:e:{for(me=B.key;L!==null;){if(L.key===me)if(L.tag===4&&L.stateNode.containerInfo===B.containerInfo&&L.stateNode.implementation===B.implementation){a(z,L.sibling),W=f(L,B.children||[]),W.return=z,z=W;break e}else{a(z,L);break}else i(z,L);L=L.sibling}W=cf(B,z.mode,W),W.return=z,z=W}return E(z);case x:return me=B._init,B=me(B._payload),nt(z,L,B,W)}if(xe(B))return Ae(z,L,B,W);if(j(B)){if(me=j(B),typeof me!="function")throw Error(r(150));return B=me.call(B),Te(z,L,B,W)}if(typeof B.then=="function")return nt(z,L,Pu(B),W);if(B.$$typeof===ee)return nt(z,L,Nu(z,B),W);Lu(z,B)}return typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint"?(B=""+B,L!==null&&L.tag===6?(a(z,L.sibling),W=f(L,B),W.return=z,z=W):(a(z,L),W=lf(B,z.mode,W),W.return=z,z=W),E(z)):a(z,L)}return function(z,L,B,W){try{Dl=0;var me=nt(z,L,B,W);return Xa=null,me}catch(ge){if(ge===bl||ge===wu)throw ge;var ke=wn(29,ge,null,z.mode);return ke.lanes=W,ke.return=z,ke}finally{}}}var Za=Dy(!0),jy=Dy(!1),Kn=ie(null),As=null;function Di(n){var i=n.alternate;re(jt,jt.current&1),re(Kn,n),As===null&&(i===null||$a.current!==null||i.memoizedState!==null)&&(As=n)}function Oy(n){if(n.tag===22){if(re(jt,jt.current),re(Kn,n),As===null){var i=n.alternate;i!==null&&i.memoizedState!==null&&(As=n)}}else ji()}function ji(){re(jt,jt.current),re(Kn,Kn.current)}function ni(n){ue(Kn),As===n&&(As=null),ue(jt)}var jt=ie(0);function Uu(n){for(var i=n;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||Dm(a)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function qf(n,i,a,l){i=n.memoizedState,a=a(l,i),a=a==null?i:_({},i,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var Bf={enqueueSetState:function(n,i,a){n=n._reactInternals;var l=Rn(),f=Ii(l);f.payload=i,a!=null&&(f.callback=a),i=Ci(n,f,l),i!==null&&(Dn(i,n,l),Nl(i,n,l))},enqueueReplaceState:function(n,i,a){n=n._reactInternals;var l=Rn(),f=Ii(l);f.tag=1,f.payload=i,a!=null&&(f.callback=a),i=Ci(n,f,l),i!==null&&(Dn(i,n,l),Nl(i,n,l))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var a=Rn(),l=Ii(a);l.tag=2,i!=null&&(l.callback=i),i=Ci(n,l,a),i!==null&&(Dn(i,n,a),Nl(i,n,a))}};function My(n,i,a,l,f,p,E){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(l,p,E):i.prototype&&i.prototype.isPureReactComponent?!ml(a,l)||!ml(f,p):!0}function Vy(n,i,a,l){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,l),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,l),i.state!==n&&Bf.enqueueReplaceState(i,i.state,null)}function Jr(n,i){var a=i;if("ref"in i){a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}if(n=n.defaultProps){a===i&&(a=_({},a));for(var f in n)a[f]===void 0&&(a[f]=n[f])}return a}var Fu=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function ky(n){Fu(n)}function Py(n){console.error(n)}function Ly(n){Fu(n)}function zu(n,i){try{var a=n.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(l){setTimeout(function(){throw l})}}function Uy(n,i,a){try{var l=n.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Hf(n,i,a){return a=Ii(a),a.tag=3,a.payload={element:null},a.callback=function(){zu(n,i)},a}function Fy(n){return n=Ii(n),n.tag=3,n}function zy(n,i,a,l){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var p=l.value;n.payload=function(){return f(p)},n.callback=function(){Uy(i,a,l)}}var E=a.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(n.callback=function(){Uy(i,a,l),typeof f!="function"&&(Li===null?Li=new Set([this]):Li.add(this));var N=l.stack;this.componentDidCatch(l.value,{componentStack:N!==null?N:""})})}function LS(n,i,a,l,f){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(i=a.alternate,i!==null&&_l(i,a,f,!0),a=Kn.current,a!==null){switch(a.tag){case 13:return As===null?mm():a.alternate===null&&pt===0&&(pt=3),a.flags&=-257,a.flags|=65536,a.lanes=f,l===_f?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([l]):i.add(l),gm(n,l,f)),!1;case 22:return a.flags|=65536,l===_f?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([l]):a.add(l)),gm(n,l,f)),!1}throw Error(r(435,a.tag))}return gm(n,l,f),mm(),!1}if(Qe)return i=Kn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,l!==df&&(n=Error(r(422),{cause:l}),yl(Bn(n,a)))):(l!==df&&(i=Error(r(423),{cause:l}),yl(Bn(i,a))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,l=Bn(l,a),f=Hf(n.stateNode,l,f),bf(n,f),pt!==4&&(pt=2)),!1;var p=Error(r(520),{cause:l});if(p=Bn(p,a),Ul===null?Ul=[p]:Ul.push(p),pt!==4&&(pt=2),i===null)return!0;l=Bn(l,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,n=f&-f,a.lanes|=n,n=Hf(a.stateNode,l,n),bf(a,n),!1;case 1:if(i=a.type,p=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(Li===null||!Li.has(p))))return a.flags|=65536,f&=-f,a.lanes|=f,f=Fy(f),zy(f,n,a,l),bf(a,f),!1}a=a.return}while(a!==null);return!1}var qy=Error(r(461)),Ut=!1;function $t(n,i,a,l){i.child=n===null?jy(i,null,a,l):Za(i,n.child,a,l)}function By(n,i,a,l,f){a=a.render;var p=i.ref;if("ref"in l){var E={};for(var N in l)N!=="ref"&&(E[N]=l[N])}else E=l;return Xr(i),l=xf(n,i,a,E,p,f),N=If(),n!==null&&!Ut?(Cf(n,i,f),si(n,i,f)):(Qe&&N&&uf(i),i.flags|=1,$t(n,i,l,f),i.child)}function Hy(n,i,a,l,f){if(n===null){var p=a.type;return typeof p=="function"&&!of(p)&&p.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=p,Gy(n,i,p,l,f)):(n=Tu(a.type,null,l,i,i.mode,f),n.ref=i.ref,n.return=i,i.child=n)}if(p=n.child,!Wf(n,f)){var E=p.memoizedProps;if(a=a.compare,a=a!==null?a:ml,a(E,l)&&n.ref===i.ref)return si(n,i,f)}return i.flags|=1,n=Xs(p,l),n.ref=i.ref,n.return=i,i.child=n}function Gy(n,i,a,l,f){if(n!==null){var p=n.memoizedProps;if(ml(p,l)&&n.ref===i.ref)if(Ut=!1,i.pendingProps=l=p,Wf(n,f))(n.flags&131072)!==0&&(Ut=!0);else return i.lanes=n.lanes,si(n,i,f)}return Gf(n,i,a,l,f)}function $y(n,i,a){var l=i.pendingProps,f=l.children,p=n!==null?n.memoizedState:null;if(l.mode==="hidden"){if((i.flags&128)!==0){if(l=p!==null?p.baseLanes|a:a,n!==null){for(f=i.child=n.child,p=0;f!==null;)p=p|f.lanes|f.childLanes,f=f.sibling;i.childLanes=p&~l}else i.childLanes=0,i.child=null;return Ky(n,i,l,a)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},n!==null&&Su(i,p!==null?p.cachePool:null),p!==null?Gv(i,p):Nf(),Oy(i);else return i.lanes=i.childLanes=536870912,Ky(n,i,p!==null?p.baseLanes|a:a,a)}else p!==null?(Su(i,p.cachePool),Gv(i,p),ji(),i.memoizedState=null):(n!==null&&Su(i,null),Nf(),ji());return $t(n,i,f,a),i.child}function Ky(n,i,a,l){var f=yf();return f=f===null?null:{parent:Dt._currentValue,pool:f},i.memoizedState={baseLanes:a,cachePool:f},n!==null&&Su(i,null),Nf(),Oy(i),n!==null&&_l(n,i,l,!0),null}function qu(n,i){var a=i.ref;if(a===null)n!==null&&n.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(n===null||n.ref!==a)&&(i.flags|=4194816)}}function Gf(n,i,a,l,f){return Xr(i),a=xf(n,i,a,l,void 0,f),l=If(),n!==null&&!Ut?(Cf(n,i,f),si(n,i,f)):(Qe&&l&&uf(i),i.flags|=1,$t(n,i,a,f),i.child)}function Qy(n,i,a,l,f,p){return Xr(i),i.updateQueue=null,a=Kv(i,l,a,f),$v(n),l=If(),n!==null&&!Ut?(Cf(n,i,p),si(n,i,p)):(Qe&&l&&uf(i),i.flags|=1,$t(n,i,a,p),i.child)}function Yy(n,i,a,l,f){if(Xr(i),i.stateNode===null){var p=za,E=a.contextType;typeof E=="object"&&E!==null&&(p=nn(E)),p=new a(l,p),i.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=Bf,i.stateNode=p,p._reactInternals=i,p=i.stateNode,p.props=l,p.state=i.memoizedState,p.refs={},Tf(i),E=a.contextType,p.context=typeof E=="object"&&E!==null?nn(E):za,p.state=i.memoizedState,E=a.getDerivedStateFromProps,typeof E=="function"&&(qf(i,a,E,l),p.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(E=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),E!==p.state&&Bf.enqueueReplaceState(p,p.state,null),wl(i,l,p,f),Sl(),p.state=i.memoizedState),typeof p.componentDidMount=="function"&&(i.flags|=4194308),l=!0}else if(n===null){p=i.stateNode;var N=i.memoizedProps,O=Jr(a,N);p.props=O;var H=p.context,Z=a.contextType;E=za,typeof Z=="object"&&Z!==null&&(E=nn(Z));var ne=a.getDerivedStateFromProps;Z=typeof ne=="function"||typeof p.getSnapshotBeforeUpdate=="function",N=i.pendingProps!==N,Z||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(N||H!==E)&&Vy(i,p,l,E),xi=!1;var $=i.memoizedState;p.state=$,wl(i,l,p,f),Sl(),H=i.memoizedState,N||$!==H||xi?(typeof ne=="function"&&(qf(i,a,ne,l),H=i.memoizedState),(O=xi||My(i,a,O,l,$,H,E))?(Z||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(i.flags|=4194308)):(typeof p.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=l,i.memoizedState=H),p.props=l,p.state=H,p.context=E,l=O):(typeof p.componentDidMount=="function"&&(i.flags|=4194308),l=!1)}else{p=i.stateNode,Ef(n,i),E=i.memoizedProps,Z=Jr(a,E),p.props=Z,ne=i.pendingProps,$=p.context,H=a.contextType,O=za,typeof H=="object"&&H!==null&&(O=nn(H)),N=a.getDerivedStateFromProps,(H=typeof N=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(E!==ne||$!==O)&&Vy(i,p,l,O),xi=!1,$=i.memoizedState,p.state=$,wl(i,l,p,f),Sl();var K=i.memoizedState;E!==ne||$!==K||xi||n!==null&&n.dependencies!==null&&Au(n.dependencies)?(typeof N=="function"&&(qf(i,a,N,l),K=i.memoizedState),(Z=xi||My(i,a,Z,l,$,K,O)||n!==null&&n.dependencies!==null&&Au(n.dependencies))?(H||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(l,K,O),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(l,K,O)),typeof p.componentDidUpdate=="function"&&(i.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof p.componentDidUpdate!="function"||E===n.memoizedProps&&$===n.memoizedState||(i.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||E===n.memoizedProps&&$===n.memoizedState||(i.flags|=1024),i.memoizedProps=l,i.memoizedState=K),p.props=l,p.state=K,p.context=O,l=Z):(typeof p.componentDidUpdate!="function"||E===n.memoizedProps&&$===n.memoizedState||(i.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||E===n.memoizedProps&&$===n.memoizedState||(i.flags|=1024),l=!1)}return p=l,qu(n,i),l=(i.flags&128)!==0,p||l?(p=i.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:p.render(),i.flags|=1,n!==null&&l?(i.child=Za(i,n.child,null,f),i.child=Za(i,null,a,f)):$t(n,i,a,f),i.memoizedState=p.state,n=i.child):n=si(n,i,f),n}function Xy(n,i,a,l){return vl(),i.flags|=256,$t(n,i,a,l),i.child}var $f={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Kf(n){return{baseLanes:n,cachePool:Pv()}}function Qf(n,i,a){return n=n!==null?n.childLanes&~a:0,i&&(n|=Qn),n}function Zy(n,i,a){var l=i.pendingProps,f=!1,p=(i.flags&128)!==0,E;if((E=p)||(E=n!==null&&n.memoizedState===null?!1:(jt.current&2)!==0),E&&(f=!0,i.flags&=-129),E=(i.flags&32)!==0,i.flags&=-33,n===null){if(Qe){if(f?Di(i):ji(),Qe){var N=mt,O;if(O=N){e:{for(O=N,N=bs;O.nodeType!==8;){if(!N){N=null;break e}if(O=ss(O.nextSibling),O===null){N=null;break e}}N=O}N!==null?(i.memoizedState={dehydrated:N,treeContext:Gr!==null?{id:Zs,overflow:Ws}:null,retryLane:536870912,hydrationErrors:null},O=wn(18,null,null,0),O.stateNode=N,O.return=i,i.child=O,mn=i,mt=null,O=!0):O=!1}O||Qr(i)}if(N=i.memoizedState,N!==null&&(N=N.dehydrated,N!==null))return Dm(N)?i.lanes=32:i.lanes=536870912,null;ni(i)}return N=l.children,l=l.fallback,f?(ji(),f=i.mode,N=Bu({mode:"hidden",children:N},f),l=Hr(l,f,a,null),N.return=i,l.return=i,N.sibling=l,i.child=N,f=i.child,f.memoizedState=Kf(a),f.childLanes=Qf(n,E,a),i.memoizedState=$f,l):(Di(i),Yf(i,N))}if(O=n.memoizedState,O!==null&&(N=O.dehydrated,N!==null)){if(p)i.flags&256?(Di(i),i.flags&=-257,i=Xf(n,i,a)):i.memoizedState!==null?(ji(),i.child=n.child,i.flags|=128,i=null):(ji(),f=l.fallback,N=i.mode,l=Bu({mode:"visible",children:l.children},N),f=Hr(f,N,a,null),f.flags|=2,l.return=i,f.return=i,l.sibling=f,i.child=l,Za(i,n.child,null,a),l=i.child,l.memoizedState=Kf(a),l.childLanes=Qf(n,E,a),i.memoizedState=$f,i=f);else if(Di(i),Dm(N)){if(E=N.nextSibling&&N.nextSibling.dataset,E)var H=E.dgst;E=H,l=Error(r(419)),l.stack="",l.digest=E,yl({value:l,source:null,stack:null}),i=Xf(n,i,a)}else if(Ut||_l(n,i,a,!1),E=(a&n.childLanes)!==0,Ut||E){if(E=at,E!==null&&(l=a&-a,l=(l&42)!==0?1:_i(l),l=(l&(E.suspendedLanes|a))!==0?0:l,l!==0&&l!==O.retryLane))throw O.retryLane=l,Fa(n,l),Dn(E,n,l),qy;N.data==="$?"||mm(),i=Xf(n,i,a)}else N.data==="$?"?(i.flags|=192,i.child=n.child,i=null):(n=O.treeContext,mt=ss(N.nextSibling),mn=i,Qe=!0,Kr=null,bs=!1,n!==null&&(Gn[$n++]=Zs,Gn[$n++]=Ws,Gn[$n++]=Gr,Zs=n.id,Ws=n.overflow,Gr=i),i=Yf(i,l.children),i.flags|=4096);return i}return f?(ji(),f=l.fallback,N=i.mode,O=n.child,H=O.sibling,l=Xs(O,{mode:"hidden",children:l.children}),l.subtreeFlags=O.subtreeFlags&65011712,H!==null?f=Xs(H,f):(f=Hr(f,N,a,null),f.flags|=2),f.return=i,l.return=i,l.sibling=f,i.child=l,l=f,f=i.child,N=n.child.memoizedState,N===null?N=Kf(a):(O=N.cachePool,O!==null?(H=Dt._currentValue,O=O.parent!==H?{parent:H,pool:H}:O):O=Pv(),N={baseLanes:N.baseLanes|a,cachePool:O}),f.memoizedState=N,f.childLanes=Qf(n,E,a),i.memoizedState=$f,l):(Di(i),a=n.child,n=a.sibling,a=Xs(a,{mode:"visible",children:l.children}),a.return=i,a.sibling=null,n!==null&&(E=i.deletions,E===null?(i.deletions=[n],i.flags|=16):E.push(n)),i.child=a,i.memoizedState=null,a)}function Yf(n,i){return i=Bu({mode:"visible",children:i},n.mode),i.return=n,n.child=i}function Bu(n,i){return n=wn(22,n,null,i),n.lanes=0,n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},n}function Xf(n,i,a){return Za(i,n.child,null,a),n=Yf(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function Wy(n,i,a){n.lanes|=i;var l=n.alternate;l!==null&&(l.lanes|=i),mf(n.return,i,a)}function Zf(n,i,a,l,f){var p=n.memoizedState;p===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:f}:(p.isBackwards=i,p.rendering=null,p.renderingStartTime=0,p.last=l,p.tail=a,p.tailMode=f)}function Jy(n,i,a){var l=i.pendingProps,f=l.revealOrder,p=l.tail;if($t(n,i,l.children,a),l=jt.current,(l&2)!==0)l=l&1|2,i.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Wy(n,a,i);else if(n.tag===19)Wy(n,a,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}l&=1}switch(re(jt,l),f){case"forwards":for(a=i.child,f=null;a!==null;)n=a.alternate,n!==null&&Uu(n)===null&&(f=a),a=a.sibling;a=f,a===null?(f=i.child,i.child=null):(f=a.sibling,a.sibling=null),Zf(i,!1,f,a,p);break;case"backwards":for(a=null,f=i.child,i.child=null;f!==null;){if(n=f.alternate,n!==null&&Uu(n)===null){i.child=f;break}n=f.sibling,f.sibling=a,a=f,f=n}Zf(i,!0,a,null,p);break;case"together":Zf(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function si(n,i,a){if(n!==null&&(i.dependencies=n.dependencies),Pi|=i.lanes,(a&i.childLanes)===0)if(n!==null){if(_l(n,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(n!==null&&i.child!==n.child)throw Error(r(153));if(i.child!==null){for(n=i.child,a=Xs(n,n.pendingProps),i.child=a,a.return=i;n.sibling!==null;)n=n.sibling,a=a.sibling=Xs(n,n.pendingProps),a.return=i;a.sibling=null}return i.child}function Wf(n,i){return(n.lanes&i)!==0?!0:(n=n.dependencies,!!(n!==null&&Au(n)))}function US(n,i,a){switch(i.tag){case 3:rt(i,i.stateNode.containerInfo),wi(i,Dt,n.memoizedState.cache),vl();break;case 27:case 5:yi(i);break;case 4:rt(i,i.stateNode.containerInfo);break;case 10:wi(i,i.type,i.memoizedProps.value);break;case 13:var l=i.memoizedState;if(l!==null)return l.dehydrated!==null?(Di(i),i.flags|=128,null):(a&i.child.childLanes)!==0?Zy(n,i,a):(Di(i),n=si(n,i,a),n!==null?n.sibling:null);Di(i);break;case 19:var f=(n.flags&128)!==0;if(l=(a&i.childLanes)!==0,l||(_l(n,i,a,!1),l=(a&i.childLanes)!==0),f){if(l)return Jy(n,i,a);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),re(jt,jt.current),l)break;return null;case 22:case 23:return i.lanes=0,$y(n,i,a);case 24:wi(i,Dt,n.memoizedState.cache)}return si(n,i,a)}function e_(n,i,a){if(n!==null)if(n.memoizedProps!==i.pendingProps)Ut=!0;else{if(!Wf(n,a)&&(i.flags&128)===0)return Ut=!1,US(n,i,a);Ut=(n.flags&131072)!==0}else Ut=!1,Qe&&(i.flags&1048576)!==0&&Rv(i,bu,i.index);switch(i.lanes=0,i.tag){case 16:e:{n=i.pendingProps;var l=i.elementType,f=l._init;if(l=f(l._payload),i.type=l,typeof l=="function")of(l)?(n=Jr(l,n),i.tag=1,i=Yy(null,i,l,n,a)):(i.tag=0,i=Gf(null,i,l,n,a));else{if(l!=null){if(f=l.$$typeof,f===Y){i.tag=11,i=By(null,i,l,n,a);break e}else if(f===k){i.tag=14,i=Hy(null,i,l,n,a);break e}}throw i=we(l)||l,Error(r(306,i,""))}}return i;case 0:return Gf(n,i,i.type,i.pendingProps,a);case 1:return l=i.type,f=Jr(l,i.pendingProps),Yy(n,i,l,f,a);case 3:e:{if(rt(i,i.stateNode.containerInfo),n===null)throw Error(r(387));l=i.pendingProps;var p=i.memoizedState;f=p.element,Ef(n,i),wl(i,l,null,a);var E=i.memoizedState;if(l=E.cache,wi(i,Dt,l),l!==p.cache&&pf(i,[Dt],a,!0),Sl(),l=E.element,p.isDehydrated)if(p={element:l,isDehydrated:!1,cache:E.cache},i.updateQueue.baseState=p,i.memoizedState=p,i.flags&256){i=Xy(n,i,l,a);break e}else if(l!==f){f=Bn(Error(r(424)),i),yl(f),i=Xy(n,i,l,a);break e}else{switch(n=i.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(mt=ss(n.firstChild),mn=i,Qe=!0,Kr=null,bs=!0,a=jy(i,null,l,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(vl(),l===f){i=si(n,i,a);break e}$t(n,i,l,a)}i=i.child}return i;case 26:return qu(n,i),n===null?(a=iT(i.type,null,i.pendingProps,null))?i.memoizedState=a:Qe||(a=i.type,n=i.pendingProps,l=sh(Ie.current).createElement(a),l[It]=i,l[Et]=n,Qt(l,a,n),vt(l),i.stateNode=l):i.memoizedState=iT(i.type,n.memoizedProps,i.pendingProps,n.memoizedState),null;case 27:return yi(i),n===null&&Qe&&(l=i.stateNode=tT(i.type,i.pendingProps,Ie.current),mn=i,bs=!0,f=mt,zi(i.type)?(jm=f,mt=ss(l.firstChild)):mt=f),$t(n,i,i.pendingProps.children,a),qu(n,i),n===null&&(i.flags|=4194304),i.child;case 5:return n===null&&Qe&&((f=l=mt)&&(l=fw(l,i.type,i.pendingProps,bs),l!==null?(i.stateNode=l,mn=i,mt=ss(l.firstChild),bs=!1,f=!0):f=!1),f||Qr(i)),yi(i),f=i.type,p=i.pendingProps,E=n!==null?n.memoizedProps:null,l=p.children,Im(f,p)?l=null:E!==null&&Im(f,E)&&(i.flags|=32),i.memoizedState!==null&&(f=xf(n,i,DS,null,null,a),Ql._currentValue=f),qu(n,i),$t(n,i,l,a),i.child;case 6:return n===null&&Qe&&((n=a=mt)&&(a=mw(a,i.pendingProps,bs),a!==null?(i.stateNode=a,mn=i,mt=null,n=!0):n=!1),n||Qr(i)),null;case 13:return Zy(n,i,a);case 4:return rt(i,i.stateNode.containerInfo),l=i.pendingProps,n===null?i.child=Za(i,null,l,a):$t(n,i,l,a),i.child;case 11:return By(n,i,i.type,i.pendingProps,a);case 7:return $t(n,i,i.pendingProps,a),i.child;case 8:return $t(n,i,i.pendingProps.children,a),i.child;case 12:return $t(n,i,i.pendingProps.children,a),i.child;case 10:return l=i.pendingProps,wi(i,i.type,l.value),$t(n,i,l.children,a),i.child;case 9:return f=i.type._context,l=i.pendingProps.children,Xr(i),f=nn(f),l=l(f),i.flags|=1,$t(n,i,l,a),i.child;case 14:return Hy(n,i,i.type,i.pendingProps,a);case 15:return Gy(n,i,i.type,i.pendingProps,a);case 19:return Jy(n,i,a);case 31:return l=i.pendingProps,a=i.mode,l={mode:l.mode,children:l.children},n===null?(a=Bu(l,a),a.ref=i.ref,i.child=a,a.return=i,i=a):(a=Xs(n.child,l),a.ref=i.ref,i.child=a,a.return=i,i=a),i;case 22:return $y(n,i,a);case 24:return Xr(i),l=nn(Dt),n===null?(f=yf(),f===null&&(f=at,p=gf(),f.pooledCache=p,p.refCount++,p!==null&&(f.pooledCacheLanes|=a),f=p),i.memoizedState={parent:l,cache:f},Tf(i),wi(i,Dt,f)):((n.lanes&a)!==0&&(Ef(n,i),wl(i,null,null,a),Sl()),f=n.memoizedState,p=i.memoizedState,f.parent!==l?(f={parent:l,cache:l},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),wi(i,Dt,l)):(l=p.cache,wi(i,Dt,l),l!==f.cache&&pf(i,[Dt],a,!0))),$t(n,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(r(156,i.tag))}function ii(n){n.flags|=4}function t_(n,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!cT(i)){if(i=Kn.current,i!==null&&((Be&4194048)===Be?As!==null:(Be&62914560)!==Be&&(Be&536870912)===0||i!==As))throw Al=_f,Lv;n.flags|=8192}}function Hu(n,i){i!==null&&(n.flags|=4),n.flags&16384&&(i=n.tag!==22?Xo():536870912,n.lanes|=i,to|=i)}function Ol(n,i){if(!Qe)switch(n.tailMode){case"hidden":i=n.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:l.sibling=null}}function ut(n){var i=n.alternate!==null&&n.alternate.child===n.child,a=0,l=0;if(i)for(var f=n.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags&65011712,l|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=l,n.childLanes=a,i}function FS(n,i,a){var l=i.pendingProps;switch(hf(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ut(i),null;case 1:return ut(i),null;case 3:return a=i.stateNode,l=null,n!==null&&(l=n.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),ei(Dt),us(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(n===null||n.child===null)&&(gl(i)?ii(i):n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Ov())),ut(i),null;case 26:return a=i.memoizedState,n===null?(ii(i),a!==null?(ut(i),t_(i,a)):(ut(i),i.flags&=-16777217)):a?a!==n.memoizedState?(ii(i),ut(i),t_(i,a)):(ut(i),i.flags&=-16777217):(n.memoizedProps!==l&&ii(i),ut(i),i.flags&=-16777217),null;case 27:Ps(i),a=Ie.current;var f=i.type;if(n!==null&&i.stateNode!=null)n.memoizedProps!==l&&ii(i);else{if(!l){if(i.stateNode===null)throw Error(r(166));return ut(i),null}n=ye.current,gl(i)?Dv(i):(n=tT(f,l,a),i.stateNode=n,ii(i))}return ut(i),null;case 5:if(Ps(i),a=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==l&&ii(i);else{if(!l){if(i.stateNode===null)throw Error(r(166));return ut(i),null}if(n=ye.current,gl(i))Dv(i);else{switch(f=sh(Ie.current),n){case 1:n=f.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:n=f.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":n=f.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":n=f.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":n=f.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof l.is=="string"?f.createElement("select",{is:l.is}):f.createElement("select"),l.multiple?n.multiple=!0:l.size&&(n.size=l.size);break;default:n=typeof l.is=="string"?f.createElement(a,{is:l.is}):f.createElement(a)}}n[It]=i,n[Et]=l;e:for(f=i.child;f!==null;){if(f.tag===5||f.tag===6)n.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===i)break e;for(;f.sibling===null;){if(f.return===null||f.return===i)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}i.stateNode=n;e:switch(Qt(n,a,l),a){case"button":case"input":case"select":case"textarea":n=!!l.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&ii(i)}}return ut(i),i.flags&=-16777217,null;case 6:if(n&&i.stateNode!=null)n.memoizedProps!==l&&ii(i);else{if(typeof l!="string"&&i.stateNode===null)throw Error(r(166));if(n=Ie.current,gl(i)){if(n=i.stateNode,a=i.memoizedProps,l=null,f=mn,f!==null)switch(f.tag){case 27:case 5:l=f.memoizedProps}n[It]=i,n=!!(n.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||Q_(n.nodeValue,a)),n||Qr(i)}else n=sh(n).createTextNode(l),n[It]=i,i.stateNode=n}return ut(i),null;case 13:if(l=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=gl(i),l!==null&&l.dehydrated!==null){if(n===null){if(!f)throw Error(r(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));f[It]=i}else vl(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;ut(i),f=!1}else f=Ov(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return i.flags&256?(ni(i),i):(ni(i),null)}if(ni(i),(i.flags&128)!==0)return i.lanes=a,i;if(a=l!==null,n=n!==null&&n.memoizedState!==null,a){l=i.child,f=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(f=l.alternate.memoizedState.cachePool.pool);var p=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),p!==f&&(l.flags|=2048)}return a!==n&&a&&(i.child.flags|=8192),Hu(i,i.updateQueue),ut(i),null;case 4:return us(),n===null&&Am(i.stateNode.containerInfo),ut(i),null;case 10:return ei(i.type),ut(i),null;case 19:if(ue(jt),f=i.memoizedState,f===null)return ut(i),null;if(l=(i.flags&128)!==0,p=f.rendering,p===null)if(l)Ol(f,!1);else{if(pt!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(p=Uu(n),p!==null){for(i.flags|=128,Ol(f,!1),n=p.updateQueue,i.updateQueue=n,Hu(i,n),i.subtreeFlags=0,n=a,a=i.child;a!==null;)Cv(a,n),a=a.sibling;return re(jt,jt.current&1|2),i.child}n=n.sibling}f.tail!==null&&Pn()>Ku&&(i.flags|=128,l=!0,Ol(f,!1),i.lanes=4194304)}else{if(!l)if(n=Uu(p),n!==null){if(i.flags|=128,l=!0,n=n.updateQueue,i.updateQueue=n,Hu(i,n),Ol(f,!0),f.tail===null&&f.tailMode==="hidden"&&!p.alternate&&!Qe)return ut(i),null}else 2*Pn()-f.renderingStartTime>Ku&&a!==536870912&&(i.flags|=128,l=!0,Ol(f,!1),i.lanes=4194304);f.isBackwards?(p.sibling=i.child,i.child=p):(n=f.last,n!==null?n.sibling=p:i.child=p,f.last=p)}return f.tail!==null?(i=f.tail,f.rendering=i,f.tail=i.sibling,f.renderingStartTime=Pn(),i.sibling=null,n=jt.current,re(jt,l?n&1|2:n&1),i):(ut(i),null);case 22:case 23:return ni(i),Sf(),l=i.memoizedState!==null,n!==null?n.memoizedState!==null!==l&&(i.flags|=8192):l&&(i.flags|=8192),l?(a&536870912)!==0&&(i.flags&128)===0&&(ut(i),i.subtreeFlags&6&&(i.flags|=8192)):ut(i),a=i.updateQueue,a!==null&&Hu(i,a.retryQueue),a=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==a&&(i.flags|=2048),n!==null&&ue(Zr),null;case 24:return a=null,n!==null&&(a=n.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),ei(Dt),ut(i),null;case 25:return null;case 30:return null}throw Error(r(156,i.tag))}function zS(n,i){switch(hf(i),i.tag){case 1:return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return ei(Dt),us(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 26:case 27:case 5:return Ps(i),null;case 13:if(ni(i),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(r(340));vl()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return ue(jt),null;case 4:return us(),null;case 10:return ei(i.type),null;case 22:case 23:return ni(i),Sf(),n!==null&&ue(Zr),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 24:return ei(Dt),null;case 25:return null;default:return null}}function n_(n,i){switch(hf(i),i.tag){case 3:ei(Dt),us();break;case 26:case 27:case 5:Ps(i);break;case 4:us();break;case 13:ni(i);break;case 19:ue(jt);break;case 10:ei(i.type);break;case 22:case 23:ni(i),Sf(),n!==null&&ue(Zr);break;case 24:ei(Dt)}}function Ml(n,i){try{var a=i.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var f=l.next;a=f;do{if((a.tag&n)===n){l=void 0;var p=a.create,E=a.inst;l=p(),E.destroy=l}a=a.next}while(a!==f)}}catch(N){st(i,i.return,N)}}function Oi(n,i,a){try{var l=i.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var p=f.next;l=p;do{if((l.tag&n)===n){var E=l.inst,N=E.destroy;if(N!==void 0){E.destroy=void 0,f=i;var O=a,H=N;try{H()}catch(Z){st(f,O,Z)}}}l=l.next}while(l!==p)}}catch(Z){st(i,i.return,Z)}}function s_(n){var i=n.updateQueue;if(i!==null){var a=n.stateNode;try{Hv(i,a)}catch(l){st(n,n.return,l)}}}function i_(n,i,a){a.props=Jr(n.type,n.memoizedProps),a.state=n.memoizedState;try{a.componentWillUnmount()}catch(l){st(n,i,l)}}function Vl(n,i){try{var a=n.ref;if(a!==null){switch(n.tag){case 26:case 27:case 5:var l=n.stateNode;break;case 30:l=n.stateNode;break;default:l=n.stateNode}typeof a=="function"?n.refCleanup=a(l):a.current=l}}catch(f){st(n,i,f)}}function Ns(n,i){var a=n.ref,l=n.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(f){st(n,i,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){st(n,i,f)}else a.current=null}function r_(n){var i=n.type,a=n.memoizedProps,l=n.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(f){st(n,n.return,f)}}function Jf(n,i,a){try{var l=n.stateNode;lw(l,n.type,a,i),l[Et]=i}catch(f){st(n,n.return,f)}}function a_(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&zi(n.type)||n.tag===4}function em(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||a_(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&zi(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function tm(n,i,a){var l=n.tag;if(l===5||l===6)n=n.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(n,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(n),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=nh));else if(l!==4&&(l===27&&zi(n.type)&&(a=n.stateNode,i=null),n=n.child,n!==null))for(tm(n,i,a),n=n.sibling;n!==null;)tm(n,i,a),n=n.sibling}function Gu(n,i,a){var l=n.tag;if(l===5||l===6)n=n.stateNode,i?a.insertBefore(n,i):a.appendChild(n);else if(l!==4&&(l===27&&zi(n.type)&&(a=n.stateNode),n=n.child,n!==null))for(Gu(n,i,a),n=n.sibling;n!==null;)Gu(n,i,a),n=n.sibling}function o_(n){var i=n.stateNode,a=n.memoizedProps;try{for(var l=n.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);Qt(i,l,a),i[It]=n,i[Et]=a}catch(p){st(n,n.return,p)}}var ri=!1,_t=!1,nm=!1,l_=typeof WeakSet=="function"?WeakSet:Set,Ft=null;function qS(n,i){if(n=n.containerInfo,wm=ch,n=_v(n),Jd(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var f=l.anchorOffset,p=l.focusNode;l=l.focusOffset;try{a.nodeType,p.nodeType}catch{a=null;break e}var E=0,N=-1,O=-1,H=0,Z=0,ne=n,$=null;t:for(;;){for(var K;ne!==a||f!==0&&ne.nodeType!==3||(N=E+f),ne!==p||l!==0&&ne.nodeType!==3||(O=E+l),ne.nodeType===3&&(E+=ne.nodeValue.length),(K=ne.firstChild)!==null;)$=ne,ne=K;for(;;){if(ne===n)break t;if($===a&&++H===f&&(N=E),$===p&&++Z===l&&(O=E),(K=ne.nextSibling)!==null)break;ne=$,$=ne.parentNode}ne=K}a=N===-1||O===-1?null:{start:N,end:O}}else a=null}a=a||{start:0,end:0}}else a=null;for(xm={focusedElem:n,selectionRange:a},ch=!1,Ft=i;Ft!==null;)if(i=Ft,n=i.child,(i.subtreeFlags&1024)!==0&&n!==null)n.return=i,Ft=n;else for(;Ft!==null;){switch(i=Ft,p=i.alternate,n=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((n&1024)!==0&&p!==null){n=void 0,a=i,f=p.memoizedProps,p=p.memoizedState,l=a.stateNode;try{var Ae=Jr(a.type,f,a.elementType===a.type);n=l.getSnapshotBeforeUpdate(Ae,p),l.__reactInternalSnapshotBeforeUpdate=n}catch(Te){st(a,a.return,Te)}}break;case 3:if((n&1024)!==0){if(n=i.stateNode.containerInfo,a=n.nodeType,a===9)Rm(n);else if(a===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Rm(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(r(163))}if(n=i.sibling,n!==null){n.return=i.return,Ft=n;break}Ft=i.return}}function c_(n,i,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Mi(n,a),l&4&&Ml(5,a);break;case 1:if(Mi(n,a),l&4)if(n=a.stateNode,i===null)try{n.componentDidMount()}catch(E){st(a,a.return,E)}else{var f=Jr(a.type,i.memoizedProps);i=i.memoizedState;try{n.componentDidUpdate(f,i,n.__reactInternalSnapshotBeforeUpdate)}catch(E){st(a,a.return,E)}}l&64&&s_(a),l&512&&Vl(a,a.return);break;case 3:if(Mi(n,a),l&64&&(n=a.updateQueue,n!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{Hv(n,i)}catch(E){st(a,a.return,E)}}break;case 27:i===null&&l&4&&o_(a);case 26:case 5:Mi(n,a),i===null&&l&4&&r_(a),l&512&&Vl(a,a.return);break;case 12:Mi(n,a);break;case 13:Mi(n,a),l&4&&d_(n,a),l&64&&(n=a.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(a=ZS.bind(null,a),pw(n,a))));break;case 22:if(l=a.memoizedState!==null||ri,!l){i=i!==null&&i.memoizedState!==null||_t,f=ri;var p=_t;ri=l,(_t=i)&&!p?Vi(n,a,(a.subtreeFlags&8772)!==0):Mi(n,a),ri=f,_t=p}break;case 30:break;default:Mi(n,a)}}function u_(n){var i=n.alternate;i!==null&&(n.alternate=null,u_(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&bi(i)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var lt=null,_n=!1;function ai(n,i,a){for(a=a.child;a!==null;)h_(n,i,a),a=a.sibling}function h_(n,i,a){if(Xe&&typeof Xe.onCommitFiberUnmount=="function")try{Xe.onCommitFiberUnmount(ft,a)}catch{}switch(a.tag){case 26:_t||Ns(a,i),ai(n,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:_t||Ns(a,i);var l=lt,f=_n;zi(a.type)&&(lt=a.stateNode,_n=!1),ai(n,i,a),Hl(a.stateNode),lt=l,_n=f;break;case 5:_t||Ns(a,i);case 6:if(l=lt,f=_n,lt=null,ai(n,i,a),lt=l,_n=f,lt!==null)if(_n)try{(lt.nodeType===9?lt.body:lt.nodeName==="HTML"?lt.ownerDocument.body:lt).removeChild(a.stateNode)}catch(p){st(a,i,p)}else try{lt.removeChild(a.stateNode)}catch(p){st(a,i,p)}break;case 18:lt!==null&&(_n?(n=lt,J_(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,a.stateNode),Wl(n)):J_(lt,a.stateNode));break;case 4:l=lt,f=_n,lt=a.stateNode.containerInfo,_n=!0,ai(n,i,a),lt=l,_n=f;break;case 0:case 11:case 14:case 15:_t||Oi(2,a,i),_t||Oi(4,a,i),ai(n,i,a);break;case 1:_t||(Ns(a,i),l=a.stateNode,typeof l.componentWillUnmount=="function"&&i_(a,i,l)),ai(n,i,a);break;case 21:ai(n,i,a);break;case 22:_t=(l=_t)||a.memoizedState!==null,ai(n,i,a),_t=l;break;default:ai(n,i,a)}}function d_(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Wl(n)}catch(a){st(i,i.return,a)}}function BS(n){switch(n.tag){case 13:case 19:var i=n.stateNode;return i===null&&(i=n.stateNode=new l_),i;case 22:return n=n.stateNode,i=n._retryCache,i===null&&(i=n._retryCache=new l_),i;default:throw Error(r(435,n.tag))}}function sm(n,i){var a=BS(n);i.forEach(function(l){var f=WS.bind(null,n,l);a.has(l)||(a.add(l),l.then(f,f))})}function xn(n,i){var a=i.deletions;if(a!==null)for(var l=0;l<a.length;l++){var f=a[l],p=n,E=i,N=E;e:for(;N!==null;){switch(N.tag){case 27:if(zi(N.type)){lt=N.stateNode,_n=!1;break e}break;case 5:lt=N.stateNode,_n=!1;break e;case 3:case 4:lt=N.stateNode.containerInfo,_n=!0;break e}N=N.return}if(lt===null)throw Error(r(160));h_(p,E,f),lt=null,_n=!1,p=f.alternate,p!==null&&(p.return=null),f.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)f_(i,n),i=i.sibling}var ns=null;function f_(n,i){var a=n.alternate,l=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:xn(i,n),In(n),l&4&&(Oi(3,n,n.return),Ml(3,n),Oi(5,n,n.return));break;case 1:xn(i,n),In(n),l&512&&(_t||a===null||Ns(a,a.return)),l&64&&ri&&(n=n.updateQueue,n!==null&&(l=n.callbacks,l!==null&&(a=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var f=ns;if(xn(i,n),In(n),l&512&&(_t||a===null||Ns(a,a.return)),l&4){var p=a!==null?a.memoizedState:null;if(l=n.memoizedState,a===null)if(l===null)if(n.stateNode===null){e:{l=n.type,a=n.memoizedProps,f=f.ownerDocument||f;t:switch(l){case"title":p=f.getElementsByTagName("title")[0],(!p||p[Ir]||p[It]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=f.createElement(l),f.head.insertBefore(p,f.querySelector("head > title"))),Qt(p,l,a),p[It]=n,vt(p),l=p;break e;case"link":var E=oT("link","href",f).get(l+(a.href||""));if(E){for(var N=0;N<E.length;N++)if(p=E[N],p.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&p.getAttribute("rel")===(a.rel==null?null:a.rel)&&p.getAttribute("title")===(a.title==null?null:a.title)&&p.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){E.splice(N,1);break t}}p=f.createElement(l),Qt(p,l,a),f.head.appendChild(p);break;case"meta":if(E=oT("meta","content",f).get(l+(a.content||""))){for(N=0;N<E.length;N++)if(p=E[N],p.getAttribute("content")===(a.content==null?null:""+a.content)&&p.getAttribute("name")===(a.name==null?null:a.name)&&p.getAttribute("property")===(a.property==null?null:a.property)&&p.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&p.getAttribute("charset")===(a.charSet==null?null:a.charSet)){E.splice(N,1);break t}}p=f.createElement(l),Qt(p,l,a),f.head.appendChild(p);break;default:throw Error(r(468,l))}p[It]=n,vt(p),l=p}n.stateNode=l}else lT(f,n.type,n.stateNode);else n.stateNode=aT(f,l,n.memoizedProps);else p!==l?(p===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):p.count--,l===null?lT(f,n.type,n.stateNode):aT(f,l,n.memoizedProps)):l===null&&n.stateNode!==null&&Jf(n,n.memoizedProps,a.memoizedProps)}break;case 27:xn(i,n),In(n),l&512&&(_t||a===null||Ns(a,a.return)),a!==null&&l&4&&Jf(n,n.memoizedProps,a.memoizedProps);break;case 5:if(xn(i,n),In(n),l&512&&(_t||a===null||Ns(a,a.return)),n.flags&32){f=n.stateNode;try{Un(f,"")}catch(K){st(n,n.return,K)}}l&4&&n.stateNode!=null&&(f=n.memoizedProps,Jf(n,f,a!==null?a.memoizedProps:f)),l&1024&&(nm=!0);break;case 6:if(xn(i,n),In(n),l&4){if(n.stateNode===null)throw Error(r(162));l=n.memoizedProps,a=n.stateNode;try{a.nodeValue=l}catch(K){st(n,n.return,K)}}break;case 3:if(ah=null,f=ns,ns=ih(i.containerInfo),xn(i,n),ns=f,In(n),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Wl(i.containerInfo)}catch(K){st(n,n.return,K)}nm&&(nm=!1,m_(n));break;case 4:l=ns,ns=ih(n.stateNode.containerInfo),xn(i,n),In(n),ns=l;break;case 12:xn(i,n),In(n);break;case 13:xn(i,n),In(n),n.child.flags&8192&&n.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(cm=Pn()),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,sm(n,l)));break;case 22:f=n.memoizedState!==null;var O=a!==null&&a.memoizedState!==null,H=ri,Z=_t;if(ri=H||f,_t=Z||O,xn(i,n),_t=Z,ri=H,In(n),l&8192)e:for(i=n.stateNode,i._visibility=f?i._visibility&-2:i._visibility|1,f&&(a===null||O||ri||_t||ea(n)),a=null,i=n;;){if(i.tag===5||i.tag===26){if(a===null){O=a=i;try{if(p=O.stateNode,f)E=p.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{N=O.stateNode;var ne=O.memoizedProps.style,$=ne!=null&&ne.hasOwnProperty("display")?ne.display:null;N.style.display=$==null||typeof $=="boolean"?"":(""+$).trim()}}catch(K){st(O,O.return,K)}}}else if(i.tag===6){if(a===null){O=i;try{O.stateNode.nodeValue=f?"":O.memoizedProps}catch(K){st(O,O.return,K)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===n)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break e;for(;i.sibling===null;){if(i.return===null||i.return===n)break e;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}l&4&&(l=n.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,sm(n,a))));break;case 19:xn(i,n),In(n),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,sm(n,l)));break;case 30:break;case 21:break;default:xn(i,n),In(n)}}function In(n){var i=n.flags;if(i&2){try{for(var a,l=n.return;l!==null;){if(a_(l)){a=l;break}l=l.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var f=a.stateNode,p=em(n);Gu(n,p,f);break;case 5:var E=a.stateNode;a.flags&32&&(Un(E,""),a.flags&=-33);var N=em(n);Gu(n,N,E);break;case 3:case 4:var O=a.stateNode.containerInfo,H=em(n);tm(n,H,O);break;default:throw Error(r(161))}}catch(Z){st(n,n.return,Z)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function m_(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var i=n;m_(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),n=n.sibling}}function Mi(n,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)c_(n,i.alternate,i),i=i.sibling}function ea(n){for(n=n.child;n!==null;){var i=n;switch(i.tag){case 0:case 11:case 14:case 15:Oi(4,i,i.return),ea(i);break;case 1:Ns(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&i_(i,i.return,a),ea(i);break;case 27:Hl(i.stateNode);case 26:case 5:Ns(i,i.return),ea(i);break;case 22:i.memoizedState===null&&ea(i);break;case 30:ea(i);break;default:ea(i)}n=n.sibling}}function Vi(n,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var l=i.alternate,f=n,p=i,E=p.flags;switch(p.tag){case 0:case 11:case 15:Vi(f,p,a),Ml(4,p);break;case 1:if(Vi(f,p,a),l=p,f=l.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(H){st(l,l.return,H)}if(l=p,f=l.updateQueue,f!==null){var N=l.stateNode;try{var O=f.shared.hiddenCallbacks;if(O!==null)for(f.shared.hiddenCallbacks=null,f=0;f<O.length;f++)Bv(O[f],N)}catch(H){st(l,l.return,H)}}a&&E&64&&s_(p),Vl(p,p.return);break;case 27:o_(p);case 26:case 5:Vi(f,p,a),a&&l===null&&E&4&&r_(p),Vl(p,p.return);break;case 12:Vi(f,p,a);break;case 13:Vi(f,p,a),a&&E&4&&d_(f,p);break;case 22:p.memoizedState===null&&Vi(f,p,a),Vl(p,p.return);break;case 30:break;default:Vi(f,p,a)}i=i.sibling}}function im(n,i){var a=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),n=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(n=i.memoizedState.cachePool.pool),n!==a&&(n!=null&&n.refCount++,a!=null&&Tl(a))}function rm(n,i){n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&Tl(n))}function Ss(n,i,a,l){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)p_(n,i,a,l),i=i.sibling}function p_(n,i,a,l){var f=i.flags;switch(i.tag){case 0:case 11:case 15:Ss(n,i,a,l),f&2048&&Ml(9,i);break;case 1:Ss(n,i,a,l);break;case 3:Ss(n,i,a,l),f&2048&&(n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&Tl(n)));break;case 12:if(f&2048){Ss(n,i,a,l),n=i.stateNode;try{var p=i.memoizedProps,E=p.id,N=p.onPostCommit;typeof N=="function"&&N(E,i.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(O){st(i,i.return,O)}}else Ss(n,i,a,l);break;case 13:Ss(n,i,a,l);break;case 23:break;case 22:p=i.stateNode,E=i.alternate,i.memoizedState!==null?p._visibility&2?Ss(n,i,a,l):kl(n,i):p._visibility&2?Ss(n,i,a,l):(p._visibility|=2,Wa(n,i,a,l,(i.subtreeFlags&10256)!==0)),f&2048&&im(E,i);break;case 24:Ss(n,i,a,l),f&2048&&rm(i.alternate,i);break;default:Ss(n,i,a,l)}}function Wa(n,i,a,l,f){for(f=f&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var p=n,E=i,N=a,O=l,H=E.flags;switch(E.tag){case 0:case 11:case 15:Wa(p,E,N,O,f),Ml(8,E);break;case 23:break;case 22:var Z=E.stateNode;E.memoizedState!==null?Z._visibility&2?Wa(p,E,N,O,f):kl(p,E):(Z._visibility|=2,Wa(p,E,N,O,f)),f&&H&2048&&im(E.alternate,E);break;case 24:Wa(p,E,N,O,f),f&&H&2048&&rm(E.alternate,E);break;default:Wa(p,E,N,O,f)}i=i.sibling}}function kl(n,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=n,l=i,f=l.flags;switch(l.tag){case 22:kl(a,l),f&2048&&im(l.alternate,l);break;case 24:kl(a,l),f&2048&&rm(l.alternate,l);break;default:kl(a,l)}i=i.sibling}}var Pl=8192;function Ja(n){if(n.subtreeFlags&Pl)for(n=n.child;n!==null;)g_(n),n=n.sibling}function g_(n){switch(n.tag){case 26:Ja(n),n.flags&Pl&&n.memoizedState!==null&&Iw(ns,n.memoizedState,n.memoizedProps);break;case 5:Ja(n);break;case 3:case 4:var i=ns;ns=ih(n.stateNode.containerInfo),Ja(n),ns=i;break;case 22:n.memoizedState===null&&(i=n.alternate,i!==null&&i.memoizedState!==null?(i=Pl,Pl=16777216,Ja(n),Pl=i):Ja(n));break;default:Ja(n)}}function v_(n){var i=n.alternate;if(i!==null&&(n=i.child,n!==null)){i.child=null;do i=n.sibling,n.sibling=null,n=i;while(n!==null)}}function Ll(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];Ft=l,__(l,n)}v_(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)y_(n),n=n.sibling}function y_(n){switch(n.tag){case 0:case 11:case 15:Ll(n),n.flags&2048&&Oi(9,n,n.return);break;case 3:Ll(n);break;case 12:Ll(n);break;case 22:var i=n.stateNode;n.memoizedState!==null&&i._visibility&2&&(n.return===null||n.return.tag!==13)?(i._visibility&=-3,$u(n)):Ll(n);break;default:Ll(n)}}function $u(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];Ft=l,__(l,n)}v_(n)}for(n=n.child;n!==null;){switch(i=n,i.tag){case 0:case 11:case 15:Oi(8,i,i.return),$u(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,$u(i));break;default:$u(i)}n=n.sibling}}function __(n,i){for(;Ft!==null;){var a=Ft;switch(a.tag){case 0:case 11:case 15:Oi(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Tl(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Ft=l;else e:for(a=n;Ft!==null;){l=Ft;var f=l.sibling,p=l.return;if(u_(l),l===a){Ft=null;break e}if(f!==null){f.return=p,Ft=f;break e}Ft=p}}}var HS={getCacheForType:function(n){var i=nn(Dt),a=i.data.get(n);return a===void 0&&(a=n(),i.data.set(n,a)),a}},GS=typeof WeakMap=="function"?WeakMap:Map,Ze=0,at=null,Pe=null,Be=0,We=0,Cn=null,ki=!1,eo=!1,am=!1,oi=0,pt=0,Pi=0,ta=0,om=0,Qn=0,to=0,Ul=null,Tn=null,lm=!1,cm=0,Ku=1/0,Qu=null,Li=null,Kt=0,Ui=null,no=null,so=0,um=0,hm=null,T_=null,Fl=0,dm=null;function Rn(){if((Ze&2)!==0&&Be!==0)return Be&-Be;if(X.T!==null){var n=Ha;return n!==0?n:_m()}return Ti()}function E_(){Qn===0&&(Qn=(Be&536870912)===0||Qe?Yo():536870912);var n=Kn.current;return n!==null&&(n.flags|=32),Qn}function Dn(n,i,a){(n===at&&(We===2||We===9)||n.cancelPendingCommit!==null)&&(io(n,0),Fi(n,Be,Qn,!1)),Us(n,a),((Ze&2)===0||n!==at)&&(n===at&&((Ze&2)===0&&(ta|=a),pt===4&&Fi(n,Be,Qn,!1)),ws(n))}function b_(n,i,a){if((Ze&6)!==0)throw Error(r(327));var l=!a&&(i&124)===0&&(i&n.expiredLanes)===0||xr(n,i),f=l?QS(n,i):pm(n,i,!0),p=l;do{if(f===0){eo&&!l&&Fi(n,i,0,!1);break}else{if(a=n.current.alternate,p&&!$S(a)){f=pm(n,i,!1),p=!1;continue}if(f===2){if(p=i,n.errorRecoveryDisabledLanes&p)var E=0;else E=n.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){i=E;e:{var N=n;f=Ul;var O=N.current.memoizedState.isDehydrated;if(O&&(io(N,E).flags|=256),E=pm(N,E,!1),E!==2){if(am&&!O){N.errorRecoveryDisabledLanes|=p,ta|=p,f=4;break e}p=Tn,Tn=f,p!==null&&(Tn===null?Tn=p:Tn.push.apply(Tn,p))}f=E}if(p=!1,f!==2)continue}}if(f===1){io(n,0),Fi(n,i,0,!0);break}e:{switch(l=n,p=f,p){case 0:case 1:throw Error(r(345));case 4:if((i&4194048)!==i)break;case 6:Fi(l,i,Qn,!ki);break e;case 2:Tn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((i&62914560)===i&&(f=cm+300-Pn(),10<f)){if(Fi(l,i,Qn,!ki),Ea(l,0,!0)!==0)break e;l.timeoutHandle=Z_(A_.bind(null,l,a,Tn,Qu,lm,i,Qn,ta,to,ki,p,2,-0,0),f);break e}A_(l,a,Tn,Qu,lm,i,Qn,ta,to,ki,p,0,-0,0)}}break}while(!0);ws(n)}function A_(n,i,a,l,f,p,E,N,O,H,Z,ne,$,K){if(n.timeoutHandle=-1,ne=i.subtreeFlags,(ne&8192||(ne&16785408)===16785408)&&(Kl={stylesheets:null,count:0,unsuspend:xw},g_(i),ne=Cw(),ne!==null)){n.cancelPendingCommit=ne(R_.bind(null,n,i,p,a,l,f,E,N,O,Z,1,$,K)),Fi(n,p,E,!H);return}R_(n,i,p,a,l,f,E,N,O)}function $S(n){for(var i=n;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var f=a[l],p=f.getSnapshot;f=f.value;try{if(!Sn(p(),f))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Fi(n,i,a,l){i&=~om,i&=~ta,n.suspendedLanes|=i,n.pingedLanes&=~i,l&&(n.warmLanes|=i),l=n.expirationTimes;for(var f=i;0<f;){var p=31-tn(f),E=1<<p;l[p]=-1,f&=~E}a!==0&&hs(n,a,i)}function Yu(){return(Ze&6)===0?(zl(0),!1):!0}function fm(){if(Pe!==null){if(We===0)var n=Pe.return;else n=Pe,Js=Yr=null,Rf(n),Xa=null,Dl=0,n=Pe;for(;n!==null;)n_(n.alternate,n),n=n.return;Pe=null}}function io(n,i){var a=n.timeoutHandle;a!==-1&&(n.timeoutHandle=-1,uw(a)),a=n.cancelPendingCommit,a!==null&&(n.cancelPendingCommit=null,a()),fm(),at=n,Pe=a=Xs(n.current,null),Be=i,We=0,Cn=null,ki=!1,eo=xr(n,i),am=!1,to=Qn=om=ta=Pi=pt=0,Tn=Ul=null,lm=!1,(i&8)!==0&&(i|=i&32);var l=n.entangledLanes;if(l!==0)for(n=n.entanglements,l&=i;0<l;){var f=31-tn(l),p=1<<f;i|=n[f],l&=~p}return oi=i,vu(),a}function N_(n,i){Oe=null,X.H=ku,i===bl||i===wu?(i=zv(),We=3):i===Lv?(i=zv(),We=4):We=i===qy?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Cn=i,Pe===null&&(pt=1,zu(n,Bn(i,n.current)))}function S_(){var n=X.H;return X.H=ku,n===null?ku:n}function w_(){var n=X.A;return X.A=HS,n}function mm(){pt=4,ki||(Be&4194048)!==Be&&Kn.current!==null||(eo=!0),(Pi&134217727)===0&&(ta&134217727)===0||at===null||Fi(at,Be,Qn,!1)}function pm(n,i,a){var l=Ze;Ze|=2;var f=S_(),p=w_();(at!==n||Be!==i)&&(Qu=null,io(n,i)),i=!1;var E=pt;e:do try{if(We!==0&&Pe!==null){var N=Pe,O=Cn;switch(We){case 8:fm(),E=6;break e;case 3:case 2:case 9:case 6:Kn.current===null&&(i=!0);var H=We;if(We=0,Cn=null,ro(n,N,O,H),a&&eo){E=0;break e}break;default:H=We,We=0,Cn=null,ro(n,N,O,H)}}KS(),E=pt;break}catch(Z){N_(n,Z)}while(!0);return i&&n.shellSuspendCounter++,Js=Yr=null,Ze=l,X.H=f,X.A=p,Pe===null&&(at=null,Be=0,vu()),E}function KS(){for(;Pe!==null;)x_(Pe)}function QS(n,i){var a=Ze;Ze|=2;var l=S_(),f=w_();at!==n||Be!==i?(Qu=null,Ku=Pn()+500,io(n,i)):eo=xr(n,i);e:do try{if(We!==0&&Pe!==null){i=Pe;var p=Cn;t:switch(We){case 1:We=0,Cn=null,ro(n,i,p,1);break;case 2:case 9:if(Uv(p)){We=0,Cn=null,I_(i);break}i=function(){We!==2&&We!==9||at!==n||(We=7),ws(n)},p.then(i,i);break e;case 3:We=7;break e;case 4:We=5;break e;case 7:Uv(p)?(We=0,Cn=null,I_(i)):(We=0,Cn=null,ro(n,i,p,7));break;case 5:var E=null;switch(Pe.tag){case 26:E=Pe.memoizedState;case 5:case 27:var N=Pe;if(!E||cT(E)){We=0,Cn=null;var O=N.sibling;if(O!==null)Pe=O;else{var H=N.return;H!==null?(Pe=H,Xu(H)):Pe=null}break t}}We=0,Cn=null,ro(n,i,p,5);break;case 6:We=0,Cn=null,ro(n,i,p,6);break;case 8:fm(),pt=6;break e;default:throw Error(r(462))}}YS();break}catch(Z){N_(n,Z)}while(!0);return Js=Yr=null,X.H=l,X.A=f,Ze=a,Pe!==null?0:(at=null,Be=0,vu(),pt)}function YS(){for(;Pe!==null&&!Go();)x_(Pe)}function x_(n){var i=e_(n.alternate,n,oi);n.memoizedProps=n.pendingProps,i===null?Xu(n):Pe=i}function I_(n){var i=n,a=i.alternate;switch(i.tag){case 15:case 0:i=Qy(a,i,i.pendingProps,i.type,void 0,Be);break;case 11:i=Qy(a,i,i.pendingProps,i.type.render,i.ref,Be);break;case 5:Rf(i);default:n_(a,i),i=Pe=Cv(i,oi),i=e_(a,i,oi)}n.memoizedProps=n.pendingProps,i===null?Xu(n):Pe=i}function ro(n,i,a,l){Js=Yr=null,Rf(i),Xa=null,Dl=0;var f=i.return;try{if(LS(n,f,i,a,Be)){pt=1,zu(n,Bn(a,n.current)),Pe=null;return}}catch(p){if(f!==null)throw Pe=f,p;pt=1,zu(n,Bn(a,n.current)),Pe=null;return}i.flags&32768?(Qe||l===1?n=!0:eo||(Be&536870912)!==0?n=!1:(ki=n=!0,(l===2||l===9||l===3||l===6)&&(l=Kn.current,l!==null&&l.tag===13&&(l.flags|=16384))),C_(i,n)):Xu(i)}function Xu(n){var i=n;do{if((i.flags&32768)!==0){C_(i,ki);return}n=i.return;var a=FS(i.alternate,i,oi);if(a!==null){Pe=a;return}if(i=i.sibling,i!==null){Pe=i;return}Pe=i=n}while(i!==null);pt===0&&(pt=5)}function C_(n,i){do{var a=zS(n.alternate,n);if(a!==null){a.flags&=32767,Pe=a;return}if(a=n.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(n=n.sibling,n!==null)){Pe=n;return}Pe=n=a}while(n!==null);pt=6,Pe=null}function R_(n,i,a,l,f,p,E,N,O){n.cancelPendingCommit=null;do Zu();while(Kt!==0);if((Ze&6)!==0)throw Error(r(327));if(i!==null){if(i===n.current)throw Error(r(177));if(p=i.lanes|i.childLanes,p|=rf,Zo(n,a,p,E,N,O),n===at&&(Pe=at=null,Be=0),no=i,Ui=n,so=a,um=p,hm=f,T_=l,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,JS(Ar,function(){return V_(),null})):(n.callbackNode=null,n.callbackPriority=0),l=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||l){l=X.T,X.T=null,f=ae.p,ae.p=2,E=Ze,Ze|=4;try{qS(n,i,a)}finally{Ze=E,ae.p=f,X.T=l}}Kt=1,D_(),j_(),O_()}}function D_(){if(Kt===1){Kt=0;var n=Ui,i=no,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=X.T,X.T=null;var l=ae.p;ae.p=2;var f=Ze;Ze|=4;try{f_(i,n);var p=xm,E=_v(n.containerInfo),N=p.focusedElem,O=p.selectionRange;if(E!==N&&N&&N.ownerDocument&&yv(N.ownerDocument.documentElement,N)){if(O!==null&&Jd(N)){var H=O.start,Z=O.end;if(Z===void 0&&(Z=H),"selectionStart"in N)N.selectionStart=H,N.selectionEnd=Math.min(Z,N.value.length);else{var ne=N.ownerDocument||document,$=ne&&ne.defaultView||window;if($.getSelection){var K=$.getSelection(),Ae=N.textContent.length,Te=Math.min(O.start,Ae),nt=O.end===void 0?Te:Math.min(O.end,Ae);!K.extend&&Te>nt&&(E=nt,nt=Te,Te=E);var z=vv(N,Te),L=vv(N,nt);if(z&&L&&(K.rangeCount!==1||K.anchorNode!==z.node||K.anchorOffset!==z.offset||K.focusNode!==L.node||K.focusOffset!==L.offset)){var B=ne.createRange();B.setStart(z.node,z.offset),K.removeAllRanges(),Te>nt?(K.addRange(B),K.extend(L.node,L.offset)):(B.setEnd(L.node,L.offset),K.addRange(B))}}}}for(ne=[],K=N;K=K.parentNode;)K.nodeType===1&&ne.push({element:K,left:K.scrollLeft,top:K.scrollTop});for(typeof N.focus=="function"&&N.focus(),N=0;N<ne.length;N++){var W=ne[N];W.element.scrollLeft=W.left,W.element.scrollTop=W.top}}ch=!!wm,xm=wm=null}finally{Ze=f,ae.p=l,X.T=a}}n.current=i,Kt=2}}function j_(){if(Kt===2){Kt=0;var n=Ui,i=no,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=X.T,X.T=null;var l=ae.p;ae.p=2;var f=Ze;Ze|=4;try{c_(n,i.alternate,i)}finally{Ze=f,ae.p=l,X.T=a}}Kt=3}}function O_(){if(Kt===4||Kt===3){Kt=0,$c();var n=Ui,i=no,a=so,l=T_;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Kt=5:(Kt=0,no=Ui=null,M_(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(Li=null),ba(a),i=i.stateNode,Xe&&typeof Xe.onCommitFiberRoot=="function")try{Xe.onCommitFiberRoot(ft,i,void 0,(i.current.flags&128)===128)}catch{}if(l!==null){i=X.T,f=ae.p,ae.p=2,X.T=null;try{for(var p=n.onRecoverableError,E=0;E<l.length;E++){var N=l[E];p(N.value,{componentStack:N.stack})}}finally{X.T=i,ae.p=f}}(so&3)!==0&&Zu(),ws(n),f=n.pendingLanes,(a&4194090)!==0&&(f&42)!==0?n===dm?Fl++:(Fl=0,dm=n):Fl=0,zl(0)}}function M_(n,i){(n.pooledCacheLanes&=i)===0&&(i=n.pooledCache,i!=null&&(n.pooledCache=null,Tl(i)))}function Zu(n){return D_(),j_(),O_(),V_()}function V_(){if(Kt!==5)return!1;var n=Ui,i=um;um=0;var a=ba(so),l=X.T,f=ae.p;try{ae.p=32>a?32:a,X.T=null,a=hm,hm=null;var p=Ui,E=so;if(Kt=0,no=Ui=null,so=0,(Ze&6)!==0)throw Error(r(331));var N=Ze;if(Ze|=4,y_(p.current),p_(p,p.current,E,a),Ze=N,zl(0,!1),Xe&&typeof Xe.onPostCommitFiberRoot=="function")try{Xe.onPostCommitFiberRoot(ft,p)}catch{}return!0}finally{ae.p=f,X.T=l,M_(n,i)}}function k_(n,i,a){i=Bn(a,i),i=Hf(n.stateNode,i,2),n=Ci(n,i,2),n!==null&&(Us(n,2),ws(n))}function st(n,i,a){if(n.tag===3)k_(n,n,a);else for(;i!==null;){if(i.tag===3){k_(i,n,a);break}else if(i.tag===1){var l=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Li===null||!Li.has(l))){n=Bn(a,n),a=Fy(2),l=Ci(i,a,2),l!==null&&(zy(a,l,i,n),Us(l,2),ws(l));break}}i=i.return}}function gm(n,i,a){var l=n.pingCache;if(l===null){l=n.pingCache=new GS;var f=new Set;l.set(i,f)}else f=l.get(i),f===void 0&&(f=new Set,l.set(i,f));f.has(a)||(am=!0,f.add(a),n=XS.bind(null,n,i,a),i.then(n,n))}function XS(n,i,a){var l=n.pingCache;l!==null&&l.delete(i),n.pingedLanes|=n.suspendedLanes&a,n.warmLanes&=~a,at===n&&(Be&a)===a&&(pt===4||pt===3&&(Be&62914560)===Be&&300>Pn()-cm?(Ze&2)===0&&io(n,0):om|=a,to===Be&&(to=0)),ws(n)}function P_(n,i){i===0&&(i=Xo()),n=Fa(n,i),n!==null&&(Us(n,i),ws(n))}function ZS(n){var i=n.memoizedState,a=0;i!==null&&(a=i.retryLane),P_(n,a)}function WS(n,i){var a=0;switch(n.tag){case 13:var l=n.stateNode,f=n.memoizedState;f!==null&&(a=f.retryLane);break;case 19:l=n.stateNode;break;case 22:l=n.stateNode._retryCache;break;default:throw Error(r(314))}l!==null&&l.delete(i),P_(n,a)}function JS(n,i){return Er(n,i)}var Wu=null,ao=null,vm=!1,Ju=!1,ym=!1,na=0;function ws(n){n!==ao&&n.next===null&&(ao===null?Wu=ao=n:ao=ao.next=n),Ju=!0,vm||(vm=!0,tw())}function zl(n,i){if(!ym&&Ju){ym=!0;do for(var a=!1,l=Wu;l!==null;){if(n!==0){var f=l.pendingLanes;if(f===0)var p=0;else{var E=l.suspendedLanes,N=l.pingedLanes;p=(1<<31-tn(42|n)+1)-1,p&=f&~(E&~N),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(a=!0,z_(l,p))}else p=Be,p=Ea(l,l===at?p:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(p&3)===0||xr(l,p)||(a=!0,z_(l,p));l=l.next}while(a);ym=!1}}function ew(){L_()}function L_(){Ju=vm=!1;var n=0;na!==0&&(cw()&&(n=na),na=0);for(var i=Pn(),a=null,l=Wu;l!==null;){var f=l.next,p=U_(l,i);p===0?(l.next=null,a===null?Wu=f:a.next=f,f===null&&(ao=a)):(a=l,(n!==0||(p&3)!==0)&&(Ju=!0)),l=f}zl(n)}function U_(n,i){for(var a=n.suspendedLanes,l=n.pingedLanes,f=n.expirationTimes,p=n.pendingLanes&-62914561;0<p;){var E=31-tn(p),N=1<<E,O=f[E];O===-1?((N&a)===0||(N&l)!==0)&&(f[E]=Qo(N,i)):O<=i&&(n.expiredLanes|=N),p&=~N}if(i=at,a=Be,a=Ea(n,n===i?a:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l=n.callbackNode,a===0||n===i&&(We===2||We===9)||n.cancelPendingCommit!==null)return l!==null&&l!==null&&br(l),n.callbackNode=null,n.callbackPriority=0;if((a&3)===0||xr(n,a)){if(i=a&-a,i===n.callbackPriority)return i;switch(l!==null&&br(l),ba(a)){case 2:case 8:a=_a;break;case 32:a=Ar;break;case 268435456:a=Ta;break;default:a=Ar}return l=F_.bind(null,n),a=Er(a,l),n.callbackPriority=i,n.callbackNode=a,i}return l!==null&&l!==null&&br(l),n.callbackPriority=2,n.callbackNode=null,2}function F_(n,i){if(Kt!==0&&Kt!==5)return n.callbackNode=null,n.callbackPriority=0,null;var a=n.callbackNode;if(Zu()&&n.callbackNode!==a)return null;var l=Be;return l=Ea(n,n===at?l:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l===0?null:(b_(n,l,i),U_(n,Pn()),n.callbackNode!=null&&n.callbackNode===a?F_.bind(null,n):null)}function z_(n,i){if(Zu())return null;b_(n,i,!0)}function tw(){hw(function(){(Ze&6)!==0?Er($o,ew):L_()})}function _m(){return na===0&&(na=Yo()),na}function q_(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Ia(""+n)}function B_(n,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,n.id&&a.setAttribute("form",n.id),i.parentNode.insertBefore(a,i),n=new FormData(n),a.parentNode.removeChild(a),n}function nw(n,i,a,l,f){if(i==="submit"&&a&&a.stateNode===f){var p=q_((f[Et]||null).action),E=l.submitter;E&&(i=(i=E[Et]||null)?q_(i.formAction):E.getAttribute("formAction"),i!==null&&(p=i,E=null));var N=new Ca("action","action",null,l,f);n.push({event:N,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(na!==0){var O=E?B_(f,E):new FormData(f);Uf(a,{pending:!0,data:O,method:f.method,action:p},null,O)}}else typeof p=="function"&&(N.preventDefault(),O=E?B_(f,E):new FormData(f),Uf(a,{pending:!0,data:O,method:f.method,action:p},p,O))},currentTarget:f}]})}}for(var Tm=0;Tm<sf.length;Tm++){var Em=sf[Tm],sw=Em.toLowerCase(),iw=Em[0].toUpperCase()+Em.slice(1);ts(sw,"on"+iw)}ts(bv,"onAnimationEnd"),ts(Av,"onAnimationIteration"),ts(Nv,"onAnimationStart"),ts("dblclick","onDoubleClick"),ts("focusin","onFocus"),ts("focusout","onBlur"),ts(ES,"onTransitionRun"),ts(bS,"onTransitionStart"),ts(AS,"onTransitionCancel"),ts(Sv,"onTransitionEnd"),zs("onMouseEnter",["mouseout","mouseover"]),zs("onMouseLeave",["mouseout","mouseover"]),zs("onPointerEnter",["pointerout","pointerover"]),zs("onPointerLeave",["pointerout","pointerover"]),Jn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Jn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Jn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Jn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Jn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Jn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ql="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),rw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ql));function H_(n,i){i=(i&4)!==0;for(var a=0;a<n.length;a++){var l=n[a],f=l.event;l=l.listeners;e:{var p=void 0;if(i)for(var E=l.length-1;0<=E;E--){var N=l[E],O=N.instance,H=N.currentTarget;if(N=N.listener,O!==p&&f.isPropagationStopped())break e;p=N,f.currentTarget=H;try{p(f)}catch(Z){Fu(Z)}f.currentTarget=null,p=O}else for(E=0;E<l.length;E++){if(N=l[E],O=N.instance,H=N.currentTarget,N=N.listener,O!==p&&f.isPropagationStopped())break e;p=N,f.currentTarget=H;try{p(f)}catch(Z){Fu(Z)}f.currentTarget=null,p=O}}}}function Le(n,i){var a=i[Jo];a===void 0&&(a=i[Jo]=new Set);var l=n+"__bubble";a.has(l)||(G_(i,n,2,!1),a.add(l))}function bm(n,i,a){var l=0;i&&(l|=4),G_(a,n,l,i)}var eh="_reactListening"+Math.random().toString(36).slice(2);function Am(n){if(!n[eh]){n[eh]=!0,el.forEach(function(a){a!=="selectionchange"&&(rw.has(a)||bm(a,!1,n),bm(a,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[eh]||(i[eh]=!0,bm("selectionchange",!1,i))}}function G_(n,i,a,l){switch(pT(i)){case 2:var f=jw;break;case 8:f=Ow;break;default:f=Pm}a=f.bind(null,i,a,n),f=void 0,!zn||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),l?f!==void 0?n.addEventListener(i,a,{capture:!0,passive:f}):n.addEventListener(i,a,!0):f!==void 0?n.addEventListener(i,a,{passive:f}):n.addEventListener(i,a,!1)}function Nm(n,i,a,l,f){var p=l;if((i&1)===0&&(i&2)===0&&l!==null)e:for(;;){if(l===null)return;var E=l.tag;if(E===3||E===4){var N=l.stateNode.containerInfo;if(N===f)break;if(E===4)for(E=l.return;E!==null;){var O=E.tag;if((O===3||O===4)&&E.stateNode.containerInfo===f)return;E=E.return}for(;N!==null;){if(E=Fs(N),E===null)return;if(O=E.tag,O===5||O===6||O===26||O===27){l=p=E;continue e}N=N.parentNode}}l=l.return}nu(function(){var H=p,Z=Fn(a),ne=[];e:{var $=wv.get(n);if($!==void 0){var K=Ca,Ae=n;switch(n){case"keypress":if(vs(a)===0)break e;case"keydown":case"keyup":K=Va;break;case"focusin":Ae="focus",K=ja;break;case"focusout":Ae="blur",K=ja;break;case"beforeblur":case"afterblur":K=ja;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":K=qn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":K=Yd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":K=uu;break;case bv:case Av:case Nv:K=Oa;break;case Sv:K=du;break;case"scroll":case"scrollend":K=su;break;case"wheel":K=ka;break;case"copy":case"cut":case"paste":K=Ma;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":K=dl;break;case"toggle":case"beforetoggle":K=mu}var Te=(i&4)!==0,nt=!Te&&(n==="scroll"||n==="scrollend"),z=Te?$!==null?$+"Capture":null:$;Te=[];for(var L=H,B;L!==null;){var W=L;if(B=W.stateNode,W=W.tag,W!==5&&W!==26&&W!==27||B===null||z===null||(W=Vr(L,z),W!=null&&Te.push(Bl(L,W,B))),nt)break;L=L.return}0<Te.length&&($=new K($,Ae,null,a,Z),ne.push({event:$,listeners:Te}))}}if((i&7)===0){e:{if($=n==="mouseover"||n==="pointerover",K=n==="mouseout"||n==="pointerout",$&&a!==Hs&&(Ae=a.relatedTarget||a.fromElement)&&(Fs(Ae)||Ae[Ln]))break e;if((K||$)&&($=Z.window===Z?Z:($=Z.ownerDocument)?$.defaultView||$.parentWindow:window,K?(Ae=a.relatedTarget||a.toElement,K=H,Ae=Ae?Fs(Ae):null,Ae!==null&&(nt=c(Ae),Te=Ae.tag,Ae!==nt||Te!==5&&Te!==27&&Te!==6)&&(Ae=null)):(K=null,Ae=H),K!==Ae)){if(Te=qn,W="onMouseLeave",z="onMouseEnter",L="mouse",(n==="pointerout"||n==="pointerover")&&(Te=dl,W="onPointerLeave",z="onPointerEnter",L="pointer"),nt=K==null?$:fs(K),B=Ae==null?$:fs(Ae),$=new Te(W,L+"leave",K,a,Z),$.target=nt,$.relatedTarget=B,W=null,Fs(Z)===H&&(Te=new Te(z,L+"enter",Ae,a,Z),Te.target=B,Te.relatedTarget=nt,W=Te),nt=W,K&&Ae)t:{for(Te=K,z=Ae,L=0,B=Te;B;B=oo(B))L++;for(B=0,W=z;W;W=oo(W))B++;for(;0<L-B;)Te=oo(Te),L--;for(;0<B-L;)z=oo(z),B--;for(;L--;){if(Te===z||z!==null&&Te===z.alternate)break t;Te=oo(Te),z=oo(z)}Te=null}else Te=null;K!==null&&$_(ne,$,K,Te,!1),Ae!==null&&nt!==null&&$_(ne,nt,Ae,Te,!0)}}e:{if($=H?fs(H):window,K=$.nodeName&&$.nodeName.toLowerCase(),K==="select"||K==="input"&&$.type==="file")var me=hv;else if(Rt($))if(dv)me=yS;else{me=gS;var ke=pS}else K=$.nodeName,!K||K.toLowerCase()!=="input"||$.type!=="checkbox"&&$.type!=="radio"?H&&rl(H.elementType)&&(me=hv):me=vS;if(me&&(me=me(n,H))){Ys(ne,me,a,Z);break e}ke&&ke(n,$,H),n==="focusout"&&H&&$.type==="number"&&H.memoizedProps.value!=null&&Ni($,"number",$.value)}switch(ke=H?fs(H):window,n){case"focusin":(Rt(ke)||ke.contentEditable==="true")&&(Pa=ke,ef=H,pl=null);break;case"focusout":pl=ef=Pa=null;break;case"mousedown":tf=!0;break;case"contextmenu":case"mouseup":case"dragend":tf=!1,Tv(ne,a,Z);break;case"selectionchange":if(TS)break;case"keydown":case"keyup":Tv(ne,a,Z)}var ge;if(Ts)e:{switch(n){case"compositionstart":var Ee="onCompositionStart";break e;case"compositionend":Ee="onCompositionEnd";break e;case"compositionupdate":Ee="onCompositionUpdate";break e}Ee=void 0}else ze?Q(n,a)&&(Ee="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Ee="onCompositionStart");Ee&&(T&&a.locale!=="ko"&&(ze||Ee!=="onCompositionStart"?Ee==="onCompositionEnd"&&ze&&(ge=ol()):(gs=Z,Si="value"in gs?gs.value:gs.textContent,ze=!0)),ke=th(H,Ee),0<ke.length&&(Ee=new ul(Ee,n,null,a,Z),ne.push({event:Ee,listeners:ke}),ge?Ee.data=ge:(ge=oe(a),ge!==null&&(Ee.data=ge)))),(ge=y?Ct(n,a):qe(n,a))&&(Ee=th(H,"onBeforeInput"),0<Ee.length&&(ke=new ul("onBeforeInput","beforeinput",null,a,Z),ne.push({event:ke,listeners:Ee}),ke.data=ge)),nw(ne,n,H,a,Z)}H_(ne,i)})}function Bl(n,i,a){return{instance:n,listener:i,currentTarget:a}}function th(n,i){for(var a=i+"Capture",l=[];n!==null;){var f=n,p=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||p===null||(f=Vr(n,a),f!=null&&l.unshift(Bl(n,f,p)),f=Vr(n,i),f!=null&&l.push(Bl(n,f,p))),n.tag===3)return l;n=n.return}return[]}function oo(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function $_(n,i,a,l,f){for(var p=i._reactName,E=[];a!==null&&a!==l;){var N=a,O=N.alternate,H=N.stateNode;if(N=N.tag,O!==null&&O===l)break;N!==5&&N!==26&&N!==27||H===null||(O=H,f?(H=Vr(a,p),H!=null&&E.unshift(Bl(a,H,O))):f||(H=Vr(a,p),H!=null&&E.push(Bl(a,H,O)))),a=a.return}E.length!==0&&n.push({event:i,listeners:E})}var aw=/\r\n?/g,ow=/\u0000|\uFFFD/g;function K_(n){return(typeof n=="string"?n:""+n).replace(aw,`
`).replace(ow,"")}function Q_(n,i){return i=K_(i),K_(n)===i}function nh(){}function tt(n,i,a,l,f,p){switch(a){case"children":typeof l=="string"?i==="body"||i==="textarea"&&l===""||Un(n,l):(typeof l=="number"||typeof l=="bigint")&&i!=="body"&&Un(n,""+l);break;case"className":ms(n,"class",l);break;case"tabIndex":ms(n,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":ms(n,a,l);break;case"style":il(n,l,p);break;case"data":if(i!=="object"){ms(n,"data",l);break}case"src":case"href":if(l===""&&(i!=="a"||a!=="href")){n.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(a);break}l=Ia(""+l),n.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){n.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(a==="formAction"?(i!=="input"&&tt(n,i,"name",f.name,f,null),tt(n,i,"formEncType",f.formEncType,f,null),tt(n,i,"formMethod",f.formMethod,f,null),tt(n,i,"formTarget",f.formTarget,f,null)):(tt(n,i,"encType",f.encType,f,null),tt(n,i,"method",f.method,f,null),tt(n,i,"target",f.target,f,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(a);break}l=Ia(""+l),n.setAttribute(a,l);break;case"onClick":l!=null&&(n.onclick=nh);break;case"onScroll":l!=null&&Le("scroll",n);break;case"onScrollEnd":l!=null&&Le("scrollend",n);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(r(60));n.innerHTML=a}}break;case"multiple":n.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":n.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){n.removeAttribute("xlink:href");break}a=Ia(""+l),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,""+l):n.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,""):n.removeAttribute(a);break;case"capture":case"download":l===!0?n.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,l):n.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?n.setAttribute(a,l):n.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?n.removeAttribute(a):n.setAttribute(a,l);break;case"popover":Le("beforetoggle",n),Le("toggle",n),Ai(n,"popover",l);break;case"xlinkActuate":Ht(n,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Ht(n,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Ht(n,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Ht(n,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Ht(n,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Ht(n,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Ht(n,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Ht(n,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Ht(n,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Ai(n,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Kd.get(a)||a,Ai(n,a,l))}}function Sm(n,i,a,l,f,p){switch(a){case"style":il(n,l,p);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(r(60));n.innerHTML=a}}break;case"children":typeof l=="string"?Un(n,l):(typeof l=="number"||typeof l=="bigint")&&Un(n,""+l);break;case"onScroll":l!=null&&Le("scroll",n);break;case"onScrollEnd":l!=null&&Le("scrollend",n);break;case"onClick":l!=null&&(n.onclick=nh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Aa.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),i=a.slice(2,f?a.length-7:void 0),p=n[Et]||null,p=p!=null?p[a]:null,typeof p=="function"&&n.removeEventListener(i,p,f),typeof l=="function")){typeof p!="function"&&p!==null&&(a in n?n[a]=null:n.hasAttribute(a)&&n.removeAttribute(a)),n.addEventListener(i,l,f);break e}a in n?n[a]=l:l===!0?n.setAttribute(a,""):Ai(n,a,l)}}}function Qt(n,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Le("error",n),Le("load",n);var l=!1,f=!1,p;for(p in a)if(a.hasOwnProperty(p)){var E=a[p];if(E!=null)switch(p){case"src":l=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:tt(n,i,p,E,a,null)}}f&&tt(n,i,"srcSet",a.srcSet,a,null),l&&tt(n,i,"src",a.src,a,null);return;case"input":Le("invalid",n);var N=p=E=f=null,O=null,H=null;for(l in a)if(a.hasOwnProperty(l)){var Z=a[l];if(Z!=null)switch(l){case"name":f=Z;break;case"type":E=Z;break;case"checked":O=Z;break;case"defaultChecked":H=Z;break;case"value":p=Z;break;case"defaultValue":N=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(r(137,i));break;default:tt(n,i,l,Z,a,null)}}jr(n,p,N,O,H,E,f,!1),xa(n);return;case"select":Le("invalid",n),l=E=p=null;for(f in a)if(a.hasOwnProperty(f)&&(N=a[f],N!=null))switch(f){case"value":p=N;break;case"defaultValue":E=N;break;case"multiple":l=N;default:tt(n,i,f,N,a,null)}i=p,a=E,n.multiple=!!l,i!=null?Bs(n,!!l,i,!1):a!=null&&Bs(n,!!l,a,!0);return;case"textarea":Le("invalid",n),p=f=l=null;for(E in a)if(a.hasOwnProperty(E)&&(N=a[E],N!=null))switch(E){case"value":l=N;break;case"defaultValue":f=N;break;case"children":p=N;break;case"dangerouslySetInnerHTML":if(N!=null)throw Error(r(91));break;default:tt(n,i,E,N,a,null)}Or(n,l,f,p),xa(n);return;case"option":for(O in a)if(a.hasOwnProperty(O)&&(l=a[O],l!=null))switch(O){case"selected":n.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:tt(n,i,O,l,a,null)}return;case"dialog":Le("beforetoggle",n),Le("toggle",n),Le("cancel",n),Le("close",n);break;case"iframe":case"object":Le("load",n);break;case"video":case"audio":for(l=0;l<ql.length;l++)Le(ql[l],n);break;case"image":Le("error",n),Le("load",n);break;case"details":Le("toggle",n);break;case"embed":case"source":case"link":Le("error",n),Le("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(H in a)if(a.hasOwnProperty(H)&&(l=a[H],l!=null))switch(H){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:tt(n,i,H,l,a,null)}return;default:if(rl(i)){for(Z in a)a.hasOwnProperty(Z)&&(l=a[Z],l!==void 0&&Sm(n,i,Z,l,a,void 0));return}}for(N in a)a.hasOwnProperty(N)&&(l=a[N],l!=null&&tt(n,i,N,l,a,null))}function lw(n,i,a,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,p=null,E=null,N=null,O=null,H=null,Z=null;for(K in a){var ne=a[K];if(a.hasOwnProperty(K)&&ne!=null)switch(K){case"checked":break;case"value":break;case"defaultValue":O=ne;default:l.hasOwnProperty(K)||tt(n,i,K,null,l,ne)}}for(var $ in l){var K=l[$];if(ne=a[$],l.hasOwnProperty($)&&(K!=null||ne!=null))switch($){case"type":p=K;break;case"name":f=K;break;case"checked":H=K;break;case"defaultChecked":Z=K;break;case"value":E=K;break;case"defaultValue":N=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(r(137,i));break;default:K!==ne&&tt(n,i,$,K,l,ne)}}Nn(n,E,N,O,H,Z,p,f);return;case"select":K=E=N=$=null;for(p in a)if(O=a[p],a.hasOwnProperty(p)&&O!=null)switch(p){case"value":break;case"multiple":K=O;default:l.hasOwnProperty(p)||tt(n,i,p,null,l,O)}for(f in l)if(p=l[f],O=a[f],l.hasOwnProperty(f)&&(p!=null||O!=null))switch(f){case"value":$=p;break;case"defaultValue":N=p;break;case"multiple":E=p;default:p!==O&&tt(n,i,f,p,l,O)}i=N,a=E,l=K,$!=null?Bs(n,!!a,$,!1):!!l!=!!a&&(i!=null?Bs(n,!!a,i,!0):Bs(n,!!a,a?[]:"",!1));return;case"textarea":K=$=null;for(N in a)if(f=a[N],a.hasOwnProperty(N)&&f!=null&&!l.hasOwnProperty(N))switch(N){case"value":break;case"children":break;default:tt(n,i,N,null,l,f)}for(E in l)if(f=l[E],p=a[E],l.hasOwnProperty(E)&&(f!=null||p!=null))switch(E){case"value":$=f;break;case"defaultValue":K=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(r(91));break;default:f!==p&&tt(n,i,E,f,l,p)}Je(n,$,K);return;case"option":for(var Ae in a)if($=a[Ae],a.hasOwnProperty(Ae)&&$!=null&&!l.hasOwnProperty(Ae))switch(Ae){case"selected":n.selected=!1;break;default:tt(n,i,Ae,null,l,$)}for(O in l)if($=l[O],K=a[O],l.hasOwnProperty(O)&&$!==K&&($!=null||K!=null))switch(O){case"selected":n.selected=$&&typeof $!="function"&&typeof $!="symbol";break;default:tt(n,i,O,$,l,K)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Te in a)$=a[Te],a.hasOwnProperty(Te)&&$!=null&&!l.hasOwnProperty(Te)&&tt(n,i,Te,null,l,$);for(H in l)if($=l[H],K=a[H],l.hasOwnProperty(H)&&$!==K&&($!=null||K!=null))switch(H){case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(r(137,i));break;default:tt(n,i,H,$,l,K)}return;default:if(rl(i)){for(var nt in a)$=a[nt],a.hasOwnProperty(nt)&&$!==void 0&&!l.hasOwnProperty(nt)&&Sm(n,i,nt,void 0,l,$);for(Z in l)$=l[Z],K=a[Z],!l.hasOwnProperty(Z)||$===K||$===void 0&&K===void 0||Sm(n,i,Z,$,l,K);return}}for(var z in a)$=a[z],a.hasOwnProperty(z)&&$!=null&&!l.hasOwnProperty(z)&&tt(n,i,z,null,l,$);for(ne in l)$=l[ne],K=a[ne],!l.hasOwnProperty(ne)||$===K||$==null&&K==null||tt(n,i,ne,$,l,K)}var wm=null,xm=null;function sh(n){return n.nodeType===9?n:n.ownerDocument}function Y_(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function X_(n,i){if(n===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&i==="foreignObject"?0:n}function Im(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Cm=null;function cw(){var n=window.event;return n&&n.type==="popstate"?n===Cm?!1:(Cm=n,!0):(Cm=null,!1)}var Z_=typeof setTimeout=="function"?setTimeout:void 0,uw=typeof clearTimeout=="function"?clearTimeout:void 0,W_=typeof Promise=="function"?Promise:void 0,hw=typeof queueMicrotask=="function"?queueMicrotask:typeof W_<"u"?function(n){return W_.resolve(null).then(n).catch(dw)}:Z_;function dw(n){setTimeout(function(){throw n})}function zi(n){return n==="head"}function J_(n,i){var a=i,l=0,f=0;do{var p=a.nextSibling;if(n.removeChild(a),p&&p.nodeType===8)if(a=p.data,a==="/$"){if(0<l&&8>l){a=l;var E=n.ownerDocument;if(a&1&&Hl(E.documentElement),a&2&&Hl(E.body),a&4)for(a=E.head,Hl(a),E=a.firstChild;E;){var N=E.nextSibling,O=E.nodeName;E[Ir]||O==="SCRIPT"||O==="STYLE"||O==="LINK"&&E.rel.toLowerCase()==="stylesheet"||a.removeChild(E),E=N}}if(f===0){n.removeChild(p),Wl(i);return}f--}else a==="$"||a==="$?"||a==="$!"?f++:l=a.charCodeAt(0)-48;else l=0;a=p}while(a);Wl(i)}function Rm(n){var i=n.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Rm(a),bi(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}n.removeChild(a)}}function fw(n,i,a,l){for(;n.nodeType===1;){var f=a;if(n.nodeName.toLowerCase()!==i.toLowerCase()){if(!l&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(l){if(!n[Ir])switch(i){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(p=n.getAttribute("rel"),p==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(p!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(p=n.getAttribute("src"),(p!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&p&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(i==="input"&&n.type==="hidden"){var p=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===p)return n}else return n;if(n=ss(n.nextSibling),n===null)break}return null}function mw(n,i,a){if(i==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!a||(n=ss(n.nextSibling),n===null))return null;return n}function Dm(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState==="complete"}function pw(n,i){var a=n.ownerDocument;if(n.data!=="$?"||a.readyState==="complete")i();else{var l=function(){i(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),n._reactRetry=l}}function ss(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return n}var jm=null;function eT(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return n;i--}else a==="/$"&&i++}n=n.previousSibling}return null}function tT(n,i,a){switch(i=sh(a),n){case"html":if(n=i.documentElement,!n)throw Error(r(452));return n;case"head":if(n=i.head,!n)throw Error(r(453));return n;case"body":if(n=i.body,!n)throw Error(r(454));return n;default:throw Error(r(451))}}function Hl(n){for(var i=n.attributes;i.length;)n.removeAttributeNode(i[0]);bi(n)}var Yn=new Map,nT=new Set;function ih(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var li=ae.d;ae.d={f:gw,r:vw,D:yw,C:_w,L:Tw,m:Ew,X:Aw,S:bw,M:Nw};function gw(){var n=li.f(),i=Yu();return n||i}function vw(n){var i=ds(n);i!==null&&i.tag===5&&i.type==="form"?by(i):li.r(n)}var lo=typeof document>"u"?null:document;function sT(n,i,a){var l=lo;if(l&&typeof i=="string"&&i){var f=bt(i);f='link[rel="'+n+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),nT.has(f)||(nT.add(f),n={rel:n,crossOrigin:a,href:i},l.querySelector(f)===null&&(i=l.createElement("link"),Qt(i,"link",n),vt(i),l.head.appendChild(i)))}}function yw(n){li.D(n),sT("dns-prefetch",n,null)}function _w(n,i){li.C(n,i),sT("preconnect",n,i)}function Tw(n,i,a){li.L(n,i,a);var l=lo;if(l&&n&&i){var f='link[rel="preload"][as="'+bt(i)+'"]';i==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+bt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+bt(a.imageSizes)+'"]')):f+='[href="'+bt(n)+'"]';var p=f;switch(i){case"style":p=co(n);break;case"script":p=uo(n)}Yn.has(p)||(n=_({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:n,as:i},a),Yn.set(p,n),l.querySelector(f)!==null||i==="style"&&l.querySelector(Gl(p))||i==="script"&&l.querySelector($l(p))||(i=l.createElement("link"),Qt(i,"link",n),vt(i),l.head.appendChild(i)))}}function Ew(n,i){li.m(n,i);var a=lo;if(a&&n){var l=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+bt(l)+'"][href="'+bt(n)+'"]',p=f;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=uo(n)}if(!Yn.has(p)&&(n=_({rel:"modulepreload",href:n},i),Yn.set(p,n),a.querySelector(f)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector($l(p)))return}l=a.createElement("link"),Qt(l,"link",n),vt(l),a.head.appendChild(l)}}}function bw(n,i,a){li.S(n,i,a);var l=lo;if(l&&n){var f=hn(l).hoistableStyles,p=co(n);i=i||"default";var E=f.get(p);if(!E){var N={loading:0,preload:null};if(E=l.querySelector(Gl(p)))N.loading=5;else{n=_({rel:"stylesheet",href:n,"data-precedence":i},a),(a=Yn.get(p))&&Om(n,a);var O=E=l.createElement("link");vt(O),Qt(O,"link",n),O._p=new Promise(function(H,Z){O.onload=H,O.onerror=Z}),O.addEventListener("load",function(){N.loading|=1}),O.addEventListener("error",function(){N.loading|=2}),N.loading|=4,rh(E,i,l)}E={type:"stylesheet",instance:E,count:1,state:N},f.set(p,E)}}}function Aw(n,i){li.X(n,i);var a=lo;if(a&&n){var l=hn(a).hoistableScripts,f=uo(n),p=l.get(f);p||(p=a.querySelector($l(f)),p||(n=_({src:n,async:!0},i),(i=Yn.get(f))&&Mm(n,i),p=a.createElement("script"),vt(p),Qt(p,"link",n),a.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},l.set(f,p))}}function Nw(n,i){li.M(n,i);var a=lo;if(a&&n){var l=hn(a).hoistableScripts,f=uo(n),p=l.get(f);p||(p=a.querySelector($l(f)),p||(n=_({src:n,async:!0,type:"module"},i),(i=Yn.get(f))&&Mm(n,i),p=a.createElement("script"),vt(p),Qt(p,"link",n),a.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},l.set(f,p))}}function iT(n,i,a,l){var f=(f=Ie.current)?ih(f):null;if(!f)throw Error(r(446));switch(n){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=co(a.href),a=hn(f).hoistableStyles,l=a.get(i),l||(l={type:"style",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){n=co(a.href);var p=hn(f).hoistableStyles,E=p.get(n);if(E||(f=f.ownerDocument||f,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(n,E),(p=f.querySelector(Gl(n)))&&!p._p&&(E.instance=p,E.state.loading=5),Yn.has(n)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Yn.set(n,a),p||Sw(f,n,a,E.state))),i&&l===null)throw Error(r(528,""));return E}if(i&&l!==null)throw Error(r(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=uo(a),a=hn(f).hoistableScripts,l=a.get(i),l||(l={type:"script",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,n))}}function co(n){return'href="'+bt(n)+'"'}function Gl(n){return'link[rel="stylesheet"]['+n+"]"}function rT(n){return _({},n,{"data-precedence":n.precedence,precedence:null})}function Sw(n,i,a,l){n.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=n.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),Qt(i,"link",a),vt(i),n.head.appendChild(i))}function uo(n){return'[src="'+bt(n)+'"]'}function $l(n){return"script[async]"+n}function aT(n,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var l=n.querySelector('style[data-href~="'+bt(a.href)+'"]');if(l)return i.instance=l,vt(l),l;var f=_({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(n.ownerDocument||n).createElement("style"),vt(l),Qt(l,"style",f),rh(l,a.precedence,n),i.instance=l;case"stylesheet":f=co(a.href);var p=n.querySelector(Gl(f));if(p)return i.state.loading|=4,i.instance=p,vt(p),p;l=rT(a),(f=Yn.get(f))&&Om(l,f),p=(n.ownerDocument||n).createElement("link"),vt(p);var E=p;return E._p=new Promise(function(N,O){E.onload=N,E.onerror=O}),Qt(p,"link",l),i.state.loading|=4,rh(p,a.precedence,n),i.instance=p;case"script":return p=uo(a.src),(f=n.querySelector($l(p)))?(i.instance=f,vt(f),f):(l=a,(f=Yn.get(p))&&(l=_({},a),Mm(l,f)),n=n.ownerDocument||n,f=n.createElement("script"),vt(f),Qt(f,"link",l),n.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(r(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(l=i.instance,i.state.loading|=4,rh(l,a.precedence,n));return i.instance}function rh(n,i,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=l.length?l[l.length-1]:null,p=f,E=0;E<l.length;E++){var N=l[E];if(N.dataset.precedence===i)p=N;else if(p!==f)break}p?p.parentNode.insertBefore(n,p.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(n,i.firstChild))}function Om(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.title==null&&(n.title=i.title)}function Mm(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.integrity==null&&(n.integrity=i.integrity)}var ah=null;function oT(n,i,a){if(ah===null){var l=new Map,f=ah=new Map;f.set(a,l)}else f=ah,l=f.get(a),l||(l=new Map,f.set(a,l));if(l.has(n))return l;for(l.set(n,null),a=a.getElementsByTagName(n),f=0;f<a.length;f++){var p=a[f];if(!(p[Ir]||p[It]||n==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var E=p.getAttribute(i)||"";E=n+E;var N=l.get(E);N?N.push(p):l.set(E,[p])}}return l}function lT(n,i,a){n=n.ownerDocument||n,n.head.insertBefore(a,i==="title"?n.querySelector("head > title"):null)}function ww(n,i,a){if(a===1||i.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return n=i.disabled,typeof i.precedence=="string"&&n==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function cT(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}var Kl=null;function xw(){}function Iw(n,i,a){if(Kl===null)throw Error(r(475));var l=Kl;if(i.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var f=co(a.href),p=n.querySelector(Gl(f));if(p){n=p._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(l.count++,l=oh.bind(l),n.then(l,l)),i.state.loading|=4,i.instance=p,vt(p);return}p=n.ownerDocument||n,a=rT(a),(f=Yn.get(f))&&Om(a,f),p=p.createElement("link"),vt(p);var E=p;E._p=new Promise(function(N,O){E.onload=N,E.onerror=O}),Qt(p,"link",a),i.instance=p}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(i,n),(n=i.state.preload)&&(i.state.loading&3)===0&&(l.count++,i=oh.bind(l),n.addEventListener("load",i),n.addEventListener("error",i))}}function Cw(){if(Kl===null)throw Error(r(475));var n=Kl;return n.stylesheets&&n.count===0&&Vm(n,n.stylesheets),0<n.count?function(i){var a=setTimeout(function(){if(n.stylesheets&&Vm(n,n.stylesheets),n.unsuspend){var l=n.unsuspend;n.unsuspend=null,l()}},6e4);return n.unsuspend=i,function(){n.unsuspend=null,clearTimeout(a)}}:null}function oh(){if(this.count--,this.count===0){if(this.stylesheets)Vm(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var lh=null;function Vm(n,i){n.stylesheets=null,n.unsuspend!==null&&(n.count++,lh=new Map,i.forEach(Rw,n),lh=null,oh.call(n))}function Rw(n,i){if(!(i.state.loading&4)){var a=lh.get(n);if(a)var l=a.get(null);else{a=new Map,lh.set(n,a);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<f.length;p++){var E=f[p];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(a.set(E.dataset.precedence,E),l=E)}l&&a.set(null,l)}f=i.instance,E=f.getAttribute("data-precedence"),p=a.get(E)||l,p===l&&a.set(null,f),a.set(E,f),this.count++,l=oh.bind(this),f.addEventListener("load",l),f.addEventListener("error",l),p?p.parentNode.insertBefore(f,p.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),i.state.loading|=4}}var Ql={$$typeof:ee,Provider:null,Consumer:null,_currentValue:ce,_currentValue2:ce,_threadCount:0};function Dw(n,i,a,l,f,p,E,N){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ls(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ls(0),this.hiddenUpdates=Ls(null),this.identifierPrefix=l,this.onUncaughtError=f,this.onCaughtError=p,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=N,this.incompleteTransitions=new Map}function uT(n,i,a,l,f,p,E,N,O,H,Z,ne){return n=new Dw(n,i,a,E,N,O,H,ne),i=1,p===!0&&(i|=24),p=wn(3,null,null,i),n.current=p,p.stateNode=n,i=gf(),i.refCount++,n.pooledCache=i,i.refCount++,p.memoizedState={element:l,isDehydrated:a,cache:i},Tf(p),n}function hT(n){return n?(n=za,n):za}function dT(n,i,a,l,f,p){f=hT(f),l.context===null?l.context=f:l.pendingContext=f,l=Ii(i),l.payload={element:a},p=p===void 0?null:p,p!==null&&(l.callback=p),a=Ci(n,l,i),a!==null&&(Dn(a,n,i),Nl(a,n,i))}function fT(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<i?a:i}}function km(n,i){fT(n,i),(n=n.alternate)&&fT(n,i)}function mT(n){if(n.tag===13){var i=Fa(n,67108864);i!==null&&Dn(i,n,67108864),km(n,67108864)}}var ch=!0;function jw(n,i,a,l){var f=X.T;X.T=null;var p=ae.p;try{ae.p=2,Pm(n,i,a,l)}finally{ae.p=p,X.T=f}}function Ow(n,i,a,l){var f=X.T;X.T=null;var p=ae.p;try{ae.p=8,Pm(n,i,a,l)}finally{ae.p=p,X.T=f}}function Pm(n,i,a,l){if(ch){var f=Lm(l);if(f===null)Nm(n,i,l,uh,a),gT(n,l);else if(Vw(f,n,i,a,l))l.stopPropagation();else if(gT(n,l),i&4&&-1<Mw.indexOf(n)){for(;f!==null;){var p=ds(f);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var E=Wn(p.pendingLanes);if(E!==0){var N=p;for(N.pendingLanes|=2,N.entangledLanes|=2;E;){var O=1<<31-tn(E);N.entanglements[1]|=O,E&=~O}ws(p),(Ze&6)===0&&(Ku=Pn()+500,zl(0))}}break;case 13:N=Fa(p,2),N!==null&&Dn(N,p,2),Yu(),km(p,2)}if(p=Lm(l),p===null&&Nm(n,i,l,uh,a),p===f)break;f=p}f!==null&&l.stopPropagation()}else Nm(n,i,l,null,a)}}function Lm(n){return n=Fn(n),Um(n)}var uh=null;function Um(n){if(uh=null,n=Fs(n),n!==null){var i=c(n);if(i===null)n=null;else{var a=i.tag;if(a===13){if(n=d(i),n!==null)return n;n=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}return uh=n,null}function pT(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(zd()){case $o:return 2;case _a:return 8;case Ar:case qd:return 32;case Ta:return 268435456;default:return 32}default:return 32}}var Fm=!1,qi=null,Bi=null,Hi=null,Yl=new Map,Xl=new Map,Gi=[],Mw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function gT(n,i){switch(n){case"focusin":case"focusout":qi=null;break;case"dragenter":case"dragleave":Bi=null;break;case"mouseover":case"mouseout":Hi=null;break;case"pointerover":case"pointerout":Yl.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xl.delete(i.pointerId)}}function Zl(n,i,a,l,f,p){return n===null||n.nativeEvent!==p?(n={blockedOn:i,domEventName:a,eventSystemFlags:l,nativeEvent:p,targetContainers:[f]},i!==null&&(i=ds(i),i!==null&&mT(i)),n):(n.eventSystemFlags|=l,i=n.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),n)}function Vw(n,i,a,l,f){switch(i){case"focusin":return qi=Zl(qi,n,i,a,l,f),!0;case"dragenter":return Bi=Zl(Bi,n,i,a,l,f),!0;case"mouseover":return Hi=Zl(Hi,n,i,a,l,f),!0;case"pointerover":var p=f.pointerId;return Yl.set(p,Zl(Yl.get(p)||null,n,i,a,l,f)),!0;case"gotpointercapture":return p=f.pointerId,Xl.set(p,Zl(Xl.get(p)||null,n,i,a,l,f)),!0}return!1}function vT(n){var i=Fs(n.target);if(i!==null){var a=c(i);if(a!==null){if(i=a.tag,i===13){if(i=d(a),i!==null){n.blockedOn=i,Yc(n.priority,function(){if(a.tag===13){var l=Rn();l=_i(l);var f=Fa(a,l);f!==null&&Dn(f,a,l),km(a,l)}});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function hh(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var a=Lm(n.nativeEvent);if(a===null){a=n.nativeEvent;var l=new a.constructor(a.type,a);Hs=l,a.target.dispatchEvent(l),Hs=null}else return i=ds(a),i!==null&&mT(i),n.blockedOn=a,!1;i.shift()}return!0}function yT(n,i,a){hh(n)&&a.delete(i)}function kw(){Fm=!1,qi!==null&&hh(qi)&&(qi=null),Bi!==null&&hh(Bi)&&(Bi=null),Hi!==null&&hh(Hi)&&(Hi=null),Yl.forEach(yT),Xl.forEach(yT)}function dh(n,i){n.blockedOn===i&&(n.blockedOn=null,Fm||(Fm=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,kw)))}var fh=null;function _T(n){fh!==n&&(fh=n,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){fh===n&&(fh=null);for(var i=0;i<n.length;i+=3){var a=n[i],l=n[i+1],f=n[i+2];if(typeof l!="function"){if(Um(l||a)===null)continue;break}var p=ds(a);p!==null&&(n.splice(i,3),i-=3,Uf(p,{pending:!0,data:f,method:a.method,action:l},l,f))}}))}function Wl(n){function i(O){return dh(O,n)}qi!==null&&dh(qi,n),Bi!==null&&dh(Bi,n),Hi!==null&&dh(Hi,n),Yl.forEach(i),Xl.forEach(i);for(var a=0;a<Gi.length;a++){var l=Gi[a];l.blockedOn===n&&(l.blockedOn=null)}for(;0<Gi.length&&(a=Gi[0],a.blockedOn===null);)vT(a),a.blockedOn===null&&Gi.shift();if(a=(n.ownerDocument||n).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var f=a[l],p=a[l+1],E=f[Et]||null;if(typeof p=="function")E||_T(a);else if(E){var N=null;if(p&&p.hasAttribute("formAction")){if(f=p,E=p[Et]||null)N=E.formAction;else if(Um(f)!==null)continue}else N=E.action;typeof N=="function"?a[l+1]=N:(a.splice(l,3),l-=3),_T(a)}}}function zm(n){this._internalRoot=n}mh.prototype.render=zm.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(r(409));var a=i.current,l=Rn();dT(a,l,n,i,null,null)},mh.prototype.unmount=zm.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;dT(n.current,2,null,n,null,null),Yu(),i[Ln]=null}};function mh(n){this._internalRoot=n}mh.prototype.unstable_scheduleHydration=function(n){if(n){var i=Ti();n={blockedOn:null,target:n,priority:i};for(var a=0;a<Gi.length&&i!==0&&i<Gi[a].priority;a++);Gi.splice(a,0,n),a===0&&vT(n)}};var TT=e.version;if(TT!=="19.1.0")throw Error(r(527,TT,"19.1.0"));ae.findDOMNode=function(n){var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(r(188)):(n=Object.keys(n).join(","),Error(r(268,n)));return n=g(i),n=n!==null?v(n):null,n=n===null?null:n.stateNode,n};var Pw={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:X,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ph=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ph.isDisabled&&ph.supportsFiber)try{ft=ph.inject(Pw),Xe=ph}catch{}}return ec.createRoot=function(n,i){if(!o(n))throw Error(r(299));var a=!1,l="",f=ky,p=Py,E=Ly,N=null;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(p=i.onCaughtError),i.onRecoverableError!==void 0&&(E=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(N=i.unstable_transitionCallbacks)),i=uT(n,1,!1,null,null,a,l,f,p,E,N,null),n[Ln]=i.current,Am(n),new zm(i)},ec.hydrateRoot=function(n,i,a){if(!o(n))throw Error(r(299));var l=!1,f="",p=ky,E=Py,N=Ly,O=null,H=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(p=a.onUncaughtError),a.onCaughtError!==void 0&&(E=a.onCaughtError),a.onRecoverableError!==void 0&&(N=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(O=a.unstable_transitionCallbacks),a.formState!==void 0&&(H=a.formState)),i=uT(n,1,!0,i,a??null,l,f,p,E,N,O,H),i.context=hT(null),a=i.current,l=Rn(),l=_i(l),f=Ii(l),f.callback=null,Ci(a,f,l),a=l,i.current.lanes=a,Us(i,a),ws(i),n[Ln]=i.current,Am(n),new mh(i)},ec.version="19.1.0",ec}var RT;function Kw(){if(RT)return Hm.exports;RT=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Hm.exports=$w(),Hm.exports}var Qw=Kw();const Yw=()=>{};var DT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U0=function(s){const e=[];let t=0;for(let r=0;r<s.length;r++){let o=s.charCodeAt(r);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&r+1<s.length&&(s.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(s.charCodeAt(++r)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},Xw=function(s){const e=[];let t=0,r=0;for(;t<s.length;){const o=s[t++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){const c=s[t++];e[r++]=String.fromCharCode((o&31)<<6|c&63)}else if(o>239&&o<365){const c=s[t++],d=s[t++],m=s[t++],g=((o&7)<<18|(c&63)<<12|(d&63)<<6|m&63)-65536;e[r++]=String.fromCharCode(55296+(g>>10)),e[r++]=String.fromCharCode(56320+(g&1023))}else{const c=s[t++],d=s[t++];e[r++]=String.fromCharCode((o&15)<<12|(c&63)<<6|d&63)}}return e.join("")},F0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<s.length;o+=3){const c=s[o],d=o+1<s.length,m=d?s[o+1]:0,g=o+2<s.length,v=g?s[o+2]:0,_=c>>2,A=(c&3)<<4|m>>4;let b=(m&15)<<2|v>>6,D=v&63;g||(D=64,d||(b=64)),r.push(t[_],t[A],t[b],t[D])}return r.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(U0(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):Xw(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<s.length;){const c=t[s.charAt(o++)],m=o<s.length?t[s.charAt(o)]:0;++o;const v=o<s.length?t[s.charAt(o)]:64;++o;const A=o<s.length?t[s.charAt(o)]:64;if(++o,c==null||m==null||v==null||A==null)throw new Zw;const b=c<<2|m>>4;if(r.push(b),v!==64){const D=m<<4&240|v>>2;if(r.push(D),A!==64){const C=v<<6&192|A;r.push(C)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class Zw extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ww=function(s){const e=U0(s);return F0.encodeByteArray(e,!0)},Ph=function(s){return Ww(s).replace(/\./g,"")},z0=function(s){try{return F0.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ex=()=>Jw().__FIREBASE_DEFAULTS__,tx=()=>{if(typeof process>"u"||typeof DT>"u")return;const s=DT.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},nx=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&z0(s[1]);return e&&JSON.parse(e)},ud=()=>{try{return Yw()||ex()||tx()||nx()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},q0=s=>{var e,t;return(t=(e=ud())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[s]},B0=s=>{const e=q0(s);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},H0=()=>{var s;return(s=ud())===null||s===void 0?void 0:s.config},G0=s=>{var e;return(e=ud())===null||e===void 0?void 0:e[`_${s}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sx{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pa(s){return s.endsWith(".cloudworkstations.dev")}async function Kp(s){return(await fetch(s,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $0(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",o=s.iat||0,c=s.sub||s.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}}},s);return[Ph(JSON.stringify(t)),Ph(JSON.stringify(d)),""].join(".")}const rc={};function ix(){const s={prod:[],emulator:[]};for(const e of Object.keys(rc))rc[e]?s.emulator.push(e):s.prod.push(e);return s}function rx(s){let e=document.getElementById(s),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),t=!0),{created:t,element:e}}let jT=!1;function Qp(s,e){if(typeof window>"u"||typeof document>"u"||!pa(window.location.host)||rc[s]===e||rc[s]||jT)return;rc[s]=e;function t(b){return`__firebase__banner__${b}`}const r="__firebase__banner",c=ix().prod.length>0;function d(){const b=document.getElementById(r);b&&b.remove()}function m(b){b.style.display="flex",b.style.background="#7faaf0",b.style.position="fixed",b.style.bottom="5px",b.style.left="5px",b.style.padding=".5em",b.style.borderRadius="5px",b.style.alignItems="center"}function g(b,D){b.setAttribute("width","24"),b.setAttribute("id",D),b.setAttribute("height","24"),b.setAttribute("viewBox","0 0 24 24"),b.setAttribute("fill","none"),b.style.marginLeft="-6px"}function v(){const b=document.createElement("span");return b.style.cursor="pointer",b.style.marginLeft="16px",b.style.fontSize="24px",b.innerHTML=" &times;",b.onclick=()=>{jT=!0,d()},b}function _(b,D){b.setAttribute("id",D),b.innerText="Learn more",b.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",b.setAttribute("target","__blank"),b.style.paddingLeft="5px",b.style.textDecoration="underline"}function A(){const b=rx(r),D=t("text"),C=document.getElementById(D)||document.createElement("span"),F=t("learnmore"),w=document.getElementById(F)||document.createElement("a"),G=t("preprendIcon"),te=document.getElementById(G)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(b.created){const ee=b.element;m(ee),_(w,F);const Y=v();g(te,G),ee.append(te,C,w,Y),document.body.appendChild(ee)}c?(C.innerText="Preview backend disconnected.",te.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(te.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,C.innerText="Preview backend running in this workspace."),C.setAttribute("id",D)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",A):A()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function un(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ax(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(un())}function ox(){var s;const e=(s=ud())===null||s===void 0?void 0:s.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function lx(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function K0(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function cx(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function ux(){const s=un();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function hx(){return!ox()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Yp(){try{return typeof indexedDB=="object"}catch{return!1}}function Xp(){return new Promise((s,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(r),s(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var c;e(((c=o.error)===null||c===void 0?void 0:c.message)||"")}}catch(t){e(t)}})}function Q0(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dx="FirebaseError";class Zn extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=dx,Object.setPrototypeOf(this,Zn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,pr.prototype.create)}}class pr{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},o=`${this.service}/${e}`,c=this.errors[e],d=c?fx(c,r):"Error",m=`${this.serviceName}: ${d} (${o}).`;return new Zn(o,m,r)}}function fx(s,e){return s.replace(mx,(t,r)=>{const o=e[r];return o!=null?String(o):`<${r}?>`})}const mx=/\{\$([^}]+)}/g;function px(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function rr(s,e){if(s===e)return!0;const t=Object.keys(s),r=Object.keys(e);for(const o of t){if(!r.includes(o))return!1;const c=s[o],d=e[o];if(OT(c)&&OT(d)){if(!rr(c,d))return!1}else if(c!==d)return!1}for(const o of r)if(!t.includes(o))return!1;return!0}function OT(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ic(s){const e=[];for(const[t,r]of Object.entries(s))Array.isArray(r)?r.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function gx(s,e){const t=new vx(s,e);return t.subscribe.bind(t)}class vx{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let o;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");yx(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:r},o.next===void 0&&(o.next=Qm),o.error===void 0&&(o.error=Qm),o.complete===void 0&&(o.complete=Qm);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function yx(s,e){if(typeof s!="object"||s===null)return!1;for(const t of e)if(t in s&&typeof s[t]=="function")return!0;return!1}function Qm(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _x=1e3,Tx=2,Ex=4*60*60*1e3,bx=.5;function MT(s,e=_x,t=Tx){const r=e*Math.pow(t,s),o=Math.round(bx*r*(Math.random()-.5)*2);return Math.min(Ex,r+o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ht(s){return s&&s._delegate?s._delegate:s}class kn{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ax{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new sx;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e?.identifier),o=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(c){if(o)return null;throw c}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Sx(e))try{this.getOrInitializeService({instanceIdentifier:sa})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const c=this.getOrInitializeService({instanceIdentifier:o});r.resolve(c)}catch{}}}}clearInstance(e=sa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=sa){return this.instances.has(e)}getOptions(e=sa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[c,d]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(c);r===m&&d.resolve(o)}return o}onInit(e,t){var r;const o=this.normalizeInstanceIdentifier(t),c=(r=this.onInitCallbacks.get(o))!==null&&r!==void 0?r:new Set;c.add(e),this.onInitCallbacks.set(o,c);const d=this.instances.get(o);return d&&e(d,o),()=>{c.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const o of r)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Nx(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=sa){return this.component?this.component.multipleInstances?e:sa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Nx(s){return s===sa?void 0:s}function Sx(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Ax(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ue;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Ue||(Ue={}));const xx={debug:Ue.DEBUG,verbose:Ue.VERBOSE,info:Ue.INFO,warn:Ue.WARN,error:Ue.ERROR,silent:Ue.SILENT},Ix=Ue.INFO,Cx={[Ue.DEBUG]:"log",[Ue.VERBOSE]:"log",[Ue.INFO]:"info",[Ue.WARN]:"warn",[Ue.ERROR]:"error"},Rx=(s,e,...t)=>{if(e<s.logLevel)return;const r=new Date().toISOString(),o=Cx[e];if(o)console[o](`[${r}]  ${s.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Cc{constructor(e){this.name=e,this._logLevel=Ix,this._logHandler=Rx,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?xx[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ue.DEBUG,...e),this._logHandler(this,Ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ue.VERBOSE,...e),this._logHandler(this,Ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ue.INFO,...e),this._logHandler(this,Ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ue.WARN,...e),this._logHandler(this,Ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ue.ERROR,...e),this._logHandler(this,Ue.ERROR,...e)}}const Dx=(s,e)=>e.some(t=>s instanceof t);let VT,kT;function jx(){return VT||(VT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Ox(){return kT||(kT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Y0=new WeakMap,pp=new WeakMap,X0=new WeakMap,Ym=new WeakMap,Zp=new WeakMap;function Mx(s){const e=new Promise((t,r)=>{const o=()=>{s.removeEventListener("success",c),s.removeEventListener("error",d)},c=()=>{t(tr(s.result)),o()},d=()=>{r(s.error),o()};s.addEventListener("success",c),s.addEventListener("error",d)});return e.then(t=>{t instanceof IDBCursor&&Y0.set(t,s)}).catch(()=>{}),Zp.set(e,s),e}function Vx(s){if(pp.has(s))return;const e=new Promise((t,r)=>{const o=()=>{s.removeEventListener("complete",c),s.removeEventListener("error",d),s.removeEventListener("abort",d)},c=()=>{t(),o()},d=()=>{r(s.error||new DOMException("AbortError","AbortError")),o()};s.addEventListener("complete",c),s.addEventListener("error",d),s.addEventListener("abort",d)});pp.set(s,e)}let gp={get(s,e,t){if(s instanceof IDBTransaction){if(e==="done")return pp.get(s);if(e==="objectStoreNames")return s.objectStoreNames||X0.get(s);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return tr(s[e])},set(s,e,t){return s[e]=t,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function kx(s){gp=s(gp)}function Px(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=s.call(Xm(this),e,...t);return X0.set(r,e.sort?e.sort():[e]),tr(r)}:Ox().includes(s)?function(...e){return s.apply(Xm(this),e),tr(Y0.get(this))}:function(...e){return tr(s.apply(Xm(this),e))}}function Lx(s){return typeof s=="function"?Px(s):(s instanceof IDBTransaction&&Vx(s),Dx(s,jx())?new Proxy(s,gp):s)}function tr(s){if(s instanceof IDBRequest)return Mx(s);if(Ym.has(s))return Ym.get(s);const e=Lx(s);return e!==s&&(Ym.set(s,e),Zp.set(e,s)),e}const Xm=s=>Zp.get(s);function Z0(s,e,{blocked:t,upgrade:r,blocking:o,terminated:c}={}){const d=indexedDB.open(s,e),m=tr(d);return r&&d.addEventListener("upgradeneeded",g=>{r(tr(d.result),g.oldVersion,g.newVersion,tr(d.transaction),g)}),t&&d.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),m.then(g=>{c&&g.addEventListener("close",()=>c()),o&&g.addEventListener("versionchange",v=>o(v.oldVersion,v.newVersion,v))}).catch(()=>{}),m}const Ux=["get","getKey","getAll","getAllKeys","count"],Fx=["put","add","delete","clear"],Zm=new Map;function PT(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(Zm.get(e))return Zm.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,o=Fx.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(o||Ux.includes(t)))return;const c=async function(d,...m){const g=this.transaction(d,o?"readwrite":"readonly");let v=g.store;return r&&(v=v.index(m.shift())),(await Promise.all([v[t](...m),o&&g.done]))[0]};return Zm.set(e,c),c}kx(s=>({...s,get:(e,t,r)=>PT(e,t)||s.get(e,t,r),has:(e,t)=>!!PT(e,t)||s.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zx{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(qx(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function qx(s){const e=s.getComponent();return e?.type==="VERSION"}const vp="@firebase/app",LT="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const di=new Cc("@firebase/app"),Bx="@firebase/app-compat",Hx="@firebase/analytics-compat",Gx="@firebase/analytics",$x="@firebase/app-check-compat",Kx="@firebase/app-check",Qx="@firebase/auth",Yx="@firebase/auth-compat",Xx="@firebase/database",Zx="@firebase/data-connect",Wx="@firebase/database-compat",Jx="@firebase/functions",eI="@firebase/functions-compat",tI="@firebase/installations",nI="@firebase/installations-compat",sI="@firebase/messaging",iI="@firebase/messaging-compat",rI="@firebase/performance",aI="@firebase/performance-compat",oI="@firebase/remote-config",lI="@firebase/remote-config-compat",cI="@firebase/storage",uI="@firebase/storage-compat",hI="@firebase/firestore",dI="@firebase/ai",fI="@firebase/firestore-compat",mI="firebase",pI="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yp="[DEFAULT]",gI={[vp]:"fire-core",[Bx]:"fire-core-compat",[Gx]:"fire-analytics",[Hx]:"fire-analytics-compat",[Kx]:"fire-app-check",[$x]:"fire-app-check-compat",[Qx]:"fire-auth",[Yx]:"fire-auth-compat",[Xx]:"fire-rtdb",[Zx]:"fire-data-connect",[Wx]:"fire-rtdb-compat",[Jx]:"fire-fn",[eI]:"fire-fn-compat",[tI]:"fire-iid",[nI]:"fire-iid-compat",[sI]:"fire-fcm",[iI]:"fire-fcm-compat",[rI]:"fire-perf",[aI]:"fire-perf-compat",[oI]:"fire-rc",[lI]:"fire-rc-compat",[cI]:"fire-gcs",[uI]:"fire-gcs-compat",[hI]:"fire-fst",[fI]:"fire-fst-compat",[dI]:"fire-vertex","fire-js":"fire-js",[mI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lh=new Map,vI=new Map,_p=new Map;function UT(s,e){try{s.container.addComponent(e)}catch(t){di.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,t)}}function Xn(s){const e=s.name;if(_p.has(e))return di.debug(`There were multiple attempts to register component ${e}.`),!1;_p.set(e,s);for(const t of Lh.values())UT(t,s);for(const t of vI.values())UT(t,s);return!0}function vi(s,e){const t=s.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),s.container.getProvider(e)}function as(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},nr=new pr("app","Firebase",yI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new kn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw nr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ga=pI;function W0(s,e={}){let t=s;typeof e!="object"&&(e={name:e});const r=Object.assign({name:yp,automaticDataCollectionEnabled:!0},e),o=r.name;if(typeof o!="string"||!o)throw nr.create("bad-app-name",{appName:String(o)});if(t||(t=H0()),!t)throw nr.create("no-options");const c=Lh.get(o);if(c){if(rr(t,c.options)&&rr(r,c.config))return c;throw nr.create("duplicate-app",{appName:o})}const d=new wx(o);for(const g of _p.values())d.addComponent(g);const m=new _I(t,r,d);return Lh.set(o,m),m}function Rc(s=yp){const e=Lh.get(s);if(!e&&s===yp&&H0())return W0();if(!e)throw nr.create("no-app",{appName:s});return e}function cn(s,e,t){var r;let o=(r=gI[s])!==null&&r!==void 0?r:s;t&&(o+=`-${t}`);const c=o.match(/\s|\//),d=e.match(/\s|\//);if(c||d){const m=[`Unable to register library "${o}" with version "${e}":`];c&&m.push(`library name "${o}" contains illegal characters (whitespace or "/")`),c&&d&&m.push("and"),d&&m.push(`version name "${e}" contains illegal characters (whitespace or "/")`),di.warn(m.join(" "));return}Xn(new kn(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TI="firebase-heartbeat-database",EI=1,vc="firebase-heartbeat-store";let Wm=null;function J0(){return Wm||(Wm=Z0(TI,EI,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(vc)}catch(t){console.warn(t)}}}}).catch(s=>{throw nr.create("idb-open",{originalErrorMessage:s.message})})),Wm}async function bI(s){try{const t=(await J0()).transaction(vc),r=await t.objectStore(vc).get(eb(s));return await t.done,r}catch(e){if(e instanceof Zn)di.warn(e.message);else{const t=nr.create("idb-get",{originalErrorMessage:e?.message});di.warn(t.message)}}}async function FT(s,e){try{const r=(await J0()).transaction(vc,"readwrite");await r.objectStore(vc).put(e,eb(s)),await r.done}catch(t){if(t instanceof Zn)di.warn(t.message);else{const r=nr.create("idb-set",{originalErrorMessage:t?.message});di.warn(r.message)}}}function eb(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AI=1024,NI=30;class SI{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new xI(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=zT();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(d=>d.date===c))return;if(this._heartbeatsCache.heartbeats.push({date:c,agent:o}),this._heartbeatsCache.heartbeats.length>NI){const d=II(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(d,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){di.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=zT(),{heartbeatsToSend:r,unsentEntries:o}=wI(this._heartbeatsCache.heartbeats),c=Ph(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(t){return di.warn(t),""}}}function zT(){return new Date().toISOString().substring(0,10)}function wI(s,e=AI){const t=[];let r=s.slice();for(const o of s){const c=t.find(d=>d.agent===o.agent);if(c){if(c.dates.push(o.date),qT(t)>e){c.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),qT(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class xI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Yp()?Xp().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await bI(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return FT(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return FT(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function qT(s){return Ph(JSON.stringify({version:2,heartbeats:s})).length}function II(s){if(s.length===0)return-1;let e=0,t=s[0].date;for(let r=1;r<s.length;r++)s[r].date<t&&(t=s[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CI(s){Xn(new kn("platform-logger",e=>new zx(e),"PRIVATE")),Xn(new kn("heartbeat",e=>new SI(e),"PRIVATE")),cn(vp,LT,s),cn(vp,LT,"esm2017"),cn("fire-js","")}CI("");function Wp(s,e){var t={};for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&e.indexOf(r)<0&&(t[r]=s[r]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(s);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(s,r[o])&&(t[r[o]]=s[r[o]]);return t}function tb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const RI=tb,nb=new pr("auth","Firebase",tb());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uh=new Cc("@firebase/auth");function DI(s,...e){Uh.logLevel<=Ue.WARN&&Uh.warn(`Auth (${ga}): ${s}`,...e)}function Sh(s,...e){Uh.logLevel<=Ue.ERROR&&Uh.error(`Auth (${ga}): ${s}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fi(s,...e){throw Jp(s,...e)}function Is(s,...e){return Jp(s,...e)}function sb(s,e,t){const r=Object.assign(Object.assign({},RI()),{[e]:t});return new pr("auth","Firebase",r).create(e,{appName:s.name})}function oa(s){return sb(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Jp(s,...e){if(typeof s!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=s.name),s._errorFactory.create(t,...r)}return nb.create(s,...e)}function Se(s,e,...t){if(!s)throw Jp(e,...t)}function ci(s){const e="INTERNAL ASSERTION FAILED: "+s;throw Sh(e),new Error(e)}function mi(s,e){s||ci(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tp(){var s;return typeof self<"u"&&((s=self.location)===null||s===void 0?void 0:s.href)||""}function jI(){return BT()==="http:"||BT()==="https:"}function BT(){var s;return typeof self<"u"&&((s=self.location)===null||s===void 0?void 0:s.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OI(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(jI()||K0()||"connection"in navigator)?navigator.onLine:!0}function MI(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dc{constructor(e,t){this.shortDelay=e,this.longDelay=t,mi(t>e,"Short delay should be less than long delay!"),this.isMobile=ax()||cx()}get(){return OI()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eg(s,e){mi(s.emulator,"Emulator should always be set here");const{url:t}=s.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ib{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ci("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ci("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ci("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VI={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kI=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],PI=new Dc(3e4,6e4);function tg(s,e){return s.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:s.tenantId}):e}async function Po(s,e,t,r,o={}){return rb(s,o,async()=>{let c={},d={};r&&(e==="GET"?d=r:c={body:JSON.stringify(r)});const m=Ic(Object.assign({key:s.config.apiKey},d)).slice(1),g=await s._getAdditionalHeaders();g["Content-Type"]="application/json",s.languageCode&&(g["X-Firebase-Locale"]=s.languageCode);const v=Object.assign({method:e,headers:g},c);return lx()||(v.referrerPolicy="no-referrer"),s.emulatorConfig&&pa(s.emulatorConfig.host)&&(v.credentials="include"),ib.fetch()(await ab(s,s.config.apiHost,t,m),v)})}async function rb(s,e,t){s._canInitEmulator=!1;const r=Object.assign(Object.assign({},VI),e);try{const o=new UI(s),c=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const d=await c.json();if("needConfirmation"in d)throw gh(s,"account-exists-with-different-credential",d);if(c.ok&&!("errorMessage"in d))return d;{const m=c.ok?d.errorMessage:d.error.message,[g,v]=m.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw gh(s,"credential-already-in-use",d);if(g==="EMAIL_EXISTS")throw gh(s,"email-already-in-use",d);if(g==="USER_DISABLED")throw gh(s,"user-disabled",d);const _=r[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(v)throw sb(s,_,v);fi(s,_)}}catch(o){if(o instanceof Zn)throw o;fi(s,"network-request-failed",{message:String(o)})}}async function LI(s,e,t,r,o={}){const c=await Po(s,e,t,r,o);return"mfaPendingCredential"in c&&fi(s,"multi-factor-auth-required",{_serverResponse:c}),c}async function ab(s,e,t,r){const o=`${e}${t}?${r}`,c=s,d=c.config.emulator?eg(s.config,o):`${s.config.apiScheme}://${o}`;return kI.includes(t)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(d).toString():d}class UI{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Is(this.auth,"network-request-failed")),PI.get())})}}function gh(s,e,t){const r={appName:s.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const o=Is(s,e,r);return o.customData._tokenResponse=t,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FI(s,e){return Po(s,"POST","/v1/accounts:delete",e)}async function Fh(s,e){return Po(s,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ac(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function zI(s,e=!1){const t=ht(s),r=await t.getIdToken(e),o=ng(r);Se(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const c=typeof o.firebase=="object"?o.firebase:void 0,d=c?.sign_in_provider;return{claims:o,token:r,authTime:ac(Jm(o.auth_time)),issuedAtTime:ac(Jm(o.iat)),expirationTime:ac(Jm(o.exp)),signInProvider:d||null,signInSecondFactor:c?.sign_in_second_factor||null}}function Jm(s){return Number(s)*1e3}function ng(s){const[e,t,r]=s.split(".");if(e===void 0||t===void 0||r===void 0)return Sh("JWT malformed, contained fewer than 3 sections"),null;try{const o=z0(t);return o?JSON.parse(o):(Sh("Failed to decode base64 JWT payload"),null)}catch(o){return Sh("Caught error parsing JWT payload as JSON",o?.toString()),null}}function HT(s){const e=ng(s);return Se(e,"internal-error"),Se(typeof e.exp<"u","internal-error"),Se(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yc(s,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Zn&&qI(r)&&s.auth.currentUser===s&&await s.auth.signOut(),r}}function qI({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ep{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ac(this.lastLoginAt),this.creationTime=ac(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zh(s){var e;const t=s.auth,r=await s.getIdToken(),o=await yc(s,Fh(t,{idToken:r}));Se(o?.users.length,t,"internal-error");const c=o.users[0];s._notifyReloadListener(c);const d=!((e=c.providerUserInfo)===null||e===void 0)&&e.length?ob(c.providerUserInfo):[],m=GI(s.providerData,d),g=s.isAnonymous,v=!(s.email&&c.passwordHash)&&!m?.length,_=g?v:!1,A={uid:c.localId,displayName:c.displayName||null,photoURL:c.photoUrl||null,email:c.email||null,emailVerified:c.emailVerified||!1,phoneNumber:c.phoneNumber||null,tenantId:c.tenantId||null,providerData:m,metadata:new Ep(c.createdAt,c.lastLoginAt),isAnonymous:_};Object.assign(s,A)}async function HI(s){const e=ht(s);await zh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function GI(s,e){return[...s.filter(r=>!e.some(o=>o.providerId===r.providerId)),...e]}function ob(s){return s.map(e=>{var{providerId:t}=e,r=Wp(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $I(s,e){const t=await rb(s,{},async()=>{const r=Ic({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:c}=s.config,d=await ab(s,o,"/v1/token",`key=${c}`),m=await s._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:m,body:r};return s.emulatorConfig&&pa(s.emulatorConfig.host)&&(g.credentials="include"),ib.fetch()(d,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function KI(s,e){return Po(s,"POST","/v2/accounts:revokeToken",tg(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Se(e.idToken,"internal-error"),Se(typeof e.idToken<"u","internal-error"),Se(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):HT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Se(e.length!==0,"internal-error");const t=HT(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Se(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:o,expiresIn:c}=await $I(e,t);this.updateTokensAndExpiration(r,o,Number(c))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:o,expirationTime:c}=t,d=new bo;return r&&(Se(typeof r=="string","internal-error",{appName:e}),d.refreshToken=r),o&&(Se(typeof o=="string","internal-error",{appName:e}),d.accessToken=o),c&&(Se(typeof c=="number","internal-error",{appName:e}),d.expirationTime=c),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new bo,this.toJSON())}_performRefresh(){return ci("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ki(s,e){Se(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class os{constructor(e){var{uid:t,auth:r,stsTokenManager:o}=e,c=Wp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new BI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=c.displayName||null,this.email=c.email||null,this.emailVerified=c.emailVerified||!1,this.phoneNumber=c.phoneNumber||null,this.photoURL=c.photoURL||null,this.isAnonymous=c.isAnonymous||!1,this.tenantId=c.tenantId||null,this.providerData=c.providerData?[...c.providerData]:[],this.metadata=new Ep(c.createdAt||void 0,c.lastLoginAt||void 0)}async getIdToken(e){const t=await yc(this,this.stsTokenManager.getToken(this.auth,e));return Se(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return zI(this,e)}reload(){return HI(this)}_assign(e){this!==e&&(Se(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new os(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await zh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(as(this.auth.app))return Promise.reject(oa(this.auth));const e=await this.getIdToken();return await yc(this,FI(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,o,c,d,m,g,v,_;const A=(r=t.displayName)!==null&&r!==void 0?r:void 0,b=(o=t.email)!==null&&o!==void 0?o:void 0,D=(c=t.phoneNumber)!==null&&c!==void 0?c:void 0,C=(d=t.photoURL)!==null&&d!==void 0?d:void 0,F=(m=t.tenantId)!==null&&m!==void 0?m:void 0,w=(g=t._redirectEventId)!==null&&g!==void 0?g:void 0,G=(v=t.createdAt)!==null&&v!==void 0?v:void 0,te=(_=t.lastLoginAt)!==null&&_!==void 0?_:void 0,{uid:ee,emailVerified:Y,isAnonymous:U,providerData:he,stsTokenManager:k}=t;Se(ee&&k,e,"internal-error");const x=bo.fromJSON(this.name,k);Se(typeof ee=="string",e,"internal-error"),Ki(A,e.name),Ki(b,e.name),Se(typeof Y=="boolean",e,"internal-error"),Se(typeof U=="boolean",e,"internal-error"),Ki(D,e.name),Ki(C,e.name),Ki(F,e.name),Ki(w,e.name),Ki(G,e.name),Ki(te,e.name);const I=new os({uid:ee,auth:e,email:b,emailVerified:Y,displayName:A,isAnonymous:U,photoURL:C,phoneNumber:D,tenantId:F,stsTokenManager:x,createdAt:G,lastLoginAt:te});return he&&Array.isArray(he)&&(I.providerData=he.map(M=>Object.assign({},M))),w&&(I._redirectEventId=w),I}static async _fromIdTokenResponse(e,t,r=!1){const o=new bo;o.updateFromServerResponse(t);const c=new os({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:r});return await zh(c),c}static async _fromGetAccountInfoResponse(e,t,r){const o=t.users[0];Se(o.localId!==void 0,"internal-error");const c=o.providerUserInfo!==void 0?ob(o.providerUserInfo):[],d=!(o.email&&o.passwordHash)&&!c?.length,m=new bo;m.updateFromIdToken(r);const g=new os({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:d}),v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new Ep(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!c?.length};return Object.assign(g,v),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GT=new Map;function ui(s){mi(s instanceof Function,"Expected a class definition");let e=GT.get(s);return e?(mi(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,GT.set(s,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}lb.type="NONE";const $T=lb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wh(s,e,t){return`firebase:${s}:${e}:${t}`}class Ao{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:o,name:c}=this.auth;this.fullUserKey=wh(this.userKey,o.apiKey,c),this.fullPersistenceKey=wh("persistence",o.apiKey,c),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Fh(this.auth,{idToken:e}).catch(()=>{});return t?os._fromGetAccountInfoResponse(this.auth,t,e):null}return os._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Ao(ui($T),e,r);const o=(await Promise.all(t.map(async v=>{if(await v._isAvailable())return v}))).filter(v=>v);let c=o[0]||ui($T);const d=wh(r,e.config.apiKey,e.name);let m=null;for(const v of t)try{const _=await v._get(d);if(_){let A;if(typeof _=="string"){const b=await Fh(e,{idToken:_}).catch(()=>{});if(!b)break;A=await os._fromGetAccountInfoResponse(e,b,_)}else A=os._fromJSON(e,_);v!==c&&(m=A),c=v;break}}catch{}const g=o.filter(v=>v._shouldAllowMigration);return!c._shouldAllowMigration||!g.length?new Ao(c,e,r):(c=g[0],m&&await c._set(d,m.toJSON()),await Promise.all(t.map(async v=>{if(v!==c)try{await v._remove(d)}catch{}})),new Ao(c,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KT(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(db(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(cb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(mb(e))return"Blackberry";if(pb(e))return"Webos";if(ub(e))return"Safari";if((e.includes("chrome/")||hb(e))&&!e.includes("edge/"))return"Chrome";if(fb(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=s.match(t);if(r?.length===2)return r[1]}return"Other"}function cb(s=un()){return/firefox\//i.test(s)}function ub(s=un()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function hb(s=un()){return/crios\//i.test(s)}function db(s=un()){return/iemobile/i.test(s)}function fb(s=un()){return/android/i.test(s)}function mb(s=un()){return/blackberry/i.test(s)}function pb(s=un()){return/webos/i.test(s)}function sg(s=un()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function QI(s=un()){var e;return sg(s)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function YI(){return ux()&&document.documentMode===10}function gb(s=un()){return sg(s)||fb(s)||pb(s)||mb(s)||/windows phone/i.test(s)||db(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vb(s,e=[]){let t;switch(s){case"Browser":t=KT(un());break;case"Worker":t=`${KT(un())}-${s}`;break;default:t=s}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ga}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=c=>new Promise((d,m)=>{try{const g=e(c);d(g)}catch(g){m(g)}});r.onAbort=t,this.queue.push(r);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZI(s,e={}){return Po(s,"GET","/v2/passwordPolicy",tg(s,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WI=6;class JI{constructor(e){var t,r,o,c;const d=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=d.minPasswordLength)!==null&&t!==void 0?t:WI,d.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=d.maxPasswordLength),d.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=d.containsLowercaseCharacter),d.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=d.containsUppercaseCharacter),d.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=d.containsNumericCharacter),d.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=d.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(c=e.forceUpgradeOnSignin)!==null&&c!==void 0?c:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,o,c,d,m;const g={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,g),this.validatePasswordCharacterOptions(e,g),g.isValid&&(g.isValid=(t=g.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),g.isValid&&(g.isValid=(r=g.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),g.isValid&&(g.isValid=(o=g.containsLowercaseLetter)!==null&&o!==void 0?o:!0),g.isValid&&(g.isValid=(c=g.containsUppercaseLetter)!==null&&c!==void 0?c:!0),g.isValid&&(g.isValid=(d=g.containsNumericCharacter)!==null&&d!==void 0?d:!0),g.isValid&&(g.isValid=(m=g.containsNonAlphanumericCharacter)!==null&&m!==void 0?m:!0),g}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let o=0;o<e.length;o++)r=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,o,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{constructor(e,t,r,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new QT(this),this.idTokenSubscription=new QT(this),this.beforeStateQueue=new XI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=nb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ui(t)),this._initializationPromise=this.queue(async()=>{var r,o,c;if(!this._deleted&&(this.persistenceManager=await Ao.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((c=this.currentUser)===null||c===void 0?void 0:c.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Fh(this,{idToken:e}),r=await os._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(as(this.app)){const d=this.app.settings.authIdToken;return d?new Promise(m=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(d).then(m,m))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let o=r,c=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const d=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,m=o?._redirectEventId,g=await this.tryRedirectSignIn(e);(!d||d===m)&&g?.user&&(o=g.user,c=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(c)try{await this.beforeStateQueue.runMiddleware(o)}catch(d){o=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(d))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Se(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await zh(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=MI()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(as(this.app))return Promise.reject(oa(this));const t=e?ht(e):null;return t&&Se(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Se(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return as(this.app)?Promise.reject(oa(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return as(this.app)?Promise.reject(oa(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ui(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await ZI(this),t=new JI(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new pr("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await KI(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ui(e)||this._popupRedirectResolver;Se(t,this,"argument-error"),this.redirectPersistenceManager=await Ao.create(this,[ui(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,o){if(this._deleted)return()=>{};const c=typeof t=="function"?t:t.next.bind(t);let d=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Se(m,this,"internal-error"),m.then(()=>{d||c(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,r,o);return()=>{d=!0,g()}}else{const g=e.addObserver(t);return()=>{d=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=vb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;if(as(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&DI(`Error while retrieving App Check token: ${t.error}`),t?.token}}function ig(s){return ht(s)}class QT{constructor(e){this.auth=e,this.observer=null,this.addObserver=gx(t=>this.observer=t)}get next(){return Se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function tC(s){rg=s}function nC(s){return rg.loadJS(s)}function sC(){return rg.gapiScript}function iC(s){return`__${s}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rC(s,e){const t=vi(s,"auth");if(t.isInitialized()){const o=t.getImmediate(),c=t.getOptions();if(rr(c,e??{}))return o;fi(o,"already-initialized")}return t.initialize({options:e})}function aC(s,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(ui);e?.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(r,e?.popupRedirectResolver)}function oC(s,e,t){const r=ig(s);Se(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const o=!1,c=yb(e),{host:d,port:m}=lC(e),g=m===null?"":`:${m}`,v={url:`${c}//${d}${g}/`},_=Object.freeze({host:d,port:m,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!r._canInitEmulator){Se(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Se(rr(v,r.config.emulator)&&rr(_,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=v,r.emulatorConfig=_,r.settings.appVerificationDisabledForTesting=!0,pa(d)?(Kp(`${c}//${d}${g}`),Qp("Auth",!0)):cC()}function yb(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function lC(s){const e=yb(s),t=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(r);if(o){const c=o[1];return{host:c,port:YT(r.substr(c.length+1))}}else{const[c,d]=r.split(":");return{host:c,port:YT(d)}}}function YT(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function cC(){function s(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _b{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ci("not implemented")}_getIdTokenResponse(e){return ci("not implemented")}_linkToIdToken(e,t){return ci("not implemented")}_getReauthenticationResolver(e){return ci("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function No(s,e){return LI(s,"POST","/v1/accounts:signInWithIdp",tg(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uC="http://localhost";class ca extends _b{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ca(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):fi("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:o}=t,c=Wp(t,["providerId","signInMethod"]);if(!r||!o)return null;const d=new ca(r,o);return d.idToken=c.idToken||void 0,d.accessToken=c.accessToken||void 0,d.secret=c.secret,d.nonce=c.nonce,d.pendingToken=c.pendingToken||null,d}_getIdTokenResponse(e){const t=this.buildRequest();return No(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,No(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,No(e,t)}buildRequest(){const e={requestUri:uC,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ic(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tb{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc extends Tb{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi extends jc{constructor(){super("facebook.com")}static credential(e){return ca._fromParams({providerId:Yi.PROVIDER_ID,signInMethod:Yi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Yi.credentialFromTaggedObject(e)}static credentialFromError(e){return Yi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Yi.credential(e.oauthAccessToken)}catch{return null}}}Yi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Yi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi extends jc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ca._fromParams({providerId:Xi.PROVIDER_ID,signInMethod:Xi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Xi.credentialFromTaggedObject(e)}static credentialFromError(e){return Xi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Xi.credential(t,r)}catch{return null}}}Xi.GOOGLE_SIGN_IN_METHOD="google.com";Xi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi extends jc{constructor(){super("github.com")}static credential(e){return ca._fromParams({providerId:Zi.PROVIDER_ID,signInMethod:Zi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Zi.credentialFromTaggedObject(e)}static credentialFromError(e){return Zi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Zi.credential(e.oauthAccessToken)}catch{return null}}}Zi.GITHUB_SIGN_IN_METHOD="github.com";Zi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi extends jc{constructor(){super("twitter.com")}static credential(e,t){return ca._fromParams({providerId:Wi.PROVIDER_ID,signInMethod:Wi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Wi.credentialFromTaggedObject(e)}static credentialFromError(e){return Wi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Wi.credential(t,r)}catch{return null}}}Wi.TWITTER_SIGN_IN_METHOD="twitter.com";Wi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,o=!1){const c=await os._fromIdTokenResponse(e,r,o),d=XT(r);return new Co({user:c,providerId:d,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const o=XT(r);return new Co({user:e,providerId:o,_tokenResponse:r,operationType:t})}}function XT(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qh extends Zn{constructor(e,t,r,o){var c;super(t.code,t.message),this.operationType=r,this.user=o,Object.setPrototypeOf(this,qh.prototype),this.customData={appName:e.name,tenantId:(c=e.tenantId)!==null&&c!==void 0?c:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,o){return new qh(e,t,r,o)}}function Eb(s,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(s):t._getIdTokenResponse(s)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?qh._fromErrorAndOperation(s,c,e,r):c})}async function hC(s,e,t=!1){const r=await yc(s,e._linkToIdToken(s.auth,await s.getIdToken()),t);return Co._forOperation(s,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dC(s,e,t=!1){const{auth:r}=s;if(as(r.app))return Promise.reject(oa(r));const o="reauthenticate";try{const c=await yc(s,Eb(r,o,e,s),t);Se(c.idToken,r,"internal-error");const d=ng(c.idToken);Se(d,r,"internal-error");const{sub:m}=d;return Se(s.uid===m,r,"user-mismatch"),Co._forOperation(s,o,c)}catch(c){throw c?.code==="auth/user-not-found"&&fi(r,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fC(s,e,t=!1){if(as(s.app))return Promise.reject(oa(s));const r="signIn",o=await Eb(s,r,e),c=await Co._fromIdTokenResponse(s,r,o);return t||await s._updateCurrentUser(c.user),c}function mC(s,e,t,r){return ht(s).onIdTokenChanged(e,t,r)}function pC(s,e,t){return ht(s).beforeAuthStateChanged(e,t)}function gC(s,e,t,r){return ht(s).onAuthStateChanged(e,t,r)}const Bh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bb{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Bh,"1"),this.storage.removeItem(Bh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vC=1e3,yC=10;class Ab extends bb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=gb(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),o=this.localCache[t];r!==o&&e(t,o,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((d,m,g)=>{this.notifyListeners(d,g)});return}const r=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const d=this.storage.getItem(r);!t&&this.localCache[r]===d||this.notifyListeners(r,d)},c=this.storage.getItem(r);YI()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,yC):o()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},vC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Ab.type="LOCAL";const _C=Ab;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nb extends bb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Nb.type="SESSION";const Sb=Nb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TC(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const r=new hd(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:o,data:c}=t.data,d=this.handlersMap[o];if(!d?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:o});const m=Array.from(d).map(async v=>v(t.origin,c)),g=await TC(m);t.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}hd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ag(s="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return s+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let c,d;return new Promise((m,g)=>{const v=ag("",20);o.port1.start();const _=setTimeout(()=>{g(new Error("unsupported_event"))},r);d={messageChannel:o,onMessage(A){const b=A;if(b.data.eventId===v)switch(b.data.status){case"ack":clearTimeout(_),c=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),m(b.data.response);break;default:clearTimeout(_),clearTimeout(c),g(new Error("invalid_response"));break}}},this.handlers.add(d),o.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:v,data:t},[o.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cs(){return window}function bC(s){Cs().location.href=s}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wb(){return typeof Cs().WorkerGlobalScope<"u"&&typeof Cs().importScripts=="function"}async function AC(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function NC(){var s;return((s=navigator?.serviceWorker)===null||s===void 0?void 0:s.controller)||null}function SC(){return wb()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xb="firebaseLocalStorageDb",wC=1,Hh="firebaseLocalStorage",Ib="fbase_key";class Oc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function dd(s,e){return s.transaction([Hh],e?"readwrite":"readonly").objectStore(Hh)}function xC(){const s=indexedDB.deleteDatabase(xb);return new Oc(s).toPromise()}function bp(){const s=indexedDB.open(xb,wC);return new Promise((e,t)=>{s.addEventListener("error",()=>{t(s.error)}),s.addEventListener("upgradeneeded",()=>{const r=s.result;try{r.createObjectStore(Hh,{keyPath:Ib})}catch(o){t(o)}}),s.addEventListener("success",async()=>{const r=s.result;r.objectStoreNames.contains(Hh)?e(r):(r.close(),await xC(),e(await bp()))})})}async function ZT(s,e,t){const r=dd(s,!0).put({[Ib]:e,value:t});return new Oc(r).toPromise()}async function IC(s,e){const t=dd(s,!1).get(e),r=await new Oc(t).toPromise();return r===void 0?null:r.value}function WT(s,e){const t=dd(s,!0).delete(e);return new Oc(t).toPromise()}const CC=800,RC=3;class Cb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await bp(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>RC)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return wb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=hd._getInstance(SC()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await AC(),!this.activeServiceWorker)return;this.sender=new EC(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||NC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await bp();return await ZT(e,Bh,"1"),await WT(e,Bh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>ZT(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>IC(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>WT(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const c=dd(o,!1).getAll();return new Oc(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:o,value:c}of e)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(c)&&(this.notifyListeners(o,c),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),CC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Cb.type="LOCAL";const DC=Cb;new Dc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jC(s,e){return e?ui(e):(Se(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og extends _b{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return No(e,this._buildIdpRequest())}_linkToIdToken(e,t){return No(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return No(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function OC(s){return fC(s.auth,new og(s),s.bypassAuthState)}function MC(s){const{auth:e,user:t}=s;return Se(t,e,"internal-error"),dC(t,new og(s),s.bypassAuthState)}async function VC(s){const{auth:e,user:t}=s;return Se(t,e,"internal-error"),hC(t,new og(s),s.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rb{constructor(e,t,r,o,c=!1){this.auth=e,this.resolver=r,this.user=o,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:o,tenantId:c,error:d,type:m}=e;if(d){this.reject(d);return}const g={auth:this.auth,requestUri:t,sessionId:r,tenantId:c||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(g))}catch(v){this.reject(v)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return OC;case"linkViaPopup":case"linkViaRedirect":return VC;case"reauthViaPopup":case"reauthViaRedirect":return MC;default:fi(this.auth,"internal-error")}}resolve(e){mi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){mi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kC=new Dc(2e3,1e4);class _o extends Rb{constructor(e,t,r,o,c){super(e,t,o,c),this.provider=r,this.authWindow=null,this.pollId=null,_o.currentPopupAction&&_o.currentPopupAction.cancel(),_o.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Se(e,this.auth,"internal-error"),e}async onExecution(){mi(this.filter.length===1,"Popup operations only handle one event");const e=ag();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Is(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Is(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_o.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Is(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,kC.get())};e()}}_o.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PC="pendingRedirect",xh=new Map;class LC extends Rb{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=xh.get(this.auth._key());if(!e){try{const r=await UC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}xh.set(this.auth._key(),e)}return this.bypassAuthState||xh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function UC(s,e){const t=qC(e),r=zC(s);if(!await r._isAvailable())return!1;const o=await r._get(t)==="true";return await r._remove(t),o}function FC(s,e){xh.set(s._key(),e)}function zC(s){return ui(s._redirectPersistence)}function qC(s){return wh(PC,s.config.apiKey,s.name)}async function BC(s,e,t=!1){if(as(s.app))return Promise.reject(oa(s));const r=ig(s),o=jC(r,e),d=await new LC(r,o,t).execute();return d&&!t&&(delete d.user._redirectEventId,await r._persistUserIfCurrent(d.user),await r._setRedirectUser(null,e)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HC=10*60*1e3;class GC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!$C(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!Db(e)){const o=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Is(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=HC&&this.cachedEventUids.clear(),this.cachedEventUids.has(JT(e))}saveEventToCache(e){this.cachedEventUids.add(JT(e)),this.lastProcessedEventTime=Date.now()}}function JT(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function Db({type:s,error:e}){return s==="unknown"&&e?.code==="auth/no-auth-event"}function $C(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Db(s);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KC(s,e={}){return Po(s,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,YC=/^https?/;async function XC(s){if(s.config.emulator)return;const{authorizedDomains:e}=await KC(s);for(const t of e)try{if(ZC(t))return}catch{}fi(s,"unauthorized-domain")}function ZC(s){const e=Tp(),{protocol:t,hostname:r}=new URL(e);if(s.startsWith("chrome-extension://")){const d=new URL(s);return d.hostname===""&&r===""?t==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&d.hostname===r}if(!YC.test(t))return!1;if(QC.test(s))return r===s;const o=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WC=new Dc(3e4,6e4);function eE(){const s=Cs().___jsl;if(s?.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let t=0;t<s.CP.length;t++)s.CP[t]=null}}function JC(s){return new Promise((e,t)=>{var r,o,c;function d(){eE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{eE(),t(Is(s,"network-request-failed"))},timeout:WC.get()})}if(!((o=(r=Cs().gapi)===null||r===void 0?void 0:r.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((c=Cs().gapi)===null||c===void 0)&&c.load)d();else{const m=iC("iframefcb");return Cs()[m]=()=>{gapi.load?d():t(Is(s,"network-request-failed"))},nC(`${sC()}?onload=${m}`).catch(g=>t(g))}}).catch(e=>{throw Ih=null,e})}let Ih=null;function eR(s){return Ih=Ih||JC(s),Ih}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tR=new Dc(5e3,15e3),nR="__/auth/iframe",sR="emulator/auth/iframe",iR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},rR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function aR(s){const e=s.config;Se(e.authDomain,s,"auth-domain-config-required");const t=e.emulator?eg(e,sR):`https://${s.config.authDomain}/${nR}`,r={apiKey:e.apiKey,appName:s.name,v:ga},o=rR.get(s.config.apiHost);o&&(r.eid=o);const c=s._getFrameworks();return c.length&&(r.fw=c.join(",")),`${t}?${Ic(r).slice(1)}`}async function oR(s){const e=await eR(s),t=Cs().gapi;return Se(t,s,"internal-error"),e.open({where:document.body,url:aR(s),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:iR,dontclear:!0},r=>new Promise(async(o,c)=>{await r.restyle({setHideOnLeave:!1});const d=Is(s,"network-request-failed"),m=Cs().setTimeout(()=>{c(d)},tR.get());function g(){Cs().clearTimeout(m),o(r)}r.ping(g).then(g,()=>{c(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},cR=500,uR=600,hR="_blank",dR="http://localhost";class tE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function fR(s,e,t,r=cR,o=uR){const c=Math.max((window.screen.availHeight-o)/2,0).toString(),d=Math.max((window.screen.availWidth-r)/2,0).toString();let m="";const g=Object.assign(Object.assign({},lR),{width:r.toString(),height:o.toString(),top:c,left:d}),v=un().toLowerCase();t&&(m=hb(v)?hR:t),cb(v)&&(e=e||dR,g.scrollbars="yes");const _=Object.entries(g).reduce((b,[D,C])=>`${b}${D}=${C},`,"");if(QI(v)&&m!=="_self")return mR(e||"",m),new tE(null);const A=window.open(e||"",m,_);Se(A,s,"popup-blocked");try{A.focus()}catch{}return new tE(A)}function mR(s,e){const t=document.createElement("a");t.href=s,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pR="__/auth/handler",gR="emulator/auth/handler",vR=encodeURIComponent("fac");async function nE(s,e,t,r,o,c){Se(s.config.authDomain,s,"auth-domain-config-required"),Se(s.config.apiKey,s,"invalid-api-key");const d={apiKey:s.config.apiKey,appName:s.name,authType:t,redirectUrl:r,v:ga,eventId:o};if(e instanceof Tb){e.setDefaultLanguage(s.languageCode),d.providerId=e.providerId||"",px(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,A]of Object.entries({}))d[_]=A}if(e instanceof jc){const _=e.getScopes().filter(A=>A!=="");_.length>0&&(d.scopes=_.join(","))}s.tenantId&&(d.tid=s.tenantId);const m=d;for(const _ of Object.keys(m))m[_]===void 0&&delete m[_];const g=await s._getAppCheckToken(),v=g?`#${vR}=${encodeURIComponent(g)}`:"";return`${yR(s)}?${Ic(m).slice(1)}${v}`}function yR({config:s}){return s.emulator?eg(s,gR):`https://${s.authDomain}/${pR}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ep="webStorageSupport";class _R{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Sb,this._completeRedirectFn=BC,this._overrideRedirectResult=FC}async _openPopup(e,t,r,o){var c;mi((c=this.eventManagers[e._key()])===null||c===void 0?void 0:c.manager,"_initialize() not called before _openPopup()");const d=await nE(e,t,r,Tp(),o);return fR(e,d,ag())}async _openRedirect(e,t,r,o){await this._originValidation(e);const c=await nE(e,t,r,Tp(),o);return bC(c),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:c}=this.eventManagers[t];return o?Promise.resolve(o):(mi(c,"If manager is not set, promise should be"),c)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await oR(e),r=new GC(e);return t.register("authEvent",o=>(Se(o?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(ep,{type:ep},o=>{var c;const d=(c=o?.[0])===null||c===void 0?void 0:c[ep];d!==void 0&&t(!!d),fi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=XC(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return gb()||ub()||sg()}}const TR=_R;var sE="@firebase/auth",iE="1.10.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ER{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bR(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function AR(s){Xn(new kn("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:d,authDomain:m}=r.options;Se(d&&!d.includes(":"),"invalid-api-key",{appName:r.name});const g={apiKey:d,authDomain:m,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:vb(s)},v=new eC(r,o,c,g);return aC(v,t),v},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Xn(new kn("auth-internal",e=>{const t=ig(e.getProvider("auth").getImmediate());return(r=>new ER(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),cn(sE,iE,bR(s)),cn(sE,iE,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NR=5*60,SR=G0("authIdTokenMaxAge")||NR;let rE=null;const wR=s=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>SR)return;const o=t?.token;rE!==o&&(rE=o,await fetch(s,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function xR(s=Rc()){const e=vi(s,"auth");if(e.isInitialized())return e.getImmediate();const t=rC(s,{popupRedirectResolver:TR,persistence:[DC,_C,Sb]}),r=G0("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(r,location.origin);if(location.origin===c.origin){const d=wR(c.toString());pC(t,d,()=>d(t.currentUser)),mC(t,m=>d(m))}}const o=q0("auth");return o&&oC(t,`http://${o}`),t}function IR(){var s,e;return(e=(s=document.getElementsByTagName("head"))===null||s===void 0?void 0:s[0])!==null&&e!==void 0?e:document}tC({loadJS(s){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",s),r.onload=e,r.onerror=o=>{const c=Is("internal-error");c.customData=o,t(c)},r.type="text/javascript",r.charset="UTF-8",IR().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});AR("Browser");var CR="firebase",RR="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */cn(CR,RR,"app");var aE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var sr,jb;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,x){function I(){}I.prototype=x.prototype,k.D=x.prototype,k.prototype=new I,k.prototype.constructor=k,k.C=function(M,V,j){for(var R=Array(arguments.length-2),we=2;we<arguments.length;we++)R[we-2]=arguments[we];return x.prototype[V].apply(M,R)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(k,x,I){I||(I=0);var M=Array(16);if(typeof x=="string")for(var V=0;16>V;++V)M[V]=x.charCodeAt(I++)|x.charCodeAt(I++)<<8|x.charCodeAt(I++)<<16|x.charCodeAt(I++)<<24;else for(V=0;16>V;++V)M[V]=x[I++]|x[I++]<<8|x[I++]<<16|x[I++]<<24;x=k.g[0],I=k.g[1],V=k.g[2];var j=k.g[3],R=x+(j^I&(V^j))+M[0]+3614090360&4294967295;x=I+(R<<7&4294967295|R>>>25),R=j+(V^x&(I^V))+M[1]+3905402710&4294967295,j=x+(R<<12&4294967295|R>>>20),R=V+(I^j&(x^I))+M[2]+606105819&4294967295,V=j+(R<<17&4294967295|R>>>15),R=I+(x^V&(j^x))+M[3]+3250441966&4294967295,I=V+(R<<22&4294967295|R>>>10),R=x+(j^I&(V^j))+M[4]+4118548399&4294967295,x=I+(R<<7&4294967295|R>>>25),R=j+(V^x&(I^V))+M[5]+1200080426&4294967295,j=x+(R<<12&4294967295|R>>>20),R=V+(I^j&(x^I))+M[6]+2821735955&4294967295,V=j+(R<<17&4294967295|R>>>15),R=I+(x^V&(j^x))+M[7]+4249261313&4294967295,I=V+(R<<22&4294967295|R>>>10),R=x+(j^I&(V^j))+M[8]+1770035416&4294967295,x=I+(R<<7&4294967295|R>>>25),R=j+(V^x&(I^V))+M[9]+2336552879&4294967295,j=x+(R<<12&4294967295|R>>>20),R=V+(I^j&(x^I))+M[10]+4294925233&4294967295,V=j+(R<<17&4294967295|R>>>15),R=I+(x^V&(j^x))+M[11]+2304563134&4294967295,I=V+(R<<22&4294967295|R>>>10),R=x+(j^I&(V^j))+M[12]+1804603682&4294967295,x=I+(R<<7&4294967295|R>>>25),R=j+(V^x&(I^V))+M[13]+4254626195&4294967295,j=x+(R<<12&4294967295|R>>>20),R=V+(I^j&(x^I))+M[14]+2792965006&4294967295,V=j+(R<<17&4294967295|R>>>15),R=I+(x^V&(j^x))+M[15]+1236535329&4294967295,I=V+(R<<22&4294967295|R>>>10),R=x+(V^j&(I^V))+M[1]+4129170786&4294967295,x=I+(R<<5&4294967295|R>>>27),R=j+(I^V&(x^I))+M[6]+3225465664&4294967295,j=x+(R<<9&4294967295|R>>>23),R=V+(x^I&(j^x))+M[11]+643717713&4294967295,V=j+(R<<14&4294967295|R>>>18),R=I+(j^x&(V^j))+M[0]+3921069994&4294967295,I=V+(R<<20&4294967295|R>>>12),R=x+(V^j&(I^V))+M[5]+3593408605&4294967295,x=I+(R<<5&4294967295|R>>>27),R=j+(I^V&(x^I))+M[10]+38016083&4294967295,j=x+(R<<9&4294967295|R>>>23),R=V+(x^I&(j^x))+M[15]+3634488961&4294967295,V=j+(R<<14&4294967295|R>>>18),R=I+(j^x&(V^j))+M[4]+3889429448&4294967295,I=V+(R<<20&4294967295|R>>>12),R=x+(V^j&(I^V))+M[9]+568446438&4294967295,x=I+(R<<5&4294967295|R>>>27),R=j+(I^V&(x^I))+M[14]+3275163606&4294967295,j=x+(R<<9&4294967295|R>>>23),R=V+(x^I&(j^x))+M[3]+4107603335&4294967295,V=j+(R<<14&4294967295|R>>>18),R=I+(j^x&(V^j))+M[8]+1163531501&4294967295,I=V+(R<<20&4294967295|R>>>12),R=x+(V^j&(I^V))+M[13]+2850285829&4294967295,x=I+(R<<5&4294967295|R>>>27),R=j+(I^V&(x^I))+M[2]+4243563512&4294967295,j=x+(R<<9&4294967295|R>>>23),R=V+(x^I&(j^x))+M[7]+1735328473&4294967295,V=j+(R<<14&4294967295|R>>>18),R=I+(j^x&(V^j))+M[12]+2368359562&4294967295,I=V+(R<<20&4294967295|R>>>12),R=x+(I^V^j)+M[5]+4294588738&4294967295,x=I+(R<<4&4294967295|R>>>28),R=j+(x^I^V)+M[8]+2272392833&4294967295,j=x+(R<<11&4294967295|R>>>21),R=V+(j^x^I)+M[11]+1839030562&4294967295,V=j+(R<<16&4294967295|R>>>16),R=I+(V^j^x)+M[14]+4259657740&4294967295,I=V+(R<<23&4294967295|R>>>9),R=x+(I^V^j)+M[1]+2763975236&4294967295,x=I+(R<<4&4294967295|R>>>28),R=j+(x^I^V)+M[4]+1272893353&4294967295,j=x+(R<<11&4294967295|R>>>21),R=V+(j^x^I)+M[7]+4139469664&4294967295,V=j+(R<<16&4294967295|R>>>16),R=I+(V^j^x)+M[10]+3200236656&4294967295,I=V+(R<<23&4294967295|R>>>9),R=x+(I^V^j)+M[13]+681279174&4294967295,x=I+(R<<4&4294967295|R>>>28),R=j+(x^I^V)+M[0]+3936430074&4294967295,j=x+(R<<11&4294967295|R>>>21),R=V+(j^x^I)+M[3]+3572445317&4294967295,V=j+(R<<16&4294967295|R>>>16),R=I+(V^j^x)+M[6]+76029189&4294967295,I=V+(R<<23&4294967295|R>>>9),R=x+(I^V^j)+M[9]+3654602809&4294967295,x=I+(R<<4&4294967295|R>>>28),R=j+(x^I^V)+M[12]+3873151461&4294967295,j=x+(R<<11&4294967295|R>>>21),R=V+(j^x^I)+M[15]+530742520&4294967295,V=j+(R<<16&4294967295|R>>>16),R=I+(V^j^x)+M[2]+3299628645&4294967295,I=V+(R<<23&4294967295|R>>>9),R=x+(V^(I|~j))+M[0]+4096336452&4294967295,x=I+(R<<6&4294967295|R>>>26),R=j+(I^(x|~V))+M[7]+1126891415&4294967295,j=x+(R<<10&4294967295|R>>>22),R=V+(x^(j|~I))+M[14]+2878612391&4294967295,V=j+(R<<15&4294967295|R>>>17),R=I+(j^(V|~x))+M[5]+4237533241&4294967295,I=V+(R<<21&4294967295|R>>>11),R=x+(V^(I|~j))+M[12]+1700485571&4294967295,x=I+(R<<6&4294967295|R>>>26),R=j+(I^(x|~V))+M[3]+2399980690&4294967295,j=x+(R<<10&4294967295|R>>>22),R=V+(x^(j|~I))+M[10]+4293915773&4294967295,V=j+(R<<15&4294967295|R>>>17),R=I+(j^(V|~x))+M[1]+2240044497&4294967295,I=V+(R<<21&4294967295|R>>>11),R=x+(V^(I|~j))+M[8]+1873313359&4294967295,x=I+(R<<6&4294967295|R>>>26),R=j+(I^(x|~V))+M[15]+4264355552&4294967295,j=x+(R<<10&4294967295|R>>>22),R=V+(x^(j|~I))+M[6]+2734768916&4294967295,V=j+(R<<15&4294967295|R>>>17),R=I+(j^(V|~x))+M[13]+1309151649&4294967295,I=V+(R<<21&4294967295|R>>>11),R=x+(V^(I|~j))+M[4]+4149444226&4294967295,x=I+(R<<6&4294967295|R>>>26),R=j+(I^(x|~V))+M[11]+3174756917&4294967295,j=x+(R<<10&4294967295|R>>>22),R=V+(x^(j|~I))+M[2]+718787259&4294967295,V=j+(R<<15&4294967295|R>>>17),R=I+(j^(V|~x))+M[9]+3951481745&4294967295,k.g[0]=k.g[0]+x&4294967295,k.g[1]=k.g[1]+(V+(R<<21&4294967295|R>>>11))&4294967295,k.g[2]=k.g[2]+V&4294967295,k.g[3]=k.g[3]+j&4294967295}r.prototype.u=function(k,x){x===void 0&&(x=k.length);for(var I=x-this.blockSize,M=this.B,V=this.h,j=0;j<x;){if(V==0)for(;j<=I;)o(this,k,j),j+=this.blockSize;if(typeof k=="string"){for(;j<x;)if(M[V++]=k.charCodeAt(j++),V==this.blockSize){o(this,M),V=0;break}}else for(;j<x;)if(M[V++]=k[j++],V==this.blockSize){o(this,M),V=0;break}}this.h=V,this.o+=x},r.prototype.v=function(){var k=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);k[0]=128;for(var x=1;x<k.length-8;++x)k[x]=0;var I=8*this.o;for(x=k.length-8;x<k.length;++x)k[x]=I&255,I/=256;for(this.u(k),k=Array(16),x=I=0;4>x;++x)for(var M=0;32>M;M+=8)k[I++]=this.g[x]>>>M&255;return k};function c(k,x){var I=m;return Object.prototype.hasOwnProperty.call(I,k)?I[k]:I[k]=x(k)}function d(k,x){this.h=x;for(var I=[],M=!0,V=k.length-1;0<=V;V--){var j=k[V]|0;M&&j==x||(I[V]=j,M=!1)}this.g=I}var m={};function g(k){return-128<=k&&128>k?c(k,function(x){return new d([x|0],0>x?-1:0)}):new d([k|0],0>k?-1:0)}function v(k){if(isNaN(k)||!isFinite(k))return A;if(0>k)return w(v(-k));for(var x=[],I=1,M=0;k>=I;M++)x[M]=k/I|0,I*=4294967296;return new d(x,0)}function _(k,x){if(k.length==0)throw Error("number format error: empty string");if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(k.charAt(0)=="-")return w(_(k.substring(1),x));if(0<=k.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=v(Math.pow(x,8)),M=A,V=0;V<k.length;V+=8){var j=Math.min(8,k.length-V),R=parseInt(k.substring(V,V+j),x);8>j?(j=v(Math.pow(x,j)),M=M.j(j).add(v(R))):(M=M.j(I),M=M.add(v(R)))}return M}var A=g(0),b=g(1),D=g(16777216);s=d.prototype,s.m=function(){if(F(this))return-w(this).m();for(var k=0,x=1,I=0;I<this.g.length;I++){var M=this.i(I);k+=(0<=M?M:4294967296+M)*x,x*=4294967296}return k},s.toString=function(k){if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(C(this))return"0";if(F(this))return"-"+w(this).toString(k);for(var x=v(Math.pow(k,6)),I=this,M="";;){var V=Y(I,x).g;I=G(I,V.j(x));var j=((0<I.g.length?I.g[0]:I.h)>>>0).toString(k);if(I=V,C(I))return j+M;for(;6>j.length;)j="0"+j;M=j+M}},s.i=function(k){return 0>k?0:k<this.g.length?this.g[k]:this.h};function C(k){if(k.h!=0)return!1;for(var x=0;x<k.g.length;x++)if(k.g[x]!=0)return!1;return!0}function F(k){return k.h==-1}s.l=function(k){return k=G(this,k),F(k)?-1:C(k)?0:1};function w(k){for(var x=k.g.length,I=[],M=0;M<x;M++)I[M]=~k.g[M];return new d(I,~k.h).add(b)}s.abs=function(){return F(this)?w(this):this},s.add=function(k){for(var x=Math.max(this.g.length,k.g.length),I=[],M=0,V=0;V<=x;V++){var j=M+(this.i(V)&65535)+(k.i(V)&65535),R=(j>>>16)+(this.i(V)>>>16)+(k.i(V)>>>16);M=R>>>16,j&=65535,R&=65535,I[V]=R<<16|j}return new d(I,I[I.length-1]&-2147483648?-1:0)};function G(k,x){return k.add(w(x))}s.j=function(k){if(C(this)||C(k))return A;if(F(this))return F(k)?w(this).j(w(k)):w(w(this).j(k));if(F(k))return w(this.j(w(k)));if(0>this.l(D)&&0>k.l(D))return v(this.m()*k.m());for(var x=this.g.length+k.g.length,I=[],M=0;M<2*x;M++)I[M]=0;for(M=0;M<this.g.length;M++)for(var V=0;V<k.g.length;V++){var j=this.i(M)>>>16,R=this.i(M)&65535,we=k.i(V)>>>16,xe=k.i(V)&65535;I[2*M+2*V]+=R*xe,te(I,2*M+2*V),I[2*M+2*V+1]+=j*xe,te(I,2*M+2*V+1),I[2*M+2*V+1]+=R*we,te(I,2*M+2*V+1),I[2*M+2*V+2]+=j*we,te(I,2*M+2*V+2)}for(M=0;M<x;M++)I[M]=I[2*M+1]<<16|I[2*M];for(M=x;M<2*x;M++)I[M]=0;return new d(I,0)};function te(k,x){for(;(k[x]&65535)!=k[x];)k[x+1]+=k[x]>>>16,k[x]&=65535,x++}function ee(k,x){this.g=k,this.h=x}function Y(k,x){if(C(x))throw Error("division by zero");if(C(k))return new ee(A,A);if(F(k))return x=Y(w(k),x),new ee(w(x.g),w(x.h));if(F(x))return x=Y(k,w(x)),new ee(w(x.g),x.h);if(30<k.g.length){if(F(k)||F(x))throw Error("slowDivide_ only works with positive integers.");for(var I=b,M=x;0>=M.l(k);)I=U(I),M=U(M);var V=he(I,1),j=he(M,1);for(M=he(M,2),I=he(I,2);!C(M);){var R=j.add(M);0>=R.l(k)&&(V=V.add(I),j=R),M=he(M,1),I=he(I,1)}return x=G(k,V.j(x)),new ee(V,x)}for(V=A;0<=k.l(x);){for(I=Math.max(1,Math.floor(k.m()/x.m())),M=Math.ceil(Math.log(I)/Math.LN2),M=48>=M?1:Math.pow(2,M-48),j=v(I),R=j.j(x);F(R)||0<R.l(k);)I-=M,j=v(I),R=j.j(x);C(j)&&(j=b),V=V.add(j),k=G(k,R)}return new ee(V,k)}s.A=function(k){return Y(this,k).h},s.and=function(k){for(var x=Math.max(this.g.length,k.g.length),I=[],M=0;M<x;M++)I[M]=this.i(M)&k.i(M);return new d(I,this.h&k.h)},s.or=function(k){for(var x=Math.max(this.g.length,k.g.length),I=[],M=0;M<x;M++)I[M]=this.i(M)|k.i(M);return new d(I,this.h|k.h)},s.xor=function(k){for(var x=Math.max(this.g.length,k.g.length),I=[],M=0;M<x;M++)I[M]=this.i(M)^k.i(M);return new d(I,this.h^k.h)};function U(k){for(var x=k.g.length+1,I=[],M=0;M<x;M++)I[M]=k.i(M)<<1|k.i(M-1)>>>31;return new d(I,k.h)}function he(k,x){var I=x>>5;x%=32;for(var M=k.g.length-I,V=[],j=0;j<M;j++)V[j]=0<x?k.i(j+I)>>>x|k.i(j+I+1)<<32-x:k.i(j+I);return new d(V,k.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,jb=r,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.A,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=v,d.fromString=_,sr=d}).apply(typeof aE<"u"?aE:typeof self<"u"?self:typeof window<"u"?window:{});var vh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ob,tc,Mb,Ch,Ap,Vb,kb,Pb;(function(){var s,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,y,T){return h==Array.prototype||h==Object.prototype||(h[y]=T.value),h};function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof vh=="object"&&vh];for(var y=0;y<h.length;++y){var T=h[y];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var r=t(this);function o(h,y){if(y)e:{var T=r;h=h.split(".");for(var S=0;S<h.length-1;S++){var q=h[S];if(!(q in T))break e;T=T[q]}h=h[h.length-1],S=T[h],y=y(S),y!=S&&y!=null&&e(T,h,{configurable:!0,writable:!0,value:y})}}function c(h,y){h instanceof String&&(h+="");var T=0,S=!1,q={next:function(){if(!S&&T<h.length){var Q=T++;return{value:y(Q,h[Q]),done:!1}}return S=!0,{done:!0,value:void 0}}};return q[Symbol.iterator]=function(){return q},q}o("Array.prototype.values",function(h){return h||function(){return c(this,function(y,T){return T})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},m=this||self;function g(h){var y=typeof h;return y=y!="object"?y:h?Array.isArray(h)?"array":y:"null",y=="array"||y=="object"&&typeof h.length=="number"}function v(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function _(h,y,T){return h.call.apply(h.bind,arguments)}function A(h,y,T){if(!h)throw Error();if(2<arguments.length){var S=Array.prototype.slice.call(arguments,2);return function(){var q=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(q,S),h.apply(y,q)}}return function(){return h.apply(y,arguments)}}function b(h,y,T){return b=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:A,b.apply(null,arguments)}function D(h,y){var T=Array.prototype.slice.call(arguments,1);return function(){var S=T.slice();return S.push.apply(S,arguments),h.apply(this,S)}}function C(h,y){function T(){}T.prototype=y.prototype,h.aa=y.prototype,h.prototype=new T,h.prototype.constructor=h,h.Qb=function(S,q,Q){for(var oe=Array(arguments.length-2),ze=2;ze<arguments.length;ze++)oe[ze-2]=arguments[ze];return y.prototype[q].apply(S,oe)}}function F(h){const y=h.length;if(0<y){const T=Array(y);for(let S=0;S<y;S++)T[S]=h[S];return T}return[]}function w(h,y){for(let T=1;T<arguments.length;T++){const S=arguments[T];if(g(S)){const q=h.length||0,Q=S.length||0;h.length=q+Q;for(let oe=0;oe<Q;oe++)h[q+oe]=S[oe]}else h.push(S)}}class G{constructor(y,T){this.i=y,this.j=T,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function te(h){return/^[\s\xa0]*$/.test(h)}function ee(){var h=m.navigator;return h&&(h=h.userAgent)?h:""}function Y(h){return Y[" "](h),h}Y[" "]=function(){};var U=ee().indexOf("Gecko")!=-1&&!(ee().toLowerCase().indexOf("webkit")!=-1&&ee().indexOf("Edge")==-1)&&!(ee().indexOf("Trident")!=-1||ee().indexOf("MSIE")!=-1)&&ee().indexOf("Edge")==-1;function he(h,y,T){for(const S in h)y.call(T,h[S],S,h)}function k(h,y){for(const T in h)y.call(void 0,h[T],T,h)}function x(h){const y={};for(const T in h)y[T]=h[T];return y}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function M(h,y){let T,S;for(let q=1;q<arguments.length;q++){S=arguments[q];for(T in S)h[T]=S[T];for(let Q=0;Q<I.length;Q++)T=I[Q],Object.prototype.hasOwnProperty.call(S,T)&&(h[T]=S[T])}}function V(h){var y=1;h=h.split(":");const T=[];for(;0<y&&h.length;)T.push(h.shift()),y--;return h.length&&T.push(h.join(":")),T}function j(h){m.setTimeout(()=>{throw h},0)}function R(){var h=Ne;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class we{constructor(){this.h=this.g=null}add(y,T){const S=xe.get();S.set(y,T),this.h?this.h.next=S:this.g=S,this.h=S}}var xe=new G(()=>new X,h=>h.reset());class X{constructor(){this.next=this.g=this.h=null}set(y,T){this.h=y,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let ae,ce=!1,Ne=new we,P=()=>{const h=m.Promise.resolve(void 0);ae=()=>{h.then(ie)}};var ie=()=>{for(var h;h=R();){try{h.h.call(h.g)}catch(T){j(T)}var y=xe;y.j(h),100>y.h&&(y.h++,h.next=y.g,y.g=h)}ce=!1};function ue(){this.s=this.s,this.C=this.C}ue.prototype.s=!1,ue.prototype.ma=function(){this.s||(this.s=!0,this.N())},ue.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function re(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}re.prototype.h=function(){this.defaultPrevented=!0};var ye=function(){if(!m.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const T=()=>{};m.addEventListener("test",T,y),m.removeEventListener("test",T,y)}catch{}return h}();function Ve(h,y){if(re.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var T=this.type=h.type,S=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget){if(U){e:{try{Y(y.nodeName);var q=!0;break e}catch{}q=!1}q||(y=null)}}else T=="mouseover"?y=h.fromElement:T=="mouseout"&&(y=h.toElement);this.relatedTarget=y,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:Ie[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&Ve.aa.h.call(this)}}C(Ve,re);var Ie={2:"touch",3:"pen",4:"mouse"};Ve.prototype.h=function(){Ve.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var kt="closure_listenable_"+(1e6*Math.random()|0),rt=0;function us(h,y,T,S,q){this.listener=h,this.proxy=null,this.src=y,this.type=T,this.capture=!!S,this.ha=q,this.key=++rt,this.da=this.fa=!1}function yi(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Ps(h){this.src=h,this.g={},this.h=0}Ps.prototype.add=function(h,y,T,S,q){var Q=h.toString();h=this.g[Q],h||(h=this.g[Q]=[],this.h++);var oe=Er(h,y,S,q);return-1<oe?(y=h[oe],T||(y.fa=!1)):(y=new us(y,this.src,Q,!!S,q),y.fa=T,h.push(y)),y};function Tr(h,y){var T=y.type;if(T in h.g){var S=h.g[T],q=Array.prototype.indexOf.call(S,y,void 0),Q;(Q=0<=q)&&Array.prototype.splice.call(S,q,1),Q&&(yi(y),h.g[T].length==0&&(delete h.g[T],h.h--))}}function Er(h,y,T,S){for(var q=0;q<h.length;++q){var Q=h[q];if(!Q.da&&Q.listener==y&&Q.capture==!!T&&Q.ha==S)return q}return-1}var br="closure_lm_"+(1e6*Math.random()|0),Go={};function $c(h,y,T,S,q){if(Array.isArray(y)){for(var Q=0;Q<y.length;Q++)$c(h,y[Q],T,S,q);return null}return T=Kc(T),h&&h[kt]?h.K(y,T,v(S)?!!S.capture:!1,q):Pn(h,y,T,!1,S,q)}function Pn(h,y,T,S,q,Q){if(!y)throw Error("Invalid event type");var oe=v(q)?!!q.capture:!!q,ze=Ta(h);if(ze||(h[br]=ze=new Ps(h)),T=ze.add(y,T,S,oe,Q),T.proxy)return T;if(S=zd(),T.proxy=S,S.src=h,S.listener=T,h.addEventListener)ye||(q=oe),q===void 0&&(q=!1),h.addEventListener(y.toString(),S,q);else if(h.attachEvent)h.attachEvent(Ar(y.toString()),S);else if(h.addListener&&h.removeListener)h.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return T}function zd(){function h(T){return y.call(h.src,h.listener,T)}const y=qd;return h}function $o(h,y,T,S,q){if(Array.isArray(y))for(var Q=0;Q<y.length;Q++)$o(h,y[Q],T,S,q);else S=v(S)?!!S.capture:!!S,T=Kc(T),h&&h[kt]?(h=h.i,y=String(y).toString(),y in h.g&&(Q=h.g[y],T=Er(Q,T,S,q),-1<T&&(yi(Q[T]),Array.prototype.splice.call(Q,T,1),Q.length==0&&(delete h.g[y],h.h--)))):h&&(h=Ta(h))&&(y=h.g[y.toString()],h=-1,y&&(h=Er(y,T,S,q)),(T=-1<h?y[h]:null)&&_a(T))}function _a(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[kt])Tr(y.i,h);else{var T=h.type,S=h.proxy;y.removeEventListener?y.removeEventListener(T,S,h.capture):y.detachEvent?y.detachEvent(Ar(T),S):y.addListener&&y.removeListener&&y.removeListener(S),(T=Ta(y))?(Tr(T,h),T.h==0&&(T.src=null,y[br]=null)):yi(h)}}}function Ar(h){return h in Go?Go[h]:Go[h]="on"+h}function qd(h,y){if(h.da)h=!0;else{y=new Ve(y,this);var T=h.listener,S=h.ha||h.src;h.fa&&_a(h),h=T.call(S,y)}return h}function Ta(h){return h=h[br],h instanceof Ps?h:null}var Ko="__closure_events_fn_"+(1e9*Math.random()>>>0);function Kc(h){return typeof h=="function"?h:(h[Ko]||(h[Ko]=function(y){return h.handleEvent(y)}),h[Ko])}function ft(){ue.call(this),this.i=new Ps(this),this.M=this,this.F=null}C(ft,ue),ft.prototype[kt]=!0,ft.prototype.removeEventListener=function(h,y,T,S){$o(this,h,y,T,S)};function Xe(h,y){var T,S=h.F;if(S)for(T=[];S;S=S.F)T.push(S);if(h=h.M,S=y.type||y,typeof y=="string")y=new re(y,h);else if(y instanceof re)y.target=y.target||h;else{var q=y;y=new re(S,h),M(y,q)}if(q=!0,T)for(var Q=T.length-1;0<=Q;Q--){var oe=y.g=T[Q];q=An(oe,S,!0,y)&&q}if(oe=y.g=h,q=An(oe,S,!0,y)&&q,q=An(oe,S,!1,y)&&q,T)for(Q=0;Q<T.length;Q++)oe=y.g=T[Q],q=An(oe,S,!1,y)&&q}ft.prototype.N=function(){if(ft.aa.N.call(this),this.i){var h=this.i,y;for(y in h.g){for(var T=h.g[y],S=0;S<T.length;S++)yi(T[S]);delete h.g[y],h.h--}}this.F=null},ft.prototype.K=function(h,y,T,S){return this.i.add(String(h),y,!1,T,S)},ft.prototype.L=function(h,y,T,S){return this.i.add(String(h),y,!0,T,S)};function An(h,y,T,S){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();for(var q=!0,Q=0;Q<y.length;++Q){var oe=y[Q];if(oe&&!oe.da&&oe.capture==T){var ze=oe.listener,Ct=oe.ha||oe.src;oe.fa&&Tr(h.i,oe),q=ze.call(Ct,S)!==!1&&q}}return q&&!S.defaultPrevented}function tn(h,y,T){if(typeof h=="function")T&&(h=b(h,T));else if(h&&typeof h.handleEvent=="function")h=b(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:m.setTimeout(h,y||0)}function Qc(h){h.g=tn(()=>{h.g=null,h.i&&(h.i=!1,Qc(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class Bd extends ue{constructor(y,T){super(),this.m=y,this.l=T,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Qc(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Nr(h){ue.call(this),this.h=h,this.g={}}C(Nr,ue);var Sr=[];function wr(h){he(h.g,function(y,T){this.g.hasOwnProperty(T)&&_a(y)},h),h.g={}}Nr.prototype.N=function(){Nr.aa.N.call(this),wr(this)},Nr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Wn=m.JSON.stringify,Ea=m.JSON.parse,xr=class{stringify(h){return m.JSON.stringify(h,void 0)}parse(h){return m.JSON.parse(h,void 0)}};function Qo(){}Qo.prototype.h=null;function Yo(h){return h.h||(h.h=h.i())}function Xo(){}var Ls={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Us(){re.call(this,"d")}C(Us,re);function Zo(){re.call(this,"c")}C(Zo,re);var hs={},Wo=null;function _i(){return Wo=Wo||new ft}hs.La="serverreachability";function ba(h){re.call(this,hs.La,h)}C(ba,re);function Ti(h){const y=_i();Xe(y,new ba(y))}hs.STAT_EVENT="statevent";function Yc(h,y){re.call(this,hs.STAT_EVENT,h),this.stat=y}C(Yc,re);function ot(h){const y=_i();Xe(y,new Yc(y,h))}hs.Ma="timingevent";function It(h,y){re.call(this,hs.Ma,h),this.size=y}C(It,re);function Et(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){h()},y)}function Ln(){this.g=!0}Ln.prototype.xa=function(){this.g=!1};function Jo(h,y,T,S,q,Q){h.info(function(){if(h.g)if(Q)for(var oe="",ze=Q.split("&"),Ct=0;Ct<ze.length;Ct++){var qe=ze[Ct].split("=");if(1<qe.length){var Lt=qe[0];qe=qe[1];var Rt=Lt.split("_");oe=2<=Rt.length&&Rt[1]=="type"?oe+(Lt+"="+qe+"&"):oe+(Lt+"=redacted&")}}else oe=null;else oe=Q;return"XMLHTTP REQ ("+S+") [attempt "+q+"]: "+y+`
`+T+`
`+oe})}function Hd(h,y,T,S,q,Q,oe){h.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+q+"]: "+y+`
`+T+`
`+Q+" "+oe})}function Ei(h,y,T,S){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+Ir(h,T)+(S?" "+S:"")})}function Xc(h,y){h.info(function(){return"TIMEOUT: "+y})}Ln.prototype.info=function(){};function Ir(h,y){if(!h.g)return y;if(!y)return null;try{var T=JSON.parse(y);if(T){for(h=0;h<T.length;h++)if(Array.isArray(T[h])){var S=T[h];if(!(2>S.length)){var q=S[1];if(Array.isArray(q)&&!(1>q.length)){var Q=q[0];if(Q!="noop"&&Q!="stop"&&Q!="close")for(var oe=1;oe<q.length;oe++)q[oe]=""}}}}return Wn(T)}catch{return y}}var bi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Fs={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ds;function fs(){}C(fs,Qo),fs.prototype.g=function(){return new XMLHttpRequest},fs.prototype.i=function(){return{}},ds=new fs;function hn(h,y,T,S){this.j=h,this.i=y,this.l=T,this.R=S||1,this.U=new Nr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new vt}function vt(){this.i=null,this.g="",this.h=!1}var el={},Aa={};function Jn(h,y,T){h.L=1,h.v=Or(Nn(y)),h.m=T,h.P=!0,zs(h,null)}function zs(h,y){h.F=Date.now(),Cr(h),h.A=Nn(h.v);var T=h.A,S=h.R;Array.isArray(S)||(S=[String(S)]),al(T.i,"t",S),h.C=0,T=h.j.J,h.h=new vt,h.g=du(h.j,T?y:null,!h.m),0<h.O&&(h.M=new Bd(b(h.Y,h,h.g),h.O)),y=h.U,T=h.g,S=h.ca;var q="readystatechange";Array.isArray(q)||(q&&(Sr[0]=q.toString()),q=Sr);for(var Q=0;Q<q.length;Q++){var oe=$c(T,q[Q],S||y.handleEvent,!1,y.h||y);if(!oe)break;y.g[oe.key]=oe}y=h.H?x(h.H):{},h.m?(h.u||(h.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,y)):(h.u="GET",h.g.ea(h.A,h.u,null,y)),Ti(),Jo(h.i,h.u,h.A,h.l,h.R,h.m)}hn.prototype.ca=function(h){h=h.target;const y=this.M;y&&qn(h)==3?y.j():this.Y(h)},hn.prototype.Y=function(h){try{if(h==this.g)e:{const Rt=qn(this.g);var y=this.g.Ba();const Ys=this.g.Z();if(!(3>Rt)&&(Rt!=3||this.g&&(this.h.h||this.g.oa()||iu(this.g)))){this.J||Rt!=4||y==7||(y==8||0>=Ys?Ti(3):Ti(2)),Ai(this);var T=this.g.Z();this.X=T;t:if(Zc(this)){var S=iu(this.g);h="";var q=S.length,Q=qn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ht(this),ms(this);var oe="";break t}this.h.i=new m.TextDecoder}for(y=0;y<q;y++)this.h.h=!0,h+=this.h.i.decode(S[y],{stream:!(Q&&y==q-1)});S.length=0,this.h.g+=h,this.C=0,oe=this.h.g}else oe=this.g.oa();if(this.o=T==200,Hd(this.i,this.u,this.A,this.l,this.R,Rt,T),this.o){if(this.T&&!this.K){t:{if(this.g){var ze,Ct=this.g;if((ze=Ct.g?Ct.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!te(ze)){var qe=ze;break t}}qe=null}if(T=qe)Ei(this.i,this.l,T,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Rr(this,T);else{this.o=!1,this.s=3,ot(12),Ht(this),ms(this);break e}}if(this.P){T=!0;let Gt;for(;!this.J&&this.C<oe.length;)if(Gt=Wc(this,oe),Gt==Aa){Rt==4&&(this.s=4,ot(14),T=!1),Ei(this.i,this.l,null,"[Incomplete Response]");break}else if(Gt==el){this.s=4,ot(15),Ei(this.i,this.l,oe,"[Invalid Chunk]"),T=!1;break}else Ei(this.i,this.l,Gt,null),Rr(this,Gt);if(Zc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Rt!=4||oe.length!=0||this.h.h||(this.s=1,ot(16),T=!1),this.o=this.o&&T,!T)Ei(this.i,this.l,oe,"[Invalid Chunked Response]"),Ht(this),ms(this);else if(0<oe.length&&!this.W){this.W=!0;var Lt=this.j;Lt.g==this&&Lt.ba&&!Lt.M&&(Lt.j.info("Great, no buffering proxy detected. Bytes received: "+oe.length),zr(Lt),Lt.M=!0,ot(11))}}else Ei(this.i,this.l,oe,null),Rr(this,oe);Rt==4&&Ht(this),this.o&&!this.J&&(Rt==4?cu(this.j,this):(this.o=!1,Cr(this)))}else Yd(this.g),T==400&&0<oe.indexOf("Unknown SID")?(this.s=3,ot(12)):(this.s=0,ot(13)),Ht(this),ms(this)}}}catch{}finally{}};function Zc(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function Wc(h,y){var T=h.C,S=y.indexOf(`
`,T);return S==-1?Aa:(T=Number(y.substring(T,S)),isNaN(T)?el:(S+=1,S+T>y.length?Aa:(y=y.slice(S,S+T),h.C=S+T,y)))}hn.prototype.cancel=function(){this.J=!0,Ht(this)};function Cr(h){h.S=Date.now()+h.I,Jc(h,h.I)}function Jc(h,y){if(h.B!=null)throw Error("WatchDog timer not null");h.B=Et(b(h.ba,h),y)}function Ai(h){h.B&&(m.clearTimeout(h.B),h.B=null)}hn.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(Xc(this.i,this.A),this.L!=2&&(Ti(),ot(17)),Ht(this),this.s=2,ms(this)):Jc(this,this.S-h)};function ms(h){h.j.G==0||h.J||cu(h.j,h)}function Ht(h){Ai(h);var y=h.M;y&&typeof y.ma=="function"&&y.ma(),h.M=null,wr(h.U),h.g&&(y=h.g,h.g=null,y.abort(),y.ma())}function Rr(h,y){try{var T=h.j;if(T.G!=0&&(T.g==h||tl(T.h,h))){if(!h.K&&tl(T.h,h)&&T.G==3){try{var S=T.Da.g.parse(y)}catch{S=null}if(Array.isArray(S)&&S.length==3){var q=S;if(q[0]==0){e:if(!T.u){if(T.g)if(T.g.F+3e3<h.F)Va(T),Oa(T);else break e;hl(T),ot(18)}}else T.za=q[1],0<T.za-T.T&&37500>q[2]&&T.F&&T.v==0&&!T.C&&(T.C=Et(b(T.Za,T),6e3));if(1>=Sa(T.h)&&T.ca){try{T.ca()}catch{}T.ca=void 0}}else Qs(T,11)}else if((h.K||T.g==h)&&Va(T),!te(y))for(q=T.Da.g.parse(y),y=0;y<q.length;y++){let qe=q[y];if(T.T=qe[0],qe=qe[1],T.G==2)if(qe[0]=="c"){T.K=qe[1],T.ia=qe[2];const Lt=qe[3];Lt!=null&&(T.la=Lt,T.j.info("VER="+T.la));const Rt=qe[4];Rt!=null&&(T.Aa=Rt,T.j.info("SVER="+T.Aa));const Ys=qe[5];Ys!=null&&typeof Ys=="number"&&0<Ys&&(S=1.5*Ys,T.L=S,T.j.info("backChannelRequestTimeoutMs_="+S)),S=T;const Gt=h.g;if(Gt){const Es=Gt.g?Gt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Es){var Q=S.h;Q.g||Es.indexOf("spdy")==-1&&Es.indexOf("quic")==-1&&Es.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(wa(Q,Q.h),Q.h=null))}if(S.D){const fl=Gt.g?Gt.g.getResponseHeader("X-HTTP-Session-Id"):null;fl&&(S.ya=fl,Je(S.I,S.D,fl))}}T.G=3,T.l&&T.l.ua(),T.ba&&(T.R=Date.now()-h.F,T.j.info("Handshake RTT: "+T.R+"ms")),S=T;var oe=h;if(S.qa=hu(S,S.J?S.ia:null,S.W),oe.K){dn(S.h,oe);var ze=oe,Ct=S.L;Ct&&(ze.I=Ct),ze.B&&(Ai(ze),Cr(ze)),S.g=oe}else ou(S);0<T.i.length&&Ma(T)}else qe[0]!="stop"&&qe[0]!="close"||Qs(T,7);else T.G==3&&(qe[0]=="stop"||qe[0]=="close"?qe[0]=="stop"?Qs(T,7):cl(T):qe[0]!="noop"&&T.l&&T.l.ta(qe),T.v=0)}}Ti(4)}catch{}}var eu=class{constructor(h,y){this.g=h,this.map=y}};function qs(h){this.l=h||10,m.PerformanceNavigationTiming?(h=m.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Na(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Sa(h){return h.h?1:h.g?h.g.size:0}function tl(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function wa(h,y){h.g?h.g.add(y):h.h=y}function dn(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}qs.prototype.cancel=function(){if(this.i=nl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function nl(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const T of h.g.values())y=y.concat(T.D);return y}return F(h.i)}function Gd(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(g(h)){for(var y=[],T=h.length,S=0;S<T;S++)y.push(h[S]);return y}y=[],T=0;for(S in h)y[T++]=h[S];return y}function xa(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(g(h)||typeof h=="string"){var y=[];h=h.length;for(var T=0;T<h;T++)y.push(T);return y}y=[],T=0;for(const S in h)y[T++]=S;return y}}}function sl(h,y){if(h.forEach&&typeof h.forEach=="function")h.forEach(y,void 0);else if(g(h)||typeof h=="string")Array.prototype.forEach.call(h,y,void 0);else for(var T=xa(h),S=Gd(h),q=S.length,Q=0;Q<q;Q++)y.call(void 0,S[Q],T&&T[Q],h)}var Dr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function $d(h,y){if(h){h=h.split("&");for(var T=0;T<h.length;T++){var S=h[T].indexOf("="),q=null;if(0<=S){var Q=h[T].substring(0,S);q=h[T].substring(S+1)}else Q=h[T];y(Q,q?decodeURIComponent(q.replace(/\+/g," ")):"")}}}function bt(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof bt){this.h=h.h,jr(this,h.j),this.o=h.o,this.g=h.g,Ni(this,h.s),this.l=h.l;var y=h.i,T=new Hs;T.i=y.i,y.g&&(T.g=new Map(y.g),T.h=y.h),Bs(this,T),this.m=h.m}else h&&(y=String(h).match(Dr))?(this.h=!1,jr(this,y[1]||"",!0),this.o=Un(y[2]||""),this.g=Un(y[3]||"",!0),Ni(this,y[4]),this.l=Un(y[5]||"",!0),Bs(this,y[6]||"",!0),this.m=Un(y[7]||"")):(this.h=!1,this.i=new Hs(null,this.h))}bt.prototype.toString=function(){var h=[],y=this.j;y&&h.push(Mr(y,il,!0),":");var T=this.g;return(T||y=="file")&&(h.push("//"),(y=this.o)&&h.push(Mr(y,il,!0),"@"),h.push(encodeURIComponent(String(T)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.s,T!=null&&h.push(":",String(T))),(T=this.l)&&(this.g&&T.charAt(0)!="/"&&h.push("/"),h.push(Mr(T,T.charAt(0)=="/"?Kd:rl,!0))),(T=this.i.toString())&&h.push("?",T),(T=this.m)&&h.push("#",Mr(T,Ia)),h.join("")};function Nn(h){return new bt(h)}function jr(h,y,T){h.j=T?Un(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function Ni(h,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);h.s=y}else h.s=null}function Bs(h,y,T){y instanceof Hs?(h.i=y,nu(h.i,h.h)):(T||(y=Mr(y,Qd)),h.i=new Hs(y,h.h))}function Je(h,y,T){h.i.set(y,T)}function Or(h){return Je(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function Un(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Mr(h,y,T){return typeof h=="string"?(h=encodeURI(h).replace(y,tu),T&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function tu(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var il=/[#\/\?@]/g,rl=/[#\?:]/g,Kd=/[#\?]/g,Qd=/[#\?@]/g,Ia=/#/g;function Hs(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function Fn(h){h.g||(h.g=new Map,h.h=0,h.i&&$d(h.i,function(y,T){h.add(decodeURIComponent(y.replace(/\+/g," ")),T)}))}s=Hs.prototype,s.add=function(h,y){Fn(this),this.i=null,h=ps(this,h);var T=this.g.get(h);return T||this.g.set(h,T=[]),T.push(y),this.h+=1,this};function Gs(h,y){Fn(h),y=ps(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function $s(h,y){return Fn(h),y=ps(h,y),h.g.has(y)}s.forEach=function(h,y){Fn(this),this.g.forEach(function(T,S){T.forEach(function(q){h.call(y,q,S,this)},this)},this)},s.na=function(){Fn(this);const h=Array.from(this.g.values()),y=Array.from(this.g.keys()),T=[];for(let S=0;S<y.length;S++){const q=h[S];for(let Q=0;Q<q.length;Q++)T.push(y[S])}return T},s.V=function(h){Fn(this);let y=[];if(typeof h=="string")$s(this,h)&&(y=y.concat(this.g.get(ps(this,h))));else{h=Array.from(this.g.values());for(let T=0;T<h.length;T++)y=y.concat(h[T])}return y},s.set=function(h,y){return Fn(this),this.i=null,h=ps(this,h),$s(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},s.get=function(h,y){return h?(h=this.V(h),0<h.length?String(h[0]):y):y};function al(h,y,T){Gs(h,y),0<T.length&&(h.i=null,h.g.set(ps(h,y),F(T)),h.h+=T.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(var T=0;T<y.length;T++){var S=y[T];const Q=encodeURIComponent(String(S)),oe=this.V(S);for(S=0;S<oe.length;S++){var q=Q;oe[S]!==""&&(q+="="+encodeURIComponent(String(oe[S]))),h.push(q)}}return this.i=h.join("&")};function ps(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function nu(h,y){y&&!h.j&&(Fn(h),h.i=null,h.g.forEach(function(T,S){var q=S.toLowerCase();S!=q&&(Gs(this,S),al(this,q,T))},h)),h.j=y}function Vr(h,y){const T=new Ln;if(m.Image){const S=new Image;S.onload=D(zn,T,"TestLoadImage: loaded",!0,y,S),S.onerror=D(zn,T,"TestLoadImage: error",!1,y,S),S.onabort=D(zn,T,"TestLoadImage: abort",!1,y,S),S.ontimeout=D(zn,T,"TestLoadImage: timeout",!1,y,S),m.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=h}else y(!1)}function es(h,y){const T=new Ln,S=new AbortController,q=setTimeout(()=>{S.abort(),zn(T,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:S.signal}).then(Q=>{clearTimeout(q),Q.ok?zn(T,"TestPingServer: ok",!0,y):zn(T,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(q),zn(T,"TestPingServer: error",!1,y)})}function zn(h,y,T,S,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),S(T)}catch{}}function kr(){this.g=new xr}function gs(h,y,T){const S=T||"";try{sl(h,function(q,Q){let oe=q;v(q)&&(oe=Wn(q)),y.push(S+Q+"="+encodeURIComponent(oe))})}catch(q){throw y.push(S+"type="+encodeURIComponent("_badmap")),q}}function Si(h){this.l=h.Ub||null,this.j=h.eb||!1}C(Si,Qo),Si.prototype.g=function(){return new Ks(this.l,this.j)},Si.prototype.i=function(h){return function(){return h}}({});function Ks(h,y){ft.call(this),this.D=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(Ks,ft),s=Ks.prototype,s.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=y,this.readyState=1,ys(this)},s.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(y.body=h),(this.D||m).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,vs(this)),this.readyState=0},s.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,ys(this)),this.g&&(this.readyState=3,ys(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ol(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function ol(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}s.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?vs(this):ys(this),this.readyState==3&&ol(this)}},s.Ra=function(h){this.g&&(this.response=this.responseText=h,vs(this))},s.Qa=function(h){this.g&&(this.response=h,vs(this))},s.ga=function(){this.g&&vs(this)};function vs(h){h.readyState=4,h.l=null,h.j=null,h.v=null,ys(h)}s.setRequestHeader=function(h,y){this.u.append(h,y)},s.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var T=y.next();!T.done;)T=T.value,h.push(T[0]+": "+T[1]),T=y.next();return h.join(`\r
`)};function ys(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Ks.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function ll(h){let y="";return he(h,function(T,S){y+=S,y+=":",y+=T,y+=`\r
`}),y}function Pt(h,y,T){e:{for(S in T){var S=!1;break e}S=!0}S||(T=ll(T),typeof h=="string"?T!=null&&encodeURIComponent(String(T)):Je(h,y,T))}function Ye(h){ft.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(Ye,ft);var Ca=/^https?$/i,Pr=["POST","PUT"];s=Ye.prototype,s.Ha=function(h){this.J=h},s.ea=function(h,y,T,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ds.g(),this.v=this.o?Yo(this.o):Yo(ds),this.g.onreadystatechange=b(this.Ea,this);try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(Q){su(this,Q);return}if(h=T||"",T=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var q in S)T.set(q,S[q]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const Q of S.keys())T.set(Q,S.get(Q));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(T.keys()).find(Q=>Q.toLowerCase()=="content-type"),q=m.FormData&&h instanceof m.FormData,!(0<=Array.prototype.indexOf.call(Pr,y,void 0))||S||q||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,oe]of T)this.g.setRequestHeader(Q,oe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Lr(this),this.u=!0,this.g.send(h),this.u=!1}catch(Q){su(this,Q)}};function su(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.m=5,Ra(h),_s(h)}function Ra(h){h.A||(h.A=!0,Xe(h,"complete"),Xe(h,"error"))}s.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,Xe(this,"complete"),Xe(this,"abort"),_s(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),_s(this,!0)),Ye.aa.N.call(this)},s.Ea=function(){this.s||(this.B||this.u||this.j?Da(this):this.bb())},s.bb=function(){Da(this)};function Da(h){if(h.h&&typeof d<"u"&&(!h.v[1]||qn(h)!=4||h.Z()!=2)){if(h.u&&qn(h)==4)tn(h.Ea,0,h);else if(Xe(h,"readystatechange"),qn(h)==4){h.h=!1;try{const oe=h.Z();e:switch(oe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var T;if(!(T=y)){var S;if(S=oe===0){var q=String(h.D).match(Dr)[1]||null;!q&&m.self&&m.self.location&&(q=m.self.location.protocol.slice(0,-1)),S=!Ca.test(q?q.toLowerCase():"")}T=S}if(T)Xe(h,"complete"),Xe(h,"success");else{h.m=6;try{var Q=2<qn(h)?h.g.statusText:""}catch{Q=""}h.l=Q+" ["+h.Z()+"]",Ra(h)}}finally{_s(h)}}}}function _s(h,y){if(h.g){Lr(h);const T=h.g,S=h.v[0]?()=>{}:null;h.g=null,h.v=null,y||Xe(h,"ready");try{T.onreadystatechange=S}catch{}}}function Lr(h){h.I&&(m.clearTimeout(h.I),h.I=null)}s.isActive=function(){return!!this.g};function qn(h){return h.g?h.g.readyState:0}s.Z=function(){try{return 2<qn(this)?this.g.status:-1}catch{return-1}},s.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.Oa=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),Ea(y)}};function iu(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Yd(h){const y={};h=(h.g&&2<=qn(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<h.length;S++){if(te(h[S]))continue;var T=V(h[S]);const q=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const Q=y[q]||[];y[q]=Q,Q.push(T)}k(y,function(S){return S.join(", ")})}s.Ba=function(){return this.m},s.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ur(h,y,T){return T&&T.internalChannelParams&&T.internalChannelParams[h]||y}function ja(h){this.Aa=0,this.i=[],this.j=new Ln,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ur("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ur("baseRetryDelayMs",5e3,h),this.cb=Ur("retryDelaySeedMs",1e4,h),this.Wa=Ur("forwardChannelMaxRetries",2,h),this.wa=Ur("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new qs(h&&h.concurrentRequestLimit),this.Da=new kr,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}s=ja.prototype,s.la=8,s.G=1,s.connect=function(h,y,T,S){ot(0),this.W=h,this.H=y||{},T&&S!==void 0&&(this.H.OSID=T,this.H.OAID=S),this.F=this.X,this.I=hu(this,null,this.W),Ma(this)};function cl(h){if(ru(h),h.G==3){var y=h.U++,T=Nn(h.I);if(Je(T,"SID",h.K),Je(T,"RID",y),Je(T,"TYPE","terminate"),Fr(h,T),y=new hn(h,h.j,y),y.L=2,y.v=Or(Nn(T)),T=!1,m.navigator&&m.navigator.sendBeacon)try{T=m.navigator.sendBeacon(y.v.toString(),"")}catch{}!T&&m.Image&&(new Image().src=y.v,T=!0),T||(y.g=du(y.j,null),y.g.ea(y.v)),y.F=Date.now(),Cr(y)}uu(h)}function Oa(h){h.g&&(zr(h),h.g.cancel(),h.g=null)}function ru(h){Oa(h),h.u&&(m.clearTimeout(h.u),h.u=null),Va(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&m.clearTimeout(h.s),h.s=null)}function Ma(h){if(!Na(h.h)&&!h.s){h.s=!0;var y=h.Ga;ae||P(),ce||(ae(),ce=!0),Ne.add(y,h),h.B=0}}function Xd(h,y){return Sa(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=y.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=Et(b(h.Ga,h,y),dl(h,h.B)),h.B++,!0)}s.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const q=new hn(this,this.j,h);let Q=this.o;if(this.S&&(Q?(Q=x(Q),M(Q,this.S)):Q=this.S),this.m!==null||this.O||(q.H=Q,Q=null),this.P)e:{for(var y=0,T=0;T<this.i.length;T++){t:{var S=this.i[T];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(y+=S,4096<y){y=T;break e}if(y===4096||T===this.i.length-1){y=T+1;break e}}y=1e3}else y=1e3;y=au(this,q,y),T=Nn(this.I),Je(T,"RID",h),Je(T,"CVER",22),this.D&&Je(T,"X-HTTP-Session-Id",this.D),Fr(this,T),Q&&(this.O?y="headers="+encodeURIComponent(String(ll(Q)))+"&"+y:this.m&&Pt(T,this.m,Q)),wa(this.h,q),this.Ua&&Je(T,"TYPE","init"),this.P?(Je(T,"$req",y),Je(T,"SID","null"),q.T=!0,Jn(q,T,null)):Jn(q,T,y),this.G=2}}else this.G==3&&(h?ul(this,h):this.i.length==0||Na(this.h)||ul(this))};function ul(h,y){var T;y?T=y.l:T=h.U++;const S=Nn(h.I);Je(S,"SID",h.K),Je(S,"RID",T),Je(S,"AID",h.T),Fr(h,S),h.m&&h.o&&Pt(S,h.m,h.o),T=new hn(h,h.j,T,h.B+1),h.m===null&&(T.H=h.o),y&&(h.i=y.D.concat(h.i)),y=au(h,T,1e3),T.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),wa(h.h,T),Jn(T,S,y)}function Fr(h,y){h.H&&he(h.H,function(T,S){Je(y,S,T)}),h.l&&sl({},function(T,S){Je(y,S,T)})}function au(h,y,T){T=Math.min(h.i.length,T);var S=h.l?b(h.l.Na,h.l,h):null;e:{var q=h.i;let Q=-1;for(;;){const oe=["count="+T];Q==-1?0<T?(Q=q[0].g,oe.push("ofs="+Q)):Q=0:oe.push("ofs="+Q);let ze=!0;for(let Ct=0;Ct<T;Ct++){let qe=q[Ct].g;const Lt=q[Ct].map;if(qe-=Q,0>qe)Q=Math.max(0,q[Ct].g-100),ze=!1;else try{gs(Lt,oe,"req"+qe+"_")}catch{S&&S(Lt)}}if(ze){S=oe.join("&");break e}}}return h=h.i.splice(0,T),y.D=h,S}function ou(h){if(!h.g&&!h.u){h.Y=1;var y=h.Fa;ae||P(),ce||(ae(),ce=!0),Ne.add(y,h),h.v=0}}function hl(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=Et(b(h.Fa,h),dl(h,h.v)),h.v++,!0)}s.Fa=function(){if(this.u=null,lu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=Et(b(this.ab,this),h)}},s.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ot(10),Oa(this),lu(this))};function zr(h){h.A!=null&&(m.clearTimeout(h.A),h.A=null)}function lu(h){h.g=new hn(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var y=Nn(h.qa);Je(y,"RID","rpc"),Je(y,"SID",h.K),Je(y,"AID",h.T),Je(y,"CI",h.F?"0":"1"),!h.F&&h.ja&&Je(y,"TO",h.ja),Je(y,"TYPE","xmlhttp"),Fr(h,y),h.m&&h.o&&Pt(y,h.m,h.o),h.L&&(h.g.I=h.L);var T=h.g;h=h.ia,T.L=1,T.v=Or(Nn(y)),T.m=null,T.P=!0,zs(T,h)}s.Za=function(){this.C!=null&&(this.C=null,Oa(this),hl(this),ot(19))};function Va(h){h.C!=null&&(m.clearTimeout(h.C),h.C=null)}function cu(h,y){var T=null;if(h.g==y){Va(h),zr(h),h.g=null;var S=2}else if(tl(h.h,y))T=y.D,dn(h.h,y),S=1;else return;if(h.G!=0){if(y.o)if(S==1){T=y.m?y.m.length:0,y=Date.now()-y.F;var q=h.B;S=_i(),Xe(S,new It(S,T)),Ma(h)}else ou(h);else if(q=y.s,q==3||q==0&&0<y.X||!(S==1&&Xd(h,y)||S==2&&hl(h)))switch(T&&0<T.length&&(y=h.h,y.i=y.i.concat(T)),q){case 1:Qs(h,5);break;case 4:Qs(h,10);break;case 3:Qs(h,6);break;default:Qs(h,2)}}}function dl(h,y){let T=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(T*=2),T*y}function Qs(h,y){if(h.j.info("Error code "+y),y==2){var T=b(h.fb,h),S=h.Xa;const q=!S;S=new bt(S||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||jr(S,"https"),Or(S),q?Vr(S.toString(),T):es(S.toString(),T)}else ot(2);h.G=0,h.l&&h.l.sa(y),uu(h),ru(h)}s.fb=function(h){h?(this.j.info("Successfully pinged google.com"),ot(2)):(this.j.info("Failed to ping google.com"),ot(1))};function uu(h){if(h.G=0,h.ka=[],h.l){const y=nl(h.h);(y.length!=0||h.i.length!=0)&&(w(h.ka,y),w(h.ka,h.i),h.h.i.length=0,F(h.i),h.i.length=0),h.l.ra()}}function hu(h,y,T){var S=T instanceof bt?Nn(T):new bt(T);if(S.g!="")y&&(S.g=y+"."+S.g),Ni(S,S.s);else{var q=m.location;S=q.protocol,y=y?y+"."+q.hostname:q.hostname,q=+q.port;var Q=new bt(null);S&&jr(Q,S),y&&(Q.g=y),q&&Ni(Q,q),T&&(Q.l=T),S=Q}return T=h.D,y=h.ya,T&&y&&Je(S,T,y),Je(S,"VER",h.la),Fr(h,S),S}function du(h,y,T){if(y&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Ca&&!h.pa?new Ye(new Si({eb:T})):new Ye(h.pa),y.Ha(h.J),y}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function fu(){}s=fu.prototype,s.ua=function(){},s.ta=function(){},s.sa=function(){},s.ra=function(){},s.isActive=function(){return!0},s.Na=function(){};function ka(){}ka.prototype.g=function(h,y){return new fn(h,y)};function fn(h,y){ft.call(this),this.g=new ja(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(h?h["X-WebChannel-Client-Profile"]=y.va:h={"X-WebChannel-Client-Profile":y.va}),this.g.S=h,(h=y&&y.Sb)&&!te(h)&&(this.g.m=h),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!te(y)&&(this.g.D=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new Ts(this)}C(fn,ft),fn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},fn.prototype.close=function(){cl(this.g)},fn.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var T={};T.__data__=h,h=T}else this.u&&(T={},T.__data__=Wn(h),h=T);y.i.push(new eu(y.Ya++,h)),y.G==3&&Ma(y)},fn.prototype.N=function(){this.g.l=null,delete this.j,cl(this.g),delete this.g,fn.aa.N.call(this)};function mu(h){Us.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const T in y){h=T;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}C(mu,Us);function pu(){Zo.call(this),this.status=1}C(pu,Zo);function Ts(h){this.g=h}C(Ts,fu),Ts.prototype.ua=function(){Xe(this.g,"a")},Ts.prototype.ta=function(h){Xe(this.g,new mu(h))},Ts.prototype.sa=function(h){Xe(this.g,new pu)},Ts.prototype.ra=function(){Xe(this.g,"b")},ka.prototype.createWebChannel=ka.prototype.g,fn.prototype.send=fn.prototype.o,fn.prototype.open=fn.prototype.m,fn.prototype.close=fn.prototype.close,Pb=function(){return new ka},kb=function(){return _i()},Vb=hs,Ap={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},bi.NO_ERROR=0,bi.TIMEOUT=8,bi.HTTP_ERROR=6,Ch=bi,Fs.COMPLETE="complete",Mb=Fs,Xo.EventType=Ls,Ls.OPEN="a",Ls.CLOSE="b",Ls.ERROR="c",Ls.MESSAGE="d",ft.prototype.listen=ft.prototype.K,tc=Xo,Ye.prototype.listenOnce=Ye.prototype.L,Ye.prototype.getLastError=Ye.prototype.Ka,Ye.prototype.getLastErrorCode=Ye.prototype.Ba,Ye.prototype.getStatus=Ye.prototype.Z,Ye.prototype.getResponseJson=Ye.prototype.Oa,Ye.prototype.getResponseText=Ye.prototype.oa,Ye.prototype.send=Ye.prototype.ea,Ye.prototype.setWithCredentials=Ye.prototype.Ha,Ob=Ye}).apply(typeof vh<"u"?vh:typeof self<"u"?self:typeof window<"u"?window:{});const oE="@firebase/firestore",lE="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}an.UNAUTHENTICATED=new an(null),an.GOOGLE_CREDENTIALS=new an("google-credentials-uid"),an.FIRST_PARTY=new an("first-party-uid"),an.MOCK_USER=new an("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lo="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ua=new Cc("@firebase/firestore");function mo(){return ua.logLevel}function fe(s,...e){if(ua.logLevel<=Ue.DEBUG){const t=e.map(lg);ua.debug(`Firestore (${Lo}): ${s}`,...t)}}function pi(s,...e){if(ua.logLevel<=Ue.ERROR){const t=e.map(lg);ua.error(`Firestore (${Lo}): ${s}`,...t)}}function Ro(s,...e){if(ua.logLevel<=Ue.WARN){const t=e.map(lg);ua.warn(`Firestore (${Lo}): ${s}`,...t)}}function lg(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _e(s,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,Lb(s,r,t)}function Lb(s,e,t){let r=`FIRESTORE (${Lo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw pi(r),new Error(r)}function Ge(s,e,t,r){let o="Unexpected state";typeof t=="string"?o=t:r=t,s||Lb(e,o,r)}function Ce(s,e){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class de extends Zn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ub{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class DR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(an.UNAUTHENTICATED))}shutdown(){}}class jR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class OR{constructor(e){this.t=e,this.currentUser=an.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ge(this.o===void 0,42304);let r=this.i;const o=g=>this.i!==r?(r=this.i,t(g)):Promise.resolve();let c=new Rs;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Rs,e.enqueueRetryable(()=>o(this.currentUser))};const d=()=>{const g=c;e.enqueueRetryable(async()=>{await g.promise,await o(this.currentUser)})},m=g=>{fe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit(g=>m(g)),setTimeout(()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?m(g):(fe("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Rs)}},0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(fe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ge(typeof r.accessToken=="string",31837,{l:r}),new Ub(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ge(e===null||typeof e=="string",2055,{h:e}),new an(e)}}class MR{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=an.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class VR{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new MR(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(an.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class cE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class kR{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,as(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ge(this.o===void 0,3512);const r=c=>{c.error!=null&&fe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const d=c.token!==this.m;return this.m=c.token,fe("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable(()=>r(c))};const o=c=>{fe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(c=>o(c)),setTimeout(()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?o(c):fe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new cE(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ge(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new cE(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PR(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<s;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fb(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zb{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const o=PR(40);for(let c=0;c<o.length;++c)r.length<20&&o[c]<t&&(r+=e.charAt(o[c]%62))}return r}}function Me(s,e){return s<e?-1:s>e?1:0}function Np(s,e){let t=0;for(;t<s.length&&t<e.length;){const r=s.codePointAt(t),o=e.codePointAt(t);if(r!==o){if(r<128&&o<128)return Me(r,o);{const c=Fb(),d=LR(c.encode(uE(s,t)),c.encode(uE(e,t)));return d!==0?d:Me(r,o)}}t+=r>65535?2:1}return Me(s.length,e.length)}function uE(s,e){return s.codePointAt(e)>65535?s.substring(e,e+2):s.substring(e,e+1)}function LR(s,e){for(let t=0;t<s.length&&t<e.length;++t)if(s[t]!==e[t])return Me(s[t],e[t]);return Me(s.length,e.length)}function Do(s,e,t){return s.length===e.length&&s.every((r,o)=>t(r,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hE=-62135596800,dE=1e6;class Ot{static now(){return Ot.fromMillis(Date.now())}static fromDate(e){return Ot.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*dE);return new Ot(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new de(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new de(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<hE)throw new de(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new de(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/dE}_compareTo(e){return this.seconds===e.seconds?Me(this.nanoseconds,e.nanoseconds):Me(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-hE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{static fromTimestamp(e){return new be(e)}static min(){return new be(new Ot(0,0))}static max(){return new be(new Ot(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fE="__name__";class xs{constructor(e,t,r){t===void 0?t=0:t>e.length&&_e(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&_e(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return xs.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof xs?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const c=xs.compareSegments(e.get(o),t.get(o));if(c!==0)return c}return Me(e.length,t.length)}static compareSegments(e,t){const r=xs.isNumericId(e),o=xs.isNumericId(t);return r&&!o?-1:!r&&o?1:r&&o?xs.extractNumericId(e).compare(xs.extractNumericId(t)):Np(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return sr.fromString(e.substring(4,e.length-2))}}class it extends xs{construct(e,t,r){return new it(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new de(J.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new it(t)}static emptyPath(){return new it([])}}const UR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Xt extends xs{construct(e,t,r){return new Xt(e,t,r)}static isValidIdentifier(e){return UR.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Xt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===fE}static keyField(){return new Xt([fE])}static fromServerFormat(e){const t=[];let r="",o=0;const c=()=>{if(r.length===0)throw new de(J.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let d=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new de(J.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new de(J.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=g,o+=2}else m==="`"?(d=!d,o++):m!=="."||d?(r+=m,o++):(c(),o++)}if(c(),d)throw new de(J.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Xt(t)}static emptyPath(){return new Xt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(e){this.path=e}static fromPath(e){return new ve(it.fromString(e))}static fromName(e){return new ve(it.fromString(e).popFirst(5))}static empty(){return new ve(it.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&it.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return it.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ve(new it(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _c=-1;function FR(s,e){const t=s.toTimestamp().seconds,r=s.toTimestamp().nanoseconds+1,o=be.fromTimestamp(r===1e9?new Ot(t+1,0):new Ot(t,r));return new ar(o,ve.empty(),e)}function zR(s){return new ar(s.readTime,s.key,_c)}class ar{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ar(be.min(),ve.empty(),_c)}static max(){return new ar(be.max(),ve.empty(),_c)}}function qR(s,e){let t=s.readTime.compareTo(e.readTime);return t!==0?t:(t=ve.comparator(s.documentKey,e.documentKey),t!==0?t:Me(s.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class HR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uo(s){if(s.code!==J.FAILED_PRECONDITION||s.message!==BR)throw s;fe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&_e(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new se((r,o)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(r,o)},this.catchCallback=c=>{this.wrapFailure(t,c).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof se?t:se.resolve(t)}catch(t){return se.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):se.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):se.reject(t)}static resolve(e){return new se((t,r)=>{t(e)})}static reject(e){return new se((t,r)=>{r(e)})}static waitFor(e){return new se((t,r)=>{let o=0,c=0,d=!1;e.forEach(m=>{++o,m.next(()=>{++c,d&&c===o&&t()},g=>r(g))}),d=!0,c===o&&t()})}static or(e){let t=se.resolve(!1);for(const r of e)t=t.next(o=>o?se.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,c)=>{r.push(t.call(this,o,c))}),this.waitFor(r)}static mapArray(e,t){return new se((r,o)=>{const c=e.length,d=new Array(c);let m=0;for(let g=0;g<c;g++){const v=g;t(e[v]).next(_=>{d[v]=_,++m,m===c&&r(d)},_=>o(_))}})}static doWhile(e,t){return new se((r,o)=>{const c=()=>{e()===!0?t().next(()=>{c()},o):r()};c()})}}function GR(s){const e=s.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Fo(s){return s.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>t.writeSequenceNumber(r))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}fd.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cg=-1;function Mc(s){return s==null}function Gh(s){return s===0&&1/s==-1/0}function $R(s){return typeof s=="number"&&Number.isInteger(s)&&!Gh(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qb="";function KR(s){let e="";for(let t=0;t<s.length;t++)e.length>0&&(e=mE(e)),e=QR(s.get(t),e);return mE(e)}function QR(s,e){let t=e;const r=s.length;for(let o=0;o<r;o++){const c=s.charAt(o);switch(c){case"\0":t+="";break;case qb:t+="";break;default:t+=c}}return t}function mE(s){return s+qb+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pE(s){let e=0;for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e++;return e}function gr(s,e){for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e(t,s[t])}function Bb(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e,t){this.comparator=e,this.root=t||Yt.EMPTY}insert(e,t){return new dt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Yt.BLACK,null,null))}remove(e){return new dt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Yt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(o===0)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new yh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new yh(this.root,e,this.comparator,!1)}getReverseIterator(){return new yh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new yh(this.root,e,this.comparator,!0)}}class yh{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=t?r(e.key,t):1,t&&o&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Yt{constructor(e,t,r,o,c){this.key=e,this.value=t,this.color=r??Yt.RED,this.left=o??Yt.EMPTY,this.right=c??Yt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,c){return new Yt(e??this.key,t??this.value,r??this.color,o??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const c=r(e,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(e,t,r),null):c===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Yt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Yt.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Yt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Yt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw _e(43730,{key:this.key,value:this.value});if(this.right.isRed())throw _e(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw _e(27949);return e+(this.isRed()?0:1)}}Yt.EMPTY=null,Yt.RED=!0,Yt.BLACK=!1;Yt.EMPTY=new class{constructor(){this.size=0}get key(){throw _e(57766)}get value(){throw _e(16141)}get color(){throw _e(16727)}get left(){throw _e(29726)}get right(){throw _e(36894)}copy(e,t,r,o,c){return this}insert(e,t,r){return new Yt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e){this.comparator=e,this.data=new dt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new gE(this.data.getIterator())}getIteratorFrom(e){return new gE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Mt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,c=r.getNext().key;if(this.comparator(o,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Mt(this.comparator);return t.data=e,t}}class gE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e){this.fields=e,e.sort(Xt.comparator)}static empty(){return new jn([])}unionWith(e){let t=new Mt(Xt.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new jn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Do(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(o){try{return atob(o)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new Hb("Invalid base64 string: "+c):c}}(e);return new Jt(t)}static fromUint8Array(e){const t=function(o){let c="";for(let d=0;d<o.length;++d)c+=String.fromCharCode(o[d]);return c}(e);return new Jt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Me(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Jt.EMPTY_BYTE_STRING=new Jt("");const YR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function or(s){if(Ge(!!s,39018),typeof s=="string"){let e=0;const t=YR.exec(s);if(Ge(!!t,46558,{timestamp:s}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(s);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Tt(s.seconds),nanos:Tt(s.nanos)}}function Tt(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function lr(s){return typeof s=="string"?Jt.fromBase64String(s):Jt.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gb="server_timestamp",$b="__type__",Kb="__previous_value__",Qb="__local_write_time__";function ug(s){var e,t;return((t=(((e=s?.mapValue)===null||e===void 0?void 0:e.fields)||{})[$b])===null||t===void 0?void 0:t.stringValue)===Gb}function md(s){const e=s.mapValue.fields[Kb];return ug(e)?md(e):e}function Tc(s){const e=or(s.mapValue.fields[Qb].timestampValue);return new Ot(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XR{constructor(e,t,r,o,c,d,m,g,v,_){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=c,this.forceLongPolling=d,this.autoDetectLongPolling=m,this.longPollingOptions=g,this.useFetchStreams=v,this.isUsingEmulator=_}}const $h="(default)";class Ec{constructor(e,t){this.projectId=e,this.database=t||$h}static empty(){return new Ec("","")}get isDefaultDatabase(){return this.database===$h}isEqual(e){return e instanceof Ec&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yb="__type__",ZR="__max__",_h={mapValue:{}},Xb="__vector__",Kh="value";function cr(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?ug(s)?4:JR(s)?9007199254740991:WR(s)?10:11:_e(28295,{value:s})}function js(s,e){if(s===e)return!0;const t=cr(s);if(t!==cr(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return Tc(s).isEqual(Tc(e));case 3:return function(o,c){if(typeof o.timestampValue=="string"&&typeof c.timestampValue=="string"&&o.timestampValue.length===c.timestampValue.length)return o.timestampValue===c.timestampValue;const d=or(o.timestampValue),m=or(c.timestampValue);return d.seconds===m.seconds&&d.nanos===m.nanos}(s,e);case 5:return s.stringValue===e.stringValue;case 6:return function(o,c){return lr(o.bytesValue).isEqual(lr(c.bytesValue))}(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return function(o,c){return Tt(o.geoPointValue.latitude)===Tt(c.geoPointValue.latitude)&&Tt(o.geoPointValue.longitude)===Tt(c.geoPointValue.longitude)}(s,e);case 2:return function(o,c){if("integerValue"in o&&"integerValue"in c)return Tt(o.integerValue)===Tt(c.integerValue);if("doubleValue"in o&&"doubleValue"in c){const d=Tt(o.doubleValue),m=Tt(c.doubleValue);return d===m?Gh(d)===Gh(m):isNaN(d)&&isNaN(m)}return!1}(s,e);case 9:return Do(s.arrayValue.values||[],e.arrayValue.values||[],js);case 10:case 11:return function(o,c){const d=o.mapValue.fields||{},m=c.mapValue.fields||{};if(pE(d)!==pE(m))return!1;for(const g in d)if(d.hasOwnProperty(g)&&(m[g]===void 0||!js(d[g],m[g])))return!1;return!0}(s,e);default:return _e(52216,{left:s})}}function bc(s,e){return(s.values||[]).find(t=>js(t,e))!==void 0}function jo(s,e){if(s===e)return 0;const t=cr(s),r=cr(e);if(t!==r)return Me(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Me(s.booleanValue,e.booleanValue);case 2:return function(c,d){const m=Tt(c.integerValue||c.doubleValue),g=Tt(d.integerValue||d.doubleValue);return m<g?-1:m>g?1:m===g?0:isNaN(m)?isNaN(g)?0:-1:1}(s,e);case 3:return vE(s.timestampValue,e.timestampValue);case 4:return vE(Tc(s),Tc(e));case 5:return Np(s.stringValue,e.stringValue);case 6:return function(c,d){const m=lr(c),g=lr(d);return m.compareTo(g)}(s.bytesValue,e.bytesValue);case 7:return function(c,d){const m=c.split("/"),g=d.split("/");for(let v=0;v<m.length&&v<g.length;v++){const _=Me(m[v],g[v]);if(_!==0)return _}return Me(m.length,g.length)}(s.referenceValue,e.referenceValue);case 8:return function(c,d){const m=Me(Tt(c.latitude),Tt(d.latitude));return m!==0?m:Me(Tt(c.longitude),Tt(d.longitude))}(s.geoPointValue,e.geoPointValue);case 9:return yE(s.arrayValue,e.arrayValue);case 10:return function(c,d){var m,g,v,_;const A=c.fields||{},b=d.fields||{},D=(m=A[Kh])===null||m===void 0?void 0:m.arrayValue,C=(g=b[Kh])===null||g===void 0?void 0:g.arrayValue,F=Me(((v=D?.values)===null||v===void 0?void 0:v.length)||0,((_=C?.values)===null||_===void 0?void 0:_.length)||0);return F!==0?F:yE(D,C)}(s.mapValue,e.mapValue);case 11:return function(c,d){if(c===_h.mapValue&&d===_h.mapValue)return 0;if(c===_h.mapValue)return 1;if(d===_h.mapValue)return-1;const m=c.fields||{},g=Object.keys(m),v=d.fields||{},_=Object.keys(v);g.sort(),_.sort();for(let A=0;A<g.length&&A<_.length;++A){const b=Np(g[A],_[A]);if(b!==0)return b;const D=jo(m[g[A]],v[_[A]]);if(D!==0)return D}return Me(g.length,_.length)}(s.mapValue,e.mapValue);default:throw _e(23264,{Pe:t})}}function vE(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return Me(s,e);const t=or(s),r=or(e),o=Me(t.seconds,r.seconds);return o!==0?o:Me(t.nanos,r.nanos)}function yE(s,e){const t=s.values||[],r=e.values||[];for(let o=0;o<t.length&&o<r.length;++o){const c=jo(t[o],r[o]);if(c)return c}return Me(t.length,r.length)}function Oo(s){return Sp(s)}function Sp(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?function(t){const r=or(t);return`time(${r.seconds},${r.nanos})`}(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?function(t){return lr(t).toBase64()}(s.bytesValue):"referenceValue"in s?function(t){return ve.fromName(t).toString()}(s.referenceValue):"geoPointValue"in s?function(t){return`geo(${t.latitude},${t.longitude})`}(s.geoPointValue):"arrayValue"in s?function(t){let r="[",o=!0;for(const c of t.values||[])o?o=!1:r+=",",r+=Sp(c);return r+"]"}(s.arrayValue):"mapValue"in s?function(t){const r=Object.keys(t.fields||{}).sort();let o="{",c=!0;for(const d of r)c?c=!1:o+=",",o+=`${d}:${Sp(t.fields[d])}`;return o+"}"}(s.mapValue):_e(61005,{value:s})}function Rh(s){switch(cr(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=md(s);return e?16+Rh(e):16;case 5:return 2*s.stringValue.length;case 6:return lr(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((o,c)=>o+Rh(c),0)}(s.arrayValue);case 10:case 11:return function(r){let o=0;return gr(r.fields,(c,d)=>{o+=c.length+Rh(d)}),o}(s.mapValue);default:throw _e(13486,{value:s})}}function _E(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function wp(s){return!!s&&"integerValue"in s}function hg(s){return!!s&&"arrayValue"in s}function TE(s){return!!s&&"nullValue"in s}function EE(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function Dh(s){return!!s&&"mapValue"in s}function WR(s){var e,t;return((t=(((e=s?.mapValue)===null||e===void 0?void 0:e.fields)||{})[Yb])===null||t===void 0?void 0:t.stringValue)===Xb}function oc(s){if(s.geoPointValue)return{geoPointValue:Object.assign({},s.geoPointValue)};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:Object.assign({},s.timestampValue)};if(s.mapValue){const e={mapValue:{fields:{}}};return gr(s.mapValue.fields,(t,r)=>e.mapValue.fields[t]=oc(r)),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(s.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=oc(s.arrayValue.values[t]);return e}return Object.assign({},s)}function JR(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===ZR}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e){this.value=e}static empty(){return new gn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Dh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=oc(t)}setAll(e){let t=Xt.emptyPath(),r={},o=[];e.forEach((d,m)=>{if(!t.isImmediateParentOf(m)){const g=this.getFieldsMap(t);this.applyChanges(g,r,o),r={},o=[],t=m.popLast()}d?r[m.lastSegment()]=oc(d):o.push(m.lastSegment())});const c=this.getFieldsMap(t);this.applyChanges(c,r,o)}delete(e){const t=this.field(e.popLast());Dh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return js(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];Dh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){gr(t,(o,c)=>e[o]=c);for(const o of r)delete e[o]}clone(){return new gn(oc(this.value))}}function Zb(s){const e=[];return gr(s.fields,(t,r)=>{const o=new Xt([t]);if(Dh(r)){const c=Zb(r.mapValue).fields;if(c.length===0)e.push(o);else for(const d of c)e.push(o.child(d))}else e.push(o)}),new jn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e,t,r,o,c,d,m){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.createTime=c,this.data=d,this.documentState=m}static newInvalidDocument(e){return new Bt(e,0,be.min(),be.min(),be.min(),gn.empty(),0)}static newFoundDocument(e,t,r,o){return new Bt(e,1,t,be.min(),r,o,0)}static newNoDocument(e,t){return new Bt(e,2,t,be.min(),be.min(),gn.empty(),0)}static newUnknownDocument(e,t){return new Bt(e,3,t,be.min(),be.min(),gn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(be.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=gn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=gn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=be.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Bt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Bt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh{constructor(e,t){this.position=e,this.inclusive=t}}function bE(s,e,t){let r=0;for(let o=0;o<s.position.length;o++){const c=e[o],d=s.position[o];if(c.field.isKeyField()?r=ve.comparator(ve.fromName(d.referenceValue),t.key):r=jo(d,t.data.field(c.field)),c.dir==="desc"&&(r*=-1),r!==0)break}return r}function AE(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let t=0;t<s.position.length;t++)if(!js(s.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac{constructor(e,t="asc"){this.field=e,this.dir=t}}function e1(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wb{}class wt extends Wb{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new n1(e,t,r):t==="array-contains"?new r1(e,r):t==="in"?new a1(e,r):t==="not-in"?new o1(e,r):t==="array-contains-any"?new l1(e,r):new wt(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new s1(e,r):new i1(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(jo(t,this.value)):t!==null&&cr(this.value)===cr(t)&&this.matchesComparison(jo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return _e(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class cs extends Wb{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new cs(e,t)}matches(e){return Jb(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function Jb(s){return s.op==="and"}function eA(s){return t1(s)&&Jb(s)}function t1(s){for(const e of s.filters)if(e instanceof cs)return!1;return!0}function xp(s){if(s instanceof wt)return s.field.canonicalString()+s.op.toString()+Oo(s.value);if(eA(s))return s.filters.map(e=>xp(e)).join(",");{const e=s.filters.map(t=>xp(t)).join(",");return`${s.op}(${e})`}}function tA(s,e){return s instanceof wt?function(r,o){return o instanceof wt&&r.op===o.op&&r.field.isEqual(o.field)&&js(r.value,o.value)}(s,e):s instanceof cs?function(r,o){return o instanceof cs&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce((c,d,m)=>c&&tA(d,o.filters[m]),!0):!1}(s,e):void _e(19439)}function nA(s){return s instanceof wt?function(t){return`${t.field.canonicalString()} ${t.op} ${Oo(t.value)}`}(s):s instanceof cs?function(t){return t.op.toString()+" {"+t.getFilters().map(nA).join(" ,")+"}"}(s):"Filter"}class n1 extends wt{constructor(e,t,r){super(e,t,r),this.key=ve.fromName(r.referenceValue)}matches(e){const t=ve.comparator(e.key,this.key);return this.matchesComparison(t)}}class s1 extends wt{constructor(e,t){super(e,"in",t),this.keys=sA("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class i1 extends wt{constructor(e,t){super(e,"not-in",t),this.keys=sA("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function sA(s,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>ve.fromName(r.referenceValue))}class r1 extends wt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return hg(t)&&bc(t.arrayValue,this.value)}}class a1 extends wt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&bc(this.value.arrayValue,t)}}class o1 extends wt{constructor(e,t){super(e,"not-in",t)}matches(e){if(bc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!bc(this.value.arrayValue,t)}}class l1 extends wt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!hg(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>bc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c1{constructor(e,t=null,r=[],o=[],c=null,d=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=c,this.startAt=d,this.endAt=m,this.Ie=null}}function NE(s,e=null,t=[],r=[],o=null,c=null,d=null){return new c1(s,e,t,r,o,c,d)}function dg(s){const e=Ce(s);if(e.Ie===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>xp(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(c){return c.field.canonicalString()+c.dir}(r)).join(","),Mc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Oo(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Oo(r)).join(",")),e.Ie=t}return e.Ie}function fg(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<s.orderBy.length;t++)if(!e1(s.orderBy[t],e.orderBy[t]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let t=0;t<s.filters.length;t++)if(!tA(s.filters[t],e.filters[t]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!AE(s.startAt,e.startAt)&&AE(s.endAt,e.endAt)}function Ip(s){return ve.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(e,t=null,r=[],o=[],c=null,d="F",m=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=c,this.limitType=d,this.startAt=m,this.endAt=g,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function u1(s,e,t,r,o,c,d,m){return new zo(s,e,t,r,o,c,d,m)}function pd(s){return new zo(s)}function SE(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function iA(s){return s.collectionGroup!==null}function lc(s){const e=Ce(s);if(e.Ee===null){e.Ee=[];const t=new Set;for(const c of e.explicitOrderBy)e.Ee.push(c),t.add(c.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let m=new Mt(Xt.comparator);return d.filters.forEach(g=>{g.getFlattenedFilters().forEach(v=>{v.isInequality()&&(m=m.add(v.field))})}),m})(e).forEach(c=>{t.has(c.canonicalString())||c.isKeyField()||e.Ee.push(new Ac(c,r))}),t.has(Xt.keyField().canonicalString())||e.Ee.push(new Ac(Xt.keyField(),r))}return e.Ee}function Ds(s){const e=Ce(s);return e.de||(e.de=h1(e,lc(s))),e.de}function h1(s,e){if(s.limitType==="F")return NE(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map(o=>{const c=o.dir==="desc"?"asc":"desc";return new Ac(o.field,c)});const t=s.endAt?new Qh(s.endAt.position,s.endAt.inclusive):null,r=s.startAt?new Qh(s.startAt.position,s.startAt.inclusive):null;return NE(s.path,s.collectionGroup,e,s.filters,s.limit,t,r)}}function Cp(s,e){const t=s.filters.concat([e]);return new zo(s.path,s.collectionGroup,s.explicitOrderBy.slice(),t,s.limit,s.limitType,s.startAt,s.endAt)}function Rp(s,e,t){return new zo(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,t,s.startAt,s.endAt)}function gd(s,e){return fg(Ds(s),Ds(e))&&s.limitType===e.limitType}function rA(s){return`${dg(Ds(s))}|lt:${s.limitType}`}function po(s){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(o=>nA(o)).join(", ")}]`),Mc(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(o=>function(d){return`${d.field.canonicalString()} (${d.dir})`}(o)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(o=>Oo(o)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(o=>Oo(o)).join(",")),`Target(${r})`}(Ds(s))}; limitType=${s.limitType})`}function vd(s,e){return e.isFoundDocument()&&function(r,o){const c=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(c):ve.isDocumentKey(r.path)?r.path.isEqual(c):r.path.isImmediateParentOf(c)}(s,e)&&function(r,o){for(const c of lc(r))if(!c.field.isKeyField()&&o.data.field(c.field)===null)return!1;return!0}(s,e)&&function(r,o){for(const c of r.filters)if(!c.matches(o))return!1;return!0}(s,e)&&function(r,o){return!(r.startAt&&!function(d,m,g){const v=bE(d,m,g);return d.inclusive?v<=0:v<0}(r.startAt,lc(r),o)||r.endAt&&!function(d,m,g){const v=bE(d,m,g);return d.inclusive?v>=0:v>0}(r.endAt,lc(r),o))}(s,e)}function d1(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function aA(s){return(e,t)=>{let r=!1;for(const o of lc(s)){const c=f1(o,e,t);if(c!==0)return c;r=r||o.field.isKeyField()}return 0}}function f1(s,e,t){const r=s.field.isKeyField()?ve.comparator(e.key,t.key):function(c,d,m){const g=d.data.field(c),v=m.data.field(c);return g!==null&&v!==null?jo(g,v):_e(42886)}(s.field,e,t);switch(s.dir){case"asc":return r;case"desc":return-1*r;default:return _e(19790,{direction:s.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[o,c]of r)if(this.equalsFn(o,e))return c}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(o===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let c=0;c<o.length;c++)if(this.equalsFn(o[c][0],e))return void(o[c]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return r.length===1?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){gr(this.inner,(t,r)=>{for(const[o,c]of r)e(o,c)})}isEmpty(){return Bb(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m1=new dt(ve.comparator);function gi(){return m1}const oA=new dt(ve.comparator);function nc(...s){let e=oA;for(const t of s)e=e.insert(t.key,t);return e}function lA(s){let e=oA;return s.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function ia(){return cc()}function cA(){return cc()}function cc(){return new va(s=>s.toString(),(s,e)=>s.isEqual(e))}const p1=new dt(ve.comparator),g1=new Mt(ve.comparator);function Fe(...s){let e=g1;for(const t of s)e=e.add(t);return e}const v1=new Mt(Me);function y1(){return v1}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mg(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Gh(e)?"-0":e}}function uA(s){return{integerValue:""+s}}function _1(s,e){return $R(e)?uA(e):mg(s,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(){this._=void 0}}function T1(s,e,t){return s instanceof Nc?function(o,c){const d={fields:{[$b]:{stringValue:Gb},[Qb]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return c&&ug(c)&&(c=md(c)),c&&(d.fields[Kb]=c),{mapValue:d}}(t,e):s instanceof Sc?dA(s,e):s instanceof wc?fA(s,e):function(o,c){const d=hA(o,c),m=wE(d)+wE(o.Re);return wp(d)&&wp(o.Re)?uA(m):mg(o.serializer,m)}(s,e)}function E1(s,e,t){return s instanceof Sc?dA(s,e):s instanceof wc?fA(s,e):t}function hA(s,e){return s instanceof Yh?function(r){return wp(r)||function(c){return!!c&&"doubleValue"in c}(r)}(e)?e:{integerValue:0}:null}class Nc extends yd{}class Sc extends yd{constructor(e){super(),this.elements=e}}function dA(s,e){const t=mA(e);for(const r of s.elements)t.some(o=>js(o,r))||t.push(r);return{arrayValue:{values:t}}}class wc extends yd{constructor(e){super(),this.elements=e}}function fA(s,e){let t=mA(e);for(const r of s.elements)t=t.filter(o=>!js(o,r));return{arrayValue:{values:t}}}class Yh extends yd{constructor(e,t){super(),this.serializer=e,this.Re=t}}function wE(s){return Tt(s.integerValue||s.doubleValue)}function mA(s){return hg(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b1{constructor(e,t){this.field=e,this.transform=t}}function A1(s,e){return s.field.isEqual(e.field)&&function(r,o){return r instanceof Sc&&o instanceof Sc||r instanceof wc&&o instanceof wc?Do(r.elements,o.elements,js):r instanceof Yh&&o instanceof Yh?js(r.Re,o.Re):r instanceof Nc&&o instanceof Nc}(s.transform,e.transform)}class N1{constructor(e,t){this.version=e,this.transformResults=t}}class Zt{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Zt}static exists(e){return new Zt(void 0,e)}static updateTime(e){return new Zt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function jh(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class _d{}function pA(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new Td(s.key,Zt.none()):new Vc(s.key,s.data,Zt.none());{const t=s.data,r=gn.empty();let o=new Mt(Xt.comparator);for(let c of e.fields)if(!o.has(c)){let d=t.field(c);d===null&&c.length>1&&(c=c.popLast(),d=t.field(c)),d===null?r.delete(c):r.set(c,d),o=o.add(c)}return new vr(s.key,r,new jn(o.toArray()),Zt.none())}}function S1(s,e,t){s instanceof Vc?function(o,c,d){const m=o.value.clone(),g=IE(o.fieldTransforms,c,d.transformResults);m.setAll(g),c.convertToFoundDocument(d.version,m).setHasCommittedMutations()}(s,e,t):s instanceof vr?function(o,c,d){if(!jh(o.precondition,c))return void c.convertToUnknownDocument(d.version);const m=IE(o.fieldTransforms,c,d.transformResults),g=c.data;g.setAll(gA(o)),g.setAll(m),c.convertToFoundDocument(d.version,g).setHasCommittedMutations()}(s,e,t):function(o,c,d){c.convertToNoDocument(d.version).setHasCommittedMutations()}(0,e,t)}function uc(s,e,t,r){return s instanceof Vc?function(c,d,m,g){if(!jh(c.precondition,d))return m;const v=c.value.clone(),_=CE(c.fieldTransforms,g,d);return v.setAll(_),d.convertToFoundDocument(d.version,v).setHasLocalMutations(),null}(s,e,t,r):s instanceof vr?function(c,d,m,g){if(!jh(c.precondition,d))return m;const v=CE(c.fieldTransforms,g,d),_=d.data;return _.setAll(gA(c)),_.setAll(v),d.convertToFoundDocument(d.version,_).setHasLocalMutations(),m===null?null:m.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map(A=>A.field))}(s,e,t,r):function(c,d,m){return jh(c.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):m}(s,e,t)}function w1(s,e){let t=null;for(const r of s.fieldTransforms){const o=e.data.field(r.field),c=hA(r.transform,o||null);c!=null&&(t===null&&(t=gn.empty()),t.set(r.field,c))}return t||null}function xE(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&Do(r,o,(c,d)=>A1(c,d))}(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class Vc extends _d{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class vr extends _d{constructor(e,t,r,o,c=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function gA(s){const e=new Map;return s.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=s.data.field(t);e.set(t,r)}}),e}function IE(s,e,t){const r=new Map;Ge(s.length===t.length,32656,{Ve:t.length,me:s.length});for(let o=0;o<t.length;o++){const c=s[o],d=c.transform,m=e.data.field(c.field);r.set(c.field,E1(d,m,t[o]))}return r}function CE(s,e,t){const r=new Map;for(const o of s){const c=o.transform,d=t.data.field(o.field);r.set(o.field,T1(c,d,e))}return r}class Td extends _d{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class vA extends _d{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x1{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const c=this.mutations[o];c.key.isEqual(e.key)&&S1(c,e,r[o])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=uc(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=uc(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=cA();return this.mutations.forEach(o=>{const c=e.get(o.key),d=c.overlayedDocument;let m=this.applyToLocalView(d,c.mutatedFields);m=t.has(o.key)?null:m;const g=pA(d,m);g!==null&&r.set(o.key,g),d.isValidDocument()||d.convertToNoDocument(be.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Fe())}isEqual(e){return this.batchId===e.batchId&&Do(this.mutations,e.mutations,(t,r)=>xE(t,r))&&Do(this.baseMutations,e.baseMutations,(t,r)=>xE(t,r))}}class pg{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){Ge(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let o=function(){return p1}();const c=e.mutations;for(let d=0;d<c.length;d++)o=o.insert(c[d].key,r[d].version);return new pg(e,t,r,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I1{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C1{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var St,He;function yA(s){switch(s){case J.OK:return _e(64938);case J.CANCELLED:case J.UNKNOWN:case J.DEADLINE_EXCEEDED:case J.RESOURCE_EXHAUSTED:case J.INTERNAL:case J.UNAVAILABLE:case J.UNAUTHENTICATED:return!1;case J.INVALID_ARGUMENT:case J.NOT_FOUND:case J.ALREADY_EXISTS:case J.PERMISSION_DENIED:case J.FAILED_PRECONDITION:case J.ABORTED:case J.OUT_OF_RANGE:case J.UNIMPLEMENTED:case J.DATA_LOSS:return!0;default:return _e(15467,{code:s})}}function _A(s){if(s===void 0)return pi("GRPC error has no .code"),J.UNKNOWN;switch(s){case St.OK:return J.OK;case St.CANCELLED:return J.CANCELLED;case St.UNKNOWN:return J.UNKNOWN;case St.DEADLINE_EXCEEDED:return J.DEADLINE_EXCEEDED;case St.RESOURCE_EXHAUSTED:return J.RESOURCE_EXHAUSTED;case St.INTERNAL:return J.INTERNAL;case St.UNAVAILABLE:return J.UNAVAILABLE;case St.UNAUTHENTICATED:return J.UNAUTHENTICATED;case St.INVALID_ARGUMENT:return J.INVALID_ARGUMENT;case St.NOT_FOUND:return J.NOT_FOUND;case St.ALREADY_EXISTS:return J.ALREADY_EXISTS;case St.PERMISSION_DENIED:return J.PERMISSION_DENIED;case St.FAILED_PRECONDITION:return J.FAILED_PRECONDITION;case St.ABORTED:return J.ABORTED;case St.OUT_OF_RANGE:return J.OUT_OF_RANGE;case St.UNIMPLEMENTED:return J.UNIMPLEMENTED;case St.DATA_LOSS:return J.DATA_LOSS;default:return _e(39323,{code:s})}}(He=St||(St={}))[He.OK=0]="OK",He[He.CANCELLED=1]="CANCELLED",He[He.UNKNOWN=2]="UNKNOWN",He[He.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",He[He.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",He[He.NOT_FOUND=5]="NOT_FOUND",He[He.ALREADY_EXISTS=6]="ALREADY_EXISTS",He[He.PERMISSION_DENIED=7]="PERMISSION_DENIED",He[He.UNAUTHENTICATED=16]="UNAUTHENTICATED",He[He.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",He[He.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",He[He.ABORTED=10]="ABORTED",He[He.OUT_OF_RANGE=11]="OUT_OF_RANGE",He[He.UNIMPLEMENTED=12]="UNIMPLEMENTED",He[He.INTERNAL=13]="INTERNAL",He[He.UNAVAILABLE=14]="UNAVAILABLE",He[He.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R1=new sr([4294967295,4294967295],0);function RE(s){const e=Fb().encode(s),t=new jb;return t.update(e),new Uint8Array(t.digest())}function DE(s){const e=new DataView(s.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),o=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new sr([t,r],0),new sr([o,c],0)]}class gg{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new sc(`Invalid padding: ${t}`);if(r<0)throw new sc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new sc(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new sc(`Invalid padding when bitmap length is 0: ${t}`);this.pe=8*e.length-t,this.ye=sr.fromNumber(this.pe)}we(e,t,r){let o=e.add(t.multiply(sr.fromNumber(r)));return o.compare(R1)===1&&(o=new sr([o.getBits(0),o.getBits(1)],0)),o.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const t=RE(e),[r,o]=DE(t);for(let c=0;c<this.hashCount;c++){const d=this.we(r,o,c);if(!this.be(d))return!1}return!0}static create(e,t,r){const o=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),d=new gg(c,o,t);return r.forEach(m=>d.insert(m)),d}insert(e){if(this.pe===0)return;const t=RE(e),[r,o]=DE(t);for(let c=0;c<this.hashCount;c++){const d=this.we(r,o,c);this.Se(d)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class sc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ed{constructor(e,t,r,o,c){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const o=new Map;return o.set(e,kc.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Ed(be.min(),o,new dt(Me),gi(),Fe())}}class kc{constructor(e,t,r,o,c){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new kc(r,t,Fe(),Fe(),Fe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(e,t,r,o){this.De=e,this.removedTargetIds=t,this.key=r,this.ve=o}}class TA{constructor(e,t){this.targetId=e,this.Ce=t}}class EA{constructor(e,t,r=Jt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class jE{constructor(){this.Fe=0,this.Me=OE(),this.xe=Jt.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=Fe(),t=Fe(),r=Fe();return this.Me.forEach((o,c)=>{switch(c){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:_e(38017,{changeType:c})}}),new kc(this.xe,this.Oe,e,t,r)}Qe(){this.Ne=!1,this.Me=OE()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,Ge(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class D1{constructor(e){this.ze=e,this.je=new Map,this.He=gi(),this.Je=Th(),this.Ye=Th(),this.Ze=new dt(Me)}Xe(e){for(const t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(const t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,t=>{const r=this.rt(t);switch(e.state){case 0:this.it(t)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(t);break;case 3:this.it(t)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),r.ke(e.resumeToken));break;default:_e(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach((r,o)=>{this.it(o)&&t(o)})}ot(e){const t=e.targetId,r=e.Ce.count,o=this._t(t);if(o){const c=o.target;if(Ip(c))if(r===0){const d=new ve(c.path);this.tt(t,d,Bt.newNoDocument(d,be.min()))}else Ge(r===1,20013,{expectedCount:r});else{const d=this.ut(t);if(d!==r){const m=this.ct(e),g=m?this.lt(m,e,d):1;if(g!==0){this.st(t);const v=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,v)}}}}}ct(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:c=0}=t;let d,m;try{d=lr(r).toUint8Array()}catch(g){if(g instanceof Hb)return Ro("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{m=new gg(d,o,c)}catch(g){return Ro(g instanceof sc?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return m.pe===0?null:m}lt(e,t,r){return t.Ce.count===r-this.Tt(e,t.targetId)?0:2}Tt(e,t){const r=this.ze.getRemoteKeysForTarget(t);let o=0;return r.forEach(c=>{const d=this.ze.Pt(),m=`projects/${d.projectId}/databases/${d.database}/documents/${c.path.canonicalString()}`;e.mightContain(m)||(this.tt(t,c,null),o++)}),o}It(e){const t=new Map;this.je.forEach((c,d)=>{const m=this._t(d);if(m){if(c.current&&Ip(m.target)){const g=new ve(m.target.path);this.Et(g).has(d)||this.dt(d,g)||this.tt(d,g,Bt.newNoDocument(g,e))}c.Le&&(t.set(d,c.qe()),c.Qe())}});let r=Fe();this.Ye.forEach((c,d)=>{let m=!0;d.forEachWhile(g=>{const v=this._t(g);return!v||v.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)}),m&&(r=r.add(c))}),this.He.forEach((c,d)=>d.setReadTime(e));const o=new Ed(e,t,this.Ze,this.He,r);return this.He=gi(),this.Je=Th(),this.Ye=Th(),this.Ze=new dt(Me),o}et(e,t){if(!this.it(e))return;const r=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,r),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,r){if(!this.it(e))return;const o=this.rt(e);this.dt(e,t)?o.$e(t,1):o.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),r&&(this.He=this.He.insert(t,r))}removeTarget(e){this.je.delete(e)}ut(e){const t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new jE,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new Mt(Me),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new Mt(Me),this.Je=this.Je.insert(e,t)),t}it(e){const t=this._t(e)!==null;return t||fe("WatchChangeAggregator","Detected inactive target",e),t}_t(e){const t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new jE),this.ze.getRemoteKeysForTarget(e).forEach(t=>{this.tt(e,t,null)})}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}}function Th(){return new dt(ve.comparator)}function OE(){return new dt(ve.comparator)}const j1={asc:"ASCENDING",desc:"DESCENDING"},O1={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},M1={and:"AND",or:"OR"};class V1{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Dp(s,e){return s.useProto3Json||Mc(e)?e:{value:e}}function Xh(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function bA(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function k1(s,e){return Xh(s,e.toTimestamp())}function Mn(s){return Ge(!!s,49232),be.fromTimestamp(function(t){const r=or(t);return new Ot(r.seconds,r.nanos)}(s))}function vg(s,e){return jp(s,e).canonicalString()}function jp(s,e){const t=function(o){return new it(["projects",o.projectId,"databases",o.database])}(s).child("documents");return e===void 0?t:t.child(e)}function AA(s){const e=it.fromString(s);return Ge(CA(e),10190,{key:e.toString()}),e}function Zh(s,e){return vg(s.databaseId,e.path)}function hc(s,e){const t=AA(e);if(t.get(1)!==s.databaseId.projectId)throw new de(J.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+s.databaseId.projectId);if(t.get(3)!==s.databaseId.database)throw new de(J.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+s.databaseId.database);return new ve(SA(t))}function NA(s,e){return vg(s.databaseId,e)}function P1(s){const e=AA(s);return e.length===4?it.emptyPath():SA(e)}function Op(s){return new it(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function SA(s){return Ge(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function ME(s,e,t){return{name:Zh(s,e),fields:t.value.mapValue.fields}}function L1(s,e){return"found"in e?function(r,o){Ge(!!o.found,43571),o.found.name,o.found.updateTime;const c=hc(r,o.found.name),d=Mn(o.found.updateTime),m=o.found.createTime?Mn(o.found.createTime):be.min(),g=new gn({mapValue:{fields:o.found.fields}});return Bt.newFoundDocument(c,d,m,g)}(s,e):"missing"in e?function(r,o){Ge(!!o.missing,3894),Ge(!!o.readTime,22933);const c=hc(r,o.missing),d=Mn(o.readTime);return Bt.newNoDocument(c,d)}(s,e):_e(7234,{result:e})}function U1(s,e){let t;if("targetChange"in e){e.targetChange;const r=function(v){return v==="NO_CHANGE"?0:v==="ADD"?1:v==="REMOVE"?2:v==="CURRENT"?3:v==="RESET"?4:_e(39313,{state:v})}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],c=function(v,_){return v.useProto3Json?(Ge(_===void 0||typeof _=="string",58123),Jt.fromBase64String(_||"")):(Ge(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),Jt.fromUint8Array(_||new Uint8Array))}(s,e.targetChange.resumeToken),d=e.targetChange.cause,m=d&&function(v){const _=v.code===void 0?J.UNKNOWN:_A(v.code);return new de(_,v.message||"")}(d);t=new EA(r,o,c,m||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const o=hc(s,r.document.name),c=Mn(r.document.updateTime),d=r.document.createTime?Mn(r.document.createTime):be.min(),m=new gn({mapValue:{fields:r.document.fields}}),g=Bt.newFoundDocument(o,c,d,m),v=r.targetIds||[],_=r.removedTargetIds||[];t=new Oh(v,_,g.key,g)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const o=hc(s,r.document),c=r.readTime?Mn(r.readTime):be.min(),d=Bt.newNoDocument(o,c),m=r.removedTargetIds||[];t=new Oh([],m,d.key,d)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const o=hc(s,r.document),c=r.removedTargetIds||[];t=new Oh([],c,o,null)}else{if(!("filter"in e))return _e(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:o=0,unchangedNames:c}=r,d=new C1(o,c),m=r.targetId;t=new TA(m,d)}}return t}function wA(s,e){let t;if(e instanceof Vc)t={update:ME(s,e.key,e.value)};else if(e instanceof Td)t={delete:Zh(s,e.key)};else if(e instanceof vr)t={update:ME(s,e.key,e.data),updateMask:Q1(e.fieldMask)};else{if(!(e instanceof vA))return _e(16599,{ft:e.type});t={verify:Zh(s,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(c,d){const m=d.transform;if(m instanceof Nc)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof Sc)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof wc)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof Yh)return{fieldPath:d.field.canonicalString(),increment:m.Re};throw _e(20930,{transform:d.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(o,c){return c.updateTime!==void 0?{updateTime:k1(o,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:_e(27497)}(s,e.precondition)),t}function F1(s,e){return s&&s.length>0?(Ge(e!==void 0,14353),s.map(t=>function(o,c){let d=o.updateTime?Mn(o.updateTime):Mn(c);return d.isEqual(be.min())&&(d=Mn(c)),new N1(d,o.transformResults||[])}(t,e))):[]}function z1(s,e){return{documents:[NA(s,e.path)]}}function q1(s,e){const t={structuredQuery:{}},r=e.path;let o;e.collectionGroup!==null?(o=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=NA(s,o);const c=function(v){if(v.length!==0)return IA(cs.create(v,"and"))}(e.filters);c&&(t.structuredQuery.where=c);const d=function(v){if(v.length!==0)return v.map(_=>function(b){return{field:go(b.field),direction:G1(b.dir)}}(_))}(e.orderBy);d&&(t.structuredQuery.orderBy=d);const m=Dp(s,e.limit);return m!==null&&(t.structuredQuery.limit=m),e.startAt&&(t.structuredQuery.startAt=function(v){return{before:v.inclusive,values:v.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(v){return{before:!v.inclusive,values:v.position}}(e.endAt)),{gt:t,parent:o}}function B1(s){let e=P1(s.parent);const t=s.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){Ge(r===1,65062);const _=t.from[0];_.allDescendants?o=_.collectionId:e=e.child(_.collectionId)}let c=[];t.where&&(c=function(A){const b=xA(A);return b instanceof cs&&eA(b)?b.getFilters():[b]}(t.where));let d=[];t.orderBy&&(d=function(A){return A.map(b=>function(C){return new Ac(vo(C.field),function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(b))}(t.orderBy));let m=null;t.limit&&(m=function(A){let b;return b=typeof A=="object"?A.value:A,Mc(b)?null:b}(t.limit));let g=null;t.startAt&&(g=function(A){const b=!!A.before,D=A.values||[];return new Qh(D,b)}(t.startAt));let v=null;return t.endAt&&(v=function(A){const b=!A.before,D=A.values||[];return new Qh(D,b)}(t.endAt)),u1(e,o,d,c,m,"F",g,v)}function H1(s,e){const t=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return _e(28987,{purpose:o})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function xA(s){return s.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=vo(t.unaryFilter.field);return wt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=vo(t.unaryFilter.field);return wt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=vo(t.unaryFilter.field);return wt.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=vo(t.unaryFilter.field);return wt.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return _e(61313);default:return _e(60726)}}(s):s.fieldFilter!==void 0?function(t){return wt.create(vo(t.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return _e(58110);default:return _e(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(s):s.compositeFilter!==void 0?function(t){return cs.create(t.compositeFilter.filters.map(r=>xA(r)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return _e(1026)}}(t.compositeFilter.op))}(s):_e(30097,{filter:s})}function G1(s){return j1[s]}function $1(s){return O1[s]}function K1(s){return M1[s]}function go(s){return{fieldPath:s.canonicalString()}}function vo(s){return Xt.fromServerFormat(s.fieldPath)}function IA(s){return s instanceof wt?function(t){if(t.op==="=="){if(EE(t.value))return{unaryFilter:{field:go(t.field),op:"IS_NAN"}};if(TE(t.value))return{unaryFilter:{field:go(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(EE(t.value))return{unaryFilter:{field:go(t.field),op:"IS_NOT_NAN"}};if(TE(t.value))return{unaryFilter:{field:go(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:go(t.field),op:$1(t.op),value:t.value}}}(s):s instanceof cs?function(t){const r=t.getFilters().map(o=>IA(o));return r.length===1?r[0]:{compositeFilter:{op:K1(t.op),filters:r}}}(s):_e(54877,{filter:s})}function Q1(s){const e=[];return s.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function CA(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er{constructor(e,t,r,o,c=be.min(),d=be.min(),m=Jt.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=m,this.expectedCount=g}withSequenceNumber(e){return new er(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new er(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new er(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new er(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y1{constructor(e){this.wt=e}}function X1(s){const e=B1({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?Rp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1{constructor(){this.Cn=new W1}addToCollectionParentIndex(e,t){return this.Cn.add(t),se.resolve()}getCollectionParents(e,t){return se.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return se.resolve()}deleteFieldIndex(e,t){return se.resolve()}deleteAllFieldIndexes(e){return se.resolve()}createTargetIndexes(e,t){return se.resolve()}getDocumentsMatchingTarget(e,t){return se.resolve(null)}getIndexType(e,t){return se.resolve(0)}getFieldIndexes(e,t){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,t){return se.resolve(ar.min())}getMinOffsetFromCollectionGroup(e,t){return se.resolve(ar.min())}updateCollectionGroup(e,t,r){return se.resolve()}updateIndexEntries(e,t){return se.resolve()}}class W1{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new Mt(it.comparator),c=!o.has(r);return this.index[t]=o.add(r),c}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new Mt(it.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},RA=41943040;class En{static withCacheSize(e){return new En(e,En.DEFAULT_COLLECTION_PERCENTILE,En.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */En.DEFAULT_COLLECTION_PERCENTILE=10,En.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,En.DEFAULT=new En(RA,En.DEFAULT_COLLECTION_PERCENTILE,En.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),En.DISABLED=new En(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new Mo(0)}static lr(){return new Mo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kE="LruGarbageCollector",J1=1048576;function PE([s,e],[t,r]){const o=Me(s,t);return o===0?Me(e,r):o}class eD{constructor(e){this.Er=e,this.buffer=new Mt(PE),this.dr=0}Ar(){return++this.dr}Rr(e){const t=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();PE(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class tD{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){fe(kE,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Fo(t)?fe(kE,"Ignoring IndexedDB error during garbage collection: ",t):await Uo(t)}await this.mr(3e5)})}}class nD{constructor(e,t){this.gr=e,this.params=t}calculateTargetCount(e,t){return this.gr.pr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return se.resolve(fd.le);const r=new eD(t);return this.gr.forEachTarget(e,o=>r.Rr(o.sequenceNumber)).next(()=>this.gr.yr(e,o=>r.Rr(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.gr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.gr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(fe("LruGarbageCollector","Garbage collection skipped; disabled"),se.resolve(VE)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(fe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),VE):this.wr(e,t))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,t){let r,o,c,d,m,g,v;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(A=>(A>this.params.maximumSequenceNumbersToCollect?(fe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${A}`),o=this.params.maximumSequenceNumbersToCollect):o=A,d=Date.now(),this.nthSequenceNumber(e,o))).next(A=>(r=A,m=Date.now(),this.removeTargets(e,r,t))).next(A=>(c=A,g=Date.now(),this.removeOrphanedDocuments(e,r))).next(A=>(v=Date.now(),mo()<=Ue.DEBUG&&fe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-_}ms
	Determined least recently used ${o} in `+(m-d)+`ms
	Removed ${c} targets in `+(g-m)+`ms
	Removed ${A} documents in `+(v-g)+`ms
Total Duration: ${v-_}ms`),se.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:c,documentsRemoved:A})))}}function sD(s,e){return new nD(s,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iD{constructor(){this.changes=new va(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Bt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?se.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rD{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aD{constructor(e,t,r,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(r=o,this.remoteDocumentCache.getEntry(e,t))).next(o=>(r!==null&&uc(r.mutation,o,jn.empty(),Ot.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Fe()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Fe()){const o=ia();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,r).next(c=>{let d=nc();return c.forEach((m,g)=>{d=d.insert(m,g.overlayedDocument)}),d}))}getOverlayedDocuments(e,t){const r=ia();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Fe()))}populateOverlays(e,t,r){const o=[];return r.forEach(c=>{t.has(c)||o.push(c)}),this.documentOverlayCache.getOverlays(e,o).next(c=>{c.forEach((d,m)=>{t.set(d,m)})})}computeViews(e,t,r,o){let c=gi();const d=cc(),m=function(){return cc()}();return t.forEach((g,v)=>{const _=r.get(v.key);o.has(v.key)&&(_===void 0||_.mutation instanceof vr)?c=c.insert(v.key,v):_!==void 0?(d.set(v.key,_.mutation.getFieldMask()),uc(_.mutation,v,_.mutation.getFieldMask(),Ot.now())):d.set(v.key,jn.empty())}),this.recalculateAndSaveOverlays(e,c).next(g=>(g.forEach((v,_)=>d.set(v,_)),t.forEach((v,_)=>{var A;return m.set(v,new rD(_,(A=d.get(v))!==null&&A!==void 0?A:null))}),m))}recalculateAndSaveOverlays(e,t){const r=cc();let o=new dt((d,m)=>d-m),c=Fe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(d=>{for(const m of d)m.keys().forEach(g=>{const v=t.get(g);if(v===null)return;let _=r.get(g)||jn.empty();_=m.applyToLocalView(v,_),r.set(g,_);const A=(o.get(m.batchId)||Fe()).add(g);o=o.insert(m.batchId,A)})}).next(()=>{const d=[],m=o.getReverseIterator();for(;m.hasNext();){const g=m.getNext(),v=g.key,_=g.value,A=cA();_.forEach(b=>{if(!c.has(b)){const D=pA(t.get(b),r.get(b));D!==null&&A.set(b,D),c=c.add(b)}}),d.push(this.documentOverlayCache.saveOverlays(e,v,A))}return se.waitFor(d)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,o){return function(d){return ve.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):iA(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,o):this.getDocumentsMatchingCollectionQuery(e,t,r,o)}getNextDocuments(e,t,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,o).next(c=>{const d=o-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,o-c.size):se.resolve(ia());let m=_c,g=c;return d.next(v=>se.forEach(v,(_,A)=>(m<A.largestBatchId&&(m=A.largestBatchId),c.get(_)?se.resolve():this.remoteDocumentCache.getEntry(e,_).next(b=>{g=g.insert(_,b)}))).next(()=>this.populateOverlays(e,v,c)).next(()=>this.computeViews(e,g,v,Fe())).next(_=>({batchId:m,changes:lA(_)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ve(t)).next(r=>{let o=nc();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,r,o){const c=t.collectionGroup;let d=nc();return this.indexManager.getCollectionParents(e,c).next(m=>se.forEach(m,g=>{const v=function(A,b){return new zo(b,null,A.explicitOrderBy.slice(),A.filters.slice(),A.limit,A.limitType,A.startAt,A.endAt)}(t,g.child(c));return this.getDocumentsMatchingCollectionQuery(e,v,r,o).next(_=>{_.forEach((A,b)=>{d=d.insert(A,b)})})}).next(()=>d))}getDocumentsMatchingCollectionQuery(e,t,r,o){let c;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(d=>(c=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,c,o))).next(d=>{c.forEach((g,v)=>{const _=v.getKey();d.get(_)===null&&(d=d.insert(_,Bt.newInvalidDocument(_)))});let m=nc();return d.forEach((g,v)=>{const _=c.get(g);_!==void 0&&uc(_.mutation,v,jn.empty(),Ot.now()),vd(t,v)&&(m=m.insert(g,v))}),m})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oD{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,t){return se.resolve(this.kr.get(t))}saveBundleMetadata(e,t){return this.kr.set(t.id,function(o){return{id:o.id,version:o.version,createTime:Mn(o.createTime)}}(t)),se.resolve()}getNamedQuery(e,t){return se.resolve(this.qr.get(t))}saveNamedQuery(e,t){return this.qr.set(t.name,function(o){return{name:o.name,query:X1(o.bundledQuery),readTime:Mn(o.readTime)}}(t)),se.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lD{constructor(){this.overlays=new dt(ve.comparator),this.Qr=new Map}getOverlay(e,t){return se.resolve(this.overlays.get(t))}getOverlays(e,t){const r=ia();return se.forEach(t,o=>this.getOverlay(e,o).next(c=>{c!==null&&r.set(o,c)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((o,c)=>{this.St(e,t,c)}),se.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.Qr.get(r);return o!==void 0&&(o.forEach(c=>this.overlays=this.overlays.remove(c)),this.Qr.delete(r)),se.resolve()}getOverlaysForCollection(e,t,r){const o=ia(),c=t.length+1,d=new ve(t.child("")),m=this.overlays.getIteratorFrom(d);for(;m.hasNext();){const g=m.getNext().value,v=g.getKey();if(!t.isPrefixOf(v.path))break;v.path.length===c&&g.largestBatchId>r&&o.set(g.getKey(),g)}return se.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let c=new dt((v,_)=>v-_);const d=this.overlays.getIterator();for(;d.hasNext();){const v=d.getNext().value;if(v.getKey().getCollectionGroup()===t&&v.largestBatchId>r){let _=c.get(v.largestBatchId);_===null&&(_=ia(),c=c.insert(v.largestBatchId,_)),_.set(v.getKey(),v)}}const m=ia(),g=c.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach((v,_)=>m.set(v,_)),!(m.size()>=o)););return se.resolve(m)}St(e,t,r){const o=this.overlays.get(r.key);if(o!==null){const d=this.Qr.get(o.largestBatchId).delete(r.key);this.Qr.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(r.key,new I1(t,r));let c=this.Qr.get(t);c===void 0&&(c=Fe(),this.Qr.set(t,c)),this.Qr.set(t,c.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cD{constructor(){this.sessionToken=Jt.EMPTY_BYTE_STRING}getSessionToken(e){return se.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,se.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yg{constructor(){this.$r=new Mt(qt.Ur),this.Kr=new Mt(qt.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,t){const r=new qt(e,t);this.$r=this.$r.add(r),this.Kr=this.Kr.add(r)}Gr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.zr(new qt(e,t))}jr(e,t){e.forEach(r=>this.removeReference(r,t))}Hr(e){const t=new ve(new it([])),r=new qt(t,e),o=new qt(t,e+1),c=[];return this.Kr.forEachInRange([r,o],d=>{this.zr(d),c.push(d.key)}),c}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const t=new ve(new it([])),r=new qt(t,e),o=new qt(t,e+1);let c=Fe();return this.Kr.forEachInRange([r,o],d=>{c=c.add(d.key)}),c}containsKey(e){const t=new qt(e,0),r=this.$r.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class qt{constructor(e,t){this.key=e,this.Zr=t}static Ur(e,t){return ve.comparator(e.key,t.key)||Me(e.Zr,t.Zr)}static Wr(e,t){return Me(e.Zr,t.Zr)||ve.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uD{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.nr=1,this.Xr=new Mt(qt.Ur)}checkEmpty(e){return se.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,o){const c=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new x1(c,t,r,o);this.mutationQueue.push(d);for(const m of o)this.Xr=this.Xr.add(new qt(m.key,c)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return se.resolve(d)}lookupMutationBatch(e,t){return se.resolve(this.ei(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=this.ti(r),c=o<0?0:o;return se.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(this.mutationQueue.length===0?cg:this.nr-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new qt(t,0),o=new qt(t,Number.POSITIVE_INFINITY),c=[];return this.Xr.forEachInRange([r,o],d=>{const m=this.ei(d.Zr);c.push(m)}),se.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Mt(Me);return t.forEach(o=>{const c=new qt(o,0),d=new qt(o,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([c,d],m=>{r=r.add(m.Zr)})}),se.resolve(this.ni(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let c=r;ve.isDocumentKey(c)||(c=c.child(""));const d=new qt(new ve(c),0);let m=new Mt(Me);return this.Xr.forEachWhile(g=>{const v=g.key.path;return!!r.isPrefixOf(v)&&(v.length===o&&(m=m.add(g.Zr)),!0)},d),se.resolve(this.ni(m))}ni(e){const t=[];return e.forEach(r=>{const o=this.ei(r);o!==null&&t.push(o)}),t}removeMutationBatch(e,t){Ge(this.ri(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Xr;return se.forEach(t.mutations,o=>{const c=new qt(o.key,t.batchId);return r=r.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Xr=r})}sr(e){}containsKey(e,t){const r=new qt(t,0),o=this.Xr.firstAfterOrEqual(r);return se.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,se.resolve()}ri(e,t){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const t=this.ti(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hD{constructor(e){this.ii=e,this.docs=function(){return new dt(ve.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),c=o?o.size:0,d=this.ii(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:d}),this.size+=d-c,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return se.resolve(r?r.document.mutableCopy():Bt.newInvalidDocument(t))}getEntries(e,t){let r=gi();return t.forEach(o=>{const c=this.docs.get(o);r=r.insert(o,c?c.document.mutableCopy():Bt.newInvalidDocument(o))}),se.resolve(r)}getDocumentsMatchingQuery(e,t,r,o){let c=gi();const d=t.path,m=new ve(d.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(m);for(;g.hasNext();){const{key:v,value:{document:_}}=g.getNext();if(!d.isPrefixOf(v.path))break;v.path.length>d.length+1||qR(zR(_),r)<=0||(o.has(_.key)||vd(t,_))&&(c=c.insert(_.key,_.mutableCopy()))}return se.resolve(c)}getAllFromCollectionGroup(e,t,r,o){_e(9500)}si(e,t){return se.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new dD(this)}getSize(e){return se.resolve(this.size)}}class dD extends iD{constructor(e){super(),this.Br=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.Br.addEntry(e,o)):this.Br.removeEntry(r)}),se.waitFor(t)}getFromCache(e,t){return this.Br.getEntry(e,t)}getAllFromCache(e,t){return this.Br.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fD{constructor(e){this.persistence=e,this.oi=new va(t=>dg(t),fg),this.lastRemoteSnapshotVersion=be.min(),this.highestTargetId=0,this._i=0,this.ai=new yg,this.targetCount=0,this.ui=Mo.cr()}forEachTarget(e,t){return this.oi.forEach((r,o)=>t(o)),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this._i&&(this._i=t),se.resolve()}Tr(e){this.oi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ui=new Mo(t),this.highestTargetId=t),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,t){return this.Tr(t),this.targetCount+=1,se.resolve()}updateTargetData(e,t){return this.Tr(t),se.resolve()}removeTargetData(e,t){return this.oi.delete(t.target),this.ai.Hr(t.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,t,r){let o=0;const c=[];return this.oi.forEach((d,m)=>{m.sequenceNumber<=t&&r.get(m.targetId)===null&&(this.oi.delete(d),c.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),se.waitFor(c).next(()=>o)}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,t){const r=this.oi.get(t)||null;return se.resolve(r)}addMatchingKeys(e,t,r){return this.ai.Gr(t,r),se.resolve()}removeMatchingKeys(e,t,r){this.ai.jr(t,r);const o=this.persistence.referenceDelegate,c=[];return o&&t.forEach(d=>{c.push(o.markPotentiallyOrphaned(e,d))}),se.waitFor(c)}removeMatchingKeysForTargetId(e,t){return this.ai.Hr(t),se.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ai.Yr(t);return se.resolve(r)}containsKey(e,t){return se.resolve(this.ai.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DA{constructor(e,t){this.ci={},this.overlays={},this.li=new fd(0),this.hi=!1,this.hi=!0,this.Pi=new cD,this.referenceDelegate=e(this),this.Ti=new fD(this),this.indexManager=new Z1,this.remoteDocumentCache=function(o){return new hD(o)}(r=>this.referenceDelegate.Ii(r)),this.serializer=new Y1(t),this.Ei=new oD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new lD,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ci[e.toKey()];return r||(r=new uD(t,this.referenceDelegate),this.ci[e.toKey()]=r),r}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,t,r){fe("MemoryPersistence","Starting transaction:",e);const o=new mD(this.li.next());return this.referenceDelegate.di(),r(o).next(c=>this.referenceDelegate.Ai(o).next(()=>c)).toPromise().then(c=>(o.raiseOnCommittedEvent(),c))}Ri(e,t){return se.or(Object.values(this.ci).map(r=>()=>r.containsKey(e,t)))}}class mD extends HR{constructor(e){super(),this.currentSequenceNumber=e}}class _g{constructor(e){this.persistence=e,this.Vi=new yg,this.mi=null}static fi(e){return new _g(e)}get gi(){if(this.mi)return this.mi;throw _e(60996)}addReference(e,t,r){return this.Vi.addReference(r,t),this.gi.delete(r.toString()),se.resolve()}removeReference(e,t,r){return this.Vi.removeReference(r,t),this.gi.add(r.toString()),se.resolve()}markPotentiallyOrphaned(e,t){return this.gi.add(t.toString()),se.resolve()}removeTarget(e,t){this.Vi.Hr(t.targetId).forEach(o=>this.gi.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(c=>this.gi.add(c.toString()))}).next(()=>r.removeTargetData(e,t))}di(){this.mi=new Set}Ai(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.gi,r=>{const o=ve.fromPath(r);return this.pi(e,o).next(c=>{c||t.removeEntry(o,be.min())})}).next(()=>(this.mi=null,t.apply(e)))}updateLimboDocument(e,t){return this.pi(e,t).next(r=>{r?this.gi.delete(t.toString()):this.gi.add(t.toString())})}Ii(e){return 0}pi(e,t){return se.or([()=>se.resolve(this.Vi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ri(e,t)])}}class Wh{constructor(e,t){this.persistence=e,this.yi=new va(r=>KR(r.path),(r,o)=>r.isEqual(o)),this.garbageCollector=sD(this,t)}static fi(e,t){return new Wh(e,t)}di(){}Ai(e){return se.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}pr(e){const t=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}br(e){let t=0;return this.yr(e,r=>{t++}).next(()=>t)}yr(e,t){return se.forEach(this.yi,(r,o)=>this.Dr(e,r,o).next(c=>c?se.resolve():t(o)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const o=this.persistence.getRemoteDocumentCache(),c=o.newChangeBuffer();return o.si(e,d=>this.Dr(e,d,t).next(m=>{m||(r++,c.removeEntry(d,be.min()))})).next(()=>c.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.yi.set(t,e.currentSequenceNumber),se.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.yi.set(r,e.currentSequenceNumber),se.resolve()}removeReference(e,t,r){return this.yi.set(r,e.currentSequenceNumber),se.resolve()}updateLimboDocument(e,t){return this.yi.set(t,e.currentSequenceNumber),se.resolve()}Ii(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Rh(e.data.value)),t}Dr(e,t,r){return se.or([()=>this.persistence.Ri(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.yi.get(t);return se.resolve(o!==void 0&&o>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tg{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.ds=r,this.As=o}static Rs(e,t){let r=Fe(),o=Fe();for(const c of t.docChanges)switch(c.type){case 0:r=r.add(c.doc.key);break;case 1:o=o.add(c.doc.key)}return new Tg(e,t.fromCache,r,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pD{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gD{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return hx()?8:GR(un())>0?6:4}()}initialize(e,t){this.ys=e,this.indexManager=t,this.Vs=!0}getDocumentsMatchingQuery(e,t,r,o){const c={result:null};return this.ws(e,t).next(d=>{c.result=d}).next(()=>{if(!c.result)return this.bs(e,t,o,r).next(d=>{c.result=d})}).next(()=>{if(c.result)return;const d=new pD;return this.Ss(e,t,d).next(m=>{if(c.result=m,this.fs)return this.Ds(e,t,d,m.size)})}).next(()=>c.result)}Ds(e,t,r,o){return r.documentReadCount<this.gs?(mo()<=Ue.DEBUG&&fe("QueryEngine","SDK will not create cache indexes for query:",po(t),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),se.resolve()):(mo()<=Ue.DEBUG&&fe("QueryEngine","Query:",po(t),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.ps*o?(mo()<=Ue.DEBUG&&fe("QueryEngine","The SDK decides to create cache indexes for query:",po(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ds(t))):se.resolve())}ws(e,t){if(SE(t))return se.resolve(null);let r=Ds(t);return this.indexManager.getIndexType(e,r).next(o=>o===0?null:(t.limit!==null&&o===1&&(t=Rp(t,null,"F"),r=Ds(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(c=>{const d=Fe(...c);return this.ys.getDocuments(e,d).next(m=>this.indexManager.getMinOffset(e,r).next(g=>{const v=this.vs(t,m);return this.Cs(t,v,d,g.readTime)?this.ws(e,Rp(t,null,"F")):this.Fs(e,v,t,g)}))})))}bs(e,t,r,o){return SE(t)||o.isEqual(be.min())?se.resolve(null):this.ys.getDocuments(e,r).next(c=>{const d=this.vs(t,c);return this.Cs(t,d,r,o)?se.resolve(null):(mo()<=Ue.DEBUG&&fe("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),po(t)),this.Fs(e,d,t,FR(o,_c)).next(m=>m))})}vs(e,t){let r=new Mt(aA(e));return t.forEach((o,c)=>{vd(e,c)&&(r=r.add(c))}),r}Cs(e,t,r,o){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const c=e.limitType==="F"?t.last():t.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(o)>0)}Ss(e,t,r){return mo()<=Ue.DEBUG&&fe("QueryEngine","Using full collection scan to execute query:",po(t)),this.ys.getDocumentsMatchingQuery(e,t,ar.min(),r)}Fs(e,t,r,o){return this.ys.getDocumentsMatchingQuery(e,r,o).next(c=>(t.forEach(d=>{c=c.insert(d.key,d)}),c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eg="LocalStore",vD=3e8;class yD{constructor(e,t,r,o){this.persistence=e,this.Ms=t,this.serializer=o,this.xs=new dt(Me),this.Os=new va(c=>dg(c),fg),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(r)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new aD(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.xs))}}function _D(s,e,t,r){return new yD(s,e,t,r)}async function jA(s,e){const t=Ce(s);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.mutationQueue.getAllMutationBatches(r).next(c=>(o=c,t.Ls(e),t.mutationQueue.getAllMutationBatches(r))).next(c=>{const d=[],m=[];let g=Fe();for(const v of o){d.push(v.batchId);for(const _ of v.mutations)g=g.add(_.key)}for(const v of c){m.push(v.batchId);for(const _ of v.mutations)g=g.add(_.key)}return t.localDocuments.getDocuments(r,g).next(v=>({ks:v,removedBatchIds:d,addedBatchIds:m}))})})}function TD(s,e){const t=Ce(s);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),c=t.Bs.newChangeBuffer({trackRemovals:!0});return function(m,g,v,_){const A=v.batch,b=A.keys();let D=se.resolve();return b.forEach(C=>{D=D.next(()=>_.getEntry(g,C)).next(F=>{const w=v.docVersions.get(C);Ge(w!==null,48541),F.version.compareTo(w)<0&&(A.applyToRemoteDocument(F,v),F.isValidDocument()&&(F.setReadTime(v.commitVersion),_.addEntry(F)))})}),D.next(()=>m.mutationQueue.removeMutationBatch(g,A))}(t,r,e,c).next(()=>c.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(m){let g=Fe();for(let v=0;v<m.mutationResults.length;++v)m.mutationResults[v].transformResults.length>0&&(g=g.add(m.batch.mutations[v].key));return g}(e))).next(()=>t.localDocuments.getDocuments(r,o))})}function OA(s){const e=Ce(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ti.getLastRemoteSnapshotVersion(t))}function ED(s,e){const t=Ce(s),r=e.snapshotVersion;let o=t.xs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",c=>{const d=t.Bs.newChangeBuffer({trackRemovals:!0});o=t.xs;const m=[];e.targetChanges.forEach((_,A)=>{const b=o.get(A);if(!b)return;m.push(t.Ti.removeMatchingKeys(c,_.removedDocuments,A).next(()=>t.Ti.addMatchingKeys(c,_.addedDocuments,A)));let D=b.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(A)!==null?D=D.withResumeToken(Jt.EMPTY_BYTE_STRING,be.min()).withLastLimboFreeSnapshotVersion(be.min()):_.resumeToken.approximateByteSize()>0&&(D=D.withResumeToken(_.resumeToken,r)),o=o.insert(A,D),function(F,w,G){return F.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-F.snapshotVersion.toMicroseconds()>=vD?!0:G.addedDocuments.size+G.modifiedDocuments.size+G.removedDocuments.size>0}(b,D,_)&&m.push(t.Ti.updateTargetData(c,D))});let g=gi(),v=Fe();if(e.documentUpdates.forEach(_=>{e.resolvedLimboDocuments.has(_)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(c,_))}),m.push(bD(c,d,e.documentUpdates).next(_=>{g=_.qs,v=_.Qs})),!r.isEqual(be.min())){const _=t.Ti.getLastRemoteSnapshotVersion(c).next(A=>t.Ti.setTargetsMetadata(c,c.currentSequenceNumber,r));m.push(_)}return se.waitFor(m).next(()=>d.apply(c)).next(()=>t.localDocuments.getLocalViewOfDocuments(c,g,v)).next(()=>g)}).then(c=>(t.xs=o,c))}function bD(s,e,t){let r=Fe(),o=Fe();return t.forEach(c=>r=r.add(c)),e.getEntries(s,r).next(c=>{let d=gi();return t.forEach((m,g)=>{const v=c.get(m);g.isFoundDocument()!==v.isFoundDocument()&&(o=o.add(m)),g.isNoDocument()&&g.version.isEqual(be.min())?(e.removeEntry(m,g.readTime),d=d.insert(m,g)):!v.isValidDocument()||g.version.compareTo(v.version)>0||g.version.compareTo(v.version)===0&&v.hasPendingWrites?(e.addEntry(g),d=d.insert(m,g)):fe(Eg,"Ignoring outdated watch update for ",m,". Current version:",v.version," Watch version:",g.version)}),{qs:d,Qs:o}})}function AD(s,e){const t=Ce(s);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=cg),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function ND(s,e){const t=Ce(s);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.Ti.getTargetData(r,e).next(c=>c?(o=c,se.resolve(o)):t.Ti.allocateTargetId(r).next(d=>(o=new er(e,d,"TargetPurposeListen",r.currentSequenceNumber),t.Ti.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.xs.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.xs=t.xs.insert(r.targetId,r),t.Os.set(e,r.targetId)),r})}async function Mp(s,e,t){const r=Ce(s),o=r.xs.get(e),c=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",c,d=>r.persistence.referenceDelegate.removeTarget(d,o))}catch(d){if(!Fo(d))throw d;fe(Eg,`Failed to update sequence numbers for target ${e}: ${d}`)}r.xs=r.xs.remove(e),r.Os.delete(o.target)}function LE(s,e,t){const r=Ce(s);let o=be.min(),c=Fe();return r.persistence.runTransaction("Execute query","readwrite",d=>function(g,v,_){const A=Ce(g),b=A.Os.get(_);return b!==void 0?se.resolve(A.xs.get(b)):A.Ti.getTargetData(v,_)}(r,d,Ds(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(d,m.targetId).next(g=>{c=g})}).next(()=>r.Ms.getDocumentsMatchingQuery(d,e,t?o:be.min(),t?c:Fe())).next(m=>(SD(r,d1(e),m),{documents:m,$s:c})))}function SD(s,e,t){let r=s.Ns.get(e)||be.min();t.forEach((o,c)=>{c.readTime.compareTo(r)>0&&(r=c.readTime)}),s.Ns.set(e,r)}class UE{constructor(){this.activeTargetIds=y1()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class wD{constructor(){this.xo=new UE,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,t,r){this.Oo[e]=t}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new UE,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xD{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FE="ConnectivityMonitor";class zE{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){fe(FE,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){fe(FE,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Eh=null;function Vp(){return Eh===null?Eh=function(){return 268435456+Math.round(2147483648*Math.random())}():Eh++,"0x"+Eh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tp="RestConnection",ID={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class CD{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Ko=t+"://"+e.host,this.Wo=`projects/${r}/databases/${o}`,this.Go=this.databaseId.database===$h?`project_id=${r}`:`project_id=${r}&database_id=${o}`}zo(e,t,r,o,c){const d=Vp(),m=this.jo(e,t.toUriEncodedString());fe(tp,`Sending RPC '${e}' ${d}:`,m,r);const g={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(g,o,c);const{host:v}=new URL(m),_=pa(v);return this.Jo(e,m,g,r,_).then(A=>(fe(tp,`Received RPC '${e}' ${d}: `,A),A),A=>{throw Ro(tp,`RPC '${e}' ${d} failed with error: `,A,"url: ",m,"request:",r),A})}Yo(e,t,r,o,c,d){return this.zo(e,t,r,o,c)}Ho(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Lo}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,c)=>e[c]=o),r&&r.headers.forEach((o,c)=>e[c]=o)}jo(e,t){const r=ID[e];return`${this.Ko}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RD{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rn="WebChannelConnection";class DD extends CD{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,o,c){const d=Vp();return new Promise((m,g)=>{const v=new Ob;v.setWithCredentials(!0),v.listenOnce(Mb.COMPLETE,()=>{try{switch(v.getLastErrorCode()){case Ch.NO_ERROR:const A=v.getResponseJson();fe(rn,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(A)),m(A);break;case Ch.TIMEOUT:fe(rn,`RPC '${e}' ${d} timed out`),g(new de(J.DEADLINE_EXCEEDED,"Request time out"));break;case Ch.HTTP_ERROR:const b=v.getStatus();if(fe(rn,`RPC '${e}' ${d} failed with status:`,b,"response text:",v.getResponseText()),b>0){let D=v.getResponseJson();Array.isArray(D)&&(D=D[0]);const C=D?.error;if(C&&C.status&&C.message){const F=function(G){const te=G.toLowerCase().replace(/_/g,"-");return Object.values(J).indexOf(te)>=0?te:J.UNKNOWN}(C.status);g(new de(F,C.message))}else g(new de(J.UNKNOWN,"Server responded with status "+v.getStatus()))}else g(new de(J.UNAVAILABLE,"Connection failed."));break;default:_e(9055,{h_:e,streamId:d,P_:v.getLastErrorCode(),T_:v.getLastError()})}}finally{fe(rn,`RPC '${e}' ${d} completed.`)}});const _=JSON.stringify(o);fe(rn,`RPC '${e}' ${d} sending request:`,o),v.send(t,"POST",_,r,15)})}I_(e,t,r){const o=Vp(),c=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=Pb(),m=kb(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;v!==void 0&&(g.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(g.useFetchStreams=!0),this.Ho(g.initMessageHeaders,t,r),g.encodeInitMessageHeaders=!0;const _=c.join("");fe(rn,`Creating RPC '${e}' stream ${o}: ${_}`,g);const A=d.createWebChannel(_,g);this.E_(A);let b=!1,D=!1;const C=new RD({Zo:w=>{D?fe(rn,`Not sending because RPC '${e}' stream ${o} is closed:`,w):(b||(fe(rn,`Opening RPC '${e}' stream ${o} transport.`),A.open(),b=!0),fe(rn,`RPC '${e}' stream ${o} sending:`,w),A.send(w))},Xo:()=>A.close()}),F=(w,G,te)=>{w.listen(G,ee=>{try{te(ee)}catch(Y){setTimeout(()=>{throw Y},0)}})};return F(A,tc.EventType.OPEN,()=>{D||(fe(rn,`RPC '${e}' stream ${o} transport opened.`),C.__())}),F(A,tc.EventType.CLOSE,()=>{D||(D=!0,fe(rn,`RPC '${e}' stream ${o} transport closed`),C.u_(),this.d_(A))}),F(A,tc.EventType.ERROR,w=>{D||(D=!0,Ro(rn,`RPC '${e}' stream ${o} transport errored. Name:`,w.name,"Message:",w.message),C.u_(new de(J.UNAVAILABLE,"The operation could not be completed")))}),F(A,tc.EventType.MESSAGE,w=>{var G;if(!D){const te=w.data[0];Ge(!!te,16349);const ee=te,Y=ee?.error||((G=ee[0])===null||G===void 0?void 0:G.error);if(Y){fe(rn,`RPC '${e}' stream ${o} received error:`,Y);const U=Y.status;let he=function(I){const M=St[I];if(M!==void 0)return _A(M)}(U),k=Y.message;he===void 0&&(he=J.INTERNAL,k="Unknown error status: "+U+" with message "+Y.message),D=!0,C.u_(new de(he,k)),A.close()}else fe(rn,`RPC '${e}' stream ${o} received:`,te),C.c_(te)}}),F(m,Vb.STAT_EVENT,w=>{w.stat===Ap.PROXY?fe(rn,`RPC '${e}' stream ${o} detected buffering proxy`):w.stat===Ap.NOPROXY&&fe(rn,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{C.a_()},0),C}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(t=>t===e)}}function np(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bd(s){return new V1(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bg{constructor(e,t,r=1e3,o=1.5,c=6e4){this.xi=e,this.timerId=t,this.A_=r,this.R_=o,this.V_=c,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();const t=Math.floor(this.m_+this.w_()),r=Math.max(0,Date.now()-this.g_),o=Math.max(0,t-r);o>0&&fe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.m_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,o,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qE="PersistentStream";class MA{constructor(e,t,r,o,c,d,m,g){this.xi=e,this.S_=r,this.D_=o,this.connection=c,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=m,this.listener=g,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new bg(e,t)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(e,t){this.U_(),this.K_(),this.x_.cancel(),this.v_++,e!==4?this.x_.reset():t&&t.code===J.RESOURCE_EXHAUSTED?(pi(t.toString()),pi("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):t&&t.code===J.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(t)}W_(){}auth(){this.state=1;const e=this.G_(this.v_),t=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.v_===t&&this.z_(r,o)},r=>{e(()=>{const o=new de(J.UNKNOWN,"Fetching auth token failed: "+r.message);return this.j_(o)})})}z_(e,t){const r=this.G_(this.v_);this.stream=this.H_(e,t),this.stream.e_(()=>{r(()=>this.listener.e_())}),this.stream.n_(()=>{r(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(o=>{r(()=>this.j_(o))}),this.stream.onMessage(o=>{r(()=>++this.M_==1?this.J_(o):this.onNext(o))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(e){return fe(qE,`close with error: ${e}`),this.stream=null,this.close(4,e)}G_(e){return t=>{this.xi.enqueueAndForget(()=>this.v_===e?t():(fe(qE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class jD extends MA{constructor(e,t,r,o,c,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,d),this.serializer=c}H_(e,t){return this.connection.I_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();const t=U1(this.serializer,e),r=function(c){if(!("targetChange"in c))return be.min();const d=c.targetChange;return d.targetIds&&d.targetIds.length?be.min():d.readTime?Mn(d.readTime):be.min()}(e);return this.listener.Y_(t,r)}Z_(e){const t={};t.database=Op(this.serializer),t.addTarget=function(c,d){let m;const g=d.target;if(m=Ip(g)?{documents:z1(c,g)}:{query:q1(c,g).gt},m.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){m.resumeToken=bA(c,d.resumeToken);const v=Dp(c,d.expectedCount);v!==null&&(m.expectedCount=v)}else if(d.snapshotVersion.compareTo(be.min())>0){m.readTime=Xh(c,d.snapshotVersion.toTimestamp());const v=Dp(c,d.expectedCount);v!==null&&(m.expectedCount=v)}return m}(this.serializer,e);const r=H1(this.serializer,e);r&&(t.labels=r),this.Q_(t)}X_(e){const t={};t.database=Op(this.serializer),t.removeTarget=e,this.Q_(t)}}class OD extends MA{constructor(e,t,r,o,c,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,d),this.serializer=c}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,t){return this.connection.I_("Write",e,t)}J_(e){return Ge(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ge(!e.writeResults||e.writeResults.length===0,55816),this.listener.na()}onNext(e){Ge(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();const t=F1(e.writeResults,e.commitTime),r=Mn(e.commitTime);return this.listener.ra(r,t)}ia(){const e={};e.database=Op(this.serializer),this.Q_(e)}ta(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>wA(this.serializer,r))};this.Q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MD{}class VD extends MD{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=o,this.sa=!1}oa(){if(this.sa)throw new de(J.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,t,r,o){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,d])=>this.connection.zo(e,jp(t,r),o,c,d)).catch(c=>{throw c.name==="FirebaseError"?(c.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new de(J.UNKNOWN,c.toString())})}Yo(e,t,r,o,c){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,m])=>this.connection.Yo(e,jp(t,r),o,d,m,c)).catch(d=>{throw d.name==="FirebaseError"?(d.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new de(J.UNKNOWN,d.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class kD{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.la("Offline")))}set(e){this.Ta(),this._a=0,e==="Online"&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(pi(t),this.ua=!1):fe("OnlineStateTracker",t)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ha="RemoteStore";class PD{constructor(e,t,r,o,c){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=c,this.Ra.No(d=>{r.enqueueAndForget(async()=>{ya(this)&&(fe(ha,"Restarting streams for network reachability change."),await async function(g){const v=Ce(g);v.da.add(4),await Pc(v),v.Va.set("Unknown"),v.da.delete(4),await Ad(v)}(this))})}),this.Va=new kD(r,o)}}async function Ad(s){if(ya(s))for(const e of s.Aa)await e(!0)}async function Pc(s){for(const e of s.Aa)await e(!1)}function VA(s,e){const t=Ce(s);t.Ea.has(e.targetId)||(t.Ea.set(e.targetId,e),wg(t)?Sg(t):qo(t).N_()&&Ng(t,e))}function Ag(s,e){const t=Ce(s),r=qo(t);t.Ea.delete(e),r.N_()&&kA(t,e),t.Ea.size===0&&(r.N_()?r.k_():ya(t)&&t.Va.set("Unknown"))}function Ng(s,e){if(s.ma.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(be.min())>0){const t=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}qo(s).Z_(e)}function kA(s,e){s.ma.Ke(e),qo(s).X_(e)}function Sg(s){s.ma=new D1({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>s.Ea.get(e)||null,Pt:()=>s.datastore.serializer.databaseId}),qo(s).start(),s.Va.ca()}function wg(s){return ya(s)&&!qo(s).O_()&&s.Ea.size>0}function ya(s){return Ce(s).da.size===0}function PA(s){s.ma=void 0}async function LD(s){s.Va.set("Online")}async function UD(s){s.Ea.forEach((e,t)=>{Ng(s,e)})}async function FD(s,e){PA(s),wg(s)?(s.Va.Pa(e),Sg(s)):s.Va.set("Unknown")}async function zD(s,e,t){if(s.Va.set("Online"),e instanceof EA&&e.state===2&&e.cause)try{await async function(o,c){const d=c.cause;for(const m of c.targetIds)o.Ea.has(m)&&(await o.remoteSyncer.rejectListen(m,d),o.Ea.delete(m),o.ma.removeTarget(m))}(s,e)}catch(r){fe(ha,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Jh(s,r)}else if(e instanceof Oh?s.ma.Xe(e):e instanceof TA?s.ma.ot(e):s.ma.nt(e),!t.isEqual(be.min()))try{const r=await OA(s.localStore);t.compareTo(r)>=0&&await function(c,d){const m=c.ma.It(d);return m.targetChanges.forEach((g,v)=>{if(g.resumeToken.approximateByteSize()>0){const _=c.Ea.get(v);_&&c.Ea.set(v,_.withResumeToken(g.resumeToken,d))}}),m.targetMismatches.forEach((g,v)=>{const _=c.Ea.get(g);if(!_)return;c.Ea.set(g,_.withResumeToken(Jt.EMPTY_BYTE_STRING,_.snapshotVersion)),kA(c,g);const A=new er(_.target,g,v,_.sequenceNumber);Ng(c,A)}),c.remoteSyncer.applyRemoteEvent(m)}(s,t)}catch(r){fe(ha,"Failed to raise snapshot:",r),await Jh(s,r)}}async function Jh(s,e,t){if(!Fo(e))throw e;s.da.add(1),await Pc(s),s.Va.set("Offline"),t||(t=()=>OA(s.localStore)),s.asyncQueue.enqueueRetryable(async()=>{fe(ha,"Retrying IndexedDB access"),await t(),s.da.delete(1),await Ad(s)})}function LA(s,e){return e().catch(t=>Jh(s,t,e))}async function Nd(s){const e=Ce(s),t=ur(e);let r=e.Ia.length>0?e.Ia[e.Ia.length-1].batchId:cg;for(;qD(e);)try{const o=await AD(e.localStore,r);if(o===null){e.Ia.length===0&&t.k_();break}r=o.batchId,BD(e,o)}catch(o){await Jh(e,o)}UA(e)&&FA(e)}function qD(s){return ya(s)&&s.Ia.length<10}function BD(s,e){s.Ia.push(e);const t=ur(s);t.N_()&&t.ea&&t.ta(e.mutations)}function UA(s){return ya(s)&&!ur(s).O_()&&s.Ia.length>0}function FA(s){ur(s).start()}async function HD(s){ur(s).ia()}async function GD(s){const e=ur(s);for(const t of s.Ia)e.ta(t.mutations)}async function $D(s,e,t){const r=s.Ia.shift(),o=pg.from(r,e,t);await LA(s,()=>s.remoteSyncer.applySuccessfulWrite(o)),await Nd(s)}async function KD(s,e){e&&ur(s).ea&&await async function(r,o){if(function(d){return yA(d)&&d!==J.ABORTED}(o.code)){const c=r.Ia.shift();ur(r).L_(),await LA(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,o)),await Nd(r)}}(s,e),UA(s)&&FA(s)}async function BE(s,e){const t=Ce(s);t.asyncQueue.verifyOperationInProgress(),fe(ha,"RemoteStore received new credentials");const r=ya(t);t.da.add(3),await Pc(t),r&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.da.delete(3),await Ad(t)}async function QD(s,e){const t=Ce(s);e?(t.da.delete(2),await Ad(t)):e||(t.da.add(2),await Pc(t),t.Va.set("Unknown"))}function qo(s){return s.fa||(s.fa=function(t,r,o){const c=Ce(t);return c.oa(),new jD(r,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)}(s.datastore,s.asyncQueue,{e_:LD.bind(null,s),n_:UD.bind(null,s),i_:FD.bind(null,s),Y_:zD.bind(null,s)}),s.Aa.push(async e=>{e?(s.fa.L_(),wg(s)?Sg(s):s.Va.set("Unknown")):(await s.fa.stop(),PA(s))})),s.fa}function ur(s){return s.ga||(s.ga=function(t,r,o){const c=Ce(t);return c.oa(),new OD(r,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)}(s.datastore,s.asyncQueue,{e_:()=>Promise.resolve(),n_:HD.bind(null,s),i_:KD.bind(null,s),na:GD.bind(null,s),ra:$D.bind(null,s)}),s.Aa.push(async e=>{e?(s.ga.L_(),await Nd(s)):(await s.ga.stop(),s.Ia.length>0&&(fe(ha,`Stopping write stream with ${s.Ia.length} pending writes`),s.Ia=[]))})),s.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xg{constructor(e,t,r,o,c){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=c,this.deferred=new Rs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,o,c){const d=Date.now()+r,m=new xg(e,t,d,o,c);return m.start(r),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new de(J.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ig(s,e){if(pi("AsyncQueue",`${e}: ${s}`),Fo(s))return new de(J.UNAVAILABLE,`${e}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{static emptySet(e){return new So(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||ve.comparator(t.key,r.key):(t,r)=>ve.comparator(t.key,r.key),this.keyedMap=nc(),this.sortedSet=new dt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof So)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,c=r.getNext().key;if(!o.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new So;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HE{constructor(){this.pa=new dt(ve.comparator)}track(e){const t=e.doc.key,r=this.pa.get(t);r?e.type!==0&&r.type===3?this.pa=this.pa.insert(t,e):e.type===3&&r.type!==1?this.pa=this.pa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.pa=this.pa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.pa=this.pa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.pa=this.pa.remove(t):e.type===1&&r.type===2?this.pa=this.pa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.pa=this.pa.insert(t,{type:2,doc:e.doc}):_e(63341,{Vt:e,ya:r}):this.pa=this.pa.insert(t,e)}wa(){const e=[];return this.pa.inorderTraversal((t,r)=>{e.push(r)}),e}}class Vo{constructor(e,t,r,o,c,d,m,g,v){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=c,this.fromCache=d,this.syncStateChanged=m,this.excludesMetadataChanges=g,this.hasCachedResults=v}static fromInitialDocuments(e,t,r,o,c){const d=[];return t.forEach(m=>{d.push({type:0,doc:m})}),new Vo(e,t,So.emptySet(t),d,r,o,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&gd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YD{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}}class XD{constructor(){this.queries=GE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const o=Ce(t),c=o.queries;o.queries=GE(),c.forEach((d,m)=>{for(const g of m.Sa)g.onError(r)})})(this,new de(J.ABORTED,"Firestore shutting down"))}}function GE(){return new va(s=>rA(s),gd)}async function Cg(s,e){const t=Ce(s);let r=3;const o=e.query;let c=t.queries.get(o);c?!c.Da()&&e.va()&&(r=2):(c=new YD,r=e.va()?0:1);try{switch(r){case 0:c.ba=await t.onListen(o,!0);break;case 1:c.ba=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(d){const m=Ig(d,`Initialization of query '${po(e.query)}' failed`);return void e.onError(m)}t.queries.set(o,c),c.Sa.push(e),e.Fa(t.onlineState),c.ba&&e.Ma(c.ba)&&Dg(t)}async function Rg(s,e){const t=Ce(s),r=e.query;let o=3;const c=t.queries.get(r);if(c){const d=c.Sa.indexOf(e);d>=0&&(c.Sa.splice(d,1),c.Sa.length===0?o=e.va()?0:1:!c.Da()&&e.va()&&(o=2))}switch(o){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function ZD(s,e){const t=Ce(s);let r=!1;for(const o of e){const c=o.query,d=t.queries.get(c);if(d){for(const m of d.Sa)m.Ma(o)&&(r=!0);d.ba=o}}r&&Dg(t)}function WD(s,e,t){const r=Ce(s),o=r.queries.get(e);if(o)for(const c of o.Sa)c.onError(t);r.queries.delete(e)}function Dg(s){s.Ca.forEach(e=>{e.next()})}var kp,$E;($E=kp||(kp={})).xa="default",$E.Cache="cache";class jg{constructor(e,t,r){this.query=e,this.Oa=t,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=r||{}}Ma(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)o.type!==3&&r.push(o);e=new Vo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Na?this.La(e)&&(this.Oa.next(e),t=!0):this.ka(e,this.onlineState)&&(this.qa(e),t=!0),this.Ba=e,t}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let t=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),t=!0),t}ka(e,t){if(!e.fromCache||!this.va())return!0;const r=t!=="Offline";return(!this.options.Qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}La(e){if(e.docChanges.length>0)return!0;const t=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}qa(e){e=Vo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==kp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zA{constructor(e){this.key=e}}class qA{constructor(e){this.key=e}}class JD{constructor(e,t){this.query=e,this.Ha=t,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Fe(),this.mutatedKeys=Fe(),this.Za=aA(e),this.Xa=new So(this.Za)}get eu(){return this.Ha}tu(e,t){const r=t?t.nu:new HE,o=t?t.Xa:this.Xa;let c=t?t.mutatedKeys:this.mutatedKeys,d=o,m=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,v=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((_,A)=>{const b=o.get(_),D=vd(this.query,A)?A:null,C=!!b&&this.mutatedKeys.has(b.key),F=!!D&&(D.hasLocalMutations||this.mutatedKeys.has(D.key)&&D.hasCommittedMutations);let w=!1;b&&D?b.data.isEqual(D.data)?C!==F&&(r.track({type:3,doc:D}),w=!0):this.ru(b,D)||(r.track({type:2,doc:D}),w=!0,(g&&this.Za(D,g)>0||v&&this.Za(D,v)<0)&&(m=!0)):!b&&D?(r.track({type:0,doc:D}),w=!0):b&&!D&&(r.track({type:1,doc:b}),w=!0,(g||v)&&(m=!0)),w&&(D?(d=d.add(D),c=F?c.add(_):c.delete(_)):(d=d.delete(_),c=c.delete(_)))}),this.query.limit!==null)for(;d.size>this.query.limit;){const _=this.query.limitType==="F"?d.last():d.first();d=d.delete(_.key),c=c.delete(_.key),r.track({type:1,doc:_})}return{Xa:d,nu:r,Cs:m,mutatedKeys:c}}ru(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,o){const c=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;const d=e.nu.wa();d.sort((_,A)=>function(D,C){const F=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return _e(20277,{Vt:w})}};return F(D)-F(C)}(_.type,A.type)||this.Za(_.doc,A.doc)),this.iu(r),o=o!=null&&o;const m=t&&!o?this.su():[],g=this.Ya.size===0&&this.current&&!o?1:0,v=g!==this.Ja;return this.Ja=g,d.length!==0||v?{snapshot:new Vo(this.query,e.Xa,c,d,e.mutatedKeys,g===0,v,!1,!!r&&r.resumeToken.approximateByteSize()>0),ou:m}:{ou:m}}Fa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new HE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}su(){if(!this.current)return[];const e=this.Ya;this.Ya=Fe(),this.Xa.forEach(r=>{this._u(r.key)&&(this.Ya=this.Ya.add(r.key))});const t=[];return e.forEach(r=>{this.Ya.has(r)||t.push(new qA(r))}),this.Ya.forEach(r=>{e.has(r)||t.push(new zA(r))}),t}au(e){this.Ha=e.$s,this.Ya=Fe();const t=this.tu(e.documents);return this.applyChanges(t,!0)}uu(){return Vo.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const Og="SyncEngine";class ej{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class tj{constructor(e){this.key=e,this.cu=!1}}class nj{constructor(e,t,r,o,c,d){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=c,this.maxConcurrentLimboResolutions=d,this.lu={},this.hu=new va(m=>rA(m),gd),this.Pu=new Map,this.Tu=new Set,this.Iu=new dt(ve.comparator),this.Eu=new Map,this.du=new yg,this.Au={},this.Ru=new Map,this.Vu=Mo.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function sj(s,e,t=!0){const r=QA(s);let o;const c=r.hu.get(e);return c?(r.sharedClientState.addLocalQueryTarget(c.targetId),o=c.view.uu()):o=await BA(r,e,t,!0),o}async function ij(s,e){const t=QA(s);await BA(t,e,!0,!1)}async function BA(s,e,t,r){const o=await ND(s.localStore,Ds(e)),c=o.targetId,d=s.sharedClientState.addLocalQueryTarget(c,t);let m;return r&&(m=await rj(s,e,c,d==="current",o.resumeToken)),s.isPrimaryClient&&t&&VA(s.remoteStore,o),m}async function rj(s,e,t,r,o){s.fu=(A,b,D)=>async function(F,w,G,te){let ee=w.view.tu(G);ee.Cs&&(ee=await LE(F.localStore,w.query,!1).then(({documents:k})=>w.view.tu(k,ee)));const Y=te&&te.targetChanges.get(w.targetId),U=te&&te.targetMismatches.get(w.targetId)!=null,he=w.view.applyChanges(ee,F.isPrimaryClient,Y,U);return QE(F,w.targetId,he.ou),he.snapshot}(s,A,b,D);const c=await LE(s.localStore,e,!0),d=new JD(e,c.$s),m=d.tu(c.documents),g=kc.createSynthesizedTargetChangeForCurrentChange(t,r&&s.onlineState!=="Offline",o),v=d.applyChanges(m,s.isPrimaryClient,g);QE(s,t,v.ou);const _=new ej(e,t,d);return s.hu.set(e,_),s.Pu.has(t)?s.Pu.get(t).push(e):s.Pu.set(t,[e]),v.snapshot}async function aj(s,e,t){const r=Ce(s),o=r.hu.get(e),c=r.Pu.get(o.targetId);if(c.length>1)return r.Pu.set(o.targetId,c.filter(d=>!gd(d,e))),void r.hu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await Mp(r.localStore,o.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(o.targetId),t&&Ag(r.remoteStore,o.targetId),Pp(r,o.targetId)}).catch(Uo)):(Pp(r,o.targetId),await Mp(r.localStore,o.targetId,!0))}async function oj(s,e){const t=Ce(s),r=t.hu.get(e),o=t.Pu.get(r.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Ag(t.remoteStore,r.targetId))}async function lj(s,e,t){const r=pj(s);try{const o=await function(d,m){const g=Ce(d),v=Ot.now(),_=m.reduce((D,C)=>D.add(C.key),Fe());let A,b;return g.persistence.runTransaction("Locally write mutations","readwrite",D=>{let C=gi(),F=Fe();return g.Bs.getEntries(D,_).next(w=>{C=w,C.forEach((G,te)=>{te.isValidDocument()||(F=F.add(G))})}).next(()=>g.localDocuments.getOverlayedDocuments(D,C)).next(w=>{A=w;const G=[];for(const te of m){const ee=w1(te,A.get(te.key).overlayedDocument);ee!=null&&G.push(new vr(te.key,ee,Zb(ee.value.mapValue),Zt.exists(!0)))}return g.mutationQueue.addMutationBatch(D,v,G,m)}).next(w=>{b=w;const G=w.applyToLocalDocumentSet(A,F);return g.documentOverlayCache.saveOverlays(D,w.batchId,G)})}).then(()=>({batchId:b.batchId,changes:lA(A)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(d,m,g){let v=d.Au[d.currentUser.toKey()];v||(v=new dt(Me)),v=v.insert(m,g),d.Au[d.currentUser.toKey()]=v}(r,o.batchId,t),await Lc(r,o.changes),await Nd(r.remoteStore)}catch(o){const c=Ig(o,"Failed to persist write");t.reject(c)}}async function HA(s,e){const t=Ce(s);try{const r=await ED(t.localStore,e);e.targetChanges.forEach((o,c)=>{const d=t.Eu.get(c);d&&(Ge(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?d.cu=!0:o.modifiedDocuments.size>0?Ge(d.cu,14607):o.removedDocuments.size>0&&(Ge(d.cu,42227),d.cu=!1))}),await Lc(t,r,e)}catch(r){await Uo(r)}}function KE(s,e,t){const r=Ce(s);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const o=[];r.hu.forEach((c,d)=>{const m=d.view.Fa(e);m.snapshot&&o.push(m.snapshot)}),function(d,m){const g=Ce(d);g.onlineState=m;let v=!1;g.queries.forEach((_,A)=>{for(const b of A.Sa)b.Fa(m)&&(v=!0)}),v&&Dg(g)}(r.eventManager,e),o.length&&r.lu.Y_(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function cj(s,e,t){const r=Ce(s);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.Eu.get(e),c=o&&o.key;if(c){let d=new dt(ve.comparator);d=d.insert(c,Bt.newNoDocument(c,be.min()));const m=Fe().add(c),g=new Ed(be.min(),new Map,new dt(Me),d,m);await HA(r,g),r.Iu=r.Iu.remove(c),r.Eu.delete(e),Mg(r)}else await Mp(r.localStore,e,!1).then(()=>Pp(r,e,t)).catch(Uo)}async function uj(s,e){const t=Ce(s),r=e.batch.batchId;try{const o=await TD(t.localStore,e);$A(t,r,null),GA(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Lc(t,o)}catch(o){await Uo(o)}}async function hj(s,e,t){const r=Ce(s);try{const o=await function(d,m){const g=Ce(d);return g.persistence.runTransaction("Reject batch","readwrite-primary",v=>{let _;return g.mutationQueue.lookupMutationBatch(v,m).next(A=>(Ge(A!==null,37113),_=A.keys(),g.mutationQueue.removeMutationBatch(v,A))).next(()=>g.mutationQueue.performConsistencyCheck(v)).next(()=>g.documentOverlayCache.removeOverlaysForBatchId(v,_,m)).next(()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,_)).next(()=>g.localDocuments.getDocuments(v,_))})}(r.localStore,e);$A(r,e,t),GA(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Lc(r,o)}catch(o){await Uo(o)}}function GA(s,e){(s.Ru.get(e)||[]).forEach(t=>{t.resolve()}),s.Ru.delete(e)}function $A(s,e,t){const r=Ce(s);let o=r.Au[r.currentUser.toKey()];if(o){const c=o.get(e);c&&(t?c.reject(t):c.resolve(),o=o.remove(e)),r.Au[r.currentUser.toKey()]=o}}function Pp(s,e,t=null){s.sharedClientState.removeLocalQueryTarget(e);for(const r of s.Pu.get(e))s.hu.delete(r),t&&s.lu.gu(r,t);s.Pu.delete(e),s.isPrimaryClient&&s.du.Hr(e).forEach(r=>{s.du.containsKey(r)||KA(s,r)})}function KA(s,e){s.Tu.delete(e.path.canonicalString());const t=s.Iu.get(e);t!==null&&(Ag(s.remoteStore,t),s.Iu=s.Iu.remove(e),s.Eu.delete(t),Mg(s))}function QE(s,e,t){for(const r of t)r instanceof zA?(s.du.addReference(r.key,e),dj(s,r)):r instanceof qA?(fe(Og,"Document no longer in limbo: "+r.key),s.du.removeReference(r.key,e),s.du.containsKey(r.key)||KA(s,r.key)):_e(19791,{pu:r})}function dj(s,e){const t=e.key,r=t.path.canonicalString();s.Iu.get(t)||s.Tu.has(r)||(fe(Og,"New document in limbo: "+t),s.Tu.add(r),Mg(s))}function Mg(s){for(;s.Tu.size>0&&s.Iu.size<s.maxConcurrentLimboResolutions;){const e=s.Tu.values().next().value;s.Tu.delete(e);const t=new ve(it.fromString(e)),r=s.Vu.next();s.Eu.set(r,new tj(t)),s.Iu=s.Iu.insert(t,r),VA(s.remoteStore,new er(Ds(pd(t.path)),r,"TargetPurposeLimboResolution",fd.le))}}async function Lc(s,e,t){const r=Ce(s),o=[],c=[],d=[];r.hu.isEmpty()||(r.hu.forEach((m,g)=>{d.push(r.fu(g,e,t).then(v=>{var _;if((v||t)&&r.isPrimaryClient){const A=v?!v.fromCache:(_=t?.targetChanges.get(g.targetId))===null||_===void 0?void 0:_.current;r.sharedClientState.updateQueryState(g.targetId,A?"current":"not-current")}if(v){o.push(v);const A=Tg.Rs(g.targetId,v);c.push(A)}}))}),await Promise.all(d),r.lu.Y_(o),await async function(g,v){const _=Ce(g);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",A=>se.forEach(v,b=>se.forEach(b.ds,D=>_.persistence.referenceDelegate.addReference(A,b.targetId,D)).next(()=>se.forEach(b.As,D=>_.persistence.referenceDelegate.removeReference(A,b.targetId,D)))))}catch(A){if(!Fo(A))throw A;fe(Eg,"Failed to update sequence numbers: "+A)}for(const A of v){const b=A.targetId;if(!A.fromCache){const D=_.xs.get(b),C=D.snapshotVersion,F=D.withLastLimboFreeSnapshotVersion(C);_.xs=_.xs.insert(b,F)}}}(r.localStore,c))}async function fj(s,e){const t=Ce(s);if(!t.currentUser.isEqual(e)){fe(Og,"User change. New user:",e.toKey());const r=await jA(t.localStore,e);t.currentUser=e,function(c,d){c.Ru.forEach(m=>{m.forEach(g=>{g.reject(new de(J.CANCELLED,d))})}),c.Ru.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Lc(t,r.ks)}}function mj(s,e){const t=Ce(s),r=t.Eu.get(e);if(r&&r.cu)return Fe().add(r.key);{let o=Fe();const c=t.Pu.get(e);if(!c)return o;for(const d of c){const m=t.hu.get(d);o=o.unionWith(m.view.eu)}return o}}function QA(s){const e=Ce(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=HA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=mj.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=cj.bind(null,e),e.lu.Y_=ZD.bind(null,e.eventManager),e.lu.gu=WD.bind(null,e.eventManager),e}function pj(s){const e=Ce(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=uj.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=hj.bind(null,e),e}class ed{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=bd(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Su(e),await this.persistence.start(),this.localStore=this.Du(e),this.gcScheduler=this.vu(e,this.localStore),this.indexBackfillerScheduler=this.Cu(e,this.localStore)}vu(e,t){return null}Cu(e,t){return null}Du(e){return _D(this.persistence,new gD,e.initialUser,this.serializer)}Su(e){return new DA(_g.fi,this.serializer)}bu(e){return new wD}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ed.provider={build:()=>new ed};class gj extends ed{constructor(e){super(),this.cacheSizeBytes=e}vu(e,t){Ge(this.persistence.referenceDelegate instanceof Wh,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new tD(r,e.asyncQueue,t)}Su(e){const t=this.cacheSizeBytes!==void 0?En.withCacheSize(this.cacheSizeBytes):En.DEFAULT;return new DA(r=>Wh.fi(r,t),this.serializer)}}class Lp{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>KE(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=fj.bind(null,this.syncEngine),await QD(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new XD}()}createDatastore(e){const t=bd(e.databaseInfo.databaseId),r=function(c){return new DD(c)}(e.databaseInfo);return function(c,d,m,g){return new VD(c,d,m,g)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,o,c,d,m){return new PD(r,o,c,d,m)}(this.localStore,this.datastore,e.asyncQueue,t=>KE(this.syncEngine,t,0),function(){return zE.C()?new zE:new xD}())}createSyncEngine(e,t){return function(o,c,d,m,g,v,_){const A=new nj(o,c,d,m,g,v);return _&&(A.mu=!0),A}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(o){const c=Ce(o);fe(ha,"RemoteStore shutting down."),c.da.add(5),await Pc(c),c.Ra.shutdown(),c.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Lp.provider={build:()=>new Lp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):pi("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vj{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new de(J.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(o,c){const d=Ce(o),m={documents:c.map(A=>Zh(d.serializer,A))},g=await d.Yo("BatchGetDocuments",d.serializer.databaseId,it.emptyPath(),m,c.length),v=new Map;g.forEach(A=>{const b=L1(d.serializer,A);v.set(b.key.toString(),b)});const _=[];return c.forEach(A=>{const b=v.get(A.toString());Ge(!!b,55234,{key:A}),_.push(b)}),_}(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Td(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{const o=ve.fromPath(r);this.mutations.push(new vA(o,this.precondition(o)))}),await async function(r,o){const c=Ce(r),d={writes:o.map(m=>wA(c.serializer,m))};await c.zo("Commit",c.serializer.databaseId,it.emptyPath(),d)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw _e(50498,{Uu:e.constructor.name});t=be.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new de(J.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(be.min())?Zt.exists(!1):Zt.updateTime(t):Zt.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(be.min()))throw new de(J.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Zt.updateTime(t)}return Zt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yj{constructor(e,t,r,o,c){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=o,this.deferred=c,this.Ku=r.maxAttempts,this.x_=new bg(this.asyncQueue,"transaction_retry")}Wu(){this.Ku-=1,this.Gu()}Gu(){this.x_.y_(async()=>{const e=new vj(this.datastore),t=this.zu(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(o=>{this.ju(o)}))}).catch(r=>{this.ju(r)})})}zu(e){try{const t=this.updateFunction(e);return!Mc(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}ju(e){this.Ku>0&&this.Hu(e)?(this.Ku-=1,this.asyncQueue.enqueueAndForget(()=>(this.Gu(),Promise.resolve()))):this.deferred.reject(e)}Hu(e){if(e.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!yA(t)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hr="FirestoreClient";class _j{constructor(e,t,r,o,c){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=an.UNAUTHENTICATED,this.clientId=zb.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(r,async d=>{fe(hr,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d}),this.appCheckCredentials.start(r,d=>(fe(hr,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Rs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Ig(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function sp(s,e){s.asyncQueue.verifyOperationInProgress(),fe(hr,"Initializing OfflineComponentProvider");const t=s.configuration;await e.initialize(t);let r=t.initialUser;s.setCredentialChangeListener(async o=>{r.isEqual(o)||(await jA(e.localStore,o),r=o)}),e.persistence.setDatabaseDeletedListener(()=>s.terminate()),s._offlineComponents=e}async function YE(s,e){s.asyncQueue.verifyOperationInProgress();const t=await Tj(s);fe(hr,"Initializing OnlineComponentProvider"),await e.initialize(t,s.configuration),s.setCredentialChangeListener(r=>BE(e.remoteStore,r)),s.setAppCheckTokenChangeListener((r,o)=>BE(e.remoteStore,o)),s._onlineComponents=e}async function Tj(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){fe(hr,"Using user provided OfflineComponentProvider");try{await sp(s,s._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(o){return o.name==="FirebaseError"?o.code===J.FAILED_PRECONDITION||o.code===J.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(t))throw t;Ro("Error using user provided cache. Falling back to memory cache: "+t),await sp(s,new ed)}}else fe(hr,"Using default OfflineComponentProvider"),await sp(s,new gj(void 0));return s._offlineComponents}async function kg(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(fe(hr,"Using user provided OnlineComponentProvider"),await YE(s,s._uninitializedComponentsProvider._online)):(fe(hr,"Using default OnlineComponentProvider"),await YE(s,new Lp))),s._onlineComponents}function Ej(s){return kg(s).then(e=>e.syncEngine)}function bj(s){return kg(s).then(e=>e.datastore)}async function td(s){const e=await kg(s),t=e.eventManager;return t.onListen=sj.bind(null,e.syncEngine),t.onUnlisten=aj.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=ij.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=oj.bind(null,e.syncEngine),t}function Aj(s,e,t={}){const r=new Rs;return s.asyncQueue.enqueueAndForget(async()=>function(c,d,m,g,v){const _=new Vg({next:b=>{_.xu(),d.enqueueAndForget(()=>Rg(c,A));const D=b.docs.has(m);!D&&b.fromCache?v.reject(new de(J.UNAVAILABLE,"Failed to get document because the client is offline.")):D&&b.fromCache&&g&&g.source==="server"?v.reject(new de(J.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(b)},error:b=>v.reject(b)}),A=new jg(pd(m.path),_,{includeMetadataChanges:!0,Qa:!0});return Cg(c,A)}(await td(s),s.asyncQueue,e,t,r)),r.promise}function Nj(s,e,t={}){const r=new Rs;return s.asyncQueue.enqueueAndForget(async()=>function(c,d,m,g,v){const _=new Vg({next:b=>{_.xu(),d.enqueueAndForget(()=>Rg(c,A)),b.fromCache&&g.source==="server"?v.reject(new de(J.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(b)},error:b=>v.reject(b)}),A=new jg(m,_,{includeMetadataChanges:!0,Qa:!0});return Cg(c,A)}(await td(s),s.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YA(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XE=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XA(s,e,t){if(!t)throw new de(J.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function Sj(s,e,t,r){if(e===!0&&r===!0)throw new de(J.INVALID_ARGUMENT,`${s} and ${t} cannot be used together.`)}function ZE(s){if(!ve.isDocumentKey(s))throw new de(J.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function WE(s){if(ve.isDocumentKey(s))throw new de(J.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function Sd(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":_e(12329,{type:typeof s})}function vn(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new de(J.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Sd(s);throw new de(J.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZA="firestore.googleapis.com",JE=!0;class e0{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new de(J.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=ZA,this.ssl=JE}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:JE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=RA;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<J1)throw new de(J.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Sj("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=YA((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(c){if(c.timeoutSeconds!==void 0){if(isNaN(c.timeoutSeconds))throw new de(J.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (must not be NaN)`);if(c.timeoutSeconds<5)throw new de(J.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (minimum allowed value is 5)`);if(c.timeoutSeconds>30)throw new de(J.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,o){return r.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class wd{constructor(e,t,r,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new e0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new de(J.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new de(J.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new e0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new DR;switch(r.type){case"firstParty":return new VR(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new de(J.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=XE.get(t);r&&(fe("ComponentProvider","Removing Datastore"),XE.delete(t),r.terminate())}(this),Promise.resolve()}}function wj(s,e,t,r={}){var o;s=vn(s,wd);const c=pa(e),d=s._getSettings(),m=Object.assign(Object.assign({},d),{emulatorOptions:s._getEmulatorOptions()}),g=`${e}:${t}`;c&&(Kp(`https://${g}`),Qp("Firestore",!0)),d.host!==ZA&&d.host!==g&&Ro("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const v=Object.assign(Object.assign({},d),{host:g,ssl:c,emulatorOptions:r});if(!rr(v,m)&&(s._setSettings(v),r.mockUserToken)){let _,A;if(typeof r.mockUserToken=="string")_=r.mockUserToken,A=an.MOCK_USER;else{_=$0(r.mockUserToken,(o=s._app)===null||o===void 0?void 0:o.options.projectId);const b=r.mockUserToken.sub||r.mockUserToken.user_id;if(!b)throw new de(J.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");A=new an(b)}s._authCredentials=new jR(new Ub(_,A))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new yr(this.firestore,e,this._query)}}class Wt{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ir(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Wt(this.firestore,e,this._key)}}class ir extends yr{constructor(e,t,r){super(e,t,pd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Wt(this.firestore,null,new ve(e))}withConverter(e){return new ir(this.firestore,e,this._path)}}function Os(s,e,...t){if(s=ht(s),XA("collection","path",e),s instanceof wd){const r=it.fromString(e,...t);return WE(r),new ir(s,null,r)}{if(!(s instanceof Wt||s instanceof ir))throw new de(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(it.fromString(e,...t));return WE(r),new ir(s.firestore,null,r)}}function _r(s,e,...t){if(s=ht(s),arguments.length===1&&(e=zb.newId()),XA("doc","path",e),s instanceof wd){const r=it.fromString(e,...t);return ZE(r),new Wt(s,null,new ve(r))}{if(!(s instanceof Wt||s instanceof ir))throw new de(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(it.fromString(e,...t));return ZE(r),new Wt(s.firestore,s instanceof ir?s.converter:null,new ve(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t0="AsyncQueue";class n0{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new bg(this,"async_queue_retry"),this.rc=()=>{const r=np();r&&fe(t0,"Visibility state changed to "+r.visibilityState),this.x_.b_()},this.sc=e;const t=np();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;const t=np();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});const t=new Rs;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!Fo(e))throw e;fe(t0,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(e){const t=this.sc.then(()=>(this.ec=!0,e().catch(r=>{throw this.Xu=r,this.ec=!1,pi("INTERNAL UNHANDLED ERROR: ",s0(r)),r}).then(r=>(this.ec=!1,r))));return this.sc=t,t}enqueueAfterDelay(e,t,r){this.oc(),this.nc.indexOf(e)>-1&&(t=0);const o=xg.createAndSchedule(this,e,t,r,c=>this.uc(c));return this.Zu.push(o),o}oc(){this.Xu&&_e(47125,{cc:s0(this.Xu)})}verifyOperationInProgress(){}async lc(){let e;do e=this.sc,await e;while(e!==this.sc)}hc(e){for(const t of this.Zu)if(t.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Zu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){const t=this.Zu.indexOf(e);this.Zu.splice(t,1)}}function s0(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i0(s){return function(t,r){if(typeof t!="object"||t===null)return!1;const o=t;for(const c of r)if(c in o&&typeof o[c]=="function")return!0;return!1}(s,["next","error","complete"])}class Ms extends wd{constructor(e,t,r,o){super(e,t,r,o),this.type="firestore",this._queue=new n0,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new n0(e),this._firestoreClient=void 0,await e}}}function xj(s,e){const t=typeof s=="object"?s:Rc(),r=typeof s=="string"?s:$h,o=vi(t,"firestore").getImmediate({identifier:r});if(!o._initialized){const c=B0("firestore");c&&wj(o,...c)}return o}function Uc(s){if(s._terminated)throw new de(J.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||Ij(s),s._firestoreClient}function Ij(s){var e,t,r;const o=s._freezeSettings(),c=function(m,g,v,_){return new XR(m,g,v,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,YA(_.experimentalLongPollingOptions),_.useFetchStreams,_.isUsingEmulator)}(s._databaseId,((e=s._app)===null||e===void 0?void 0:e.options.appId)||"",s._persistenceKey,o);s._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=o.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(s._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),s._firestoreClient=new _j(s._authCredentials,s._appCheckCredentials,s._queue,c,s._componentsProvider&&function(m){const g=m?._online.build();return{_offline:m?._offline.build(g),_online:g}}(s._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{constructor(e){this._byteString=e}static fromBase64String(e){try{return new da(Jt.fromBase64String(e))}catch(t){throw new de(J.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new da(Jt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new de(J.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pg{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new de(J.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new de(J.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Me(this._lat,e._lat)||Me(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lg{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,o){if(r.length!==o.length)return!1;for(let c=0;c<r.length;++c)if(r[c]!==o[c])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cj=/^__.*__$/;class Rj{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new vr(e,this.data,this.fieldMask,t,this.fieldTransforms):new Vc(e,this.data,t,this.fieldTransforms)}}class WA{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new vr(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function JA(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw _e(40011,{Ic:s})}}class Ug{constructor(e,t,r,o,c,d){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=o,c===void 0&&this.Ec(),this.fieldTransforms=c||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new Ug(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.dc({path:r,Rc:!1});return o.Vc(e),o}mc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.dc({path:r,Rc:!1});return o.Ec(),o}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return nd(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(e.length===0)throw this.gc("Document fields must not be empty");if(JA(this.Ic)&&Cj.test(e))throw this.gc('Document fields cannot begin and end with "__"')}}class Dj{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||bd(e)}bc(e,t,r,o=!1){return new Ug({Ic:e,methodName:t,wc:r,path:Xt.emptyPath(),Rc:!1,yc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function zc(s){const e=s._freezeSettings(),t=bd(s._databaseId);return new Dj(s._databaseId,!!e.ignoreUndefinedProperties,t)}function Fg(s,e,t,r,o,c={}){const d=s.bc(c.merge||c.mergeFields?2:0,e,t,o);qg("Data must be an object, but it was:",d,r);const m=nN(r,d);let g,v;if(c.merge)g=new jn(d.fieldMask),v=d.fieldTransforms;else if(c.mergeFields){const _=[];for(const A of c.mergeFields){const b=Up(e,A,t);if(!d.contains(b))throw new de(J.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);iN(_,b)||_.push(b)}g=new jn(_),v=d.fieldTransforms.filter(A=>g.covers(A.field))}else g=null,v=d.fieldTransforms;return new Rj(new gn(m),g,v)}class Id extends xd{_toFieldTransform(e){if(e.Ic!==2)throw e.Ic===1?e.gc(`${this._methodName}() can only appear at the top level of your update data`):e.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Id}}class zg extends xd{_toFieldTransform(e){return new b1(e.path,new Nc)}isEqual(e){return e instanceof zg}}function eN(s,e,t,r){const o=s.bc(1,e,t);qg("Data must be an object, but it was:",o,r);const c=[],d=gn.empty();gr(r,(g,v)=>{const _=Bg(e,g,t);v=ht(v);const A=o.mc(_);if(v instanceof Id)c.push(_);else{const b=qc(v,A);b!=null&&(c.push(_),d.set(_,b))}});const m=new jn(c);return new WA(d,m,o.fieldTransforms)}function tN(s,e,t,r,o,c){const d=s.bc(1,e,t),m=[Up(e,r,t)],g=[o];if(c.length%2!=0)throw new de(J.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let b=0;b<c.length;b+=2)m.push(Up(e,c[b])),g.push(c[b+1]);const v=[],_=gn.empty();for(let b=m.length-1;b>=0;--b)if(!iN(v,m[b])){const D=m[b];let C=g[b];C=ht(C);const F=d.mc(D);if(C instanceof Id)v.push(D);else{const w=qc(C,F);w!=null&&(v.push(D),_.set(D,w))}}const A=new jn(v);return new WA(_,A,d.fieldTransforms)}function jj(s,e,t,r=!1){return qc(t,s.bc(r?4:3,e))}function qc(s,e){if(sN(s=ht(s)))return qg("Unsupported field value:",e,s),nN(s,e);if(s instanceof xd)return function(r,o){if(!JA(o.Ic))throw o.gc(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.gc(`${r._methodName}() is not currently supported inside arrays`);const c=r._toFieldTransform(o);c&&o.fieldTransforms.push(c)}(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.Rc&&e.Ic!==4)throw e.gc("Nested arrays are not supported");return function(r,o){const c=[];let d=0;for(const m of r){let g=qc(m,o.fc(d));g==null&&(g={nullValue:"NULL_VALUE"}),c.push(g),d++}return{arrayValue:{values:c}}}(s,e)}return function(r,o){if((r=ht(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return _1(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const c=Ot.fromDate(r);return{timestampValue:Xh(o.serializer,c)}}if(r instanceof Ot){const c=new Ot(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Xh(o.serializer,c)}}if(r instanceof Pg)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof da)return{bytesValue:bA(o.serializer,r._byteString)};if(r instanceof Wt){const c=o.databaseId,d=r.firestore._databaseId;if(!d.isEqual(c))throw o.gc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:vg(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof Lg)return function(d,m){return{mapValue:{fields:{[Yb]:{stringValue:Xb},[Kh]:{arrayValue:{values:d.toArray().map(v=>{if(typeof v!="number")throw m.gc("VectorValues must only contain numeric values.");return mg(m.serializer,v)})}}}}}}(r,o);throw o.gc(`Unsupported field value: ${Sd(r)}`)}(s,e)}function nN(s,e){const t={};return Bb(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):gr(s,(r,o)=>{const c=qc(o,e.Ac(r));c!=null&&(t[r]=c)}),{mapValue:{fields:t}}}function sN(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof Ot||s instanceof Pg||s instanceof da||s instanceof Wt||s instanceof xd||s instanceof Lg)}function qg(s,e,t){if(!sN(t)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(t)){const r=Sd(t);throw r==="an object"?e.gc(s+" a custom object"):e.gc(s+" "+r)}}function Up(s,e,t){if((e=ht(e))instanceof Fc)return e._internalPath;if(typeof e=="string")return Bg(s,e);throw nd("Field path arguments must be of type string or ",s,!1,void 0,t)}const Oj=new RegExp("[~\\*/\\[\\]]");function Bg(s,e,t){if(e.search(Oj)>=0)throw nd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,t);try{return new Fc(...e.split("."))._internalPath}catch{throw nd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,t)}}function nd(s,e,t,r,o){const c=r&&!r.isEmpty(),d=o!==void 0;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let g="";return(c||d)&&(g+=" (found",c&&(g+=` in field ${r}`),d&&(g+=` in document ${o}`),g+=")"),new de(J.INVALID_ARGUMENT,m+s+g)}function iN(s,e){return s.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd{constructor(e,t,r,o,c){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Wt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Mj(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Cd("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class Mj extends sd{data(){return super.data()}}function Cd(s,e){return typeof e=="string"?Bg(s,e):e instanceof Fc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rN(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new de(J.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Hg{}class aN extends Hg{}function xt(s,e,...t){let r=[];e instanceof Hg&&r.push(e),r=r.concat(t),function(c){const d=c.filter(g=>g instanceof Gg).length,m=c.filter(g=>g instanceof Rd).length;if(d>1||d>0&&m>0)throw new de(J.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const o of r)s=o._apply(s);return s}class Rd extends aN{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Rd(e,t,r)}_apply(e){const t=this._parse(e);return oN(e._query,t),new yr(e.firestore,e.converter,Cp(e._query,t))}_parse(e){const t=zc(e.firestore);return function(c,d,m,g,v,_,A){let b;if(v.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new de(J.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){a0(A,_);const C=[];for(const F of A)C.push(r0(g,c,F));b={arrayValue:{values:C}}}else b=r0(g,c,A)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||a0(A,_),b=jj(m,d,A,_==="in"||_==="not-in");return wt.create(v,_,b)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function ln(s,e,t){const r=e,o=Cd("where",s);return Rd._create(o,r,t)}class Gg extends Hg{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Gg(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:cs.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(o,c){let d=o;const m=c.getFlattenedFilters();for(const g of m)oN(d,g),d=Cp(d,g)}(e._query,t),new yr(e.firestore,e.converter,Cp(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class $g extends aN{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new $g(e,t)}_apply(e){const t=function(o,c,d){if(o.startAt!==null)throw new de(J.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new de(J.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ac(c,d)}(e._query,this._field,this._direction);return new yr(e.firestore,e.converter,function(o,c){const d=o.explicitOrderBy.concat([c]);return new zo(o.path,o.collectionGroup,d,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(e._query,t))}}function Bo(s,e="asc"){const t=e,r=Cd("orderBy",s);return $g._create(r,t)}function r0(s,e,t){if(typeof(t=ht(t))=="string"){if(t==="")throw new de(J.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!iA(e)&&t.indexOf("/")!==-1)throw new de(J.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(it.fromString(t));if(!ve.isDocumentKey(r))throw new de(J.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return _E(s,new ve(r))}if(t instanceof Wt)return _E(s,t._key);throw new de(J.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Sd(t)}.`)}function a0(s,e){if(!Array.isArray(s)||s.length===0)throw new de(J.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function oN(s,e){const t=function(o,c){for(const d of o)for(const m of d.getFlattenedFilters())if(c.indexOf(m.op)>=0)return m.op;return null}(s.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new de(J.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new de(J.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class lN{convertValue(e,t="none"){switch(cr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Tt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(lr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw _e(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return gr(e,(o,c)=>{r[o]=this.convertValue(c,t)}),r}convertVectorValue(e){var t,r,o;const c=(o=(r=(t=e.fields)===null||t===void 0?void 0:t[Kh].arrayValue)===null||r===void 0?void 0:r.values)===null||o===void 0?void 0:o.map(d=>Tt(d.doubleValue));return new Lg(c)}convertGeoPoint(e){return new Pg(Tt(e.latitude),Tt(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=md(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Tc(e));default:return null}}convertTimestamp(e){const t=or(e);return new Ot(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=it.fromString(e);Ge(CA(r),9688,{name:e});const o=new Ec(r.get(1),r.get(3)),c=new ve(r.popFirst(5));return o.isEqual(t)||pi(`Document ${c} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kg(s,e,t){let r;return r=s?t&&(t.merge||t.mergeFields)?s.toFirestore(e,t):s.toFirestore(e):e,r}class Vj extends lN{constructor(e){super(),this.firestore=e}convertBytes(e){return new da(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Wt(this.firestore,null,t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Qg extends sd{constructor(e,t,r,o,c,d){super(e,t,r,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Mh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Cd("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Mh extends Qg{data(e={}){return super.data(e)}}class cN{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new To(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Mh(this._firestore,this._userDataWriter,r.key,r,new To(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new de(J.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,c){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map(m=>{const g=new Mh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new To(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:g,oldIndex:-1,newIndex:d++}})}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(m=>c||m.type!==3).map(m=>{const g=new Mh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new To(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let v=-1,_=-1;return m.type!==0&&(v=d.indexOf(m.doc.key),d=d.delete(m.doc.key)),m.type!==1&&(d=d.add(m.doc),_=d.indexOf(m.doc.key)),{type:kj(m.type),doc:g,oldIndex:v,newIndex:_}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function kj(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return _e(61501,{type:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dd(s){s=vn(s,Wt);const e=vn(s.firestore,Ms);return Aj(Uc(e),s._key).then(t=>hN(e,s,t))}class jd extends lN{constructor(e){super(),this.firestore=e}convertBytes(e){return new da(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Wt(this.firestore,null,t)}}function Bc(s){s=vn(s,yr);const e=vn(s.firestore,Ms),t=Uc(e),r=new jd(e);return rN(s._query),Nj(t,s._query).then(o=>new cN(e,r,s,o))}function Pj(s,e,t){s=vn(s,Wt);const r=vn(s.firestore,Ms),o=Kg(s.converter,e,t);return Od(r,[Fg(zc(r),"setDoc",s._key,o,s.converter!==null,t).toMutation(s._key,Zt.none())])}function uN(s,e,t,...r){s=vn(s,Wt);const o=vn(s.firestore,Ms),c=zc(o);let d;return d=typeof(e=ht(e))=="string"||e instanceof Fc?tN(c,"updateDoc",s._key,e,t,r):eN(c,"updateDoc",s._key,e),Od(o,[d.toMutation(s._key,Zt.exists(!0))])}function Lj(s){return Od(vn(s.firestore,Ms),[new Td(s._key,Zt.none())])}function Uj(s,e){const t=vn(s.firestore,Ms),r=_r(s),o=Kg(s.converter,e);return Od(t,[Fg(zc(s.firestore),"addDoc",r._key,o,s.converter!==null,{}).toMutation(r._key,Zt.exists(!1))]).then(()=>r)}function Yg(s,...e){var t,r,o;s=ht(s);let c={includeMetadataChanges:!1,source:"default"},d=0;typeof e[d]!="object"||i0(e[d])||(c=e[d],d++);const m={includeMetadataChanges:c.includeMetadataChanges,source:c.source};if(i0(e[d])){const A=e[d];e[d]=(t=A.next)===null||t===void 0?void 0:t.bind(A),e[d+1]=(r=A.error)===null||r===void 0?void 0:r.bind(A),e[d+2]=(o=A.complete)===null||o===void 0?void 0:o.bind(A)}let g,v,_;if(s instanceof Wt)v=vn(s.firestore,Ms),_=pd(s._key.path),g={next:A=>{e[d]&&e[d](hN(v,s,A))},error:e[d+1],complete:e[d+2]};else{const A=vn(s,yr);v=vn(A.firestore,Ms),_=A._query;const b=new jd(v);g={next:D=>{e[d]&&e[d](new cN(v,b,A,D))},error:e[d+1],complete:e[d+2]},rN(s._query)}return function(b,D,C,F){const w=new Vg(F),G=new jg(D,w,C);return b.asyncQueue.enqueueAndForget(async()=>Cg(await td(b),G)),()=>{w.xu(),b.asyncQueue.enqueueAndForget(async()=>Rg(await td(b),G))}}(Uc(v),_,m,g)}function Od(s,e){return function(r,o){const c=new Rs;return r.asyncQueue.enqueueAndForget(async()=>lj(await Ej(r),o,c)),c.promise}(Uc(s),e)}function hN(s,e,t){const r=t.docs.get(e._key),o=new jd(s);return new Qg(s,o,e._key,r,new To(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fj={maxAttempts:5};function ic(s,e){if((s=ht(s)).firestore!==e)throw new de(J.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zj{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=zc(e)}get(e){const t=ic(e,this._firestore),r=new Vj(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||o.length!==1)return _e(24041);const c=o[0];if(c.isFoundDocument())return new sd(this._firestore,r,c.key,c,t.converter);if(c.isNoDocument())return new sd(this._firestore,r,t._key,null,t.converter);throw _e(18433,{doc:c})})}set(e,t,r){const o=ic(e,this._firestore),c=Kg(o.converter,t,r),d=Fg(this._dataReader,"Transaction.set",o._key,c,o.converter!==null,r);return this._transaction.set(o._key,d),this}update(e,t,r,...o){const c=ic(e,this._firestore);let d;return d=typeof(t=ht(t))=="string"||t instanceof Fc?tN(this._dataReader,"Transaction.update",c._key,t,r,o):eN(this._dataReader,"Transaction.update",c._key,t),this._transaction.update(c._key,d),this}delete(e){const t=ic(e,this._firestore);return this._transaction.delete(t._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qj extends zj{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=ic(e,this._firestore),r=new jd(this._firestore);return super.get(e).then(o=>new Qg(this._firestore,r,t._key,o._document,new To(!1,!1),t.converter))}}function Bj(s,e,t){s=vn(s,Ms);const r=Object.assign(Object.assign({},Fj),t);return function(c){if(c.maxAttempts<1)throw new de(J.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(c,d,m){const g=new Rs;return c.asyncQueue.enqueueAndForget(async()=>{const v=await bj(c);new yj(c.asyncQueue,v,m,d,g).Wu()}),g.promise}(Uc(s),o=>e(new qj(s,o)),r)}function wo(){return new zg("serverTimestamp")}(function(e,t=!0){(function(o){Lo=o})(ga),Xn(new kn("firestore",(r,{instanceIdentifier:o,options:c})=>{const d=r.getProvider("app").getImmediate(),m=new Ms(new OR(r.getProvider("auth-internal")),new kR(d,r.getProvider("app-check-internal")),function(v,_){if(!Object.prototype.hasOwnProperty.apply(v.options,["projectId"]))throw new de(J.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ec(v.options.projectId,_)}(d,o),d);return c=Object.assign({useFetchStreams:t},c),m._setSettings(c),m},"PUBLIC").setMultipleInstances(!0)),cn(oE,lE,e),cn(oE,lE,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dN="firebasestorage.googleapis.com",Hj="storageBucket",Gj=2*60*1e3,$j=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks extends Zn{constructor(e,t,r=0){super(ip(e),`Firebase Storage: ${t} (${ip(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ks.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return ip(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Vs;(function(s){s.UNKNOWN="unknown",s.OBJECT_NOT_FOUND="object-not-found",s.BUCKET_NOT_FOUND="bucket-not-found",s.PROJECT_NOT_FOUND="project-not-found",s.QUOTA_EXCEEDED="quota-exceeded",s.UNAUTHENTICATED="unauthenticated",s.UNAUTHORIZED="unauthorized",s.UNAUTHORIZED_APP="unauthorized-app",s.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",s.INVALID_CHECKSUM="invalid-checksum",s.CANCELED="canceled",s.INVALID_EVENT_NAME="invalid-event-name",s.INVALID_URL="invalid-url",s.INVALID_DEFAULT_BUCKET="invalid-default-bucket",s.NO_DEFAULT_BUCKET="no-default-bucket",s.CANNOT_SLICE_BLOB="cannot-slice-blob",s.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",s.NO_DOWNLOAD_URL="no-download-url",s.INVALID_ARGUMENT="invalid-argument",s.INVALID_ARGUMENT_COUNT="invalid-argument-count",s.APP_DELETED="app-deleted",s.INVALID_ROOT_OPERATION="invalid-root-operation",s.INVALID_FORMAT="invalid-format",s.INTERNAL_ERROR="internal-error",s.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Vs||(Vs={}));function ip(s){return"storage/"+s}function Kj(){const s="An unknown error occurred, please check the error payload for server response.";return new ks(Vs.UNKNOWN,s)}function Qj(){return new ks(Vs.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Yj(){return new ks(Vs.CANCELED,"User canceled the upload/download.")}function Xj(s){return new ks(Vs.INVALID_URL,"Invalid URL '"+s+"'.")}function Zj(s){return new ks(Vs.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+s+"'.")}function o0(s){return new ks(Vs.INVALID_ARGUMENT,s)}function fN(){return new ks(Vs.APP_DELETED,"The Firebase app was deleted.")}function Wj(s){return new ks(Vs.INVALID_ROOT_OPERATION,"The operation '"+s+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=ls.makeFromUrl(e,t)}catch{return new ls(e,"")}if(r.path==="")return r;throw Zj(e)}static makeFromUrl(e,t){let r=null;const o="([A-Za-z0-9.\\-_]+)";function c(Y){Y.path.charAt(Y.path.length-1)==="/"&&(Y.path_=Y.path_.slice(0,-1))}const d="(/(.*))?$",m=new RegExp("^gs://"+o+d,"i"),g={bucket:1,path:3};function v(Y){Y.path_=decodeURIComponent(Y.path)}const _="v[A-Za-z0-9_]+",A=t.replace(/[.]/g,"\\."),b="(/([^?#]*).*)?$",D=new RegExp(`^https?://${A}/${_}/b/${o}/o${b}`,"i"),C={bucket:1,path:3},F=t===dN?"(?:storage.googleapis.com|storage.cloud.google.com)":t,w="([^?#]*)",G=new RegExp(`^https?://${F}/${o}/${w}`,"i"),ee=[{regex:m,indices:g,postModify:c},{regex:D,indices:C,postModify:v},{regex:G,indices:{bucket:1,path:2},postModify:v}];for(let Y=0;Y<ee.length;Y++){const U=ee[Y],he=U.regex.exec(e);if(he){const k=he[U.indices.bucket];let x=he[U.indices.path];x||(x=""),r=new ls(k,x),U.postModify(r);break}}if(r==null)throw Xj(e);return r}}class Jj{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eO(s,e,t){let r=1,o=null,c=null,d=!1,m=0;function g(){return m===2}let v=!1;function _(...w){v||(v=!0,e.apply(null,w))}function A(w){o=setTimeout(()=>{o=null,s(D,g())},w)}function b(){c&&clearTimeout(c)}function D(w,...G){if(v){b();return}if(w){b(),_.call(null,w,...G);return}if(g()||d){b(),_.call(null,w,...G);return}r<64&&(r*=2);let ee;m===1?(m=2,ee=0):ee=(r+Math.random())*1e3,A(ee)}let C=!1;function F(w){C||(C=!0,b(),!v&&(o!==null?(w||(m=2),clearTimeout(o),A(0)):w||(m=1)))}return A(0),c=setTimeout(()=>{d=!0,F(!0)},t),F}function tO(s){s(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nO(s){return s!==void 0}function l0(s,e,t,r){if(r<e)throw o0(`Invalid value for '${s}'. Expected ${e} or greater.`);if(r>t)throw o0(`Invalid value for '${s}'. Expected ${t} or less.`)}function sO(s){const e=encodeURIComponent;let t="?";for(const r in s)if(s.hasOwnProperty(r)){const o=e(r)+"="+e(s[r]);t=t+o+"&"}return t=t.slice(0,-1),t}var id;(function(s){s[s.NO_ERROR=0]="NO_ERROR",s[s.NETWORK_ERROR=1]="NETWORK_ERROR",s[s.ABORT=2]="ABORT"})(id||(id={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iO(s,e){const t=s>=500&&s<600,o=[408,429].indexOf(s)!==-1,c=e.indexOf(s)!==-1;return t||o||c}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rO{constructor(e,t,r,o,c,d,m,g,v,_,A,b=!0,D=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=o,this.successCodes_=c,this.additionalRetryCodes_=d,this.callback_=m,this.errorCallback_=g,this.timeout_=v,this.progressCallback_=_,this.connectionFactory_=A,this.retry=b,this.isUsingEmulator=D,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((C,F)=>{this.resolve_=C,this.reject_=F,this.start_()})}start_(){const e=(r,o)=>{if(o){r(!1,new bh(!1,null,!0));return}const c=this.connectionFactory_();this.pendingConnection_=c;const d=m=>{const g=m.loaded,v=m.lengthComputable?m.total:-1;this.progressCallback_!==null&&this.progressCallback_(g,v)};this.progressCallback_!==null&&c.addUploadProgressListener(d),c.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&c.removeUploadProgressListener(d),this.pendingConnection_=null;const m=c.getErrorCode()===id.NO_ERROR,g=c.getStatus();if(!m||iO(g,this.additionalRetryCodes_)&&this.retry){const _=c.getErrorCode()===id.ABORT;r(!1,new bh(!1,null,_));return}const v=this.successCodes_.indexOf(g)!==-1;r(!0,new bh(v,c))})},t=(r,o)=>{const c=this.resolve_,d=this.reject_,m=o.connection;if(o.wasSuccessCode)try{const g=this.callback_(m,m.getResponse());nO(g)?c(g):c()}catch(g){d(g)}else if(m!==null){const g=Kj();g.serverResponse=m.getErrorText(),this.errorCallback_?d(this.errorCallback_(m,g)):d(g)}else if(o.canceled){const g=this.appDelete_?fN():Yj();d(g)}else{const g=Qj();d(g)}};this.canceled_?t(!1,new bh(!1,null,!0)):this.backoffId_=eO(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&tO(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class bh{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function aO(s,e){e!==null&&e.length>0&&(s.Authorization="Firebase "+e)}function oO(s,e){s["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function lO(s,e){e&&(s["X-Firebase-GMPID"]=e)}function cO(s,e){e!==null&&(s["X-Firebase-AppCheck"]=e)}function uO(s,e,t,r,o,c,d=!0,m=!1){const g=sO(s.urlParams),v=s.url+g,_=Object.assign({},s.headers);return lO(_,e),aO(_,t),oO(_,c),cO(_,r),new rO(v,s.method,_,s.body,s.successCodes,s.additionalRetryCodes,s.handler,s.errorHandler,s.timeout,s.progressCallback,o,d,m)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hO(s){if(s.length===0)return null;const e=s.lastIndexOf("/");return e===-1?"":s.slice(0,e)}function dO(s){const e=s.lastIndexOf("/",s.length-2);return e===-1?s:s.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd{constructor(e,t){this._service=e,t instanceof ls?this._location=t:this._location=ls.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new rd(e,t)}get root(){const e=new ls(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return dO(this._location.path)}get storage(){return this._service}get parent(){const e=hO(this._location.path);if(e===null)return null;const t=new ls(this._location.bucket,e);return new rd(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw Wj(e)}}function c0(s,e){const t=e?.[Hj];return t==null?null:ls.makeFromBucketSpec(t,s)}function fO(s,e,t,r={}){s.host=`${e}:${t}`;const o=pa(e);o&&(Kp(`https://${s.host}/b`),Qp("Storage",!0)),s._isUsingEmulator=!0,s._protocol=o?"https":"http";const{mockUserToken:c}=r;c&&(s._overrideAuthToken=typeof c=="string"?c:$0(c,s.app.options.projectId))}class mO{constructor(e,t,r,o,c,d=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=o,this._firebaseVersion=c,this._isUsingEmulator=d,this._bucket=null,this._host=dN,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Gj,this._maxUploadRetryTime=$j,this._requests=new Set,o!=null?this._bucket=ls.makeFromBucketSpec(o,this._host):this._bucket=c0(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ls.makeFromBucketSpec(this._url,e):this._bucket=c0(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){l0("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){l0("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(as(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new rd(this,e)}_makeRequest(e,t,r,o,c=!0){if(this._deleted)return new Jj(fN());{const d=uO(e,this._appId,r,o,t,this._firebaseVersion,c,this._isUsingEmulator);return this._requests.add(d),d.getPromise().then(()=>this._requests.delete(d),()=>this._requests.delete(d)),d}}async makeRequestWithTokens(e,t){const[r,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,o).getPromise()}}const u0="@firebase/storage",h0="0.13.13";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mN="storage";function pO(s=Rc(),e){s=ht(s);const r=vi(s,mN).getImmediate({identifier:e}),o=B0("storage");return o&&gO(r,...o),r}function gO(s,e,t,r={}){fO(s,e,t,r)}function vO(s,{instanceIdentifier:e}){const t=s.getProvider("app").getImmediate(),r=s.getProvider("auth-internal"),o=s.getProvider("app-check-internal");return new mO(t,r,o,e,ga)}function yO(){Xn(new kn(mN,vO,"PUBLIC").setMultipleInstances(!0)),cn(u0,h0,""),cn(u0,h0,"esm2017")}yO();const pN="@firebase/installations",Xg="0.6.17";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gN=1e4,vN=`w:${Xg}`,yN="FIS_v2",_O="https://firebaseinstallations.googleapis.com/v1",TO=60*60*1e3,EO="installations",bO="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AO={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},fa=new pr(EO,bO,AO);function _N(s){return s instanceof Zn&&s.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TN({projectId:s}){return`${_O}/projects/${s}/installations`}function EN(s){return{token:s.token,requestStatus:2,expiresIn:SO(s.expiresIn),creationTime:Date.now()}}async function bN(s,e){const r=(await e.json()).error;return fa.create("request-failed",{requestName:s,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function AN({apiKey:s}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":s})}function NO(s,{refreshToken:e}){const t=AN(s);return t.append("Authorization",wO(e)),t}async function NN(s){const e=await s();return e.status>=500&&e.status<600?s():e}function SO(s){return Number(s.replace("s","000"))}function wO(s){return`${yN} ${s}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xO({appConfig:s,heartbeatServiceProvider:e},{fid:t}){const r=TN(s),o=AN(s),c=e.getImmediate({optional:!0});if(c){const v=await c.getHeartbeatsHeader();v&&o.append("x-firebase-client",v)}const d={fid:t,authVersion:yN,appId:s.appId,sdkVersion:vN},m={method:"POST",headers:o,body:JSON.stringify(d)},g=await NN(()=>fetch(r,m));if(g.ok){const v=await g.json();return{fid:v.fid||t,registrationStatus:2,refreshToken:v.refreshToken,authToken:EN(v.authToken)}}else throw await bN("Create Installation",g)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SN(s){return new Promise(e=>{setTimeout(e,s)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IO(s){return btoa(String.fromCharCode(...s)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CO=/^[cdef][\w-]{21}$/,Fp="";function RO(){try{const s=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(s),s[0]=112+s[0]%16;const t=DO(s);return CO.test(t)?t:Fp}catch{return Fp}}function DO(s){return IO(s).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Md(s){return`${s.appName}!${s.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wN=new Map;function xN(s,e){const t=Md(s);IN(t,e),jO(t,e)}function IN(s,e){const t=wN.get(s);if(t)for(const r of t)r(e)}function jO(s,e){const t=OO();t&&t.postMessage({key:s,fid:e}),MO()}let ra=null;function OO(){return!ra&&"BroadcastChannel"in self&&(ra=new BroadcastChannel("[Firebase] FID Change"),ra.onmessage=s=>{IN(s.data.key,s.data.fid)}),ra}function MO(){wN.size===0&&ra&&(ra.close(),ra=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VO="firebase-installations-database",kO=1,ma="firebase-installations-store";let rp=null;function Zg(){return rp||(rp=Z0(VO,kO,{upgrade:(s,e)=>{switch(e){case 0:s.createObjectStore(ma)}}})),rp}async function ad(s,e){const t=Md(s),o=(await Zg()).transaction(ma,"readwrite"),c=o.objectStore(ma),d=await c.get(t);return await c.put(e,t),await o.done,(!d||d.fid!==e.fid)&&xN(s,e.fid),e}async function CN(s){const e=Md(s),r=(await Zg()).transaction(ma,"readwrite");await r.objectStore(ma).delete(e),await r.done}async function Vd(s,e){const t=Md(s),o=(await Zg()).transaction(ma,"readwrite"),c=o.objectStore(ma),d=await c.get(t),m=e(d);return m===void 0?await c.delete(t):await c.put(m,t),await o.done,m&&(!d||d.fid!==m.fid)&&xN(s,m.fid),m}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wg(s){let e;const t=await Vd(s.appConfig,r=>{const o=PO(r),c=LO(s,o);return e=c.registrationPromise,c.installationEntry});return t.fid===Fp?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function PO(s){const e=s||{fid:RO(),registrationStatus:0};return RN(e)}function LO(s,e){if(e.registrationStatus===0){if(!navigator.onLine){const o=Promise.reject(fa.create("app-offline"));return{installationEntry:e,registrationPromise:o}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=UO(s,t);return{installationEntry:t,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:FO(s)}:{installationEntry:e}}async function UO(s,e){try{const t=await xO(s,e);return ad(s.appConfig,t)}catch(t){throw _N(t)&&t.customData.serverCode===409?await CN(s.appConfig):await ad(s.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function FO(s){let e=await d0(s.appConfig);for(;e.registrationStatus===1;)await SN(100),e=await d0(s.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:r}=await Wg(s);return r||t}return e}function d0(s){return Vd(s,e=>{if(!e)throw fa.create("installation-not-found");return RN(e)})}function RN(s){return zO(s)?{fid:s.fid,registrationStatus:0}:s}function zO(s){return s.registrationStatus===1&&s.registrationTime+gN<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qO({appConfig:s,heartbeatServiceProvider:e},t){const r=BO(s,t),o=NO(s,t),c=e.getImmediate({optional:!0});if(c){const v=await c.getHeartbeatsHeader();v&&o.append("x-firebase-client",v)}const d={installation:{sdkVersion:vN,appId:s.appId}},m={method:"POST",headers:o,body:JSON.stringify(d)},g=await NN(()=>fetch(r,m));if(g.ok){const v=await g.json();return EN(v)}else throw await bN("Generate Auth Token",g)}function BO(s,{fid:e}){return`${TN(s)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jg(s,e=!1){let t;const r=await Vd(s.appConfig,c=>{if(!DN(c))throw fa.create("not-registered");const d=c.authToken;if(!e&&$O(d))return c;if(d.requestStatus===1)return t=HO(s,e),c;{if(!navigator.onLine)throw fa.create("app-offline");const m=QO(c);return t=GO(s,m),m}});return t?await t:r.authToken}async function HO(s,e){let t=await f0(s.appConfig);for(;t.authToken.requestStatus===1;)await SN(100),t=await f0(s.appConfig);const r=t.authToken;return r.requestStatus===0?Jg(s,e):r}function f0(s){return Vd(s,e=>{if(!DN(e))throw fa.create("not-registered");const t=e.authToken;return YO(t)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function GO(s,e){try{const t=await qO(s,e),r=Object.assign(Object.assign({},e),{authToken:t});return await ad(s.appConfig,r),t}catch(t){if(_N(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await CN(s.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await ad(s.appConfig,r)}throw t}}function DN(s){return s!==void 0&&s.registrationStatus===2}function $O(s){return s.requestStatus===2&&!KO(s)}function KO(s){const e=Date.now();return e<s.creationTime||s.creationTime+s.expiresIn<e+TO}function QO(s){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},s),{authToken:e})}function YO(s){return s.requestStatus===1&&s.requestTime+gN<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XO(s){const e=s,{installationEntry:t,registrationPromise:r}=await Wg(e);return r?r.catch(console.error):Jg(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZO(s,e=!1){const t=s;return await WO(t),(await Jg(t,e)).token}async function WO(s){const{registrationPromise:e}=await Wg(s);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JO(s){if(!s||!s.options)throw ap("App Configuration");if(!s.name)throw ap("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!s.options[t])throw ap(t);return{appName:s.name,projectId:s.options.projectId,apiKey:s.options.apiKey,appId:s.options.appId}}function ap(s){return fa.create("missing-app-config-values",{valueName:s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jN="installations",eM="installations-internal",tM=s=>{const e=s.getProvider("app").getImmediate(),t=JO(e),r=vi(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},nM=s=>{const e=s.getProvider("app").getImmediate(),t=vi(e,jN).getImmediate();return{getId:()=>XO(t),getToken:o=>ZO(t,o)}};function sM(){Xn(new kn(jN,tM,"PUBLIC")),Xn(new kn(eM,nM,"PRIVATE"))}sM();cn(pN,Xg);cn(pN,Xg,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const od="analytics",iM="firebase_id",rM="origin",aM=60*1e3,oM="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",ev="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bn=new Cc("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lM={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Vn=new pr("analytics","Analytics",lM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cM(s){if(!s.startsWith(ev)){const e=Vn.create("invalid-gtag-resource",{gtagURL:s});return bn.warn(e.message),""}return s}function ON(s){return Promise.all(s.map(e=>e.catch(t=>t)))}function uM(s,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(s,e)),t}function hM(s,e){const t=uM("firebase-js-sdk-policy",{createScriptURL:cM}),r=document.createElement("script"),o=`${ev}?l=${s}&id=${e}`;r.src=t?t?.createScriptURL(o):o,r.async=!0,document.head.appendChild(r)}function dM(s){let e=[];return Array.isArray(window[s])?e=window[s]:window[s]=e,e}async function fM(s,e,t,r,o,c){const d=r[o];try{if(d)await e[d];else{const g=(await ON(t)).find(v=>v.measurementId===o);g&&await e[g.appId]}}catch(m){bn.error(m)}s("config",o,c)}async function mM(s,e,t,r,o){try{let c=[];if(o&&o.send_to){let d=o.send_to;Array.isArray(d)||(d=[d]);const m=await ON(t);for(const g of d){const v=m.find(A=>A.measurementId===g),_=v&&e[v.appId];if(_)c.push(_);else{c=[];break}}}c.length===0&&(c=Object.values(e)),await Promise.all(c),s("event",r,o||{})}catch(c){bn.error(c)}}function pM(s,e,t,r){async function o(c,...d){try{if(c==="event"){const[m,g]=d;await mM(s,e,t,m,g)}else if(c==="config"){const[m,g]=d;await fM(s,e,t,r,m,g)}else if(c==="consent"){const[m,g]=d;s("consent",m,g)}else if(c==="get"){const[m,g,v]=d;s("get",m,g,v)}else if(c==="set"){const[m]=d;s("set",m)}else s(c,...d)}catch(m){bn.error(m)}}return o}function gM(s,e,t,r,o){let c=function(...d){window[r].push(arguments)};return window[o]&&typeof window[o]=="function"&&(c=window[o]),window[o]=pM(c,s,e,t),{gtagCore:c,wrappedGtag:window[o]}}function vM(s){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(ev)&&t.src.includes(s))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yM=30,_M=1e3;class TM{constructor(e={},t=_M){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const MN=new TM;function EM(s){return new Headers({Accept:"application/json","x-goog-api-key":s})}async function bM(s){var e;const{appId:t,apiKey:r}=s,o={method:"GET",headers:EM(r)},c=oM.replace("{app-id}",t),d=await fetch(c,o);if(d.status!==200&&d.status!==304){let m="";try{const g=await d.json();!((e=g.error)===null||e===void 0)&&e.message&&(m=g.error.message)}catch{}throw Vn.create("config-fetch-failed",{httpStatus:d.status,responseMessage:m})}return d.json()}async function AM(s,e=MN,t){const{appId:r,apiKey:o,measurementId:c}=s.options;if(!r)throw Vn.create("no-app-id");if(!o){if(c)return{measurementId:c,appId:r};throw Vn.create("no-api-key")}const d=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},m=new wM;return setTimeout(async()=>{m.abort()},aM),VN({appId:r,apiKey:o,measurementId:c},d,m,e)}async function VN(s,{throttleEndTimeMillis:e,backoffCount:t},r,o=MN){var c;const{appId:d,measurementId:m}=s;try{await NM(r,e)}catch(g){if(m)return bn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${m} provided in the "measurementId" field in the local Firebase config. [${g?.message}]`),{appId:d,measurementId:m};throw g}try{const g=await bM(s);return o.deleteThrottleMetadata(d),g}catch(g){const v=g;if(!SM(v)){if(o.deleteThrottleMetadata(d),m)return bn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${m} provided in the "measurementId" field in the local Firebase config. [${v?.message}]`),{appId:d,measurementId:m};throw g}const _=Number((c=v?.customData)===null||c===void 0?void 0:c.httpStatus)===503?MT(t,o.intervalMillis,yM):MT(t,o.intervalMillis),A={throttleEndTimeMillis:Date.now()+_,backoffCount:t+1};return o.setThrottleMetadata(d,A),bn.debug(`Calling attemptFetch again in ${_} millis`),VN(s,A,r,o)}}function NM(s,e){return new Promise((t,r)=>{const o=Math.max(e-Date.now(),0),c=setTimeout(t,o);s.addEventListener(()=>{clearTimeout(c),r(Vn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function SM(s){if(!(s instanceof Zn)||!s.customData)return!1;const e=Number(s.customData.httpStatus);return e===429||e===500||e===503||e===504}class wM{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function xM(s,e,t,r,o){if(o&&o.global){s("event",t,r);return}else{const c=await e,d=Object.assign(Object.assign({},r),{send_to:c});s("event",t,d)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IM(){if(Yp())try{await Xp()}catch(s){return bn.warn(Vn.create("indexeddb-unavailable",{errorInfo:s?.toString()}).message),!1}else return bn.warn(Vn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function CM(s,e,t,r,o,c,d){var m;const g=AM(s);g.then(D=>{t[D.measurementId]=D.appId,s.options.measurementId&&D.measurementId!==s.options.measurementId&&bn.warn(`The measurement ID in the local Firebase config (${s.options.measurementId}) does not match the measurement ID fetched from the server (${D.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(D=>bn.error(D)),e.push(g);const v=IM().then(D=>{if(D)return r.getId()}),[_,A]=await Promise.all([g,v]);vM(c)||hM(c,_.measurementId),o("js",new Date);const b=(m=d?.config)!==null&&m!==void 0?m:{};return b[rM]="firebase",b.update=!0,A!=null&&(b[iM]=A),o("config",_.measurementId,b),_.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RM{constructor(e){this.app=e}_delete(){return delete dc[this.app.options.appId],Promise.resolve()}}let dc={},m0=[];const p0={};let op="dataLayer",DM="gtag",g0,kN,v0=!1;function jM(){const s=[];if(K0()&&s.push("This is a browser extension environment."),Q0()||s.push("Cookies are not available."),s.length>0){const e=s.map((r,o)=>`(${o+1}) ${r}`).join(" "),t=Vn.create("invalid-analytics-context",{errorInfo:e});bn.warn(t.message)}}function OM(s,e,t){jM();const r=s.options.appId;if(!r)throw Vn.create("no-app-id");if(!s.options.apiKey)if(s.options.measurementId)bn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${s.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Vn.create("no-api-key");if(dc[r]!=null)throw Vn.create("already-exists",{id:r});if(!v0){dM(op);const{wrappedGtag:c,gtagCore:d}=gM(dc,m0,p0,op,DM);kN=c,g0=d,v0=!0}return dc[r]=CM(s,m0,p0,e,g0,op,t),new RM(s)}function MM(s=Rc()){s=ht(s);const e=vi(s,od);return e.isInitialized()?e.getImmediate():VM(s)}function VM(s,e={}){const t=vi(s,od);if(t.isInitialized()){const o=t.getImmediate();if(rr(e,t.getOptions()))return o;throw Vn.create("already-initialized")}return t.initialize({options:e})}function kM(s,e,t,r){s=ht(s),xM(kN,dc[s.app.options.appId],e,t,r).catch(o=>bn.error(o))}const y0="@firebase/analytics",_0="0.10.16";function PM(){Xn(new kn(od,(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("installations-internal").getImmediate();return OM(r,o,t)},"PUBLIC")),Xn(new kn("analytics-internal",s,"PRIVATE")),cn(y0,_0),cn(y0,_0,"esm2017");function s(e){try{const t=e.getProvider(od).getImmediate();return{logEvent:(r,o,c)=>kM(t,r,o,c)}}catch(t){throw Vn.create("interop-component-reg-failed",{reason:t})}}}PM();var zp,T0,kd=function(){var s=self.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0];if(s&&s.responseStart>0&&s.responseStart<performance.now())return s},PN=function(s){if(document.readyState==="loading")return"loading";var e=kd();if(e){if(s<e.domInteractive)return"loading";if(e.domContentLoadedEventStart===0||s<e.domContentLoadedEventStart)return"dom-interactive";if(e.domComplete===0||s<e.domComplete)return"dom-content-loaded"}return"complete"},LM=function(s){var e=s.nodeName;return s.nodeType===1?e.toLowerCase():e.toUpperCase().replace(/^#/,"")},tv=function(s,e){var t="";try{for(;s&&s.nodeType!==9;){var r=s,o=r.id?"#"+r.id:LM(r)+(r.classList&&r.classList.value&&r.classList.value.trim()&&r.classList.value.trim().length?"."+r.classList.value.trim().replace(/\s+/g,"."):"");if(t.length+o.length>(e||100)-1)return t||o;if(t=t?o+">"+t:o,r.id)break;s=r.parentNode}}catch{}return t},LN=-1,UM=function(){return LN},Hc=function(s){addEventListener("pageshow",function(e){e.persisted&&(LN=e.timeStamp,s(e))},!0)},nv=function(){var s=kd();return s&&s.activationStart||0},dr=function(s,e){var t=kd(),r="navigate";return UM()>=0?r="back-forward-cache":t&&(document.prerendering||nv()>0?r="prerender":document.wasDiscarded?r="restore":t.type&&(r=t.type.replace(/_/g,"-"))),{name:s,value:e===void 0?-1:e,rating:"good",delta:0,entries:[],id:"v4-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:r}},Ho=function(s,e,t){try{if(PerformanceObserver.supportedEntryTypes.includes(s)){var r=new PerformanceObserver(function(o){Promise.resolve().then(function(){e(o.getEntries())})});return r.observe(Object.assign({type:s,buffered:!0},t||{})),r}}catch{}},fr=function(s,e,t,r){var o,c;return function(d){e.value>=0&&(d||r)&&((c=e.value-(o||0))||o===void 0)&&(o=e.value,e.delta=c,e.rating=function(m,g){return m>g[1]?"poor":m>g[0]?"needs-improvement":"good"}(e.value,t),s(e))}},sv=function(s){requestAnimationFrame(function(){return requestAnimationFrame(function(){return s()})})},Pd=function(s){document.addEventListener("visibilitychange",function(){document.visibilityState==="hidden"&&s()})},iv=function(s){var e=!1;return function(){e||(s(),e=!0)}},Eo=-1,E0=function(){return document.visibilityState!=="hidden"||document.prerendering?1/0:0},ld=function(s){document.visibilityState==="hidden"&&Eo>-1&&(Eo=s.type==="visibilitychange"?s.timeStamp:0,FM())},b0=function(){addEventListener("visibilitychange",ld,!0),addEventListener("prerenderingchange",ld,!0)},FM=function(){removeEventListener("visibilitychange",ld,!0),removeEventListener("prerenderingchange",ld,!0)},UN=function(){return Eo<0&&(Eo=E0(),b0(),Hc(function(){setTimeout(function(){Eo=E0(),b0()},0)})),{get firstHiddenTime(){return Eo}}},rv=function(s){document.prerendering?addEventListener("prerenderingchange",function(){return s()},!0):s()},A0=[1800,3e3],zM=function(s,e){e=e||{},rv(function(){var t,r=UN(),o=dr("FCP"),c=Ho("paint",function(d){d.forEach(function(m){m.name==="first-contentful-paint"&&(c.disconnect(),m.startTime<r.firstHiddenTime&&(o.value=Math.max(m.startTime-nv(),0),o.entries.push(m),t(!0)))})});c&&(t=fr(s,o,A0,e.reportAllChanges),Hc(function(d){o=dr("FCP"),t=fr(s,o,A0,e.reportAllChanges),sv(function(){o.value=performance.now()-d.timeStamp,t(!0)})}))})},N0=[.1,.25],qM=function(s,e){(function(t,r){r=r||{},zM(iv(function(){var o,c=dr("CLS",0),d=0,m=[],g=function(_){_.forEach(function(A){if(!A.hadRecentInput){var b=m[0],D=m[m.length-1];d&&A.startTime-D.startTime<1e3&&A.startTime-b.startTime<5e3?(d+=A.value,m.push(A)):(d=A.value,m=[A])}}),d>c.value&&(c.value=d,c.entries=m,o())},v=Ho("layout-shift",g);v&&(o=fr(t,c,N0,r.reportAllChanges),Pd(function(){g(v.takeRecords()),o(!0)}),Hc(function(){d=0,c=dr("CLS",0),o=fr(t,c,N0,r.reportAllChanges),sv(function(){return o()})}),setTimeout(o,0))}))})(function(t){var r=function(o){var c,d={};if(o.entries.length){var m=o.entries.reduce(function(v,_){return v&&v.value>_.value?v:_});if(m&&m.sources&&m.sources.length){var g=(c=m.sources).find(function(v){return v.node&&v.node.nodeType===1})||c[0];g&&(d={largestShiftTarget:tv(g.node),largestShiftTime:m.startTime,largestShiftValue:m.value,largestShiftSource:g,largestShiftEntry:m,loadState:PN(m.startTime)})}}return Object.assign(o,{attribution:d})}(t);s(r)},e)},FN=0,lp=1/0,Ah=0,BM=function(s){s.forEach(function(e){e.interactionId&&(lp=Math.min(lp,e.interactionId),Ah=Math.max(Ah,e.interactionId),FN=Ah?(Ah-lp)/7+1:0)})},zN=function(){return zp?FN:performance.interactionCount||0},HM=function(){"interactionCount"in performance||zp||(zp=Ho("event",BM,{type:"event",buffered:!0,durationThreshold:0}))},rs=[],fc=new Map,qN=0,GM=function(){var s=Math.min(rs.length-1,Math.floor((zN()-qN)/50));return rs[s]},BN=[],$M=function(s){if(BN.forEach(function(o){return o(s)}),s.interactionId||s.entryType==="first-input"){var e=rs[rs.length-1],t=fc.get(s.interactionId);if(t||rs.length<10||s.duration>e.latency){if(t)s.duration>t.latency?(t.entries=[s],t.latency=s.duration):s.duration===t.latency&&s.startTime===t.entries[0].startTime&&t.entries.push(s);else{var r={id:s.interactionId,latency:s.duration,entries:[s]};fc.set(r.id,r),rs.push(r)}rs.sort(function(o,c){return c.latency-o.latency}),rs.length>10&&rs.splice(10).forEach(function(o){return fc.delete(o.id)})}}},av=function(s){var e=self.requestIdleCallback||self.setTimeout,t=-1;return s=iv(s),document.visibilityState==="hidden"?s():(t=e(s),Pd(s)),t},S0=[200,500],KM=function(s,e){"PerformanceEventTiming"in self&&"interactionId"in PerformanceEventTiming.prototype&&(e=e||{},rv(function(){var t;HM();var r,o=dr("INP"),c=function(m){av(function(){m.forEach($M);var g=GM();g&&g.latency!==o.value&&(o.value=g.latency,o.entries=g.entries,r())})},d=Ho("event",c,{durationThreshold:(t=e.durationThreshold)!==null&&t!==void 0?t:40});r=fr(s,o,S0,e.reportAllChanges),d&&(d.observe({type:"first-input",buffered:!0}),Pd(function(){c(d.takeRecords()),r(!0)}),Hc(function(){qN=zN(),rs.length=0,fc.clear(),o=dr("INP"),r=fr(s,o,S0,e.reportAllChanges)}))}))},xo=[],Ji=[],qp=0,ov=new WeakMap,Io=new Map,Bp=-1,QM=function(s){xo=xo.concat(s),HN()},HN=function(){Bp<0&&(Bp=av(YM))},YM=function(){Io.size>10&&Io.forEach(function(d,m){fc.has(m)||Io.delete(m)});var s=rs.map(function(d){return ov.get(d.entries[0])}),e=Ji.length-50;Ji=Ji.filter(function(d,m){return m>=e||s.includes(d)});for(var t=new Set,r=0;r<Ji.length;r++){var o=Ji[r];GN(o.startTime,o.processingEnd).forEach(function(d){t.add(d)})}var c=xo.length-1-50;xo=xo.filter(function(d,m){return d.startTime>qp&&m>c||t.has(d)}),Bp=-1};BN.push(function(s){s.interactionId&&s.target&&!Io.has(s.interactionId)&&Io.set(s.interactionId,s.target)},function(s){var e,t=s.startTime+s.duration;qp=Math.max(qp,s.processingEnd);for(var r=Ji.length-1;r>=0;r--){var o=Ji[r];if(Math.abs(t-o.renderTime)<=8){(e=o).startTime=Math.min(s.startTime,e.startTime),e.processingStart=Math.min(s.processingStart,e.processingStart),e.processingEnd=Math.max(s.processingEnd,e.processingEnd),e.entries.push(s);break}}e||(e={startTime:s.startTime,processingStart:s.processingStart,processingEnd:s.processingEnd,renderTime:t,entries:[s]},Ji.push(e)),(s.interactionId||s.entryType==="first-input")&&ov.set(s,e),HN()});var GN=function(s,e){for(var t,r=[],o=0;t=xo[o];o++)if(!(t.startTime+t.duration<s)){if(t.startTime>e)break;r.push(t)}return r},XM=function(s,e){T0||(T0=Ho("long-animation-frame",QM)),KM(function(t){var r=function(o){var c=o.entries[0],d=ov.get(c),m=c.processingStart,g=d.processingEnd,v=d.entries.sort(function(w,G){return w.processingStart-G.processingStart}),_=GN(c.startTime,g),A=o.entries.find(function(w){return w.target}),b=A&&A.target||Io.get(c.interactionId),D=[c.startTime+c.duration,g].concat(_.map(function(w){return w.startTime+w.duration})),C=Math.max.apply(Math,D),F={interactionTarget:tv(b),interactionTargetElement:b,interactionType:c.name.startsWith("key")?"keyboard":"pointer",interactionTime:c.startTime,nextPaintTime:C,processedEventEntries:v,longAnimationFrameEntries:_,inputDelay:m-c.startTime,processingDuration:g-m,presentationDelay:Math.max(C-g,0),loadState:PN(c.startTime)};return Object.assign(o,{attribution:F})}(t);s(r)},e)},w0=[2500,4e3],cp={},ZM=function(s,e){(function(t,r){r=r||{},rv(function(){var o,c=UN(),d=dr("LCP"),m=function(_){r.reportAllChanges||(_=_.slice(-1)),_.forEach(function(A){A.startTime<c.firstHiddenTime&&(d.value=Math.max(A.startTime-nv(),0),d.entries=[A],o())})},g=Ho("largest-contentful-paint",m);if(g){o=fr(t,d,w0,r.reportAllChanges);var v=iv(function(){cp[d.id]||(m(g.takeRecords()),g.disconnect(),cp[d.id]=!0,o(!0))});["keydown","click"].forEach(function(_){addEventListener(_,function(){return av(v)},{once:!0,capture:!0})}),Pd(v),Hc(function(_){d=dr("LCP"),o=fr(t,d,w0,r.reportAllChanges),sv(function(){d.value=performance.now()-_.timeStamp,cp[d.id]=!0,o(!0)})})}})})(function(t){var r=function(o){var c={timeToFirstByte:0,resourceLoadDelay:0,resourceLoadDuration:0,elementRenderDelay:o.value};if(o.entries.length){var d=kd();if(d){var m=d.activationStart||0,g=o.entries[o.entries.length-1],v=g.url&&performance.getEntriesByType("resource").filter(function(C){return C.name===g.url})[0],_=Math.max(0,d.responseStart-m),A=Math.max(_,v?(v.requestStart||v.startTime)-m:0),b=Math.max(A,v?v.responseEnd-m:0),D=Math.max(b,g.startTime-m);c={element:tv(g.element),timeToFirstByte:_,resourceLoadDelay:A-_,resourceLoadDuration:b-A,elementRenderDelay:D-b,navigationEntry:d,lcpEntry:g},g.url&&(c.url=g.url),v&&(c.lcpResourceEntry=v)}}return Object.assign(o,{attribution:c})}(t);s(r)},e)};const x0="@firebase/performance",Hp="0.7.6";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $N=Hp,WM="FB-PERF-TRACE-START",JM="FB-PERF-TRACE-STOP",Gp="FB-PERF-TRACE-MEASURE",KN="_wt_",QN="_fp",YN="_fcp",XN="_fid",ZN="_lcp",e2="lcp_element",WN="_inp",t2="inp_interactionTarget",JN="_cls",n2="cls_largestShiftTarget",eS="@firebase/performance/config",tS="@firebase/performance/configexpire",s2="performance",nS="Performance";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i2={"trace started":"Trace {$traceName} was started before.","trace stopped":"Trace {$traceName} is not running.","nonpositive trace startTime":"Trace {$traceName} startTime should be positive.","nonpositive trace duration":"Trace {$traceName} duration should be positive.","no window":"Window is not available.","no app id":"App id is not available.","no project id":"Project id is not available.","no api key":"Api key is not available.","invalid cc log":"Attempted to queue invalid cc event","FB not default":"Performance can only start when Firebase app instance is the default one.","RC response not ok":"RC response is not ok","invalid attribute name":"Attribute name {$attributeName} is invalid.","invalid attribute value":"Attribute value {$attributeValue} is invalid.","invalid custom metric name":"Custom metric name {$customMetricName} is invalid","invalid String merger input":"Input for String merger is invalid, contact support team to resolve.","already initialized":"initializePerformance() has already been called with different options. To avoid this error, call initializePerformance() with the same options as when it was originally called, or call getPerformance() to return the already initialized instance."},on=new pr(s2,nS,i2);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mr=new Cc(nS);mr.logLevel=Ue.INFO;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let up,sS;class Vt{constructor(e){if(this.window=e,!e)throw on.create("no window");this.performance=e.performance,this.PerformanceObserver=e.PerformanceObserver,this.windowLocation=e.location,this.navigator=e.navigator,this.document=e.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=e.localStorage),e.perfMetrics&&e.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=e.perfMetrics.onFirstInputDelay),this.onLCP=ZM,this.onINP=XM,this.onCLS=qM}getUrl(){return this.windowLocation.href.split("?")[0]}mark(e){!this.performance||!this.performance.mark||this.performance.mark(e)}measure(e,t,r){!this.performance||!this.performance.measure||this.performance.measure(e,t,r)}getEntriesByType(e){return!this.performance||!this.performance.getEntriesByType?[]:this.performance.getEntriesByType(e)}getEntriesByName(e){return!this.performance||!this.performance.getEntriesByName?[]:this.performance.getEntriesByName(e)}getTimeOrigin(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)}requiredApisAvailable(){return!fetch||!Promise||!Q0()?(mr.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1):Yp()?!0:(mr.info("IndexedDB is not supported by current browser"),!1)}setupObserver(e,t){if(!this.PerformanceObserver)return;new this.PerformanceObserver(o=>{for(const c of o.getEntries())t(c)}).observe({entryTypes:[e]})}static getInstance(){return up===void 0&&(up=new Vt(sS)),up}}function r2(s){sS=s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let iS;function a2(s){const e=s.getId();return e.then(t=>{iS=t}),e}function lv(){return iS}function o2(s){const e=s.getToken();return e.then(t=>{}),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I0(s,e){const t=s.length-e.length;if(t<0||t>1)throw on.create("invalid String merger input");const r=[];for(let o=0;o<s.length;o++)r.push(s.charAt(o)),e.length>o&&r.push(e.charAt(o));return r.join("")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hp;class On{constructor(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=I0("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=I0("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}getFlTransportFullUrl(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)}static getInstance(){return hp===void 0&&(hp=new On),hp}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mc;(function(s){s[s.UNKNOWN=0]="UNKNOWN",s[s.VISIBLE=1]="VISIBLE",s[s.HIDDEN=2]="HIDDEN"})(mc||(mc={}));const l2=["firebase_","google_","ga_"],c2=new RegExp("^[a-zA-Z]\\w*$"),u2=40,h2=100;function d2(){const s=Vt.getInstance().navigator;return s?.serviceWorker?s.serviceWorker.controller?2:3:1}function f2(){switch(Vt.getInstance().document.visibilityState){case"visible":return mc.VISIBLE;case"hidden":return mc.HIDDEN;default:return mc.UNKNOWN}}function m2(){const e=Vt.getInstance().navigator.connection;switch(e&&e.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}function p2(s){return s.length===0||s.length>u2?!1:!l2.some(t=>s.startsWith(t))&&!!s.match(c2)}function g2(s){return s.length!==0&&s.length<=h2}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rS(s){var e;const t=(e=s.options)===null||e===void 0?void 0:e.appId;if(!t)throw on.create("no app id");return t}function v2(s){var e;const t=(e=s.options)===null||e===void 0?void 0:e.projectId;if(!t)throw on.create("no project id");return t}function y2(s){var e;const t=(e=s.options)===null||e===void 0?void 0:e.apiKey;if(!t)throw on.create("no api key");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _2="0.0.1",is={loggingEnabled:!0},T2="FIREBASE_INSTALLATIONS_AUTH";function E2(s,e){const t=b2();return t?(C0(t),Promise.resolve()):S2(s,e).then(C0).then(r=>A2(r),()=>{})}function b2(){const s=Vt.getInstance().localStorage;if(!s)return;const e=s.getItem(tS);if(!e||!w2(e))return;const t=s.getItem(eS);if(t)try{return JSON.parse(t)}catch{return}}function A2(s){const e=Vt.getInstance().localStorage;!s||!e||(e.setItem(eS,JSON.stringify(s)),e.setItem(tS,String(Date.now()+On.getInstance().configTimeToLive*60*60*1e3)))}const N2="Could not fetch config, will use default configs";function S2(s,e){return o2(s.installations).then(t=>{const r=v2(s.app),o=y2(s.app),c=`https://firebaseremoteconfig.googleapis.com/v1/projects/${r}/namespaces/fireperf:fetch?key=${o}`,d=new Request(c,{method:"POST",headers:{Authorization:`${T2} ${t}`},body:JSON.stringify({app_instance_id:e,app_instance_id_token:t,app_id:rS(s.app),app_version:$N,sdk_version:_2})});return fetch(d).then(m=>{if(m.ok)return m.json();throw on.create("RC response not ok")})}).catch(()=>{mr.info(N2)})}function C0(s){if(!s)return s;const e=On.getInstance(),t=s.entries||{};return t.fpr_enabled!==void 0?e.loggingEnabled=String(t.fpr_enabled)==="true":e.loggingEnabled=is.loggingEnabled,t.fpr_log_source?e.logSource=Number(t.fpr_log_source):is.logSource&&(e.logSource=is.logSource),t.fpr_log_endpoint_url?e.logEndPointUrl=t.fpr_log_endpoint_url:is.logEndPointUrl&&(e.logEndPointUrl=is.logEndPointUrl),t.fpr_log_transport_key?e.transportKey=t.fpr_log_transport_key:is.transportKey&&(e.transportKey=is.transportKey),t.fpr_vc_network_request_sampling_rate!==void 0?e.networkRequestsSamplingRate=Number(t.fpr_vc_network_request_sampling_rate):is.networkRequestsSamplingRate!==void 0&&(e.networkRequestsSamplingRate=is.networkRequestsSamplingRate),t.fpr_vc_trace_sampling_rate!==void 0?e.tracesSamplingRate=Number(t.fpr_vc_trace_sampling_rate):is.tracesSamplingRate!==void 0&&(e.tracesSamplingRate=is.tracesSamplingRate),e.logTraceAfterSampling=R0(e.tracesSamplingRate),e.logNetworkAfterSampling=R0(e.networkRequestsSamplingRate),s}function w2(s){return Number(s)>Date.now()}function R0(s){return Math.random()<=s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cv=1,dp;function aS(s){return cv=2,dp=dp||I2(s),dp}function x2(){return cv===3}function I2(s){return C2().then(()=>a2(s.installations)).then(e=>E2(s,e)).then(()=>D0(),()=>D0())}function C2(){const s=Vt.getInstance().document;return new Promise(e=>{if(s&&s.readyState!=="complete"){const t=()=>{s.readyState==="complete"&&(s.removeEventListener("readystatechange",t),e())};s.addEventListener("readystatechange",t)}else e()})}function D0(){cv=3}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oS=10*1e3,R2=5.5*1e3,D2=1e3,lS=3;let Vh=lS,la=[],j0=!1;function j2(){j0||(uv(R2),j0=!0)}function uv(s){setTimeout(()=>{Vh<=0||(la.length>0&&cS(),uv(oS))},s)}function cS(){const s=la.splice(0,D2),e=s.map(r=>({source_extension_json_proto3:r.message,event_time_ms:String(r.eventTime)})),t={request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:On.getInstance().logSource,log_event:e};O2(t).then(()=>{Vh=lS}).catch(()=>{la=[...s,...la],Vh--,mr.info(`Tries left: ${Vh}.`),uv(oS)})}function O2(s){const e=On.getInstance().getFlTransportFullUrl(),t=JSON.stringify(s);return navigator.sendBeacon&&navigator.sendBeacon(e,t)?Promise.resolve():fetch(e,{method:"POST",body:t,keepalive:!0}).then()}function M2(s){if(!s.eventTime||!s.message)throw on.create("invalid cc log");la=[...la,s]}function V2(s){return(...e)=>{const t=s(...e);M2({message:t,eventTime:Date.now()})}}function k2(){for(;la.length>0;)cS()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pc;function uS(s,e){pc||(pc={send:V2(U2),flush:k2}),pc.send(s,e)}function Nh(s){const e=On.getInstance();!e.instrumentationEnabled&&s.isAuto||!e.dataCollectionEnabled&&!s.isAuto||Vt.getInstance().requiredApisAvailable()&&(x2()?fp(s):aS(s.performanceController).then(()=>fp(s),()=>fp(s)))}function P2(){pc&&pc.flush()}function fp(s){if(!lv())return;const e=On.getInstance();!e.loggingEnabled||!e.logTraceAfterSampling||uS(s,1)}function L2(s){const e=On.getInstance();if(!e.instrumentationEnabled)return;const t=s.url,r=e.logEndPointUrl.split("?")[0],o=e.flTransportEndpointUrl.split("?")[0];t===r||t===o||!e.loggingEnabled||!e.logNetworkAfterSampling||uS(s,0)}function U2(s,e){return e===0?F2(s):z2(s)}function F2(s){const e={url:s.url,http_method:s.httpMethod||0,http_response_code:200,response_payload_bytes:s.responsePayloadBytes,client_start_time_us:s.startTimeUs,time_to_response_initiated_us:s.timeToResponseInitiatedUs,time_to_response_completed_us:s.timeToResponseCompletedUs},t={application_info:hS(s.performanceController.app),network_request_metric:e};return JSON.stringify(t)}function z2(s){const e={name:s.name,is_auto:s.isAuto,client_start_time_us:s.startTimeUs,duration_us:s.durationUs};Object.keys(s.counters).length!==0&&(e.counters=s.counters);const t=s.getAttributes();Object.keys(t).length!==0&&(e.custom_attributes=t);const r={application_info:hS(s.performanceController.app),trace_metric:e};return JSON.stringify(r)}function hS(s){return{google_app_id:rS(s),app_instance_id:lv(),web_app_info:{sdk_version:$N,page_url:Vt.getInstance().getUrl(),service_worker_status:d2(),visibility_state:f2(),effective_connection_type:m2()},application_process_state:0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O0(s,e){const t=e;if(!t||t.responseStart===void 0)return;const r=Vt.getInstance().getTimeOrigin(),o=Math.floor((t.startTime+r)*1e3),c=t.responseStart?Math.floor((t.responseStart-t.startTime)*1e3):void 0,d=Math.floor((t.responseEnd-t.startTime)*1e3),m=t.name&&t.name.split("?")[0],g={performanceController:s,url:m,responsePayloadBytes:t.transferSize,startTimeUs:o,timeToResponseInitiatedUs:c,timeToResponseCompletedUs:d};L2(g)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q2=100,B2="_",H2=[QN,YN,XN,ZN,JN,WN];function G2(s,e){return s.length===0||s.length>q2?!1:e&&e.startsWith(KN)&&H2.indexOf(s)>-1||!s.startsWith(B2)}function $2(s){const e=Math.floor(s);return e<s&&mr.info(`Metric value should be an Integer, setting the value as : ${e}.`),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xc{constructor(e,t,r=!1,o){this.performanceController=e,this.name=t,this.isAuto=r,this.state=1,this.customAttributes={},this.counters={},this.api=Vt.getInstance(),this.randomId=Math.floor(Math.random()*1e6),this.isAuto||(this.traceStartMark=`${WM}-${this.randomId}-${this.name}`,this.traceStopMark=`${JM}-${this.randomId}-${this.name}`,this.traceMeasure=o||`${Gp}-${this.randomId}-${this.name}`,o&&this.calculateTraceMetrics())}start(){if(this.state!==1)throw on.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2}stop(){if(this.state!==2)throw on.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),Nh(this)}record(e,t,r){if(e<=0)throw on.create("nonpositive trace startTime",{traceName:this.name});if(t<=0)throw on.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(t*1e3),this.startTimeUs=Math.floor(e*1e3),r&&r.attributes&&(this.customAttributes=Object.assign({},r.attributes)),r&&r.metrics)for(const o of Object.keys(r.metrics))isNaN(Number(r.metrics[o]))||(this.counters[o]=Math.floor(Number(r.metrics[o])));Nh(this)}incrementMetric(e,t=1){this.counters[e]===void 0?this.putMetric(e,t):this.putMetric(e,this.counters[e]+t)}putMetric(e,t){if(G2(e,this.name))this.counters[e]=$2(t??0);else throw on.create("invalid custom metric name",{customMetricName:e})}getMetric(e){return this.counters[e]||0}putAttribute(e,t){const r=p2(e),o=g2(t);if(r&&o){this.customAttributes[e]=t;return}if(!r)throw on.create("invalid attribute name",{attributeName:e});if(!o)throw on.create("invalid attribute value",{attributeValue:t})}getAttribute(e){return this.customAttributes[e]}removeAttribute(e){this.customAttributes[e]!==void 0&&delete this.customAttributes[e]}getAttributes(){return Object.assign({},this.customAttributes)}setStartTime(e){this.startTimeUs=e}setDuration(e){this.durationUs=e}calculateTraceMetrics(){const e=this.api.getEntriesByName(this.traceMeasure),t=e&&e[0];t&&(this.durationUs=Math.floor(t.duration*1e3),this.startTimeUs=Math.floor((t.startTime+this.api.getTimeOrigin())*1e3))}static createOobTrace(e,t,r,o,c){const d=Vt.getInstance().getUrl();if(!d)return;const m=new xc(e,KN+d,!0),g=Math.floor(Vt.getInstance().getTimeOrigin()*1e3);m.setStartTime(g),t&&t[0]&&(m.setDuration(Math.floor(t[0].duration*1e3)),m.putMetric("domInteractive",Math.floor(t[0].domInteractive*1e3)),m.putMetric("domContentLoadedEventEnd",Math.floor(t[0].domContentLoadedEventEnd*1e3)),m.putMetric("loadEventEnd",Math.floor(t[0].loadEventEnd*1e3)));const v="first-paint",_="first-contentful-paint";if(r){const A=r.find(D=>D.name===v);A&&A.startTime&&m.putMetric(QN,Math.floor(A.startTime*1e3));const b=r.find(D=>D.name===_);b&&b.startTime&&m.putMetric(YN,Math.floor(b.startTime*1e3)),c&&m.putMetric(XN,Math.floor(c*1e3))}this.addWebVitalMetric(m,ZN,e2,o.lcp),this.addWebVitalMetric(m,JN,n2,o.cls),this.addWebVitalMetric(m,WN,t2,o.inp),Nh(m),P2()}static addWebVitalMetric(e,t,r,o){o&&(e.putMetric(t,Math.floor(o.value*1e3)),o.elementAttribution&&e.putAttribute(r,o.elementAttribution))}static createUserTimingTrace(e,t){const r=new xc(e,t,!1,t);Nh(r)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kh={},M0=!1,dS;function V0(s){lv()&&(setTimeout(()=>Q2(s),0),setTimeout(()=>K2(s),0),setTimeout(()=>Y2(s),0))}function K2(s){const e=Vt.getInstance(),t=e.getEntriesByType("resource");for(const r of t)O0(s,r);e.setupObserver("resource",r=>O0(s,r))}function Q2(s){const e=Vt.getInstance();"onpagehide"in window?e.document.addEventListener("pagehide",()=>mp(s)):e.document.addEventListener("unload",()=>mp(s)),e.document.addEventListener("visibilitychange",()=>{e.document.visibilityState==="hidden"&&mp(s)}),e.onFirstInputDelay&&e.onFirstInputDelay(t=>{dS=t}),e.onLCP(t=>{var r;kh.lcp={value:t.value,elementAttribution:(r=t.attribution)===null||r===void 0?void 0:r.element}}),e.onCLS(t=>{var r;kh.cls={value:t.value,elementAttribution:(r=t.attribution)===null||r===void 0?void 0:r.largestShiftTarget}}),e.onINP(t=>{var r;kh.inp={value:t.value,elementAttribution:(r=t.attribution)===null||r===void 0?void 0:r.interactionTarget}})}function Y2(s){const e=Vt.getInstance(),t=e.getEntriesByType("measure");for(const r of t)k0(s,r);e.setupObserver("measure",r=>k0(s,r))}function k0(s,e){const t=e.name;t.substring(0,Gp.length)!==Gp&&xc.createUserTimingTrace(s,t)}function mp(s){if(!M0){M0=!0;const e=Vt.getInstance(),t=e.getEntriesByType("navigation"),r=e.getEntriesByType("paint");setTimeout(()=>{xc.createOobTrace(s,t,r,kh,dS)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X2{constructor(e,t){this.app=e,this.installations=t,this.initialized=!1}_init(e){this.initialized||(e?.dataCollectionEnabled!==void 0&&(this.dataCollectionEnabled=e.dataCollectionEnabled),e?.instrumentationEnabled!==void 0&&(this.instrumentationEnabled=e.instrumentationEnabled),Vt.getInstance().requiredApisAvailable()?Xp().then(t=>{t&&(j2(),aS(this).then(()=>V0(this),()=>V0(this)),this.initialized=!0)}).catch(t=>{mr.info(`Environment doesn't support IndexedDB: ${t}`)}):mr.info('Firebase Performance cannot start if the browser does not support "Fetch" and "Promise", or cookies are disabled.'))}set instrumentationEnabled(e){On.getInstance().instrumentationEnabled=e}get instrumentationEnabled(){return On.getInstance().instrumentationEnabled}set dataCollectionEnabled(e){On.getInstance().dataCollectionEnabled=e}get dataCollectionEnabled(){return On.getInstance().dataCollectionEnabled}}const Z2="[DEFAULT]";function W2(s=Rc()){return s=ht(s),vi(s,"performance").getImmediate()}const J2=(s,{options:e})=>{const t=s.getProvider("app").getImmediate(),r=s.getProvider("installations-internal").getImmediate();if(t.name!==Z2)throw on.create("FB not default");if(typeof window>"u")throw on.create("no window");r2(window);const o=new X2(t,r);return o._init(e),o};function eV(){Xn(new kn("performance",J2,"PUBLIC")),cn(x0,Hp),cn(x0,Hp,"esm2017")}eV();const tV={apiKey:"AIzaSyCbU834quCY8hjSffRwljJLgZrcxK8i2F4",authDomain:"liquidacionapp-62962.firebaseapp.com",projectId:"liquidacionapp-62962",storageBucket:"liquidacionapp-62962.firebasestorage.app",messagingSenderId:"851382130132",appId:"1:851382130132:web:eaba38fab449f14fb5b241"},Gc=W0(tV);typeof window<"u"&&MM(Gc);typeof window<"u"&&W2(Gc);const nV=xR(Gc),en=xj(Gc);pO(Gc);const gc={ADMIN:"admin",CONTADOR:"contador",CLIENTE:"cliente"},ct={MANAGE_INVENTORY:"canManageInventory",CREATE_MOVEMENTS:"canCreateMovements",VIEW_ALL_MOVEMENTS:"canViewAllMovements",MANAGE_VEHICLES:"canManageVehicles",MANAGE_SUPPLIERS:"canManageSuppliers",VIEW_REPORTS:"canViewReports",EXPORT_REPORTS:"canExportReports",MODIFY_SETTINGS:"canModifySettings"},sV="contacto.evert@gmail.com",iV=s=>{switch(s){case gc.ADMIN:return{[ct.MANAGE_INVENTORY]:!0,[ct.CREATE_MOVEMENTS]:!0,[ct.VIEW_ALL_MOVEMENTS]:!0,[ct.MANAGE_VEHICLES]:!0,[ct.MANAGE_SUPPLIERS]:!0,[ct.VIEW_REPORTS]:!0,[ct.EXPORT_REPORTS]:!0,[ct.MODIFY_SETTINGS]:!0};case gc.CONTADOR:return{[ct.MANAGE_INVENTORY]:!0,[ct.CREATE_MOVEMENTS]:!0,[ct.VIEW_ALL_MOVEMENTS]:!0,[ct.MANAGE_VEHICLES]:!1,[ct.MANAGE_SUPPLIERS]:!1,[ct.VIEW_REPORTS]:!0,[ct.EXPORT_REPORTS]:!0,[ct.MODIFY_SETTINGS]:!1};case gc.CLIENTE:default:return{[ct.MANAGE_INVENTORY]:!1,[ct.CREATE_MOVEMENTS]:!0,[ct.VIEW_ALL_MOVEMENTS]:!1,[ct.MANAGE_VEHICLES]:!1,[ct.MANAGE_SUPPLIERS]:!1,[ct.VIEW_REPORTS]:!1,[ct.EXPORT_REPORTS]:!1,[ct.MODIFY_SETTINGS]:!1}}},rV=s=>s===sV?gc.ADMIN:gc.CLIENTE,aV=async(s,e={})=>{const t=_r(en,"artifacts/1:851382130132:web:eaba38fab449f14fb5b241/users",s.uid);try{const r=await Dd(t);if(r.exists())return{success:!0,userData:r.data(),isNewUser:!1};{const o=rV(s.email),c={uid:s.uid,email:s.email,displayName:s.displayName||"",photoURL:s.photoURL||"",role:o,emailVerified:s.emailVerified,combustiblesPermissions:iV(o),createdAt:new Date().toISOString(),lastLogin:new Date().toISOString(),...e};return await Pj(t,c),{success:!0,userData:c,isNewUser:!0}}}catch(r){return console.error("Error creating/updating user profile:",r),{success:!1,error:r.message}}},oV=async s=>{try{const e=_r(en,"artifacts/1:851382130132:web:eaba38fab449f14fb5b241/users",s),t=await Dd(e);return t.exists()?{success:!0,userData:t.data()}:{success:!1,error:"Usuario no encontrado"}}catch(e){return console.error("Error fetching user profile:",e),{success:!1,error:e.message}}},Ld=le.createContext(),Ud=()=>{const s=le.useContext(Ld);if(s===void 0)throw new Error("useCombustibles must be used within a CombustiblesProvider");return s},lV=({children:s})=>{const[e,t]=le.useState(null),[r,o]=le.useState(null),[c,d]=le.useState(!0),[m,g]=le.useState(null),[v,_]=le.useState([]),[A,b]=le.useState([]),[D,C]=le.useState([]),[F,w]=le.useState([]);le.useEffect(()=>{const I=gC(nV,async M=>{try{if(d(!0),M){t(M);let V=await oV(M.uid);V.success||(V=await aV(M,{provider:"existing_account",appContext:"combustibles"})),V.success?o(V.userData):g("Error cargando perfil de usuario")}else t(null),o(null),_([]),b([]),C([]),w([])}catch(V){console.error("Error en autenticación:",V),g("Error de autenticación")}finally{d(!1)}});return()=>I()},[]);const x={user:e,userProfile:r,loading:c,error:m,hasPermission:I=>r?.combustiblesPermissions?.[I]||!1,isAdmin:()=>r?.role==="admin",isCounterOrAbove:()=>r?.role==="admin"||r?.role==="contador",inventory:v,movements:A,vehicles:D,suppliers:F,setInventory:_,setMovements:b,setVehicles:C,setSuppliers:w,refreshInventory:async()=>{console.log("Refrescando inventario...")},refreshMovements:async()=>{console.log("Refrescando movimientos...")},refreshVehicles:async()=>{console.log("Refrescando vehículos...")},refreshSuppliers:async()=>{console.log("Refrescando proveedores...")}};return u.jsx(Ld.Provider,{value:x,children:s})},cV=({children:s,currentView:e,onViewChange:t})=>{const{userProfile:r,isAdmin:o,isCounterOrAbove:c}=Ud(),[d,m]=le.useState(!1),g=[{id:"dashboard",name:"Dashboard",icon:"📊",description:"Vista general",requiredPermission:null},{id:"inventory",name:"Inventario",icon:"🛢️",description:"Gestión de stock",requiredPermission:"canManageInventory"},{id:"movements",name:"Movimientos",icon:"📈",description:"Entradas y salidas",requiredPermission:"canCreateMovements"},{id:"vehicles",name:"Vehículos",icon:"🚜",description:"Maquinaria forestal",requiredPermission:null},{id:"suppliers",name:"Proveedores",icon:"🏪",description:"Gestión de proveedores",requiredPermission:"canManageSuppliers"},{id:"reports",name:"Reportes",icon:"📋",description:"Análisis y reportes",requiredPermission:"canViewReports"}],v=b=>{t(b),m(!1)},_=b=>b?r?.combustiblesPermissions?.[b]||!1:!0,A=g.filter(b=>_(b.requiredPermission));return u.jsxs("div",{className:"dashboard-layout",children:[u.jsx("header",{className:"dashboard-header",children:u.jsxs("div",{className:"header-content",children:[u.jsx("button",{className:"sidebar-toggle",onClick:()=>m(!d),children:"☰"}),u.jsxs("div",{className:"header-title",children:[u.jsx("h1",{children:"⛽ Gestión de Combustibles"}),u.jsx("span",{className:"subtitle",children:"Forestech Colombia"})]}),u.jsxs("div",{className:"header-user",children:[u.jsxs("div",{className:"user-info",children:[u.jsx("span",{className:"user-name",children:r?.displayName||r?.email}),u.jsx("span",{className:"user-role",children:r?.role})]}),u.jsx("div",{className:"user-avatar",children:r?.photoURL?u.jsx("img",{src:r.photoURL,alt:"Avatar"}):u.jsx("div",{className:"avatar-placeholder",children:(r?.displayName||r?.email||"U").charAt(0).toUpperCase()})})]})]})}),u.jsxs("div",{className:"dashboard-body",children:[u.jsxs("aside",{className:`dashboard-sidebar ${d?"open":""}`,children:[u.jsx("nav",{className:"sidebar-nav",children:A.map(b=>u.jsxs("button",{className:`nav-item ${e===b.id?"active":""}`,onClick:()=>v(b.id),children:[u.jsx("span",{className:"nav-icon",children:b.icon}),u.jsxs("div",{className:"nav-content",children:[u.jsx("span",{className:"nav-name",children:b.name}),u.jsx("span",{className:"nav-description",children:b.description})]})]},b.id))}),u.jsx("div",{className:"sidebar-footer",children:u.jsxs("div",{className:"user-permissions",children:[u.jsx("h4",{children:"Permisos Activos:"}),u.jsxs("div",{className:"permission-list",children:[o()&&u.jsx("span",{className:"permission admin",children:"👑 Administrador"}),c()&&u.jsx("span",{className:"permission counter",children:"📊 Gestión Operativa"}),_("canManageInventory")&&u.jsx("span",{className:"permission",children:"🛢️ Inventario"}),_("canManageVehicles")&&u.jsx("span",{className:"permission",children:"🚜 Vehículos"})]})]})})]}),u.jsx("main",{className:"dashboard-main",children:u.jsx("div",{className:"main-content",children:s})})]}),d&&u.jsx("div",{className:"sidebar-overlay",onClick:()=>m(!1)})]})},yo={DIESEL:"diesel",GASOLINE:"gasoline",ACPM:"acpm",LUBRICANTS:"lubricants",TWO_STROKE:"two_stroke"},hi={[yo.DIESEL]:{name:"Diésel",description:"Combustible para maquinaria pesada",unit:"galones",category:"Combustible",color:"#fbbf24",icon:"🚛",density:.85,priceUnit:"COP/galón"},[yo.GASOLINE]:{name:"Gasolina",description:"Combustible para vehículos livianos",unit:"galones",category:"Combustible",color:"#ef4444",icon:"⛽",density:.75,priceUnit:"COP/galón"},[yo.ACPM]:{name:"ACPM",description:"Aceite Combustible Para Motor",unit:"galones",category:"Combustible",color:"#8b5cf6",icon:"🚜",density:.85,priceUnit:"COP/galón"},[yo.LUBRICANTS]:{name:"Lubricantes",description:"Aceites y lubricantes para mantenimiento",unit:"litros",category:"Mantenimiento",color:"#06b6d4",icon:"🛢️",density:.9,priceUnit:"COP/litro"},[yo.TWO_STROKE]:{name:"Mezcla 2T",description:"Mezcla para motores de 2 tiempos (motosierras)",unit:"litros",category:"Especializado",color:"#10b981",icon:"🪚",density:.78,priceUnit:"COP/litro"}},pn={CRITICAL:"critical",LOW:"low",MEDIUM:"medium",HIGH:"high",FULL:"full"},aa={[pn.CRITICAL]:{label:"Crítico",color:"#dc2626",icon:"🚨",threshold:.1},[pn.LOW]:{label:"Bajo",color:"#ea580c",icon:"⚠️",threshold:.25},[pn.MEDIUM]:{label:"Medio",color:"#ca8a04",icon:"📊",threshold:.5},[pn.HIGH]:{label:"Alto",color:"#16a34a",icon:"✅",threshold:.75},[pn.FULL]:{label:"Completo",color:"#059669",icon:"🟢",threshold:1}},cd=(s,e)=>{if(e===0)return pn.CRITICAL;const t=s/e;return t<aa[pn.CRITICAL].threshold?pn.CRITICAL:t<aa[pn.LOW].threshold?pn.LOW:t<aa[pn.MEDIUM].threshold?pn.MEDIUM:t<aa[pn.HIGH].threshold?pn.HIGH:pn.FULL},P0=()=>{const{userProfile:s}=Ud(),e=[{fuelType:"diesel",currentStock:1250,maxCapacity:2e3,location:"Tanque Principal",lastUpdated:new Date(Date.now()-2*60*60*1e3)},{fuelType:"gasoline",currentStock:180,maxCapacity:500,location:"Tanque Auxiliar",lastUpdated:new Date(Date.now()-4*60*60*1e3)},{fuelType:"acpm",currentStock:95,maxCapacity:1200,location:"Depósito Central",lastUpdated:new Date(Date.now()-1*60*60*1e3)},{fuelType:"lubricants",currentStock:85,maxCapacity:200,location:"Bodega",lastUpdated:new Date(Date.now()-6*60*60*1e3)}],t=[{type:"entry",quantity:500,fuelType:"diesel",date:new Date(Date.now()-1*24*60*60*1e3)},{type:"exit",quantity:120,fuelType:"gasoline",date:new Date(Date.now()-1*60*60*1e3)},{type:"exit",quantity:250,fuelType:"diesel",date:new Date(Date.now()-3*60*60*1e3)},{type:"entry",quantity:200,fuelType:"acpm",date:new Date(Date.now()-2*24*60*60*1e3)}],r=[{vehicleType:"harvester",name:"Cosechadora 001",status:"active",fuelType:"diesel",lastUsed:new Date},{vehicleType:"chainsaw",name:"Motosierra 015",status:"active",fuelType:"two_stroke",lastUsed:new Date},{vehicleType:"log_truck",name:"Camión MD-789",status:"maintenance",fuelType:"acpm",lastUsed:new Date(Date.now()-2*24*60*60*1e3)},{vehicleType:"pickup_truck",name:"Toyota Hilux",status:"active",fuelType:"gasoline",lastUsed:new Date}],o=e.reduce((_,A)=>{const b=hi[A.fuelType];return _+A.currentStock*(b?12e3:0)},0),c=t.filter(_=>_.date.toDateString()===new Date().toDateString()).length,d=r.filter(_=>_.status==="active").length,m=e.filter(_=>{const A=cd(_.currentStock,_.maxCapacity);return A==="critical"||A==="low"}),g=_=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(_),v=_=>new Intl.NumberFormat("es-CO").format(_);return u.jsxs("div",{className:"dashboard-main-content",children:[u.jsxs("div",{className:"dashboard-welcome",children:[u.jsxs("h2",{children:["Bienvenido, ",s?.displayName||"Usuario"]}),u.jsxs("p",{children:["Dashboard de Gestión de Combustibles - ",new Date().toLocaleDateString("es-CO",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]})]}),u.jsxs("div",{className:"dashboard-cards",children:[u.jsxs("div",{className:"dashboard-card",children:[u.jsx("div",{className:"card-header",children:u.jsxs("div",{className:"card-title",children:[u.jsx("span",{className:"card-icon",children:"💰"}),"Valor Total Inventario"]})}),u.jsx("div",{className:"card-value",children:g(o)}),u.jsxs("div",{className:"card-description",children:[e.length," tipos de combustible en stock"]}),u.jsx("div",{className:"card-trend trend-positive",children:"↗ +5.2% vs mes anterior"})]}),u.jsxs("div",{className:"dashboard-card",children:[u.jsx("div",{className:"card-header",children:u.jsxs("div",{className:"card-title",children:[u.jsx("span",{className:"card-icon",children:"📈"}),"Movimientos Hoy"]})}),u.jsx("div",{className:"card-value",children:c}),u.jsx("div",{className:"card-description",children:"Entradas y salidas registradas"}),u.jsx("div",{className:"card-trend trend-positive",children:"↗ Actividad normal"})]}),u.jsxs("div",{className:"dashboard-card",children:[u.jsx("div",{className:"card-header",children:u.jsxs("div",{className:"card-title",children:[u.jsx("span",{className:"card-icon",children:"🚜"}),"Vehículos Activos"]})}),u.jsx("div",{className:"card-value",children:d}),u.jsxs("div",{className:"card-description",children:["de ",r.length," vehículos totales"]}),u.jsxs("div",{className:"card-trend trend-positive",children:["↗ ",Math.round(d/r.length*100),"% operatividad"]})]}),u.jsxs("div",{className:"dashboard-card",children:[u.jsx("div",{className:"card-header",children:u.jsxs("div",{className:"card-title",children:[u.jsx("span",{className:"card-icon",children:"⚠️"}),"Alertas de Stock"]})}),u.jsx("div",{className:"card-value",style:{color:m.length>0?"#dc2626":"#16a34a"},children:m.length}),u.jsx("div",{className:"card-description",children:m.length>0?"Requieren atención":"Niveles normales"}),m.length>0&&u.jsx("div",{className:"card-trend trend-negative",children:"⚠ Revisar stock crítico"})]})]}),u.jsxs("div",{className:"dashboard-section",children:[u.jsx("h3",{children:"🛢️ Resumen de Inventario"}),u.jsx("div",{className:"inventory-grid",children:e.map((_,A)=>{const b=hi[_.fuelType],D=cd(_.currentStock,_.maxCapacity),C=aa[D],F=Math.round(_.currentStock/_.maxCapacity*100);return u.jsxs("div",{className:"inventory-card",children:[u.jsxs("div",{className:"inventory-header",children:[u.jsx("span",{className:"fuel-icon",style:{color:b?.color},children:b?.icon}),u.jsxs("div",{children:[u.jsx("h4",{children:b?.name}),u.jsx("p",{children:_.location})]}),u.jsx("span",{className:"stock-badge",style:{background:C?.color,color:"white"},children:C?.icon})]}),u.jsxs("div",{className:"inventory-progress",children:[u.jsx("div",{className:"progress-bar",children:u.jsx("div",{className:"progress-fill",style:{width:`${F}%`,background:C?.color}})}),u.jsxs("div",{className:"progress-text",children:[v(_.currentStock)," / ",v(_.maxCapacity)," ",b?.unit]})]}),u.jsxs("div",{className:"inventory-meta",children:[u.jsxs("span",{children:[F,"% capacidad"]}),u.jsxs("span",{children:["Actualizado: ",_.lastUpdated.toLocaleTimeString("es-CO",{hour:"2-digit",minute:"2-digit"})]})]})]},A)})})]}),u.jsxs("div",{className:"dashboard-section",children:[u.jsx("h3",{children:"📊 Actividad Reciente"}),u.jsx("div",{className:"activity-list",children:t.slice(0,5).map((_,A)=>{const b=hi[_.fuelType],D=_.type==="entry";return u.jsxs("div",{className:"activity-item",children:[u.jsx("div",{className:"activity-icon",style:{background:D?"#dcfce7":"#fef2f2"},children:D?"📥":"📤"}),u.jsxs("div",{className:"activity-content",children:[u.jsxs("div",{className:"activity-title",children:[D?"Entrada":"Salida"," de ",b?.name]}),u.jsxs("div",{className:"activity-description",children:[v(_.quantity)," ",b?.unit," - ",_.date.toLocaleString("es-CO")]})]}),u.jsxs("div",{className:"activity-amount",style:{color:D?"#16a34a":"#dc2626"},children:[D?"+":"-",v(_.quantity)]})]},A)})})]})]})},ko="combustibles_inventory",uV=async(s,e)=>{try{const t=hi[s.fuelType];if(!t)return{success:!1,error:"Tipo de combustible no válido"};const r=xt(Os(en,ko),ln("fuelType","==",s.fuelType),ln("location","==",s.location));if(!(await Bc(r)).empty)return{success:!1,error:`Ya existe ${t.name} en ${s.location}`};const c={fuelType:s.fuelType,name:t.name,description:s.description||t.description,currentStock:Number(s.currentStock)||0,maxCapacity:Number(s.maxCapacity),minThreshold:Number(s.minThreshold)||s.maxCapacity*.15,unit:t.unit,location:s.location,pricePerUnit:Number(s.pricePerUnit)||0,supplier:s.supplier||"",status:s.status||"active",createdAt:new Date,createdBy:e,lastUpdated:new Date,updatedBy:e};return{success:!0,data:{id:(await Uj(Os(en,ko),c)).id,...c},message:`${t.name} agregado al inventario exitosamente`}}catch(t){return console.error("Error creating inventory item:",t),{success:!1,error:t.message}}},hV=async()=>{try{const s=xt(Os(en,ko),Bo("fuelType","asc")),e=await Bc(s),t=[];return e.forEach(r=>{const o=r.data();t.push({id:r.id,...o,stockLevel:cd(o.currentStock,o.maxCapacity),stockPercentage:Math.round(o.currentStock/o.maxCapacity*100),needsRestock:o.currentStock<=o.minThreshold})}),{success:!0,data:t}}catch(s){return console.error("Error fetching inventory items:",s),{success:!1,error:s.message}}},dV=async(s,e,t)=>{try{const r=_r(en,ko,s);if(!(await Dd(r)).exists())return{success:!1,error:"Item no encontrado"};const c={...e,lastUpdated:new Date,updatedBy:t};return delete c.id,delete c.createdAt,delete c.createdBy,await uN(r,c),{success:!0,message:"Item actualizado exitosamente",data:{id:s,...c}}}catch(r){return console.error("Error updating inventory item:",r),{success:!1,error:r.message}}},fV=async s=>{try{const e=_r(en,ko,s);return(await Dd(e)).exists()?(await Lj(e),{success:!0,message:"Item eliminado exitosamente"}):{success:!1,error:"Item no encontrado"}}catch(e){return console.error("Error deleting inventory item:",e),{success:!1,error:e.message}}},mV=s=>{const e=xt(Os(en,ko),Bo("fuelType","asc"));return Yg(e,t=>{const r=[];t.forEach(o=>{const c=o.data();r.push({id:o.id,...c,stockLevel:cd(c.currentStock,c.maxCapacity),stockPercentage:Math.round(c.currentStock/c.maxCapacity*100),needsRestock:c.currentStock<=c.minThreshold})}),s(r)},t=>{console.error("Error in inventory subscription:",t),s(null,t)})},pV=async()=>{try{const s=await hV();if(!s.success)return s;const e=s.data,t={totalItems:e.length,activeItems:e.filter(r=>r.status==="active").length,lowStockItems:e.filter(r=>r.needsRestock).length,totalValue:e.reduce((r,o)=>r+o.currentStock*o.pricePerUnit,0),averageStockLevel:e.length>0?Math.round(e.reduce((r,o)=>r+o.stockPercentage,0)/e.length):0,byFuelType:{}};return e.forEach(r=>{t.byFuelType[r.fuelType]||(t.byFuelType[r.fuelType]={count:0,totalStock:0,totalCapacity:0,totalValue:0}),t.byFuelType[r.fuelType].count++,t.byFuelType[r.fuelType].totalStock+=r.currentStock,t.byFuelType[r.fuelType].totalCapacity+=r.maxCapacity,t.byFuelType[r.fuelType].totalValue+=r.currentStock*r.pricePerUnit}),{success:!0,data:t}}catch(s){return console.error("Error calculating inventory stats:",s),{success:!1,error:s.message}}},gV=({items:s,onEdit:e,onDelete:t,canManage:r})=>{const[o,c]=le.useState("name"),[d,m]=le.useState("asc"),g=C=>new Intl.NumberFormat("es-CO").format(C),v=C=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(C),_=C=>{const w=new Date-new Date(C.seconds?C.seconds*1e3:C),G=Math.floor(w/(1e3*60*60)),te=Math.floor(G/24);return te>0?`${te}d`:G>0?`${G}h`:"ahora"},A=C=>{o===C?m(d==="asc"?"desc":"asc"):(c(C),m("asc"))},b=[...s].sort((C,F)=>{let w=C[o],G=F[o];return o==="lastUpdated"&&(w=new Date(w.seconds?w.seconds*1e3:w),G=new Date(G.seconds?G.seconds*1e3:G)),w<G?d==="asc"?-1:1:w>G?d==="asc"?1:-1:0}),D=C=>o!==C?"↕️":d==="asc"?"↑":"↓";return u.jsxs("div",{className:"inventory-table-container",children:[u.jsx("div",{className:"table-wrapper",children:u.jsxs("table",{className:"inventory-table",children:[u.jsx("thead",{children:u.jsxs("tr",{children:[u.jsxs("th",{onClick:()=>A("name"),className:"sortable",children:["Combustible ",D("name")]}),u.jsxs("th",{onClick:()=>A("location"),className:"sortable",children:["Ubicación ",D("location")]}),u.jsxs("th",{onClick:()=>A("currentStock"),className:"sortable",children:["Stock Actual ",D("currentStock")]}),u.jsxs("th",{onClick:()=>A("stockPercentage"),className:"sortable",children:["Nivel ",D("stockPercentage")]}),u.jsxs("th",{onClick:()=>A("pricePerUnit"),className:"sortable",children:["Precio ",D("pricePerUnit")]}),u.jsx("th",{children:"Valor Total"}),u.jsxs("th",{onClick:()=>A("status"),className:"sortable",children:["Estado ",D("status")]}),u.jsxs("th",{onClick:()=>A("lastUpdated"),className:"sortable",children:["Actualizado ",D("lastUpdated")]}),r&&u.jsx("th",{children:"Acciones"})]})}),u.jsx("tbody",{children:b.map(C=>{const F=hi[C.fuelType],w=aa[C.stockLevel],G=C.currentStock*C.pricePerUnit;return u.jsxs("tr",{className:C.needsRestock?"needs-restock":"",children:[u.jsx("td",{className:"fuel-cell",children:u.jsxs("div",{className:"fuel-info",children:[u.jsx("span",{className:"fuel-icon",style:{color:F?.color},children:F?.icon}),u.jsxs("div",{children:[u.jsx("div",{className:"fuel-name",children:F?.name}),u.jsx("div",{className:"fuel-type",children:C.fuelType})]})]})}),u.jsx("td",{children:C.location}),u.jsxs("td",{className:"stock-cell",children:[u.jsxs("div",{className:"stock-info",children:[u.jsx("span",{className:"stock-amount",children:g(C.currentStock)}),u.jsxs("span",{className:"stock-unit",children:["/ ",g(C.maxCapacity)," ",C.unit]})]}),C.needsRestock&&u.jsx("div",{className:"restock-indicator",children:"⚠️ Bajo mínimo"})]}),u.jsx("td",{className:"level-cell",children:u.jsxs("div",{className:"level-info",children:[u.jsxs("div",{className:"level-badge",style:{backgroundColor:w?.color,color:"white"},children:[C.stockPercentage,"%"]}),u.jsx("div",{className:"level-bar",children:u.jsx("div",{className:"level-fill",style:{width:`${C.stockPercentage}%`,backgroundColor:w?.color}})})]})}),u.jsx("td",{className:"price-cell",children:u.jsxs("div",{className:"price-info",children:[u.jsx("span",{className:"price-amount",children:v(C.pricePerUnit)}),u.jsxs("span",{className:"price-unit",children:["/ ",C.unit]})]})}),u.jsx("td",{className:"value-cell",children:u.jsx("span",{className:"total-value",children:v(G)})}),u.jsx("td",{className:"status-cell",children:u.jsxs("span",{className:`status-badge ${C.status}`,children:[u.jsx("span",{className:"status-dot"}),C.status==="active"?"Activo":C.status==="inactive"?"Inactivo":C.status==="maintenance"?"Mantenimiento":C.status]})}),u.jsx("td",{className:"updated-cell",children:u.jsx("span",{className:"time-ago",children:_(C.lastUpdated)})}),r&&u.jsx("td",{className:"actions-cell",children:u.jsxs("div",{className:"action-buttons",children:[u.jsx("button",{className:"btn btn-sm btn-secondary",onClick:()=>e(C),title:"Editar",children:"✏️"}),u.jsx("button",{className:"btn btn-sm btn-danger",onClick:()=>t(C),title:"Eliminar",children:"🗑️"})]})})]},C.id)})})]})}),u.jsxs("div",{className:"table-footer",children:[u.jsxs("div",{className:"table-info",children:[b.length," items ordenados por ",o,"(",d==="asc"?"ascendente":"descendente",")"]}),u.jsxs("div",{className:"table-legend",children:[u.jsxs("span",{className:"legend-item",children:[u.jsx("span",{className:"legend-dot critical"}),"Crítico"]}),u.jsxs("span",{className:"legend-item",children:[u.jsx("span",{className:"legend-dot low"}),"Bajo"]}),u.jsxs("span",{className:"legend-item",children:[u.jsx("span",{className:"legend-dot normal"}),"Normal"]}),u.jsxs("span",{className:"legend-item",children:[u.jsx("span",{className:"legend-dot high"}),"Alto"]})]})]})]})},vV=({items:s,onEdit:e,onDelete:t,canManage:r})=>{const o=m=>new Intl.NumberFormat("es-CO").format(m),c=m=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(m),d=m=>{const v=new Date-new Date(m.seconds?m.seconds*1e3:m),_=Math.floor(v/(1e3*60*60)),A=Math.floor(_/24);return A>0?`hace ${A} día${A>1?"s":""}`:_>0?`hace ${_} hora${_>1?"s":""}`:"hace unos minutos"};return u.jsx("div",{className:"inventory-cards-grid",children:s.map(m=>{const g=hi[m.fuelType],v=aa[m.stockLevel],_=m.currentStock*m.pricePerUnit;return u.jsxs("div",{className:"inventory-card",children:[u.jsxs("div",{className:"card-header",children:[u.jsxs("div",{className:"fuel-info",children:[u.jsx("span",{className:"fuel-icon",style:{color:g?.color},children:g?.icon}),u.jsxs("div",{className:"fuel-details",children:[u.jsx("h3",{children:g?.name}),u.jsx("p",{className:"location",children:m.location})]})]}),u.jsx("div",{className:"stock-status",children:u.jsxs("span",{className:"status-badge",style:{backgroundColor:v?.color,color:"white"},children:[v?.icon," ",v?.label]})})]}),u.jsxs("div",{className:"stock-progress",children:[u.jsxs("div",{className:"progress-header",children:[u.jsxs("span",{className:"stock-text",children:[o(m.currentStock)," / ",o(m.maxCapacity)," ",m.unit]}),u.jsxs("span",{className:"percentage",children:[m.stockPercentage,"%"]})]}),u.jsx("div",{className:"progress-bar",children:u.jsx("div",{className:"progress-fill",style:{width:`${m.stockPercentage}%`,backgroundColor:v?.color}})}),m.needsRestock&&u.jsxs("div",{className:"restock-warning",children:["⚠️ Bajo nivel mínimo (",o(m.minThreshold)," ",m.unit,")"]})]}),u.jsxs("div",{className:"card-metrics",children:[u.jsxs("div",{className:"metric",children:[u.jsxs("span",{className:"metric-label",children:["Precio por ",m.unit,":"]}),u.jsx("span",{className:"metric-value",children:c(m.pricePerUnit)})]}),u.jsxs("div",{className:"metric",children:[u.jsx("span",{className:"metric-label",children:"Valor total:"}),u.jsx("span",{className:"metric-value",children:c(_)})]}),m.supplier&&u.jsxs("div",{className:"metric",children:[u.jsx("span",{className:"metric-label",children:"Proveedor:"}),u.jsx("span",{className:"metric-value",children:m.supplier})]})]}),u.jsxs("div",{className:"card-footer",children:[u.jsxs("div",{className:"status-info",children:[u.jsx("span",{className:`status-dot ${m.status}`}),u.jsx("span",{className:"status-text",children:m.status==="active"?"Activo":m.status==="inactive"?"Inactivo":m.status==="maintenance"?"Mantenimiento":m.status})]}),u.jsxs("div",{className:"last-update",children:["Actualizado ",d(m.lastUpdated)]})]}),r&&u.jsxs("div",{className:"card-actions",children:[u.jsx("button",{className:"btn btn-secondary btn-sm",onClick:()=>e(m),title:"Editar combustible",children:"✏️ Editar"}),u.jsx("button",{className:"btn btn-danger btn-sm",onClick:()=>t(m),title:"Eliminar combustible",children:"🗑️ Eliminar"})]}),m.description&&m.description!==g?.description&&u.jsx("div",{className:"card-description",children:u.jsx("p",{children:m.description})})]},m.id)})})},yV=({item:s,onClose:e,onSuccess:t})=>{const{userProfile:r}=Ud(),o=!!s,[c,d]=le.useState({fuelType:"",location:"",currentStock:"",maxCapacity:"",minThreshold:"",pricePerUnit:"",supplier:"",description:"",status:"active"}),[m,g]=le.useState({}),[v,_]=le.useState(!1);le.useEffect(()=>{o&&s&&d({fuelType:s.fuelType||"",location:s.location||"",currentStock:s.currentStock||"",maxCapacity:s.maxCapacity||"",minThreshold:s.minThreshold||"",pricePerUnit:s.pricePerUnit||"",supplier:s.supplier||"",description:s.description||"",status:s.status||"active"})},[o,s]),le.useEffect(()=>{if(c.maxCapacity&&!c.minThreshold){const F=Math.round(Number(c.maxCapacity)*.15);d(w=>({...w,minThreshold:F}))}},[c.maxCapacity]);const A=F=>{const{name:w,value:G}=F.target;d(te=>({...te,[w]:G})),m[w]&&g(te=>({...te,[w]:null}))},b=()=>{const F={};c.fuelType||(F.fuelType="Tipo de combustible es requerido"),c.location||(F.location="Ubicación es requerida"),c.maxCapacity||(F.maxCapacity="Capacidad máxima es requerida");const w=Number(c.currentStock),G=Number(c.maxCapacity),te=Number(c.minThreshold),ee=Number(c.pricePerUnit);return c.currentStock&&(isNaN(w)||w<0)&&(F.currentStock="Stock actual debe ser un número válido mayor o igual a 0"),c.maxCapacity&&(isNaN(G)||G<=0)&&(F.maxCapacity="Capacidad máxima debe ser un número válido mayor a 0"),c.minThreshold&&(isNaN(te)||te<0)&&(F.minThreshold="Umbral mínimo debe ser un número válido mayor o igual a 0"),c.pricePerUnit&&(isNaN(ee)||ee<0)&&(F.pricePerUnit="Precio debe ser un número válido mayor o igual a 0"),w>G&&(F.currentStock="Stock actual no puede ser mayor a la capacidad máxima"),te>G&&(F.minThreshold="Umbral mínimo no puede ser mayor a la capacidad máxima"),g(F),Object.keys(F).length===0},D=async F=>{if(F.preventDefault(),!!b()){_(!0);try{let w;o?w=await dV(s.id,{location:c.location,currentStock:Number(c.currentStock)||0,maxCapacity:Number(c.maxCapacity),minThreshold:Number(c.minThreshold)||Number(c.maxCapacity)*.15,pricePerUnit:Number(c.pricePerUnit)||0,supplier:c.supplier,description:c.description,status:c.status},r.uid):w=await uV({fuelType:c.fuelType,location:c.location,currentStock:Number(c.currentStock)||0,maxCapacity:Number(c.maxCapacity),minThreshold:Number(c.minThreshold)||Number(c.maxCapacity)*.15,pricePerUnit:Number(c.pricePerUnit)||0,supplier:c.supplier,description:c.description,status:c.status},r.uid),w.success?(alert(w.message),t()):alert(`Error: ${w.error}`)}catch(w){console.error("Error saving inventory item:",w),alert("Error inesperado al guardar el item")}finally{_(!1)}}},C=hi[c.fuelType];return u.jsx("div",{className:"modal-overlay",onClick:e,children:u.jsxs("div",{className:"modal-content inventory-modal",onClick:F=>F.stopPropagation(),children:[u.jsxs("div",{className:"modal-header",children:[u.jsx("h2",{children:o?"✏️ Editar Combustible":"➕ Agregar Nuevo Combustible"}),u.jsx("button",{className:"modal-close",onClick:e,children:"✕"})]}),u.jsxs("form",{onSubmit:D,className:"modal-form",children:[u.jsxs("div",{className:"form-grid",children:[u.jsxs("div",{className:"form-group",children:[u.jsxs("label",{htmlFor:"fuelType",children:["Tipo de Combustible *",C&&u.jsxs("span",{className:"fuel-preview",children:[C.icon," ",C.name]})]}),u.jsxs("select",{id:"fuelType",name:"fuelType",value:c.fuelType,onChange:A,disabled:o,className:m.fuelType?"error":"",required:!0,children:[u.jsx("option",{value:"",children:"Seleccionar tipo..."}),Object.entries(yo).map(([F,w])=>{const G=hi[w];return u.jsxs("option",{value:w,children:[G.icon," ",G.name," (",G.unit,")"]},F)})]}),m.fuelType&&u.jsx("span",{className:"error-text",children:m.fuelType})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"location",children:"Ubicación / Tanque *"}),u.jsx("input",{type:"text",id:"location",name:"location",value:c.location,onChange:A,placeholder:"ej. Tanque Principal, Depósito A, Bodega Norte",className:m.location?"error":"",required:!0}),m.location&&u.jsx("span",{className:"error-text",children:m.location})]}),u.jsxs("div",{className:"form-group",children:[u.jsxs("label",{htmlFor:"currentStock",children:["Stock Actual ",C&&`(${C.unit})`]}),u.jsx("input",{type:"number",id:"currentStock",name:"currentStock",value:c.currentStock,onChange:A,placeholder:"0",min:"0",step:"0.01",className:m.currentStock?"error":""}),m.currentStock&&u.jsx("span",{className:"error-text",children:m.currentStock})]}),u.jsxs("div",{className:"form-group",children:[u.jsxs("label",{htmlFor:"maxCapacity",children:["Capacidad Máxima * ",C&&`(${C.unit})`]}),u.jsx("input",{type:"number",id:"maxCapacity",name:"maxCapacity",value:c.maxCapacity,onChange:A,placeholder:"1000",min:"1",step:"0.01",className:m.maxCapacity?"error":"",required:!0}),m.maxCapacity&&u.jsx("span",{className:"error-text",children:m.maxCapacity})]}),u.jsxs("div",{className:"form-group",children:[u.jsxs("label",{htmlFor:"minThreshold",children:["Umbral Mínimo ",C&&`(${C.unit})`,u.jsx("span",{className:"field-hint",children:"Para alertas de stock bajo"})]}),u.jsx("input",{type:"number",id:"minThreshold",name:"minThreshold",value:c.minThreshold,onChange:A,placeholder:"Auto: 15% de capacidad máxima",min:"0",step:"0.01",className:m.minThreshold?"error":""}),m.minThreshold&&u.jsx("span",{className:"error-text",children:m.minThreshold}),c.maxCapacity&&u.jsxs("span",{className:"field-hint",children:["Sugerido: ",Math.round(Number(c.maxCapacity)*.15)," ",C?.unit||"unidades"]})]}),u.jsxs("div",{className:"form-group",children:[u.jsxs("label",{htmlFor:"pricePerUnit",children:["Precio por ",C?.unit||"Unidad"]}),u.jsx("input",{type:"number",id:"pricePerUnit",name:"pricePerUnit",value:c.pricePerUnit,onChange:A,placeholder:"12000",min:"0",step:"0.01",className:m.pricePerUnit?"error":""}),m.pricePerUnit&&u.jsx("span",{className:"error-text",children:m.pricePerUnit})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"supplier",children:"Proveedor Principal"}),u.jsx("input",{type:"text",id:"supplier",name:"supplier",value:c.supplier,onChange:A,placeholder:"ej. Petrobras, Terpel, Mobil"})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"status",children:"Estado"}),u.jsxs("select",{id:"status",name:"status",value:c.status,onChange:A,children:[u.jsx("option",{value:"active",children:"Activo"}),u.jsx("option",{value:"inactive",children:"Inactivo"}),u.jsx("option",{value:"maintenance",children:"Mantenimiento"})]})]}),u.jsxs("div",{className:"form-group full-width",children:[u.jsx("label",{htmlFor:"description",children:"Descripción / Notas"}),u.jsx("textarea",{id:"description",name:"description",value:c.description,onChange:A,placeholder:"Información adicional sobre este combustible...",rows:"3"})]})]}),C&&c.maxCapacity&&u.jsxs("div",{className:"form-preview",children:[u.jsx("h4",{children:"📊 Vista Previa"}),u.jsxs("div",{className:"preview-card",children:[u.jsxs("div",{className:"preview-header",children:[u.jsxs("span",{style:{color:C.color},children:[C.icon," ",C.name]}),u.jsx("span",{children:c.location})]}),u.jsxs("div",{className:"preview-capacity",children:[c.currentStock||0," / ",c.maxCapacity," ",C.unit,c.currentStock&&c.maxCapacity&&u.jsxs("span",{className:"preview-percentage",children:["(",Math.round(Number(c.currentStock)/Number(c.maxCapacity)*100),"%)"]})]}),c.pricePerUnit&&u.jsxs("div",{className:"preview-value",children:["Valor total: ",new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format((Number(c.currentStock)||0)*Number(c.pricePerUnit))]})]})]}),u.jsxs("div",{className:"modal-actions",children:[u.jsx("button",{type:"button",onClick:e,className:"btn btn-secondary",children:"Cancelar"}),u.jsx("button",{type:"submit",className:"btn btn-primary",disabled:v,children:v?"Guardando...":o?"Actualizar":"Crear"})]})]})]})})},_V=({stats:s})=>{const e=r=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(r),t=r=>new Intl.NumberFormat("es-CO").format(r);return u.jsxs("div",{className:"inventory-stats",children:[u.jsxs("div",{className:"stats-grid",children:[u.jsxs("div",{className:"stat-card primary",children:[u.jsx("div",{className:"stat-icon",children:"💰"}),u.jsxs("div",{className:"stat-content",children:[u.jsx("h3",{children:"Valor Total"}),u.jsx("div",{className:"stat-value",children:e(s.totalValue)}),u.jsxs("div",{className:"stat-subtitle",children:[t(s.totalItems)," tipos de combustible"]})]})]}),u.jsxs("div",{className:"stat-card success",children:[u.jsx("div",{className:"stat-icon",children:"✅"}),u.jsxs("div",{className:"stat-content",children:[u.jsx("h3",{children:"Items Activos"}),u.jsx("div",{className:"stat-value",children:s.activeItems}),u.jsxs("div",{className:"stat-subtitle",children:[Math.round(s.activeItems/s.totalItems*100),"% del total"]})]})]}),u.jsxs("div",{className:`stat-card ${s.lowStockItems>0?"warning":"info"}`,children:[u.jsx("div",{className:"stat-icon",children:s.lowStockItems>0?"⚠️":"📊"}),u.jsxs("div",{className:"stat-content",children:[u.jsx("h3",{children:"Stock Bajo"}),u.jsx("div",{className:"stat-value",children:s.lowStockItems}),u.jsx("div",{className:"stat-subtitle",children:s.lowStockItems>0?"Requieren atención":"Niveles normales"})]})]}),u.jsxs("div",{className:"stat-card info",children:[u.jsx("div",{className:"stat-icon",children:"📈"}),u.jsxs("div",{className:"stat-content",children:[u.jsx("h3",{children:"Nivel Promedio"}),u.jsxs("div",{className:"stat-value",children:[s.averageStockLevel,"%"]}),u.jsx("div",{className:"stat-subtitle",children:"Capacidad promedio utilizada"})]})]})]}),u.jsxs("div",{className:"fuel-type-summary",children:[u.jsx("h4",{children:"📊 Resumen por Tipo de Combustible"}),u.jsx("div",{className:"fuel-types-grid",children:Object.entries(s.byFuelType).map(([r,o])=>{const c=hi[r],d=o.totalCapacity>0?Math.round(o.totalStock/o.totalCapacity*100):0;return u.jsxs("div",{className:"fuel-type-card",children:[u.jsxs("div",{className:"fuel-header",children:[u.jsx("span",{className:"fuel-icon",style:{color:c?.color||"#6b7280"},children:c?.icon||"⛽"}),u.jsxs("div",{className:"fuel-info",children:[u.jsx("h5",{children:c?.name||r}),u.jsxs("span",{className:"fuel-count",children:[o.count," ubicaciones"]})]})]}),u.jsxs("div",{className:"fuel-metrics",children:[u.jsxs("div",{className:"metric",children:[u.jsx("span",{className:"metric-label",children:"Stock Total:"}),u.jsxs("span",{className:"metric-value",children:[t(o.totalStock)," ",c?.unit||"unidades"]})]}),u.jsxs("div",{className:"metric",children:[u.jsx("span",{className:"metric-label",children:"Capacidad:"}),u.jsxs("span",{className:"metric-value",children:[t(o.totalCapacity)," ",c?.unit||"unidades"]})]}),u.jsxs("div",{className:"metric",children:[u.jsx("span",{className:"metric-label",children:"Utilización:"}),u.jsxs("span",{className:`metric-value ${d<25?"low":d>75?"high":"normal"}`,children:[d,"%"]})]}),u.jsxs("div",{className:"metric",children:[u.jsx("span",{className:"metric-label",children:"Valor:"}),u.jsx("span",{className:"metric-value",children:e(o.totalValue)})]})]}),u.jsx("div",{className:"progress-bar",children:u.jsx("div",{className:"progress-fill",style:{width:`${d}%`,backgroundColor:c?.color||"#6b7280"}})})]},r)})}),Object.keys(s.byFuelType).length===0&&u.jsx("div",{className:"empty-fuel-types",children:u.jsx("p",{children:"No hay tipos de combustible registrados en el inventario."})})]})]})},TV=()=>{const{hasPermission:s}=Ud(),[e,t]=le.useState([]),[r,o]=le.useState(null),[c,d]=le.useState(!0),[m,g]=le.useState(null),[v,_]=le.useState("cards"),[A,b]=le.useState(!1),[D,C]=le.useState(null),[F,w]=le.useState("all"),[G,te]=le.useState("");le.useEffect(()=>{let I=null;return(()=>{I=mV((V,j)=>{if(j){console.error("Error in inventory subscription:",j),g("Error cargando inventario en tiempo real");return}t(V||[]),d(!1)})})(),()=>{I&&I()}},[]),le.useEffect(()=>{(async()=>{const M=await pV();M.success&&o(M.data)})()},[e]);const ee=e.filter(I=>{if(F==="active"&&I.status!=="active"||F==="low-stock"&&!I.needsRestock)return!1;if(G){const M=G.toLowerCase();return I.name.toLowerCase().includes(M)||I.location.toLowerCase().includes(M)||I.fuelType.toLowerCase().includes(M)}return!0}),Y=()=>{if(!s("canManageInventory")){alert("No tienes permisos para crear items de inventario");return}C(null),b(!0)},U=I=>{if(!s("canManageInventory")){alert("No tienes permisos para editar items de inventario");return}C(I),b(!0)},he=async I=>{if(!s("canManageInventory")){alert("No tienes permisos para eliminar items de inventario");return}if(!window.confirm(`¿Estás seguro de eliminar ${I.name} de ${I.location}?

Esta acción no se puede deshacer.`))return;d(!0);const V=await fV(I.id);V.success?alert("Item eliminado exitosamente"):(g(V.error),alert(`Error al eliminar: ${V.error}`)),d(!1)},k=()=>{b(!1),C(null)},x=()=>{k()};return c&&e.length===0?u.jsxs("div",{className:"inventory-loading",children:[u.jsx("div",{className:"loading-spinner"}),u.jsx("p",{children:"Cargando inventario..."})]}):u.jsxs("div",{className:"inventory-main",children:[u.jsxs("div",{className:"inventory-header",children:[u.jsxs("div",{className:"header-title",children:[u.jsx("h2",{children:"🛢️ Gestión de Inventario"}),u.jsx("p",{children:"Control de stock de combustibles en tiempo real"})]}),s("canManageInventory")&&u.jsx("button",{className:"btn btn-primary",onClick:Y,children:"➕ Agregar Combustible"})]}),r&&u.jsx(_V,{stats:r}),u.jsxs("div",{className:"inventory-controls",children:[u.jsxs("div",{className:"search-filters",children:[u.jsx("input",{type:"text",placeholder:"Buscar por nombre, ubicación o tipo...",value:G,onChange:I=>te(I.target.value),className:"search-input"}),u.jsxs("select",{value:F,onChange:I=>w(I.target.value),className:"filter-select",children:[u.jsx("option",{value:"all",children:"Todos los items"}),u.jsx("option",{value:"active",children:"Solo activos"}),u.jsx("option",{value:"low-stock",children:"Stock bajo"})]})]}),u.jsxs("div",{className:"view-toggle",children:[u.jsx("button",{className:`toggle-btn ${v==="cards"?"active":""}`,onClick:()=>_("cards"),children:"📱 Cards"}),u.jsx("button",{className:`toggle-btn ${v==="table"?"active":""}`,onClick:()=>_("table"),children:"📊 Tabla"})]})]}),m&&u.jsxs("div",{className:"error-banner",children:[u.jsxs("span",{children:["⚠️ ",m]}),u.jsx("button",{onClick:()=>g(null),children:"✕"})]}),u.jsx("div",{className:"inventory-content",children:ee.length===0?u.jsxs("div",{className:"empty-state",children:[u.jsx("div",{className:"empty-icon",children:"📦"}),u.jsx("h3",{children:"No hay items de inventario"}),u.jsx("p",{children:G||F!=="all"?"No se encontraron items con los filtros aplicados":"Comienza agregando tu primer tipo de combustible al inventario"}),s("canManageInventory")&&u.jsx("button",{className:"btn btn-primary",onClick:Y,children:"➕ Agregar Primer Combustible"})]}):u.jsx(u.Fragment,{children:v==="cards"?u.jsx(vV,{items:ee,onEdit:U,onDelete:he,canManage:s("canManageInventory")}):u.jsx(gV,{items:ee,onEdit:U,onDelete:he,canManage:s("canManageInventory")})})}),ee.length>0&&u.jsx("div",{className:"results-footer",children:u.jsxs("p",{children:["Mostrando ",ee.length," de ",e.length," items",G&&` · Filtro: "${G}"`,F!=="all"&&` · Estado: ${F}`]})}),A&&u.jsx(yV,{item:D,onClose:k,onSuccess:x})]})},Fd="combustibles_movements",L0="combustibles_inventory",Re={ENTRADA:"entrada",SALIDA:"salida",TRANSFERENCIA:"transferencia",AJUSTE:"ajuste"},$e={PENDIENTE:"pendiente",COMPLETADO:"completado",CANCELADO:"cancelado"},EV=async s=>{try{wV(s);const e={...s,createdAt:wo(),updatedAt:wo(),status:$e.PENDIENTE,totalValue:fS(s),effectiveDate:s.effectiveDate||wo()},t=await Bj(en,async r=>{const o=_r(Os(en,Fd));return r.set(o,e),await xV(r,e,o.id),o.id});return console.log("✅ Movimiento creado exitosamente:",t),t}catch(e){throw console.error("❌ Error al crear movimiento:",e),new Error(`Error al crear movimiento: ${e.message}`)}},bV=async(s={})=>{try{let e=Os(en,Fd);s.type&&(e=xt(e,ln("type","==",s.type))),s.status&&(e=xt(e,ln("status","==",s.status))),s.fuelType&&(e=xt(e,ln("fuelType","==",s.fuelType))),s.vehicleId&&(e=xt(e,ln("vehicleId","==",s.vehicleId))),e=xt(e,Bo("createdAt","desc"));const t=await Bc(e),r=[];return t.forEach(o=>{r.push({id:o.id,...o.data(),createdAt:o.data().createdAt?.toDate?.()||o.data().createdAt,updatedAt:o.data().updatedAt?.toDate?.()||o.data().updatedAt,effectiveDate:o.data().effectiveDate?.toDate?.()||o.data().effectiveDate})}),r}catch(e){throw console.error("❌ Error al obtener movimientos:",e),new Error(`Error al obtener movimientos: ${e.message}`)}},AV=async(s,e)=>{try{if(!s)throw new Error("ID de movimiento requerido");const t={...e,updatedAt:wo(),...e.quantity||e.unitPrice?{totalValue:fS(e)}:{}},r=_r(en,Fd,s);await uN(r,t),console.log("✅ Movimiento actualizado exitosamente")}catch(t){throw console.error("❌ Error al actualizar movimiento:",t),new Error(`Error al actualizar movimiento: ${t.message}`)}},NV=(s,e={})=>{try{let t=Os(en,Fd);return e.type&&(t=xt(t,ln("type","==",e.type))),e.status&&(t=xt(t,ln("status","==",e.status))),t=xt(t,Bo("createdAt","desc")),Yg(t,r=>{const o=[];r.forEach(c=>{o.push({id:c.id,...c.data(),createdAt:c.data().createdAt?.toDate?.()||c.data().createdAt,updatedAt:c.data().updatedAt?.toDate?.()||c.data().updatedAt,effectiveDate:c.data().effectiveDate?.toDate?.()||c.data().effectiveDate})}),s(o)},r=>{console.error("❌ Error en suscripción de movimientos:",r),s([],r)})}catch(t){throw console.error("❌ Error al configurar suscripción:",t),new Error(`Error en suscripción: ${t.message}`)}},SV=async(s={})=>{try{const e=await bV(s),t={totalMovements:e.length,byType:{},byStatus:{},byFuelType:{},totalValue:0,totalQuantity:0,averageValue:0,thisMonth:0,lastMonth:0,thisWeek:0},r=new Date,o=new Date(r.getFullYear(),r.getMonth(),1),c=new Date(r.getFullYear(),r.getMonth()-1,1),d=new Date(r.setDate(r.getDate()-r.getDay()));return e.forEach(m=>{t.byType[m.type]=(t.byType[m.type]||0)+1,t.byStatus[m.status]=(t.byStatus[m.status]||0)+1,t.byFuelType[m.fuelType]=(t.byFuelType[m.fuelType]||0)+1,t.totalValue+=m.totalValue||0,t.totalQuantity+=m.quantity||0;const g=new Date(m.createdAt);g>=o&&t.thisMonth++,g>=c&&g<o&&t.lastMonth++,g>=d&&t.thisWeek++}),t.averageValue=t.totalMovements>0?t.totalValue/t.totalMovements:0,t}catch(e){throw console.error("❌ Error al calcular estadísticas:",e),new Error(`Error al calcular estadísticas: ${e.message}`)}},wV=s=>{const e=["type","fuelType","quantity","unitPrice"];for(const t of e)if(!s[t])throw new Error(`Campo requerido: ${t}`);if(!Object.values(Re).includes(s.type))throw new Error("Tipo de movimiento inválido");if(s.quantity<=0)throw new Error("La cantidad debe ser mayor a cero");if(s.unitPrice<0)throw new Error("El precio unitario no puede ser negativo");if(s.type===Re.SALIDA&&!s.vehicleId)throw new Error("Las salidas deben tener un vehículo asociado");if(s.type===Re.TRANSFERENCIA&&!s.destinationLocation)throw new Error("Las transferencias deben tener una ubicación destino")},fS=s=>(s.quantity||0)*(s.unitPrice||0),xV=async(s,e,t)=>{try{const r=xt(Os(en,L0),ln("fuelType","==",e.fuelType),ln("location","==",e.location||"principal")),o=await Bc(r);if(o.empty)throw new Error(`No se encontró inventario para ${e.fuelType} en ${e.location||"ubicación principal"}`);const c=o.docs[0],d=c.data(),m=_r(en,L0,c.id);let g=d.currentStock;switch(e.type){case Re.ENTRADA:g+=e.quantity;break;case Re.SALIDA:if(g-=e.quantity,g<0)throw new Error("Stock insuficiente para realizar la salida");break;case Re.AJUSTE:g+=e.quantity,g<0&&(g=0);break;case Re.TRANSFERENCIA:if(g-=e.quantity,g<0)throw new Error("Stock insuficiente para realizar la transferencia");break}s.update(m,{currentStock:g,lastMovement:{movementId:t,type:e.type,quantity:e.quantity,date:wo()},updatedAt:wo()})}catch(r){throw console.error("❌ Error al actualizar inventario:",r),r}},IV=({stats:s,filters:e})=>{if(!s)return null;const t=g=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0,maximumFractionDigits:0}).format(g),r=g=>new Intl.NumberFormat("es-CO").format(g),o=(g,v)=>v===0?g>0?100:0:((g-v)/v*100).toFixed(1),c=g=>{switch(g){case Re.ENTRADA:return"#10b981";case Re.SALIDA:return"#ef4444";case Re.TRANSFERENCIA:return"#3b82f6";case Re.AJUSTE:return"#f59e0b";default:return"#6b7280"}},d=g=>{switch(g){case Re.ENTRADA:return"📥";case Re.SALIDA:return"📤";case Re.TRANSFERENCIA:return"🔄";case Re.AJUSTE:return"⚖️";default:return"📋"}},m=o(s.thisMonth,s.lastMonth);return u.jsxs("div",{className:"movements-stats",children:[u.jsxs("div",{className:"stats-grid",children:[u.jsxs("div",{className:"stat-card primary",children:[u.jsx("div",{className:"stat-icon",children:"📊"}),u.jsxs("div",{className:"stat-content",children:[u.jsx("div",{className:"stat-value",children:r(s.totalMovements)}),u.jsx("div",{className:"stat-label",children:"Total Movimientos"}),u.jsxs("div",{className:"stat-trend",children:[u.jsxs("span",{className:`trend ${m>=0?"positive":"negative"}`,children:[m>=0?"📈":"📉"," ",Math.abs(m),"%"]}),u.jsx("span",{className:"trend-label",children:"vs mes anterior"})]})]})]}),u.jsxs("div",{className:"stat-card",children:[u.jsx("div",{className:"stat-icon",children:"💰"}),u.jsxs("div",{className:"stat-content",children:[u.jsx("div",{className:"stat-value",children:t(s.totalValue)}),u.jsx("div",{className:"stat-label",children:"Valor Total"}),u.jsxs("div",{className:"stat-secondary",children:["Promedio: ",t(s.averageValue)]})]})]}),u.jsxs("div",{className:"stat-card",children:[u.jsx("div",{className:"stat-icon",children:"⛽"}),u.jsxs("div",{className:"stat-content",children:[u.jsx("div",{className:"stat-value",children:r(s.totalQuantity)}),u.jsx("div",{className:"stat-label",children:"Galones Total"}),u.jsxs("div",{className:"stat-secondary",children:["Promedio: ",r(s.totalQuantity/(s.totalMovements||1))," gal/mov"]})]})]}),u.jsxs("div",{className:"stat-card",children:[u.jsx("div",{className:"stat-icon",children:"📅"}),u.jsxs("div",{className:"stat-content",children:[u.jsx("div",{className:"stat-value",children:r(s.thisWeek)}),u.jsx("div",{className:"stat-label",children:"Esta Semana"}),u.jsxs("div",{className:"stat-secondary",children:[r(s.thisMonth)," este mes"]})]})]})]}),u.jsxs("div",{className:"stats-breakdown",children:[u.jsxs("div",{className:"breakdown-section",children:[u.jsx("h4",{children:"📋 Por Tipo de Movimiento"}),u.jsx("div",{className:"breakdown-grid",children:Object.entries(s.byType).map(([g,v])=>{const _=(v/s.totalMovements*100).toFixed(1);return u.jsxs("div",{className:"breakdown-item",children:[u.jsxs("div",{className:"breakdown-header",children:[u.jsx("span",{className:"breakdown-icon",children:d(g)}),u.jsx("span",{className:"breakdown-label",children:g.charAt(0).toUpperCase()+g.slice(1)})]}),u.jsx("div",{className:"breakdown-value",children:v}),u.jsx("div",{className:"breakdown-bar",children:u.jsx("div",{className:"breakdown-fill",style:{width:`${_}%`,backgroundColor:c(g)}})}),u.jsxs("div",{className:"breakdown-percentage",children:[_,"%"]})]},g)})})]}),u.jsxs("div",{className:"breakdown-section",children:[u.jsx("h4",{children:"⚡ Por Estado"}),u.jsx("div",{className:"breakdown-grid",children:Object.entries(s.byStatus).map(([g,v])=>{const _=(v/s.totalMovements*100).toFixed(1),A=D=>{switch(D){case $e.COMPLETADO:return"#10b981";case $e.PENDIENTE:return"#f59e0b";case $e.CANCELADO:return"#ef4444";default:return"#6b7280"}},b=D=>{switch(D){case $e.COMPLETADO:return"✅";case $e.PENDIENTE:return"⏳";case $e.CANCELADO:return"❌";default:return"❓"}};return u.jsxs("div",{className:"breakdown-item",children:[u.jsxs("div",{className:"breakdown-header",children:[u.jsx("span",{className:"breakdown-icon",children:b(g)}),u.jsx("span",{className:"breakdown-label",children:g.charAt(0).toUpperCase()+g.slice(1)})]}),u.jsx("div",{className:"breakdown-value",children:v}),u.jsx("div",{className:"breakdown-bar",children:u.jsx("div",{className:"breakdown-fill",style:{width:`${_}%`,backgroundColor:A(g)}})}),u.jsxs("div",{className:"breakdown-percentage",children:[_,"%"]})]},g)})})]}),u.jsxs("div",{className:"breakdown-section",children:[u.jsx("h4",{children:"⛽ Por Tipo de Combustible"}),u.jsx("div",{className:"breakdown-grid",children:Object.entries(s.byFuelType).map(([g,v])=>{const _=(v/s.totalMovements*100).toFixed(1),A=b=>{switch(b?.toLowerCase()){case"diesel":return"🚛";case"gasolina":return"🚗";case"acpm":return"🚚";case"lubricante":return"🛢️";default:return"⛽"}};return u.jsxs("div",{className:"breakdown-item",children:[u.jsxs("div",{className:"breakdown-header",children:[u.jsx("span",{className:"breakdown-icon",children:A(g)}),u.jsx("span",{className:"breakdown-label",children:g})]}),u.jsx("div",{className:"breakdown-value",children:v}),u.jsx("div",{className:"breakdown-bar",children:u.jsx("div",{className:"breakdown-fill",style:{width:`${_}%`,backgroundColor:"#059669"}})}),u.jsxs("div",{className:"breakdown-percentage",children:[_,"%"]})]},g)})})]})]}),(e.type||e.status||e.fuelType||e.vehicleId)&&u.jsxs("div",{className:"active-filters",children:[u.jsx("h4",{children:"🔍 Filtros Activos"}),u.jsxs("div",{className:"filters-list",children:[e.type&&u.jsxs("span",{className:"filter-tag",children:["Tipo: ",e.type]}),e.status&&u.jsxs("span",{className:"filter-tag",children:["Estado: ",e.status]}),e.fuelType&&u.jsxs("span",{className:"filter-tag",children:["Combustible: ",e.fuelType]}),e.vehicleId&&u.jsxs("span",{className:"filter-tag",children:["Vehículo: ",e.vehicleId]})]})]})]})},CV=({filters:s,onFilterChange:e,onClearFilters:t,searchTerm:r,onSearchChange:o,viewMode:c,onViewModeChange:d,totalResults:m})=>{const[g,v]=le.useState(!1),_=[{value:"Diesel",label:"Diesel 🚛"},{value:"Gasolina",label:"Gasolina 🚗"},{value:"ACPM",label:"ACPM 🚚"},{value:"Lubricante",label:"Lubricante 🛢️"}],A=[{value:"all",label:"Todos los períodos"},{value:"today",label:"Hoy"},{value:"week",label:"Esta semana"},{value:"month",label:"Este mes"},{value:"quarter",label:"Este trimestre"},{value:"year",label:"Este año"}],b=Object.values(s).filter(F=>F&&F!==""&&F!=="all").length,D=(F,w)=>{e({[F]:w})},C=F=>{e(F)};return u.jsxs("div",{className:"movements-filters",children:[u.jsxs("div",{className:"filters-main",children:[u.jsx("div",{className:"search-section",children:u.jsxs("div",{className:"search-box",children:[u.jsx("span",{className:"search-icon",children:"🔍"}),u.jsx("input",{type:"text",placeholder:"Buscar por combustible, vehículo, referencia...",value:r,onChange:F=>o(F.target.value),className:"search-input"}),r&&u.jsx("button",{className:"search-clear",onClick:()=>o(""),title:"Limpiar búsqueda",children:"✕"})]})}),u.jsxs("div",{className:"filters-controls",children:[u.jsxs("div",{className:"quick-filters",children:[u.jsx("button",{className:`quick-filter ${s.type===Re.ENTRADA?"active":""}`,onClick:()=>C({type:Re.ENTRADA}),children:"📥 Entradas"}),u.jsx("button",{className:`quick-filter ${s.type===Re.SALIDA?"active":""}`,onClick:()=>C({type:Re.SALIDA}),children:"📤 Salidas"}),u.jsx("button",{className:`quick-filter ${s.status===$e.PENDIENTE?"active":""}`,onClick:()=>C({status:$e.PENDIENTE}),children:"⏳ Pendientes"})]}),u.jsxs("button",{className:`btn-advanced-filters ${g?"active":""}`,onClick:()=>v(!g),children:["🎛️ Filtros",b>0&&u.jsx("span",{className:"filters-count",children:b})]}),u.jsxs("div",{className:"view-modes",children:[u.jsx("button",{className:`view-mode ${c==="cards"?"active":""}`,onClick:()=>d("cards"),title:"Vista en tarjetas",children:"🎴"}),u.jsx("button",{className:`view-mode ${c==="table"?"active":""}`,onClick:()=>d("table"),title:"Vista en tabla",children:"📋"})]})]})]}),g&&u.jsxs("div",{className:"filters-advanced",children:[u.jsxs("div",{className:"filters-grid",children:[u.jsxs("div",{className:"filter-group",children:[u.jsx("label",{children:"Tipo de Movimiento"}),u.jsxs("select",{value:s.type,onChange:F=>D("type",F.target.value),className:"filter-select",children:[u.jsx("option",{value:"",children:"Todos los tipos"}),u.jsx("option",{value:Re.ENTRADA,children:"📥 Entrada"}),u.jsx("option",{value:Re.SALIDA,children:"📤 Salida"}),u.jsx("option",{value:Re.TRANSFERENCIA,children:"🔄 Transferencia"}),u.jsx("option",{value:Re.AJUSTE,children:"⚖️ Ajuste"})]})]}),u.jsxs("div",{className:"filter-group",children:[u.jsx("label",{children:"Estado"}),u.jsxs("select",{value:s.status,onChange:F=>D("status",F.target.value),className:"filter-select",children:[u.jsx("option",{value:"",children:"Todos los estados"}),u.jsx("option",{value:$e.PENDIENTE,children:"⏳ Pendiente"}),u.jsx("option",{value:$e.COMPLETADO,children:"✅ Completado"}),u.jsx("option",{value:$e.CANCELADO,children:"❌ Cancelado"})]})]}),u.jsxs("div",{className:"filter-group",children:[u.jsx("label",{children:"Tipo de Combustible"}),u.jsxs("select",{value:s.fuelType,onChange:F=>D("fuelType",F.target.value),className:"filter-select",children:[u.jsx("option",{value:"",children:"Todos los combustibles"}),_.map(F=>u.jsx("option",{value:F.value,children:F.label},F.value))]})]}),u.jsxs("div",{className:"filter-group",children:[u.jsx("label",{children:"Período"}),u.jsx("select",{value:s.dateRange,onChange:F=>D("dateRange",F.target.value),className:"filter-select",children:A.map(F=>u.jsx("option",{value:F.value,children:F.label},F.value))})]}),u.jsxs("div",{className:"filter-group",children:[u.jsx("label",{children:"Vehículo/Equipo"}),u.jsx("input",{type:"text",placeholder:"ID del vehículo...",value:s.vehicleId,onChange:F=>D("vehicleId",F.target.value),className:"filter-input"})]})]}),u.jsxs("div",{className:"filters-actions",children:[u.jsx("button",{className:"btn-clear-filters",onClick:t,disabled:b===0,children:"🗑️ Limpiar Filtros"}),u.jsxs("div",{className:"filters-info",children:[u.jsxs("span",{className:"results-count",children:[m," resultado",m!==1?"s":""]}),b>0&&u.jsxs("span",{className:"active-filters-text",children:["(",b," filtro",b!==1?"s":""," activo",b!==1?"s":"",")"]})]})]})]}),u.jsx("div",{className:"keyboard-shortcuts",style:{display:"none"},children:u.jsx("small",{children:"💡 Atajos: Ctrl+F (buscar), Ctrl+1 (entradas), Ctrl+2 (salidas), Ctrl+3 (pendientes)"})})]})},RV=({movements:s,onEdit:e,onView:t,userRole:r})=>{const o=b=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0,maximumFractionDigits:0}).format(b),c=b=>b?(b instanceof Date?b:new Date(b)).toLocaleDateString("es-CO",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"Sin fecha",d=b=>{if(!b)return"";const D=new Date,C=b instanceof Date?b:new Date(b),F=Math.abs(D-C),w=Math.ceil(F/(1e3*60*60*24));return w===1?"hace 1 día":w<7?`hace ${w} días`:w<30?`hace ${Math.ceil(w/7)} semanas`:w<365?`hace ${Math.ceil(w/30)} meses`:`hace ${Math.ceil(w/365)} años`},m=b=>{switch(b){case Re.ENTRADA:return"movement-entrada";case Re.SALIDA:return"movement-salida";case Re.TRANSFERENCIA:return"movement-transferencia";case Re.AJUSTE:return"movement-ajuste";default:return"movement-default"}},g=b=>{switch(b){case $e.COMPLETADO:return"status-completado";case $e.PENDIENTE:return"status-pendiente";case $e.CANCELADO:return"status-cancelado";default:return"status-default"}},v=b=>{switch(b){case Re.ENTRADA:return"📥";case Re.SALIDA:return"📤";case Re.TRANSFERENCIA:return"🔄";case Re.AJUSTE:return"⚖️";default:return"📋"}},_=b=>{switch(b?.toLowerCase()){case"diesel":return"🚛";case"gasolina":return"🚗";case"acpm":return"🚚";case"lubricante":return"🛢️";default:return"⛽"}},A=b=>{switch(b){case $e.COMPLETADO:return"✅";case $e.PENDIENTE:return"⏳";case $e.CANCELADO:return"❌";default:return"❓"}};return u.jsx("div",{className:"movements-cards",children:s.map(b=>u.jsxs("div",{className:`movement-card ${m(b.type)}`,children:[u.jsxs("div",{className:"card-header",children:[u.jsxs("div",{className:"movement-type",children:[u.jsx("span",{className:"type-icon",children:v(b.type)}),u.jsx("span",{className:"type-label",children:b.type.charAt(0).toUpperCase()+b.type.slice(1)})]}),u.jsxs("div",{className:`status-badge ${g(b.status)}`,children:[u.jsx("span",{className:"status-icon",children:A(b.status)}),u.jsx("span",{className:"status-label",children:b.status.charAt(0).toUpperCase()+b.status.slice(1)})]})]}),u.jsxs("div",{className:"card-content",children:[u.jsxs("div",{className:"fuel-info",children:[u.jsx("span",{className:"fuel-icon",children:_(b.fuelType)}),u.jsx("span",{className:"fuel-type",children:b.fuelType}),u.jsxs("span",{className:"quantity",children:[b.quantity," galones"]})]}),u.jsxs("div",{className:"value-info",children:[u.jsx("div",{className:"total-value",children:o(b.totalValue)}),u.jsxs("div",{className:"unit-price",children:[o(b.unitPrice),"/galón"]})]}),b.vehicleId&&u.jsxs("div",{className:"vehicle-info",children:[u.jsx("span",{className:"vehicle-icon",children:"🚜"}),u.jsxs("span",{className:"vehicle-id",children:["Vehículo: ",b.vehicleId]})]}),b.location&&u.jsxs("div",{className:"location-info",children:[u.jsx("span",{className:"location-icon",children:"📍"}),u.jsx("span",{className:"location",children:b.location})]}),b.description&&u.jsx("div",{className:"description",children:u.jsx("p",{children:b.description})}),b.reference&&u.jsxs("div",{className:"reference",children:[u.jsx("span",{className:"reference-label",children:"Ref:"}),u.jsx("span",{className:"reference-value",children:b.reference})]})]}),u.jsxs("div",{className:"card-footer",children:[u.jsxs("div",{className:"date-info",children:[u.jsx("div",{className:"created-date",children:c(b.createdAt)}),u.jsx("div",{className:"relative-time",children:d(b.createdAt)})]}),u.jsxs("div",{className:"card-actions",children:[u.jsx("button",{className:"btn-view",onClick:()=>t(b),title:"Ver detalles",children:"👁️"}),e&&b.status===$e.PENDIENTE&&u.jsx("button",{className:"btn-edit",onClick:()=>e(b),title:"Editar movimiento",children:"✏️"}),b.status===$e.PENDIENTE&&r==="admin"&&u.jsx("button",{className:"btn-approve",onClick:()=>{console.log("Aprobar movimiento:",b.id)},title:"Aprobar movimiento",children:"✓"})]})]}),b.status===$e.PENDIENTE&&u.jsx("div",{className:"urgency-indicator",children:u.jsx("div",{className:"urgency-pulse"})}),b.type===Re.AJUSTE&&u.jsx("div",{className:"adjustment-badge",children:u.jsx("span",{children:"Ajuste"})}),b.type===Re.TRANSFERENCIA&&b.destinationLocation&&u.jsxs("div",{className:"transfer-info",children:[u.jsx("span",{className:"transfer-arrow",children:"→"}),u.jsx("span",{className:"destination",children:b.destinationLocation})]})]},b.id))})},DV=({movements:s,onEdit:e,onView:t,userRole:r})=>{const[o,c]=le.useState("createdAt"),[d,m]=le.useState("desc"),g=G=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0,maximumFractionDigits:0}).format(G),v=G=>G?(G instanceof Date?G:new Date(G)).toLocaleDateString("es-CO",{day:"2-digit",month:"2-digit",year:"2-digit",hour:"2-digit",minute:"2-digit"}):"Sin fecha",_=G=>{switch(G){case Re.ENTRADA:return"📥";case Re.SALIDA:return"📤";case Re.TRANSFERENCIA:return"🔄";case Re.AJUSTE:return"⚖️";default:return"📋"}},A=G=>{switch(G?.toLowerCase()){case"diesel":return"🚛";case"gasolina":return"🚗";case"acpm":return"🚚";case"lubricante":return"🛢️";default:return"⛽"}},b=G=>{switch(G){case $e.COMPLETADO:return"✅";case $e.PENDIENTE:return"⏳";case $e.CANCELADO:return"❌";default:return"❓"}},D=G=>{switch(G){case $e.COMPLETADO:return"status-completado";case $e.PENDIENTE:return"status-pendiente";case $e.CANCELADO:return"status-cancelado";default:return"status-default"}},C=G=>{o===G?m(d==="asc"?"desc":"asc"):(c(G),m("asc"))},F=[...s].sort((G,te)=>{let ee=G[o],Y=te[o];return(o.includes("Date")||o.includes("At"))&&(ee=new Date(ee),Y=new Date(Y)),typeof ee=="number"&&typeof Y=="number"?d==="asc"?ee-Y:Y-ee:typeof ee=="string"&&typeof Y=="string"?d==="asc"?ee.localeCompare(Y):Y.localeCompare(ee):ee instanceof Date&&Y instanceof Date?d==="asc"?ee-Y:Y-ee:0}),w=G=>o!==G?"↕️":d==="asc"?"↑":"↓";return u.jsxs("div",{className:"movements-table-container",children:[u.jsx("div",{className:"table-wrapper",children:u.jsxs("table",{className:"movements-table",children:[u.jsx("thead",{children:u.jsxs("tr",{children:[u.jsxs("th",{className:"sortable",onClick:()=>C("type"),children:["Tipo ",w("type")]}),u.jsxs("th",{className:"sortable",onClick:()=>C("fuelType"),children:["Combustible ",w("fuelType")]}),u.jsxs("th",{className:"sortable text-right",onClick:()=>C("quantity"),children:["Cantidad ",w("quantity")]}),u.jsxs("th",{className:"sortable text-right",onClick:()=>C("unitPrice"),children:["Precio/Gal ",w("unitPrice")]}),u.jsxs("th",{className:"sortable text-right",onClick:()=>C("totalValue"),children:["Valor Total ",w("totalValue")]}),u.jsx("th",{children:"Vehículo"}),u.jsx("th",{children:"Ubicación"}),u.jsxs("th",{className:"sortable",onClick:()=>C("status"),children:["Estado ",w("status")]}),u.jsxs("th",{className:"sortable",onClick:()=>C("createdAt"),children:["Fecha ",w("createdAt")]}),u.jsx("th",{className:"actions-column",children:"Acciones"})]})}),u.jsx("tbody",{children:F.map(G=>u.jsxs("tr",{className:`movement-row ${G.status===$e.PENDIENTE?"pending-row":""}`,children:[u.jsx("td",{className:"type-cell",children:u.jsxs("div",{className:"type-content",children:[u.jsx("span",{className:"type-icon",children:_(G.type)}),u.jsx("span",{className:"type-text",children:G.type.charAt(0).toUpperCase()+G.type.slice(1)})]})}),u.jsx("td",{className:"fuel-cell",children:u.jsxs("div",{className:"fuel-content",children:[u.jsx("span",{className:"fuel-icon",children:A(G.fuelType)}),u.jsx("span",{className:"fuel-text",children:G.fuelType})]})}),u.jsxs("td",{className:"quantity-cell text-right",children:[u.jsx("span",{className:"quantity-value",children:G.quantity}),u.jsx("span",{className:"quantity-unit",children:"gal"})]}),u.jsx("td",{className:"price-cell text-right",children:g(G.unitPrice)}),u.jsx("td",{className:"value-cell text-right",children:u.jsx("strong",{children:g(G.totalValue)})}),u.jsx("td",{className:"vehicle-cell",children:G.vehicleId?u.jsxs("span",{className:"vehicle-id",children:["🚜 ",G.vehicleId]}):u.jsx("span",{className:"no-vehicle",children:"-"})}),u.jsx("td",{className:"location-cell",children:u.jsxs("span",{className:"location-text",children:["📍 ",G.location||"Principal"]})}),u.jsx("td",{className:"status-cell",children:u.jsxs("div",{className:`status-badge ${D(G.status)}`,children:[u.jsx("span",{className:"status-icon",children:b(G.status)}),u.jsx("span",{className:"status-text",children:G.status.charAt(0).toUpperCase()+G.status.slice(1)})]})}),u.jsx("td",{className:"date-cell",children:u.jsxs("div",{className:"date-content",children:[u.jsx("span",{className:"date-value",children:v(G.createdAt)}),G.reference&&u.jsxs("span",{className:"reference-small",children:["#",G.reference]})]})}),u.jsx("td",{className:"actions-cell",children:u.jsxs("div",{className:"action-buttons",children:[u.jsx("button",{className:"btn-action btn-view",onClick:()=>t(G),title:"Ver detalles",children:"👁️"}),e&&G.status===$e.PENDIENTE&&u.jsx("button",{className:"btn-action btn-edit",onClick:()=>e(G),title:"Editar movimiento",children:"✏️"}),G.status===$e.PENDIENTE&&r==="admin"&&u.jsx("button",{className:"btn-action btn-approve",onClick:()=>{console.log("Aprobar movimiento:",G.id)},title:"Aprobar movimiento",children:"✓"})]})})]},G.id))})]})}),u.jsxs("div",{className:"table-info",children:[u.jsxs("div",{className:"table-summary",children:[u.jsxs("span",{className:"total-rows",children:[s.length," movimiento",s.length!==1?"s":""]}),o&&u.jsxs("span",{className:"sort-info",children:["Ordenado por ",o," (",d==="asc"?"ascendente":"descendente",")"]})]}),u.jsxs("div",{className:"table-legend",children:[u.jsxs("span",{className:"legend-item",children:[u.jsx("span",{className:"legend-icon",children:"⏳"})," Pendiente"]}),u.jsxs("span",{className:"legend-item",children:[u.jsx("span",{className:"legend-icon",children:"✅"})," Completado"]}),u.jsxs("span",{className:"legend-item",children:[u.jsx("span",{className:"legend-icon",children:"❌"})," Cancelado"]})]})]})]})},jV=({movements:s,viewMode:e,onEdit:t,onView:r,userRole:o})=>e==="table"?u.jsx(DV,{movements:s,onEdit:t,onView:r,userRole:o}):u.jsx(RV,{movements:s,onEdit:t,onView:r,userRole:o}),OV=({isOpen:s,onClose:e,movement:t,mode:r,onSuccess:o})=>{const[c,d]=le.useState({type:"",fuelType:"",quantity:"",unitPrice:"",location:"Principal",vehicleId:"",destinationLocation:"",description:"",reference:"",effectiveDate:new Date().toISOString().slice(0,16)}),[m,g]=le.useState(!1),[v,_]=le.useState(""),[A,b]=le.useState({}),D=[{value:"Diesel",label:"Diesel 🚛",price:12500},{value:"Gasolina",label:"Gasolina 🚗",price:14200},{value:"ACPM",label:"ACPM 🚚",price:13800},{value:"Lubricante",label:"Lubricante 🛢️",price:45e3}],C=["Principal","Bodega Norte","Bodega Sur","Campo Operativo","Estación Móvil"];le.useEffect(()=>{t&&(r==="edit"||r==="view")?d({type:t.type||"",fuelType:t.fuelType||"",quantity:t.quantity?.toString()||"",unitPrice:t.unitPrice?.toString()||"",location:t.location||"Principal",vehicleId:t.vehicleId||"",destinationLocation:t.destinationLocation||"",description:t.description||"",reference:t.reference||"",effectiveDate:t.effectiveDate?new Date(t.effectiveDate).toISOString().slice(0,16):new Date().toISOString().slice(0,16)}):r==="create"&&d({type:"",fuelType:"",quantity:"",unitPrice:"",location:"Principal",vehicleId:"",destinationLocation:"",description:"",reference:"",effectiveDate:new Date().toISOString().slice(0,16)}),_(""),b({})},[t,r,s]),le.useEffect(()=>{if(c.fuelType&&!c.unitPrice){const U=D.find(he=>he.value===c.fuelType);U&&d(he=>({...he,unitPrice:U.price.toString()}))}},[c.fuelType]);const F=(U,he)=>{d(k=>({...k,[U]:he})),A[U]&&b(k=>({...k,[U]:""}))},w=()=>{const U={};return c.type||(U.type="Tipo de movimiento requerido"),c.fuelType||(U.fuelType="Tipo de combustible requerido"),c.quantity?parseFloat(c.quantity)<=0&&(U.quantity="La cantidad debe ser mayor a cero"):U.quantity="Cantidad requerida",c.unitPrice?parseFloat(c.unitPrice)<0&&(U.unitPrice="El precio no puede ser negativo"):U.unitPrice="Precio unitario requerido",c.type===Re.SALIDA&&!c.vehicleId&&(U.vehicleId="Las salidas requieren un vehículo"),c.type===Re.TRANSFERENCIA&&!c.destinationLocation&&(U.destinationLocation="Las transferencias requieren una ubicación destino"),b(U),Object.keys(U).length===0},G=async U=>{if(U.preventDefault(),!w()){_("Por favor corrige los errores en el formulario");return}g(!0),_("");try{const he={...c,quantity:parseFloat(c.quantity),unitPrice:parseFloat(c.unitPrice),effectiveDate:new Date(c.effectiveDate)};r==="create"?await EV(he):r==="edit"&&await AV(t.id,he),o()}catch(he){console.error("Error al guardar movimiento:",he),_(he.message||"Error al guardar el movimiento")}finally{g(!1)}},te=(parseFloat(c.quantity)||0)*(parseFloat(c.unitPrice)||0),ee=U=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0,maximumFractionDigits:0}).format(U),Y=()=>{switch(r){case"create":return"➕ Nuevo Movimiento";case"edit":return"✏️ Editar Movimiento";case"view":return"👁️ Detalles del Movimiento";default:return"Movimiento"}};return s?u.jsx("div",{className:"modal-overlay",onClick:e,children:u.jsxs("div",{className:"modal-content movement-modal",onClick:U=>U.stopPropagation(),children:[u.jsxs("div",{className:"modal-header",children:[u.jsx("h3",{children:Y()}),u.jsx("button",{className:"modal-close",onClick:e,children:"✕"})]}),u.jsxs("div",{className:"modal-body",children:[v&&u.jsxs("div",{className:"error-message",children:[u.jsx("span",{className:"error-icon",children:"⚠️"}),v]}),u.jsxs("form",{onSubmit:G,className:"movement-form",children:[u.jsxs("div",{className:"form-row",children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Tipo de Movimiento *"}),u.jsxs("select",{value:c.type,onChange:U=>F("type",U.target.value),disabled:r==="view",className:A.type?"error":"",children:[u.jsx("option",{value:"",children:"Seleccionar tipo..."}),u.jsx("option",{value:Re.ENTRADA,children:"📥 Entrada"}),u.jsx("option",{value:Re.SALIDA,children:"📤 Salida"}),u.jsx("option",{value:Re.TRANSFERENCIA,children:"🔄 Transferencia"}),u.jsx("option",{value:Re.AJUSTE,children:"⚖️ Ajuste"})]}),A.type&&u.jsx("span",{className:"field-error",children:A.type})]}),r==="view"&&t&&u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Estado"}),u.jsx("div",{className:"status-display",children:u.jsxs("span",{className:`status-badge status-${t.status}`,children:[t.status===$e.COMPLETADO&&"✅",t.status===$e.PENDIENTE&&"⏳",t.status===$e.CANCELADO&&"❌",t.status.charAt(0).toUpperCase()+t.status.slice(1)]})})]})]}),u.jsxs("div",{className:"form-row",children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Tipo de Combustible *"}),u.jsxs("select",{value:c.fuelType,onChange:U=>F("fuelType",U.target.value),disabled:r==="view",className:A.fuelType?"error":"",children:[u.jsx("option",{value:"",children:"Seleccionar combustible..."}),D.map(U=>u.jsx("option",{value:U.value,children:U.label},U.value))]}),A.fuelType&&u.jsx("span",{className:"field-error",children:A.fuelType})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Cantidad (galones) *"}),u.jsx("input",{type:"number",step:"0.01",min:"0",value:c.quantity,onChange:U=>F("quantity",U.target.value),disabled:r==="view",placeholder:"0.00",className:A.quantity?"error":""}),A.quantity&&u.jsx("span",{className:"field-error",children:A.quantity})]})]}),u.jsxs("div",{className:"form-row",children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Precio Unitario (COP) *"}),u.jsx("input",{type:"number",step:"1",min:"0",value:c.unitPrice,onChange:U=>F("unitPrice",U.target.value),disabled:r==="view",placeholder:"0",className:A.unitPrice?"error":""}),A.unitPrice&&u.jsx("span",{className:"field-error",children:A.unitPrice})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Valor Total"}),u.jsx("div",{className:"total-value-display",children:ee(te)})]})]}),u.jsxs("div",{className:"form-row",children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Ubicación"}),u.jsx("select",{value:c.location,onChange:U=>F("location",U.target.value),disabled:r==="view",children:C.map(U=>u.jsxs("option",{value:U,children:["📍 ",U]},U))})]}),u.jsxs("div",{className:"form-group",children:[u.jsxs("label",{children:["Vehículo/Equipo ",c.type===Re.SALIDA&&"*"]}),u.jsx("input",{type:"text",value:c.vehicleId,onChange:U=>F("vehicleId",U.target.value),disabled:r==="view",placeholder:"ID del vehículo o equipo",className:A.vehicleId?"error":""}),A.vehicleId&&u.jsx("span",{className:"field-error",children:A.vehicleId})]})]}),c.type===Re.TRANSFERENCIA&&u.jsx("div",{className:"form-row",children:u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Ubicación Destino *"}),u.jsxs("select",{value:c.destinationLocation,onChange:U=>F("destinationLocation",U.target.value),disabled:r==="view",className:A.destinationLocation?"error":"",children:[u.jsx("option",{value:"",children:"Seleccionar destino..."}),C.filter(U=>U!==c.location).map(U=>u.jsxs("option",{value:U,children:["📍 ",U]},U))]}),A.destinationLocation&&u.jsx("span",{className:"field-error",children:A.destinationLocation})]})}),u.jsxs("div",{className:"form-row",children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Fecha Efectiva"}),u.jsx("input",{type:"datetime-local",value:c.effectiveDate,onChange:U=>F("effectiveDate",U.target.value),disabled:r==="view"})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Referencia"}),u.jsx("input",{type:"text",value:c.reference,onChange:U=>F("reference",U.target.value),disabled:r==="view",placeholder:"Factura, orden, etc."})]})]}),u.jsx("div",{className:"form-row",children:u.jsxs("div",{className:"form-group full-width",children:[u.jsx("label",{children:"Descripción"}),u.jsx("textarea",{value:c.description,onChange:U=>F("description",U.target.value),disabled:r==="view",placeholder:"Detalles adicionales del movimiento...",rows:"3"})]})}),r==="view"&&t&&u.jsx("div",{className:"movement-details",children:u.jsxs("div",{className:"details-section",children:[u.jsx("h4",{children:"📋 Información del Sistema"}),u.jsxs("div",{className:"details-grid",children:[u.jsxs("div",{className:"detail-item",children:[u.jsx("label",{children:"ID:"}),u.jsx("span",{children:t.id})]}),u.jsxs("div",{className:"detail-item",children:[u.jsx("label",{children:"Creado:"}),u.jsx("span",{children:new Date(t.createdAt).toLocaleString("es-CO")})]}),t.updatedAt&&u.jsxs("div",{className:"detail-item",children:[u.jsx("label",{children:"Actualizado:"}),u.jsx("span",{children:new Date(t.updatedAt).toLocaleString("es-CO")})]}),t.approvedAt&&u.jsxs("div",{className:"detail-item",children:[u.jsx("label",{children:"Aprobado:"}),u.jsx("span",{children:new Date(t.approvedAt).toLocaleString("es-CO")})]})]})]})})]})]}),u.jsxs("div",{className:"modal-footer",children:[u.jsx("button",{type:"button",className:"btn-cancel",onClick:e,children:r==="view"?"Cerrar":"Cancelar"}),r!=="view"&&u.jsx("button",{type:"submit",className:"btn-primary",onClick:G,disabled:m,children:m?u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"loading-spinner small"}),"Guardando..."]}):r==="create"?"Crear Movimiento":"Actualizar Movimiento"})]})]})}):null},MV=()=>{const{user:s}=le.useContext(Ld),[e,t]=le.useState([]),[r,o]=le.useState(null),[c,d]=le.useState(!0),[m,g]=le.useState(null),[v,_]=le.useState({type:"",status:"",fuelType:"",vehicleId:"",dateRange:"all"}),[A,b]=le.useState("cards"),[D,C]=le.useState(""),[F,w]=le.useState(!1),[G,te]=le.useState(null),[ee,Y]=le.useState("create");le.useEffect(()=>{if(!s)return;d(!0);const we=NV((xe,X)=>{if(X){console.error("Error en suscripción de movimientos:",X),g("Error al cargar movimientos"),d(!1);return}t(xe),g(null),d(!1)},v);return()=>we()},[s,v]),le.useEffect(()=>{s&&(async()=>{try{const xe=await SV(v);o(xe)}catch(xe){console.error("Error al cargar estadísticas:",xe)}})()},[s,e,v]);const U=e.filter(we=>{if(!D)return!0;const xe=D.toLowerCase();return we.fuelType?.toLowerCase().includes(xe)||we.type?.toLowerCase().includes(xe)||we.location?.toLowerCase().includes(xe)||we.vehicleId?.toLowerCase().includes(xe)||we.description?.toLowerCase().includes(xe)||we.reference?.toLowerCase().includes(xe)}),he=()=>{te(null),Y("create"),w(!0)},k=we=>{te(we),Y("edit"),w(!0)},x=we=>{te(we),Y("view"),w(!0)},I=()=>{w(!1),te(null)},M=we=>{_(xe=>({...xe,...we}))},V=()=>{_({type:"",status:"",fuelType:"",vehicleId:"",dateRange:"all"}),C("")},j=s?.role==="admin"||s?.role==="contador",R=s?.role==="admin";return c?u.jsx("div",{className:"movements-main",children:u.jsxs("div",{className:"loading-container",children:[u.jsx("div",{className:"loading-spinner"}),u.jsx("p",{children:"Cargando movimientos..."})]})}):m?u.jsx("div",{className:"movements-main",children:u.jsxs("div",{className:"error-container",children:[u.jsx("div",{className:"error-icon",children:"⚠️"}),u.jsx("h3",{children:"Error al cargar movimientos"}),u.jsx("p",{children:m}),u.jsx("button",{className:"btn-retry",onClick:()=>window.location.reload(),children:"Reintentar"})]})}):u.jsxs("div",{className:"movements-main",children:[u.jsxs("div",{className:"movements-header",children:[u.jsxs("div",{className:"header-title",children:[u.jsx("h2",{children:"📊 Movimientos de Combustibles"}),u.jsx("p",{children:"Gestiona entradas, salidas, transferencias y ajustes de inventario"})]}),j&&u.jsx("button",{className:"btn-create-movement",onClick:he,children:"➕ Nuevo Movimiento"})]}),r&&u.jsx(IV,{stats:r,filters:v}),u.jsx(CV,{filters:v,onFilterChange:M,onClearFilters:V,searchTerm:D,onSearchChange:C,viewMode:A,onViewModeChange:b,totalResults:U.length}),U.length===0?u.jsxs("div",{className:"empty-state",children:[u.jsx("div",{className:"empty-icon",children:"📋"}),u.jsx("h3",{children:e.length===0?"No hay movimientos registrados":"No se encontraron movimientos"}),u.jsx("p",{children:e.length===0?"Comienza creando tu primer movimiento de combustible":"Intenta ajustar los filtros de búsqueda"}),e.length===0&&j&&u.jsx("button",{className:"btn-create-first",onClick:he,children:"➕ Crear Primer Movimiento"})]}):u.jsx(jV,{movements:U,viewMode:A,onEdit:R?k:null,onView:x,userRole:s?.role}),F&&u.jsx(OV,{isOpen:F,onClose:I,movement:G,mode:ee,onSuccess:()=>{I()}})]})},mS="combustibles_vehicles",pe={EXCAVADORA:"excavadora",BULLDOZER:"bulldozer",CARGADOR:"cargador",CAMION:"camion",GRUA:"grua",MOTOSIERRA:"motosierra",TRACTOR:"tractor",VOLQUETA:"volqueta",OTROS:"otros"},De={ACTIVO:"activo",MANTENIMIENTO:"mantenimiento",INACTIVO:"inactivo",REPARACION:"reparacion"},gt={DIESEL:"Diesel",GASOLINA:"Gasolina",ACPM:"ACPM",MIXTO:"Mixto"},VV=async(s={})=>{try{let e=Os(en,mS);s.type&&(e=xt(e,ln("type","==",s.type))),s.status&&(e=xt(e,ln("status","==",s.status))),s.fuelType&&(e=xt(e,ln("fuelType","==",s.fuelType))),s.location&&(e=xt(e,ln("currentLocation","==",s.location))),e=xt(e,Bo("vehicleId","asc"));const t=await Bc(e),r=[];return t.forEach(o=>{r.push({id:o.id,...o.data(),createdAt:o.data().createdAt?.toDate?.()||o.data().createdAt,updatedAt:o.data().updatedAt?.toDate?.()||o.data().updatedAt,lastMovementDate:o.data().lastMovementDate?.toDate?.()||o.data().lastMovementDate,lastMaintenanceDate:o.data().lastMaintenanceDate?.toDate?.()||o.data().lastMaintenanceDate})}),r}catch(e){throw console.error("❌ Error al obtener vehículos:",e),new Error(`Error al obtener vehículos: ${e.message}`)}},kV=(s,e={})=>{try{let t=Os(en,mS);return e.type&&(t=xt(t,ln("type","==",e.type))),e.status&&(t=xt(t,ln("status","==",e.status))),t=xt(t,Bo("vehicleId","asc")),Yg(t,r=>{const o=[];r.forEach(c=>{o.push({id:c.id,...c.data(),createdAt:c.data().createdAt?.toDate?.()||c.data().createdAt,updatedAt:c.data().updatedAt?.toDate?.()||c.data().updatedAt,lastMovementDate:c.data().lastMovementDate?.toDate?.()||c.data().lastMovementDate,lastMaintenanceDate:c.data().lastMaintenanceDate?.toDate?.()||c.data().lastMaintenanceDate})}),s(o)},r=>{console.error("❌ Error en suscripción de vehículos:",r),s([],r)})}catch(t){throw console.error("❌ Error al configurar suscripción:",t),new Error(`Error en suscripción: ${t.message}`)}},PV=async(s={})=>{try{const e=await VV(s),t={totalVehicles:e.length,byType:{},byStatus:{},byFuelType:{},totalFuelConsumed:0,totalHoursWorked:0,averageConsumption:0,mostActiveVehicle:null,leastActiveVehicle:null};let r=0,o=1/0;return e.forEach(c=>{t.byType[c.type]=(t.byType[c.type]||0)+1,t.byStatus[c.status]=(t.byStatus[c.status]||0)+1,t.byFuelType[c.fuelType]=(t.byFuelType[c.fuelType]||0)+1,t.totalFuelConsumed+=c.totalFuelConsumed||0,t.totalHoursWorked+=c.totalHoursWorked||0;const d=c.totalMovements||0;d>r&&(r=d,t.mostActiveVehicle=c),d<o&&d>0&&(o=d,t.leastActiveVehicle=c)}),t.totalHoursWorked>0&&(t.averageConsumption=t.totalFuelConsumed/t.totalHoursWorked),t}catch(e){throw console.error("❌ Error al calcular estadísticas:",e),new Error(`Error al calcular estadísticas: ${e.message}`)}},LV=({stats:s,filters:e})=>{if(!s)return null;const t=b=>new Intl.NumberFormat("es-CO").format(b),r=b=>`${t(b)} gal`,o=b=>`${t(b)} hrs`,c=b=>`${b.toFixed(2)} gal/hr`,d=b=>{switch(b){case pe.EXCAVADORA:return"#059669";case pe.BULLDOZER:return"#dc2626";case pe.CARGADOR:return"#2563eb";case pe.CAMION:return"#7c3aed";case pe.GRUA:return"#ea580c";case pe.MOTOSIERRA:return"#16a34a";case pe.TRACTOR:return"#ca8a04";case pe.VOLQUETA:return"#9333ea";default:return"#6b7280"}},m=b=>{switch(b){case pe.EXCAVADORA:return"🚚";case pe.BULLDOZER:return"🚜";case pe.CARGADOR:return"🏗️";case pe.CAMION:return"🚛";case pe.GRUA:return"🏗️";case pe.MOTOSIERRA:return"🪚";case pe.TRACTOR:return"🚜";case pe.VOLQUETA:return"🚛";default:return"🚗"}},g=b=>{switch(b){case De.ACTIVO:return"#10b981";case De.MANTENIMIENTO:return"#f59e0b";case De.INACTIVO:return"#6b7280";case De.REPARACION:return"#ef4444";default:return"#6b7280"}},v=b=>{switch(b){case De.ACTIVO:return"✅";case De.MANTENIMIENTO:return"🔧";case De.INACTIVO:return"⏸️";case De.REPARACION:return"🔴";default:return"❓"}},_=b=>{switch(b){case gt.DIESEL:return"🚛";case gt.GASOLINA:return"🚗";case gt.ACPM:return"🚚";case gt.MIXTO:return"⛽";default:return"⛽"}},A=s.totalVehicles>0?((s.byStatus[De.ACTIVO]||0)/s.totalVehicles*100).toFixed(1):0;return u.jsxs("div",{className:"vehicles-stats",children:[u.jsxs("div",{className:"stats-grid",children:[u.jsxs("div",{className:"stat-card primary",children:[u.jsx("div",{className:"stat-icon",children:"🚜"}),u.jsxs("div",{className:"stat-content",children:[u.jsx("div",{className:"stat-value",children:t(s.totalVehicles)}),u.jsx("div",{className:"stat-label",children:"Total Vehículos"}),u.jsx("div",{className:"stat-trend",children:u.jsxs("span",{className:`trend ${A>=80?"positive":"warning"}`,children:[A>=80?"📈":"⚠️"," ",A,"% activos"]})})]})]}),u.jsxs("div",{className:"stat-card",children:[u.jsx("div",{className:"stat-icon",children:"⛽"}),u.jsxs("div",{className:"stat-content",children:[u.jsx("div",{className:"stat-value",children:r(s.totalFuelConsumed)}),u.jsx("div",{className:"stat-label",children:"Combustible Consumido"}),u.jsxs("div",{className:"stat-secondary",children:["Promedio: ",c(s.averageConsumption||0)]})]})]}),u.jsxs("div",{className:"stat-card",children:[u.jsx("div",{className:"stat-icon",children:"⏰"}),u.jsxs("div",{className:"stat-content",children:[u.jsx("div",{className:"stat-value",children:o(s.totalHoursWorked)}),u.jsx("div",{className:"stat-label",children:"Horas Trabajadas"}),u.jsxs("div",{className:"stat-secondary",children:["Promedio: ",o(s.totalHoursWorked/(s.totalVehicles||1))]})]})]}),u.jsxs("div",{className:"stat-card",children:[u.jsx("div",{className:"stat-icon",children:"🏆"}),u.jsxs("div",{className:"stat-content",children:[u.jsx("div",{className:"stat-value",children:s.mostActiveVehicle?s.mostActiveVehicle.vehicleId:"N/A"}),u.jsx("div",{className:"stat-label",children:"Más Activo"}),u.jsx("div",{className:"stat-secondary",children:s.mostActiveVehicle?`${s.mostActiveVehicle.totalMovements||0} movimientos`:"Sin datos"})]})]})]}),u.jsxs("div",{className:"stats-breakdown",children:[u.jsxs("div",{className:"breakdown-section",children:[u.jsx("h4",{children:"🚜 Por Tipo de Vehículo"}),u.jsx("div",{className:"breakdown-grid",children:Object.entries(s.byType).map(([b,D])=>{const C=(D/s.totalVehicles*100).toFixed(1);return u.jsxs("div",{className:"breakdown-item",children:[u.jsxs("div",{className:"breakdown-header",children:[u.jsx("span",{className:"breakdown-icon",children:m(b)}),u.jsx("span",{className:"breakdown-label",children:b.charAt(0).toUpperCase()+b.slice(1)})]}),u.jsx("div",{className:"breakdown-value",children:D}),u.jsx("div",{className:"breakdown-bar",children:u.jsx("div",{className:"breakdown-fill",style:{width:`${C}%`,backgroundColor:d(b)}})}),u.jsxs("div",{className:"breakdown-percentage",children:[C,"%"]})]},b)})})]}),u.jsxs("div",{className:"breakdown-section",children:[u.jsx("h4",{children:"⚡ Por Estado"}),u.jsx("div",{className:"breakdown-grid",children:Object.entries(s.byStatus).map(([b,D])=>{const C=(D/s.totalVehicles*100).toFixed(1);return u.jsxs("div",{className:"breakdown-item",children:[u.jsxs("div",{className:"breakdown-header",children:[u.jsx("span",{className:"breakdown-icon",children:v(b)}),u.jsx("span",{className:"breakdown-label",children:b.charAt(0).toUpperCase()+b.slice(1)})]}),u.jsx("div",{className:"breakdown-value",children:D}),u.jsx("div",{className:"breakdown-bar",children:u.jsx("div",{className:"breakdown-fill",style:{width:`${C}%`,backgroundColor:g(b)}})}),u.jsxs("div",{className:"breakdown-percentage",children:[C,"%"]})]},b)})})]}),u.jsxs("div",{className:"breakdown-section",children:[u.jsx("h4",{children:"⛽ Por Tipo de Combustible"}),u.jsx("div",{className:"breakdown-grid",children:Object.entries(s.byFuelType).map(([b,D])=>{const C=(D/s.totalVehicles*100).toFixed(1);return u.jsxs("div",{className:"breakdown-item",children:[u.jsxs("div",{className:"breakdown-header",children:[u.jsx("span",{className:"breakdown-icon",children:_(b)}),u.jsx("span",{className:"breakdown-label",children:b})]}),u.jsx("div",{className:"breakdown-value",children:D}),u.jsx("div",{className:"breakdown-bar",children:u.jsx("div",{className:"breakdown-fill",style:{width:`${C}%`,backgroundColor:"#059669"}})}),u.jsxs("div",{className:"breakdown-percentage",children:[C,"%"]})]},b)})})]})]}),(s.totalFuelConsumed>0||s.totalHoursWorked>0)&&u.jsxs("div",{className:"performance-metrics",children:[u.jsx("h4",{children:"📊 Métricas de Rendimiento"}),u.jsxs("div",{className:"metrics-grid",children:[u.jsxs("div",{className:"metric-card",children:[u.jsx("div",{className:"metric-icon",children:"⚡"}),u.jsxs("div",{className:"metric-content",children:[u.jsx("div",{className:"metric-label",children:"Eficiencia de Flota"}),u.jsxs("div",{className:"metric-value",children:[A,"%"]}),u.jsxs("div",{className:"metric-description",children:[s.byStatus[De.ACTIVO]||0," de ",s.totalVehicles," activos"]})]})]}),s.averageConsumption>0&&u.jsxs("div",{className:"metric-card",children:[u.jsx("div",{className:"metric-icon",children:"📈"}),u.jsxs("div",{className:"metric-content",children:[u.jsx("div",{className:"metric-label",children:"Consumo Promedio"}),u.jsx("div",{className:"metric-value",children:c(s.averageConsumption)}),u.jsx("div",{className:"metric-description",children:"Por vehículo por hora trabajada"})]})]}),s.mostActiveVehicle&&u.jsxs("div",{className:"metric-card",children:[u.jsx("div",{className:"metric-icon",children:"🏆"}),u.jsxs("div",{className:"metric-content",children:[u.jsx("div",{className:"metric-label",children:"Mayor Utilización"}),u.jsx("div",{className:"metric-value",children:s.mostActiveVehicle.vehicleId}),u.jsxs("div",{className:"metric-description",children:[r(s.mostActiveVehicle.totalFuelConsumed||0)," consumidos"]})]})]}),s.leastActiveVehicle&&u.jsxs("div",{className:"metric-card",children:[u.jsx("div",{className:"metric-icon",children:"📉"}),u.jsxs("div",{className:"metric-content",children:[u.jsx("div",{className:"metric-label",children:"Menor Utilización"}),u.jsx("div",{className:"metric-value",children:s.leastActiveVehicle.vehicleId}),u.jsxs("div",{className:"metric-description",children:[r(s.leastActiveVehicle.totalFuelConsumed||0)," consumidos"]})]})]})]})]}),(e.type||e.status||e.fuelType||e.location)&&u.jsxs("div",{className:"active-filters",children:[u.jsx("h4",{children:"🔍 Filtros Activos"}),u.jsxs("div",{className:"filters-list",children:[e.type&&u.jsxs("span",{className:"filter-tag",children:["Tipo: ",e.type]}),e.status&&u.jsxs("span",{className:"filter-tag",children:["Estado: ",e.status]}),e.fuelType&&u.jsxs("span",{className:"filter-tag",children:["Combustible: ",e.fuelType]}),e.location&&u.jsxs("span",{className:"filter-tag",children:["Ubicación: ",e.location]})]})]})]})},UV=({filters:s,onFilterChange:e,onClearFilters:t,searchTerm:r,onSearchChange:o,viewMode:c,onViewModeChange:d,totalResults:m})=>{const[g,v]=le.useState(!1),_=["Oficina Principal","Bodega Norte","Bodega Sur","Campo Operativo","Taller Mecánico","Proyecto A","Proyecto B","En Reparación","Otros"],A=Object.values(s).filter(C=>C&&C!==""&&C!=="all").length,b=(C,F)=>{e({[C]:F})},D=C=>{e(C)};return u.jsxs("div",{className:"vehicles-filters",children:[u.jsxs("div",{className:"filters-main",children:[u.jsx("div",{className:"search-section",children:u.jsxs("div",{className:"search-box",children:[u.jsx("span",{className:"search-icon",children:"🔍"}),u.jsx("input",{type:"text",placeholder:"Buscar por ID, nombre, marca, modelo, ubicación...",value:r,onChange:C=>o(C.target.value),className:"search-input"}),r&&u.jsx("button",{className:"search-clear",onClick:()=>o(""),title:"Limpiar búsqueda",children:"✕"})]})}),u.jsxs("div",{className:"filters-controls",children:[u.jsxs("div",{className:"quick-filters",children:[u.jsx("button",{className:`quick-filter ${s.status===De.ACTIVO?"active":""}`,onClick:()=>D({status:De.ACTIVO}),children:"✅ Activos"}),u.jsx("button",{className:`quick-filter ${s.status===De.MANTENIMIENTO?"active":""}`,onClick:()=>D({status:De.MANTENIMIENTO}),children:"🔧 Mantenimiento"}),u.jsx("button",{className:`quick-filter ${s.type===pe.EXCAVADORA?"active":""}`,onClick:()=>D({type:pe.EXCAVADORA}),children:"🚚 Excavadoras"}),u.jsx("button",{className:`quick-filter ${s.type===pe.TRACTOR?"active":""}`,onClick:()=>D({type:pe.TRACTOR}),children:"🚜 Tractores"})]}),u.jsxs("button",{className:`btn-advanced-filters ${g?"active":""}`,onClick:()=>v(!g),children:["🎛️ Filtros",A>0&&u.jsx("span",{className:"filters-count",children:A})]}),u.jsxs("div",{className:"view-modes",children:[u.jsx("button",{className:`view-mode ${c==="cards"?"active":""}`,onClick:()=>d("cards"),title:"Vista en tarjetas",children:"🎴"}),u.jsx("button",{className:`view-mode ${c==="table"?"active":""}`,onClick:()=>d("table"),title:"Vista en tabla",children:"📋"})]})]})]}),g&&u.jsxs("div",{className:"filters-advanced",children:[u.jsxs("div",{className:"filters-grid",children:[u.jsxs("div",{className:"filter-group",children:[u.jsx("label",{children:"Tipo de Vehículo"}),u.jsxs("select",{value:s.type,onChange:C=>b("type",C.target.value),className:"filter-select",children:[u.jsx("option",{value:"",children:"Todos los tipos"}),u.jsx("option",{value:pe.EXCAVADORA,children:"🚚 Excavadora"}),u.jsx("option",{value:pe.BULLDOZER,children:"🚜 Bulldozer"}),u.jsx("option",{value:pe.CARGADOR,children:"🏗️ Cargador"}),u.jsx("option",{value:pe.CAMION,children:"🚛 Camión"}),u.jsx("option",{value:pe.GRUA,children:"🏗️ Grúa"}),u.jsx("option",{value:pe.MOTOSIERRA,children:"🪚 Motosierra"}),u.jsx("option",{value:pe.TRACTOR,children:"🚜 Tractor"}),u.jsx("option",{value:pe.VOLQUETA,children:"🚛 Volqueta"}),u.jsx("option",{value:pe.OTROS,children:"🚗 Otros"})]})]}),u.jsxs("div",{className:"filter-group",children:[u.jsx("label",{children:"Estado"}),u.jsxs("select",{value:s.status,onChange:C=>b("status",C.target.value),className:"filter-select",children:[u.jsx("option",{value:"",children:"Todos los estados"}),u.jsx("option",{value:De.ACTIVO,children:"✅ Activo"}),u.jsx("option",{value:De.MANTENIMIENTO,children:"🔧 Mantenimiento"}),u.jsx("option",{value:De.INACTIVO,children:"⏸️ Inactivo"}),u.jsx("option",{value:De.REPARACION,children:"🔴 Reparación"})]})]}),u.jsxs("div",{className:"filter-group",children:[u.jsx("label",{children:"Tipo de Combustible"}),u.jsxs("select",{value:s.fuelType,onChange:C=>b("fuelType",C.target.value),className:"filter-select",children:[u.jsx("option",{value:"",children:"Todos los combustibles"}),u.jsx("option",{value:gt.DIESEL,children:"🚛 Diesel"}),u.jsx("option",{value:gt.GASOLINA,children:"🚗 Gasolina"}),u.jsx("option",{value:gt.ACPM,children:"🚚 ACPM"}),u.jsx("option",{value:gt.MIXTO,children:"⛽ Mixto"})]})]}),u.jsxs("div",{className:"filter-group",children:[u.jsx("label",{children:"Ubicación Actual"}),u.jsxs("select",{value:s.location,onChange:C=>b("location",C.target.value),className:"filter-select",children:[u.jsx("option",{value:"",children:"Todas las ubicaciones"}),_.map(C=>u.jsxs("option",{value:C,children:["📍 ",C]},C))]})]}),u.jsxs("div",{className:"filter-group",children:[u.jsx("label",{children:"Mantenimiento"}),u.jsxs("select",{value:s.maintenance,onChange:C=>b("maintenance",C.target.value),className:"filter-select",children:[u.jsx("option",{value:"all",children:"Todos"}),u.jsx("option",{value:"due",children:"Mantenimiento debido"}),u.jsx("option",{value:"overdue",children:"Mantenimiento vencido"}),u.jsx("option",{value:"recent",children:"Mantenimiento reciente"})]})]})]}),u.jsxs("div",{className:"filters-actions",children:[u.jsx("button",{className:"btn-clear-filters",onClick:t,disabled:A===0,children:"🗑️ Limpiar Filtros"}),u.jsxs("div",{className:"filters-info",children:[u.jsxs("span",{className:"results-count",children:[m," resultado",m!==1?"s":""]}),A>0&&u.jsxs("span",{className:"active-filters-text",children:["(",A," filtro",A!==1?"s":""," activo",A!==1?"s":"",")"]})]})]})]}),A>0&&u.jsx("div",{className:"active-filters-summary",children:u.jsxs("div",{className:"summary-content",children:[u.jsx("span",{className:"summary-label",children:"Filtros activos:"}),u.jsxs("div",{className:"summary-tags",children:[s.type&&u.jsxs("span",{className:"summary-tag",onClick:()=>b("type",""),children:["Tipo: ",s.type," ✕"]}),s.status&&u.jsxs("span",{className:"summary-tag",onClick:()=>b("status",""),children:["Estado: ",s.status," ✕"]}),s.fuelType&&u.jsxs("span",{className:"summary-tag",onClick:()=>b("fuelType",""),children:["Combustible: ",s.fuelType," ✕"]}),s.location&&u.jsxs("span",{className:"summary-tag",onClick:()=>b("location",""),children:["Ubicación: ",s.location," ✕"]}),s.maintenance!=="all"&&u.jsxs("span",{className:"summary-tag",onClick:()=>b("maintenance","all"),children:["Mantenimiento: ",s.maintenance," ✕"]})]})]})}),u.jsx("div",{className:"keyboard-shortcuts",style:{display:"none"},children:u.jsx("small",{children:"💡 Atajos: Ctrl+F (buscar), Ctrl+1 (activos), Ctrl+2 (mantenimiento), Ctrl+T (tractores)"})})]})},FV=({vehicles:s,onEdit:e,onView:t,onMaintenance:r})=>{const o=w=>new Intl.NumberFormat("es-CO").format(w),c=w=>`${o(w)} gal`,d=w=>`${o(w)} hrs`,m=w=>w?(w instanceof Date?w:new Date(w)).toLocaleDateString("es-CO",{day:"2-digit",month:"2-digit",year:"numeric"}):"Sin fecha",g=w=>{if(!w)return"";const G=new Date,te=w instanceof Date?w:new Date(w),ee=Math.abs(G-te),Y=Math.ceil(ee/(1e3*60*60*24));return Y===1?"hace 1 día":Y<7?`hace ${Y} días`:Y<30?`hace ${Math.ceil(Y/7)} semanas`:Y<365?`hace ${Math.ceil(Y/30)} meses`:`hace ${Math.ceil(Y/365)} años`},v=w=>{switch(w){case pe.EXCAVADORA:return"vehicle-excavadora";case pe.BULLDOZER:return"vehicle-bulldozer";case pe.CARGADOR:return"vehicle-cargador";case pe.CAMION:return"vehicle-camion";case pe.GRUA:return"vehicle-grua";case pe.MOTOSIERRA:return"vehicle-motosierra";case pe.TRACTOR:return"vehicle-tractor";case pe.VOLQUETA:return"vehicle-volqueta";default:return"vehicle-default"}},_=w=>{switch(w){case De.ACTIVO:return"status-activo";case De.MANTENIMIENTO:return"status-mantenimiento";case De.INACTIVO:return"status-inactivo";case De.REPARACION:return"status-reparacion";default:return"status-default"}},A=w=>{switch(w){case pe.EXCAVADORA:return"🚚";case pe.BULLDOZER:return"🚜";case pe.CARGADOR:return"🏗️";case pe.CAMION:return"🚛";case pe.GRUA:return"🏗️";case pe.MOTOSIERRA:return"🪚";case pe.TRACTOR:return"🚜";case pe.VOLQUETA:return"🚛";default:return"🚗"}},b=w=>{switch(w){case gt.DIESEL:return"🚛";case gt.GASOLINA:return"🚗";case gt.ACPM:return"🚚";case gt.MIXTO:return"⛽";default:return"⛽"}},D=w=>{switch(w){case De.ACTIVO:return"✅";case De.MANTENIMIENTO:return"🔧";case De.INACTIVO:return"⏸️";case De.REPARACION:return"🔴";default:return"❓"}},C=w=>!w.totalHoursWorked||w.totalHoursWorked===0?w.estimatedConsumptionPerHour||0:w.totalFuelConsumed/w.totalHoursWorked,F=w=>w.lastMaintenanceDate?Math.floor((new Date-new Date(w.lastMaintenanceDate))/(1e3*60*60*24))>90:!0;return u.jsx("div",{className:"vehicles-cards",children:s.map(w=>u.jsxs("div",{className:`vehicle-card ${v(w.type)}`,children:[u.jsx("div",{className:"card-header",children:u.jsxs("div",{className:"vehicle-info",children:[u.jsxs("div",{className:"vehicle-id-section",children:[u.jsx("span",{className:"vehicle-icon",children:A(w.type)}),u.jsxs("div",{className:"vehicle-details",children:[u.jsx("span",{className:"vehicle-id",children:w.vehicleId}),u.jsx("span",{className:"vehicle-name",children:w.name})]})]}),u.jsxs("div",{className:`status-badge ${_(w.status)}`,children:[u.jsx("span",{className:"status-icon",children:D(w.status)}),u.jsx("span",{className:"status-label",children:w.status.charAt(0).toUpperCase()+w.status.slice(1)})]})]})}),u.jsxs("div",{className:"card-content",children:[u.jsxs("div",{className:"basic-info",children:[u.jsxs("div",{className:"info-row",children:[u.jsx("span",{className:"info-label",children:"Tipo:"}),u.jsxs("span",{className:"info-value",children:[A(w.type)," ",w.type.charAt(0).toUpperCase()+w.type.slice(1)]})]}),w.brand&&w.model&&u.jsxs("div",{className:"info-row",children:[u.jsx("span",{className:"info-label",children:"Marca/Modelo:"}),u.jsxs("span",{className:"info-value",children:[w.brand," ",w.model]})]}),u.jsxs("div",{className:"info-row",children:[u.jsx("span",{className:"info-label",children:"Combustible:"}),u.jsxs("span",{className:"info-value",children:[b(w.fuelType)," ",w.fuelType]})]}),w.currentLocation&&u.jsxs("div",{className:"info-row",children:[u.jsx("span",{className:"info-label",children:"Ubicación:"}),u.jsxs("span",{className:"info-value",children:["📍 ",w.currentLocation]})]})]}),u.jsxs("div",{className:"consumption-metrics",children:[u.jsxs("div",{className:"metric-item",children:[u.jsx("div",{className:"metric-icon",children:"⛽"}),u.jsxs("div",{className:"metric-content",children:[u.jsx("div",{className:"metric-value",children:c(w.totalFuelConsumed||0)}),u.jsx("div",{className:"metric-label",children:"Consumido"})]})]}),u.jsxs("div",{className:"metric-item",children:[u.jsx("div",{className:"metric-icon",children:"⏰"}),u.jsxs("div",{className:"metric-content",children:[u.jsx("div",{className:"metric-value",children:d(w.totalHoursWorked||0)}),u.jsx("div",{className:"metric-label",children:"Trabajadas"})]})]}),u.jsxs("div",{className:"metric-item",children:[u.jsx("div",{className:"metric-icon",children:"📊"}),u.jsxs("div",{className:"metric-content",children:[u.jsxs("div",{className:"metric-value",children:[C(w).toFixed(1)," gal/hr"]}),u.jsx("div",{className:"metric-label",children:"Consumo"})]})]}),u.jsxs("div",{className:"metric-item",children:[u.jsx("div",{className:"metric-icon",children:"🔄"}),u.jsxs("div",{className:"metric-content",children:[u.jsx("div",{className:"metric-value",children:w.totalMovements||0}),u.jsx("div",{className:"metric-label",children:"Movimientos"})]})]})]}),(w.enginePower||w.fuelCapacity||w.year)&&u.jsxs("div",{className:"technical-specs",children:[w.enginePower&&u.jsxs("div",{className:"spec-item",children:[u.jsx("span",{className:"spec-icon",children:"⚡"}),u.jsxs("span",{className:"spec-value",children:[w.enginePower," HP"]})]}),w.fuelCapacity&&u.jsxs("div",{className:"spec-item",children:[u.jsx("span",{className:"spec-icon",children:"🛢️"}),u.jsxs("span",{className:"spec-value",children:[w.fuelCapacity," gal"]})]}),w.year&&u.jsxs("div",{className:"spec-item",children:[u.jsx("span",{className:"spec-icon",children:"📅"}),u.jsx("span",{className:"spec-value",children:w.year})]})]}),w.description&&u.jsx("div",{className:"description",children:u.jsx("p",{children:w.description})})]}),u.jsxs("div",{className:"card-footer",children:[u.jsxs("div",{className:"date-info",children:[w.lastMovementDate&&u.jsxs("div",{className:"date-item",children:[u.jsx("span",{className:"date-label",children:"Último movimiento:"}),u.jsx("span",{className:"date-value",children:m(w.lastMovementDate)}),u.jsx("span",{className:"date-relative",children:g(w.lastMovementDate)})]}),w.lastMaintenanceDate&&u.jsxs("div",{className:"date-item",children:[u.jsx("span",{className:"date-label",children:"Último mantenimiento:"}),u.jsx("span",{className:"date-value",children:m(w.lastMaintenanceDate)}),u.jsx("span",{className:"date-relative",children:g(w.lastMaintenanceDate)})]})]}),u.jsxs("div",{className:"card-actions",children:[u.jsx("button",{className:"btn-view",onClick:()=>t(w),title:"Ver detalles",children:"👁️"}),e&&w.status!==De.REPARACION&&u.jsx("button",{className:"btn-edit",onClick:()=>e(w),title:"Editar vehículo",children:"✏️"}),r&&u.jsx("button",{className:"btn-maintenance",onClick:()=>r(w),title:"Registrar mantenimiento",children:"🔧"})]})]}),w.status===De.MANTENIMIENTO&&u.jsx("div",{className:"maintenance-indicator",children:u.jsx("div",{className:"maintenance-pulse"})}),F(w)&&w.status===De.ACTIVO&&u.jsx("div",{className:"maintenance-due-badge",children:u.jsx("span",{children:"Mantenimiento Debido"})}),w.status===De.REPARACION&&u.jsx("div",{className:"repair-badge",children:u.jsx("span",{children:"En Reparación"})}),w.totalHoursWorked>0&&u.jsxs("div",{className:"efficiency-indicator",children:[u.jsx("div",{className:"efficiency-bar",children:u.jsx("div",{className:"efficiency-fill",style:{width:`${Math.min(w.totalHoursWorked/2e3*100,100)}%`}})}),u.jsxs("span",{className:"efficiency-label",children:[(w.totalHoursWorked/2e3*100).toFixed(1),"% utilización anual"]})]})]},w.id))})},zV=({vehicles:s,onEdit:e,onView:t,onMaintenance:r})=>{const[o,c]=le.useState("vehicleId"),[d,m]=le.useState("asc"),g=U=>new Intl.NumberFormat("es-CO").format(U),v=U=>`${g(U)} gal`,_=U=>`${g(U)} hrs`,A=U=>U?(U instanceof Date?U:new Date(U)).toLocaleDateString("es-CO",{day:"2-digit",month:"2-digit",year:"2-digit"}):"-",b=U=>{switch(U){case pe.EXCAVADORA:return"🚚";case pe.BULLDOZER:return"🚜";case pe.CARGADOR:return"🏗️";case pe.CAMION:return"🚛";case pe.GRUA:return"🏗️";case pe.MOTOSIERRA:return"🪚";case pe.TRACTOR:return"🚜";case pe.VOLQUETA:return"🚛";default:return"🚗"}},D=U=>{switch(U){case gt.DIESEL:return"🚛";case gt.GASOLINA:return"🚗";case gt.ACPM:return"🚚";case gt.MIXTO:return"⛽";default:return"⛽"}},C=U=>{switch(U){case De.ACTIVO:return"✅";case De.MANTENIMIENTO:return"🔧";case De.INACTIVO:return"⏸️";case De.REPARACION:return"🔴";default:return"❓"}},F=U=>{switch(U){case De.ACTIVO:return"status-activo";case De.MANTENIMIENTO:return"status-mantenimiento";case De.INACTIVO:return"status-inactivo";case De.REPARACION:return"status-reparacion";default:return"status-default"}},w=U=>{o===U?m(d==="asc"?"desc":"asc"):(c(U),m("asc"))},G=[...s].sort((U,he)=>{let k=U[o],x=he[o];return(o.includes("Date")||o.includes("At"))&&(k=new Date(k||0),x=new Date(x||0)),typeof k=="number"&&typeof x=="number"?d==="asc"?k-x:x-k:typeof k=="string"&&typeof x=="string"?d==="asc"?k.localeCompare(x):x.localeCompare(k):k instanceof Date&&x instanceof Date?d==="asc"?k-x:x-k:!k&&!x?0:k?x?0:d==="asc"?-1:1:d==="asc"?1:-1}),te=U=>o!==U?"↕️":d==="asc"?"↑":"↓",ee=U=>!U.totalHoursWorked||U.totalHoursWorked===0?U.estimatedConsumptionPerHour||0:U.totalFuelConsumed/U.totalHoursWorked,Y=U=>U.lastMaintenanceDate?Math.floor((new Date-new Date(U.lastMaintenanceDate))/(1e3*60*60*24))>90:!0;return u.jsxs("div",{className:"vehicles-table-container",children:[u.jsx("div",{className:"table-wrapper",children:u.jsxs("table",{className:"vehicles-table",children:[u.jsx("thead",{children:u.jsxs("tr",{children:[u.jsxs("th",{className:"sortable",onClick:()=>w("vehicleId"),children:["ID Vehículo ",te("vehicleId")]}),u.jsxs("th",{className:"sortable",onClick:()=>w("name"),children:["Nombre ",te("name")]}),u.jsxs("th",{className:"sortable",onClick:()=>w("type"),children:["Tipo ",te("type")]}),u.jsx("th",{children:"Marca/Modelo"}),u.jsxs("th",{className:"sortable",onClick:()=>w("fuelType"),children:["Combustible ",te("fuelType")]}),u.jsxs("th",{className:"sortable text-right",onClick:()=>w("totalFuelConsumed"),children:["Consumido ",te("totalFuelConsumed")]}),u.jsxs("th",{className:"sortable text-right",onClick:()=>w("totalHoursWorked"),children:["Horas ",te("totalHoursWorked")]}),u.jsx("th",{className:"text-right",children:"Consumo/Hr"}),u.jsx("th",{children:"Ubicación"}),u.jsxs("th",{className:"sortable",onClick:()=>w("status"),children:["Estado ",te("status")]}),u.jsxs("th",{className:"sortable",onClick:()=>w("lastMovementDate"),children:["Último Mov. ",te("lastMovementDate")]}),u.jsx("th",{className:"actions-column",children:"Acciones"})]})}),u.jsx("tbody",{children:G.map(U=>u.jsxs("tr",{className:`vehicle-row ${U.status===De.MANTENIMIENTO?"maintenance-row":""} ${Y(U)?"needs-maintenance":""}`,children:[u.jsx("td",{className:"vehicle-id-cell",children:u.jsxs("div",{className:"id-content",children:[u.jsx("span",{className:"vehicle-icon",children:b(U.type)}),u.jsx("span",{className:"vehicle-id",children:U.vehicleId})]})}),u.jsx("td",{className:"name-cell",children:u.jsx("span",{className:"vehicle-name",children:U.name})}),u.jsx("td",{className:"type-cell",children:u.jsx("span",{className:"type-text",children:U.type.charAt(0).toUpperCase()+U.type.slice(1)})}),u.jsx("td",{className:"brand-model-cell",children:U.brand&&U.model?u.jsxs("span",{className:"brand-model",children:[U.brand," ",U.model]}):u.jsx("span",{className:"no-data",children:"-"})}),u.jsx("td",{className:"fuel-cell",children:u.jsxs("div",{className:"fuel-content",children:[u.jsx("span",{className:"fuel-icon",children:D(U.fuelType)}),u.jsx("span",{className:"fuel-text",children:U.fuelType})]})}),u.jsx("td",{className:"consumption-cell text-right",children:u.jsx("span",{className:"consumption-value",children:v(U.totalFuelConsumed||0)})}),u.jsx("td",{className:"hours-cell text-right",children:u.jsx("span",{className:"hours-value",children:_(U.totalHoursWorked||0)})}),u.jsx("td",{className:"rate-cell text-right",children:u.jsxs("span",{className:"rate-value",children:[ee(U).toFixed(1)," gal/hr"]})}),u.jsx("td",{className:"location-cell",children:u.jsxs("span",{className:"location-text",children:["📍 ",U.currentLocation||"Sin ubicación"]})}),u.jsx("td",{className:"status-cell",children:u.jsxs("div",{className:`status-badge ${F(U.status)}`,children:[u.jsx("span",{className:"status-icon",children:C(U.status)}),u.jsx("span",{className:"status-text",children:U.status.charAt(0).toUpperCase()+U.status.slice(1)})]})}),u.jsx("td",{className:"date-cell",children:u.jsxs("div",{className:"date-content",children:[u.jsx("span",{className:"date-value",children:A(U.lastMovementDate)}),Y(U)&&u.jsx("span",{className:"maintenance-warning",children:"⚠️"})]})}),u.jsx("td",{className:"actions-cell",children:u.jsxs("div",{className:"action-buttons",children:[u.jsx("button",{className:"btn-action btn-view",onClick:()=>t(U),title:"Ver detalles",children:"👁️"}),e&&U.status!==De.REPARACION&&u.jsx("button",{className:"btn-action btn-edit",onClick:()=>e(U),title:"Editar vehículo",children:"✏️"}),r&&u.jsx("button",{className:"btn-action btn-maintenance",onClick:()=>r(U),title:"Registrar mantenimiento",children:"🔧"})]})})]},U.id))})]})}),u.jsxs("div",{className:"table-info",children:[u.jsxs("div",{className:"table-summary",children:[u.jsxs("span",{className:"total-rows",children:[s.length," vehículo",s.length!==1?"s":""]}),o&&u.jsxs("span",{className:"sort-info",children:["Ordenado por ",o," (",d==="asc"?"ascendente":"descendente",")"]})]}),u.jsxs("div",{className:"table-legend",children:[u.jsxs("span",{className:"legend-item",children:[u.jsx("span",{className:"legend-icon",children:"✅"})," Activo"]}),u.jsxs("span",{className:"legend-item",children:[u.jsx("span",{className:"legend-icon",children:"🔧"})," Mantenimiento"]}),u.jsxs("span",{className:"legend-item",children:[u.jsx("span",{className:"legend-icon",children:"⏸️"})," Inactivo"]}),u.jsxs("span",{className:"legend-item",children:[u.jsx("span",{className:"legend-icon",children:"🔴"})," Reparación"]}),u.jsxs("span",{className:"legend-item",children:[u.jsx("span",{className:"legend-icon",children:"⚠️"})," Mantto. Debido"]})]})]})]})},qV=({vehicles:s,viewMode:e,onEdit:t,onView:r,onMaintenance:o})=>e==="table"?u.jsx(zV,{vehicles:s,onEdit:t,onView:r,onMaintenance:o}):u.jsx(FV,{vehicles:s,onEdit:t,onView:r,onMaintenance:o}),BV=({isOpen:s,onClose:e,vehicle:t,onSave:r,mode:o="create",userRole:c})=>{const d=()=>({vehicleId:t?.vehicleId||"",name:t?.name||"",type:t?.type||pe.EXCAVADORA,brand:t?.brand||"",model:t?.model||"",year:t?.year||new Date().getFullYear(),fuelType:t?.fuelType||gt.DIESEL,fuelCapacity:t?.fuelCapacity||0,enginePower:t?.enginePower||0,status:t?.status||De.ACTIVO,currentLocation:t?.currentLocation||"",description:t?.description||"",estimatedConsumptionPerHour:t?.estimatedConsumptionPerHour||0,serialNumber:t?.serialNumber||"",plateNumber:t?.plateNumber||"",lastMaintenanceDate:t?.lastMaintenanceDate?new Date(t.lastMaintenanceDate).toISOString().split("T")[0]:"",nextMaintenanceDate:t?.nextMaintenanceDate?new Date(t.nextMaintenanceDate).toISOString().split("T")[0]:"",purchaseDate:t?.purchaseDate?new Date(t.purchaseDate).toISOString().split("T")[0]:"",warrantyExpiration:t?.warrantyExpiration?new Date(t.warrantyExpiration).toISOString().split("T")[0]:""}),[m,g]=le.useState(d()),[v,_]=le.useState({}),[A,b]=le.useState(!1);le.useEffect(()=>{s&&(g(d()),_({}))},[s,t]);const D=Y=>{const{name:U,value:he,type:k}=Y.target,x=k==="number"?parseFloat(he)||0:he;g(I=>({...I,[U]:x})),v[U]&&_(I=>({...I,[U]:null}))},C=()=>{const Y={};m.vehicleId.trim()?m.vehicleId.length<3&&(Y.vehicleId="El ID debe tener al menos 3 caracteres"):Y.vehicleId="El ID del vehículo es obligatorio",m.name.trim()?m.name.length<2&&(Y.name="El nombre debe tener al menos 2 caracteres"):Y.name="El nombre del vehículo es obligatorio",m.fuelCapacity<=0?Y.fuelCapacity="La capacidad de combustible debe ser mayor a 0":m.fuelCapacity>1e3&&(Y.fuelCapacity="La capacidad no puede ser mayor a 1000 galones"),m.enginePower<0?Y.enginePower="La potencia no puede ser negativa":m.enginePower>1e3&&(Y.enginePower="La potencia no puede ser mayor a 1000 HP"),m.estimatedConsumptionPerHour<0?Y.estimatedConsumptionPerHour="El consumo no puede ser negativo":m.estimatedConsumptionPerHour>50&&(Y.estimatedConsumptionPerHour="El consumo no puede ser mayor a 50 gal/hr");const U=new Date().getFullYear();if(m.year<1990?Y.year="El año no puede ser anterior a 1990":m.year>U+1&&(Y.year=`El año no puede ser mayor a ${U+1}`),m.lastMaintenanceDate&&m.nextMaintenanceDate){const he=new Date(m.lastMaintenanceDate);new Date(m.nextMaintenanceDate)<=he&&(Y.nextMaintenanceDate="La próxima fecha debe ser posterior al último mantenimiento")}return m.purchaseDate&&new Date(m.purchaseDate)>new Date&&(Y.purchaseDate="La fecha de compra no puede ser futura"),_(Y),Object.keys(Y).length===0},F=async Y=>{if(Y.preventDefault(),!!C()){b(!0);try{const U={...m,lastMaintenanceDate:m.lastMaintenanceDate||null,nextMaintenanceDate:m.nextMaintenanceDate||null,purchaseDate:m.purchaseDate||null,warrantyExpiration:m.warrantyExpiration||null};await r(U),e()}catch(U){console.error("Error guardando vehículo:",U),_({general:"Error al guardar el vehículo. Intenta nuevamente."})}finally{b(!1)}}},w=Y=>{switch(Y){case pe.EXCAVADORA:return"🚚";case pe.BULLDOZER:return"🚜";case pe.CARGADOR:return"🏗️";case pe.CAMION:return"🚛";case pe.GRUA:return"🏗️";case pe.MOTOSIERRA:return"🪚";case pe.TRACTOR:return"🚜";case pe.VOLQUETA:return"🚛";default:return"🚗"}},G=Y=>{switch(Y){case gt.DIESEL:return"🚛";case gt.GASOLINA:return"🚗";case gt.ACPM:return"🚚";case gt.MIXTO:return"⛽";default:return"⛽"}},te=o==="view",ee=c==="admin"||c==="supervisor";return s?u.jsx("div",{className:"modal-overlay",onClick:e,children:u.jsxs("div",{className:"modal-content vehicle-modal",onClick:Y=>Y.stopPropagation(),children:[u.jsxs("div",{className:"modal-header",children:[u.jsxs("div",{className:"modal-title",children:[u.jsx("span",{className:"title-icon",children:o==="create"?"➕":o==="edit"?"✏️":"👁️"}),u.jsxs("div",{className:"title-text",children:[u.jsxs("h3",{children:[o==="create"&&"Crear Nuevo Vehículo",o==="edit"&&"Editar Vehículo",o==="view"&&"Detalles del Vehículo"]}),u.jsxs("p",{children:[o==="create"&&"Registra un nuevo vehículo en la flota",o==="edit"&&"Modifica la información del vehículo",o==="view"&&"Información completa del vehículo"]})]})]}),u.jsx("button",{className:"btn-close",onClick:e,type:"button",children:"✕"})]}),u.jsxs("form",{onSubmit:F,className:"modal-form",children:[u.jsxs("div",{className:"form-content",children:[u.jsxs("div",{className:"vehicle-preview",children:[u.jsxs("div",{className:"preview-header",children:[u.jsx("span",{className:"preview-icon",children:w(m.type)}),u.jsxs("div",{className:"preview-info",children:[u.jsx("span",{className:"preview-id",children:m.vehicleId||"ID-000"}),u.jsx("span",{className:"preview-name",children:m.name||"Nombre del vehículo"})]}),u.jsxs("div",{className:"preview-fuel",children:[u.jsx("span",{className:"fuel-icon",children:G(m.fuelType)}),u.jsx("span",{className:"fuel-text",children:m.fuelType})]})]}),u.jsxs("div",{className:"preview-specs",children:[m.enginePower>0&&u.jsxs("span",{className:"spec",children:["⚡ ",m.enginePower," HP"]}),m.fuelCapacity>0&&u.jsxs("span",{className:"spec",children:["🛢️ ",m.fuelCapacity," gal"]}),m.year&&u.jsxs("span",{className:"spec",children:["📅 ",m.year]})]})]}),v.general&&u.jsxs("div",{className:"error-message general-error",children:["⚠️ ",v.general]}),u.jsxs("div",{className:"form-section",children:[u.jsx("h4",{className:"section-title",children:"📋 Información Básica"}),u.jsxs("div",{className:"form-grid",children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"vehicleId",children:"ID del Vehículo *"}),u.jsx("input",{type:"text",id:"vehicleId",name:"vehicleId",value:m.vehicleId,onChange:D,placeholder:"Ej: EXC-001",className:v.vehicleId?"error":"",disabled:te||o==="edit"&&!ee,maxLength:20}),v.vehicleId&&u.jsx("span",{className:"error-text",children:v.vehicleId})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"name",children:"Nombre del Vehículo *"}),u.jsx("input",{type:"text",id:"name",name:"name",value:m.name,onChange:D,placeholder:"Ej: Excavadora Principal",className:v.name?"error":"",disabled:te||o==="edit"&&!ee,maxLength:100}),v.name&&u.jsx("span",{className:"error-text",children:v.name})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"type",children:"Tipo de Vehículo"}),u.jsx("select",{id:"type",name:"type",value:m.type,onChange:D,disabled:te||o==="edit"&&!ee,children:Object.values(pe).map(Y=>u.jsxs("option",{value:Y,children:[w(Y)," ",Y.charAt(0).toUpperCase()+Y.slice(1)]},Y))})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"status",children:"Estado"}),u.jsx("select",{id:"status",name:"status",value:m.status,onChange:D,disabled:te||o==="edit"&&!ee,children:Object.values(De).map(Y=>u.jsx("option",{value:Y,children:Y.charAt(0).toUpperCase()+Y.slice(1)},Y))})]})]})]}),u.jsxs("div",{className:"form-section",children:[u.jsx("h4",{className:"section-title",children:"🔧 Especificaciones Técnicas"}),u.jsxs("div",{className:"form-grid",children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"brand",children:"Marca"}),u.jsx("input",{type:"text",id:"brand",name:"brand",value:m.brand,onChange:D,placeholder:"Ej: Caterpillar",disabled:te||o==="edit"&&!ee,maxLength:50})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"model",children:"Modelo"}),u.jsx("input",{type:"text",id:"model",name:"model",value:m.model,onChange:D,placeholder:"Ej: 320D",disabled:te||o==="edit"&&!ee,maxLength:50})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"year",children:"Año"}),u.jsx("input",{type:"number",id:"year",name:"year",value:m.year,onChange:D,min:"1990",max:new Date().getFullYear()+1,className:v.year?"error":"",disabled:te||o==="edit"&&!ee}),v.year&&u.jsx("span",{className:"error-text",children:v.year})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"serialNumber",children:"Número de Serie"}),u.jsx("input",{type:"text",id:"serialNumber",name:"serialNumber",value:m.serialNumber,onChange:D,placeholder:"Ej: ABC123456789",disabled:te||o==="edit"&&!ee,maxLength:50})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"plateNumber",children:"Placa"}),u.jsx("input",{type:"text",id:"plateNumber",name:"plateNumber",value:m.plateNumber,onChange:D,placeholder:"Ej: ABC123",disabled:te||o==="edit"&&!ee,maxLength:10})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"enginePower",children:"Potencia del Motor (HP)"}),u.jsx("input",{type:"number",id:"enginePower",name:"enginePower",value:m.enginePower,onChange:D,min:"0",max:"1000",step:"0.1",className:v.enginePower?"error":"",disabled:te||o==="edit"&&!ee}),v.enginePower&&u.jsx("span",{className:"error-text",children:v.enginePower})]})]})]}),u.jsxs("div",{className:"form-section",children:[u.jsx("h4",{className:"section-title",children:"⛽ Información de Combustible"}),u.jsxs("div",{className:"form-grid",children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"fuelType",children:"Tipo de Combustible"}),u.jsx("select",{id:"fuelType",name:"fuelType",value:m.fuelType,onChange:D,disabled:te||o==="edit"&&!ee,children:Object.values(gt).map(Y=>u.jsxs("option",{value:Y,children:[G(Y)," ",Y.charAt(0).toUpperCase()+Y.slice(1)]},Y))})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"fuelCapacity",children:"Capacidad de Combustible (gal) *"}),u.jsx("input",{type:"number",id:"fuelCapacity",name:"fuelCapacity",value:m.fuelCapacity,onChange:D,min:"0",max:"1000",step:"0.1",className:v.fuelCapacity?"error":"",disabled:te||o==="edit"&&!ee}),v.fuelCapacity&&u.jsx("span",{className:"error-text",children:v.fuelCapacity})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"estimatedConsumptionPerHour",children:"Consumo Estimado (gal/hr)"}),u.jsx("input",{type:"number",id:"estimatedConsumptionPerHour",name:"estimatedConsumptionPerHour",value:m.estimatedConsumptionPerHour,onChange:D,min:"0",max:"50",step:"0.1",className:v.estimatedConsumptionPerHour?"error":"",disabled:te||o==="edit"&&!ee}),v.estimatedConsumptionPerHour&&u.jsx("span",{className:"error-text",children:v.estimatedConsumptionPerHour})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"currentLocation",children:"Ubicación Actual"}),u.jsx("input",{type:"text",id:"currentLocation",name:"currentLocation",value:m.currentLocation,onChange:D,placeholder:"Ej: Sector Norte - Lote 15",disabled:te||o==="edit"&&!ee,maxLength:100})]})]})]}),u.jsxs("div",{className:"form-section",children:[u.jsx("h4",{className:"section-title",children:"📅 Fechas Importantes"}),u.jsxs("div",{className:"form-grid",children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"purchaseDate",children:"Fecha de Compra"}),u.jsx("input",{type:"date",id:"purchaseDate",name:"purchaseDate",value:m.purchaseDate,onChange:D,max:new Date().toISOString().split("T")[0],className:v.purchaseDate?"error":"",disabled:te||o==="edit"&&!ee}),v.purchaseDate&&u.jsx("span",{className:"error-text",children:v.purchaseDate})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"warrantyExpiration",children:"Vencimiento de Garantía"}),u.jsx("input",{type:"date",id:"warrantyExpiration",name:"warrantyExpiration",value:m.warrantyExpiration,onChange:D,disabled:te||o==="edit"&&!ee})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"lastMaintenanceDate",children:"Último Mantenimiento"}),u.jsx("input",{type:"date",id:"lastMaintenanceDate",name:"lastMaintenanceDate",value:m.lastMaintenanceDate,onChange:D,disabled:te||o==="edit"&&!ee})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"nextMaintenanceDate",children:"Próximo Mantenimiento"}),u.jsx("input",{type:"date",id:"nextMaintenanceDate",name:"nextMaintenanceDate",value:m.nextMaintenanceDate,onChange:D,className:v.nextMaintenanceDate?"error":"",disabled:te||o==="edit"&&!ee}),v.nextMaintenanceDate&&u.jsx("span",{className:"error-text",children:v.nextMaintenanceDate})]})]})]}),u.jsxs("div",{className:"form-section",children:[u.jsx("h4",{className:"section-title",children:"📝 Descripción y Notas"}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"description",children:"Descripción"}),u.jsx("textarea",{id:"description",name:"description",value:m.description,onChange:D,placeholder:"Información adicional sobre el vehículo...",rows:"3",maxLength:"500",disabled:te||o==="edit"&&!ee}),u.jsxs("span",{className:"char-count",children:[m.description.length,"/500 caracteres"]})]})]})]}),u.jsxs("div",{className:"modal-footer",children:[u.jsx("button",{type:"button",className:"btn-secondary",onClick:e,disabled:A,children:o==="view"?"Cerrar":"Cancelar"}),!te&&ee&&u.jsx("button",{type:"submit",className:"btn-primary",disabled:A,children:A?u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"loading-spinner"}),"Guardando..."]}):u.jsx(u.Fragment,{children:o==="create"?"➕ Crear Vehículo":"💾 Guardar Cambios"})})]})]})]})}):null},ho={PREVENTIVO:"preventivo",CORRECTIVO:"correctivo",PREDICTIVO:"predictivo",EMERGENCIA:"emergencia"},Qi={PROGRAMADO:"programado",EN_PROCESO:"en_proceso",COMPLETADO:"completado",CANCELADO:"cancelado"},fo={BAJA:"baja",MEDIA:"media",ALTA:"alta",CRITICA:"critica"},HV=({isOpen:s,onClose:e,vehicle:t,maintenance:r,onSave:o,mode:c="create",userRole:d})=>{const m=()=>({vehicleId:t?.vehicleId||"",vehicleName:t?.name||"",type:r?.type||ho.PREVENTIVO,title:r?.title||"",description:r?.description||"",priority:r?.priority||fo.MEDIA,status:r?.status||Qi.PROGRAMADO,scheduledDate:r?.scheduledDate?new Date(r.scheduledDate).toISOString().split("T")[0]:"",startDate:r?.startDate?new Date(r.startDate).toISOString().split("T")[0]:"",completedDate:r?.completedDate?new Date(r.completedDate).toISOString().split("T")[0]:"",estimatedHours:r?.estimatedHours||0,actualHours:r?.actualHours||0,estimatedCost:r?.estimatedCost||0,actualCost:r?.actualCost||0,technician:r?.technician||"",workshop:r?.workshop||"",parts:r?.parts||[],notes:r?.notes||"",nextMaintenanceKm:r?.nextMaintenanceKm||0,nextMaintenanceHours:r?.nextMaintenanceHours||0,nextMaintenanceDate:r?.nextMaintenanceDate?new Date(r.nextMaintenanceDate).toISOString().split("T")[0]:""}),[g,v]=le.useState(m()),[_,A]=le.useState({}),[b,D]=le.useState(!1),[C,F]=le.useState({name:"",quantity:1,cost:0});le.useEffect(()=>{s&&(v(m()),A({}))},[s,r,t]);const w=j=>{const{name:R,value:we,type:xe}=j.target,X=xe==="number"?parseFloat(we)||0:we;v(ae=>({...ae,[R]:X})),_[R]&&A(ae=>({...ae,[R]:null}))},G=j=>{const{name:R,value:we,type:xe}=j.target,X=xe==="number"?parseFloat(we)||0:we;F(ae=>({...ae,[R]:X}))},te=()=>{if(!C.name.trim())return;const j={id:Date.now().toString(),name:C.name.trim(),quantity:C.quantity,cost:C.cost,total:C.quantity*C.cost};v(R=>({...R,parts:[...R.parts,j]})),F({name:"",quantity:1,cost:0})},ee=j=>{v(R=>({...R,parts:R.parts.filter(we=>we.id!==j)}))},Y=()=>{const j={};if(g.title.trim()||(j.title="El título del mantenimiento es obligatorio"),g.description.trim()||(j.description="La descripción es obligatoria"),g.scheduledDate||(j.scheduledDate="La fecha programada es obligatoria"),g.startDate&&g.completedDate){const R=new Date(g.startDate);new Date(g.completedDate)<R&&(j.completedDate="La fecha de finalización debe ser posterior al inicio")}return g.scheduledDate&&g.startDate&&(new Date(g.scheduledDate),new Date(g.startDate)),g.estimatedHours<0&&(j.estimatedHours="Las horas estimadas no pueden ser negativas"),g.actualHours<0&&(j.actualHours="Las horas reales no pueden ser negativas"),g.estimatedCost<0&&(j.estimatedCost="El costo estimado no puede ser negativo"),g.actualCost<0&&(j.actualCost="El costo real no puede ser negativo"),g.status===Qi.COMPLETADO&&!g.completedDate&&(j.completedDate="La fecha de finalización es obligatoria para mantenimientos completados"),g.status===Qi.EN_PROCESO&&!g.startDate&&(j.startDate="La fecha de inicio es obligatoria para mantenimientos en proceso"),A(j),Object.keys(j).length===0},U=async j=>{if(j.preventDefault(),!!Y()){D(!0);try{const R=g.parts.reduce((ae,ce)=>ae+ce.total,0),we=g.estimatedCost+R,xe=g.actualCost+R,X={...g,vehicleId:t.id,vehicleName:t.name,totalPartsCost:R,totalEstimatedCost:we,totalActualCost:xe,scheduledDate:g.scheduledDate||null,startDate:g.startDate||null,completedDate:g.completedDate||null,nextMaintenanceDate:g.nextMaintenanceDate||null,createdAt:r?.createdAt||new Date,updatedAt:new Date};await o(X),e()}catch(R){console.error("Error guardando mantenimiento:",R),A({general:"Error al guardar el mantenimiento. Intenta nuevamente."})}finally{D(!1)}}},he=j=>{switch(j){case ho.PREVENTIVO:return"🔧";case ho.CORRECTIVO:return"🛠️";case ho.PREDICTIVO:return"📊";case ho.EMERGENCIA:return"🚨";default:return"⚙️"}},k=j=>{switch(j){case fo.BAJA:return"priority-low";case fo.MEDIA:return"priority-medium";case fo.ALTA:return"priority-high";case fo.CRITICA:return"priority-critical";default:return"priority-medium"}},x=j=>{switch(j){case Qi.PROGRAMADO:return"status-scheduled";case Qi.EN_PROCESO:return"status-in-progress";case Qi.COMPLETADO:return"status-completed";case Qi.CANCELADO:return"status-cancelled";default:return"status-scheduled"}},I=()=>g.parts.reduce((j,R)=>j+R.total,0),M=c==="view",V=d==="admin"||d==="supervisor";return s?u.jsx("div",{className:"modal-overlay",onClick:e,children:u.jsxs("div",{className:"modal-content maintenance-modal",onClick:j=>j.stopPropagation(),children:[u.jsxs("div",{className:"modal-header",children:[u.jsxs("div",{className:"modal-title",children:[u.jsx("span",{className:"title-icon",children:c==="create"?"➕":c==="edit"?"✏️":"👁️"}),u.jsxs("div",{className:"title-text",children:[u.jsxs("h3",{children:[c==="create"&&"Registrar Mantenimiento",c==="edit"&&"Editar Mantenimiento",c==="view"&&"Detalles del Mantenimiento"]}),u.jsxs("p",{children:["Vehículo: ",t?.vehicleId," - ",t?.name]})]})]}),u.jsx("button",{className:"btn-close",onClick:e,type:"button",children:"✕"})]}),u.jsxs("form",{onSubmit:U,className:"modal-form",children:[u.jsxs("div",{className:"form-content",children:[_.general&&u.jsxs("div",{className:"error-message general-error",children:["⚠️ ",_.general]}),u.jsxs("div",{className:"form-section",children:[u.jsx("h4",{className:"section-title",children:"📋 Información del Mantenimiento"}),u.jsxs("div",{className:"form-grid",children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"type",children:"Tipo de Mantenimiento"}),u.jsx("select",{id:"type",name:"type",value:g.type,onChange:w,disabled:M||c==="edit"&&!V,children:Object.values(ho).map(j=>u.jsxs("option",{value:j,children:[he(j)," ",j.charAt(0).toUpperCase()+j.slice(1)]},j))})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"priority",children:"Prioridad"}),u.jsx("select",{id:"priority",name:"priority",value:g.priority,onChange:w,className:k(g.priority),disabled:M||c==="edit"&&!V,children:Object.values(fo).map(j=>u.jsx("option",{value:j,children:j.charAt(0).toUpperCase()+j.slice(1)},j))})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"status",children:"Estado"}),u.jsx("select",{id:"status",name:"status",value:g.status,onChange:w,className:x(g.status),disabled:M||c==="edit"&&!V,children:Object.values(Qi).map(j=>u.jsx("option",{value:j,children:j.charAt(0).toUpperCase()+j.slice(1).replace("_"," ")},j))})]}),u.jsxs("div",{className:"form-group full-width",children:[u.jsx("label",{htmlFor:"title",children:"Título del Mantenimiento *"}),u.jsx("input",{type:"text",id:"title",name:"title",value:g.title,onChange:w,placeholder:"Ej: Cambio de aceite y filtros",className:_.title?"error":"",disabled:M||c==="edit"&&!V,maxLength:100}),_.title&&u.jsx("span",{className:"error-text",children:_.title})]})]})]}),u.jsxs("div",{className:"form-section",children:[u.jsx("h4",{className:"section-title",children:"📅 Programación"}),u.jsxs("div",{className:"form-grid",children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"scheduledDate",children:"Fecha Programada *"}),u.jsx("input",{type:"date",id:"scheduledDate",name:"scheduledDate",value:g.scheduledDate,onChange:w,className:_.scheduledDate?"error":"",disabled:M||c==="edit"&&!V}),_.scheduledDate&&u.jsx("span",{className:"error-text",children:_.scheduledDate})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"startDate",children:"Fecha de Inicio"}),u.jsx("input",{type:"date",id:"startDate",name:"startDate",value:g.startDate,onChange:w,className:_.startDate?"error":"",disabled:M||c==="edit"&&!V}),_.startDate&&u.jsx("span",{className:"error-text",children:_.startDate})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"completedDate",children:"Fecha de Finalización"}),u.jsx("input",{type:"date",id:"completedDate",name:"completedDate",value:g.completedDate,onChange:w,className:_.completedDate?"error":"",disabled:M||c==="edit"&&!V}),_.completedDate&&u.jsx("span",{className:"error-text",children:_.completedDate})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"nextMaintenanceDate",children:"Próximo Mantenimiento"}),u.jsx("input",{type:"date",id:"nextMaintenanceDate",name:"nextMaintenanceDate",value:g.nextMaintenanceDate,onChange:w,disabled:M||c==="edit"&&!V})]})]})]}),u.jsxs("div",{className:"form-section",children:[u.jsx("h4",{className:"section-title",children:"💰 Recursos y Costos"}),u.jsxs("div",{className:"form-grid",children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"technician",children:"Técnico Responsable"}),u.jsx("input",{type:"text",id:"technician",name:"technician",value:g.technician,onChange:w,placeholder:"Nombre del técnico",disabled:M||c==="edit"&&!V,maxLength:100})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"workshop",children:"Taller/Ubicación"}),u.jsx("input",{type:"text",id:"workshop",name:"workshop",value:g.workshop,onChange:w,placeholder:"Taller donde se realiza",disabled:M||c==="edit"&&!V,maxLength:100})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"estimatedHours",children:"Horas Estimadas"}),u.jsx("input",{type:"number",id:"estimatedHours",name:"estimatedHours",value:g.estimatedHours,onChange:w,min:"0",step:"0.5",className:_.estimatedHours?"error":"",disabled:M||c==="edit"&&!V}),_.estimatedHours&&u.jsx("span",{className:"error-text",children:_.estimatedHours})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"actualHours",children:"Horas Reales"}),u.jsx("input",{type:"number",id:"actualHours",name:"actualHours",value:g.actualHours,onChange:w,min:"0",step:"0.5",className:_.actualHours?"error":"",disabled:M||c==="edit"&&!V}),_.actualHours&&u.jsx("span",{className:"error-text",children:_.actualHours})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"estimatedCost",children:"Costo Estimado (COP)"}),u.jsx("input",{type:"number",id:"estimatedCost",name:"estimatedCost",value:g.estimatedCost,onChange:w,min:"0",step:"1000",className:_.estimatedCost?"error":"",disabled:M||c==="edit"&&!V}),_.estimatedCost&&u.jsx("span",{className:"error-text",children:_.estimatedCost})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"actualCost",children:"Costo Real (COP)"}),u.jsx("input",{type:"number",id:"actualCost",name:"actualCost",value:g.actualCost,onChange:w,min:"0",step:"1000",className:_.actualCost?"error":"",disabled:M||c==="edit"&&!V}),_.actualCost&&u.jsx("span",{className:"error-text",children:_.actualCost})]})]})]}),u.jsxs("div",{className:"form-section",children:[u.jsx("h4",{className:"section-title",children:"🔧 Partes y Repuestos"}),!M&&V&&u.jsx("div",{className:"parts-form",children:u.jsxs("div",{className:"form-grid",children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"partName",children:"Nombre de la Parte"}),u.jsx("input",{type:"text",id:"partName",name:"name",value:C.name,onChange:G,placeholder:"Ej: Filtro de aceite",maxLength:100})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"partQuantity",children:"Cantidad"}),u.jsx("input",{type:"number",id:"partQuantity",name:"quantity",value:C.quantity,onChange:G,min:"1",step:"1"})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"partCost",children:"Costo Unitario (COP)"}),u.jsx("input",{type:"number",id:"partCost",name:"cost",value:C.cost,onChange:G,min:"0",step:"1000"})]}),u.jsx("div",{className:"form-group",children:u.jsx("button",{type:"button",className:"btn-add-part",onClick:te,disabled:!C.name.trim(),children:"➕ Agregar"})})]})}),g.parts.length>0&&u.jsx("div",{className:"parts-list",children:u.jsxs("table",{className:"parts-table",children:[u.jsx("thead",{children:u.jsxs("tr",{children:[u.jsx("th",{children:"Parte"}),u.jsx("th",{children:"Cantidad"}),u.jsx("th",{children:"Costo Unit."}),u.jsx("th",{children:"Total"}),!M&&V&&u.jsx("th",{children:"Acciones"})]})}),u.jsx("tbody",{children:g.parts.map(j=>u.jsxs("tr",{children:[u.jsx("td",{children:j.name}),u.jsx("td",{children:j.quantity}),u.jsxs("td",{children:["$",j.cost.toLocaleString("es-CO")]}),u.jsxs("td",{children:["$",j.total.toLocaleString("es-CO")]}),!M&&V&&u.jsx("td",{children:u.jsx("button",{type:"button",className:"btn-remove-part",onClick:()=>ee(j.id),title:"Eliminar parte",children:"🗑️"})})]},j.id))}),u.jsx("tfoot",{children:u.jsxs("tr",{className:"total-row",children:[u.jsx("td",{colSpan:"3",children:u.jsx("strong",{children:"Total Partes:"})}),u.jsx("td",{children:u.jsxs("strong",{children:["$",I().toLocaleString("es-CO")]})}),!M&&V&&u.jsx("td",{})]})})]})})]}),u.jsxs("div",{className:"form-section",children:[u.jsx("h4",{className:"section-title",children:"🔄 Próximo Mantenimiento"}),u.jsxs("div",{className:"form-grid",children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"nextMaintenanceKm",children:"Próximo Mantenimiento (Km)"}),u.jsx("input",{type:"number",id:"nextMaintenanceKm",name:"nextMaintenanceKm",value:g.nextMaintenanceKm,onChange:w,min:"0",step:"1000",placeholder:"0 = No aplica",disabled:M||c==="edit"&&!V})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"nextMaintenanceHours",children:"Próximo Mantenimiento (Horas)"}),u.jsx("input",{type:"number",id:"nextMaintenanceHours",name:"nextMaintenanceHours",value:g.nextMaintenanceHours,onChange:w,min:"0",step:"100",placeholder:"0 = No aplica",disabled:M||c==="edit"&&!V})]})]})]}),u.jsxs("div",{className:"form-section",children:[u.jsx("h4",{className:"section-title",children:"📝 Descripción y Notas"}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"description",children:"Descripción del Trabajo *"}),u.jsx("textarea",{id:"description",name:"description",value:g.description,onChange:w,placeholder:"Describe el trabajo a realizar o realizado...",rows:"3",maxLength:"500",className:_.description?"error":"",disabled:M||c==="edit"&&!V}),_.description&&u.jsx("span",{className:"error-text",children:_.description})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"notes",children:"Notas Adicionales"}),u.jsx("textarea",{id:"notes",name:"notes",value:g.notes,onChange:w,placeholder:"Observaciones, recomendaciones, problemas encontrados...",rows:"3",maxLength:"500",disabled:M||c==="edit"&&!V}),u.jsxs("span",{className:"char-count",children:[g.notes.length,"/500 caracteres"]})]})]}),u.jsxs("div",{className:"cost-summary",children:[u.jsx("h4",{children:"💰 Resumen de Costos"}),u.jsxs("div",{className:"cost-grid",children:[u.jsxs("div",{className:"cost-item",children:[u.jsx("span",{className:"cost-label",children:"Mano de Obra:"}),u.jsxs("span",{className:"cost-value",children:["$",g.actualCost.toLocaleString("es-CO")]})]}),u.jsxs("div",{className:"cost-item",children:[u.jsx("span",{className:"cost-label",children:"Partes:"}),u.jsxs("span",{className:"cost-value",children:["$",I().toLocaleString("es-CO")]})]}),u.jsxs("div",{className:"cost-item total-cost",children:[u.jsx("span",{className:"cost-label",children:"Total:"}),u.jsxs("span",{className:"cost-value",children:["$",(g.actualCost+I()).toLocaleString("es-CO")]})]})]})]})]}),u.jsxs("div",{className:"modal-footer",children:[u.jsx("button",{type:"button",className:"btn-secondary",onClick:e,disabled:b,children:c==="view"?"Cerrar":"Cancelar"}),!M&&V&&u.jsx("button",{type:"submit",className:"btn-primary",disabled:b,children:b?u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"loading-spinner"}),"Guardando..."]}):u.jsx(u.Fragment,{children:c==="create"?"➕ Registrar Mantenimiento":"💾 Guardar Cambios"})})]})]})]})}):null},GV=()=>{const{user:s}=le.useContext(Ld),[e,t]=le.useState([]),[r,o]=le.useState(null),[c,d]=le.useState(!0),[m,g]=le.useState(null),[v,_]=le.useState({type:"",status:"",fuelType:"",location:"",maintenance:"all"}),[A,b]=le.useState("cards"),[D,C]=le.useState(""),[F,w]=le.useState(!1),[G,te]=le.useState(!1),[ee,Y]=le.useState(null),[U,he]=le.useState("create");le.useEffect(()=>{if(!s)return;d(!0);const ce=kV((Ne,P)=>{if(P){console.error("Error en suscripción de vehículos:",P),g("Error al cargar vehículos"),d(!1);return}t(Ne),g(null),d(!1)},v);return()=>ce()},[s,v]),le.useEffect(()=>{s&&(async()=>{try{const Ne=await PV(v);o(Ne)}catch(Ne){console.error("Error al cargar estadísticas:",Ne)}})()},[s,e,v]);const k=e.filter(ce=>{if(!D)return!0;const Ne=D.toLowerCase();return ce.vehicleId?.toLowerCase().includes(Ne)||ce.name?.toLowerCase().includes(Ne)||ce.type?.toLowerCase().includes(Ne)||ce.brand?.toLowerCase().includes(Ne)||ce.model?.toLowerCase().includes(Ne)||ce.currentLocation?.toLowerCase().includes(Ne)||ce.description?.toLowerCase().includes(Ne)}),x=()=>{Y(null),he("create"),w(!0)},I=ce=>{Y(ce),he("edit"),w(!0)},M=ce=>{Y(ce),he("view"),w(!0)},V=ce=>{Y(ce),te(!0)},j=()=>{w(!1),te(!1),Y(null)},R=ce=>{_(Ne=>({...Ne,...ce}))},we=()=>{_({type:"",status:"",fuelType:"",location:"",maintenance:"all"}),C("")},xe=s?.role==="admin"||s?.role==="contador",X=s?.role==="admin",ae=s?.role==="admin"||s?.role==="contador";return c?u.jsx("div",{className:"vehicles-main",children:u.jsxs("div",{className:"loading-container",children:[u.jsx("div",{className:"loading-spinner"}),u.jsx("p",{children:"Cargando vehículos..."})]})}):m?u.jsx("div",{className:"vehicles-main",children:u.jsxs("div",{className:"error-container",children:[u.jsx("div",{className:"error-icon",children:"⚠️"}),u.jsx("h3",{children:"Error al cargar vehículos"}),u.jsx("p",{children:m}),u.jsx("button",{className:"btn-retry",onClick:()=>window.location.reload(),children:"Reintentar"})]})}):u.jsxs("div",{className:"vehicles-main",children:[u.jsxs("div",{className:"vehicles-header",children:[u.jsxs("div",{className:"header-title",children:[u.jsx("h2",{children:"🚜 Gestión de Vehículos"}),u.jsx("p",{children:"Administra la maquinaria y vehículos forestales"})]}),xe&&u.jsx("button",{className:"btn-create-vehicle",onClick:x,children:"➕ Nuevo Vehículo"})]}),r&&u.jsx(LV,{stats:r,filters:v}),u.jsx(UV,{filters:v,onFilterChange:R,onClearFilters:we,searchTerm:D,onSearchChange:C,viewMode:A,onViewModeChange:b,totalResults:k.length}),k.length===0?u.jsxs("div",{className:"empty-state",children:[u.jsx("div",{className:"empty-icon",children:"🚜"}),u.jsx("h3",{children:e.length===0?"No hay vehículos registrados":"No se encontraron vehículos"}),u.jsx("p",{children:e.length===0?"Comienza registrando tu primer vehículo o maquinaria forestal":"Intenta ajustar los filtros de búsqueda"}),e.length===0&&xe&&u.jsx("button",{className:"btn-create-first",onClick:x,children:"➕ Registrar Primer Vehículo"})]}):u.jsx(qV,{vehicles:k,viewMode:A,onEdit:X?I:null,onView:M,onMaintenance:ae?V:null,userRole:s?.role}),F&&u.jsx(BV,{isOpen:F,onClose:j,vehicle:ee,mode:U,onSuccess:()=>{j()}}),G&&u.jsx(HV,{isOpen:G,onClose:j,vehicle:ee,onSuccess:()=>{j()}})]})},$V=()=>u.jsxs("div",{className:"module-placeholder",children:[u.jsx("h2",{children:"🏪 Módulo de Proveedores"}),u.jsx("p",{children:"Gestión de proveedores de combustible"}),u.jsxs("div",{className:"coming-soon",children:[u.jsx("span",{children:"🚧 En desarrollo"}),u.jsx("p",{children:"Próximamente: Base de datos de proveedores, comparación de precios, y evaluación."})]})]}),KV=()=>u.jsxs("div",{className:"module-placeholder",children:[u.jsx("h2",{children:"📋 Módulo de Reportes"}),u.jsx("p",{children:"Análisis y reportes de combustibles"}),u.jsxs("div",{className:"coming-soon",children:[u.jsx("span",{children:"🚧 En desarrollo"}),u.jsx("p",{children:"Próximamente: Reportes personalizables, gráficos interactivos, y exportación."})]})]}),QV=()=>{const[s,e]=le.useState("dashboard"),t=()=>{switch(s){case"dashboard":return u.jsx(P0,{});case"inventory":return u.jsx(TV,{});case"movements":return u.jsx(MV,{});case"vehicles":return u.jsx(GV,{});case"suppliers":return u.jsx($V,{});case"reports":return u.jsx(KV,{});default:return u.jsx(P0,{})}};return u.jsx(cV,{currentView:s,onViewChange:e,children:t()})};function YV(){return u.jsx(lV,{children:u.jsx("div",{className:"App",children:u.jsx(QV,{})})})}Qw.createRoot(document.getElementById("root")).render(u.jsx(le.StrictMode,{children:u.jsx(YV,{})}));
