const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/MigrationPageSimple-qfGcE8DZ.js","assets/MigrationPageSimple-Dhr2zY1M.css","assets/InventoryMain-DB3wz5yx.js","assets/InventoryMain-IBCPRbBR.css","assets/MovementsMain-D8k85zt8.js","assets/productsService-DtOiE9Gv.js","assets/MovementsMain-DPqKi7xb.css","assets/VehiclesMain-g3rQ1usn.js","assets/VehiclesMain-oCtbq_EQ.css","assets/MaintenanceMain-DnpNe0PL.js","assets/MaintenanceMain-CwCTJFzo.css","assets/ProductsMain-LJSzO79w.js","assets/ProductsMain-D0DHXlsC.css","assets/SuppliersMain-DAjPdaYv.js","assets/SuppliersMain-ElCAjoxt.css","assets/AdminMain-C22tOqxj.js","assets/AdminMain-afUgM0ui.css","assets/ReportsMain-CPiBj22l.js","assets/ReportsMain-BWhrXjbE.css"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();var kp={exports:{}},wu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VT;function U1(){if(VT)return wu;VT=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var d in a)d!=="key"&&(l[d]=a[d])}else l=a;return a=l.ref,{$$typeof:n,type:i,key:c,ref:a!==void 0?a:null,props:l}}return wu.Fragment=e,wu.jsx=t,wu.jsxs=t,wu}var kT;function z1(){return kT||(kT=1,kp.exports=U1()),kp.exports}var k=z1(),Lp={exports:{}},Ce={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LT;function j1(){if(LT)return Ce;LT=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),T=Symbol.iterator;function A(M){return M===null||typeof M!="object"?null:(M=T&&M[T]||M["@@iterator"],typeof M=="function"?M:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N=Object.assign,q={};function U(M,te,le){this.props=M,this.context=te,this.refs=q,this.updater=le||S}U.prototype.isReactComponent={},U.prototype.setState=function(M,te){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,te,"setState")},U.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function $(){}$.prototype=U.prototype;function ie(M,te,le){this.props=M,this.context=te,this.refs=q,this.updater=le||S}var ne=ie.prototype=new $;ne.constructor=ie,N(ne,U.prototype),ne.isPureReactComponent=!0;var he=Array.isArray,ce={H:null,A:null,T:null,S:null,V:null},Te=Object.prototype.hasOwnProperty;function P(M,te,le,re,ye,Oe){return le=Oe.ref,{$$typeof:n,type:M,key:te,ref:le!==void 0?le:null,props:Oe}}function I(M,te){return P(M.type,te,void 0,void 0,void 0,M.props)}function R(M){return typeof M=="object"&&M!==null&&M.$$typeof===n}function O(M){var te={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(le){return te[le]})}var V=/\/+/g;function j(M,te){return typeof M=="object"&&M!==null&&M.key!=null?O(""+M.key):te.toString(36)}function D(){}function Qt(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(D,D):(M.status="pending",M.then(function(te){M.status==="pending"&&(M.status="fulfilled",M.value=te)},function(te){M.status==="pending"&&(M.status="rejected",M.reason=te)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function yt(M,te,le,re,ye){var Oe=typeof M;(Oe==="undefined"||Oe==="boolean")&&(M=null);var Re=!1;if(M===null)Re=!0;else switch(Oe){case"bigint":case"string":case"number":Re=!0;break;case"object":switch(M.$$typeof){case n:case e:Re=!0;break;case _:return Re=M._init,yt(Re(M._payload),te,le,re,ye)}}if(Re)return ye=ye(M),Re=re===""?"."+j(M,0):re,he(ye)?(le="",Re!=null&&(le=Re.replace(V,"$&/")+"/"),yt(ye,te,le,"",function(vr){return vr})):ye!=null&&(R(ye)&&(ye=I(ye,le+(ye.key==null||M&&M.key===ye.key?"":(""+ye.key).replace(V,"$&/")+"/")+Re)),te.push(ye)),1;Re=0;var jt=re===""?".":re+":";if(he(M))for(var st=0;st<M.length;st++)re=M[st],Oe=jt+j(re,st),Re+=yt(re,te,le,Oe,ye);else if(st=A(M),typeof st=="function")for(M=st.call(M),st=0;!(re=M.next()).done;)re=re.value,Oe=jt+j(re,st++),Re+=yt(re,te,le,Oe,ye);else if(Oe==="object"){if(typeof M.then=="function")return yt(Qt(M),te,le,re,ye);throw te=String(M),Error("Objects are not valid as a React child (found: "+(te==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":te)+"). If you meant to render a collection of children, use an array instead.")}return Re}function X(M,te,le){if(M==null)return M;var re=[],ye=0;return yt(M,re,"","",function(Oe){return te.call(le,Oe,ye++)}),re}function oe(M){if(M._status===-1){var te=M._result;te=te(),te.then(function(le){(M._status===0||M._status===-1)&&(M._status=1,M._result=le)},function(le){(M._status===0||M._status===-1)&&(M._status=2,M._result=le)}),M._status===-1&&(M._status=0,M._result=te)}if(M._status===1)return M._result.default;throw M._result}var ge=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var te=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(te))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)};function Ge(){}return Ce.Children={map:X,forEach:function(M,te,le){X(M,function(){te.apply(this,arguments)},le)},count:function(M){var te=0;return X(M,function(){te++}),te},toArray:function(M){return X(M,function(te){return te})||[]},only:function(M){if(!R(M))throw Error("React.Children.only expected to receive a single React element child.");return M}},Ce.Component=U,Ce.Fragment=t,Ce.Profiler=a,Ce.PureComponent=ie,Ce.StrictMode=i,Ce.Suspense=m,Ce.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ce,Ce.__COMPILER_RUNTIME={__proto__:null,c:function(M){return ce.H.useMemoCache(M)}},Ce.cache=function(M){return function(){return M.apply(null,arguments)}},Ce.cloneElement=function(M,te,le){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var re=N({},M.props),ye=M.key,Oe=void 0;if(te!=null)for(Re in te.ref!==void 0&&(Oe=void 0),te.key!==void 0&&(ye=""+te.key),te)!Te.call(te,Re)||Re==="key"||Re==="__self"||Re==="__source"||Re==="ref"&&te.ref===void 0||(re[Re]=te[Re]);var Re=arguments.length-2;if(Re===1)re.children=le;else if(1<Re){for(var jt=Array(Re),st=0;st<Re;st++)jt[st]=arguments[st+2];re.children=jt}return P(M.type,ye,void 0,void 0,Oe,re)},Ce.createContext=function(M){return M={$$typeof:c,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:l,_context:M},M},Ce.createElement=function(M,te,le){var re,ye={},Oe=null;if(te!=null)for(re in te.key!==void 0&&(Oe=""+te.key),te)Te.call(te,re)&&re!=="key"&&re!=="__self"&&re!=="__source"&&(ye[re]=te[re]);var Re=arguments.length-2;if(Re===1)ye.children=le;else if(1<Re){for(var jt=Array(Re),st=0;st<Re;st++)jt[st]=arguments[st+2];ye.children=jt}if(M&&M.defaultProps)for(re in Re=M.defaultProps,Re)ye[re]===void 0&&(ye[re]=Re[re]);return P(M,Oe,void 0,void 0,null,ye)},Ce.createRef=function(){return{current:null}},Ce.forwardRef=function(M){return{$$typeof:d,render:M}},Ce.isValidElement=R,Ce.lazy=function(M){return{$$typeof:_,_payload:{_status:-1,_result:M},_init:oe}},Ce.memo=function(M,te){return{$$typeof:g,type:M,compare:te===void 0?null:te}},Ce.startTransition=function(M){var te=ce.T,le={};ce.T=le;try{var re=M(),ye=ce.S;ye!==null&&ye(le,re),typeof re=="object"&&re!==null&&typeof re.then=="function"&&re.then(Ge,ge)}catch(Oe){ge(Oe)}finally{ce.T=te}},Ce.unstable_useCacheRefresh=function(){return ce.H.useCacheRefresh()},Ce.use=function(M){return ce.H.use(M)},Ce.useActionState=function(M,te,le){return ce.H.useActionState(M,te,le)},Ce.useCallback=function(M,te){return ce.H.useCallback(M,te)},Ce.useContext=function(M){return ce.H.useContext(M)},Ce.useDebugValue=function(){},Ce.useDeferredValue=function(M,te){return ce.H.useDeferredValue(M,te)},Ce.useEffect=function(M,te,le){var re=ce.H;if(typeof le=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return re.useEffect(M,te)},Ce.useId=function(){return ce.H.useId()},Ce.useImperativeHandle=function(M,te,le){return ce.H.useImperativeHandle(M,te,le)},Ce.useInsertionEffect=function(M,te){return ce.H.useInsertionEffect(M,te)},Ce.useLayoutEffect=function(M,te){return ce.H.useLayoutEffect(M,te)},Ce.useMemo=function(M,te){return ce.H.useMemo(M,te)},Ce.useOptimistic=function(M,te){return ce.H.useOptimistic(M,te)},Ce.useReducer=function(M,te,le){return ce.H.useReducer(M,te,le)},Ce.useRef=function(M){return ce.H.useRef(M)},Ce.useState=function(M){return ce.H.useState(M)},Ce.useSyncExternalStore=function(M,te,le){return ce.H.useSyncExternalStore(M,te,le)},Ce.useTransition=function(){return ce.H.useTransition()},Ce.version="19.1.0",Ce}var UT;function $g(){return UT||(UT=1,Lp.exports=j1()),Lp.exports}var z=$g(),Up={exports:{}},Su={},zp={exports:{}},jp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zT;function B1(){return zT||(zT=1,function(n){function e(X,oe){var ge=X.length;X.push(oe);e:for(;0<ge;){var Ge=ge-1>>>1,M=X[Ge];if(0<a(M,oe))X[Ge]=oe,X[ge]=M,ge=Ge;else break e}}function t(X){return X.length===0?null:X[0]}function i(X){if(X.length===0)return null;var oe=X[0],ge=X.pop();if(ge!==oe){X[0]=ge;e:for(var Ge=0,M=X.length,te=M>>>1;Ge<te;){var le=2*(Ge+1)-1,re=X[le],ye=le+1,Oe=X[ye];if(0>a(re,ge))ye<M&&0>a(Oe,re)?(X[Ge]=Oe,X[ye]=ge,Ge=ye):(X[Ge]=re,X[le]=ge,Ge=le);else if(ye<M&&0>a(Oe,ge))X[Ge]=Oe,X[ye]=ge,Ge=ye;else break e}}return oe}function a(X,oe){var ge=X.sortIndex-oe.sortIndex;return ge!==0?ge:X.id-oe.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();n.unstable_now=function(){return c.now()-d}}var m=[],g=[],_=1,T=null,A=3,S=!1,N=!1,q=!1,U=!1,$=typeof setTimeout=="function"?setTimeout:null,ie=typeof clearTimeout=="function"?clearTimeout:null,ne=typeof setImmediate<"u"?setImmediate:null;function he(X){for(var oe=t(g);oe!==null;){if(oe.callback===null)i(g);else if(oe.startTime<=X)i(g),oe.sortIndex=oe.expirationTime,e(m,oe);else break;oe=t(g)}}function ce(X){if(q=!1,he(X),!N)if(t(m)!==null)N=!0,Te||(Te=!0,j());else{var oe=t(g);oe!==null&&yt(ce,oe.startTime-X)}}var Te=!1,P=-1,I=5,R=-1;function O(){return U?!0:!(n.unstable_now()-R<I)}function V(){if(U=!1,Te){var X=n.unstable_now();R=X;var oe=!0;try{e:{N=!1,q&&(q=!1,ie(P),P=-1),S=!0;var ge=A;try{t:{for(he(X),T=t(m);T!==null&&!(T.expirationTime>X&&O());){var Ge=T.callback;if(typeof Ge=="function"){T.callback=null,A=T.priorityLevel;var M=Ge(T.expirationTime<=X);if(X=n.unstable_now(),typeof M=="function"){T.callback=M,he(X),oe=!0;break t}T===t(m)&&i(m),he(X)}else i(m);T=t(m)}if(T!==null)oe=!0;else{var te=t(g);te!==null&&yt(ce,te.startTime-X),oe=!1}}break e}finally{T=null,A=ge,S=!1}oe=void 0}}finally{oe?j():Te=!1}}}var j;if(typeof ne=="function")j=function(){ne(V)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,Qt=D.port2;D.port1.onmessage=V,j=function(){Qt.postMessage(null)}}else j=function(){$(V,0)};function yt(X,oe){P=$(function(){X(n.unstable_now())},oe)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(X){X.callback=null},n.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<X?Math.floor(1e3/X):5},n.unstable_getCurrentPriorityLevel=function(){return A},n.unstable_next=function(X){switch(A){case 1:case 2:case 3:var oe=3;break;default:oe=A}var ge=A;A=oe;try{return X()}finally{A=ge}},n.unstable_requestPaint=function(){U=!0},n.unstable_runWithPriority=function(X,oe){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var ge=A;A=X;try{return oe()}finally{A=ge}},n.unstable_scheduleCallback=function(X,oe,ge){var Ge=n.unstable_now();switch(typeof ge=="object"&&ge!==null?(ge=ge.delay,ge=typeof ge=="number"&&0<ge?Ge+ge:Ge):ge=Ge,X){case 1:var M=-1;break;case 2:M=250;break;case 5:M=1073741823;break;case 4:M=1e4;break;default:M=5e3}return M=ge+M,X={id:_++,callback:oe,priorityLevel:X,startTime:ge,expirationTime:M,sortIndex:-1},ge>Ge?(X.sortIndex=ge,e(g,X),t(m)===null&&X===t(g)&&(q?(ie(P),P=-1):q=!0,yt(ce,ge-Ge))):(X.sortIndex=M,e(m,X),N||S||(N=!0,Te||(Te=!0,j()))),X},n.unstable_shouldYield=O,n.unstable_wrapCallback=function(X){var oe=A;return function(){var ge=A;A=oe;try{return X.apply(this,arguments)}finally{A=ge}}}}(jp)),jp}var jT;function F1(){return jT||(jT=1,zp.exports=B1()),zp.exports}var Bp={exports:{}},on={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BT;function q1(){if(BT)return on;BT=1;var n=$g();function e(m){var g="https://react.dev/errors/"+m;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)g+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+m+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(m,g,_){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:T==null?null:""+T,children:m,containerInfo:g,implementation:_}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(m,g){if(m==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return on.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,on.createPortal=function(m,g){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return l(m,g,null,_)},on.flushSync=function(m){var g=c.T,_=i.p;try{if(c.T=null,i.p=2,m)return m()}finally{c.T=g,i.p=_,i.d.f()}},on.preconnect=function(m,g){typeof m=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,i.d.C(m,g))},on.prefetchDNS=function(m){typeof m=="string"&&i.d.D(m)},on.preinit=function(m,g){if(typeof m=="string"&&g&&typeof g.as=="string"){var _=g.as,T=d(_,g.crossOrigin),A=typeof g.integrity=="string"?g.integrity:void 0,S=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;_==="style"?i.d.S(m,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:T,integrity:A,fetchPriority:S}):_==="script"&&i.d.X(m,{crossOrigin:T,integrity:A,fetchPriority:S,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},on.preinitModule=function(m,g){if(typeof m=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var _=d(g.as,g.crossOrigin);i.d.M(m,{crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&i.d.M(m)},on.preload=function(m,g){if(typeof m=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var _=g.as,T=d(_,g.crossOrigin);i.d.L(m,_,{crossOrigin:T,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},on.preloadModule=function(m,g){if(typeof m=="string")if(g){var _=d(g.as,g.crossOrigin);i.d.m(m,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else i.d.m(m)},on.requestFormReset=function(m){i.d.r(m)},on.unstable_batchedUpdates=function(m,g){return m(g)},on.useFormState=function(m,g,_){return c.H.useFormState(m,g,_)},on.useFormStatus=function(){return c.H.useHostTransitionStatus()},on.version="19.1.0",on}var FT;function H1(){if(FT)return Bp.exports;FT=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Bp.exports=q1(),Bp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qT;function G1(){if(qT)return Su;qT=1;var n=F1(),e=$g(),t=H1();function i(r){var s="https://react.dev/errors/"+r;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function l(r){var s=r,o=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,(s.flags&4098)!==0&&(o=s.return),r=s.return;while(r)}return s.tag===3?o:null}function c(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function d(r){if(l(r)!==r)throw Error(i(188))}function m(r){var s=r.alternate;if(!s){if(s=l(r),s===null)throw Error(i(188));return s!==r?null:r}for(var o=r,u=s;;){var f=o.return;if(f===null)break;var p=f.alternate;if(p===null){if(u=f.return,u!==null){o=u;continue}break}if(f.child===p.child){for(p=f.child;p;){if(p===o)return d(f),r;if(p===u)return d(f),s;p=p.sibling}throw Error(i(188))}if(o.return!==u.return)o=f,u=p;else{for(var E=!1,b=f.child;b;){if(b===o){E=!0,o=f,u=p;break}if(b===u){E=!0,u=f,o=p;break}b=b.sibling}if(!E){for(b=p.child;b;){if(b===o){E=!0,o=p,u=f;break}if(b===u){E=!0,u=p,o=f;break}b=b.sibling}if(!E)throw Error(i(189))}}if(o.alternate!==u)throw Error(i(190))}if(o.tag!==3)throw Error(i(188));return o.stateNode.current===o?r:s}function g(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r;for(r=r.child;r!==null;){if(s=g(r),s!==null)return s;r=r.sibling}return null}var _=Object.assign,T=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),q=Symbol.for("react.strict_mode"),U=Symbol.for("react.profiler"),$=Symbol.for("react.provider"),ie=Symbol.for("react.consumer"),ne=Symbol.for("react.context"),he=Symbol.for("react.forward_ref"),ce=Symbol.for("react.suspense"),Te=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),V=Symbol.iterator;function j(r){return r===null||typeof r!="object"?null:(r=V&&r[V]||r["@@iterator"],typeof r=="function"?r:null)}var D=Symbol.for("react.client.reference");function Qt(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===D?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case N:return"Fragment";case U:return"Profiler";case q:return"StrictMode";case ce:return"Suspense";case Te:return"SuspenseList";case R:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case S:return"Portal";case ne:return(r.displayName||"Context")+".Provider";case ie:return(r._context.displayName||"Context")+".Consumer";case he:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case P:return s=r.displayName||null,s!==null?s:Qt(r.type)||"Memo";case I:s=r._payload,r=r._init;try{return Qt(r(s))}catch{}}return null}var yt=Array.isArray,X=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oe=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ge={pending:!1,data:null,method:null,action:null},Ge=[],M=-1;function te(r){return{current:r}}function le(r){0>M||(r.current=Ge[M],Ge[M]=null,M--)}function re(r,s){M++,Ge[M]=r.current,r.current=s}var ye=te(null),Oe=te(null),Re=te(null),jt=te(null);function st(r,s){switch(re(Re,s),re(Oe,r),re(ye,null),s.nodeType){case 9:case 11:r=(r=s.documentElement)&&(r=r.namespaceURI)?uT(r):0;break;default:if(r=s.tagName,s=s.namespaceURI)s=uT(s),r=cT(s,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}le(ye),re(ye,r)}function vr(){le(ye),le(Oe),le(Re)}function xi(r){r.memoizedState!==null&&re(jt,r);var s=ye.current,o=cT(s,r.type);s!==o&&(re(Oe,r),re(ye,o))}function Wr(r){Oe.current===r&&(le(ye),le(Oe)),jt.current===r&&(le(jt),vu._currentValue=ge)}var zs=Object.prototype.hasOwnProperty,js=n.unstable_scheduleCallback,Bs=n.unstable_cancelCallback,gl=n.unstable_shouldYield,Oc=n.unstable_requestPaint,Bn=n.unstable_now,kd=n.unstable_getCurrentPriorityLevel,yl=n.unstable_ImmediatePriority,qa=n.unstable_UserBlockingPriority,Fs=n.unstable_NormalPriority,Ld=n.unstable_LowPriority,Ha=n.unstable_IdlePriority,_l=n.log,Mc=n.unstable_setDisableYieldValue,_t=null,Qe=null;function Rn(r){if(typeof _l=="function"&&Mc(r),Qe&&typeof Qe.setStrictMode=="function")try{Qe.setStrictMode(_t,r)}catch{}}var sn=Math.clz32?Math.clz32:qs,Pc=Math.log,Ud=Math.LN2;function qs(r){return r>>>=0,r===0?32:31-(Pc(r)/Ud|0)|0}var Hs=256,Gs=4194304;function sr(r){var s=r&42;if(s!==0)return s;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function Ga(r,s,o){var u=r.pendingLanes;if(u===0)return 0;var f=0,p=r.suspendedLanes,E=r.pingedLanes;r=r.warmLanes;var b=u&134217727;return b!==0?(u=b&~p,u!==0?f=sr(u):(E&=b,E!==0?f=sr(E):o||(o=b&~r,o!==0&&(f=sr(o))))):(b=u&~p,b!==0?f=sr(b):E!==0?f=sr(E):o||(o=u&~r,o!==0&&(f=sr(o)))),f===0?0:s!==0&&s!==f&&(s&p)===0&&(p=f&-f,o=s&-s,p>=o||p===32&&(o&4194048)!==0)?s:f}function $s(r,s){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&s)===0}function vl(r,s){switch(r){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function El(){var r=Hs;return Hs<<=1,(Hs&4194048)===0&&(Hs=256),r}function Tl(){var r=Gs;return Gs<<=1,(Gs&62914560)===0&&(Gs=4194304),r}function Zr(r){for(var s=[],o=0;31>o;o++)s.push(r);return s}function Jr(r,s){r.pendingLanes|=s,s!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function Al(r,s,o,u,f,p){var E=r.pendingLanes;r.pendingLanes=o,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=o,r.entangledLanes&=o,r.errorRecoveryDisabledLanes&=o,r.shellSuspendCounter=0;var b=r.entanglements,C=r.expirationTimes,H=r.hiddenUpdates;for(o=E&~o;0<o;){var W=31-sn(o),J=1<<W;b[W]=0,C[W]=-1;var G=H[W];if(G!==null)for(H[W]=null,W=0;W<G.length;W++){var K=G[W];K!==null&&(K.lane&=-536870913)}o&=~J}u!==0&&Er(r,u,0),p!==0&&f===0&&r.tag!==0&&(r.suspendedLanes|=p&~(E&~s))}function Er(r,s,o){r.pendingLanes|=s,r.suspendedLanes&=~s;var u=31-sn(s);r.entangledLanes|=s,r.entanglements[u]=r.entanglements[u]|1073741824|o&4194090}function bl(r,s){var o=r.entangledLanes|=s;for(r=r.entanglements;o;){var u=31-sn(o),f=1<<u;f&s|r[u]&s&&(r[u]|=s),o&=~f}}function Vi(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function $a(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function ki(){var r=oe.p;return r!==0?r:(r=window.event,r===void 0?32:NT(r.type))}function xc(r,s){var o=oe.p;try{return oe.p=r,s()}finally{oe.p=o}}var ct=Math.random().toString(36).slice(2),Pt="__reactFiber$"+ct,Rt="__reactProps$"+ct,Fn="__reactContainer$"+ct,wl="__reactEvents$"+ct,zd="__reactListeners$"+ct,Li="__reactHandles$"+ct,Vc="__reactResources$"+ct,Ks="__reactMarker$"+ct;function Ui(r){delete r[Pt],delete r[Rt],delete r[wl],delete r[zd],delete r[Li]}function ei(r){var s=r[Pt];if(s)return s;for(var o=r.parentNode;o;){if(s=o[Fn]||o[Pt]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(r=mT(r);r!==null;){if(o=r[Pt])return o;r=mT(r)}return s}r=o,o=r.parentNode}return null}function Tr(r){if(r=r[Pt]||r[Fn]){var s=r.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return r}return null}function Ar(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r.stateNode;throw Error(i(33))}function pn(r){var s=r[Vc];return s||(s=r[Vc]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Tt(r){r[Ks]=!0}var Sl=new Set,Ka={};function ar(r,s){ti(r,s),ti(r+"Capture",s)}function ti(r,s){for(Ka[r]=s,r=0;r<s.length;r++)Sl.add(s[r])}var kc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Lc={},Qs={};function Uc(r){return zs.call(Qs,r)?!0:zs.call(Lc,r)?!1:kc.test(r)?Qs[r]=!0:(Lc[r]=!0,!1)}function zi(r,s,o){if(Uc(s))if(o===null)r.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":r.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){r.removeAttribute(s);return}}r.setAttribute(s,""+o)}}function br(r,s,o){if(o===null)r.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(s);return}r.setAttribute(s,""+o)}}function Yt(r,s,o,u){if(u===null)r.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(o);return}r.setAttributeNS(s,o,""+u)}}var Ys,zc;function ni(r){if(Ys===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);Ys=s&&s[1]||"",zc=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ys+r+zc}var Qa=!1;function Ya(r,s){if(!r||Qa)return"";Qa=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var J=function(){throw Error()};if(Object.defineProperty(J.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(J,[])}catch(K){var G=K}Reflect.construct(r,[],J)}else{try{J.call()}catch(K){G=K}r.call(J.prototype)}}else{try{throw Error()}catch(K){G=K}(J=r())&&typeof J.catch=="function"&&J.catch(function(){})}}catch(K){if(K&&G&&typeof K.stack=="string")return[K.stack,G.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=u.DetermineComponentFrameRoot(),E=p[0],b=p[1];if(E&&b){var C=E.split(`
`),H=b.split(`
`);for(f=u=0;u<C.length&&!C[u].includes("DetermineComponentFrameRoot");)u++;for(;f<H.length&&!H[f].includes("DetermineComponentFrameRoot");)f++;if(u===C.length||f===H.length)for(u=C.length-1,f=H.length-1;1<=u&&0<=f&&C[u]!==H[f];)f--;for(;1<=u&&0<=f;u--,f--)if(C[u]!==H[f]){if(u!==1||f!==1)do if(u--,f--,0>f||C[u]!==H[f]){var W=`
`+C[u].replace(" at new "," at ");return r.displayName&&W.includes("<anonymous>")&&(W=W.replace("<anonymous>",r.displayName)),W}while(1<=u&&0<=f);break}}}finally{Qa=!1,Error.prepareStackTrace=o}return(o=r?r.displayName||r.name:"")?ni(o):""}function Rl(r){switch(r.tag){case 26:case 27:case 5:return ni(r.type);case 16:return ni("Lazy");case 13:return ni("Suspense");case 19:return ni("SuspenseList");case 0:case 15:return Ya(r.type,!1);case 11:return Ya(r.type.render,!1);case 1:return Ya(r.type,!0);case 31:return ni("Activity");default:return""}}function Xa(r){try{var s="";do s+=Rl(r),r=r.return;while(r);return s}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function gn(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Il(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function jd(r){var s=Il(r)?"checked":"value",o=Object.getOwnPropertyDescriptor(r.constructor.prototype,s),u=""+r[s];if(!r.hasOwnProperty(s)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var f=o.get,p=o.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return f.call(this)},set:function(E){u=""+E,p.call(this,E)}}),Object.defineProperty(r,s,{enumerable:o.enumerable}),{getValue:function(){return u},setValue:function(E){u=""+E},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function Wa(r){r._valueTracker||(r._valueTracker=jd(r))}function Cl(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var o=s.getValue(),u="";return r&&(u=Il(r)?r.checked?"true":"false":r.value),r=u,r!==o?(s.setValue(r),!0):!1}function Xs(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var Bd=/[\n"\\]/g;function It(r){return r.replace(Bd,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function In(r,s,o,u,f,p,E,b){r.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?r.type=E:r.removeAttribute("type"),s!=null?E==="number"?(s===0&&r.value===""||r.value!=s)&&(r.value=""+gn(s)):r.value!==""+gn(s)&&(r.value=""+gn(s)):E!=="submit"&&E!=="reset"||r.removeAttribute("value"),s!=null?ji(r,E,gn(s)):o!=null?ji(r,E,gn(o)):u!=null&&r.removeAttribute("value"),f==null&&p!=null&&(r.defaultChecked=!!p),f!=null&&(r.checked=f&&typeof f!="function"&&typeof f!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?r.name=""+gn(b):r.removeAttribute("name")}function Ws(r,s,o,u,f,p,E,b){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(r.type=p),s!=null||o!=null){if(!(p!=="submit"&&p!=="reset"||s!=null))return;o=o!=null?""+gn(o):"",s=s!=null?""+gn(s):o,b||s===r.value||(r.value=s),r.defaultValue=s}u=u??f,u=typeof u!="function"&&typeof u!="symbol"&&!!u,r.checked=b?r.checked:!!u,r.defaultChecked=!!u,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(r.name=E)}function ji(r,s,o){s==="number"&&Xs(r.ownerDocument)===r||r.defaultValue===""+o||(r.defaultValue=""+o)}function ri(r,s,o,u){if(r=r.options,s){s={};for(var f=0;f<o.length;f++)s["$"+o[f]]=!0;for(o=0;o<r.length;o++)f=s.hasOwnProperty("$"+r[o].value),r[o].selected!==f&&(r[o].selected=f),f&&u&&(r[o].defaultSelected=!0)}else{for(o=""+gn(o),s=null,f=0;f<r.length;f++){if(r[f].value===o){r[f].selected=!0,u&&(r[f].defaultSelected=!0);return}s!==null||r[f].disabled||(s=r[f])}s!==null&&(s.selected=!0)}}function Je(r,s,o){if(s!=null&&(s=""+gn(s),s!==r.value&&(r.value=s),o==null)){r.defaultValue!==s&&(r.defaultValue=s);return}r.defaultValue=o!=null?""+gn(o):""}function Zs(r,s,o,u){if(s==null){if(u!=null){if(o!=null)throw Error(i(92));if(yt(u)){if(1<u.length)throw Error(i(93));u=u[0]}o=u}o==null&&(o=""),s=o}o=gn(s),r.defaultValue=o,u=r.textContent,u===o&&u!==""&&u!==null&&(r.value=u)}function qn(r,s){if(s){var o=r.firstChild;if(o&&o===r.lastChild&&o.nodeType===3){o.nodeValue=s;return}}r.textContent=s}var Js=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function jc(r,s,o){var u=s.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?r.setProperty(s,""):s==="float"?r.cssFloat="":r[s]="":u?r.setProperty(s,o):typeof o!="number"||o===0||Js.has(s)?s==="float"?r.cssFloat=o:r[s]=(""+o).trim():r[s]=o+"px"}function Nl(r,s,o){if(s!=null&&typeof s!="object")throw Error(i(62));if(r=r.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?r.setProperty(u,""):u==="float"?r.cssFloat="":r[u]="");for(var f in s)u=s[f],s.hasOwnProperty(f)&&o[f]!==u&&jc(r,f,u)}else for(var p in s)s.hasOwnProperty(p)&&jc(r,p,s[p])}function Dl(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Fd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),qd=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Za(r){return qd.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}var ii=null;function Hn(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var si=null,ai=null;function Ol(r){var s=Tr(r);if(s&&(r=s.stateNode)){var o=r[Rt]||null;e:switch(r=s.stateNode,s.type){case"input":if(In(r,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),s=o.name,o.type==="radio"&&s!=null){for(o=r;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+It(""+s)+'"][type="radio"]'),s=0;s<o.length;s++){var u=o[s];if(u!==r&&u.form===r.form){var f=u[Rt]||null;if(!f)throw Error(i(90));In(u,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(s=0;s<o.length;s++)u=o[s],u.form===r.form&&Cl(u)}break e;case"textarea":Je(r,o.value,o.defaultValue);break e;case"select":s=o.value,s!=null&&ri(r,!!o.multiple,s,!1)}}}var wr=!1;function Bc(r,s,o){if(wr)return r(s,o);wr=!0;try{var u=r(s);return u}finally{if(wr=!1,(si!==null||ai!==null)&&(xh(),si&&(s=si,r=ai,ai=si=null,Ol(s),r)))for(s=0;s<r.length;s++)Ol(r[s])}}function ea(r,s){var o=r.stateNode;if(o===null)return null;var u=o[Rt]||null;if(u===null)return null;o=u[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(r=r.type,u=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!u;break e;default:r=!1}if(r)return null;if(o&&typeof o!="function")throw Error(i(231,s,typeof o));return o}var or=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Gn=!1;if(or)try{var ta={};Object.defineProperty(ta,"passive",{get:function(){Gn=!0}}),window.addEventListener("test",ta,ta),window.removeEventListener("test",ta,ta)}catch{Gn=!1}var Sr=null,Bi=null,oi=null;function Ml(){if(oi)return oi;var r,s=Bi,o=s.length,u,f="value"in Sr?Sr.value:Sr.textContent,p=f.length;for(r=0;r<o&&s[r]===f[r];r++);var E=o-r;for(u=1;u<=E&&s[o-u]===f[p-u];u++);return oi=f.slice(r,1<u?1-u:void 0)}function Rr(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function Ir(){return!0}function Pl(){return!1}function Bt(r){function s(o,u,f,p,E){this._reactName=o,this._targetInst=f,this.type=u,this.nativeEvent=p,this.target=E,this.currentTarget=null;for(var b in r)r.hasOwnProperty(b)&&(o=r[b],this[b]=o?o(p):p[b]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Ir:Pl,this.isPropagationStopped=Pl,this}return _(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Ir)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Ir)},persist:function(){},isPersistent:Ir}),s}var Ke={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ja=Bt(Ke),na=_({},Ke,{view:0,detail:0}),Fc=Bt(na),eo,to,Cr,ra=_({},na,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:aa,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Cr&&(Cr&&r.type==="mousemove"?(eo=r.screenX-Cr.screenX,to=r.screenY-Cr.screenY):to=eo=0,Cr=r),eo)},movementY:function(r){return"movementY"in r?r.movementY:to}}),$n=Bt(ra),qc=_({},ra,{dataTransfer:0}),Hd=Bt(qc),ia=_({},na,{relatedTarget:0}),no=Bt(ia),xl=_({},Ke,{animationName:0,elapsedTime:0,pseudoElement:0}),ro=Bt(xl),Hc=_({},Ke,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),io=Bt(Hc),Gd=_({},Ke,{data:0}),Vl=Bt(Gd),sa={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Gc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$c={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kl(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=$c[r])?!!s[r]:!1}function aa(){return kl}var Kc=_({},na,{key:function(r){if(r.key){var s=sa[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=Rr(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Gc[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:aa,charCode:function(r){return r.type==="keypress"?Rr(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Rr(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),so=Bt(Kc),Qc=_({},ra,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ll=Bt(Qc),li=_({},na,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:aa}),Yc=Bt(li),Xc=_({},Ke,{propertyName:0,elapsedTime:0,pseudoElement:0}),Wc=Bt(Xc),Zc=_({},ra,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),ao=Bt(Zc),yn=_({},Ke,{newState:0,oldState:0}),Jc=Bt(yn),eh=[9,13,27,32],Nr=or&&"CompositionEvent"in window,h=null;or&&"documentMode"in document&&(h=document.documentMode);var y=or&&"TextEvent"in window&&!h,v=or&&(!Nr||h&&8<h&&11>=h),w=" ",B=!1;function Q(r,s){switch(r){case"keyup":return eh.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ae(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var ze=!1;function xt(r,s){switch(r){case"compositionend":return ae(s);case"keypress":return s.which!==32?null:(B=!0,w);case"textInput":return r=s.data,r===w&&B?null:r;default:return null}}function je(r,s){if(ze)return r==="compositionend"||!Nr&&Q(r,s)?(r=Ml(),oi=Bi=Sr=null,ze=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return v&&s.locale!=="ko"?null:s.data;default:return null}}var Ft={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vt(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!Ft[r.type]:s==="textarea"}function ui(r,s,o,u){si?ai?ai.push(u):ai=[u]:si=u,s=jh(s,"onChange"),0<s.length&&(o=new Ja("onChange","change",null,o,u),r.push({event:o,listeners:s}))}var Xt=null,Dr=null;function Ul(r){iT(r,0)}function th(r){var s=Ar(r);if(Cl(s))return r}function S_(r,s){if(r==="change")return s}var R_=!1;if(or){var $d;if(or){var Kd="oninput"in document;if(!Kd){var I_=document.createElement("div");I_.setAttribute("oninput","return;"),Kd=typeof I_.oninput=="function"}$d=Kd}else $d=!1;R_=$d&&(!document.documentMode||9<document.documentMode)}function C_(){Xt&&(Xt.detachEvent("onpropertychange",N_),Dr=Xt=null)}function N_(r){if(r.propertyName==="value"&&th(Dr)){var s=[];ui(s,Dr,r,Hn(r)),Bc(Ul,s)}}function mI(r,s,o){r==="focusin"?(C_(),Xt=s,Dr=o,Xt.attachEvent("onpropertychange",N_)):r==="focusout"&&C_()}function pI(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return th(Dr)}function gI(r,s){if(r==="click")return th(s)}function yI(r,s){if(r==="input"||r==="change")return th(s)}function _I(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var Cn=typeof Object.is=="function"?Object.is:_I;function zl(r,s){if(Cn(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var o=Object.keys(r),u=Object.keys(s);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var f=o[u];if(!zs.call(s,f)||!Cn(r[f],s[f]))return!1}return!0}function D_(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function O_(r,s){var o=D_(r);r=0;for(var u;o;){if(o.nodeType===3){if(u=r+o.textContent.length,r<=s&&u>=s)return{node:o,offset:s-r};r=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=D_(o)}}function M_(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?M_(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function P_(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var s=Xs(r.document);s instanceof r.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)r=s.contentWindow;else break;s=Xs(r.document)}return s}function Qd(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}var vI=or&&"documentMode"in document&&11>=document.documentMode,oo=null,Yd=null,jl=null,Xd=!1;function x_(r,s,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Xd||oo==null||oo!==Xs(u)||(u=oo,"selectionStart"in u&&Qd(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),jl&&zl(jl,u)||(jl=u,u=jh(Yd,"onSelect"),0<u.length&&(s=new Ja("onSelect","select",null,s,o),r.push({event:s,listeners:u}),s.target=oo)))}function oa(r,s){var o={};return o[r.toLowerCase()]=s.toLowerCase(),o["Webkit"+r]="webkit"+s,o["Moz"+r]="moz"+s,o}var lo={animationend:oa("Animation","AnimationEnd"),animationiteration:oa("Animation","AnimationIteration"),animationstart:oa("Animation","AnimationStart"),transitionrun:oa("Transition","TransitionRun"),transitionstart:oa("Transition","TransitionStart"),transitioncancel:oa("Transition","TransitionCancel"),transitionend:oa("Transition","TransitionEnd")},Wd={},V_={};or&&(V_=document.createElement("div").style,"AnimationEvent"in window||(delete lo.animationend.animation,delete lo.animationiteration.animation,delete lo.animationstart.animation),"TransitionEvent"in window||delete lo.transitionend.transition);function la(r){if(Wd[r])return Wd[r];if(!lo[r])return r;var s=lo[r],o;for(o in s)if(s.hasOwnProperty(o)&&o in V_)return Wd[r]=s[o];return r}var k_=la("animationend"),L_=la("animationiteration"),U_=la("animationstart"),EI=la("transitionrun"),TI=la("transitionstart"),AI=la("transitioncancel"),z_=la("transitionend"),j_=new Map,Zd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Zd.push("scrollEnd");function lr(r,s){j_.set(r,s),ar(s,[r])}var B_=new WeakMap;function Kn(r,s){if(typeof r=="object"&&r!==null){var o=B_.get(r);return o!==void 0?o:(s={value:r,source:s,stack:Xa(s)},B_.set(r,s),s)}return{value:r,source:s,stack:Xa(s)}}var Qn=[],uo=0,Jd=0;function nh(){for(var r=uo,s=Jd=uo=0;s<r;){var o=Qn[s];Qn[s++]=null;var u=Qn[s];Qn[s++]=null;var f=Qn[s];Qn[s++]=null;var p=Qn[s];if(Qn[s++]=null,u!==null&&f!==null){var E=u.pending;E===null?f.next=f:(f.next=E.next,E.next=f),u.pending=f}p!==0&&F_(o,f,p)}}function rh(r,s,o,u){Qn[uo++]=r,Qn[uo++]=s,Qn[uo++]=o,Qn[uo++]=u,Jd|=u,r.lanes|=u,r=r.alternate,r!==null&&(r.lanes|=u)}function em(r,s,o,u){return rh(r,s,o,u),ih(r)}function co(r,s){return rh(r,null,null,s),ih(r)}function F_(r,s,o){r.lanes|=o;var u=r.alternate;u!==null&&(u.lanes|=o);for(var f=!1,p=r.return;p!==null;)p.childLanes|=o,u=p.alternate,u!==null&&(u.childLanes|=o),p.tag===22&&(r=p.stateNode,r===null||r._visibility&1||(f=!0)),r=p,p=p.return;return r.tag===3?(p=r.stateNode,f&&s!==null&&(f=31-sn(o),r=p.hiddenUpdates,u=r[f],u===null?r[f]=[s]:u.push(s),s.lane=o|536870912),p):null}function ih(r){if(50<hu)throw hu=0,ap=null,Error(i(185));for(var s=r.return;s!==null;)r=s,s=r.return;return r.tag===3?r.stateNode:null}var ho={};function bI(r,s,o,u){this.tag=r,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nn(r,s,o,u){return new bI(r,s,o,u)}function tm(r){return r=r.prototype,!(!r||!r.isReactComponent)}function ci(r,s){var o=r.alternate;return o===null?(o=Nn(r.tag,s,r.key,r.mode),o.elementType=r.elementType,o.type=r.type,o.stateNode=r.stateNode,o.alternate=r,r.alternate=o):(o.pendingProps=s,o.type=r.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=r.flags&65011712,o.childLanes=r.childLanes,o.lanes=r.lanes,o.child=r.child,o.memoizedProps=r.memoizedProps,o.memoizedState=r.memoizedState,o.updateQueue=r.updateQueue,s=r.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=r.sibling,o.index=r.index,o.ref=r.ref,o.refCleanup=r.refCleanup,o}function q_(r,s){r.flags&=65011714;var o=r.alternate;return o===null?(r.childLanes=0,r.lanes=s,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,s=o.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),r}function sh(r,s,o,u,f,p){var E=0;if(u=r,typeof r=="function")tm(r)&&(E=1);else if(typeof r=="string")E=S1(r,o,ye.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case R:return r=Nn(31,o,s,f),r.elementType=R,r.lanes=p,r;case N:return ua(o.children,f,p,s);case q:E=8,f|=24;break;case U:return r=Nn(12,o,s,f|2),r.elementType=U,r.lanes=p,r;case ce:return r=Nn(13,o,s,f),r.elementType=ce,r.lanes=p,r;case Te:return r=Nn(19,o,s,f),r.elementType=Te,r.lanes=p,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case $:case ne:E=10;break e;case ie:E=9;break e;case he:E=11;break e;case P:E=14;break e;case I:E=16,u=null;break e}E=29,o=Error(i(130,r===null?"null":typeof r,"")),u=null}return s=Nn(E,o,s,f),s.elementType=r,s.type=u,s.lanes=p,s}function ua(r,s,o,u){return r=Nn(7,r,u,s),r.lanes=o,r}function nm(r,s,o){return r=Nn(6,r,null,s),r.lanes=o,r}function rm(r,s,o){return s=Nn(4,r.children!==null?r.children:[],r.key,s),s.lanes=o,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}var fo=[],mo=0,ah=null,oh=0,Yn=[],Xn=0,ca=null,hi=1,fi="";function ha(r,s){fo[mo++]=oh,fo[mo++]=ah,ah=r,oh=s}function H_(r,s,o){Yn[Xn++]=hi,Yn[Xn++]=fi,Yn[Xn++]=ca,ca=r;var u=hi;r=fi;var f=32-sn(u)-1;u&=~(1<<f),o+=1;var p=32-sn(s)+f;if(30<p){var E=f-f%5;p=(u&(1<<E)-1).toString(32),u>>=E,f-=E,hi=1<<32-sn(s)+f|o<<f|u,fi=p+r}else hi=1<<p|o<<f|u,fi=r}function im(r){r.return!==null&&(ha(r,1),H_(r,1,0))}function sm(r){for(;r===ah;)ah=fo[--mo],fo[mo]=null,oh=fo[--mo],fo[mo]=null;for(;r===ca;)ca=Yn[--Xn],Yn[Xn]=null,fi=Yn[--Xn],Yn[Xn]=null,hi=Yn[--Xn],Yn[Xn]=null}var _n=null,vt=null,$e=!1,fa=null,Or=!1,am=Error(i(519));function da(r){var s=Error(i(418,""));throw ql(Kn(s,r)),am}function G_(r){var s=r.stateNode,o=r.type,u=r.memoizedProps;switch(s[Pt]=r,s[Rt]=u,o){case"dialog":Ve("cancel",s),Ve("close",s);break;case"iframe":case"object":case"embed":Ve("load",s);break;case"video":case"audio":for(o=0;o<du.length;o++)Ve(du[o],s);break;case"source":Ve("error",s);break;case"img":case"image":case"link":Ve("error",s),Ve("load",s);break;case"details":Ve("toggle",s);break;case"input":Ve("invalid",s),Ws(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),Wa(s);break;case"select":Ve("invalid",s);break;case"textarea":Ve("invalid",s),Zs(s,u.value,u.defaultValue,u.children),Wa(s)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||s.textContent===""+o||u.suppressHydrationWarning===!0||lT(s.textContent,o)?(u.popover!=null&&(Ve("beforetoggle",s),Ve("toggle",s)),u.onScroll!=null&&Ve("scroll",s),u.onScrollEnd!=null&&Ve("scrollend",s),u.onClick!=null&&(s.onclick=Bh),s=!0):s=!1,s||da(r)}function $_(r){for(_n=r.return;_n;)switch(_n.tag){case 5:case 13:Or=!1;return;case 27:case 3:Or=!0;return;default:_n=_n.return}}function Bl(r){if(r!==_n)return!1;if(!$e)return $_(r),$e=!0,!1;var s=r.tag,o;if((o=s!==3&&s!==27)&&((o=s===5)&&(o=r.type,o=!(o!=="form"&&o!=="button")||Ap(r.type,r.memoizedProps)),o=!o),o&&vt&&da(r),$_(r),s===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));e:{for(r=r.nextSibling,s=0;r;){if(r.nodeType===8)if(o=r.data,o==="/$"){if(s===0){vt=cr(r.nextSibling);break e}s--}else o!=="$"&&o!=="$!"&&o!=="$?"||s++;r=r.nextSibling}vt=null}}else s===27?(s=vt,rs(r.type)?(r=Rp,Rp=null,vt=r):vt=s):vt=_n?cr(r.stateNode.nextSibling):null;return!0}function Fl(){vt=_n=null,$e=!1}function K_(){var r=fa;return r!==null&&(An===null?An=r:An.push.apply(An,r),fa=null),r}function ql(r){fa===null?fa=[r]:fa.push(r)}var om=te(null),ma=null,di=null;function Fi(r,s,o){re(om,s._currentValue),s._currentValue=o}function mi(r){r._currentValue=om.current,le(om)}function lm(r,s,o){for(;r!==null;){var u=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),r===o)break;r=r.return}}function um(r,s,o,u){var f=r.child;for(f!==null&&(f.return=r);f!==null;){var p=f.dependencies;if(p!==null){var E=f.child;p=p.firstContext;e:for(;p!==null;){var b=p;p=f;for(var C=0;C<s.length;C++)if(b.context===s[C]){p.lanes|=o,b=p.alternate,b!==null&&(b.lanes|=o),lm(p.return,o,r),u||(E=null);break e}p=b.next}}else if(f.tag===18){if(E=f.return,E===null)throw Error(i(341));E.lanes|=o,p=E.alternate,p!==null&&(p.lanes|=o),lm(E,o,r),E=null}else E=f.child;if(E!==null)E.return=f;else for(E=f;E!==null;){if(E===r){E=null;break}if(f=E.sibling,f!==null){f.return=E.return,E=f;break}E=E.return}f=E}}function Hl(r,s,o,u){r=null;for(var f=s,p=!1;f!==null;){if(!p){if((f.flags&524288)!==0)p=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var E=f.alternate;if(E===null)throw Error(i(387));if(E=E.memoizedProps,E!==null){var b=f.type;Cn(f.pendingProps.value,E.value)||(r!==null?r.push(b):r=[b])}}else if(f===jt.current){if(E=f.alternate,E===null)throw Error(i(387));E.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(r!==null?r.push(vu):r=[vu])}f=f.return}r!==null&&um(s,r,o,u),s.flags|=262144}function lh(r){for(r=r.firstContext;r!==null;){if(!Cn(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function pa(r){ma=r,di=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function an(r){return Q_(ma,r)}function uh(r,s){return ma===null&&pa(r),Q_(r,s)}function Q_(r,s){var o=s._currentValue;if(s={context:s,memoizedValue:o,next:null},di===null){if(r===null)throw Error(i(308));di=s,r.dependencies={lanes:0,firstContext:s},r.flags|=524288}else di=di.next=s;return o}var wI=typeof AbortController<"u"?AbortController:function(){var r=[],s=this.signal={aborted:!1,addEventListener:function(o,u){r.push(u)}};this.abort=function(){s.aborted=!0,r.forEach(function(o){return o()})}},SI=n.unstable_scheduleCallback,RI=n.unstable_NormalPriority,kt={$$typeof:ne,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function cm(){return{controller:new wI,data:new Map,refCount:0}}function Gl(r){r.refCount--,r.refCount===0&&SI(RI,function(){r.controller.abort()})}var $l=null,hm=0,po=0,go=null;function II(r,s){if($l===null){var o=$l=[];hm=0,po=dp(),go={status:"pending",value:void 0,then:function(u){o.push(u)}}}return hm++,s.then(Y_,Y_),s}function Y_(){if(--hm===0&&$l!==null){go!==null&&(go.status="fulfilled");var r=$l;$l=null,po=0,go=null;for(var s=0;s<r.length;s++)(0,r[s])()}}function CI(r,s){var o=[],u={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return r.then(function(){u.status="fulfilled",u.value=s;for(var f=0;f<o.length;f++)(0,o[f])(s)},function(f){for(u.status="rejected",u.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),u}var X_=X.S;X.S=function(r,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&II(r,s),X_!==null&&X_(r,s)};var ga=te(null);function fm(){var r=ga.current;return r!==null?r:at.pooledCache}function ch(r,s){s===null?re(ga,ga.current):re(ga,s.pool)}function W_(){var r=fm();return r===null?null:{parent:kt._currentValue,pool:r}}var Kl=Error(i(460)),Z_=Error(i(474)),hh=Error(i(542)),dm={then:function(){}};function J_(r){return r=r.status,r==="fulfilled"||r==="rejected"}function fh(){}function ev(r,s,o){switch(o=r[o],o===void 0?r.push(s):o!==s&&(s.then(fh,fh),s=o),s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,nv(r),r;default:if(typeof s.status=="string")s.then(fh,fh);else{if(r=at,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=s,r.status="pending",r.then(function(u){if(s.status==="pending"){var f=s;f.status="fulfilled",f.value=u}},function(u){if(s.status==="pending"){var f=s;f.status="rejected",f.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,nv(r),r}throw Ql=s,Kl}}var Ql=null;function tv(){if(Ql===null)throw Error(i(459));var r=Ql;return Ql=null,r}function nv(r){if(r===Kl||r===hh)throw Error(i(483))}var qi=!1;function mm(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function pm(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Hi(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function Gi(r,s,o){var u=r.updateQueue;if(u===null)return null;if(u=u.shared,(Ye&2)!==0){var f=u.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),u.pending=s,s=ih(r),F_(r,null,o),s}return rh(r,u,s,o),ih(r)}function Yl(r,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194048)!==0)){var u=s.lanes;u&=r.pendingLanes,o|=u,s.lanes=o,bl(r,o)}}function gm(r,s){var o=r.updateQueue,u=r.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var f=null,p=null;if(o=o.firstBaseUpdate,o!==null){do{var E={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};p===null?f=p=E:p=p.next=E,o=o.next}while(o!==null);p===null?f=p=s:p=p.next=s}else f=p=s;o={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:p,shared:u.shared,callbacks:u.callbacks},r.updateQueue=o;return}r=o.lastBaseUpdate,r===null?o.firstBaseUpdate=s:r.next=s,o.lastBaseUpdate=s}var ym=!1;function Xl(){if(ym){var r=go;if(r!==null)throw r}}function Wl(r,s,o,u){ym=!1;var f=r.updateQueue;qi=!1;var p=f.firstBaseUpdate,E=f.lastBaseUpdate,b=f.shared.pending;if(b!==null){f.shared.pending=null;var C=b,H=C.next;C.next=null,E===null?p=H:E.next=H,E=C;var W=r.alternate;W!==null&&(W=W.updateQueue,b=W.lastBaseUpdate,b!==E&&(b===null?W.firstBaseUpdate=H:b.next=H,W.lastBaseUpdate=C))}if(p!==null){var J=f.baseState;E=0,W=H=C=null,b=p;do{var G=b.lane&-536870913,K=G!==b.lane;if(K?(Be&G)===G:(u&G)===G){G!==0&&G===po&&(ym=!0),W!==null&&(W=W.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});e:{var we=r,ve=b;G=s;var nt=o;switch(ve.tag){case 1:if(we=ve.payload,typeof we=="function"){J=we.call(nt,J,G);break e}J=we;break e;case 3:we.flags=we.flags&-65537|128;case 0:if(we=ve.payload,G=typeof we=="function"?we.call(nt,J,G):we,G==null)break e;J=_({},J,G);break e;case 2:qi=!0}}G=b.callback,G!==null&&(r.flags|=64,K&&(r.flags|=8192),K=f.callbacks,K===null?f.callbacks=[G]:K.push(G))}else K={lane:G,tag:b.tag,payload:b.payload,callback:b.callback,next:null},W===null?(H=W=K,C=J):W=W.next=K,E|=G;if(b=b.next,b===null){if(b=f.shared.pending,b===null)break;K=b,b=K.next,K.next=null,f.lastBaseUpdate=K,f.shared.pending=null}}while(!0);W===null&&(C=J),f.baseState=C,f.firstBaseUpdate=H,f.lastBaseUpdate=W,p===null&&(f.shared.lanes=0),Ji|=E,r.lanes=E,r.memoizedState=J}}function rv(r,s){if(typeof r!="function")throw Error(i(191,r));r.call(s)}function iv(r,s){var o=r.callbacks;if(o!==null)for(r.callbacks=null,r=0;r<o.length;r++)rv(o[r],s)}var yo=te(null),dh=te(0);function sv(r,s){r=Ti,re(dh,r),re(yo,s),Ti=r|s.baseLanes}function _m(){re(dh,Ti),re(yo,yo.current)}function vm(){Ti=dh.current,le(yo),le(dh)}var $i=0,Ne=null,et=null,Ct=null,mh=!1,_o=!1,ya=!1,ph=0,Zl=0,vo=null,NI=0;function At(){throw Error(i(321))}function Em(r,s){if(s===null)return!1;for(var o=0;o<s.length&&o<r.length;o++)if(!Cn(r[o],s[o]))return!1;return!0}function Tm(r,s,o,u,f,p){return $i=p,Ne=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,X.H=r===null||r.memoizedState===null?Fv:qv,ya=!1,p=o(u,f),ya=!1,_o&&(p=ov(s,o,u,f)),av(r),p}function av(r){X.H=Th;var s=et!==null&&et.next!==null;if($i=0,Ct=et=Ne=null,mh=!1,Zl=0,vo=null,s)throw Error(i(300));r===null||qt||(r=r.dependencies,r!==null&&lh(r)&&(qt=!0))}function ov(r,s,o,u){Ne=r;var f=0;do{if(_o&&(vo=null),Zl=0,_o=!1,25<=f)throw Error(i(301));if(f+=1,Ct=et=null,r.updateQueue!=null){var p=r.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}X.H=kI,p=s(o,u)}while(_o);return p}function DI(){var r=X.H,s=r.useState()[0];return s=typeof s.then=="function"?Jl(s):s,r=r.useState()[0],(et!==null?et.memoizedState:null)!==r&&(Ne.flags|=1024),s}function Am(){var r=ph!==0;return ph=0,r}function bm(r,s,o){s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~o}function wm(r){if(mh){for(r=r.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}mh=!1}$i=0,Ct=et=Ne=null,_o=!1,Zl=ph=0,vo=null}function En(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ct===null?Ne.memoizedState=Ct=r:Ct=Ct.next=r,Ct}function Nt(){if(et===null){var r=Ne.alternate;r=r!==null?r.memoizedState:null}else r=et.next;var s=Ct===null?Ne.memoizedState:Ct.next;if(s!==null)Ct=s,et=r;else{if(r===null)throw Ne.alternate===null?Error(i(467)):Error(i(310));et=r,r={memoizedState:et.memoizedState,baseState:et.baseState,baseQueue:et.baseQueue,queue:et.queue,next:null},Ct===null?Ne.memoizedState=Ct=r:Ct=Ct.next=r}return Ct}function Sm(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Jl(r){var s=Zl;return Zl+=1,vo===null&&(vo=[]),r=ev(vo,r,s),s=Ne,(Ct===null?s.memoizedState:Ct.next)===null&&(s=s.alternate,X.H=s===null||s.memoizedState===null?Fv:qv),r}function gh(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return Jl(r);if(r.$$typeof===ne)return an(r)}throw Error(i(438,String(r)))}function Rm(r){var s=null,o=Ne.updateQueue;if(o!==null&&(s=o.memoCache),s==null){var u=Ne.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(f){return f.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),o===null&&(o=Sm(),Ne.updateQueue=o),o.memoCache=s,o=s.data[s.index],o===void 0)for(o=s.data[s.index]=Array(r),u=0;u<r;u++)o[u]=O;return s.index++,o}function pi(r,s){return typeof s=="function"?s(r):s}function yh(r){var s=Nt();return Im(s,et,r)}function Im(r,s,o){var u=r.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=o;var f=r.baseQueue,p=u.pending;if(p!==null){if(f!==null){var E=f.next;f.next=p.next,p.next=E}s.baseQueue=f=p,u.pending=null}if(p=r.baseState,f===null)r.memoizedState=p;else{s=f.next;var b=E=null,C=null,H=s,W=!1;do{var J=H.lane&-536870913;if(J!==H.lane?(Be&J)===J:($i&J)===J){var G=H.revertLane;if(G===0)C!==null&&(C=C.next={lane:0,revertLane:0,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null}),J===po&&(W=!0);else if(($i&G)===G){H=H.next,G===po&&(W=!0);continue}else J={lane:0,revertLane:H.revertLane,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},C===null?(b=C=J,E=p):C=C.next=J,Ne.lanes|=G,Ji|=G;J=H.action,ya&&o(p,J),p=H.hasEagerState?H.eagerState:o(p,J)}else G={lane:J,revertLane:H.revertLane,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},C===null?(b=C=G,E=p):C=C.next=G,Ne.lanes|=J,Ji|=J;H=H.next}while(H!==null&&H!==s);if(C===null?E=p:C.next=b,!Cn(p,r.memoizedState)&&(qt=!0,W&&(o=go,o!==null)))throw o;r.memoizedState=p,r.baseState=E,r.baseQueue=C,u.lastRenderedState=p}return f===null&&(u.lanes=0),[r.memoizedState,u.dispatch]}function Cm(r){var s=Nt(),o=s.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=r;var u=o.dispatch,f=o.pending,p=s.memoizedState;if(f!==null){o.pending=null;var E=f=f.next;do p=r(p,E.action),E=E.next;while(E!==f);Cn(p,s.memoizedState)||(qt=!0),s.memoizedState=p,s.baseQueue===null&&(s.baseState=p),o.lastRenderedState=p}return[p,u]}function lv(r,s,o){var u=Ne,f=Nt(),p=$e;if(p){if(o===void 0)throw Error(i(407));o=o()}else o=s();var E=!Cn((et||f).memoizedState,o);E&&(f.memoizedState=o,qt=!0),f=f.queue;var b=hv.bind(null,u,f,r);if(eu(2048,8,b,[r]),f.getSnapshot!==s||E||Ct!==null&&Ct.memoizedState.tag&1){if(u.flags|=2048,Eo(9,_h(),cv.bind(null,u,f,o,s),null),at===null)throw Error(i(349));p||($i&124)!==0||uv(u,s,o)}return o}function uv(r,s,o){r.flags|=16384,r={getSnapshot:s,value:o},s=Ne.updateQueue,s===null?(s=Sm(),Ne.updateQueue=s,s.stores=[r]):(o=s.stores,o===null?s.stores=[r]:o.push(r))}function cv(r,s,o,u){s.value=o,s.getSnapshot=u,fv(s)&&dv(r)}function hv(r,s,o){return o(function(){fv(s)&&dv(r)})}function fv(r){var s=r.getSnapshot;r=r.value;try{var o=s();return!Cn(r,o)}catch{return!0}}function dv(r){var s=co(r,2);s!==null&&xn(s,r,2)}function Nm(r){var s=En();if(typeof r=="function"){var o=r;if(r=o(),ya){Rn(!0);try{o()}finally{Rn(!1)}}}return s.memoizedState=s.baseState=r,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:pi,lastRenderedState:r},s}function mv(r,s,o,u){return r.baseState=o,Im(r,et,typeof u=="function"?u:pi)}function OI(r,s,o,u,f){if(Eh(r))throw Error(i(485));if(r=s.action,r!==null){var p={payload:f,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){p.listeners.push(E)}};X.T!==null?o(!0):p.isTransition=!1,u(p),o=s.pending,o===null?(p.next=s.pending=p,pv(s,p)):(p.next=o.next,s.pending=o.next=p)}}function pv(r,s){var o=s.action,u=s.payload,f=r.state;if(s.isTransition){var p=X.T,E={};X.T=E;try{var b=o(f,u),C=X.S;C!==null&&C(E,b),gv(r,s,b)}catch(H){Dm(r,s,H)}finally{X.T=p}}else try{p=o(f,u),gv(r,s,p)}catch(H){Dm(r,s,H)}}function gv(r,s,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){yv(r,s,u)},function(u){return Dm(r,s,u)}):yv(r,s,o)}function yv(r,s,o){s.status="fulfilled",s.value=o,_v(s),r.state=o,s=r.pending,s!==null&&(o=s.next,o===s?r.pending=null:(o=o.next,s.next=o,pv(r,o)))}function Dm(r,s,o){var u=r.pending;if(r.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=o,_v(s),s=s.next;while(s!==u)}r.action=null}function _v(r){r=r.listeners;for(var s=0;s<r.length;s++)(0,r[s])()}function vv(r,s){return s}function Ev(r,s){if($e){var o=at.formState;if(o!==null){e:{var u=Ne;if($e){if(vt){t:{for(var f=vt,p=Or;f.nodeType!==8;){if(!p){f=null;break t}if(f=cr(f.nextSibling),f===null){f=null;break t}}p=f.data,f=p==="F!"||p==="F"?f:null}if(f){vt=cr(f.nextSibling),u=f.data==="F!";break e}}da(u)}u=!1}u&&(s=o[0])}}return o=En(),o.memoizedState=o.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:vv,lastRenderedState:s},o.queue=u,o=zv.bind(null,Ne,u),u.dispatch=o,u=Nm(!1),p=Vm.bind(null,Ne,!1,u.queue),u=En(),f={state:s,dispatch:null,action:r,pending:null},u.queue=f,o=OI.bind(null,Ne,f,p,o),f.dispatch=o,u.memoizedState=r,[s,o,!1]}function Tv(r){var s=Nt();return Av(s,et,r)}function Av(r,s,o){if(s=Im(r,s,vv)[0],r=yh(pi)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var u=Jl(s)}catch(E){throw E===Kl?hh:E}else u=s;s=Nt();var f=s.queue,p=f.dispatch;return o!==s.memoizedState&&(Ne.flags|=2048,Eo(9,_h(),MI.bind(null,f,o),null)),[u,p,r]}function MI(r,s){r.action=s}function bv(r){var s=Nt(),o=et;if(o!==null)return Av(s,o,r);Nt(),s=s.memoizedState,o=Nt();var u=o.queue.dispatch;return o.memoizedState=r,[s,u,!1]}function Eo(r,s,o,u){return r={tag:r,create:o,deps:u,inst:s,next:null},s=Ne.updateQueue,s===null&&(s=Sm(),Ne.updateQueue=s),o=s.lastEffect,o===null?s.lastEffect=r.next=r:(u=o.next,o.next=r,r.next=u,s.lastEffect=r),r}function _h(){return{destroy:void 0,resource:void 0}}function wv(){return Nt().memoizedState}function vh(r,s,o,u){var f=En();u=u===void 0?null:u,Ne.flags|=r,f.memoizedState=Eo(1|s,_h(),o,u)}function eu(r,s,o,u){var f=Nt();u=u===void 0?null:u;var p=f.memoizedState.inst;et!==null&&u!==null&&Em(u,et.memoizedState.deps)?f.memoizedState=Eo(s,p,o,u):(Ne.flags|=r,f.memoizedState=Eo(1|s,p,o,u))}function Sv(r,s){vh(8390656,8,r,s)}function Rv(r,s){eu(2048,8,r,s)}function Iv(r,s){return eu(4,2,r,s)}function Cv(r,s){return eu(4,4,r,s)}function Nv(r,s){if(typeof s=="function"){r=r();var o=s(r);return function(){typeof o=="function"?o():s(null)}}if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function Dv(r,s,o){o=o!=null?o.concat([r]):null,eu(4,4,Nv.bind(null,s,r),o)}function Om(){}function Ov(r,s){var o=Nt();s=s===void 0?null:s;var u=o.memoizedState;return s!==null&&Em(s,u[1])?u[0]:(o.memoizedState=[r,s],r)}function Mv(r,s){var o=Nt();s=s===void 0?null:s;var u=o.memoizedState;if(s!==null&&Em(s,u[1]))return u[0];if(u=r(),ya){Rn(!0);try{r()}finally{Rn(!1)}}return o.memoizedState=[u,s],u}function Mm(r,s,o){return o===void 0||($i&1073741824)!==0?r.memoizedState=s:(r.memoizedState=o,r=VE(),Ne.lanes|=r,Ji|=r,o)}function Pv(r,s,o,u){return Cn(o,s)?o:yo.current!==null?(r=Mm(r,o,u),Cn(r,s)||(qt=!0),r):($i&42)===0?(qt=!0,r.memoizedState=o):(r=VE(),Ne.lanes|=r,Ji|=r,s)}function xv(r,s,o,u,f){var p=oe.p;oe.p=p!==0&&8>p?p:8;var E=X.T,b={};X.T=b,Vm(r,!1,s,o);try{var C=f(),H=X.S;if(H!==null&&H(b,C),C!==null&&typeof C=="object"&&typeof C.then=="function"){var W=CI(C,u);tu(r,s,W,Pn(r))}else tu(r,s,u,Pn(r))}catch(J){tu(r,s,{then:function(){},status:"rejected",reason:J},Pn())}finally{oe.p=p,X.T=E}}function PI(){}function Pm(r,s,o,u){if(r.tag!==5)throw Error(i(476));var f=Vv(r).queue;xv(r,f,s,ge,o===null?PI:function(){return kv(r),o(u)})}function Vv(r){var s=r.memoizedState;if(s!==null)return s;s={memoizedState:ge,baseState:ge,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:pi,lastRenderedState:ge},next:null};var o={};return s.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:pi,lastRenderedState:o},next:null},r.memoizedState=s,r=r.alternate,r!==null&&(r.memoizedState=s),s}function kv(r){var s=Vv(r).next.queue;tu(r,s,{},Pn())}function xm(){return an(vu)}function Lv(){return Nt().memoizedState}function Uv(){return Nt().memoizedState}function xI(r){for(var s=r.return;s!==null;){switch(s.tag){case 24:case 3:var o=Pn();r=Hi(o);var u=Gi(s,r,o);u!==null&&(xn(u,s,o),Yl(u,s,o)),s={cache:cm()},r.payload=s;return}s=s.return}}function VI(r,s,o){var u=Pn();o={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},Eh(r)?jv(s,o):(o=em(r,s,o,u),o!==null&&(xn(o,r,u),Bv(o,s,u)))}function zv(r,s,o){var u=Pn();tu(r,s,o,u)}function tu(r,s,o,u){var f={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(Eh(r))jv(s,f);else{var p=r.alternate;if(r.lanes===0&&(p===null||p.lanes===0)&&(p=s.lastRenderedReducer,p!==null))try{var E=s.lastRenderedState,b=p(E,o);if(f.hasEagerState=!0,f.eagerState=b,Cn(b,E))return rh(r,s,f,0),at===null&&nh(),!1}catch{}finally{}if(o=em(r,s,f,u),o!==null)return xn(o,r,u),Bv(o,s,u),!0}return!1}function Vm(r,s,o,u){if(u={lane:2,revertLane:dp(),action:u,hasEagerState:!1,eagerState:null,next:null},Eh(r)){if(s)throw Error(i(479))}else s=em(r,o,u,2),s!==null&&xn(s,r,2)}function Eh(r){var s=r.alternate;return r===Ne||s!==null&&s===Ne}function jv(r,s){_o=mh=!0;var o=r.pending;o===null?s.next=s:(s.next=o.next,o.next=s),r.pending=s}function Bv(r,s,o){if((o&4194048)!==0){var u=s.lanes;u&=r.pendingLanes,o|=u,s.lanes=o,bl(r,o)}}var Th={readContext:an,use:gh,useCallback:At,useContext:At,useEffect:At,useImperativeHandle:At,useLayoutEffect:At,useInsertionEffect:At,useMemo:At,useReducer:At,useRef:At,useState:At,useDebugValue:At,useDeferredValue:At,useTransition:At,useSyncExternalStore:At,useId:At,useHostTransitionStatus:At,useFormState:At,useActionState:At,useOptimistic:At,useMemoCache:At,useCacheRefresh:At},Fv={readContext:an,use:gh,useCallback:function(r,s){return En().memoizedState=[r,s===void 0?null:s],r},useContext:an,useEffect:Sv,useImperativeHandle:function(r,s,o){o=o!=null?o.concat([r]):null,vh(4194308,4,Nv.bind(null,s,r),o)},useLayoutEffect:function(r,s){return vh(4194308,4,r,s)},useInsertionEffect:function(r,s){vh(4,2,r,s)},useMemo:function(r,s){var o=En();s=s===void 0?null:s;var u=r();if(ya){Rn(!0);try{r()}finally{Rn(!1)}}return o.memoizedState=[u,s],u},useReducer:function(r,s,o){var u=En();if(o!==void 0){var f=o(s);if(ya){Rn(!0);try{o(s)}finally{Rn(!1)}}}else f=s;return u.memoizedState=u.baseState=f,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:f},u.queue=r,r=r.dispatch=VI.bind(null,Ne,r),[u.memoizedState,r]},useRef:function(r){var s=En();return r={current:r},s.memoizedState=r},useState:function(r){r=Nm(r);var s=r.queue,o=zv.bind(null,Ne,s);return s.dispatch=o,[r.memoizedState,o]},useDebugValue:Om,useDeferredValue:function(r,s){var o=En();return Mm(o,r,s)},useTransition:function(){var r=Nm(!1);return r=xv.bind(null,Ne,r.queue,!0,!1),En().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,s,o){var u=Ne,f=En();if($e){if(o===void 0)throw Error(i(407));o=o()}else{if(o=s(),at===null)throw Error(i(349));(Be&124)!==0||uv(u,s,o)}f.memoizedState=o;var p={value:o,getSnapshot:s};return f.queue=p,Sv(hv.bind(null,u,p,r),[r]),u.flags|=2048,Eo(9,_h(),cv.bind(null,u,p,o,s),null),o},useId:function(){var r=En(),s=at.identifierPrefix;if($e){var o=fi,u=hi;o=(u&~(1<<32-sn(u)-1)).toString(32)+o,s="«"+s+"R"+o,o=ph++,0<o&&(s+="H"+o.toString(32)),s+="»"}else o=NI++,s="«"+s+"r"+o.toString(32)+"»";return r.memoizedState=s},useHostTransitionStatus:xm,useFormState:Ev,useActionState:Ev,useOptimistic:function(r){var s=En();s.memoizedState=s.baseState=r;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=o,s=Vm.bind(null,Ne,!0,o),o.dispatch=s,[r,s]},useMemoCache:Rm,useCacheRefresh:function(){return En().memoizedState=xI.bind(null,Ne)}},qv={readContext:an,use:gh,useCallback:Ov,useContext:an,useEffect:Rv,useImperativeHandle:Dv,useInsertionEffect:Iv,useLayoutEffect:Cv,useMemo:Mv,useReducer:yh,useRef:wv,useState:function(){return yh(pi)},useDebugValue:Om,useDeferredValue:function(r,s){var o=Nt();return Pv(o,et.memoizedState,r,s)},useTransition:function(){var r=yh(pi)[0],s=Nt().memoizedState;return[typeof r=="boolean"?r:Jl(r),s]},useSyncExternalStore:lv,useId:Lv,useHostTransitionStatus:xm,useFormState:Tv,useActionState:Tv,useOptimistic:function(r,s){var o=Nt();return mv(o,et,r,s)},useMemoCache:Rm,useCacheRefresh:Uv},kI={readContext:an,use:gh,useCallback:Ov,useContext:an,useEffect:Rv,useImperativeHandle:Dv,useInsertionEffect:Iv,useLayoutEffect:Cv,useMemo:Mv,useReducer:Cm,useRef:wv,useState:function(){return Cm(pi)},useDebugValue:Om,useDeferredValue:function(r,s){var o=Nt();return et===null?Mm(o,r,s):Pv(o,et.memoizedState,r,s)},useTransition:function(){var r=Cm(pi)[0],s=Nt().memoizedState;return[typeof r=="boolean"?r:Jl(r),s]},useSyncExternalStore:lv,useId:Lv,useHostTransitionStatus:xm,useFormState:bv,useActionState:bv,useOptimistic:function(r,s){var o=Nt();return et!==null?mv(o,et,r,s):(o.baseState=r,[r,o.queue.dispatch])},useMemoCache:Rm,useCacheRefresh:Uv},To=null,nu=0;function Ah(r){var s=nu;return nu+=1,To===null&&(To=[]),ev(To,r,s)}function ru(r,s){s=s.props.ref,r.ref=s!==void 0?s:null}function bh(r,s){throw s.$$typeof===T?Error(i(525)):(r=Object.prototype.toString.call(s),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r)))}function Hv(r){var s=r._init;return s(r._payload)}function Gv(r){function s(L,x){if(r){var F=L.deletions;F===null?(L.deletions=[x],L.flags|=16):F.push(x)}}function o(L,x){if(!r)return null;for(;x!==null;)s(L,x),x=x.sibling;return null}function u(L){for(var x=new Map;L!==null;)L.key!==null?x.set(L.key,L):x.set(L.index,L),L=L.sibling;return x}function f(L,x){return L=ci(L,x),L.index=0,L.sibling=null,L}function p(L,x,F){return L.index=F,r?(F=L.alternate,F!==null?(F=F.index,F<x?(L.flags|=67108866,x):F):(L.flags|=67108866,x)):(L.flags|=1048576,x)}function E(L){return r&&L.alternate===null&&(L.flags|=67108866),L}function b(L,x,F,Z){return x===null||x.tag!==6?(x=nm(F,L.mode,Z),x.return=L,x):(x=f(x,F),x.return=L,x)}function C(L,x,F,Z){var fe=F.type;return fe===N?W(L,x,F.props.children,Z,F.key):x!==null&&(x.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===I&&Hv(fe)===x.type)?(x=f(x,F.props),ru(x,F),x.return=L,x):(x=sh(F.type,F.key,F.props,null,L.mode,Z),ru(x,F),x.return=L,x)}function H(L,x,F,Z){return x===null||x.tag!==4||x.stateNode.containerInfo!==F.containerInfo||x.stateNode.implementation!==F.implementation?(x=rm(F,L.mode,Z),x.return=L,x):(x=f(x,F.children||[]),x.return=L,x)}function W(L,x,F,Z,fe){return x===null||x.tag!==7?(x=ua(F,L.mode,Z,fe),x.return=L,x):(x=f(x,F),x.return=L,x)}function J(L,x,F){if(typeof x=="string"&&x!==""||typeof x=="number"||typeof x=="bigint")return x=nm(""+x,L.mode,F),x.return=L,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case A:return F=sh(x.type,x.key,x.props,null,L.mode,F),ru(F,x),F.return=L,F;case S:return x=rm(x,L.mode,F),x.return=L,x;case I:var Z=x._init;return x=Z(x._payload),J(L,x,F)}if(yt(x)||j(x))return x=ua(x,L.mode,F,null),x.return=L,x;if(typeof x.then=="function")return J(L,Ah(x),F);if(x.$$typeof===ne)return J(L,uh(L,x),F);bh(L,x)}return null}function G(L,x,F,Z){var fe=x!==null?x.key:null;if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return fe!==null?null:b(L,x,""+F,Z);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case A:return F.key===fe?C(L,x,F,Z):null;case S:return F.key===fe?H(L,x,F,Z):null;case I:return fe=F._init,F=fe(F._payload),G(L,x,F,Z)}if(yt(F)||j(F))return fe!==null?null:W(L,x,F,Z,null);if(typeof F.then=="function")return G(L,x,Ah(F),Z);if(F.$$typeof===ne)return G(L,x,uh(L,F),Z);bh(L,F)}return null}function K(L,x,F,Z,fe){if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return L=L.get(F)||null,b(x,L,""+Z,fe);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case A:return L=L.get(Z.key===null?F:Z.key)||null,C(x,L,Z,fe);case S:return L=L.get(Z.key===null?F:Z.key)||null,H(x,L,Z,fe);case I:var Me=Z._init;return Z=Me(Z._payload),K(L,x,F,Z,fe)}if(yt(Z)||j(Z))return L=L.get(F)||null,W(x,L,Z,fe,null);if(typeof Z.then=="function")return K(L,x,F,Ah(Z),fe);if(Z.$$typeof===ne)return K(L,x,F,uh(x,Z),fe);bh(x,Z)}return null}function we(L,x,F,Z){for(var fe=null,Me=null,pe=x,Ee=x=0,Gt=null;pe!==null&&Ee<F.length;Ee++){pe.index>Ee?(Gt=pe,pe=null):Gt=pe.sibling;var He=G(L,pe,F[Ee],Z);if(He===null){pe===null&&(pe=Gt);break}r&&pe&&He.alternate===null&&s(L,pe),x=p(He,x,Ee),Me===null?fe=He:Me.sibling=He,Me=He,pe=Gt}if(Ee===F.length)return o(L,pe),$e&&ha(L,Ee),fe;if(pe===null){for(;Ee<F.length;Ee++)pe=J(L,F[Ee],Z),pe!==null&&(x=p(pe,x,Ee),Me===null?fe=pe:Me.sibling=pe,Me=pe);return $e&&ha(L,Ee),fe}for(pe=u(pe);Ee<F.length;Ee++)Gt=K(pe,L,Ee,F[Ee],Z),Gt!==null&&(r&&Gt.alternate!==null&&pe.delete(Gt.key===null?Ee:Gt.key),x=p(Gt,x,Ee),Me===null?fe=Gt:Me.sibling=Gt,Me=Gt);return r&&pe.forEach(function(ls){return s(L,ls)}),$e&&ha(L,Ee),fe}function ve(L,x,F,Z){if(F==null)throw Error(i(151));for(var fe=null,Me=null,pe=x,Ee=x=0,Gt=null,He=F.next();pe!==null&&!He.done;Ee++,He=F.next()){pe.index>Ee?(Gt=pe,pe=null):Gt=pe.sibling;var ls=G(L,pe,He.value,Z);if(ls===null){pe===null&&(pe=Gt);break}r&&pe&&ls.alternate===null&&s(L,pe),x=p(ls,x,Ee),Me===null?fe=ls:Me.sibling=ls,Me=ls,pe=Gt}if(He.done)return o(L,pe),$e&&ha(L,Ee),fe;if(pe===null){for(;!He.done;Ee++,He=F.next())He=J(L,He.value,Z),He!==null&&(x=p(He,x,Ee),Me===null?fe=He:Me.sibling=He,Me=He);return $e&&ha(L,Ee),fe}for(pe=u(pe);!He.done;Ee++,He=F.next())He=K(pe,L,Ee,He.value,Z),He!==null&&(r&&He.alternate!==null&&pe.delete(He.key===null?Ee:He.key),x=p(He,x,Ee),Me===null?fe=He:Me.sibling=He,Me=He);return r&&pe.forEach(function(L1){return s(L,L1)}),$e&&ha(L,Ee),fe}function nt(L,x,F,Z){if(typeof F=="object"&&F!==null&&F.type===N&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case A:e:{for(var fe=F.key;x!==null;){if(x.key===fe){if(fe=F.type,fe===N){if(x.tag===7){o(L,x.sibling),Z=f(x,F.props.children),Z.return=L,L=Z;break e}}else if(x.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===I&&Hv(fe)===x.type){o(L,x.sibling),Z=f(x,F.props),ru(Z,F),Z.return=L,L=Z;break e}o(L,x);break}else s(L,x);x=x.sibling}F.type===N?(Z=ua(F.props.children,L.mode,Z,F.key),Z.return=L,L=Z):(Z=sh(F.type,F.key,F.props,null,L.mode,Z),ru(Z,F),Z.return=L,L=Z)}return E(L);case S:e:{for(fe=F.key;x!==null;){if(x.key===fe)if(x.tag===4&&x.stateNode.containerInfo===F.containerInfo&&x.stateNode.implementation===F.implementation){o(L,x.sibling),Z=f(x,F.children||[]),Z.return=L,L=Z;break e}else{o(L,x);break}else s(L,x);x=x.sibling}Z=rm(F,L.mode,Z),Z.return=L,L=Z}return E(L);case I:return fe=F._init,F=fe(F._payload),nt(L,x,F,Z)}if(yt(F))return we(L,x,F,Z);if(j(F)){if(fe=j(F),typeof fe!="function")throw Error(i(150));return F=fe.call(F),ve(L,x,F,Z)}if(typeof F.then=="function")return nt(L,x,Ah(F),Z);if(F.$$typeof===ne)return nt(L,x,uh(L,F),Z);bh(L,F)}return typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint"?(F=""+F,x!==null&&x.tag===6?(o(L,x.sibling),Z=f(x,F),Z.return=L,L=Z):(o(L,x),Z=nm(F,L.mode,Z),Z.return=L,L=Z),E(L)):o(L,x)}return function(L,x,F,Z){try{nu=0;var fe=nt(L,x,F,Z);return To=null,fe}catch(pe){if(pe===Kl||pe===hh)throw pe;var Me=Nn(29,pe,null,L.mode);return Me.lanes=Z,Me.return=L,Me}finally{}}}var Ao=Gv(!0),$v=Gv(!1),Wn=te(null),Mr=null;function Ki(r){var s=r.alternate;re(Lt,Lt.current&1),re(Wn,r),Mr===null&&(s===null||yo.current!==null||s.memoizedState!==null)&&(Mr=r)}function Kv(r){if(r.tag===22){if(re(Lt,Lt.current),re(Wn,r),Mr===null){var s=r.alternate;s!==null&&s.memoizedState!==null&&(Mr=r)}}else Qi()}function Qi(){re(Lt,Lt.current),re(Wn,Wn.current)}function gi(r){le(Wn),Mr===r&&(Mr=null),le(Lt)}var Lt=te(0);function wh(r){for(var s=r;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||Sp(o)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function km(r,s,o,u){s=r.memoizedState,o=o(u,s),o=o==null?s:_({},s,o),r.memoizedState=o,r.lanes===0&&(r.updateQueue.baseState=o)}var Lm={enqueueSetState:function(r,s,o){r=r._reactInternals;var u=Pn(),f=Hi(u);f.payload=s,o!=null&&(f.callback=o),s=Gi(r,f,u),s!==null&&(xn(s,r,u),Yl(s,r,u))},enqueueReplaceState:function(r,s,o){r=r._reactInternals;var u=Pn(),f=Hi(u);f.tag=1,f.payload=s,o!=null&&(f.callback=o),s=Gi(r,f,u),s!==null&&(xn(s,r,u),Yl(s,r,u))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var o=Pn(),u=Hi(o);u.tag=2,s!=null&&(u.callback=s),s=Gi(r,u,o),s!==null&&(xn(s,r,o),Yl(s,r,o))}};function Qv(r,s,o,u,f,p,E){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(u,p,E):s.prototype&&s.prototype.isPureReactComponent?!zl(o,u)||!zl(f,p):!0}function Yv(r,s,o,u){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,u),s.state!==r&&Lm.enqueueReplaceState(s,s.state,null)}function _a(r,s){var o=s;if("ref"in s){o={};for(var u in s)u!=="ref"&&(o[u]=s[u])}if(r=r.defaultProps){o===s&&(o=_({},o));for(var f in r)o[f]===void 0&&(o[f]=r[f])}return o}var Sh=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)};function Xv(r){Sh(r)}function Wv(r){console.error(r)}function Zv(r){Sh(r)}function Rh(r,s){try{var o=r.onUncaughtError;o(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function Jv(r,s,o){try{var u=r.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Um(r,s,o){return o=Hi(o),o.tag=3,o.payload={element:null},o.callback=function(){Rh(r,s)},o}function eE(r){return r=Hi(r),r.tag=3,r}function tE(r,s,o,u){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var p=u.value;r.payload=function(){return f(p)},r.callback=function(){Jv(s,o,u)}}var E=o.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(r.callback=function(){Jv(s,o,u),typeof f!="function"&&(es===null?es=new Set([this]):es.add(this));var b=u.stack;this.componentDidCatch(u.value,{componentStack:b!==null?b:""})})}function LI(r,s,o,u,f){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=o.alternate,s!==null&&Hl(s,o,f,!0),o=Wn.current,o!==null){switch(o.tag){case 13:return Mr===null?lp():o.alternate===null&&Et===0&&(Et=3),o.flags&=-257,o.flags|=65536,o.lanes=f,u===dm?o.flags|=16384:(s=o.updateQueue,s===null?o.updateQueue=new Set([u]):s.add(u),cp(r,u,f)),!1;case 22:return o.flags|=65536,u===dm?o.flags|=16384:(s=o.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=s):(o=s.retryQueue,o===null?s.retryQueue=new Set([u]):o.add(u)),cp(r,u,f)),!1}throw Error(i(435,o.tag))}return cp(r,u,f),lp(),!1}if($e)return s=Wn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=f,u!==am&&(r=Error(i(422),{cause:u}),ql(Kn(r,o)))):(u!==am&&(s=Error(i(423),{cause:u}),ql(Kn(s,o))),r=r.current.alternate,r.flags|=65536,f&=-f,r.lanes|=f,u=Kn(u,o),f=Um(r.stateNode,u,f),gm(r,f),Et!==4&&(Et=2)),!1;var p=Error(i(520),{cause:u});if(p=Kn(p,o),cu===null?cu=[p]:cu.push(p),Et!==4&&(Et=2),s===null)return!0;u=Kn(u,o),o=s;do{switch(o.tag){case 3:return o.flags|=65536,r=f&-f,o.lanes|=r,r=Um(o.stateNode,u,r),gm(o,r),!1;case 1:if(s=o.type,p=o.stateNode,(o.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(es===null||!es.has(p))))return o.flags|=65536,f&=-f,o.lanes|=f,f=eE(f),tE(f,r,o,u),gm(o,f),!1}o=o.return}while(o!==null);return!1}var nE=Error(i(461)),qt=!1;function Wt(r,s,o,u){s.child=r===null?$v(s,null,o,u):Ao(s,r.child,o,u)}function rE(r,s,o,u,f){o=o.render;var p=s.ref;if("ref"in u){var E={};for(var b in u)b!=="ref"&&(E[b]=u[b])}else E=u;return pa(s),u=Tm(r,s,o,E,p,f),b=Am(),r!==null&&!qt?(bm(r,s,f),yi(r,s,f)):($e&&b&&im(s),s.flags|=1,Wt(r,s,u,f),s.child)}function iE(r,s,o,u,f){if(r===null){var p=o.type;return typeof p=="function"&&!tm(p)&&p.defaultProps===void 0&&o.compare===null?(s.tag=15,s.type=p,sE(r,s,p,u,f)):(r=sh(o.type,null,u,s,s.mode,f),r.ref=s.ref,r.return=s,s.child=r)}if(p=r.child,!$m(r,f)){var E=p.memoizedProps;if(o=o.compare,o=o!==null?o:zl,o(E,u)&&r.ref===s.ref)return yi(r,s,f)}return s.flags|=1,r=ci(p,u),r.ref=s.ref,r.return=s,s.child=r}function sE(r,s,o,u,f){if(r!==null){var p=r.memoizedProps;if(zl(p,u)&&r.ref===s.ref)if(qt=!1,s.pendingProps=u=p,$m(r,f))(r.flags&131072)!==0&&(qt=!0);else return s.lanes=r.lanes,yi(r,s,f)}return zm(r,s,o,u,f)}function aE(r,s,o){var u=s.pendingProps,f=u.children,p=r!==null?r.memoizedState:null;if(u.mode==="hidden"){if((s.flags&128)!==0){if(u=p!==null?p.baseLanes|o:o,r!==null){for(f=s.child=r.child,p=0;f!==null;)p=p|f.lanes|f.childLanes,f=f.sibling;s.childLanes=p&~u}else s.childLanes=0,s.child=null;return oE(r,s,u,o)}if((o&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},r!==null&&ch(s,p!==null?p.cachePool:null),p!==null?sv(s,p):_m(),Kv(s);else return s.lanes=s.childLanes=536870912,oE(r,s,p!==null?p.baseLanes|o:o,o)}else p!==null?(ch(s,p.cachePool),sv(s,p),Qi(),s.memoizedState=null):(r!==null&&ch(s,null),_m(),Qi());return Wt(r,s,f,o),s.child}function oE(r,s,o,u){var f=fm();return f=f===null?null:{parent:kt._currentValue,pool:f},s.memoizedState={baseLanes:o,cachePool:f},r!==null&&ch(s,null),_m(),Kv(s),r!==null&&Hl(r,s,u,!0),null}function Ih(r,s){var o=s.ref;if(o===null)r!==null&&r.ref!==null&&(s.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(i(284));(r===null||r.ref!==o)&&(s.flags|=4194816)}}function zm(r,s,o,u,f){return pa(s),o=Tm(r,s,o,u,void 0,f),u=Am(),r!==null&&!qt?(bm(r,s,f),yi(r,s,f)):($e&&u&&im(s),s.flags|=1,Wt(r,s,o,f),s.child)}function lE(r,s,o,u,f,p){return pa(s),s.updateQueue=null,o=ov(s,u,o,f),av(r),u=Am(),r!==null&&!qt?(bm(r,s,p),yi(r,s,p)):($e&&u&&im(s),s.flags|=1,Wt(r,s,o,p),s.child)}function uE(r,s,o,u,f){if(pa(s),s.stateNode===null){var p=ho,E=o.contextType;typeof E=="object"&&E!==null&&(p=an(E)),p=new o(u,p),s.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=Lm,s.stateNode=p,p._reactInternals=s,p=s.stateNode,p.props=u,p.state=s.memoizedState,p.refs={},mm(s),E=o.contextType,p.context=typeof E=="object"&&E!==null?an(E):ho,p.state=s.memoizedState,E=o.getDerivedStateFromProps,typeof E=="function"&&(km(s,o,E,u),p.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(E=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),E!==p.state&&Lm.enqueueReplaceState(p,p.state,null),Wl(s,u,p,f),Xl(),p.state=s.memoizedState),typeof p.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(r===null){p=s.stateNode;var b=s.memoizedProps,C=_a(o,b);p.props=C;var H=p.context,W=o.contextType;E=ho,typeof W=="object"&&W!==null&&(E=an(W));var J=o.getDerivedStateFromProps;W=typeof J=="function"||typeof p.getSnapshotBeforeUpdate=="function",b=s.pendingProps!==b,W||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(b||H!==E)&&Yv(s,p,u,E),qi=!1;var G=s.memoizedState;p.state=G,Wl(s,u,p,f),Xl(),H=s.memoizedState,b||G!==H||qi?(typeof J=="function"&&(km(s,o,J,u),H=s.memoizedState),(C=qi||Qv(s,o,C,u,G,H,E))?(W||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(s.flags|=4194308)):(typeof p.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=H),p.props=u,p.state=H,p.context=E,u=C):(typeof p.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{p=s.stateNode,pm(r,s),E=s.memoizedProps,W=_a(o,E),p.props=W,J=s.pendingProps,G=p.context,H=o.contextType,C=ho,typeof H=="object"&&H!==null&&(C=an(H)),b=o.getDerivedStateFromProps,(H=typeof b=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(E!==J||G!==C)&&Yv(s,p,u,C),qi=!1,G=s.memoizedState,p.state=G,Wl(s,u,p,f),Xl();var K=s.memoizedState;E!==J||G!==K||qi||r!==null&&r.dependencies!==null&&lh(r.dependencies)?(typeof b=="function"&&(km(s,o,b,u),K=s.memoizedState),(W=qi||Qv(s,o,W,u,G,K,C)||r!==null&&r.dependencies!==null&&lh(r.dependencies))?(H||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(u,K,C),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(u,K,C)),typeof p.componentDidUpdate=="function"&&(s.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof p.componentDidUpdate!="function"||E===r.memoizedProps&&G===r.memoizedState||(s.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||E===r.memoizedProps&&G===r.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=K),p.props=u,p.state=K,p.context=C,u=W):(typeof p.componentDidUpdate!="function"||E===r.memoizedProps&&G===r.memoizedState||(s.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||E===r.memoizedProps&&G===r.memoizedState||(s.flags|=1024),u=!1)}return p=u,Ih(r,s),u=(s.flags&128)!==0,p||u?(p=s.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:p.render(),s.flags|=1,r!==null&&u?(s.child=Ao(s,r.child,null,f),s.child=Ao(s,null,o,f)):Wt(r,s,o,f),s.memoizedState=p.state,r=s.child):r=yi(r,s,f),r}function cE(r,s,o,u){return Fl(),s.flags|=256,Wt(r,s,o,u),s.child}var jm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Bm(r){return{baseLanes:r,cachePool:W_()}}function Fm(r,s,o){return r=r!==null?r.childLanes&~o:0,s&&(r|=Zn),r}function hE(r,s,o){var u=s.pendingProps,f=!1,p=(s.flags&128)!==0,E;if((E=p)||(E=r!==null&&r.memoizedState===null?!1:(Lt.current&2)!==0),E&&(f=!0,s.flags&=-129),E=(s.flags&32)!==0,s.flags&=-33,r===null){if($e){if(f?Ki(s):Qi(),$e){var b=vt,C;if(C=b){e:{for(C=b,b=Or;C.nodeType!==8;){if(!b){b=null;break e}if(C=cr(C.nextSibling),C===null){b=null;break e}}b=C}b!==null?(s.memoizedState={dehydrated:b,treeContext:ca!==null?{id:hi,overflow:fi}:null,retryLane:536870912,hydrationErrors:null},C=Nn(18,null,null,0),C.stateNode=b,C.return=s,s.child=C,_n=s,vt=null,C=!0):C=!1}C||da(s)}if(b=s.memoizedState,b!==null&&(b=b.dehydrated,b!==null))return Sp(b)?s.lanes=32:s.lanes=536870912,null;gi(s)}return b=u.children,u=u.fallback,f?(Qi(),f=s.mode,b=Ch({mode:"hidden",children:b},f),u=ua(u,f,o,null),b.return=s,u.return=s,b.sibling=u,s.child=b,f=s.child,f.memoizedState=Bm(o),f.childLanes=Fm(r,E,o),s.memoizedState=jm,u):(Ki(s),qm(s,b))}if(C=r.memoizedState,C!==null&&(b=C.dehydrated,b!==null)){if(p)s.flags&256?(Ki(s),s.flags&=-257,s=Hm(r,s,o)):s.memoizedState!==null?(Qi(),s.child=r.child,s.flags|=128,s=null):(Qi(),f=u.fallback,b=s.mode,u=Ch({mode:"visible",children:u.children},b),f=ua(f,b,o,null),f.flags|=2,u.return=s,f.return=s,u.sibling=f,s.child=u,Ao(s,r.child,null,o),u=s.child,u.memoizedState=Bm(o),u.childLanes=Fm(r,E,o),s.memoizedState=jm,s=f);else if(Ki(s),Sp(b)){if(E=b.nextSibling&&b.nextSibling.dataset,E)var H=E.dgst;E=H,u=Error(i(419)),u.stack="",u.digest=E,ql({value:u,source:null,stack:null}),s=Hm(r,s,o)}else if(qt||Hl(r,s,o,!1),E=(o&r.childLanes)!==0,qt||E){if(E=at,E!==null&&(u=o&-o,u=(u&42)!==0?1:Vi(u),u=(u&(E.suspendedLanes|o))!==0?0:u,u!==0&&u!==C.retryLane))throw C.retryLane=u,co(r,u),xn(E,r,u),nE;b.data==="$?"||lp(),s=Hm(r,s,o)}else b.data==="$?"?(s.flags|=192,s.child=r.child,s=null):(r=C.treeContext,vt=cr(b.nextSibling),_n=s,$e=!0,fa=null,Or=!1,r!==null&&(Yn[Xn++]=hi,Yn[Xn++]=fi,Yn[Xn++]=ca,hi=r.id,fi=r.overflow,ca=s),s=qm(s,u.children),s.flags|=4096);return s}return f?(Qi(),f=u.fallback,b=s.mode,C=r.child,H=C.sibling,u=ci(C,{mode:"hidden",children:u.children}),u.subtreeFlags=C.subtreeFlags&65011712,H!==null?f=ci(H,f):(f=ua(f,b,o,null),f.flags|=2),f.return=s,u.return=s,u.sibling=f,s.child=u,u=f,f=s.child,b=r.child.memoizedState,b===null?b=Bm(o):(C=b.cachePool,C!==null?(H=kt._currentValue,C=C.parent!==H?{parent:H,pool:H}:C):C=W_(),b={baseLanes:b.baseLanes|o,cachePool:C}),f.memoizedState=b,f.childLanes=Fm(r,E,o),s.memoizedState=jm,u):(Ki(s),o=r.child,r=o.sibling,o=ci(o,{mode:"visible",children:u.children}),o.return=s,o.sibling=null,r!==null&&(E=s.deletions,E===null?(s.deletions=[r],s.flags|=16):E.push(r)),s.child=o,s.memoizedState=null,o)}function qm(r,s){return s=Ch({mode:"visible",children:s},r.mode),s.return=r,r.child=s}function Ch(r,s){return r=Nn(22,r,null,s),r.lanes=0,r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},r}function Hm(r,s,o){return Ao(s,r.child,null,o),r=qm(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function fE(r,s,o){r.lanes|=s;var u=r.alternate;u!==null&&(u.lanes|=s),lm(r.return,s,o)}function Gm(r,s,o,u,f){var p=r.memoizedState;p===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:f}:(p.isBackwards=s,p.rendering=null,p.renderingStartTime=0,p.last=u,p.tail=o,p.tailMode=f)}function dE(r,s,o){var u=s.pendingProps,f=u.revealOrder,p=u.tail;if(Wt(r,s,u.children,o),u=Lt.current,(u&2)!==0)u=u&1|2,s.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&fE(r,o,s);else if(r.tag===19)fE(r,o,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}u&=1}switch(re(Lt,u),f){case"forwards":for(o=s.child,f=null;o!==null;)r=o.alternate,r!==null&&wh(r)===null&&(f=o),o=o.sibling;o=f,o===null?(f=s.child,s.child=null):(f=o.sibling,o.sibling=null),Gm(s,!1,f,o,p);break;case"backwards":for(o=null,f=s.child,s.child=null;f!==null;){if(r=f.alternate,r!==null&&wh(r)===null){s.child=f;break}r=f.sibling,f.sibling=o,o=f,f=r}Gm(s,!0,o,null,p);break;case"together":Gm(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function yi(r,s,o){if(r!==null&&(s.dependencies=r.dependencies),Ji|=s.lanes,(o&s.childLanes)===0)if(r!==null){if(Hl(r,s,o,!1),(o&s.childLanes)===0)return null}else return null;if(r!==null&&s.child!==r.child)throw Error(i(153));if(s.child!==null){for(r=s.child,o=ci(r,r.pendingProps),s.child=o,o.return=s;r.sibling!==null;)r=r.sibling,o=o.sibling=ci(r,r.pendingProps),o.return=s;o.sibling=null}return s.child}function $m(r,s){return(r.lanes&s)!==0?!0:(r=r.dependencies,!!(r!==null&&lh(r)))}function UI(r,s,o){switch(s.tag){case 3:st(s,s.stateNode.containerInfo),Fi(s,kt,r.memoizedState.cache),Fl();break;case 27:case 5:xi(s);break;case 4:st(s,s.stateNode.containerInfo);break;case 10:Fi(s,s.type,s.memoizedProps.value);break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?(Ki(s),s.flags|=128,null):(o&s.child.childLanes)!==0?hE(r,s,o):(Ki(s),r=yi(r,s,o),r!==null?r.sibling:null);Ki(s);break;case 19:var f=(r.flags&128)!==0;if(u=(o&s.childLanes)!==0,u||(Hl(r,s,o,!1),u=(o&s.childLanes)!==0),f){if(u)return dE(r,s,o);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),re(Lt,Lt.current),u)break;return null;case 22:case 23:return s.lanes=0,aE(r,s,o);case 24:Fi(s,kt,r.memoizedState.cache)}return yi(r,s,o)}function mE(r,s,o){if(r!==null)if(r.memoizedProps!==s.pendingProps)qt=!0;else{if(!$m(r,o)&&(s.flags&128)===0)return qt=!1,UI(r,s,o);qt=(r.flags&131072)!==0}else qt=!1,$e&&(s.flags&1048576)!==0&&H_(s,oh,s.index);switch(s.lanes=0,s.tag){case 16:e:{r=s.pendingProps;var u=s.elementType,f=u._init;if(u=f(u._payload),s.type=u,typeof u=="function")tm(u)?(r=_a(u,r),s.tag=1,s=uE(null,s,u,r,o)):(s.tag=0,s=zm(null,s,u,r,o));else{if(u!=null){if(f=u.$$typeof,f===he){s.tag=11,s=rE(null,s,u,r,o);break e}else if(f===P){s.tag=14,s=iE(null,s,u,r,o);break e}}throw s=Qt(u)||u,Error(i(306,s,""))}}return s;case 0:return zm(r,s,s.type,s.pendingProps,o);case 1:return u=s.type,f=_a(u,s.pendingProps),uE(r,s,u,f,o);case 3:e:{if(st(s,s.stateNode.containerInfo),r===null)throw Error(i(387));u=s.pendingProps;var p=s.memoizedState;f=p.element,pm(r,s),Wl(s,u,null,o);var E=s.memoizedState;if(u=E.cache,Fi(s,kt,u),u!==p.cache&&um(s,[kt],o,!0),Xl(),u=E.element,p.isDehydrated)if(p={element:u,isDehydrated:!1,cache:E.cache},s.updateQueue.baseState=p,s.memoizedState=p,s.flags&256){s=cE(r,s,u,o);break e}else if(u!==f){f=Kn(Error(i(424)),s),ql(f),s=cE(r,s,u,o);break e}else{switch(r=s.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(vt=cr(r.firstChild),_n=s,$e=!0,fa=null,Or=!0,o=$v(s,null,u,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(Fl(),u===f){s=yi(r,s,o);break e}Wt(r,s,u,o)}s=s.child}return s;case 26:return Ih(r,s),r===null?(o=_T(s.type,null,s.pendingProps,null))?s.memoizedState=o:$e||(o=s.type,r=s.pendingProps,u=Fh(Re.current).createElement(o),u[Pt]=s,u[Rt]=r,Jt(u,o,r),Tt(u),s.stateNode=u):s.memoizedState=_T(s.type,r.memoizedProps,s.pendingProps,r.memoizedState),null;case 27:return xi(s),r===null&&$e&&(u=s.stateNode=pT(s.type,s.pendingProps,Re.current),_n=s,Or=!0,f=vt,rs(s.type)?(Rp=f,vt=cr(u.firstChild)):vt=f),Wt(r,s,s.pendingProps.children,o),Ih(r,s),r===null&&(s.flags|=4194304),s.child;case 5:return r===null&&$e&&((f=u=vt)&&(u=f1(u,s.type,s.pendingProps,Or),u!==null?(s.stateNode=u,_n=s,vt=cr(u.firstChild),Or=!1,f=!0):f=!1),f||da(s)),xi(s),f=s.type,p=s.pendingProps,E=r!==null?r.memoizedProps:null,u=p.children,Ap(f,p)?u=null:E!==null&&Ap(f,E)&&(s.flags|=32),s.memoizedState!==null&&(f=Tm(r,s,DI,null,null,o),vu._currentValue=f),Ih(r,s),Wt(r,s,u,o),s.child;case 6:return r===null&&$e&&((r=o=vt)&&(o=d1(o,s.pendingProps,Or),o!==null?(s.stateNode=o,_n=s,vt=null,r=!0):r=!1),r||da(s)),null;case 13:return hE(r,s,o);case 4:return st(s,s.stateNode.containerInfo),u=s.pendingProps,r===null?s.child=Ao(s,null,u,o):Wt(r,s,u,o),s.child;case 11:return rE(r,s,s.type,s.pendingProps,o);case 7:return Wt(r,s,s.pendingProps,o),s.child;case 8:return Wt(r,s,s.pendingProps.children,o),s.child;case 12:return Wt(r,s,s.pendingProps.children,o),s.child;case 10:return u=s.pendingProps,Fi(s,s.type,u.value),Wt(r,s,u.children,o),s.child;case 9:return f=s.type._context,u=s.pendingProps.children,pa(s),f=an(f),u=u(f),s.flags|=1,Wt(r,s,u,o),s.child;case 14:return iE(r,s,s.type,s.pendingProps,o);case 15:return sE(r,s,s.type,s.pendingProps,o);case 19:return dE(r,s,o);case 31:return u=s.pendingProps,o=s.mode,u={mode:u.mode,children:u.children},r===null?(o=Ch(u,o),o.ref=s.ref,s.child=o,o.return=s,s=o):(o=ci(r.child,u),o.ref=s.ref,s.child=o,o.return=s,s=o),s;case 22:return aE(r,s,o);case 24:return pa(s),u=an(kt),r===null?(f=fm(),f===null&&(f=at,p=cm(),f.pooledCache=p,p.refCount++,p!==null&&(f.pooledCacheLanes|=o),f=p),s.memoizedState={parent:u,cache:f},mm(s),Fi(s,kt,f)):((r.lanes&o)!==0&&(pm(r,s),Wl(s,null,null,o),Xl()),f=r.memoizedState,p=s.memoizedState,f.parent!==u?(f={parent:u,cache:u},s.memoizedState=f,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=f),Fi(s,kt,u)):(u=p.cache,Fi(s,kt,u),u!==f.cache&&um(s,[kt],o,!0))),Wt(r,s,s.pendingProps.children,o),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function _i(r){r.flags|=4}function pE(r,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!bT(s)){if(s=Wn.current,s!==null&&((Be&4194048)===Be?Mr!==null:(Be&62914560)!==Be&&(Be&536870912)===0||s!==Mr))throw Ql=dm,Z_;r.flags|=8192}}function Nh(r,s){s!==null&&(r.flags|=4),r.flags&16384&&(s=r.tag!==22?Tl():536870912,r.lanes|=s,Ro|=s)}function iu(r,s){if(!$e)switch(r.tailMode){case"hidden":s=r.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?r.tail=null:o.sibling=null;break;case"collapsed":o=r.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:u.sibling=null}}function ft(r){var s=r.alternate!==null&&r.alternate.child===r.child,o=0,u=0;if(s)for(var f=r.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags&65011712,u|=f.flags&65011712,f.return=r,f=f.sibling;else for(f=r.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=r,f=f.sibling;return r.subtreeFlags|=u,r.childLanes=o,s}function zI(r,s,o){var u=s.pendingProps;switch(sm(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ft(s),null;case 1:return ft(s),null;case 3:return o=s.stateNode,u=null,r!==null&&(u=r.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),mi(kt),vr(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(r===null||r.child===null)&&(Bl(s)?_i(s):r===null||r.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,K_())),ft(s),null;case 26:return o=s.memoizedState,r===null?(_i(s),o!==null?(ft(s),pE(s,o)):(ft(s),s.flags&=-16777217)):o?o!==r.memoizedState?(_i(s),ft(s),pE(s,o)):(ft(s),s.flags&=-16777217):(r.memoizedProps!==u&&_i(s),ft(s),s.flags&=-16777217),null;case 27:Wr(s),o=Re.current;var f=s.type;if(r!==null&&s.stateNode!=null)r.memoizedProps!==u&&_i(s);else{if(!u){if(s.stateNode===null)throw Error(i(166));return ft(s),null}r=ye.current,Bl(s)?G_(s):(r=pT(f,u,o),s.stateNode=r,_i(s))}return ft(s),null;case 5:if(Wr(s),o=s.type,r!==null&&s.stateNode!=null)r.memoizedProps!==u&&_i(s);else{if(!u){if(s.stateNode===null)throw Error(i(166));return ft(s),null}if(r=ye.current,Bl(s))G_(s);else{switch(f=Fh(Re.current),r){case 1:r=f.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:r=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":r=f.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":r=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":r=f.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof u.is=="string"?f.createElement("select",{is:u.is}):f.createElement("select"),u.multiple?r.multiple=!0:u.size&&(r.size=u.size);break;default:r=typeof u.is=="string"?f.createElement(o,{is:u.is}):f.createElement(o)}}r[Pt]=s,r[Rt]=u;e:for(f=s.child;f!==null;){if(f.tag===5||f.tag===6)r.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===s)break e;for(;f.sibling===null;){if(f.return===null||f.return===s)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}s.stateNode=r;e:switch(Jt(r,o,u),o){case"button":case"input":case"select":case"textarea":r=!!u.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&_i(s)}}return ft(s),s.flags&=-16777217,null;case 6:if(r&&s.stateNode!=null)r.memoizedProps!==u&&_i(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(i(166));if(r=Re.current,Bl(s)){if(r=s.stateNode,o=s.memoizedProps,u=null,f=_n,f!==null)switch(f.tag){case 27:case 5:u=f.memoizedProps}r[Pt]=s,r=!!(r.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||lT(r.nodeValue,o)),r||da(s)}else r=Fh(r).createTextNode(u),r[Pt]=s,s.stateNode=r}return ft(s),null;case 13:if(u=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(f=Bl(s),u!==null&&u.dehydrated!==null){if(r===null){if(!f)throw Error(i(318));if(f=s.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(i(317));f[Pt]=s}else Fl(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;ft(s),f=!1}else f=K_(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=f),f=!0;if(!f)return s.flags&256?(gi(s),s):(gi(s),null)}if(gi(s),(s.flags&128)!==0)return s.lanes=o,s;if(o=u!==null,r=r!==null&&r.memoizedState!==null,o){u=s.child,f=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(f=u.alternate.memoizedState.cachePool.pool);var p=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(p=u.memoizedState.cachePool.pool),p!==f&&(u.flags|=2048)}return o!==r&&o&&(s.child.flags|=8192),Nh(s,s.updateQueue),ft(s),null;case 4:return vr(),r===null&&yp(s.stateNode.containerInfo),ft(s),null;case 10:return mi(s.type),ft(s),null;case 19:if(le(Lt),f=s.memoizedState,f===null)return ft(s),null;if(u=(s.flags&128)!==0,p=f.rendering,p===null)if(u)iu(f,!1);else{if(Et!==0||r!==null&&(r.flags&128)!==0)for(r=s.child;r!==null;){if(p=wh(r),p!==null){for(s.flags|=128,iu(f,!1),r=p.updateQueue,s.updateQueue=r,Nh(s,r),s.subtreeFlags=0,r=o,o=s.child;o!==null;)q_(o,r),o=o.sibling;return re(Lt,Lt.current&1|2),s.child}r=r.sibling}f.tail!==null&&Bn()>Mh&&(s.flags|=128,u=!0,iu(f,!1),s.lanes=4194304)}else{if(!u)if(r=wh(p),r!==null){if(s.flags|=128,u=!0,r=r.updateQueue,s.updateQueue=r,Nh(s,r),iu(f,!0),f.tail===null&&f.tailMode==="hidden"&&!p.alternate&&!$e)return ft(s),null}else 2*Bn()-f.renderingStartTime>Mh&&o!==536870912&&(s.flags|=128,u=!0,iu(f,!1),s.lanes=4194304);f.isBackwards?(p.sibling=s.child,s.child=p):(r=f.last,r!==null?r.sibling=p:s.child=p,f.last=p)}return f.tail!==null?(s=f.tail,f.rendering=s,f.tail=s.sibling,f.renderingStartTime=Bn(),s.sibling=null,r=Lt.current,re(Lt,u?r&1|2:r&1),s):(ft(s),null);case 22:case 23:return gi(s),vm(),u=s.memoizedState!==null,r!==null?r.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(o&536870912)!==0&&(s.flags&128)===0&&(ft(s),s.subtreeFlags&6&&(s.flags|=8192)):ft(s),o=s.updateQueue,o!==null&&Nh(s,o.retryQueue),o=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==o&&(s.flags|=2048),r!==null&&le(ga),null;case 24:return o=null,r!==null&&(o=r.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),mi(kt),ft(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function jI(r,s){switch(sm(s),s.tag){case 1:return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return mi(kt),vr(),r=s.flags,(r&65536)!==0&&(r&128)===0?(s.flags=r&-65537|128,s):null;case 26:case 27:case 5:return Wr(s),null;case 13:if(gi(s),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(i(340));Fl()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return le(Lt),null;case 4:return vr(),null;case 10:return mi(s.type),null;case 22:case 23:return gi(s),vm(),r!==null&&le(ga),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 24:return mi(kt),null;case 25:return null;default:return null}}function gE(r,s){switch(sm(s),s.tag){case 3:mi(kt),vr();break;case 26:case 27:case 5:Wr(s);break;case 4:vr();break;case 13:gi(s);break;case 19:le(Lt);break;case 10:mi(s.type);break;case 22:case 23:gi(s),vm(),r!==null&&le(ga);break;case 24:mi(kt)}}function su(r,s){try{var o=s.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var f=u.next;o=f;do{if((o.tag&r)===r){u=void 0;var p=o.create,E=o.inst;u=p(),E.destroy=u}o=o.next}while(o!==f)}}catch(b){rt(s,s.return,b)}}function Yi(r,s,o){try{var u=s.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var p=f.next;u=p;do{if((u.tag&r)===r){var E=u.inst,b=E.destroy;if(b!==void 0){E.destroy=void 0,f=s;var C=o,H=b;try{H()}catch(W){rt(f,C,W)}}}u=u.next}while(u!==p)}}catch(W){rt(s,s.return,W)}}function yE(r){var s=r.updateQueue;if(s!==null){var o=r.stateNode;try{iv(s,o)}catch(u){rt(r,r.return,u)}}}function _E(r,s,o){o.props=_a(r.type,r.memoizedProps),o.state=r.memoizedState;try{o.componentWillUnmount()}catch(u){rt(r,s,u)}}function au(r,s){try{var o=r.ref;if(o!==null){switch(r.tag){case 26:case 27:case 5:var u=r.stateNode;break;case 30:u=r.stateNode;break;default:u=r.stateNode}typeof o=="function"?r.refCleanup=o(u):o.current=u}}catch(f){rt(r,s,f)}}function Pr(r,s){var o=r.ref,u=r.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(f){rt(r,s,f)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){rt(r,s,f)}else o.current=null}function vE(r){var s=r.type,o=r.memoizedProps,u=r.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(f){rt(r,r.return,f)}}function Km(r,s,o){try{var u=r.stateNode;o1(u,r.type,o,s),u[Rt]=s}catch(f){rt(r,r.return,f)}}function EE(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&rs(r.type)||r.tag===4}function Qm(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||EE(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&rs(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Ym(r,s,o){var u=r.tag;if(u===5||u===6)r=r.stateNode,s?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(r,s):(s=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,s.appendChild(r),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=Bh));else if(u!==4&&(u===27&&rs(r.type)&&(o=r.stateNode,s=null),r=r.child,r!==null))for(Ym(r,s,o),r=r.sibling;r!==null;)Ym(r,s,o),r=r.sibling}function Dh(r,s,o){var u=r.tag;if(u===5||u===6)r=r.stateNode,s?o.insertBefore(r,s):o.appendChild(r);else if(u!==4&&(u===27&&rs(r.type)&&(o=r.stateNode),r=r.child,r!==null))for(Dh(r,s,o),r=r.sibling;r!==null;)Dh(r,s,o),r=r.sibling}function TE(r){var s=r.stateNode,o=r.memoizedProps;try{for(var u=r.type,f=s.attributes;f.length;)s.removeAttributeNode(f[0]);Jt(s,u,o),s[Pt]=r,s[Rt]=o}catch(p){rt(r,r.return,p)}}var vi=!1,bt=!1,Xm=!1,AE=typeof WeakSet=="function"?WeakSet:Set,Ht=null;function BI(r,s){if(r=r.containerInfo,Ep=Qh,r=P_(r),Qd(r)){if("selectionStart"in r)var o={start:r.selectionStart,end:r.selectionEnd};else e:{o=(o=r.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var f=u.anchorOffset,p=u.focusNode;u=u.focusOffset;try{o.nodeType,p.nodeType}catch{o=null;break e}var E=0,b=-1,C=-1,H=0,W=0,J=r,G=null;t:for(;;){for(var K;J!==o||f!==0&&J.nodeType!==3||(b=E+f),J!==p||u!==0&&J.nodeType!==3||(C=E+u),J.nodeType===3&&(E+=J.nodeValue.length),(K=J.firstChild)!==null;)G=J,J=K;for(;;){if(J===r)break t;if(G===o&&++H===f&&(b=E),G===p&&++W===u&&(C=E),(K=J.nextSibling)!==null)break;J=G,G=J.parentNode}J=K}o=b===-1||C===-1?null:{start:b,end:C}}else o=null}o=o||{start:0,end:0}}else o=null;for(Tp={focusedElem:r,selectionRange:o},Qh=!1,Ht=s;Ht!==null;)if(s=Ht,r=s.child,(s.subtreeFlags&1024)!==0&&r!==null)r.return=s,Ht=r;else for(;Ht!==null;){switch(s=Ht,p=s.alternate,r=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((r&1024)!==0&&p!==null){r=void 0,o=s,f=p.memoizedProps,p=p.memoizedState,u=o.stateNode;try{var we=_a(o.type,f,o.elementType===o.type);r=u.getSnapshotBeforeUpdate(we,p),u.__reactInternalSnapshotBeforeUpdate=r}catch(ve){rt(o,o.return,ve)}}break;case 3:if((r&1024)!==0){if(r=s.stateNode.containerInfo,o=r.nodeType,o===9)wp(r);else if(o===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":wp(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=s.sibling,r!==null){r.return=s.return,Ht=r;break}Ht=s.return}}function bE(r,s,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:Xi(r,o),u&4&&su(5,o);break;case 1:if(Xi(r,o),u&4)if(r=o.stateNode,s===null)try{r.componentDidMount()}catch(E){rt(o,o.return,E)}else{var f=_a(o.type,s.memoizedProps);s=s.memoizedState;try{r.componentDidUpdate(f,s,r.__reactInternalSnapshotBeforeUpdate)}catch(E){rt(o,o.return,E)}}u&64&&yE(o),u&512&&au(o,o.return);break;case 3:if(Xi(r,o),u&64&&(r=o.updateQueue,r!==null)){if(s=null,o.child!==null)switch(o.child.tag){case 27:case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}try{iv(r,s)}catch(E){rt(o,o.return,E)}}break;case 27:s===null&&u&4&&TE(o);case 26:case 5:Xi(r,o),s===null&&u&4&&vE(o),u&512&&au(o,o.return);break;case 12:Xi(r,o);break;case 13:Xi(r,o),u&4&&RE(r,o),u&64&&(r=o.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(o=XI.bind(null,o),m1(r,o))));break;case 22:if(u=o.memoizedState!==null||vi,!u){s=s!==null&&s.memoizedState!==null||bt,f=vi;var p=bt;vi=u,(bt=s)&&!p?Wi(r,o,(o.subtreeFlags&8772)!==0):Xi(r,o),vi=f,bt=p}break;case 30:break;default:Xi(r,o)}}function wE(r){var s=r.alternate;s!==null&&(r.alternate=null,wE(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&Ui(s)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var ht=null,Tn=!1;function Ei(r,s,o){for(o=o.child;o!==null;)SE(r,s,o),o=o.sibling}function SE(r,s,o){if(Qe&&typeof Qe.onCommitFiberUnmount=="function")try{Qe.onCommitFiberUnmount(_t,o)}catch{}switch(o.tag){case 26:bt||Pr(o,s),Ei(r,s,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:bt||Pr(o,s);var u=ht,f=Tn;rs(o.type)&&(ht=o.stateNode,Tn=!1),Ei(r,s,o),pu(o.stateNode),ht=u,Tn=f;break;case 5:bt||Pr(o,s);case 6:if(u=ht,f=Tn,ht=null,Ei(r,s,o),ht=u,Tn=f,ht!==null)if(Tn)try{(ht.nodeType===9?ht.body:ht.nodeName==="HTML"?ht.ownerDocument.body:ht).removeChild(o.stateNode)}catch(p){rt(o,s,p)}else try{ht.removeChild(o.stateNode)}catch(p){rt(o,s,p)}break;case 18:ht!==null&&(Tn?(r=ht,dT(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,o.stateNode),bu(r)):dT(ht,o.stateNode));break;case 4:u=ht,f=Tn,ht=o.stateNode.containerInfo,Tn=!0,Ei(r,s,o),ht=u,Tn=f;break;case 0:case 11:case 14:case 15:bt||Yi(2,o,s),bt||Yi(4,o,s),Ei(r,s,o);break;case 1:bt||(Pr(o,s),u=o.stateNode,typeof u.componentWillUnmount=="function"&&_E(o,s,u)),Ei(r,s,o);break;case 21:Ei(r,s,o);break;case 22:bt=(u=bt)||o.memoizedState!==null,Ei(r,s,o),bt=u;break;default:Ei(r,s,o)}}function RE(r,s){if(s.memoizedState===null&&(r=s.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{bu(r)}catch(o){rt(s,s.return,o)}}function FI(r){switch(r.tag){case 13:case 19:var s=r.stateNode;return s===null&&(s=r.stateNode=new AE),s;case 22:return r=r.stateNode,s=r._retryCache,s===null&&(s=r._retryCache=new AE),s;default:throw Error(i(435,r.tag))}}function Wm(r,s){var o=FI(r);s.forEach(function(u){var f=WI.bind(null,r,u);o.has(u)||(o.add(u),u.then(f,f))})}function Dn(r,s){var o=s.deletions;if(o!==null)for(var u=0;u<o.length;u++){var f=o[u],p=r,E=s,b=E;e:for(;b!==null;){switch(b.tag){case 27:if(rs(b.type)){ht=b.stateNode,Tn=!1;break e}break;case 5:ht=b.stateNode,Tn=!1;break e;case 3:case 4:ht=b.stateNode.containerInfo,Tn=!0;break e}b=b.return}if(ht===null)throw Error(i(160));SE(p,E,f),ht=null,Tn=!1,p=f.alternate,p!==null&&(p.return=null),f.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)IE(s,r),s=s.sibling}var ur=null;function IE(r,s){var o=r.alternate,u=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:Dn(s,r),On(r),u&4&&(Yi(3,r,r.return),su(3,r),Yi(5,r,r.return));break;case 1:Dn(s,r),On(r),u&512&&(bt||o===null||Pr(o,o.return)),u&64&&vi&&(r=r.updateQueue,r!==null&&(u=r.callbacks,u!==null&&(o=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var f=ur;if(Dn(s,r),On(r),u&512&&(bt||o===null||Pr(o,o.return)),u&4){var p=o!==null?o.memoizedState:null;if(u=r.memoizedState,o===null)if(u===null)if(r.stateNode===null){e:{u=r.type,o=r.memoizedProps,f=f.ownerDocument||f;t:switch(u){case"title":p=f.getElementsByTagName("title")[0],(!p||p[Ks]||p[Pt]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=f.createElement(u),f.head.insertBefore(p,f.querySelector("head > title"))),Jt(p,u,o),p[Pt]=r,Tt(p),u=p;break e;case"link":var E=TT("link","href",f).get(u+(o.href||""));if(E){for(var b=0;b<E.length;b++)if(p=E[b],p.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&p.getAttribute("rel")===(o.rel==null?null:o.rel)&&p.getAttribute("title")===(o.title==null?null:o.title)&&p.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){E.splice(b,1);break t}}p=f.createElement(u),Jt(p,u,o),f.head.appendChild(p);break;case"meta":if(E=TT("meta","content",f).get(u+(o.content||""))){for(b=0;b<E.length;b++)if(p=E[b],p.getAttribute("content")===(o.content==null?null:""+o.content)&&p.getAttribute("name")===(o.name==null?null:o.name)&&p.getAttribute("property")===(o.property==null?null:o.property)&&p.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&p.getAttribute("charset")===(o.charSet==null?null:o.charSet)){E.splice(b,1);break t}}p=f.createElement(u),Jt(p,u,o),f.head.appendChild(p);break;default:throw Error(i(468,u))}p[Pt]=r,Tt(p),u=p}r.stateNode=u}else AT(f,r.type,r.stateNode);else r.stateNode=ET(f,u,r.memoizedProps);else p!==u?(p===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):p.count--,u===null?AT(f,r.type,r.stateNode):ET(f,u,r.memoizedProps)):u===null&&r.stateNode!==null&&Km(r,r.memoizedProps,o.memoizedProps)}break;case 27:Dn(s,r),On(r),u&512&&(bt||o===null||Pr(o,o.return)),o!==null&&u&4&&Km(r,r.memoizedProps,o.memoizedProps);break;case 5:if(Dn(s,r),On(r),u&512&&(bt||o===null||Pr(o,o.return)),r.flags&32){f=r.stateNode;try{qn(f,"")}catch(K){rt(r,r.return,K)}}u&4&&r.stateNode!=null&&(f=r.memoizedProps,Km(r,f,o!==null?o.memoizedProps:f)),u&1024&&(Xm=!0);break;case 6:if(Dn(s,r),On(r),u&4){if(r.stateNode===null)throw Error(i(162));u=r.memoizedProps,o=r.stateNode;try{o.nodeValue=u}catch(K){rt(r,r.return,K)}}break;case 3:if(Gh=null,f=ur,ur=qh(s.containerInfo),Dn(s,r),ur=f,On(r),u&4&&o!==null&&o.memoizedState.isDehydrated)try{bu(s.containerInfo)}catch(K){rt(r,r.return,K)}Xm&&(Xm=!1,CE(r));break;case 4:u=ur,ur=qh(r.stateNode.containerInfo),Dn(s,r),On(r),ur=u;break;case 12:Dn(s,r),On(r);break;case 13:Dn(s,r),On(r),r.child.flags&8192&&r.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(rp=Bn()),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,Wm(r,u)));break;case 22:f=r.memoizedState!==null;var C=o!==null&&o.memoizedState!==null,H=vi,W=bt;if(vi=H||f,bt=W||C,Dn(s,r),bt=W,vi=H,On(r),u&8192)e:for(s=r.stateNode,s._visibility=f?s._visibility&-2:s._visibility|1,f&&(o===null||C||vi||bt||va(r)),o=null,s=r;;){if(s.tag===5||s.tag===26){if(o===null){C=o=s;try{if(p=C.stateNode,f)E=p.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{b=C.stateNode;var J=C.memoizedProps.style,G=J!=null&&J.hasOwnProperty("display")?J.display:null;b.style.display=G==null||typeof G=="boolean"?"":(""+G).trim()}}catch(K){rt(C,C.return,K)}}}else if(s.tag===6){if(o===null){C=s;try{C.stateNode.nodeValue=f?"":C.memoizedProps}catch(K){rt(C,C.return,K)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===r)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break e;for(;s.sibling===null;){if(s.return===null||s.return===r)break e;o===s&&(o=null),s=s.return}o===s&&(o=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=r.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,Wm(r,o))));break;case 19:Dn(s,r),On(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,Wm(r,u)));break;case 30:break;case 21:break;default:Dn(s,r),On(r)}}function On(r){var s=r.flags;if(s&2){try{for(var o,u=r.return;u!==null;){if(EE(u)){o=u;break}u=u.return}if(o==null)throw Error(i(160));switch(o.tag){case 27:var f=o.stateNode,p=Qm(r);Dh(r,p,f);break;case 5:var E=o.stateNode;o.flags&32&&(qn(E,""),o.flags&=-33);var b=Qm(r);Dh(r,b,E);break;case 3:case 4:var C=o.stateNode.containerInfo,H=Qm(r);Ym(r,H,C);break;default:throw Error(i(161))}}catch(W){rt(r,r.return,W)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function CE(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var s=r;CE(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),r=r.sibling}}function Xi(r,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)bE(r,s.alternate,s),s=s.sibling}function va(r){for(r=r.child;r!==null;){var s=r;switch(s.tag){case 0:case 11:case 14:case 15:Yi(4,s,s.return),va(s);break;case 1:Pr(s,s.return);var o=s.stateNode;typeof o.componentWillUnmount=="function"&&_E(s,s.return,o),va(s);break;case 27:pu(s.stateNode);case 26:case 5:Pr(s,s.return),va(s);break;case 22:s.memoizedState===null&&va(s);break;case 30:va(s);break;default:va(s)}r=r.sibling}}function Wi(r,s,o){for(o=o&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,f=r,p=s,E=p.flags;switch(p.tag){case 0:case 11:case 15:Wi(f,p,o),su(4,p);break;case 1:if(Wi(f,p,o),u=p,f=u.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(H){rt(u,u.return,H)}if(u=p,f=u.updateQueue,f!==null){var b=u.stateNode;try{var C=f.shared.hiddenCallbacks;if(C!==null)for(f.shared.hiddenCallbacks=null,f=0;f<C.length;f++)rv(C[f],b)}catch(H){rt(u,u.return,H)}}o&&E&64&&yE(p),au(p,p.return);break;case 27:TE(p);case 26:case 5:Wi(f,p,o),o&&u===null&&E&4&&vE(p),au(p,p.return);break;case 12:Wi(f,p,o);break;case 13:Wi(f,p,o),o&&E&4&&RE(f,p);break;case 22:p.memoizedState===null&&Wi(f,p,o),au(p,p.return);break;case 30:break;default:Wi(f,p,o)}s=s.sibling}}function Zm(r,s){var o=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),r=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(r=s.memoizedState.cachePool.pool),r!==o&&(r!=null&&r.refCount++,o!=null&&Gl(o))}function Jm(r,s){r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&Gl(r))}function xr(r,s,o,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)NE(r,s,o,u),s=s.sibling}function NE(r,s,o,u){var f=s.flags;switch(s.tag){case 0:case 11:case 15:xr(r,s,o,u),f&2048&&su(9,s);break;case 1:xr(r,s,o,u);break;case 3:xr(r,s,o,u),f&2048&&(r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&Gl(r)));break;case 12:if(f&2048){xr(r,s,o,u),r=s.stateNode;try{var p=s.memoizedProps,E=p.id,b=p.onPostCommit;typeof b=="function"&&b(E,s.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(C){rt(s,s.return,C)}}else xr(r,s,o,u);break;case 13:xr(r,s,o,u);break;case 23:break;case 22:p=s.stateNode,E=s.alternate,s.memoizedState!==null?p._visibility&2?xr(r,s,o,u):ou(r,s):p._visibility&2?xr(r,s,o,u):(p._visibility|=2,bo(r,s,o,u,(s.subtreeFlags&10256)!==0)),f&2048&&Zm(E,s);break;case 24:xr(r,s,o,u),f&2048&&Jm(s.alternate,s);break;default:xr(r,s,o,u)}}function bo(r,s,o,u,f){for(f=f&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var p=r,E=s,b=o,C=u,H=E.flags;switch(E.tag){case 0:case 11:case 15:bo(p,E,b,C,f),su(8,E);break;case 23:break;case 22:var W=E.stateNode;E.memoizedState!==null?W._visibility&2?bo(p,E,b,C,f):ou(p,E):(W._visibility|=2,bo(p,E,b,C,f)),f&&H&2048&&Zm(E.alternate,E);break;case 24:bo(p,E,b,C,f),f&&H&2048&&Jm(E.alternate,E);break;default:bo(p,E,b,C,f)}s=s.sibling}}function ou(r,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var o=r,u=s,f=u.flags;switch(u.tag){case 22:ou(o,u),f&2048&&Zm(u.alternate,u);break;case 24:ou(o,u),f&2048&&Jm(u.alternate,u);break;default:ou(o,u)}s=s.sibling}}var lu=8192;function wo(r){if(r.subtreeFlags&lu)for(r=r.child;r!==null;)DE(r),r=r.sibling}function DE(r){switch(r.tag){case 26:wo(r),r.flags&lu&&r.memoizedState!==null&&I1(ur,r.memoizedState,r.memoizedProps);break;case 5:wo(r);break;case 3:case 4:var s=ur;ur=qh(r.stateNode.containerInfo),wo(r),ur=s;break;case 22:r.memoizedState===null&&(s=r.alternate,s!==null&&s.memoizedState!==null?(s=lu,lu=16777216,wo(r),lu=s):wo(r));break;default:wo(r)}}function OE(r){var s=r.alternate;if(s!==null&&(r=s.child,r!==null)){s.child=null;do s=r.sibling,r.sibling=null,r=s;while(r!==null)}}function uu(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];Ht=u,PE(u,r)}OE(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)ME(r),r=r.sibling}function ME(r){switch(r.tag){case 0:case 11:case 15:uu(r),r.flags&2048&&Yi(9,r,r.return);break;case 3:uu(r);break;case 12:uu(r);break;case 22:var s=r.stateNode;r.memoizedState!==null&&s._visibility&2&&(r.return===null||r.return.tag!==13)?(s._visibility&=-3,Oh(r)):uu(r);break;default:uu(r)}}function Oh(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];Ht=u,PE(u,r)}OE(r)}for(r=r.child;r!==null;){switch(s=r,s.tag){case 0:case 11:case 15:Yi(8,s,s.return),Oh(s);break;case 22:o=s.stateNode,o._visibility&2&&(o._visibility&=-3,Oh(s));break;default:Oh(s)}r=r.sibling}}function PE(r,s){for(;Ht!==null;){var o=Ht;switch(o.tag){case 0:case 11:case 15:Yi(8,o,s);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Gl(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,Ht=u;else e:for(o=r;Ht!==null;){u=Ht;var f=u.sibling,p=u.return;if(wE(u),u===o){Ht=null;break e}if(f!==null){f.return=p,Ht=f;break e}Ht=p}}}var qI={getCacheForType:function(r){var s=an(kt),o=s.data.get(r);return o===void 0&&(o=r(),s.data.set(r,o)),o}},HI=typeof WeakMap=="function"?WeakMap:Map,Ye=0,at=null,xe=null,Be=0,Xe=0,Mn=null,Zi=!1,So=!1,ep=!1,Ti=0,Et=0,Ji=0,Ea=0,tp=0,Zn=0,Ro=0,cu=null,An=null,np=!1,rp=0,Mh=1/0,Ph=null,es=null,Zt=0,ts=null,Io=null,Co=0,ip=0,sp=null,xE=null,hu=0,ap=null;function Pn(){if((Ye&2)!==0&&Be!==0)return Be&-Be;if(X.T!==null){var r=po;return r!==0?r:dp()}return ki()}function VE(){Zn===0&&(Zn=(Be&536870912)===0||$e?El():536870912);var r=Wn.current;return r!==null&&(r.flags|=32),Zn}function xn(r,s,o){(r===at&&(Xe===2||Xe===9)||r.cancelPendingCommit!==null)&&(No(r,0),ns(r,Be,Zn,!1)),Jr(r,o),((Ye&2)===0||r!==at)&&(r===at&&((Ye&2)===0&&(Ea|=o),Et===4&&ns(r,Be,Zn,!1)),Vr(r))}function kE(r,s,o){if((Ye&6)!==0)throw Error(i(327));var u=!o&&(s&124)===0&&(s&r.expiredLanes)===0||$s(r,s),f=u?KI(r,s):up(r,s,!0),p=u;do{if(f===0){So&&!u&&ns(r,s,0,!1);break}else{if(o=r.current.alternate,p&&!GI(o)){f=up(r,s,!1),p=!1;continue}if(f===2){if(p=s,r.errorRecoveryDisabledLanes&p)var E=0;else E=r.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){s=E;e:{var b=r;f=cu;var C=b.current.memoizedState.isDehydrated;if(C&&(No(b,E).flags|=256),E=up(b,E,!1),E!==2){if(ep&&!C){b.errorRecoveryDisabledLanes|=p,Ea|=p,f=4;break e}p=An,An=f,p!==null&&(An===null?An=p:An.push.apply(An,p))}f=E}if(p=!1,f!==2)continue}}if(f===1){No(r,0),ns(r,s,0,!0);break}e:{switch(u=r,p=f,p){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:ns(u,s,Zn,!Zi);break e;case 2:An=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(f=rp+300-Bn(),10<f)){if(ns(u,s,Zn,!Zi),Ga(u,0,!0)!==0)break e;u.timeoutHandle=hT(LE.bind(null,u,o,An,Ph,np,s,Zn,Ea,Ro,Zi,p,2,-0,0),f);break e}LE(u,o,An,Ph,np,s,Zn,Ea,Ro,Zi,p,0,-0,0)}}break}while(!0);Vr(r)}function LE(r,s,o,u,f,p,E,b,C,H,W,J,G,K){if(r.timeoutHandle=-1,J=s.subtreeFlags,(J&8192||(J&16785408)===16785408)&&(_u={stylesheets:null,count:0,unsuspend:R1},DE(s),J=C1(),J!==null)){r.cancelPendingCommit=J(HE.bind(null,r,s,p,o,u,f,E,b,C,W,1,G,K)),ns(r,p,E,!H);return}HE(r,s,p,o,u,f,E,b,C)}function GI(r){for(var s=r;;){var o=s.tag;if((o===0||o===11||o===15)&&s.flags&16384&&(o=s.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var f=o[u],p=f.getSnapshot;f=f.value;try{if(!Cn(p(),f))return!1}catch{return!1}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function ns(r,s,o,u){s&=~tp,s&=~Ea,r.suspendedLanes|=s,r.pingedLanes&=~s,u&&(r.warmLanes|=s),u=r.expirationTimes;for(var f=s;0<f;){var p=31-sn(f),E=1<<p;u[p]=-1,f&=~E}o!==0&&Er(r,o,s)}function xh(){return(Ye&6)===0?(fu(0),!1):!0}function op(){if(xe!==null){if(Xe===0)var r=xe.return;else r=xe,di=ma=null,wm(r),To=null,nu=0,r=xe;for(;r!==null;)gE(r.alternate,r),r=r.return;xe=null}}function No(r,s){var o=r.timeoutHandle;o!==-1&&(r.timeoutHandle=-1,u1(o)),o=r.cancelPendingCommit,o!==null&&(r.cancelPendingCommit=null,o()),op(),at=r,xe=o=ci(r.current,null),Be=s,Xe=0,Mn=null,Zi=!1,So=$s(r,s),ep=!1,Ro=Zn=tp=Ea=Ji=Et=0,An=cu=null,np=!1,(s&8)!==0&&(s|=s&32);var u=r.entangledLanes;if(u!==0)for(r=r.entanglements,u&=s;0<u;){var f=31-sn(u),p=1<<f;s|=r[f],u&=~p}return Ti=s,nh(),o}function UE(r,s){Ne=null,X.H=Th,s===Kl||s===hh?(s=tv(),Xe=3):s===Z_?(s=tv(),Xe=4):Xe=s===nE?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Mn=s,xe===null&&(Et=1,Rh(r,Kn(s,r.current)))}function zE(){var r=X.H;return X.H=Th,r===null?Th:r}function jE(){var r=X.A;return X.A=qI,r}function lp(){Et=4,Zi||(Be&4194048)!==Be&&Wn.current!==null||(So=!0),(Ji&134217727)===0&&(Ea&134217727)===0||at===null||ns(at,Be,Zn,!1)}function up(r,s,o){var u=Ye;Ye|=2;var f=zE(),p=jE();(at!==r||Be!==s)&&(Ph=null,No(r,s)),s=!1;var E=Et;e:do try{if(Xe!==0&&xe!==null){var b=xe,C=Mn;switch(Xe){case 8:op(),E=6;break e;case 3:case 2:case 9:case 6:Wn.current===null&&(s=!0);var H=Xe;if(Xe=0,Mn=null,Do(r,b,C,H),o&&So){E=0;break e}break;default:H=Xe,Xe=0,Mn=null,Do(r,b,C,H)}}$I(),E=Et;break}catch(W){UE(r,W)}while(!0);return s&&r.shellSuspendCounter++,di=ma=null,Ye=u,X.H=f,X.A=p,xe===null&&(at=null,Be=0,nh()),E}function $I(){for(;xe!==null;)BE(xe)}function KI(r,s){var o=Ye;Ye|=2;var u=zE(),f=jE();at!==r||Be!==s?(Ph=null,Mh=Bn()+500,No(r,s)):So=$s(r,s);e:do try{if(Xe!==0&&xe!==null){s=xe;var p=Mn;t:switch(Xe){case 1:Xe=0,Mn=null,Do(r,s,p,1);break;case 2:case 9:if(J_(p)){Xe=0,Mn=null,FE(s);break}s=function(){Xe!==2&&Xe!==9||at!==r||(Xe=7),Vr(r)},p.then(s,s);break e;case 3:Xe=7;break e;case 4:Xe=5;break e;case 7:J_(p)?(Xe=0,Mn=null,FE(s)):(Xe=0,Mn=null,Do(r,s,p,7));break;case 5:var E=null;switch(xe.tag){case 26:E=xe.memoizedState;case 5:case 27:var b=xe;if(!E||bT(E)){Xe=0,Mn=null;var C=b.sibling;if(C!==null)xe=C;else{var H=b.return;H!==null?(xe=H,Vh(H)):xe=null}break t}}Xe=0,Mn=null,Do(r,s,p,5);break;case 6:Xe=0,Mn=null,Do(r,s,p,6);break;case 8:op(),Et=6;break e;default:throw Error(i(462))}}QI();break}catch(W){UE(r,W)}while(!0);return di=ma=null,X.H=u,X.A=f,Ye=o,xe!==null?0:(at=null,Be=0,nh(),Et)}function QI(){for(;xe!==null&&!gl();)BE(xe)}function BE(r){var s=mE(r.alternate,r,Ti);r.memoizedProps=r.pendingProps,s===null?Vh(r):xe=s}function FE(r){var s=r,o=s.alternate;switch(s.tag){case 15:case 0:s=lE(o,s,s.pendingProps,s.type,void 0,Be);break;case 11:s=lE(o,s,s.pendingProps,s.type.render,s.ref,Be);break;case 5:wm(s);default:gE(o,s),s=xe=q_(s,Ti),s=mE(o,s,Ti)}r.memoizedProps=r.pendingProps,s===null?Vh(r):xe=s}function Do(r,s,o,u){di=ma=null,wm(s),To=null,nu=0;var f=s.return;try{if(LI(r,f,s,o,Be)){Et=1,Rh(r,Kn(o,r.current)),xe=null;return}}catch(p){if(f!==null)throw xe=f,p;Et=1,Rh(r,Kn(o,r.current)),xe=null;return}s.flags&32768?($e||u===1?r=!0:So||(Be&536870912)!==0?r=!1:(Zi=r=!0,(u===2||u===9||u===3||u===6)&&(u=Wn.current,u!==null&&u.tag===13&&(u.flags|=16384))),qE(s,r)):Vh(s)}function Vh(r){var s=r;do{if((s.flags&32768)!==0){qE(s,Zi);return}r=s.return;var o=zI(s.alternate,s,Ti);if(o!==null){xe=o;return}if(s=s.sibling,s!==null){xe=s;return}xe=s=r}while(s!==null);Et===0&&(Et=5)}function qE(r,s){do{var o=jI(r.alternate,r);if(o!==null){o.flags&=32767,xe=o;return}if(o=r.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!s&&(r=r.sibling,r!==null)){xe=r;return}xe=r=o}while(r!==null);Et=6,xe=null}function HE(r,s,o,u,f,p,E,b,C){r.cancelPendingCommit=null;do kh();while(Zt!==0);if((Ye&6)!==0)throw Error(i(327));if(s!==null){if(s===r.current)throw Error(i(177));if(p=s.lanes|s.childLanes,p|=Jd,Al(r,o,p,E,b,C),r===at&&(xe=at=null,Be=0),Io=s,ts=r,Co=o,ip=p,sp=f,xE=u,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,ZI(Fs,function(){return YE(),null})):(r.callbackNode=null,r.callbackPriority=0),u=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||u){u=X.T,X.T=null,f=oe.p,oe.p=2,E=Ye,Ye|=4;try{BI(r,s,o)}finally{Ye=E,oe.p=f,X.T=u}}Zt=1,GE(),$E(),KE()}}function GE(){if(Zt===1){Zt=0;var r=ts,s=Io,o=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||o){o=X.T,X.T=null;var u=oe.p;oe.p=2;var f=Ye;Ye|=4;try{IE(s,r);var p=Tp,E=P_(r.containerInfo),b=p.focusedElem,C=p.selectionRange;if(E!==b&&b&&b.ownerDocument&&M_(b.ownerDocument.documentElement,b)){if(C!==null&&Qd(b)){var H=C.start,W=C.end;if(W===void 0&&(W=H),"selectionStart"in b)b.selectionStart=H,b.selectionEnd=Math.min(W,b.value.length);else{var J=b.ownerDocument||document,G=J&&J.defaultView||window;if(G.getSelection){var K=G.getSelection(),we=b.textContent.length,ve=Math.min(C.start,we),nt=C.end===void 0?ve:Math.min(C.end,we);!K.extend&&ve>nt&&(E=nt,nt=ve,ve=E);var L=O_(b,ve),x=O_(b,nt);if(L&&x&&(K.rangeCount!==1||K.anchorNode!==L.node||K.anchorOffset!==L.offset||K.focusNode!==x.node||K.focusOffset!==x.offset)){var F=J.createRange();F.setStart(L.node,L.offset),K.removeAllRanges(),ve>nt?(K.addRange(F),K.extend(x.node,x.offset)):(F.setEnd(x.node,x.offset),K.addRange(F))}}}}for(J=[],K=b;K=K.parentNode;)K.nodeType===1&&J.push({element:K,left:K.scrollLeft,top:K.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<J.length;b++){var Z=J[b];Z.element.scrollLeft=Z.left,Z.element.scrollTop=Z.top}}Qh=!!Ep,Tp=Ep=null}finally{Ye=f,oe.p=u,X.T=o}}r.current=s,Zt=2}}function $E(){if(Zt===2){Zt=0;var r=ts,s=Io,o=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||o){o=X.T,X.T=null;var u=oe.p;oe.p=2;var f=Ye;Ye|=4;try{bE(r,s.alternate,s)}finally{Ye=f,oe.p=u,X.T=o}}Zt=3}}function KE(){if(Zt===4||Zt===3){Zt=0,Oc();var r=ts,s=Io,o=Co,u=xE;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Zt=5:(Zt=0,Io=ts=null,QE(r,r.pendingLanes));var f=r.pendingLanes;if(f===0&&(es=null),$a(o),s=s.stateNode,Qe&&typeof Qe.onCommitFiberRoot=="function")try{Qe.onCommitFiberRoot(_t,s,void 0,(s.current.flags&128)===128)}catch{}if(u!==null){s=X.T,f=oe.p,oe.p=2,X.T=null;try{for(var p=r.onRecoverableError,E=0;E<u.length;E++){var b=u[E];p(b.value,{componentStack:b.stack})}}finally{X.T=s,oe.p=f}}(Co&3)!==0&&kh(),Vr(r),f=r.pendingLanes,(o&4194090)!==0&&(f&42)!==0?r===ap?hu++:(hu=0,ap=r):hu=0,fu(0)}}function QE(r,s){(r.pooledCacheLanes&=s)===0&&(s=r.pooledCache,s!=null&&(r.pooledCache=null,Gl(s)))}function kh(r){return GE(),$E(),KE(),YE()}function YE(){if(Zt!==5)return!1;var r=ts,s=ip;ip=0;var o=$a(Co),u=X.T,f=oe.p;try{oe.p=32>o?32:o,X.T=null,o=sp,sp=null;var p=ts,E=Co;if(Zt=0,Io=ts=null,Co=0,(Ye&6)!==0)throw Error(i(331));var b=Ye;if(Ye|=4,ME(p.current),NE(p,p.current,E,o),Ye=b,fu(0,!1),Qe&&typeof Qe.onPostCommitFiberRoot=="function")try{Qe.onPostCommitFiberRoot(_t,p)}catch{}return!0}finally{oe.p=f,X.T=u,QE(r,s)}}function XE(r,s,o){s=Kn(o,s),s=Um(r.stateNode,s,2),r=Gi(r,s,2),r!==null&&(Jr(r,2),Vr(r))}function rt(r,s,o){if(r.tag===3)XE(r,r,o);else for(;s!==null;){if(s.tag===3){XE(s,r,o);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(es===null||!es.has(u))){r=Kn(o,r),o=eE(2),u=Gi(s,o,2),u!==null&&(tE(o,u,s,r),Jr(u,2),Vr(u));break}}s=s.return}}function cp(r,s,o){var u=r.pingCache;if(u===null){u=r.pingCache=new HI;var f=new Set;u.set(s,f)}else f=u.get(s),f===void 0&&(f=new Set,u.set(s,f));f.has(o)||(ep=!0,f.add(o),r=YI.bind(null,r,s,o),s.then(r,r))}function YI(r,s,o){var u=r.pingCache;u!==null&&u.delete(s),r.pingedLanes|=r.suspendedLanes&o,r.warmLanes&=~o,at===r&&(Be&o)===o&&(Et===4||Et===3&&(Be&62914560)===Be&&300>Bn()-rp?(Ye&2)===0&&No(r,0):tp|=o,Ro===Be&&(Ro=0)),Vr(r)}function WE(r,s){s===0&&(s=Tl()),r=co(r,s),r!==null&&(Jr(r,s),Vr(r))}function XI(r){var s=r.memoizedState,o=0;s!==null&&(o=s.retryLane),WE(r,o)}function WI(r,s){var o=0;switch(r.tag){case 13:var u=r.stateNode,f=r.memoizedState;f!==null&&(o=f.retryLane);break;case 19:u=r.stateNode;break;case 22:u=r.stateNode._retryCache;break;default:throw Error(i(314))}u!==null&&u.delete(s),WE(r,o)}function ZI(r,s){return js(r,s)}var Lh=null,Oo=null,hp=!1,Uh=!1,fp=!1,Ta=0;function Vr(r){r!==Oo&&r.next===null&&(Oo===null?Lh=Oo=r:Oo=Oo.next=r),Uh=!0,hp||(hp=!0,e1())}function fu(r,s){if(!fp&&Uh){fp=!0;do for(var o=!1,u=Lh;u!==null;){if(r!==0){var f=u.pendingLanes;if(f===0)var p=0;else{var E=u.suspendedLanes,b=u.pingedLanes;p=(1<<31-sn(42|r)+1)-1,p&=f&~(E&~b),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(o=!0,tT(u,p))}else p=Be,p=Ga(u,u===at?p:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(p&3)===0||$s(u,p)||(o=!0,tT(u,p));u=u.next}while(o);fp=!1}}function JI(){ZE()}function ZE(){Uh=hp=!1;var r=0;Ta!==0&&(l1()&&(r=Ta),Ta=0);for(var s=Bn(),o=null,u=Lh;u!==null;){var f=u.next,p=JE(u,s);p===0?(u.next=null,o===null?Lh=f:o.next=f,f===null&&(Oo=o)):(o=u,(r!==0||(p&3)!==0)&&(Uh=!0)),u=f}fu(r)}function JE(r,s){for(var o=r.suspendedLanes,u=r.pingedLanes,f=r.expirationTimes,p=r.pendingLanes&-62914561;0<p;){var E=31-sn(p),b=1<<E,C=f[E];C===-1?((b&o)===0||(b&u)!==0)&&(f[E]=vl(b,s)):C<=s&&(r.expiredLanes|=b),p&=~b}if(s=at,o=Be,o=Ga(r,r===s?o:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u=r.callbackNode,o===0||r===s&&(Xe===2||Xe===9)||r.cancelPendingCommit!==null)return u!==null&&u!==null&&Bs(u),r.callbackNode=null,r.callbackPriority=0;if((o&3)===0||$s(r,o)){if(s=o&-o,s===r.callbackPriority)return s;switch(u!==null&&Bs(u),$a(o)){case 2:case 8:o=qa;break;case 32:o=Fs;break;case 268435456:o=Ha;break;default:o=Fs}return u=eT.bind(null,r),o=js(o,u),r.callbackPriority=s,r.callbackNode=o,s}return u!==null&&u!==null&&Bs(u),r.callbackPriority=2,r.callbackNode=null,2}function eT(r,s){if(Zt!==0&&Zt!==5)return r.callbackNode=null,r.callbackPriority=0,null;var o=r.callbackNode;if(kh()&&r.callbackNode!==o)return null;var u=Be;return u=Ga(r,r===at?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u===0?null:(kE(r,u,s),JE(r,Bn()),r.callbackNode!=null&&r.callbackNode===o?eT.bind(null,r):null)}function tT(r,s){if(kh())return null;kE(r,s,!0)}function e1(){c1(function(){(Ye&6)!==0?js(yl,JI):ZE()})}function dp(){return Ta===0&&(Ta=El()),Ta}function nT(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:Za(""+r)}function rT(r,s){var o=s.ownerDocument.createElement("input");return o.name=s.name,o.value=s.value,r.id&&o.setAttribute("form",r.id),s.parentNode.insertBefore(o,s),r=new FormData(r),o.parentNode.removeChild(o),r}function t1(r,s,o,u,f){if(s==="submit"&&o&&o.stateNode===f){var p=nT((f[Rt]||null).action),E=u.submitter;E&&(s=(s=E[Rt]||null)?nT(s.formAction):E.getAttribute("formAction"),s!==null&&(p=s,E=null));var b=new Ja("action","action",null,u,f);r.push({event:b,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Ta!==0){var C=E?rT(f,E):new FormData(f);Pm(o,{pending:!0,data:C,method:f.method,action:p},null,C)}}else typeof p=="function"&&(b.preventDefault(),C=E?rT(f,E):new FormData(f),Pm(o,{pending:!0,data:C,method:f.method,action:p},p,C))},currentTarget:f}]})}}for(var mp=0;mp<Zd.length;mp++){var pp=Zd[mp],n1=pp.toLowerCase(),r1=pp[0].toUpperCase()+pp.slice(1);lr(n1,"on"+r1)}lr(k_,"onAnimationEnd"),lr(L_,"onAnimationIteration"),lr(U_,"onAnimationStart"),lr("dblclick","onDoubleClick"),lr("focusin","onFocus"),lr("focusout","onBlur"),lr(EI,"onTransitionRun"),lr(TI,"onTransitionStart"),lr(AI,"onTransitionCancel"),lr(z_,"onTransitionEnd"),ti("onMouseEnter",["mouseout","mouseover"]),ti("onMouseLeave",["mouseout","mouseover"]),ti("onPointerEnter",["pointerout","pointerover"]),ti("onPointerLeave",["pointerout","pointerover"]),ar("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ar("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ar("onBeforeInput",["compositionend","keypress","textInput","paste"]),ar("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ar("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ar("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var du="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),i1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(du));function iT(r,s){s=(s&4)!==0;for(var o=0;o<r.length;o++){var u=r[o],f=u.event;u=u.listeners;e:{var p=void 0;if(s)for(var E=u.length-1;0<=E;E--){var b=u[E],C=b.instance,H=b.currentTarget;if(b=b.listener,C!==p&&f.isPropagationStopped())break e;p=b,f.currentTarget=H;try{p(f)}catch(W){Sh(W)}f.currentTarget=null,p=C}else for(E=0;E<u.length;E++){if(b=u[E],C=b.instance,H=b.currentTarget,b=b.listener,C!==p&&f.isPropagationStopped())break e;p=b,f.currentTarget=H;try{p(f)}catch(W){Sh(W)}f.currentTarget=null,p=C}}}}function Ve(r,s){var o=s[wl];o===void 0&&(o=s[wl]=new Set);var u=r+"__bubble";o.has(u)||(sT(s,r,2,!1),o.add(u))}function gp(r,s,o){var u=0;s&&(u|=4),sT(o,r,u,s)}var zh="_reactListening"+Math.random().toString(36).slice(2);function yp(r){if(!r[zh]){r[zh]=!0,Sl.forEach(function(o){o!=="selectionchange"&&(i1.has(o)||gp(o,!1,r),gp(o,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[zh]||(s[zh]=!0,gp("selectionchange",!1,s))}}function sT(r,s,o,u){switch(NT(s)){case 2:var f=O1;break;case 8:f=M1;break;default:f=Op}o=f.bind(null,s,o,r),f=void 0,!Gn||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),u?f!==void 0?r.addEventListener(s,o,{capture:!0,passive:f}):r.addEventListener(s,o,!0):f!==void 0?r.addEventListener(s,o,{passive:f}):r.addEventListener(s,o,!1)}function _p(r,s,o,u,f){var p=u;if((s&1)===0&&(s&2)===0&&u!==null)e:for(;;){if(u===null)return;var E=u.tag;if(E===3||E===4){var b=u.stateNode.containerInfo;if(b===f)break;if(E===4)for(E=u.return;E!==null;){var C=E.tag;if((C===3||C===4)&&E.stateNode.containerInfo===f)return;E=E.return}for(;b!==null;){if(E=ei(b),E===null)return;if(C=E.tag,C===5||C===6||C===26||C===27){u=p=E;continue e}b=b.parentNode}}u=u.return}Bc(function(){var H=p,W=Hn(o),J=[];e:{var G=j_.get(r);if(G!==void 0){var K=Ja,we=r;switch(r){case"keypress":if(Rr(o)===0)break e;case"keydown":case"keyup":K=so;break;case"focusin":we="focus",K=no;break;case"focusout":we="blur",K=no;break;case"beforeblur":case"afterblur":K=no;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":K=$n;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":K=Hd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":K=Yc;break;case k_:case L_:case U_:K=ro;break;case z_:K=Wc;break;case"scroll":case"scrollend":K=Fc;break;case"wheel":K=ao;break;case"copy":case"cut":case"paste":K=io;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":K=Ll;break;case"toggle":case"beforetoggle":K=Jc}var ve=(s&4)!==0,nt=!ve&&(r==="scroll"||r==="scrollend"),L=ve?G!==null?G+"Capture":null:G;ve=[];for(var x=H,F;x!==null;){var Z=x;if(F=Z.stateNode,Z=Z.tag,Z!==5&&Z!==26&&Z!==27||F===null||L===null||(Z=ea(x,L),Z!=null&&ve.push(mu(x,Z,F))),nt)break;x=x.return}0<ve.length&&(G=new K(G,we,null,o,W),J.push({event:G,listeners:ve}))}}if((s&7)===0){e:{if(G=r==="mouseover"||r==="pointerover",K=r==="mouseout"||r==="pointerout",G&&o!==ii&&(we=o.relatedTarget||o.fromElement)&&(ei(we)||we[Fn]))break e;if((K||G)&&(G=W.window===W?W:(G=W.ownerDocument)?G.defaultView||G.parentWindow:window,K?(we=o.relatedTarget||o.toElement,K=H,we=we?ei(we):null,we!==null&&(nt=l(we),ve=we.tag,we!==nt||ve!==5&&ve!==27&&ve!==6)&&(we=null)):(K=null,we=H),K!==we)){if(ve=$n,Z="onMouseLeave",L="onMouseEnter",x="mouse",(r==="pointerout"||r==="pointerover")&&(ve=Ll,Z="onPointerLeave",L="onPointerEnter",x="pointer"),nt=K==null?G:Ar(K),F=we==null?G:Ar(we),G=new ve(Z,x+"leave",K,o,W),G.target=nt,G.relatedTarget=F,Z=null,ei(W)===H&&(ve=new ve(L,x+"enter",we,o,W),ve.target=F,ve.relatedTarget=nt,Z=ve),nt=Z,K&&we)t:{for(ve=K,L=we,x=0,F=ve;F;F=Mo(F))x++;for(F=0,Z=L;Z;Z=Mo(Z))F++;for(;0<x-F;)ve=Mo(ve),x--;for(;0<F-x;)L=Mo(L),F--;for(;x--;){if(ve===L||L!==null&&ve===L.alternate)break t;ve=Mo(ve),L=Mo(L)}ve=null}else ve=null;K!==null&&aT(J,G,K,ve,!1),we!==null&&nt!==null&&aT(J,nt,we,ve,!0)}}e:{if(G=H?Ar(H):window,K=G.nodeName&&G.nodeName.toLowerCase(),K==="select"||K==="input"&&G.type==="file")var fe=S_;else if(Vt(G))if(R_)fe=yI;else{fe=pI;var Me=mI}else K=G.nodeName,!K||K.toLowerCase()!=="input"||G.type!=="checkbox"&&G.type!=="radio"?H&&Dl(H.elementType)&&(fe=S_):fe=gI;if(fe&&(fe=fe(r,H))){ui(J,fe,o,W);break e}Me&&Me(r,G,H),r==="focusout"&&H&&G.type==="number"&&H.memoizedProps.value!=null&&ji(G,"number",G.value)}switch(Me=H?Ar(H):window,r){case"focusin":(Vt(Me)||Me.contentEditable==="true")&&(oo=Me,Yd=H,jl=null);break;case"focusout":jl=Yd=oo=null;break;case"mousedown":Xd=!0;break;case"contextmenu":case"mouseup":case"dragend":Xd=!1,x_(J,o,W);break;case"selectionchange":if(vI)break;case"keydown":case"keyup":x_(J,o,W)}var pe;if(Nr)e:{switch(r){case"compositionstart":var Ee="onCompositionStart";break e;case"compositionend":Ee="onCompositionEnd";break e;case"compositionupdate":Ee="onCompositionUpdate";break e}Ee=void 0}else ze?Q(r,o)&&(Ee="onCompositionEnd"):r==="keydown"&&o.keyCode===229&&(Ee="onCompositionStart");Ee&&(v&&o.locale!=="ko"&&(ze||Ee!=="onCompositionStart"?Ee==="onCompositionEnd"&&ze&&(pe=Ml()):(Sr=W,Bi="value"in Sr?Sr.value:Sr.textContent,ze=!0)),Me=jh(H,Ee),0<Me.length&&(Ee=new Vl(Ee,r,null,o,W),J.push({event:Ee,listeners:Me}),pe?Ee.data=pe:(pe=ae(o),pe!==null&&(Ee.data=pe)))),(pe=y?xt(r,o):je(r,o))&&(Ee=jh(H,"onBeforeInput"),0<Ee.length&&(Me=new Vl("onBeforeInput","beforeinput",null,o,W),J.push({event:Me,listeners:Ee}),Me.data=pe)),t1(J,r,H,o,W)}iT(J,s)})}function mu(r,s,o){return{instance:r,listener:s,currentTarget:o}}function jh(r,s){for(var o=s+"Capture",u=[];r!==null;){var f=r,p=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||p===null||(f=ea(r,o),f!=null&&u.unshift(mu(r,f,p)),f=ea(r,s),f!=null&&u.push(mu(r,f,p))),r.tag===3)return u;r=r.return}return[]}function Mo(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function aT(r,s,o,u,f){for(var p=s._reactName,E=[];o!==null&&o!==u;){var b=o,C=b.alternate,H=b.stateNode;if(b=b.tag,C!==null&&C===u)break;b!==5&&b!==26&&b!==27||H===null||(C=H,f?(H=ea(o,p),H!=null&&E.unshift(mu(o,H,C))):f||(H=ea(o,p),H!=null&&E.push(mu(o,H,C)))),o=o.return}E.length!==0&&r.push({event:s,listeners:E})}var s1=/\r\n?/g,a1=/\u0000|\uFFFD/g;function oT(r){return(typeof r=="string"?r:""+r).replace(s1,`
`).replace(a1,"")}function lT(r,s){return s=oT(s),oT(r)===s}function Bh(){}function tt(r,s,o,u,f,p){switch(o){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||qn(r,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&qn(r,""+u);break;case"className":br(r,"class",u);break;case"tabIndex":br(r,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":br(r,o,u);break;case"style":Nl(r,u,p);break;case"data":if(s!=="object"){br(r,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||o!=="href")){r.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(o);break}u=Za(""+u),r.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){r.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(o==="formAction"?(s!=="input"&&tt(r,s,"name",f.name,f,null),tt(r,s,"formEncType",f.formEncType,f,null),tt(r,s,"formMethod",f.formMethod,f,null),tt(r,s,"formTarget",f.formTarget,f,null)):(tt(r,s,"encType",f.encType,f,null),tt(r,s,"method",f.method,f,null),tt(r,s,"target",f.target,f,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(o);break}u=Za(""+u),r.setAttribute(o,u);break;case"onClick":u!=null&&(r.onclick=Bh);break;case"onScroll":u!=null&&Ve("scroll",r);break;case"onScrollEnd":u!=null&&Ve("scrollend",r);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(i(60));r.innerHTML=o}}break;case"multiple":r.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":r.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){r.removeAttribute("xlink:href");break}o=Za(""+u),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,""+u):r.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,""):r.removeAttribute(o);break;case"capture":case"download":u===!0?r.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,u):r.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?r.setAttribute(o,u):r.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?r.removeAttribute(o):r.setAttribute(o,u);break;case"popover":Ve("beforetoggle",r),Ve("toggle",r),zi(r,"popover",u);break;case"xlinkActuate":Yt(r,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Yt(r,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Yt(r,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Yt(r,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Yt(r,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Yt(r,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Yt(r,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Yt(r,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Yt(r,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":zi(r,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Fd.get(o)||o,zi(r,o,u))}}function vp(r,s,o,u,f,p){switch(o){case"style":Nl(r,u,p);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(i(60));r.innerHTML=o}}break;case"children":typeof u=="string"?qn(r,u):(typeof u=="number"||typeof u=="bigint")&&qn(r,""+u);break;case"onScroll":u!=null&&Ve("scroll",r);break;case"onScrollEnd":u!=null&&Ve("scrollend",r);break;case"onClick":u!=null&&(r.onclick=Bh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ka.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),s=o.slice(2,f?o.length-7:void 0),p=r[Rt]||null,p=p!=null?p[o]:null,typeof p=="function"&&r.removeEventListener(s,p,f),typeof u=="function")){typeof p!="function"&&p!==null&&(o in r?r[o]=null:r.hasAttribute(o)&&r.removeAttribute(o)),r.addEventListener(s,u,f);break e}o in r?r[o]=u:u===!0?r.setAttribute(o,""):zi(r,o,u)}}}function Jt(r,s,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ve("error",r),Ve("load",r);var u=!1,f=!1,p;for(p in o)if(o.hasOwnProperty(p)){var E=o[p];if(E!=null)switch(p){case"src":u=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:tt(r,s,p,E,o,null)}}f&&tt(r,s,"srcSet",o.srcSet,o,null),u&&tt(r,s,"src",o.src,o,null);return;case"input":Ve("invalid",r);var b=p=E=f=null,C=null,H=null;for(u in o)if(o.hasOwnProperty(u)){var W=o[u];if(W!=null)switch(u){case"name":f=W;break;case"type":E=W;break;case"checked":C=W;break;case"defaultChecked":H=W;break;case"value":p=W;break;case"defaultValue":b=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(i(137,s));break;default:tt(r,s,u,W,o,null)}}Ws(r,p,b,C,H,E,f,!1),Wa(r);return;case"select":Ve("invalid",r),u=E=p=null;for(f in o)if(o.hasOwnProperty(f)&&(b=o[f],b!=null))switch(f){case"value":p=b;break;case"defaultValue":E=b;break;case"multiple":u=b;default:tt(r,s,f,b,o,null)}s=p,o=E,r.multiple=!!u,s!=null?ri(r,!!u,s,!1):o!=null&&ri(r,!!u,o,!0);return;case"textarea":Ve("invalid",r),p=f=u=null;for(E in o)if(o.hasOwnProperty(E)&&(b=o[E],b!=null))switch(E){case"value":u=b;break;case"defaultValue":f=b;break;case"children":p=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(i(91));break;default:tt(r,s,E,b,o,null)}Zs(r,u,f,p),Wa(r);return;case"option":for(C in o)if(o.hasOwnProperty(C)&&(u=o[C],u!=null))switch(C){case"selected":r.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:tt(r,s,C,u,o,null)}return;case"dialog":Ve("beforetoggle",r),Ve("toggle",r),Ve("cancel",r),Ve("close",r);break;case"iframe":case"object":Ve("load",r);break;case"video":case"audio":for(u=0;u<du.length;u++)Ve(du[u],r);break;case"image":Ve("error",r),Ve("load",r);break;case"details":Ve("toggle",r);break;case"embed":case"source":case"link":Ve("error",r),Ve("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(H in o)if(o.hasOwnProperty(H)&&(u=o[H],u!=null))switch(H){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:tt(r,s,H,u,o,null)}return;default:if(Dl(s)){for(W in o)o.hasOwnProperty(W)&&(u=o[W],u!==void 0&&vp(r,s,W,u,o,void 0));return}}for(b in o)o.hasOwnProperty(b)&&(u=o[b],u!=null&&tt(r,s,b,u,o,null))}function o1(r,s,o,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,p=null,E=null,b=null,C=null,H=null,W=null;for(K in o){var J=o[K];if(o.hasOwnProperty(K)&&J!=null)switch(K){case"checked":break;case"value":break;case"defaultValue":C=J;default:u.hasOwnProperty(K)||tt(r,s,K,null,u,J)}}for(var G in u){var K=u[G];if(J=o[G],u.hasOwnProperty(G)&&(K!=null||J!=null))switch(G){case"type":p=K;break;case"name":f=K;break;case"checked":H=K;break;case"defaultChecked":W=K;break;case"value":E=K;break;case"defaultValue":b=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(i(137,s));break;default:K!==J&&tt(r,s,G,K,u,J)}}In(r,E,b,C,H,W,p,f);return;case"select":K=E=b=G=null;for(p in o)if(C=o[p],o.hasOwnProperty(p)&&C!=null)switch(p){case"value":break;case"multiple":K=C;default:u.hasOwnProperty(p)||tt(r,s,p,null,u,C)}for(f in u)if(p=u[f],C=o[f],u.hasOwnProperty(f)&&(p!=null||C!=null))switch(f){case"value":G=p;break;case"defaultValue":b=p;break;case"multiple":E=p;default:p!==C&&tt(r,s,f,p,u,C)}s=b,o=E,u=K,G!=null?ri(r,!!o,G,!1):!!u!=!!o&&(s!=null?ri(r,!!o,s,!0):ri(r,!!o,o?[]:"",!1));return;case"textarea":K=G=null;for(b in o)if(f=o[b],o.hasOwnProperty(b)&&f!=null&&!u.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:tt(r,s,b,null,u,f)}for(E in u)if(f=u[E],p=o[E],u.hasOwnProperty(E)&&(f!=null||p!=null))switch(E){case"value":G=f;break;case"defaultValue":K=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(i(91));break;default:f!==p&&tt(r,s,E,f,u,p)}Je(r,G,K);return;case"option":for(var we in o)if(G=o[we],o.hasOwnProperty(we)&&G!=null&&!u.hasOwnProperty(we))switch(we){case"selected":r.selected=!1;break;default:tt(r,s,we,null,u,G)}for(C in u)if(G=u[C],K=o[C],u.hasOwnProperty(C)&&G!==K&&(G!=null||K!=null))switch(C){case"selected":r.selected=G&&typeof G!="function"&&typeof G!="symbol";break;default:tt(r,s,C,G,u,K)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ve in o)G=o[ve],o.hasOwnProperty(ve)&&G!=null&&!u.hasOwnProperty(ve)&&tt(r,s,ve,null,u,G);for(H in u)if(G=u[H],K=o[H],u.hasOwnProperty(H)&&G!==K&&(G!=null||K!=null))switch(H){case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(i(137,s));break;default:tt(r,s,H,G,u,K)}return;default:if(Dl(s)){for(var nt in o)G=o[nt],o.hasOwnProperty(nt)&&G!==void 0&&!u.hasOwnProperty(nt)&&vp(r,s,nt,void 0,u,G);for(W in u)G=u[W],K=o[W],!u.hasOwnProperty(W)||G===K||G===void 0&&K===void 0||vp(r,s,W,G,u,K);return}}for(var L in o)G=o[L],o.hasOwnProperty(L)&&G!=null&&!u.hasOwnProperty(L)&&tt(r,s,L,null,u,G);for(J in u)G=u[J],K=o[J],!u.hasOwnProperty(J)||G===K||G==null&&K==null||tt(r,s,J,G,u,K)}var Ep=null,Tp=null;function Fh(r){return r.nodeType===9?r:r.ownerDocument}function uT(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function cT(r,s){if(r===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&s==="foreignObject"?0:r}function Ap(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var bp=null;function l1(){var r=window.event;return r&&r.type==="popstate"?r===bp?!1:(bp=r,!0):(bp=null,!1)}var hT=typeof setTimeout=="function"?setTimeout:void 0,u1=typeof clearTimeout=="function"?clearTimeout:void 0,fT=typeof Promise=="function"?Promise:void 0,c1=typeof queueMicrotask=="function"?queueMicrotask:typeof fT<"u"?function(r){return fT.resolve(null).then(r).catch(h1)}:hT;function h1(r){setTimeout(function(){throw r})}function rs(r){return r==="head"}function dT(r,s){var o=s,u=0,f=0;do{var p=o.nextSibling;if(r.removeChild(o),p&&p.nodeType===8)if(o=p.data,o==="/$"){if(0<u&&8>u){o=u;var E=r.ownerDocument;if(o&1&&pu(E.documentElement),o&2&&pu(E.body),o&4)for(o=E.head,pu(o),E=o.firstChild;E;){var b=E.nextSibling,C=E.nodeName;E[Ks]||C==="SCRIPT"||C==="STYLE"||C==="LINK"&&E.rel.toLowerCase()==="stylesheet"||o.removeChild(E),E=b}}if(f===0){r.removeChild(p),bu(s);return}f--}else o==="$"||o==="$?"||o==="$!"?f++:u=o.charCodeAt(0)-48;else u=0;o=p}while(o);bu(s)}function wp(r){var s=r.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var o=s;switch(s=s.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":wp(o),Ui(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}r.removeChild(o)}}function f1(r,s,o,u){for(;r.nodeType===1;){var f=o;if(r.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(u){if(!r[Ks])switch(s){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(p=r.getAttribute("rel"),p==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(p!==f.rel||r.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||r.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||r.getAttribute("title")!==(f.title==null?null:f.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(p=r.getAttribute("src"),(p!==(f.src==null?null:f.src)||r.getAttribute("type")!==(f.type==null?null:f.type)||r.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&p&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(s==="input"&&r.type==="hidden"){var p=f.name==null?null:""+f.name;if(f.type==="hidden"&&r.getAttribute("name")===p)return r}else return r;if(r=cr(r.nextSibling),r===null)break}return null}function d1(r,s,o){if(s==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!o||(r=cr(r.nextSibling),r===null))return null;return r}function Sp(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState==="complete"}function m1(r,s){var o=r.ownerDocument;if(r.data!=="$?"||o.readyState==="complete")s();else{var u=function(){s(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),r._reactRetry=u}}function cr(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return r}var Rp=null;function mT(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var o=r.data;if(o==="$"||o==="$!"||o==="$?"){if(s===0)return r;s--}else o==="/$"&&s++}r=r.previousSibling}return null}function pT(r,s,o){switch(s=Fh(o),r){case"html":if(r=s.documentElement,!r)throw Error(i(452));return r;case"head":if(r=s.head,!r)throw Error(i(453));return r;case"body":if(r=s.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}function pu(r){for(var s=r.attributes;s.length;)r.removeAttributeNode(s[0]);Ui(r)}var Jn=new Map,gT=new Set;function qh(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var Ai=oe.d;oe.d={f:p1,r:g1,D:y1,C:_1,L:v1,m:E1,X:A1,S:T1,M:b1};function p1(){var r=Ai.f(),s=xh();return r||s}function g1(r){var s=Tr(r);s!==null&&s.tag===5&&s.type==="form"?kv(s):Ai.r(r)}var Po=typeof document>"u"?null:document;function yT(r,s,o){var u=Po;if(u&&typeof s=="string"&&s){var f=It(s);f='link[rel="'+r+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),gT.has(f)||(gT.add(f),r={rel:r,crossOrigin:o,href:s},u.querySelector(f)===null&&(s=u.createElement("link"),Jt(s,"link",r),Tt(s),u.head.appendChild(s)))}}function y1(r){Ai.D(r),yT("dns-prefetch",r,null)}function _1(r,s){Ai.C(r,s),yT("preconnect",r,s)}function v1(r,s,o){Ai.L(r,s,o);var u=Po;if(u&&r&&s){var f='link[rel="preload"][as="'+It(s)+'"]';s==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+It(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+It(o.imageSizes)+'"]')):f+='[href="'+It(r)+'"]';var p=f;switch(s){case"style":p=xo(r);break;case"script":p=Vo(r)}Jn.has(p)||(r=_({rel:"preload",href:s==="image"&&o&&o.imageSrcSet?void 0:r,as:s},o),Jn.set(p,r),u.querySelector(f)!==null||s==="style"&&u.querySelector(gu(p))||s==="script"&&u.querySelector(yu(p))||(s=u.createElement("link"),Jt(s,"link",r),Tt(s),u.head.appendChild(s)))}}function E1(r,s){Ai.m(r,s);var o=Po;if(o&&r){var u=s&&typeof s.as=="string"?s.as:"script",f='link[rel="modulepreload"][as="'+It(u)+'"][href="'+It(r)+'"]',p=f;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=Vo(r)}if(!Jn.has(p)&&(r=_({rel:"modulepreload",href:r},s),Jn.set(p,r),o.querySelector(f)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(yu(p)))return}u=o.createElement("link"),Jt(u,"link",r),Tt(u),o.head.appendChild(u)}}}function T1(r,s,o){Ai.S(r,s,o);var u=Po;if(u&&r){var f=pn(u).hoistableStyles,p=xo(r);s=s||"default";var E=f.get(p);if(!E){var b={loading:0,preload:null};if(E=u.querySelector(gu(p)))b.loading=5;else{r=_({rel:"stylesheet",href:r,"data-precedence":s},o),(o=Jn.get(p))&&Ip(r,o);var C=E=u.createElement("link");Tt(C),Jt(C,"link",r),C._p=new Promise(function(H,W){C.onload=H,C.onerror=W}),C.addEventListener("load",function(){b.loading|=1}),C.addEventListener("error",function(){b.loading|=2}),b.loading|=4,Hh(E,s,u)}E={type:"stylesheet",instance:E,count:1,state:b},f.set(p,E)}}}function A1(r,s){Ai.X(r,s);var o=Po;if(o&&r){var u=pn(o).hoistableScripts,f=Vo(r),p=u.get(f);p||(p=o.querySelector(yu(f)),p||(r=_({src:r,async:!0},s),(s=Jn.get(f))&&Cp(r,s),p=o.createElement("script"),Tt(p),Jt(p,"link",r),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(f,p))}}function b1(r,s){Ai.M(r,s);var o=Po;if(o&&r){var u=pn(o).hoistableScripts,f=Vo(r),p=u.get(f);p||(p=o.querySelector(yu(f)),p||(r=_({src:r,async:!0,type:"module"},s),(s=Jn.get(f))&&Cp(r,s),p=o.createElement("script"),Tt(p),Jt(p,"link",r),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(f,p))}}function _T(r,s,o,u){var f=(f=Re.current)?qh(f):null;if(!f)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(s=xo(o.href),o=pn(f).hoistableStyles,u=o.get(s),u||(u={type:"style",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){r=xo(o.href);var p=pn(f).hoistableStyles,E=p.get(r);if(E||(f=f.ownerDocument||f,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(r,E),(p=f.querySelector(gu(r)))&&!p._p&&(E.instance=p,E.state.loading=5),Jn.has(r)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Jn.set(r,o),p||w1(f,r,o,E.state))),s&&u===null)throw Error(i(528,""));return E}if(s&&u!==null)throw Error(i(529,""));return null;case"script":return s=o.async,o=o.src,typeof o=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Vo(o),o=pn(f).hoistableScripts,u=o.get(s),u||(u={type:"script",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function xo(r){return'href="'+It(r)+'"'}function gu(r){return'link[rel="stylesheet"]['+r+"]"}function vT(r){return _({},r,{"data-precedence":r.precedence,precedence:null})}function w1(r,s,o,u){r.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=r.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),Jt(s,"link",o),Tt(s),r.head.appendChild(s))}function Vo(r){return'[src="'+It(r)+'"]'}function yu(r){return"script[async]"+r}function ET(r,s,o){if(s.count++,s.instance===null)switch(s.type){case"style":var u=r.querySelector('style[data-href~="'+It(o.href)+'"]');if(u)return s.instance=u,Tt(u),u;var f=_({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(r.ownerDocument||r).createElement("style"),Tt(u),Jt(u,"style",f),Hh(u,o.precedence,r),s.instance=u;case"stylesheet":f=xo(o.href);var p=r.querySelector(gu(f));if(p)return s.state.loading|=4,s.instance=p,Tt(p),p;u=vT(o),(f=Jn.get(f))&&Ip(u,f),p=(r.ownerDocument||r).createElement("link"),Tt(p);var E=p;return E._p=new Promise(function(b,C){E.onload=b,E.onerror=C}),Jt(p,"link",u),s.state.loading|=4,Hh(p,o.precedence,r),s.instance=p;case"script":return p=Vo(o.src),(f=r.querySelector(yu(p)))?(s.instance=f,Tt(f),f):(u=o,(f=Jn.get(p))&&(u=_({},o),Cp(u,f)),r=r.ownerDocument||r,f=r.createElement("script"),Tt(f),Jt(f,"link",u),r.head.appendChild(f),s.instance=f);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,Hh(u,o.precedence,r));return s.instance}function Hh(r,s,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=u.length?u[u.length-1]:null,p=f,E=0;E<u.length;E++){var b=u[E];if(b.dataset.precedence===s)p=b;else if(p!==f)break}p?p.parentNode.insertBefore(r,p.nextSibling):(s=o.nodeType===9?o.head:o,s.insertBefore(r,s.firstChild))}function Ip(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.title==null&&(r.title=s.title)}function Cp(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.integrity==null&&(r.integrity=s.integrity)}var Gh=null;function TT(r,s,o){if(Gh===null){var u=new Map,f=Gh=new Map;f.set(o,u)}else f=Gh,u=f.get(o),u||(u=new Map,f.set(o,u));if(u.has(r))return u;for(u.set(r,null),o=o.getElementsByTagName(r),f=0;f<o.length;f++){var p=o[f];if(!(p[Ks]||p[Pt]||r==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var E=p.getAttribute(s)||"";E=r+E;var b=u.get(E);b?b.push(p):u.set(E,[p])}}return u}function AT(r,s,o){r=r.ownerDocument||r,r.head.insertBefore(o,s==="title"?r.querySelector("head > title"):null)}function S1(r,s,o){if(o===1||s.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return r=s.disabled,typeof s.precedence=="string"&&r==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function bT(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}var _u=null;function R1(){}function I1(r,s,o){if(_u===null)throw Error(i(475));var u=_u;if(s.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var f=xo(o.href),p=r.querySelector(gu(f));if(p){r=p._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(u.count++,u=$h.bind(u),r.then(u,u)),s.state.loading|=4,s.instance=p,Tt(p);return}p=r.ownerDocument||r,o=vT(o),(f=Jn.get(f))&&Ip(o,f),p=p.createElement("link"),Tt(p);var E=p;E._p=new Promise(function(b,C){E.onload=b,E.onerror=C}),Jt(p,"link",o),s.instance=p}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(s,r),(r=s.state.preload)&&(s.state.loading&3)===0&&(u.count++,s=$h.bind(u),r.addEventListener("load",s),r.addEventListener("error",s))}}function C1(){if(_u===null)throw Error(i(475));var r=_u;return r.stylesheets&&r.count===0&&Np(r,r.stylesheets),0<r.count?function(s){var o=setTimeout(function(){if(r.stylesheets&&Np(r,r.stylesheets),r.unsuspend){var u=r.unsuspend;r.unsuspend=null,u()}},6e4);return r.unsuspend=s,function(){r.unsuspend=null,clearTimeout(o)}}:null}function $h(){if(this.count--,this.count===0){if(this.stylesheets)Np(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var Kh=null;function Np(r,s){r.stylesheets=null,r.unsuspend!==null&&(r.count++,Kh=new Map,s.forEach(N1,r),Kh=null,$h.call(r))}function N1(r,s){if(!(s.state.loading&4)){var o=Kh.get(r);if(o)var u=o.get(null);else{o=new Map,Kh.set(r,o);for(var f=r.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<f.length;p++){var E=f[p];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(o.set(E.dataset.precedence,E),u=E)}u&&o.set(null,u)}f=s.instance,E=f.getAttribute("data-precedence"),p=o.get(E)||u,p===u&&o.set(null,f),o.set(E,f),this.count++,u=$h.bind(this),f.addEventListener("load",u),f.addEventListener("error",u),p?p.parentNode.insertBefore(f,p.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(f,r.firstChild)),s.state.loading|=4}}var vu={$$typeof:ne,Provider:null,Consumer:null,_currentValue:ge,_currentValue2:ge,_threadCount:0};function D1(r,s,o,u,f,p,E,b){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Zr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Zr(0),this.hiddenUpdates=Zr(null),this.identifierPrefix=u,this.onUncaughtError=f,this.onCaughtError=p,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=b,this.incompleteTransitions=new Map}function wT(r,s,o,u,f,p,E,b,C,H,W,J){return r=new D1(r,s,o,E,b,C,H,J),s=1,p===!0&&(s|=24),p=Nn(3,null,null,s),r.current=p,p.stateNode=r,s=cm(),s.refCount++,r.pooledCache=s,s.refCount++,p.memoizedState={element:u,isDehydrated:o,cache:s},mm(p),r}function ST(r){return r?(r=ho,r):ho}function RT(r,s,o,u,f,p){f=ST(f),u.context===null?u.context=f:u.pendingContext=f,u=Hi(s),u.payload={element:o},p=p===void 0?null:p,p!==null&&(u.callback=p),o=Gi(r,u,s),o!==null&&(xn(o,r,s),Yl(o,r,s))}function IT(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var o=r.retryLane;r.retryLane=o!==0&&o<s?o:s}}function Dp(r,s){IT(r,s),(r=r.alternate)&&IT(r,s)}function CT(r){if(r.tag===13){var s=co(r,67108864);s!==null&&xn(s,r,67108864),Dp(r,67108864)}}var Qh=!0;function O1(r,s,o,u){var f=X.T;X.T=null;var p=oe.p;try{oe.p=2,Op(r,s,o,u)}finally{oe.p=p,X.T=f}}function M1(r,s,o,u){var f=X.T;X.T=null;var p=oe.p;try{oe.p=8,Op(r,s,o,u)}finally{oe.p=p,X.T=f}}function Op(r,s,o,u){if(Qh){var f=Mp(u);if(f===null)_p(r,s,u,Yh,o),DT(r,u);else if(x1(f,r,s,o,u))u.stopPropagation();else if(DT(r,u),s&4&&-1<P1.indexOf(r)){for(;f!==null;){var p=Tr(f);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var E=sr(p.pendingLanes);if(E!==0){var b=p;for(b.pendingLanes|=2,b.entangledLanes|=2;E;){var C=1<<31-sn(E);b.entanglements[1]|=C,E&=~C}Vr(p),(Ye&6)===0&&(Mh=Bn()+500,fu(0))}}break;case 13:b=co(p,2),b!==null&&xn(b,p,2),xh(),Dp(p,2)}if(p=Mp(u),p===null&&_p(r,s,u,Yh,o),p===f)break;f=p}f!==null&&u.stopPropagation()}else _p(r,s,u,null,o)}}function Mp(r){return r=Hn(r),Pp(r)}var Yh=null;function Pp(r){if(Yh=null,r=ei(r),r!==null){var s=l(r);if(s===null)r=null;else{var o=s.tag;if(o===13){if(r=c(s),r!==null)return r;r=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null)}}return Yh=r,null}function NT(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(kd()){case yl:return 2;case qa:return 8;case Fs:case Ld:return 32;case Ha:return 268435456;default:return 32}default:return 32}}var xp=!1,is=null,ss=null,as=null,Eu=new Map,Tu=new Map,os=[],P1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function DT(r,s){switch(r){case"focusin":case"focusout":is=null;break;case"dragenter":case"dragleave":ss=null;break;case"mouseover":case"mouseout":as=null;break;case"pointerover":case"pointerout":Eu.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Tu.delete(s.pointerId)}}function Au(r,s,o,u,f,p){return r===null||r.nativeEvent!==p?(r={blockedOn:s,domEventName:o,eventSystemFlags:u,nativeEvent:p,targetContainers:[f]},s!==null&&(s=Tr(s),s!==null&&CT(s)),r):(r.eventSystemFlags|=u,s=r.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),r)}function x1(r,s,o,u,f){switch(s){case"focusin":return is=Au(is,r,s,o,u,f),!0;case"dragenter":return ss=Au(ss,r,s,o,u,f),!0;case"mouseover":return as=Au(as,r,s,o,u,f),!0;case"pointerover":var p=f.pointerId;return Eu.set(p,Au(Eu.get(p)||null,r,s,o,u,f)),!0;case"gotpointercapture":return p=f.pointerId,Tu.set(p,Au(Tu.get(p)||null,r,s,o,u,f)),!0}return!1}function OT(r){var s=ei(r.target);if(s!==null){var o=l(s);if(o!==null){if(s=o.tag,s===13){if(s=c(o),s!==null){r.blockedOn=s,xc(r.priority,function(){if(o.tag===13){var u=Pn();u=Vi(u);var f=co(o,u);f!==null&&xn(f,o,u),Dp(o,u)}});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){r.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Xh(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var o=Mp(r.nativeEvent);if(o===null){o=r.nativeEvent;var u=new o.constructor(o.type,o);ii=u,o.target.dispatchEvent(u),ii=null}else return s=Tr(o),s!==null&&CT(s),r.blockedOn=o,!1;s.shift()}return!0}function MT(r,s,o){Xh(r)&&o.delete(s)}function V1(){xp=!1,is!==null&&Xh(is)&&(is=null),ss!==null&&Xh(ss)&&(ss=null),as!==null&&Xh(as)&&(as=null),Eu.forEach(MT),Tu.forEach(MT)}function Wh(r,s){r.blockedOn===s&&(r.blockedOn=null,xp||(xp=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,V1)))}var Zh=null;function PT(r){Zh!==r&&(Zh=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Zh===r&&(Zh=null);for(var s=0;s<r.length;s+=3){var o=r[s],u=r[s+1],f=r[s+2];if(typeof u!="function"){if(Pp(u||o)===null)continue;break}var p=Tr(o);p!==null&&(r.splice(s,3),s-=3,Pm(p,{pending:!0,data:f,method:o.method,action:u},u,f))}}))}function bu(r){function s(C){return Wh(C,r)}is!==null&&Wh(is,r),ss!==null&&Wh(ss,r),as!==null&&Wh(as,r),Eu.forEach(s),Tu.forEach(s);for(var o=0;o<os.length;o++){var u=os[o];u.blockedOn===r&&(u.blockedOn=null)}for(;0<os.length&&(o=os[0],o.blockedOn===null);)OT(o),o.blockedOn===null&&os.shift();if(o=(r.ownerDocument||r).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var f=o[u],p=o[u+1],E=f[Rt]||null;if(typeof p=="function")E||PT(o);else if(E){var b=null;if(p&&p.hasAttribute("formAction")){if(f=p,E=p[Rt]||null)b=E.formAction;else if(Pp(f)!==null)continue}else b=E.action;typeof b=="function"?o[u+1]=b:(o.splice(u,3),u-=3),PT(o)}}}function Vp(r){this._internalRoot=r}Jh.prototype.render=Vp.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(i(409));var o=s.current,u=Pn();RT(o,u,r,s,null,null)},Jh.prototype.unmount=Vp.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;RT(r.current,2,null,r,null,null),xh(),s[Fn]=null}};function Jh(r){this._internalRoot=r}Jh.prototype.unstable_scheduleHydration=function(r){if(r){var s=ki();r={blockedOn:null,target:r,priority:s};for(var o=0;o<os.length&&s!==0&&s<os[o].priority;o++);os.splice(o,0,r),o===0&&OT(r)}};var xT=e.version;if(xT!=="19.1.0")throw Error(i(527,xT,"19.1.0"));oe.findDOMNode=function(r){var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=m(s),r=r!==null?g(r):null,r=r===null?null:r.stateNode,r};var k1={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:X,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ef=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ef.isDisabled&&ef.supportsFiber)try{_t=ef.inject(k1),Qe=ef}catch{}}return Su.createRoot=function(r,s){if(!a(r))throw Error(i(299));var o=!1,u="",f=Xv,p=Wv,E=Zv,b=null;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(f=s.onUncaughtError),s.onCaughtError!==void 0&&(p=s.onCaughtError),s.onRecoverableError!==void 0&&(E=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(b=s.unstable_transitionCallbacks)),s=wT(r,1,!1,null,null,o,u,f,p,E,b,null),r[Fn]=s.current,yp(r),new Vp(s)},Su.hydrateRoot=function(r,s,o){if(!a(r))throw Error(i(299));var u=!1,f="",p=Xv,E=Wv,b=Zv,C=null,H=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(p=o.onUncaughtError),o.onCaughtError!==void 0&&(E=o.onCaughtError),o.onRecoverableError!==void 0&&(b=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(C=o.unstable_transitionCallbacks),o.formState!==void 0&&(H=o.formState)),s=wT(r,1,!0,s,o??null,u,f,p,E,b,C,H),s.context=ST(null),o=s.current,u=Pn(),u=Vi(u),f=Hi(u),f.callback=null,Gi(o,f,u),o=u,s.current.lanes=o,Jr(s,o),Vr(s),r[Fn]=s.current,yp(r),new Jh(s)},Su.version="19.1.0",Su}var HT;function $1(){if(HT)return Up.exports;HT=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Up.exports=G1(),Up.exports}var K1=$1(),Ru={},GT;function Q1(){if(GT)return Ru;GT=1,Object.defineProperty(Ru,"__esModule",{value:!0}),Ru.parse=c,Ru.serialize=g;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,i=/^[\u0020-\u003A\u003D-\u007E]*$/,a=Object.prototype.toString,l=(()=>{const A=function(){};return A.prototype=Object.create(null),A})();function c(A,S){const N=new l,q=A.length;if(q<2)return N;const U=S?.decode||_;let $=0;do{const ie=A.indexOf("=",$);if(ie===-1)break;const ne=A.indexOf(";",$),he=ne===-1?q:ne;if(ie>he){$=A.lastIndexOf(";",ie-1)+1;continue}const ce=d(A,$,ie),Te=m(A,ie,ce),P=A.slice(ce,Te);if(N[P]===void 0){let I=d(A,ie+1,he),R=m(A,he,I);const O=U(A.slice(I,R));N[P]=O}$=he+1}while($<q);return N}function d(A,S,N){do{const q=A.charCodeAt(S);if(q!==32&&q!==9)return S}while(++S<N);return N}function m(A,S,N){for(;S>N;){const q=A.charCodeAt(--S);if(q!==32&&q!==9)return S+1}return N}function g(A,S,N){const q=N?.encode||encodeURIComponent;if(!n.test(A))throw new TypeError(`argument name is invalid: ${A}`);const U=q(S);if(!e.test(U))throw new TypeError(`argument val is invalid: ${S}`);let $=A+"="+U;if(!N)return $;if(N.maxAge!==void 0){if(!Number.isInteger(N.maxAge))throw new TypeError(`option maxAge is invalid: ${N.maxAge}`);$+="; Max-Age="+N.maxAge}if(N.domain){if(!t.test(N.domain))throw new TypeError(`option domain is invalid: ${N.domain}`);$+="; Domain="+N.domain}if(N.path){if(!i.test(N.path))throw new TypeError(`option path is invalid: ${N.path}`);$+="; Path="+N.path}if(N.expires){if(!T(N.expires)||!Number.isFinite(N.expires.valueOf()))throw new TypeError(`option expires is invalid: ${N.expires}`);$+="; Expires="+N.expires.toUTCString()}if(N.httpOnly&&($+="; HttpOnly"),N.secure&&($+="; Secure"),N.partitioned&&($+="; Partitioned"),N.priority)switch(typeof N.priority=="string"?N.priority.toLowerCase():void 0){case"low":$+="; Priority=Low";break;case"medium":$+="; Priority=Medium";break;case"high":$+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${N.priority}`)}if(N.sameSite)switch(typeof N.sameSite=="string"?N.sameSite.toLowerCase():N.sameSite){case!0:case"strict":$+="; SameSite=Strict";break;case"lax":$+="; SameSite=Lax";break;case"none":$+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${N.sameSite}`)}return $}function _(A){if(A.indexOf("%")===-1)return A;try{return decodeURIComponent(A)}catch{return A}}function T(A){return a.call(A)==="[object Date]"}return Ru}Q1();var $T="popstate";function Y1(n={}){function e(i,a){let{pathname:l,search:c,hash:d}=i.location;return hg("",{pathname:l,search:c,hash:d},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(i,a){return typeof a=="string"?a:$u(a)}return W1(e,t,null,n)}function pt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Fr(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function X1(){return Math.random().toString(36).substring(2,10)}function KT(n,e){return{usr:n.state,key:n.key,idx:e}}function hg(n,e,t=null,i){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?sl(e):e,state:t,key:e&&e.key||i||X1()}}function $u({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function sl(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substring(i),n=n.substring(0,i)),n&&(e.pathname=n)}return e}function W1(n,e,t,i={}){let{window:a=document.defaultView,v5Compat:l=!1}=i,c=a.history,d="POP",m=null,g=_();g==null&&(g=0,c.replaceState({...c.state,idx:g},""));function _(){return(c.state||{idx:null}).idx}function T(){d="POP";let U=_(),$=U==null?null:U-g;g=U,m&&m({action:d,location:q.location,delta:$})}function A(U,$){d="PUSH";let ie=hg(q.location,U,$);g=_()+1;let ne=KT(ie,g),he=q.createHref(ie);try{c.pushState(ne,"",he)}catch(ce){if(ce instanceof DOMException&&ce.name==="DataCloneError")throw ce;a.location.assign(he)}l&&m&&m({action:d,location:q.location,delta:1})}function S(U,$){d="REPLACE";let ie=hg(q.location,U,$);g=_();let ne=KT(ie,g),he=q.createHref(ie);c.replaceState(ne,"",he),l&&m&&m({action:d,location:q.location,delta:0})}function N(U){return Z1(U)}let q={get action(){return d},get location(){return n(a,c)},listen(U){if(m)throw new Error("A history only accepts one active listener");return a.addEventListener($T,T),m=U,()=>{a.removeEventListener($T,T),m=null}},createHref(U){return e(a,U)},createURL:N,encodeLocation(U){let $=N(U);return{pathname:$.pathname,search:$.search,hash:$.hash}},push:A,replace:S,go(U){return c.go(U)}};return q}function Z1(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),pt(t,"No window.location.(origin|href) available to create URL");let i=typeof n=="string"?n:$u(n);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=t+i),new URL(i,t)}function cb(n,e,t="/"){return J1(n,e,t,!1)}function J1(n,e,t,i){let a=typeof e=="string"?sl(e):e,l=Ci(a.pathname||"/",t);if(l==null)return null;let c=hb(n);eC(c);let d=null;for(let m=0;d==null&&m<c.length;++m){let g=hC(l);d=uC(c[m],g,i)}return d}function hb(n,e=[],t=[],i=""){let a=(l,c,d)=>{let m={relativePath:d===void 0?l.path||"":d,caseSensitive:l.caseSensitive===!0,childrenIndex:c,route:l};m.relativePath.startsWith("/")&&(pt(m.relativePath.startsWith(i),`Absolute route path "${m.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),m.relativePath=m.relativePath.slice(i.length));let g=Ri([i,m.relativePath]),_=t.concat(m);l.children&&l.children.length>0&&(pt(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),hb(l.children,e,_,g)),!(l.path==null&&!l.index)&&e.push({path:g,score:oC(g,l.index),routesMeta:_})};return n.forEach((l,c)=>{if(l.path===""||!l.path?.includes("?"))a(l,c);else for(let d of fb(l.path))a(l,c,d)}),e}function fb(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,a=t.endsWith("?"),l=t.replace(/\?$/,"");if(i.length===0)return a?[l,""]:[l];let c=fb(i.join("/")),d=[];return d.push(...c.map(m=>m===""?l:[l,m].join("/"))),a&&d.push(...c),d.map(m=>n.startsWith("/")&&m===""?"/":m)}function eC(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:lC(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var tC=/^:[\w-]+$/,nC=3,rC=2,iC=1,sC=10,aC=-2,QT=n=>n==="*";function oC(n,e){let t=n.split("/"),i=t.length;return t.some(QT)&&(i+=aC),e&&(i+=rC),t.filter(a=>!QT(a)).reduce((a,l)=>a+(tC.test(l)?nC:l===""?iC:sC),i)}function lC(n,e){return n.length===e.length&&n.slice(0,-1).every((i,a)=>i===e[a])?n[n.length-1]-e[e.length-1]:0}function uC(n,e,t=!1){let{routesMeta:i}=n,a={},l="/",c=[];for(let d=0;d<i.length;++d){let m=i[d],g=d===i.length-1,_=l==="/"?e:e.slice(l.length)||"/",T=If({path:m.relativePath,caseSensitive:m.caseSensitive,end:g},_),A=m.route;if(!T&&g&&t&&!i[i.length-1].route.index&&(T=If({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},_)),!T)return null;Object.assign(a,T.params),c.push({params:a,pathname:Ri([l,T.pathname]),pathnameBase:pC(Ri([l,T.pathnameBase])),route:A}),T.pathnameBase!=="/"&&(l=Ri([l,T.pathnameBase]))}return c}function If(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=cC(n.path,n.caseSensitive,n.end),a=e.match(t);if(!a)return null;let l=a[0],c=l.replace(/(.)\/+$/,"$1"),d=a.slice(1);return{params:i.reduce((g,{paramName:_,isOptional:T},A)=>{if(_==="*"){let N=d[A]||"";c=l.slice(0,l.length-N.length).replace(/(.)\/+$/,"$1")}const S=d[A];return T&&!S?g[_]=void 0:g[_]=(S||"").replace(/%2F/g,"/"),g},{}),pathname:l,pathnameBase:c,pattern:n}}function cC(n,e=!1,t=!0){Fr(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let i=[],a="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,m)=>(i.push({paramName:d,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),a+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":n!==""&&n!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),i]}function hC(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Fr(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Ci(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}function fC(n,e="/"){let{pathname:t,search:i="",hash:a=""}=typeof n=="string"?sl(n):n;return{pathname:t?t.startsWith("/")?t:dC(t,e):e,search:gC(i),hash:yC(a)}}function dC(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function Fp(n,e,t,i){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function mC(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function db(n){let e=mC(n);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function mb(n,e,t,i=!1){let a;typeof n=="string"?a=sl(n):(a={...n},pt(!a.pathname||!a.pathname.includes("?"),Fp("?","pathname","search",a)),pt(!a.pathname||!a.pathname.includes("#"),Fp("#","pathname","hash",a)),pt(!a.search||!a.search.includes("#"),Fp("#","search","hash",a)));let l=n===""||a.pathname==="",c=l?"/":a.pathname,d;if(c==null)d=t;else{let T=e.length-1;if(!i&&c.startsWith("..")){let A=c.split("/");for(;A[0]==="..";)A.shift(),T-=1;a.pathname=A.join("/")}d=T>=0?e[T]:"/"}let m=fC(a,d),g=c&&c!=="/"&&c.endsWith("/"),_=(l||c===".")&&t.endsWith("/");return!m.pathname.endsWith("/")&&(g||_)&&(m.pathname+="/"),m}var Ri=n=>n.join("/").replace(/\/\/+/g,"/"),pC=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),gC=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,yC=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function _C(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var pb=["POST","PUT","PATCH","DELETE"];new Set(pb);var vC=["GET",...pb];new Set(vC);var al=z.createContext(null);al.displayName="DataRouter";var ed=z.createContext(null);ed.displayName="DataRouterState";var gb=z.createContext({isTransitioning:!1});gb.displayName="ViewTransition";var EC=z.createContext(new Map);EC.displayName="Fetchers";var TC=z.createContext(null);TC.displayName="Await";var $r=z.createContext(null);$r.displayName="Navigation";var cc=z.createContext(null);cc.displayName="Location";var Kr=z.createContext({outlet:null,matches:[],isDataRoute:!1});Kr.displayName="Route";var Kg=z.createContext(null);Kg.displayName="RouteError";function AC(n,{relative:e}={}){pt(hc(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=z.useContext($r),{hash:a,pathname:l,search:c}=fc(n,{relative:e}),d=l;return t!=="/"&&(d=l==="/"?t:Ri([t,l])),i.createHref({pathname:d,search:c,hash:a})}function hc(){return z.useContext(cc)!=null}function Ms(){return pt(hc(),"useLocation() may be used only in the context of a <Router> component."),z.useContext(cc).location}var yb="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function _b(n){z.useContext($r).static||z.useLayoutEffect(n)}function bC(){let{isDataRoute:n}=z.useContext(Kr);return n?UC():wC()}function wC(){pt(hc(),"useNavigate() may be used only in the context of a <Router> component.");let n=z.useContext(al),{basename:e,navigator:t}=z.useContext($r),{matches:i}=z.useContext(Kr),{pathname:a}=Ms(),l=JSON.stringify(db(i)),c=z.useRef(!1);return _b(()=>{c.current=!0}),z.useCallback((m,g={})=>{if(Fr(c.current,yb),!c.current)return;if(typeof m=="number"){t.go(m);return}let _=mb(m,JSON.parse(l),a,g.relative==="path");n==null&&e!=="/"&&(_.pathname=_.pathname==="/"?e:Ri([e,_.pathname])),(g.replace?t.replace:t.push)(_,g.state,g)},[e,t,l,a,n])}var SC=z.createContext(null);function RC(n){let e=z.useContext(Kr).outlet;return e&&z.createElement(SC.Provider,{value:n},e)}function fc(n,{relative:e}={}){let{matches:t}=z.useContext(Kr),{pathname:i}=Ms(),a=JSON.stringify(db(t));return z.useMemo(()=>mb(n,JSON.parse(a),i,e==="path"),[n,a,i,e])}function IC(n,e){return vb(n,e)}function vb(n,e,t,i){pt(hc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=z.useContext($r),{matches:l}=z.useContext(Kr),c=l[l.length-1],d=c?c.params:{},m=c?c.pathname:"/",g=c?c.pathnameBase:"/",_=c&&c.route;{let $=_&&_.path||"";Eb(m,!_||$.endsWith("*")||$.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${$}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${$}"> to <Route path="${$==="/"?"*":`${$}/*`}">.`)}let T=Ms(),A;if(e){let $=typeof e=="string"?sl(e):e;pt(g==="/"||$.pathname?.startsWith(g),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${$.pathname}" was given in the \`location\` prop.`),A=$}else A=T;let S=A.pathname||"/",N=S;if(g!=="/"){let $=g.replace(/^\//,"").split("/");N="/"+S.replace(/^\//,"").split("/").slice($.length).join("/")}let q=cb(n,{pathname:N});Fr(_||q!=null,`No routes matched location "${A.pathname}${A.search}${A.hash}" `),Fr(q==null||q[q.length-1].route.element!==void 0||q[q.length-1].route.Component!==void 0||q[q.length-1].route.lazy!==void 0,`Matched leaf route at location "${A.pathname}${A.search}${A.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let U=MC(q&&q.map($=>Object.assign({},$,{params:Object.assign({},d,$.params),pathname:Ri([g,a.encodeLocation?a.encodeLocation($.pathname).pathname:$.pathname]),pathnameBase:$.pathnameBase==="/"?g:Ri([g,a.encodeLocation?a.encodeLocation($.pathnameBase).pathname:$.pathnameBase])})),l,t,i);return e&&U?z.createElement(cc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...A},navigationType:"POP"}},U):U}function CC(){let n=LC(),e=_C(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i},l={padding:"2px 4px",backgroundColor:i},c=null;return console.error("Error handled by React Router default ErrorBoundary:",n),c=z.createElement(z.Fragment,null,z.createElement("p",null,"💿 Hey developer 👋"),z.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",z.createElement("code",{style:l},"ErrorBoundary")," or"," ",z.createElement("code",{style:l},"errorElement")," prop on your route.")),z.createElement(z.Fragment,null,z.createElement("h2",null,"Unexpected Application Error!"),z.createElement("h3",{style:{fontStyle:"italic"}},e),t?z.createElement("pre",{style:a},t):null,c)}var NC=z.createElement(CC,null),DC=class extends z.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?z.createElement(Kr.Provider,{value:this.props.routeContext},z.createElement(Kg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function OC({routeContext:n,match:e,children:t}){let i=z.useContext(al);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),z.createElement(Kr.Provider,{value:n},t)}function MC(n,e=[],t=null,i=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let a=n,l=t?.errors;if(l!=null){let m=a.findIndex(g=>g.route.id&&l?.[g.route.id]!==void 0);pt(m>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),a=a.slice(0,Math.min(a.length,m+1))}let c=!1,d=-1;if(t)for(let m=0;m<a.length;m++){let g=a[m];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(d=m),g.route.id){let{loaderData:_,errors:T}=t,A=g.route.loader&&!_.hasOwnProperty(g.route.id)&&(!T||T[g.route.id]===void 0);if(g.route.lazy||A){c=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}return a.reduceRight((m,g,_)=>{let T,A=!1,S=null,N=null;t&&(T=l&&g.route.id?l[g.route.id]:void 0,S=g.route.errorElement||NC,c&&(d<0&&_===0?(Eb("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),A=!0,N=null):d===_&&(A=!0,N=g.route.hydrateFallbackElement||null)));let q=e.concat(a.slice(0,_+1)),U=()=>{let $;return T?$=S:A?$=N:g.route.Component?$=z.createElement(g.route.Component,null):g.route.element?$=g.route.element:$=m,z.createElement(OC,{match:g,routeContext:{outlet:m,matches:q,isDataRoute:t!=null},children:$})};return t&&(g.route.ErrorBoundary||g.route.errorElement||_===0)?z.createElement(DC,{location:t.location,revalidation:t.revalidation,component:S,error:T,children:U(),routeContext:{outlet:null,matches:q,isDataRoute:!0}}):U()},null)}function Qg(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function PC(n){let e=z.useContext(al);return pt(e,Qg(n)),e}function xC(n){let e=z.useContext(ed);return pt(e,Qg(n)),e}function VC(n){let e=z.useContext(Kr);return pt(e,Qg(n)),e}function Yg(n){let e=VC(n),t=e.matches[e.matches.length-1];return pt(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function kC(){return Yg("useRouteId")}function LC(){let n=z.useContext(Kg),e=xC("useRouteError"),t=Yg("useRouteError");return n!==void 0?n:e.errors?.[t]}function UC(){let{router:n}=PC("useNavigate"),e=Yg("useNavigate"),t=z.useRef(!1);return _b(()=>{t.current=!0}),z.useCallback(async(a,l={})=>{Fr(t.current,yb),t.current&&(typeof a=="number"?n.navigate(a):await n.navigate(a,{fromRouteId:e,...l}))},[n,e])}var YT={};function Eb(n,e,t){!e&&!YT[n]&&(YT[n]=!0,Fr(!1,t))}z.memo(zC);function zC({routes:n,future:e,state:t}){return vb(n,void 0,t,e)}function jC(n){return RC(n.context)}function er(n){pt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function BC({basename:n="/",children:e=null,location:t,navigationType:i="POP",navigator:a,static:l=!1}){pt(!hc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=n.replace(/^\/*/,"/"),d=z.useMemo(()=>({basename:c,navigator:a,static:l,future:{}}),[c,a,l]);typeof t=="string"&&(t=sl(t));let{pathname:m="/",search:g="",hash:_="",state:T=null,key:A="default"}=t,S=z.useMemo(()=>{let N=Ci(m,c);return N==null?null:{location:{pathname:N,search:g,hash:_,state:T,key:A},navigationType:i}},[c,m,g,_,T,A,i]);return Fr(S!=null,`<Router basename="${c}"> is not able to match the URL "${m}${g}${_}" because it does not start with the basename, so the <Router> won't render anything.`),S==null?null:z.createElement($r.Provider,{value:d},z.createElement(cc.Provider,{children:e,value:S}))}function FC({children:n,location:e}){return IC(fg(n),e)}function fg(n,e=[]){let t=[];return z.Children.forEach(n,(i,a)=>{if(!z.isValidElement(i))return;let l=[...e,a];if(i.type===z.Fragment){t.push.apply(t,fg(i.props.children,l));return}pt(i.type===er,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),pt(!i.props.index||!i.props.children,"An index route cannot have child routes.");let c={id:i.props.id||l.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(c.children=fg(i.props.children,l)),t.push(c)}),t}var ff="get",df="application/x-www-form-urlencoded";function td(n){return n!=null&&typeof n.tagName=="string"}function qC(n){return td(n)&&n.tagName.toLowerCase()==="button"}function HC(n){return td(n)&&n.tagName.toLowerCase()==="form"}function GC(n){return td(n)&&n.tagName.toLowerCase()==="input"}function $C(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function KC(n,e){return n.button===0&&(!e||e==="_self")&&!$C(n)}var tf=null;function QC(){if(tf===null)try{new FormData(document.createElement("form"),0),tf=!1}catch{tf=!0}return tf}var YC=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function qp(n){return n!=null&&!YC.has(n)?(Fr(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${df}"`),null):n}function XC(n,e){let t,i,a,l,c;if(HC(n)){let d=n.getAttribute("action");i=d?Ci(d,e):null,t=n.getAttribute("method")||ff,a=qp(n.getAttribute("enctype"))||df,l=new FormData(n)}else if(qC(n)||GC(n)&&(n.type==="submit"||n.type==="image")){let d=n.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=n.getAttribute("formaction")||d.getAttribute("action");if(i=m?Ci(m,e):null,t=n.getAttribute("formmethod")||d.getAttribute("method")||ff,a=qp(n.getAttribute("formenctype"))||qp(d.getAttribute("enctype"))||df,l=new FormData(d,n),!QC()){let{name:g,type:_,value:T}=n;if(_==="image"){let A=g?`${g}.`:"";l.append(`${A}x`,"0"),l.append(`${A}y`,"0")}else g&&l.append(g,T)}}else{if(td(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=ff,i=null,a=df,c=n}return l&&a==="text/plain"&&(c=l,l=void 0),{action:i,method:t.toLowerCase(),encType:a,formData:l,body:c}}function Xg(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function WC(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function ZC(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function JC(n,e,t){let i=await Promise.all(n.map(async a=>{let l=e.routes[a.route.id];if(l){let c=await WC(l,t);return c.links?c.links():[]}return[]}));return rN(i.flat(1).filter(ZC).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function XT(n,e,t,i,a,l){let c=(m,g)=>t[g]?m.route.id!==t[g].route.id:!0,d=(m,g)=>t[g].pathname!==m.pathname||t[g].route.path?.endsWith("*")&&t[g].params["*"]!==m.params["*"];return l==="assets"?e.filter((m,g)=>c(m,g)||d(m,g)):l==="data"?e.filter((m,g)=>{let _=i.routes[m.route.id];if(!_||!_.hasLoader)return!1;if(c(m,g)||d(m,g))return!0;if(m.route.shouldRevalidate){let T=m.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof T=="boolean")return T}return!0}):[]}function eN(n,e,{includeHydrateFallback:t}={}){return tN(n.map(i=>{let a=e.routes[i.route.id];if(!a)return[];let l=[a.module];return a.clientActionModule&&(l=l.concat(a.clientActionModule)),a.clientLoaderModule&&(l=l.concat(a.clientLoaderModule)),t&&a.hydrateFallbackModule&&(l=l.concat(a.hydrateFallbackModule)),a.imports&&(l=l.concat(a.imports)),l}).flat(1))}function tN(n){return[...new Set(n)]}function nN(n){let e={},t=Object.keys(n).sort();for(let i of t)e[i]=n[i];return e}function rN(n,e){let t=new Set;return new Set(e),n.reduce((i,a)=>{let l=JSON.stringify(nN(a));return t.has(l)||(t.add(l),i.push({key:l,link:a})),i},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var iN=new Set([100,101,204,205]);function sN(n,e){let t=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t.pathname==="/"?t.pathname="_root.data":e&&Ci(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function Tb(){let n=z.useContext(al);return Xg(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function aN(){let n=z.useContext(ed);return Xg(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Wg=z.createContext(void 0);Wg.displayName="FrameworkContext";function Ab(){let n=z.useContext(Wg);return Xg(n,"You must render this element inside a <HydratedRouter> element"),n}function oN(n,e){let t=z.useContext(Wg),[i,a]=z.useState(!1),[l,c]=z.useState(!1),{onFocus:d,onBlur:m,onMouseEnter:g,onMouseLeave:_,onTouchStart:T}=e,A=z.useRef(null);z.useEffect(()=>{if(n==="render"&&c(!0),n==="viewport"){let q=$=>{$.forEach(ie=>{c(ie.isIntersecting)})},U=new IntersectionObserver(q,{threshold:.5});return A.current&&U.observe(A.current),()=>{U.disconnect()}}},[n]),z.useEffect(()=>{if(i){let q=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(q)}}},[i]);let S=()=>{a(!0)},N=()=>{a(!1),c(!1)};return t?n!=="intent"?[l,A,{}]:[l,A,{onFocus:Iu(d,S),onBlur:Iu(m,N),onMouseEnter:Iu(g,S),onMouseLeave:Iu(_,N),onTouchStart:Iu(T,S)}]:[!1,A,{}]}function Iu(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function lN({page:n,...e}){let{router:t}=Tb(),i=z.useMemo(()=>cb(t.routes,n,t.basename),[t.routes,n,t.basename]);return i?z.createElement(cN,{page:n,matches:i,...e}):null}function uN(n){let{manifest:e,routeModules:t}=Ab(),[i,a]=z.useState([]);return z.useEffect(()=>{let l=!1;return JC(n,e,t).then(c=>{l||a(c)}),()=>{l=!0}},[n,e,t]),i}function cN({page:n,matches:e,...t}){let i=Ms(),{manifest:a,routeModules:l}=Ab(),{basename:c}=Tb(),{loaderData:d,matches:m}=aN(),g=z.useMemo(()=>XT(n,e,m,a,i,"data"),[n,e,m,a,i]),_=z.useMemo(()=>XT(n,e,m,a,i,"assets"),[n,e,m,a,i]),T=z.useMemo(()=>{if(n===i.pathname+i.search+i.hash)return[];let N=new Set,q=!1;if(e.forEach($=>{let ie=a.routes[$.route.id];!ie||!ie.hasLoader||(!g.some(ne=>ne.route.id===$.route.id)&&$.route.id in d&&l[$.route.id]?.shouldRevalidate||ie.hasClientLoader?q=!0:N.add($.route.id))}),N.size===0)return[];let U=sN(n,c);return q&&N.size>0&&U.searchParams.set("_routes",e.filter($=>N.has($.route.id)).map($=>$.route.id).join(",")),[U.pathname+U.search]},[c,d,i,a,g,e,n,l]),A=z.useMemo(()=>eN(_,a),[_,a]),S=uN(_);return z.createElement(z.Fragment,null,T.map(N=>z.createElement("link",{key:N,rel:"prefetch",as:"fetch",href:N,...t})),A.map(N=>z.createElement("link",{key:N,rel:"modulepreload",href:N,...t})),S.map(({key:N,link:q})=>z.createElement("link",{key:N,...q})))}function hN(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var bb=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{bb&&(window.__reactRouterVersion="7.6.3")}catch{}function fN({basename:n,children:e,window:t}){let i=z.useRef();i.current==null&&(i.current=Y1({window:t,v5Compat:!0}));let a=i.current,[l,c]=z.useState({action:a.action,location:a.location}),d=z.useCallback(m=>{z.startTransition(()=>c(m))},[c]);return z.useLayoutEffect(()=>a.listen(d),[a,d]),z.createElement(BC,{basename:n,children:e,location:l.location,navigationType:l.action,navigator:a})}var wb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Zg=z.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:a,reloadDocument:l,replace:c,state:d,target:m,to:g,preventScrollReset:_,viewTransition:T,...A},S){let{basename:N}=z.useContext($r),q=typeof g=="string"&&wb.test(g),U,$=!1;if(typeof g=="string"&&q&&(U=g,bb))try{let R=new URL(window.location.href),O=g.startsWith("//")?new URL(R.protocol+g):new URL(g),V=Ci(O.pathname,N);O.origin===R.origin&&V!=null?g=V+O.search+O.hash:$=!0}catch{Fr(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let ie=AC(g,{relative:a}),[ne,he,ce]=oN(i,A),Te=gN(g,{replace:c,state:d,target:m,preventScrollReset:_,relative:a,viewTransition:T});function P(R){e&&e(R),R.defaultPrevented||Te(R)}let I=z.createElement("a",{...A,...ce,href:U||ie,onClick:$||l?e:P,ref:hN(S,he),target:m,"data-discover":!q&&t==="render"?"true":void 0});return ne&&!q?z.createElement(z.Fragment,null,I,z.createElement(lN,{page:ie})):I});Zg.displayName="Link";var dN=z.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:a=!1,style:l,to:c,viewTransition:d,children:m,...g},_){let T=fc(c,{relative:g.relative}),A=Ms(),S=z.useContext(ed),{navigator:N,basename:q}=z.useContext($r),U=S!=null&&TN(T)&&d===!0,$=N.encodeLocation?N.encodeLocation(T).pathname:T.pathname,ie=A.pathname,ne=S&&S.navigation&&S.navigation.location?S.navigation.location.pathname:null;t||(ie=ie.toLowerCase(),ne=ne?ne.toLowerCase():null,$=$.toLowerCase()),ne&&q&&(ne=Ci(ne,q)||ne);const he=$!=="/"&&$.endsWith("/")?$.length-1:$.length;let ce=ie===$||!a&&ie.startsWith($)&&ie.charAt(he)==="/",Te=ne!=null&&(ne===$||!a&&ne.startsWith($)&&ne.charAt($.length)==="/"),P={isActive:ce,isPending:Te,isTransitioning:U},I=ce?e:void 0,R;typeof i=="function"?R=i(P):R=[i,ce?"active":null,Te?"pending":null,U?"transitioning":null].filter(Boolean).join(" ");let O=typeof l=="function"?l(P):l;return z.createElement(Zg,{...g,"aria-current":I,className:R,ref:_,style:O,to:c,viewTransition:d},typeof m=="function"?m(P):m)});dN.displayName="NavLink";var mN=z.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:a,state:l,method:c=ff,action:d,onSubmit:m,relative:g,preventScrollReset:_,viewTransition:T,...A},S)=>{let N=vN(),q=EN(d,{relative:g}),U=c.toLowerCase()==="get"?"get":"post",$=typeof d=="string"&&wb.test(d),ie=ne=>{if(m&&m(ne),ne.defaultPrevented)return;ne.preventDefault();let he=ne.nativeEvent.submitter,ce=he?.getAttribute("formmethod")||c;N(he||ne.currentTarget,{fetcherKey:e,method:ce,navigate:t,replace:a,state:l,relative:g,preventScrollReset:_,viewTransition:T})};return z.createElement("form",{ref:S,method:U,action:q,onSubmit:i?m:ie,...A,"data-discover":!$&&n==="render"?"true":void 0})});mN.displayName="Form";function pN(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Sb(n){let e=z.useContext(al);return pt(e,pN(n)),e}function gN(n,{target:e,replace:t,state:i,preventScrollReset:a,relative:l,viewTransition:c}={}){let d=bC(),m=Ms(),g=fc(n,{relative:l});return z.useCallback(_=>{if(KC(_,e)){_.preventDefault();let T=t!==void 0?t:$u(m)===$u(g);d(n,{replace:T,state:i,preventScrollReset:a,relative:l,viewTransition:c})}},[m,d,g,t,i,e,n,a,l,c])}var yN=0,_N=()=>`__${String(++yN)}__`;function vN(){let{router:n}=Sb("useSubmit"),{basename:e}=z.useContext($r),t=kC();return z.useCallback(async(i,a={})=>{let{action:l,method:c,encType:d,formData:m,body:g}=XC(i,e);if(a.navigate===!1){let _=a.fetcherKey||_N();await n.fetch(_,t,a.action||l,{preventScrollReset:a.preventScrollReset,formData:m,body:g,formMethod:a.method||c,formEncType:a.encType||d,flushSync:a.flushSync})}else await n.navigate(a.action||l,{preventScrollReset:a.preventScrollReset,formData:m,body:g,formMethod:a.method||c,formEncType:a.encType||d,replace:a.replace,state:a.state,fromRouteId:t,flushSync:a.flushSync,viewTransition:a.viewTransition})},[n,e,t])}function EN(n,{relative:e}={}){let{basename:t}=z.useContext($r),i=z.useContext(Kr);pt(i,"useFormAction must be used inside a RouteContext");let[a]=i.matches.slice(-1),l={...fc(n||".",{relative:e})},c=Ms();if(n==null){l.search=c.search;let d=new URLSearchParams(l.search),m=d.getAll("index");if(m.some(_=>_==="")){d.delete("index"),m.filter(T=>T).forEach(T=>d.append("index",T));let _=d.toString();l.search=_?`?${_}`:""}}return(!n||n===".")&&a.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:Ri([t,l.pathname])),$u(l)}function TN(n,e={}){let t=z.useContext(gb);pt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=Sb("useViewTransitionState"),a=fc(n,{relative:e.relative});if(!t.isTransitioning)return!1;let l=Ci(t.currentLocation.pathname,i)||t.currentLocation.pathname,c=Ci(t.nextLocation.pathname,i)||t.nextLocation.pathname;return If(a.pathname,c)!=null||If(a.pathname,l)!=null}[...iN];const AN="modulepreload",bN=function(n){return"/combustibles/"+n},WT={},Qr=function(e,t,i){let a=Promise.resolve();if(t&&t.length>0){let m=function(g){return Promise.all(g.map(_=>Promise.resolve(_).then(T=>({status:"fulfilled",value:T}),T=>({status:"rejected",reason:T}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),d=c?.nonce||c?.getAttribute("nonce");a=m(t.map(g=>{if(g=bN(g),g in WT)return;WT[g]=!0;const _=g.endsWith(".css"),T=_?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${T}`))return;const A=document.createElement("link");if(A.rel=_?"stylesheet":AN,_||(A.as="script"),A.crossOrigin="",A.href=g,d&&A.setAttribute("nonce",d),document.head.appendChild(A),_)return new Promise((S,N)=>{A.addEventListener("load",S),A.addEventListener("error",()=>N(new Error(`Unable to preload CSS for ${g}`)))})}))}function l(c){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=c,window.dispatchEvent(d),!d.defaultPrevented)throw c}return a.then(c=>{for(const d of c||[])d.status==="rejected"&&l(d.reason);return e().catch(l)})},wN=()=>{};var ZT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rb=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let a=n.charCodeAt(i);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(a=65536+((a&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},SN=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const a=n[t++];if(a<128)e[i++]=String.fromCharCode(a);else if(a>191&&a<224){const l=n[t++];e[i++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=n[t++],c=n[t++],d=n[t++],m=((a&7)<<18|(l&63)<<12|(c&63)<<6|d&63)-65536;e[i++]=String.fromCharCode(55296+(m>>10)),e[i++]=String.fromCharCode(56320+(m&1023))}else{const l=n[t++],c=n[t++];e[i++]=String.fromCharCode((a&15)<<12|(l&63)<<6|c&63)}}return e.join("")},Ib={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let a=0;a<n.length;a+=3){const l=n[a],c=a+1<n.length,d=c?n[a+1]:0,m=a+2<n.length,g=m?n[a+2]:0,_=l>>2,T=(l&3)<<4|d>>4;let A=(d&15)<<2|g>>6,S=g&63;m||(S=64,c||(A=64)),i.push(t[_],t[T],t[A],t[S])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Rb(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):SN(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let a=0;a<n.length;){const l=t[n.charAt(a++)],d=a<n.length?t[n.charAt(a)]:0;++a;const g=a<n.length?t[n.charAt(a)]:64;++a;const T=a<n.length?t[n.charAt(a)]:64;if(++a,l==null||d==null||g==null||T==null)throw new RN;const A=l<<2|d>>4;if(i.push(A),g!==64){const S=d<<4&240|g>>2;if(i.push(S),T!==64){const N=g<<6&192|T;i.push(N)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class RN extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const IN=function(n){const e=Rb(n);return Ib.encodeByteArray(e,!0)},Cf=function(n){return IN(n).replace(/\./g,"")},Cb=function(n){try{return Ib.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NN=()=>CN().__FIREBASE_DEFAULTS__,DN=()=>{if(typeof process>"u"||typeof ZT>"u")return;const n=ZT.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},ON=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Cb(n[1]);return e&&JSON.parse(e)},nd=()=>{try{return wN()||NN()||DN()||ON()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Nb=n=>{var e,t;return(t=(e=nd())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},Db=n=>{const e=Nb(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},Ob=()=>{var n;return(n=nd())===null||n===void 0?void 0:n.config},Mb=n=>{var e;return(e=nd())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Va(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Jg(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pb(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",a=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Cf(JSON.stringify(t)),Cf(JSON.stringify(c)),""].join(".")}const Vu={};function PN(){const n={prod:[],emulator:[]};for(const e of Object.keys(Vu))Vu[e]?n.emulator.push(e):n.prod.push(e);return n}function xN(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let JT=!1;function ey(n,e){if(typeof window>"u"||typeof document>"u"||!Va(window.location.host)||Vu[n]===e||Vu[n]||JT)return;Vu[n]=e;function t(A){return`__firebase__banner__${A}`}const i="__firebase__banner",l=PN().prod.length>0;function c(){const A=document.getElementById(i);A&&A.remove()}function d(A){A.style.display="flex",A.style.background="#7faaf0",A.style.position="fixed",A.style.bottom="5px",A.style.left="5px",A.style.padding=".5em",A.style.borderRadius="5px",A.style.alignItems="center"}function m(A,S){A.setAttribute("width","24"),A.setAttribute("id",S),A.setAttribute("height","24"),A.setAttribute("viewBox","0 0 24 24"),A.setAttribute("fill","none"),A.style.marginLeft="-6px"}function g(){const A=document.createElement("span");return A.style.cursor="pointer",A.style.marginLeft="16px",A.style.fontSize="24px",A.innerHTML=" &times;",A.onclick=()=>{JT=!0,c()},A}function _(A,S){A.setAttribute("id",S),A.innerText="Learn more",A.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",A.setAttribute("target","__blank"),A.style.paddingLeft="5px",A.style.textDecoration="underline"}function T(){const A=xN(i),S=t("text"),N=document.getElementById(S)||document.createElement("span"),q=t("learnmore"),U=document.getElementById(q)||document.createElement("a"),$=t("preprendIcon"),ie=document.getElementById($)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(A.created){const ne=A.element;d(ne),_(U,q);const he=g();m(ie,$),ne.append(ie,N,U,he),document.body.appendChild(ne)}l?(N.innerText="Preview backend disconnected.",ie.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ie.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,N.innerText="Preview backend running in this workspace."),N.setAttribute("id",S)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function VN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(mn())}function kN(){var n;const e=(n=nd())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function LN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function ty(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function UN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function zN(){const n=mn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function jN(){return!kN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function rd(){try{return typeof indexedDB=="object"}catch{return!1}}function id(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(i);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{var l;e(((l=a.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}function ny(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BN="FirebaseError";class ir extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=BN,Object.setPrototypeOf(this,ir.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ps.prototype.create)}}class Ps{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],c=l?FN(l,i):"Error",d=`${this.serviceName}: ${c} (${a}).`;return new ir(a,d,i)}}function FN(n,e){return n.replace(qN,(t,i)=>{const a=e[i];return a!=null?String(a):`<${i}?>`})}const qN=/\{\$([^}]+)}/g;function HN(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Ts(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const a of t){if(!i.includes(a))return!1;const l=n[a],c=e[a];if(e0(l)&&e0(c)){if(!Ts(l,c))return!1}else if(l!==c)return!1}for(const a of i)if(!t.includes(a))return!1;return!0}function e0(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dc(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Cu(n){const e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[a,l]=i.split("=");e[decodeURIComponent(a)]=decodeURIComponent(l)}}),e}function Nu(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function GN(n,e){const t=new $N(n,e);return t.subscribe.bind(t)}class $N{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let a;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");KN(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:i},a.next===void 0&&(a.next=Hp),a.error===void 0&&(a.error=Hp),a.complete===void 0&&(a.complete=Hp);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function KN(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Hp(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QN=1e3,YN=2,XN=4*60*60*1e3,WN=.5;function t0(n,e=QN,t=YN){const i=e*Math.pow(t,n),a=Math.round(WN*i*(Math.random()-.5)*2);return Math.min(XN,i+a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ot(n){return n&&n._delegate?n._delegate:n}class jn{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZN{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new MN;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&i.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e?.identifier),a=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(a)return null;throw l}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(eD(e))try{this.getOrInitializeService({instanceIdentifier:Aa})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});i.resolve(l)}catch{}}}}clearInstance(e=Aa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Aa){return this.instances.has(e)}getOptions(e=Aa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);i===d&&c.resolve(a)}return a}onInit(e,t){var i;const a=this.normalizeInstanceIdentifier(t),l=(i=this.onInitCallbacks.get(a))!==null&&i!==void 0?i:new Set;l.add(e),this.onInitCallbacks.set(a,l);const c=this.instances.get(a);return c&&e(c,a),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const a of i)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:JN(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Aa){return this.component?this.component.multipleInstances?e:Aa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function JN(n){return n===Aa?void 0:n}function eD(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tD{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new ZN(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ke;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(ke||(ke={}));const nD={debug:ke.DEBUG,verbose:ke.VERBOSE,info:ke.INFO,warn:ke.WARN,error:ke.ERROR,silent:ke.SILENT},rD=ke.INFO,iD={[ke.DEBUG]:"log",[ke.VERBOSE]:"log",[ke.INFO]:"info",[ke.WARN]:"warn",[ke.ERROR]:"error"},sD=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),a=iD[e];if(a)console[a](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class mc{constructor(e){this.name=e,this._logLevel=rD,this._logHandler=sD,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ke))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?nD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ke.DEBUG,...e),this._logHandler(this,ke.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ke.VERBOSE,...e),this._logHandler(this,ke.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ke.INFO,...e),this._logHandler(this,ke.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ke.WARN,...e),this._logHandler(this,ke.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ke.ERROR,...e),this._logHandler(this,ke.ERROR,...e)}}const aD=(n,e)=>e.some(t=>n instanceof t);let n0,r0;function oD(){return n0||(n0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function lD(){return r0||(r0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const xb=new WeakMap,dg=new WeakMap,Vb=new WeakMap,Gp=new WeakMap,ry=new WeakMap;function uD(n){const e=new Promise((t,i)=>{const a=()=>{n.removeEventListener("success",l),n.removeEventListener("error",c)},l=()=>{t(gs(n.result)),a()},c=()=>{i(n.error),a()};n.addEventListener("success",l),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&xb.set(t,n)}).catch(()=>{}),ry.set(e,n),e}function cD(n){if(dg.has(n))return;const e=new Promise((t,i)=>{const a=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",c),n.removeEventListener("abort",c)},l=()=>{t(),a()},c=()=>{i(n.error||new DOMException("AbortError","AbortError")),a()};n.addEventListener("complete",l),n.addEventListener("error",c),n.addEventListener("abort",c)});dg.set(n,e)}let mg={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return dg.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Vb.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return gs(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function hD(n){mg=n(mg)}function fD(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call($p(this),e,...t);return Vb.set(i,e.sort?e.sort():[e]),gs(i)}:lD().includes(n)?function(...e){return n.apply($p(this),e),gs(xb.get(this))}:function(...e){return gs(n.apply($p(this),e))}}function dD(n){return typeof n=="function"?fD(n):(n instanceof IDBTransaction&&cD(n),aD(n,oD())?new Proxy(n,mg):n)}function gs(n){if(n instanceof IDBRequest)return uD(n);if(Gp.has(n))return Gp.get(n);const e=dD(n);return e!==n&&(Gp.set(n,e),ry.set(e,n)),e}const $p=n=>ry.get(n);function kb(n,e,{blocked:t,upgrade:i,blocking:a,terminated:l}={}){const c=indexedDB.open(n,e),d=gs(c);return i&&c.addEventListener("upgradeneeded",m=>{i(gs(c.result),m.oldVersion,m.newVersion,gs(c.transaction),m)}),t&&c.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),d.then(m=>{l&&m.addEventListener("close",()=>l()),a&&m.addEventListener("versionchange",g=>a(g.oldVersion,g.newVersion,g))}).catch(()=>{}),d}const mD=["get","getKey","getAll","getAllKeys","count"],pD=["put","add","delete","clear"],Kp=new Map;function i0(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Kp.get(e))return Kp.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,a=pD.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(a||mD.includes(t)))return;const l=async function(c,...d){const m=this.transaction(c,a?"readwrite":"readonly");let g=m.store;return i&&(g=g.index(d.shift())),(await Promise.all([g[t](...d),a&&m.done]))[0]};return Kp.set(e,l),l}hD(n=>({...n,get:(e,t,i)=>i0(e,t)||n.get(e,t,i),has:(e,t)=>!!i0(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gD{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(yD(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function yD(n){const e=n.getComponent();return e?.type==="VERSION"}const pg="@firebase/app",s0="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ni=new mc("@firebase/app"),_D="@firebase/app-compat",vD="@firebase/analytics-compat",ED="@firebase/analytics",TD="@firebase/app-check-compat",AD="@firebase/app-check",bD="@firebase/auth",wD="@firebase/auth-compat",SD="@firebase/database",RD="@firebase/data-connect",ID="@firebase/database-compat",CD="@firebase/functions",ND="@firebase/functions-compat",DD="@firebase/installations",OD="@firebase/installations-compat",MD="@firebase/messaging",PD="@firebase/messaging-compat",xD="@firebase/performance",VD="@firebase/performance-compat",kD="@firebase/remote-config",LD="@firebase/remote-config-compat",UD="@firebase/storage",zD="@firebase/storage-compat",jD="@firebase/firestore",BD="@firebase/ai",FD="@firebase/firestore-compat",qD="firebase",HD="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gg="[DEFAULT]",GD={[pg]:"fire-core",[_D]:"fire-core-compat",[ED]:"fire-analytics",[vD]:"fire-analytics-compat",[AD]:"fire-app-check",[TD]:"fire-app-check-compat",[bD]:"fire-auth",[wD]:"fire-auth-compat",[SD]:"fire-rtdb",[RD]:"fire-data-connect",[ID]:"fire-rtdb-compat",[CD]:"fire-fn",[ND]:"fire-fn-compat",[DD]:"fire-iid",[OD]:"fire-iid-compat",[MD]:"fire-fcm",[PD]:"fire-fcm-compat",[xD]:"fire-perf",[VD]:"fire-perf-compat",[kD]:"fire-rc",[LD]:"fire-rc-compat",[UD]:"fire-gcs",[zD]:"fire-gcs-compat",[jD]:"fire-fst",[FD]:"fire-fst-compat",[BD]:"fire-vertex","fire-js":"fire-js",[qD]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nf=new Map,$D=new Map,yg=new Map;function a0(n,e){try{n.container.addComponent(e)}catch(t){Ni.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function nr(n){const e=n.name;if(yg.has(e))return Ni.debug(`There were multiple attempts to register component ${e}.`),!1;yg.set(e,n);for(const t of Nf.values())a0(t,n);for(const t of $D.values())a0(t,n);return!0}function Pi(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function wn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KD={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ys=new Ps("app","Firebase",KD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QD{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new jn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ys.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ka=HD;function Lb(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i=Object.assign({name:gg,automaticDataCollectionEnabled:!0},e),a=i.name;if(typeof a!="string"||!a)throw ys.create("bad-app-name",{appName:String(a)});if(t||(t=Ob()),!t)throw ys.create("no-options");const l=Nf.get(a);if(l){if(Ts(t,l.options)&&Ts(i,l.config))return l;throw ys.create("duplicate-app",{appName:a})}const c=new tD(a);for(const m of yg.values())c.addComponent(m);const d=new QD(t,i,c);return Nf.set(a,d),d}function pc(n=gg){const e=Nf.get(n);if(!e&&n===gg&&Ob())return Lb();if(!e)throw ys.create("no-app",{appName:n});return e}function fn(n,e,t){var i;let a=(i=GD[n])!==null&&i!==void 0?i:n;t&&(a+=`-${t}`);const l=a.match(/\s|\//),c=e.match(/\s|\//);if(l||c){const d=[`Unable to register library "${a}" with version "${e}":`];l&&d.push(`library name "${a}" contains illegal characters (whitespace or "/")`),l&&c&&d.push("and"),c&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ni.warn(d.join(" "));return}nr(new jn(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YD="firebase-heartbeat-database",XD=1,Ku="firebase-heartbeat-store";let Qp=null;function Ub(){return Qp||(Qp=kb(YD,XD,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Ku)}catch(t){console.warn(t)}}}}).catch(n=>{throw ys.create("idb-open",{originalErrorMessage:n.message})})),Qp}async function WD(n){try{const t=(await Ub()).transaction(Ku),i=await t.objectStore(Ku).get(zb(n));return await t.done,i}catch(e){if(e instanceof ir)Ni.warn(e.message);else{const t=ys.create("idb-get",{originalErrorMessage:e?.message});Ni.warn(t.message)}}}async function o0(n,e){try{const i=(await Ub()).transaction(Ku,"readwrite");await i.objectStore(Ku).put(e,zb(n)),await i.done}catch(t){if(t instanceof ir)Ni.warn(t.message);else{const i=ys.create("idb-set",{originalErrorMessage:t?.message});Ni.warn(i.message)}}}function zb(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZD=1024,JD=30;class eO{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new nO(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=l0();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:a}),this._heartbeatsCache.heartbeats.length>JD){const c=rO(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Ni.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=l0(),{heartbeatsToSend:i,unsentEntries:a}=tO(this._heartbeatsCache.heartbeats),l=Cf(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Ni.warn(t),""}}}function l0(){return new Date().toISOString().substring(0,10)}function tO(n,e=ZD){const t=[];let i=n.slice();for(const a of n){const l=t.find(c=>c.agent===a.agent);if(l){if(l.dates.push(a.date),u0(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),u0(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class nO{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return rd()?id().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await WD(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return o0(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return o0(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function u0(n){return Cf(JSON.stringify({version:2,heartbeats:n})).length}function rO(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iO(n){nr(new jn("platform-logger",e=>new gD(e),"PRIVATE")),nr(new jn("heartbeat",e=>new eO(e),"PRIVATE")),fn(pg,s0,n),fn(pg,s0,"esm2017"),fn("fire-js","")}iO("");function iy(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(n);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(n,i[a])&&(t[i[a]]=n[i[a]]);return t}function jb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const sO=jb,Bb=new Ps("auth","Firebase",jb());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Df=new mc("@firebase/auth");function aO(n,...e){Df.logLevel<=ke.WARN&&Df.warn(`Auth (${ka}): ${n}`,...e)}function mf(n,...e){Df.logLevel<=ke.ERROR&&Df.error(`Auth (${ka}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rr(n,...e){throw ay(n,...e)}function pr(n,...e){return ay(n,...e)}function sy(n,e,t){const i=Object.assign(Object.assign({},sO()),{[e]:t});return new Ps("auth","Firebase",i).create(e,{appName:n.name})}function Ii(n){return sy(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function oO(n,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&rr(n,"argument-error"),sy(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ay(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return Bb.create(n,...e)}function be(n,e,...t){if(!n)throw ay(e,...t)}function wi(n){const e="INTERNAL ASSERTION FAILED: "+n;throw mf(e),new Error(e)}function Di(n,e){n||wi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _g(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function lO(){return c0()==="http:"||c0()==="https:"}function c0(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uO(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(lO()||ty()||"connection"in navigator)?navigator.onLine:!0}function cO(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc{constructor(e,t){this.shortDelay=e,this.longDelay=t,Di(t>e,"Short delay should be less than long delay!"),this.isMobile=VN()||UN()}get(){return uO()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oy(n,e){Di(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fb{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;wi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;wi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;wi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hO={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fO=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],dO=new gc(3e4,6e4);function xs(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Vs(n,e,t,i,a={}){return qb(n,a,async()=>{let l={},c={};i&&(e==="GET"?c=i:l={body:JSON.stringify(i)});const d=dc(Object.assign({key:n.config.apiKey},c)).slice(1),m=await n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);const g=Object.assign({method:e,headers:m},l);return LN()||(g.referrerPolicy="no-referrer"),n.emulatorConfig&&Va(n.emulatorConfig.host)&&(g.credentials="include"),Fb.fetch()(await Hb(n,n.config.apiHost,t,d),g)})}async function qb(n,e,t){n._canInitEmulator=!1;const i=Object.assign(Object.assign({},hO),e);try{const a=new pO(n),l=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw nf(n,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const d=l.ok?c.errorMessage:c.error.message,[m,g]=d.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw nf(n,"credential-already-in-use",c);if(m==="EMAIL_EXISTS")throw nf(n,"email-already-in-use",c);if(m==="USER_DISABLED")throw nf(n,"user-disabled",c);const _=i[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw sy(n,_,g);rr(n,_)}}catch(a){if(a instanceof ir)throw a;rr(n,"network-request-failed",{message:String(a)})}}async function yc(n,e,t,i,a={}){const l=await Vs(n,e,t,i,a);return"mfaPendingCredential"in l&&rr(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function Hb(n,e,t,i){const a=`${e}${t}?${i}`,l=n,c=l.config.emulator?oy(n.config,a):`${n.config.apiScheme}://${a}`;return fO.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}function mO(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class pO{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(pr(this.auth,"network-request-failed")),dO.get())})}}function nf(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const a=pr(n,e,i);return a.customData._tokenResponse=t,a}function h0(n){return n!==void 0&&n.enterprise!==void 0}class gO{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return mO(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function yO(n,e){return Vs(n,"GET","/v2/recaptchaConfig",xs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _O(n,e){return Vs(n,"POST","/v1/accounts:delete",e)}async function Of(n,e){return Vs(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ku(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function vO(n,e=!1){const t=ot(n),i=await t.getIdToken(e),a=ly(i);be(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,c=l?.sign_in_provider;return{claims:a,token:i,authTime:ku(Yp(a.auth_time)),issuedAtTime:ku(Yp(a.iat)),expirationTime:ku(Yp(a.exp)),signInProvider:c||null,signInSecondFactor:l?.sign_in_second_factor||null}}function Yp(n){return Number(n)*1e3}function ly(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return mf("JWT malformed, contained fewer than 3 sections"),null;try{const a=Cb(t);return a?JSON.parse(a):(mf("Failed to decode base64 JWT payload"),null)}catch(a){return mf("Caught error parsing JWT payload as JSON",a?.toString()),null}}function f0(n){const e=ly(n);return be(e,"internal-error"),be(typeof e.exp<"u","internal-error"),be(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qu(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof ir&&EO(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function EO({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TO{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const a=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ku(this.lastLoginAt),this.creationTime=ku(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mf(n){var e;const t=n.auth,i=await n.getIdToken(),a=await Qu(n,Of(t,{idToken:i}));be(a?.users.length,t,"internal-error");const l=a.users[0];n._notifyReloadListener(l);const c=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?Gb(l.providerUserInfo):[],d=bO(n.providerData,c),m=n.isAnonymous,g=!(n.email&&l.passwordHash)&&!d?.length,_=m?g:!1,T={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:d,metadata:new vg(l.createdAt,l.lastLoginAt),isAnonymous:_};Object.assign(n,T)}async function AO(n){const e=ot(n);await Mf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function bO(n,e){return[...n.filter(i=>!e.some(a=>a.providerId===i.providerId)),...e]}function Gb(n){return n.map(e=>{var{providerId:t}=e,i=iy(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wO(n,e){const t=await qb(n,{},async()=>{const i=dc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=n.config,c=await Hb(n,a,"/v1/token",`key=${l}`),d=await n._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:d,body:i};return n.emulatorConfig&&Va(n.emulatorConfig.host)&&(m.credentials="include"),Fb.fetch()(c,m)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function SO(n,e){return Vs(n,"POST","/v2/accounts:revokeToken",xs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){be(e.idToken,"internal-error"),be(typeof e.idToken<"u","internal-error"),be(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):f0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){be(e.length!==0,"internal-error");const t=f0(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(be(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:a,expiresIn:l}=await wO(e,t);this.updateTokensAndExpiration(i,a,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:a,expirationTime:l}=t,c=new Fo;return i&&(be(typeof i=="string","internal-error",{appName:e}),c.refreshToken=i),a&&(be(typeof a=="string","internal-error",{appName:e}),c.accessToken=a),l&&(be(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Fo,this.toJSON())}_performRefresh(){return wi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function us(n,e){be(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class dr{constructor(e){var{uid:t,auth:i,stsTokenManager:a}=e,l=iy(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new TO(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new vg(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await Qu(this,this.stsTokenManager.getToken(this.auth,e));return be(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return vO(this,e)}reload(){return AO(this)}_assign(e){this!==e&&(be(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new dr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){be(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Mf(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(wn(this.auth.app))return Promise.reject(Ii(this.auth));const e=await this.getIdToken();return await Qu(this,_O(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,a,l,c,d,m,g,_;const T=(i=t.displayName)!==null&&i!==void 0?i:void 0,A=(a=t.email)!==null&&a!==void 0?a:void 0,S=(l=t.phoneNumber)!==null&&l!==void 0?l:void 0,N=(c=t.photoURL)!==null&&c!==void 0?c:void 0,q=(d=t.tenantId)!==null&&d!==void 0?d:void 0,U=(m=t._redirectEventId)!==null&&m!==void 0?m:void 0,$=(g=t.createdAt)!==null&&g!==void 0?g:void 0,ie=(_=t.lastLoginAt)!==null&&_!==void 0?_:void 0,{uid:ne,emailVerified:he,isAnonymous:ce,providerData:Te,stsTokenManager:P}=t;be(ne&&P,e,"internal-error");const I=Fo.fromJSON(this.name,P);be(typeof ne=="string",e,"internal-error"),us(T,e.name),us(A,e.name),be(typeof he=="boolean",e,"internal-error"),be(typeof ce=="boolean",e,"internal-error"),us(S,e.name),us(N,e.name),us(q,e.name),us(U,e.name),us($,e.name),us(ie,e.name);const R=new dr({uid:ne,auth:e,email:A,emailVerified:he,displayName:T,isAnonymous:ce,photoURL:N,phoneNumber:S,tenantId:q,stsTokenManager:I,createdAt:$,lastLoginAt:ie});return Te&&Array.isArray(Te)&&(R.providerData=Te.map(O=>Object.assign({},O))),U&&(R._redirectEventId=U),R}static async _fromIdTokenResponse(e,t,i=!1){const a=new Fo;a.updateFromServerResponse(t);const l=new dr({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:i});return await Mf(l),l}static async _fromGetAccountInfoResponse(e,t,i){const a=t.users[0];be(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?Gb(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!l?.length,d=new Fo;d.updateFromIdToken(i);const m=new dr({uid:a.localId,auth:e,stsTokenManager:d,isAnonymous:c}),g={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new vg(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!l?.length};return Object.assign(m,g),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d0=new Map;function Si(n){Di(n instanceof Function,"Expected a class definition");let e=d0.get(n);return e?(Di(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,d0.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $b{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}$b.type="NONE";const m0=$b;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pf(n,e,t){return`firebase:${n}:${e}:${t}`}class qo{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:a,name:l}=this.auth;this.fullUserKey=pf(this.userKey,a.apiKey,l),this.fullPersistenceKey=pf("persistence",a.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Of(this.auth,{idToken:e}).catch(()=>{});return t?dr._fromGetAccountInfoResponse(this.auth,t,e):null}return dr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new qo(Si(m0),e,i);const a=(await Promise.all(t.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let l=a[0]||Si(m0);const c=pf(i,e.config.apiKey,e.name);let d=null;for(const g of t)try{const _=await g._get(c);if(_){let T;if(typeof _=="string"){const A=await Of(e,{idToken:_}).catch(()=>{});if(!A)break;T=await dr._fromGetAccountInfoResponse(e,A,_)}else T=dr._fromJSON(e,_);g!==l&&(d=T),l=g;break}}catch{}const m=a.filter(g=>g._shouldAllowMigration);return!l._shouldAllowMigration||!m.length?new qo(l,e,i):(l=m[0],d&&await l._set(c,d.toJSON()),await Promise.all(t.map(async g=>{if(g!==l)try{await g._remove(c)}catch{}})),new qo(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p0(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Xb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Kb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Zb(e))return"Blackberry";if(Jb(e))return"Webos";if(Qb(e))return"Safari";if((e.includes("chrome/")||Yb(e))&&!e.includes("edge/"))return"Chrome";if(Wb(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if(i?.length===2)return i[1]}return"Other"}function Kb(n=mn()){return/firefox\//i.test(n)}function Qb(n=mn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Yb(n=mn()){return/crios\//i.test(n)}function Xb(n=mn()){return/iemobile/i.test(n)}function Wb(n=mn()){return/android/i.test(n)}function Zb(n=mn()){return/blackberry/i.test(n)}function Jb(n=mn()){return/webos/i.test(n)}function uy(n=mn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function RO(n=mn()){var e;return uy(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function IO(){return zN()&&document.documentMode===10}function ew(n=mn()){return uy(n)||Wb(n)||Jb(n)||Zb(n)||/windows phone/i.test(n)||Xb(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tw(n,e=[]){let t;switch(n){case"Browser":t=p0(mn());break;case"Worker":t=`${p0(mn())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ka}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CO{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((c,d)=>{try{const m=e(l);c(m)}catch(m){d(m)}});i.onAbort=t,this.queue.push(i);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NO(n,e={}){return Vs(n,"GET","/v2/passwordPolicy",xs(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DO=6;class OO{constructor(e){var t,i,a,l;const c=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=c.minPasswordLength)!==null&&t!==void 0?t:DO,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(a=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&a!==void 0?a:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,a,l,c,d;const m={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,m),this.validatePasswordCharacterOptions(e,m),m.isValid&&(m.isValid=(t=m.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),m.isValid&&(m.isValid=(i=m.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),m.isValid&&(m.isValid=(a=m.containsLowercaseLetter)!==null&&a!==void 0?a:!0),m.isValid&&(m.isValid=(l=m.containsUppercaseLetter)!==null&&l!==void 0?l:!0),m.isValid&&(m.isValid=(c=m.containsNumericCharacter)!==null&&c!==void 0?c:!0),m.isValid&&(m.isValid=(d=m.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),m}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let a=0;a<e.length;a++)i=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MO{constructor(e,t,i,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new g0(this),this.idTokenSubscription=new g0(this),this.beforeStateQueue=new CO(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Bb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Si(t)),this._initializationPromise=this.queue(async()=>{var i,a,l;if(!this._deleted&&(this.persistenceManager=await qo.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((a=this._popupRedirectResolver)===null||a===void 0)&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Of(this,{idToken:e}),i=await dr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(wn(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let a=i,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,d=a?._redirectEventId,m=await this.tryRedirectSignIn(e);(!c||c===d)&&m?.user&&(a=m.user,l=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(a)}catch(c){a=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return be(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Mf(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=cO()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(wn(this.app))return Promise.reject(Ii(this));const t=e?ot(e):null;return t&&be(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&be(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return wn(this.app)?Promise.reject(Ii(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return wn(this.app)?Promise.reject(Ii(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Si(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await NO(this),t=new OO(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ps("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await SO(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Si(e)||this._popupRedirectResolver;be(t,this,"argument-error"),this.redirectPersistenceManager=await qo.create(this,[Si(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,a){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(be(d,this,"internal-error"),d.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const m=e.addObserver(t,i,a);return()=>{c=!0,m()}}else{const m=e.addObserver(t);return()=>{c=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return be(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=tw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);const a=await this._getAppCheckToken();return a&&(t["X-Firebase-AppCheck"]=a),t}async _getAppCheckToken(){var e;if(wn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&aO(`Error while retrieving App Check token: ${t.error}`),t?.token}}function ks(n){return ot(n)}class g0{constructor(e){this.auth=e,this.observer=null,this.addObserver=GN(t=>this.observer=t)}get next(){return be(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function PO(n){sd=n}function nw(n){return sd.loadJS(n)}function xO(){return sd.recaptchaEnterpriseScript}function VO(){return sd.gapiScript}function kO(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class LO{constructor(){this.enterprise=new UO}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class UO{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const zO="recaptcha-enterprise",rw="NO_RECAPTCHA";class jO{constructor(e){this.type=zO,this.auth=ks(e)}async verify(e="verify",t=!1){async function i(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(c,d)=>{yO(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(m=>{if(m.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const g=new gO(m);return l.tenantId==null?l._agentRecaptchaConfig=g:l._tenantRecaptchaConfigs[l.tenantId]=g,c(g.siteKey)}}).catch(m=>{d(m)})})}function a(l,c,d){const m=window.grecaptcha;h0(m)?m.enterprise.ready(()=>{m.enterprise.execute(l,{action:e}).then(g=>{c(g)}).catch(()=>{c(rw)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new LO().execute("siteKey",{action:"verify"}):new Promise((l,c)=>{i(this.auth).then(d=>{if(!t&&h0(window.grecaptcha))a(d,l,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let m=xO();m.length!==0&&(m+=d),nw(m).then(()=>{a(d,l,c)}).catch(g=>{c(g)})}}).catch(d=>{c(d)})})}}async function y0(n,e,t,i=!1,a=!1){const l=new jO(n);let c;if(a)c=rw;else try{c=await l.verify(t)}catch{c=await l.verify(t,!0)}const d=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const m=d.phoneEnrollmentInfo.phoneNumber,g=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:m,recaptchaToken:g,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const m=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:m,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return i?Object.assign(d,{captchaResp:c}):Object.assign(d,{captchaResponse:c}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function Eg(n,e,t,i,a){var l;if(!((l=n._getRecaptchaConfig())===null||l===void 0)&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await y0(n,e,t,t==="getOobCode");return i(n,c)}else return i(n,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await y0(n,e,t,t==="getOobCode");return i(n,d)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BO(n,e){const t=Pi(n,"auth");if(t.isInitialized()){const a=t.getImmediate(),l=t.getOptions();if(Ts(l,e??{}))return a;rr(a,"already-initialized")}return t.initialize({options:e})}function FO(n,e){const t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(Si);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e?.popupRedirectResolver)}function qO(n,e,t){const i=ks(n);be(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const a=!1,l=iw(e),{host:c,port:d}=HO(e),m=d===null?"":`:${d}`,g={url:`${l}//${c}${m}/`},_=Object.freeze({host:c,port:d,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!i._canInitEmulator){be(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),be(Ts(g,i.config.emulator)&&Ts(_,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=g,i.emulatorConfig=_,i.settings.appVerificationDisabledForTesting=!0,Va(c)?(Jg(`${l}//${c}${m}`),ey("Auth",!0)):GO()}function iw(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function HO(n){const e=iw(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(i);if(a){const l=a[1];return{host:l,port:_0(i.substr(l.length+1))}}else{const[l,c]=i.split(":");return{host:l,port:_0(c)}}}function _0(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function GO(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cy{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return wi("not implemented")}_getIdTokenResponse(e){return wi("not implemented")}_linkToIdToken(e,t){return wi("not implemented")}_getReauthenticationResolver(e){return wi("not implemented")}}async function $O(n,e){return Vs(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KO(n,e){return yc(n,"POST","/v1/accounts:signInWithPassword",xs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QO(n,e){return yc(n,"POST","/v1/accounts:signInWithEmailLink",xs(n,e))}async function YO(n,e){return yc(n,"POST","/v1/accounts:signInWithEmailLink",xs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yu extends cy{constructor(e,t,i,a=null){super("password",i),this._email=e,this._password=t,this._tenantId=a}static _fromEmailAndPassword(e,t){return new Yu(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new Yu(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Eg(e,t,"signInWithPassword",KO);case"emailLink":return QO(e,{email:this._email,oobCode:this._password});default:rr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Eg(e,i,"signUpPassword",$O);case"emailLink":return YO(e,{idToken:t,email:this._email,oobCode:this._password});default:rr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ho(n,e){return yc(n,"POST","/v1/accounts:signInWithIdp",xs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XO="http://localhost";class Na extends cy{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Na(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):rr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:a}=t,l=iy(t,["providerId","signInMethod"]);if(!i||!a)return null;const c=new Na(i,a);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return Ho(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Ho(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ho(e,t)}buildRequest(){const e={requestUri:XO,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=dc(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WO(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function ZO(n){const e=Cu(Nu(n)).link,t=e?Cu(Nu(e)).deep_link_id:null,i=Cu(Nu(n)).deep_link_id;return(i?Cu(Nu(i)).link:null)||i||t||e||n}class hy{constructor(e){var t,i,a,l,c,d;const m=Cu(Nu(e)),g=(t=m.apiKey)!==null&&t!==void 0?t:null,_=(i=m.oobCode)!==null&&i!==void 0?i:null,T=WO((a=m.mode)!==null&&a!==void 0?a:null);be(g&&_&&T,"argument-error"),this.apiKey=g,this.operation=T,this.code=_,this.continueUrl=(l=m.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(c=m.lang)!==null&&c!==void 0?c:null,this.tenantId=(d=m.tenantId)!==null&&d!==void 0?d:null}static parseLink(e){const t=ZO(e);try{return new hy(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol{constructor(){this.providerId=ol.PROVIDER_ID}static credential(e,t){return Yu._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=hy.parseLink(t);return be(i,"argument-error"),Yu._fromEmailAndCode(e,i.code,i.tenantId)}}ol.PROVIDER_ID="password";ol.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ol.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fy{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c extends fy{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs extends _c{constructor(){super("facebook.com")}static credential(e){return Na._fromParams({providerId:cs.PROVIDER_ID,signInMethod:cs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return cs.credentialFromTaggedObject(e)}static credentialFromError(e){return cs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return cs.credential(e.oauthAccessToken)}catch{return null}}}cs.FACEBOOK_SIGN_IN_METHOD="facebook.com";cs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi extends _c{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Na._fromParams({providerId:bi.PROVIDER_ID,signInMethod:bi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return bi.credentialFromTaggedObject(e)}static credentialFromError(e){return bi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return bi.credential(t,i)}catch{return null}}}bi.GOOGLE_SIGN_IN_METHOD="google.com";bi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs extends _c{constructor(){super("github.com")}static credential(e){return Na._fromParams({providerId:hs.PROVIDER_ID,signInMethod:hs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return hs.credentialFromTaggedObject(e)}static credentialFromError(e){return hs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return hs.credential(e.oauthAccessToken)}catch{return null}}}hs.GITHUB_SIGN_IN_METHOD="github.com";hs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs extends _c{constructor(){super("twitter.com")}static credential(e,t){return Na._fromParams({providerId:fs.PROVIDER_ID,signInMethod:fs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return fs.credentialFromTaggedObject(e)}static credentialFromError(e){return fs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return fs.credential(t,i)}catch{return null}}}fs.TWITTER_SIGN_IN_METHOD="twitter.com";fs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JO(n,e){return yc(n,"POST","/v1/accounts:signUp",xs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,a=!1){const l=await dr._fromIdTokenResponse(e,i,a),c=v0(i);return new Da({user:l,providerId:c,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const a=v0(i);return new Da({user:e,providerId:a,_tokenResponse:i,operationType:t})}}function v0(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pf extends ir{constructor(e,t,i,a){var l;super(t.code,t.message),this.operationType=i,this.user=a,Object.setPrototypeOf(this,Pf.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,a){return new Pf(e,t,i,a)}}function sw(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Pf._fromErrorAndOperation(n,l,e,i):l})}async function eM(n,e,t=!1){const i=await Qu(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Da._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tM(n,e,t=!1){const{auth:i}=n;if(wn(i.app))return Promise.reject(Ii(i));const a="reauthenticate";try{const l=await Qu(n,sw(i,a,e,n),t);be(l.idToken,i,"internal-error");const c=ly(l.idToken);be(c,i,"internal-error");const{sub:d}=c;return be(n.uid===d,i,"user-mismatch"),Da._forOperation(n,a,l)}catch(l){throw l?.code==="auth/user-not-found"&&rr(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aw(n,e,t=!1){if(wn(n.app))return Promise.reject(Ii(n));const i="signIn",a=await sw(n,i,e),l=await Da._fromIdTokenResponse(n,i,a);return t||await n._updateCurrentUser(l.user),l}async function nM(n,e){return aw(ks(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ow(n){const e=ks(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function rM(n,e,t){if(wn(n.app))return Promise.reject(Ii(n));const i=ks(n),c=await Eg(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",JO).catch(m=>{throw m.code==="auth/password-does-not-meet-requirements"&&ow(n),m}),d=await Da._fromIdTokenResponse(i,"signIn",c);return await i._updateCurrentUser(d.user),d}function iM(n,e,t){return wn(n.app)?Promise.reject(Ii(n)):nM(ot(n),ol.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&ow(n),i})}function sM(n,e,t,i){return ot(n).onIdTokenChanged(e,t,i)}function aM(n,e,t){return ot(n).beforeAuthStateChanged(e,t)}function oM(n,e,t,i){return ot(n).onAuthStateChanged(e,t,i)}function lM(n){return ot(n).signOut()}const xf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(xf,"1"),this.storage.removeItem(xf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uM=1e3,cM=10;class uw extends lw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=ew(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),a=this.localCache[t];i!==a&&e(t,a,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,d,m)=>{this.notifyListeners(c,m)});return}const i=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(i);!t&&this.localCache[i]===c||this.notifyListeners(i,c)},l=this.storage.getItem(i);IO()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,cM):a()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},uM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}uw.type="LOCAL";const hM=uw;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cw extends lw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}cw.type="SESSION";const hw=cw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fM(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ad{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const i=new ad(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:a,data:l}=t.data,c=this.handlersMap[a];if(!c?.size)return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:a});const d=Array.from(c).map(async g=>g(t.origin,l)),m=await fM(d);t.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:m})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ad.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dy(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dM{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,c;return new Promise((d,m)=>{const g=dy("",20);a.port1.start();const _=setTimeout(()=>{m(new Error("unsupported_event"))},i);c={messageChannel:a,onMessage(T){const A=T;if(A.data.eventId===g)switch(A.data.status){case"ack":clearTimeout(_),l=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),d(A.data.response);break;default:clearTimeout(_),clearTimeout(l),m(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:g,data:t},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ur(){return window}function mM(n){Ur().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fw(){return typeof Ur().WorkerGlobalScope<"u"&&typeof Ur().importScripts=="function"}async function pM(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function gM(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function yM(){return fw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dw="firebaseLocalStorageDb",_M=1,Vf="firebaseLocalStorage",mw="fbase_key";class vc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function od(n,e){return n.transaction([Vf],e?"readwrite":"readonly").objectStore(Vf)}function vM(){const n=indexedDB.deleteDatabase(dw);return new vc(n).toPromise()}function Tg(){const n=indexedDB.open(dw,_M);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(Vf,{keyPath:mw})}catch(a){t(a)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(Vf)?e(i):(i.close(),await vM(),e(await Tg()))})})}async function E0(n,e,t){const i=od(n,!0).put({[mw]:e,value:t});return new vc(i).toPromise()}async function EM(n,e){const t=od(n,!1).get(e),i=await new vc(t).toPromise();return i===void 0?null:i.value}function T0(n,e){const t=od(n,!0).delete(e);return new vc(t).toPromise()}const TM=800,AM=3;class pw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Tg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>AM)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return fw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ad._getInstance(yM()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await pM(),!this.activeServiceWorker)return;this.sender=new dM(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((t=i[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||gM()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Tg();return await E0(e,xf,"1"),await T0(e,xf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>E0(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>EM(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>T0(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=od(a,!1).getAll();return new vc(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)i.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!i.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),TM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}pw.type="LOCAL";const bM=pw;new gc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gw(n,e){return e?Si(e):(be(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class my extends cy{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ho(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ho(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ho(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function wM(n){return aw(n.auth,new my(n),n.bypassAuthState)}function SM(n){const{auth:e,user:t}=n;return be(t,e,"internal-error"),tM(t,new my(n),n.bypassAuthState)}async function RM(n){const{auth:e,user:t}=n;return be(t,e,"internal-error"),eM(t,new my(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yw{constructor(e,t,i,a,l=!1){this.auth=e,this.resolver=i,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:a,tenantId:l,error:c,type:d}=e;if(c){this.reject(c);return}const m={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(m))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return wM;case"linkViaPopup":case"linkViaRedirect":return RM;case"reauthViaPopup":case"reauthViaRedirect":return SM;default:rr(this.auth,"internal-error")}}resolve(e){Di(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Di(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IM=new gc(2e3,1e4);async function CM(n,e,t){if(wn(n.app))return Promise.reject(pr(n,"operation-not-supported-in-this-environment"));const i=ks(n);oO(n,e,fy);const a=gw(i,t);return new wa(i,"signInViaPopup",e,a).executeNotNull()}class wa extends yw{constructor(e,t,i,a,l){super(e,t,a,l),this.provider=i,this.authWindow=null,this.pollId=null,wa.currentPopupAction&&wa.currentPopupAction.cancel(),wa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return be(e,this.auth,"internal-error"),e}async onExecution(){Di(this.filter.length===1,"Popup operations only handle one event");const e=dy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(pr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(pr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,wa.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if(!((i=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(pr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,IM.get())};e()}}wa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NM="pendingRedirect",gf=new Map;class DM extends yw{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=gf.get(this.auth._key());if(!e){try{const i=await OM(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}gf.set(this.auth._key(),e)}return this.bypassAuthState||gf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function OM(n,e){const t=xM(e),i=PM(n);if(!await i._isAvailable())return!1;const a=await i._get(t)==="true";return await i._remove(t),a}function MM(n,e){gf.set(n._key(),e)}function PM(n){return Si(n._redirectPersistence)}function xM(n){return pf(NM,n.config.apiKey,n.name)}async function VM(n,e,t=!1){if(wn(n.app))return Promise.reject(Ii(n));const i=ks(n),a=gw(i,e),c=await new DM(i,a,t).execute();return c&&!t&&(delete c.user._redirectEventId,await i._persistUserIfCurrent(c.user),await i._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kM=10*60*1e3;class LM{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!UM(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!_w(e)){const a=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(pr(this.auth,a))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=kM&&this.cachedEventUids.clear(),this.cachedEventUids.has(A0(e))}saveEventToCache(e){this.cachedEventUids.add(A0(e)),this.lastProcessedEventTime=Date.now()}}function A0(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function _w({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function UM(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return _w(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zM(n,e={}){return Vs(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jM=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,BM=/^https?/;async function FM(n){if(n.config.emulator)return;const{authorizedDomains:e}=await zM(n);for(const t of e)try{if(qM(t))return}catch{}rr(n,"unauthorized-domain")}function qM(n){const e=_g(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===i}if(!BM.test(t))return!1;if(jM.test(n))return i===n;const a=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HM=new gc(3e4,6e4);function b0(){const n=Ur().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function GM(n){return new Promise((e,t)=>{var i,a,l;function c(){b0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{b0(),t(pr(n,"network-request-failed"))},timeout:HM.get()})}if(!((a=(i=Ur().gapi)===null||i===void 0?void 0:i.iframes)===null||a===void 0)&&a.Iframe)e(gapi.iframes.getContext());else if(!((l=Ur().gapi)===null||l===void 0)&&l.load)c();else{const d=kO("iframefcb");return Ur()[d]=()=>{gapi.load?c():t(pr(n,"network-request-failed"))},nw(`${VO()}?onload=${d}`).catch(m=>t(m))}}).catch(e=>{throw yf=null,e})}let yf=null;function $M(n){return yf=yf||GM(n),yf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KM=new gc(5e3,15e3),QM="__/auth/iframe",YM="emulator/auth/iframe",XM={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},WM=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ZM(n){const e=n.config;be(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?oy(e,YM):`https://${n.config.authDomain}/${QM}`,i={apiKey:e.apiKey,appName:n.name,v:ka},a=WM.get(n.config.apiHost);a&&(i.eid=a);const l=n._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${dc(i).slice(1)}`}async function JM(n){const e=await $M(n),t=Ur().gapi;return be(t,n,"internal-error"),e.open({where:document.body,url:ZM(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:XM,dontclear:!0},i=>new Promise(async(a,l)=>{await i.restyle({setHideOnLeave:!1});const c=pr(n,"network-request-failed"),d=Ur().setTimeout(()=>{l(c)},KM.get());function m(){Ur().clearTimeout(d),a(i)}i.ping(m).then(m,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eP={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},tP=500,nP=600,rP="_blank",iP="http://localhost";class w0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function sP(n,e,t,i=tP,a=nP){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-i)/2,0).toString();let d="";const m=Object.assign(Object.assign({},eP),{width:i.toString(),height:a.toString(),top:l,left:c}),g=mn().toLowerCase();t&&(d=Yb(g)?rP:t),Kb(g)&&(e=e||iP,m.scrollbars="yes");const _=Object.entries(m).reduce((A,[S,N])=>`${A}${S}=${N},`,"");if(RO(g)&&d!=="_self")return aP(e||"",d),new w0(null);const T=window.open(e||"",d,_);be(T,n,"popup-blocked");try{T.focus()}catch{}return new w0(T)}function aP(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oP="__/auth/handler",lP="emulator/auth/handler",uP=encodeURIComponent("fac");async function S0(n,e,t,i,a,l){be(n.config.authDomain,n,"auth-domain-config-required"),be(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:ka,eventId:a};if(e instanceof fy){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",HN(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,T]of Object.entries({}))c[_]=T}if(e instanceof _c){const _=e.getScopes().filter(T=>T!=="");_.length>0&&(c.scopes=_.join(","))}n.tenantId&&(c.tid=n.tenantId);const d=c;for(const _ of Object.keys(d))d[_]===void 0&&delete d[_];const m=await n._getAppCheckToken(),g=m?`#${uP}=${encodeURIComponent(m)}`:"";return`${cP(n)}?${dc(d).slice(1)}${g}`}function cP({config:n}){return n.emulator?oy(n,lP):`https://${n.authDomain}/${oP}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xp="webStorageSupport";class hP{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=hw,this._completeRedirectFn=VM,this._overrideRedirectResult=MM}async _openPopup(e,t,i,a){var l;Di((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const c=await S0(e,t,i,_g(),a);return sP(e,c,dy())}async _openRedirect(e,t,i,a){await this._originValidation(e);const l=await S0(e,t,i,_g(),a);return mM(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:l}=this.eventManagers[t];return a?Promise.resolve(a):(Di(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await JM(e),i=new LM(e);return t.register("authEvent",a=>(be(a?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Xp,{type:Xp},a=>{var l;const c=(l=a?.[0])===null||l===void 0?void 0:l[Xp];c!==void 0&&t(!!c),rr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=FM(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return ew()||Qb()||uy()}}const fP=hP;var R0="@firebase/auth",I0="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dP{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){be(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mP(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function pP(n){nr(new jn("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=i.options;be(c&&!c.includes(":"),"invalid-api-key",{appName:i.name});const m={apiKey:c,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:tw(n)},g=new MO(i,a,l,m);return FO(g,t),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),nr(new jn("auth-internal",e=>{const t=ks(e.getProvider("auth").getImmediate());return(i=>new dP(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),fn(R0,I0,mP(n)),fn(R0,I0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gP=5*60,yP=Mb("authIdTokenMaxAge")||gP;let C0=null;const _P=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>yP)return;const a=t?.token;C0!==a&&(C0=a,await fetch(n,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function vP(n=pc()){const e=Pi(n,"auth");if(e.isInitialized())return e.getImmediate();const t=BO(n,{popupRedirectResolver:fP,persistence:[bM,hM,hw]}),i=Mb("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const c=_P(l.toString());aM(t,c,()=>c(t.currentUser)),sM(t,d=>c(d))}}const a=Nb("auth");return a&&qO(t,`http://${a}`),t}function EP(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}PO({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=a=>{const l=pr("internal-error");l.customData=a,t(l)},i.type="text/javascript",i.charset="UTF-8",EP().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});pP("Browser");var TP="firebase",AP="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */fn(TP,AP,"app");var N0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var _s,vw;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(P,I){function R(){}R.prototype=I.prototype,P.D=I.prototype,P.prototype=new R,P.prototype.constructor=P,P.C=function(O,V,j){for(var D=Array(arguments.length-2),Qt=2;Qt<arguments.length;Qt++)D[Qt-2]=arguments[Qt];return I.prototype[V].apply(O,D)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(P,I,R){R||(R=0);var O=Array(16);if(typeof I=="string")for(var V=0;16>V;++V)O[V]=I.charCodeAt(R++)|I.charCodeAt(R++)<<8|I.charCodeAt(R++)<<16|I.charCodeAt(R++)<<24;else for(V=0;16>V;++V)O[V]=I[R++]|I[R++]<<8|I[R++]<<16|I[R++]<<24;I=P.g[0],R=P.g[1],V=P.g[2];var j=P.g[3],D=I+(j^R&(V^j))+O[0]+3614090360&4294967295;I=R+(D<<7&4294967295|D>>>25),D=j+(V^I&(R^V))+O[1]+3905402710&4294967295,j=I+(D<<12&4294967295|D>>>20),D=V+(R^j&(I^R))+O[2]+606105819&4294967295,V=j+(D<<17&4294967295|D>>>15),D=R+(I^V&(j^I))+O[3]+3250441966&4294967295,R=V+(D<<22&4294967295|D>>>10),D=I+(j^R&(V^j))+O[4]+4118548399&4294967295,I=R+(D<<7&4294967295|D>>>25),D=j+(V^I&(R^V))+O[5]+1200080426&4294967295,j=I+(D<<12&4294967295|D>>>20),D=V+(R^j&(I^R))+O[6]+2821735955&4294967295,V=j+(D<<17&4294967295|D>>>15),D=R+(I^V&(j^I))+O[7]+4249261313&4294967295,R=V+(D<<22&4294967295|D>>>10),D=I+(j^R&(V^j))+O[8]+1770035416&4294967295,I=R+(D<<7&4294967295|D>>>25),D=j+(V^I&(R^V))+O[9]+2336552879&4294967295,j=I+(D<<12&4294967295|D>>>20),D=V+(R^j&(I^R))+O[10]+4294925233&4294967295,V=j+(D<<17&4294967295|D>>>15),D=R+(I^V&(j^I))+O[11]+2304563134&4294967295,R=V+(D<<22&4294967295|D>>>10),D=I+(j^R&(V^j))+O[12]+1804603682&4294967295,I=R+(D<<7&4294967295|D>>>25),D=j+(V^I&(R^V))+O[13]+4254626195&4294967295,j=I+(D<<12&4294967295|D>>>20),D=V+(R^j&(I^R))+O[14]+2792965006&4294967295,V=j+(D<<17&4294967295|D>>>15),D=R+(I^V&(j^I))+O[15]+1236535329&4294967295,R=V+(D<<22&4294967295|D>>>10),D=I+(V^j&(R^V))+O[1]+4129170786&4294967295,I=R+(D<<5&4294967295|D>>>27),D=j+(R^V&(I^R))+O[6]+3225465664&4294967295,j=I+(D<<9&4294967295|D>>>23),D=V+(I^R&(j^I))+O[11]+643717713&4294967295,V=j+(D<<14&4294967295|D>>>18),D=R+(j^I&(V^j))+O[0]+3921069994&4294967295,R=V+(D<<20&4294967295|D>>>12),D=I+(V^j&(R^V))+O[5]+3593408605&4294967295,I=R+(D<<5&4294967295|D>>>27),D=j+(R^V&(I^R))+O[10]+38016083&4294967295,j=I+(D<<9&4294967295|D>>>23),D=V+(I^R&(j^I))+O[15]+3634488961&4294967295,V=j+(D<<14&4294967295|D>>>18),D=R+(j^I&(V^j))+O[4]+3889429448&4294967295,R=V+(D<<20&4294967295|D>>>12),D=I+(V^j&(R^V))+O[9]+568446438&4294967295,I=R+(D<<5&4294967295|D>>>27),D=j+(R^V&(I^R))+O[14]+3275163606&4294967295,j=I+(D<<9&4294967295|D>>>23),D=V+(I^R&(j^I))+O[3]+4107603335&4294967295,V=j+(D<<14&4294967295|D>>>18),D=R+(j^I&(V^j))+O[8]+1163531501&4294967295,R=V+(D<<20&4294967295|D>>>12),D=I+(V^j&(R^V))+O[13]+2850285829&4294967295,I=R+(D<<5&4294967295|D>>>27),D=j+(R^V&(I^R))+O[2]+4243563512&4294967295,j=I+(D<<9&4294967295|D>>>23),D=V+(I^R&(j^I))+O[7]+1735328473&4294967295,V=j+(D<<14&4294967295|D>>>18),D=R+(j^I&(V^j))+O[12]+2368359562&4294967295,R=V+(D<<20&4294967295|D>>>12),D=I+(R^V^j)+O[5]+4294588738&4294967295,I=R+(D<<4&4294967295|D>>>28),D=j+(I^R^V)+O[8]+2272392833&4294967295,j=I+(D<<11&4294967295|D>>>21),D=V+(j^I^R)+O[11]+1839030562&4294967295,V=j+(D<<16&4294967295|D>>>16),D=R+(V^j^I)+O[14]+4259657740&4294967295,R=V+(D<<23&4294967295|D>>>9),D=I+(R^V^j)+O[1]+2763975236&4294967295,I=R+(D<<4&4294967295|D>>>28),D=j+(I^R^V)+O[4]+1272893353&4294967295,j=I+(D<<11&4294967295|D>>>21),D=V+(j^I^R)+O[7]+4139469664&4294967295,V=j+(D<<16&4294967295|D>>>16),D=R+(V^j^I)+O[10]+3200236656&4294967295,R=V+(D<<23&4294967295|D>>>9),D=I+(R^V^j)+O[13]+681279174&4294967295,I=R+(D<<4&4294967295|D>>>28),D=j+(I^R^V)+O[0]+3936430074&4294967295,j=I+(D<<11&4294967295|D>>>21),D=V+(j^I^R)+O[3]+3572445317&4294967295,V=j+(D<<16&4294967295|D>>>16),D=R+(V^j^I)+O[6]+76029189&4294967295,R=V+(D<<23&4294967295|D>>>9),D=I+(R^V^j)+O[9]+3654602809&4294967295,I=R+(D<<4&4294967295|D>>>28),D=j+(I^R^V)+O[12]+3873151461&4294967295,j=I+(D<<11&4294967295|D>>>21),D=V+(j^I^R)+O[15]+530742520&4294967295,V=j+(D<<16&4294967295|D>>>16),D=R+(V^j^I)+O[2]+3299628645&4294967295,R=V+(D<<23&4294967295|D>>>9),D=I+(V^(R|~j))+O[0]+4096336452&4294967295,I=R+(D<<6&4294967295|D>>>26),D=j+(R^(I|~V))+O[7]+1126891415&4294967295,j=I+(D<<10&4294967295|D>>>22),D=V+(I^(j|~R))+O[14]+2878612391&4294967295,V=j+(D<<15&4294967295|D>>>17),D=R+(j^(V|~I))+O[5]+4237533241&4294967295,R=V+(D<<21&4294967295|D>>>11),D=I+(V^(R|~j))+O[12]+1700485571&4294967295,I=R+(D<<6&4294967295|D>>>26),D=j+(R^(I|~V))+O[3]+2399980690&4294967295,j=I+(D<<10&4294967295|D>>>22),D=V+(I^(j|~R))+O[10]+4293915773&4294967295,V=j+(D<<15&4294967295|D>>>17),D=R+(j^(V|~I))+O[1]+2240044497&4294967295,R=V+(D<<21&4294967295|D>>>11),D=I+(V^(R|~j))+O[8]+1873313359&4294967295,I=R+(D<<6&4294967295|D>>>26),D=j+(R^(I|~V))+O[15]+4264355552&4294967295,j=I+(D<<10&4294967295|D>>>22),D=V+(I^(j|~R))+O[6]+2734768916&4294967295,V=j+(D<<15&4294967295|D>>>17),D=R+(j^(V|~I))+O[13]+1309151649&4294967295,R=V+(D<<21&4294967295|D>>>11),D=I+(V^(R|~j))+O[4]+4149444226&4294967295,I=R+(D<<6&4294967295|D>>>26),D=j+(R^(I|~V))+O[11]+3174756917&4294967295,j=I+(D<<10&4294967295|D>>>22),D=V+(I^(j|~R))+O[2]+718787259&4294967295,V=j+(D<<15&4294967295|D>>>17),D=R+(j^(V|~I))+O[9]+3951481745&4294967295,P.g[0]=P.g[0]+I&4294967295,P.g[1]=P.g[1]+(V+(D<<21&4294967295|D>>>11))&4294967295,P.g[2]=P.g[2]+V&4294967295,P.g[3]=P.g[3]+j&4294967295}i.prototype.u=function(P,I){I===void 0&&(I=P.length);for(var R=I-this.blockSize,O=this.B,V=this.h,j=0;j<I;){if(V==0)for(;j<=R;)a(this,P,j),j+=this.blockSize;if(typeof P=="string"){for(;j<I;)if(O[V++]=P.charCodeAt(j++),V==this.blockSize){a(this,O),V=0;break}}else for(;j<I;)if(O[V++]=P[j++],V==this.blockSize){a(this,O),V=0;break}}this.h=V,this.o+=I},i.prototype.v=function(){var P=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);P[0]=128;for(var I=1;I<P.length-8;++I)P[I]=0;var R=8*this.o;for(I=P.length-8;I<P.length;++I)P[I]=R&255,R/=256;for(this.u(P),P=Array(16),I=R=0;4>I;++I)for(var O=0;32>O;O+=8)P[R++]=this.g[I]>>>O&255;return P};function l(P,I){var R=d;return Object.prototype.hasOwnProperty.call(R,P)?R[P]:R[P]=I(P)}function c(P,I){this.h=I;for(var R=[],O=!0,V=P.length-1;0<=V;V--){var j=P[V]|0;O&&j==I||(R[V]=j,O=!1)}this.g=R}var d={};function m(P){return-128<=P&&128>P?l(P,function(I){return new c([I|0],0>I?-1:0)}):new c([P|0],0>P?-1:0)}function g(P){if(isNaN(P)||!isFinite(P))return T;if(0>P)return U(g(-P));for(var I=[],R=1,O=0;P>=R;O++)I[O]=P/R|0,R*=4294967296;return new c(I,0)}function _(P,I){if(P.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(P.charAt(0)=="-")return U(_(P.substring(1),I));if(0<=P.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=g(Math.pow(I,8)),O=T,V=0;V<P.length;V+=8){var j=Math.min(8,P.length-V),D=parseInt(P.substring(V,V+j),I);8>j?(j=g(Math.pow(I,j)),O=O.j(j).add(g(D))):(O=O.j(R),O=O.add(g(D)))}return O}var T=m(0),A=m(1),S=m(16777216);n=c.prototype,n.m=function(){if(q(this))return-U(this).m();for(var P=0,I=1,R=0;R<this.g.length;R++){var O=this.i(R);P+=(0<=O?O:4294967296+O)*I,I*=4294967296}return P},n.toString=function(P){if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(N(this))return"0";if(q(this))return"-"+U(this).toString(P);for(var I=g(Math.pow(P,6)),R=this,O="";;){var V=he(R,I).g;R=$(R,V.j(I));var j=((0<R.g.length?R.g[0]:R.h)>>>0).toString(P);if(R=V,N(R))return j+O;for(;6>j.length;)j="0"+j;O=j+O}},n.i=function(P){return 0>P?0:P<this.g.length?this.g[P]:this.h};function N(P){if(P.h!=0)return!1;for(var I=0;I<P.g.length;I++)if(P.g[I]!=0)return!1;return!0}function q(P){return P.h==-1}n.l=function(P){return P=$(this,P),q(P)?-1:N(P)?0:1};function U(P){for(var I=P.g.length,R=[],O=0;O<I;O++)R[O]=~P.g[O];return new c(R,~P.h).add(A)}n.abs=function(){return q(this)?U(this):this},n.add=function(P){for(var I=Math.max(this.g.length,P.g.length),R=[],O=0,V=0;V<=I;V++){var j=O+(this.i(V)&65535)+(P.i(V)&65535),D=(j>>>16)+(this.i(V)>>>16)+(P.i(V)>>>16);O=D>>>16,j&=65535,D&=65535,R[V]=D<<16|j}return new c(R,R[R.length-1]&-2147483648?-1:0)};function $(P,I){return P.add(U(I))}n.j=function(P){if(N(this)||N(P))return T;if(q(this))return q(P)?U(this).j(U(P)):U(U(this).j(P));if(q(P))return U(this.j(U(P)));if(0>this.l(S)&&0>P.l(S))return g(this.m()*P.m());for(var I=this.g.length+P.g.length,R=[],O=0;O<2*I;O++)R[O]=0;for(O=0;O<this.g.length;O++)for(var V=0;V<P.g.length;V++){var j=this.i(O)>>>16,D=this.i(O)&65535,Qt=P.i(V)>>>16,yt=P.i(V)&65535;R[2*O+2*V]+=D*yt,ie(R,2*O+2*V),R[2*O+2*V+1]+=j*yt,ie(R,2*O+2*V+1),R[2*O+2*V+1]+=D*Qt,ie(R,2*O+2*V+1),R[2*O+2*V+2]+=j*Qt,ie(R,2*O+2*V+2)}for(O=0;O<I;O++)R[O]=R[2*O+1]<<16|R[2*O];for(O=I;O<2*I;O++)R[O]=0;return new c(R,0)};function ie(P,I){for(;(P[I]&65535)!=P[I];)P[I+1]+=P[I]>>>16,P[I]&=65535,I++}function ne(P,I){this.g=P,this.h=I}function he(P,I){if(N(I))throw Error("division by zero");if(N(P))return new ne(T,T);if(q(P))return I=he(U(P),I),new ne(U(I.g),U(I.h));if(q(I))return I=he(P,U(I)),new ne(U(I.g),I.h);if(30<P.g.length){if(q(P)||q(I))throw Error("slowDivide_ only works with positive integers.");for(var R=A,O=I;0>=O.l(P);)R=ce(R),O=ce(O);var V=Te(R,1),j=Te(O,1);for(O=Te(O,2),R=Te(R,2);!N(O);){var D=j.add(O);0>=D.l(P)&&(V=V.add(R),j=D),O=Te(O,1),R=Te(R,1)}return I=$(P,V.j(I)),new ne(V,I)}for(V=T;0<=P.l(I);){for(R=Math.max(1,Math.floor(P.m()/I.m())),O=Math.ceil(Math.log(R)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),j=g(R),D=j.j(I);q(D)||0<D.l(P);)R-=O,j=g(R),D=j.j(I);N(j)&&(j=A),V=V.add(j),P=$(P,D)}return new ne(V,P)}n.A=function(P){return he(this,P).h},n.and=function(P){for(var I=Math.max(this.g.length,P.g.length),R=[],O=0;O<I;O++)R[O]=this.i(O)&P.i(O);return new c(R,this.h&P.h)},n.or=function(P){for(var I=Math.max(this.g.length,P.g.length),R=[],O=0;O<I;O++)R[O]=this.i(O)|P.i(O);return new c(R,this.h|P.h)},n.xor=function(P){for(var I=Math.max(this.g.length,P.g.length),R=[],O=0;O<I;O++)R[O]=this.i(O)^P.i(O);return new c(R,this.h^P.h)};function ce(P){for(var I=P.g.length+1,R=[],O=0;O<I;O++)R[O]=P.i(O)<<1|P.i(O-1)>>>31;return new c(R,P.h)}function Te(P,I){var R=I>>5;I%=32;for(var O=P.g.length-R,V=[],j=0;j<O;j++)V[j]=0<I?P.i(j+R)>>>I|P.i(j+R+1)<<32-I:P.i(j+R);return new c(V,P.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,vw=i,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=g,c.fromString=_,_s=c}).apply(typeof N0<"u"?N0:typeof self<"u"?self:typeof window<"u"?window:{});var rf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ew,Du,Tw,_f,Ag,Aw,bw,ww;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,y,v){return h==Array.prototype||h==Object.prototype||(h[y]=v.value),h};function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof rf=="object"&&rf];for(var y=0;y<h.length;++y){var v=h[y];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var i=t(this);function a(h,y){if(y)e:{var v=i;h=h.split(".");for(var w=0;w<h.length-1;w++){var B=h[w];if(!(B in v))break e;v=v[B]}h=h[h.length-1],w=v[h],y=y(w),y!=w&&y!=null&&e(v,h,{configurable:!0,writable:!0,value:y})}}function l(h,y){h instanceof String&&(h+="");var v=0,w=!1,B={next:function(){if(!w&&v<h.length){var Q=v++;return{value:y(Q,h[Q]),done:!1}}return w=!0,{done:!0,value:void 0}}};return B[Symbol.iterator]=function(){return B},B}a("Array.prototype.values",function(h){return h||function(){return l(this,function(y,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},d=this||self;function m(h){var y=typeof h;return y=y!="object"?y:h?Array.isArray(h)?"array":y:"null",y=="array"||y=="object"&&typeof h.length=="number"}function g(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function _(h,y,v){return h.call.apply(h.bind,arguments)}function T(h,y,v){if(!h)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var B=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(B,w),h.apply(y,B)}}return function(){return h.apply(y,arguments)}}function A(h,y,v){return A=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:T,A.apply(null,arguments)}function S(h,y){var v=Array.prototype.slice.call(arguments,1);return function(){var w=v.slice();return w.push.apply(w,arguments),h.apply(this,w)}}function N(h,y){function v(){}v.prototype=y.prototype,h.aa=y.prototype,h.prototype=new v,h.prototype.constructor=h,h.Qb=function(w,B,Q){for(var ae=Array(arguments.length-2),ze=2;ze<arguments.length;ze++)ae[ze-2]=arguments[ze];return y.prototype[B].apply(w,ae)}}function q(h){const y=h.length;if(0<y){const v=Array(y);for(let w=0;w<y;w++)v[w]=h[w];return v}return[]}function U(h,y){for(let v=1;v<arguments.length;v++){const w=arguments[v];if(m(w)){const B=h.length||0,Q=w.length||0;h.length=B+Q;for(let ae=0;ae<Q;ae++)h[B+ae]=w[ae]}else h.push(w)}}class ${constructor(y,v){this.i=y,this.j=v,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function ie(h){return/^[\s\xa0]*$/.test(h)}function ne(){var h=d.navigator;return h&&(h=h.userAgent)?h:""}function he(h){return he[" "](h),h}he[" "]=function(){};var ce=ne().indexOf("Gecko")!=-1&&!(ne().toLowerCase().indexOf("webkit")!=-1&&ne().indexOf("Edge")==-1)&&!(ne().indexOf("Trident")!=-1||ne().indexOf("MSIE")!=-1)&&ne().indexOf("Edge")==-1;function Te(h,y,v){for(const w in h)y.call(v,h[w],w,h)}function P(h,y){for(const v in h)y.call(void 0,h[v],v,h)}function I(h){const y={};for(const v in h)y[v]=h[v];return y}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(h,y){let v,w;for(let B=1;B<arguments.length;B++){w=arguments[B];for(v in w)h[v]=w[v];for(let Q=0;Q<R.length;Q++)v=R[Q],Object.prototype.hasOwnProperty.call(w,v)&&(h[v]=w[v])}}function V(h){var y=1;h=h.split(":");const v=[];for(;0<y&&h.length;)v.push(h.shift()),y--;return h.length&&v.push(h.join(":")),v}function j(h){d.setTimeout(()=>{throw h},0)}function D(){var h=Ge;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class Qt{constructor(){this.h=this.g=null}add(y,v){const w=yt.get();w.set(y,v),this.h?this.h.next=w:this.g=w,this.h=w}}var yt=new $(()=>new X,h=>h.reset());class X{constructor(){this.next=this.g=this.h=null}set(y,v){this.h=y,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let oe,ge=!1,Ge=new Qt,M=()=>{const h=d.Promise.resolve(void 0);oe=()=>{h.then(te)}};var te=()=>{for(var h;h=D();){try{h.h.call(h.g)}catch(v){j(v)}var y=yt;y.j(h),100>y.h&&(y.h++,h.next=y.g,y.g=h)}ge=!1};function le(){this.s=this.s,this.C=this.C}le.prototype.s=!1,le.prototype.ma=function(){this.s||(this.s=!0,this.N())},le.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function re(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}re.prototype.h=function(){this.defaultPrevented=!0};var ye=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const v=()=>{};d.addEventListener("test",v,y),d.removeEventListener("test",v,y)}catch{}return h}();function Oe(h,y){if(re.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var v=this.type=h.type,w=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget){if(ce){e:{try{he(y.nodeName);var B=!0;break e}catch{}B=!1}B||(y=null)}}else v=="mouseover"?y=h.fromElement:v=="mouseout"&&(y=h.toElement);this.relatedTarget=y,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:Re[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&Oe.aa.h.call(this)}}N(Oe,re);var Re={2:"touch",3:"pen",4:"mouse"};Oe.prototype.h=function(){Oe.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var jt="closure_listenable_"+(1e6*Math.random()|0),st=0;function vr(h,y,v,w,B){this.listener=h,this.proxy=null,this.src=y,this.type=v,this.capture=!!w,this.ha=B,this.key=++st,this.da=this.fa=!1}function xi(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Wr(h){this.src=h,this.g={},this.h=0}Wr.prototype.add=function(h,y,v,w,B){var Q=h.toString();h=this.g[Q],h||(h=this.g[Q]=[],this.h++);var ae=js(h,y,w,B);return-1<ae?(y=h[ae],v||(y.fa=!1)):(y=new vr(y,this.src,Q,!!w,B),y.fa=v,h.push(y)),y};function zs(h,y){var v=y.type;if(v in h.g){var w=h.g[v],B=Array.prototype.indexOf.call(w,y,void 0),Q;(Q=0<=B)&&Array.prototype.splice.call(w,B,1),Q&&(xi(y),h.g[v].length==0&&(delete h.g[v],h.h--))}}function js(h,y,v,w){for(var B=0;B<h.length;++B){var Q=h[B];if(!Q.da&&Q.listener==y&&Q.capture==!!v&&Q.ha==w)return B}return-1}var Bs="closure_lm_"+(1e6*Math.random()|0),gl={};function Oc(h,y,v,w,B){if(Array.isArray(y)){for(var Q=0;Q<y.length;Q++)Oc(h,y[Q],v,w,B);return null}return v=Mc(v),h&&h[jt]?h.K(y,v,g(w)?!!w.capture:!1,B):Bn(h,y,v,!1,w,B)}function Bn(h,y,v,w,B,Q){if(!y)throw Error("Invalid event type");var ae=g(B)?!!B.capture:!!B,ze=Ha(h);if(ze||(h[Bs]=ze=new Wr(h)),v=ze.add(y,v,w,ae,Q),v.proxy)return v;if(w=kd(),v.proxy=w,w.src=h,w.listener=v,h.addEventListener)ye||(B=ae),B===void 0&&(B=!1),h.addEventListener(y.toString(),w,B);else if(h.attachEvent)h.attachEvent(Fs(y.toString()),w);else if(h.addListener&&h.removeListener)h.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return v}function kd(){function h(v){return y.call(h.src,h.listener,v)}const y=Ld;return h}function yl(h,y,v,w,B){if(Array.isArray(y))for(var Q=0;Q<y.length;Q++)yl(h,y[Q],v,w,B);else w=g(w)?!!w.capture:!!w,v=Mc(v),h&&h[jt]?(h=h.i,y=String(y).toString(),y in h.g&&(Q=h.g[y],v=js(Q,v,w,B),-1<v&&(xi(Q[v]),Array.prototype.splice.call(Q,v,1),Q.length==0&&(delete h.g[y],h.h--)))):h&&(h=Ha(h))&&(y=h.g[y.toString()],h=-1,y&&(h=js(y,v,w,B)),(v=-1<h?y[h]:null)&&qa(v))}function qa(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[jt])zs(y.i,h);else{var v=h.type,w=h.proxy;y.removeEventListener?y.removeEventListener(v,w,h.capture):y.detachEvent?y.detachEvent(Fs(v),w):y.addListener&&y.removeListener&&y.removeListener(w),(v=Ha(y))?(zs(v,h),v.h==0&&(v.src=null,y[Bs]=null)):xi(h)}}}function Fs(h){return h in gl?gl[h]:gl[h]="on"+h}function Ld(h,y){if(h.da)h=!0;else{y=new Oe(y,this);var v=h.listener,w=h.ha||h.src;h.fa&&qa(h),h=v.call(w,y)}return h}function Ha(h){return h=h[Bs],h instanceof Wr?h:null}var _l="__closure_events_fn_"+(1e9*Math.random()>>>0);function Mc(h){return typeof h=="function"?h:(h[_l]||(h[_l]=function(y){return h.handleEvent(y)}),h[_l])}function _t(){le.call(this),this.i=new Wr(this),this.M=this,this.F=null}N(_t,le),_t.prototype[jt]=!0,_t.prototype.removeEventListener=function(h,y,v,w){yl(this,h,y,v,w)};function Qe(h,y){var v,w=h.F;if(w)for(v=[];w;w=w.F)v.push(w);if(h=h.M,w=y.type||y,typeof y=="string")y=new re(y,h);else if(y instanceof re)y.target=y.target||h;else{var B=y;y=new re(w,h),O(y,B)}if(B=!0,v)for(var Q=v.length-1;0<=Q;Q--){var ae=y.g=v[Q];B=Rn(ae,w,!0,y)&&B}if(ae=y.g=h,B=Rn(ae,w,!0,y)&&B,B=Rn(ae,w,!1,y)&&B,v)for(Q=0;Q<v.length;Q++)ae=y.g=v[Q],B=Rn(ae,w,!1,y)&&B}_t.prototype.N=function(){if(_t.aa.N.call(this),this.i){var h=this.i,y;for(y in h.g){for(var v=h.g[y],w=0;w<v.length;w++)xi(v[w]);delete h.g[y],h.h--}}this.F=null},_t.prototype.K=function(h,y,v,w){return this.i.add(String(h),y,!1,v,w)},_t.prototype.L=function(h,y,v,w){return this.i.add(String(h),y,!0,v,w)};function Rn(h,y,v,w){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();for(var B=!0,Q=0;Q<y.length;++Q){var ae=y[Q];if(ae&&!ae.da&&ae.capture==v){var ze=ae.listener,xt=ae.ha||ae.src;ae.fa&&zs(h.i,ae),B=ze.call(xt,w)!==!1&&B}}return B&&!w.defaultPrevented}function sn(h,y,v){if(typeof h=="function")v&&(h=A(h,v));else if(h&&typeof h.handleEvent=="function")h=A(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:d.setTimeout(h,y||0)}function Pc(h){h.g=sn(()=>{h.g=null,h.i&&(h.i=!1,Pc(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class Ud extends le{constructor(y,v){super(),this.m=y,this.l=v,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Pc(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function qs(h){le.call(this),this.h=h,this.g={}}N(qs,le);var Hs=[];function Gs(h){Te(h.g,function(y,v){this.g.hasOwnProperty(v)&&qa(y)},h),h.g={}}qs.prototype.N=function(){qs.aa.N.call(this),Gs(this)},qs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var sr=d.JSON.stringify,Ga=d.JSON.parse,$s=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function vl(){}vl.prototype.h=null;function El(h){return h.h||(h.h=h.i())}function Tl(){}var Zr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Jr(){re.call(this,"d")}N(Jr,re);function Al(){re.call(this,"c")}N(Al,re);var Er={},bl=null;function Vi(){return bl=bl||new _t}Er.La="serverreachability";function $a(h){re.call(this,Er.La,h)}N($a,re);function ki(h){const y=Vi();Qe(y,new $a(y))}Er.STAT_EVENT="statevent";function xc(h,y){re.call(this,Er.STAT_EVENT,h),this.stat=y}N(xc,re);function ct(h){const y=Vi();Qe(y,new xc(y,h))}Er.Ma="timingevent";function Pt(h,y){re.call(this,Er.Ma,h),this.size=y}N(Pt,re);function Rt(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},y)}function Fn(){this.g=!0}Fn.prototype.xa=function(){this.g=!1};function wl(h,y,v,w,B,Q){h.info(function(){if(h.g)if(Q)for(var ae="",ze=Q.split("&"),xt=0;xt<ze.length;xt++){var je=ze[xt].split("=");if(1<je.length){var Ft=je[0];je=je[1];var Vt=Ft.split("_");ae=2<=Vt.length&&Vt[1]=="type"?ae+(Ft+"="+je+"&"):ae+(Ft+"=redacted&")}}else ae=null;else ae=Q;return"XMLHTTP REQ ("+w+") [attempt "+B+"]: "+y+`
`+v+`
`+ae})}function zd(h,y,v,w,B,Q,ae){h.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+B+"]: "+y+`
`+v+`
`+Q+" "+ae})}function Li(h,y,v,w){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+Ks(h,v)+(w?" "+w:"")})}function Vc(h,y){h.info(function(){return"TIMEOUT: "+y})}Fn.prototype.info=function(){};function Ks(h,y){if(!h.g)return y;if(!y)return null;try{var v=JSON.parse(y);if(v){for(h=0;h<v.length;h++)if(Array.isArray(v[h])){var w=v[h];if(!(2>w.length)){var B=w[1];if(Array.isArray(B)&&!(1>B.length)){var Q=B[0];if(Q!="noop"&&Q!="stop"&&Q!="close")for(var ae=1;ae<B.length;ae++)B[ae]=""}}}}return sr(v)}catch{return y}}var Ui={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ei={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Tr;function Ar(){}N(Ar,vl),Ar.prototype.g=function(){return new XMLHttpRequest},Ar.prototype.i=function(){return{}},Tr=new Ar;function pn(h,y,v,w){this.j=h,this.i=y,this.l=v,this.R=w||1,this.U=new qs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Tt}function Tt(){this.i=null,this.g="",this.h=!1}var Sl={},Ka={};function ar(h,y,v){h.L=1,h.v=Zs(In(y)),h.m=v,h.P=!0,ti(h,null)}function ti(h,y){h.F=Date.now(),Qs(h),h.A=In(h.v);var v=h.A,w=h.R;Array.isArray(w)||(w=[String(w)]),Ol(v.i,"t",w),h.C=0,v=h.j.J,h.h=new Tt,h.g=Wc(h.j,v?y:null,!h.m),0<h.O&&(h.M=new Ud(A(h.Y,h,h.g),h.O)),y=h.U,v=h.g,w=h.ca;var B="readystatechange";Array.isArray(B)||(B&&(Hs[0]=B.toString()),B=Hs);for(var Q=0;Q<B.length;Q++){var ae=Oc(v,B[Q],w||y.handleEvent,!1,y.h||y);if(!ae)break;y.g[ae.key]=ae}y=h.H?I(h.H):{},h.m?(h.u||(h.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,y)):(h.u="GET",h.g.ea(h.A,h.u,null,y)),ki(),wl(h.i,h.u,h.A,h.l,h.R,h.m)}pn.prototype.ca=function(h){h=h.target;const y=this.M;y&&$n(h)==3?y.j():this.Y(h)},pn.prototype.Y=function(h){try{if(h==this.g)e:{const Vt=$n(this.g);var y=this.g.Ba();const ui=this.g.Z();if(!(3>Vt)&&(Vt!=3||this.g&&(this.h.h||this.g.oa()||qc(this.g)))){this.J||Vt!=4||y==7||(y==8||0>=ui?ki(3):ki(2)),zi(this);var v=this.g.Z();this.X=v;t:if(kc(this)){var w=qc(this.g);h="";var B=w.length,Q=$n(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Yt(this),br(this);var ae="";break t}this.h.i=new d.TextDecoder}for(y=0;y<B;y++)this.h.h=!0,h+=this.h.i.decode(w[y],{stream:!(Q&&y==B-1)});w.length=0,this.h.g+=h,this.C=0,ae=this.h.g}else ae=this.g.oa();if(this.o=v==200,zd(this.i,this.u,this.A,this.l,this.R,Vt,v),this.o){if(this.T&&!this.K){t:{if(this.g){var ze,xt=this.g;if((ze=xt.g?xt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ie(ze)){var je=ze;break t}}je=null}if(v=je)Li(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ys(this,v);else{this.o=!1,this.s=3,ct(12),Yt(this),br(this);break e}}if(this.P){v=!0;let Xt;for(;!this.J&&this.C<ae.length;)if(Xt=Lc(this,ae),Xt==Ka){Vt==4&&(this.s=4,ct(14),v=!1),Li(this.i,this.l,null,"[Incomplete Response]");break}else if(Xt==Sl){this.s=4,ct(15),Li(this.i,this.l,ae,"[Invalid Chunk]"),v=!1;break}else Li(this.i,this.l,Xt,null),Ys(this,Xt);if(kc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Vt!=4||ae.length!=0||this.h.h||(this.s=1,ct(16),v=!1),this.o=this.o&&v,!v)Li(this.i,this.l,ae,"[Invalid Chunked Response]"),Yt(this),br(this);else if(0<ae.length&&!this.W){this.W=!0;var Ft=this.j;Ft.g==this&&Ft.ba&&!Ft.M&&(Ft.j.info("Great, no buffering proxy detected. Bytes received: "+ae.length),aa(Ft),Ft.M=!0,ct(11))}}else Li(this.i,this.l,ae,null),Ys(this,ae);Vt==4&&Yt(this),this.o&&!this.J&&(Vt==4?Qc(this.j,this):(this.o=!1,Qs(this)))}else Hd(this.g),v==400&&0<ae.indexOf("Unknown SID")?(this.s=3,ct(12)):(this.s=0,ct(13)),Yt(this),br(this)}}}catch{}finally{}};function kc(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function Lc(h,y){var v=h.C,w=y.indexOf(`
`,v);return w==-1?Ka:(v=Number(y.substring(v,w)),isNaN(v)?Sl:(w+=1,w+v>y.length?Ka:(y=y.slice(w,w+v),h.C=w+v,y)))}pn.prototype.cancel=function(){this.J=!0,Yt(this)};function Qs(h){h.S=Date.now()+h.I,Uc(h,h.I)}function Uc(h,y){if(h.B!=null)throw Error("WatchDog timer not null");h.B=Rt(A(h.ba,h),y)}function zi(h){h.B&&(d.clearTimeout(h.B),h.B=null)}pn.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(Vc(this.i,this.A),this.L!=2&&(ki(),ct(17)),Yt(this),this.s=2,br(this)):Uc(this,this.S-h)};function br(h){h.j.G==0||h.J||Qc(h.j,h)}function Yt(h){zi(h);var y=h.M;y&&typeof y.ma=="function"&&y.ma(),h.M=null,Gs(h.U),h.g&&(y=h.g,h.g=null,y.abort(),y.ma())}function Ys(h,y){try{var v=h.j;if(v.G!=0&&(v.g==h||Rl(v.h,h))){if(!h.K&&Rl(v.h,h)&&v.G==3){try{var w=v.Da.g.parse(y)}catch{w=null}if(Array.isArray(w)&&w.length==3){var B=w;if(B[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<h.F)so(v),ro(v);else break e;kl(v),ct(18)}}else v.za=B[1],0<v.za-v.T&&37500>B[2]&&v.F&&v.v==0&&!v.C&&(v.C=Rt(A(v.Za,v),6e3));if(1>=Ya(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else li(v,11)}else if((h.K||v.g==h)&&so(v),!ie(y))for(B=v.Da.g.parse(y),y=0;y<B.length;y++){let je=B[y];if(v.T=je[0],je=je[1],v.G==2)if(je[0]=="c"){v.K=je[1],v.ia=je[2];const Ft=je[3];Ft!=null&&(v.la=Ft,v.j.info("VER="+v.la));const Vt=je[4];Vt!=null&&(v.Aa=Vt,v.j.info("SVER="+v.Aa));const ui=je[5];ui!=null&&typeof ui=="number"&&0<ui&&(w=1.5*ui,v.L=w,v.j.info("backChannelRequestTimeoutMs_="+w)),w=v;const Xt=h.g;if(Xt){const Dr=Xt.g?Xt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Dr){var Q=w.h;Q.g||Dr.indexOf("spdy")==-1&&Dr.indexOf("quic")==-1&&Dr.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(Xa(Q,Q.h),Q.h=null))}if(w.D){const Ul=Xt.g?Xt.g.getResponseHeader("X-HTTP-Session-Id"):null;Ul&&(w.ya=Ul,Je(w.I,w.D,Ul))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-h.F,v.j.info("Handshake RTT: "+v.R+"ms")),w=v;var ae=h;if(w.qa=Xc(w,w.J?w.ia:null,w.W),ae.K){gn(w.h,ae);var ze=ae,xt=w.L;xt&&(ze.I=xt),ze.B&&(zi(ze),Qs(ze)),w.g=ae}else $c(w);0<v.i.length&&io(v)}else je[0]!="stop"&&je[0]!="close"||li(v,7);else v.G==3&&(je[0]=="stop"||je[0]=="close"?je[0]=="stop"?li(v,7):xl(v):je[0]!="noop"&&v.l&&v.l.ta(je),v.v=0)}}ki(4)}catch{}}var zc=class{constructor(h,y){this.g=h,this.map=y}};function ni(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Qa(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Ya(h){return h.h?1:h.g?h.g.size:0}function Rl(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function Xa(h,y){h.g?h.g.add(y):h.h=y}function gn(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}ni.prototype.cancel=function(){if(this.i=Il(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Il(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const v of h.g.values())y=y.concat(v.D);return y}return q(h.i)}function jd(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(m(h)){for(var y=[],v=h.length,w=0;w<v;w++)y.push(h[w]);return y}y=[],v=0;for(w in h)y[v++]=h[w];return y}function Wa(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(m(h)||typeof h=="string"){var y=[];h=h.length;for(var v=0;v<h;v++)y.push(v);return y}y=[],v=0;for(const w in h)y[v++]=w;return y}}}function Cl(h,y){if(h.forEach&&typeof h.forEach=="function")h.forEach(y,void 0);else if(m(h)||typeof h=="string")Array.prototype.forEach.call(h,y,void 0);else for(var v=Wa(h),w=jd(h),B=w.length,Q=0;Q<B;Q++)y.call(void 0,w[Q],v&&v[Q],h)}var Xs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Bd(h,y){if(h){h=h.split("&");for(var v=0;v<h.length;v++){var w=h[v].indexOf("="),B=null;if(0<=w){var Q=h[v].substring(0,w);B=h[v].substring(w+1)}else Q=h[v];y(Q,B?decodeURIComponent(B.replace(/\+/g," ")):"")}}}function It(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof It){this.h=h.h,Ws(this,h.j),this.o=h.o,this.g=h.g,ji(this,h.s),this.l=h.l;var y=h.i,v=new ii;v.i=y.i,y.g&&(v.g=new Map(y.g),v.h=y.h),ri(this,v),this.m=h.m}else h&&(y=String(h).match(Xs))?(this.h=!1,Ws(this,y[1]||"",!0),this.o=qn(y[2]||""),this.g=qn(y[3]||"",!0),ji(this,y[4]),this.l=qn(y[5]||"",!0),ri(this,y[6]||"",!0),this.m=qn(y[7]||"")):(this.h=!1,this.i=new ii(null,this.h))}It.prototype.toString=function(){var h=[],y=this.j;y&&h.push(Js(y,Nl,!0),":");var v=this.g;return(v||y=="file")&&(h.push("//"),(y=this.o)&&h.push(Js(y,Nl,!0),"@"),h.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&h.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&h.push("/"),h.push(Js(v,v.charAt(0)=="/"?Fd:Dl,!0))),(v=this.i.toString())&&h.push("?",v),(v=this.m)&&h.push("#",Js(v,Za)),h.join("")};function In(h){return new It(h)}function Ws(h,y,v){h.j=v?qn(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function ji(h,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);h.s=y}else h.s=null}function ri(h,y,v){y instanceof ii?(h.i=y,Bc(h.i,h.h)):(v||(y=Js(y,qd)),h.i=new ii(y,h.h))}function Je(h,y,v){h.i.set(y,v)}function Zs(h){return Je(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function qn(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Js(h,y,v){return typeof h=="string"?(h=encodeURI(h).replace(y,jc),v&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function jc(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Nl=/[#\/\?@]/g,Dl=/[#\?:]/g,Fd=/[#\?]/g,qd=/[#\?@]/g,Za=/#/g;function ii(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function Hn(h){h.g||(h.g=new Map,h.h=0,h.i&&Bd(h.i,function(y,v){h.add(decodeURIComponent(y.replace(/\+/g," ")),v)}))}n=ii.prototype,n.add=function(h,y){Hn(this),this.i=null,h=wr(this,h);var v=this.g.get(h);return v||this.g.set(h,v=[]),v.push(y),this.h+=1,this};function si(h,y){Hn(h),y=wr(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function ai(h,y){return Hn(h),y=wr(h,y),h.g.has(y)}n.forEach=function(h,y){Hn(this),this.g.forEach(function(v,w){v.forEach(function(B){h.call(y,B,w,this)},this)},this)},n.na=function(){Hn(this);const h=Array.from(this.g.values()),y=Array.from(this.g.keys()),v=[];for(let w=0;w<y.length;w++){const B=h[w];for(let Q=0;Q<B.length;Q++)v.push(y[w])}return v},n.V=function(h){Hn(this);let y=[];if(typeof h=="string")ai(this,h)&&(y=y.concat(this.g.get(wr(this,h))));else{h=Array.from(this.g.values());for(let v=0;v<h.length;v++)y=y.concat(h[v])}return y},n.set=function(h,y){return Hn(this),this.i=null,h=wr(this,h),ai(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},n.get=function(h,y){return h?(h=this.V(h),0<h.length?String(h[0]):y):y};function Ol(h,y,v){si(h,y),0<v.length&&(h.i=null,h.g.set(wr(h,y),q(v)),h.h+=v.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(var v=0;v<y.length;v++){var w=y[v];const Q=encodeURIComponent(String(w)),ae=this.V(w);for(w=0;w<ae.length;w++){var B=Q;ae[w]!==""&&(B+="="+encodeURIComponent(String(ae[w]))),h.push(B)}}return this.i=h.join("&")};function wr(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function Bc(h,y){y&&!h.j&&(Hn(h),h.i=null,h.g.forEach(function(v,w){var B=w.toLowerCase();w!=B&&(si(this,w),Ol(this,B,v))},h)),h.j=y}function ea(h,y){const v=new Fn;if(d.Image){const w=new Image;w.onload=S(Gn,v,"TestLoadImage: loaded",!0,y,w),w.onerror=S(Gn,v,"TestLoadImage: error",!1,y,w),w.onabort=S(Gn,v,"TestLoadImage: abort",!1,y,w),w.ontimeout=S(Gn,v,"TestLoadImage: timeout",!1,y,w),d.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=h}else y(!1)}function or(h,y){const v=new Fn,w=new AbortController,B=setTimeout(()=>{w.abort(),Gn(v,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:w.signal}).then(Q=>{clearTimeout(B),Q.ok?Gn(v,"TestPingServer: ok",!0,y):Gn(v,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(B),Gn(v,"TestPingServer: error",!1,y)})}function Gn(h,y,v,w,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),w(v)}catch{}}function ta(){this.g=new $s}function Sr(h,y,v){const w=v||"";try{Cl(h,function(B,Q){let ae=B;g(B)&&(ae=sr(B)),y.push(w+Q+"="+encodeURIComponent(ae))})}catch(B){throw y.push(w+"type="+encodeURIComponent("_badmap")),B}}function Bi(h){this.l=h.Ub||null,this.j=h.eb||!1}N(Bi,vl),Bi.prototype.g=function(){return new oi(this.l,this.j)},Bi.prototype.i=function(h){return function(){return h}}({});function oi(h,y){_t.call(this),this.D=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}N(oi,_t),n=oi.prototype,n.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=y,this.readyState=1,Ir(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(y.body=h),(this.D||d).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Rr(this)),this.readyState=0},n.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Ir(this)),this.g&&(this.readyState=3,Ir(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ml(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ml(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}n.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?Rr(this):Ir(this),this.readyState==3&&Ml(this)}},n.Ra=function(h){this.g&&(this.response=this.responseText=h,Rr(this))},n.Qa=function(h){this.g&&(this.response=h,Rr(this))},n.ga=function(){this.g&&Rr(this)};function Rr(h){h.readyState=4,h.l=null,h.j=null,h.v=null,Ir(h)}n.setRequestHeader=function(h,y){this.u.append(h,y)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var v=y.next();!v.done;)v=v.value,h.push(v[0]+": "+v[1]),v=y.next();return h.join(`\r
`)};function Ir(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(oi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Pl(h){let y="";return Te(h,function(v,w){y+=w,y+=":",y+=v,y+=`\r
`}),y}function Bt(h,y,v){e:{for(w in v){var w=!1;break e}w=!0}w||(v=Pl(v),typeof h=="string"?v!=null&&encodeURIComponent(String(v)):Je(h,y,v))}function Ke(h){_t.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}N(Ke,_t);var Ja=/^https?$/i,na=["POST","PUT"];n=Ke.prototype,n.Ha=function(h){this.J=h},n.ea=function(h,y,v,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Tr.g(),this.v=this.o?El(this.o):El(Tr),this.g.onreadystatechange=A(this.Ea,this);try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(Q){Fc(this,Q);return}if(h=v||"",v=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var B in w)v.set(B,w[B]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const Q of w.keys())v.set(Q,w.get(Q));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(v.keys()).find(Q=>Q.toLowerCase()=="content-type"),B=d.FormData&&h instanceof d.FormData,!(0<=Array.prototype.indexOf.call(na,y,void 0))||w||B||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,ae]of v)this.g.setRequestHeader(Q,ae);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ra(this),this.u=!0,this.g.send(h),this.u=!1}catch(Q){Fc(this,Q)}};function Fc(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.m=5,eo(h),Cr(h)}function eo(h){h.A||(h.A=!0,Qe(h,"complete"),Qe(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,Qe(this,"complete"),Qe(this,"abort"),Cr(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Cr(this,!0)),Ke.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?to(this):this.bb())},n.bb=function(){to(this)};function to(h){if(h.h&&typeof c<"u"&&(!h.v[1]||$n(h)!=4||h.Z()!=2)){if(h.u&&$n(h)==4)sn(h.Ea,0,h);else if(Qe(h,"readystatechange"),$n(h)==4){h.h=!1;try{const ae=h.Z();e:switch(ae){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var v;if(!(v=y)){var w;if(w=ae===0){var B=String(h.D).match(Xs)[1]||null;!B&&d.self&&d.self.location&&(B=d.self.location.protocol.slice(0,-1)),w=!Ja.test(B?B.toLowerCase():"")}v=w}if(v)Qe(h,"complete"),Qe(h,"success");else{h.m=6;try{var Q=2<$n(h)?h.g.statusText:""}catch{Q=""}h.l=Q+" ["+h.Z()+"]",eo(h)}}finally{Cr(h)}}}}function Cr(h,y){if(h.g){ra(h);const v=h.g,w=h.v[0]?()=>{}:null;h.g=null,h.v=null,y||Qe(h,"ready");try{v.onreadystatechange=w}catch{}}}function ra(h){h.I&&(d.clearTimeout(h.I),h.I=null)}n.isActive=function(){return!!this.g};function $n(h){return h.g?h.g.readyState:0}n.Z=function(){try{return 2<$n(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),Ga(y)}};function qc(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Hd(h){const y={};h=(h.g&&2<=$n(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<h.length;w++){if(ie(h[w]))continue;var v=V(h[w]);const B=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const Q=y[B]||[];y[B]=Q,Q.push(v)}P(y,function(w){return w.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ia(h,y,v){return v&&v.internalChannelParams&&v.internalChannelParams[h]||y}function no(h){this.Aa=0,this.i=[],this.j=new Fn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ia("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ia("baseRetryDelayMs",5e3,h),this.cb=ia("retryDelaySeedMs",1e4,h),this.Wa=ia("forwardChannelMaxRetries",2,h),this.wa=ia("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new ni(h&&h.concurrentRequestLimit),this.Da=new ta,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=no.prototype,n.la=8,n.G=1,n.connect=function(h,y,v,w){ct(0),this.W=h,this.H=y||{},v&&w!==void 0&&(this.H.OSID=v,this.H.OAID=w),this.F=this.X,this.I=Xc(this,null,this.W),io(this)};function xl(h){if(Hc(h),h.G==3){var y=h.U++,v=In(h.I);if(Je(v,"SID",h.K),Je(v,"RID",y),Je(v,"TYPE","terminate"),sa(h,v),y=new pn(h,h.j,y),y.L=2,y.v=Zs(In(v)),v=!1,d.navigator&&d.navigator.sendBeacon)try{v=d.navigator.sendBeacon(y.v.toString(),"")}catch{}!v&&d.Image&&(new Image().src=y.v,v=!0),v||(y.g=Wc(y.j,null),y.g.ea(y.v)),y.F=Date.now(),Qs(y)}Yc(h)}function ro(h){h.g&&(aa(h),h.g.cancel(),h.g=null)}function Hc(h){ro(h),h.u&&(d.clearTimeout(h.u),h.u=null),so(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&d.clearTimeout(h.s),h.s=null)}function io(h){if(!Qa(h.h)&&!h.s){h.s=!0;var y=h.Ga;oe||M(),ge||(oe(),ge=!0),Ge.add(y,h),h.B=0}}function Gd(h,y){return Ya(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=y.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=Rt(A(h.Ga,h,y),Ll(h,h.B)),h.B++,!0)}n.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const B=new pn(this,this.j,h);let Q=this.o;if(this.S&&(Q?(Q=I(Q),O(Q,this.S)):Q=this.S),this.m!==null||this.O||(B.H=Q,Q=null),this.P)e:{for(var y=0,v=0;v<this.i.length;v++){t:{var w=this.i[v];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(y+=w,4096<y){y=v;break e}if(y===4096||v===this.i.length-1){y=v+1;break e}}y=1e3}else y=1e3;y=Gc(this,B,y),v=In(this.I),Je(v,"RID",h),Je(v,"CVER",22),this.D&&Je(v,"X-HTTP-Session-Id",this.D),sa(this,v),Q&&(this.O?y="headers="+encodeURIComponent(String(Pl(Q)))+"&"+y:this.m&&Bt(v,this.m,Q)),Xa(this.h,B),this.Ua&&Je(v,"TYPE","init"),this.P?(Je(v,"$req",y),Je(v,"SID","null"),B.T=!0,ar(B,v,null)):ar(B,v,y),this.G=2}}else this.G==3&&(h?Vl(this,h):this.i.length==0||Qa(this.h)||Vl(this))};function Vl(h,y){var v;y?v=y.l:v=h.U++;const w=In(h.I);Je(w,"SID",h.K),Je(w,"RID",v),Je(w,"AID",h.T),sa(h,w),h.m&&h.o&&Bt(w,h.m,h.o),v=new pn(h,h.j,v,h.B+1),h.m===null&&(v.H=h.o),y&&(h.i=y.D.concat(h.i)),y=Gc(h,v,1e3),v.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),Xa(h.h,v),ar(v,w,y)}function sa(h,y){h.H&&Te(h.H,function(v,w){Je(y,w,v)}),h.l&&Cl({},function(v,w){Je(y,w,v)})}function Gc(h,y,v){v=Math.min(h.i.length,v);var w=h.l?A(h.l.Na,h.l,h):null;e:{var B=h.i;let Q=-1;for(;;){const ae=["count="+v];Q==-1?0<v?(Q=B[0].g,ae.push("ofs="+Q)):Q=0:ae.push("ofs="+Q);let ze=!0;for(let xt=0;xt<v;xt++){let je=B[xt].g;const Ft=B[xt].map;if(je-=Q,0>je)Q=Math.max(0,B[xt].g-100),ze=!1;else try{Sr(Ft,ae,"req"+je+"_")}catch{w&&w(Ft)}}if(ze){w=ae.join("&");break e}}}return h=h.i.splice(0,v),y.D=h,w}function $c(h){if(!h.g&&!h.u){h.Y=1;var y=h.Fa;oe||M(),ge||(oe(),ge=!0),Ge.add(y,h),h.v=0}}function kl(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=Rt(A(h.Fa,h),Ll(h,h.v)),h.v++,!0)}n.Fa=function(){if(this.u=null,Kc(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=Rt(A(this.ab,this),h)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ct(10),ro(this),Kc(this))};function aa(h){h.A!=null&&(d.clearTimeout(h.A),h.A=null)}function Kc(h){h.g=new pn(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var y=In(h.qa);Je(y,"RID","rpc"),Je(y,"SID",h.K),Je(y,"AID",h.T),Je(y,"CI",h.F?"0":"1"),!h.F&&h.ja&&Je(y,"TO",h.ja),Je(y,"TYPE","xmlhttp"),sa(h,y),h.m&&h.o&&Bt(y,h.m,h.o),h.L&&(h.g.I=h.L);var v=h.g;h=h.ia,v.L=1,v.v=Zs(In(y)),v.m=null,v.P=!0,ti(v,h)}n.Za=function(){this.C!=null&&(this.C=null,ro(this),kl(this),ct(19))};function so(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function Qc(h,y){var v=null;if(h.g==y){so(h),aa(h),h.g=null;var w=2}else if(Rl(h.h,y))v=y.D,gn(h.h,y),w=1;else return;if(h.G!=0){if(y.o)if(w==1){v=y.m?y.m.length:0,y=Date.now()-y.F;var B=h.B;w=Vi(),Qe(w,new Pt(w,v)),io(h)}else $c(h);else if(B=y.s,B==3||B==0&&0<y.X||!(w==1&&Gd(h,y)||w==2&&kl(h)))switch(v&&0<v.length&&(y=h.h,y.i=y.i.concat(v)),B){case 1:li(h,5);break;case 4:li(h,10);break;case 3:li(h,6);break;default:li(h,2)}}}function Ll(h,y){let v=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(v*=2),v*y}function li(h,y){if(h.j.info("Error code "+y),y==2){var v=A(h.fb,h),w=h.Xa;const B=!w;w=new It(w||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||Ws(w,"https"),Zs(w),B?ea(w.toString(),v):or(w.toString(),v)}else ct(2);h.G=0,h.l&&h.l.sa(y),Yc(h),Hc(h)}n.fb=function(h){h?(this.j.info("Successfully pinged google.com"),ct(2)):(this.j.info("Failed to ping google.com"),ct(1))};function Yc(h){if(h.G=0,h.ka=[],h.l){const y=Il(h.h);(y.length!=0||h.i.length!=0)&&(U(h.ka,y),U(h.ka,h.i),h.h.i.length=0,q(h.i),h.i.length=0),h.l.ra()}}function Xc(h,y,v){var w=v instanceof It?In(v):new It(v);if(w.g!="")y&&(w.g=y+"."+w.g),ji(w,w.s);else{var B=d.location;w=B.protocol,y=y?y+"."+B.hostname:B.hostname,B=+B.port;var Q=new It(null);w&&Ws(Q,w),y&&(Q.g=y),B&&ji(Q,B),v&&(Q.l=v),w=Q}return v=h.D,y=h.ya,v&&y&&Je(w,v,y),Je(w,"VER",h.la),sa(h,w),w}function Wc(h,y,v){if(y&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Ca&&!h.pa?new Ke(new Bi({eb:v})):new Ke(h.pa),y.Ha(h.J),y}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Zc(){}n=Zc.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function ao(){}ao.prototype.g=function(h,y){return new yn(h,y)};function yn(h,y){_t.call(this),this.g=new no(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(h?h["X-WebChannel-Client-Profile"]=y.va:h={"X-WebChannel-Client-Profile":y.va}),this.g.S=h,(h=y&&y.Sb)&&!ie(h)&&(this.g.m=h),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!ie(y)&&(this.g.D=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new Nr(this)}N(yn,_t),yn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},yn.prototype.close=function(){xl(this.g)},yn.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var v={};v.__data__=h,h=v}else this.u&&(v={},v.__data__=sr(h),h=v);y.i.push(new zc(y.Ya++,h)),y.G==3&&io(y)},yn.prototype.N=function(){this.g.l=null,delete this.j,xl(this.g),delete this.g,yn.aa.N.call(this)};function Jc(h){Jr.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const v in y){h=v;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}N(Jc,Jr);function eh(){Al.call(this),this.status=1}N(eh,Al);function Nr(h){this.g=h}N(Nr,Zc),Nr.prototype.ua=function(){Qe(this.g,"a")},Nr.prototype.ta=function(h){Qe(this.g,new Jc(h))},Nr.prototype.sa=function(h){Qe(this.g,new eh)},Nr.prototype.ra=function(){Qe(this.g,"b")},ao.prototype.createWebChannel=ao.prototype.g,yn.prototype.send=yn.prototype.o,yn.prototype.open=yn.prototype.m,yn.prototype.close=yn.prototype.close,ww=function(){return new ao},bw=function(){return Vi()},Aw=Er,Ag={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ui.NO_ERROR=0,Ui.TIMEOUT=8,Ui.HTTP_ERROR=6,_f=Ui,ei.COMPLETE="complete",Tw=ei,Tl.EventType=Zr,Zr.OPEN="a",Zr.CLOSE="b",Zr.ERROR="c",Zr.MESSAGE="d",_t.prototype.listen=_t.prototype.K,Du=Tl,Ke.prototype.listenOnce=Ke.prototype.L,Ke.prototype.getLastError=Ke.prototype.Ka,Ke.prototype.getLastErrorCode=Ke.prototype.Ba,Ke.prototype.getStatus=Ke.prototype.Z,Ke.prototype.getResponseJson=Ke.prototype.Oa,Ke.prototype.getResponseText=Ke.prototype.oa,Ke.prototype.send=Ke.prototype.ea,Ke.prototype.setWithCredentials=Ke.prototype.Ha,Ew=Ke}).apply(typeof rf<"u"?rf:typeof self<"u"?self:typeof window<"u"?window:{});const D0="@firebase/firestore",O0="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}cn.UNAUTHENTICATED=new cn(null),cn.GOOGLE_CREDENTIALS=new cn("google-credentials-uid"),cn.FIRST_PARTY=new cn("first-party-uid"),cn.MOCK_USER=new cn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ll="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oa=new mc("@firebase/firestore");function ko(){return Oa.logLevel}function ue(n,...e){if(Oa.logLevel<=ke.DEBUG){const t=e.map(py);Oa.debug(`Firestore (${ll}): ${n}`,...t)}}function Oi(n,...e){if(Oa.logLevel<=ke.ERROR){const t=e.map(py);Oa.error(`Firestore (${ll}): ${n}`,...t)}}function As(n,...e){if(Oa.logLevel<=ke.WARN){const t=e.map(py);Oa.warn(`Firestore (${ll}): ${n}`,...t)}}function py(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _e(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,Sw(n,i,t)}function Sw(n,e,t){let i=`FIRESTORE (${ll}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw Oi(i),new Error(i)}function Ue(n,e,t,i){let a="Unexpected state";typeof t=="string"?a=t:i=t,n||Sw(e,a,i)}function Se(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class se extends ir{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rw{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class bP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(cn.UNAUTHENTICATED))}shutdown(){}}class wP{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class SP{constructor(e){this.t=e,this.currentUser=cn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ue(this.o===void 0,42304);let i=this.i;const a=m=>this.i!==i?(i=this.i,t(m)):Promise.resolve();let l=new gr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new gr,e.enqueueRetryable(()=>a(this.currentUser))};const c=()=>{const m=l;e.enqueueRetryable(async()=>{await m.promise,await a(this.currentUser)})},d=m=>{ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(m=>d(m)),setTimeout(()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?d(m):(ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new gr)}},0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Ue(typeof i.accessToken=="string",31837,{l:i}),new Rw(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ue(e===null||typeof e=="string",2055,{h:e}),new cn(e)}}class RP{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=cn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class IP{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new RP(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(cn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class M0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class CP{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,wn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ue(this.o===void 0,3512);const i=l=>{l.error!=null&&ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,ue("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>i(l))};const a=l=>{ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(l=>a(l)),setTimeout(()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new M0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ue(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new M0(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NP(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iw(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gy{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const a=NP(40);for(let l=0;l<a.length;++l)i.length<20&&a[l]<t&&(i+=e.charAt(a[l]%62))}return i}}function De(n,e){return n<e?-1:n>e?1:0}function bg(n,e){let t=0;for(;t<n.length&&t<e.length;){const i=n.codePointAt(t),a=e.codePointAt(t);if(i!==a){if(i<128&&a<128)return De(i,a);{const l=Iw(),c=DP(l.encode(P0(n,t)),l.encode(P0(e,t)));return c!==0?c:De(i,a)}}t+=i>65535?2:1}return De(n.length,e.length)}function P0(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function DP(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return De(n[t],e[t]);return De(n.length,e.length)}function Xo(n,e,t){return n.length===e.length&&n.every((i,a)=>t(i,e[a]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x0="__name__";class kr{constructor(e,t,i){t===void 0?t=0:t>e.length&&_e(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&_e(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return kr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof kr?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let a=0;a<i;a++){const l=kr.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return De(e.length,t.length)}static compareSegments(e,t){const i=kr.isNumericId(e),a=kr.isNumericId(t);return i&&!a?-1:!i&&a?1:i&&a?kr.extractNumericId(e).compare(kr.extractNumericId(t)):bg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return _s.fromString(e.substring(4,e.length-2))}}class We extends kr{construct(e,t,i){return new We(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new se(Y.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(a=>a.length>0))}return new We(t)}static emptyPath(){return new We([])}}const OP=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class tn extends kr{construct(e,t,i){return new tn(e,t,i)}static isValidIdentifier(e){return OP.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),tn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===x0}static keyField(){return new tn([x0])}static fromServerFormat(e){const t=[];let i="",a=0;const l=()=>{if(i.length===0)throw new se(Y.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let c=!1;for(;a<e.length;){const d=e[a];if(d==="\\"){if(a+1===e.length)throw new se(Y.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[a+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new se(Y.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=m,a+=2}else d==="`"?(c=!c,a++):d!=="."||c?(i+=d,a++):(l(),a++)}if(l(),c)throw new se(Y.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new tn(t)}static emptyPath(){return new tn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(e){this.path=e}static fromPath(e){return new de(We.fromString(e))}static fromName(e){return new de(We.fromString(e).popFirst(5))}static empty(){return new de(We.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&We.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return We.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new de(new We(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cw(n,e,t){if(!t)throw new se(Y.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function MP(n,e,t,i){if(e===!0&&i===!0)throw new se(Y.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function V0(n){if(!de.isDocumentKey(n))throw new se(Y.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function k0(n){if(de.isDocumentKey(n))throw new se(Y.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Nw(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function ld(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":_e(12329,{type:typeof n})}function dn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new se(Y.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=ld(n);throw new se(Y.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function PP(n,e){if(e<=0)throw new se(Y.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mt(n,e){const t={typeString:n};return e&&(t.value=e),t}function Ec(n,e){if(!Nw(n))throw new se(Y.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const a=e[i].typeString,l="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}const c=n[i];if(a&&typeof c!==a){t=`JSON field '${i}' must be a ${a}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${i}' field to equal '${l.value}'`;break}}if(t)throw new se(Y.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L0=-62135596800,U0=1e6;class ut{static now(){return ut.fromMillis(Date.now())}static fromDate(e){return ut.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*U0);return new ut(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new se(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new se(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<L0)throw new se(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new se(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/U0}_compareTo(e){return this.seconds===e.seconds?De(this.nanoseconds,e.nanoseconds):De(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ut._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ec(e,ut._jsonSchema))return new ut(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-L0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ut._jsonSchemaVersion="firestore/timestamp/1.0",ut._jsonSchema={type:Mt("string",ut._jsonSchemaVersion),seconds:Mt("number"),nanoseconds:Mt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{static fromTimestamp(e){return new Ae(e)}static min(){return new Ae(new ut(0,0))}static max(){return new Ae(new ut(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xu=-1;function xP(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,a=Ae.fromTimestamp(i===1e9?new ut(t+1,0):new ut(t,i));return new bs(a,de.empty(),e)}function VP(n){return new bs(n.readTime,n.key,Xu)}class bs{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new bs(Ae.min(),de.empty(),Xu)}static max(){return new bs(Ae.max(),de.empty(),Xu)}}function kP(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=de.comparator(n.documentKey,e.documentKey),t!==0?t:De(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class UP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ul(n){if(n.code!==Y.FAILED_PRECONDITION||n.message!==LP)throw n;ue("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&_e(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ee((i,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,a)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ee?t:ee.resolve(t)}catch(t){return ee.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ee.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ee.reject(t)}static resolve(e){return new ee((t,i)=>{t(e)})}static reject(e){return new ee((t,i)=>{i(e)})}static waitFor(e){return new ee((t,i)=>{let a=0,l=0,c=!1;e.forEach(d=>{++a,d.next(()=>{++l,c&&l===a&&t()},m=>i(m))}),c=!0,l===a&&t()})}static or(e){let t=ee.resolve(!1);for(const i of e)t=t.next(a=>a?ee.resolve(a):i());return t}static forEach(e,t){const i=[];return e.forEach((a,l)=>{i.push(t.call(this,a,l))}),this.waitFor(i)}static mapArray(e,t){return new ee((i,a)=>{const l=e.length,c=new Array(l);let d=0;for(let m=0;m<l;m++){const g=m;t(e[g]).next(_=>{c[g]=_,++d,d===l&&i(c)},_=>a(_))}})}static doWhile(e,t){return new ee((i,a)=>{const l=()=>{e()===!0?t().next(()=>{l()},a):i()};l()})}}function zP(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function cl(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this._e(i),this.ae=i=>t.writeSequenceNumber(i))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}ud.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yy=-1;function Tc(n){return n==null}function kf(n){return n===0&&1/n==-1/0}function jP(n){return typeof n=="number"&&Number.isInteger(n)&&!kf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dw="";function BP(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=z0(e)),e=FP(n.get(t),e);return z0(e)}function FP(n,e){let t=e;const i=n.length;for(let a=0;a<i;a++){const l=n.charAt(a);switch(l){case"\0":t+="";break;case Dw:t+="";break;default:t+=l}}return t}function z0(n){return n+Dw+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j0(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ls(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function qP(n,e){const t=[];for(const i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.push(e(n[i],i,n));return t}function Ow(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e,t){this.comparator=e,this.root=t||en.EMPTY}insert(e,t){return new gt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,en.BLACK,null,null))}remove(e){return new gt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,en.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const a=this.comparator(e,i.key);if(a===0)return t+i.left.size;a<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new sf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new sf(this.root,e,this.comparator,!1)}getReverseIterator(){return new sf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new sf(this.root,e,this.comparator,!0)}}class sf{constructor(e,t,i,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class en{constructor(e,t,i,a,l){this.key=e,this.value=t,this.color=i??en.RED,this.left=a??en.EMPTY,this.right=l??en.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,a,l){return new en(e??this.key,t??this.value,i??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let a=this;const l=i(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,i),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,i)),a.fixUp()}removeMin(){if(this.left.isEmpty())return en.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return en.EMPTY;i=a.right.min(),a=a.copy(i.key,i.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,en.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,en.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw _e(43730,{key:this.key,value:this.value});if(this.right.isRed())throw _e(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw _e(27949);return e+(this.isRed()?0:1)}}en.EMPTY=null,en.RED=!0,en.BLACK=!1;en.EMPTY=new class{constructor(){this.size=0}get key(){throw _e(57766)}get value(){throw _e(16141)}get color(){throw _e(16727)}get left(){throw _e(29726)}get right(){throw _e(36894)}copy(e,t,i,a,l){return this}insert(e,t,i){return new en(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this.comparator=e,this.data=new gt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const a=i.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new B0(this.data.getIterator())}getIteratorFrom(e){return new B0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof Ut)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=i.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Ut(this.comparator);return t.data=e,t}}class B0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(e){this.fields=e,e.sort(tn.comparator)}static empty(){return new kn([])}unionWith(e){let t=new Ut(tn.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new kn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Xo(this.fields,e.fields,(t,i)=>t.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new Mw("Invalid base64 string: "+l):l}}(e);return new rn(t)}static fromUint8Array(e){const t=function(a){let l="";for(let c=0;c<a.length;++c)l+=String.fromCharCode(a[c]);return l}(e);return new rn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const i=new Uint8Array(t.length);for(let a=0;a<t.length;a++)i[a]=t.charCodeAt(a);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return De(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}rn.EMPTY_BYTE_STRING=new rn("");const HP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ws(n){if(Ue(!!n,39018),typeof n=="string"){let e=0;const t=HP.exec(n);if(Ue(!!t,46558,{timestamp:n}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:wt(n.seconds),nanos:wt(n.nanos)}}function wt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Ss(n){return typeof n=="string"?rn.fromBase64String(n):rn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pw="server_timestamp",xw="__type__",Vw="__previous_value__",kw="__local_write_time__";function cd(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[xw])===null||t===void 0?void 0:t.stringValue)===Pw}function hd(n){const e=n.mapValue.fields[Vw];return cd(e)?hd(e):e}function Wu(n){const e=ws(n.mapValue.fields[kw].timestampValue);return new ut(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GP{constructor(e,t,i,a,l,c,d,m,g,_){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=a,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=m,this.useFetchStreams=g,this.isUsingEmulator=_}}const Lf="(default)";class Zu{constructor(e,t){this.projectId=e,this.database=t||Lf}static empty(){return new Zu("","")}get isDefaultDatabase(){return this.database===Lf}isEqual(e){return e instanceof Zu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lw="__type__",$P="__max__",af={mapValue:{}},Uw="__vector__",Uf="value";function Rs(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?cd(n)?4:QP(n)?9007199254740991:KP(n)?10:11:_e(28295,{value:n})}function qr(n,e){if(n===e)return!0;const t=Rs(n);if(t!==Rs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Wu(n).isEqual(Wu(e));case 3:return function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const c=ws(a.timestampValue),d=ws(l.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(a,l){return Ss(a.bytesValue).isEqual(Ss(l.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(a,l){return wt(a.geoPointValue.latitude)===wt(l.geoPointValue.latitude)&&wt(a.geoPointValue.longitude)===wt(l.geoPointValue.longitude)}(n,e);case 2:return function(a,l){if("integerValue"in a&&"integerValue"in l)return wt(a.integerValue)===wt(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const c=wt(a.doubleValue),d=wt(l.doubleValue);return c===d?kf(c)===kf(d):isNaN(c)&&isNaN(d)}return!1}(n,e);case 9:return Xo(n.arrayValue.values||[],e.arrayValue.values||[],qr);case 10:case 11:return function(a,l){const c=a.mapValue.fields||{},d=l.mapValue.fields||{};if(j0(c)!==j0(d))return!1;for(const m in c)if(c.hasOwnProperty(m)&&(d[m]===void 0||!qr(c[m],d[m])))return!1;return!0}(n,e);default:return _e(52216,{left:n})}}function Ju(n,e){return(n.values||[]).find(t=>qr(t,e))!==void 0}function Wo(n,e){if(n===e)return 0;const t=Rs(n),i=Rs(e);if(t!==i)return De(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return De(n.booleanValue,e.booleanValue);case 2:return function(l,c){const d=wt(l.integerValue||l.doubleValue),m=wt(c.integerValue||c.doubleValue);return d<m?-1:d>m?1:d===m?0:isNaN(d)?isNaN(m)?0:-1:1}(n,e);case 3:return F0(n.timestampValue,e.timestampValue);case 4:return F0(Wu(n),Wu(e));case 5:return bg(n.stringValue,e.stringValue);case 6:return function(l,c){const d=Ss(l),m=Ss(c);return d.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(l,c){const d=l.split("/"),m=c.split("/");for(let g=0;g<d.length&&g<m.length;g++){const _=De(d[g],m[g]);if(_!==0)return _}return De(d.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(l,c){const d=De(wt(l.latitude),wt(c.latitude));return d!==0?d:De(wt(l.longitude),wt(c.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return q0(n.arrayValue,e.arrayValue);case 10:return function(l,c){var d,m,g,_;const T=l.fields||{},A=c.fields||{},S=(d=T[Uf])===null||d===void 0?void 0:d.arrayValue,N=(m=A[Uf])===null||m===void 0?void 0:m.arrayValue,q=De(((g=S?.values)===null||g===void 0?void 0:g.length)||0,((_=N?.values)===null||_===void 0?void 0:_.length)||0);return q!==0?q:q0(S,N)}(n.mapValue,e.mapValue);case 11:return function(l,c){if(l===af.mapValue&&c===af.mapValue)return 0;if(l===af.mapValue)return 1;if(c===af.mapValue)return-1;const d=l.fields||{},m=Object.keys(d),g=c.fields||{},_=Object.keys(g);m.sort(),_.sort();for(let T=0;T<m.length&&T<_.length;++T){const A=bg(m[T],_[T]);if(A!==0)return A;const S=Wo(d[m[T]],g[_[T]]);if(S!==0)return S}return De(m.length,_.length)}(n.mapValue,e.mapValue);default:throw _e(23264,{le:t})}}function F0(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return De(n,e);const t=ws(n),i=ws(e),a=De(t.seconds,i.seconds);return a!==0?a:De(t.nanos,i.nanos)}function q0(n,e){const t=n.values||[],i=e.values||[];for(let a=0;a<t.length&&a<i.length;++a){const l=Wo(t[a],i[a]);if(l)return l}return De(t.length,i.length)}function Zo(n){return wg(n)}function wg(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const i=ws(t);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Ss(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return de.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let i="[",a=!0;for(const l of t.values||[])a?a=!1:i+=",",i+=wg(l);return i+"]"}(n.arrayValue):"mapValue"in n?function(t){const i=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const c of i)l?l=!1:a+=",",a+=`${c}:${wg(t.fields[c])}`;return a+"}"}(n.mapValue):_e(61005,{value:n})}function vf(n){switch(Rs(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=hd(n);return e?16+vf(e):16;case 5:return 2*n.stringValue.length;case 6:return Ss(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((a,l)=>a+vf(l),0)}(n.arrayValue);case 10:case 11:return function(i){let a=0;return Ls(i.fields,(l,c)=>{a+=l.length+vf(c)}),a}(n.mapValue);default:throw _e(13486,{value:n})}}function zf(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Sg(n){return!!n&&"integerValue"in n}function _y(n){return!!n&&"arrayValue"in n}function H0(n){return!!n&&"nullValue"in n}function G0(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Ef(n){return!!n&&"mapValue"in n}function KP(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[Lw])===null||t===void 0?void 0:t.stringValue)===Uw}function Lu(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Ls(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=Lu(i)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Lu(n.arrayValue.values[t]);return e}return Object.assign({},n)}function QP(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===$P}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e){this.value=e}static empty(){return new vn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Ef(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Lu(t)}setAll(e){let t=tn.emptyPath(),i={},a=[];e.forEach((c,d)=>{if(!t.isImmediateParentOf(d)){const m=this.getFieldsMap(t);this.applyChanges(m,i,a),i={},a=[],t=d.popLast()}c?i[d.lastSegment()]=Lu(c):a.push(d.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,i,a)}delete(e){const t=this.field(e.popLast());Ef(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return qr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let a=t.mapValue.fields[e.get(i)];Ef(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,i){Ls(t,(a,l)=>e[a]=l);for(const a of i)delete e[a]}clone(){return new vn(Lu(this.value))}}function zw(n){const e=[];return Ls(n.fields,(t,i)=>{const a=new tn([t]);if(Ef(i)){const l=zw(i.mapValue).fields;if(l.length===0)e.push(a);else for(const c of l)e.push(a.child(c))}else e.push(a)}),new kn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e,t,i,a,l,c,d){this.key=e,this.documentType=t,this.version=i,this.readTime=a,this.createTime=l,this.data=c,this.documentState=d}static newInvalidDocument(e){return new Kt(e,0,Ae.min(),Ae.min(),Ae.min(),vn.empty(),0)}static newFoundDocument(e,t,i,a){return new Kt(e,1,t,Ae.min(),i,a,0)}static newNoDocument(e,t){return new Kt(e,2,t,Ae.min(),Ae.min(),vn.empty(),0)}static newUnknownDocument(e,t){return new Kt(e,3,t,Ae.min(),Ae.min(),vn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=vn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=vn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Kt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Kt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{constructor(e,t){this.position=e,this.inclusive=t}}function $0(n,e,t){let i=0;for(let a=0;a<n.position.length;a++){const l=e[a],c=n.position[a];if(l.field.isKeyField()?i=de.comparator(de.fromName(c.referenceValue),t.key):i=Wo(c,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function K0(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!qr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec{constructor(e,t="asc"){this.field=e,this.dir=t}}function YP(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jw{}class Ot extends jw{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new WP(e,t,i):t==="array-contains"?new e2(e,i):t==="in"?new t2(e,i):t==="not-in"?new n2(e,i):t==="array-contains-any"?new r2(e,i):new Ot(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new ZP(e,i):new JP(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Wo(t,this.value)):t!==null&&Rs(this.value)===Rs(t)&&this.matchesComparison(Wo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return _e(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class yr extends jw{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new yr(e,t)}matches(e){return Bw(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function Bw(n){return n.op==="and"}function Fw(n){return XP(n)&&Bw(n)}function XP(n){for(const e of n.filters)if(e instanceof yr)return!1;return!0}function Rg(n){if(n instanceof Ot)return n.field.canonicalString()+n.op.toString()+Zo(n.value);if(Fw(n))return n.filters.map(e=>Rg(e)).join(",");{const e=n.filters.map(t=>Rg(t)).join(",");return`${n.op}(${e})`}}function qw(n,e){return n instanceof Ot?function(i,a){return a instanceof Ot&&i.op===a.op&&i.field.isEqual(a.field)&&qr(i.value,a.value)}(n,e):n instanceof yr?function(i,a){return a instanceof yr&&i.op===a.op&&i.filters.length===a.filters.length?i.filters.reduce((l,c,d)=>l&&qw(c,a.filters[d]),!0):!1}(n,e):void _e(19439)}function Hw(n){return n instanceof Ot?function(t){return`${t.field.canonicalString()} ${t.op} ${Zo(t.value)}`}(n):n instanceof yr?function(t){return t.op.toString()+" {"+t.getFilters().map(Hw).join(" ,")+"}"}(n):"Filter"}class WP extends Ot{constructor(e,t,i){super(e,t,i),this.key=de.fromName(i.referenceValue)}matches(e){const t=de.comparator(e.key,this.key);return this.matchesComparison(t)}}class ZP extends Ot{constructor(e,t){super(e,"in",t),this.keys=Gw("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class JP extends Ot{constructor(e,t){super(e,"not-in",t),this.keys=Gw("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Gw(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(i=>de.fromName(i.referenceValue))}class e2 extends Ot{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return _y(t)&&Ju(t.arrayValue,this.value)}}class t2 extends Ot{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Ju(this.value.arrayValue,t)}}class n2 extends Ot{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ju(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Ju(this.value.arrayValue,t)}}class r2 extends Ot{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!_y(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>Ju(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i2{constructor(e,t=null,i=[],a=[],l=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=a,this.limit=l,this.startAt=c,this.endAt=d,this.Pe=null}}function Q0(n,e=null,t=[],i=[],a=null,l=null,c=null){return new i2(n,e,t,i,a,l,c)}function vy(n){const e=Se(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>Rg(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>function(l){return l.field.canonicalString()+l.dir}(i)).join(","),Tc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>Zo(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>Zo(i)).join(",")),e.Pe=t}return e.Pe}function Ey(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!YP(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!qw(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!K0(n.startAt,e.startAt)&&K0(n.endAt,e.endAt)}function Ig(n){return de.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La{constructor(e,t=null,i=[],a=[],l=null,c="F",d=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=a,this.limit=l,this.limitType=c,this.startAt=d,this.endAt=m,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function s2(n,e,t,i,a,l,c,d){return new La(n,e,t,i,a,l,c,d)}function fd(n){return new La(n)}function Y0(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Ty(n){return n.collectionGroup!==null}function Go(n){const e=Se(n);if(e.Te===null){e.Te=[];const t=new Set;for(const l of e.explicitOrderBy)e.Te.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new Ut(tn.comparator);return c.filters.forEach(m=>{m.getFlattenedFilters().forEach(g=>{g.isInequality()&&(d=d.add(g.field))})}),d})(e).forEach(l=>{t.has(l.canonicalString())||l.isKeyField()||e.Te.push(new ec(l,i))}),t.has(tn.keyField().canonicalString())||e.Te.push(new ec(tn.keyField(),i))}return e.Te}function zr(n){const e=Se(n);return e.Ie||(e.Ie=$w(e,Go(n))),e.Ie}function a2(n){const e=Se(n);return e.de||(e.de=$w(e,n.explicitOrderBy)),e.de}function $w(n,e){if(n.limitType==="F")return Q0(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(a=>{const l=a.dir==="desc"?"asc":"desc";return new ec(a.field,l)});const t=n.endAt?new Jo(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Jo(n.startAt.position,n.startAt.inclusive):null;return Q0(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function Cg(n,e){const t=n.filters.concat([e]);return new La(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function jf(n,e,t){return new La(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function dd(n,e){return Ey(zr(n),zr(e))&&n.limitType===e.limitType}function Kw(n){return`${vy(zr(n))}|lt:${n.limitType}`}function Lo(n){return`Query(target=${function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(a=>Hw(a)).join(", ")}]`),Tc(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(a=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(a)).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(a=>Zo(a)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(a=>Zo(a)).join(",")),`Target(${i})`}(zr(n))}; limitType=${n.limitType})`}function md(n,e){return e.isFoundDocument()&&function(i,a){const l=a.key.path;return i.collectionGroup!==null?a.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):de.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)}(n,e)&&function(i,a){for(const l of Go(i))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0}(n,e)&&function(i,a){for(const l of i.filters)if(!l.matches(a))return!1;return!0}(n,e)&&function(i,a){return!(i.startAt&&!function(c,d,m){const g=$0(c,d,m);return c.inclusive?g<=0:g<0}(i.startAt,Go(i),a)||i.endAt&&!function(c,d,m){const g=$0(c,d,m);return c.inclusive?g>=0:g>0}(i.endAt,Go(i),a))}(n,e)}function o2(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Qw(n){return(e,t)=>{let i=!1;for(const a of Go(n)){const l=l2(a,e,t);if(l!==0)return l;i=i||a.field.isKeyField()}return 0}}function l2(n,e,t){const i=n.field.isKeyField()?de.comparator(e.key,t.key):function(l,c,d){const m=c.data.field(l),g=d.data.field(l);return m!==null&&g!==null?Wo(m,g):_e(42886)}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return _e(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[a,l]of i)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),a=this.inner[i];if(a===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return i.length===1?delete this.inner[t]:i.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Ls(this.inner,(t,i)=>{for(const[a,l]of i)e(a,l)})}isEmpty(){return Ow(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u2=new gt(de.comparator);function Mi(){return u2}const Yw=new gt(de.comparator);function Ou(...n){let e=Yw;for(const t of n)e=e.insert(t.key,t);return e}function Xw(n){let e=Yw;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function Sa(){return Uu()}function Ww(){return Uu()}function Uu(){return new Ua(n=>n.toString(),(n,e)=>n.isEqual(e))}const c2=new gt(de.comparator),h2=new Ut(de.comparator);function Le(...n){let e=h2;for(const t of n)e=e.add(t);return e}const f2=new Ut(De);function d2(){return f2}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ay(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:kf(e)?"-0":e}}function Zw(n){return{integerValue:""+n}}function m2(n,e){return jP(e)?Zw(e):Ay(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pd{constructor(){this._=void 0}}function p2(n,e,t){return n instanceof tc?function(a,l){const c={fields:{[xw]:{stringValue:Pw},[kw]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&cd(l)&&(l=hd(l)),l&&(c.fields[Vw]=l),{mapValue:c}}(t,e):n instanceof nc?eS(n,e):n instanceof rc?tS(n,e):function(a,l){const c=Jw(a,l),d=X0(c)+X0(a.Ee);return Sg(c)&&Sg(a.Ee)?Zw(d):Ay(a.serializer,d)}(n,e)}function g2(n,e,t){return n instanceof nc?eS(n,e):n instanceof rc?tS(n,e):t}function Jw(n,e){return n instanceof Bf?function(i){return Sg(i)||function(l){return!!l&&"doubleValue"in l}(i)}(e)?e:{integerValue:0}:null}class tc extends pd{}class nc extends pd{constructor(e){super(),this.elements=e}}function eS(n,e){const t=nS(e);for(const i of n.elements)t.some(a=>qr(a,i))||t.push(i);return{arrayValue:{values:t}}}class rc extends pd{constructor(e){super(),this.elements=e}}function tS(n,e){let t=nS(e);for(const i of n.elements)t=t.filter(a=>!qr(a,i));return{arrayValue:{values:t}}}class Bf extends pd{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function X0(n){return wt(n.integerValue||n.doubleValue)}function nS(n){return _y(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y2{constructor(e,t){this.field=e,this.transform=t}}function _2(n,e){return n.field.isEqual(e.field)&&function(i,a){return i instanceof nc&&a instanceof nc||i instanceof rc&&a instanceof rc?Xo(i.elements,a.elements,qr):i instanceof Bf&&a instanceof Bf?qr(i.Ee,a.Ee):i instanceof tc&&a instanceof tc}(n.transform,e.transform)}class v2{constructor(e,t){this.version=e,this.transformResults=t}}class nn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new nn}static exists(e){return new nn(void 0,e)}static updateTime(e){return new nn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Tf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class gd{}function rS(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new yd(n.key,nn.none()):new Ac(n.key,n.data,nn.none());{const t=n.data,i=vn.empty();let a=new Ut(tn.comparator);for(let l of e.fields)if(!a.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?i.delete(l):i.set(l,c),a=a.add(l)}return new Us(n.key,i,new kn(a.toArray()),nn.none())}}function E2(n,e,t){n instanceof Ac?function(a,l,c){const d=a.value.clone(),m=Z0(a.fieldTransforms,l,c.transformResults);d.setAll(m),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()}(n,e,t):n instanceof Us?function(a,l,c){if(!Tf(a.precondition,l))return void l.convertToUnknownDocument(c.version);const d=Z0(a.fieldTransforms,l,c.transformResults),m=l.data;m.setAll(iS(a)),m.setAll(d),l.convertToFoundDocument(c.version,m).setHasCommittedMutations()}(n,e,t):function(a,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()}(0,e,t)}function zu(n,e,t,i){return n instanceof Ac?function(l,c,d,m){if(!Tf(l.precondition,c))return d;const g=l.value.clone(),_=J0(l.fieldTransforms,m,c);return g.setAll(_),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),null}(n,e,t,i):n instanceof Us?function(l,c,d,m){if(!Tf(l.precondition,c))return d;const g=J0(l.fieldTransforms,m,c),_=c.data;return _.setAll(iS(l)),_.setAll(g),c.convertToFoundDocument(c.version,_).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(T=>T.field))}(n,e,t,i):function(l,c,d){return Tf(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d}(n,e,t)}function T2(n,e){let t=null;for(const i of n.fieldTransforms){const a=e.data.field(i.field),l=Jw(i.transform,a||null);l!=null&&(t===null&&(t=vn.empty()),t.set(i.field,l))}return t||null}function W0(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(i,a){return i===void 0&&a===void 0||!(!i||!a)&&Xo(i,a,(l,c)=>_2(l,c))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Ac extends gd{constructor(e,t,i,a=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Us extends gd{constructor(e,t,i,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function iS(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}}),e}function Z0(n,e,t){const i=new Map;Ue(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let a=0;a<t.length;a++){const l=n[a],c=l.transform,d=e.data.field(l.field);i.set(l.field,g2(c,d,t[a]))}return i}function J0(n,e,t){const i=new Map;for(const a of n){const l=a.transform,c=t.data.field(a.field);i.set(a.field,p2(l,c,e))}return i}class yd extends gd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class sS extends gd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A2{constructor(e,t,i,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=a}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&E2(l,e,i[a])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=zu(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=zu(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=Ww();return this.mutations.forEach(a=>{const l=e.get(a.key),c=l.overlayedDocument;let d=this.applyToLocalView(c,l.mutatedFields);d=t.has(a.key)?null:d;const m=rS(c,d);m!==null&&i.set(a.key,m),c.isValidDocument()||c.convertToNoDocument(Ae.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Le())}isEqual(e){return this.batchId===e.batchId&&Xo(this.mutations,e.mutations,(t,i)=>W0(t,i))&&Xo(this.baseMutations,e.baseMutations,(t,i)=>W0(t,i))}}class by{constructor(e,t,i,a){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=a}static from(e,t,i){Ue(e.mutations.length===i.length,58842,{Ve:e.mutations.length,me:i.length});let a=function(){return c2}();const l=e.mutations;for(let c=0;c<l.length;c++)a=a.insert(l[c].key,i[c].version);return new by(e,t,i,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b2{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w2{constructor(e,t,i){this.alias=e,this.aggregateType=t,this.fieldPath=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S2{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Dt,Fe;function aS(n){switch(n){case Y.OK:return _e(64938);case Y.CANCELLED:case Y.UNKNOWN:case Y.DEADLINE_EXCEEDED:case Y.RESOURCE_EXHAUSTED:case Y.INTERNAL:case Y.UNAVAILABLE:case Y.UNAUTHENTICATED:return!1;case Y.INVALID_ARGUMENT:case Y.NOT_FOUND:case Y.ALREADY_EXISTS:case Y.PERMISSION_DENIED:case Y.FAILED_PRECONDITION:case Y.ABORTED:case Y.OUT_OF_RANGE:case Y.UNIMPLEMENTED:case Y.DATA_LOSS:return!0;default:return _e(15467,{code:n})}}function oS(n){if(n===void 0)return Oi("GRPC error has no .code"),Y.UNKNOWN;switch(n){case Dt.OK:return Y.OK;case Dt.CANCELLED:return Y.CANCELLED;case Dt.UNKNOWN:return Y.UNKNOWN;case Dt.DEADLINE_EXCEEDED:return Y.DEADLINE_EXCEEDED;case Dt.RESOURCE_EXHAUSTED:return Y.RESOURCE_EXHAUSTED;case Dt.INTERNAL:return Y.INTERNAL;case Dt.UNAVAILABLE:return Y.UNAVAILABLE;case Dt.UNAUTHENTICATED:return Y.UNAUTHENTICATED;case Dt.INVALID_ARGUMENT:return Y.INVALID_ARGUMENT;case Dt.NOT_FOUND:return Y.NOT_FOUND;case Dt.ALREADY_EXISTS:return Y.ALREADY_EXISTS;case Dt.PERMISSION_DENIED:return Y.PERMISSION_DENIED;case Dt.FAILED_PRECONDITION:return Y.FAILED_PRECONDITION;case Dt.ABORTED:return Y.ABORTED;case Dt.OUT_OF_RANGE:return Y.OUT_OF_RANGE;case Dt.UNIMPLEMENTED:return Y.UNIMPLEMENTED;case Dt.DATA_LOSS:return Y.DATA_LOSS;default:return _e(39323,{code:n})}}(Fe=Dt||(Dt={}))[Fe.OK=0]="OK",Fe[Fe.CANCELLED=1]="CANCELLED",Fe[Fe.UNKNOWN=2]="UNKNOWN",Fe[Fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Fe[Fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Fe[Fe.NOT_FOUND=5]="NOT_FOUND",Fe[Fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Fe[Fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Fe[Fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Fe[Fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Fe[Fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Fe[Fe.ABORTED=10]="ABORTED",Fe[Fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Fe[Fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Fe[Fe.INTERNAL=13]="INTERNAL",Fe[Fe.UNAVAILABLE=14]="UNAVAILABLE",Fe[Fe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R2=new _s([4294967295,4294967295],0);function eA(n){const e=Iw().encode(n),t=new vw;return t.update(e),new Uint8Array(t.digest())}function tA(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new _s([t,i],0),new _s([a,l],0)]}class wy{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Mu(`Invalid padding: ${t}`);if(i<0)throw new Mu(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Mu(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Mu(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=_s.fromNumber(this.fe)}pe(e,t,i){let a=e.add(t.multiply(_s.fromNumber(i)));return a.compare(R2)===1&&(a=new _s([a.getBits(0),a.getBits(1)],0)),a.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const t=eA(e),[i,a]=tA(t);for(let l=0;l<this.hashCount;l++){const c=this.pe(i,a,l);if(!this.ye(c))return!1}return!0}static create(e,t,i){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new wy(l,a,t);return i.forEach(d=>c.insert(d)),c}insert(e){if(this.fe===0)return;const t=eA(e),[i,a]=tA(t);for(let l=0;l<this.hashCount;l++){const c=this.pe(i,a,l);this.we(c)}}we(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Mu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _d{constructor(e,t,i,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const a=new Map;return a.set(e,bc.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new _d(Ae.min(),a,new gt(De),Mi(),Le())}}class bc{constructor(e,t,i,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new bc(i,t,Le(),Le(),Le())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Af{constructor(e,t,i,a){this.Se=e,this.removedTargetIds=t,this.key=i,this.be=a}}class lS{constructor(e,t){this.targetId=e,this.De=t}}class uS{constructor(e,t,i=rn.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=a}}class nA{constructor(){this.ve=0,this.Ce=rA(),this.Fe=rn.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Le(),t=Le(),i=Le();return this.Ce.forEach((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:i=i.add(a);break;default:_e(38017,{changeType:l})}}),new bc(this.Fe,this.Me,e,t,i)}ke(){this.xe=!1,this.Ce=rA()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Ue(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class I2{constructor(e){this.We=e,this.Ge=new Map,this.ze=Mi(),this.je=of(),this.Je=of(),this.He=new gt(De)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{const i=this.tt(t);switch(e.state){case 0:this.nt(t)&&i.Be(e.resumeToken);break;case 1:i.Ue(),i.Oe||i.ke(),i.Be(e.resumeToken);break;case 2:i.Ue(),i.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(i.Ke(),i.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),i.Be(e.resumeToken));break;default:_e(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((i,a)=>{this.nt(a)&&t(a)})}it(e){const t=e.targetId,i=e.De.count,a=this.st(t);if(a){const l=a.target;if(Ig(l))if(i===0){const c=new de(l.path);this.Xe(t,c,Kt.newNoDocument(c,Ae.min()))}else Ue(i===1,20013,{expectedCount:i});else{const c=this.ot(t);if(c!==i){const d=this._t(e),m=d?this.ut(d,e,c):1;if(m!==0){this.rt(t);const g=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,g)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:a=0},hashCount:l=0}=t;let c,d;try{c=Ss(i).toUint8Array()}catch(m){if(m instanceof Mw)return As("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{d=new wy(c,a,l)}catch(m){return As(m instanceof Mu?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return d.fe===0?null:d}ut(e,t,i){return t.De.count===i-this.ht(e,t.targetId)?0:2}ht(e,t){const i=this.We.getRemoteKeysForTarget(t);let a=0;return i.forEach(l=>{const c=this.We.lt(),d=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.Xe(t,l,null),a++)}),a}Pt(e){const t=new Map;this.Ge.forEach((l,c)=>{const d=this.st(c);if(d){if(l.current&&Ig(d.target)){const m=new de(d.target.path);this.Tt(m).has(c)||this.It(c,m)||this.Xe(c,m,Kt.newNoDocument(m,e))}l.Ne&&(t.set(c,l.Le()),l.ke())}});let i=Le();this.Je.forEach((l,c)=>{let d=!0;c.forEachWhile(m=>{const g=this.st(m);return!g||g.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)}),d&&(i=i.add(l))}),this.ze.forEach((l,c)=>c.setReadTime(e));const a=new _d(e,t,this.He,this.ze,i);return this.ze=Mi(),this.je=of(),this.Je=of(),this.He=new gt(De),a}Ze(e,t){if(!this.nt(e))return;const i=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,i),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,i){if(!this.nt(e))return;const a=this.tt(e);this.It(e,t)?a.qe(t,1):a.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),i&&(this.ze=this.ze.insert(t,i))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new nA,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new Ut(De),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new Ut(De),this.je=this.je.insert(e,t)),t}nt(e){const t=this.st(e)!==null;return t||ue("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new nA),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function of(){return new gt(de.comparator)}function rA(){return new gt(de.comparator)}const C2={asc:"ASCENDING",desc:"DESCENDING"},N2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},D2={and:"AND",or:"OR"};class O2{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Ng(n,e){return n.useProto3Json||Tc(e)?e:{value:e}}function Ff(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function cS(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function M2(n,e){return Ff(n,e.toTimestamp())}function Un(n){return Ue(!!n,49232),Ae.fromTimestamp(function(t){const i=ws(t);return new ut(i.seconds,i.nanos)}(n))}function Sy(n,e){return Dg(n,e).canonicalString()}function Dg(n,e){const t=function(a){return new We(["projects",a.projectId,"databases",a.database])}(n).child("documents");return e===void 0?t:t.child(e)}function hS(n){const e=We.fromString(n);return Ue(_S(e),10190,{key:e.toString()}),e}function qf(n,e){return Sy(n.databaseId,e.path)}function ju(n,e){const t=hS(e);if(t.get(1)!==n.databaseId.projectId)throw new se(Y.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new se(Y.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new de(dS(t))}function fS(n,e){return Sy(n.databaseId,e)}function P2(n){const e=hS(n);return e.length===4?We.emptyPath():dS(e)}function Og(n){return new We(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function dS(n){return Ue(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function iA(n,e,t){return{name:qf(n,e),fields:t.value.mapValue.fields}}function x2(n,e){return"found"in e?function(i,a){Ue(!!a.found,43571),a.found.name,a.found.updateTime;const l=ju(i,a.found.name),c=Un(a.found.updateTime),d=a.found.createTime?Un(a.found.createTime):Ae.min(),m=new vn({mapValue:{fields:a.found.fields}});return Kt.newFoundDocument(l,c,d,m)}(n,e):"missing"in e?function(i,a){Ue(!!a.missing,3894),Ue(!!a.readTime,22933);const l=ju(i,a.missing),c=Un(a.readTime);return Kt.newNoDocument(l,c)}(n,e):_e(7234,{result:e})}function V2(n,e){let t;if("targetChange"in e){e.targetChange;const i=function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:_e(39313,{state:g})}(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=function(g,_){return g.useProto3Json?(Ue(_===void 0||typeof _=="string",58123),rn.fromBase64String(_||"")):(Ue(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),rn.fromUint8Array(_||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&function(g){const _=g.code===void 0?Y.UNKNOWN:oS(g.code);return new se(_,g.message||"")}(c);t=new uS(i,a,l,d||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const a=ju(n,i.document.name),l=Un(i.document.updateTime),c=i.document.createTime?Un(i.document.createTime):Ae.min(),d=new vn({mapValue:{fields:i.document.fields}}),m=Kt.newFoundDocument(a,l,c,d),g=i.targetIds||[],_=i.removedTargetIds||[];t=new Af(g,_,m.key,m)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const a=ju(n,i.document),l=i.readTime?Un(i.readTime):Ae.min(),c=Kt.newNoDocument(a,l),d=i.removedTargetIds||[];t=new Af([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const a=ju(n,i.document),l=i.removedTargetIds||[];t=new Af([],l,a,null)}else{if(!("filter"in e))return _e(11601,{At:e});{e.filter;const i=e.filter;i.targetId;const{count:a=0,unchangedNames:l}=i,c=new S2(a,l),d=i.targetId;t=new lS(d,c)}}return t}function mS(n,e){let t;if(e instanceof Ac)t={update:iA(n,e.key,e.value)};else if(e instanceof yd)t={delete:qf(n,e.key)};else if(e instanceof Us)t={update:iA(n,e.key,e.data),updateMask:H2(e.fieldMask)};else{if(!(e instanceof sS))return _e(16599,{Rt:e.type});t={verify:qf(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(l,c){const d=c.transform;if(d instanceof tc)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof nc)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof rc)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Bf)return{fieldPath:c.field.canonicalString(),increment:d.Ee};throw _e(20930,{transform:c.transform})}(0,i))),e.precondition.isNone||(t.currentDocument=function(a,l){return l.updateTime!==void 0?{updateTime:M2(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:_e(27497)}(n,e.precondition)),t}function k2(n,e){return n&&n.length>0?(Ue(e!==void 0,14353),n.map(t=>function(a,l){let c=a.updateTime?Un(a.updateTime):Un(l);return c.isEqual(Ae.min())&&(c=Un(l)),new v2(c,a.transformResults||[])}(t,e))):[]}function L2(n,e){return{documents:[fS(n,e.path)]}}function pS(n,e){const t={structuredQuery:{}},i=e.path;let a;e.collectionGroup!==null?(a=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=fS(n,a);const l=function(g){if(g.length!==0)return yS(yr.create(g,"and"))}(e.filters);l&&(t.structuredQuery.where=l);const c=function(g){if(g.length!==0)return g.map(_=>function(A){return{field:ds(A.field),direction:B2(A.dir)}}(_))}(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=Ng(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=function(g){return{before:g.inclusive,values:g.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(g){return{before:!g.inclusive,values:g.position}}(e.endAt)),{Vt:t,parent:a}}function U2(n,e,t,i){const{Vt:a,parent:l}=pS(n,e),c={},d=[];let m=0;return t.forEach(g=>{const _="aggregate_"+m++;c[_]=g.alias,g.aggregateType==="count"?d.push({alias:_,count:{}}):g.aggregateType==="avg"?d.push({alias:_,avg:{field:ds(g.fieldPath)}}):g.aggregateType==="sum"&&d.push({alias:_,sum:{field:ds(g.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:d,structuredQuery:a.structuredQuery},parent:a.parent},ft:c,parent:l}}function z2(n){let e=P2(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let a=null;if(i>0){Ue(i===1,65062);const _=t.from[0];_.allDescendants?a=_.collectionId:e=e.child(_.collectionId)}let l=[];t.where&&(l=function(T){const A=gS(T);return A instanceof yr&&Fw(A)?A.getFilters():[A]}(t.where));let c=[];t.orderBy&&(c=function(T){return T.map(A=>function(N){return new ec(Uo(N.field),function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction))}(A))}(t.orderBy));let d=null;t.limit&&(d=function(T){let A;return A=typeof T=="object"?T.value:T,Tc(A)?null:A}(t.limit));let m=null;t.startAt&&(m=function(T){const A=!!T.before,S=T.values||[];return new Jo(S,A)}(t.startAt));let g=null;return t.endAt&&(g=function(T){const A=!T.before,S=T.values||[];return new Jo(S,A)}(t.endAt)),s2(e,a,c,l,d,"F",m,g)}function j2(n,e){const t=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return _e(28987,{purpose:a})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function gS(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Uo(t.unaryFilter.field);return Ot.create(i,"==",{doubleValue:NaN});case"IS_NULL":const a=Uo(t.unaryFilter.field);return Ot.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Uo(t.unaryFilter.field);return Ot.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Uo(t.unaryFilter.field);return Ot.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return _e(61313);default:return _e(60726)}}(n):n.fieldFilter!==void 0?function(t){return Ot.create(Uo(t.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return _e(58110);default:return _e(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return yr.create(t.compositeFilter.filters.map(i=>gS(i)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return _e(1026)}}(t.compositeFilter.op))}(n):_e(30097,{filter:n})}function B2(n){return C2[n]}function F2(n){return N2[n]}function q2(n){return D2[n]}function ds(n){return{fieldPath:n.canonicalString()}}function Uo(n){return tn.fromServerFormat(n.fieldPath)}function yS(n){return n instanceof Ot?function(t){if(t.op==="=="){if(G0(t.value))return{unaryFilter:{field:ds(t.field),op:"IS_NAN"}};if(H0(t.value))return{unaryFilter:{field:ds(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(G0(t.value))return{unaryFilter:{field:ds(t.field),op:"IS_NOT_NAN"}};if(H0(t.value))return{unaryFilter:{field:ds(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ds(t.field),op:F2(t.op),value:t.value}}}(n):n instanceof yr?function(t){const i=t.getFilters().map(a=>yS(a));return i.length===1?i[0]:{compositeFilter:{op:q2(t.op),filters:i}}}(n):_e(54877,{filter:n})}function H2(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function _S(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps{constructor(e,t,i,a,l=Ae.min(),c=Ae.min(),d=rn.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=m}withSequenceNumber(e){return new ps(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ps(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ps(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ps(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G2{constructor(e){this.gt=e}}function $2(n){const e=z2({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?jf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K2{constructor(){this.Dn=new Q2}addToCollectionParentIndex(e,t){return this.Dn.add(t),ee.resolve()}getCollectionParents(e,t){return ee.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return ee.resolve()}deleteFieldIndex(e,t){return ee.resolve()}deleteAllFieldIndexes(e){return ee.resolve()}createTargetIndexes(e,t){return ee.resolve()}getDocumentsMatchingTarget(e,t){return ee.resolve(null)}getIndexType(e,t){return ee.resolve(0)}getFieldIndexes(e,t){return ee.resolve([])}getNextCollectionGroupToUpdate(e){return ee.resolve(null)}getMinOffset(e,t){return ee.resolve(bs.min())}getMinOffsetFromCollectionGroup(e,t){return ee.resolve(bs.min())}updateCollectionGroup(e,t,i){return ee.resolve()}updateIndexEntries(e,t){return ee.resolve()}}class Q2{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t]||new Ut(We.comparator),l=!a.has(i);return this.index[t]=a.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t];return a&&a.has(i)}getEntries(e){return(this.index[e]||new Ut(We.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sA={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},vS=41943040;class bn{static withCacheSize(e){return new bn(e,bn.DEFAULT_COLLECTION_PERCENTILE,bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */bn.DEFAULT_COLLECTION_PERCENTILE=10,bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,bn.DEFAULT=new bn(vS,bn.DEFAULT_COLLECTION_PERCENTILE,bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),bn.DISABLED=new bn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new el(0)}static ur(){return new el(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aA="LruGarbageCollector",Y2=1048576;function oA([n,e],[t,i]){const a=De(n,t);return a===0?De(e,i):a}class X2{constructor(e){this.Tr=e,this.buffer=new Ut(oA),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();oA(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class W2{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){ue(aA,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){cl(t)?ue(aA,"Ignoring IndexedDB error during garbage collection: ",t):await ul(t)}await this.Rr(3e5)})}}class Z2{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(t===0)return ee.resolve(ud.ue);const i=new X2(t);return this.Vr.forEachTarget(e,a=>i.Er(a.sequenceNumber)).next(()=>this.Vr.gr(e,a=>i.Er(a))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.Vr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ue("LruGarbageCollector","Garbage collection skipped; disabled"),ee.resolve(sA)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(ue("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),sA):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let i,a,l,c,d,m,g;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(T=>(T>this.params.maximumSequenceNumbersToCollect?(ue("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),a=this.params.maximumSequenceNumbersToCollect):a=T,c=Date.now(),this.nthSequenceNumber(e,a))).next(T=>(i=T,d=Date.now(),this.removeTargets(e,i,t))).next(T=>(l=T,m=Date.now(),this.removeOrphanedDocuments(e,i))).next(T=>(g=Date.now(),ko()<=ke.DEBUG&&ue("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-_}ms
	Determined least recently used ${a} in `+(d-c)+`ms
	Removed ${l} targets in `+(m-d)+`ms
	Removed ${T} documents in `+(g-m)+`ms
Total Duration: ${g-_}ms`),ee.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:T})))}}function J2(n,e){return new Z2(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ex{constructor(){this.changes=new Ua(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Kt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?ee.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tx{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nx{constructor(e,t,i,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=a}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(a=>(i=a,this.remoteDocumentCache.getEntry(e,t))).next(a=>(i!==null&&zu(i.mutation,a,kn.empty(),ut.now()),a))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,Le()).next(()=>i))}getLocalViewOfDocuments(e,t,i=Le()){const a=Sa();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,i).next(l=>{let c=Ou();return l.forEach((d,m)=>{c=c.insert(d,m.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const i=Sa();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,Le()))}populateOverlays(e,t,i){const a=[];return i.forEach(l=>{t.has(l)||a.push(l)}),this.documentOverlayCache.getOverlays(e,a).next(l=>{l.forEach((c,d)=>{t.set(c,d)})})}computeViews(e,t,i,a){let l=Mi();const c=Uu(),d=function(){return Uu()}();return t.forEach((m,g)=>{const _=i.get(g.key);a.has(g.key)&&(_===void 0||_.mutation instanceof Us)?l=l.insert(g.key,g):_!==void 0?(c.set(g.key,_.mutation.getFieldMask()),zu(_.mutation,g,_.mutation.getFieldMask(),ut.now())):c.set(g.key,kn.empty())}),this.recalculateAndSaveOverlays(e,l).next(m=>(m.forEach((g,_)=>c.set(g,_)),t.forEach((g,_)=>{var T;return d.set(g,new tx(_,(T=c.get(g))!==null&&T!==void 0?T:null))}),d))}recalculateAndSaveOverlays(e,t){const i=Uu();let a=new gt((c,d)=>c-d),l=Le();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const d of c)d.keys().forEach(m=>{const g=t.get(m);if(g===null)return;let _=i.get(m)||kn.empty();_=d.applyToLocalView(g,_),i.set(m,_);const T=(a.get(d.batchId)||Le()).add(m);a=a.insert(d.batchId,T)})}).next(()=>{const c=[],d=a.getReverseIterator();for(;d.hasNext();){const m=d.getNext(),g=m.key,_=m.value,T=Ww();_.forEach(A=>{if(!l.has(A)){const S=rS(t.get(A),i.get(A));S!==null&&T.set(A,S),l=l.add(A)}}),c.push(this.documentOverlayCache.saveOverlays(e,g,T))}return ee.waitFor(c)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i,a){return function(c){return de.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Ty(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,a):this.getDocumentsMatchingCollectionQuery(e,t,i,a)}getNextDocuments(e,t,i,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,a).next(l=>{const c=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,a-l.size):ee.resolve(Sa());let d=Xu,m=l;return c.next(g=>ee.forEach(g,(_,T)=>(d<T.largestBatchId&&(d=T.largestBatchId),l.get(_)?ee.resolve():this.remoteDocumentCache.getEntry(e,_).next(A=>{m=m.insert(_,A)}))).next(()=>this.populateOverlays(e,g,l)).next(()=>this.computeViews(e,m,g,Le())).next(_=>({batchId:d,changes:Xw(_)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new de(t)).next(i=>{let a=Ou();return i.isFoundDocument()&&(a=a.insert(i.key,i)),a})}getDocumentsMatchingCollectionGroupQuery(e,t,i,a){const l=t.collectionGroup;let c=Ou();return this.indexManager.getCollectionParents(e,l).next(d=>ee.forEach(d,m=>{const g=function(T,A){return new La(A,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)}(t,m.child(l));return this.getDocumentsMatchingCollectionQuery(e,g,i,a).next(_=>{_.forEach((T,A)=>{c=c.insert(T,A)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,t,i,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,a))).next(c=>{l.forEach((m,g)=>{const _=g.getKey();c.get(_)===null&&(c=c.insert(_,Kt.newInvalidDocument(_)))});let d=Ou();return c.forEach((m,g)=>{const _=l.get(m);_!==void 0&&zu(_.mutation,g,kn.empty(),ut.now()),md(t,g)&&(d=d.insert(m,g))}),d})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rx{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return ee.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,function(a){return{id:a.id,version:a.version,createTime:Un(a.createTime)}}(t)),ee.resolve()}getNamedQuery(e,t){return ee.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,function(a){return{name:a.name,query:$2(a.bundledQuery),readTime:Un(a.readTime)}}(t)),ee.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ix{constructor(){this.overlays=new gt(de.comparator),this.kr=new Map}getOverlay(e,t){return ee.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Sa();return ee.forEach(t,a=>this.getOverlay(e,a).next(l=>{l!==null&&i.set(a,l)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((a,l)=>{this.wt(e,t,l)}),ee.resolve()}removeOverlaysForBatchId(e,t,i){const a=this.kr.get(i);return a!==void 0&&(a.forEach(l=>this.overlays=this.overlays.remove(l)),this.kr.delete(i)),ee.resolve()}getOverlaysForCollection(e,t,i){const a=Sa(),l=t.length+1,c=new de(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const m=d.getNext().value,g=m.getKey();if(!t.isPrefixOf(g.path))break;g.path.length===l&&m.largestBatchId>i&&a.set(m.getKey(),m)}return ee.resolve(a)}getOverlaysForCollectionGroup(e,t,i,a){let l=new gt((g,_)=>g-_);const c=this.overlays.getIterator();for(;c.hasNext();){const g=c.getNext().value;if(g.getKey().getCollectionGroup()===t&&g.largestBatchId>i){let _=l.get(g.largestBatchId);_===null&&(_=Sa(),l=l.insert(g.largestBatchId,_)),_.set(g.getKey(),g)}}const d=Sa(),m=l.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach((g,_)=>d.set(g,_)),!(d.size()>=a)););return ee.resolve(d)}wt(e,t,i){const a=this.overlays.get(i.key);if(a!==null){const c=this.kr.get(a.largestBatchId).delete(i.key);this.kr.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new b2(t,i));let l=this.kr.get(t);l===void 0&&(l=Le(),this.kr.set(t,l)),this.kr.set(t,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sx{constructor(){this.sessionToken=rn.EMPTY_BYTE_STRING}getSessionToken(e){return ee.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ee.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ry{constructor(){this.qr=new Ut($t.Qr),this.$r=new Ut($t.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const i=new $t(e,t);this.qr=this.qr.add(i),this.$r=this.$r.add(i)}Kr(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.Wr(new $t(e,t))}Gr(e,t){e.forEach(i=>this.removeReference(i,t))}zr(e){const t=new de(new We([])),i=new $t(t,e),a=new $t(t,e+1),l=[];return this.$r.forEachInRange([i,a],c=>{this.Wr(c),l.push(c.key)}),l}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new de(new We([])),i=new $t(t,e),a=new $t(t,e+1);let l=Le();return this.$r.forEachInRange([i,a],c=>{l=l.add(c.key)}),l}containsKey(e){const t=new $t(e,0),i=this.qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class $t{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return de.comparator(e.key,t.key)||De(e.Hr,t.Hr)}static Ur(e,t){return De(e.Hr,t.Hr)||de.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ax{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new Ut($t.Qr)}checkEmpty(e){return ee.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,a){const l=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new A2(l,t,i,a);this.mutationQueue.push(c);for(const d of a)this.Yr=this.Yr.add(new $t(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return ee.resolve(c)}lookupMutationBatch(e,t){return ee.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,a=this.Xr(i),l=a<0?0:a;return ee.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return ee.resolve(this.mutationQueue.length===0?yy:this.er-1)}getAllMutationBatches(e){return ee.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new $t(t,0),a=new $t(t,Number.POSITIVE_INFINITY),l=[];return this.Yr.forEachInRange([i,a],c=>{const d=this.Zr(c.Hr);l.push(d)}),ee.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Ut(De);return t.forEach(a=>{const l=new $t(a,0),c=new $t(a,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([l,c],d=>{i=i.add(d.Hr)})}),ee.resolve(this.ei(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,a=i.length+1;let l=i;de.isDocumentKey(l)||(l=l.child(""));const c=new $t(new de(l),0);let d=new Ut(De);return this.Yr.forEachWhile(m=>{const g=m.key.path;return!!i.isPrefixOf(g)&&(g.length===a&&(d=d.add(m.Hr)),!0)},c),ee.resolve(this.ei(d))}ei(e){const t=[];return e.forEach(i=>{const a=this.Zr(i);a!==null&&t.push(a)}),t}removeMutationBatch(e,t){Ue(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Yr;return ee.forEach(t.mutations,a=>{const l=new $t(a.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.Yr=i})}rr(e){}containsKey(e,t){const i=new $t(t,0),a=this.Yr.firstAfterOrEqual(i);return ee.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,ee.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ox{constructor(e){this.ni=e,this.docs=function(){return new gt(de.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,a=this.docs.get(i),l=a?a.size:0,c=this.ni(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return ee.resolve(i?i.document.mutableCopy():Kt.newInvalidDocument(t))}getEntries(e,t){let i=Mi();return t.forEach(a=>{const l=this.docs.get(a);i=i.insert(a,l?l.document.mutableCopy():Kt.newInvalidDocument(a))}),ee.resolve(i)}getDocumentsMatchingQuery(e,t,i,a){let l=Mi();const c=t.path,d=new de(c.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(d);for(;m.hasNext();){const{key:g,value:{document:_}}=m.getNext();if(!c.isPrefixOf(g.path))break;g.path.length>c.length+1||kP(VP(_),i)<=0||(a.has(_.key)||md(t,_))&&(l=l.insert(_.key,_.mutableCopy()))}return ee.resolve(l)}getAllFromCollectionGroup(e,t,i,a){_e(9500)}ri(e,t){return ee.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new lx(this)}getSize(e){return ee.resolve(this.size)}}class lx extends ex{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach((i,a)=>{a.isValidDocument()?t.push(this.Or.addEntry(e,a)):this.Or.removeEntry(i)}),ee.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ux{constructor(e){this.persistence=e,this.ii=new Ua(t=>vy(t),Ey),this.lastRemoteSnapshotVersion=Ae.min(),this.highestTargetId=0,this.si=0,this.oi=new Ry,this.targetCount=0,this._i=el.ar()}forEachTarget(e,t){return this.ii.forEach((i,a)=>t(a)),ee.resolve()}getLastRemoteSnapshotVersion(e){return ee.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ee.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),ee.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.si&&(this.si=t),ee.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new el(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,ee.resolve()}updateTargetData(e,t){return this.hr(t),ee.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,ee.resolve()}removeTargets(e,t,i){let a=0;const l=[];return this.ii.forEach((c,d)=>{d.sequenceNumber<=t&&i.get(d.targetId)===null&&(this.ii.delete(c),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),a++)}),ee.waitFor(l).next(()=>a)}getTargetCount(e){return ee.resolve(this.targetCount)}getTargetData(e,t){const i=this.ii.get(t)||null;return ee.resolve(i)}addMatchingKeys(e,t,i){return this.oi.Kr(t,i),ee.resolve()}removeMatchingKeys(e,t,i){this.oi.Gr(t,i);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach(c=>{l.push(a.markPotentiallyOrphaned(e,c))}),ee.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),ee.resolve()}getMatchingKeysForTargetId(e,t){const i=this.oi.Jr(t);return ee.resolve(i)}containsKey(e,t){return ee.resolve(this.oi.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES{constructor(e,t){this.ai={},this.overlays={},this.ui=new ud(0),this.ci=!1,this.ci=!0,this.li=new sx,this.referenceDelegate=e(this),this.hi=new ux(this),this.indexManager=new K2,this.remoteDocumentCache=function(a){return new ox(a)}(i=>this.referenceDelegate.Pi(i)),this.serializer=new G2(t),this.Ti=new rx(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new ix,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ai[e.toKey()];return i||(i=new ax(t,this.referenceDelegate),this.ai[e.toKey()]=i),i}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,i){ue("MemoryPersistence","Starting transaction:",e);const a=new cx(this.ui.next());return this.referenceDelegate.Ii(),i(a).next(l=>this.referenceDelegate.di(a).next(()=>l)).toPromise().then(l=>(a.raiseOnCommittedEvent(),l))}Ei(e,t){return ee.or(Object.values(this.ai).map(i=>()=>i.containsKey(e,t)))}}class cx extends UP{constructor(e){super(),this.currentSequenceNumber=e}}class Iy{constructor(e){this.persistence=e,this.Ai=new Ry,this.Ri=null}static Vi(e){return new Iy(e)}get mi(){if(this.Ri)return this.Ri;throw _e(60996)}addReference(e,t,i){return this.Ai.addReference(i,t),this.mi.delete(i.toString()),ee.resolve()}removeReference(e,t,i){return this.Ai.removeReference(i,t),this.mi.add(i.toString()),ee.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),ee.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(a=>this.mi.add(a.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(a=>{a.forEach(l=>this.mi.add(l.toString()))}).next(()=>i.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ee.forEach(this.mi,i=>{const a=de.fromPath(i);return this.fi(e,a).next(l=>{l||t.removeEntry(a,Ae.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(i=>{i?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return ee.or([()=>ee.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Hf{constructor(e,t){this.persistence=e,this.gi=new Ua(i=>BP(i.path),(i,a)=>i.isEqual(a)),this.garbageCollector=J2(this,t)}static Vi(e,t){return new Hf(e,t)}Ii(){}di(e){return ee.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>t.next(a=>i+a))}yr(e){let t=0;return this.gr(e,i=>{t++}).next(()=>t)}gr(e,t){return ee.forEach(this.gi,(i,a)=>this.Sr(e,i,a).next(l=>l?ee.resolve():t(a)))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.ri(e,c=>this.Sr(e,c,t).next(d=>{d||(i++,l.removeEntry(c,Ae.min()))})).next(()=>l.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),ee.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.gi.set(i,e.currentSequenceNumber),ee.resolve()}removeReference(e,t,i){return this.gi.set(i,e.currentSequenceNumber),ee.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),ee.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=vf(e.data.value)),t}Sr(e,t,i){return ee.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.gi.get(t);return ee.resolve(a!==void 0&&a>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cy{constructor(e,t,i,a){this.targetId=e,this.fromCache=t,this.Is=i,this.ds=a}static Es(e,t){let i=Le(),a=Le();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new Cy(e,t.fromCache,i,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hx{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fx{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return jN()?8:zP(mn())>0?6:4}()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,i,a){const l={result:null};return this.ps(e,t).next(c=>{l.result=c}).next(()=>{if(!l.result)return this.ys(e,t,a,i).next(c=>{l.result=c})}).next(()=>{if(l.result)return;const c=new hx;return this.ws(e,t,c).next(d=>{if(l.result=d,this.Rs)return this.Ss(e,t,c,d.size)})}).next(()=>l.result)}Ss(e,t,i,a){return i.documentReadCount<this.Vs?(ko()<=ke.DEBUG&&ue("QueryEngine","SDK will not create cache indexes for query:",Lo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),ee.resolve()):(ko()<=ke.DEBUG&&ue("QueryEngine","Query:",Lo(t),"scans",i.documentReadCount,"local documents and returns",a,"documents as results."),i.documentReadCount>this.fs*a?(ko()<=ke.DEBUG&&ue("QueryEngine","The SDK decides to create cache indexes for query:",Lo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,zr(t))):ee.resolve())}ps(e,t){if(Y0(t))return ee.resolve(null);let i=zr(t);return this.indexManager.getIndexType(e,i).next(a=>a===0?null:(t.limit!==null&&a===1&&(t=jf(t,null,"F"),i=zr(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(l=>{const c=Le(...l);return this.gs.getDocuments(e,c).next(d=>this.indexManager.getMinOffset(e,i).next(m=>{const g=this.bs(t,d);return this.Ds(t,g,c,m.readTime)?this.ps(e,jf(t,null,"F")):this.vs(e,g,t,m)}))})))}ys(e,t,i,a){return Y0(t)||a.isEqual(Ae.min())?ee.resolve(null):this.gs.getDocuments(e,i).next(l=>{const c=this.bs(t,l);return this.Ds(t,c,i,a)?ee.resolve(null):(ko()<=ke.DEBUG&&ue("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Lo(t)),this.vs(e,c,t,xP(a,Xu)).next(d=>d))})}bs(e,t){let i=new Ut(Qw(e));return t.forEach((a,l)=>{md(e,l)&&(i=i.add(l))}),i}Ds(e,t,i,a){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}ws(e,t,i){return ko()<=ke.DEBUG&&ue("QueryEngine","Using full collection scan to execute query:",Lo(t)),this.gs.getDocumentsMatchingQuery(e,t,bs.min(),i)}vs(e,t,i,a){return this.gs.getDocumentsMatchingQuery(e,i,a).next(l=>(t.forEach(c=>{l=l.insert(c.key,c)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ny="LocalStore",dx=3e8;class mx{constructor(e,t,i,a){this.persistence=e,this.Cs=t,this.serializer=a,this.Fs=new gt(De),this.Ms=new Ua(l=>vy(l),Ey),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(i)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new nx(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}}function px(n,e,t,i){return new mx(n,e,t,i)}async function TS(n,e){const t=Se(n);return await t.persistence.runTransaction("Handle user change","readonly",i=>{let a;return t.mutationQueue.getAllMutationBatches(i).next(l=>(a=l,t.Ns(e),t.mutationQueue.getAllMutationBatches(i))).next(l=>{const c=[],d=[];let m=Le();for(const g of a){c.push(g.batchId);for(const _ of g.mutations)m=m.add(_.key)}for(const g of l){d.push(g.batchId);for(const _ of g.mutations)m=m.add(_.key)}return t.localDocuments.getDocuments(i,m).next(g=>({Bs:g,removedBatchIds:c,addedBatchIds:d}))})})}function gx(n,e){const t=Se(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const a=e.batch.keys(),l=t.Os.newChangeBuffer({trackRemovals:!0});return function(d,m,g,_){const T=g.batch,A=T.keys();let S=ee.resolve();return A.forEach(N=>{S=S.next(()=>_.getEntry(m,N)).next(q=>{const U=g.docVersions.get(N);Ue(U!==null,48541),q.version.compareTo(U)<0&&(T.applyToRemoteDocument(q,g),q.isValidDocument()&&(q.setReadTime(g.commitVersion),_.addEntry(q)))})}),S.next(()=>d.mutationQueue.removeMutationBatch(m,T))}(t,i,e,l).next(()=>l.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,a,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(d){let m=Le();for(let g=0;g<d.mutationResults.length;++g)d.mutationResults[g].transformResults.length>0&&(m=m.add(d.batch.mutations[g].key));return m}(e))).next(()=>t.localDocuments.getDocuments(i,a))})}function AS(n){const e=Se(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function yx(n,e){const t=Se(n),i=e.snapshotVersion;let a=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const c=t.Os.newChangeBuffer({trackRemovals:!0});a=t.Fs;const d=[];e.targetChanges.forEach((_,T)=>{const A=a.get(T);if(!A)return;d.push(t.hi.removeMatchingKeys(l,_.removedDocuments,T).next(()=>t.hi.addMatchingKeys(l,_.addedDocuments,T)));let S=A.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(T)!==null?S=S.withResumeToken(rn.EMPTY_BYTE_STRING,Ae.min()).withLastLimboFreeSnapshotVersion(Ae.min()):_.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(_.resumeToken,i)),a=a.insert(T,S),function(q,U,$){return q.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-q.snapshotVersion.toMicroseconds()>=dx?!0:$.addedDocuments.size+$.modifiedDocuments.size+$.removedDocuments.size>0}(A,S,_)&&d.push(t.hi.updateTargetData(l,S))});let m=Mi(),g=Le();if(e.documentUpdates.forEach(_=>{e.resolvedLimboDocuments.has(_)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,_))}),d.push(_x(l,c,e.documentUpdates).next(_=>{m=_.Ls,g=_.ks})),!i.isEqual(Ae.min())){const _=t.hi.getLastRemoteSnapshotVersion(l).next(T=>t.hi.setTargetsMetadata(l,l.currentSequenceNumber,i));d.push(_)}return ee.waitFor(d).next(()=>c.apply(l)).next(()=>t.localDocuments.getLocalViewOfDocuments(l,m,g)).next(()=>m)}).then(l=>(t.Fs=a,l))}function _x(n,e,t){let i=Le(),a=Le();return t.forEach(l=>i=i.add(l)),e.getEntries(n,i).next(l=>{let c=Mi();return t.forEach((d,m)=>{const g=l.get(d);m.isFoundDocument()!==g.isFoundDocument()&&(a=a.add(d)),m.isNoDocument()&&m.version.isEqual(Ae.min())?(e.removeEntry(d,m.readTime),c=c.insert(d,m)):!g.isValidDocument()||m.version.compareTo(g.version)>0||m.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(m),c=c.insert(d,m)):ue(Ny,"Ignoring outdated watch update for ",d,". Current version:",g.version," Watch version:",m.version)}),{Ls:c,ks:a}})}function vx(n,e){const t=Se(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=yy),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function Ex(n,e){const t=Se(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let a;return t.hi.getTargetData(i,e).next(l=>l?(a=l,ee.resolve(a)):t.hi.allocateTargetId(i).next(c=>(a=new ps(e,c,"TargetPurposeListen",i.currentSequenceNumber),t.hi.addTargetData(i,a).next(()=>a))))}).then(i=>{const a=t.Fs.get(i.targetId);return(a===null||i.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(i.targetId,i),t.Ms.set(e,i.targetId)),i})}async function Mg(n,e,t){const i=Se(n),a=i.Fs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,c=>i.persistence.referenceDelegate.removeTarget(c,a))}catch(c){if(!cl(c))throw c;ue(Ny,`Failed to update sequence numbers for target ${e}: ${c}`)}i.Fs=i.Fs.remove(e),i.Ms.delete(a.target)}function lA(n,e,t){const i=Se(n);let a=Ae.min(),l=Le();return i.persistence.runTransaction("Execute query","readwrite",c=>function(m,g,_){const T=Se(m),A=T.Ms.get(_);return A!==void 0?ee.resolve(T.Fs.get(A)):T.hi.getTargetData(g,_)}(i,c,zr(e)).next(d=>{if(d)return a=d.lastLimboFreeSnapshotVersion,i.hi.getMatchingKeysForTargetId(c,d.targetId).next(m=>{l=m})}).next(()=>i.Cs.getDocumentsMatchingQuery(c,e,t?a:Ae.min(),t?l:Le())).next(d=>(Tx(i,o2(e),d),{documents:d,qs:l})))}function Tx(n,e,t){let i=n.xs.get(e)||Ae.min();t.forEach((a,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)}),n.xs.set(e,i)}class uA{constructor(){this.activeTargetIds=d2()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Ax{constructor(){this.Fo=new uA,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,i){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new uA,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bx{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cA="ConnectivityMonitor";class hA{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){ue(cA,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){ue(cA,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lf=null;function Pg(){return lf===null?lf=function(){return 268435456+Math.round(2147483648*Math.random())}():lf++,"0x"+lf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wp="RestConnection",wx={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Sx{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${i}/databases/${a}`,this.Ko=this.databaseId.database===Lf?`project_id=${i}`:`project_id=${i}&database_id=${a}`}Wo(e,t,i,a,l){const c=Pg(),d=this.Go(e,t.toUriEncodedString());ue(Wp,`Sending RPC '${e}' ${c}:`,d,i);const m={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(m,a,l);const{host:g}=new URL(d),_=Va(g);return this.jo(e,d,m,i,_).then(T=>(ue(Wp,`Received RPC '${e}' ${c}: `,T),T),T=>{throw As(Wp,`RPC '${e}' ${c} failed with error: `,T,"url: ",d,"request:",i),T})}Jo(e,t,i,a,l,c){return this.Wo(e,t,i,a,l)}zo(e,t,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ll}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((a,l)=>e[l]=a),i&&i.headers.forEach((a,l)=>e[l]=a)}Go(e,t){const i=wx[e];return`${this.$o}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rx{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ln="WebChannelConnection";class Ix extends Sx{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,i,a,l){const c=Pg();return new Promise((d,m)=>{const g=new Ew;g.setWithCredentials(!0),g.listenOnce(Tw.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case _f.NO_ERROR:const T=g.getResponseJson();ue(ln,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(T)),d(T);break;case _f.TIMEOUT:ue(ln,`RPC '${e}' ${c} timed out`),m(new se(Y.DEADLINE_EXCEEDED,"Request time out"));break;case _f.HTTP_ERROR:const A=g.getStatus();if(ue(ln,`RPC '${e}' ${c} failed with status:`,A,"response text:",g.getResponseText()),A>0){let S=g.getResponseJson();Array.isArray(S)&&(S=S[0]);const N=S?.error;if(N&&N.status&&N.message){const q=function($){const ie=$.toLowerCase().replace(/_/g,"-");return Object.values(Y).indexOf(ie)>=0?ie:Y.UNKNOWN}(N.status);m(new se(q,N.message))}else m(new se(Y.UNKNOWN,"Server responded with status "+g.getStatus()))}else m(new se(Y.UNAVAILABLE,"Connection failed."));break;default:_e(9055,{c_:e,streamId:c,l_:g.getLastErrorCode(),h_:g.getLastError()})}}finally{ue(ln,`RPC '${e}' ${c} completed.`)}});const _=JSON.stringify(a);ue(ln,`RPC '${e}' ${c} sending request:`,a),g.send(t,"POST",_,i,15)})}P_(e,t,i){const a=Pg(),l=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=ww(),d=bw(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(m.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(m.useFetchStreams=!0),this.zo(m.initMessageHeaders,t,i),m.encodeInitMessageHeaders=!0;const _=l.join("");ue(ln,`Creating RPC '${e}' stream ${a}: ${_}`,m);const T=c.createWebChannel(_,m);this.T_(T);let A=!1,S=!1;const N=new Rx({Ho:U=>{S?ue(ln,`Not sending because RPC '${e}' stream ${a} is closed:`,U):(A||(ue(ln,`Opening RPC '${e}' stream ${a} transport.`),T.open(),A=!0),ue(ln,`RPC '${e}' stream ${a} sending:`,U),T.send(U))},Yo:()=>T.close()}),q=(U,$,ie)=>{U.listen($,ne=>{try{ie(ne)}catch(he){setTimeout(()=>{throw he},0)}})};return q(T,Du.EventType.OPEN,()=>{S||(ue(ln,`RPC '${e}' stream ${a} transport opened.`),N.s_())}),q(T,Du.EventType.CLOSE,()=>{S||(S=!0,ue(ln,`RPC '${e}' stream ${a} transport closed`),N.__(),this.I_(T))}),q(T,Du.EventType.ERROR,U=>{S||(S=!0,As(ln,`RPC '${e}' stream ${a} transport errored. Name:`,U.name,"Message:",U.message),N.__(new se(Y.UNAVAILABLE,"The operation could not be completed")))}),q(T,Du.EventType.MESSAGE,U=>{var $;if(!S){const ie=U.data[0];Ue(!!ie,16349);const ne=ie,he=ne?.error||(($=ne[0])===null||$===void 0?void 0:$.error);if(he){ue(ln,`RPC '${e}' stream ${a} received error:`,he);const ce=he.status;let Te=function(R){const O=Dt[R];if(O!==void 0)return oS(O)}(ce),P=he.message;Te===void 0&&(Te=Y.INTERNAL,P="Unknown error status: "+ce+" with message "+he.message),S=!0,N.__(new se(Te,P)),T.close()}else ue(ln,`RPC '${e}' stream ${a} received:`,ie),N.a_(ie)}}),q(d,Aw.STAT_EVENT,U=>{U.stat===Ag.PROXY?ue(ln,`RPC '${e}' stream ${a} detected buffering proxy`):U.stat===Ag.NOPROXY&&ue(ln,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{N.o_()},0),N}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}}function Zp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vd(n){return new O2(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dy{constructor(e,t,i=1e3,a=1.5,l=6e4){this.Fi=e,this.timerId=t,this.d_=i,this.E_=a,this.A_=l,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),i=Math.max(0,Date.now()-this.m_),a=Math.max(0,t-i);a>0&&ue("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,a,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fA="PersistentStream";class bS{constructor(e,t,i,a,l,c,d,m){this.Fi=e,this.w_=i,this.S_=a,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=m,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new Dy(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===Y.RESOURCE_EXHAUSTED?(Oi(t.toString()),Oi("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===Y.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,a])=>{this.b_===t&&this.W_(i,a)},i=>{e(()=>{const a=new se(Y.UNKNOWN,"Fetching auth token failed: "+i.message);return this.G_(a)})})}W_(e,t){const i=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{i(()=>this.listener.Zo())}),this.stream.e_(()=>{i(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(a=>{i(()=>this.G_(a))}),this.stream.onMessage(a=>{i(()=>++this.C_==1?this.j_(a):this.onNext(a))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return ue(fA,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(ue(fA,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Cx extends bS{constructor(e,t,i,a,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,a,c),this.serializer=l}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=V2(this.serializer,e),i=function(l){if(!("targetChange"in l))return Ae.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Ae.min():c.readTime?Un(c.readTime):Ae.min()}(e);return this.listener.J_(t,i)}H_(e){const t={};t.database=Og(this.serializer),t.addTarget=function(l,c){let d;const m=c.target;if(d=Ig(m)?{documents:L2(l,m)}:{query:pS(l,m).Vt},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=cS(l,c.resumeToken);const g=Ng(l,c.expectedCount);g!==null&&(d.expectedCount=g)}else if(c.snapshotVersion.compareTo(Ae.min())>0){d.readTime=Ff(l,c.snapshotVersion.toTimestamp());const g=Ng(l,c.expectedCount);g!==null&&(d.expectedCount=g)}return d}(this.serializer,e);const i=j2(this.serializer,e);i&&(t.labels=i),this.k_(t)}Y_(e){const t={};t.database=Og(this.serializer),t.removeTarget=e,this.k_(t)}}class Nx extends bS{constructor(e,t,i,a,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,a,c),this.serializer=l}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return Ue(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ue(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Ue(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=k2(e.writeResults,e.commitTime),i=Un(e.commitTime);return this.listener.ta(i,t)}na(){const e={};e.database=Og(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>mS(this.serializer,i))};this.k_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dx{}class Ox extends Dx{constructor(e,t,i,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=a,this.ra=!1}ia(){if(this.ra)throw new se(Y.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,i,a){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,c])=>this.connection.Wo(e,Dg(t,i),a,l,c)).catch(l=>{throw l.name==="FirebaseError"?(l.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new se(Y.UNKNOWN,l.toString())})}Jo(e,t,i,a,l){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,d])=>this.connection.Jo(e,Dg(t,i),a,c,d,l)).catch(c=>{throw c.name==="FirebaseError"?(c.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new se(Y.UNKNOWN,c.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class Mx{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Oi(t),this._a=!1):ue("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ma="RemoteStore";class Px{constructor(e,t,i,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=l,this.Ea.xo(c=>{i.enqueueAndForget(async()=>{za(this)&&(ue(Ma,"Restarting streams for network reachability change."),await async function(m){const g=Se(m);g.Ia.add(4),await wc(g),g.Aa.set("Unknown"),g.Ia.delete(4),await Ed(g)}(this))})}),this.Aa=new Mx(i,a)}}async function Ed(n){if(za(n))for(const e of n.da)await e(!0)}async function wc(n){for(const e of n.da)await e(!1)}function wS(n,e){const t=Se(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),xy(t)?Py(t):hl(t).x_()&&My(t,e))}function Oy(n,e){const t=Se(n),i=hl(t);t.Ta.delete(e),i.x_()&&SS(t,e),t.Ta.size===0&&(i.x_()?i.B_():za(t)&&t.Aa.set("Unknown"))}function My(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ae.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}hl(n).H_(e)}function SS(n,e){n.Ra.$e(e),hl(n).Y_(e)}function Py(n){n.Ra=new I2({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),hl(n).start(),n.Aa.aa()}function xy(n){return za(n)&&!hl(n).M_()&&n.Ta.size>0}function za(n){return Se(n).Ia.size===0}function RS(n){n.Ra=void 0}async function xx(n){n.Aa.set("Online")}async function Vx(n){n.Ta.forEach((e,t)=>{My(n,e)})}async function kx(n,e){RS(n),xy(n)?(n.Aa.la(e),Py(n)):n.Aa.set("Unknown")}async function Lx(n,e,t){if(n.Aa.set("Online"),e instanceof uS&&e.state===2&&e.cause)try{await async function(a,l){const c=l.cause;for(const d of l.targetIds)a.Ta.has(d)&&(await a.remoteSyncer.rejectListen(d,c),a.Ta.delete(d),a.Ra.removeTarget(d))}(n,e)}catch(i){ue(Ma,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Gf(n,i)}else if(e instanceof Af?n.Ra.Ye(e):e instanceof lS?n.Ra.it(e):n.Ra.et(e),!t.isEqual(Ae.min()))try{const i=await AS(n.localStore);t.compareTo(i)>=0&&await function(l,c){const d=l.Ra.Pt(c);return d.targetChanges.forEach((m,g)=>{if(m.resumeToken.approximateByteSize()>0){const _=l.Ta.get(g);_&&l.Ta.set(g,_.withResumeToken(m.resumeToken,c))}}),d.targetMismatches.forEach((m,g)=>{const _=l.Ta.get(m);if(!_)return;l.Ta.set(m,_.withResumeToken(rn.EMPTY_BYTE_STRING,_.snapshotVersion)),SS(l,m);const T=new ps(_.target,m,g,_.sequenceNumber);My(l,T)}),l.remoteSyncer.applyRemoteEvent(d)}(n,t)}catch(i){ue(Ma,"Failed to raise snapshot:",i),await Gf(n,i)}}async function Gf(n,e,t){if(!cl(e))throw e;n.Ia.add(1),await wc(n),n.Aa.set("Offline"),t||(t=()=>AS(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{ue(Ma,"Retrying IndexedDB access"),await t(),n.Ia.delete(1),await Ed(n)})}function IS(n,e){return e().catch(t=>Gf(n,t,e))}async function Td(n){const e=Se(n),t=Is(e);let i=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:yy;for(;Ux(e);)try{const a=await vx(e.localStore,i);if(a===null){e.Pa.length===0&&t.B_();break}i=a.batchId,zx(e,a)}catch(a){await Gf(e,a)}CS(e)&&NS(e)}function Ux(n){return za(n)&&n.Pa.length<10}function zx(n,e){n.Pa.push(e);const t=Is(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function CS(n){return za(n)&&!Is(n).M_()&&n.Pa.length>0}function NS(n){Is(n).start()}async function jx(n){Is(n).na()}async function Bx(n){const e=Is(n);for(const t of n.Pa)e.X_(t.mutations)}async function Fx(n,e,t){const i=n.Pa.shift(),a=by.from(i,e,t);await IS(n,()=>n.remoteSyncer.applySuccessfulWrite(a)),await Td(n)}async function qx(n,e){e&&Is(n).Z_&&await async function(i,a){if(function(c){return aS(c)&&c!==Y.ABORTED}(a.code)){const l=i.Pa.shift();Is(i).N_(),await IS(i,()=>i.remoteSyncer.rejectFailedWrite(l.batchId,a)),await Td(i)}}(n,e),CS(n)&&NS(n)}async function dA(n,e){const t=Se(n);t.asyncQueue.verifyOperationInProgress(),ue(Ma,"RemoteStore received new credentials");const i=za(t);t.Ia.add(3),await wc(t),i&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await Ed(t)}async function Hx(n,e){const t=Se(n);e?(t.Ia.delete(2),await Ed(t)):e||(t.Ia.add(2),await wc(t),t.Aa.set("Unknown"))}function hl(n){return n.Va||(n.Va=function(t,i,a){const l=Se(t);return l.ia(),new Cx(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)}(n.datastore,n.asyncQueue,{Zo:xx.bind(null,n),e_:Vx.bind(null,n),n_:kx.bind(null,n),J_:Lx.bind(null,n)}),n.da.push(async e=>{e?(n.Va.N_(),xy(n)?Py(n):n.Aa.set("Unknown")):(await n.Va.stop(),RS(n))})),n.Va}function Is(n){return n.ma||(n.ma=function(t,i,a){const l=Se(t);return l.ia(),new Nx(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)}(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:jx.bind(null,n),n_:qx.bind(null,n),ea:Bx.bind(null,n),ta:Fx.bind(null,n)}),n.da.push(async e=>{e?(n.ma.N_(),await Td(n)):(await n.ma.stop(),n.Pa.length>0&&(ue(Ma,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))})),n.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vy{constructor(e,t,i,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=a,this.removalCallback=l,this.deferred=new gr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,a,l){const c=Date.now()+i,d=new Vy(e,t,c,a,l);return d.start(i),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new se(Y.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ky(n,e){if(Oi("AsyncQueue",`${e}: ${n}`),cl(n))return new se(Y.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o{static emptySet(e){return new $o(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||de.comparator(t.key,i.key):(t,i)=>de.comparator(t.key,i.key),this.keyedMap=Ou(),this.sortedSet=new gt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof $o)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=i.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new $o;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA{constructor(){this.fa=new gt(de.comparator)}track(e){const t=e.doc.key,i=this.fa.get(t);i?e.type!==0&&i.type===3?this.fa=this.fa.insert(t,e):e.type===3&&i.type!==1?this.fa=this.fa.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.fa=this.fa.remove(t):e.type===1&&i.type===2?this.fa=this.fa.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):_e(63341,{At:e,ga:i}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal((t,i)=>{e.push(i)}),e}}class tl{constructor(e,t,i,a,l,c,d,m,g){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=a,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=m,this.hasCachedResults=g}static fromInitialDocuments(e,t,i,a,l){const c=[];return t.forEach(d=>{c.push({type:0,doc:d})}),new tl(e,t,$o.emptySet(t),c,i,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&dd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==i[a].type||!t[a].doc.isEqual(i[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gx{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class $x{constructor(){this.queries=pA(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,i){const a=Se(t),l=a.queries;a.queries=pA(),l.forEach((c,d)=>{for(const m of d.wa)m.onError(i)})})(this,new se(Y.ABORTED,"Firestore shutting down"))}}function pA(){return new Ua(n=>Kw(n),dd)}async function Ly(n,e){const t=Se(n);let i=3;const a=e.query;let l=t.queries.get(a);l?!l.Sa()&&e.ba()&&(i=2):(l=new Gx,i=e.ba()?0:1);try{switch(i){case 0:l.ya=await t.onListen(a,!0);break;case 1:l.ya=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(c){const d=ky(c,`Initialization of query '${Lo(e.query)}' failed`);return void e.onError(d)}t.queries.set(a,l),l.wa.push(e),e.va(t.onlineState),l.ya&&e.Ca(l.ya)&&zy(t)}async function Uy(n,e){const t=Se(n),i=e.query;let a=3;const l=t.queries.get(i);if(l){const c=l.wa.indexOf(e);c>=0&&(l.wa.splice(c,1),l.wa.length===0?a=e.ba()?0:1:!l.Sa()&&e.ba()&&(a=2))}switch(a){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function Kx(n,e){const t=Se(n);let i=!1;for(const a of e){const l=a.query,c=t.queries.get(l);if(c){for(const d of c.wa)d.Ca(a)&&(i=!0);c.ya=a}}i&&zy(t)}function Qx(n,e,t){const i=Se(n),a=i.queries.get(e);if(a)for(const l of a.wa)l.onError(t);i.queries.delete(e)}function zy(n){n.Da.forEach(e=>{e.next()})}var xg,gA;(gA=xg||(xg={})).Fa="default",gA.Cache="cache";class jy{constructor(e,t,i){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=i||{}}Ca(e){if(!this.options.includeMetadataChanges){const i=[];for(const a of e.docChanges)a.type!==3&&i.push(a);e=new tl(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;const i=t!=="Offline";return(!this.options.ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=tl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==xg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DS{constructor(e){this.key=e}}class OS{constructor(e){this.key=e}}class Yx{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Le(),this.mutatedKeys=Le(),this.Xa=Qw(e),this.eu=new $o(this.Xa)}get tu(){return this.Ha}nu(e,t){const i=t?t.ru:new mA,a=t?t.eu:this.eu;let l=t?t.mutatedKeys:this.mutatedKeys,c=a,d=!1;const m=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,g=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((_,T)=>{const A=a.get(_),S=md(this.query,T)?T:null,N=!!A&&this.mutatedKeys.has(A.key),q=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let U=!1;A&&S?A.data.isEqual(S.data)?N!==q&&(i.track({type:3,doc:S}),U=!0):this.iu(A,S)||(i.track({type:2,doc:S}),U=!0,(m&&this.Xa(S,m)>0||g&&this.Xa(S,g)<0)&&(d=!0)):!A&&S?(i.track({type:0,doc:S}),U=!0):A&&!S&&(i.track({type:1,doc:A}),U=!0,(m||g)&&(d=!0)),U&&(S?(c=c.add(S),l=q?l.add(_):l.delete(_)):(c=c.delete(_),l=l.delete(_)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const _=this.query.limitType==="F"?c.last():c.first();c=c.delete(_.key),l=l.delete(_.key),i.track({type:1,doc:_})}return{eu:c,ru:i,Ds:d,mutatedKeys:l}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,a){const l=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const c=e.ru.pa();c.sort((_,T)=>function(S,N){const q=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return _e(20277,{At:U})}};return q(S)-q(N)}(_.type,T.type)||this.Xa(_.doc,T.doc)),this.su(i),a=a!=null&&a;const d=t&&!a?this.ou():[],m=this.Za.size===0&&this.current&&!a?1:0,g=m!==this.Ya;return this.Ya=m,c.length!==0||g?{snapshot:new tl(this.query,e.eu,l,c,e.mutatedKeys,m===0,g,!1,!!i&&i.resumeToken.approximateByteSize()>0),_u:d}:{_u:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new mA,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=Le(),this.eu.forEach(i=>{this.au(i.key)&&(this.Za=this.Za.add(i.key))});const t=[];return e.forEach(i=>{this.Za.has(i)||t.push(new OS(i))}),this.Za.forEach(i=>{e.has(i)||t.push(new DS(i))}),t}uu(e){this.Ha=e.qs,this.Za=Le();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return tl.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const By="SyncEngine";class Xx{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class Wx{constructor(e){this.key=e,this.lu=!1}}class Zx{constructor(e,t,i,a,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.hu={},this.Pu=new Ua(d=>Kw(d),dd),this.Tu=new Map,this.Iu=new Set,this.du=new gt(de.comparator),this.Eu=new Map,this.Au=new Ry,this.Ru={},this.Vu=new Map,this.mu=el.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function Jx(n,e,t=!0){const i=LS(n);let a;const l=i.Pu.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.cu()):a=await MS(i,e,t,!0),a}async function eV(n,e){const t=LS(n);await MS(t,e,!0,!1)}async function MS(n,e,t,i){const a=await Ex(n.localStore,zr(e)),l=a.targetId,c=n.sharedClientState.addLocalQueryTarget(l,t);let d;return i&&(d=await tV(n,e,l,c==="current",a.resumeToken)),n.isPrimaryClient&&t&&wS(n.remoteStore,a),d}async function tV(n,e,t,i,a){n.gu=(T,A,S)=>async function(q,U,$,ie){let ne=U.view.nu($);ne.Ds&&(ne=await lA(q.localStore,U.query,!1).then(({documents:P})=>U.view.nu(P,ne)));const he=ie&&ie.targetChanges.get(U.targetId),ce=ie&&ie.targetMismatches.get(U.targetId)!=null,Te=U.view.applyChanges(ne,q.isPrimaryClient,he,ce);return _A(q,U.targetId,Te._u),Te.snapshot}(n,T,A,S);const l=await lA(n.localStore,e,!0),c=new Yx(e,l.qs),d=c.nu(l.documents),m=bc.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",a),g=c.applyChanges(d,n.isPrimaryClient,m);_A(n,t,g._u);const _=new Xx(e,t,c);return n.Pu.set(e,_),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),g.snapshot}async function nV(n,e,t){const i=Se(n),a=i.Pu.get(e),l=i.Tu.get(a.targetId);if(l.length>1)return i.Tu.set(a.targetId,l.filter(c=>!dd(c,e))),void i.Pu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(a.targetId),i.sharedClientState.isActiveQueryTarget(a.targetId)||await Mg(i.localStore,a.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(a.targetId),t&&Oy(i.remoteStore,a.targetId),Vg(i,a.targetId)}).catch(ul)):(Vg(i,a.targetId),await Mg(i.localStore,a.targetId,!0))}async function rV(n,e){const t=Se(n),i=t.Pu.get(e),a=t.Tu.get(i.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),Oy(t.remoteStore,i.targetId))}async function iV(n,e,t){const i=hV(n);try{const a=await function(c,d){const m=Se(c),g=ut.now(),_=d.reduce((S,N)=>S.add(N.key),Le());let T,A;return m.persistence.runTransaction("Locally write mutations","readwrite",S=>{let N=Mi(),q=Le();return m.Os.getEntries(S,_).next(U=>{N=U,N.forEach(($,ie)=>{ie.isValidDocument()||(q=q.add($))})}).next(()=>m.localDocuments.getOverlayedDocuments(S,N)).next(U=>{T=U;const $=[];for(const ie of d){const ne=T2(ie,T.get(ie.key).overlayedDocument);ne!=null&&$.push(new Us(ie.key,ne,zw(ne.value.mapValue),nn.exists(!0)))}return m.mutationQueue.addMutationBatch(S,g,$,d)}).next(U=>{A=U;const $=U.applyToLocalDocumentSet(T,q);return m.documentOverlayCache.saveOverlays(S,U.batchId,$)})}).then(()=>({batchId:A.batchId,changes:Xw(T)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(a.batchId),function(c,d,m){let g=c.Ru[c.currentUser.toKey()];g||(g=new gt(De)),g=g.insert(d,m),c.Ru[c.currentUser.toKey()]=g}(i,a.batchId,t),await Sc(i,a.changes),await Td(i.remoteStore)}catch(a){const l=ky(a,"Failed to persist write");t.reject(l)}}async function PS(n,e){const t=Se(n);try{const i=await yx(t.localStore,e);e.targetChanges.forEach((a,l)=>{const c=t.Eu.get(l);c&&(Ue(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?c.lu=!0:a.modifiedDocuments.size>0?Ue(c.lu,14607):a.removedDocuments.size>0&&(Ue(c.lu,42227),c.lu=!1))}),await Sc(t,i,e)}catch(i){await ul(i)}}function yA(n,e,t){const i=Se(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const a=[];i.Pu.forEach((l,c)=>{const d=c.view.va(e);d.snapshot&&a.push(d.snapshot)}),function(c,d){const m=Se(c);m.onlineState=d;let g=!1;m.queries.forEach((_,T)=>{for(const A of T.wa)A.va(d)&&(g=!0)}),g&&zy(m)}(i.eventManager,e),a.length&&i.hu.J_(a),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function sV(n,e,t){const i=Se(n);i.sharedClientState.updateQueryState(e,"rejected",t);const a=i.Eu.get(e),l=a&&a.key;if(l){let c=new gt(de.comparator);c=c.insert(l,Kt.newNoDocument(l,Ae.min()));const d=Le().add(l),m=new _d(Ae.min(),new Map,new gt(De),c,d);await PS(i,m),i.du=i.du.remove(l),i.Eu.delete(e),Fy(i)}else await Mg(i.localStore,e,!1).then(()=>Vg(i,e,t)).catch(ul)}async function aV(n,e){const t=Se(n),i=e.batch.batchId;try{const a=await gx(t.localStore,e);VS(t,i,null),xS(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Sc(t,a)}catch(a){await ul(a)}}async function oV(n,e,t){const i=Se(n);try{const a=await function(c,d){const m=Se(c);return m.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let _;return m.mutationQueue.lookupMutationBatch(g,d).next(T=>(Ue(T!==null,37113),_=T.keys(),m.mutationQueue.removeMutationBatch(g,T))).next(()=>m.mutationQueue.performConsistencyCheck(g)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(g,_,d)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,_)).next(()=>m.localDocuments.getDocuments(g,_))})}(i.localStore,e);VS(i,e,t),xS(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Sc(i,a)}catch(a){await ul(a)}}function xS(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function VS(n,e,t){const i=Se(n);let a=i.Ru[i.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),i.Ru[i.currentUser.toKey()]=a}}function Vg(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Tu.get(e))n.Pu.delete(i),t&&n.hu.pu(i,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach(i=>{n.Au.containsKey(i)||kS(n,i)})}function kS(n,e){n.Iu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Oy(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),Fy(n))}function _A(n,e,t){for(const i of t)i instanceof DS?(n.Au.addReference(i.key,e),lV(n,i)):i instanceof OS?(ue(By,"Document no longer in limbo: "+i.key),n.Au.removeReference(i.key,e),n.Au.containsKey(i.key)||kS(n,i.key)):_e(19791,{yu:i})}function lV(n,e){const t=e.key,i=t.path.canonicalString();n.du.get(t)||n.Iu.has(i)||(ue(By,"New document in limbo: "+t),n.Iu.add(i),Fy(n))}function Fy(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Iu.values().next().value;n.Iu.delete(e);const t=new de(We.fromString(e)),i=n.mu.next();n.Eu.set(i,new Wx(t)),n.du=n.du.insert(t,i),wS(n.remoteStore,new ps(zr(fd(t.path)),i,"TargetPurposeLimboResolution",ud.ue))}}async function Sc(n,e,t){const i=Se(n),a=[],l=[],c=[];i.Pu.isEmpty()||(i.Pu.forEach((d,m)=>{c.push(i.gu(m,e,t).then(g=>{var _;if((g||t)&&i.isPrimaryClient){const T=g?!g.fromCache:(_=t?.targetChanges.get(m.targetId))===null||_===void 0?void 0:_.current;i.sharedClientState.updateQueryState(m.targetId,T?"current":"not-current")}if(g){a.push(g);const T=Cy.Es(m.targetId,g);l.push(T)}}))}),await Promise.all(c),i.hu.J_(a),await async function(m,g){const _=Se(m);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",T=>ee.forEach(g,A=>ee.forEach(A.Is,S=>_.persistence.referenceDelegate.addReference(T,A.targetId,S)).next(()=>ee.forEach(A.ds,S=>_.persistence.referenceDelegate.removeReference(T,A.targetId,S)))))}catch(T){if(!cl(T))throw T;ue(Ny,"Failed to update sequence numbers: "+T)}for(const T of g){const A=T.targetId;if(!T.fromCache){const S=_.Fs.get(A),N=S.snapshotVersion,q=S.withLastLimboFreeSnapshotVersion(N);_.Fs=_.Fs.insert(A,q)}}}(i.localStore,l))}async function uV(n,e){const t=Se(n);if(!t.currentUser.isEqual(e)){ue(By,"User change. New user:",e.toKey());const i=await TS(t.localStore,e);t.currentUser=e,function(l,c){l.Vu.forEach(d=>{d.forEach(m=>{m.reject(new se(Y.CANCELLED,c))})}),l.Vu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Sc(t,i.Bs)}}function cV(n,e){const t=Se(n),i=t.Eu.get(e);if(i&&i.lu)return Le().add(i.key);{let a=Le();const l=t.Tu.get(e);if(!l)return a;for(const c of l){const d=t.Pu.get(c);a=a.unionWith(d.view.tu)}return a}}function LS(n){const e=Se(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=PS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=cV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=sV.bind(null,e),e.hu.J_=Kx.bind(null,e.eventManager),e.hu.pu=Qx.bind(null,e.eventManager),e}function hV(n){const e=Se(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=aV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=oV.bind(null,e),e}class $f{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=vd(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return px(this.persistence,new fx,e.initialUser,this.serializer)}Du(e){return new ES(Iy.Vi,this.serializer)}bu(e){return new Ax}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}$f.provider={build:()=>new $f};class fV extends $f{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){Ue(this.persistence.referenceDelegate instanceof Hf,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new W2(i,e.asyncQueue,t)}Du(e){const t=this.cacheSizeBytes!==void 0?bn.withCacheSize(this.cacheSizeBytes):bn.DEFAULT;return new ES(i=>Hf.Vi(i,t),this.serializer)}}class kg{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>yA(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=uV.bind(null,this.syncEngine),await Hx(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new $x}()}createDatastore(e){const t=vd(e.databaseInfo.databaseId),i=function(l){return new Ix(l)}(e.databaseInfo);return function(l,c,d,m){return new Ox(l,c,d,m)}(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return function(i,a,l,c,d){return new Px(i,a,l,c,d)}(this.localStore,this.datastore,e.asyncQueue,t=>yA(this.syncEngine,t,0),function(){return hA.C()?new hA:new bx}())}createSyncEngine(e,t){return function(a,l,c,d,m,g,_){const T=new Zx(a,l,c,d,m,g);return _&&(T.fu=!0),T}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(a){const l=Se(a);ue(Ma,"RemoteStore shutting down."),l.Ia.add(5),await wc(l),l.Ea.shutdown(),l.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}kg.provider={build:()=>new kg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qy{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Oi("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dV{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new se(Y.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(a,l){const c=Se(a),d={documents:l.map(T=>qf(c.serializer,T))},m=await c.Jo("BatchGetDocuments",c.serializer.databaseId,We.emptyPath(),d,l.length),g=new Map;m.forEach(T=>{const A=x2(c.serializer,T);g.set(A.key.toString(),A)});const _=[];return l.forEach(T=>{const A=g.get(T.toString());Ue(!!A,55234,{key:T}),_.push(A)}),_}(this.datastore,e);return t.forEach(i=>this.recordVersion(i)),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new yd(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,i)=>{const a=de.fromPath(i);this.mutations.push(new sS(a,this.precondition(a)))}),await async function(i,a){const l=Se(i),c={writes:a.map(d=>mS(l.serializer,d))};await l.Wo("Commit",l.serializer.databaseId,We.emptyPath(),c)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw _e(50498,{Wu:e.constructor.name});t=Ae.min()}const i=this.readVersions.get(e.key.toString());if(i){if(!t.isEqual(i))throw new se(Y.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Ae.min())?nn.exists(!1):nn.updateTime(t):nn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ae.min()))throw new se(Y.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return nn.updateTime(t)}return nn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mV{constructor(e,t,i,a,l){this.asyncQueue=e,this.datastore=t,this.options=i,this.updateFunction=a,this.deferred=l,this.Gu=i.maxAttempts,this.F_=new Dy(this.asyncQueue,"transaction_retry")}zu(){this.Gu-=1,this.ju()}ju(){this.F_.g_(async()=>{const e=new dV(this.datastore),t=this.Ju(e);t&&t.then(i=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(i)}).catch(a=>{this.Hu(a)}))}).catch(i=>{this.Hu(i)})})}Ju(e){try{const t=this.updateFunction(e);return!Tc(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Hu(e){this.Gu>0&&this.Yu(e)?(this.Gu-=1,this.asyncQueue.enqueueAndForget(()=>(this.ju(),Promise.resolve()))):this.deferred.reject(e)}Yu(e){if(e.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!aS(t)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cs="FirestoreClient";class pV{constructor(e,t,i,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=a,this.user=cn.UNAUTHENTICATED,this.clientId=gy.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,async c=>{ue(Cs,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(i,c=>(ue(Cs,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new gr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=ky(t,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Jp(n,e){n.asyncQueue.verifyOperationInProgress(),ue(Cs,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(async a=>{i.isEqual(a)||(await TS(e.localStore,a),i=a)}),e.persistence.setDatabaseDeletedListener(()=>{As("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{ue("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(a=>{As("Terminating Firestore due to IndexedDb database deletion failed",a)})}),n._offlineComponents=e}async function vA(n,e){n.asyncQueue.verifyOperationInProgress();const t=await gV(n);ue(Cs,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(i=>dA(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>dA(e.remoteStore,a)),n._onlineComponents=e}async function gV(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ue(Cs,"Using user provided OfflineComponentProvider");try{await Jp(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(a){return a.name==="FirebaseError"?a.code===Y.FAILED_PRECONDITION||a.code===Y.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(t))throw t;As("Error using user provided cache. Falling back to memory cache: "+t),await Jp(n,new $f)}}else ue(Cs,"Using default OfflineComponentProvider"),await Jp(n,new fV(void 0));return n._offlineComponents}async function Hy(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ue(Cs,"Using user provided OnlineComponentProvider"),await vA(n,n._uninitializedComponentsProvider._online)):(ue(Cs,"Using default OnlineComponentProvider"),await vA(n,new kg))),n._onlineComponents}function yV(n){return Hy(n).then(e=>e.syncEngine)}function US(n){return Hy(n).then(e=>e.datastore)}async function Kf(n){const e=await Hy(n),t=e.eventManager;return t.onListen=Jx.bind(null,e.syncEngine),t.onUnlisten=nV.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=eV.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=rV.bind(null,e.syncEngine),t}function _V(n,e,t={}){const i=new gr;return n.asyncQueue.enqueueAndForget(async()=>function(l,c,d,m,g){const _=new qy({next:A=>{_.Ou(),c.enqueueAndForget(()=>Uy(l,T));const S=A.docs.has(d);!S&&A.fromCache?g.reject(new se(Y.UNAVAILABLE,"Failed to get document because the client is offline.")):S&&A.fromCache&&m&&m.source==="server"?g.reject(new se(Y.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(A)},error:A=>g.reject(A)}),T=new jy(fd(d.path),_,{includeMetadataChanges:!0,ka:!0});return Ly(l,T)}(await Kf(n),n.asyncQueue,e,t,i)),i.promise}function vV(n,e,t={}){const i=new gr;return n.asyncQueue.enqueueAndForget(async()=>function(l,c,d,m,g){const _=new qy({next:A=>{_.Ou(),c.enqueueAndForget(()=>Uy(l,T)),A.fromCache&&m.source==="server"?g.reject(new se(Y.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(A)},error:A=>g.reject(A)}),T=new jy(d,_,{includeMetadataChanges:!0,ka:!0});return Ly(l,T)}(await Kf(n),n.asyncQueue,e,t,i)),i.promise}function EV(n,e,t){const i=new gr;return n.asyncQueue.enqueueAndForget(async()=>{try{const a=await US(n);i.resolve(async function(c,d,m){var g;const _=Se(c),{request:T,ft:A,parent:S}=U2(_.serializer,a2(d),m);_.connection.Qo||delete T.parent;const N=(await _.Jo("RunAggregationQuery",_.serializer.databaseId,S,T,1)).filter(U=>!!U.result);Ue(N.length===1,64727);const q=(g=N[0].result)===null||g===void 0?void 0:g.aggregateFields;return Object.keys(q).reduce((U,$)=>(U[A[$]]=q[$],U),{})}(a,e,t))}catch(a){i.reject(a)}}),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zS(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EA=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jS="firestore.googleapis.com",TA=!0;class AA{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new se(Y.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=jS,this.ssl=TA}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:TA;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=vS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Y2)throw new se(Y.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}MP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=zS((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new se(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new se(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new se(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,a){return i.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ad{constructor(e,t,i,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new AA({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new se(Y.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new se(Y.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new AA(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new bP;switch(i.type){case"firstParty":return new IP(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new se(Y.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const i=EA.get(t);i&&(ue("ComponentProvider","Removing Datastore"),EA.delete(t),i.terminate())}(this),Promise.resolve()}}function TV(n,e,t,i={}){var a;n=dn(n,Ad);const l=Va(e),c=n._getSettings(),d=Object.assign(Object.assign({},c),{emulatorOptions:n._getEmulatorOptions()}),m=`${e}:${t}`;l&&(Jg(`https://${m}`),ey("Firestore",!0)),c.host!==jS&&c.host!==m&&As("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g=Object.assign(Object.assign({},c),{host:m,ssl:l,emulatorOptions:i});if(!Ts(g,d)&&(n._setSettings(g),i.mockUserToken)){let _,T;if(typeof i.mockUserToken=="string")_=i.mockUserToken,T=cn.MOCK_USER;else{_=Pb(i.mockUserToken,(a=n._app)===null||a===void 0?void 0:a.options.projectId);const A=i.mockUserToken.sub||i.mockUserToken.user_id;if(!A)throw new se(Y.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new cn(A)}n._authCredentials=new wP(new Rw(_,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Yr(this.firestore,e,this._query)}}class mt{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new vs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new mt(this.firestore,e,this._key)}toJSON(){return{type:mt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Ec(t,mt._jsonSchema))return new mt(e,i||null,new de(We.fromString(t.referencePath)))}}mt._jsonSchemaVersion="firestore/documentReference/1.0",mt._jsonSchema={type:Mt("string",mt._jsonSchemaVersion),referencePath:Mt("string")};class vs extends Yr{constructor(e,t,i){super(e,t,fd(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new mt(this.firestore,null,new de(e))}withConverter(e){return new vs(this.firestore,e,this._path)}}function qe(n,e,...t){if(n=ot(n),Cw("collection","path",e),n instanceof Ad){const i=We.fromString(e,...t);return k0(i),new vs(n,null,i)}{if(!(n instanceof mt||n instanceof vs))throw new se(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(We.fromString(e,...t));return k0(i),new vs(n.firestore,null,i)}}function lt(n,e,...t){if(n=ot(n),arguments.length===1&&(e=gy.newId()),Cw("doc","path",e),n instanceof Ad){const i=We.fromString(e,...t);return V0(i),new mt(n,null,new de(i))}{if(!(n instanceof mt||n instanceof vs))throw new se(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(We.fromString(e,...t));return V0(i),new mt(n.firestore,n instanceof vs?n.converter:null,new de(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bA="AsyncQueue";class wA{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new Dy(this,"async_queue_retry"),this.oc=()=>{const i=Zp();i&&ue(bA,"Visibility state changed to "+i.visibilityState),this.F_.y_()},this._c=e;const t=Zp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=Zp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const t=new gr;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!cl(e))throw e;ue(bA,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const t=this._c.then(()=>(this.nc=!0,e().catch(i=>{throw this.tc=i,this.nc=!1,Oi("INTERNAL UNHANDLED ERROR: ",SA(i)),i}).then(i=>(this.nc=!1,i))));return this._c=t,t}enqueueAfterDelay(e,t,i){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const a=Vy.createAndSchedule(this,e,t,i,l=>this.lc(l));return this.ec.push(a),a}ac(){this.tc&&_e(47125,{hc:SA(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function SA(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RA(n){return function(t,i){if(typeof t!="object"||t===null)return!1;const a=t;for(const l of i)if(l in a&&typeof a[l]=="function")return!0;return!1}(n,["next","error","complete"])}class _r extends Ad{constructor(e,t,i,a){super(e,t,i,a),this.type="firestore",this._queue=new wA,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new wA(e),this._firestoreClient=void 0,await e}}}function AV(n,e){const t=typeof n=="object"?n:pc(),i=typeof n=="string"?n:Lf,a=Pi(t,"firestore").getImmediate({identifier:i});if(!a._initialized){const l=Db("firestore");l&&TV(a,...l)}return a}function fl(n){if(n._terminated)throw new se(Y.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||bV(n),n._firestoreClient}function bV(n){var e,t,i;const a=n._freezeSettings(),l=function(d,m,g,_){return new GP(d,m,g,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,zS(_.experimentalLongPollingOptions),_.useFetchStreams,_.isUsingEmulator)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,a);n._componentsProvider||!((t=a.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=a.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),n._firestoreClient=new pV(n._authCredentials,n._appCheckCredentials,n._queue,l,n._componentsProvider&&function(d){const m=d?._online.build();return{_offline:d?._offline.build(m),_online:m}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wV{constructor(e="count",t){this._internalFieldPath=t,this.type="AggregateField",this.aggregateType=e}}class SV{constructor(e,t,i){this._userDataWriter=t,this._data=i,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Vn(rn.fromBase64String(e))}catch(t){throw new se(Y.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Vn(rn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Vn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ec(e,Vn._jsonSchema))return Vn.fromBase64String(e.bytes)}}Vn._jsonSchemaVersion="firestore/bytes/1.0",Vn._jsonSchema={type:Mt("string",Vn._jsonSchemaVersion),bytes:Mt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new se(Y.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new tn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bd{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new se(Y.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new se(Y.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return De(this._lat,e._lat)||De(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:jr._jsonSchemaVersion}}static fromJSON(e){if(Ec(e,jr._jsonSchema))return new jr(e.latitude,e.longitude)}}jr._jsonSchemaVersion="firestore/geoPoint/1.0",jr._jsonSchema={type:Mt("string",jr._jsonSchemaVersion),latitude:Mt("number"),longitude:Mt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,a){if(i.length!==a.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==a[l])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Br._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ec(e,Br._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new Br(e.vectorValues);throw new se(Y.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Br._jsonSchemaVersion="firestore/vectorValue/1.0",Br._jsonSchema={type:Mt("string",Br._jsonSchemaVersion),vectorValues:Mt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RV=/^__.*__$/;class IV{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Us(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ac(e,this.data,t,this.fieldTransforms)}}class BS{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Us(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function FS(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw _e(40011,{Ec:n})}}class Gy{constructor(e,t,i,a,l,c){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=a,l===void 0&&this.Ac(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new Gy(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),a=this.Rc({path:i,mc:!1});return a.fc(e),a}gc(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),a=this.Rc({path:i,mc:!1});return a.Ac(),a}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Qf(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(FS(this.Ec)&&RV.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class CV{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||vd(e)}Dc(e,t,i,a=!1){return new Gy({Ec:e,methodName:t,bc:i,path:tn.emptyPath(),mc:!1,Sc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function dl(n){const e=n._freezeSettings(),t=vd(n._databaseId);return new CV(n._databaseId,!!e.ignoreUndefinedProperties,t)}function $y(n,e,t,i,a,l={}){const c=n.Dc(l.merge||l.mergeFields?2:0,e,t,a);Qy("Data must be an object, but it was:",c,i);const d=$S(i,c);let m,g;if(l.merge)m=new kn(c.fieldMask),g=c.fieldTransforms;else if(l.mergeFields){const _=[];for(const T of l.mergeFields){const A=Lg(e,T,t);if(!c.contains(A))throw new se(Y.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);QS(_,A)||_.push(A)}m=new kn(_),g=c.fieldTransforms.filter(T=>m.covers(T.field))}else m=null,g=c.fieldTransforms;return new IV(new vn(d),m,g)}class wd extends bd{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof wd}}class Ky extends bd{_toFieldTransform(e){return new y2(e.path,new tc)}isEqual(e){return e instanceof Ky}}function qS(n,e,t,i){const a=n.Dc(1,e,t);Qy("Data must be an object, but it was:",a,i);const l=[],c=vn.empty();Ls(i,(m,g)=>{const _=Yy(e,m,t);g=ot(g);const T=a.gc(_);if(g instanceof wd)l.push(_);else{const A=Ic(g,T);A!=null&&(l.push(_),c.set(_,A))}});const d=new kn(l);return new BS(c,d,a.fieldTransforms)}function HS(n,e,t,i,a,l){const c=n.Dc(1,e,t),d=[Lg(e,i,t)],m=[a];if(l.length%2!=0)throw new se(Y.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let A=0;A<l.length;A+=2)d.push(Lg(e,l[A])),m.push(l[A+1]);const g=[],_=vn.empty();for(let A=d.length-1;A>=0;--A)if(!QS(g,d[A])){const S=d[A];let N=m[A];N=ot(N);const q=c.gc(S);if(N instanceof wd)g.push(S);else{const U=Ic(N,q);U!=null&&(g.push(S),_.set(S,U))}}const T=new kn(g);return new BS(_,T,c.fieldTransforms)}function GS(n,e,t,i=!1){return Ic(t,n.Dc(i?4:3,e))}function Ic(n,e){if(KS(n=ot(n)))return Qy("Unsupported field value:",e,n),$S(n,e);if(n instanceof bd)return function(i,a){if(!FS(a.Ec))throw a.wc(`${i._methodName}() can only be used with update() and set()`);if(!a.path)throw a.wc(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(a);l&&a.fieldTransforms.push(l)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(i,a){const l=[];let c=0;for(const d of i){let m=Ic(d,a.yc(c));m==null&&(m={nullValue:"NULL_VALUE"}),l.push(m),c++}return{arrayValue:{values:l}}}(n,e)}return function(i,a){if((i=ot(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return m2(a.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=ut.fromDate(i);return{timestampValue:Ff(a.serializer,l)}}if(i instanceof ut){const l=new ut(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Ff(a.serializer,l)}}if(i instanceof jr)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Vn)return{bytesValue:cS(a.serializer,i._byteString)};if(i instanceof mt){const l=a.databaseId,c=i.firestore._databaseId;if(!c.isEqual(l))throw a.wc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Sy(i.firestore._databaseId||a.databaseId,i._key.path)}}if(i instanceof Br)return function(c,d){return{mapValue:{fields:{[Lw]:{stringValue:Uw},[Uf]:{arrayValue:{values:c.toArray().map(g=>{if(typeof g!="number")throw d.wc("VectorValues must only contain numeric values.");return Ay(d.serializer,g)})}}}}}}(i,a);throw a.wc(`Unsupported field value: ${ld(i)}`)}(n,e)}function $S(n,e){const t={};return Ow(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ls(n,(i,a)=>{const l=Ic(a,e.Vc(i));l!=null&&(t[i]=l)}),{mapValue:{fields:t}}}function KS(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof ut||n instanceof jr||n instanceof Vn||n instanceof mt||n instanceof bd||n instanceof Br)}function Qy(n,e,t){if(!KS(t)||!Nw(t)){const i=ld(t);throw i==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+i)}}function Lg(n,e,t){if((e=ot(e))instanceof Rc)return e._internalPath;if(typeof e=="string")return Yy(n,e);throw Qf("Field path arguments must be of type string or ",n,!1,void 0,t)}const NV=new RegExp("[~\\*/\\[\\]]");function Yy(n,e,t){if(e.search(NV)>=0)throw Qf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Rc(...e.split("."))._internalPath}catch{throw Qf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Qf(n,e,t,i,a){const l=i&&!i.isEmpty(),c=a!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let m="";return(l||c)&&(m+=" (found",l&&(m+=` in field ${i}`),c&&(m+=` in document ${a}`),m+=")"),new se(Y.INVALID_ARGUMENT,d+n+m)}function QS(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ic{constructor(e,t,i,a,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new mt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new DV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Sd("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class DV extends ic{data(){return super.data()}}function Sd(n,e){return typeof e=="string"?Yy(n,e):e instanceof Rc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YS(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new se(Y.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Xy{}class Rd extends Xy{}function Ie(n,e,...t){let i=[];e instanceof Xy&&i.push(e),i=i.concat(t),function(l){const c=l.filter(m=>m instanceof Wy).length,d=l.filter(m=>m instanceof Id).length;if(c>1||c>0&&d>0)throw new se(Y.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const a of i)n=a._apply(n);return n}class Id extends Rd{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new Id(e,t,i)}_apply(e){const t=this._parse(e);return XS(e._query,t),new Yr(e.firestore,e.converter,Cg(e._query,t))}_parse(e){const t=dl(e.firestore);return function(l,c,d,m,g,_,T){let A;if(g.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new se(Y.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){NA(T,_);const N=[];for(const q of T)N.push(CA(m,l,q));A={arrayValue:{values:N}}}else A=CA(m,l,T)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||NA(T,_),A=GS(d,c,T,_==="in"||_==="not-in");return Ot.create(g,_,A)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Pe(n,e,t){const i=e,a=Sd("where",n);return Id._create(a,i,t)}class Wy extends Xy{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Wy(e,t)}_parse(e){const t=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return t.length===1?t[0]:yr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(a,l){let c=a;const d=l.getFlattenedFilters();for(const m of d)XS(c,m),c=Cg(c,m)}(e._query,t),new Yr(e.firestore,e.converter,Cg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Zy extends Rd{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Zy(e,t)}_apply(e){const t=function(a,l,c){if(a.startAt!==null)throw new se(Y.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new se(Y.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ec(l,c)}(e._query,this._field,this._direction);return new Yr(e.firestore,e.converter,function(a,l){const c=a.explicitOrderBy.concat([l]);return new La(a.path,a.collectionGroup,c,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(e._query,t))}}function Hr(n,e="asc"){const t=e,i=Sd("orderBy",n);return Zy._create(i,t)}class Jy extends Rd{constructor(e,t,i){super(),this.type=e,this._limit=t,this._limitType=i}static _create(e,t,i){return new Jy(e,t,i)}_apply(e){return new Yr(e.firestore,e.converter,jf(e._query,this._limit,this._limitType))}}function IA(n){return PP("limit",n),Jy._create("limit",n,"F")}class e_ extends Rd{constructor(e,t,i){super(),this.type=e,this._docOrFields=t,this._inclusive=i}static _create(e,t,i){return new e_(e,t,i)}_apply(e){const t=MV(e,this.type,this._docOrFields,this._inclusive);return new Yr(e.firestore,e.converter,function(a,l){return new La(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,l,a.endAt)}(e._query,t))}}function OV(...n){return e_._create("startAfter",n,!1)}function MV(n,e,t,i){if(t[0]=ot(t[0]),t[0]instanceof ic)return function(l,c,d,m,g){if(!m)throw new se(Y.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const _=[];for(const T of Go(l))if(T.field.isKeyField())_.push(zf(c,m.key));else{const A=m.data.field(T.field);if(cd(A))throw new se(Y.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+T.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(A===null){const S=T.field.canonicalString();throw new se(Y.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${S}' (used as the orderBy) does not exist.`)}_.push(A)}return new Jo(_,g)}(n._query,n.firestore._databaseId,e,t[0]._document,i);{const a=dl(n.firestore);return function(c,d,m,g,_,T){const A=c.explicitOrderBy;if(_.length>A.length)throw new se(Y.INVALID_ARGUMENT,`Too many arguments provided to ${g}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const S=[];for(let N=0;N<_.length;N++){const q=_[N];if(A[N].field.isKeyField()){if(typeof q!="string")throw new se(Y.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${g}(), but got a ${typeof q}`);if(!Ty(c)&&q.indexOf("/")!==-1)throw new se(Y.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${g}() must be a plain document ID, but '${q}' contains a slash.`);const U=c.path.child(We.fromString(q));if(!de.isDocumentKey(U))throw new se(Y.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${g}() must result in a valid document path, but '${U}' is not because it contains an odd number of segments.`);const $=new de(U);S.push(zf(d,$))}else{const U=GS(m,g,q);S.push(U)}}return new Jo(S,T)}(n._query,n.firestore._databaseId,a,e,t,i)}}function CA(n,e,t){if(typeof(t=ot(t))=="string"){if(t==="")throw new se(Y.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ty(e)&&t.indexOf("/")!==-1)throw new se(Y.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(We.fromString(t));if(!de.isDocumentKey(i))throw new se(Y.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return zf(n,new de(i))}if(t instanceof mt)return zf(n,t._key);throw new se(Y.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ld(t)}.`)}function NA(n,e){if(!Array.isArray(n)||n.length===0)throw new se(Y.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function XS(n,e){const t=function(a,l){for(const c of a)for(const d of c.getFlattenedFilters())if(l.indexOf(d.op)>=0)return d.op;return null}(n.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new se(Y.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new se(Y.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class WS{convertValue(e,t="none"){switch(Rs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return wt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ss(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw _e(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Ls(e,(a,l)=>{i[a]=this.convertValue(l,t)}),i}convertVectorValue(e){var t,i,a;const l=(a=(i=(t=e.fields)===null||t===void 0?void 0:t[Uf].arrayValue)===null||i===void 0?void 0:i.values)===null||a===void 0?void 0:a.map(c=>wt(c.doubleValue));return new Br(l)}convertGeoPoint(e){return new jr(wt(e.latitude),wt(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=hd(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Wu(e));default:return null}}convertTimestamp(e){const t=ws(e);return new ut(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=We.fromString(e);Ue(_S(i),9688,{name:e});const a=new Zu(i.get(1),i.get(3)),l=new de(i.popFirst(5));return a.isEqual(t)||Oi(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t_(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class PV extends WS{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new mt(this.firestore,null,t)}}function xV(){return new wV("count")}class zo{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Es extends ic{constructor(e,t,i,a,l,c){super(e,t,i,a,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new bf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(Sd("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new se(Y.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Es._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Es._jsonSchemaVersion="firestore/documentSnapshot/1.0",Es._jsonSchema={type:Mt("string",Es._jsonSchemaVersion),bundleSource:Mt("string","DocumentSnapshot"),bundleName:Mt("string"),bundle:Mt("string")};class bf extends Es{data(e={}){return super.data(e)}}class Ia{constructor(e,t,i,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new zo(a.hasPendingWrites,a.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new bf(this._firestore,this._userDataWriter,i.key,i,new zo(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new se(Y.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(a,l){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map(d=>{const m=new bf(a._firestore,a._userDataWriter,d.doc.key,d.doc,new zo(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);return d.doc,{type:"added",doc:m,oldIndex:-1,newIndex:c++}})}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(d=>l||d.type!==3).map(d=>{const m=new bf(a._firestore,a._userDataWriter,d.doc.key,d.doc,new zo(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);let g=-1,_=-1;return d.type!==0&&(g=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),_=c.indexOf(d.doc.key)),{type:VV(d.type),doc:m,oldIndex:g,newIndex:_}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new se(Y.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ia._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=gy.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],a=[];return this.docs.forEach(l=>{l._document!==null&&(t.push(l._document),i.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),a.push(l.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function VV(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return _e(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ja(n){n=dn(n,mt);const e=dn(n.firestore,_r);return _V(fl(e),n._key).then(t=>ZS(e,n,t))}Ia._jsonSchemaVersion="firestore/querySnapshot/1.0",Ia._jsonSchema={type:Mt("string",Ia._jsonSchemaVersion),bundleSource:Mt("string","QuerySnapshot"),bundleName:Mt("string"),bundle:Mt("string")};class Cc extends WS{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new mt(this.firestore,null,t)}}function St(n){n=dn(n,Yr);const e=dn(n.firestore,_r),t=fl(e),i=new Cc(e);return YS(n._query),vV(t,n._query).then(a=>new Ia(e,i,n,a))}function n_(n,e,t){n=dn(n,mt);const i=dn(n.firestore,_r),a=t_(n.converter,e,t);return Cd(i,[$y(dl(i),"setDoc",n._key,a,n.converter!==null,t).toMutation(n._key,nn.none())])}function Ba(n,e,t,...i){n=dn(n,mt);const a=dn(n.firestore,_r),l=dl(a);let c;return c=typeof(e=ot(e))=="string"||e instanceof Rc?HS(l,"updateDoc",n._key,e,t,i):qS(l,"updateDoc",n._key,e),Cd(a,[c.toMutation(n._key,nn.exists(!0))])}function kV(n){return Cd(dn(n.firestore,_r),[new yd(n._key,nn.none())])}function r_(n,e){const t=dn(n.firestore,_r),i=lt(n),a=t_(n.converter,e);return Cd(t,[$y(dl(n.firestore),"addDoc",i._key,a,n.converter!==null,{}).toMutation(i._key,nn.exists(!1))]).then(()=>i)}function Nc(n,...e){var t,i,a;n=ot(n);let l={includeMetadataChanges:!1,source:"default"},c=0;typeof e[c]!="object"||RA(e[c])||(l=e[c++]);const d={includeMetadataChanges:l.includeMetadataChanges,source:l.source};if(RA(e[c])){const T=e[c];e[c]=(t=T.next)===null||t===void 0?void 0:t.bind(T),e[c+1]=(i=T.error)===null||i===void 0?void 0:i.bind(T),e[c+2]=(a=T.complete)===null||a===void 0?void 0:a.bind(T)}let m,g,_;if(n instanceof mt)g=dn(n.firestore,_r),_=fd(n._key.path),m={next:T=>{e[c]&&e[c](ZS(g,n,T))},error:e[c+1],complete:e[c+2]};else{const T=dn(n,Yr);g=dn(T.firestore,_r),_=T._query;const A=new Cc(g);m={next:S=>{e[c]&&e[c](new Ia(g,A,T,S))},error:e[c+1],complete:e[c+2]},YS(n._query)}return function(A,S,N,q){const U=new qy(q),$=new jy(S,U,N);return A.asyncQueue.enqueueAndForget(async()=>Ly(await Kf(A),$)),()=>{U.Ou(),A.asyncQueue.enqueueAndForget(async()=>Uy(await Kf(A),$))}}(fl(g),_,d,m)}function Cd(n,e){return function(i,a){const l=new gr;return i.asyncQueue.enqueueAndForget(async()=>iV(await yV(i),a,l)),l.promise}(fl(n),e)}function ZS(n,e,t){const i=t.docs.get(e._key),a=new Cc(n);return new Es(n,a,e._key,i,new zo(t.hasPendingWrites,t.fromCache),e.converter)}function LV(n){return UV(n,{count:xV()})}function UV(n,e){const t=dn(n.firestore,_r),i=fl(t),a=qP(e,(l,c)=>new w2(c,l.aggregateType,l._internalFieldPath));return EV(i,n._query,a).then(l=>function(d,m,g){const _=new Cc(d);return new SV(m,_,g)}(t,n,l))}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zV={maxAttempts:5};function Pu(n,e){if((n=ot(n)).firestore!==e)throw new se(Y.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jV{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=dl(e)}get(e){const t=Pu(e,this._firestore),i=new PV(this._firestore);return this._transaction.lookup([t._key]).then(a=>{if(!a||a.length!==1)return _e(24041);const l=a[0];if(l.isFoundDocument())return new ic(this._firestore,i,l.key,l,t.converter);if(l.isNoDocument())return new ic(this._firestore,i,t._key,null,t.converter);throw _e(18433,{doc:l})})}set(e,t,i){const a=Pu(e,this._firestore),l=t_(a.converter,t,i),c=$y(this._dataReader,"Transaction.set",a._key,l,a.converter!==null,i);return this._transaction.set(a._key,c),this}update(e,t,i,...a){const l=Pu(e,this._firestore);let c;return c=typeof(t=ot(t))=="string"||t instanceof Rc?HS(this._dataReader,"Transaction.update",l._key,t,i,a):qS(this._dataReader,"Transaction.update",l._key,t),this._transaction.update(l._key,c),this}delete(e){const t=Pu(e,this._firestore);return this._transaction.delete(t._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BV extends jV{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Pu(e,this._firestore),i=new Cc(this._firestore);return super.get(e).then(a=>new Es(this._firestore,i,t._key,a._document,new zo(!1,!1),t.converter))}}function i_(n,e,t){n=dn(n,_r);const i=Object.assign(Object.assign({},zV),t);return function(l){if(l.maxAttempts<1)throw new se(Y.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(l,c,d){const m=new gr;return l.asyncQueue.enqueueAndForget(async()=>{const g=await US(l);new mV(l.asyncQueue,g,d,c,m).zu()}),m.promise}(fl(n),a=>e(new BV(n,a)),i)}function Ze(){return new Ky("serverTimestamp")}(function(e,t=!0){(function(a){ll=a})(ka),nr(new jn("firestore",(i,{instanceIdentifier:a,options:l})=>{const c=i.getProvider("app").getImmediate(),d=new _r(new SP(i.getProvider("auth-internal")),new CP(c,i.getProvider("app-check-internal")),function(g,_){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new se(Y.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Zu(g.options.projectId,_)}(c,a),c);return l=Object.assign({useFetchStreams:t},l),d._setSettings(l),d},"PUBLIC").setMultipleInstances(!0)),fn(D0,O0,e),fn(D0,O0,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JS="firebasestorage.googleapis.com",FV="storageBucket",qV=2*60*1e3,HV=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr extends ir{constructor(e,t,i=0){super(eg(e),`Firebase Storage: ${t} (${eg(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Xr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return eg(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Gr;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Gr||(Gr={}));function eg(n){return"storage/"+n}function GV(){const n="An unknown error occurred, please check the error payload for server response.";return new Xr(Gr.UNKNOWN,n)}function $V(){return new Xr(Gr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function KV(){return new Xr(Gr.CANCELED,"User canceled the upload/download.")}function QV(n){return new Xr(Gr.INVALID_URL,"Invalid URL '"+n+"'.")}function YV(n){return new Xr(Gr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function DA(n){return new Xr(Gr.INVALID_ARGUMENT,n)}function eR(){return new Xr(Gr.APP_DELETED,"The Firebase app was deleted.")}function XV(n){return new Xr(Gr.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let i;try{i=mr.makeFromUrl(e,t)}catch{return new mr(e,"")}if(i.path==="")return i;throw YV(e)}static makeFromUrl(e,t){let i=null;const a="([A-Za-z0-9.\\-_]+)";function l(he){he.path.charAt(he.path.length-1)==="/"&&(he.path_=he.path_.slice(0,-1))}const c="(/(.*))?$",d=new RegExp("^gs://"+a+c,"i"),m={bucket:1,path:3};function g(he){he.path_=decodeURIComponent(he.path)}const _="v[A-Za-z0-9_]+",T=t.replace(/[.]/g,"\\."),A="(/([^?#]*).*)?$",S=new RegExp(`^https?://${T}/${_}/b/${a}/o${A}`,"i"),N={bucket:1,path:3},q=t===JS?"(?:storage.googleapis.com|storage.cloud.google.com)":t,U="([^?#]*)",$=new RegExp(`^https?://${q}/${a}/${U}`,"i"),ne=[{regex:d,indices:m,postModify:l},{regex:S,indices:N,postModify:g},{regex:$,indices:{bucket:1,path:2},postModify:g}];for(let he=0;he<ne.length;he++){const ce=ne[he],Te=ce.regex.exec(e);if(Te){const P=Te[ce.indices.bucket];let I=Te[ce.indices.path];I||(I=""),i=new mr(P,I),ce.postModify(i);break}}if(i==null)throw QV(e);return i}}class WV{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZV(n,e,t){let i=1,a=null,l=null,c=!1,d=0;function m(){return d===2}let g=!1;function _(...U){g||(g=!0,e.apply(null,U))}function T(U){a=setTimeout(()=>{a=null,n(S,m())},U)}function A(){l&&clearTimeout(l)}function S(U,...$){if(g){A();return}if(U){A(),_.call(null,U,...$);return}if(m()||c){A(),_.call(null,U,...$);return}i<64&&(i*=2);let ne;d===1?(d=2,ne=0):ne=(i+Math.random())*1e3,T(ne)}let N=!1;function q(U){N||(N=!0,A(),!g&&(a!==null?(U||(d=2),clearTimeout(a),T(0)):U||(d=1)))}return T(0),l=setTimeout(()=>{c=!0,q(!0)},t),q}function JV(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ek(n){return n!==void 0}function OA(n,e,t,i){if(i<e)throw DA(`Invalid value for '${n}'. Expected ${e} or greater.`);if(i>t)throw DA(`Invalid value for '${n}'. Expected ${t} or less.`)}function tk(n){const e=encodeURIComponent;let t="?";for(const i in n)if(n.hasOwnProperty(i)){const a=e(i)+"="+e(n[i]);t=t+a+"&"}return t=t.slice(0,-1),t}var Yf;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Yf||(Yf={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nk(n,e){const t=n>=500&&n<600,a=[408,429].indexOf(n)!==-1,l=e.indexOf(n)!==-1;return t||a||l}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rk{constructor(e,t,i,a,l,c,d,m,g,_,T,A=!0,S=!1){this.url_=e,this.method_=t,this.headers_=i,this.body_=a,this.successCodes_=l,this.additionalRetryCodes_=c,this.callback_=d,this.errorCallback_=m,this.timeout_=g,this.progressCallback_=_,this.connectionFactory_=T,this.retry=A,this.isUsingEmulator=S,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((N,q)=>{this.resolve_=N,this.reject_=q,this.start_()})}start_(){const e=(i,a)=>{if(a){i(!1,new uf(!1,null,!0));return}const l=this.connectionFactory_();this.pendingConnection_=l;const c=d=>{const m=d.loaded,g=d.lengthComputable?d.total:-1;this.progressCallback_!==null&&this.progressCallback_(m,g)};this.progressCallback_!==null&&l.addUploadProgressListener(c),l.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&l.removeUploadProgressListener(c),this.pendingConnection_=null;const d=l.getErrorCode()===Yf.NO_ERROR,m=l.getStatus();if(!d||nk(m,this.additionalRetryCodes_)&&this.retry){const _=l.getErrorCode()===Yf.ABORT;i(!1,new uf(!1,null,_));return}const g=this.successCodes_.indexOf(m)!==-1;i(!0,new uf(g,l))})},t=(i,a)=>{const l=this.resolve_,c=this.reject_,d=a.connection;if(a.wasSuccessCode)try{const m=this.callback_(d,d.getResponse());ek(m)?l(m):l()}catch(m){c(m)}else if(d!==null){const m=GV();m.serverResponse=d.getErrorText(),this.errorCallback_?c(this.errorCallback_(d,m)):c(m)}else if(a.canceled){const m=this.appDelete_?eR():KV();c(m)}else{const m=$V();c(m)}};this.canceled_?t(!1,new uf(!1,null,!0)):this.backoffId_=ZV(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&JV(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class uf{constructor(e,t,i){this.wasSuccessCode=e,this.connection=t,this.canceled=!!i}}function ik(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function sk(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function ak(n,e){e&&(n["X-Firebase-GMPID"]=e)}function ok(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function lk(n,e,t,i,a,l,c=!0,d=!1){const m=tk(n.urlParams),g=n.url+m,_=Object.assign({},n.headers);return ak(_,e),ik(_,t),sk(_,l),ok(_,i),new rk(g,n.method,_,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,a,c,d)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uk(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function ck(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xf{constructor(e,t){this._service=e,t instanceof mr?this._location=t:this._location=mr.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Xf(e,t)}get root(){const e=new mr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return ck(this._location.path)}get storage(){return this._service}get parent(){const e=uk(this._location.path);if(e===null)return null;const t=new mr(this._location.bucket,e);return new Xf(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw XV(e)}}function MA(n,e){const t=e?.[FV];return t==null?null:mr.makeFromBucketSpec(t,n)}function hk(n,e,t,i={}){n.host=`${e}:${t}`;const a=Va(e);a&&(Jg(`https://${n.host}/b`),ey("Storage",!0)),n._isUsingEmulator=!0,n._protocol=a?"https":"http";const{mockUserToken:l}=i;l&&(n._overrideAuthToken=typeof l=="string"?l:Pb(l,n.app.options.projectId))}class fk{constructor(e,t,i,a,l,c=!1){this.app=e,this._authProvider=t,this._appCheckProvider=i,this._url=a,this._firebaseVersion=l,this._isUsingEmulator=c,this._bucket=null,this._host=JS,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=qV,this._maxUploadRetryTime=HV,this._requests=new Set,a!=null?this._bucket=mr.makeFromBucketSpec(a,this._host):this._bucket=MA(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=mr.makeFromBucketSpec(this._url,e):this._bucket=MA(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){OA("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){OA("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(wn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Xf(this,e)}_makeRequest(e,t,i,a,l=!0){if(this._deleted)return new WV(eR());{const c=lk(e,this._appId,i,a,t,this._firebaseVersion,l,this._isUsingEmulator);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}async makeRequestWithTokens(e,t){const[i,a]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,i,a).getPromise()}}const PA="@firebase/storage",xA="0.13.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tR="storage";function dk(n=pc(),e){n=ot(n);const i=Pi(n,tR).getImmediate({identifier:e}),a=Db("storage");return a&&mk(i,...a),i}function mk(n,e,t,i={}){hk(n,e,t,i)}function pk(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),a=n.getProvider("app-check-internal");return new fk(t,i,a,e,ka)}function gk(){nr(new jn(tR,pk,"PUBLIC").setMultipleInstances(!0)),fn(PA,xA,""),fn(PA,xA,"esm2017")}gk();const nR="@firebase/installations",s_="0.6.18";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rR=1e4,iR=`w:${s_}`,sR="FIS_v2",yk="https://firebaseinstallations.googleapis.com/v1",_k=60*60*1e3,vk="installations",Ek="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tk={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Pa=new Ps(vk,Ek,Tk);function aR(n){return n instanceof ir&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oR({projectId:n}){return`${yk}/projects/${n}/installations`}function lR(n){return{token:n.token,requestStatus:2,expiresIn:bk(n.expiresIn),creationTime:Date.now()}}async function uR(n,e){const i=(await e.json()).error;return Pa.create("request-failed",{requestName:n,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function cR({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function Ak(n,{refreshToken:e}){const t=cR(n);return t.append("Authorization",wk(e)),t}async function hR(n){const e=await n();return e.status>=500&&e.status<600?n():e}function bk(n){return Number(n.replace("s","000"))}function wk(n){return`${sR} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sk({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const i=oR(n),a=cR(n),l=e.getImmediate({optional:!0});if(l){const g=await l.getHeartbeatsHeader();g&&a.append("x-firebase-client",g)}const c={fid:t,authVersion:sR,appId:n.appId,sdkVersion:iR},d={method:"POST",headers:a,body:JSON.stringify(c)},m=await hR(()=>fetch(i,d));if(m.ok){const g=await m.json();return{fid:g.fid||t,registrationStatus:2,refreshToken:g.refreshToken,authToken:lR(g.authToken)}}else throw await uR("Create Installation",m)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fR(n){return new Promise(e=>{setTimeout(e,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rk(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ik=/^[cdef][\w-]{21}$/,Ug="";function Ck(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=Nk(n);return Ik.test(t)?t:Ug}catch{return Ug}}function Nk(n){return Rk(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nd(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dR=new Map;function mR(n,e){const t=Nd(n);pR(t,e),Dk(t,e)}function pR(n,e){const t=dR.get(n);if(t)for(const i of t)i(e)}function Dk(n,e){const t=Ok();t&&t.postMessage({key:n,fid:e}),Mk()}let Ra=null;function Ok(){return!Ra&&"BroadcastChannel"in self&&(Ra=new BroadcastChannel("[Firebase] FID Change"),Ra.onmessage=n=>{pR(n.data.key,n.data.fid)}),Ra}function Mk(){dR.size===0&&Ra&&(Ra.close(),Ra=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pk="firebase-installations-database",xk=1,xa="firebase-installations-store";let tg=null;function a_(){return tg||(tg=kb(Pk,xk,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(xa)}}})),tg}async function Wf(n,e){const t=Nd(n),a=(await a_()).transaction(xa,"readwrite"),l=a.objectStore(xa),c=await l.get(t);return await l.put(e,t),await a.done,(!c||c.fid!==e.fid)&&mR(n,e.fid),e}async function gR(n){const e=Nd(n),i=(await a_()).transaction(xa,"readwrite");await i.objectStore(xa).delete(e),await i.done}async function Dd(n,e){const t=Nd(n),a=(await a_()).transaction(xa,"readwrite"),l=a.objectStore(xa),c=await l.get(t),d=e(c);return d===void 0?await l.delete(t):await l.put(d,t),await a.done,d&&(!c||c.fid!==d.fid)&&mR(n,d.fid),d}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o_(n){let e;const t=await Dd(n.appConfig,i=>{const a=Vk(i),l=kk(n,a);return e=l.registrationPromise,l.installationEntry});return t.fid===Ug?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function Vk(n){const e=n||{fid:Ck(),registrationStatus:0};return yR(e)}function kk(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const a=Promise.reject(Pa.create("app-offline"));return{installationEntry:e,registrationPromise:a}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=Lk(n,t);return{installationEntry:t,registrationPromise:i}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:Uk(n)}:{installationEntry:e}}async function Lk(n,e){try{const t=await Sk(n,e);return Wf(n.appConfig,t)}catch(t){throw aR(t)&&t.customData.serverCode===409?await gR(n.appConfig):await Wf(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function Uk(n){let e=await VA(n.appConfig);for(;e.registrationStatus===1;)await fR(100),e=await VA(n.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:i}=await o_(n);return i||t}return e}function VA(n){return Dd(n,e=>{if(!e)throw Pa.create("installation-not-found");return yR(e)})}function yR(n){return zk(n)?{fid:n.fid,registrationStatus:0}:n}function zk(n){return n.registrationStatus===1&&n.registrationTime+rR<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jk({appConfig:n,heartbeatServiceProvider:e},t){const i=Bk(n,t),a=Ak(n,t),l=e.getImmediate({optional:!0});if(l){const g=await l.getHeartbeatsHeader();g&&a.append("x-firebase-client",g)}const c={installation:{sdkVersion:iR,appId:n.appId}},d={method:"POST",headers:a,body:JSON.stringify(c)},m=await hR(()=>fetch(i,d));if(m.ok){const g=await m.json();return lR(g)}else throw await uR("Generate Auth Token",m)}function Bk(n,{fid:e}){return`${oR(n)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l_(n,e=!1){let t;const i=await Dd(n.appConfig,l=>{if(!_R(l))throw Pa.create("not-registered");const c=l.authToken;if(!e&&Hk(c))return l;if(c.requestStatus===1)return t=Fk(n,e),l;{if(!navigator.onLine)throw Pa.create("app-offline");const d=$k(l);return t=qk(n,d),d}});return t?await t:i.authToken}async function Fk(n,e){let t=await kA(n.appConfig);for(;t.authToken.requestStatus===1;)await fR(100),t=await kA(n.appConfig);const i=t.authToken;return i.requestStatus===0?l_(n,e):i}function kA(n){return Dd(n,e=>{if(!_R(e))throw Pa.create("not-registered");const t=e.authToken;return Kk(t)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function qk(n,e){try{const t=await jk(n,e),i=Object.assign(Object.assign({},e),{authToken:t});return await Wf(n.appConfig,i),t}catch(t){if(aR(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await gR(n.appConfig);else{const i=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Wf(n.appConfig,i)}throw t}}function _R(n){return n!==void 0&&n.registrationStatus===2}function Hk(n){return n.requestStatus===2&&!Gk(n)}function Gk(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+_k}function $k(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}function Kk(n){return n.requestStatus===1&&n.requestTime+rR<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qk(n){const e=n,{installationEntry:t,registrationPromise:i}=await o_(e);return i?i.catch(console.error):l_(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yk(n,e=!1){const t=n;return await Xk(t),(await l_(t,e)).token}async function Xk(n){const{registrationPromise:e}=await o_(n);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wk(n){if(!n||!n.options)throw ng("App Configuration");if(!n.name)throw ng("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw ng(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function ng(n){return Pa.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vR="installations",Zk="installations-internal",Jk=n=>{const e=n.getProvider("app").getImmediate(),t=Wk(e),i=Pi(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},eL=n=>{const e=n.getProvider("app").getImmediate(),t=Pi(e,vR).getImmediate();return{getId:()=>Qk(t),getToken:a=>Yk(t,a)}};function tL(){nr(new jn(vR,Jk,"PUBLIC")),nr(new jn(Zk,eL,"PRIVATE"))}tL();fn(nR,s_);fn(nR,s_,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zf="analytics",nL="firebase_id",rL="origin",iL=60*1e3,sL="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",u_="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sn=new mc("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aL={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},zn=new Ps("analytics","Analytics",aL);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oL(n){if(!n.startsWith(u_)){const e=zn.create("invalid-gtag-resource",{gtagURL:n});return Sn.warn(e.message),""}return n}function ER(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function lL(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function uL(n,e){const t=lL("firebase-js-sdk-policy",{createScriptURL:oL}),i=document.createElement("script"),a=`${u_}?l=${n}&id=${e}`;i.src=t?t?.createScriptURL(a):a,i.async=!0,document.head.appendChild(i)}function cL(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}async function hL(n,e,t,i,a,l){const c=i[a];try{if(c)await e[c];else{const m=(await ER(t)).find(g=>g.measurementId===a);m&&await e[m.appId]}}catch(d){Sn.error(d)}n("config",a,l)}async function fL(n,e,t,i,a){try{let l=[];if(a&&a.send_to){let c=a.send_to;Array.isArray(c)||(c=[c]);const d=await ER(t);for(const m of c){const g=d.find(T=>T.measurementId===m),_=g&&e[g.appId];if(_)l.push(_);else{l=[];break}}}l.length===0&&(l=Object.values(e)),await Promise.all(l),n("event",i,a||{})}catch(l){Sn.error(l)}}function dL(n,e,t,i){async function a(l,...c){try{if(l==="event"){const[d,m]=c;await fL(n,e,t,d,m)}else if(l==="config"){const[d,m]=c;await hL(n,e,t,i,d,m)}else if(l==="consent"){const[d,m]=c;n("consent",d,m)}else if(l==="get"){const[d,m,g]=c;n("get",d,m,g)}else if(l==="set"){const[d]=c;n("set",d)}else n(l,...c)}catch(d){Sn.error(d)}}return a}function mL(n,e,t,i,a){let l=function(...c){window[i].push(arguments)};return window[a]&&typeof window[a]=="function"&&(l=window[a]),window[a]=dL(l,n,e,t),{gtagCore:l,wrappedGtag:window[a]}}function pL(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(u_)&&t.src.includes(n))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gL=30,yL=1e3;class _L{constructor(e={},t=yL){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const TR=new _L;function vL(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function EL(n){var e;const{appId:t,apiKey:i}=n,a={method:"GET",headers:vL(i)},l=sL.replace("{app-id}",t),c=await fetch(l,a);if(c.status!==200&&c.status!==304){let d="";try{const m=await c.json();!((e=m.error)===null||e===void 0)&&e.message&&(d=m.error.message)}catch{}throw zn.create("config-fetch-failed",{httpStatus:c.status,responseMessage:d})}return c.json()}async function TL(n,e=TR,t){const{appId:i,apiKey:a,measurementId:l}=n.options;if(!i)throw zn.create("no-app-id");if(!a){if(l)return{measurementId:l,appId:i};throw zn.create("no-api-key")}const c=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},d=new wL;return setTimeout(async()=>{d.abort()},iL),AR({appId:i,apiKey:a,measurementId:l},c,d,e)}async function AR(n,{throttleEndTimeMillis:e,backoffCount:t},i,a=TR){var l;const{appId:c,measurementId:d}=n;try{await AL(i,e)}catch(m){if(d)return Sn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${m?.message}]`),{appId:c,measurementId:d};throw m}try{const m=await EL(n);return a.deleteThrottleMetadata(c),m}catch(m){const g=m;if(!bL(g)){if(a.deleteThrottleMetadata(c),d)return Sn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${g?.message}]`),{appId:c,measurementId:d};throw m}const _=Number((l=g?.customData)===null||l===void 0?void 0:l.httpStatus)===503?t0(t,a.intervalMillis,gL):t0(t,a.intervalMillis),T={throttleEndTimeMillis:Date.now()+_,backoffCount:t+1};return a.setThrottleMetadata(c,T),Sn.debug(`Calling attemptFetch again in ${_} millis`),AR(n,T,i,a)}}function AL(n,e){return new Promise((t,i)=>{const a=Math.max(e-Date.now(),0),l=setTimeout(t,a);n.addEventListener(()=>{clearTimeout(l),i(zn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function bL(n){if(!(n instanceof ir)||!n.customData)return!1;const e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}class wL{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function SL(n,e,t,i,a){if(a&&a.global){n("event",t,i);return}else{const l=await e,c=Object.assign(Object.assign({},i),{send_to:l});n("event",t,c)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RL(){if(rd())try{await id()}catch(n){return Sn.warn(zn.create("indexeddb-unavailable",{errorInfo:n?.toString()}).message),!1}else return Sn.warn(zn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function IL(n,e,t,i,a,l,c){var d;const m=TL(n);m.then(S=>{t[S.measurementId]=S.appId,n.options.measurementId&&S.measurementId!==n.options.measurementId&&Sn.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${S.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(S=>Sn.error(S)),e.push(m);const g=RL().then(S=>{if(S)return i.getId()}),[_,T]=await Promise.all([m,g]);pL(l)||uL(l,_.measurementId),a("js",new Date);const A=(d=c?.config)!==null&&d!==void 0?d:{};return A[rL]="firebase",A.update=!0,T!=null&&(A[nL]=T),a("config",_.measurementId,A),_.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CL{constructor(e){this.app=e}_delete(){return delete Bu[this.app.options.appId],Promise.resolve()}}let Bu={},LA=[];const UA={};let rg="dataLayer",NL="gtag",zA,bR,jA=!1;function DL(){const n=[];if(ty()&&n.push("This is a browser extension environment."),ny()||n.push("Cookies are not available."),n.length>0){const e=n.map((i,a)=>`(${a+1}) ${i}`).join(" "),t=zn.create("invalid-analytics-context",{errorInfo:e});Sn.warn(t.message)}}function OL(n,e,t){DL();const i=n.options.appId;if(!i)throw zn.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)Sn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw zn.create("no-api-key");if(Bu[i]!=null)throw zn.create("already-exists",{id:i});if(!jA){cL(rg);const{wrappedGtag:l,gtagCore:c}=mL(Bu,LA,UA,rg,NL);bR=l,zA=c,jA=!0}return Bu[i]=IL(n,LA,UA,e,zA,rg,t),new CL(n)}function ML(n=pc()){n=ot(n);const e=Pi(n,Zf);return e.isInitialized()?e.getImmediate():PL(n)}function PL(n,e={}){const t=Pi(n,Zf);if(t.isInitialized()){const a=t.getImmediate();if(Ts(e,t.getOptions()))return a;throw zn.create("already-initialized")}return t.initialize({options:e})}async function xL(){if(ty()||!ny()||!rd())return!1;try{return await id()}catch{return!1}}function VL(n,e,t,i){n=ot(n),SL(bR,Bu[n.app.options.appId],e,t,i).catch(a=>Sn.error(a))}const BA="@firebase/analytics",FA="0.10.17";function kL(){nr(new jn(Zf,(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),a=e.getProvider("installations-internal").getImmediate();return OL(i,a,t)},"PUBLIC")),nr(new jn("analytics-internal",n,"PRIVATE")),fn(BA,FA),fn(BA,FA,"esm2017");function n(e){try{const t=e.getProvider(Zf).getImmediate();return{logEvent:(i,a,l)=>VL(t,i,a,l)}}catch(t){throw zn.create("interop-component-reg-failed",{reason:t})}}}kL();var zg,qA,Od=function(){var n=self.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0];if(n&&n.responseStart>0&&n.responseStart<performance.now())return n},wR=function(n){if(document.readyState==="loading")return"loading";var e=Od();if(e){if(n<e.domInteractive)return"loading";if(e.domContentLoadedEventStart===0||n<e.domContentLoadedEventStart)return"dom-interactive";if(e.domComplete===0||n<e.domComplete)return"dom-content-loaded"}return"complete"},LL=function(n){var e=n.nodeName;return n.nodeType===1?e.toLowerCase():e.toUpperCase().replace(/^#/,"")},c_=function(n,e){var t="";try{for(;n&&n.nodeType!==9;){var i=n,a=i.id?"#"+i.id:LL(i)+(i.classList&&i.classList.value&&i.classList.value.trim()&&i.classList.value.trim().length?"."+i.classList.value.trim().replace(/\s+/g,"."):"");if(t.length+a.length>(e||100)-1)return t||a;if(t=t?a+">"+t:a,i.id)break;n=i.parentNode}}catch{}return t},SR=-1,UL=function(){return SR},Dc=function(n){addEventListener("pageshow",function(e){e.persisted&&(SR=e.timeStamp,n(e))},!0)},h_=function(){var n=Od();return n&&n.activationStart||0},Ns=function(n,e){var t=Od(),i="navigate";return UL()>=0?i="back-forward-cache":t&&(document.prerendering||h_()>0?i="prerender":document.wasDiscarded?i="restore":t.type&&(i=t.type.replace(/_/g,"-"))),{name:n,value:e===void 0?-1:e,rating:"good",delta:0,entries:[],id:"v4-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:i}},ml=function(n,e,t){try{if(PerformanceObserver.supportedEntryTypes.includes(n)){var i=new PerformanceObserver(function(a){Promise.resolve().then(function(){e(a.getEntries())})});return i.observe(Object.assign({type:n,buffered:!0},t||{})),i}}catch{}},Ds=function(n,e,t,i){var a,l;return function(c){e.value>=0&&(c||i)&&((l=e.value-(a||0))||a===void 0)&&(a=e.value,e.delta=l,e.rating=function(d,m){return d>m[1]?"poor":d>m[0]?"needs-improvement":"good"}(e.value,t),n(e))}},f_=function(n){requestAnimationFrame(function(){return requestAnimationFrame(function(){return n()})})},Md=function(n){document.addEventListener("visibilitychange",function(){document.visibilityState==="hidden"&&n()})},d_=function(n){var e=!1;return function(){e||(n(),e=!0)}},jo=-1,HA=function(){return document.visibilityState!=="hidden"||document.prerendering?1/0:0},Jf=function(n){document.visibilityState==="hidden"&&jo>-1&&(jo=n.type==="visibilitychange"?n.timeStamp:0,zL())},GA=function(){addEventListener("visibilitychange",Jf,!0),addEventListener("prerenderingchange",Jf,!0)},zL=function(){removeEventListener("visibilitychange",Jf,!0),removeEventListener("prerenderingchange",Jf,!0)},RR=function(){return jo<0&&(jo=HA(),GA(),Dc(function(){setTimeout(function(){jo=HA(),GA()},0)})),{get firstHiddenTime(){return jo}}},m_=function(n){document.prerendering?addEventListener("prerenderingchange",function(){return n()},!0):n()},$A=[1800,3e3],jL=function(n,e){e=e||{},m_(function(){var t,i=RR(),a=Ns("FCP"),l=ml("paint",function(c){c.forEach(function(d){d.name==="first-contentful-paint"&&(l.disconnect(),d.startTime<i.firstHiddenTime&&(a.value=Math.max(d.startTime-h_(),0),a.entries.push(d),t(!0)))})});l&&(t=Ds(n,a,$A,e.reportAllChanges),Dc(function(c){a=Ns("FCP"),t=Ds(n,a,$A,e.reportAllChanges),f_(function(){a.value=performance.now()-c.timeStamp,t(!0)})}))})},KA=[.1,.25],BL=function(n,e){(function(t,i){i=i||{},jL(d_(function(){var a,l=Ns("CLS",0),c=0,d=[],m=function(_){_.forEach(function(T){if(!T.hadRecentInput){var A=d[0],S=d[d.length-1];c&&T.startTime-S.startTime<1e3&&T.startTime-A.startTime<5e3?(c+=T.value,d.push(T)):(c=T.value,d=[T])}}),c>l.value&&(l.value=c,l.entries=d,a())},g=ml("layout-shift",m);g&&(a=Ds(t,l,KA,i.reportAllChanges),Md(function(){m(g.takeRecords()),a(!0)}),Dc(function(){c=0,l=Ns("CLS",0),a=Ds(t,l,KA,i.reportAllChanges),f_(function(){return a()})}),setTimeout(a,0))}))})(function(t){var i=function(a){var l,c={};if(a.entries.length){var d=a.entries.reduce(function(g,_){return g&&g.value>_.value?g:_});if(d&&d.sources&&d.sources.length){var m=(l=d.sources).find(function(g){return g.node&&g.node.nodeType===1})||l[0];m&&(c={largestShiftTarget:c_(m.node),largestShiftTime:d.startTime,largestShiftValue:d.value,largestShiftSource:m,largestShiftEntry:d,loadState:wR(d.startTime)})}}return Object.assign(a,{attribution:c})}(t);n(i)},e)},IR=0,ig=1/0,cf=0,FL=function(n){n.forEach(function(e){e.interactionId&&(ig=Math.min(ig,e.interactionId),cf=Math.max(cf,e.interactionId),IR=cf?(cf-ig)/7+1:0)})},CR=function(){return zg?IR:performance.interactionCount||0},qL=function(){"interactionCount"in performance||zg||(zg=ml("event",FL,{type:"event",buffered:!0,durationThreshold:0}))},fr=[],Fu=new Map,NR=0,HL=function(){var n=Math.min(fr.length-1,Math.floor((CR()-NR)/50));return fr[n]},DR=[],GL=function(n){if(DR.forEach(function(a){return a(n)}),n.interactionId||n.entryType==="first-input"){var e=fr[fr.length-1],t=Fu.get(n.interactionId);if(t||fr.length<10||n.duration>e.latency){if(t)n.duration>t.latency?(t.entries=[n],t.latency=n.duration):n.duration===t.latency&&n.startTime===t.entries[0].startTime&&t.entries.push(n);else{var i={id:n.interactionId,latency:n.duration,entries:[n]};Fu.set(i.id,i),fr.push(i)}fr.sort(function(a,l){return l.latency-a.latency}),fr.length>10&&fr.splice(10).forEach(function(a){return Fu.delete(a.id)})}}},p_=function(n){var e=self.requestIdleCallback||self.setTimeout,t=-1;return n=d_(n),document.visibilityState==="hidden"?n():(t=e(n),Md(n)),t},QA=[200,500],$L=function(n,e){"PerformanceEventTiming"in self&&"interactionId"in PerformanceEventTiming.prototype&&(e=e||{},m_(function(){var t;qL();var i,a=Ns("INP"),l=function(d){p_(function(){d.forEach(GL);var m=HL();m&&m.latency!==a.value&&(a.value=m.latency,a.entries=m.entries,i())})},c=ml("event",l,{durationThreshold:(t=e.durationThreshold)!==null&&t!==void 0?t:40});i=Ds(n,a,QA,e.reportAllChanges),c&&(c.observe({type:"first-input",buffered:!0}),Md(function(){l(c.takeRecords()),i(!0)}),Dc(function(){NR=CR(),fr.length=0,Fu.clear(),a=Ns("INP"),i=Ds(n,a,QA,e.reportAllChanges)}))}))},Ko=[],ms=[],jg=0,g_=new WeakMap,Qo=new Map,Bg=-1,KL=function(n){Ko=Ko.concat(n),OR()},OR=function(){Bg<0&&(Bg=p_(QL))},QL=function(){Qo.size>10&&Qo.forEach(function(c,d){Fu.has(d)||Qo.delete(d)});var n=fr.map(function(c){return g_.get(c.entries[0])}),e=ms.length-50;ms=ms.filter(function(c,d){return d>=e||n.includes(c)});for(var t=new Set,i=0;i<ms.length;i++){var a=ms[i];MR(a.startTime,a.processingEnd).forEach(function(c){t.add(c)})}var l=Ko.length-1-50;Ko=Ko.filter(function(c,d){return c.startTime>jg&&d>l||t.has(c)}),Bg=-1};DR.push(function(n){n.interactionId&&n.target&&!Qo.has(n.interactionId)&&Qo.set(n.interactionId,n.target)},function(n){var e,t=n.startTime+n.duration;jg=Math.max(jg,n.processingEnd);for(var i=ms.length-1;i>=0;i--){var a=ms[i];if(Math.abs(t-a.renderTime)<=8){(e=a).startTime=Math.min(n.startTime,e.startTime),e.processingStart=Math.min(n.processingStart,e.processingStart),e.processingEnd=Math.max(n.processingEnd,e.processingEnd),e.entries.push(n);break}}e||(e={startTime:n.startTime,processingStart:n.processingStart,processingEnd:n.processingEnd,renderTime:t,entries:[n]},ms.push(e)),(n.interactionId||n.entryType==="first-input")&&g_.set(n,e),OR()});var MR=function(n,e){for(var t,i=[],a=0;t=Ko[a];a++)if(!(t.startTime+t.duration<n)){if(t.startTime>e)break;i.push(t)}return i},YL=function(n,e){qA||(qA=ml("long-animation-frame",KL)),$L(function(t){var i=function(a){var l=a.entries[0],c=g_.get(l),d=l.processingStart,m=c.processingEnd,g=c.entries.sort(function(U,$){return U.processingStart-$.processingStart}),_=MR(l.startTime,m),T=a.entries.find(function(U){return U.target}),A=T&&T.target||Qo.get(l.interactionId),S=[l.startTime+l.duration,m].concat(_.map(function(U){return U.startTime+U.duration})),N=Math.max.apply(Math,S),q={interactionTarget:c_(A),interactionTargetElement:A,interactionType:l.name.startsWith("key")?"keyboard":"pointer",interactionTime:l.startTime,nextPaintTime:N,processedEventEntries:g,longAnimationFrameEntries:_,inputDelay:d-l.startTime,processingDuration:m-d,presentationDelay:Math.max(N-m,0),loadState:wR(l.startTime)};return Object.assign(a,{attribution:q})}(t);n(i)},e)},YA=[2500,4e3],sg={},XL=function(n,e){(function(t,i){i=i||{},m_(function(){var a,l=RR(),c=Ns("LCP"),d=function(_){i.reportAllChanges||(_=_.slice(-1)),_.forEach(function(T){T.startTime<l.firstHiddenTime&&(c.value=Math.max(T.startTime-h_(),0),c.entries=[T],a())})},m=ml("largest-contentful-paint",d);if(m){a=Ds(t,c,YA,i.reportAllChanges);var g=d_(function(){sg[c.id]||(d(m.takeRecords()),m.disconnect(),sg[c.id]=!0,a(!0))});["keydown","click"].forEach(function(_){addEventListener(_,function(){return p_(g)},{once:!0,capture:!0})}),Md(g),Dc(function(_){c=Ns("LCP"),a=Ds(t,c,YA,i.reportAllChanges),f_(function(){c.value=performance.now()-_.timeStamp,sg[c.id]=!0,a(!0)})})}})})(function(t){var i=function(a){var l={timeToFirstByte:0,resourceLoadDelay:0,resourceLoadDuration:0,elementRenderDelay:a.value};if(a.entries.length){var c=Od();if(c){var d=c.activationStart||0,m=a.entries[a.entries.length-1],g=m.url&&performance.getEntriesByType("resource").filter(function(N){return N.name===m.url})[0],_=Math.max(0,c.responseStart-d),T=Math.max(_,g?(g.requestStart||g.startTime)-d:0),A=Math.max(T,g?g.responseEnd-d:0),S=Math.max(A,m.startTime-d);l={element:c_(m.element),timeToFirstByte:_,resourceLoadDelay:T-_,resourceLoadDuration:A-T,elementRenderDelay:S-A,navigationEntry:c,lcpEntry:m},m.url&&(l.url=m.url),g&&(l.lcpResourceEntry=g)}}return Object.assign(a,{attribution:l})}(t);n(i)},e)};const XA="@firebase/performance",Fg="0.7.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PR=Fg,WL="FB-PERF-TRACE-START",ZL="FB-PERF-TRACE-STOP",qg="FB-PERF-TRACE-MEASURE",xR="_wt_",VR="_fp",kR="_fcp",LR="_fid",UR="_lcp",JL="lcp_element",zR="_inp",eU="inp_interactionTarget",jR="_cls",tU="cls_largestShiftTarget",BR="@firebase/performance/config",FR="@firebase/performance/configexpire",nU="performance",qR="Performance";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rU={"trace started":"Trace {$traceName} was started before.","trace stopped":"Trace {$traceName} is not running.","nonpositive trace startTime":"Trace {$traceName} startTime should be positive.","nonpositive trace duration":"Trace {$traceName} duration should be positive.","no window":"Window is not available.","no app id":"App id is not available.","no project id":"Project id is not available.","no api key":"Api key is not available.","invalid cc log":"Attempted to queue invalid cc event","FB not default":"Performance can only start when Firebase app instance is the default one.","RC response not ok":"RC response is not ok","invalid attribute name":"Attribute name {$attributeName} is invalid.","invalid attribute value":"Attribute value {$attributeValue} is invalid.","invalid custom metric name":"Custom metric name {$customMetricName} is invalid","invalid String merger input":"Input for String merger is invalid, contact support team to resolve.","already initialized":"initializePerformance() has already been called with different options. To avoid this error, call initializePerformance() with the same options as when it was originally called, or call getPerformance() to return the already initialized instance."},hn=new Ps(nU,qR,rU);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Os=new mc(qR);Os.logLevel=ke.INFO;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ag,HR;class zt{constructor(e){if(this.window=e,!e)throw hn.create("no window");this.performance=e.performance,this.PerformanceObserver=e.PerformanceObserver,this.windowLocation=e.location,this.navigator=e.navigator,this.document=e.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=e.localStorage),e.perfMetrics&&e.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=e.perfMetrics.onFirstInputDelay),this.onLCP=XL,this.onINP=YL,this.onCLS=BL}getUrl(){return this.windowLocation.href.split("?")[0]}mark(e){!this.performance||!this.performance.mark||this.performance.mark(e)}measure(e,t,i){!this.performance||!this.performance.measure||this.performance.measure(e,t,i)}getEntriesByType(e){return!this.performance||!this.performance.getEntriesByType?[]:this.performance.getEntriesByType(e)}getEntriesByName(e){return!this.performance||!this.performance.getEntriesByName?[]:this.performance.getEntriesByName(e)}getTimeOrigin(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)}requiredApisAvailable(){return!fetch||!Promise||!ny()?(Os.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1):rd()?!0:(Os.info("IndexedDB is not supported by current browser"),!1)}setupObserver(e,t){if(!this.PerformanceObserver)return;new this.PerformanceObserver(a=>{for(const l of a.getEntries())t(l)}).observe({entryTypes:[e]})}static getInstance(){return ag===void 0&&(ag=new zt(HR)),ag}}function iU(n){HR=n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let GR;function sU(n){const e=n.getId();return e.then(t=>{GR=t}),e}function y_(){return GR}function aU(n){const e=n.getToken();return e.then(t=>{}),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WA(n,e){const t=n.length-e.length;if(t<0||t>1)throw hn.create("invalid String merger input");const i=[];for(let a=0;a<n.length;a++)i.push(n.charAt(a)),e.length>a&&i.push(e.charAt(a));return i.join("")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let og;class Ln{constructor(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=WA("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=WA("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}getFlTransportFullUrl(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)}static getInstance(){return og===void 0&&(og=new Ln),og}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qu;(function(n){n[n.UNKNOWN=0]="UNKNOWN",n[n.VISIBLE=1]="VISIBLE",n[n.HIDDEN=2]="HIDDEN"})(qu||(qu={}));const oU=["firebase_","google_","ga_"],lU=new RegExp("^[a-zA-Z]\\w*$"),uU=40,cU=100;function hU(){const n=zt.getInstance().navigator;return n?.serviceWorker?n.serviceWorker.controller?2:3:1}function fU(){switch(zt.getInstance().document.visibilityState){case"visible":return qu.VISIBLE;case"hidden":return qu.HIDDEN;default:return qu.UNKNOWN}}function dU(){const e=zt.getInstance().navigator.connection;switch(e&&e.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}function mU(n){return n.length===0||n.length>uU?!1:!oU.some(t=>n.startsWith(t))&&!!n.match(lU)}function pU(n){return n.length!==0&&n.length<=cU}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $R(n){var e;const t=(e=n.options)===null||e===void 0?void 0:e.appId;if(!t)throw hn.create("no app id");return t}function gU(n){var e;const t=(e=n.options)===null||e===void 0?void 0:e.projectId;if(!t)throw hn.create("no project id");return t}function yU(n){var e;const t=(e=n.options)===null||e===void 0?void 0:e.apiKey;if(!t)throw hn.create("no api key");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _U="0.0.1",hr={loggingEnabled:!0},vU="FIREBASE_INSTALLATIONS_AUTH";function EU(n,e){const t=TU();return t?(ZA(t),Promise.resolve()):wU(n,e).then(ZA).then(i=>AU(i),()=>{})}function TU(){const n=zt.getInstance().localStorage;if(!n)return;const e=n.getItem(FR);if(!e||!SU(e))return;const t=n.getItem(BR);if(t)try{return JSON.parse(t)}catch{return}}function AU(n){const e=zt.getInstance().localStorage;!n||!e||(e.setItem(BR,JSON.stringify(n)),e.setItem(FR,String(Date.now()+Ln.getInstance().configTimeToLive*60*60*1e3)))}const bU="Could not fetch config, will use default configs";function wU(n,e){return aU(n.installations).then(t=>{const i=gU(n.app),a=yU(n.app),l=`https://firebaseremoteconfig.googleapis.com/v1/projects/${i}/namespaces/fireperf:fetch?key=${a}`,c=new Request(l,{method:"POST",headers:{Authorization:`${vU} ${t}`},body:JSON.stringify({app_instance_id:e,app_instance_id_token:t,app_id:$R(n.app),app_version:PR,sdk_version:_U})});return fetch(c).then(d=>{if(d.ok)return d.json();throw hn.create("RC response not ok")})}).catch(()=>{Os.info(bU)})}function ZA(n){if(!n)return n;const e=Ln.getInstance(),t=n.entries||{};return t.fpr_enabled!==void 0?e.loggingEnabled=String(t.fpr_enabled)==="true":e.loggingEnabled=hr.loggingEnabled,t.fpr_log_source?e.logSource=Number(t.fpr_log_source):hr.logSource&&(e.logSource=hr.logSource),t.fpr_log_endpoint_url?e.logEndPointUrl=t.fpr_log_endpoint_url:hr.logEndPointUrl&&(e.logEndPointUrl=hr.logEndPointUrl),t.fpr_log_transport_key?e.transportKey=t.fpr_log_transport_key:hr.transportKey&&(e.transportKey=hr.transportKey),t.fpr_vc_network_request_sampling_rate!==void 0?e.networkRequestsSamplingRate=Number(t.fpr_vc_network_request_sampling_rate):hr.networkRequestsSamplingRate!==void 0&&(e.networkRequestsSamplingRate=hr.networkRequestsSamplingRate),t.fpr_vc_trace_sampling_rate!==void 0?e.tracesSamplingRate=Number(t.fpr_vc_trace_sampling_rate):hr.tracesSamplingRate!==void 0&&(e.tracesSamplingRate=hr.tracesSamplingRate),e.logTraceAfterSampling=JA(e.tracesSamplingRate),e.logNetworkAfterSampling=JA(e.networkRequestsSamplingRate),n}function SU(n){return Number(n)>Date.now()}function JA(n){return Math.random()<=n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let __=1,lg;function KR(n){return __=2,lg=lg||IU(n),lg}function RU(){return __===3}function IU(n){return CU().then(()=>sU(n.installations)).then(e=>EU(n,e)).then(()=>eb(),()=>eb())}function CU(){const n=zt.getInstance().document;return new Promise(e=>{if(n&&n.readyState!=="complete"){const t=()=>{n.readyState==="complete"&&(n.removeEventListener("readystatechange",t),e())};n.addEventListener("readystatechange",t)}else e()})}function eb(){__=3}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QR=10*1e3,NU=5.5*1e3,DU=1e3,YR=3;let wf=YR,Ca=[],tb=!1;function OU(){tb||(v_(NU),tb=!0)}function v_(n){setTimeout(()=>{wf<=0||(Ca.length>0&&XR(),v_(QR))},n)}function XR(){const n=Ca.splice(0,DU),e=n.map(i=>({source_extension_json_proto3:i.message,event_time_ms:String(i.eventTime)})),t={request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:Ln.getInstance().logSource,log_event:e};MU(t).then(()=>{wf=YR}).catch(()=>{Ca=[...n,...Ca],wf--,Os.info(`Tries left: ${wf}.`),v_(QR)})}function MU(n){const e=Ln.getInstance().getFlTransportFullUrl(),t=JSON.stringify(n);return navigator.sendBeacon&&navigator.sendBeacon(e,t)?Promise.resolve():fetch(e,{method:"POST",body:t,keepalive:!0}).then()}function PU(n){if(!n.eventTime||!n.message)throw hn.create("invalid cc log");Ca=[...Ca,n]}function xU(n){return(...e)=>{const t=n(...e);PU({message:t,eventTime:Date.now()})}}function VU(){for(;Ca.length>0;)XR()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hu;function WR(n,e){Hu||(Hu={send:xU(UU),flush:VU}),Hu.send(n,e)}function hf(n){const e=Ln.getInstance();!e.instrumentationEnabled&&n.isAuto||!e.dataCollectionEnabled&&!n.isAuto||zt.getInstance().requiredApisAvailable()&&(RU()?ug(n):KR(n.performanceController).then(()=>ug(n),()=>ug(n)))}function kU(){Hu&&Hu.flush()}function ug(n){if(!y_())return;const e=Ln.getInstance();!e.loggingEnabled||!e.logTraceAfterSampling||WR(n,1)}function LU(n){const e=Ln.getInstance();if(!e.instrumentationEnabled)return;const t=n.url,i=e.logEndPointUrl.split("?")[0],a=e.flTransportEndpointUrl.split("?")[0];t===i||t===a||!e.loggingEnabled||!e.logNetworkAfterSampling||WR(n,0)}function UU(n,e){return e===0?zU(n):jU(n)}function zU(n){const e={url:n.url,http_method:n.httpMethod||0,http_response_code:200,response_payload_bytes:n.responsePayloadBytes,client_start_time_us:n.startTimeUs,time_to_response_initiated_us:n.timeToResponseInitiatedUs,time_to_response_completed_us:n.timeToResponseCompletedUs},t={application_info:ZR(n.performanceController.app),network_request_metric:e};return JSON.stringify(t)}function jU(n){const e={name:n.name,is_auto:n.isAuto,client_start_time_us:n.startTimeUs,duration_us:n.durationUs};Object.keys(n.counters).length!==0&&(e.counters=n.counters);const t=n.getAttributes();Object.keys(t).length!==0&&(e.custom_attributes=t);const i={application_info:ZR(n.performanceController.app),trace_metric:e};return JSON.stringify(i)}function ZR(n){return{google_app_id:$R(n),app_instance_id:y_(),web_app_info:{sdk_version:PR,page_url:zt.getInstance().getUrl(),service_worker_status:hU(),visibility_state:fU(),effective_connection_type:dU()},application_process_state:0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nb(n,e){const t=e;if(!t||t.responseStart===void 0)return;const i=zt.getInstance().getTimeOrigin(),a=Math.floor((t.startTime+i)*1e3),l=t.responseStart?Math.floor((t.responseStart-t.startTime)*1e3):void 0,c=Math.floor((t.responseEnd-t.startTime)*1e3),d=t.name&&t.name.split("?")[0],m={performanceController:n,url:d,responsePayloadBytes:t.transferSize,startTimeUs:a,timeToResponseInitiatedUs:l,timeToResponseCompletedUs:c};LU(m)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BU=100,FU="_",qU=[VR,kR,LR,UR,jR,zR];function HU(n,e){return n.length===0||n.length>BU?!1:e&&e.startsWith(xR)&&qU.indexOf(n)>-1||!n.startsWith(FU)}function GU(n){const e=Math.floor(n);return e<n&&Os.info(`Metric value should be an Integer, setting the value as : ${e}.`),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sc{constructor(e,t,i=!1,a){this.performanceController=e,this.name=t,this.isAuto=i,this.state=1,this.customAttributes={},this.counters={},this.api=zt.getInstance(),this.randomId=Math.floor(Math.random()*1e6),this.isAuto||(this.traceStartMark=`${WL}-${this.randomId}-${this.name}`,this.traceStopMark=`${ZL}-${this.randomId}-${this.name}`,this.traceMeasure=a||`${qg}-${this.randomId}-${this.name}`,a&&this.calculateTraceMetrics())}start(){if(this.state!==1)throw hn.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2}stop(){if(this.state!==2)throw hn.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),hf(this)}record(e,t,i){if(e<=0)throw hn.create("nonpositive trace startTime",{traceName:this.name});if(t<=0)throw hn.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(t*1e3),this.startTimeUs=Math.floor(e*1e3),i&&i.attributes&&(this.customAttributes=Object.assign({},i.attributes)),i&&i.metrics)for(const a of Object.keys(i.metrics))isNaN(Number(i.metrics[a]))||(this.counters[a]=Math.floor(Number(i.metrics[a])));hf(this)}incrementMetric(e,t=1){this.counters[e]===void 0?this.putMetric(e,t):this.putMetric(e,this.counters[e]+t)}putMetric(e,t){if(HU(e,this.name))this.counters[e]=GU(t??0);else throw hn.create("invalid custom metric name",{customMetricName:e})}getMetric(e){return this.counters[e]||0}putAttribute(e,t){const i=mU(e),a=pU(t);if(i&&a){this.customAttributes[e]=t;return}if(!i)throw hn.create("invalid attribute name",{attributeName:e});if(!a)throw hn.create("invalid attribute value",{attributeValue:t})}getAttribute(e){return this.customAttributes[e]}removeAttribute(e){this.customAttributes[e]!==void 0&&delete this.customAttributes[e]}getAttributes(){return Object.assign({},this.customAttributes)}setStartTime(e){this.startTimeUs=e}setDuration(e){this.durationUs=e}calculateTraceMetrics(){const e=this.api.getEntriesByName(this.traceMeasure),t=e&&e[0];t&&(this.durationUs=Math.floor(t.duration*1e3),this.startTimeUs=Math.floor((t.startTime+this.api.getTimeOrigin())*1e3))}static createOobTrace(e,t,i,a,l){const c=zt.getInstance().getUrl();if(!c)return;const d=new sc(e,xR+c,!0),m=Math.floor(zt.getInstance().getTimeOrigin()*1e3);d.setStartTime(m),t&&t[0]&&(d.setDuration(Math.floor(t[0].duration*1e3)),d.putMetric("domInteractive",Math.floor(t[0].domInteractive*1e3)),d.putMetric("domContentLoadedEventEnd",Math.floor(t[0].domContentLoadedEventEnd*1e3)),d.putMetric("loadEventEnd",Math.floor(t[0].loadEventEnd*1e3)));const g="first-paint",_="first-contentful-paint";if(i){const T=i.find(S=>S.name===g);T&&T.startTime&&d.putMetric(VR,Math.floor(T.startTime*1e3));const A=i.find(S=>S.name===_);A&&A.startTime&&d.putMetric(kR,Math.floor(A.startTime*1e3)),l&&d.putMetric(LR,Math.floor(l*1e3))}this.addWebVitalMetric(d,UR,JL,a.lcp),this.addWebVitalMetric(d,jR,tU,a.cls),this.addWebVitalMetric(d,zR,eU,a.inp),hf(d),kU()}static addWebVitalMetric(e,t,i,a){a&&(e.putMetric(t,Math.floor(a.value*1e3)),a.elementAttribution&&e.putAttribute(i,a.elementAttribution))}static createUserTimingTrace(e,t){const i=new sc(e,t,!1,t);hf(i)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sf={},rb=!1,JR;function ib(n){y_()&&(setTimeout(()=>KU(n),0),setTimeout(()=>$U(n),0),setTimeout(()=>QU(n),0))}function $U(n){const e=zt.getInstance(),t=e.getEntriesByType("resource");for(const i of t)nb(n,i);e.setupObserver("resource",i=>nb(n,i))}function KU(n){const e=zt.getInstance();"onpagehide"in window?e.document.addEventListener("pagehide",()=>cg(n)):e.document.addEventListener("unload",()=>cg(n)),e.document.addEventListener("visibilitychange",()=>{e.document.visibilityState==="hidden"&&cg(n)}),e.onFirstInputDelay&&e.onFirstInputDelay(t=>{JR=t}),e.onLCP(t=>{var i;Sf.lcp={value:t.value,elementAttribution:(i=t.attribution)===null||i===void 0?void 0:i.element}}),e.onCLS(t=>{var i;Sf.cls={value:t.value,elementAttribution:(i=t.attribution)===null||i===void 0?void 0:i.largestShiftTarget}}),e.onINP(t=>{var i;Sf.inp={value:t.value,elementAttribution:(i=t.attribution)===null||i===void 0?void 0:i.interactionTarget}})}function QU(n){const e=zt.getInstance(),t=e.getEntriesByType("measure");for(const i of t)sb(n,i);e.setupObserver("measure",i=>sb(n,i))}function sb(n,e){const t=e.name;t.substring(0,qg.length)!==qg&&sc.createUserTimingTrace(n,t)}function cg(n){if(!rb){rb=!0;const e=zt.getInstance(),t=e.getEntriesByType("navigation"),i=e.getEntriesByType("paint");setTimeout(()=>{sc.createOobTrace(n,t,i,Sf,JR)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YU{constructor(e,t){this.app=e,this.installations=t,this.initialized=!1}_init(e){this.initialized||(e?.dataCollectionEnabled!==void 0&&(this.dataCollectionEnabled=e.dataCollectionEnabled),e?.instrumentationEnabled!==void 0&&(this.instrumentationEnabled=e.instrumentationEnabled),zt.getInstance().requiredApisAvailable()?id().then(t=>{t&&(OU(),KR(this).then(()=>ib(this),()=>ib(this)),this.initialized=!0)}).catch(t=>{Os.info(`Environment doesn't support IndexedDB: ${t}`)}):Os.info('Firebase Performance cannot start if the browser does not support "Fetch" and "Promise", or cookies are disabled.'))}set instrumentationEnabled(e){Ln.getInstance().instrumentationEnabled=e}get instrumentationEnabled(){return Ln.getInstance().instrumentationEnabled}set dataCollectionEnabled(e){Ln.getInstance().dataCollectionEnabled=e}get dataCollectionEnabled(){return Ln.getInstance().dataCollectionEnabled}}const XU="[DEFAULT]";function WU(n=pc()){return n=ot(n),Pi(n,"performance").getImmediate()}const ZU=(n,{options:e})=>{const t=n.getProvider("app").getImmediate(),i=n.getProvider("installations-internal").getImmediate();if(t.name!==XU)throw hn.create("FB not default");if(typeof window>"u")throw hn.create("no window");iU(window);const a=new YU(t,i);return a._init(e),a};function JU(){nr(new jn("performance",ZU,"PUBLIC")),fn(XA,Fg),fn(XA,Fg,"esm2017")}JU();const e4={apiKey:void 0,authDomain:void 0,projectId:void 0,storageBucket:void 0,messagingSenderId:void 0,appId:void 0,measurementId:void 0},ac=Lb(e4),Gu=vP(ac),me=AV(ac);dk(ac);let t4=null,n4=null;try{xL().then(n=>{n&&(t4=ML(ac))}).catch(()=>{console.warn("Firebase Analytics no está soportado en este entorno")}),typeof window<"u"&&(n4=WU(ac))}catch(n){console.warn("Error al inicializar Firebase Analytics/Performance:",n)}const Yo={ADMIN:"admin",CONTADOR:"contador",CLIENTE:"cliente"},it={MANAGE_INVENTORY:"canManageInventory",CREATE_MOVEMENTS:"canCreateMovements",VIEW_ALL_MOVEMENTS:"canViewAllMovements",MANAGE_VEHICLES:"canManageVehicles",MANAGE_MAINTENANCE:"canManageMaintenance",MANAGE_SUPPLIERS:"canManageSuppliers",VIEW_REPORTS:"canViewReports",EXPORT_REPORTS:"canExportReports",MODIFY_SETTINGS:"canModifySettings"},r4="contacto.evert@gmail.com",eI=n=>{switch(n){case Yo.ADMIN:return{[it.MANAGE_INVENTORY]:!0,[it.CREATE_MOVEMENTS]:!0,[it.VIEW_ALL_MOVEMENTS]:!0,[it.MANAGE_VEHICLES]:!0,[it.MANAGE_MAINTENANCE]:!0,[it.MANAGE_SUPPLIERS]:!0,[it.VIEW_REPORTS]:!0,[it.EXPORT_REPORTS]:!0,[it.MODIFY_SETTINGS]:!0};case Yo.CONTADOR:return{[it.MANAGE_INVENTORY]:!0,[it.CREATE_MOVEMENTS]:!0,[it.VIEW_ALL_MOVEMENTS]:!0,[it.MANAGE_VEHICLES]:!1,[it.MANAGE_MAINTENANCE]:!0,[it.MANAGE_SUPPLIERS]:!1,[it.VIEW_REPORTS]:!0,[it.EXPORT_REPORTS]:!0,[it.MODIFY_SETTINGS]:!1};case Yo.CLIENTE:default:return{[it.MANAGE_INVENTORY]:!1,[it.CREATE_MOVEMENTS]:!0,[it.VIEW_ALL_MOVEMENTS]:!1,[it.MANAGE_VEHICLES]:!1,[it.MANAGE_MAINTENANCE]:!1,[it.MANAGE_SUPPLIERS]:!1,[it.VIEW_REPORTS]:!1,[it.EXPORT_REPORTS]:!1,[it.MODIFY_SETTINGS]:!1}}},i4=n=>n===r4?Yo.ADMIN:Yo.CLIENTE,nl=()=>"artifacts/undefined/invitations",s4=()=>{const n="ABCDEFGHIJKLMNPQRSTUVWXYZ123456789";let e="";for(let t=0;t<8;t++)e+=n.charAt(Math.floor(Math.random()*n.length));return e},m6=async(n,e)=>{try{const t=await Pd(e);if(!t.success||t.userData.role!=="admin")return{success:!1,error:"Solo administradores pueden crear invitaciones"};let i,a=!1,l=0;for(;!a&&l<10;){i=s4();const m=Ie(qe(me,nl()),Pe("code","==",i));(await St(m)).empty&&(a=!0),l++}if(!a)return{success:!1,error:"No se pudo generar un código único"};const c=lt(qe(me,nl())),d={code:i,targetEmail:n.email.toLowerCase(),targetRole:n.role||Yo.CLIENTE,targetName:n.name||"",status:"pending",appContext:"combustibles",expiresAt:new Date(Date.now()+7*24*60*60*1e3),createdAt:Ze(),createdBy:e,usedAt:null,usedBy:null};return await n_(c,d),console.log("🎫 Invitación creada:",{code:i,email:n.email,role:n.role}),{success:!0,invitation:{id:c.id,code:i,...d}}}catch(t){return console.error("Error creating invitation:",t),{success:!1,error:t.message}}},tI=async n=>{try{const e=Ie(qe(me,nl()),Pe("code","==",n.toUpperCase()),Pe("status","==","pending")),t=await St(e);if(t.empty)return{success:!1,error:"Código de invitación inválido o expirado"};const i=t.docs[0],a=i.data(),l=new Date,c=a.expiresAt.toDate();return l>c?{success:!1,error:"Código de invitación expirado"}:{success:!0,invitation:{id:i.id,...a}}}catch(e){return console.error("Error validating invitation:",e),{success:!1,error:e.message}}},a4=async(n,e)=>{try{const t=lt(me,nl(),n);return await Ba(t,{status:"used",usedAt:Ze(),usedBy:e}),{success:!0}}catch(t){return console.error("Error marking invitation as used:",t),{success:!1,error:t.message}}},p6=async n=>{try{const e=await Pd(n);if(!e.success||e.userData.role!=="admin")return{success:!1,error:"Solo administradores pueden ver invitaciones"};const t=Ie(qe(me,nl())),i=await St(t),a=[];return i.forEach(l=>{a.push({id:l.id,...l.data()})}),a.sort((l,c)=>{const d=l.createdAt?.toDate()||new Date(0);return(c.createdAt?.toDate()||new Date(0))-d}),{success:!0,invitations:a}}catch(e){return console.error("Error getting invitations:",e),{success:!1,error:e.message}}},g6=async(n,e)=>{try{const t=await Pd(e);if(!t.success||t.userData.role!=="admin")return{success:!1,error:"Solo administradores pueden cancelar invitaciones"};const i=lt(me,nl(),n);return await Ba(i,{status:"cancelled",cancelledAt:Ze(),cancelledBy:e}),{success:!0}}catch(t){return console.error("Error cancelling invitation:",t),{success:!1,error:t.message}}},o4=n=>eI(n.targetRole),nI=async(n,e={})=>{const t=lt(me,"artifacts/undefined/users",n.uid);try{const i=await ja(t);if(i.exists())return{success:!0,userData:i.data(),isNewUser:!1};{const a=i4(n.email),l={uid:n.uid,email:n.email,displayName:n.displayName||"",photoURL:n.photoURL||"",role:a,emailVerified:n.emailVerified,combustiblesPermissions:eI(a),createdAt:new Date().toISOString(),lastLogin:new Date().toISOString(),...e};return await n_(t,l),{success:!0,userData:l,isNewUser:!0}}}catch(i){return console.error("Error creating/updating user profile:",i),{success:!1,error:i.message}}},ab=async(n,e,t={})=>{const i=lt(me,"artifacts/undefined/users",n.uid);try{const a=await ja(i);if(a.exists())return{success:!0,userData:a.data(),isNewUser:!1};const l=await tI(e);if(!l.success)return l;const c=l.invitation;if(c.targetEmail!==n.email.toLowerCase())return{success:!1,error:"El código de invitación no corresponde a este email"};const d={uid:n.uid,email:n.email,displayName:n.displayName||c.targetName||"",photoURL:n.photoURL||"",role:c.targetRole,emailVerified:n.emailVerified,combustiblesPermissions:o4(c),invitationUsed:c.id,createdAt:new Date().toISOString(),lastLogin:new Date().toISOString(),...t};return await n_(i,d),await a4(c.id,n.uid),console.log("👤 Usuario creado con invitación:",{email:n.email,role:c.targetRole,invitationCode:c.code}),{success:!0,userData:d,isNewUser:!0}}catch(a){return console.error("Error creating user profile with invitation:",a),{success:!1,error:a.message}}},Pd=async n=>{try{const e=lt(me,"artifacts/undefined/users",n),t=await ja(e);return t.exists()?{success:!0,userData:t.data()}:{success:!1,error:"Usuario no encontrado"}}catch(e){return console.error("Error fetching user profile:",e),{success:!1,error:e.message}}},rI=z.createContext(),l4=()=>{const n=z.useContext(rI);if(n===void 0)throw new Error("useAuth must be used within an AuthProvider");return n},u4=({children:n})=>{const[e,t]=z.useState(null),[i,a]=z.useState(null),[l,c]=z.useState(!0),[d,m]=z.useState(null);z.useEffect(()=>{const S=oM(Gu,async N=>{try{if(c(!0),m(null),N){t(N);let q=await Pd(N.uid);q.success||(q=await nI(N,{provider:"existing_account",appContext:"combustibles"})),q.success?a(q.userData):m("Error cargando perfil de usuario")}else t(null),a(null)}catch(q){console.error("Error en autenticación:",q),m("Error de autenticación")}finally{c(!1)}});return()=>S()},[]);const A={user:e,userProfile:i,loading:l,error:d,hasPermission:S=>i?.combustiblesPermissions?.[S]||!1,isAdmin:()=>i?.role==="admin",isCounterOrAbove:()=>i?.role==="admin"||i?.role==="contador"};return k.jsx(rI.Provider,{value:A,children:n})},ba={DIESEL:"diesel",GASOLINE:"gasoline",ACPM:"acpm",LUBRICANTS:"lubricants",TWO_STROKE:"two_stroke",MIXED:"mixed"},c4={[ba.DIESEL]:{name:"Diésel",description:"Combustible para maquinaria pesada",unit:"galones",category:"Combustible",color:"#fbbf24",icon:"🚛",density:.85,priceUnit:"COP/galón"},[ba.GASOLINE]:{name:"Gasolina",description:"Combustible para vehículos livianos",unit:"galones",category:"Combustible",color:"#ef4444",icon:"⛽",density:.75,priceUnit:"COP/galón"},[ba.ACPM]:{name:"ACPM",description:"Aceite Combustible Para Motor",unit:"galones",category:"Combustible",color:"#8b5cf6",icon:"🚜",density:.85,priceUnit:"COP/galón"},[ba.LUBRICANTS]:{name:"Lubricantes",description:"Aceites y lubricantes para mantenimiento",unit:"litros",category:"Mantenimiento",color:"#06b6d4",icon:"🛢️",density:.9,priceUnit:"COP/litro"},[ba.TWO_STROKE]:{name:"Mezcla 2T",description:"Mezcla para motores de 2 tiempos (motosierras)",unit:"litros",category:"Especializado",color:"#10b981",icon:"🪚",density:.78,priceUnit:"COP/litro"},[ba.MIXED]:{name:"Mixto",description:"Compatible con múltiples tipos de combustible",unit:"galones",category:"Flexible",color:"#64748b",icon:"🔄",density:.8,priceUnit:"COP/galón"}},un={CRITICAL:"critical",LOW:"low",MEDIUM:"medium",HIGH:"high",FULL:"full"},xu={[un.CRITICAL]:{label:"Crítico",color:"#dc2626",icon:"🚨",threshold:.1},[un.LOW]:{label:"Bajo",color:"#ea580c",icon:"⚠️",threshold:.25},[un.MEDIUM]:{label:"Medio",color:"#ca8a04",icon:"📊",threshold:.5},[un.HIGH]:{label:"Alto",color:"#16a34a",icon:"✅",threshold:.75},[un.FULL]:{label:"Completo",color:"#059669",icon:"🟢",threshold:1}},E_=(n,e)=>{if(e===0)return un.CRITICAL;const t=n/e;return t<xu[un.CRITICAL].threshold?un.CRITICAL:t<xu[un.LOW].threshold?un.LOW:t<xu[un.MEDIUM].threshold?un.MEDIUM:t<xu[un.HIGH].threshold?un.HIGH:un.FULL},h4=(n=[])=>Array.isArray(n)?n.reduce((e,t)=>{const i=parseFloat(t.currentStock)||0,a=parseFloat(t.pricePerUnit)||0;return e+i*a},0):0,f4=(n=[],e=null)=>{if(!Array.isArray(n))return e?0:{};if(e)return n.filter(i=>i.fuelType===e).reduce((i,a)=>i+(parseFloat(a.currentStock)||0),0);const t={};return Object.values(ba).forEach(i=>{t[i]=n.filter(a=>a.fuelType===i).reduce((a,l)=>a+(parseFloat(l.currentStock)||0),0)}),t},d4=(n,e)=>{if(!e||e===0)return 0;const t=(parseFloat(n)||0)/parseFloat(e);return Math.min(Math.max(t*100,0),100)},m4=(n=[],e=.15)=>Array.isArray(n)?n.map(t=>{const i=parseFloat(t.currentStock)||0,a=parseFloat(t.maxCapacity)||0,l=a>0?i/a:0,c=E_(i,a);return{...t,percentage:l*100,stockLevel:c,isLowStock:l<=e,stockInfo:xu[c]}}).filter(t=>t.isLowStock).sort((t,i)=>t.percentage-i.percentage):[],y6=(n=[])=>{if(!Array.isArray(n))return{totalValue:0,totalItems:0,activeItems:0,lowStockItems:0,criticalItems:0,averageStockLevel:0,stockByType:{}};const e=h4(n),t=n.length,i=n.filter(m=>m.status==="active").length,a=m4(n),l=a.filter(m=>m.stockLevel===un.CRITICAL).length,c=f4(n),d=n.length>0?n.reduce((m,g)=>{const _=d4(g.currentStock,g.maxCapacity);return m+_},0)/n.length:0;return{totalValue:e,totalItems:t,activeItems:i,lowStockItems:a.length,criticalItems:l,averageStockLevel:d,stockByType:c}},_6=(n,e=[])=>{if(!n||!n.fuelType||!n.quantity)return{isValid:!1,error:"Datos de movimiento incompletos",availableStock:0,requiredStock:0};const{fuelType:t,quantity:i,type:a,sourceLocation:l}=n,c=parseFloat(i)||0;if(a!=="outbound"&&a!=="transfer")return{isValid:!0,message:"Movimiento no requiere validación de stock",availableStock:0,requiredStock:c};const d=e.filter(_=>_.fuelType===t&&_.location?.toLowerCase()===l?.toLowerCase()&&_.status==="active").reduce((_,T)=>_+(parseFloat(T.currentStock)||0),0),m=d>=c,g=d-c;return console.log(`Validación de stock - Tipo: ${t}, Ubicación: ${l}`,{itemsEncontrados:e.filter(_=>_.fuelType===t&&_.location?.toLowerCase()===l?.toLowerCase()&&_.status==="active").length,disponible:d,requerido:c,valido:d>=c}),{isValid:m,availableStock:d,requiredStock:c,remainingStock:g,fuelType:t,location:l,error:m?null:`Stock insuficiente. Disponible: ${d}, Requerido: ${c}`,warning:g<d*.2&&g>=0?"Stock quedará bajo después del movimiento":null}},T_=(n=[],e={})=>{if(!Array.isArray(n))return{totalCost:0,costsByType:{},costsByLocation:{}};let t=0;const i={},a={};return n.forEach(l=>{const c=parseFloat(l.quantity)||0,d=l.fuelType,m=l.sourceLocation||l.location,g=e[d]||parseFloat(l.pricePerUnit)||0,_=c*g;t+=_,i[d]||(i[d]=0),i[d]+=_,m&&(a[m]||(a[m]=0),a[m]+=_)}),{totalCost:t,costsByType:i,costsByLocation:a,averageCostPerMovement:n.length>0?t/n.length:0}},v6=(n=[])=>Array.isArray(n)?{totalMovements:n.length,pendingMovements:n.filter(t=>t.status==="pending").length,completedMovements:n.filter(t=>t.status==="completed").length,cancelledMovements:n.filter(t=>t.status==="cancelled").length,movementsByType:{inbound:n.filter(t=>t.type==="inbound").length,outbound:n.filter(t=>t.type==="outbound").length,transfer:n.filter(t=>t.type==="transfer").length,adjustment:n.filter(t=>t.type==="adjustment").length},totalQuantity:n.reduce((t,i)=>t+(parseFloat(i.quantity)||0),0)}:{totalMovements:0,pendingMovements:0,completedMovements:0,cancelledMovements:0,movementsByType:{},totalQuantity:0},iI=(n,e=[])=>{if(!n)return{averageConsumption:0,totalConsumption:0,movementsCount:0};const t=e.filter(c=>c.vehicleId===n.id&&c.type==="outbound"&&c.status==="completed"),i=t.reduce((c,d)=>c+(parseFloat(d.quantity)||0),0),a=t.length;return{averageConsumption:a>0?i/a:0,totalConsumption:i,movementsCount:a,consumptionByFuelType:t.reduce((c,d)=>{const m=d.fuelType;return c[m]||(c[m]=0),c[m]+=parseFloat(d.quantity)||0,c},{})}},p4=(n,e=[])=>{if(!n)return{efficiency:0,unit:"L/h"};const t=iI(n,e),i=parseFloat(n.hoursWorked)||0;if(i===0||t.totalConsumption===0)return{efficiency:0,unit:"L/h",hoursWorked:i,totalConsumption:t.totalConsumption};const a=t.totalConsumption/i;return{efficiency:a,unit:"L/h",hoursWorked:i,totalConsumption:t.totalConsumption,efficiencyRating:a<10?"Excelente":a<20?"Buena":a<30?"Regular":"Necesita revisión"}},E6=(n,e=[],t={})=>{if(!n)return{totalCost:0,costPerHour:0,costPerMovement:0};const i=e.filter(c=>c.vehicleId===n.id&&c.type==="outbound"&&c.status==="completed"),a=T_(i,t),l=parseFloat(n.hoursWorked)||0;return{totalCost:a.totalCost,costPerHour:l>0?a.totalCost/l:0,costPerMovement:a.averageCostPerMovement,costsByFuelType:a.costsByType,movementsCount:i.length}},T6=(n=[],e=[])=>{if(!Array.isArray(n))return{totalVehicles:0,activeVehicles:0,totalHours:0,totalConsumption:0,averageEfficiency:0,vehiclesByType:{},vehiclesByStatus:{}};const t=n.length,i=n.filter(T=>T.status==="active").length,a=n.reduce((T,A)=>T+(parseFloat(A.hoursWorked)||0),0);let l=0,c=0,d=0;n.forEach(T=>{const A=iI(T,e),S=p4(T,e);l+=A.totalConsumption,S.efficiency>0&&(c+=S.efficiency,d++)});const m=d>0?c/d:0,g=n.reduce((T,A)=>{const S=A.type||"unknown";return T[S]=(T[S]||0)+1,T},{}),_=n.reduce((T,A)=>{const S=A.status||"unknown";return T[S]=(T[S]||0)+1,T},{});return{totalVehicles:t,activeVehicles:i,totalHours:a,totalConsumption:l,averageEfficiency:m,vehiclesByType:g,vehiclesByStatus:_}},A6=(n=[],e={},t={})=>{if(!Array.isArray(n))return{totalValue:0,movementsInPeriod:0};const{start:i,end:a}=e;let l=n;(i||a)&&(l=n.filter(d=>{const m=new Date(d.createdAt||d.date),g=i?new Date(i):new Date(0),_=a?new Date(a):new Date;return m>=g&&m<=_}));const c=T_(l,t);return{totalValue:c.totalCost,movementsInPeriod:l.length,averageValuePerMovement:c.averageCostPerMovement,valueByType:c.costsByType,valueByLocation:c.costsByLocation}},b6=(n=[],e,t={})=>{if(!Array.isArray(n)||!e)return{totalCost:0,movementsCount:0};const i=n.filter(l=>l.sourceLocation===e||l.targetLocation===e||l.location===e),a=T_(i,t);return{location:e,totalCost:a.totalCost,movementsCount:i.length,averageCostPerMovement:a.averageCostPerMovement,costsByType:a.costsByType}},w6=(n=[],e=30)=>{if(!Array.isArray(n)||n.length===0)return{projectedConsumption:{},recommendedPurchases:{},confidence:0};const t=n.filter(T=>T.type==="outbound"&&T.status==="completed");if(t.length===0)return{projectedConsumption:{},recommendedPurchases:{},confidence:0};const i=t.map(T=>new Date(T.createdAt||T.date)),a=new Date(Math.min(...i)),l=new Date(Math.max(...i)),c=Math.max(1,(l-a)/(1e3*60*60*24)),d=t.reduce((T,A)=>{const S=A.fuelType;return T[S]||(T[S]=0),T[S]+=parseFloat(A.quantity)||0,T},{}),m={},g={};Object.entries(d).forEach(([T,A])=>{const S=A/c,N=S*e;m[T]={dailyAverage:S,projectedTotal:N,projectionDays:e,historicalTotal:A,historicalDays:c},g[T]=Math.ceil(N*1.2)});const _=Math.min(100,t.length/10*100);return{projectedConsumption:m,recommendedPurchases:g,confidence:_,dataPoints:t.length,projectionDays:e}},S6=n=>typeof n!="number"||isNaN(n)?"$0":new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0,maximumFractionDigits:0}).format(n),R6=(n,e=2)=>typeof n!="number"||isNaN(n)?"0":new Intl.NumberFormat("es-CO",{minimumFractionDigits:e,maximumFractionDigits:e}).format(n),I6=(n,e=1)=>typeof n!="number"||isNaN(n)?"0%":`${(n*100).toFixed(e)}%`,oc=(n,e,t=2)=>{const i=parseFloat(n)||0,a=parseFloat(e)||0;return parseFloat((i+a).toFixed(t))},lc=(n,e,t=2)=>{const i=parseFloat(n)||0,a=parseFloat(e)||0;return parseFloat((i-a).toFixed(t))},rl=(n,e=2)=>{const t=parseFloat(n)||0;return parseFloat(t.toFixed(e))},Hg=["principal","bodega austria","bodega ilusion","campo operativo","estación móvil"],C6=["bodega austria","bodega ilusion"],N6=n=>n?n.split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" "):"",Fa="combustibles_movements",tr="combustibles_inventory",dt={ENTRADA:"entrada",SALIDA:"salida",TRANSFERENCIA:"transferencia",AJUSTE:"ajuste"},uc={PENDIENTE:"pendiente",COMPLETADO:"completado",CANCELADO:"cancelado"},g4=async n=>{try{A4(n);const e={...n,createdAt:Ze(),updatedAt:Ze(),status:uc.COMPLETADO,approvedAt:Ze(),totalValue:aI(n),effectiveDate:n.effectiveDate||Ze()},t=await i_(me,async i=>{const a=lt(qe(me,Fa));return i.set(a,e),await oI(i,e,a.id),a.id});return console.log("✅ Movimiento creado exitosamente:",t),t}catch(e){throw console.error("❌ Error al crear movimiento:",e),new Error(`Error al crear movimiento: ${e.message}`)}},sI=async(n={})=>{try{let e=qe(me,Fa);n.type&&(e=Ie(e,Pe("type","==",n.type))),n.status&&(e=Ie(e,Pe("status","==",n.status))),n.fuelType&&(e=Ie(e,Pe("fuelType","==",n.fuelType))),n.vehicleId&&(e=Ie(e,Pe("vehicleId","==",n.vehicleId))),e=Ie(e,Hr("createdAt","desc"));const t=await St(e),i=[];return t.forEach(a=>{i.push({id:a.id,...a.data(),createdAt:a.data().createdAt?.toDate?.()||a.data().createdAt,updatedAt:a.data().updatedAt?.toDate?.()||a.data().updatedAt,effectiveDate:a.data().effectiveDate?.toDate?.()||a.data().effectiveDate})}),i}catch(e){throw console.error("❌ Error al obtener movimientos:",e),new Error(`Error al obtener movimientos: ${e.message}`)}},A_=async n=>{try{if(!n)throw new Error("ID de movimiento requerido");const e=lt(me,Fa,n),t=await ja(e);return t.exists()?{id:t.id,...t.data(),createdAt:t.data().createdAt?.toDate?.()||t.data().createdAt,updatedAt:t.data().updatedAt?.toDate?.()||t.data().updatedAt,effectiveDate:t.data().effectiveDate?.toDate?.()||t.data().effectiveDate}:null}catch(e){throw console.error("❌ Error al obtener movimiento:",e),new Error(`Error al obtener movimiento: ${e.message}`)}},y4=async(n,e)=>{try{if(!n)throw new Error("ID de movimiento requerido");const t={...e,updatedAt:Ze(),...e.quantity||e.unitPrice?{totalValue:aI(e)}:{}},i=lt(me,Fa,n);await Ba(i,t),console.log("✅ Movimiento actualizado exitosamente")}catch(t){throw console.error("❌ Error al actualizar movimiento:",t),new Error(`Error al actualizar movimiento: ${t.message}`)}},_4=async n=>{try{if(!n)throw new Error("ID de movimiento requerido");const e=await A_(n);if(!e)throw new Error("Movimiento no encontrado");await i_(me,async t=>{const i=lt(me,Fa,n);e.status===uc.COMPLETADO&&await b4(t,e),t.delete(i)}),console.log("✅ Movimiento eliminado y cambios de inventario revertidos exitosamente")}catch(e){throw console.error("❌ Error al eliminar movimiento:",e),new Error(`Error al eliminar movimiento: ${e.message}`)}},v4=(n,e={})=>{try{let t=qe(me,Fa);return e.type&&(t=Ie(t,Pe("type","==",e.type))),e.status&&(t=Ie(t,Pe("status","==",e.status))),t=Ie(t,Hr("createdAt","desc")),Nc(t,i=>{const a=[];i.forEach(l=>{a.push({id:l.id,...l.data(),createdAt:l.data().createdAt?.toDate?.()||l.data().createdAt,updatedAt:l.data().updatedAt?.toDate?.()||l.data().updatedAt,effectiveDate:l.data().effectiveDate?.toDate?.()||l.data().effectiveDate})}),n(a)},i=>{console.error("❌ Error en suscripción de movimientos:",i),n([],i)})}catch(t){throw console.error("❌ Error al configurar suscripción:",t),new Error(`Error en suscripción: ${t.message}`)}},E4=async n=>{try{const e=await A_(n);if(!e)throw new Error("Movimiento no encontrado");if(e.status!==uc.PENDIENTE)throw new Error("Solo se pueden aprobar movimientos pendientes");await i_(me,async t=>{const i=lt(me,Fa,n);t.update(i,{status:uc.COMPLETADO,approvedAt:Ze(),updatedAt:Ze()}),await oI(t,e,n)}),console.log("✅ Movimiento aprobado exitosamente")}catch(e){throw console.error("❌ Error al aprobar movimiento:",e),new Error(`Error al aprobar movimiento: ${e.message}`)}},T4=async(n={})=>{try{const e=await sI(n),t={totalMovements:e.length,byType:{},byStatus:{},byFuelType:{},totalValue:0,totalQuantity:0,averageValue:0,thisMonth:0,lastMonth:0,thisWeek:0},i=new Date,a=new Date(i.getFullYear(),i.getMonth(),1),l=new Date(i.getFullYear(),i.getMonth()-1,1),c=new Date(i.setDate(i.getDate()-i.getDay()));return e.forEach(d=>{t.byType[d.type]=(t.byType[d.type]||0)+1,t.byStatus[d.status]=(t.byStatus[d.status]||0)+1,t.byFuelType[d.fuelType]=(t.byFuelType[d.fuelType]||0)+1,t.totalValue+=d.totalValue||0,t.totalQuantity+=d.quantity||0;const m=new Date(d.createdAt);m>=a&&t.thisMonth++,m>=l&&m<a&&t.lastMonth++,m>=c&&t.thisWeek++}),t.averageValue=t.totalMovements>0?t.totalValue/t.totalMovements:0,t}catch(e){throw console.error("❌ Error al calcular estadísticas:",e),new Error(`Error al calcular estadísticas: ${e.message}`)}},ob=n=>n?Hg.includes(n.toLowerCase()):!1,A4=n=>{const e=["type","fuelType","quantity","unitPrice"];for(const t of e)if(!n[t])throw new Error(`Campo requerido: ${t}`);if(!Object.values(dt).includes(n.type))throw new Error("Tipo de movimiento inválido");if(n.quantity<=0)throw new Error("La cantidad debe ser mayor a cero");if(n.unitPrice<0)throw new Error("El precio unitario no puede ser negativo");if(n.type===dt.SALIDA&&!n.vehicleId)throw new Error("Las salidas deben tener un vehículo asociado");if(n.type===dt.TRANSFERENCIA&&!n.destinationLocation)throw new Error("Las transferencias deben tener una ubicación destino");if(n.type===dt.ENTRADA){if(!n.supplierName)throw new Error("Las entradas deben tener un proveedor");if(!n.destinationLocation)throw new Error("Las entradas deben tener una ubicación destino")}if(n.type!==dt.ENTRADA&&n.location&&!ob(n.location))throw new Error(`Ubicación origen inválida: ${n.location}. Ubicaciones válidas: ${Hg.join(", ")}`);if(n.destinationLocation&&!ob(n.destinationLocation))throw new Error(`Ubicación destino inválida: ${n.destinationLocation}. Ubicaciones válidas: ${Hg.join(", ")}`);if(n.type===dt.TRANSFERENCIA){const t=(n.location||"principal").toLowerCase(),i=n.destinationLocation.toLowerCase();if(t===i)throw new Error("La ubicación origen y destino no pueden ser la misma en una transferencia")}},aI=n=>(n.quantity||0)*(n.unitPrice||0),oI=async(n,e,t)=>{try{let i=e.location||"principal";e.type===dt.ENTRADA&&(i=e.destinationLocation||"principal");const a=Ie(qe(me,tr),Pe("fuelType","==",e.fuelType),Pe("location","==",i)),l=await St(a);if(l.empty){if(e.type!==dt.ENTRADA)throw new Error(`No se encontró inventario para ${e.fuelType} en ${i} para realizar un movimiento de ${e.type}.`);console.log(`📦 Creando inventario automático para ${e.fuelType} en ${i}`);const c=lt(qe(me,tr)),d={fuelType:e.fuelType,location:i,name:e.fuelType,maxCapacity:1e4,currentStock:rl(e.quantity,2),minThreshold:1500,pricePerUnit:e.unitPrice||0,createdAt:Ze(),updatedAt:Ze(),status:"active",lastMovement:{movementId:t,type:e.type,quantity:e.quantity,date:Ze()}};n.set(c,d)}else{const c=l.docs[0],d=c.data(),m=lt(me,tr,c.id);let g=d.currentStock;switch(e.type){case dt.ENTRADA:g=oc(g,e.quantity);break;case dt.SALIDA:if(g=lc(g,e.quantity),g<0)throw new Error("Stock insuficiente para realizar la salida");break;case dt.AJUSTE:g=oc(g,e.quantity),g<0&&(g=0);break;case dt.TRANSFERENCIA:if(g=lc(g,e.quantity),g<0)throw new Error("Stock insuficiente para realizar la transferencia");await w4(n,e,t);break}g=rl(g,2),n.update(m,{currentStock:g,lastMovement:{movementId:t,type:e.type,quantity:e.quantity,date:Ze()},updatedAt:Ze()})}e.type===dt.SALIDA&&e.vehicleId&&e.currentHours&&await ub(n,e.vehicleId,e.currentHours),e.type===dt.SALIDA&&e.vehicleId&&e.currentHours&&await ub(n,e.vehicleId,e.currentHours)}catch(i){throw console.error("❌ Error al actualizar inventario:",i),i}},b4=async(n,e)=>{try{console.log("🔄 Revirtiendo cambios de inventario para movimiento:",e.id);let t;switch(e.type){case dt.ENTRADA:t=e.destinationLocation||"principal";break;case dt.SALIDA:case dt.AJUSTE:t=e.location||"principal";break;case dt.TRANSFERENCIA:t=e.location||"principal";break;default:t=e.location||e.destinationLocation||"principal"}console.log(`🔍 Buscando inventario: ${e.fuelType} en ${t}`);const i=Ie(qe(me,tr),Pe("fuelType","==",e.fuelType),Pe("location","==",t)),a=await St(i);if(a.empty){console.warn(`⚠️ No se encontró inventario para ${e.fuelType} en ${t}`);const m=Ie(qe(me,tr),Pe("fuelType","==",e.fuelType)),g=await St(m);if(g.empty)throw console.error(`❌ No existe inventario para ${e.fuelType} en ninguna ubicación`),new Error(`No se puede revertir: no existe inventario para ${e.fuelType} en ninguna ubicación. Movimiento huérfano detectado.`);console.log(`🔄 Usando inventario fallback en ${g.docs[0].data().location}`);const _=g.docs[0],T=_.data(),A=lt(me,tr,_.id);await lb(n,A,T,e);return}const l=a.docs[0],c=l.data(),d=lt(me,tr,l.id);await lb(n,d,c,e)}catch(t){throw console.error("❌ Error al revertir cambios de inventario:",t),new Error(`Error al revertir inventario: ${t.message}`)}},lb=async(n,e,t,i)=>{try{let a=t.currentStock;switch(i.type){case dt.ENTRADA:a=lc(a,i.quantity),a<0&&(console.warn("⚠️ Advertencia: La reversión resulta en stock negativo, ajustando a 0"),a=0);break;case dt.SALIDA:a=oc(a,i.quantity);break;case dt.AJUSTE:a=lc(a,i.quantity),a<0&&(console.warn("⚠️ Advertencia: La reversión de ajuste resulta en stock negativo, ajustando a 0"),a=0);break;case dt.TRANSFERENCIA:a=oc(a,i.quantity),await S4(n,i);break;default:throw new Error(`Tipo de movimiento no soportado para reversión: ${i.type}`)}a=rl(a,2),n.update(e,{currentStock:a,lastMovement:{movementId:null,type:"reversion",quantity:i.quantity,originalType:i.type,date:Ze(),note:`Reversión de movimiento ${i.id} - Ubicación original: ${i.location||i.destinationLocation||"no especificada"}`},updatedAt:Ze()}),console.log(`✅ Inventario revertido exitosamente. Stock anterior: ${t.currentStock}, Nuevo stock: ${a}`)}catch(a){throw console.error("❌ Error en procesamiento de reversión:",a),a}},w4=async(n,e,t)=>{try{if(!e.destinationLocation)throw new Error("Ubicación destino requerida para transferencias");console.log(`🔄 Transfiriendo ${e.quantity} ${e.fuelType} a ${e.destinationLocation}`);const i=Ie(qe(me,tr),Pe("fuelType","==",e.fuelType),Pe("location","==",e.destinationLocation)),a=await St(i);if(a.empty){console.log(`📦 Creando inventario automático en destino: ${e.fuelType} en ${e.destinationLocation}`);const l=lt(qe(me,tr)),c={fuelType:e.fuelType,location:e.destinationLocation,name:e.fuelType,maxCapacity:1e4,currentStock:rl(e.quantity,2),minThreshold:1500,pricePerUnit:e.unitPrice||0,createdAt:Ze(),updatedAt:Ze(),status:"active",lastMovement:{movementId:t,type:"transferencia_entrada",quantity:e.quantity,date:Ze(),originLocation:e.location}};n.set(l,c)}else{const l=a.docs[0],c=l.data(),d=lt(me,tr,l.id),m=rl(oc(c.currentStock,e.quantity),2);n.update(d,{currentStock:m,lastMovement:{movementId:t,type:"transferencia_entrada",quantity:e.quantity,date:Ze(),originLocation:e.location},updatedAt:Ze()})}console.log("✅ Transferencia al destino completada exitosamente")}catch(i){throw console.error("❌ Error al transferir a destino:",i),new Error(`Error en transferencia a destino: ${i.message}`)}},S4=async(n,e)=>{try{if(!e.destinationLocation){console.warn("⚠️ No hay ubicación destino para revertir");return}console.log(`🔄 Revirtiendo transferencia en destino: ${e.destinationLocation}`);const t=Ie(qe(me,tr),Pe("fuelType","==",e.fuelType),Pe("location","==",e.destinationLocation)),i=await St(t);if(i.empty){console.warn(`⚠️ No se encontró inventario destino para revertir: ${e.fuelType} en ${e.destinationLocation}`);return}const a=i.docs[0],l=a.data(),c=lt(me,tr,a.id);let d=lc(l.currentStock,e.quantity);d<0&&(console.warn("⚠️ Advertencia: La reversión en destino resulta en stock negativo, ajustando a 0"),d=0),d=rl(d,2),n.update(c,{currentStock:d,lastMovement:{movementId:null,type:"reversion_transferencia",quantity:e.quantity,date:Ze(),note:`Reversión de transferencia desde ${e.location}`},updatedAt:Ze()}),console.log("✅ Reversión en destino completada exitosamente")}catch(t){throw console.error("❌ Error al revertir transferencia en destino:",t),new Error(`Error al revertir destino: ${t.message}`)}},ub=async(n,e,t)=>{try{console.log(`🕒 Actualizando horómetro del vehículo ${e} a ${t} horas`);const i=Ie(qe(me,"combustibles_vehicles"),Pe("vehicleId","==",e)),a=await St(i);if(a.empty){console.warn(`⚠️ Vehículo ${e} no encontrado para actualizar horómetro`);return}const l=a.docs[0],c=l.data(),d=lt(me,"combustibles_vehicles",l.id),m=parseFloat(c.currentHours)||0,g=parseFloat(t);g<m&&console.warn(`⚠️ Nueva lectura horómetro (${g}) menor a la anterior (${m}). Actualizando de todas formas.`);const _=c.hourMeterHistory||[];_.push({previousHours:m,newHours:g,difference:g-m,updatedAt:new Date,updatedBy:"movement_service",source:"fuel_consumption"}),n.update(d,{currentHours:g,hourMeterHistory:_,lastHourMeterUpdate:Ze(),updatedAt:Ze()}),console.log(`✅ Horómetro actualizado: ${e} - ${m}h → ${g}h`)}catch(i){console.error("❌ Error al actualizar horómetro del vehículo:",i),console.warn("⚠️ Continuando con el movimiento sin actualización de horómetro")}},Rf={createMovement:g4,getAllMovements:sI,getMovement:A_,updateMovement:y4,deleteMovement:_4,subscribeToMovements:v4,approveMovement:E4,getMovementsStats:T4,MOVEMENT_TYPES:dt,MOVEMENT_STATUS:uc},il="combustibles_inventory",D6=async(n,e)=>{try{const t=c4[n.fuelType];if(!t)return{success:!1,error:"Tipo de combustible no válido"};const i=Ie(qe(me,il),Pe("fuelType","==",n.fuelType),Pe("location","==",n.location.toLowerCase()));if(!(await St(i)).empty)return{success:!1,error:`Ya existe ${t.name} en ${n.location}`};const l={fuelType:n.fuelType,name:t.name,description:n.description||t.description,currentStock:Number(n.currentStock)||0,maxCapacity:Number(n.maxCapacity),minThreshold:Number(n.minThreshold)||n.maxCapacity*.15,unit:t.unit,location:n.location.toLowerCase(),pricePerUnit:Number(n.pricePerUnit)||0,supplier:n.supplier||"",status:n.status||"active",createdAt:new Date,createdBy:e,lastUpdated:new Date,updatedBy:e};return{success:!0,data:{id:(await r_(qe(me,il),l)).id,...l},message:`${t.name} agregado al inventario exitosamente`}}catch(t){return console.error("Error creating inventory item:",t),{success:!1,error:t.message}}},R4=async()=>{try{const n=Ie(qe(me,il),Hr("fuelType","asc")),e=await St(n),t=[];return e.forEach(i=>{const a=i.data();t.push({id:i.id,...a,stockLevel:E_(a.currentStock,a.maxCapacity),stockPercentage:Math.round(a.currentStock/a.maxCapacity*100),needsRestock:a.currentStock<=a.minThreshold})}),{success:!0,data:t}}catch(n){return console.error("Error fetching inventory items:",n),{success:!1,error:n.message}}},O6=async(n,e,t)=>{try{const i=lt(me,il,n);if(!(await ja(i)).exists())return{success:!1,error:"Item no encontrado"};const l={...e,lastUpdated:new Date,updatedBy:t};return delete l.id,delete l.createdAt,delete l.createdBy,await Ba(i,l),{success:!0,message:"Item actualizado exitosamente",data:{id:n,...l}}}catch(i){return console.error("Error updating inventory item:",i),{success:!1,error:i.message}}},M6=async n=>{try{const e=lt(me,il,n);return(await ja(e)).exists()?(await kV(e),{success:!0,message:"Item eliminado exitosamente"}):{success:!1,error:"Item no encontrado"}}catch(e){return console.error("Error deleting inventory item:",e),{success:!1,error:e.message}}},I4=n=>{const e=Ie(qe(me,il),Hr("fuelType","asc"));return Nc(e,t=>{const i=[];t.forEach(a=>{const l=a.data();i.push({id:a.id,...l,stockLevel:E_(l.currentStock,l.maxCapacity),stockPercentage:Math.round(l.currentStock/l.maxCapacity*100),needsRestock:l.currentStock<=l.minThreshold})}),n(i)},t=>{console.error("Error in inventory subscription:",t),n(null,t)})},P6=async()=>{try{const n=await R4();if(!n.success)return n;const e=n.data,t={totalItems:e.length,activeItems:e.filter(i=>i.status==="active").length,lowStockItems:e.filter(i=>i.needsRestock).length,totalValue:e.reduce((i,a)=>i+a.currentStock*a.pricePerUnit,0),averageStockLevel:e.length>0?Math.round(e.reduce((i,a)=>i+a.stockPercentage,0)/e.length):0,byFuelType:{}};return e.forEach(i=>{t.byFuelType[i.fuelType]||(t.byFuelType[i.fuelType]={count:0,totalStock:0,totalCapacity:0,totalValue:0}),t.byFuelType[i.fuelType].count++,t.byFuelType[i.fuelType].totalStock+=i.currentStock,t.byFuelType[i.fuelType].totalCapacity+=i.maxCapacity,t.byFuelType[i.fuelType].totalValue+=i.currentStock*i.pricePerUnit}),{success:!0,data:t}}catch(n){return console.error("Error calculating inventory stats:",n),{success:!1,error:n.message}}},Gg=[{id:"maquinaria_pesada",name:"Maquinaria Pesada",description:"Excavadoras, bulldozers, cargadores, grúas",icon:"🏗️",color:"#FF6B35",fuelTypes:["Diesel","ACPM"],fields:["enginePower","operatingWeight","bucketCapacity"]},{id:"transporte",name:"Transporte",description:"Camiones, camionetas, volquetas",icon:"🚛",color:"#2E86AB",fuelTypes:["Diesel","ACPM","Gasolina"],fields:["plateNumber","loadCapacity","enginePower"]},{id:"herramientas_motorizadas",name:"Herramientas Motorizadas",description:"Motosierras, guadañas, fumigadoras",icon:"🔧",color:"#A23B72",fuelTypes:["Gasolina","Mixto"],fields:["enginePower","weight"]},{id:"equipos_bombeo",name:"Equipos de Bombeo",description:"Motobombas, hidrolavadoras, plantas eléctricas",icon:"💧",color:"#F18F01",fuelTypes:["Diesel","Gasolina"],fields:["flow","pressure","enginePower"]},{id:"vehiculos_ligeros",name:"Vehículos Ligeros",description:"Motocicletas, cuatrimotos, vehículos de apoyo",icon:"🏍️",color:"#C73E1D",fuelTypes:["Gasolina"],fields:["plateNumber","enginePower"]},{id:"agricola",name:"Agrícola/Forestal",description:"Tractores, asperjadoras, equipos forestales",icon:"🚜",color:"#2F7D32",fuelTypes:["Diesel","ACPM"],fields:["enginePower","hasHourMeter","implementType"]},{id:"otros",name:"Otros",description:"Equipos especializados y otros vehículos",icon:"⚙️",color:"#616161",fuelTypes:["Diesel","Gasolina","ACPM","Mixto"],fields:["enginePower"]}],b_={ACTIVO:"activo",MANTENIMIENTO:"mantenimiento",INACTIVO:"inactivo",REPARACION:"reparacion",FUERA_DE_SERVICIO:"fuera_de_servicio"},C4={DIESEL:"Diesel",GASOLINA:"Gasolina",ACPM:"ACPM",MIXTO:"Mixto"},x6=[{key:"plateNumber",label:"Número de Placa",type:"text",icon:"🏷️"},{key:"enginePower",label:"Potencia del Motor (HP)",type:"number",icon:"⚡"},{key:"fuelCapacity",label:"Capacidad de Combustible (Litros)",type:"number",icon:"⛽"},{key:"operatingWeight",label:"Peso Operativo (Toneladas)",type:"number",icon:"⚖️"},{key:"loadCapacity",label:"Capacidad de Carga (Toneladas)",type:"number",icon:"📦"},{key:"bucketCapacity",label:"Capacidad de Balde (m³)",type:"number",icon:"🪣"},{key:"hasHourMeter",label:"Tiene Horómetro",type:"boolean",icon:"⏰"},{key:"currentHours",label:"Horas Actuales",type:"number",icon:"🕐",dependsOn:"hasHourMeter"},{key:"implementType",label:"Tipo de Implemento",type:"text",icon:"🔧"},{key:"flow",label:"Caudal (L/min)",type:"number",icon:"💧"},{key:"pressure",label:"Presión (PSI)",type:"number",icon:"💨"},{key:"weight",label:"Peso (Kg)",type:"number",icon:"⚖️"}],V6=(n,e=[])=>{const t=e.find(i=>i.id===n);return t||Gg.find(i=>i.id===n)||null},k6=(n=[])=>{const e=Gg.map(i=>i.id),t=n.filter(i=>!e.includes(i.id));return[...Gg,...t]},L6=n=>{const e=[];return(!n.id||typeof n.id!="string")&&e.push("ID de categoría requerido y debe ser texto"),(!n.name||typeof n.name!="string")&&e.push("Nombre de categoría requerido y debe ser texto"),n.name&&n.name.length<2&&e.push("Nombre debe tener al menos 2 caracteres"),n.fuelTypes&&!Array.isArray(n.fuelTypes)&&e.push("Tipos de combustible debe ser un array"),n.fields&&!Array.isArray(n.fields)&&e.push("Campos debe ser un array"),{isValid:e.length===0,errors:e}},U6=(n,e=[])=>{const t=n.toLowerCase().replace(/[^a-z0-9]/g,"_").replace(/_+/g,"_").replace(/^_|_$/g,"");let i=t,a=1;for(;e.some(l=>l.id===i);)i=`${t}_${a}`,a++;return i},pl="combustibles_vehicles",Bo={DIESEL:"Diesel",GASOLINA:"Gasolina",ACPM:"ACPM",MIXTO:"Mixto"},N4=async n=>{try{if(M4(n),await w_(n.vehicleId))throw new Error(`El código de vehículo '${n.vehicleId}' ya existe`);const t={...n,createdAt:Ze(),updatedAt:Ze(),status:n.status||b_.ACTIVO,totalFuelConsumed:0,totalHoursWorked:0,totalMovements:0,lastMovementDate:null,estimatedConsumptionPerHour:cI(n)},i=await r_(qe(me,pl),t);return console.log("✅ Vehículo creado exitosamente:",i.id),i.id}catch(e){throw console.error("❌ Error al crear vehículo:",e),new Error(`Error al crear vehículo: ${e.message}`)}},lI=async(n={})=>{try{let e=qe(me,pl);n.type&&(e=Ie(e,Pe("type","==",n.type))),n.status&&(e=Ie(e,Pe("status","==",n.status))),n.fuelType&&(e=Ie(e,Pe("fuelType","==",n.fuelType))),n.location&&(e=Ie(e,Pe("currentLocation","==",n.location))),e=Ie(e,Hr("vehicleId","asc"));const t=await St(e),i=[];return t.forEach(a=>{i.push({id:a.id,...a.data(),createdAt:a.data().createdAt?.toDate?.()||a.data().createdAt,updatedAt:a.data().updatedAt?.toDate?.()||a.data().updatedAt,lastMovementDate:a.data().lastMovementDate?.toDate?.()||a.data().lastMovementDate,lastMaintenanceDate:a.data().lastMaintenanceDate?.toDate?.()||a.data().lastMaintenanceDate})}),i}catch(e){throw console.error("❌ Error al obtener vehículos:",e),new Error(`Error al obtener vehículos: ${e.message}`)}},w_=async n=>{try{const e=Ie(qe(me,pl),Pe("vehicleId","==",n)),t=await St(e);if(t.empty)return null;const i=t.docs[0];return{id:i.id,...i.data(),createdAt:i.data().createdAt?.toDate?.()||i.data().createdAt,updatedAt:i.data().updatedAt?.toDate?.()||i.data().updatedAt,lastMovementDate:i.data().lastMovementDate?.toDate?.()||i.data().lastMovementDate,lastMaintenanceDate:i.data().lastMaintenanceDate?.toDate?.()||i.data().lastMaintenanceDate}}catch(e){throw console.error("❌ Error al buscar vehículo por código:",e),new Error(`Error al buscar vehículo: ${e.message}`)}},D4=async(n,e)=>{try{if(!n)throw new Error("ID de vehículo requerido");if(e.vehicleId){const a=await w_(e.vehicleId);if(a&&a.id!==n)throw new Error(`El código de vehículo '${e.vehicleId}' ya existe`)}const t={...e,updatedAt:Ze(),...e.enginePower||e.type?{estimatedConsumptionPerHour:cI(e)}:{}},i=lt(me,pl,n);await Ba(i,t),console.log("✅ Vehículo actualizado exitosamente")}catch(t){throw console.error("❌ Error al actualizar vehículo:",t),new Error(`Error al actualizar vehículo: ${t.message}`)}},uI=(n,e={})=>{try{let t=qe(me,pl);const i=[];e.category&&i.push(Pe("category","==",e.category)),e.status&&i.push(Pe("status","==",e.status)),e.fuelType&&i.push(Pe("fuelType","==",e.fuelType)),e.currentLocation&&i.push(Pe("currentLocation","==",e.currentLocation)),i.forEach(l=>{t=Ie(t,l)}),t=Ie(t,Hr("updatedAt","desc"));let a=null;return Nc(t,l=>{const c=Date.now();if(a&&c-a<500)return;a=c;const d=[],m={added:[],modified:[],removed:[]};l.docChanges().forEach(g=>{const _={id:g.doc.id,...g.doc.data(),createdAt:g.doc.data().createdAt?.toDate?.()||g.doc.data().createdAt,updatedAt:g.doc.data().updatedAt?.toDate?.()||g.doc.data().updatedAt,lastMovementDate:g.doc.data().lastMovementDate?.toDate?.()||g.doc.data().lastMovementDate,lastMaintenanceDate:g.doc.data().lastMaintenanceDate?.toDate?.()||g.doc.data().lastMaintenanceDate,lastHourMeterDate:g.doc.data().lastHourMeterDate?.toDate?.()||g.doc.data().lastHourMeterDate};g.type==="added"?m.added.push(_):g.type==="modified"?m.modified.push(_):g.type==="removed"&&m.removed.push({id:g.doc.id})}),l.forEach(g=>{d.push({id:g.id,...g.data(),createdAt:g.data().createdAt?.toDate?.()||g.data().createdAt,updatedAt:g.data().updatedAt?.toDate?.()||g.data().updatedAt,lastMovementDate:g.data().lastMovementDate?.toDate?.()||g.data().lastMovementDate,lastMaintenanceDate:g.data().lastMaintenanceDate?.toDate?.()||g.data().lastMaintenanceDate,lastHourMeterDate:g.data().lastHourMeterDate?.toDate?.()||g.data().lastHourMeterDate})}),n(d,null,m)},l=>{console.error("❌ Error en suscripción de vehículos:",l),n([],l)})}catch(t){throw console.error("❌ Error al configurar suscripción:",t),new Error(`Error en suscripción: ${t.message}`)}},O4=async(n={})=>{try{const e=await lI(n),t={totalVehicles:e.length,byType:{},byStatus:{},byFuelType:{},totalFuelConsumed:0,totalHoursWorked:0,averageConsumption:0,mostActiveVehicle:null,leastActiveVehicle:null};let i=0,a=1/0;return e.forEach(l=>{t.byType[l.type]=(t.byType[l.type]||0)+1,t.byStatus[l.status]=(t.byStatus[l.status]||0)+1,t.byFuelType[l.fuelType]=(t.byFuelType[l.fuelType]||0)+1,t.totalFuelConsumed+=l.totalFuelConsumed||0,t.totalHoursWorked+=l.totalHoursWorked||0;const c=l.totalMovements||0;c>i&&(i=c,t.mostActiveVehicle=l),c<a&&c>0&&(a=c,t.leastActiveVehicle=l)}),t.totalHoursWorked>0&&(t.averageConsumption=t.totalFuelConsumed/t.totalHoursWorked),t}catch(e){throw console.error("❌ Error al calcular estadísticas:",e),new Error(`Error al calcular estadísticas: ${e.message}`)}},M4=n=>{const e=["vehicleId","name","type","fuelType"];for(const t of e)if(!n[t])throw new Error(`Campo requerido: ${t}`);if(!n.type||n.type.trim().length===0)throw new Error("Tipo de vehículo requerido");if(!Object.values(Bo).includes(n.fuelType))throw new Error("Tipo de combustible inválido");if(n.status&&!Object.values(b_).includes(n.status))throw new Error("Estado de vehículo inválido");if(n.enginePower&&n.enginePower<=0)throw new Error("La potencia del motor debe ser mayor a cero");if(n.fuelCapacity&&n.fuelCapacity<=0)throw new Error("La capacidad de combustible debe ser mayor a cero")},cI=n=>{const{type:e,enginePower:t,fuelType:i}=n,a={excavadora:.04,bulldozer:.05,cargador:.035,camion:.03,camioneta:.03,grua:.045,motosierra:.02,tractor:.025,volqueta:.035,motobomba:.035,fumigadora:.025,guadana:.02,motocicleta:.015,planta_electrica:.08,otros:.03},l={[Bo.DIESEL]:1,[Bo.GASOLINA]:1.2,[Bo.ACPM]:.95,[Bo.MIXTO]:1.1},c=a[e]||.03,d=l[i]||1;return c*(t||100)*d},P4=async n=>{try{const e=Ie(qe(me,pl),Pe("category","==",n));return(await St(e)).size}catch(e){return console.error("❌ Error al contar vehículos por categoría:",e),0}},z6=Object.freeze(Object.defineProperty({__proto__:null,FUEL_COMPATIBILITY:Bo,FUEL_TYPES:C4,VEHICLE_STATUS:b_,countVehiclesByCategory:P4,createVehicle:N4,getAllVehicles:lI,getVehicleByCode:w_,getVehiclesStats:O4,subscribeToVehicles:uI,updateVehicle:D4},Symbol.toStringTag,{value:"Module"})),Lr="combustibles_suppliers",j6=async(n,e)=>{try{const t=Ie(qe(me,Lr),Pe("name","==",n.name.trim()));if(!(await St(t)).empty)return{success:!1,error:`Ya existe un proveedor con el nombre "${n.name}"`};if(n.taxId){const c=Ie(qe(me,Lr),Pe("taxId","==",n.taxId.trim()));if(!(await St(c)).empty)return{success:!1,error:`Ya existe un proveedor con el NIT/Documento "${n.taxId}"`}}const a={name:n.name.trim(),taxId:n.taxId?.trim()||"",type:n.type||"proveedor",category:n.category||"combustibles",contactPerson:n.contactPerson?.trim()||"",phone:n.phone?.trim()||"",email:n.email?.trim()||"",address:n.address?.trim()||"",city:n.city?.trim()||"",state:n.state?.trim()||"Colombia",fuelTypes:n.fuelTypes||[],paymentTerms:n.paymentTerms||"contado",creditLimit:Number(n.creditLimit)||0,priceList:n.priceList||{},rating:Number(n.rating)||5,evaluationNotes:n.evaluationNotes||"",status:n.status||"active",isPreferred:n.isPreferred||!1,totalOrders:0,totalPurchased:0,lastOrderDate:null,averageDeliveryTime:0,createdAt:new Date,createdBy:e,lastUpdated:new Date,updatedBy:e};return{success:!0,data:{id:(await r_(qe(me,Lr),a)).id,...a},message:`Proveedor "${a.name}" creado exitosamente`}}catch(t){return console.error("Error creating supplier:",t),{success:!1,error:t.message}}},x4=async()=>{try{const n=Ie(qe(me,Lr),Hr("name","asc"));return{success:!0,data:(await St(n)).docs.map(i=>({id:i.id,...i.data()}))}}catch(n){return console.error("Error getting suppliers:",n),{success:!1,error:n.message}}},V4=n=>{const e=Ie(qe(me,Lr),Hr("name","asc"));return Nc(e,t=>{const i=t.docs.map(a=>({id:a.id,...a.data()}));n(i)})},B6=async(n,e,t)=>{try{const i=await ja(lt(me,Lr,n));if(!i.exists())return{success:!1,error:"Proveedor no encontrado"};if(e.name&&e.name.trim()!==i.data().name){const l=Ie(qe(me,Lr),Pe("name","==",e.name.trim()));if(!(await St(l)).empty)return{success:!1,error:`Ya existe un proveedor con el nombre "${e.name}"`}}if(e.taxId&&e.taxId.trim()!==i.data().taxId){const l=Ie(qe(me,Lr),Pe("taxId","==",e.taxId.trim()));if(!(await St(l)).empty)return{success:!1,error:`Ya existe un proveedor con el NIT/Documento "${e.taxId}"`}}const a={...e,lastUpdated:new Date,updatedBy:t};return a.name&&(a.name=a.name.trim()),a.taxId&&(a.taxId=a.taxId.trim()),a.contactPerson&&(a.contactPerson=a.contactPerson.trim()),a.phone&&(a.phone=a.phone.trim()),a.email&&(a.email=a.email.trim()),await Ba(lt(me,Lr,n),a),{success:!0,message:"Proveedor actualizado exitosamente"}}catch(i){return console.error("Error updating supplier:",i),{success:!1,error:i.message}}},F6=async(n,e)=>{try{return await Ba(lt(me,Lr,n),{status:"inactive",lastUpdated:new Date,updatedBy:e}),{success:!0,message:"Proveedor desactivado exitosamente"}}catch(t){return console.error("Error deleting supplier:",t),{success:!1,error:t.message}}},q6=async()=>{try{const n=await x4();if(!n.success)return n;const e=n.data,t={total:e.length,active:e.filter(i=>i.status==="active").length,inactive:e.filter(i=>i.status==="inactive").length,suspended:e.filter(i=>i.status==="suspended").length,preferred:e.filter(i=>i.isPreferred).length,averageRating:e.length>0?e.reduce((i,a)=>i+(a.rating||0),0)/e.length:0,byCategory:{},byType:{}};return e.forEach(i=>{const a=i.category||"sin_categoria";t.byCategory[a]=(t.byCategory[a]||0)+1}),e.forEach(i=>{const a=i.type||"sin_tipo";t.byType[a]=(t.byType[a]||0)+1}),{success:!0,data:t}}catch(n){return console.error("Error getting suppliers stats:",n),{success:!1,error:n.message}}};class k4{constructor(){this.activeQueries=new Map,this.queryCache=new Map,this.CACHE_TTL=5*60*1e3}async getOptimizedQuery(e,t={}){const{filters:i=[],orderByField:a="createdAt",orderDirection:l="desc",limitCount:c=20,startAfterDoc:d=null,useCache:m=!0}=t,g=this.generateCacheKey(e,t);if(m&&this.queryCache.has(g)){const _=this.queryCache.get(g);if(Date.now()-_.timestamp<this.CACHE_TTL)return console.log(`📋 Cache hit para ${e}`),_.data}try{console.log(`🔥 Ejecutando consulta optimizada: ${e}`);let _=qe(me,e);i.forEach(S=>{_=Ie(_,Pe(S.field,S.operator,S.value))}),_=Ie(_,Hr(a,l)),_=Ie(_,IA(c)),d&&(_=Ie(_,OV(d)));const A=(await St(_)).docs.map(S=>({id:S.id,...S.data()}));return m&&this.queryCache.set(g,{data:A,timestamp:Date.now()}),A}catch(_){throw console.error(`Error en consulta optimizada ${e}:`,_),_}}subscribeOptimized(e,t,i={}){const{filters:a=[],orderByField:l="createdAt",orderDirection:c="desc",limitCount:d=50,debounceMs:m=300}=i,g=this.generateCacheKey(e,i);this.activeQueries.has(g)&&this.activeQueries.get(g)();let _=null;try{let T=qe(me,e);a.forEach(S=>{T=Ie(T,Pe(S.field,S.operator,S.value))}),T=Ie(T,Hr(l,c),IA(d));const A=Nc(T,S=>{_&&clearTimeout(_),_=setTimeout(()=>{const N=S.docs.map(q=>({id:q.id,...q.data()}));console.log(`📡 Datos actualizados: ${e} (${N.length} items)`),t(N)},m)},S=>{console.error(`Error en suscripción ${e}:`,S),t([],S)});return this.activeQueries.set(g,A),A}catch(T){throw console.error(`Error creando suscripción ${e}:`,T),T}}async getCount(e,t=[]){try{let i=qe(me,e);return t.forEach(l=>{i=Ie(i,Pe(l.field,l.operator,l.value))}),(await LV(i)).data().count}catch(i){return console.error(`Error obteniendo conteo ${e}:`,i),0}}clearCache(e=null){e?Array.from(this.queryCache.keys()).filter(i=>i.includes(e)).forEach(i=>this.queryCache.delete(i)):this.queryCache.clear()}cleanup(){this.activeQueries.forEach(e=>e()),this.activeQueries.clear(),this.queryCache.clear()}generateCacheKey(e,t){return`${e}_${JSON.stringify(t)}`}}const L4=new k4,xd=(n,e=!0)=>{const[t,i]=z.useState([]),[a,l]=z.useState(!1),[c,d]=z.useState(null),m=z.useRef(null),g=z.useRef(!1),_=z.useCallback(()=>{if(!e||g.current)return;l(!0),d(null),g.current=!0;const A=n(S=>{i(S),l(!1)},S=>{d(S.message),l(!1)});m.current=A},[n,e]),T=z.useCallback(()=>{m.current&&(m.current(),m.current=null,g.current=!1)},[]);return z.useEffect(()=>(e?_():T(),()=>T()),[e,_,T]),{data:t,loading:a,error:c,subscribe:_,unsubscribe:T}},U4=(n=!1,e=!0)=>e?Vd("inventory",n,{orderByField:"name",limitCount:100}):xd(I4,n),z4=(n=!1,e=!0)=>e?Vd("vehicles",n,{filters:[{field:"status",operator:"==",value:"active"}],orderByField:"plate",limitCount:50}):xd(uI,n),j4=(n=!1,e=!0)=>e?Vd("suppliers",n,{filters:[{field:"status",operator:"==",value:"active"}],orderByField:"name",limitCount:30}):xd(V4,n),B4=(n=!1,e=!0)=>e?Vd("movements",n,{orderByField:"createdAt",orderDirection:"desc",limitCount:100}):xd((t,i)=>Rf.subscribeToMovements(t,i),n),Vd=(n,e=!1,t={})=>{const[i,a]=z.useState([]),[l,c]=z.useState(!1),[d,m]=z.useState(null),g=z.useRef(null),_=z.useCallback(()=>{if(g.current)return;c(!0),m(null);const A=L4.subscribeOptimized(n,(S,N)=>{N?m(N.message):a(S),c(!1)},t);g.current=A},[n,t]),T=z.useCallback(()=>{g.current&&(g.current(),g.current=null)},[]);return z.useEffect(()=>(e&&_(),()=>T()),[e,_,T]),{data:i,loading:l,error:d,subscribe:_,unsubscribe:T}},F4=(n=[])=>{const e=U4(n.includes("inventory")),t=z4(n.includes("vehicles")),i=j4(n.includes("suppliers")),a=B4(n.includes("movements")),l=e.loading||t.loading||i.loading||a.loading,c=e.error||t.error||i.error||a.error;return{inventory:e.data,vehicles:t.data,suppliers:i.data,movements:a.data,loading:l,error:c,subscribeToInventory:e.subscribe,subscribeToVehicles:t.subscribe,subscribeToSuppliers:i.subscribe,subscribeToMovements:a.subscribe}},q4=()=>{const[n,e]=z.useState(!1),[t,i]=z.useState(null),a=z.useCallback(async A=>{try{return e(!0),i(null),await Rf.deleteMovement(A),{success:!0}}catch(S){return console.error("Error al eliminar el movimiento:",S),i(S.message),{success:!1,error:S.message}}finally{e(!1)}},[]),l=z.useCallback(async A=>{try{return e(!0),i(null),{success:!0,data:await Rf.createMovement(A)}}catch(S){return console.error("Error al crear el movimiento:",S),i(S.message),{success:!1,error:S.message}}finally{e(!1)}},[]),c=z.useCallback(async(A,S)=>{try{return e(!0),i(null),{success:!0,data:await Rf.updateMovement(A,S)}}catch(N){return console.error("Error al actualizar el movimiento:",N),i(N.message),{success:!1,error:N.message}}finally{e(!1)}},[]),d=z.useCallback(async()=>{console.log("Refresh manual del inventario...")},[]),m=z.useCallback(async()=>{console.log("Refresh manual de movimientos...")},[]),g=z.useCallback(async()=>{console.log("Refresh manual de vehículos...")},[]),_=z.useCallback(async()=>{console.log("Refresh manual de proveedores...")},[]),T=z.useCallback(()=>{i(null)},[]);return{loading:n,error:t,deleteMovement:a,createMovement:l,updateMovement:c,refreshInventory:d,refreshMovements:m,refreshVehicles:g,refreshSuppliers:_,clearError:T}},hI=z.createContext(),fI=()=>{const n=z.useContext(hI);if(n===void 0)throw new Error("useCombustibles must be used within a CombustiblesProvider");return n},H4=({children:n})=>{const e=l4(),t=q4(),i=F4([]),a={...e,inventory:i.inventory,movements:i.movements,vehicles:i.vehicles,suppliers:i.suppliers,dataLoading:i.loading,dataError:i.error,...t,subscribeToInventory:i.subscribeToInventory,subscribeToVehicles:i.subscribeToVehicles,subscribeToSuppliers:i.subscribeToSuppliers,subscribeToMovements:i.subscribeToMovements};return k.jsx(hI.Provider,{value:a,children:n})},dI=z.createContext(),G4=({children:n})=>{const[e,t]=z.useState({totalRenders:0,totalFirebaseReads:0,totalCacheHits:0,optimizedComponents:0,unoptimizedComponents:0,averageRenderTime:0}),i=z.useCallback((l,c)=>{t(d=>({...d,[l]:d[l]+c}))},[]),a=z.useCallback(()=>{const l=e.totalCacheHits/(e.totalFirebaseReads+e.totalCacheHits)*100,c=e.optimizedComponents/(e.optimizedComponents+e.unoptimizedComponents)*100;console.log("📊 PERFORMANCE STATS - FASE 3:"),console.log(`🔄 Total renders: ${e.totalRenders}`),console.log(`🔥 Firebase reads: ${e.totalFirebaseReads}`),console.log(`⚡ Cache hits: ${e.totalCacheHits}`),console.log(`📈 Cache efficiency: ${l.toFixed(1)}%`),console.log(`✨ Components optimizados: ${e.optimizedComponents}`),console.log(`⚠️ Components sin optimizar: ${e.unoptimizedComponents}`),console.log(`🎯 Ratio optimización: ${c.toFixed(1)}%`)},[e]);return k.jsx(dI.Provider,{value:{globalMetrics:e,updateGlobalMetrics:i,logOptimizationStats:a},children:n})},$4=(n,e)=>{const t=z.memo(n,e);return t.displayName=`Optimized(${n.displayName||n.name})`,t},H6=(n=[])=>(e,t)=>n.length===0?Object.keys(e).every(i=>e[i]===t[i]):n.every(i=>e[i]===t[i]),K4=({isVisible:n=!0})=>{const{globalMetrics:e,logOptimizationStats:t}=z.useContext(dI),[i,a]=z.useState(!1),l=e.totalCacheHits/(e.totalFirebaseReads+e.totalCacheHits)*100||0,c=e.optimizedComponents/(e.optimizedComponents+e.unoptimizedComponents)*100||0;return z.useEffect(()=>{},[t]),z.useEffect(()=>{console.log("🔍 PerformanceDashboard renderizado:",{isVisible:n,MODE:"production",globalMetrics:e})},[n,e]),n?k.jsxs("div",{className:"performance-dashboard",children:[k.jsx("div",{className:"dashboard-toggle",children:k.jsxs("button",{className:"toggle-btn",onClick:()=>a(!i),title:"Toggle Performance Dashboard",children:["📊 Performance ",i?"▼":"▶"]})}),i&&k.jsxs("div",{className:"dashboard-content",children:[k.jsxs("div",{className:"metrics-grid",children:[k.jsxs("div",{className:"metric-card",children:[k.jsx("div",{className:"metric-icon",children:"🔄"}),k.jsxs("div",{className:"metric-info",children:[k.jsx("div",{className:"metric-value",children:e.totalRenders}),k.jsx("div",{className:"metric-label",children:"Total Renders"})]})]}),k.jsxs("div",{className:"metric-card",children:[k.jsx("div",{className:"metric-icon",children:"🔥"}),k.jsxs("div",{className:"metric-info",children:[k.jsx("div",{className:"metric-value",children:e.totalFirebaseReads}),k.jsx("div",{className:"metric-label",children:"Firebase Reads"})]})]}),k.jsxs("div",{className:"metric-card",children:[k.jsx("div",{className:"metric-icon",children:"⚡"}),k.jsxs("div",{className:"metric-info",children:[k.jsx("div",{className:"metric-value",children:e.totalCacheHits}),k.jsx("div",{className:"metric-label",children:"Cache Hits"})]})]}),k.jsxs("div",{className:"metric-card",children:[k.jsx("div",{className:"metric-icon",children:"📈"}),k.jsxs("div",{className:"metric-info",children:[k.jsxs("div",{className:"metric-value",children:[l.toFixed(1),"%"]}),k.jsx("div",{className:"metric-label",children:"Cache Efficiency"})]})]}),k.jsxs("div",{className:"metric-card",children:[k.jsx("div",{className:"metric-icon",children:"✨"}),k.jsxs("div",{className:"metric-info",children:[k.jsx("div",{className:"metric-value",children:e.optimizedComponents}),k.jsx("div",{className:"metric-label",children:"Optimized"})]})]}),k.jsxs("div",{className:"metric-card",children:[k.jsx("div",{className:"metric-icon",children:"🎯"}),k.jsxs("div",{className:"metric-info",children:[k.jsxs("div",{className:"metric-value",children:[c.toFixed(1),"%"]}),k.jsx("div",{className:"metric-label",children:"Optimization Ratio"})]})]})]}),k.jsx("div",{className:"performance-status",children:k.jsxs("div",{className:"status-item",children:[k.jsx("span",{className:"status-label",children:"Estado General:"}),k.jsx("span",{className:`status-badge ${Q4(c,l)}`,children:Y4(c,l)})]})}),k.jsxs("div",{className:"dashboard-actions",children:[k.jsx("button",{className:"btn btn-secondary",onClick:t,children:"📝 Log Stats"}),k.jsx("button",{className:"btn btn-primary",onClick:()=>console.log("📊 Métricas detalladas:",e),children:"🔍 Detalles"})]})]})]}):null},Q4=(n,e)=>{const t=(n+e)/2;return t>=80?"excellent":t>=60?"good":t>=40?"fair":"poor"},Y4=(n,e)=>{const t=(n+e)/2;return t>=80?"Excelente":t>=60?"Bueno":t>=40?"Regular":"Necesita Mejora"},X4=$4(K4),W4=({children:n})=>{const{userProfile:e,isAdmin:t,isCounterOrAbove:i}=fI(),[a,l]=z.useState(!1),c=Ms(),d=[{id:"dashboard",path:"/",name:"Dashboard",icon:"📊",description:"Vista general",requiredPermission:null},{id:"inventory",path:"/inventario",name:"Inventario",icon:"🛢️",description:"Gestión de stock",requiredPermission:"canManageInventory"},{id:"movements",path:"/movimientos",name:"Movimientos",icon:"📈",description:"Entradas y salidas",requiredPermission:"canCreateMovements"},{id:"vehicles",path:"/vehiculos",name:"Vehículos",icon:"🚜",description:"Maquinaria forestal",requiredPermission:null},{id:"maintenance",path:"/mantenimiento",name:"Mantenimiento",icon:"🔧",description:"Cambios de aceite y baterías",requiredPermission:null},{id:"products",path:"/productos",name:"Productos",icon:"🛢️",description:"Tipos de combustibles",requiredPermission:null},{id:"suppliers",path:"/proveedores",name:"Proveedores",icon:"🏪",description:"Gestión de proveedores",requiredPermission:"canManageSuppliers"},{id:"reports",path:"/reportes",name:"Reportes",icon:"📋",description:"Análisis y reportes",requiredPermission:"canViewReports"},{id:"migration",path:"/migracion",name:"Migración",icon:"🔄",description:"Datos históricos",requiredPermission:"admin"},{id:"admin",path:"/admin",name:"Administración",icon:"⚙️",description:"Gestión de usuarios",requiredPermission:"admin"}],m=()=>{l(!1)},g=A=>A?A==="admin"?t():e?.combustiblesPermissions?.[A]||!1:!0,_=d.filter(A=>g(A.requiredPermission)),T=async()=>{try{await lM(Gu)}catch(A){console.error("Error al cerrar sesión:",A)}};return k.jsxs("div",{className:"dashboard-layout",children:[k.jsx("header",{className:"dashboard-header",children:k.jsxs("div",{className:"header-content",children:[k.jsx("button",{className:"sidebar-toggle",onClick:()=>l(!a),children:"☰"}),k.jsxs("div",{className:"header-title",children:[k.jsx("h1",{children:"⛽ Gestión de Combustibles"}),k.jsx("span",{className:"subtitle",children:"Forestech Colombia"})]}),k.jsxs("div",{className:"header-user",children:[k.jsxs("div",{className:"user-info",children:[k.jsx("span",{className:"user-name",children:e?.displayName||e?.email}),k.jsx("span",{className:"user-role",children:e?.role})]}),k.jsx("div",{className:"user-avatar",children:e?.photoURL?k.jsx("img",{src:e.photoURL,alt:"Avatar"}):k.jsx("div",{className:"avatar-placeholder",children:(e?.displayName||e?.email||"U").charAt(0).toUpperCase()})}),k.jsx("button",{className:"logout-button",onClick:T,title:"Cerrar sesión",children:"🚪"})]})]})}),k.jsxs("div",{className:"dashboard-body",children:[k.jsxs("aside",{className:`dashboard-sidebar ${a?"open":""}`,children:[k.jsx("nav",{className:"sidebar-nav",children:_.map(A=>k.jsxs(Zg,{to:A.path,className:`nav-item ${c.pathname===A.path?"active":""}`,onClick:m,children:[k.jsx("span",{className:"nav-icon",children:A.icon}),k.jsxs("div",{className:"nav-content",children:[k.jsx("span",{className:"nav-name",children:A.name}),k.jsx("span",{className:"nav-description",children:A.description})]})]},A.id))}),k.jsx("div",{className:"sidebar-footer",children:k.jsxs("div",{className:"user-permissions",children:[k.jsx("h4",{children:"Permisos Activos:"}),k.jsxs("div",{className:"permission-list",children:[t()&&k.jsx("span",{className:"permission admin",children:"👑 Administrador"}),i()&&k.jsx("span",{className:"permission counter",children:"📊 Gestión Operativa"}),g("canManageInventory")&&k.jsx("span",{className:"permission",children:"🛢️ Inventario"}),g("canManageVehicles")&&k.jsx("span",{className:"permission",children:"🚜 Vehículos"})]})]})})]}),k.jsx("main",{className:"dashboard-main",children:k.jsx("div",{className:"main-content",children:n})})]}),a&&k.jsx("div",{className:"sidebar-overlay",onClick:()=>l(!1)})]})},Z4=()=>k.jsx(W4,{children:k.jsx(jC,{})}),J4=()=>{const[n,e]=z.useState("login"),[t,i]=z.useState(!1),[a,l]=z.useState(""),[c,d]=z.useState(""),[m,g]=z.useState(""),[_,T]=z.useState(""),[A,S]=z.useState({email:"",password:"",confirmPassword:"",invitationCode:""}),[N,q]=z.useState(""),[U,$]=z.useState(null),ie=async R=>{R.preventDefault(),i(!0),l("");try{await iM(Gu,m,_)}catch(O){console.error("Error en login:",O),l(Te(O.code))}finally{i(!1)}},ne=async()=>{i(!0),l("");try{const R=new bi,O=await CM(Gu,R);U?await ab(O.user,U.code):await nI(O.user)}catch(R){console.error("Error en login con Google:",R),l("Error al iniciar sesión con Google")}finally{i(!1)}},he=async R=>{R.preventDefault(),i(!0),l(""),d("");try{const O=await tI(N);O.success?($(O.invitation),d(`Invitación válida para: ${O.invitation.targetEmail}`),e("register"),S({...A,email:O.invitation.targetEmail,invitationCode:N})):l(O.error)}catch(O){console.error("Error validando invitación:",O),l("Error validando código de invitación")}finally{i(!1)}},ce=async R=>{if(R.preventDefault(),i(!0),l(""),A.password!==A.confirmPassword){l("Las contraseñas no coinciden"),i(!1);return}if(A.password.length<6){l("La contraseña debe tener al menos 6 caracteres"),i(!1);return}try{const O=await rM(Gu,A.email,A.password),V=await ab(O.user,A.invitationCode);V.success?d("¡Registro exitoso! Bienvenido al sistema."):l(V.error)}catch(O){console.error("Error en registro:",O),l(Te(O.code))}finally{i(!1)}},Te=R=>{switch(R){case"auth/invalid-email":return"El formato del email es inválido";case"auth/user-not-found":return"Usuario no encontrado";case"auth/wrong-password":return"Contraseña incorrecta";case"auth/invalid-credential":return"Email o contraseña incorrectos";case"auth/email-already-in-use":return"Este email ya está registrado";case"auth/weak-password":return"La contraseña es muy débil";default:return"Error de autenticación. Inténtalo de nuevo."}},P=()=>{l(""),d(""),g(""),T(""),q(""),$(null),S({email:"",password:"",confirmPassword:"",invitationCode:""})},I=()=>{switch(n){case"login":return k.jsxs(k.Fragment,{children:[k.jsxs("form",{onSubmit:ie,children:[k.jsxs("div",{className:"form-group",children:[k.jsx("label",{htmlFor:"email",children:"Email:"}),k.jsx("input",{id:"email",type:"email",value:m,onChange:R=>g(R.target.value),required:!0,disabled:t,placeholder:"tu-email@ejemplo.com"})]}),k.jsxs("div",{className:"form-group",children:[k.jsx("label",{htmlFor:"password",children:"Contraseña:"}),k.jsx("input",{id:"password",type:"password",value:_,onChange:R=>T(R.target.value),required:!0,disabled:t,placeholder:"Tu contraseña"})]}),k.jsx("button",{type:"submit",className:"auth-button primary",disabled:t,children:t?"Iniciando sesión...":"Iniciar Sesión"})]}),k.jsx("div",{className:"auth-divider",children:k.jsx("span",{children:"o"})}),k.jsxs("button",{onClick:ne,className:"auth-button google",disabled:t,children:[k.jsx("span",{children:"🔗"}),"Continuar con Google"]}),k.jsx("div",{className:"auth-actions",children:k.jsx("button",{className:"link-button",onClick:()=>{P(),e("invite")},children:"¿Tienes un código de invitación? Regístrate aquí"})})]});case"invite":return k.jsxs(k.Fragment,{children:[k.jsxs("form",{onSubmit:he,children:[k.jsxs("div",{className:"form-group",children:[k.jsx("label",{htmlFor:"inviteCode",children:"Código de invitación:"}),k.jsx("input",{id:"inviteCode",type:"text",value:N,onChange:R=>q(R.target.value.toUpperCase()),required:!0,disabled:t,placeholder:"XXXXXXXX",maxLength:8,style:{textTransform:"uppercase",fontFamily:"monospace"}}),k.jsx("small",{children:"Ingresa el código de 8 caracteres que recibiste"})]}),k.jsx("button",{type:"submit",className:"auth-button primary",disabled:t,children:t?"Validando...":"Validar Código"})]}),k.jsx("div",{className:"auth-actions",children:k.jsx("button",{className:"link-button",onClick:()=>{P(),e("login")},children:"Volver al inicio de sesión"})})]});case"register":return k.jsxs(k.Fragment,{children:[k.jsx("div",{className:"invitation-info",children:k.jsxs("div",{className:"success-message",children:["✅ Código válido para: ",U?.targetEmail]})}),k.jsxs("form",{onSubmit:ce,children:[k.jsxs("div",{className:"form-group",children:[k.jsx("label",{htmlFor:"registerEmail",children:"Email:"}),k.jsx("input",{id:"registerEmail",type:"email",value:A.email,disabled:!0,className:"disabled-input"})]}),k.jsxs("div",{className:"form-group",children:[k.jsx("label",{htmlFor:"registerPassword",children:"Contraseña:"}),k.jsx("input",{id:"registerPassword",type:"password",value:A.password,onChange:R=>S({...A,password:R.target.value}),required:!0,disabled:t,placeholder:"Mínimo 6 caracteres",minLength:6})]}),k.jsxs("div",{className:"form-group",children:[k.jsx("label",{htmlFor:"confirmPassword",children:"Confirmar contraseña:"}),k.jsx("input",{id:"confirmPassword",type:"password",value:A.confirmPassword,onChange:R=>S({...A,confirmPassword:R.target.value}),required:!0,disabled:t,placeholder:"Repite tu contraseña"})]}),k.jsx("button",{type:"submit",className:"auth-button primary",disabled:t,children:t?"Registrando...":"Crear Cuenta"})]}),k.jsx("div",{className:"auth-divider",children:k.jsx("span",{children:"o"})}),k.jsxs("button",{onClick:ne,className:"auth-button google",disabled:t,children:[k.jsx("span",{children:"🔗"}),"Registrarse con Google"]}),k.jsx("div",{className:"auth-actions",children:k.jsx("button",{className:"link-button",onClick:()=>{P(),e("invite")},children:"Usar otro código de invitación"})})]});default:return null}};return k.jsx("div",{className:"auth-container",children:k.jsxs("div",{className:"auth-card",children:[k.jsxs("div",{className:"auth-header",children:[k.jsx("h1",{children:"⛽ Combustibles"}),k.jsx("h2",{children:"Forestech Colombia"}),k.jsxs("p",{children:[n==="login"&&"Sistema de gestión de combustibles",n==="invite"&&"Validar código de invitación",n==="register"&&"Crear nueva cuenta"]})]}),k.jsxs("div",{className:"auth-form",children:[a&&k.jsx("div",{className:"error-message",children:a}),c&&k.jsx("div",{className:"success-message",children:c}),I(),k.jsx("div",{className:"auth-footer",children:k.jsx("p",{children:k.jsxs("small",{children:["Solo usuarios autorizados pueden acceder al sistema.",k.jsx("br",{}),n==="login"?"Contacta al administrador para obtener un código de invitación.":"Si no tienes código, contacta al administrador."]})})})]})]})})},e6=z.lazy(()=>Qr(()=>import("./DashboardMain-CDZwCwXc.js"),[])),t6=z.lazy(()=>Qr(()=>import("./MigrationPageSimple-qfGcE8DZ.js"),__vite__mapDeps([0,1]))),n6=z.lazy(()=>Qr(()=>import("./InventoryMain-DB3wz5yx.js"),__vite__mapDeps([2,3]))),r6=z.lazy(()=>Qr(()=>import("./MovementsMain-D8k85zt8.js"),__vite__mapDeps([4,5,6]))),i6=z.lazy(()=>Qr(()=>import("./VehiclesMain-g3rQ1usn.js"),__vite__mapDeps([7,8]))),s6=z.lazy(()=>Qr(()=>import("./MaintenanceMain-DnpNe0PL.js"),__vite__mapDeps([9,10]))),a6=z.lazy(()=>Qr(()=>import("./ProductsMain-LJSzO79w.js"),__vite__mapDeps([11,5,12]))),o6=z.lazy(()=>Qr(()=>import("./SuppliersMain-DAjPdaYv.js"),__vite__mapDeps([13,14]))),l6=z.lazy(()=>Qr(()=>import("./AdminMain-C22tOqxj.js"),__vite__mapDeps([15,16]))),u6=z.lazy(()=>Qr(()=>import("./ReportsMain-CPiBj22l.js"),__vite__mapDeps([17,18]))),c6=()=>k.jsx("div",{className:"loading-container",children:k.jsxs("div",{className:"loader",children:[k.jsx("div",{className:"spinner"}),k.jsx("p",{children:"Cargando vista..."})]})});function h6(){return k.jsx(u4,{children:k.jsx(H4,{children:k.jsxs(G4,{children:[k.jsx(X4,{isVisible:!1}),k.jsx(f6,{})]})})})}function f6(){const{user:n,loading:e}=fI();return e?k.jsx("div",{className:"loading-container",children:k.jsxs("div",{className:"loader",children:[k.jsx("div",{className:"spinner"}),k.jsx("p",{children:"Cargando..."})]})}):k.jsx("div",{className:"App",children:n?k.jsx(z.Suspense,{fallback:k.jsx(c6,{}),children:k.jsx(FC,{children:k.jsxs(er,{path:"/",element:k.jsx(Z4,{}),children:[k.jsx(er,{index:!0,element:k.jsx(e6,{})}),k.jsx(er,{path:"inventario",element:k.jsx(n6,{})}),k.jsx(er,{path:"movimientos",element:k.jsx(r6,{})}),k.jsx(er,{path:"vehiculos",element:k.jsx(i6,{})}),k.jsx(er,{path:"mantenimiento",element:k.jsx(s6,{})}),k.jsx(er,{path:"productos",element:k.jsx(a6,{})}),k.jsx(er,{path:"proveedores",element:k.jsx(o6,{})}),k.jsx(er,{path:"reportes",element:k.jsx(u6,{})}),k.jsx(er,{path:"migracion",element:k.jsx(t6,{})}),k.jsx(er,{path:"admin",element:k.jsx(l6,{})})]})})}):k.jsx(J4,{})})}K1.createRoot(document.getElementById("root")).render(k.jsx(z.StrictMode,{children:k.jsx(fN,{basename:"/combustibles",children:k.jsx(h6,{})})}));export{IA as $,me as A,Hr as B,Nc as C,Gg as D,St as E,c4 as F,lt as G,kV as H,L6 as I,Ze as J,Ba as K,ja as L,dt as M,U6 as N,Hg as O,r_ as P,x6 as Q,C4 as R,xu as S,V6 as T,uI as U,b_ as V,N4 as W,D4 as X,O4 as Y,Pe as Z,Qr as _,S6 as a,n_ as a0,B6 as a1,j6 as a2,I6 as a3,V4 as a4,q6 as a5,F6 as a6,Yo as a7,p6 as a8,g6 as a9,m6 as aa,y6 as ab,m4 as ac,f4 as ad,w6 as ae,T6 as af,iI as ag,p4 as ah,E6 as ai,T_ as aj,A6 as ak,b6 as al,v6 as am,z6 as an,ba as b,H6 as c,O6 as d,D6 as e,R6 as f,P6 as g,M6 as h,uc as i,k as j,N6 as k,C6 as l,g4 as m,v4 as n,T4 as o,y4 as p,E4 as q,z as r,I4 as s,Bo as t,fI as u,_6 as v,$4 as w,k6 as x,Ie as y,qe as z};
