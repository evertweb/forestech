(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&r(h)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();var np={exports:{}},dc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LE;function Ex(){if(LE)return dc;LE=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,o,l){var h=null;if(l!==void 0&&(h=""+l),o.key!==void 0&&(h=""+o.key),"key"in o){l={};for(var m in o)m!=="key"&&(l[m]=o[m])}else l=o;return o=l.ref,{$$typeof:s,type:r,key:h,ref:o!==void 0?o:null,props:l}}return dc.Fragment=e,dc.jsx=t,dc.jsxs=t,dc}var UE;function Tx(){return UE||(UE=1,np.exports=Ex()),np.exports}var u=Tx(),sp={exports:{}},je={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FE;function bx(){if(FE)return je;FE=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),h=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),b=Symbol.iterator;function A(V){return V===null||typeof V!="object"?null:(V=b&&V[b]||V["@@iterator"],typeof V=="function"?V:null)}var M={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},I=Object.assign,U={};function x(V,ae,de){this.props=V,this.context=ae,this.refs=U,this.updater=de||M}x.prototype.isReactComponent={},x.prototype.setState=function(V,ae){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,ae,"setState")},x.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function $(){}$.prototype=x.prototype;function W(V,ae,de){this.props=V,this.context=ae,this.refs=U,this.updater=de||M}var K=W.prototype=new $;K.constructor=W,I(K,x.prototype),K.isPureReactComponent=!0;var J=Array.isArray,q={H:null,A:null,T:null,S:null,V:null},oe=Object.prototype.hasOwnProperty;function O(V,ae,de,le,_e,Me){return de=Me.ref,{$$typeof:s,type:V,key:ae,ref:de!==void 0?de:null,props:Me}}function S(V,ae){return O(V.type,ae,void 0,void 0,void 0,V.props)}function R(V){return typeof V=="object"&&V!==null&&V.$$typeof===s}function D(V){var ae={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(de){return ae[de]})}var k=/\/+/g;function C(V,ae){return typeof V=="object"&&V!==null&&V.key!=null?D(""+V.key):ae.toString(36)}function j(){}function Ce(V){switch(V.status){case"fulfilled":return V.value;case"rejected":throw V.reason;default:switch(typeof V.status=="string"?V.then(j,j):(V.status="pending",V.then(function(ae){V.status==="pending"&&(V.status="fulfilled",V.value=ae)},function(ae){V.status==="pending"&&(V.status="rejected",V.reason=ae)})),V.status){case"fulfilled":return V.value;case"rejected":throw V.reason}}throw V}function $e(V,ae,de,le,_e){var Me=typeof V;(Me==="undefined"||Me==="boolean")&&(V=null);var xe=!1;if(V===null)xe=!0;else switch(Me){case"bigint":case"string":case"number":xe=!0;break;case"object":switch(V.$$typeof){case s:case e:xe=!0;break;case _:return xe=V._init,$e(xe(V._payload),ae,de,le,_e)}}if(xe)return _e=_e(V),xe=le===""?"."+C(V,0):le,J(_e)?(de="",xe!=null&&(de=xe.replace(k,"$&/")+"/"),$e(_e,ae,de,"",function(_s){return _s})):_e!=null&&(R(_e)&&(_e=S(_e,de+(_e.key==null||V&&V.key===_e.key?"":(""+_e.key).replace(k,"$&/")+"/")+xe)),ae.push(_e)),1;xe=0;var Lt=le===""?".":le+":";if(J(V))for(var at=0;at<V.length;at++)le=V[at],Me=Lt+C(le,at),xe+=$e(le,ae,de,Me,_e);else if(at=A(V),typeof at=="function")for(V=at.call(V),at=0;!(le=V.next()).done;)le=le.value,Me=Lt+C(le,at++),xe+=$e(le,ae,de,Me,_e);else if(Me==="object"){if(typeof V.then=="function")return $e(Ce(V),ae,de,le,_e);throw ae=String(V),Error("Objects are not valid as a React child (found: "+(ae==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":ae)+"). If you meant to render a collection of children, use an array instead.")}return xe}function X(V,ae,de){if(V==null)return V;var le=[],_e=0;return $e(V,le,"","",function(Me){return ae.call(de,Me,_e++)}),le}function re(V){if(V._status===-1){var ae=V._result;ae=ae(),ae.then(function(de){(V._status===0||V._status===-1)&&(V._status=1,V._result=de)},function(de){(V._status===0||V._status===-1)&&(V._status=2,V._result=de)}),V._status===-1&&(V._status=0,V._result=ae)}if(V._status===1)return V._result.default;throw V._result}var ue=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ae=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent(ae))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",V);return}console.error(V)};function ye(){}return je.Children={map:X,forEach:function(V,ae,de){X(V,function(){ae.apply(this,arguments)},de)},count:function(V){var ae=0;return X(V,function(){ae++}),ae},toArray:function(V){return X(V,function(ae){return ae})||[]},only:function(V){if(!R(V))throw Error("React.Children.only expected to receive a single React element child.");return V}},je.Component=x,je.Fragment=t,je.Profiler=o,je.PureComponent=W,je.StrictMode=r,je.Suspense=g,je.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=q,je.__COMPILER_RUNTIME={__proto__:null,c:function(V){return q.H.useMemoCache(V)}},je.cache=function(V){return function(){return V.apply(null,arguments)}},je.cloneElement=function(V,ae,de){if(V==null)throw Error("The argument must be a React element, but you passed "+V+".");var le=I({},V.props),_e=V.key,Me=void 0;if(ae!=null)for(xe in ae.ref!==void 0&&(Me=void 0),ae.key!==void 0&&(_e=""+ae.key),ae)!oe.call(ae,xe)||xe==="key"||xe==="__self"||xe==="__source"||xe==="ref"&&ae.ref===void 0||(le[xe]=ae[xe]);var xe=arguments.length-2;if(xe===1)le.children=de;else if(1<xe){for(var Lt=Array(xe),at=0;at<xe;at++)Lt[at]=arguments[at+2];le.children=Lt}return O(V.type,_e,void 0,void 0,Me,le)},je.createContext=function(V){return V={$$typeof:h,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider=V,V.Consumer={$$typeof:l,_context:V},V},je.createElement=function(V,ae,de){var le,_e={},Me=null;if(ae!=null)for(le in ae.key!==void 0&&(Me=""+ae.key),ae)oe.call(ae,le)&&le!=="key"&&le!=="__self"&&le!=="__source"&&(_e[le]=ae[le]);var xe=arguments.length-2;if(xe===1)_e.children=de;else if(1<xe){for(var Lt=Array(xe),at=0;at<xe;at++)Lt[at]=arguments[at+2];_e.children=Lt}if(V&&V.defaultProps)for(le in xe=V.defaultProps,xe)_e[le]===void 0&&(_e[le]=xe[le]);return O(V,Me,void 0,void 0,null,_e)},je.createRef=function(){return{current:null}},je.forwardRef=function(V){return{$$typeof:m,render:V}},je.isValidElement=R,je.lazy=function(V){return{$$typeof:_,_payload:{_status:-1,_result:V},_init:re}},je.memo=function(V,ae){return{$$typeof:v,type:V,compare:ae===void 0?null:ae}},je.startTransition=function(V){var ae=q.T,de={};q.T=de;try{var le=V(),_e=q.S;_e!==null&&_e(de,le),typeof le=="object"&&le!==null&&typeof le.then=="function"&&le.then(ye,ue)}catch(Me){ue(Me)}finally{q.T=ae}},je.unstable_useCacheRefresh=function(){return q.H.useCacheRefresh()},je.use=function(V){return q.H.use(V)},je.useActionState=function(V,ae,de){return q.H.useActionState(V,ae,de)},je.useCallback=function(V,ae){return q.H.useCallback(V,ae)},je.useContext=function(V){return q.H.useContext(V)},je.useDebugValue=function(){},je.useDeferredValue=function(V,ae){return q.H.useDeferredValue(V,ae)},je.useEffect=function(V,ae,de){var le=q.H;if(typeof de=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return le.useEffect(V,ae)},je.useId=function(){return q.H.useId()},je.useImperativeHandle=function(V,ae,de){return q.H.useImperativeHandle(V,ae,de)},je.useInsertionEffect=function(V,ae){return q.H.useInsertionEffect(V,ae)},je.useLayoutEffect=function(V,ae){return q.H.useLayoutEffect(V,ae)},je.useMemo=function(V,ae){return q.H.useMemo(V,ae)},je.useOptimistic=function(V,ae){return q.H.useOptimistic(V,ae)},je.useReducer=function(V,ae,de){return q.H.useReducer(V,ae,de)},je.useRef=function(V){return q.H.useRef(V)},je.useState=function(V){return q.H.useState(V)},je.useSyncExternalStore=function(V,ae,de){return q.H.useSyncExternalStore(V,ae,de)},je.useTransition=function(){return q.H.useTransition()},je.version="19.1.0",je}var qE;function og(){return qE||(qE=1,sp.exports=bx()),sp.exports}var ie=og(),ip={exports:{}},hc={},rp={exports:{}},ap={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zE;function Ax(){return zE||(zE=1,function(s){function e(X,re){var ue=X.length;X.push(re);e:for(;0<ue;){var ye=ue-1>>>1,V=X[ye];if(0<o(V,re))X[ye]=re,X[ue]=V,ue=ye;else break e}}function t(X){return X.length===0?null:X[0]}function r(X){if(X.length===0)return null;var re=X[0],ue=X.pop();if(ue!==re){X[0]=ue;e:for(var ye=0,V=X.length,ae=V>>>1;ye<ae;){var de=2*(ye+1)-1,le=X[de],_e=de+1,Me=X[_e];if(0>o(le,ue))_e<V&&0>o(Me,le)?(X[ye]=Me,X[_e]=ue,ye=_e):(X[ye]=le,X[de]=ue,ye=de);else if(_e<V&&0>o(Me,ue))X[ye]=Me,X[_e]=ue,ye=_e;else break e}}return re}function o(X,re){var ue=X.sortIndex-re.sortIndex;return ue!==0?ue:X.id-re.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;s.unstable_now=function(){return l.now()}}else{var h=Date,m=h.now();s.unstable_now=function(){return h.now()-m}}var g=[],v=[],_=1,b=null,A=3,M=!1,I=!1,U=!1,x=!1,$=typeof setTimeout=="function"?setTimeout:null,W=typeof clearTimeout=="function"?clearTimeout:null,K=typeof setImmediate<"u"?setImmediate:null;function J(X){for(var re=t(v);re!==null;){if(re.callback===null)r(v);else if(re.startTime<=X)r(v),re.sortIndex=re.expirationTime,e(g,re);else break;re=t(v)}}function q(X){if(U=!1,J(X),!I)if(t(g)!==null)I=!0,oe||(oe=!0,C());else{var re=t(v);re!==null&&$e(q,re.startTime-X)}}var oe=!1,O=-1,S=5,R=-1;function D(){return x?!0:!(s.unstable_now()-R<S)}function k(){if(x=!1,oe){var X=s.unstable_now();R=X;var re=!0;try{e:{I=!1,U&&(U=!1,W(O),O=-1),M=!0;var ue=A;try{t:{for(J(X),b=t(g);b!==null&&!(b.expirationTime>X&&D());){var ye=b.callback;if(typeof ye=="function"){b.callback=null,A=b.priorityLevel;var V=ye(b.expirationTime<=X);if(X=s.unstable_now(),typeof V=="function"){b.callback=V,J(X),re=!0;break t}b===t(g)&&r(g),J(X)}else r(g);b=t(g)}if(b!==null)re=!0;else{var ae=t(v);ae!==null&&$e(q,ae.startTime-X),re=!1}}break e}finally{b=null,A=ue,M=!1}re=void 0}}finally{re?C():oe=!1}}}var C;if(typeof K=="function")C=function(){K(k)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,Ce=j.port2;j.port1.onmessage=k,C=function(){Ce.postMessage(null)}}else C=function(){$(k,0)};function $e(X,re){O=$(function(){X(s.unstable_now())},re)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(X){X.callback=null},s.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<X?Math.floor(1e3/X):5},s.unstable_getCurrentPriorityLevel=function(){return A},s.unstable_next=function(X){switch(A){case 1:case 2:case 3:var re=3;break;default:re=A}var ue=A;A=re;try{return X()}finally{A=ue}},s.unstable_requestPaint=function(){x=!0},s.unstable_runWithPriority=function(X,re){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var ue=A;A=X;try{return re()}finally{A=ue}},s.unstable_scheduleCallback=function(X,re,ue){var ye=s.unstable_now();switch(typeof ue=="object"&&ue!==null?(ue=ue.delay,ue=typeof ue=="number"&&0<ue?ye+ue:ye):ue=ye,X){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=ue+V,X={id:_++,callback:re,priorityLevel:X,startTime:ue,expirationTime:V,sortIndex:-1},ue>ye?(X.sortIndex=ue,e(v,X),t(g)===null&&X===t(v)&&(U?(W(O),O=-1):U=!0,$e(q,ue-ye))):(X.sortIndex=V,e(g,X),I||M||(I=!0,oe||(oe=!0,C()))),X},s.unstable_shouldYield=D,s.unstable_wrapCallback=function(X){var re=A;return function(){var ue=A;A=re;try{return X.apply(this,arguments)}finally{A=ue}}}}(ap)),ap}var BE;function Nx(){return BE||(BE=1,rp.exports=Ax()),rp.exports}var op={exports:{}},on={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HE;function Sx(){if(HE)return on;HE=1;var s=og();function e(g){var v="https://react.dev/errors/"+g;if(1<arguments.length){v+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)v+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+g+"; visit "+v+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function l(g,v,_){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:b==null?null:""+b,children:g,containerInfo:v,implementation:_}}var h=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(g,v){if(g==="font")return"";if(typeof v=="string")return v==="use-credentials"?v:""}return on.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,on.createPortal=function(g,v){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!v||v.nodeType!==1&&v.nodeType!==9&&v.nodeType!==11)throw Error(e(299));return l(g,v,null,_)},on.flushSync=function(g){var v=h.T,_=r.p;try{if(h.T=null,r.p=2,g)return g()}finally{h.T=v,r.p=_,r.d.f()}},on.preconnect=function(g,v){typeof g=="string"&&(v?(v=v.crossOrigin,v=typeof v=="string"?v==="use-credentials"?v:"":void 0):v=null,r.d.C(g,v))},on.prefetchDNS=function(g){typeof g=="string"&&r.d.D(g)},on.preinit=function(g,v){if(typeof g=="string"&&v&&typeof v.as=="string"){var _=v.as,b=m(_,v.crossOrigin),A=typeof v.integrity=="string"?v.integrity:void 0,M=typeof v.fetchPriority=="string"?v.fetchPriority:void 0;_==="style"?r.d.S(g,typeof v.precedence=="string"?v.precedence:void 0,{crossOrigin:b,integrity:A,fetchPriority:M}):_==="script"&&r.d.X(g,{crossOrigin:b,integrity:A,fetchPriority:M,nonce:typeof v.nonce=="string"?v.nonce:void 0})}},on.preinitModule=function(g,v){if(typeof g=="string")if(typeof v=="object"&&v!==null){if(v.as==null||v.as==="script"){var _=m(v.as,v.crossOrigin);r.d.M(g,{crossOrigin:_,integrity:typeof v.integrity=="string"?v.integrity:void 0,nonce:typeof v.nonce=="string"?v.nonce:void 0})}}else v==null&&r.d.M(g)},on.preload=function(g,v){if(typeof g=="string"&&typeof v=="object"&&v!==null&&typeof v.as=="string"){var _=v.as,b=m(_,v.crossOrigin);r.d.L(g,_,{crossOrigin:b,integrity:typeof v.integrity=="string"?v.integrity:void 0,nonce:typeof v.nonce=="string"?v.nonce:void 0,type:typeof v.type=="string"?v.type:void 0,fetchPriority:typeof v.fetchPriority=="string"?v.fetchPriority:void 0,referrerPolicy:typeof v.referrerPolicy=="string"?v.referrerPolicy:void 0,imageSrcSet:typeof v.imageSrcSet=="string"?v.imageSrcSet:void 0,imageSizes:typeof v.imageSizes=="string"?v.imageSizes:void 0,media:typeof v.media=="string"?v.media:void 0})}},on.preloadModule=function(g,v){if(typeof g=="string")if(v){var _=m(v.as,v.crossOrigin);r.d.m(g,{as:typeof v.as=="string"&&v.as!=="script"?v.as:void 0,crossOrigin:_,integrity:typeof v.integrity=="string"?v.integrity:void 0})}else r.d.m(g)},on.requestFormReset=function(g){r.d.r(g)},on.unstable_batchedUpdates=function(g,v){return g(v)},on.useFormState=function(g,v,_){return h.H.useFormState(g,v,_)},on.useFormStatus=function(){return h.H.useHostTransitionStatus()},on.version="19.1.0",on}var GE;function wx(){if(GE)return op.exports;GE=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),op.exports=Sx(),op.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $E;function xx(){if($E)return hc;$E=1;var s=Nx(),e=og(),t=wx();function r(n){var i="https://react.dev/errors/"+n;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var i=n,a=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(a=i.return),n=i.return;while(n)}return i.tag===3?a:null}function h(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function m(n){if(l(n)!==n)throw Error(r(188))}function g(n){var i=n.alternate;if(!i){if(i=l(n),i===null)throw Error(r(188));return i!==n?null:n}for(var a=n,c=i;;){var f=a.return;if(f===null)break;var p=f.alternate;if(p===null){if(c=f.return,c!==null){a=c;continue}break}if(f.child===p.child){for(p=f.child;p;){if(p===a)return m(f),n;if(p===c)return m(f),i;p=p.sibling}throw Error(r(188))}if(a.return!==c.return)a=f,c=p;else{for(var T=!1,N=f.child;N;){if(N===a){T=!0,a=f,c=p;break}if(N===c){T=!0,c=f,a=p;break}N=N.sibling}if(!T){for(N=p.child;N;){if(N===a){T=!0,a=p,c=f;break}if(N===c){T=!0,c=p,a=f;break}N=N.sibling}if(!T)throw Error(r(189))}}if(a.alternate!==c)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?n:i}function v(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n;for(n=n.child;n!==null;){if(i=v(n),i!==null)return i;n=n.sibling}return null}var _=Object.assign,b=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),M=Symbol.for("react.portal"),I=Symbol.for("react.fragment"),U=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),$=Symbol.for("react.provider"),W=Symbol.for("react.consumer"),K=Symbol.for("react.context"),J=Symbol.for("react.forward_ref"),q=Symbol.for("react.suspense"),oe=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),D=Symbol.for("react.memo_cache_sentinel"),k=Symbol.iterator;function C(n){return n===null||typeof n!="object"?null:(n=k&&n[k]||n["@@iterator"],typeof n=="function"?n:null)}var j=Symbol.for("react.client.reference");function Ce(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===j?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case I:return"Fragment";case x:return"Profiler";case U:return"StrictMode";case q:return"Suspense";case oe:return"SuspenseList";case R:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case M:return"Portal";case K:return(n.displayName||"Context")+".Provider";case W:return(n._context.displayName||"Context")+".Consumer";case J:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case O:return i=n.displayName||null,i!==null?i:Ce(n.type)||"Memo";case S:i=n._payload,n=n._init;try{return Ce(n(i))}catch{}}return null}var $e=Array.isArray,X=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ue={pending:!1,data:null,method:null,action:null},ye=[],V=-1;function ae(n){return{current:n}}function de(n){0>V||(n.current=ye[V],ye[V]=null,V--)}function le(n,i){V++,ye[V]=n.current,n.current=i}var _e=ae(null),Me=ae(null),xe=ae(null),Lt=ae(null);function at(n,i){switch(le(xe,i),le(Me,n),le(_e,null),i.nodeType){case 9:case 11:n=(n=i.documentElement)&&(n=n.namespaceURI)?hE(n):0;break;default:if(n=i.tagName,i=i.namespaceURI)i=hE(i),n=fE(i,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}de(_e),le(_e,n)}function _s(){de(_e),de(Me),de(xe)}function Si(n){n.memoizedState!==null&&le(Lt,n);var i=_e.current,a=fE(i,n.type);i!==a&&(le(Me,n),le(_e,a))}function Hs(n){Me.current===n&&(de(_e),de(Me)),Lt.current===n&&(de(Lt),ac._currentValue=ue)}var Cr=Object.prototype.hasOwnProperty,Rr=s.unstable_scheduleCallback,jr=s.unstable_cancelCallback,sl=s.unstable_shouldYield,lu=s.unstable_requestPaint,zn=s.unstable_now,tf=s.unstable_getCurrentPriorityLevel,il=s.unstable_ImmediatePriority,Ra=s.unstable_UserBlockingPriority,Dr=s.unstable_NormalPriority,nf=s.unstable_LowPriority,ja=s.unstable_IdlePriority,rl=s.log,cu=s.unstable_setDisableYieldValue,pt=null,Xe=null;function In(n){if(typeof rl=="function"&&cu(n),Xe&&typeof Xe.setStrictMode=="function")try{Xe.setStrictMode(pt,n)}catch{}}var rn=Math.clz32?Math.clz32:Or,uu=Math.log,sf=Math.LN2;function Or(n){return n>>>=0,n===0?32:31-(uu(n)/sf|0)|0}var Mr=256,Pr=4194304;function is(n){var i=n&42;if(i!==0)return i;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Da(n,i,a){var c=n.pendingLanes;if(c===0)return 0;var f=0,p=n.suspendedLanes,T=n.pingedLanes;n=n.warmLanes;var N=c&134217727;return N!==0?(c=N&~p,c!==0?f=is(c):(T&=N,T!==0?f=is(T):a||(a=N&~n,a!==0&&(f=is(a))))):(N=c&~p,N!==0?f=is(N):T!==0?f=is(T):a||(a=c&~n,a!==0&&(f=is(a)))),f===0?0:i!==0&&i!==f&&(i&p)===0&&(p=f&-f,a=i&-i,p>=a||p===32&&(a&4194048)!==0)?i:f}function kr(n,i){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&i)===0}function al(n,i){switch(n){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ol(){var n=Mr;return Mr<<=1,(Mr&4194048)===0&&(Mr=256),n}function ll(){var n=Pr;return Pr<<=1,(Pr&62914560)===0&&(Pr=4194304),n}function Gs(n){for(var i=[],a=0;31>a;a++)i.push(n);return i}function $s(n,i){n.pendingLanes|=i,i!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function cl(n,i,a,c,f,p){var T=n.pendingLanes;n.pendingLanes=a,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=a,n.entangledLanes&=a,n.errorRecoveryDisabledLanes&=a,n.shellSuspendCounter=0;var N=n.entanglements,P=n.expirationTimes,H=n.hiddenUpdates;for(a=T&~a;0<a;){var Z=31-rn(a),ne=1<<Z;N[Z]=0,P[Z]=-1;var G=H[Z];if(G!==null)for(H[Z]=null,Z=0;Z<G.length;Z++){var Y=G[Z];Y!==null&&(Y.lane&=-536870913)}a&=~ne}c!==0&&Es(n,c,0),p!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=p&~(T&~i))}function Es(n,i,a){n.pendingLanes|=i,n.suspendedLanes&=~i;var c=31-rn(i);n.entangledLanes|=i,n.entanglements[c]=n.entanglements[c]|1073741824|a&4194090}function ul(n,i){var a=n.entangledLanes|=i;for(n=n.entanglements;a;){var c=31-rn(a),f=1<<c;f&i|n[c]&i&&(n[c]|=i),a&=~f}}function wi(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function Oa(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function xi(){var n=re.p;return n!==0?n:(n=window.event,n===void 0?32:DE(n.type))}function du(n,i){var a=re.p;try{return re.p=n,i()}finally{re.p=a}}var ct=Math.random().toString(36).slice(2),Ct="__reactFiber$"+ct,At="__reactProps$"+ct,Bn="__reactContainer$"+ct,dl="__reactEvents$"+ct,rf="__reactListeners$"+ct,Ii="__reactHandles$"+ct,hu="__reactResources$"+ct,Vr="__reactMarker$"+ct;function Ci(n){delete n[Ct],delete n[At],delete n[dl],delete n[rf],delete n[Ii]}function Ks(n){var i=n[Ct];if(i)return i;for(var a=n.parentNode;a;){if(i=a[Bn]||a[Ct]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(n=vE(n);n!==null;){if(a=n[Ct])return a;n=vE(n)}return i}n=a,a=n.parentNode}return null}function Ts(n){if(n=n[Ct]||n[Bn]){var i=n.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return n}return null}function bs(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n.stateNode;throw Error(r(33))}function fn(n){var i=n[hu];return i||(i=n[hu]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function _t(n){n[Vr]=!0}var hl=new Set,Ma={};function rs(n,i){Ys(n,i),Ys(n+"Capture",i)}function Ys(n,i){for(Ma[n]=i,n=0;n<i.length;n++)hl.add(i[n])}var fu=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),mu={},Lr={};function pu(n){return Cr.call(Lr,n)?!0:Cr.call(mu,n)?!1:fu.test(n)?Lr[n]=!0:(mu[n]=!0,!1)}function Ri(n,i,a){if(pu(i))if(a===null)n.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":n.removeAttribute(i);return;case"boolean":var c=i.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){n.removeAttribute(i);return}}n.setAttribute(i,""+a)}}function As(n,i,a){if(a===null)n.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(i);return}n.setAttribute(i,""+a)}}function $t(n,i,a,c){if(c===null)n.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(a);return}n.setAttributeNS(i,a,""+c)}}var Ur,gu;function Qs(n){if(Ur===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);Ur=i&&i[1]||"",gu=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ur+n+gu}var Pa=!1;function ka(n,i){if(!n||Pa)return"";Pa=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(i){var ne=function(){throw Error()};if(Object.defineProperty(ne.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ne,[])}catch(Y){var G=Y}Reflect.construct(n,[],ne)}else{try{ne.call()}catch(Y){G=Y}n.call(ne.prototype)}}else{try{throw Error()}catch(Y){G=Y}(ne=n())&&typeof ne.catch=="function"&&ne.catch(function(){})}}catch(Y){if(Y&&G&&typeof Y.stack=="string")return[Y.stack,G.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=c.DetermineComponentFrameRoot(),T=p[0],N=p[1];if(T&&N){var P=T.split(`
`),H=N.split(`
`);for(f=c=0;c<P.length&&!P[c].includes("DetermineComponentFrameRoot");)c++;for(;f<H.length&&!H[f].includes("DetermineComponentFrameRoot");)f++;if(c===P.length||f===H.length)for(c=P.length-1,f=H.length-1;1<=c&&0<=f&&P[c]!==H[f];)f--;for(;1<=c&&0<=f;c--,f--)if(P[c]!==H[f]){if(c!==1||f!==1)do if(c--,f--,0>f||P[c]!==H[f]){var Z=`
`+P[c].replace(" at new "," at ");return n.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",n.displayName)),Z}while(1<=c&&0<=f);break}}}finally{Pa=!1,Error.prepareStackTrace=a}return(a=n?n.displayName||n.name:"")?Qs(a):""}function fl(n){switch(n.tag){case 26:case 27:case 5:return Qs(n.type);case 16:return Qs("Lazy");case 13:return Qs("Suspense");case 19:return Qs("SuspenseList");case 0:case 15:return ka(n.type,!1);case 11:return ka(n.type.render,!1);case 1:return ka(n.type,!0);case 31:return Qs("Activity");default:return""}}function Va(n){try{var i="";do i+=fl(n),n=n.return;while(n);return i}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function mn(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function ml(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function af(n){var i=ml(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,i),c=""+n[i];if(!n.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var f=a.get,p=a.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return f.call(this)},set:function(T){c=""+T,p.call(this,T)}}),Object.defineProperty(n,i,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(T){c=""+T},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function La(n){n._valueTracker||(n._valueTracker=af(n))}function pl(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var a=i.getValue(),c="";return n&&(c=ml(n)?n.checked?"true":"false":n.value),n=c,n!==a?(i.setValue(n),!0):!1}function Fr(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var of=/[\n"\\]/g;function Nt(n){return n.replace(of,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Cn(n,i,a,c,f,p,T,N){n.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?n.type=T:n.removeAttribute("type"),i!=null?T==="number"?(i===0&&n.value===""||n.value!=i)&&(n.value=""+mn(i)):n.value!==""+mn(i)&&(n.value=""+mn(i)):T!=="submit"&&T!=="reset"||n.removeAttribute("value"),i!=null?ji(n,T,mn(i)):a!=null?ji(n,T,mn(a)):c!=null&&n.removeAttribute("value"),f==null&&p!=null&&(n.defaultChecked=!!p),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"?n.name=""+mn(N):n.removeAttribute("name")}function qr(n,i,a,c,f,p,T,N){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(n.type=p),i!=null||a!=null){if(!(p!=="submit"&&p!=="reset"||i!=null))return;a=a!=null?""+mn(a):"",i=i!=null?""+mn(i):a,N||i===n.value||(n.value=i),n.defaultValue=i}c=c??f,c=typeof c!="function"&&typeof c!="symbol"&&!!c,n.checked=N?n.checked:!!c,n.defaultChecked=!!c,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(n.name=T)}function ji(n,i,a){i==="number"&&Fr(n.ownerDocument)===n||n.defaultValue===""+a||(n.defaultValue=""+a)}function Xs(n,i,a,c){if(n=n.options,i){i={};for(var f=0;f<a.length;f++)i["$"+a[f]]=!0;for(a=0;a<n.length;a++)f=i.hasOwnProperty("$"+n[a].value),n[a].selected!==f&&(n[a].selected=f),f&&c&&(n[a].defaultSelected=!0)}else{for(a=""+mn(a),i=null,f=0;f<n.length;f++){if(n[f].value===a){n[f].selected=!0,c&&(n[f].defaultSelected=!0);return}i!==null||n[f].disabled||(i=n[f])}i!==null&&(i.selected=!0)}}function Je(n,i,a){if(i!=null&&(i=""+mn(i),i!==n.value&&(n.value=i),a==null)){n.defaultValue!==i&&(n.defaultValue=i);return}n.defaultValue=a!=null?""+mn(a):""}function zr(n,i,a,c){if(i==null){if(c!=null){if(a!=null)throw Error(r(92));if($e(c)){if(1<c.length)throw Error(r(93));c=c[0]}a=c}a==null&&(a=""),i=a}a=mn(i),n.defaultValue=a,c=n.textContent,c===a&&c!==""&&c!==null&&(n.value=c)}function Hn(n,i){if(i){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=i;return}}n.textContent=i}var Br=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function vu(n,i,a){var c=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?c?n.setProperty(i,""):i==="float"?n.cssFloat="":n[i]="":c?n.setProperty(i,a):typeof a!="number"||a===0||Br.has(i)?i==="float"?n.cssFloat=a:n[i]=(""+a).trim():n[i]=a+"px"}function gl(n,i,a){if(i!=null&&typeof i!="object")throw Error(r(62));if(n=n.style,a!=null){for(var c in a)!a.hasOwnProperty(c)||i!=null&&i.hasOwnProperty(c)||(c.indexOf("--")===0?n.setProperty(c,""):c==="float"?n.cssFloat="":n[c]="");for(var f in i)c=i[f],i.hasOwnProperty(f)&&a[f]!==c&&vu(n,f,c)}else for(var p in i)i.hasOwnProperty(p)&&vu(n,p,i[p])}function vl(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var lf=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),cf=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ua(n){return cf.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var Ws=null;function Gn(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Zs=null,Js=null;function yl(n){var i=Ts(n);if(i&&(n=i.stateNode)){var a=n[At]||null;e:switch(n=i.stateNode,i.type){case"input":if(Cn(n,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Nt(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var c=a[i];if(c!==n&&c.form===n.form){var f=c[At]||null;if(!f)throw Error(r(90));Cn(c,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<a.length;i++)c=a[i],c.form===n.form&&pl(c)}break e;case"textarea":Je(n,a.value,a.defaultValue);break e;case"select":i=a.value,i!=null&&Xs(n,!!a.multiple,i,!1)}}}var Ns=!1;function yu(n,i,a){if(Ns)return n(i,a);Ns=!0;try{var c=n(i);return c}finally{if(Ns=!1,(Zs!==null||Js!==null)&&(dd(),Zs&&(i=Zs,n=Js,Js=Zs=null,yl(i),n)))for(i=0;i<n.length;i++)yl(n[i])}}function Hr(n,i){var a=n.stateNode;if(a===null)return null;var c=a[At]||null;if(c===null)return null;a=c[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(r(231,i,typeof a));return a}var as=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$n=!1;if(as)try{var Gr={};Object.defineProperty(Gr,"passive",{get:function(){$n=!0}}),window.addEventListener("test",Gr,Gr),window.removeEventListener("test",Gr,Gr)}catch{$n=!1}var Ss=null,Di=null,ei=null;function _l(){if(ei)return ei;var n,i=Di,a=i.length,c,f="value"in Ss?Ss.value:Ss.textContent,p=f.length;for(n=0;n<a&&i[n]===f[n];n++);var T=a-n;for(c=1;c<=T&&i[a-c]===f[p-c];c++);return ei=f.slice(n,1<c?1-c:void 0)}function ws(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function xs(){return!0}function El(){return!1}function Ut(n){function i(a,c,f,p,T){this._reactName=a,this._targetInst=f,this.type=c,this.nativeEvent=p,this.target=T,this.currentTarget=null;for(var N in n)n.hasOwnProperty(N)&&(a=n[N],this[N]=a?a(p):p[N]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?xs:El,this.isPropagationStopped=El,this}return _(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=xs)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=xs)},persist:function(){},isPersistent:xs}),i}var Qe={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Fa=Ut(Qe),$r=_({},Qe,{view:0,detail:0}),_u=Ut($r),qa,za,Is,Kr=_({},$r,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xr,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Is&&(Is&&n.type==="mousemove"?(qa=n.screenX-Is.screenX,za=n.screenY-Is.screenY):za=qa=0,Is=n),qa)},movementY:function(n){return"movementY"in n?n.movementY:za}}),Kn=Ut(Kr),Eu=_({},Kr,{dataTransfer:0}),uf=Ut(Eu),Yr=_({},$r,{relatedTarget:0}),Ba=Ut(Yr),Tl=_({},Qe,{animationName:0,elapsedTime:0,pseudoElement:0}),Ha=Ut(Tl),Tu=_({},Qe,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Ga=Ut(Tu),df=_({},Qe,{data:0}),bl=Ut(df),Qr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Au={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Al(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=Au[n])?!!i[n]:!1}function Xr(){return Al}var Nu=_({},$r,{key:function(n){if(n.key){var i=Qr[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=ws(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?bu[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xr,charCode:function(n){return n.type==="keypress"?ws(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?ws(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),$a=Ut(Nu),Su=_({},Kr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Nl=Ut(Su),ti=_({},$r,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xr}),wu=Ut(ti),xu=_({},Qe,{propertyName:0,elapsedTime:0,pseudoElement:0}),Iu=Ut(xu),Cu=_({},Kr,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Ka=Ut(Cu),pn=_({},Qe,{newState:0,oldState:0}),Ru=Ut(pn),ju=[9,13,27,32],Cs=as&&"CompositionEvent"in window,d=null;as&&"documentMode"in document&&(d=document.documentMode);var y=as&&"TextEvent"in window&&!d,E=as&&(!Cs||d&&8<d&&11>=d),w=" ",z=!1;function Q(n,i){switch(n){case"keyup":return ju.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ce(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var qe=!1;function Rt(n,i){switch(n){case"compositionend":return ce(i);case"keypress":return i.which!==32?null:(z=!0,w);case"textInput":return n=i.data,n===w&&z?null:n;default:return null}}function ze(n,i){if(qe)return n==="compositionend"||!Cs&&Q(n,i)?(n=_l(),ei=Di=Ss=null,qe=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return E&&i.locale!=="ko"?null:i.data;default:return null}}var Ft={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jt(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!Ft[n.type]:i==="textarea"}function ni(n,i,a,c){Zs?Js?Js.push(c):Js=[c]:Zs=c,i=vd(i,"onChange"),0<i.length&&(a=new Fa("onChange","change",null,a,c),n.push({event:a,listeners:i}))}var Kt=null,Rs=null;function Sl(n){oE(n,0)}function Du(n){var i=bs(n);if(pl(i))return n}function Iv(n,i){if(n==="change")return i}var Cv=!1;if(as){var hf;if(as){var ff="oninput"in document;if(!ff){var Rv=document.createElement("div");Rv.setAttribute("oninput","return;"),ff=typeof Rv.oninput=="function"}hf=ff}else hf=!1;Cv=hf&&(!document.documentMode||9<document.documentMode)}function jv(){Kt&&(Kt.detachEvent("onpropertychange",Dv),Rs=Kt=null)}function Dv(n){if(n.propertyName==="value"&&Du(Rs)){var i=[];ni(i,Rs,n,Gn(n)),yu(Sl,i)}}function XS(n,i,a){n==="focusin"?(jv(),Kt=i,Rs=a,Kt.attachEvent("onpropertychange",Dv)):n==="focusout"&&jv()}function WS(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Du(Rs)}function ZS(n,i){if(n==="click")return Du(i)}function JS(n,i){if(n==="input"||n==="change")return Du(i)}function ew(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var Rn=typeof Object.is=="function"?Object.is:ew;function wl(n,i){if(Rn(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var a=Object.keys(n),c=Object.keys(i);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var f=a[c];if(!Cr.call(i,f)||!Rn(n[f],i[f]))return!1}return!0}function Ov(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Mv(n,i){var a=Ov(n);n=0;for(var c;a;){if(a.nodeType===3){if(c=n+a.textContent.length,n<=i&&c>=i)return{node:a,offset:i-n};n=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Ov(a)}}function Pv(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?Pv(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function kv(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var i=Fr(n.document);i instanceof n.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)n=i.contentWindow;else break;i=Fr(n.document)}return i}function mf(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}var tw=as&&"documentMode"in document&&11>=document.documentMode,Ya=null,pf=null,xl=null,gf=!1;function Vv(n,i,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;gf||Ya==null||Ya!==Fr(c)||(c=Ya,"selectionStart"in c&&mf(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),xl&&wl(xl,c)||(xl=c,c=vd(pf,"onSelect"),0<c.length&&(i=new Fa("onSelect","select",null,i,a),n.push({event:i,listeners:c}),i.target=Ya)))}function Wr(n,i){var a={};return a[n.toLowerCase()]=i.toLowerCase(),a["Webkit"+n]="webkit"+i,a["Moz"+n]="moz"+i,a}var Qa={animationend:Wr("Animation","AnimationEnd"),animationiteration:Wr("Animation","AnimationIteration"),animationstart:Wr("Animation","AnimationStart"),transitionrun:Wr("Transition","TransitionRun"),transitionstart:Wr("Transition","TransitionStart"),transitioncancel:Wr("Transition","TransitionCancel"),transitionend:Wr("Transition","TransitionEnd")},vf={},Lv={};as&&(Lv=document.createElement("div").style,"AnimationEvent"in window||(delete Qa.animationend.animation,delete Qa.animationiteration.animation,delete Qa.animationstart.animation),"TransitionEvent"in window||delete Qa.transitionend.transition);function Zr(n){if(vf[n])return vf[n];if(!Qa[n])return n;var i=Qa[n],a;for(a in i)if(i.hasOwnProperty(a)&&a in Lv)return vf[n]=i[a];return n}var Uv=Zr("animationend"),Fv=Zr("animationiteration"),qv=Zr("animationstart"),nw=Zr("transitionrun"),sw=Zr("transitionstart"),iw=Zr("transitioncancel"),zv=Zr("transitionend"),Bv=new Map,yf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");yf.push("scrollEnd");function os(n,i){Bv.set(n,i),rs(i,[n])}var Hv=new WeakMap;function Yn(n,i){if(typeof n=="object"&&n!==null){var a=Hv.get(n);return a!==void 0?a:(i={value:n,source:i,stack:Va(i)},Hv.set(n,i),i)}return{value:n,source:i,stack:Va(i)}}var Qn=[],Xa=0,_f=0;function Ou(){for(var n=Xa,i=_f=Xa=0;i<n;){var a=Qn[i];Qn[i++]=null;var c=Qn[i];Qn[i++]=null;var f=Qn[i];Qn[i++]=null;var p=Qn[i];if(Qn[i++]=null,c!==null&&f!==null){var T=c.pending;T===null?f.next=f:(f.next=T.next,T.next=f),c.pending=f}p!==0&&Gv(a,f,p)}}function Mu(n,i,a,c){Qn[Xa++]=n,Qn[Xa++]=i,Qn[Xa++]=a,Qn[Xa++]=c,_f|=c,n.lanes|=c,n=n.alternate,n!==null&&(n.lanes|=c)}function Ef(n,i,a,c){return Mu(n,i,a,c),Pu(n)}function Wa(n,i){return Mu(n,null,null,i),Pu(n)}function Gv(n,i,a){n.lanes|=a;var c=n.alternate;c!==null&&(c.lanes|=a);for(var f=!1,p=n.return;p!==null;)p.childLanes|=a,c=p.alternate,c!==null&&(c.childLanes|=a),p.tag===22&&(n=p.stateNode,n===null||n._visibility&1||(f=!0)),n=p,p=p.return;return n.tag===3?(p=n.stateNode,f&&i!==null&&(f=31-rn(a),n=p.hiddenUpdates,c=n[f],c===null?n[f]=[i]:c.push(i),i.lane=a|536870912),p):null}function Pu(n){if(50<Zl)throw Zl=0,wm=null,Error(r(185));for(var i=n.return;i!==null;)n=i,i=n.return;return n.tag===3?n.stateNode:null}var Za={};function rw(n,i,a,c){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jn(n,i,a,c){return new rw(n,i,a,c)}function Tf(n){return n=n.prototype,!(!n||!n.isReactComponent)}function si(n,i){var a=n.alternate;return a===null?(a=jn(n.tag,i,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=i,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&65011712,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,i=n.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a.refCleanup=n.refCleanup,a}function $v(n,i){n.flags&=65011714;var a=n.alternate;return a===null?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=a.childLanes,n.lanes=a.lanes,n.child=a.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=a.memoizedProps,n.memoizedState=a.memoizedState,n.updateQueue=a.updateQueue,n.type=a.type,i=a.dependencies,n.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),n}function ku(n,i,a,c,f,p){var T=0;if(c=n,typeof n=="function")Tf(n)&&(T=1);else if(typeof n=="string")T=ox(n,a,_e.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case R:return n=jn(31,a,i,f),n.elementType=R,n.lanes=p,n;case I:return Jr(a.children,f,p,i);case U:T=8,f|=24;break;case x:return n=jn(12,a,i,f|2),n.elementType=x,n.lanes=p,n;case q:return n=jn(13,a,i,f),n.elementType=q,n.lanes=p,n;case oe:return n=jn(19,a,i,f),n.elementType=oe,n.lanes=p,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case $:case K:T=10;break e;case W:T=9;break e;case J:T=11;break e;case O:T=14;break e;case S:T=16,c=null;break e}T=29,a=Error(r(130,n===null?"null":typeof n,"")),c=null}return i=jn(T,a,i,f),i.elementType=n,i.type=c,i.lanes=p,i}function Jr(n,i,a,c){return n=jn(7,n,c,i),n.lanes=a,n}function bf(n,i,a){return n=jn(6,n,null,i),n.lanes=a,n}function Af(n,i,a){return i=jn(4,n.children!==null?n.children:[],n.key,i),i.lanes=a,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}var Ja=[],eo=0,Vu=null,Lu=0,Xn=[],Wn=0,ea=null,ii=1,ri="";function ta(n,i){Ja[eo++]=Lu,Ja[eo++]=Vu,Vu=n,Lu=i}function Kv(n,i,a){Xn[Wn++]=ii,Xn[Wn++]=ri,Xn[Wn++]=ea,ea=n;var c=ii;n=ri;var f=32-rn(c)-1;c&=~(1<<f),a+=1;var p=32-rn(i)+f;if(30<p){var T=f-f%5;p=(c&(1<<T)-1).toString(32),c>>=T,f-=T,ii=1<<32-rn(i)+f|a<<f|c,ri=p+n}else ii=1<<p|a<<f|c,ri=n}function Nf(n){n.return!==null&&(ta(n,1),Kv(n,1,0))}function Sf(n){for(;n===Vu;)Vu=Ja[--eo],Ja[eo]=null,Lu=Ja[--eo],Ja[eo]=null;for(;n===ea;)ea=Xn[--Wn],Xn[Wn]=null,ri=Xn[--Wn],Xn[Wn]=null,ii=Xn[--Wn],Xn[Wn]=null}var gn=null,gt=null,Ye=!1,na=null,js=!1,wf=Error(r(519));function sa(n){var i=Error(r(418,""));throw Rl(Yn(i,n)),wf}function Yv(n){var i=n.stateNode,a=n.type,c=n.memoizedProps;switch(i[Ct]=n,i[At]=c,a){case"dialog":Ve("cancel",i),Ve("close",i);break;case"iframe":case"object":case"embed":Ve("load",i);break;case"video":case"audio":for(a=0;a<ec.length;a++)Ve(ec[a],i);break;case"source":Ve("error",i);break;case"img":case"image":case"link":Ve("error",i),Ve("load",i);break;case"details":Ve("toggle",i);break;case"input":Ve("invalid",i),qr(i,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0),La(i);break;case"select":Ve("invalid",i);break;case"textarea":Ve("invalid",i),zr(i,c.value,c.defaultValue,c.children),La(i)}a=c.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||c.suppressHydrationWarning===!0||dE(i.textContent,a)?(c.popover!=null&&(Ve("beforetoggle",i),Ve("toggle",i)),c.onScroll!=null&&Ve("scroll",i),c.onScrollEnd!=null&&Ve("scrollend",i),c.onClick!=null&&(i.onclick=yd),i=!0):i=!1,i||sa(n)}function Qv(n){for(gn=n.return;gn;)switch(gn.tag){case 5:case 13:js=!1;return;case 27:case 3:js=!0;return;default:gn=gn.return}}function Il(n){if(n!==gn)return!1;if(!Ye)return Qv(n),Ye=!0,!1;var i=n.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=n.type,a=!(a!=="form"&&a!=="button")||zm(n.type,n.memoizedProps)),a=!a),a&&gt&&sa(n),Qv(n),i===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));e:{for(n=n.nextSibling,i=0;n;){if(n.nodeType===8)if(a=n.data,a==="/$"){if(i===0){gt=cs(n.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++;n=n.nextSibling}gt=null}}else i===27?(i=gt,Yi(n.type)?(n=$m,$m=null,gt=n):gt=i):gt=gn?cs(n.stateNode.nextSibling):null;return!0}function Cl(){gt=gn=null,Ye=!1}function Xv(){var n=na;return n!==null&&(bn===null?bn=n:bn.push.apply(bn,n),na=null),n}function Rl(n){na===null?na=[n]:na.push(n)}var xf=ae(null),ia=null,ai=null;function Oi(n,i,a){le(xf,i._currentValue),i._currentValue=a}function oi(n){n._currentValue=xf.current,de(xf)}function If(n,i,a){for(;n!==null;){var c=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,c!==null&&(c.childLanes|=i)):c!==null&&(c.childLanes&i)!==i&&(c.childLanes|=i),n===a)break;n=n.return}}function Cf(n,i,a,c){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var p=f.dependencies;if(p!==null){var T=f.child;p=p.firstContext;e:for(;p!==null;){var N=p;p=f;for(var P=0;P<i.length;P++)if(N.context===i[P]){p.lanes|=a,N=p.alternate,N!==null&&(N.lanes|=a),If(p.return,a,n),c||(T=null);break e}p=N.next}}else if(f.tag===18){if(T=f.return,T===null)throw Error(r(341));T.lanes|=a,p=T.alternate,p!==null&&(p.lanes|=a),If(T,a,n),T=null}else T=f.child;if(T!==null)T.return=f;else for(T=f;T!==null;){if(T===n){T=null;break}if(f=T.sibling,f!==null){f.return=T.return,T=f;break}T=T.return}f=T}}function jl(n,i,a,c){n=null;for(var f=i,p=!1;f!==null;){if(!p){if((f.flags&524288)!==0)p=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var T=f.alternate;if(T===null)throw Error(r(387));if(T=T.memoizedProps,T!==null){var N=f.type;Rn(f.pendingProps.value,T.value)||(n!==null?n.push(N):n=[N])}}else if(f===Lt.current){if(T=f.alternate,T===null)throw Error(r(387));T.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(ac):n=[ac])}f=f.return}n!==null&&Cf(i,n,a,c),i.flags|=262144}function Uu(n){for(n=n.firstContext;n!==null;){if(!Rn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function ra(n){ia=n,ai=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function an(n){return Wv(ia,n)}function Fu(n,i){return ia===null&&ra(n),Wv(n,i)}function Wv(n,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},ai===null){if(n===null)throw Error(r(308));ai=i,n.dependencies={lanes:0,firstContext:i},n.flags|=524288}else ai=ai.next=i;return a}var aw=typeof AbortController<"u"?AbortController:function(){var n=[],i=this.signal={aborted:!1,addEventListener:function(a,c){n.push(c)}};this.abort=function(){i.aborted=!0,n.forEach(function(a){return a()})}},ow=s.unstable_scheduleCallback,lw=s.unstable_NormalPriority,Dt={$$typeof:K,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Rf(){return{controller:new aw,data:new Map,refCount:0}}function Dl(n){n.refCount--,n.refCount===0&&ow(lw,function(){n.controller.abort()})}var Ol=null,jf=0,to=0,no=null;function cw(n,i){if(Ol===null){var a=Ol=[];jf=0,to=Om(),no={status:"pending",value:void 0,then:function(c){a.push(c)}}}return jf++,i.then(Zv,Zv),i}function Zv(){if(--jf===0&&Ol!==null){no!==null&&(no.status="fulfilled");var n=Ol;Ol=null,to=0,no=null;for(var i=0;i<n.length;i++)(0,n[i])()}}function uw(n,i){var a=[],c={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return n.then(function(){c.status="fulfilled",c.value=i;for(var f=0;f<a.length;f++)(0,a[f])(i)},function(f){for(c.status="rejected",c.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),c}var Jv=X.S;X.S=function(n,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&cw(n,i),Jv!==null&&Jv(n,i)};var aa=ae(null);function Df(){var n=aa.current;return n!==null?n:ot.pooledCache}function qu(n,i){i===null?le(aa,aa.current):le(aa,i.pool)}function ey(){var n=Df();return n===null?null:{parent:Dt._currentValue,pool:n}}var Ml=Error(r(460)),ty=Error(r(474)),zu=Error(r(542)),Of={then:function(){}};function ny(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Bu(){}function sy(n,i,a){switch(a=n[a],a===void 0?n.push(i):a!==i&&(i.then(Bu,Bu),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,ry(n),n;default:if(typeof i.status=="string")i.then(Bu,Bu);else{if(n=ot,n!==null&&100<n.shellSuspendCounter)throw Error(r(482));n=i,n.status="pending",n.then(function(c){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=c}},function(c){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=c}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,ry(n),n}throw Pl=i,Ml}}var Pl=null;function iy(){if(Pl===null)throw Error(r(459));var n=Pl;return Pl=null,n}function ry(n){if(n===Ml||n===zu)throw Error(r(483))}var Mi=!1;function Mf(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Pf(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Pi(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function ki(n,i,a){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(We&2)!==0){var f=c.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),c.pending=i,i=Pu(n),Gv(n,null,a),i}return Mu(n,c,i,a),Pu(n)}function kl(n,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var c=i.lanes;c&=n.pendingLanes,a|=c,i.lanes=a,ul(n,a)}}function kf(n,i){var a=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var f=null,p=null;if(a=a.firstBaseUpdate,a!==null){do{var T={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};p===null?f=p=T:p=p.next=T,a=a.next}while(a!==null);p===null?f=p=i:p=p.next=i}else f=p=i;a={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:p,shared:c.shared,callbacks:c.callbacks},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=i:n.next=i,a.lastBaseUpdate=i}var Vf=!1;function Vl(){if(Vf){var n=no;if(n!==null)throw n}}function Ll(n,i,a,c){Vf=!1;var f=n.updateQueue;Mi=!1;var p=f.firstBaseUpdate,T=f.lastBaseUpdate,N=f.shared.pending;if(N!==null){f.shared.pending=null;var P=N,H=P.next;P.next=null,T===null?p=H:T.next=H,T=P;var Z=n.alternate;Z!==null&&(Z=Z.updateQueue,N=Z.lastBaseUpdate,N!==T&&(N===null?Z.firstBaseUpdate=H:N.next=H,Z.lastBaseUpdate=P))}if(p!==null){var ne=f.baseState;T=0,Z=H=P=null,N=p;do{var G=N.lane&-536870913,Y=G!==N.lane;if(Y?(Be&G)===G:(c&G)===G){G!==0&&G===to&&(Vf=!0),Z!==null&&(Z=Z.next={lane:0,tag:N.tag,payload:N.payload,callback:null,next:null});e:{var we=n,be=N;G=i;var nt=a;switch(be.tag){case 1:if(we=be.payload,typeof we=="function"){ne=we.call(nt,ne,G);break e}ne=we;break e;case 3:we.flags=we.flags&-65537|128;case 0:if(we=be.payload,G=typeof we=="function"?we.call(nt,ne,G):we,G==null)break e;ne=_({},ne,G);break e;case 2:Mi=!0}}G=N.callback,G!==null&&(n.flags|=64,Y&&(n.flags|=8192),Y=f.callbacks,Y===null?f.callbacks=[G]:Y.push(G))}else Y={lane:G,tag:N.tag,payload:N.payload,callback:N.callback,next:null},Z===null?(H=Z=Y,P=ne):Z=Z.next=Y,T|=G;if(N=N.next,N===null){if(N=f.shared.pending,N===null)break;Y=N,N=Y.next,Y.next=null,f.lastBaseUpdate=Y,f.shared.pending=null}}while(!0);Z===null&&(P=ne),f.baseState=P,f.firstBaseUpdate=H,f.lastBaseUpdate=Z,p===null&&(f.shared.lanes=0),Hi|=T,n.lanes=T,n.memoizedState=ne}}function ay(n,i){if(typeof n!="function")throw Error(r(191,n));n.call(i)}function oy(n,i){var a=n.callbacks;if(a!==null)for(n.callbacks=null,n=0;n<a.length;n++)ay(a[n],i)}var so=ae(null),Hu=ae(0);function ly(n,i){n=mi,le(Hu,n),le(so,i),mi=n|i.baseLanes}function Lf(){le(Hu,mi),le(so,so.current)}function Uf(){mi=Hu.current,de(so),de(Hu)}var Vi=0,De=null,et=null,St=null,Gu=!1,io=!1,oa=!1,$u=0,Ul=0,ro=null,dw=0;function Et(){throw Error(r(321))}function Ff(n,i){if(i===null)return!1;for(var a=0;a<i.length&&a<n.length;a++)if(!Rn(n[a],i[a]))return!1;return!0}function qf(n,i,a,c,f,p){return Vi=p,De=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,X.H=n===null||n.memoizedState===null?Gy:$y,oa=!1,p=a(c,f),oa=!1,io&&(p=uy(i,a,c,f)),cy(n),p}function cy(n){X.H=Zu;var i=et!==null&&et.next!==null;if(Vi=0,St=et=De=null,Gu=!1,Ul=0,ro=null,i)throw Error(r(300));n===null||qt||(n=n.dependencies,n!==null&&Uu(n)&&(qt=!0))}function uy(n,i,a,c){De=n;var f=0;do{if(io&&(ro=null),Ul=0,io=!1,25<=f)throw Error(r(301));if(f+=1,St=et=null,n.updateQueue!=null){var p=n.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}X.H=yw,p=i(a,c)}while(io);return p}function hw(){var n=X.H,i=n.useState()[0];return i=typeof i.then=="function"?Fl(i):i,n=n.useState()[0],(et!==null?et.memoizedState:null)!==n&&(De.flags|=1024),i}function zf(){var n=$u!==0;return $u=0,n}function Bf(n,i,a){i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~a}function Hf(n){if(Gu){for(n=n.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Gu=!1}Vi=0,St=et=De=null,io=!1,Ul=$u=0,ro=null}function En(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return St===null?De.memoizedState=St=n:St=St.next=n,St}function wt(){if(et===null){var n=De.alternate;n=n!==null?n.memoizedState:null}else n=et.next;var i=St===null?De.memoizedState:St.next;if(i!==null)St=i,et=n;else{if(n===null)throw De.alternate===null?Error(r(467)):Error(r(310));et=n,n={memoizedState:et.memoizedState,baseState:et.baseState,baseQueue:et.baseQueue,queue:et.queue,next:null},St===null?De.memoizedState=St=n:St=St.next=n}return St}function Gf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Fl(n){var i=Ul;return Ul+=1,ro===null&&(ro=[]),n=sy(ro,n,i),i=De,(St===null?i.memoizedState:St.next)===null&&(i=i.alternate,X.H=i===null||i.memoizedState===null?Gy:$y),n}function Ku(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Fl(n);if(n.$$typeof===K)return an(n)}throw Error(r(438,String(n)))}function $f(n){var i=null,a=De.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var c=De.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(i={data:c.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=Gf(),De.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(n),c=0;c<n;c++)a[c]=D;return i.index++,a}function li(n,i){return typeof i=="function"?i(n):i}function Yu(n){var i=wt();return Kf(i,et,n)}function Kf(n,i,a){var c=n.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=a;var f=n.baseQueue,p=c.pending;if(p!==null){if(f!==null){var T=f.next;f.next=p.next,p.next=T}i.baseQueue=f=p,c.pending=null}if(p=n.baseState,f===null)n.memoizedState=p;else{i=f.next;var N=T=null,P=null,H=i,Z=!1;do{var ne=H.lane&-536870913;if(ne!==H.lane?(Be&ne)===ne:(Vi&ne)===ne){var G=H.revertLane;if(G===0)P!==null&&(P=P.next={lane:0,revertLane:0,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null}),ne===to&&(Z=!0);else if((Vi&G)===G){H=H.next,G===to&&(Z=!0);continue}else ne={lane:0,revertLane:H.revertLane,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},P===null?(N=P=ne,T=p):P=P.next=ne,De.lanes|=G,Hi|=G;ne=H.action,oa&&a(p,ne),p=H.hasEagerState?H.eagerState:a(p,ne)}else G={lane:ne,revertLane:H.revertLane,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},P===null?(N=P=G,T=p):P=P.next=G,De.lanes|=ne,Hi|=ne;H=H.next}while(H!==null&&H!==i);if(P===null?T=p:P.next=N,!Rn(p,n.memoizedState)&&(qt=!0,Z&&(a=no,a!==null)))throw a;n.memoizedState=p,n.baseState=T,n.baseQueue=P,c.lastRenderedState=p}return f===null&&(c.lanes=0),[n.memoizedState,c.dispatch]}function Yf(n){var i=wt(),a=i.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=n;var c=a.dispatch,f=a.pending,p=i.memoizedState;if(f!==null){a.pending=null;var T=f=f.next;do p=n(p,T.action),T=T.next;while(T!==f);Rn(p,i.memoizedState)||(qt=!0),i.memoizedState=p,i.baseQueue===null&&(i.baseState=p),a.lastRenderedState=p}return[p,c]}function dy(n,i,a){var c=De,f=wt(),p=Ye;if(p){if(a===void 0)throw Error(r(407));a=a()}else a=i();var T=!Rn((et||f).memoizedState,a);T&&(f.memoizedState=a,qt=!0),f=f.queue;var N=my.bind(null,c,f,n);if(ql(2048,8,N,[n]),f.getSnapshot!==i||T||St!==null&&St.memoizedState.tag&1){if(c.flags|=2048,ao(9,Qu(),fy.bind(null,c,f,a,i),null),ot===null)throw Error(r(349));p||(Vi&124)!==0||hy(c,i,a)}return a}function hy(n,i,a){n.flags|=16384,n={getSnapshot:i,value:a},i=De.updateQueue,i===null?(i=Gf(),De.updateQueue=i,i.stores=[n]):(a=i.stores,a===null?i.stores=[n]:a.push(n))}function fy(n,i,a,c){i.value=a,i.getSnapshot=c,py(i)&&gy(n)}function my(n,i,a){return a(function(){py(i)&&gy(n)})}function py(n){var i=n.getSnapshot;n=n.value;try{var a=i();return!Rn(n,a)}catch{return!0}}function gy(n){var i=Wa(n,2);i!==null&&kn(i,n,2)}function Qf(n){var i=En();if(typeof n=="function"){var a=n;if(n=a(),oa){In(!0);try{a()}finally{In(!1)}}}return i.memoizedState=i.baseState=n,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:li,lastRenderedState:n},i}function vy(n,i,a,c){return n.baseState=a,Kf(n,et,typeof c=="function"?c:li)}function fw(n,i,a,c,f){if(Wu(n))throw Error(r(485));if(n=i.action,n!==null){var p={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){p.listeners.push(T)}};X.T!==null?a(!0):p.isTransition=!1,c(p),a=i.pending,a===null?(p.next=i.pending=p,yy(i,p)):(p.next=a.next,i.pending=a.next=p)}}function yy(n,i){var a=i.action,c=i.payload,f=n.state;if(i.isTransition){var p=X.T,T={};X.T=T;try{var N=a(f,c),P=X.S;P!==null&&P(T,N),_y(n,i,N)}catch(H){Xf(n,i,H)}finally{X.T=p}}else try{p=a(f,c),_y(n,i,p)}catch(H){Xf(n,i,H)}}function _y(n,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(c){Ey(n,i,c)},function(c){return Xf(n,i,c)}):Ey(n,i,a)}function Ey(n,i,a){i.status="fulfilled",i.value=a,Ty(i),n.state=a,i=n.pending,i!==null&&(a=i.next,a===i?n.pending=null:(a=a.next,i.next=a,yy(n,a)))}function Xf(n,i,a){var c=n.pending;if(n.pending=null,c!==null){c=c.next;do i.status="rejected",i.reason=a,Ty(i),i=i.next;while(i!==c)}n.action=null}function Ty(n){n=n.listeners;for(var i=0;i<n.length;i++)(0,n[i])()}function by(n,i){return i}function Ay(n,i){if(Ye){var a=ot.formState;if(a!==null){e:{var c=De;if(Ye){if(gt){t:{for(var f=gt,p=js;f.nodeType!==8;){if(!p){f=null;break t}if(f=cs(f.nextSibling),f===null){f=null;break t}}p=f.data,f=p==="F!"||p==="F"?f:null}if(f){gt=cs(f.nextSibling),c=f.data==="F!";break e}}sa(c)}c=!1}c&&(i=a[0])}}return a=En(),a.memoizedState=a.baseState=i,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:by,lastRenderedState:i},a.queue=c,a=zy.bind(null,De,c),c.dispatch=a,c=Qf(!1),p=tm.bind(null,De,!1,c.queue),c=En(),f={state:i,dispatch:null,action:n,pending:null},c.queue=f,a=fw.bind(null,De,f,p,a),f.dispatch=a,c.memoizedState=n,[i,a,!1]}function Ny(n){var i=wt();return Sy(i,et,n)}function Sy(n,i,a){if(i=Kf(n,i,by)[0],n=Yu(li)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var c=Fl(i)}catch(T){throw T===Ml?zu:T}else c=i;i=wt();var f=i.queue,p=f.dispatch;return a!==i.memoizedState&&(De.flags|=2048,ao(9,Qu(),mw.bind(null,f,a),null)),[c,p,n]}function mw(n,i){n.action=i}function wy(n){var i=wt(),a=et;if(a!==null)return Sy(i,a,n);wt(),i=i.memoizedState,a=wt();var c=a.queue.dispatch;return a.memoizedState=n,[i,c,!1]}function ao(n,i,a,c){return n={tag:n,create:a,deps:c,inst:i,next:null},i=De.updateQueue,i===null&&(i=Gf(),De.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=n.next=n:(c=a.next,a.next=n,n.next=c,i.lastEffect=n),n}function Qu(){return{destroy:void 0,resource:void 0}}function xy(){return wt().memoizedState}function Xu(n,i,a,c){var f=En();c=c===void 0?null:c,De.flags|=n,f.memoizedState=ao(1|i,Qu(),a,c)}function ql(n,i,a,c){var f=wt();c=c===void 0?null:c;var p=f.memoizedState.inst;et!==null&&c!==null&&Ff(c,et.memoizedState.deps)?f.memoizedState=ao(i,p,a,c):(De.flags|=n,f.memoizedState=ao(1|i,p,a,c))}function Iy(n,i){Xu(8390656,8,n,i)}function Cy(n,i){ql(2048,8,n,i)}function Ry(n,i){return ql(4,2,n,i)}function jy(n,i){return ql(4,4,n,i)}function Dy(n,i){if(typeof i=="function"){n=n();var a=i(n);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function Oy(n,i,a){a=a!=null?a.concat([n]):null,ql(4,4,Dy.bind(null,i,n),a)}function Wf(){}function My(n,i){var a=wt();i=i===void 0?null:i;var c=a.memoizedState;return i!==null&&Ff(i,c[1])?c[0]:(a.memoizedState=[n,i],n)}function Py(n,i){var a=wt();i=i===void 0?null:i;var c=a.memoizedState;if(i!==null&&Ff(i,c[1]))return c[0];if(c=n(),oa){In(!0);try{n()}finally{In(!1)}}return a.memoizedState=[c,i],c}function Zf(n,i,a){return a===void 0||(Vi&1073741824)!==0?n.memoizedState=i:(n.memoizedState=a,n=L_(),De.lanes|=n,Hi|=n,a)}function ky(n,i,a,c){return Rn(a,i)?a:so.current!==null?(n=Zf(n,a,c),Rn(n,i)||(qt=!0),n):(Vi&42)===0?(qt=!0,n.memoizedState=a):(n=L_(),De.lanes|=n,Hi|=n,i)}function Vy(n,i,a,c,f){var p=re.p;re.p=p!==0&&8>p?p:8;var T=X.T,N={};X.T=N,tm(n,!1,i,a);try{var P=f(),H=X.S;if(H!==null&&H(N,P),P!==null&&typeof P=="object"&&typeof P.then=="function"){var Z=uw(P,c);zl(n,i,Z,Pn(n))}else zl(n,i,c,Pn(n))}catch(ne){zl(n,i,{then:function(){},status:"rejected",reason:ne},Pn())}finally{re.p=p,X.T=T}}function pw(){}function Jf(n,i,a,c){if(n.tag!==5)throw Error(r(476));var f=Ly(n).queue;Vy(n,f,i,ue,a===null?pw:function(){return Uy(n),a(c)})}function Ly(n){var i=n.memoizedState;if(i!==null)return i;i={memoizedState:ue,baseState:ue,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:li,lastRenderedState:ue},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:li,lastRenderedState:a},next:null},n.memoizedState=i,n=n.alternate,n!==null&&(n.memoizedState=i),i}function Uy(n){var i=Ly(n).next.queue;zl(n,i,{},Pn())}function em(){return an(ac)}function Fy(){return wt().memoizedState}function qy(){return wt().memoizedState}function gw(n){for(var i=n.return;i!==null;){switch(i.tag){case 24:case 3:var a=Pn();n=Pi(a);var c=ki(i,n,a);c!==null&&(kn(c,i,a),kl(c,i,a)),i={cache:Rf()},n.payload=i;return}i=i.return}}function vw(n,i,a){var c=Pn();a={lane:c,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},Wu(n)?By(i,a):(a=Ef(n,i,a,c),a!==null&&(kn(a,n,c),Hy(a,i,c)))}function zy(n,i,a){var c=Pn();zl(n,i,a,c)}function zl(n,i,a,c){var f={lane:c,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(Wu(n))By(i,f);else{var p=n.alternate;if(n.lanes===0&&(p===null||p.lanes===0)&&(p=i.lastRenderedReducer,p!==null))try{var T=i.lastRenderedState,N=p(T,a);if(f.hasEagerState=!0,f.eagerState=N,Rn(N,T))return Mu(n,i,f,0),ot===null&&Ou(),!1}catch{}finally{}if(a=Ef(n,i,f,c),a!==null)return kn(a,n,c),Hy(a,i,c),!0}return!1}function tm(n,i,a,c){if(c={lane:2,revertLane:Om(),action:c,hasEagerState:!1,eagerState:null,next:null},Wu(n)){if(i)throw Error(r(479))}else i=Ef(n,a,c,2),i!==null&&kn(i,n,2)}function Wu(n){var i=n.alternate;return n===De||i!==null&&i===De}function By(n,i){io=Gu=!0;var a=n.pending;a===null?i.next=i:(i.next=a.next,a.next=i),n.pending=i}function Hy(n,i,a){if((a&4194048)!==0){var c=i.lanes;c&=n.pendingLanes,a|=c,i.lanes=a,ul(n,a)}}var Zu={readContext:an,use:Ku,useCallback:Et,useContext:Et,useEffect:Et,useImperativeHandle:Et,useLayoutEffect:Et,useInsertionEffect:Et,useMemo:Et,useReducer:Et,useRef:Et,useState:Et,useDebugValue:Et,useDeferredValue:Et,useTransition:Et,useSyncExternalStore:Et,useId:Et,useHostTransitionStatus:Et,useFormState:Et,useActionState:Et,useOptimistic:Et,useMemoCache:Et,useCacheRefresh:Et},Gy={readContext:an,use:Ku,useCallback:function(n,i){return En().memoizedState=[n,i===void 0?null:i],n},useContext:an,useEffect:Iy,useImperativeHandle:function(n,i,a){a=a!=null?a.concat([n]):null,Xu(4194308,4,Dy.bind(null,i,n),a)},useLayoutEffect:function(n,i){return Xu(4194308,4,n,i)},useInsertionEffect:function(n,i){Xu(4,2,n,i)},useMemo:function(n,i){var a=En();i=i===void 0?null:i;var c=n();if(oa){In(!0);try{n()}finally{In(!1)}}return a.memoizedState=[c,i],c},useReducer:function(n,i,a){var c=En();if(a!==void 0){var f=a(i);if(oa){In(!0);try{a(i)}finally{In(!1)}}}else f=i;return c.memoizedState=c.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},c.queue=n,n=n.dispatch=vw.bind(null,De,n),[c.memoizedState,n]},useRef:function(n){var i=En();return n={current:n},i.memoizedState=n},useState:function(n){n=Qf(n);var i=n.queue,a=zy.bind(null,De,i);return i.dispatch=a,[n.memoizedState,a]},useDebugValue:Wf,useDeferredValue:function(n,i){var a=En();return Zf(a,n,i)},useTransition:function(){var n=Qf(!1);return n=Vy.bind(null,De,n.queue,!0,!1),En().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,i,a){var c=De,f=En();if(Ye){if(a===void 0)throw Error(r(407));a=a()}else{if(a=i(),ot===null)throw Error(r(349));(Be&124)!==0||hy(c,i,a)}f.memoizedState=a;var p={value:a,getSnapshot:i};return f.queue=p,Iy(my.bind(null,c,p,n),[n]),c.flags|=2048,ao(9,Qu(),fy.bind(null,c,p,a,i),null),a},useId:function(){var n=En(),i=ot.identifierPrefix;if(Ye){var a=ri,c=ii;a=(c&~(1<<32-rn(c)-1)).toString(32)+a,i="«"+i+"R"+a,a=$u++,0<a&&(i+="H"+a.toString(32)),i+="»"}else a=dw++,i="«"+i+"r"+a.toString(32)+"»";return n.memoizedState=i},useHostTransitionStatus:em,useFormState:Ay,useActionState:Ay,useOptimistic:function(n){var i=En();i.memoizedState=i.baseState=n;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=tm.bind(null,De,!0,a),a.dispatch=i,[n,i]},useMemoCache:$f,useCacheRefresh:function(){return En().memoizedState=gw.bind(null,De)}},$y={readContext:an,use:Ku,useCallback:My,useContext:an,useEffect:Cy,useImperativeHandle:Oy,useInsertionEffect:Ry,useLayoutEffect:jy,useMemo:Py,useReducer:Yu,useRef:xy,useState:function(){return Yu(li)},useDebugValue:Wf,useDeferredValue:function(n,i){var a=wt();return ky(a,et.memoizedState,n,i)},useTransition:function(){var n=Yu(li)[0],i=wt().memoizedState;return[typeof n=="boolean"?n:Fl(n),i]},useSyncExternalStore:dy,useId:Fy,useHostTransitionStatus:em,useFormState:Ny,useActionState:Ny,useOptimistic:function(n,i){var a=wt();return vy(a,et,n,i)},useMemoCache:$f,useCacheRefresh:qy},yw={readContext:an,use:Ku,useCallback:My,useContext:an,useEffect:Cy,useImperativeHandle:Oy,useInsertionEffect:Ry,useLayoutEffect:jy,useMemo:Py,useReducer:Yf,useRef:xy,useState:function(){return Yf(li)},useDebugValue:Wf,useDeferredValue:function(n,i){var a=wt();return et===null?Zf(a,n,i):ky(a,et.memoizedState,n,i)},useTransition:function(){var n=Yf(li)[0],i=wt().memoizedState;return[typeof n=="boolean"?n:Fl(n),i]},useSyncExternalStore:dy,useId:Fy,useHostTransitionStatus:em,useFormState:wy,useActionState:wy,useOptimistic:function(n,i){var a=wt();return et!==null?vy(a,et,n,i):(a.baseState=n,[n,a.queue.dispatch])},useMemoCache:$f,useCacheRefresh:qy},oo=null,Bl=0;function Ju(n){var i=Bl;return Bl+=1,oo===null&&(oo=[]),sy(oo,n,i)}function Hl(n,i){i=i.props.ref,n.ref=i!==void 0?i:null}function ed(n,i){throw i.$$typeof===b?Error(r(525)):(n=Object.prototype.toString.call(i),Error(r(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n)))}function Ky(n){var i=n._init;return i(n._payload)}function Yy(n){function i(F,L){if(n){var B=F.deletions;B===null?(F.deletions=[L],F.flags|=16):B.push(L)}}function a(F,L){if(!n)return null;for(;L!==null;)i(F,L),L=L.sibling;return null}function c(F){for(var L=new Map;F!==null;)F.key!==null?L.set(F.key,F):L.set(F.index,F),F=F.sibling;return L}function f(F,L){return F=si(F,L),F.index=0,F.sibling=null,F}function p(F,L,B){return F.index=B,n?(B=F.alternate,B!==null?(B=B.index,B<L?(F.flags|=67108866,L):B):(F.flags|=67108866,L)):(F.flags|=1048576,L)}function T(F){return n&&F.alternate===null&&(F.flags|=67108866),F}function N(F,L,B,ee){return L===null||L.tag!==6?(L=bf(B,F.mode,ee),L.return=F,L):(L=f(L,B),L.return=F,L)}function P(F,L,B,ee){var me=B.type;return me===I?Z(F,L,B.props.children,ee,B.key):L!==null&&(L.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===S&&Ky(me)===L.type)?(L=f(L,B.props),Hl(L,B),L.return=F,L):(L=ku(B.type,B.key,B.props,null,F.mode,ee),Hl(L,B),L.return=F,L)}function H(F,L,B,ee){return L===null||L.tag!==4||L.stateNode.containerInfo!==B.containerInfo||L.stateNode.implementation!==B.implementation?(L=Af(B,F.mode,ee),L.return=F,L):(L=f(L,B.children||[]),L.return=F,L)}function Z(F,L,B,ee,me){return L===null||L.tag!==7?(L=Jr(B,F.mode,ee,me),L.return=F,L):(L=f(L,B),L.return=F,L)}function ne(F,L,B){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return L=bf(""+L,F.mode,B),L.return=F,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case A:return B=ku(L.type,L.key,L.props,null,F.mode,B),Hl(B,L),B.return=F,B;case M:return L=Af(L,F.mode,B),L.return=F,L;case S:var ee=L._init;return L=ee(L._payload),ne(F,L,B)}if($e(L)||C(L))return L=Jr(L,F.mode,B,null),L.return=F,L;if(typeof L.then=="function")return ne(F,Ju(L),B);if(L.$$typeof===K)return ne(F,Fu(F,L),B);ed(F,L)}return null}function G(F,L,B,ee){var me=L!==null?L.key:null;if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return me!==null?null:N(F,L,""+B,ee);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case A:return B.key===me?P(F,L,B,ee):null;case M:return B.key===me?H(F,L,B,ee):null;case S:return me=B._init,B=me(B._payload),G(F,L,B,ee)}if($e(B)||C(B))return me!==null?null:Z(F,L,B,ee,null);if(typeof B.then=="function")return G(F,L,Ju(B),ee);if(B.$$typeof===K)return G(F,L,Fu(F,B),ee);ed(F,B)}return null}function Y(F,L,B,ee,me){if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return F=F.get(B)||null,N(L,F,""+ee,me);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case A:return F=F.get(ee.key===null?B:ee.key)||null,P(L,F,ee,me);case M:return F=F.get(ee.key===null?B:ee.key)||null,H(L,F,ee,me);case S:var Pe=ee._init;return ee=Pe(ee._payload),Y(F,L,B,ee,me)}if($e(ee)||C(ee))return F=F.get(B)||null,Z(L,F,ee,me,null);if(typeof ee.then=="function")return Y(F,L,B,Ju(ee),me);if(ee.$$typeof===K)return Y(F,L,B,Fu(L,ee),me);ed(L,ee)}return null}function we(F,L,B,ee){for(var me=null,Pe=null,ge=L,Ae=L=0,Bt=null;ge!==null&&Ae<B.length;Ae++){ge.index>Ae?(Bt=ge,ge=null):Bt=ge.sibling;var Ke=G(F,ge,B[Ae],ee);if(Ke===null){ge===null&&(ge=Bt);break}n&&ge&&Ke.alternate===null&&i(F,ge),L=p(Ke,L,Ae),Pe===null?me=Ke:Pe.sibling=Ke,Pe=Ke,ge=Bt}if(Ae===B.length)return a(F,ge),Ye&&ta(F,Ae),me;if(ge===null){for(;Ae<B.length;Ae++)ge=ne(F,B[Ae],ee),ge!==null&&(L=p(ge,L,Ae),Pe===null?me=ge:Pe.sibling=ge,Pe=ge);return Ye&&ta(F,Ae),me}for(ge=c(ge);Ae<B.length;Ae++)Bt=Y(ge,F,Ae,B[Ae],ee),Bt!==null&&(n&&Bt.alternate!==null&&ge.delete(Bt.key===null?Ae:Bt.key),L=p(Bt,L,Ae),Pe===null?me=Bt:Pe.sibling=Bt,Pe=Bt);return n&&ge.forEach(function(Ji){return i(F,Ji)}),Ye&&ta(F,Ae),me}function be(F,L,B,ee){if(B==null)throw Error(r(151));for(var me=null,Pe=null,ge=L,Ae=L=0,Bt=null,Ke=B.next();ge!==null&&!Ke.done;Ae++,Ke=B.next()){ge.index>Ae?(Bt=ge,ge=null):Bt=ge.sibling;var Ji=G(F,ge,Ke.value,ee);if(Ji===null){ge===null&&(ge=Bt);break}n&&ge&&Ji.alternate===null&&i(F,ge),L=p(Ji,L,Ae),Pe===null?me=Ji:Pe.sibling=Ji,Pe=Ji,ge=Bt}if(Ke.done)return a(F,ge),Ye&&ta(F,Ae),me;if(ge===null){for(;!Ke.done;Ae++,Ke=B.next())Ke=ne(F,Ke.value,ee),Ke!==null&&(L=p(Ke,L,Ae),Pe===null?me=Ke:Pe.sibling=Ke,Pe=Ke);return Ye&&ta(F,Ae),me}for(ge=c(ge);!Ke.done;Ae++,Ke=B.next())Ke=Y(ge,F,Ae,Ke.value,ee),Ke!==null&&(n&&Ke.alternate!==null&&ge.delete(Ke.key===null?Ae:Ke.key),L=p(Ke,L,Ae),Pe===null?me=Ke:Pe.sibling=Ke,Pe=Ke);return n&&ge.forEach(function(_x){return i(F,_x)}),Ye&&ta(F,Ae),me}function nt(F,L,B,ee){if(typeof B=="object"&&B!==null&&B.type===I&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case A:e:{for(var me=B.key;L!==null;){if(L.key===me){if(me=B.type,me===I){if(L.tag===7){a(F,L.sibling),ee=f(L,B.props.children),ee.return=F,F=ee;break e}}else if(L.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===S&&Ky(me)===L.type){a(F,L.sibling),ee=f(L,B.props),Hl(ee,B),ee.return=F,F=ee;break e}a(F,L);break}else i(F,L);L=L.sibling}B.type===I?(ee=Jr(B.props.children,F.mode,ee,B.key),ee.return=F,F=ee):(ee=ku(B.type,B.key,B.props,null,F.mode,ee),Hl(ee,B),ee.return=F,F=ee)}return T(F);case M:e:{for(me=B.key;L!==null;){if(L.key===me)if(L.tag===4&&L.stateNode.containerInfo===B.containerInfo&&L.stateNode.implementation===B.implementation){a(F,L.sibling),ee=f(L,B.children||[]),ee.return=F,F=ee;break e}else{a(F,L);break}else i(F,L);L=L.sibling}ee=Af(B,F.mode,ee),ee.return=F,F=ee}return T(F);case S:return me=B._init,B=me(B._payload),nt(F,L,B,ee)}if($e(B))return we(F,L,B,ee);if(C(B)){if(me=C(B),typeof me!="function")throw Error(r(150));return B=me.call(B),be(F,L,B,ee)}if(typeof B.then=="function")return nt(F,L,Ju(B),ee);if(B.$$typeof===K)return nt(F,L,Fu(F,B),ee);ed(F,B)}return typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint"?(B=""+B,L!==null&&L.tag===6?(a(F,L.sibling),ee=f(L,B),ee.return=F,F=ee):(a(F,L),ee=bf(B,F.mode,ee),ee.return=F,F=ee),T(F)):a(F,L)}return function(F,L,B,ee){try{Bl=0;var me=nt(F,L,B,ee);return oo=null,me}catch(ge){if(ge===Ml||ge===zu)throw ge;var Pe=jn(29,ge,null,F.mode);return Pe.lanes=ee,Pe.return=F,Pe}finally{}}}var lo=Yy(!0),Qy=Yy(!1),Zn=ae(null),Ds=null;function Li(n){var i=n.alternate;le(Ot,Ot.current&1),le(Zn,n),Ds===null&&(i===null||so.current!==null||i.memoizedState!==null)&&(Ds=n)}function Xy(n){if(n.tag===22){if(le(Ot,Ot.current),le(Zn,n),Ds===null){var i=n.alternate;i!==null&&i.memoizedState!==null&&(Ds=n)}}else Ui()}function Ui(){le(Ot,Ot.current),le(Zn,Zn.current)}function ci(n){de(Zn),Ds===n&&(Ds=null),de(Ot)}var Ot=ae(0);function td(n){for(var i=n;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||Gm(a)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function nm(n,i,a,c){i=n.memoizedState,a=a(c,i),a=a==null?i:_({},i,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var sm={enqueueSetState:function(n,i,a){n=n._reactInternals;var c=Pn(),f=Pi(c);f.payload=i,a!=null&&(f.callback=a),i=ki(n,f,c),i!==null&&(kn(i,n,c),kl(i,n,c))},enqueueReplaceState:function(n,i,a){n=n._reactInternals;var c=Pn(),f=Pi(c);f.tag=1,f.payload=i,a!=null&&(f.callback=a),i=ki(n,f,c),i!==null&&(kn(i,n,c),kl(i,n,c))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var a=Pn(),c=Pi(a);c.tag=2,i!=null&&(c.callback=i),i=ki(n,c,a),i!==null&&(kn(i,n,a),kl(i,n,a))}};function Wy(n,i,a,c,f,p,T){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,p,T):i.prototype&&i.prototype.isPureReactComponent?!wl(a,c)||!wl(f,p):!0}function Zy(n,i,a,c){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,c),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,c),i.state!==n&&sm.enqueueReplaceState(i,i.state,null)}function la(n,i){var a=i;if("ref"in i){a={};for(var c in i)c!=="ref"&&(a[c]=i[c])}if(n=n.defaultProps){a===i&&(a=_({},a));for(var f in n)a[f]===void 0&&(a[f]=n[f])}return a}var nd=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function Jy(n){nd(n)}function e_(n){console.error(n)}function t_(n){nd(n)}function sd(n,i){try{var a=n.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(c){setTimeout(function(){throw c})}}function n_(n,i,a){try{var c=n.onCaughtError;c(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function im(n,i,a){return a=Pi(a),a.tag=3,a.payload={element:null},a.callback=function(){sd(n,i)},a}function s_(n){return n=Pi(n),n.tag=3,n}function i_(n,i,a,c){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var p=c.value;n.payload=function(){return f(p)},n.callback=function(){n_(i,a,c)}}var T=a.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(n.callback=function(){n_(i,a,c),typeof f!="function"&&(Gi===null?Gi=new Set([this]):Gi.add(this));var N=c.stack;this.componentDidCatch(c.value,{componentStack:N!==null?N:""})})}function _w(n,i,a,c,f){if(a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(i=a.alternate,i!==null&&jl(i,a,f,!0),a=Zn.current,a!==null){switch(a.tag){case 13:return Ds===null?Im():a.alternate===null&&vt===0&&(vt=3),a.flags&=-257,a.flags|=65536,a.lanes=f,c===Of?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([c]):i.add(c),Rm(n,c,f)),!1;case 22:return a.flags|=65536,c===Of?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([c])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([c]):a.add(c)),Rm(n,c,f)),!1}throw Error(r(435,a.tag))}return Rm(n,c,f),Im(),!1}if(Ye)return i=Zn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,c!==wf&&(n=Error(r(422),{cause:c}),Rl(Yn(n,a)))):(c!==wf&&(i=Error(r(423),{cause:c}),Rl(Yn(i,a))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,c=Yn(c,a),f=im(n.stateNode,c,f),kf(n,f),vt!==4&&(vt=2)),!1;var p=Error(r(520),{cause:c});if(p=Yn(p,a),Wl===null?Wl=[p]:Wl.push(p),vt!==4&&(vt=2),i===null)return!0;c=Yn(c,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,n=f&-f,a.lanes|=n,n=im(a.stateNode,c,n),kf(a,n),!1;case 1:if(i=a.type,p=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(Gi===null||!Gi.has(p))))return a.flags|=65536,f&=-f,a.lanes|=f,f=s_(f),i_(f,n,a,c),kf(a,f),!1}a=a.return}while(a!==null);return!1}var r_=Error(r(461)),qt=!1;function Yt(n,i,a,c){i.child=n===null?Qy(i,null,a,c):lo(i,n.child,a,c)}function a_(n,i,a,c,f){a=a.render;var p=i.ref;if("ref"in c){var T={};for(var N in c)N!=="ref"&&(T[N]=c[N])}else T=c;return ra(i),c=qf(n,i,a,T,p,f),N=zf(),n!==null&&!qt?(Bf(n,i,f),ui(n,i,f)):(Ye&&N&&Nf(i),i.flags|=1,Yt(n,i,c,f),i.child)}function o_(n,i,a,c,f){if(n===null){var p=a.type;return typeof p=="function"&&!Tf(p)&&p.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=p,l_(n,i,p,c,f)):(n=ku(a.type,null,c,i,i.mode,f),n.ref=i.ref,n.return=i,i.child=n)}if(p=n.child,!hm(n,f)){var T=p.memoizedProps;if(a=a.compare,a=a!==null?a:wl,a(T,c)&&n.ref===i.ref)return ui(n,i,f)}return i.flags|=1,n=si(p,c),n.ref=i.ref,n.return=i,i.child=n}function l_(n,i,a,c,f){if(n!==null){var p=n.memoizedProps;if(wl(p,c)&&n.ref===i.ref)if(qt=!1,i.pendingProps=c=p,hm(n,f))(n.flags&131072)!==0&&(qt=!0);else return i.lanes=n.lanes,ui(n,i,f)}return rm(n,i,a,c,f)}function c_(n,i,a){var c=i.pendingProps,f=c.children,p=n!==null?n.memoizedState:null;if(c.mode==="hidden"){if((i.flags&128)!==0){if(c=p!==null?p.baseLanes|a:a,n!==null){for(f=i.child=n.child,p=0;f!==null;)p=p|f.lanes|f.childLanes,f=f.sibling;i.childLanes=p&~c}else i.childLanes=0,i.child=null;return u_(n,i,c,a)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},n!==null&&qu(i,p!==null?p.cachePool:null),p!==null?ly(i,p):Lf(),Xy(i);else return i.lanes=i.childLanes=536870912,u_(n,i,p!==null?p.baseLanes|a:a,a)}else p!==null?(qu(i,p.cachePool),ly(i,p),Ui(),i.memoizedState=null):(n!==null&&qu(i,null),Lf(),Ui());return Yt(n,i,f,a),i.child}function u_(n,i,a,c){var f=Df();return f=f===null?null:{parent:Dt._currentValue,pool:f},i.memoizedState={baseLanes:a,cachePool:f},n!==null&&qu(i,null),Lf(),Xy(i),n!==null&&jl(n,i,c,!0),null}function id(n,i){var a=i.ref;if(a===null)n!==null&&n.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(n===null||n.ref!==a)&&(i.flags|=4194816)}}function rm(n,i,a,c,f){return ra(i),a=qf(n,i,a,c,void 0,f),c=zf(),n!==null&&!qt?(Bf(n,i,f),ui(n,i,f)):(Ye&&c&&Nf(i),i.flags|=1,Yt(n,i,a,f),i.child)}function d_(n,i,a,c,f,p){return ra(i),i.updateQueue=null,a=uy(i,c,a,f),cy(n),c=zf(),n!==null&&!qt?(Bf(n,i,p),ui(n,i,p)):(Ye&&c&&Nf(i),i.flags|=1,Yt(n,i,a,p),i.child)}function h_(n,i,a,c,f){if(ra(i),i.stateNode===null){var p=Za,T=a.contextType;typeof T=="object"&&T!==null&&(p=an(T)),p=new a(c,p),i.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=sm,i.stateNode=p,p._reactInternals=i,p=i.stateNode,p.props=c,p.state=i.memoizedState,p.refs={},Mf(i),T=a.contextType,p.context=typeof T=="object"&&T!==null?an(T):Za,p.state=i.memoizedState,T=a.getDerivedStateFromProps,typeof T=="function"&&(nm(i,a,T,c),p.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(T=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),T!==p.state&&sm.enqueueReplaceState(p,p.state,null),Ll(i,c,p,f),Vl(),p.state=i.memoizedState),typeof p.componentDidMount=="function"&&(i.flags|=4194308),c=!0}else if(n===null){p=i.stateNode;var N=i.memoizedProps,P=la(a,N);p.props=P;var H=p.context,Z=a.contextType;T=Za,typeof Z=="object"&&Z!==null&&(T=an(Z));var ne=a.getDerivedStateFromProps;Z=typeof ne=="function"||typeof p.getSnapshotBeforeUpdate=="function",N=i.pendingProps!==N,Z||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(N||H!==T)&&Zy(i,p,c,T),Mi=!1;var G=i.memoizedState;p.state=G,Ll(i,c,p,f),Vl(),H=i.memoizedState,N||G!==H||Mi?(typeof ne=="function"&&(nm(i,a,ne,c),H=i.memoizedState),(P=Mi||Wy(i,a,P,c,G,H,T))?(Z||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(i.flags|=4194308)):(typeof p.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=c,i.memoizedState=H),p.props=c,p.state=H,p.context=T,c=P):(typeof p.componentDidMount=="function"&&(i.flags|=4194308),c=!1)}else{p=i.stateNode,Pf(n,i),T=i.memoizedProps,Z=la(a,T),p.props=Z,ne=i.pendingProps,G=p.context,H=a.contextType,P=Za,typeof H=="object"&&H!==null&&(P=an(H)),N=a.getDerivedStateFromProps,(H=typeof N=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(T!==ne||G!==P)&&Zy(i,p,c,P),Mi=!1,G=i.memoizedState,p.state=G,Ll(i,c,p,f),Vl();var Y=i.memoizedState;T!==ne||G!==Y||Mi||n!==null&&n.dependencies!==null&&Uu(n.dependencies)?(typeof N=="function"&&(nm(i,a,N,c),Y=i.memoizedState),(Z=Mi||Wy(i,a,Z,c,G,Y,P)||n!==null&&n.dependencies!==null&&Uu(n.dependencies))?(H||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(c,Y,P),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(c,Y,P)),typeof p.componentDidUpdate=="function"&&(i.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof p.componentDidUpdate!="function"||T===n.memoizedProps&&G===n.memoizedState||(i.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||T===n.memoizedProps&&G===n.memoizedState||(i.flags|=1024),i.memoizedProps=c,i.memoizedState=Y),p.props=c,p.state=Y,p.context=P,c=Z):(typeof p.componentDidUpdate!="function"||T===n.memoizedProps&&G===n.memoizedState||(i.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||T===n.memoizedProps&&G===n.memoizedState||(i.flags|=1024),c=!1)}return p=c,id(n,i),c=(i.flags&128)!==0,p||c?(p=i.stateNode,a=c&&typeof a.getDerivedStateFromError!="function"?null:p.render(),i.flags|=1,n!==null&&c?(i.child=lo(i,n.child,null,f),i.child=lo(i,null,a,f)):Yt(n,i,a,f),i.memoizedState=p.state,n=i.child):n=ui(n,i,f),n}function f_(n,i,a,c){return Cl(),i.flags|=256,Yt(n,i,a,c),i.child}var am={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function om(n){return{baseLanes:n,cachePool:ey()}}function lm(n,i,a){return n=n!==null?n.childLanes&~a:0,i&&(n|=Jn),n}function m_(n,i,a){var c=i.pendingProps,f=!1,p=(i.flags&128)!==0,T;if((T=p)||(T=n!==null&&n.memoizedState===null?!1:(Ot.current&2)!==0),T&&(f=!0,i.flags&=-129),T=(i.flags&32)!==0,i.flags&=-33,n===null){if(Ye){if(f?Li(i):Ui(),Ye){var N=gt,P;if(P=N){e:{for(P=N,N=js;P.nodeType!==8;){if(!N){N=null;break e}if(P=cs(P.nextSibling),P===null){N=null;break e}}N=P}N!==null?(i.memoizedState={dehydrated:N,treeContext:ea!==null?{id:ii,overflow:ri}:null,retryLane:536870912,hydrationErrors:null},P=jn(18,null,null,0),P.stateNode=N,P.return=i,i.child=P,gn=i,gt=null,P=!0):P=!1}P||sa(i)}if(N=i.memoizedState,N!==null&&(N=N.dehydrated,N!==null))return Gm(N)?i.lanes=32:i.lanes=536870912,null;ci(i)}return N=c.children,c=c.fallback,f?(Ui(),f=i.mode,N=rd({mode:"hidden",children:N},f),c=Jr(c,f,a,null),N.return=i,c.return=i,N.sibling=c,i.child=N,f=i.child,f.memoizedState=om(a),f.childLanes=lm(n,T,a),i.memoizedState=am,c):(Li(i),cm(i,N))}if(P=n.memoizedState,P!==null&&(N=P.dehydrated,N!==null)){if(p)i.flags&256?(Li(i),i.flags&=-257,i=um(n,i,a)):i.memoizedState!==null?(Ui(),i.child=n.child,i.flags|=128,i=null):(Ui(),f=c.fallback,N=i.mode,c=rd({mode:"visible",children:c.children},N),f=Jr(f,N,a,null),f.flags|=2,c.return=i,f.return=i,c.sibling=f,i.child=c,lo(i,n.child,null,a),c=i.child,c.memoizedState=om(a),c.childLanes=lm(n,T,a),i.memoizedState=am,i=f);else if(Li(i),Gm(N)){if(T=N.nextSibling&&N.nextSibling.dataset,T)var H=T.dgst;T=H,c=Error(r(419)),c.stack="",c.digest=T,Rl({value:c,source:null,stack:null}),i=um(n,i,a)}else if(qt||jl(n,i,a,!1),T=(a&n.childLanes)!==0,qt||T){if(T=ot,T!==null&&(c=a&-a,c=(c&42)!==0?1:wi(c),c=(c&(T.suspendedLanes|a))!==0?0:c,c!==0&&c!==P.retryLane))throw P.retryLane=c,Wa(n,c),kn(T,n,c),r_;N.data==="$?"||Im(),i=um(n,i,a)}else N.data==="$?"?(i.flags|=192,i.child=n.child,i=null):(n=P.treeContext,gt=cs(N.nextSibling),gn=i,Ye=!0,na=null,js=!1,n!==null&&(Xn[Wn++]=ii,Xn[Wn++]=ri,Xn[Wn++]=ea,ii=n.id,ri=n.overflow,ea=i),i=cm(i,c.children),i.flags|=4096);return i}return f?(Ui(),f=c.fallback,N=i.mode,P=n.child,H=P.sibling,c=si(P,{mode:"hidden",children:c.children}),c.subtreeFlags=P.subtreeFlags&65011712,H!==null?f=si(H,f):(f=Jr(f,N,a,null),f.flags|=2),f.return=i,c.return=i,c.sibling=f,i.child=c,c=f,f=i.child,N=n.child.memoizedState,N===null?N=om(a):(P=N.cachePool,P!==null?(H=Dt._currentValue,P=P.parent!==H?{parent:H,pool:H}:P):P=ey(),N={baseLanes:N.baseLanes|a,cachePool:P}),f.memoizedState=N,f.childLanes=lm(n,T,a),i.memoizedState=am,c):(Li(i),a=n.child,n=a.sibling,a=si(a,{mode:"visible",children:c.children}),a.return=i,a.sibling=null,n!==null&&(T=i.deletions,T===null?(i.deletions=[n],i.flags|=16):T.push(n)),i.child=a,i.memoizedState=null,a)}function cm(n,i){return i=rd({mode:"visible",children:i},n.mode),i.return=n,n.child=i}function rd(n,i){return n=jn(22,n,null,i),n.lanes=0,n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},n}function um(n,i,a){return lo(i,n.child,null,a),n=cm(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function p_(n,i,a){n.lanes|=i;var c=n.alternate;c!==null&&(c.lanes|=i),If(n.return,i,a)}function dm(n,i,a,c,f){var p=n.memoizedState;p===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:f}:(p.isBackwards=i,p.rendering=null,p.renderingStartTime=0,p.last=c,p.tail=a,p.tailMode=f)}function g_(n,i,a){var c=i.pendingProps,f=c.revealOrder,p=c.tail;if(Yt(n,i,c.children,a),c=Ot.current,(c&2)!==0)c=c&1|2,i.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&p_(n,a,i);else if(n.tag===19)p_(n,a,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}switch(le(Ot,c),f){case"forwards":for(a=i.child,f=null;a!==null;)n=a.alternate,n!==null&&td(n)===null&&(f=a),a=a.sibling;a=f,a===null?(f=i.child,i.child=null):(f=a.sibling,a.sibling=null),dm(i,!1,f,a,p);break;case"backwards":for(a=null,f=i.child,i.child=null;f!==null;){if(n=f.alternate,n!==null&&td(n)===null){i.child=f;break}n=f.sibling,f.sibling=a,a=f,f=n}dm(i,!0,a,null,p);break;case"together":dm(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function ui(n,i,a){if(n!==null&&(i.dependencies=n.dependencies),Hi|=i.lanes,(a&i.childLanes)===0)if(n!==null){if(jl(n,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(n!==null&&i.child!==n.child)throw Error(r(153));if(i.child!==null){for(n=i.child,a=si(n,n.pendingProps),i.child=a,a.return=i;n.sibling!==null;)n=n.sibling,a=a.sibling=si(n,n.pendingProps),a.return=i;a.sibling=null}return i.child}function hm(n,i){return(n.lanes&i)!==0?!0:(n=n.dependencies,!!(n!==null&&Uu(n)))}function Ew(n,i,a){switch(i.tag){case 3:at(i,i.stateNode.containerInfo),Oi(i,Dt,n.memoizedState.cache),Cl();break;case 27:case 5:Si(i);break;case 4:at(i,i.stateNode.containerInfo);break;case 10:Oi(i,i.type,i.memoizedProps.value);break;case 13:var c=i.memoizedState;if(c!==null)return c.dehydrated!==null?(Li(i),i.flags|=128,null):(a&i.child.childLanes)!==0?m_(n,i,a):(Li(i),n=ui(n,i,a),n!==null?n.sibling:null);Li(i);break;case 19:var f=(n.flags&128)!==0;if(c=(a&i.childLanes)!==0,c||(jl(n,i,a,!1),c=(a&i.childLanes)!==0),f){if(c)return g_(n,i,a);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),le(Ot,Ot.current),c)break;return null;case 22:case 23:return i.lanes=0,c_(n,i,a);case 24:Oi(i,Dt,n.memoizedState.cache)}return ui(n,i,a)}function v_(n,i,a){if(n!==null)if(n.memoizedProps!==i.pendingProps)qt=!0;else{if(!hm(n,a)&&(i.flags&128)===0)return qt=!1,Ew(n,i,a);qt=(n.flags&131072)!==0}else qt=!1,Ye&&(i.flags&1048576)!==0&&Kv(i,Lu,i.index);switch(i.lanes=0,i.tag){case 16:e:{n=i.pendingProps;var c=i.elementType,f=c._init;if(c=f(c._payload),i.type=c,typeof c=="function")Tf(c)?(n=la(c,n),i.tag=1,i=h_(null,i,c,n,a)):(i.tag=0,i=rm(null,i,c,n,a));else{if(c!=null){if(f=c.$$typeof,f===J){i.tag=11,i=a_(null,i,c,n,a);break e}else if(f===O){i.tag=14,i=o_(null,i,c,n,a);break e}}throw i=Ce(c)||c,Error(r(306,i,""))}}return i;case 0:return rm(n,i,i.type,i.pendingProps,a);case 1:return c=i.type,f=la(c,i.pendingProps),h_(n,i,c,f,a);case 3:e:{if(at(i,i.stateNode.containerInfo),n===null)throw Error(r(387));c=i.pendingProps;var p=i.memoizedState;f=p.element,Pf(n,i),Ll(i,c,null,a);var T=i.memoizedState;if(c=T.cache,Oi(i,Dt,c),c!==p.cache&&Cf(i,[Dt],a,!0),Vl(),c=T.element,p.isDehydrated)if(p={element:c,isDehydrated:!1,cache:T.cache},i.updateQueue.baseState=p,i.memoizedState=p,i.flags&256){i=f_(n,i,c,a);break e}else if(c!==f){f=Yn(Error(r(424)),i),Rl(f),i=f_(n,i,c,a);break e}else{switch(n=i.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(gt=cs(n.firstChild),gn=i,Ye=!0,na=null,js=!0,a=Qy(i,null,c,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Cl(),c===f){i=ui(n,i,a);break e}Yt(n,i,c,a)}i=i.child}return i;case 26:return id(n,i),n===null?(a=TE(i.type,null,i.pendingProps,null))?i.memoizedState=a:Ye||(a=i.type,n=i.pendingProps,c=_d(xe.current).createElement(a),c[Ct]=i,c[At]=n,Xt(c,a,n),_t(c),i.stateNode=c):i.memoizedState=TE(i.type,n.memoizedProps,i.pendingProps,n.memoizedState),null;case 27:return Si(i),n===null&&Ye&&(c=i.stateNode=yE(i.type,i.pendingProps,xe.current),gn=i,js=!0,f=gt,Yi(i.type)?($m=f,gt=cs(c.firstChild)):gt=f),Yt(n,i,i.pendingProps.children,a),id(n,i),n===null&&(i.flags|=4194304),i.child;case 5:return n===null&&Ye&&((f=c=gt)&&(c=Yw(c,i.type,i.pendingProps,js),c!==null?(i.stateNode=c,gn=i,gt=cs(c.firstChild),js=!1,f=!0):f=!1),f||sa(i)),Si(i),f=i.type,p=i.pendingProps,T=n!==null?n.memoizedProps:null,c=p.children,zm(f,p)?c=null:T!==null&&zm(f,T)&&(i.flags|=32),i.memoizedState!==null&&(f=qf(n,i,hw,null,null,a),ac._currentValue=f),id(n,i),Yt(n,i,c,a),i.child;case 6:return n===null&&Ye&&((n=a=gt)&&(a=Qw(a,i.pendingProps,js),a!==null?(i.stateNode=a,gn=i,gt=null,n=!0):n=!1),n||sa(i)),null;case 13:return m_(n,i,a);case 4:return at(i,i.stateNode.containerInfo),c=i.pendingProps,n===null?i.child=lo(i,null,c,a):Yt(n,i,c,a),i.child;case 11:return a_(n,i,i.type,i.pendingProps,a);case 7:return Yt(n,i,i.pendingProps,a),i.child;case 8:return Yt(n,i,i.pendingProps.children,a),i.child;case 12:return Yt(n,i,i.pendingProps.children,a),i.child;case 10:return c=i.pendingProps,Oi(i,i.type,c.value),Yt(n,i,c.children,a),i.child;case 9:return f=i.type._context,c=i.pendingProps.children,ra(i),f=an(f),c=c(f),i.flags|=1,Yt(n,i,c,a),i.child;case 14:return o_(n,i,i.type,i.pendingProps,a);case 15:return l_(n,i,i.type,i.pendingProps,a);case 19:return g_(n,i,a);case 31:return c=i.pendingProps,a=i.mode,c={mode:c.mode,children:c.children},n===null?(a=rd(c,a),a.ref=i.ref,i.child=a,a.return=i,i=a):(a=si(n.child,c),a.ref=i.ref,i.child=a,a.return=i,i=a),i;case 22:return c_(n,i,a);case 24:return ra(i),c=an(Dt),n===null?(f=Df(),f===null&&(f=ot,p=Rf(),f.pooledCache=p,p.refCount++,p!==null&&(f.pooledCacheLanes|=a),f=p),i.memoizedState={parent:c,cache:f},Mf(i),Oi(i,Dt,f)):((n.lanes&a)!==0&&(Pf(n,i),Ll(i,null,null,a),Vl()),f=n.memoizedState,p=i.memoizedState,f.parent!==c?(f={parent:c,cache:c},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),Oi(i,Dt,c)):(c=p.cache,Oi(i,Dt,c),c!==f.cache&&Cf(i,[Dt],a,!0))),Yt(n,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(r(156,i.tag))}function di(n){n.flags|=4}function y_(n,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!wE(i)){if(i=Zn.current,i!==null&&((Be&4194048)===Be?Ds!==null:(Be&62914560)!==Be&&(Be&536870912)===0||i!==Ds))throw Pl=Of,ty;n.flags|=8192}}function ad(n,i){i!==null&&(n.flags|=4),n.flags&16384&&(i=n.tag!==22?ll():536870912,n.lanes|=i,fo|=i)}function Gl(n,i){if(!Ye)switch(n.tailMode){case"hidden":i=n.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function ht(n){var i=n.alternate!==null&&n.alternate.child===n.child,a=0,c=0;if(i)for(var f=n.child;f!==null;)a|=f.lanes|f.childLanes,c|=f.subtreeFlags&65011712,c|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)a|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=c,n.childLanes=a,i}function Tw(n,i,a){var c=i.pendingProps;switch(Sf(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ht(i),null;case 1:return ht(i),null;case 3:return a=i.stateNode,c=null,n!==null&&(c=n.memoizedState.cache),i.memoizedState.cache!==c&&(i.flags|=2048),oi(Dt),_s(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(n===null||n.child===null)&&(Il(i)?di(i):n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Xv())),ht(i),null;case 26:return a=i.memoizedState,n===null?(di(i),a!==null?(ht(i),y_(i,a)):(ht(i),i.flags&=-16777217)):a?a!==n.memoizedState?(di(i),ht(i),y_(i,a)):(ht(i),i.flags&=-16777217):(n.memoizedProps!==c&&di(i),ht(i),i.flags&=-16777217),null;case 27:Hs(i),a=xe.current;var f=i.type;if(n!==null&&i.stateNode!=null)n.memoizedProps!==c&&di(i);else{if(!c){if(i.stateNode===null)throw Error(r(166));return ht(i),null}n=_e.current,Il(i)?Yv(i):(n=yE(f,c,a),i.stateNode=n,di(i))}return ht(i),null;case 5:if(Hs(i),a=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==c&&di(i);else{if(!c){if(i.stateNode===null)throw Error(r(166));return ht(i),null}if(n=_e.current,Il(i))Yv(i);else{switch(f=_d(xe.current),n){case 1:n=f.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:n=f.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":n=f.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":n=f.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":n=f.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof c.is=="string"?f.createElement("select",{is:c.is}):f.createElement("select"),c.multiple?n.multiple=!0:c.size&&(n.size=c.size);break;default:n=typeof c.is=="string"?f.createElement(a,{is:c.is}):f.createElement(a)}}n[Ct]=i,n[At]=c;e:for(f=i.child;f!==null;){if(f.tag===5||f.tag===6)n.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===i)break e;for(;f.sibling===null;){if(f.return===null||f.return===i)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}i.stateNode=n;e:switch(Xt(n,a,c),a){case"button":case"input":case"select":case"textarea":n=!!c.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&di(i)}}return ht(i),i.flags&=-16777217,null;case 6:if(n&&i.stateNode!=null)n.memoizedProps!==c&&di(i);else{if(typeof c!="string"&&i.stateNode===null)throw Error(r(166));if(n=xe.current,Il(i)){if(n=i.stateNode,a=i.memoizedProps,c=null,f=gn,f!==null)switch(f.tag){case 27:case 5:c=f.memoizedProps}n[Ct]=i,n=!!(n.nodeValue===a||c!==null&&c.suppressHydrationWarning===!0||dE(n.nodeValue,a)),n||sa(i)}else n=_d(n).createTextNode(c),n[Ct]=i,i.stateNode=n}return ht(i),null;case 13:if(c=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=Il(i),c!==null&&c.dehydrated!==null){if(n===null){if(!f)throw Error(r(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));f[Ct]=i}else Cl(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;ht(i),f=!1}else f=Xv(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return i.flags&256?(ci(i),i):(ci(i),null)}if(ci(i),(i.flags&128)!==0)return i.lanes=a,i;if(a=c!==null,n=n!==null&&n.memoizedState!==null,a){c=i.child,f=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(f=c.alternate.memoizedState.cachePool.pool);var p=null;c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(p=c.memoizedState.cachePool.pool),p!==f&&(c.flags|=2048)}return a!==n&&a&&(i.child.flags|=8192),ad(i,i.updateQueue),ht(i),null;case 4:return _s(),n===null&&Vm(i.stateNode.containerInfo),ht(i),null;case 10:return oi(i.type),ht(i),null;case 19:if(de(Ot),f=i.memoizedState,f===null)return ht(i),null;if(c=(i.flags&128)!==0,p=f.rendering,p===null)if(c)Gl(f,!1);else{if(vt!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(p=td(n),p!==null){for(i.flags|=128,Gl(f,!1),n=p.updateQueue,i.updateQueue=n,ad(i,n),i.subtreeFlags=0,n=a,a=i.child;a!==null;)$v(a,n),a=a.sibling;return le(Ot,Ot.current&1|2),i.child}n=n.sibling}f.tail!==null&&zn()>cd&&(i.flags|=128,c=!0,Gl(f,!1),i.lanes=4194304)}else{if(!c)if(n=td(p),n!==null){if(i.flags|=128,c=!0,n=n.updateQueue,i.updateQueue=n,ad(i,n),Gl(f,!0),f.tail===null&&f.tailMode==="hidden"&&!p.alternate&&!Ye)return ht(i),null}else 2*zn()-f.renderingStartTime>cd&&a!==536870912&&(i.flags|=128,c=!0,Gl(f,!1),i.lanes=4194304);f.isBackwards?(p.sibling=i.child,i.child=p):(n=f.last,n!==null?n.sibling=p:i.child=p,f.last=p)}return f.tail!==null?(i=f.tail,f.rendering=i,f.tail=i.sibling,f.renderingStartTime=zn(),i.sibling=null,n=Ot.current,le(Ot,c?n&1|2:n&1),i):(ht(i),null);case 22:case 23:return ci(i),Uf(),c=i.memoizedState!==null,n!==null?n.memoizedState!==null!==c&&(i.flags|=8192):c&&(i.flags|=8192),c?(a&536870912)!==0&&(i.flags&128)===0&&(ht(i),i.subtreeFlags&6&&(i.flags|=8192)):ht(i),a=i.updateQueue,a!==null&&ad(i,a.retryQueue),a=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),c=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),c!==a&&(i.flags|=2048),n!==null&&de(aa),null;case 24:return a=null,n!==null&&(a=n.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),oi(Dt),ht(i),null;case 25:return null;case 30:return null}throw Error(r(156,i.tag))}function bw(n,i){switch(Sf(i),i.tag){case 1:return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return oi(Dt),_s(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 26:case 27:case 5:return Hs(i),null;case 13:if(ci(i),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(r(340));Cl()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return de(Ot),null;case 4:return _s(),null;case 10:return oi(i.type),null;case 22:case 23:return ci(i),Uf(),n!==null&&de(aa),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 24:return oi(Dt),null;case 25:return null;default:return null}}function __(n,i){switch(Sf(i),i.tag){case 3:oi(Dt),_s();break;case 26:case 27:case 5:Hs(i);break;case 4:_s();break;case 13:ci(i);break;case 19:de(Ot);break;case 10:oi(i.type);break;case 22:case 23:ci(i),Uf(),n!==null&&de(aa);break;case 24:oi(Dt)}}function $l(n,i){try{var a=i.updateQueue,c=a!==null?a.lastEffect:null;if(c!==null){var f=c.next;a=f;do{if((a.tag&n)===n){c=void 0;var p=a.create,T=a.inst;c=p(),T.destroy=c}a=a.next}while(a!==f)}}catch(N){st(i,i.return,N)}}function Fi(n,i,a){try{var c=i.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var p=f.next;c=p;do{if((c.tag&n)===n){var T=c.inst,N=T.destroy;if(N!==void 0){T.destroy=void 0,f=i;var P=a,H=N;try{H()}catch(Z){st(f,P,Z)}}}c=c.next}while(c!==p)}}catch(Z){st(i,i.return,Z)}}function E_(n){var i=n.updateQueue;if(i!==null){var a=n.stateNode;try{oy(i,a)}catch(c){st(n,n.return,c)}}}function T_(n,i,a){a.props=la(n.type,n.memoizedProps),a.state=n.memoizedState;try{a.componentWillUnmount()}catch(c){st(n,i,c)}}function Kl(n,i){try{var a=n.ref;if(a!==null){switch(n.tag){case 26:case 27:case 5:var c=n.stateNode;break;case 30:c=n.stateNode;break;default:c=n.stateNode}typeof a=="function"?n.refCleanup=a(c):a.current=c}}catch(f){st(n,i,f)}}function Os(n,i){var a=n.ref,c=n.refCleanup;if(a!==null)if(typeof c=="function")try{c()}catch(f){st(n,i,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){st(n,i,f)}else a.current=null}function b_(n){var i=n.type,a=n.memoizedProps,c=n.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&c.focus();break e;case"img":a.src?c.src=a.src:a.srcSet&&(c.srcset=a.srcSet)}}catch(f){st(n,n.return,f)}}function fm(n,i,a){try{var c=n.stateNode;Bw(c,n.type,a,i),c[At]=i}catch(f){st(n,n.return,f)}}function A_(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Yi(n.type)||n.tag===4}function mm(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||A_(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Yi(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function pm(n,i,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(n,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(n),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=yd));else if(c!==4&&(c===27&&Yi(n.type)&&(a=n.stateNode,i=null),n=n.child,n!==null))for(pm(n,i,a),n=n.sibling;n!==null;)pm(n,i,a),n=n.sibling}function od(n,i,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?a.insertBefore(n,i):a.appendChild(n);else if(c!==4&&(c===27&&Yi(n.type)&&(a=n.stateNode),n=n.child,n!==null))for(od(n,i,a),n=n.sibling;n!==null;)od(n,i,a),n=n.sibling}function N_(n){var i=n.stateNode,a=n.memoizedProps;try{for(var c=n.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);Xt(i,c,a),i[Ct]=n,i[At]=a}catch(p){st(n,n.return,p)}}var hi=!1,Tt=!1,gm=!1,S_=typeof WeakSet=="function"?WeakSet:Set,zt=null;function Aw(n,i){if(n=n.containerInfo,Fm=Sd,n=kv(n),mf(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var f=c.anchorOffset,p=c.focusNode;c=c.focusOffset;try{a.nodeType,p.nodeType}catch{a=null;break e}var T=0,N=-1,P=-1,H=0,Z=0,ne=n,G=null;t:for(;;){for(var Y;ne!==a||f!==0&&ne.nodeType!==3||(N=T+f),ne!==p||c!==0&&ne.nodeType!==3||(P=T+c),ne.nodeType===3&&(T+=ne.nodeValue.length),(Y=ne.firstChild)!==null;)G=ne,ne=Y;for(;;){if(ne===n)break t;if(G===a&&++H===f&&(N=T),G===p&&++Z===c&&(P=T),(Y=ne.nextSibling)!==null)break;ne=G,G=ne.parentNode}ne=Y}a=N===-1||P===-1?null:{start:N,end:P}}else a=null}a=a||{start:0,end:0}}else a=null;for(qm={focusedElem:n,selectionRange:a},Sd=!1,zt=i;zt!==null;)if(i=zt,n=i.child,(i.subtreeFlags&1024)!==0&&n!==null)n.return=i,zt=n;else for(;zt!==null;){switch(i=zt,p=i.alternate,n=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((n&1024)!==0&&p!==null){n=void 0,a=i,f=p.memoizedProps,p=p.memoizedState,c=a.stateNode;try{var we=la(a.type,f,a.elementType===a.type);n=c.getSnapshotBeforeUpdate(we,p),c.__reactInternalSnapshotBeforeUpdate=n}catch(be){st(a,a.return,be)}}break;case 3:if((n&1024)!==0){if(n=i.stateNode.containerInfo,a=n.nodeType,a===9)Hm(n);else if(a===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Hm(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(r(163))}if(n=i.sibling,n!==null){n.return=i.return,zt=n;break}zt=i.return}}function w_(n,i,a){var c=a.flags;switch(a.tag){case 0:case 11:case 15:qi(n,a),c&4&&$l(5,a);break;case 1:if(qi(n,a),c&4)if(n=a.stateNode,i===null)try{n.componentDidMount()}catch(T){st(a,a.return,T)}else{var f=la(a.type,i.memoizedProps);i=i.memoizedState;try{n.componentDidUpdate(f,i,n.__reactInternalSnapshotBeforeUpdate)}catch(T){st(a,a.return,T)}}c&64&&E_(a),c&512&&Kl(a,a.return);break;case 3:if(qi(n,a),c&64&&(n=a.updateQueue,n!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{oy(n,i)}catch(T){st(a,a.return,T)}}break;case 27:i===null&&c&4&&N_(a);case 26:case 5:qi(n,a),i===null&&c&4&&b_(a),c&512&&Kl(a,a.return);break;case 12:qi(n,a);break;case 13:qi(n,a),c&4&&C_(n,a),c&64&&(n=a.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(a=Dw.bind(null,a),Xw(n,a))));break;case 22:if(c=a.memoizedState!==null||hi,!c){i=i!==null&&i.memoizedState!==null||Tt,f=hi;var p=Tt;hi=c,(Tt=i)&&!p?zi(n,a,(a.subtreeFlags&8772)!==0):qi(n,a),hi=f,Tt=p}break;case 30:break;default:qi(n,a)}}function x_(n){var i=n.alternate;i!==null&&(n.alternate=null,x_(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&Ci(i)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var ut=null,Tn=!1;function fi(n,i,a){for(a=a.child;a!==null;)I_(n,i,a),a=a.sibling}function I_(n,i,a){if(Xe&&typeof Xe.onCommitFiberUnmount=="function")try{Xe.onCommitFiberUnmount(pt,a)}catch{}switch(a.tag){case 26:Tt||Os(a,i),fi(n,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Tt||Os(a,i);var c=ut,f=Tn;Yi(a.type)&&(ut=a.stateNode,Tn=!1),fi(n,i,a),nc(a.stateNode),ut=c,Tn=f;break;case 5:Tt||Os(a,i);case 6:if(c=ut,f=Tn,ut=null,fi(n,i,a),ut=c,Tn=f,ut!==null)if(Tn)try{(ut.nodeType===9?ut.body:ut.nodeName==="HTML"?ut.ownerDocument.body:ut).removeChild(a.stateNode)}catch(p){st(a,i,p)}else try{ut.removeChild(a.stateNode)}catch(p){st(a,i,p)}break;case 18:ut!==null&&(Tn?(n=ut,gE(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,a.stateNode),uc(n)):gE(ut,a.stateNode));break;case 4:c=ut,f=Tn,ut=a.stateNode.containerInfo,Tn=!0,fi(n,i,a),ut=c,Tn=f;break;case 0:case 11:case 14:case 15:Tt||Fi(2,a,i),Tt||Fi(4,a,i),fi(n,i,a);break;case 1:Tt||(Os(a,i),c=a.stateNode,typeof c.componentWillUnmount=="function"&&T_(a,i,c)),fi(n,i,a);break;case 21:fi(n,i,a);break;case 22:Tt=(c=Tt)||a.memoizedState!==null,fi(n,i,a),Tt=c;break;default:fi(n,i,a)}}function C_(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{uc(n)}catch(a){st(i,i.return,a)}}function Nw(n){switch(n.tag){case 13:case 19:var i=n.stateNode;return i===null&&(i=n.stateNode=new S_),i;case 22:return n=n.stateNode,i=n._retryCache,i===null&&(i=n._retryCache=new S_),i;default:throw Error(r(435,n.tag))}}function vm(n,i){var a=Nw(n);i.forEach(function(c){var f=Ow.bind(null,n,c);a.has(c)||(a.add(c),c.then(f,f))})}function Dn(n,i){var a=i.deletions;if(a!==null)for(var c=0;c<a.length;c++){var f=a[c],p=n,T=i,N=T;e:for(;N!==null;){switch(N.tag){case 27:if(Yi(N.type)){ut=N.stateNode,Tn=!1;break e}break;case 5:ut=N.stateNode,Tn=!1;break e;case 3:case 4:ut=N.stateNode.containerInfo,Tn=!0;break e}N=N.return}if(ut===null)throw Error(r(160));I_(p,T,f),ut=null,Tn=!1,p=f.alternate,p!==null&&(p.return=null),f.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)R_(i,n),i=i.sibling}var ls=null;function R_(n,i){var a=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Dn(i,n),On(n),c&4&&(Fi(3,n,n.return),$l(3,n),Fi(5,n,n.return));break;case 1:Dn(i,n),On(n),c&512&&(Tt||a===null||Os(a,a.return)),c&64&&hi&&(n=n.updateQueue,n!==null&&(c=n.callbacks,c!==null&&(a=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=a===null?c:a.concat(c))));break;case 26:var f=ls;if(Dn(i,n),On(n),c&512&&(Tt||a===null||Os(a,a.return)),c&4){var p=a!==null?a.memoizedState:null;if(c=n.memoizedState,a===null)if(c===null)if(n.stateNode===null){e:{c=n.type,a=n.memoizedProps,f=f.ownerDocument||f;t:switch(c){case"title":p=f.getElementsByTagName("title")[0],(!p||p[Vr]||p[Ct]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=f.createElement(c),f.head.insertBefore(p,f.querySelector("head > title"))),Xt(p,c,a),p[Ct]=n,_t(p),c=p;break e;case"link":var T=NE("link","href",f).get(c+(a.href||""));if(T){for(var N=0;N<T.length;N++)if(p=T[N],p.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&p.getAttribute("rel")===(a.rel==null?null:a.rel)&&p.getAttribute("title")===(a.title==null?null:a.title)&&p.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){T.splice(N,1);break t}}p=f.createElement(c),Xt(p,c,a),f.head.appendChild(p);break;case"meta":if(T=NE("meta","content",f).get(c+(a.content||""))){for(N=0;N<T.length;N++)if(p=T[N],p.getAttribute("content")===(a.content==null?null:""+a.content)&&p.getAttribute("name")===(a.name==null?null:a.name)&&p.getAttribute("property")===(a.property==null?null:a.property)&&p.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&p.getAttribute("charset")===(a.charSet==null?null:a.charSet)){T.splice(N,1);break t}}p=f.createElement(c),Xt(p,c,a),f.head.appendChild(p);break;default:throw Error(r(468,c))}p[Ct]=n,_t(p),c=p}n.stateNode=c}else SE(f,n.type,n.stateNode);else n.stateNode=AE(f,c,n.memoizedProps);else p!==c?(p===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):p.count--,c===null?SE(f,n.type,n.stateNode):AE(f,c,n.memoizedProps)):c===null&&n.stateNode!==null&&fm(n,n.memoizedProps,a.memoizedProps)}break;case 27:Dn(i,n),On(n),c&512&&(Tt||a===null||Os(a,a.return)),a!==null&&c&4&&fm(n,n.memoizedProps,a.memoizedProps);break;case 5:if(Dn(i,n),On(n),c&512&&(Tt||a===null||Os(a,a.return)),n.flags&32){f=n.stateNode;try{Hn(f,"")}catch(Y){st(n,n.return,Y)}}c&4&&n.stateNode!=null&&(f=n.memoizedProps,fm(n,f,a!==null?a.memoizedProps:f)),c&1024&&(gm=!0);break;case 6:if(Dn(i,n),On(n),c&4){if(n.stateNode===null)throw Error(r(162));c=n.memoizedProps,a=n.stateNode;try{a.nodeValue=c}catch(Y){st(n,n.return,Y)}}break;case 3:if(bd=null,f=ls,ls=Ed(i.containerInfo),Dn(i,n),ls=f,On(n),c&4&&a!==null&&a.memoizedState.isDehydrated)try{uc(i.containerInfo)}catch(Y){st(n,n.return,Y)}gm&&(gm=!1,j_(n));break;case 4:c=ls,ls=Ed(n.stateNode.containerInfo),Dn(i,n),On(n),ls=c;break;case 12:Dn(i,n),On(n);break;case 13:Dn(i,n),On(n),n.child.flags&8192&&n.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Am=zn()),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,vm(n,c)));break;case 22:f=n.memoizedState!==null;var P=a!==null&&a.memoizedState!==null,H=hi,Z=Tt;if(hi=H||f,Tt=Z||P,Dn(i,n),Tt=Z,hi=H,On(n),c&8192)e:for(i=n.stateNode,i._visibility=f?i._visibility&-2:i._visibility|1,f&&(a===null||P||hi||Tt||ca(n)),a=null,i=n;;){if(i.tag===5||i.tag===26){if(a===null){P=a=i;try{if(p=P.stateNode,f)T=p.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{N=P.stateNode;var ne=P.memoizedProps.style,G=ne!=null&&ne.hasOwnProperty("display")?ne.display:null;N.style.display=G==null||typeof G=="boolean"?"":(""+G).trim()}}catch(Y){st(P,P.return,Y)}}}else if(i.tag===6){if(a===null){P=i;try{P.stateNode.nodeValue=f?"":P.memoizedProps}catch(Y){st(P,P.return,Y)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===n)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break e;for(;i.sibling===null;){if(i.return===null||i.return===n)break e;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}c&4&&(c=n.updateQueue,c!==null&&(a=c.retryQueue,a!==null&&(c.retryQueue=null,vm(n,a))));break;case 19:Dn(i,n),On(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,vm(n,c)));break;case 30:break;case 21:break;default:Dn(i,n),On(n)}}function On(n){var i=n.flags;if(i&2){try{for(var a,c=n.return;c!==null;){if(A_(c)){a=c;break}c=c.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var f=a.stateNode,p=mm(n);od(n,p,f);break;case 5:var T=a.stateNode;a.flags&32&&(Hn(T,""),a.flags&=-33);var N=mm(n);od(n,N,T);break;case 3:case 4:var P=a.stateNode.containerInfo,H=mm(n);pm(n,H,P);break;default:throw Error(r(161))}}catch(Z){st(n,n.return,Z)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function j_(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var i=n;j_(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),n=n.sibling}}function qi(n,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)w_(n,i.alternate,i),i=i.sibling}function ca(n){for(n=n.child;n!==null;){var i=n;switch(i.tag){case 0:case 11:case 14:case 15:Fi(4,i,i.return),ca(i);break;case 1:Os(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&T_(i,i.return,a),ca(i);break;case 27:nc(i.stateNode);case 26:case 5:Os(i,i.return),ca(i);break;case 22:i.memoizedState===null&&ca(i);break;case 30:ca(i);break;default:ca(i)}n=n.sibling}}function zi(n,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var c=i.alternate,f=n,p=i,T=p.flags;switch(p.tag){case 0:case 11:case 15:zi(f,p,a),$l(4,p);break;case 1:if(zi(f,p,a),c=p,f=c.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(H){st(c,c.return,H)}if(c=p,f=c.updateQueue,f!==null){var N=c.stateNode;try{var P=f.shared.hiddenCallbacks;if(P!==null)for(f.shared.hiddenCallbacks=null,f=0;f<P.length;f++)ay(P[f],N)}catch(H){st(c,c.return,H)}}a&&T&64&&E_(p),Kl(p,p.return);break;case 27:N_(p);case 26:case 5:zi(f,p,a),a&&c===null&&T&4&&b_(p),Kl(p,p.return);break;case 12:zi(f,p,a);break;case 13:zi(f,p,a),a&&T&4&&C_(f,p);break;case 22:p.memoizedState===null&&zi(f,p,a),Kl(p,p.return);break;case 30:break;default:zi(f,p,a)}i=i.sibling}}function ym(n,i){var a=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),n=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(n=i.memoizedState.cachePool.pool),n!==a&&(n!=null&&n.refCount++,a!=null&&Dl(a))}function _m(n,i){n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&Dl(n))}function Ms(n,i,a,c){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)D_(n,i,a,c),i=i.sibling}function D_(n,i,a,c){var f=i.flags;switch(i.tag){case 0:case 11:case 15:Ms(n,i,a,c),f&2048&&$l(9,i);break;case 1:Ms(n,i,a,c);break;case 3:Ms(n,i,a,c),f&2048&&(n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&Dl(n)));break;case 12:if(f&2048){Ms(n,i,a,c),n=i.stateNode;try{var p=i.memoizedProps,T=p.id,N=p.onPostCommit;typeof N=="function"&&N(T,i.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(P){st(i,i.return,P)}}else Ms(n,i,a,c);break;case 13:Ms(n,i,a,c);break;case 23:break;case 22:p=i.stateNode,T=i.alternate,i.memoizedState!==null?p._visibility&2?Ms(n,i,a,c):Yl(n,i):p._visibility&2?Ms(n,i,a,c):(p._visibility|=2,co(n,i,a,c,(i.subtreeFlags&10256)!==0)),f&2048&&ym(T,i);break;case 24:Ms(n,i,a,c),f&2048&&_m(i.alternate,i);break;default:Ms(n,i,a,c)}}function co(n,i,a,c,f){for(f=f&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var p=n,T=i,N=a,P=c,H=T.flags;switch(T.tag){case 0:case 11:case 15:co(p,T,N,P,f),$l(8,T);break;case 23:break;case 22:var Z=T.stateNode;T.memoizedState!==null?Z._visibility&2?co(p,T,N,P,f):Yl(p,T):(Z._visibility|=2,co(p,T,N,P,f)),f&&H&2048&&ym(T.alternate,T);break;case 24:co(p,T,N,P,f),f&&H&2048&&_m(T.alternate,T);break;default:co(p,T,N,P,f)}i=i.sibling}}function Yl(n,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=n,c=i,f=c.flags;switch(c.tag){case 22:Yl(a,c),f&2048&&ym(c.alternate,c);break;case 24:Yl(a,c),f&2048&&_m(c.alternate,c);break;default:Yl(a,c)}i=i.sibling}}var Ql=8192;function uo(n){if(n.subtreeFlags&Ql)for(n=n.child;n!==null;)O_(n),n=n.sibling}function O_(n){switch(n.tag){case 26:uo(n),n.flags&Ql&&n.memoizedState!==null&&cx(ls,n.memoizedState,n.memoizedProps);break;case 5:uo(n);break;case 3:case 4:var i=ls;ls=Ed(n.stateNode.containerInfo),uo(n),ls=i;break;case 22:n.memoizedState===null&&(i=n.alternate,i!==null&&i.memoizedState!==null?(i=Ql,Ql=16777216,uo(n),Ql=i):uo(n));break;default:uo(n)}}function M_(n){var i=n.alternate;if(i!==null&&(n=i.child,n!==null)){i.child=null;do i=n.sibling,n.sibling=null,n=i;while(n!==null)}}function Xl(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var c=i[a];zt=c,k_(c,n)}M_(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)P_(n),n=n.sibling}function P_(n){switch(n.tag){case 0:case 11:case 15:Xl(n),n.flags&2048&&Fi(9,n,n.return);break;case 3:Xl(n);break;case 12:Xl(n);break;case 22:var i=n.stateNode;n.memoizedState!==null&&i._visibility&2&&(n.return===null||n.return.tag!==13)?(i._visibility&=-3,ld(n)):Xl(n);break;default:Xl(n)}}function ld(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var c=i[a];zt=c,k_(c,n)}M_(n)}for(n=n.child;n!==null;){switch(i=n,i.tag){case 0:case 11:case 15:Fi(8,i,i.return),ld(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,ld(i));break;default:ld(i)}n=n.sibling}}function k_(n,i){for(;zt!==null;){var a=zt;switch(a.tag){case 0:case 11:case 15:Fi(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var c=a.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Dl(a.memoizedState.cache)}if(c=a.child,c!==null)c.return=a,zt=c;else e:for(a=n;zt!==null;){c=zt;var f=c.sibling,p=c.return;if(x_(c),c===a){zt=null;break e}if(f!==null){f.return=p,zt=f;break e}zt=p}}}var Sw={getCacheForType:function(n){var i=an(Dt),a=i.data.get(n);return a===void 0&&(a=n(),i.data.set(n,a)),a}},ww=typeof WeakMap=="function"?WeakMap:Map,We=0,ot=null,ke=null,Be=0,Ze=0,Mn=null,Bi=!1,ho=!1,Em=!1,mi=0,vt=0,Hi=0,ua=0,Tm=0,Jn=0,fo=0,Wl=null,bn=null,bm=!1,Am=0,cd=1/0,ud=null,Gi=null,Qt=0,$i=null,mo=null,po=0,Nm=0,Sm=null,V_=null,Zl=0,wm=null;function Pn(){if((We&2)!==0&&Be!==0)return Be&-Be;if(X.T!==null){var n=to;return n!==0?n:Om()}return xi()}function L_(){Jn===0&&(Jn=(Be&536870912)===0||Ye?ol():536870912);var n=Zn.current;return n!==null&&(n.flags|=32),Jn}function kn(n,i,a){(n===ot&&(Ze===2||Ze===9)||n.cancelPendingCommit!==null)&&(go(n,0),Ki(n,Be,Jn,!1)),$s(n,a),((We&2)===0||n!==ot)&&(n===ot&&((We&2)===0&&(ua|=a),vt===4&&Ki(n,Be,Jn,!1)),Ps(n))}function U_(n,i,a){if((We&6)!==0)throw Error(r(327));var c=!a&&(i&124)===0&&(i&n.expiredLanes)===0||kr(n,i),f=c?Cw(n,i):Cm(n,i,!0),p=c;do{if(f===0){ho&&!c&&Ki(n,i,0,!1);break}else{if(a=n.current.alternate,p&&!xw(a)){f=Cm(n,i,!1),p=!1;continue}if(f===2){if(p=i,n.errorRecoveryDisabledLanes&p)var T=0;else T=n.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){i=T;e:{var N=n;f=Wl;var P=N.current.memoizedState.isDehydrated;if(P&&(go(N,T).flags|=256),T=Cm(N,T,!1),T!==2){if(Em&&!P){N.errorRecoveryDisabledLanes|=p,ua|=p,f=4;break e}p=bn,bn=f,p!==null&&(bn===null?bn=p:bn.push.apply(bn,p))}f=T}if(p=!1,f!==2)continue}}if(f===1){go(n,0),Ki(n,i,0,!0);break}e:{switch(c=n,p=f,p){case 0:case 1:throw Error(r(345));case 4:if((i&4194048)!==i)break;case 6:Ki(c,i,Jn,!Bi);break e;case 2:bn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((i&62914560)===i&&(f=Am+300-zn(),10<f)){if(Ki(c,i,Jn,!Bi),Da(c,0,!0)!==0)break e;c.timeoutHandle=mE(F_.bind(null,c,a,bn,ud,bm,i,Jn,ua,fo,Bi,p,2,-0,0),f);break e}F_(c,a,bn,ud,bm,i,Jn,ua,fo,Bi,p,0,-0,0)}}break}while(!0);Ps(n)}function F_(n,i,a,c,f,p,T,N,P,H,Z,ne,G,Y){if(n.timeoutHandle=-1,ne=i.subtreeFlags,(ne&8192||(ne&16785408)===16785408)&&(rc={stylesheets:null,count:0,unsuspend:lx},O_(i),ne=ux(),ne!==null)){n.cancelPendingCommit=ne(K_.bind(null,n,i,p,a,c,f,T,N,P,Z,1,G,Y)),Ki(n,p,T,!H);return}K_(n,i,p,a,c,f,T,N,P)}function xw(n){for(var i=n;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var c=0;c<a.length;c++){var f=a[c],p=f.getSnapshot;f=f.value;try{if(!Rn(p(),f))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Ki(n,i,a,c){i&=~Tm,i&=~ua,n.suspendedLanes|=i,n.pingedLanes&=~i,c&&(n.warmLanes|=i),c=n.expirationTimes;for(var f=i;0<f;){var p=31-rn(f),T=1<<p;c[p]=-1,f&=~T}a!==0&&Es(n,a,i)}function dd(){return(We&6)===0?(Jl(0),!1):!0}function xm(){if(ke!==null){if(Ze===0)var n=ke.return;else n=ke,ai=ia=null,Hf(n),oo=null,Bl=0,n=ke;for(;n!==null;)__(n.alternate,n),n=n.return;ke=null}}function go(n,i){var a=n.timeoutHandle;a!==-1&&(n.timeoutHandle=-1,Gw(a)),a=n.cancelPendingCommit,a!==null&&(n.cancelPendingCommit=null,a()),xm(),ot=n,ke=a=si(n.current,null),Be=i,Ze=0,Mn=null,Bi=!1,ho=kr(n,i),Em=!1,fo=Jn=Tm=ua=Hi=vt=0,bn=Wl=null,bm=!1,(i&8)!==0&&(i|=i&32);var c=n.entangledLanes;if(c!==0)for(n=n.entanglements,c&=i;0<c;){var f=31-rn(c),p=1<<f;i|=n[f],c&=~p}return mi=i,Ou(),a}function q_(n,i){De=null,X.H=Zu,i===Ml||i===zu?(i=iy(),Ze=3):i===ty?(i=iy(),Ze=4):Ze=i===r_?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Mn=i,ke===null&&(vt=1,sd(n,Yn(i,n.current)))}function z_(){var n=X.H;return X.H=Zu,n===null?Zu:n}function B_(){var n=X.A;return X.A=Sw,n}function Im(){vt=4,Bi||(Be&4194048)!==Be&&Zn.current!==null||(ho=!0),(Hi&134217727)===0&&(ua&134217727)===0||ot===null||Ki(ot,Be,Jn,!1)}function Cm(n,i,a){var c=We;We|=2;var f=z_(),p=B_();(ot!==n||Be!==i)&&(ud=null,go(n,i)),i=!1;var T=vt;e:do try{if(Ze!==0&&ke!==null){var N=ke,P=Mn;switch(Ze){case 8:xm(),T=6;break e;case 3:case 2:case 9:case 6:Zn.current===null&&(i=!0);var H=Ze;if(Ze=0,Mn=null,vo(n,N,P,H),a&&ho){T=0;break e}break;default:H=Ze,Ze=0,Mn=null,vo(n,N,P,H)}}Iw(),T=vt;break}catch(Z){q_(n,Z)}while(!0);return i&&n.shellSuspendCounter++,ai=ia=null,We=c,X.H=f,X.A=p,ke===null&&(ot=null,Be=0,Ou()),T}function Iw(){for(;ke!==null;)H_(ke)}function Cw(n,i){var a=We;We|=2;var c=z_(),f=B_();ot!==n||Be!==i?(ud=null,cd=zn()+500,go(n,i)):ho=kr(n,i);e:do try{if(Ze!==0&&ke!==null){i=ke;var p=Mn;t:switch(Ze){case 1:Ze=0,Mn=null,vo(n,i,p,1);break;case 2:case 9:if(ny(p)){Ze=0,Mn=null,G_(i);break}i=function(){Ze!==2&&Ze!==9||ot!==n||(Ze=7),Ps(n)},p.then(i,i);break e;case 3:Ze=7;break e;case 4:Ze=5;break e;case 7:ny(p)?(Ze=0,Mn=null,G_(i)):(Ze=0,Mn=null,vo(n,i,p,7));break;case 5:var T=null;switch(ke.tag){case 26:T=ke.memoizedState;case 5:case 27:var N=ke;if(!T||wE(T)){Ze=0,Mn=null;var P=N.sibling;if(P!==null)ke=P;else{var H=N.return;H!==null?(ke=H,hd(H)):ke=null}break t}}Ze=0,Mn=null,vo(n,i,p,5);break;case 6:Ze=0,Mn=null,vo(n,i,p,6);break;case 8:xm(),vt=6;break e;default:throw Error(r(462))}}Rw();break}catch(Z){q_(n,Z)}while(!0);return ai=ia=null,X.H=c,X.A=f,We=a,ke!==null?0:(ot=null,Be=0,Ou(),vt)}function Rw(){for(;ke!==null&&!sl();)H_(ke)}function H_(n){var i=v_(n.alternate,n,mi);n.memoizedProps=n.pendingProps,i===null?hd(n):ke=i}function G_(n){var i=n,a=i.alternate;switch(i.tag){case 15:case 0:i=d_(a,i,i.pendingProps,i.type,void 0,Be);break;case 11:i=d_(a,i,i.pendingProps,i.type.render,i.ref,Be);break;case 5:Hf(i);default:__(a,i),i=ke=$v(i,mi),i=v_(a,i,mi)}n.memoizedProps=n.pendingProps,i===null?hd(n):ke=i}function vo(n,i,a,c){ai=ia=null,Hf(i),oo=null,Bl=0;var f=i.return;try{if(_w(n,f,i,a,Be)){vt=1,sd(n,Yn(a,n.current)),ke=null;return}}catch(p){if(f!==null)throw ke=f,p;vt=1,sd(n,Yn(a,n.current)),ke=null;return}i.flags&32768?(Ye||c===1?n=!0:ho||(Be&536870912)!==0?n=!1:(Bi=n=!0,(c===2||c===9||c===3||c===6)&&(c=Zn.current,c!==null&&c.tag===13&&(c.flags|=16384))),$_(i,n)):hd(i)}function hd(n){var i=n;do{if((i.flags&32768)!==0){$_(i,Bi);return}n=i.return;var a=Tw(i.alternate,i,mi);if(a!==null){ke=a;return}if(i=i.sibling,i!==null){ke=i;return}ke=i=n}while(i!==null);vt===0&&(vt=5)}function $_(n,i){do{var a=bw(n.alternate,n);if(a!==null){a.flags&=32767,ke=a;return}if(a=n.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(n=n.sibling,n!==null)){ke=n;return}ke=n=a}while(n!==null);vt=6,ke=null}function K_(n,i,a,c,f,p,T,N,P){n.cancelPendingCommit=null;do fd();while(Qt!==0);if((We&6)!==0)throw Error(r(327));if(i!==null){if(i===n.current)throw Error(r(177));if(p=i.lanes|i.childLanes,p|=_f,cl(n,a,p,T,N,P),n===ot&&(ke=ot=null,Be=0),mo=i,$i=n,po=a,Nm=p,Sm=f,V_=c,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,Mw(Dr,function(){return Z_(),null})):(n.callbackNode=null,n.callbackPriority=0),c=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||c){c=X.T,X.T=null,f=re.p,re.p=2,T=We,We|=4;try{Aw(n,i,a)}finally{We=T,re.p=f,X.T=c}}Qt=1,Y_(),Q_(),X_()}}function Y_(){if(Qt===1){Qt=0;var n=$i,i=mo,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=X.T,X.T=null;var c=re.p;re.p=2;var f=We;We|=4;try{R_(i,n);var p=qm,T=kv(n.containerInfo),N=p.focusedElem,P=p.selectionRange;if(T!==N&&N&&N.ownerDocument&&Pv(N.ownerDocument.documentElement,N)){if(P!==null&&mf(N)){var H=P.start,Z=P.end;if(Z===void 0&&(Z=H),"selectionStart"in N)N.selectionStart=H,N.selectionEnd=Math.min(Z,N.value.length);else{var ne=N.ownerDocument||document,G=ne&&ne.defaultView||window;if(G.getSelection){var Y=G.getSelection(),we=N.textContent.length,be=Math.min(P.start,we),nt=P.end===void 0?be:Math.min(P.end,we);!Y.extend&&be>nt&&(T=nt,nt=be,be=T);var F=Mv(N,be),L=Mv(N,nt);if(F&&L&&(Y.rangeCount!==1||Y.anchorNode!==F.node||Y.anchorOffset!==F.offset||Y.focusNode!==L.node||Y.focusOffset!==L.offset)){var B=ne.createRange();B.setStart(F.node,F.offset),Y.removeAllRanges(),be>nt?(Y.addRange(B),Y.extend(L.node,L.offset)):(B.setEnd(L.node,L.offset),Y.addRange(B))}}}}for(ne=[],Y=N;Y=Y.parentNode;)Y.nodeType===1&&ne.push({element:Y,left:Y.scrollLeft,top:Y.scrollTop});for(typeof N.focus=="function"&&N.focus(),N=0;N<ne.length;N++){var ee=ne[N];ee.element.scrollLeft=ee.left,ee.element.scrollTop=ee.top}}Sd=!!Fm,qm=Fm=null}finally{We=f,re.p=c,X.T=a}}n.current=i,Qt=2}}function Q_(){if(Qt===2){Qt=0;var n=$i,i=mo,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=X.T,X.T=null;var c=re.p;re.p=2;var f=We;We|=4;try{w_(n,i.alternate,i)}finally{We=f,re.p=c,X.T=a}}Qt=3}}function X_(){if(Qt===4||Qt===3){Qt=0,lu();var n=$i,i=mo,a=po,c=V_;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Qt=5:(Qt=0,mo=$i=null,W_(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(Gi=null),Oa(a),i=i.stateNode,Xe&&typeof Xe.onCommitFiberRoot=="function")try{Xe.onCommitFiberRoot(pt,i,void 0,(i.current.flags&128)===128)}catch{}if(c!==null){i=X.T,f=re.p,re.p=2,X.T=null;try{for(var p=n.onRecoverableError,T=0;T<c.length;T++){var N=c[T];p(N.value,{componentStack:N.stack})}}finally{X.T=i,re.p=f}}(po&3)!==0&&fd(),Ps(n),f=n.pendingLanes,(a&4194090)!==0&&(f&42)!==0?n===wm?Zl++:(Zl=0,wm=n):Zl=0,Jl(0)}}function W_(n,i){(n.pooledCacheLanes&=i)===0&&(i=n.pooledCache,i!=null&&(n.pooledCache=null,Dl(i)))}function fd(n){return Y_(),Q_(),X_(),Z_()}function Z_(){if(Qt!==5)return!1;var n=$i,i=Nm;Nm=0;var a=Oa(po),c=X.T,f=re.p;try{re.p=32>a?32:a,X.T=null,a=Sm,Sm=null;var p=$i,T=po;if(Qt=0,mo=$i=null,po=0,(We&6)!==0)throw Error(r(331));var N=We;if(We|=4,P_(p.current),D_(p,p.current,T,a),We=N,Jl(0,!1),Xe&&typeof Xe.onPostCommitFiberRoot=="function")try{Xe.onPostCommitFiberRoot(pt,p)}catch{}return!0}finally{re.p=f,X.T=c,W_(n,i)}}function J_(n,i,a){i=Yn(a,i),i=im(n.stateNode,i,2),n=ki(n,i,2),n!==null&&($s(n,2),Ps(n))}function st(n,i,a){if(n.tag===3)J_(n,n,a);else for(;i!==null;){if(i.tag===3){J_(i,n,a);break}else if(i.tag===1){var c=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Gi===null||!Gi.has(c))){n=Yn(a,n),a=s_(2),c=ki(i,a,2),c!==null&&(i_(a,c,i,n),$s(c,2),Ps(c));break}}i=i.return}}function Rm(n,i,a){var c=n.pingCache;if(c===null){c=n.pingCache=new ww;var f=new Set;c.set(i,f)}else f=c.get(i),f===void 0&&(f=new Set,c.set(i,f));f.has(a)||(Em=!0,f.add(a),n=jw.bind(null,n,i,a),i.then(n,n))}function jw(n,i,a){var c=n.pingCache;c!==null&&c.delete(i),n.pingedLanes|=n.suspendedLanes&a,n.warmLanes&=~a,ot===n&&(Be&a)===a&&(vt===4||vt===3&&(Be&62914560)===Be&&300>zn()-Am?(We&2)===0&&go(n,0):Tm|=a,fo===Be&&(fo=0)),Ps(n)}function eE(n,i){i===0&&(i=ll()),n=Wa(n,i),n!==null&&($s(n,i),Ps(n))}function Dw(n){var i=n.memoizedState,a=0;i!==null&&(a=i.retryLane),eE(n,a)}function Ow(n,i){var a=0;switch(n.tag){case 13:var c=n.stateNode,f=n.memoizedState;f!==null&&(a=f.retryLane);break;case 19:c=n.stateNode;break;case 22:c=n.stateNode._retryCache;break;default:throw Error(r(314))}c!==null&&c.delete(i),eE(n,a)}function Mw(n,i){return Rr(n,i)}var md=null,yo=null,jm=!1,pd=!1,Dm=!1,da=0;function Ps(n){n!==yo&&n.next===null&&(yo===null?md=yo=n:yo=yo.next=n),pd=!0,jm||(jm=!0,kw())}function Jl(n,i){if(!Dm&&pd){Dm=!0;do for(var a=!1,c=md;c!==null;){if(n!==0){var f=c.pendingLanes;if(f===0)var p=0;else{var T=c.suspendedLanes,N=c.pingedLanes;p=(1<<31-rn(42|n)+1)-1,p&=f&~(T&~N),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(a=!0,iE(c,p))}else p=Be,p=Da(c,c===ot?p:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(p&3)===0||kr(c,p)||(a=!0,iE(c,p));c=c.next}while(a);Dm=!1}}function Pw(){tE()}function tE(){pd=jm=!1;var n=0;da!==0&&(Hw()&&(n=da),da=0);for(var i=zn(),a=null,c=md;c!==null;){var f=c.next,p=nE(c,i);p===0?(c.next=null,a===null?md=f:a.next=f,f===null&&(yo=a)):(a=c,(n!==0||(p&3)!==0)&&(pd=!0)),c=f}Jl(n)}function nE(n,i){for(var a=n.suspendedLanes,c=n.pingedLanes,f=n.expirationTimes,p=n.pendingLanes&-62914561;0<p;){var T=31-rn(p),N=1<<T,P=f[T];P===-1?((N&a)===0||(N&c)!==0)&&(f[T]=al(N,i)):P<=i&&(n.expiredLanes|=N),p&=~N}if(i=ot,a=Be,a=Da(n,n===i?a:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c=n.callbackNode,a===0||n===i&&(Ze===2||Ze===9)||n.cancelPendingCommit!==null)return c!==null&&c!==null&&jr(c),n.callbackNode=null,n.callbackPriority=0;if((a&3)===0||kr(n,a)){if(i=a&-a,i===n.callbackPriority)return i;switch(c!==null&&jr(c),Oa(a)){case 2:case 8:a=Ra;break;case 32:a=Dr;break;case 268435456:a=ja;break;default:a=Dr}return c=sE.bind(null,n),a=Rr(a,c),n.callbackPriority=i,n.callbackNode=a,i}return c!==null&&c!==null&&jr(c),n.callbackPriority=2,n.callbackNode=null,2}function sE(n,i){if(Qt!==0&&Qt!==5)return n.callbackNode=null,n.callbackPriority=0,null;var a=n.callbackNode;if(fd()&&n.callbackNode!==a)return null;var c=Be;return c=Da(n,n===ot?c:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c===0?null:(U_(n,c,i),nE(n,zn()),n.callbackNode!=null&&n.callbackNode===a?sE.bind(null,n):null)}function iE(n,i){if(fd())return null;U_(n,i,!0)}function kw(){$w(function(){(We&6)!==0?Rr(il,Pw):tE()})}function Om(){return da===0&&(da=ol()),da}function rE(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Ua(""+n)}function aE(n,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,n.id&&a.setAttribute("form",n.id),i.parentNode.insertBefore(a,i),n=new FormData(n),a.parentNode.removeChild(a),n}function Vw(n,i,a,c,f){if(i==="submit"&&a&&a.stateNode===f){var p=rE((f[At]||null).action),T=c.submitter;T&&(i=(i=T[At]||null)?rE(i.formAction):T.getAttribute("formAction"),i!==null&&(p=i,T=null));var N=new Fa("action","action",null,c,f);n.push({event:N,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(da!==0){var P=T?aE(f,T):new FormData(f);Jf(a,{pending:!0,data:P,method:f.method,action:p},null,P)}}else typeof p=="function"&&(N.preventDefault(),P=T?aE(f,T):new FormData(f),Jf(a,{pending:!0,data:P,method:f.method,action:p},p,P))},currentTarget:f}]})}}for(var Mm=0;Mm<yf.length;Mm++){var Pm=yf[Mm],Lw=Pm.toLowerCase(),Uw=Pm[0].toUpperCase()+Pm.slice(1);os(Lw,"on"+Uw)}os(Uv,"onAnimationEnd"),os(Fv,"onAnimationIteration"),os(qv,"onAnimationStart"),os("dblclick","onDoubleClick"),os("focusin","onFocus"),os("focusout","onBlur"),os(nw,"onTransitionRun"),os(sw,"onTransitionStart"),os(iw,"onTransitionCancel"),os(zv,"onTransitionEnd"),Ys("onMouseEnter",["mouseout","mouseover"]),Ys("onMouseLeave",["mouseout","mouseover"]),Ys("onPointerEnter",["pointerout","pointerover"]),Ys("onPointerLeave",["pointerout","pointerover"]),rs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),rs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),rs("onBeforeInput",["compositionend","keypress","textInput","paste"]),rs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),rs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),rs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ec="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ec));function oE(n,i){i=(i&4)!==0;for(var a=0;a<n.length;a++){var c=n[a],f=c.event;c=c.listeners;e:{var p=void 0;if(i)for(var T=c.length-1;0<=T;T--){var N=c[T],P=N.instance,H=N.currentTarget;if(N=N.listener,P!==p&&f.isPropagationStopped())break e;p=N,f.currentTarget=H;try{p(f)}catch(Z){nd(Z)}f.currentTarget=null,p=P}else for(T=0;T<c.length;T++){if(N=c[T],P=N.instance,H=N.currentTarget,N=N.listener,P!==p&&f.isPropagationStopped())break e;p=N,f.currentTarget=H;try{p(f)}catch(Z){nd(Z)}f.currentTarget=null,p=P}}}}function Ve(n,i){var a=i[dl];a===void 0&&(a=i[dl]=new Set);var c=n+"__bubble";a.has(c)||(lE(i,n,2,!1),a.add(c))}function km(n,i,a){var c=0;i&&(c|=4),lE(a,n,c,i)}var gd="_reactListening"+Math.random().toString(36).slice(2);function Vm(n){if(!n[gd]){n[gd]=!0,hl.forEach(function(a){a!=="selectionchange"&&(Fw.has(a)||km(a,!1,n),km(a,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[gd]||(i[gd]=!0,km("selectionchange",!1,i))}}function lE(n,i,a,c){switch(DE(i)){case 2:var f=fx;break;case 8:f=mx;break;default:f=Wm}a=f.bind(null,i,a,n),f=void 0,!$n||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),c?f!==void 0?n.addEventListener(i,a,{capture:!0,passive:f}):n.addEventListener(i,a,!0):f!==void 0?n.addEventListener(i,a,{passive:f}):n.addEventListener(i,a,!1)}function Lm(n,i,a,c,f){var p=c;if((i&1)===0&&(i&2)===0&&c!==null)e:for(;;){if(c===null)return;var T=c.tag;if(T===3||T===4){var N=c.stateNode.containerInfo;if(N===f)break;if(T===4)for(T=c.return;T!==null;){var P=T.tag;if((P===3||P===4)&&T.stateNode.containerInfo===f)return;T=T.return}for(;N!==null;){if(T=Ks(N),T===null)return;if(P=T.tag,P===5||P===6||P===26||P===27){c=p=T;continue e}N=N.parentNode}}c=c.return}yu(function(){var H=p,Z=Gn(a),ne=[];e:{var G=Bv.get(n);if(G!==void 0){var Y=Fa,we=n;switch(n){case"keypress":if(ws(a)===0)break e;case"keydown":case"keyup":Y=$a;break;case"focusin":we="focus",Y=Ba;break;case"focusout":we="blur",Y=Ba;break;case"beforeblur":case"afterblur":Y=Ba;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Y=Kn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Y=uf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Y=wu;break;case Uv:case Fv:case qv:Y=Ha;break;case zv:Y=Iu;break;case"scroll":case"scrollend":Y=_u;break;case"wheel":Y=Ka;break;case"copy":case"cut":case"paste":Y=Ga;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Y=Nl;break;case"toggle":case"beforetoggle":Y=Ru}var be=(i&4)!==0,nt=!be&&(n==="scroll"||n==="scrollend"),F=be?G!==null?G+"Capture":null:G;be=[];for(var L=H,B;L!==null;){var ee=L;if(B=ee.stateNode,ee=ee.tag,ee!==5&&ee!==26&&ee!==27||B===null||F===null||(ee=Hr(L,F),ee!=null&&be.push(tc(L,ee,B))),nt)break;L=L.return}0<be.length&&(G=new Y(G,we,null,a,Z),ne.push({event:G,listeners:be}))}}if((i&7)===0){e:{if(G=n==="mouseover"||n==="pointerover",Y=n==="mouseout"||n==="pointerout",G&&a!==Ws&&(we=a.relatedTarget||a.fromElement)&&(Ks(we)||we[Bn]))break e;if((Y||G)&&(G=Z.window===Z?Z:(G=Z.ownerDocument)?G.defaultView||G.parentWindow:window,Y?(we=a.relatedTarget||a.toElement,Y=H,we=we?Ks(we):null,we!==null&&(nt=l(we),be=we.tag,we!==nt||be!==5&&be!==27&&be!==6)&&(we=null)):(Y=null,we=H),Y!==we)){if(be=Kn,ee="onMouseLeave",F="onMouseEnter",L="mouse",(n==="pointerout"||n==="pointerover")&&(be=Nl,ee="onPointerLeave",F="onPointerEnter",L="pointer"),nt=Y==null?G:bs(Y),B=we==null?G:bs(we),G=new be(ee,L+"leave",Y,a,Z),G.target=nt,G.relatedTarget=B,ee=null,Ks(Z)===H&&(be=new be(F,L+"enter",we,a,Z),be.target=B,be.relatedTarget=nt,ee=be),nt=ee,Y&&we)t:{for(be=Y,F=we,L=0,B=be;B;B=_o(B))L++;for(B=0,ee=F;ee;ee=_o(ee))B++;for(;0<L-B;)be=_o(be),L--;for(;0<B-L;)F=_o(F),B--;for(;L--;){if(be===F||F!==null&&be===F.alternate)break t;be=_o(be),F=_o(F)}be=null}else be=null;Y!==null&&cE(ne,G,Y,be,!1),we!==null&&nt!==null&&cE(ne,nt,we,be,!0)}}e:{if(G=H?bs(H):window,Y=G.nodeName&&G.nodeName.toLowerCase(),Y==="select"||Y==="input"&&G.type==="file")var me=Iv;else if(jt(G))if(Cv)me=JS;else{me=WS;var Pe=XS}else Y=G.nodeName,!Y||Y.toLowerCase()!=="input"||G.type!=="checkbox"&&G.type!=="radio"?H&&vl(H.elementType)&&(me=Iv):me=ZS;if(me&&(me=me(n,H))){ni(ne,me,a,Z);break e}Pe&&Pe(n,G,H),n==="focusout"&&H&&G.type==="number"&&H.memoizedProps.value!=null&&ji(G,"number",G.value)}switch(Pe=H?bs(H):window,n){case"focusin":(jt(Pe)||Pe.contentEditable==="true")&&(Ya=Pe,pf=H,xl=null);break;case"focusout":xl=pf=Ya=null;break;case"mousedown":gf=!0;break;case"contextmenu":case"mouseup":case"dragend":gf=!1,Vv(ne,a,Z);break;case"selectionchange":if(tw)break;case"keydown":case"keyup":Vv(ne,a,Z)}var ge;if(Cs)e:{switch(n){case"compositionstart":var Ae="onCompositionStart";break e;case"compositionend":Ae="onCompositionEnd";break e;case"compositionupdate":Ae="onCompositionUpdate";break e}Ae=void 0}else qe?Q(n,a)&&(Ae="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Ae="onCompositionStart");Ae&&(E&&a.locale!=="ko"&&(qe||Ae!=="onCompositionStart"?Ae==="onCompositionEnd"&&qe&&(ge=_l()):(Ss=Z,Di="value"in Ss?Ss.value:Ss.textContent,qe=!0)),Pe=vd(H,Ae),0<Pe.length&&(Ae=new bl(Ae,n,null,a,Z),ne.push({event:Ae,listeners:Pe}),ge?Ae.data=ge:(ge=ce(a),ge!==null&&(Ae.data=ge)))),(ge=y?Rt(n,a):ze(n,a))&&(Ae=vd(H,"onBeforeInput"),0<Ae.length&&(Pe=new bl("onBeforeInput","beforeinput",null,a,Z),ne.push({event:Pe,listeners:Ae}),Pe.data=ge)),Vw(ne,n,H,a,Z)}oE(ne,i)})}function tc(n,i,a){return{instance:n,listener:i,currentTarget:a}}function vd(n,i){for(var a=i+"Capture",c=[];n!==null;){var f=n,p=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||p===null||(f=Hr(n,a),f!=null&&c.unshift(tc(n,f,p)),f=Hr(n,i),f!=null&&c.push(tc(n,f,p))),n.tag===3)return c;n=n.return}return[]}function _o(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function cE(n,i,a,c,f){for(var p=i._reactName,T=[];a!==null&&a!==c;){var N=a,P=N.alternate,H=N.stateNode;if(N=N.tag,P!==null&&P===c)break;N!==5&&N!==26&&N!==27||H===null||(P=H,f?(H=Hr(a,p),H!=null&&T.unshift(tc(a,H,P))):f||(H=Hr(a,p),H!=null&&T.push(tc(a,H,P)))),a=a.return}T.length!==0&&n.push({event:i,listeners:T})}var qw=/\r\n?/g,zw=/\u0000|\uFFFD/g;function uE(n){return(typeof n=="string"?n:""+n).replace(qw,`
`).replace(zw,"")}function dE(n,i){return i=uE(i),uE(n)===i}function yd(){}function tt(n,i,a,c,f,p){switch(a){case"children":typeof c=="string"?i==="body"||i==="textarea"&&c===""||Hn(n,c):(typeof c=="number"||typeof c=="bigint")&&i!=="body"&&Hn(n,""+c);break;case"className":As(n,"class",c);break;case"tabIndex":As(n,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":As(n,a,c);break;case"style":gl(n,c,p);break;case"data":if(i!=="object"){As(n,"data",c);break}case"src":case"href":if(c===""&&(i!=="a"||a!=="href")){n.removeAttribute(a);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(a);break}c=Ua(""+c),n.setAttribute(a,c);break;case"action":case"formAction":if(typeof c=="function"){n.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(a==="formAction"?(i!=="input"&&tt(n,i,"name",f.name,f,null),tt(n,i,"formEncType",f.formEncType,f,null),tt(n,i,"formMethod",f.formMethod,f,null),tt(n,i,"formTarget",f.formTarget,f,null)):(tt(n,i,"encType",f.encType,f,null),tt(n,i,"method",f.method,f,null),tt(n,i,"target",f.target,f,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(a);break}c=Ua(""+c),n.setAttribute(a,c);break;case"onClick":c!=null&&(n.onclick=yd);break;case"onScroll":c!=null&&Ve("scroll",n);break;case"onScrollEnd":c!=null&&Ve("scrollend",n);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(r(61));if(a=c.__html,a!=null){if(f.children!=null)throw Error(r(60));n.innerHTML=a}}break;case"multiple":n.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":n.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){n.removeAttribute("xlink:href");break}a=Ua(""+c),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(a,""+c):n.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(a,""):n.removeAttribute(a);break;case"capture":case"download":c===!0?n.setAttribute(a,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(a,c):n.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?n.setAttribute(a,c):n.removeAttribute(a);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?n.removeAttribute(a):n.setAttribute(a,c);break;case"popover":Ve("beforetoggle",n),Ve("toggle",n),Ri(n,"popover",c);break;case"xlinkActuate":$t(n,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":$t(n,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":$t(n,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":$t(n,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":$t(n,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":$t(n,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":$t(n,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":$t(n,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":$t(n,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Ri(n,"is",c);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=lf.get(a)||a,Ri(n,a,c))}}function Um(n,i,a,c,f,p){switch(a){case"style":gl(n,c,p);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(r(61));if(a=c.__html,a!=null){if(f.children!=null)throw Error(r(60));n.innerHTML=a}}break;case"children":typeof c=="string"?Hn(n,c):(typeof c=="number"||typeof c=="bigint")&&Hn(n,""+c);break;case"onScroll":c!=null&&Ve("scroll",n);break;case"onScrollEnd":c!=null&&Ve("scrollend",n);break;case"onClick":c!=null&&(n.onclick=yd);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ma.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),i=a.slice(2,f?a.length-7:void 0),p=n[At]||null,p=p!=null?p[a]:null,typeof p=="function"&&n.removeEventListener(i,p,f),typeof c=="function")){typeof p!="function"&&p!==null&&(a in n?n[a]=null:n.hasAttribute(a)&&n.removeAttribute(a)),n.addEventListener(i,c,f);break e}a in n?n[a]=c:c===!0?n.setAttribute(a,""):Ri(n,a,c)}}}function Xt(n,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ve("error",n),Ve("load",n);var c=!1,f=!1,p;for(p in a)if(a.hasOwnProperty(p)){var T=a[p];if(T!=null)switch(p){case"src":c=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:tt(n,i,p,T,a,null)}}f&&tt(n,i,"srcSet",a.srcSet,a,null),c&&tt(n,i,"src",a.src,a,null);return;case"input":Ve("invalid",n);var N=p=T=f=null,P=null,H=null;for(c in a)if(a.hasOwnProperty(c)){var Z=a[c];if(Z!=null)switch(c){case"name":f=Z;break;case"type":T=Z;break;case"checked":P=Z;break;case"defaultChecked":H=Z;break;case"value":p=Z;break;case"defaultValue":N=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(r(137,i));break;default:tt(n,i,c,Z,a,null)}}qr(n,p,N,P,H,T,f,!1),La(n);return;case"select":Ve("invalid",n),c=T=p=null;for(f in a)if(a.hasOwnProperty(f)&&(N=a[f],N!=null))switch(f){case"value":p=N;break;case"defaultValue":T=N;break;case"multiple":c=N;default:tt(n,i,f,N,a,null)}i=p,a=T,n.multiple=!!c,i!=null?Xs(n,!!c,i,!1):a!=null&&Xs(n,!!c,a,!0);return;case"textarea":Ve("invalid",n),p=f=c=null;for(T in a)if(a.hasOwnProperty(T)&&(N=a[T],N!=null))switch(T){case"value":c=N;break;case"defaultValue":f=N;break;case"children":p=N;break;case"dangerouslySetInnerHTML":if(N!=null)throw Error(r(91));break;default:tt(n,i,T,N,a,null)}zr(n,c,f,p),La(n);return;case"option":for(P in a)if(a.hasOwnProperty(P)&&(c=a[P],c!=null))switch(P){case"selected":n.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:tt(n,i,P,c,a,null)}return;case"dialog":Ve("beforetoggle",n),Ve("toggle",n),Ve("cancel",n),Ve("close",n);break;case"iframe":case"object":Ve("load",n);break;case"video":case"audio":for(c=0;c<ec.length;c++)Ve(ec[c],n);break;case"image":Ve("error",n),Ve("load",n);break;case"details":Ve("toggle",n);break;case"embed":case"source":case"link":Ve("error",n),Ve("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(H in a)if(a.hasOwnProperty(H)&&(c=a[H],c!=null))switch(H){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:tt(n,i,H,c,a,null)}return;default:if(vl(i)){for(Z in a)a.hasOwnProperty(Z)&&(c=a[Z],c!==void 0&&Um(n,i,Z,c,a,void 0));return}}for(N in a)a.hasOwnProperty(N)&&(c=a[N],c!=null&&tt(n,i,N,c,a,null))}function Bw(n,i,a,c){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,p=null,T=null,N=null,P=null,H=null,Z=null;for(Y in a){var ne=a[Y];if(a.hasOwnProperty(Y)&&ne!=null)switch(Y){case"checked":break;case"value":break;case"defaultValue":P=ne;default:c.hasOwnProperty(Y)||tt(n,i,Y,null,c,ne)}}for(var G in c){var Y=c[G];if(ne=a[G],c.hasOwnProperty(G)&&(Y!=null||ne!=null))switch(G){case"type":p=Y;break;case"name":f=Y;break;case"checked":H=Y;break;case"defaultChecked":Z=Y;break;case"value":T=Y;break;case"defaultValue":N=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(r(137,i));break;default:Y!==ne&&tt(n,i,G,Y,c,ne)}}Cn(n,T,N,P,H,Z,p,f);return;case"select":Y=T=N=G=null;for(p in a)if(P=a[p],a.hasOwnProperty(p)&&P!=null)switch(p){case"value":break;case"multiple":Y=P;default:c.hasOwnProperty(p)||tt(n,i,p,null,c,P)}for(f in c)if(p=c[f],P=a[f],c.hasOwnProperty(f)&&(p!=null||P!=null))switch(f){case"value":G=p;break;case"defaultValue":N=p;break;case"multiple":T=p;default:p!==P&&tt(n,i,f,p,c,P)}i=N,a=T,c=Y,G!=null?Xs(n,!!a,G,!1):!!c!=!!a&&(i!=null?Xs(n,!!a,i,!0):Xs(n,!!a,a?[]:"",!1));return;case"textarea":Y=G=null;for(N in a)if(f=a[N],a.hasOwnProperty(N)&&f!=null&&!c.hasOwnProperty(N))switch(N){case"value":break;case"children":break;default:tt(n,i,N,null,c,f)}for(T in c)if(f=c[T],p=a[T],c.hasOwnProperty(T)&&(f!=null||p!=null))switch(T){case"value":G=f;break;case"defaultValue":Y=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(r(91));break;default:f!==p&&tt(n,i,T,f,c,p)}Je(n,G,Y);return;case"option":for(var we in a)if(G=a[we],a.hasOwnProperty(we)&&G!=null&&!c.hasOwnProperty(we))switch(we){case"selected":n.selected=!1;break;default:tt(n,i,we,null,c,G)}for(P in c)if(G=c[P],Y=a[P],c.hasOwnProperty(P)&&G!==Y&&(G!=null||Y!=null))switch(P){case"selected":n.selected=G&&typeof G!="function"&&typeof G!="symbol";break;default:tt(n,i,P,G,c,Y)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var be in a)G=a[be],a.hasOwnProperty(be)&&G!=null&&!c.hasOwnProperty(be)&&tt(n,i,be,null,c,G);for(H in c)if(G=c[H],Y=a[H],c.hasOwnProperty(H)&&G!==Y&&(G!=null||Y!=null))switch(H){case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(r(137,i));break;default:tt(n,i,H,G,c,Y)}return;default:if(vl(i)){for(var nt in a)G=a[nt],a.hasOwnProperty(nt)&&G!==void 0&&!c.hasOwnProperty(nt)&&Um(n,i,nt,void 0,c,G);for(Z in c)G=c[Z],Y=a[Z],!c.hasOwnProperty(Z)||G===Y||G===void 0&&Y===void 0||Um(n,i,Z,G,c,Y);return}}for(var F in a)G=a[F],a.hasOwnProperty(F)&&G!=null&&!c.hasOwnProperty(F)&&tt(n,i,F,null,c,G);for(ne in c)G=c[ne],Y=a[ne],!c.hasOwnProperty(ne)||G===Y||G==null&&Y==null||tt(n,i,ne,G,c,Y)}var Fm=null,qm=null;function _d(n){return n.nodeType===9?n:n.ownerDocument}function hE(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function fE(n,i){if(n===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&i==="foreignObject"?0:n}function zm(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Bm=null;function Hw(){var n=window.event;return n&&n.type==="popstate"?n===Bm?!1:(Bm=n,!0):(Bm=null,!1)}var mE=typeof setTimeout=="function"?setTimeout:void 0,Gw=typeof clearTimeout=="function"?clearTimeout:void 0,pE=typeof Promise=="function"?Promise:void 0,$w=typeof queueMicrotask=="function"?queueMicrotask:typeof pE<"u"?function(n){return pE.resolve(null).then(n).catch(Kw)}:mE;function Kw(n){setTimeout(function(){throw n})}function Yi(n){return n==="head"}function gE(n,i){var a=i,c=0,f=0;do{var p=a.nextSibling;if(n.removeChild(a),p&&p.nodeType===8)if(a=p.data,a==="/$"){if(0<c&&8>c){a=c;var T=n.ownerDocument;if(a&1&&nc(T.documentElement),a&2&&nc(T.body),a&4)for(a=T.head,nc(a),T=a.firstChild;T;){var N=T.nextSibling,P=T.nodeName;T[Vr]||P==="SCRIPT"||P==="STYLE"||P==="LINK"&&T.rel.toLowerCase()==="stylesheet"||a.removeChild(T),T=N}}if(f===0){n.removeChild(p),uc(i);return}f--}else a==="$"||a==="$?"||a==="$!"?f++:c=a.charCodeAt(0)-48;else c=0;a=p}while(a);uc(i)}function Hm(n){var i=n.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Hm(a),Ci(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}n.removeChild(a)}}function Yw(n,i,a,c){for(;n.nodeType===1;){var f=a;if(n.nodeName.toLowerCase()!==i.toLowerCase()){if(!c&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(c){if(!n[Vr])switch(i){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(p=n.getAttribute("rel"),p==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(p!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(p=n.getAttribute("src"),(p!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&p&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(i==="input"&&n.type==="hidden"){var p=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===p)return n}else return n;if(n=cs(n.nextSibling),n===null)break}return null}function Qw(n,i,a){if(i==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!a||(n=cs(n.nextSibling),n===null))return null;return n}function Gm(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState==="complete"}function Xw(n,i){var a=n.ownerDocument;if(n.data!=="$?"||a.readyState==="complete")i();else{var c=function(){i(),a.removeEventListener("DOMContentLoaded",c)};a.addEventListener("DOMContentLoaded",c),n._reactRetry=c}}function cs(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return n}var $m=null;function vE(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return n;i--}else a==="/$"&&i++}n=n.previousSibling}return null}function yE(n,i,a){switch(i=_d(a),n){case"html":if(n=i.documentElement,!n)throw Error(r(452));return n;case"head":if(n=i.head,!n)throw Error(r(453));return n;case"body":if(n=i.body,!n)throw Error(r(454));return n;default:throw Error(r(451))}}function nc(n){for(var i=n.attributes;i.length;)n.removeAttributeNode(i[0]);Ci(n)}var es=new Map,_E=new Set;function Ed(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var pi=re.d;re.d={f:Ww,r:Zw,D:Jw,C:ex,L:tx,m:nx,X:ix,S:sx,M:rx};function Ww(){var n=pi.f(),i=dd();return n||i}function Zw(n){var i=Ts(n);i!==null&&i.tag===5&&i.type==="form"?Uy(i):pi.r(n)}var Eo=typeof document>"u"?null:document;function EE(n,i,a){var c=Eo;if(c&&typeof i=="string"&&i){var f=Nt(i);f='link[rel="'+n+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),_E.has(f)||(_E.add(f),n={rel:n,crossOrigin:a,href:i},c.querySelector(f)===null&&(i=c.createElement("link"),Xt(i,"link",n),_t(i),c.head.appendChild(i)))}}function Jw(n){pi.D(n),EE("dns-prefetch",n,null)}function ex(n,i){pi.C(n,i),EE("preconnect",n,i)}function tx(n,i,a){pi.L(n,i,a);var c=Eo;if(c&&n&&i){var f='link[rel="preload"][as="'+Nt(i)+'"]';i==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+Nt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+Nt(a.imageSizes)+'"]')):f+='[href="'+Nt(n)+'"]';var p=f;switch(i){case"style":p=To(n);break;case"script":p=bo(n)}es.has(p)||(n=_({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:n,as:i},a),es.set(p,n),c.querySelector(f)!==null||i==="style"&&c.querySelector(sc(p))||i==="script"&&c.querySelector(ic(p))||(i=c.createElement("link"),Xt(i,"link",n),_t(i),c.head.appendChild(i)))}}function nx(n,i){pi.m(n,i);var a=Eo;if(a&&n){var c=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+Nt(c)+'"][href="'+Nt(n)+'"]',p=f;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=bo(n)}if(!es.has(p)&&(n=_({rel:"modulepreload",href:n},i),es.set(p,n),a.querySelector(f)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(ic(p)))return}c=a.createElement("link"),Xt(c,"link",n),_t(c),a.head.appendChild(c)}}}function sx(n,i,a){pi.S(n,i,a);var c=Eo;if(c&&n){var f=fn(c).hoistableStyles,p=To(n);i=i||"default";var T=f.get(p);if(!T){var N={loading:0,preload:null};if(T=c.querySelector(sc(p)))N.loading=5;else{n=_({rel:"stylesheet",href:n,"data-precedence":i},a),(a=es.get(p))&&Km(n,a);var P=T=c.createElement("link");_t(P),Xt(P,"link",n),P._p=new Promise(function(H,Z){P.onload=H,P.onerror=Z}),P.addEventListener("load",function(){N.loading|=1}),P.addEventListener("error",function(){N.loading|=2}),N.loading|=4,Td(T,i,c)}T={type:"stylesheet",instance:T,count:1,state:N},f.set(p,T)}}}function ix(n,i){pi.X(n,i);var a=Eo;if(a&&n){var c=fn(a).hoistableScripts,f=bo(n),p=c.get(f);p||(p=a.querySelector(ic(f)),p||(n=_({src:n,async:!0},i),(i=es.get(f))&&Ym(n,i),p=a.createElement("script"),_t(p),Xt(p,"link",n),a.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},c.set(f,p))}}function rx(n,i){pi.M(n,i);var a=Eo;if(a&&n){var c=fn(a).hoistableScripts,f=bo(n),p=c.get(f);p||(p=a.querySelector(ic(f)),p||(n=_({src:n,async:!0,type:"module"},i),(i=es.get(f))&&Ym(n,i),p=a.createElement("script"),_t(p),Xt(p,"link",n),a.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},c.set(f,p))}}function TE(n,i,a,c){var f=(f=xe.current)?Ed(f):null;if(!f)throw Error(r(446));switch(n){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=To(a.href),a=fn(f).hoistableStyles,c=a.get(i),c||(c={type:"style",instance:null,count:0,state:null},a.set(i,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){n=To(a.href);var p=fn(f).hoistableStyles,T=p.get(n);if(T||(f=f.ownerDocument||f,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(n,T),(p=f.querySelector(sc(n)))&&!p._p&&(T.instance=p,T.state.loading=5),es.has(n)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},es.set(n,a),p||ax(f,n,a,T.state))),i&&c===null)throw Error(r(528,""));return T}if(i&&c!==null)throw Error(r(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=bo(a),a=fn(f).hoistableScripts,c=a.get(i),c||(c={type:"script",instance:null,count:0,state:null},a.set(i,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,n))}}function To(n){return'href="'+Nt(n)+'"'}function sc(n){return'link[rel="stylesheet"]['+n+"]"}function bE(n){return _({},n,{"data-precedence":n.precedence,precedence:null})}function ax(n,i,a,c){n.querySelector('link[rel="preload"][as="style"]['+i+"]")?c.loading=1:(i=n.createElement("link"),c.preload=i,i.addEventListener("load",function(){return c.loading|=1}),i.addEventListener("error",function(){return c.loading|=2}),Xt(i,"link",a),_t(i),n.head.appendChild(i))}function bo(n){return'[src="'+Nt(n)+'"]'}function ic(n){return"script[async]"+n}function AE(n,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var c=n.querySelector('style[data-href~="'+Nt(a.href)+'"]');if(c)return i.instance=c,_t(c),c;var f=_({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return c=(n.ownerDocument||n).createElement("style"),_t(c),Xt(c,"style",f),Td(c,a.precedence,n),i.instance=c;case"stylesheet":f=To(a.href);var p=n.querySelector(sc(f));if(p)return i.state.loading|=4,i.instance=p,_t(p),p;c=bE(a),(f=es.get(f))&&Km(c,f),p=(n.ownerDocument||n).createElement("link"),_t(p);var T=p;return T._p=new Promise(function(N,P){T.onload=N,T.onerror=P}),Xt(p,"link",c),i.state.loading|=4,Td(p,a.precedence,n),i.instance=p;case"script":return p=bo(a.src),(f=n.querySelector(ic(p)))?(i.instance=f,_t(f),f):(c=a,(f=es.get(p))&&(c=_({},a),Ym(c,f)),n=n.ownerDocument||n,f=n.createElement("script"),_t(f),Xt(f,"link",c),n.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(r(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(c=i.instance,i.state.loading|=4,Td(c,a.precedence,n));return i.instance}function Td(n,i,a){for(var c=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=c.length?c[c.length-1]:null,p=f,T=0;T<c.length;T++){var N=c[T];if(N.dataset.precedence===i)p=N;else if(p!==f)break}p?p.parentNode.insertBefore(n,p.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(n,i.firstChild))}function Km(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.title==null&&(n.title=i.title)}function Ym(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.integrity==null&&(n.integrity=i.integrity)}var bd=null;function NE(n,i,a){if(bd===null){var c=new Map,f=bd=new Map;f.set(a,c)}else f=bd,c=f.get(a),c||(c=new Map,f.set(a,c));if(c.has(n))return c;for(c.set(n,null),a=a.getElementsByTagName(n),f=0;f<a.length;f++){var p=a[f];if(!(p[Vr]||p[Ct]||n==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var T=p.getAttribute(i)||"";T=n+T;var N=c.get(T);N?N.push(p):c.set(T,[p])}}return c}function SE(n,i,a){n=n.ownerDocument||n,n.head.insertBefore(a,i==="title"?n.querySelector("head > title"):null)}function ox(n,i,a){if(a===1||i.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return n=i.disabled,typeof i.precedence=="string"&&n==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function wE(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}var rc=null;function lx(){}function cx(n,i,a){if(rc===null)throw Error(r(475));var c=rc;if(i.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var f=To(a.href),p=n.querySelector(sc(f));if(p){n=p._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(c.count++,c=Ad.bind(c),n.then(c,c)),i.state.loading|=4,i.instance=p,_t(p);return}p=n.ownerDocument||n,a=bE(a),(f=es.get(f))&&Km(a,f),p=p.createElement("link"),_t(p);var T=p;T._p=new Promise(function(N,P){T.onload=N,T.onerror=P}),Xt(p,"link",a),i.instance=p}c.stylesheets===null&&(c.stylesheets=new Map),c.stylesheets.set(i,n),(n=i.state.preload)&&(i.state.loading&3)===0&&(c.count++,i=Ad.bind(c),n.addEventListener("load",i),n.addEventListener("error",i))}}function ux(){if(rc===null)throw Error(r(475));var n=rc;return n.stylesheets&&n.count===0&&Qm(n,n.stylesheets),0<n.count?function(i){var a=setTimeout(function(){if(n.stylesheets&&Qm(n,n.stylesheets),n.unsuspend){var c=n.unsuspend;n.unsuspend=null,c()}},6e4);return n.unsuspend=i,function(){n.unsuspend=null,clearTimeout(a)}}:null}function Ad(){if(this.count--,this.count===0){if(this.stylesheets)Qm(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Nd=null;function Qm(n,i){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Nd=new Map,i.forEach(dx,n),Nd=null,Ad.call(n))}function dx(n,i){if(!(i.state.loading&4)){var a=Nd.get(n);if(a)var c=a.get(null);else{a=new Map,Nd.set(n,a);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<f.length;p++){var T=f[p];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(a.set(T.dataset.precedence,T),c=T)}c&&a.set(null,c)}f=i.instance,T=f.getAttribute("data-precedence"),p=a.get(T)||c,p===c&&a.set(null,f),a.set(T,f),this.count++,c=Ad.bind(this),f.addEventListener("load",c),f.addEventListener("error",c),p?p.parentNode.insertBefore(f,p.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),i.state.loading|=4}}var ac={$$typeof:K,Provider:null,Consumer:null,_currentValue:ue,_currentValue2:ue,_threadCount:0};function hx(n,i,a,c,f,p,T,N){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Gs(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Gs(0),this.hiddenUpdates=Gs(null),this.identifierPrefix=c,this.onUncaughtError=f,this.onCaughtError=p,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=N,this.incompleteTransitions=new Map}function xE(n,i,a,c,f,p,T,N,P,H,Z,ne){return n=new hx(n,i,a,T,N,P,H,ne),i=1,p===!0&&(i|=24),p=jn(3,null,null,i),n.current=p,p.stateNode=n,i=Rf(),i.refCount++,n.pooledCache=i,i.refCount++,p.memoizedState={element:c,isDehydrated:a,cache:i},Mf(p),n}function IE(n){return n?(n=Za,n):Za}function CE(n,i,a,c,f,p){f=IE(f),c.context===null?c.context=f:c.pendingContext=f,c=Pi(i),c.payload={element:a},p=p===void 0?null:p,p!==null&&(c.callback=p),a=ki(n,c,i),a!==null&&(kn(a,n,i),kl(a,n,i))}function RE(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<i?a:i}}function Xm(n,i){RE(n,i),(n=n.alternate)&&RE(n,i)}function jE(n){if(n.tag===13){var i=Wa(n,67108864);i!==null&&kn(i,n,67108864),Xm(n,67108864)}}var Sd=!0;function fx(n,i,a,c){var f=X.T;X.T=null;var p=re.p;try{re.p=2,Wm(n,i,a,c)}finally{re.p=p,X.T=f}}function mx(n,i,a,c){var f=X.T;X.T=null;var p=re.p;try{re.p=8,Wm(n,i,a,c)}finally{re.p=p,X.T=f}}function Wm(n,i,a,c){if(Sd){var f=Zm(c);if(f===null)Lm(n,i,c,wd,a),OE(n,c);else if(gx(f,n,i,a,c))c.stopPropagation();else if(OE(n,c),i&4&&-1<px.indexOf(n)){for(;f!==null;){var p=Ts(f);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var T=is(p.pendingLanes);if(T!==0){var N=p;for(N.pendingLanes|=2,N.entangledLanes|=2;T;){var P=1<<31-rn(T);N.entanglements[1]|=P,T&=~P}Ps(p),(We&6)===0&&(cd=zn()+500,Jl(0))}}break;case 13:N=Wa(p,2),N!==null&&kn(N,p,2),dd(),Xm(p,2)}if(p=Zm(c),p===null&&Lm(n,i,c,wd,a),p===f)break;f=p}f!==null&&c.stopPropagation()}else Lm(n,i,c,null,a)}}function Zm(n){return n=Gn(n),Jm(n)}var wd=null;function Jm(n){if(wd=null,n=Ks(n),n!==null){var i=l(n);if(i===null)n=null;else{var a=i.tag;if(a===13){if(n=h(i),n!==null)return n;n=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}return wd=n,null}function DE(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(tf()){case il:return 2;case Ra:return 8;case Dr:case nf:return 32;case ja:return 268435456;default:return 32}default:return 32}}var ep=!1,Qi=null,Xi=null,Wi=null,oc=new Map,lc=new Map,Zi=[],px="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function OE(n,i){switch(n){case"focusin":case"focusout":Qi=null;break;case"dragenter":case"dragleave":Xi=null;break;case"mouseover":case"mouseout":Wi=null;break;case"pointerover":case"pointerout":oc.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":lc.delete(i.pointerId)}}function cc(n,i,a,c,f,p){return n===null||n.nativeEvent!==p?(n={blockedOn:i,domEventName:a,eventSystemFlags:c,nativeEvent:p,targetContainers:[f]},i!==null&&(i=Ts(i),i!==null&&jE(i)),n):(n.eventSystemFlags|=c,i=n.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),n)}function gx(n,i,a,c,f){switch(i){case"focusin":return Qi=cc(Qi,n,i,a,c,f),!0;case"dragenter":return Xi=cc(Xi,n,i,a,c,f),!0;case"mouseover":return Wi=cc(Wi,n,i,a,c,f),!0;case"pointerover":var p=f.pointerId;return oc.set(p,cc(oc.get(p)||null,n,i,a,c,f)),!0;case"gotpointercapture":return p=f.pointerId,lc.set(p,cc(lc.get(p)||null,n,i,a,c,f)),!0}return!1}function ME(n){var i=Ks(n.target);if(i!==null){var a=l(i);if(a!==null){if(i=a.tag,i===13){if(i=h(a),i!==null){n.blockedOn=i,du(n.priority,function(){if(a.tag===13){var c=Pn();c=wi(c);var f=Wa(a,c);f!==null&&kn(f,a,c),Xm(a,c)}});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function xd(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var a=Zm(n.nativeEvent);if(a===null){a=n.nativeEvent;var c=new a.constructor(a.type,a);Ws=c,a.target.dispatchEvent(c),Ws=null}else return i=Ts(a),i!==null&&jE(i),n.blockedOn=a,!1;i.shift()}return!0}function PE(n,i,a){xd(n)&&a.delete(i)}function vx(){ep=!1,Qi!==null&&xd(Qi)&&(Qi=null),Xi!==null&&xd(Xi)&&(Xi=null),Wi!==null&&xd(Wi)&&(Wi=null),oc.forEach(PE),lc.forEach(PE)}function Id(n,i){n.blockedOn===i&&(n.blockedOn=null,ep||(ep=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,vx)))}var Cd=null;function kE(n){Cd!==n&&(Cd=n,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Cd===n&&(Cd=null);for(var i=0;i<n.length;i+=3){var a=n[i],c=n[i+1],f=n[i+2];if(typeof c!="function"){if(Jm(c||a)===null)continue;break}var p=Ts(a);p!==null&&(n.splice(i,3),i-=3,Jf(p,{pending:!0,data:f,method:a.method,action:c},c,f))}}))}function uc(n){function i(P){return Id(P,n)}Qi!==null&&Id(Qi,n),Xi!==null&&Id(Xi,n),Wi!==null&&Id(Wi,n),oc.forEach(i),lc.forEach(i);for(var a=0;a<Zi.length;a++){var c=Zi[a];c.blockedOn===n&&(c.blockedOn=null)}for(;0<Zi.length&&(a=Zi[0],a.blockedOn===null);)ME(a),a.blockedOn===null&&Zi.shift();if(a=(n.ownerDocument||n).$$reactFormReplay,a!=null)for(c=0;c<a.length;c+=3){var f=a[c],p=a[c+1],T=f[At]||null;if(typeof p=="function")T||kE(a);else if(T){var N=null;if(p&&p.hasAttribute("formAction")){if(f=p,T=p[At]||null)N=T.formAction;else if(Jm(f)!==null)continue}else N=T.action;typeof N=="function"?a[c+1]=N:(a.splice(c,3),c-=3),kE(a)}}}function tp(n){this._internalRoot=n}Rd.prototype.render=tp.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(r(409));var a=i.current,c=Pn();CE(a,c,n,i,null,null)},Rd.prototype.unmount=tp.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;CE(n.current,2,null,n,null,null),dd(),i[Bn]=null}};function Rd(n){this._internalRoot=n}Rd.prototype.unstable_scheduleHydration=function(n){if(n){var i=xi();n={blockedOn:null,target:n,priority:i};for(var a=0;a<Zi.length&&i!==0&&i<Zi[a].priority;a++);Zi.splice(a,0,n),a===0&&ME(n)}};var VE=e.version;if(VE!=="19.1.0")throw Error(r(527,VE,"19.1.0"));re.findDOMNode=function(n){var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(r(188)):(n=Object.keys(n).join(","),Error(r(268,n)));return n=g(i),n=n!==null?v(n):null,n=n===null?null:n.stateNode,n};var yx={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:X,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var jd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!jd.isDisabled&&jd.supportsFiber)try{pt=jd.inject(yx),Xe=jd}catch{}}return hc.createRoot=function(n,i){if(!o(n))throw Error(r(299));var a=!1,c="",f=Jy,p=e_,T=t_,N=null;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(c=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(p=i.onCaughtError),i.onRecoverableError!==void 0&&(T=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(N=i.unstable_transitionCallbacks)),i=xE(n,1,!1,null,null,a,c,f,p,T,N,null),n[Bn]=i.current,Vm(n),new tp(i)},hc.hydrateRoot=function(n,i,a){if(!o(n))throw Error(r(299));var c=!1,f="",p=Jy,T=e_,N=t_,P=null,H=null;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(p=a.onUncaughtError),a.onCaughtError!==void 0&&(T=a.onCaughtError),a.onRecoverableError!==void 0&&(N=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(P=a.unstable_transitionCallbacks),a.formState!==void 0&&(H=a.formState)),i=xE(n,1,!0,i,a??null,c,f,p,T,N,P,H),i.context=IE(null),a=i.current,c=Pn(),c=wi(c),f=Pi(c),f.callback=null,ki(a,f,c),a=c,i.current.lanes=a,$s(i,a),Ps(i),n[Bn]=i.current,Vm(n),new Rd(i)},hc.version="19.1.0",hc}var KE;function Ix(){if(KE)return ip.exports;KE=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),ip.exports=xx(),ip.exports}var Cx=Ix();const Rx=()=>{};var YE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a0=function(s){const e=[];let t=0;for(let r=0;r<s.length;r++){let o=s.charCodeAt(r);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&r+1<s.length&&(s.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(s.charCodeAt(++r)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},jx=function(s){const e=[];let t=0,r=0;for(;t<s.length;){const o=s[t++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){const l=s[t++];e[r++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=s[t++],h=s[t++],m=s[t++],g=((o&7)<<18|(l&63)<<12|(h&63)<<6|m&63)-65536;e[r++]=String.fromCharCode(55296+(g>>10)),e[r++]=String.fromCharCode(56320+(g&1023))}else{const l=s[t++],h=s[t++];e[r++]=String.fromCharCode((o&15)<<12|(l&63)<<6|h&63)}}return e.join("")},o0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<s.length;o+=3){const l=s[o],h=o+1<s.length,m=h?s[o+1]:0,g=o+2<s.length,v=g?s[o+2]:0,_=l>>2,b=(l&3)<<4|m>>4;let A=(m&15)<<2|v>>6,M=v&63;g||(M=64,h||(A=64)),r.push(t[_],t[b],t[A],t[M])}return r.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(a0(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):jx(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<s.length;){const l=t[s.charAt(o++)],m=o<s.length?t[s.charAt(o)]:0;++o;const v=o<s.length?t[s.charAt(o)]:64;++o;const b=o<s.length?t[s.charAt(o)]:64;if(++o,l==null||m==null||v==null||b==null)throw new Dx;const A=l<<2|m>>4;if(r.push(A),v!==64){const M=m<<4&240|v>>2;if(r.push(M),b!==64){const I=v<<6&192|b;r.push(I)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class Dx extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ox=function(s){const e=a0(s);return o0.encodeByteArray(e,!0)},Jd=function(s){return Ox(s).replace(/\./g,"")},l0=function(s){try{return o0.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mx(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Px=()=>Mx().__FIREBASE_DEFAULTS__,kx=()=>{if(typeof process>"u"||typeof YE>"u")return;const s=YE.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},Vx=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&l0(s[1]);return e&&JSON.parse(e)},Sh=()=>{try{return Rx()||Px()||kx()||Vx()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},c0=s=>{var e,t;return(t=(e=Sh())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[s]},u0=s=>{const e=c0(s);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},d0=()=>{var s;return(s=Sh())===null||s===void 0?void 0:s.config},h0=s=>{var e;return(e=Sh())===null||e===void 0?void 0:e[`_${s}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lx{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sa(s){return s.endsWith(".cloudworkstations.dev")}async function lg(s){return(await fetch(s,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f0(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",o=s.iat||0,l=s.sub||s.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},s);return[Jd(JSON.stringify(t)),Jd(JSON.stringify(h)),""].join(".")}const _c={};function Ux(){const s={prod:[],emulator:[]};for(const e of Object.keys(_c))_c[e]?s.emulator.push(e):s.prod.push(e);return s}function Fx(s){let e=document.getElementById(s),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),t=!0),{created:t,element:e}}let QE=!1;function cg(s,e){if(typeof window>"u"||typeof document>"u"||!Sa(window.location.host)||_c[s]===e||_c[s]||QE)return;_c[s]=e;function t(A){return`__firebase__banner__${A}`}const r="__firebase__banner",l=Ux().prod.length>0;function h(){const A=document.getElementById(r);A&&A.remove()}function m(A){A.style.display="flex",A.style.background="#7faaf0",A.style.position="fixed",A.style.bottom="5px",A.style.left="5px",A.style.padding=".5em",A.style.borderRadius="5px",A.style.alignItems="center"}function g(A,M){A.setAttribute("width","24"),A.setAttribute("id",M),A.setAttribute("height","24"),A.setAttribute("viewBox","0 0 24 24"),A.setAttribute("fill","none"),A.style.marginLeft="-6px"}function v(){const A=document.createElement("span");return A.style.cursor="pointer",A.style.marginLeft="16px",A.style.fontSize="24px",A.innerHTML=" &times;",A.onclick=()=>{QE=!0,h()},A}function _(A,M){A.setAttribute("id",M),A.innerText="Learn more",A.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",A.setAttribute("target","__blank"),A.style.paddingLeft="5px",A.style.textDecoration="underline"}function b(){const A=Fx(r),M=t("text"),I=document.getElementById(M)||document.createElement("span"),U=t("learnmore"),x=document.getElementById(U)||document.createElement("a"),$=t("preprendIcon"),W=document.getElementById($)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(A.created){const K=A.element;m(K),_(x,U);const J=v();g(W,$),K.append(W,I,x,J),document.body.appendChild(K)}l?(I.innerText="Preview backend disconnected.",W.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(W.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,I.innerText="Preview backend running in this workspace."),I.setAttribute("id",M)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",b):b()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function qx(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(hn())}function zx(){var s;const e=(s=Sh())===null||s===void 0?void 0:s.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Bx(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function m0(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function Hx(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Gx(){const s=hn();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function $x(){return!zx()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ug(){try{return typeof indexedDB=="object"}catch{return!1}}function dg(){return new Promise((s,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(r),s(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}function p0(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kx="FirebaseError";class ss extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=Kx,Object.setPrototypeOf(this,ss.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Tr.prototype.create)}}class Tr{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],h=l?Yx(l,r):"Error",m=`${this.serviceName}: ${h} (${o}).`;return new ss(o,m,r)}}function Yx(s,e){return s.replace(Qx,(t,r)=>{const o=e[r];return o!=null?String(o):`<${r}?>`})}const Qx=/\{\$([^}]+)}/g;function Xx(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function dr(s,e){if(s===e)return!0;const t=Object.keys(s),r=Object.keys(e);for(const o of t){if(!r.includes(o))return!1;const l=s[o],h=e[o];if(XE(l)&&XE(h)){if(!dr(l,h))return!1}else if(l!==h)return!1}for(const o of r)if(!t.includes(o))return!1;return!0}function XE(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hc(s){const e=[];for(const[t,r]of Object.entries(s))Array.isArray(r)?r.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function fc(s){const e={};return s.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[o,l]=r.split("=");e[decodeURIComponent(o)]=decodeURIComponent(l)}}),e}function mc(s){const e=s.indexOf("?");if(!e)return"";const t=s.indexOf("#",e);return s.substring(e,t>0?t:void 0)}function Wx(s,e){const t=new Zx(s,e);return t.subscribe.bind(t)}class Zx{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let o;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");Jx(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:r},o.next===void 0&&(o.next=lp),o.error===void 0&&(o.error=lp),o.complete===void 0&&(o.complete=lp);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Jx(s,e){if(typeof s!="object"||s===null)return!1;for(const t of e)if(t in s&&typeof s[t]=="function")return!0;return!1}function lp(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eI=1e3,tI=2,nI=4*60*60*1e3,sI=.5;function WE(s,e=eI,t=tI){const r=e*Math.pow(t,s),o=Math.round(sI*r*(Math.random()-.5)*2);return Math.min(nI,r+o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lt(s){return s&&s._delegate?s._delegate:s}class qn{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ha="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new Lx;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e?.identifier),o=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(l){if(o)return null;throw l}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(aI(e))try{this.getOrInitializeService({instanceIdentifier:ha})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});r.resolve(l)}catch{}}}}clearInstance(e=ha){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ha){return this.instances.has(e)}getOptions(e=ha){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[l,h]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(l);r===m&&h.resolve(o)}return o}onInit(e,t){var r;const o=this.normalizeInstanceIdentifier(t),l=(r=this.onInitCallbacks.get(o))!==null&&r!==void 0?r:new Set;l.add(e),this.onInitCallbacks.set(o,l);const h=this.instances.get(o);return h&&e(h,o),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const o of r)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:rI(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ha){return this.component?this.component.multipleInstances?e:ha:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function rI(s){return s===ha?void 0:s}function aI(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new iI(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Le;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Le||(Le={}));const lI={debug:Le.DEBUG,verbose:Le.VERBOSE,info:Le.INFO,warn:Le.WARN,error:Le.ERROR,silent:Le.SILENT},cI=Le.INFO,uI={[Le.DEBUG]:"log",[Le.VERBOSE]:"log",[Le.INFO]:"info",[Le.WARN]:"warn",[Le.ERROR]:"error"},dI=(s,e,...t)=>{if(e<s.logLevel)return;const r=new Date().toISOString(),o=uI[e];if(o)console[o](`[${r}]  ${s.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Gc{constructor(e){this.name=e,this._logLevel=cI,this._logHandler=dI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?lI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Le.DEBUG,...e),this._logHandler(this,Le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Le.VERBOSE,...e),this._logHandler(this,Le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Le.INFO,...e),this._logHandler(this,Le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Le.WARN,...e),this._logHandler(this,Le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Le.ERROR,...e),this._logHandler(this,Le.ERROR,...e)}}const hI=(s,e)=>e.some(t=>s instanceof t);let ZE,JE;function fI(){return ZE||(ZE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function mI(){return JE||(JE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const g0=new WeakMap,Cp=new WeakMap,v0=new WeakMap,cp=new WeakMap,hg=new WeakMap;function pI(s){const e=new Promise((t,r)=>{const o=()=>{s.removeEventListener("success",l),s.removeEventListener("error",h)},l=()=>{t(or(s.result)),o()},h=()=>{r(s.error),o()};s.addEventListener("success",l),s.addEventListener("error",h)});return e.then(t=>{t instanceof IDBCursor&&g0.set(t,s)}).catch(()=>{}),hg.set(e,s),e}function gI(s){if(Cp.has(s))return;const e=new Promise((t,r)=>{const o=()=>{s.removeEventListener("complete",l),s.removeEventListener("error",h),s.removeEventListener("abort",h)},l=()=>{t(),o()},h=()=>{r(s.error||new DOMException("AbortError","AbortError")),o()};s.addEventListener("complete",l),s.addEventListener("error",h),s.addEventListener("abort",h)});Cp.set(s,e)}let Rp={get(s,e,t){if(s instanceof IDBTransaction){if(e==="done")return Cp.get(s);if(e==="objectStoreNames")return s.objectStoreNames||v0.get(s);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return or(s[e])},set(s,e,t){return s[e]=t,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function vI(s){Rp=s(Rp)}function yI(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=s.call(up(this),e,...t);return v0.set(r,e.sort?e.sort():[e]),or(r)}:mI().includes(s)?function(...e){return s.apply(up(this),e),or(g0.get(this))}:function(...e){return or(s.apply(up(this),e))}}function _I(s){return typeof s=="function"?yI(s):(s instanceof IDBTransaction&&gI(s),hI(s,fI())?new Proxy(s,Rp):s)}function or(s){if(s instanceof IDBRequest)return pI(s);if(cp.has(s))return cp.get(s);const e=_I(s);return e!==s&&(cp.set(s,e),hg.set(e,s)),e}const up=s=>hg.get(s);function y0(s,e,{blocked:t,upgrade:r,blocking:o,terminated:l}={}){const h=indexedDB.open(s,e),m=or(h);return r&&h.addEventListener("upgradeneeded",g=>{r(or(h.result),g.oldVersion,g.newVersion,or(h.transaction),g)}),t&&h.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),m.then(g=>{l&&g.addEventListener("close",()=>l()),o&&g.addEventListener("versionchange",v=>o(v.oldVersion,v.newVersion,v))}).catch(()=>{}),m}const EI=["get","getKey","getAll","getAllKeys","count"],TI=["put","add","delete","clear"],dp=new Map;function eT(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(dp.get(e))return dp.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,o=TI.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(o||EI.includes(t)))return;const l=async function(h,...m){const g=this.transaction(h,o?"readwrite":"readonly");let v=g.store;return r&&(v=v.index(m.shift())),(await Promise.all([v[t](...m),o&&g.done]))[0]};return dp.set(e,l),l}vI(s=>({...s,get:(e,t,r)=>eT(e,t)||s.get(e,t,r),has:(e,t)=>!!eT(e,t)||s.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(AI(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function AI(s){const e=s.getComponent();return e?.type==="VERSION"}const jp="@firebase/app",tT="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ei=new Gc("@firebase/app"),NI="@firebase/app-compat",SI="@firebase/analytics-compat",wI="@firebase/analytics",xI="@firebase/app-check-compat",II="@firebase/app-check",CI="@firebase/auth",RI="@firebase/auth-compat",jI="@firebase/database",DI="@firebase/data-connect",OI="@firebase/database-compat",MI="@firebase/functions",PI="@firebase/functions-compat",kI="@firebase/installations",VI="@firebase/installations-compat",LI="@firebase/messaging",UI="@firebase/messaging-compat",FI="@firebase/performance",qI="@firebase/performance-compat",zI="@firebase/remote-config",BI="@firebase/remote-config-compat",HI="@firebase/storage",GI="@firebase/storage-compat",$I="@firebase/firestore",KI="@firebase/ai",YI="@firebase/firestore-compat",QI="firebase",XI="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dp="[DEFAULT]",WI={[jp]:"fire-core",[NI]:"fire-core-compat",[wI]:"fire-analytics",[SI]:"fire-analytics-compat",[II]:"fire-app-check",[xI]:"fire-app-check-compat",[CI]:"fire-auth",[RI]:"fire-auth-compat",[jI]:"fire-rtdb",[DI]:"fire-data-connect",[OI]:"fire-rtdb-compat",[MI]:"fire-fn",[PI]:"fire-fn-compat",[kI]:"fire-iid",[VI]:"fire-iid-compat",[LI]:"fire-fcm",[UI]:"fire-fcm-compat",[FI]:"fire-perf",[qI]:"fire-perf-compat",[zI]:"fire-rc",[BI]:"fire-rc-compat",[HI]:"fire-gcs",[GI]:"fire-gcs-compat",[$I]:"fire-fst",[YI]:"fire-fst-compat",[KI]:"fire-vertex","fire-js":"fire-js",[QI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eh=new Map,ZI=new Map,Op=new Map;function nT(s,e){try{s.container.addComponent(e)}catch(t){Ei.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,t)}}function ts(s){const e=s.name;if(Op.has(e))return Ei.debug(`There were multiple attempts to register component ${e}.`),!1;Op.set(e,s);for(const t of eh.values())nT(t,s);for(const t of ZI.values())nT(t,s);return!0}function Ni(s,e){const t=s.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),s.container.getProvider(e)}function Nn(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},lr=new Tr("app","Firebase",JI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new qn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw lr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wa=XI;function _0(s,e={}){let t=s;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Dp,automaticDataCollectionEnabled:!0},e),o=r.name;if(typeof o!="string"||!o)throw lr.create("bad-app-name",{appName:String(o)});if(t||(t=d0()),!t)throw lr.create("no-options");const l=eh.get(o);if(l){if(dr(t,l.options)&&dr(r,l.config))return l;throw lr.create("duplicate-app",{appName:o})}const h=new oI(o);for(const g of Op.values())h.addComponent(g);const m=new eC(t,r,h);return eh.set(o,m),m}function $c(s=Dp){const e=eh.get(s);if(!e&&s===Dp&&d0())return _0();if(!e)throw lr.create("no-app",{appName:s});return e}function dn(s,e,t){var r;let o=(r=WI[s])!==null&&r!==void 0?r:s;t&&(o+=`-${t}`);const l=o.match(/\s|\//),h=e.match(/\s|\//);if(l||h){const m=[`Unable to register library "${o}" with version "${e}":`];l&&m.push(`library name "${o}" contains illegal characters (whitespace or "/")`),l&&h&&m.push("and"),h&&m.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ei.warn(m.join(" "));return}ts(new qn(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tC="firebase-heartbeat-database",nC=1,jc="firebase-heartbeat-store";let hp=null;function E0(){return hp||(hp=y0(tC,nC,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(jc)}catch(t){console.warn(t)}}}}).catch(s=>{throw lr.create("idb-open",{originalErrorMessage:s.message})})),hp}async function sC(s){try{const t=(await E0()).transaction(jc),r=await t.objectStore(jc).get(T0(s));return await t.done,r}catch(e){if(e instanceof ss)Ei.warn(e.message);else{const t=lr.create("idb-get",{originalErrorMessage:e?.message});Ei.warn(t.message)}}}async function sT(s,e){try{const r=(await E0()).transaction(jc,"readwrite");await r.objectStore(jc).put(e,T0(s)),await r.done}catch(t){if(t instanceof ss)Ei.warn(t.message);else{const r=lr.create("idb-set",{originalErrorMessage:t?.message});Ei.warn(r.message)}}}function T0(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iC=1024,rC=30;class aC{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new lC(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=iT();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(h=>h.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats.length>rC){const h=cC(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(h,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Ei.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=iT(),{heartbeatsToSend:r,unsentEntries:o}=oC(this._heartbeatsCache.heartbeats),l=Jd(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Ei.warn(t),""}}}function iT(){return new Date().toISOString().substring(0,10)}function oC(s,e=iC){const t=[];let r=s.slice();for(const o of s){const l=t.find(h=>h.agent===o.agent);if(l){if(l.dates.push(o.date),rT(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),rT(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class lC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ug()?dg().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await sC(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return sT(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return sT(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function rT(s){return Jd(JSON.stringify({version:2,heartbeats:s})).length}function cC(s){if(s.length===0)return-1;let e=0,t=s[0].date;for(let r=1;r<s.length;r++)s[r].date<t&&(t=s[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uC(s){ts(new qn("platform-logger",e=>new bI(e),"PRIVATE")),ts(new qn("heartbeat",e=>new aC(e),"PRIVATE")),dn(jp,tT,s),dn(jp,tT,"esm2017"),dn("fire-js","")}uC("");function fg(s,e){var t={};for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&e.indexOf(r)<0&&(t[r]=s[r]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(s);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(s,r[o])&&(t[r[o]]=s[r[o]]);return t}function b0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const dC=b0,A0=new Tr("auth","Firebase",b0());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const th=new Gc("@firebase/auth");function hC(s,...e){th.logLevel<=Le.WARN&&th.warn(`Auth (${wa}): ${s}`,...e)}function qd(s,...e){th.logLevel<=Le.ERROR&&th.error(`Auth (${wa}): ${s}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ns(s,...e){throw pg(s,...e)}function gs(s,...e){return pg(s,...e)}function mg(s,e,t){const r=Object.assign(Object.assign({},dC()),{[e]:t});return new Tr("auth","Firebase",r).create(e,{appName:s.name})}function _i(s){return mg(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function fC(s,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&ns(s,"argument-error"),mg(s,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function pg(s,...e){if(typeof s!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=s.name),s._errorFactory.create(t,...r)}return A0.create(s,...e)}function Se(s,e,...t){if(!s)throw pg(e,...t)}function vi(s){const e="INTERNAL ASSERTION FAILED: "+s;throw qd(e),new Error(e)}function Ti(s,e){s||vi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mp(){var s;return typeof self<"u"&&((s=self.location)===null||s===void 0?void 0:s.href)||""}function mC(){return aT()==="http:"||aT()==="https:"}function aT(){var s;return typeof self<"u"&&((s=self.location)===null||s===void 0?void 0:s.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(mC()||m0()||"connection"in navigator)?navigator.onLine:!0}function gC(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ti(t>e,"Short delay should be less than long delay!"),this.isMobile=qx()||Hx()}get(){return pC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gg(s,e){Ti(s.emulator,"Emulator should always be set here");const{url:t}=s.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N0{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;vi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;vi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;vi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yC=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],_C=new Kc(3e4,6e4);function br(s,e){return s.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:s.tenantId}):e}async function Ar(s,e,t,r,o={}){return S0(s,o,async()=>{let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});const m=Hc(Object.assign({key:s.config.apiKey},h)).slice(1),g=await s._getAdditionalHeaders();g["Content-Type"]="application/json",s.languageCode&&(g["X-Firebase-Locale"]=s.languageCode);const v=Object.assign({method:e,headers:g},l);return Bx()||(v.referrerPolicy="no-referrer"),s.emulatorConfig&&Sa(s.emulatorConfig.host)&&(v.credentials="include"),N0.fetch()(await w0(s,s.config.apiHost,t,m),v)})}async function S0(s,e,t){s._canInitEmulator=!1;const r=Object.assign(Object.assign({},vC),e);try{const o=new TC(s),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const h=await l.json();if("needConfirmation"in h)throw Dd(s,"account-exists-with-different-credential",h);if(l.ok&&!("errorMessage"in h))return h;{const m=l.ok?h.errorMessage:h.error.message,[g,v]=m.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Dd(s,"credential-already-in-use",h);if(g==="EMAIL_EXISTS")throw Dd(s,"email-already-in-use",h);if(g==="USER_DISABLED")throw Dd(s,"user-disabled",h);const _=r[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(v)throw mg(s,_,v);ns(s,_)}}catch(o){if(o instanceof ss)throw o;ns(s,"network-request-failed",{message:String(o)})}}async function Yc(s,e,t,r,o={}){const l=await Ar(s,e,t,r,o);return"mfaPendingCredential"in l&&ns(s,"multi-factor-auth-required",{_serverResponse:l}),l}async function w0(s,e,t,r){const o=`${e}${t}?${r}`,l=s,h=l.config.emulator?gg(s.config,o):`${s.config.apiScheme}://${o}`;return yC.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(h).toString():h}function EC(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class TC{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(gs(this.auth,"network-request-failed")),_C.get())})}}function Dd(s,e,t){const r={appName:s.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const o=gs(s,e,r);return o.customData._tokenResponse=t,o}function oT(s){return s!==void 0&&s.enterprise!==void 0}class bC{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return EC(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function AC(s,e){return Ar(s,"GET","/v2/recaptchaConfig",br(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NC(s,e){return Ar(s,"POST","/v1/accounts:delete",e)}async function nh(s,e){return Ar(s,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ec(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function SC(s,e=!1){const t=lt(s),r=await t.getIdToken(e),o=vg(r);Se(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,h=l?.sign_in_provider;return{claims:o,token:r,authTime:Ec(fp(o.auth_time)),issuedAtTime:Ec(fp(o.iat)),expirationTime:Ec(fp(o.exp)),signInProvider:h||null,signInSecondFactor:l?.sign_in_second_factor||null}}function fp(s){return Number(s)*1e3}function vg(s){const[e,t,r]=s.split(".");if(e===void 0||t===void 0||r===void 0)return qd("JWT malformed, contained fewer than 3 sections"),null;try{const o=l0(t);return o?JSON.parse(o):(qd("Failed to decode base64 JWT payload"),null)}catch(o){return qd("Caught error parsing JWT payload as JSON",o?.toString()),null}}function lT(s){const e=vg(s);return Se(e,"internal-error"),Se(typeof e.exp<"u","internal-error"),Se(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dc(s,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof ss&&wC(r)&&s.auth.currentUser===s&&await s.auth.signOut(),r}}function wC({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xC{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ec(this.lastLoginAt),this.creationTime=Ec(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sh(s){var e;const t=s.auth,r=await s.getIdToken(),o=await Dc(s,nh(t,{idToken:r}));Se(o?.users.length,t,"internal-error");const l=o.users[0];s._notifyReloadListener(l);const h=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?x0(l.providerUserInfo):[],m=CC(s.providerData,h),g=s.isAnonymous,v=!(s.email&&l.passwordHash)&&!m?.length,_=g?v:!1,b={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:m,metadata:new Pp(l.createdAt,l.lastLoginAt),isAnonymous:_};Object.assign(s,b)}async function IC(s){const e=lt(s);await sh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function CC(s,e){return[...s.filter(r=>!e.some(o=>o.providerId===r.providerId)),...e]}function x0(s){return s.map(e=>{var{providerId:t}=e,r=fg(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RC(s,e){const t=await S0(s,{},async()=>{const r=Hc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=s.config,h=await w0(s,o,"/v1/token",`key=${l}`),m=await s._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:m,body:r};return s.emulatorConfig&&Sa(s.emulatorConfig.host)&&(g.credentials="include"),N0.fetch()(h,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function jC(s,e){return Ar(s,"POST","/v2/accounts:revokeToken",br(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Se(e.idToken,"internal-error"),Se(typeof e.idToken<"u","internal-error"),Se(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):lT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Se(e.length!==0,"internal-error");const t=lT(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Se(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:o,expiresIn:l}=await RC(e,t);this.updateTokensAndExpiration(r,o,Number(l))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:o,expirationTime:l}=t,h=new Do;return r&&(Se(typeof r=="string","internal-error",{appName:e}),h.refreshToken=r),o&&(Se(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),l&&(Se(typeof l=="number","internal-error",{appName:e}),h.expirationTime=l),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Do,this.toJSON())}_performRefresh(){return vi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function er(s,e){Se(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class ms{constructor(e){var{uid:t,auth:r,stsTokenManager:o}=e,l=fg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new xC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Pp(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await Dc(this,this.stsTokenManager.getToken(this.auth,e));return Se(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return SC(this,e)}reload(){return IC(this)}_assign(e){this!==e&&(Se(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ms(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await sh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Nn(this.auth.app))return Promise.reject(_i(this.auth));const e=await this.getIdToken();return await Dc(this,NC(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,o,l,h,m,g,v,_;const b=(r=t.displayName)!==null&&r!==void 0?r:void 0,A=(o=t.email)!==null&&o!==void 0?o:void 0,M=(l=t.phoneNumber)!==null&&l!==void 0?l:void 0,I=(h=t.photoURL)!==null&&h!==void 0?h:void 0,U=(m=t.tenantId)!==null&&m!==void 0?m:void 0,x=(g=t._redirectEventId)!==null&&g!==void 0?g:void 0,$=(v=t.createdAt)!==null&&v!==void 0?v:void 0,W=(_=t.lastLoginAt)!==null&&_!==void 0?_:void 0,{uid:K,emailVerified:J,isAnonymous:q,providerData:oe,stsTokenManager:O}=t;Se(K&&O,e,"internal-error");const S=Do.fromJSON(this.name,O);Se(typeof K=="string",e,"internal-error"),er(b,e.name),er(A,e.name),Se(typeof J=="boolean",e,"internal-error"),Se(typeof q=="boolean",e,"internal-error"),er(M,e.name),er(I,e.name),er(U,e.name),er(x,e.name),er($,e.name),er(W,e.name);const R=new ms({uid:K,auth:e,email:A,emailVerified:J,displayName:b,isAnonymous:q,photoURL:I,phoneNumber:M,tenantId:U,stsTokenManager:S,createdAt:$,lastLoginAt:W});return oe&&Array.isArray(oe)&&(R.providerData=oe.map(D=>Object.assign({},D))),x&&(R._redirectEventId=x),R}static async _fromIdTokenResponse(e,t,r=!1){const o=new Do;o.updateFromServerResponse(t);const l=new ms({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:r});return await sh(l),l}static async _fromGetAccountInfoResponse(e,t,r){const o=t.users[0];Se(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?x0(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!l?.length,m=new Do;m.updateFromIdToken(r);const g=new ms({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:h}),v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new Pp(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!l?.length};return Object.assign(g,v),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cT=new Map;function yi(s){Ti(s instanceof Function,"Expected a class definition");let e=cT.get(s);return e?(Ti(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,cT.set(s,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}I0.type="NONE";const uT=I0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zd(s,e,t){return`firebase:${s}:${e}:${t}`}class Oo{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:o,name:l}=this.auth;this.fullUserKey=zd(this.userKey,o.apiKey,l),this.fullPersistenceKey=zd("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await nh(this.auth,{idToken:e}).catch(()=>{});return t?ms._fromGetAccountInfoResponse(this.auth,t,e):null}return ms._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Oo(yi(uT),e,r);const o=(await Promise.all(t.map(async v=>{if(await v._isAvailable())return v}))).filter(v=>v);let l=o[0]||yi(uT);const h=zd(r,e.config.apiKey,e.name);let m=null;for(const v of t)try{const _=await v._get(h);if(_){let b;if(typeof _=="string"){const A=await nh(e,{idToken:_}).catch(()=>{});if(!A)break;b=await ms._fromGetAccountInfoResponse(e,A,_)}else b=ms._fromJSON(e,_);v!==l&&(m=b),l=v;break}}catch{}const g=o.filter(v=>v._shouldAllowMigration);return!l._shouldAllowMigration||!g.length?new Oo(l,e,r):(l=g[0],m&&await l._set(h,m.toJSON()),await Promise.all(t.map(async v=>{if(v!==l)try{await v._remove(h)}catch{}})),new Oo(l,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dT(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(D0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(C0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(M0(e))return"Blackberry";if(P0(e))return"Webos";if(R0(e))return"Safari";if((e.includes("chrome/")||j0(e))&&!e.includes("edge/"))return"Chrome";if(O0(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=s.match(t);if(r?.length===2)return r[1]}return"Other"}function C0(s=hn()){return/firefox\//i.test(s)}function R0(s=hn()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function j0(s=hn()){return/crios\//i.test(s)}function D0(s=hn()){return/iemobile/i.test(s)}function O0(s=hn()){return/android/i.test(s)}function M0(s=hn()){return/blackberry/i.test(s)}function P0(s=hn()){return/webos/i.test(s)}function yg(s=hn()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function DC(s=hn()){var e;return yg(s)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function OC(){return Gx()&&document.documentMode===10}function k0(s=hn()){return yg(s)||O0(s)||P0(s)||M0(s)||/windows phone/i.test(s)||D0(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V0(s,e=[]){let t;switch(s){case"Browser":t=dT(hn());break;case"Worker":t=`${dT(hn())}-${s}`;break;default:t=s}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${wa}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MC{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=l=>new Promise((h,m)=>{try{const g=e(l);h(g)}catch(g){m(g)}});r.onAbort=t,this.queue.push(r);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PC(s,e={}){return Ar(s,"GET","/v2/passwordPolicy",br(s,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kC=6;class VC{constructor(e){var t,r,o,l;const h=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=h.minPasswordLength)!==null&&t!==void 0?t:kC,h.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=h.maxPasswordLength),h.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=h.containsLowercaseCharacter),h.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=h.containsUppercaseCharacter),h.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=h.containsNumericCharacter),h.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=h.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,o,l,h,m;const g={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,g),this.validatePasswordCharacterOptions(e,g),g.isValid&&(g.isValid=(t=g.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),g.isValid&&(g.isValid=(r=g.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),g.isValid&&(g.isValid=(o=g.containsLowercaseLetter)!==null&&o!==void 0?o:!0),g.isValid&&(g.isValid=(l=g.containsUppercaseLetter)!==null&&l!==void 0?l:!0),g.isValid&&(g.isValid=(h=g.containsNumericCharacter)!==null&&h!==void 0?h:!0),g.isValid&&(g.isValid=(m=g.containsNonAlphanumericCharacter)!==null&&m!==void 0?m:!0),g}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let o=0;o<e.length;o++)r=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LC{constructor(e,t,r,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new hT(this),this.idTokenSubscription=new hT(this),this.beforeStateQueue=new MC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=A0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=yi(t)),this._initializationPromise=this.queue(async()=>{var r,o,l;if(!this._deleted&&(this.persistenceManager=await Oo.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await nh(this,{idToken:e}),r=await ms._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Nn(this.app)){const h=this.app.settings.authIdToken;return h?new Promise(m=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(h).then(m,m))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let o=r,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const h=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,m=o?._redirectEventId,g=await this.tryRedirectSignIn(e);(!h||h===m)&&g?.user&&(o=g.user,l=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(o)}catch(h){o=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(h))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Se(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await sh(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=gC()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Nn(this.app))return Promise.reject(_i(this));const t=e?lt(e):null;return t&&Se(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Se(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Nn(this.app)?Promise.reject(_i(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Nn(this.app)?Promise.reject(_i(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(yi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await PC(this),t=new VC(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Tr("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await jC(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&yi(e)||this._popupRedirectResolver;Se(t,this,"argument-error"),this.redirectPersistenceManager=await Oo.create(this,[yi(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let h=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Se(m,this,"internal-error"),m.then(()=>{h||l(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,r,o);return()=>{h=!0,g()}}else{const g=e.addObserver(t);return()=>{h=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=V0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;if(Nn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&hC(`Error while retrieving App Check token: ${t.error}`),t?.token}}function Nr(s){return lt(s)}class hT{constructor(e){this.auth=e,this.observer=null,this.addObserver=Wx(t=>this.observer=t)}get next(){return Se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function UC(s){wh=s}function L0(s){return wh.loadJS(s)}function FC(){return wh.recaptchaEnterpriseScript}function qC(){return wh.gapiScript}function zC(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class BC{constructor(){this.enterprise=new HC}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class HC{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const GC="recaptcha-enterprise",U0="NO_RECAPTCHA";class $C{constructor(e){this.type=GC,this.auth=Nr(e)}async verify(e="verify",t=!1){async function r(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(h,m)=>{AC(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const v=new bC(g);return l.tenantId==null?l._agentRecaptchaConfig=v:l._tenantRecaptchaConfigs[l.tenantId]=v,h(v.siteKey)}}).catch(g=>{m(g)})})}function o(l,h,m){const g=window.grecaptcha;oT(g)?g.enterprise.ready(()=>{g.enterprise.execute(l,{action:e}).then(v=>{h(v)}).catch(()=>{h(U0)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new BC().execute("siteKey",{action:"verify"}):new Promise((l,h)=>{r(this.auth).then(m=>{if(!t&&oT(window.grecaptcha))o(m,l,h);else{if(typeof window>"u"){h(new Error("RecaptchaVerifier is only supported in browser"));return}let g=FC();g.length!==0&&(g+=m),L0(g).then(()=>{o(m,l,h)}).catch(v=>{h(v)})}}).catch(m=>{h(m)})})}}async function fT(s,e,t,r=!1,o=!1){const l=new $C(s);let h;if(o)h=U0;else try{h=await l.verify(t)}catch{h=await l.verify(t,!0)}const m=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const g=m.phoneEnrollmentInfo.phoneNumber,v=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:v,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const g=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return r?Object.assign(m,{captchaResp:h}):Object.assign(m,{captchaResponse:h}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function kp(s,e,t,r,o){var l;if(!((l=s._getRecaptchaConfig())===null||l===void 0)&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const h=await fT(s,e,t,t==="getOobCode");return r(s,h)}else return r(s,e).catch(async h=>{if(h.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const m=await fT(s,e,t,t==="getOobCode");return r(s,m)}else return Promise.reject(h)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KC(s,e){const t=Ni(s,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(dr(l,e??{}))return o;ns(o,"already-initialized")}return t.initialize({options:e})}function YC(s,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(yi);e?.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(r,e?.popupRedirectResolver)}function QC(s,e,t){const r=Nr(s);Se(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const o=!1,l=F0(e),{host:h,port:m}=XC(e),g=m===null?"":`:${m}`,v={url:`${l}//${h}${g}/`},_=Object.freeze({host:h,port:m,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!r._canInitEmulator){Se(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Se(dr(v,r.config.emulator)&&dr(_,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=v,r.emulatorConfig=_,r.settings.appVerificationDisabledForTesting=!0,Sa(h)?(lg(`${l}//${h}${g}`),cg("Auth",!0)):WC()}function F0(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function XC(s){const e=F0(s),t=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(r);if(o){const l=o[1];return{host:l,port:mT(r.substr(l.length+1))}}else{const[l,h]=r.split(":");return{host:l,port:mT(h)}}}function mT(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function WC(){function s(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _g{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return vi("not implemented")}_getIdTokenResponse(e){return vi("not implemented")}_linkToIdToken(e,t){return vi("not implemented")}_getReauthenticationResolver(e){return vi("not implemented")}}async function ZC(s,e){return Ar(s,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JC(s,e){return Yc(s,"POST","/v1/accounts:signInWithPassword",br(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eR(s,e){return Yc(s,"POST","/v1/accounts:signInWithEmailLink",br(s,e))}async function tR(s,e){return Yc(s,"POST","/v1/accounts:signInWithEmailLink",br(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc extends _g{constructor(e,t,r,o=null){super("password",r),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new Oc(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Oc(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return kp(e,t,"signInWithPassword",JC);case"emailLink":return eR(e,{email:this._email,oobCode:this._password});default:ns(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return kp(e,r,"signUpPassword",ZC);case"emailLink":return tR(e,{idToken:t,email:this._email,oobCode:this._password});default:ns(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mo(s,e){return Yc(s,"POST","/v1/accounts:signInWithIdp",br(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nR="http://localhost";class ya extends _g{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ya(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ns("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:o}=t,l=fg(t,["providerId","signInMethod"]);if(!r||!o)return null;const h=new ya(r,o);return h.idToken=l.idToken||void 0,h.accessToken=l.accessToken||void 0,h.secret=l.secret,h.nonce=l.nonce,h.pendingToken=l.pendingToken||null,h}_getIdTokenResponse(e){const t=this.buildRequest();return Mo(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Mo(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Mo(e,t)}buildRequest(){const e={requestUri:nR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Hc(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sR(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function iR(s){const e=fc(mc(s)).link,t=e?fc(mc(e)).deep_link_id:null,r=fc(mc(s)).deep_link_id;return(r?fc(mc(r)).link:null)||r||t||e||s}class Eg{constructor(e){var t,r,o,l,h,m;const g=fc(mc(e)),v=(t=g.apiKey)!==null&&t!==void 0?t:null,_=(r=g.oobCode)!==null&&r!==void 0?r:null,b=sR((o=g.mode)!==null&&o!==void 0?o:null);Se(v&&_&&b,"argument-error"),this.apiKey=v,this.operation=b,this.code=_,this.continueUrl=(l=g.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(h=g.lang)!==null&&h!==void 0?h:null,this.tenantId=(m=g.tenantId)!==null&&m!==void 0?m:null}static parseLink(e){const t=iR(e);try{return new Eg(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(){this.providerId=Ko.PROVIDER_ID}static credential(e,t){return Oc._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=Eg.parseLink(t);return Se(r,"argument-error"),Oc._fromEmailAndCode(e,r.code,r.tenantId)}}Ko.PROVIDER_ID="password";Ko.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ko.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tg{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc extends Tg{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr extends Qc{constructor(){super("facebook.com")}static credential(e){return ya._fromParams({providerId:nr.PROVIDER_ID,signInMethod:nr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return nr.credentialFromTaggedObject(e)}static credentialFromError(e){return nr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return nr.credential(e.oauthAccessToken)}catch{return null}}}nr.FACEBOOK_SIGN_IN_METHOD="facebook.com";nr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi extends Qc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ya._fromParams({providerId:gi.PROVIDER_ID,signInMethod:gi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return gi.credentialFromTaggedObject(e)}static credentialFromError(e){return gi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return gi.credential(t,r)}catch{return null}}}gi.GOOGLE_SIGN_IN_METHOD="google.com";gi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr extends Qc{constructor(){super("github.com")}static credential(e){return ya._fromParams({providerId:sr.PROVIDER_ID,signInMethod:sr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return sr.credentialFromTaggedObject(e)}static credentialFromError(e){return sr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return sr.credential(e.oauthAccessToken)}catch{return null}}}sr.GITHUB_SIGN_IN_METHOD="github.com";sr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir extends Qc{constructor(){super("twitter.com")}static credential(e,t){return ya._fromParams({providerId:ir.PROVIDER_ID,signInMethod:ir.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ir.credentialFromTaggedObject(e)}static credentialFromError(e){return ir.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return ir.credential(t,r)}catch{return null}}}ir.TWITTER_SIGN_IN_METHOD="twitter.com";ir.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rR(s,e){return Yc(s,"POST","/v1/accounts:signUp",br(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,o=!1){const l=await ms._fromIdTokenResponse(e,r,o),h=pT(r);return new _a({user:l,providerId:h,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const o=pT(r);return new _a({user:e,providerId:o,_tokenResponse:r,operationType:t})}}function pT(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ih extends ss{constructor(e,t,r,o){var l;super(t.code,t.message),this.operationType=r,this.user=o,Object.setPrototypeOf(this,ih.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,o){return new ih(e,t,r,o)}}function q0(s,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(s):t._getIdTokenResponse(s)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?ih._fromErrorAndOperation(s,l,e,r):l})}async function aR(s,e,t=!1){const r=await Dc(s,e._linkToIdToken(s.auth,await s.getIdToken()),t);return _a._forOperation(s,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oR(s,e,t=!1){const{auth:r}=s;if(Nn(r.app))return Promise.reject(_i(r));const o="reauthenticate";try{const l=await Dc(s,q0(r,o,e,s),t);Se(l.idToken,r,"internal-error");const h=vg(l.idToken);Se(h,r,"internal-error");const{sub:m}=h;return Se(s.uid===m,r,"user-mismatch"),_a._forOperation(s,o,l)}catch(l){throw l?.code==="auth/user-not-found"&&ns(r,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function z0(s,e,t=!1){if(Nn(s.app))return Promise.reject(_i(s));const r="signIn",o=await q0(s,r,e),l=await _a._fromIdTokenResponse(s,r,o);return t||await s._updateCurrentUser(l.user),l}async function lR(s,e){return z0(Nr(s),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function B0(s){const e=Nr(s);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function cR(s,e,t){if(Nn(s.app))return Promise.reject(_i(s));const r=Nr(s),h=await kp(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",rR).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&B0(s),g}),m=await _a._fromIdTokenResponse(r,"signIn",h);return await r._updateCurrentUser(m.user),m}function uR(s,e,t){return Nn(s.app)?Promise.reject(_i(s)):lR(lt(s),Ko.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&B0(s),r})}function dR(s,e,t,r){return lt(s).onIdTokenChanged(e,t,r)}function hR(s,e,t){return lt(s).beforeAuthStateChanged(e,t)}function fR(s,e,t,r){return lt(s).onAuthStateChanged(e,t,r)}function mR(s){return lt(s).signOut()}const rh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H0{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(rh,"1"),this.storage.removeItem(rh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pR=1e3,gR=10;class G0 extends H0{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=k0(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),o=this.localCache[t];r!==o&&e(t,o,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((h,m,g)=>{this.notifyListeners(h,g)});return}const r=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(r);!t&&this.localCache[r]===h||this.notifyListeners(r,h)},l=this.storage.getItem(r);OC()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,gR):o()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},pR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}G0.type="LOCAL";const vR=G0;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $0 extends H0{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}$0.type="SESSION";const K0=$0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yR(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const r=new xh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:o,data:l}=t.data,h=this.handlersMap[o];if(!h?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:o});const m=Array.from(h).map(async v=>v(t.origin,l)),g=await yR(m);t.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}xh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bg(s="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return s+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _R{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,h;return new Promise((m,g)=>{const v=bg("",20);o.port1.start();const _=setTimeout(()=>{g(new Error("unsupported_event"))},r);h={messageChannel:o,onMessage(b){const A=b;if(A.data.eventId===v)switch(A.data.status){case"ack":clearTimeout(_),l=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),m(A.data.response);break;default:clearTimeout(_),clearTimeout(l),g(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:v,data:t},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vs(){return window}function ER(s){Vs().location.href=s}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y0(){return typeof Vs().WorkerGlobalScope<"u"&&typeof Vs().importScripts=="function"}async function TR(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function bR(){var s;return((s=navigator?.serviceWorker)===null||s===void 0?void 0:s.controller)||null}function AR(){return Y0()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q0="firebaseLocalStorageDb",NR=1,ah="firebaseLocalStorage",X0="fbase_key";class Xc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Ih(s,e){return s.transaction([ah],e?"readwrite":"readonly").objectStore(ah)}function SR(){const s=indexedDB.deleteDatabase(Q0);return new Xc(s).toPromise()}function Vp(){const s=indexedDB.open(Q0,NR);return new Promise((e,t)=>{s.addEventListener("error",()=>{t(s.error)}),s.addEventListener("upgradeneeded",()=>{const r=s.result;try{r.createObjectStore(ah,{keyPath:X0})}catch(o){t(o)}}),s.addEventListener("success",async()=>{const r=s.result;r.objectStoreNames.contains(ah)?e(r):(r.close(),await SR(),e(await Vp()))})})}async function gT(s,e,t){const r=Ih(s,!0).put({[X0]:e,value:t});return new Xc(r).toPromise()}async function wR(s,e){const t=Ih(s,!1).get(e),r=await new Xc(t).toPromise();return r===void 0?null:r.value}function vT(s,e){const t=Ih(s,!0).delete(e);return new Xc(t).toPromise()}const xR=800,IR=3;class W0{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Vp(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>IR)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Y0()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=xh._getInstance(AR()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await TR(),!this.activeServiceWorker)return;this.sender=new _R(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||bR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Vp();return await gT(e,rh,"1"),await vT(e,rh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>gT(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>wR(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>vT(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=Ih(o,!1).getAll();return new Xc(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),xR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}W0.type="LOCAL";const CR=W0;new Kc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z0(s,e){return e?yi(e):(Se(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ag extends _g{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Mo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Mo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Mo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function RR(s){return z0(s.auth,new Ag(s),s.bypassAuthState)}function jR(s){const{auth:e,user:t}=s;return Se(t,e,"internal-error"),oR(t,new Ag(s),s.bypassAuthState)}async function DR(s){const{auth:e,user:t}=s;return Se(t,e,"internal-error"),aR(t,new Ag(s),s.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J0{constructor(e,t,r,o,l=!1){this.auth=e,this.resolver=r,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:o,tenantId:l,error:h,type:m}=e;if(h){this.reject(h);return}const g={auth:this.auth,requestUri:t,sessionId:r,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(g))}catch(v){this.reject(v)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return RR;case"linkViaPopup":case"linkViaRedirect":return DR;case"reauthViaPopup":case"reauthViaRedirect":return jR;default:ns(this.auth,"internal-error")}}resolve(e){Ti(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ti(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OR=new Kc(2e3,1e4);async function MR(s,e,t){if(Nn(s.app))return Promise.reject(gs(s,"operation-not-supported-in-this-environment"));const r=Nr(s);fC(s,e,Tg);const o=Z0(r,t);return new ma(r,"signInViaPopup",e,o).executeNotNull()}class ma extends J0{constructor(e,t,r,o,l){super(e,t,o,l),this.provider=r,this.authWindow=null,this.pollId=null,ma.currentPopupAction&&ma.currentPopupAction.cancel(),ma.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Se(e,this.auth,"internal-error"),e}async onExecution(){Ti(this.filter.length===1,"Popup operations only handle one event");const e=bg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(gs(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(gs(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ma.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(gs(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,OR.get())};e()}}ma.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PR="pendingRedirect",Bd=new Map;class kR extends J0{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Bd.get(this.auth._key());if(!e){try{const r=await VR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Bd.set(this.auth._key(),e)}return this.bypassAuthState||Bd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function VR(s,e){const t=FR(e),r=UR(s);if(!await r._isAvailable())return!1;const o=await r._get(t)==="true";return await r._remove(t),o}function LR(s,e){Bd.set(s._key(),e)}function UR(s){return yi(s._redirectPersistence)}function FR(s){return zd(PR,s.config.apiKey,s.name)}async function qR(s,e,t=!1){if(Nn(s.app))return Promise.reject(_i(s));const r=Nr(s),o=Z0(r,e),h=await new kR(r,o,t).execute();return h&&!t&&(delete h.user._redirectEventId,await r._persistUserIfCurrent(h.user),await r._setRedirectUser(null,e)),h}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zR=10*60*1e3;class BR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!HR(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!eA(e)){const o=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(gs(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=zR&&this.cachedEventUids.clear(),this.cachedEventUids.has(yT(e))}saveEventToCache(e){this.cachedEventUids.add(yT(e)),this.lastProcessedEventTime=Date.now()}}function yT(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function eA({type:s,error:e}){return s==="unknown"&&e?.code==="auth/no-auth-event"}function HR(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return eA(s);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GR(s,e={}){return Ar(s,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $R=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,KR=/^https?/;async function YR(s){if(s.config.emulator)return;const{authorizedDomains:e}=await GR(s);for(const t of e)try{if(QR(t))return}catch{}ns(s,"unauthorized-domain")}function QR(s){const e=Mp(),{protocol:t,hostname:r}=new URL(e);if(s.startsWith("chrome-extension://")){const h=new URL(s);return h.hostname===""&&r===""?t==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&h.hostname===r}if(!KR.test(t))return!1;if($R.test(s))return r===s;const o=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XR=new Kc(3e4,6e4);function _T(){const s=Vs().___jsl;if(s?.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let t=0;t<s.CP.length;t++)s.CP[t]=null}}function WR(s){return new Promise((e,t)=>{var r,o,l;function h(){_T(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{_T(),t(gs(s,"network-request-failed"))},timeout:XR.get()})}if(!((o=(r=Vs().gapi)===null||r===void 0?void 0:r.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((l=Vs().gapi)===null||l===void 0)&&l.load)h();else{const m=zC("iframefcb");return Vs()[m]=()=>{gapi.load?h():t(gs(s,"network-request-failed"))},L0(`${qC()}?onload=${m}`).catch(g=>t(g))}}).catch(e=>{throw Hd=null,e})}let Hd=null;function ZR(s){return Hd=Hd||WR(s),Hd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JR=new Kc(5e3,15e3),e1="__/auth/iframe",t1="emulator/auth/iframe",n1={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},s1=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function i1(s){const e=s.config;Se(e.authDomain,s,"auth-domain-config-required");const t=e.emulator?gg(e,t1):`https://${s.config.authDomain}/${e1}`,r={apiKey:e.apiKey,appName:s.name,v:wa},o=s1.get(s.config.apiHost);o&&(r.eid=o);const l=s._getFrameworks();return l.length&&(r.fw=l.join(",")),`${t}?${Hc(r).slice(1)}`}async function r1(s){const e=await ZR(s),t=Vs().gapi;return Se(t,s,"internal-error"),e.open({where:document.body,url:i1(s),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:n1,dontclear:!0},r=>new Promise(async(o,l)=>{await r.restyle({setHideOnLeave:!1});const h=gs(s,"network-request-failed"),m=Vs().setTimeout(()=>{l(h)},JR.get());function g(){Vs().clearTimeout(m),o(r)}r.ping(g).then(g,()=>{l(h)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a1={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},o1=500,l1=600,c1="_blank",u1="http://localhost";class ET{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function d1(s,e,t,r=o1,o=l1){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-r)/2,0).toString();let m="";const g=Object.assign(Object.assign({},a1),{width:r.toString(),height:o.toString(),top:l,left:h}),v=hn().toLowerCase();t&&(m=j0(v)?c1:t),C0(v)&&(e=e||u1,g.scrollbars="yes");const _=Object.entries(g).reduce((A,[M,I])=>`${A}${M}=${I},`,"");if(DC(v)&&m!=="_self")return h1(e||"",m),new ET(null);const b=window.open(e||"",m,_);Se(b,s,"popup-blocked");try{b.focus()}catch{}return new ET(b)}function h1(s,e){const t=document.createElement("a");t.href=s,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f1="__/auth/handler",m1="emulator/auth/handler",p1=encodeURIComponent("fac");async function TT(s,e,t,r,o,l){Se(s.config.authDomain,s,"auth-domain-config-required"),Se(s.config.apiKey,s,"invalid-api-key");const h={apiKey:s.config.apiKey,appName:s.name,authType:t,redirectUrl:r,v:wa,eventId:o};if(e instanceof Tg){e.setDefaultLanguage(s.languageCode),h.providerId=e.providerId||"",Xx(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,b]of Object.entries({}))h[_]=b}if(e instanceof Qc){const _=e.getScopes().filter(b=>b!=="");_.length>0&&(h.scopes=_.join(","))}s.tenantId&&(h.tid=s.tenantId);const m=h;for(const _ of Object.keys(m))m[_]===void 0&&delete m[_];const g=await s._getAppCheckToken(),v=g?`#${p1}=${encodeURIComponent(g)}`:"";return`${g1(s)}?${Hc(m).slice(1)}${v}`}function g1({config:s}){return s.emulator?gg(s,m1):`https://${s.authDomain}/${f1}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mp="webStorageSupport";class v1{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=K0,this._completeRedirectFn=qR,this._overrideRedirectResult=LR}async _openPopup(e,t,r,o){var l;Ti((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const h=await TT(e,t,r,Mp(),o);return d1(e,h,bg())}async _openRedirect(e,t,r,o){await this._originValidation(e);const l=await TT(e,t,r,Mp(),o);return ER(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(Ti(l,"If manager is not set, promise should be"),l)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await r1(e),r=new BR(e);return t.register("authEvent",o=>(Se(o?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(mp,{type:mp},o=>{var l;const h=(l=o?.[0])===null||l===void 0?void 0:l[mp];h!==void 0&&t(!!h),ns(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=YR(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return k0()||R0()||yg()}}const y1=v1;var bT="@firebase/auth",AT="1.10.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _1{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E1(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function T1(s){ts(new qn("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:h,authDomain:m}=r.options;Se(h&&!h.includes(":"),"invalid-api-key",{appName:r.name});const g={apiKey:h,authDomain:m,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:V0(s)},v=new LC(r,o,l,g);return YC(v,t),v},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),ts(new qn("auth-internal",e=>{const t=Nr(e.getProvider("auth").getImmediate());return(r=>new _1(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),dn(bT,AT,E1(s)),dn(bT,AT,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b1=5*60,A1=h0("authIdTokenMaxAge")||b1;let NT=null;const N1=s=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>A1)return;const o=t?.token;NT!==o&&(NT=o,await fetch(s,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function S1(s=$c()){const e=Ni(s,"auth");if(e.isInitialized())return e.getImmediate();const t=KC(s,{popupRedirectResolver:y1,persistence:[CR,vR,K0]}),r=h0("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(r,location.origin);if(location.origin===l.origin){const h=N1(l.toString());hR(t,h,()=>h(t.currentUser)),dR(t,m=>h(m))}}const o=c0("auth");return o&&QC(t,`http://${o}`),t}function w1(){var s,e;return(e=(s=document.getElementsByTagName("head"))===null||s===void 0?void 0:s[0])!==null&&e!==void 0?e:document}UC({loadJS(s){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",s),r.onload=e,r.onerror=o=>{const l=gs("internal-error");l.customData=o,t(l)},r.type="text/javascript",r.charset="UTF-8",w1().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});T1("Browser");var x1="firebase",I1="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */dn(x1,I1,"app");var ST=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var cr,tA;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(O,S){function R(){}R.prototype=S.prototype,O.D=S.prototype,O.prototype=new R,O.prototype.constructor=O,O.C=function(D,k,C){for(var j=Array(arguments.length-2),Ce=2;Ce<arguments.length;Ce++)j[Ce-2]=arguments[Ce];return S.prototype[k].apply(D,j)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(O,S,R){R||(R=0);var D=Array(16);if(typeof S=="string")for(var k=0;16>k;++k)D[k]=S.charCodeAt(R++)|S.charCodeAt(R++)<<8|S.charCodeAt(R++)<<16|S.charCodeAt(R++)<<24;else for(k=0;16>k;++k)D[k]=S[R++]|S[R++]<<8|S[R++]<<16|S[R++]<<24;S=O.g[0],R=O.g[1],k=O.g[2];var C=O.g[3],j=S+(C^R&(k^C))+D[0]+3614090360&4294967295;S=R+(j<<7&4294967295|j>>>25),j=C+(k^S&(R^k))+D[1]+3905402710&4294967295,C=S+(j<<12&4294967295|j>>>20),j=k+(R^C&(S^R))+D[2]+606105819&4294967295,k=C+(j<<17&4294967295|j>>>15),j=R+(S^k&(C^S))+D[3]+3250441966&4294967295,R=k+(j<<22&4294967295|j>>>10),j=S+(C^R&(k^C))+D[4]+4118548399&4294967295,S=R+(j<<7&4294967295|j>>>25),j=C+(k^S&(R^k))+D[5]+1200080426&4294967295,C=S+(j<<12&4294967295|j>>>20),j=k+(R^C&(S^R))+D[6]+2821735955&4294967295,k=C+(j<<17&4294967295|j>>>15),j=R+(S^k&(C^S))+D[7]+4249261313&4294967295,R=k+(j<<22&4294967295|j>>>10),j=S+(C^R&(k^C))+D[8]+1770035416&4294967295,S=R+(j<<7&4294967295|j>>>25),j=C+(k^S&(R^k))+D[9]+2336552879&4294967295,C=S+(j<<12&4294967295|j>>>20),j=k+(R^C&(S^R))+D[10]+4294925233&4294967295,k=C+(j<<17&4294967295|j>>>15),j=R+(S^k&(C^S))+D[11]+2304563134&4294967295,R=k+(j<<22&4294967295|j>>>10),j=S+(C^R&(k^C))+D[12]+1804603682&4294967295,S=R+(j<<7&4294967295|j>>>25),j=C+(k^S&(R^k))+D[13]+4254626195&4294967295,C=S+(j<<12&4294967295|j>>>20),j=k+(R^C&(S^R))+D[14]+2792965006&4294967295,k=C+(j<<17&4294967295|j>>>15),j=R+(S^k&(C^S))+D[15]+1236535329&4294967295,R=k+(j<<22&4294967295|j>>>10),j=S+(k^C&(R^k))+D[1]+4129170786&4294967295,S=R+(j<<5&4294967295|j>>>27),j=C+(R^k&(S^R))+D[6]+3225465664&4294967295,C=S+(j<<9&4294967295|j>>>23),j=k+(S^R&(C^S))+D[11]+643717713&4294967295,k=C+(j<<14&4294967295|j>>>18),j=R+(C^S&(k^C))+D[0]+3921069994&4294967295,R=k+(j<<20&4294967295|j>>>12),j=S+(k^C&(R^k))+D[5]+3593408605&4294967295,S=R+(j<<5&4294967295|j>>>27),j=C+(R^k&(S^R))+D[10]+38016083&4294967295,C=S+(j<<9&4294967295|j>>>23),j=k+(S^R&(C^S))+D[15]+3634488961&4294967295,k=C+(j<<14&4294967295|j>>>18),j=R+(C^S&(k^C))+D[4]+3889429448&4294967295,R=k+(j<<20&4294967295|j>>>12),j=S+(k^C&(R^k))+D[9]+568446438&4294967295,S=R+(j<<5&4294967295|j>>>27),j=C+(R^k&(S^R))+D[14]+3275163606&4294967295,C=S+(j<<9&4294967295|j>>>23),j=k+(S^R&(C^S))+D[3]+4107603335&4294967295,k=C+(j<<14&4294967295|j>>>18),j=R+(C^S&(k^C))+D[8]+1163531501&4294967295,R=k+(j<<20&4294967295|j>>>12),j=S+(k^C&(R^k))+D[13]+2850285829&4294967295,S=R+(j<<5&4294967295|j>>>27),j=C+(R^k&(S^R))+D[2]+4243563512&4294967295,C=S+(j<<9&4294967295|j>>>23),j=k+(S^R&(C^S))+D[7]+1735328473&4294967295,k=C+(j<<14&4294967295|j>>>18),j=R+(C^S&(k^C))+D[12]+2368359562&4294967295,R=k+(j<<20&4294967295|j>>>12),j=S+(R^k^C)+D[5]+4294588738&4294967295,S=R+(j<<4&4294967295|j>>>28),j=C+(S^R^k)+D[8]+2272392833&4294967295,C=S+(j<<11&4294967295|j>>>21),j=k+(C^S^R)+D[11]+1839030562&4294967295,k=C+(j<<16&4294967295|j>>>16),j=R+(k^C^S)+D[14]+4259657740&4294967295,R=k+(j<<23&4294967295|j>>>9),j=S+(R^k^C)+D[1]+2763975236&4294967295,S=R+(j<<4&4294967295|j>>>28),j=C+(S^R^k)+D[4]+1272893353&4294967295,C=S+(j<<11&4294967295|j>>>21),j=k+(C^S^R)+D[7]+4139469664&4294967295,k=C+(j<<16&4294967295|j>>>16),j=R+(k^C^S)+D[10]+3200236656&4294967295,R=k+(j<<23&4294967295|j>>>9),j=S+(R^k^C)+D[13]+681279174&4294967295,S=R+(j<<4&4294967295|j>>>28),j=C+(S^R^k)+D[0]+3936430074&4294967295,C=S+(j<<11&4294967295|j>>>21),j=k+(C^S^R)+D[3]+3572445317&4294967295,k=C+(j<<16&4294967295|j>>>16),j=R+(k^C^S)+D[6]+76029189&4294967295,R=k+(j<<23&4294967295|j>>>9),j=S+(R^k^C)+D[9]+3654602809&4294967295,S=R+(j<<4&4294967295|j>>>28),j=C+(S^R^k)+D[12]+3873151461&4294967295,C=S+(j<<11&4294967295|j>>>21),j=k+(C^S^R)+D[15]+530742520&4294967295,k=C+(j<<16&4294967295|j>>>16),j=R+(k^C^S)+D[2]+3299628645&4294967295,R=k+(j<<23&4294967295|j>>>9),j=S+(k^(R|~C))+D[0]+4096336452&4294967295,S=R+(j<<6&4294967295|j>>>26),j=C+(R^(S|~k))+D[7]+1126891415&4294967295,C=S+(j<<10&4294967295|j>>>22),j=k+(S^(C|~R))+D[14]+2878612391&4294967295,k=C+(j<<15&4294967295|j>>>17),j=R+(C^(k|~S))+D[5]+4237533241&4294967295,R=k+(j<<21&4294967295|j>>>11),j=S+(k^(R|~C))+D[12]+1700485571&4294967295,S=R+(j<<6&4294967295|j>>>26),j=C+(R^(S|~k))+D[3]+2399980690&4294967295,C=S+(j<<10&4294967295|j>>>22),j=k+(S^(C|~R))+D[10]+4293915773&4294967295,k=C+(j<<15&4294967295|j>>>17),j=R+(C^(k|~S))+D[1]+2240044497&4294967295,R=k+(j<<21&4294967295|j>>>11),j=S+(k^(R|~C))+D[8]+1873313359&4294967295,S=R+(j<<6&4294967295|j>>>26),j=C+(R^(S|~k))+D[15]+4264355552&4294967295,C=S+(j<<10&4294967295|j>>>22),j=k+(S^(C|~R))+D[6]+2734768916&4294967295,k=C+(j<<15&4294967295|j>>>17),j=R+(C^(k|~S))+D[13]+1309151649&4294967295,R=k+(j<<21&4294967295|j>>>11),j=S+(k^(R|~C))+D[4]+4149444226&4294967295,S=R+(j<<6&4294967295|j>>>26),j=C+(R^(S|~k))+D[11]+3174756917&4294967295,C=S+(j<<10&4294967295|j>>>22),j=k+(S^(C|~R))+D[2]+718787259&4294967295,k=C+(j<<15&4294967295|j>>>17),j=R+(C^(k|~S))+D[9]+3951481745&4294967295,O.g[0]=O.g[0]+S&4294967295,O.g[1]=O.g[1]+(k+(j<<21&4294967295|j>>>11))&4294967295,O.g[2]=O.g[2]+k&4294967295,O.g[3]=O.g[3]+C&4294967295}r.prototype.u=function(O,S){S===void 0&&(S=O.length);for(var R=S-this.blockSize,D=this.B,k=this.h,C=0;C<S;){if(k==0)for(;C<=R;)o(this,O,C),C+=this.blockSize;if(typeof O=="string"){for(;C<S;)if(D[k++]=O.charCodeAt(C++),k==this.blockSize){o(this,D),k=0;break}}else for(;C<S;)if(D[k++]=O[C++],k==this.blockSize){o(this,D),k=0;break}}this.h=k,this.o+=S},r.prototype.v=function(){var O=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);O[0]=128;for(var S=1;S<O.length-8;++S)O[S]=0;var R=8*this.o;for(S=O.length-8;S<O.length;++S)O[S]=R&255,R/=256;for(this.u(O),O=Array(16),S=R=0;4>S;++S)for(var D=0;32>D;D+=8)O[R++]=this.g[S]>>>D&255;return O};function l(O,S){var R=m;return Object.prototype.hasOwnProperty.call(R,O)?R[O]:R[O]=S(O)}function h(O,S){this.h=S;for(var R=[],D=!0,k=O.length-1;0<=k;k--){var C=O[k]|0;D&&C==S||(R[k]=C,D=!1)}this.g=R}var m={};function g(O){return-128<=O&&128>O?l(O,function(S){return new h([S|0],0>S?-1:0)}):new h([O|0],0>O?-1:0)}function v(O){if(isNaN(O)||!isFinite(O))return b;if(0>O)return x(v(-O));for(var S=[],R=1,D=0;O>=R;D++)S[D]=O/R|0,R*=4294967296;return new h(S,0)}function _(O,S){if(O.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(O.charAt(0)=="-")return x(_(O.substring(1),S));if(0<=O.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=v(Math.pow(S,8)),D=b,k=0;k<O.length;k+=8){var C=Math.min(8,O.length-k),j=parseInt(O.substring(k,k+C),S);8>C?(C=v(Math.pow(S,C)),D=D.j(C).add(v(j))):(D=D.j(R),D=D.add(v(j)))}return D}var b=g(0),A=g(1),M=g(16777216);s=h.prototype,s.m=function(){if(U(this))return-x(this).m();for(var O=0,S=1,R=0;R<this.g.length;R++){var D=this.i(R);O+=(0<=D?D:4294967296+D)*S,S*=4294967296}return O},s.toString=function(O){if(O=O||10,2>O||36<O)throw Error("radix out of range: "+O);if(I(this))return"0";if(U(this))return"-"+x(this).toString(O);for(var S=v(Math.pow(O,6)),R=this,D="";;){var k=J(R,S).g;R=$(R,k.j(S));var C=((0<R.g.length?R.g[0]:R.h)>>>0).toString(O);if(R=k,I(R))return C+D;for(;6>C.length;)C="0"+C;D=C+D}},s.i=function(O){return 0>O?0:O<this.g.length?this.g[O]:this.h};function I(O){if(O.h!=0)return!1;for(var S=0;S<O.g.length;S++)if(O.g[S]!=0)return!1;return!0}function U(O){return O.h==-1}s.l=function(O){return O=$(this,O),U(O)?-1:I(O)?0:1};function x(O){for(var S=O.g.length,R=[],D=0;D<S;D++)R[D]=~O.g[D];return new h(R,~O.h).add(A)}s.abs=function(){return U(this)?x(this):this},s.add=function(O){for(var S=Math.max(this.g.length,O.g.length),R=[],D=0,k=0;k<=S;k++){var C=D+(this.i(k)&65535)+(O.i(k)&65535),j=(C>>>16)+(this.i(k)>>>16)+(O.i(k)>>>16);D=j>>>16,C&=65535,j&=65535,R[k]=j<<16|C}return new h(R,R[R.length-1]&-2147483648?-1:0)};function $(O,S){return O.add(x(S))}s.j=function(O){if(I(this)||I(O))return b;if(U(this))return U(O)?x(this).j(x(O)):x(x(this).j(O));if(U(O))return x(this.j(x(O)));if(0>this.l(M)&&0>O.l(M))return v(this.m()*O.m());for(var S=this.g.length+O.g.length,R=[],D=0;D<2*S;D++)R[D]=0;for(D=0;D<this.g.length;D++)for(var k=0;k<O.g.length;k++){var C=this.i(D)>>>16,j=this.i(D)&65535,Ce=O.i(k)>>>16,$e=O.i(k)&65535;R[2*D+2*k]+=j*$e,W(R,2*D+2*k),R[2*D+2*k+1]+=C*$e,W(R,2*D+2*k+1),R[2*D+2*k+1]+=j*Ce,W(R,2*D+2*k+1),R[2*D+2*k+2]+=C*Ce,W(R,2*D+2*k+2)}for(D=0;D<S;D++)R[D]=R[2*D+1]<<16|R[2*D];for(D=S;D<2*S;D++)R[D]=0;return new h(R,0)};function W(O,S){for(;(O[S]&65535)!=O[S];)O[S+1]+=O[S]>>>16,O[S]&=65535,S++}function K(O,S){this.g=O,this.h=S}function J(O,S){if(I(S))throw Error("division by zero");if(I(O))return new K(b,b);if(U(O))return S=J(x(O),S),new K(x(S.g),x(S.h));if(U(S))return S=J(O,x(S)),new K(x(S.g),S.h);if(30<O.g.length){if(U(O)||U(S))throw Error("slowDivide_ only works with positive integers.");for(var R=A,D=S;0>=D.l(O);)R=q(R),D=q(D);var k=oe(R,1),C=oe(D,1);for(D=oe(D,2),R=oe(R,2);!I(D);){var j=C.add(D);0>=j.l(O)&&(k=k.add(R),C=j),D=oe(D,1),R=oe(R,1)}return S=$(O,k.j(S)),new K(k,S)}for(k=b;0<=O.l(S);){for(R=Math.max(1,Math.floor(O.m()/S.m())),D=Math.ceil(Math.log(R)/Math.LN2),D=48>=D?1:Math.pow(2,D-48),C=v(R),j=C.j(S);U(j)||0<j.l(O);)R-=D,C=v(R),j=C.j(S);I(C)&&(C=A),k=k.add(C),O=$(O,j)}return new K(k,O)}s.A=function(O){return J(this,O).h},s.and=function(O){for(var S=Math.max(this.g.length,O.g.length),R=[],D=0;D<S;D++)R[D]=this.i(D)&O.i(D);return new h(R,this.h&O.h)},s.or=function(O){for(var S=Math.max(this.g.length,O.g.length),R=[],D=0;D<S;D++)R[D]=this.i(D)|O.i(D);return new h(R,this.h|O.h)},s.xor=function(O){for(var S=Math.max(this.g.length,O.g.length),R=[],D=0;D<S;D++)R[D]=this.i(D)^O.i(D);return new h(R,this.h^O.h)};function q(O){for(var S=O.g.length+1,R=[],D=0;D<S;D++)R[D]=O.i(D)<<1|O.i(D-1)>>>31;return new h(R,O.h)}function oe(O,S){var R=S>>5;S%=32;for(var D=O.g.length-R,k=[],C=0;C<D;C++)k[C]=0<S?O.i(C+R)>>>S|O.i(C+R+1)<<32-S:O.i(C+R);return new h(k,O.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,tA=r,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.A,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=v,h.fromString=_,cr=h}).apply(typeof ST<"u"?ST:typeof self<"u"?self:typeof window<"u"?window:{});var Od=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var nA,pc,sA,Gd,Lp,iA,rA,aA;(function(){var s,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,y,E){return d==Array.prototype||d==Object.prototype||(d[y]=E.value),d};function t(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Od=="object"&&Od];for(var y=0;y<d.length;++y){var E=d[y];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var r=t(this);function o(d,y){if(y)e:{var E=r;d=d.split(".");for(var w=0;w<d.length-1;w++){var z=d[w];if(!(z in E))break e;E=E[z]}d=d[d.length-1],w=E[d],y=y(w),y!=w&&y!=null&&e(E,d,{configurable:!0,writable:!0,value:y})}}function l(d,y){d instanceof String&&(d+="");var E=0,w=!1,z={next:function(){if(!w&&E<d.length){var Q=E++;return{value:y(Q,d[Q]),done:!1}}return w=!0,{done:!0,value:void 0}}};return z[Symbol.iterator]=function(){return z},z}o("Array.prototype.values",function(d){return d||function(){return l(this,function(y,E){return E})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var h=h||{},m=this||self;function g(d){var y=typeof d;return y=y!="object"?y:d?Array.isArray(d)?"array":y:"null",y=="array"||y=="object"&&typeof d.length=="number"}function v(d){var y=typeof d;return y=="object"&&d!=null||y=="function"}function _(d,y,E){return d.call.apply(d.bind,arguments)}function b(d,y,E){if(!d)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var z=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(z,w),d.apply(y,z)}}return function(){return d.apply(y,arguments)}}function A(d,y,E){return A=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:b,A.apply(null,arguments)}function M(d,y){var E=Array.prototype.slice.call(arguments,1);return function(){var w=E.slice();return w.push.apply(w,arguments),d.apply(this,w)}}function I(d,y){function E(){}E.prototype=y.prototype,d.aa=y.prototype,d.prototype=new E,d.prototype.constructor=d,d.Qb=function(w,z,Q){for(var ce=Array(arguments.length-2),qe=2;qe<arguments.length;qe++)ce[qe-2]=arguments[qe];return y.prototype[z].apply(w,ce)}}function U(d){const y=d.length;if(0<y){const E=Array(y);for(let w=0;w<y;w++)E[w]=d[w];return E}return[]}function x(d,y){for(let E=1;E<arguments.length;E++){const w=arguments[E];if(g(w)){const z=d.length||0,Q=w.length||0;d.length=z+Q;for(let ce=0;ce<Q;ce++)d[z+ce]=w[ce]}else d.push(w)}}class ${constructor(y,E){this.i=y,this.j=E,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function W(d){return/^[\s\xa0]*$/.test(d)}function K(){var d=m.navigator;return d&&(d=d.userAgent)?d:""}function J(d){return J[" "](d),d}J[" "]=function(){};var q=K().indexOf("Gecko")!=-1&&!(K().toLowerCase().indexOf("webkit")!=-1&&K().indexOf("Edge")==-1)&&!(K().indexOf("Trident")!=-1||K().indexOf("MSIE")!=-1)&&K().indexOf("Edge")==-1;function oe(d,y,E){for(const w in d)y.call(E,d[w],w,d)}function O(d,y){for(const E in d)y.call(void 0,d[E],E,d)}function S(d){const y={};for(const E in d)y[E]=d[E];return y}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(d,y){let E,w;for(let z=1;z<arguments.length;z++){w=arguments[z];for(E in w)d[E]=w[E];for(let Q=0;Q<R.length;Q++)E=R[Q],Object.prototype.hasOwnProperty.call(w,E)&&(d[E]=w[E])}}function k(d){var y=1;d=d.split(":");const E=[];for(;0<y&&d.length;)E.push(d.shift()),y--;return d.length&&E.push(d.join(":")),E}function C(d){m.setTimeout(()=>{throw d},0)}function j(){var d=ye;let y=null;return d.g&&(y=d.g,d.g=d.g.next,d.g||(d.h=null),y.next=null),y}class Ce{constructor(){this.h=this.g=null}add(y,E){const w=$e.get();w.set(y,E),this.h?this.h.next=w:this.g=w,this.h=w}}var $e=new $(()=>new X,d=>d.reset());class X{constructor(){this.next=this.g=this.h=null}set(y,E){this.h=y,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let re,ue=!1,ye=new Ce,V=()=>{const d=m.Promise.resolve(void 0);re=()=>{d.then(ae)}};var ae=()=>{for(var d;d=j();){try{d.h.call(d.g)}catch(E){C(E)}var y=$e;y.j(d),100>y.h&&(y.h++,d.next=y.g,y.g=d)}ue=!1};function de(){this.s=this.s,this.C=this.C}de.prototype.s=!1,de.prototype.ma=function(){this.s||(this.s=!0,this.N())},de.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function le(d,y){this.type=d,this.g=this.target=y,this.defaultPrevented=!1}le.prototype.h=function(){this.defaultPrevented=!0};var _e=function(){if(!m.addEventListener||!Object.defineProperty)return!1;var d=!1,y=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const E=()=>{};m.addEventListener("test",E,y),m.removeEventListener("test",E,y)}catch{}return d}();function Me(d,y){if(le.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var E=this.type=d.type,w=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=y,y=d.relatedTarget){if(q){e:{try{J(y.nodeName);var z=!0;break e}catch{}z=!1}z||(y=null)}}else E=="mouseover"?y=d.fromElement:E=="mouseout"&&(y=d.toElement);this.relatedTarget=y,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:xe[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&Me.aa.h.call(this)}}I(Me,le);var xe={2:"touch",3:"pen",4:"mouse"};Me.prototype.h=function(){Me.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var Lt="closure_listenable_"+(1e6*Math.random()|0),at=0;function _s(d,y,E,w,z){this.listener=d,this.proxy=null,this.src=y,this.type=E,this.capture=!!w,this.ha=z,this.key=++at,this.da=this.fa=!1}function Si(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function Hs(d){this.src=d,this.g={},this.h=0}Hs.prototype.add=function(d,y,E,w,z){var Q=d.toString();d=this.g[Q],d||(d=this.g[Q]=[],this.h++);var ce=Rr(d,y,w,z);return-1<ce?(y=d[ce],E||(y.fa=!1)):(y=new _s(y,this.src,Q,!!w,z),y.fa=E,d.push(y)),y};function Cr(d,y){var E=y.type;if(E in d.g){var w=d.g[E],z=Array.prototype.indexOf.call(w,y,void 0),Q;(Q=0<=z)&&Array.prototype.splice.call(w,z,1),Q&&(Si(y),d.g[E].length==0&&(delete d.g[E],d.h--))}}function Rr(d,y,E,w){for(var z=0;z<d.length;++z){var Q=d[z];if(!Q.da&&Q.listener==y&&Q.capture==!!E&&Q.ha==w)return z}return-1}var jr="closure_lm_"+(1e6*Math.random()|0),sl={};function lu(d,y,E,w,z){if(Array.isArray(y)){for(var Q=0;Q<y.length;Q++)lu(d,y[Q],E,w,z);return null}return E=cu(E),d&&d[Lt]?d.K(y,E,v(w)?!!w.capture:!1,z):zn(d,y,E,!1,w,z)}function zn(d,y,E,w,z,Q){if(!y)throw Error("Invalid event type");var ce=v(z)?!!z.capture:!!z,qe=ja(d);if(qe||(d[jr]=qe=new Hs(d)),E=qe.add(y,E,w,ce,Q),E.proxy)return E;if(w=tf(),E.proxy=w,w.src=d,w.listener=E,d.addEventListener)_e||(z=ce),z===void 0&&(z=!1),d.addEventListener(y.toString(),w,z);else if(d.attachEvent)d.attachEvent(Dr(y.toString()),w);else if(d.addListener&&d.removeListener)d.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return E}function tf(){function d(E){return y.call(d.src,d.listener,E)}const y=nf;return d}function il(d,y,E,w,z){if(Array.isArray(y))for(var Q=0;Q<y.length;Q++)il(d,y[Q],E,w,z);else w=v(w)?!!w.capture:!!w,E=cu(E),d&&d[Lt]?(d=d.i,y=String(y).toString(),y in d.g&&(Q=d.g[y],E=Rr(Q,E,w,z),-1<E&&(Si(Q[E]),Array.prototype.splice.call(Q,E,1),Q.length==0&&(delete d.g[y],d.h--)))):d&&(d=ja(d))&&(y=d.g[y.toString()],d=-1,y&&(d=Rr(y,E,w,z)),(E=-1<d?y[d]:null)&&Ra(E))}function Ra(d){if(typeof d!="number"&&d&&!d.da){var y=d.src;if(y&&y[Lt])Cr(y.i,d);else{var E=d.type,w=d.proxy;y.removeEventListener?y.removeEventListener(E,w,d.capture):y.detachEvent?y.detachEvent(Dr(E),w):y.addListener&&y.removeListener&&y.removeListener(w),(E=ja(y))?(Cr(E,d),E.h==0&&(E.src=null,y[jr]=null)):Si(d)}}}function Dr(d){return d in sl?sl[d]:sl[d]="on"+d}function nf(d,y){if(d.da)d=!0;else{y=new Me(y,this);var E=d.listener,w=d.ha||d.src;d.fa&&Ra(d),d=E.call(w,y)}return d}function ja(d){return d=d[jr],d instanceof Hs?d:null}var rl="__closure_events_fn_"+(1e9*Math.random()>>>0);function cu(d){return typeof d=="function"?d:(d[rl]||(d[rl]=function(y){return d.handleEvent(y)}),d[rl])}function pt(){de.call(this),this.i=new Hs(this),this.M=this,this.F=null}I(pt,de),pt.prototype[Lt]=!0,pt.prototype.removeEventListener=function(d,y,E,w){il(this,d,y,E,w)};function Xe(d,y){var E,w=d.F;if(w)for(E=[];w;w=w.F)E.push(w);if(d=d.M,w=y.type||y,typeof y=="string")y=new le(y,d);else if(y instanceof le)y.target=y.target||d;else{var z=y;y=new le(w,d),D(y,z)}if(z=!0,E)for(var Q=E.length-1;0<=Q;Q--){var ce=y.g=E[Q];z=In(ce,w,!0,y)&&z}if(ce=y.g=d,z=In(ce,w,!0,y)&&z,z=In(ce,w,!1,y)&&z,E)for(Q=0;Q<E.length;Q++)ce=y.g=E[Q],z=In(ce,w,!1,y)&&z}pt.prototype.N=function(){if(pt.aa.N.call(this),this.i){var d=this.i,y;for(y in d.g){for(var E=d.g[y],w=0;w<E.length;w++)Si(E[w]);delete d.g[y],d.h--}}this.F=null},pt.prototype.K=function(d,y,E,w){return this.i.add(String(d),y,!1,E,w)},pt.prototype.L=function(d,y,E,w){return this.i.add(String(d),y,!0,E,w)};function In(d,y,E,w){if(y=d.i.g[String(y)],!y)return!0;y=y.concat();for(var z=!0,Q=0;Q<y.length;++Q){var ce=y[Q];if(ce&&!ce.da&&ce.capture==E){var qe=ce.listener,Rt=ce.ha||ce.src;ce.fa&&Cr(d.i,ce),z=qe.call(Rt,w)!==!1&&z}}return z&&!w.defaultPrevented}function rn(d,y,E){if(typeof d=="function")E&&(d=A(d,E));else if(d&&typeof d.handleEvent=="function")d=A(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:m.setTimeout(d,y||0)}function uu(d){d.g=rn(()=>{d.g=null,d.i&&(d.i=!1,uu(d))},d.l);const y=d.h;d.h=null,d.m.apply(null,y)}class sf extends de{constructor(y,E){super(),this.m=y,this.l=E,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:uu(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Or(d){de.call(this),this.h=d,this.g={}}I(Or,de);var Mr=[];function Pr(d){oe(d.g,function(y,E){this.g.hasOwnProperty(E)&&Ra(y)},d),d.g={}}Or.prototype.N=function(){Or.aa.N.call(this),Pr(this)},Or.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var is=m.JSON.stringify,Da=m.JSON.parse,kr=class{stringify(d){return m.JSON.stringify(d,void 0)}parse(d){return m.JSON.parse(d,void 0)}};function al(){}al.prototype.h=null;function ol(d){return d.h||(d.h=d.i())}function ll(){}var Gs={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function $s(){le.call(this,"d")}I($s,le);function cl(){le.call(this,"c")}I(cl,le);var Es={},ul=null;function wi(){return ul=ul||new pt}Es.La="serverreachability";function Oa(d){le.call(this,Es.La,d)}I(Oa,le);function xi(d){const y=wi();Xe(y,new Oa(y))}Es.STAT_EVENT="statevent";function du(d,y){le.call(this,Es.STAT_EVENT,d),this.stat=y}I(du,le);function ct(d){const y=wi();Xe(y,new du(y,d))}Es.Ma="timingevent";function Ct(d,y){le.call(this,Es.Ma,d),this.size=y}I(Ct,le);function At(d,y){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){d()},y)}function Bn(){this.g=!0}Bn.prototype.xa=function(){this.g=!1};function dl(d,y,E,w,z,Q){d.info(function(){if(d.g)if(Q)for(var ce="",qe=Q.split("&"),Rt=0;Rt<qe.length;Rt++){var ze=qe[Rt].split("=");if(1<ze.length){var Ft=ze[0];ze=ze[1];var jt=Ft.split("_");ce=2<=jt.length&&jt[1]=="type"?ce+(Ft+"="+ze+"&"):ce+(Ft+"=redacted&")}}else ce=null;else ce=Q;return"XMLHTTP REQ ("+w+") [attempt "+z+"]: "+y+`
`+E+`
`+ce})}function rf(d,y,E,w,z,Q,ce){d.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+z+"]: "+y+`
`+E+`
`+Q+" "+ce})}function Ii(d,y,E,w){d.info(function(){return"XMLHTTP TEXT ("+y+"): "+Vr(d,E)+(w?" "+w:"")})}function hu(d,y){d.info(function(){return"TIMEOUT: "+y})}Bn.prototype.info=function(){};function Vr(d,y){if(!d.g)return y;if(!y)return null;try{var E=JSON.parse(y);if(E){for(d=0;d<E.length;d++)if(Array.isArray(E[d])){var w=E[d];if(!(2>w.length)){var z=w[1];if(Array.isArray(z)&&!(1>z.length)){var Q=z[0];if(Q!="noop"&&Q!="stop"&&Q!="close")for(var ce=1;ce<z.length;ce++)z[ce]=""}}}}return is(E)}catch{return y}}var Ci={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ks={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ts;function bs(){}I(bs,al),bs.prototype.g=function(){return new XMLHttpRequest},bs.prototype.i=function(){return{}},Ts=new bs;function fn(d,y,E,w){this.j=d,this.i=y,this.l=E,this.R=w||1,this.U=new Or(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new _t}function _t(){this.i=null,this.g="",this.h=!1}var hl={},Ma={};function rs(d,y,E){d.L=1,d.v=zr(Cn(y)),d.m=E,d.P=!0,Ys(d,null)}function Ys(d,y){d.F=Date.now(),Lr(d),d.A=Cn(d.v);var E=d.A,w=d.R;Array.isArray(w)||(w=[String(w)]),yl(E.i,"t",w),d.C=0,E=d.j.J,d.h=new _t,d.g=Iu(d.j,E?y:null,!d.m),0<d.O&&(d.M=new sf(A(d.Y,d,d.g),d.O)),y=d.U,E=d.g,w=d.ca;var z="readystatechange";Array.isArray(z)||(z&&(Mr[0]=z.toString()),z=Mr);for(var Q=0;Q<z.length;Q++){var ce=lu(E,z[Q],w||y.handleEvent,!1,y.h||y);if(!ce)break;y.g[ce.key]=ce}y=d.H?S(d.H):{},d.m?(d.u||(d.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,y)):(d.u="GET",d.g.ea(d.A,d.u,null,y)),xi(),dl(d.i,d.u,d.A,d.l,d.R,d.m)}fn.prototype.ca=function(d){d=d.target;const y=this.M;y&&Kn(d)==3?y.j():this.Y(d)},fn.prototype.Y=function(d){try{if(d==this.g)e:{const jt=Kn(this.g);var y=this.g.Ba();const ni=this.g.Z();if(!(3>jt)&&(jt!=3||this.g&&(this.h.h||this.g.oa()||Eu(this.g)))){this.J||jt!=4||y==7||(y==8||0>=ni?xi(3):xi(2)),Ri(this);var E=this.g.Z();this.X=E;t:if(fu(this)){var w=Eu(this.g);d="";var z=w.length,Q=Kn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){$t(this),As(this);var ce="";break t}this.h.i=new m.TextDecoder}for(y=0;y<z;y++)this.h.h=!0,d+=this.h.i.decode(w[y],{stream:!(Q&&y==z-1)});w.length=0,this.h.g+=d,this.C=0,ce=this.h.g}else ce=this.g.oa();if(this.o=E==200,rf(this.i,this.u,this.A,this.l,this.R,jt,E),this.o){if(this.T&&!this.K){t:{if(this.g){var qe,Rt=this.g;if((qe=Rt.g?Rt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!W(qe)){var ze=qe;break t}}ze=null}if(E=ze)Ii(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ur(this,E);else{this.o=!1,this.s=3,ct(12),$t(this),As(this);break e}}if(this.P){E=!0;let Kt;for(;!this.J&&this.C<ce.length;)if(Kt=mu(this,ce),Kt==Ma){jt==4&&(this.s=4,ct(14),E=!1),Ii(this.i,this.l,null,"[Incomplete Response]");break}else if(Kt==hl){this.s=4,ct(15),Ii(this.i,this.l,ce,"[Invalid Chunk]"),E=!1;break}else Ii(this.i,this.l,Kt,null),Ur(this,Kt);if(fu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),jt!=4||ce.length!=0||this.h.h||(this.s=1,ct(16),E=!1),this.o=this.o&&E,!E)Ii(this.i,this.l,ce,"[Invalid Chunked Response]"),$t(this),As(this);else if(0<ce.length&&!this.W){this.W=!0;var Ft=this.j;Ft.g==this&&Ft.ba&&!Ft.M&&(Ft.j.info("Great, no buffering proxy detected. Bytes received: "+ce.length),Xr(Ft),Ft.M=!0,ct(11))}}else Ii(this.i,this.l,ce,null),Ur(this,ce);jt==4&&$t(this),this.o&&!this.J&&(jt==4?Su(this.j,this):(this.o=!1,Lr(this)))}else uf(this.g),E==400&&0<ce.indexOf("Unknown SID")?(this.s=3,ct(12)):(this.s=0,ct(13)),$t(this),As(this)}}}catch{}finally{}};function fu(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function mu(d,y){var E=d.C,w=y.indexOf(`
`,E);return w==-1?Ma:(E=Number(y.substring(E,w)),isNaN(E)?hl:(w+=1,w+E>y.length?Ma:(y=y.slice(w,w+E),d.C=w+E,y)))}fn.prototype.cancel=function(){this.J=!0,$t(this)};function Lr(d){d.S=Date.now()+d.I,pu(d,d.I)}function pu(d,y){if(d.B!=null)throw Error("WatchDog timer not null");d.B=At(A(d.ba,d),y)}function Ri(d){d.B&&(m.clearTimeout(d.B),d.B=null)}fn.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(hu(this.i,this.A),this.L!=2&&(xi(),ct(17)),$t(this),this.s=2,As(this)):pu(this,this.S-d)};function As(d){d.j.G==0||d.J||Su(d.j,d)}function $t(d){Ri(d);var y=d.M;y&&typeof y.ma=="function"&&y.ma(),d.M=null,Pr(d.U),d.g&&(y=d.g,d.g=null,y.abort(),y.ma())}function Ur(d,y){try{var E=d.j;if(E.G!=0&&(E.g==d||fl(E.h,d))){if(!d.K&&fl(E.h,d)&&E.G==3){try{var w=E.Da.g.parse(y)}catch{w=null}if(Array.isArray(w)&&w.length==3){var z=w;if(z[0]==0){e:if(!E.u){if(E.g)if(E.g.F+3e3<d.F)$a(E),Ha(E);else break e;Al(E),ct(18)}}else E.za=z[1],0<E.za-E.T&&37500>z[2]&&E.F&&E.v==0&&!E.C&&(E.C=At(A(E.Za,E),6e3));if(1>=ka(E.h)&&E.ca){try{E.ca()}catch{}E.ca=void 0}}else ti(E,11)}else if((d.K||E.g==d)&&$a(E),!W(y))for(z=E.Da.g.parse(y),y=0;y<z.length;y++){let ze=z[y];if(E.T=ze[0],ze=ze[1],E.G==2)if(ze[0]=="c"){E.K=ze[1],E.ia=ze[2];const Ft=ze[3];Ft!=null&&(E.la=Ft,E.j.info("VER="+E.la));const jt=ze[4];jt!=null&&(E.Aa=jt,E.j.info("SVER="+E.Aa));const ni=ze[5];ni!=null&&typeof ni=="number"&&0<ni&&(w=1.5*ni,E.L=w,E.j.info("backChannelRequestTimeoutMs_="+w)),w=E;const Kt=d.g;if(Kt){const Rs=Kt.g?Kt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Rs){var Q=w.h;Q.g||Rs.indexOf("spdy")==-1&&Rs.indexOf("quic")==-1&&Rs.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(Va(Q,Q.h),Q.h=null))}if(w.D){const Sl=Kt.g?Kt.g.getResponseHeader("X-HTTP-Session-Id"):null;Sl&&(w.ya=Sl,Je(w.I,w.D,Sl))}}E.G=3,E.l&&E.l.ua(),E.ba&&(E.R=Date.now()-d.F,E.j.info("Handshake RTT: "+E.R+"ms")),w=E;var ce=d;if(w.qa=xu(w,w.J?w.ia:null,w.W),ce.K){mn(w.h,ce);var qe=ce,Rt=w.L;Rt&&(qe.I=Rt),qe.B&&(Ri(qe),Lr(qe)),w.g=ce}else Au(w);0<E.i.length&&Ga(E)}else ze[0]!="stop"&&ze[0]!="close"||ti(E,7);else E.G==3&&(ze[0]=="stop"||ze[0]=="close"?ze[0]=="stop"?ti(E,7):Tl(E):ze[0]!="noop"&&E.l&&E.l.ta(ze),E.v=0)}}xi(4)}catch{}}var gu=class{constructor(d,y){this.g=d,this.map=y}};function Qs(d){this.l=d||10,m.PerformanceNavigationTiming?(d=m.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Pa(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function ka(d){return d.h?1:d.g?d.g.size:0}function fl(d,y){return d.h?d.h==y:d.g?d.g.has(y):!1}function Va(d,y){d.g?d.g.add(y):d.h=y}function mn(d,y){d.h&&d.h==y?d.h=null:d.g&&d.g.has(y)&&d.g.delete(y)}Qs.prototype.cancel=function(){if(this.i=ml(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function ml(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let y=d.i;for(const E of d.g.values())y=y.concat(E.D);return y}return U(d.i)}function af(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(g(d)){for(var y=[],E=d.length,w=0;w<E;w++)y.push(d[w]);return y}y=[],E=0;for(w in d)y[E++]=d[w];return y}function La(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(g(d)||typeof d=="string"){var y=[];d=d.length;for(var E=0;E<d;E++)y.push(E);return y}y=[],E=0;for(const w in d)y[E++]=w;return y}}}function pl(d,y){if(d.forEach&&typeof d.forEach=="function")d.forEach(y,void 0);else if(g(d)||typeof d=="string")Array.prototype.forEach.call(d,y,void 0);else for(var E=La(d),w=af(d),z=w.length,Q=0;Q<z;Q++)y.call(void 0,w[Q],E&&E[Q],d)}var Fr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function of(d,y){if(d){d=d.split("&");for(var E=0;E<d.length;E++){var w=d[E].indexOf("="),z=null;if(0<=w){var Q=d[E].substring(0,w);z=d[E].substring(w+1)}else Q=d[E];y(Q,z?decodeURIComponent(z.replace(/\+/g," ")):"")}}}function Nt(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof Nt){this.h=d.h,qr(this,d.j),this.o=d.o,this.g=d.g,ji(this,d.s),this.l=d.l;var y=d.i,E=new Ws;E.i=y.i,y.g&&(E.g=new Map(y.g),E.h=y.h),Xs(this,E),this.m=d.m}else d&&(y=String(d).match(Fr))?(this.h=!1,qr(this,y[1]||"",!0),this.o=Hn(y[2]||""),this.g=Hn(y[3]||"",!0),ji(this,y[4]),this.l=Hn(y[5]||"",!0),Xs(this,y[6]||"",!0),this.m=Hn(y[7]||"")):(this.h=!1,this.i=new Ws(null,this.h))}Nt.prototype.toString=function(){var d=[],y=this.j;y&&d.push(Br(y,gl,!0),":");var E=this.g;return(E||y=="file")&&(d.push("//"),(y=this.o)&&d.push(Br(y,gl,!0),"@"),d.push(encodeURIComponent(String(E)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.s,E!=null&&d.push(":",String(E))),(E=this.l)&&(this.g&&E.charAt(0)!="/"&&d.push("/"),d.push(Br(E,E.charAt(0)=="/"?lf:vl,!0))),(E=this.i.toString())&&d.push("?",E),(E=this.m)&&d.push("#",Br(E,Ua)),d.join("")};function Cn(d){return new Nt(d)}function qr(d,y,E){d.j=E?Hn(y,!0):y,d.j&&(d.j=d.j.replace(/:$/,""))}function ji(d,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);d.s=y}else d.s=null}function Xs(d,y,E){y instanceof Ws?(d.i=y,yu(d.i,d.h)):(E||(y=Br(y,cf)),d.i=new Ws(y,d.h))}function Je(d,y,E){d.i.set(y,E)}function zr(d){return Je(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function Hn(d,y){return d?y?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Br(d,y,E){return typeof d=="string"?(d=encodeURI(d).replace(y,vu),E&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function vu(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var gl=/[#\/\?@]/g,vl=/[#\?:]/g,lf=/[#\?]/g,cf=/[#\?@]/g,Ua=/#/g;function Ws(d,y){this.h=this.g=null,this.i=d||null,this.j=!!y}function Gn(d){d.g||(d.g=new Map,d.h=0,d.i&&of(d.i,function(y,E){d.add(decodeURIComponent(y.replace(/\+/g," ")),E)}))}s=Ws.prototype,s.add=function(d,y){Gn(this),this.i=null,d=Ns(this,d);var E=this.g.get(d);return E||this.g.set(d,E=[]),E.push(y),this.h+=1,this};function Zs(d,y){Gn(d),y=Ns(d,y),d.g.has(y)&&(d.i=null,d.h-=d.g.get(y).length,d.g.delete(y))}function Js(d,y){return Gn(d),y=Ns(d,y),d.g.has(y)}s.forEach=function(d,y){Gn(this),this.g.forEach(function(E,w){E.forEach(function(z){d.call(y,z,w,this)},this)},this)},s.na=function(){Gn(this);const d=Array.from(this.g.values()),y=Array.from(this.g.keys()),E=[];for(let w=0;w<y.length;w++){const z=d[w];for(let Q=0;Q<z.length;Q++)E.push(y[w])}return E},s.V=function(d){Gn(this);let y=[];if(typeof d=="string")Js(this,d)&&(y=y.concat(this.g.get(Ns(this,d))));else{d=Array.from(this.g.values());for(let E=0;E<d.length;E++)y=y.concat(d[E])}return y},s.set=function(d,y){return Gn(this),this.i=null,d=Ns(this,d),Js(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[y]),this.h+=1,this},s.get=function(d,y){return d?(d=this.V(d),0<d.length?String(d[0]):y):y};function yl(d,y,E){Zs(d,y),0<E.length&&(d.i=null,d.g.set(Ns(d,y),U(E)),d.h+=E.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],y=Array.from(this.g.keys());for(var E=0;E<y.length;E++){var w=y[E];const Q=encodeURIComponent(String(w)),ce=this.V(w);for(w=0;w<ce.length;w++){var z=Q;ce[w]!==""&&(z+="="+encodeURIComponent(String(ce[w]))),d.push(z)}}return this.i=d.join("&")};function Ns(d,y){return y=String(y),d.j&&(y=y.toLowerCase()),y}function yu(d,y){y&&!d.j&&(Gn(d),d.i=null,d.g.forEach(function(E,w){var z=w.toLowerCase();w!=z&&(Zs(this,w),yl(this,z,E))},d)),d.j=y}function Hr(d,y){const E=new Bn;if(m.Image){const w=new Image;w.onload=M($n,E,"TestLoadImage: loaded",!0,y,w),w.onerror=M($n,E,"TestLoadImage: error",!1,y,w),w.onabort=M($n,E,"TestLoadImage: abort",!1,y,w),w.ontimeout=M($n,E,"TestLoadImage: timeout",!1,y,w),m.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=d}else y(!1)}function as(d,y){const E=new Bn,w=new AbortController,z=setTimeout(()=>{w.abort(),$n(E,"TestPingServer: timeout",!1,y)},1e4);fetch(d,{signal:w.signal}).then(Q=>{clearTimeout(z),Q.ok?$n(E,"TestPingServer: ok",!0,y):$n(E,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(z),$n(E,"TestPingServer: error",!1,y)})}function $n(d,y,E,w,z){try{z&&(z.onload=null,z.onerror=null,z.onabort=null,z.ontimeout=null),w(E)}catch{}}function Gr(){this.g=new kr}function Ss(d,y,E){const w=E||"";try{pl(d,function(z,Q){let ce=z;v(z)&&(ce=is(z)),y.push(w+Q+"="+encodeURIComponent(ce))})}catch(z){throw y.push(w+"type="+encodeURIComponent("_badmap")),z}}function Di(d){this.l=d.Ub||null,this.j=d.eb||!1}I(Di,al),Di.prototype.g=function(){return new ei(this.l,this.j)},Di.prototype.i=function(d){return function(){return d}}({});function ei(d,y){pt.call(this),this.D=d,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}I(ei,pt),s=ei.prototype,s.open=function(d,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=y,this.readyState=1,xs(this)},s.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(y.body=d),(this.D||m).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ws(this)),this.readyState=0},s.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,xs(this)),this.g&&(this.readyState=3,xs(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;_l(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function _l(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}s.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var y=d.value?d.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!d.done}))&&(this.response=this.responseText+=y)}d.done?ws(this):xs(this),this.readyState==3&&_l(this)}},s.Ra=function(d){this.g&&(this.response=this.responseText=d,ws(this))},s.Qa=function(d){this.g&&(this.response=d,ws(this))},s.ga=function(){this.g&&ws(this)};function ws(d){d.readyState=4,d.l=null,d.j=null,d.v=null,xs(d)}s.setRequestHeader=function(d,y){this.u.append(d,y)},s.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],y=this.h.entries();for(var E=y.next();!E.done;)E=E.value,d.push(E[0]+": "+E[1]),E=y.next();return d.join(`\r
`)};function xs(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(ei.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function El(d){let y="";return oe(d,function(E,w){y+=w,y+=":",y+=E,y+=`\r
`}),y}function Ut(d,y,E){e:{for(w in E){var w=!1;break e}w=!0}w||(E=El(E),typeof d=="string"?E!=null&&encodeURIComponent(String(E)):Je(d,y,E))}function Qe(d){pt.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}I(Qe,pt);var Fa=/^https?$/i,$r=["POST","PUT"];s=Qe.prototype,s.Ha=function(d){this.J=d},s.ea=function(d,y,E,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);y=y?y.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ts.g(),this.v=this.o?ol(this.o):ol(Ts),this.g.onreadystatechange=A(this.Ea,this);try{this.B=!0,this.g.open(y,String(d),!0),this.B=!1}catch(Q){_u(this,Q);return}if(d=E||"",E=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var z in w)E.set(z,w[z]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const Q of w.keys())E.set(Q,w.get(Q));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(E.keys()).find(Q=>Q.toLowerCase()=="content-type"),z=m.FormData&&d instanceof m.FormData,!(0<=Array.prototype.indexOf.call($r,y,void 0))||w||z||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,ce]of E)this.g.setRequestHeader(Q,ce);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Kr(this),this.u=!0,this.g.send(d),this.u=!1}catch(Q){_u(this,Q)}};function _u(d,y){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=y,d.m=5,qa(d),Is(d)}function qa(d){d.A||(d.A=!0,Xe(d,"complete"),Xe(d,"error"))}s.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,Xe(this,"complete"),Xe(this,"abort"),Is(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Is(this,!0)),Qe.aa.N.call(this)},s.Ea=function(){this.s||(this.B||this.u||this.j?za(this):this.bb())},s.bb=function(){za(this)};function za(d){if(d.h&&typeof h<"u"&&(!d.v[1]||Kn(d)!=4||d.Z()!=2)){if(d.u&&Kn(d)==4)rn(d.Ea,0,d);else if(Xe(d,"readystatechange"),Kn(d)==4){d.h=!1;try{const ce=d.Z();e:switch(ce){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var E;if(!(E=y)){var w;if(w=ce===0){var z=String(d.D).match(Fr)[1]||null;!z&&m.self&&m.self.location&&(z=m.self.location.protocol.slice(0,-1)),w=!Fa.test(z?z.toLowerCase():"")}E=w}if(E)Xe(d,"complete"),Xe(d,"success");else{d.m=6;try{var Q=2<Kn(d)?d.g.statusText:""}catch{Q=""}d.l=Q+" ["+d.Z()+"]",qa(d)}}finally{Is(d)}}}}function Is(d,y){if(d.g){Kr(d);const E=d.g,w=d.v[0]?()=>{}:null;d.g=null,d.v=null,y||Xe(d,"ready");try{E.onreadystatechange=w}catch{}}}function Kr(d){d.I&&(m.clearTimeout(d.I),d.I=null)}s.isActive=function(){return!!this.g};function Kn(d){return d.g?d.g.readyState:0}s.Z=function(){try{return 2<Kn(this)?this.g.status:-1}catch{return-1}},s.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.Oa=function(d){if(this.g){var y=this.g.responseText;return d&&y.indexOf(d)==0&&(y=y.substring(d.length)),Da(y)}};function Eu(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function uf(d){const y={};d=(d.g&&2<=Kn(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<d.length;w++){if(W(d[w]))continue;var E=k(d[w]);const z=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const Q=y[z]||[];y[z]=Q,Q.push(E)}O(y,function(w){return w.join(", ")})}s.Ba=function(){return this.m},s.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Yr(d,y,E){return E&&E.internalChannelParams&&E.internalChannelParams[d]||y}function Ba(d){this.Aa=0,this.i=[],this.j=new Bn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Yr("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Yr("baseRetryDelayMs",5e3,d),this.cb=Yr("retryDelaySeedMs",1e4,d),this.Wa=Yr("forwardChannelMaxRetries",2,d),this.wa=Yr("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new Qs(d&&d.concurrentRequestLimit),this.Da=new Gr,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}s=Ba.prototype,s.la=8,s.G=1,s.connect=function(d,y,E,w){ct(0),this.W=d,this.H=y||{},E&&w!==void 0&&(this.H.OSID=E,this.H.OAID=w),this.F=this.X,this.I=xu(this,null,this.W),Ga(this)};function Tl(d){if(Tu(d),d.G==3){var y=d.U++,E=Cn(d.I);if(Je(E,"SID",d.K),Je(E,"RID",y),Je(E,"TYPE","terminate"),Qr(d,E),y=new fn(d,d.j,y),y.L=2,y.v=zr(Cn(E)),E=!1,m.navigator&&m.navigator.sendBeacon)try{E=m.navigator.sendBeacon(y.v.toString(),"")}catch{}!E&&m.Image&&(new Image().src=y.v,E=!0),E||(y.g=Iu(y.j,null),y.g.ea(y.v)),y.F=Date.now(),Lr(y)}wu(d)}function Ha(d){d.g&&(Xr(d),d.g.cancel(),d.g=null)}function Tu(d){Ha(d),d.u&&(m.clearTimeout(d.u),d.u=null),$a(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&m.clearTimeout(d.s),d.s=null)}function Ga(d){if(!Pa(d.h)&&!d.s){d.s=!0;var y=d.Ga;re||V(),ue||(re(),ue=!0),ye.add(y,d),d.B=0}}function df(d,y){return ka(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=y.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=At(A(d.Ga,d,y),Nl(d,d.B)),d.B++,!0)}s.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const z=new fn(this,this.j,d);let Q=this.o;if(this.S&&(Q?(Q=S(Q),D(Q,this.S)):Q=this.S),this.m!==null||this.O||(z.H=Q,Q=null),this.P)e:{for(var y=0,E=0;E<this.i.length;E++){t:{var w=this.i[E];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(y+=w,4096<y){y=E;break e}if(y===4096||E===this.i.length-1){y=E+1;break e}}y=1e3}else y=1e3;y=bu(this,z,y),E=Cn(this.I),Je(E,"RID",d),Je(E,"CVER",22),this.D&&Je(E,"X-HTTP-Session-Id",this.D),Qr(this,E),Q&&(this.O?y="headers="+encodeURIComponent(String(El(Q)))+"&"+y:this.m&&Ut(E,this.m,Q)),Va(this.h,z),this.Ua&&Je(E,"TYPE","init"),this.P?(Je(E,"$req",y),Je(E,"SID","null"),z.T=!0,rs(z,E,null)):rs(z,E,y),this.G=2}}else this.G==3&&(d?bl(this,d):this.i.length==0||Pa(this.h)||bl(this))};function bl(d,y){var E;y?E=y.l:E=d.U++;const w=Cn(d.I);Je(w,"SID",d.K),Je(w,"RID",E),Je(w,"AID",d.T),Qr(d,w),d.m&&d.o&&Ut(w,d.m,d.o),E=new fn(d,d.j,E,d.B+1),d.m===null&&(E.H=d.o),y&&(d.i=y.D.concat(d.i)),y=bu(d,E,1e3),E.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),Va(d.h,E),rs(E,w,y)}function Qr(d,y){d.H&&oe(d.H,function(E,w){Je(y,w,E)}),d.l&&pl({},function(E,w){Je(y,w,E)})}function bu(d,y,E){E=Math.min(d.i.length,E);var w=d.l?A(d.l.Na,d.l,d):null;e:{var z=d.i;let Q=-1;for(;;){const ce=["count="+E];Q==-1?0<E?(Q=z[0].g,ce.push("ofs="+Q)):Q=0:ce.push("ofs="+Q);let qe=!0;for(let Rt=0;Rt<E;Rt++){let ze=z[Rt].g;const Ft=z[Rt].map;if(ze-=Q,0>ze)Q=Math.max(0,z[Rt].g-100),qe=!1;else try{Ss(Ft,ce,"req"+ze+"_")}catch{w&&w(Ft)}}if(qe){w=ce.join("&");break e}}}return d=d.i.splice(0,E),y.D=d,w}function Au(d){if(!d.g&&!d.u){d.Y=1;var y=d.Fa;re||V(),ue||(re(),ue=!0),ye.add(y,d),d.v=0}}function Al(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=At(A(d.Fa,d),Nl(d,d.v)),d.v++,!0)}s.Fa=function(){if(this.u=null,Nu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=At(A(this.ab,this),d)}},s.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ct(10),Ha(this),Nu(this))};function Xr(d){d.A!=null&&(m.clearTimeout(d.A),d.A=null)}function Nu(d){d.g=new fn(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var y=Cn(d.qa);Je(y,"RID","rpc"),Je(y,"SID",d.K),Je(y,"AID",d.T),Je(y,"CI",d.F?"0":"1"),!d.F&&d.ja&&Je(y,"TO",d.ja),Je(y,"TYPE","xmlhttp"),Qr(d,y),d.m&&d.o&&Ut(y,d.m,d.o),d.L&&(d.g.I=d.L);var E=d.g;d=d.ia,E.L=1,E.v=zr(Cn(y)),E.m=null,E.P=!0,Ys(E,d)}s.Za=function(){this.C!=null&&(this.C=null,Ha(this),Al(this),ct(19))};function $a(d){d.C!=null&&(m.clearTimeout(d.C),d.C=null)}function Su(d,y){var E=null;if(d.g==y){$a(d),Xr(d),d.g=null;var w=2}else if(fl(d.h,y))E=y.D,mn(d.h,y),w=1;else return;if(d.G!=0){if(y.o)if(w==1){E=y.m?y.m.length:0,y=Date.now()-y.F;var z=d.B;w=wi(),Xe(w,new Ct(w,E)),Ga(d)}else Au(d);else if(z=y.s,z==3||z==0&&0<y.X||!(w==1&&df(d,y)||w==2&&Al(d)))switch(E&&0<E.length&&(y=d.h,y.i=y.i.concat(E)),z){case 1:ti(d,5);break;case 4:ti(d,10);break;case 3:ti(d,6);break;default:ti(d,2)}}}function Nl(d,y){let E=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(E*=2),E*y}function ti(d,y){if(d.j.info("Error code "+y),y==2){var E=A(d.fb,d),w=d.Xa;const z=!w;w=new Nt(w||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||qr(w,"https"),zr(w),z?Hr(w.toString(),E):as(w.toString(),E)}else ct(2);d.G=0,d.l&&d.l.sa(y),wu(d),Tu(d)}s.fb=function(d){d?(this.j.info("Successfully pinged google.com"),ct(2)):(this.j.info("Failed to ping google.com"),ct(1))};function wu(d){if(d.G=0,d.ka=[],d.l){const y=ml(d.h);(y.length!=0||d.i.length!=0)&&(x(d.ka,y),x(d.ka,d.i),d.h.i.length=0,U(d.i),d.i.length=0),d.l.ra()}}function xu(d,y,E){var w=E instanceof Nt?Cn(E):new Nt(E);if(w.g!="")y&&(w.g=y+"."+w.g),ji(w,w.s);else{var z=m.location;w=z.protocol,y=y?y+"."+z.hostname:z.hostname,z=+z.port;var Q=new Nt(null);w&&qr(Q,w),y&&(Q.g=y),z&&ji(Q,z),E&&(Q.l=E),w=Q}return E=d.D,y=d.ya,E&&y&&Je(w,E,y),Je(w,"VER",d.la),Qr(d,w),w}function Iu(d,y,E){if(y&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=d.Ca&&!d.pa?new Qe(new Di({eb:E})):new Qe(d.pa),y.Ha(d.J),y}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Cu(){}s=Cu.prototype,s.ua=function(){},s.ta=function(){},s.sa=function(){},s.ra=function(){},s.isActive=function(){return!0},s.Na=function(){};function Ka(){}Ka.prototype.g=function(d,y){return new pn(d,y)};function pn(d,y){pt.call(this),this.g=new Ba(y),this.l=d,this.h=y&&y.messageUrlParams||null,d=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(d?d["X-WebChannel-Content-Type"]=y.messageContentType:d={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(d?d["X-WebChannel-Client-Profile"]=y.va:d={"X-WebChannel-Client-Profile":y.va}),this.g.S=d,(d=y&&y.Sb)&&!W(d)&&(this.g.m=d),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!W(y)&&(this.g.D=y,d=this.h,d!==null&&y in d&&(d=this.h,y in d&&delete d[y])),this.j=new Cs(this)}I(pn,pt),pn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},pn.prototype.close=function(){Tl(this.g)},pn.prototype.o=function(d){var y=this.g;if(typeof d=="string"){var E={};E.__data__=d,d=E}else this.u&&(E={},E.__data__=is(d),d=E);y.i.push(new gu(y.Ya++,d)),y.G==3&&Ga(y)},pn.prototype.N=function(){this.g.l=null,delete this.j,Tl(this.g),delete this.g,pn.aa.N.call(this)};function Ru(d){$s.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var y=d.__sm__;if(y){e:{for(const E in y){d=E;break e}d=void 0}(this.i=d)&&(d=this.i,y=y!==null&&d in y?y[d]:void 0),this.data=y}else this.data=d}I(Ru,$s);function ju(){cl.call(this),this.status=1}I(ju,cl);function Cs(d){this.g=d}I(Cs,Cu),Cs.prototype.ua=function(){Xe(this.g,"a")},Cs.prototype.ta=function(d){Xe(this.g,new Ru(d))},Cs.prototype.sa=function(d){Xe(this.g,new ju)},Cs.prototype.ra=function(){Xe(this.g,"b")},Ka.prototype.createWebChannel=Ka.prototype.g,pn.prototype.send=pn.prototype.o,pn.prototype.open=pn.prototype.m,pn.prototype.close=pn.prototype.close,aA=function(){return new Ka},rA=function(){return wi()},iA=Es,Lp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ci.NO_ERROR=0,Ci.TIMEOUT=8,Ci.HTTP_ERROR=6,Gd=Ci,Ks.COMPLETE="complete",sA=Ks,ll.EventType=Gs,Gs.OPEN="a",Gs.CLOSE="b",Gs.ERROR="c",Gs.MESSAGE="d",pt.prototype.listen=pt.prototype.K,pc=ll,Qe.prototype.listenOnce=Qe.prototype.L,Qe.prototype.getLastError=Qe.prototype.Ka,Qe.prototype.getLastErrorCode=Qe.prototype.Ba,Qe.prototype.getStatus=Qe.prototype.Z,Qe.prototype.getResponseJson=Qe.prototype.Oa,Qe.prototype.getResponseText=Qe.prototype.oa,Qe.prototype.send=Qe.prototype.ea,Qe.prototype.setWithCredentials=Qe.prototype.Ha,nA=Qe}).apply(typeof Od<"u"?Od:typeof self<"u"?self:typeof window<"u"?window:{});const wT="@firebase/firestore",xT="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}cn.UNAUTHENTICATED=new cn(null),cn.GOOGLE_CREDENTIALS=new cn("google-credentials-uid"),cn.FIRST_PARTY=new cn("first-party-uid"),cn.MOCK_USER=new cn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yo="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ea=new Gc("@firebase/firestore");function So(){return Ea.logLevel}function fe(s,...e){if(Ea.logLevel<=Le.DEBUG){const t=e.map(Ng);Ea.debug(`Firestore (${Yo}): ${s}`,...t)}}function bi(s,...e){if(Ea.logLevel<=Le.ERROR){const t=e.map(Ng);Ea.error(`Firestore (${Yo}): ${s}`,...t)}}function Lo(s,...e){if(Ea.logLevel<=Le.WARN){const t=e.map(Ng);Ea.warn(`Firestore (${Yo}): ${s}`,...t)}}function Ng(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ee(s,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,oA(s,r,t)}function oA(s,e,t){let r=`FIRESTORE (${Yo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw bi(r),new Error(r)}function Ge(s,e,t,r){let o="Unexpected state";typeof t=="string"?o=t:r=t,s||oA(e,o,r)}function Ie(s,e){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const te={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class he extends ss{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class C1{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(cn.UNAUTHENTICATED))}shutdown(){}}class R1{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class j1{constructor(e){this.t=e,this.currentUser=cn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ge(this.o===void 0,42304);let r=this.i;const o=g=>this.i!==r?(r=this.i,t(g)):Promise.resolve();let l=new Ls;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Ls,e.enqueueRetryable(()=>o(this.currentUser))};const h=()=>{const g=l;e.enqueueRetryable(async()=>{await g.promise,await o(this.currentUser)})},m=g=>{fe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit(g=>m(g)),setTimeout(()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?m(g):(fe("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Ls)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(fe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ge(typeof r.accessToken=="string",31837,{l:r}),new lA(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ge(e===null||typeof e=="string",2055,{h:e}),new cn(e)}}class D1{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=cn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class O1{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new D1(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(cn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class IT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class M1{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Nn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ge(this.o===void 0,3512);const r=l=>{l.error!=null&&fe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const h=l.token!==this.m;return this.m=l.token,fe("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>r(l))};const o=l=>{fe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(l=>o(l)),setTimeout(()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):fe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new IT(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ge(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new IT(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P1(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<s;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cA(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uA{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const o=P1(40);for(let l=0;l<o.length;++l)r.length<20&&o[l]<t&&(r+=e.charAt(o[l]%62))}return r}}function Oe(s,e){return s<e?-1:s>e?1:0}function Up(s,e){let t=0;for(;t<s.length&&t<e.length;){const r=s.codePointAt(t),o=e.codePointAt(t);if(r!==o){if(r<128&&o<128)return Oe(r,o);{const l=cA(),h=k1(l.encode(CT(s,t)),l.encode(CT(e,t)));return h!==0?h:Oe(r,o)}}t+=r>65535?2:1}return Oe(s.length,e.length)}function CT(s,e){return s.codePointAt(e)>65535?s.substring(e,e+2):s.substring(e,e+1)}function k1(s,e){for(let t=0;t<s.length&&t<e.length;++t)if(s[t]!==e[t])return Oe(s[t],e[t]);return Oe(s.length,e.length)}function Uo(s,e,t){return s.length===e.length&&s.every((r,o)=>t(r,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RT=-62135596800,jT=1e6;class Pt{static now(){return Pt.fromMillis(Date.now())}static fromDate(e){return Pt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*jT);return new Pt(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new he(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new he(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<RT)throw new he(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new he(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/jT}_compareTo(e){return this.seconds===e.seconds?Oe(this.nanoseconds,e.nanoseconds):Oe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-RT;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{static fromTimestamp(e){return new Ne(e)}static min(){return new Ne(new Pt(0,0))}static max(){return new Ne(new Pt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DT="__name__";class ks{constructor(e,t,r){t===void 0?t=0:t>e.length&&Ee(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Ee(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return ks.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ks?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const l=ks.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return Oe(e.length,t.length)}static compareSegments(e,t){const r=ks.isNumericId(e),o=ks.isNumericId(t);return r&&!o?-1:!r&&o?1:r&&o?ks.extractNumericId(e).compare(ks.extractNumericId(t)):Up(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return cr.fromString(e.substring(4,e.length-2))}}class it extends ks{construct(e,t,r){return new it(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new he(te.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new it(t)}static emptyPath(){return new it([])}}const V1=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class en extends ks{construct(e,t,r){return new en(e,t,r)}static isValidIdentifier(e){return V1.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),en.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===DT}static keyField(){return new en([DT])}static fromServerFormat(e){const t=[];let r="",o=0;const l=()=>{if(r.length===0)throw new he(te.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let h=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new he(te.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new he(te.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=g,o+=2}else m==="`"?(h=!h,o++):m!=="."||h?(r+=m,o++):(l(),o++)}if(l(),h)throw new he(te.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new en(t)}static emptyPath(){return new en([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(e){this.path=e}static fromPath(e){return new ve(it.fromString(e))}static fromName(e){return new ve(it.fromString(e).popFirst(5))}static empty(){return new ve(it.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&it.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return it.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ve(new it(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mc=-1;function L1(s,e){const t=s.toTimestamp().seconds,r=s.toTimestamp().nanoseconds+1,o=Ne.fromTimestamp(r===1e9?new Pt(t+1,0):new Pt(t,r));return new hr(o,ve.empty(),e)}function U1(s){return new hr(s.readTime,s.key,Mc)}class hr{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new hr(Ne.min(),ve.empty(),Mc)}static max(){return new hr(Ne.max(),ve.empty(),Mc)}}function F1(s,e){let t=s.readTime.compareTo(e.readTime);return t!==0?t:(t=ve.comparator(s.documentKey,e.documentKey),t!==0?t:Oe(s.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class z1{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qo(s){if(s.code!==te.FAILED_PRECONDITION||s.message!==q1)throw s;fe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ee(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new se((r,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof se?t:se.resolve(t)}catch(t){return se.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):se.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):se.reject(t)}static resolve(e){return new se((t,r)=>{t(e)})}static reject(e){return new se((t,r)=>{r(e)})}static waitFor(e){return new se((t,r)=>{let o=0,l=0,h=!1;e.forEach(m=>{++o,m.next(()=>{++l,h&&l===o&&t()},g=>r(g))}),h=!0,l===o&&t()})}static or(e){let t=se.resolve(!1);for(const r of e)t=t.next(o=>o?se.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,l)=>{r.push(t.call(this,o,l))}),this.waitFor(r)}static mapArray(e,t){return new se((r,o)=>{const l=e.length,h=new Array(l);let m=0;for(let g=0;g<l;g++){const v=g;t(e[v]).next(_=>{h[v]=_,++m,m===l&&r(h)},_=>o(_))}})}static doWhile(e,t){return new se((r,o)=>{const l=()=>{e()===!0?t().next(()=>{l()},o):r()};l()})}}function B1(s){const e=s.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Xo(s){return s.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>t.writeSequenceNumber(r))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}Ch.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sg=-1;function Wc(s){return s==null}function oh(s){return s===0&&1/s==-1/0}function H1(s){return typeof s=="number"&&Number.isInteger(s)&&!oh(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dA="";function G1(s){let e="";for(let t=0;t<s.length;t++)e.length>0&&(e=OT(e)),e=$1(s.get(t),e);return OT(e)}function $1(s,e){let t=e;const r=s.length;for(let o=0;o<r;o++){const l=s.charAt(o);switch(l){case"\0":t+="";break;case dA:t+="";break;default:t+=l}}return t}function OT(s){return s+dA+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MT(s){let e=0;for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e++;return e}function Sr(s,e){for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e(t,s[t])}function hA(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e,t){this.comparator=e,this.root=t||Jt.EMPTY}insert(e,t){return new mt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Jt.BLACK,null,null))}remove(e){return new mt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Jt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(o===0)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Md(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Md(this.root,e,this.comparator,!1)}getReverseIterator(){return new Md(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Md(this.root,e,this.comparator,!0)}}class Md{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Jt{constructor(e,t,r,o,l){this.key=e,this.value=t,this.color=r??Jt.RED,this.left=o??Jt.EMPTY,this.right=l??Jt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,l){return new Jt(e??this.key,t??this.value,r??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const l=r(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,r),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Jt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Jt.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Jt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Jt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ee(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ee(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ee(27949);return e+(this.isRed()?0:1)}}Jt.EMPTY=null,Jt.RED=!0,Jt.BLACK=!1;Jt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ee(57766)}get value(){throw Ee(16141)}get color(){throw Ee(16727)}get left(){throw Ee(29726)}get right(){throw Ee(36894)}copy(e,t,r,o,l){return this}insert(e,t,r){return new Jt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e){this.comparator=e,this.data=new mt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new PT(this.data.getIterator())}getIteratorFrom(e){return new PT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof kt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=r.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new kt(this.comparator);return t.data=e,t}}class PT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e){this.fields=e,e.sort(en.comparator)}static empty(){return new Vn([])}unionWith(e){let t=new kt(en.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Vn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Uo(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new fA("Invalid base64 string: "+l):l}}(e);return new sn(t)}static fromUint8Array(e){const t=function(o){let l="";for(let h=0;h<o.length;++h)l+=String.fromCharCode(o[h]);return l}(e);return new sn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Oe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}sn.EMPTY_BYTE_STRING=new sn("");const K1=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function fr(s){if(Ge(!!s,39018),typeof s=="string"){let e=0;const t=K1.exec(s);if(Ge(!!t,46558,{timestamp:s}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(s);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:bt(s.seconds),nanos:bt(s.nanos)}}function bt(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function mr(s){return typeof s=="string"?sn.fromBase64String(s):sn.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mA="server_timestamp",pA="__type__",gA="__previous_value__",vA="__local_write_time__";function wg(s){var e,t;return((t=(((e=s?.mapValue)===null||e===void 0?void 0:e.fields)||{})[pA])===null||t===void 0?void 0:t.stringValue)===mA}function Rh(s){const e=s.mapValue.fields[gA];return wg(e)?Rh(e):e}function Pc(s){const e=fr(s.mapValue.fields[vA].timestampValue);return new Pt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y1{constructor(e,t,r,o,l,h,m,g,v,_){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=l,this.forceLongPolling=h,this.autoDetectLongPolling=m,this.longPollingOptions=g,this.useFetchStreams=v,this.isUsingEmulator=_}}const lh="(default)";class kc{constructor(e,t){this.projectId=e,this.database=t||lh}static empty(){return new kc("","")}get isDefaultDatabase(){return this.database===lh}isEqual(e){return e instanceof kc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yA="__type__",Q1="__max__",Pd={mapValue:{}},_A="__vector__",ch="value";function pr(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?wg(s)?4:W1(s)?9007199254740991:X1(s)?10:11:Ee(28295,{value:s})}function Fs(s,e){if(s===e)return!0;const t=pr(s);if(t!==pr(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return Pc(s).isEqual(Pc(e));case 3:return function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const h=fr(o.timestampValue),m=fr(l.timestampValue);return h.seconds===m.seconds&&h.nanos===m.nanos}(s,e);case 5:return s.stringValue===e.stringValue;case 6:return function(o,l){return mr(o.bytesValue).isEqual(mr(l.bytesValue))}(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return function(o,l){return bt(o.geoPointValue.latitude)===bt(l.geoPointValue.latitude)&&bt(o.geoPointValue.longitude)===bt(l.geoPointValue.longitude)}(s,e);case 2:return function(o,l){if("integerValue"in o&&"integerValue"in l)return bt(o.integerValue)===bt(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const h=bt(o.doubleValue),m=bt(l.doubleValue);return h===m?oh(h)===oh(m):isNaN(h)&&isNaN(m)}return!1}(s,e);case 9:return Uo(s.arrayValue.values||[],e.arrayValue.values||[],Fs);case 10:case 11:return function(o,l){const h=o.mapValue.fields||{},m=l.mapValue.fields||{};if(MT(h)!==MT(m))return!1;for(const g in h)if(h.hasOwnProperty(g)&&(m[g]===void 0||!Fs(h[g],m[g])))return!1;return!0}(s,e);default:return Ee(52216,{left:s})}}function Vc(s,e){return(s.values||[]).find(t=>Fs(t,e))!==void 0}function Fo(s,e){if(s===e)return 0;const t=pr(s),r=pr(e);if(t!==r)return Oe(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Oe(s.booleanValue,e.booleanValue);case 2:return function(l,h){const m=bt(l.integerValue||l.doubleValue),g=bt(h.integerValue||h.doubleValue);return m<g?-1:m>g?1:m===g?0:isNaN(m)?isNaN(g)?0:-1:1}(s,e);case 3:return kT(s.timestampValue,e.timestampValue);case 4:return kT(Pc(s),Pc(e));case 5:return Up(s.stringValue,e.stringValue);case 6:return function(l,h){const m=mr(l),g=mr(h);return m.compareTo(g)}(s.bytesValue,e.bytesValue);case 7:return function(l,h){const m=l.split("/"),g=h.split("/");for(let v=0;v<m.length&&v<g.length;v++){const _=Oe(m[v],g[v]);if(_!==0)return _}return Oe(m.length,g.length)}(s.referenceValue,e.referenceValue);case 8:return function(l,h){const m=Oe(bt(l.latitude),bt(h.latitude));return m!==0?m:Oe(bt(l.longitude),bt(h.longitude))}(s.geoPointValue,e.geoPointValue);case 9:return VT(s.arrayValue,e.arrayValue);case 10:return function(l,h){var m,g,v,_;const b=l.fields||{},A=h.fields||{},M=(m=b[ch])===null||m===void 0?void 0:m.arrayValue,I=(g=A[ch])===null||g===void 0?void 0:g.arrayValue,U=Oe(((v=M?.values)===null||v===void 0?void 0:v.length)||0,((_=I?.values)===null||_===void 0?void 0:_.length)||0);return U!==0?U:VT(M,I)}(s.mapValue,e.mapValue);case 11:return function(l,h){if(l===Pd.mapValue&&h===Pd.mapValue)return 0;if(l===Pd.mapValue)return 1;if(h===Pd.mapValue)return-1;const m=l.fields||{},g=Object.keys(m),v=h.fields||{},_=Object.keys(v);g.sort(),_.sort();for(let b=0;b<g.length&&b<_.length;++b){const A=Up(g[b],_[b]);if(A!==0)return A;const M=Fo(m[g[b]],v[_[b]]);if(M!==0)return M}return Oe(g.length,_.length)}(s.mapValue,e.mapValue);default:throw Ee(23264,{Pe:t})}}function kT(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return Oe(s,e);const t=fr(s),r=fr(e),o=Oe(t.seconds,r.seconds);return o!==0?o:Oe(t.nanos,r.nanos)}function VT(s,e){const t=s.values||[],r=e.values||[];for(let o=0;o<t.length&&o<r.length;++o){const l=Fo(t[o],r[o]);if(l)return l}return Oe(t.length,r.length)}function qo(s){return Fp(s)}function Fp(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?function(t){const r=fr(t);return`time(${r.seconds},${r.nanos})`}(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?function(t){return mr(t).toBase64()}(s.bytesValue):"referenceValue"in s?function(t){return ve.fromName(t).toString()}(s.referenceValue):"geoPointValue"in s?function(t){return`geo(${t.latitude},${t.longitude})`}(s.geoPointValue):"arrayValue"in s?function(t){let r="[",o=!0;for(const l of t.values||[])o?o=!1:r+=",",r+=Fp(l);return r+"]"}(s.arrayValue):"mapValue"in s?function(t){const r=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const h of r)l?l=!1:o+=",",o+=`${h}:${Fp(t.fields[h])}`;return o+"}"}(s.mapValue):Ee(61005,{value:s})}function $d(s){switch(pr(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Rh(s);return e?16+$d(e):16;case 5:return 2*s.stringValue.length;case 6:return mr(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((o,l)=>o+$d(l),0)}(s.arrayValue);case 10:case 11:return function(r){let o=0;return Sr(r.fields,(l,h)=>{o+=l.length+$d(h)}),o}(s.mapValue);default:throw Ee(13486,{value:s})}}function LT(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function qp(s){return!!s&&"integerValue"in s}function xg(s){return!!s&&"arrayValue"in s}function UT(s){return!!s&&"nullValue"in s}function FT(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function Kd(s){return!!s&&"mapValue"in s}function X1(s){var e,t;return((t=(((e=s?.mapValue)===null||e===void 0?void 0:e.fields)||{})[yA])===null||t===void 0?void 0:t.stringValue)===_A}function Tc(s){if(s.geoPointValue)return{geoPointValue:Object.assign({},s.geoPointValue)};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:Object.assign({},s.timestampValue)};if(s.mapValue){const e={mapValue:{fields:{}}};return Sr(s.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Tc(r)),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(s.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Tc(s.arrayValue.values[t]);return e}return Object.assign({},s)}function W1(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===Q1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e){this.value=e}static empty(){return new yn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Kd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Tc(t)}setAll(e){let t=en.emptyPath(),r={},o=[];e.forEach((h,m)=>{if(!t.isImmediateParentOf(m)){const g=this.getFieldsMap(t);this.applyChanges(g,r,o),r={},o=[],t=m.popLast()}h?r[m.lastSegment()]=Tc(h):o.push(m.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,r,o)}delete(e){const t=this.field(e.popLast());Kd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Fs(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];Kd(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){Sr(t,(o,l)=>e[o]=l);for(const o of r)delete e[o]}clone(){return new yn(Tc(this.value))}}function EA(s){const e=[];return Sr(s.fields,(t,r)=>{const o=new en([t]);if(Kd(r)){const l=EA(r.mapValue).fields;if(l.length===0)e.push(o);else for(const h of l)e.push(o.child(h))}else e.push(o)}),new Vn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e,t,r,o,l,h,m){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.createTime=l,this.data=h,this.documentState=m}static newInvalidDocument(e){return new Gt(e,0,Ne.min(),Ne.min(),Ne.min(),yn.empty(),0)}static newFoundDocument(e,t,r,o){return new Gt(e,1,t,Ne.min(),r,o,0)}static newNoDocument(e,t){return new Gt(e,2,t,Ne.min(),Ne.min(),yn.empty(),0)}static newUnknownDocument(e,t){return new Gt(e,3,t,Ne.min(),Ne.min(),yn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ne.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=yn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=yn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ne.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Gt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Gt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uh{constructor(e,t){this.position=e,this.inclusive=t}}function qT(s,e,t){let r=0;for(let o=0;o<s.position.length;o++){const l=e[o],h=s.position[o];if(l.field.isKeyField()?r=ve.comparator(ve.fromName(h.referenceValue),t.key):r=Fo(h,t.data.field(l.field)),l.dir==="desc"&&(r*=-1),r!==0)break}return r}function zT(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let t=0;t<s.position.length;t++)if(!Fs(s.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(e,t="asc"){this.field=e,this.dir=t}}function Z1(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TA{}class It extends TA{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new ej(e,t,r):t==="array-contains"?new sj(e,r):t==="in"?new ij(e,r):t==="not-in"?new rj(e,r):t==="array-contains-any"?new aj(e,r):new It(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new tj(e,r):new nj(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Fo(t,this.value)):t!==null&&pr(this.value)===pr(t)&&this.matchesComparison(Fo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ee(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ys extends TA{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new ys(e,t)}matches(e){return bA(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function bA(s){return s.op==="and"}function AA(s){return J1(s)&&bA(s)}function J1(s){for(const e of s.filters)if(e instanceof ys)return!1;return!0}function zp(s){if(s instanceof It)return s.field.canonicalString()+s.op.toString()+qo(s.value);if(AA(s))return s.filters.map(e=>zp(e)).join(",");{const e=s.filters.map(t=>zp(t)).join(",");return`${s.op}(${e})`}}function NA(s,e){return s instanceof It?function(r,o){return o instanceof It&&r.op===o.op&&r.field.isEqual(o.field)&&Fs(r.value,o.value)}(s,e):s instanceof ys?function(r,o){return o instanceof ys&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce((l,h,m)=>l&&NA(h,o.filters[m]),!0):!1}(s,e):void Ee(19439)}function SA(s){return s instanceof It?function(t){return`${t.field.canonicalString()} ${t.op} ${qo(t.value)}`}(s):s instanceof ys?function(t){return t.op.toString()+" {"+t.getFilters().map(SA).join(" ,")+"}"}(s):"Filter"}class ej extends It{constructor(e,t,r){super(e,t,r),this.key=ve.fromName(r.referenceValue)}matches(e){const t=ve.comparator(e.key,this.key);return this.matchesComparison(t)}}class tj extends It{constructor(e,t){super(e,"in",t),this.keys=wA("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class nj extends It{constructor(e,t){super(e,"not-in",t),this.keys=wA("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function wA(s,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>ve.fromName(r.referenceValue))}class sj extends It{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return xg(t)&&Vc(t.arrayValue,this.value)}}class ij extends It{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Vc(this.value.arrayValue,t)}}class rj extends It{constructor(e,t){super(e,"not-in",t)}matches(e){if(Vc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Vc(this.value.arrayValue,t)}}class aj extends It{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!xg(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Vc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oj{constructor(e,t=null,r=[],o=[],l=null,h=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=l,this.startAt=h,this.endAt=m,this.Ie=null}}function BT(s,e=null,t=[],r=[],o=null,l=null,h=null){return new oj(s,e,t,r,o,l,h)}function Ig(s){const e=Ie(s);if(e.Ie===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>zp(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(l){return l.field.canonicalString()+l.dir}(r)).join(","),Wc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>qo(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>qo(r)).join(",")),e.Ie=t}return e.Ie}function Cg(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<s.orderBy.length;t++)if(!Z1(s.orderBy[t],e.orderBy[t]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let t=0;t<s.filters.length;t++)if(!NA(s.filters[t],e.filters[t]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!zT(s.startAt,e.startAt)&&zT(s.endAt,e.endAt)}function Bp(s){return ve.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{constructor(e,t=null,r=[],o=[],l=null,h="F",m=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=l,this.limitType=h,this.startAt=m,this.endAt=g,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function lj(s,e,t,r,o,l,h,m){return new Wo(s,e,t,r,o,l,h,m)}function jh(s){return new Wo(s)}function HT(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function xA(s){return s.collectionGroup!==null}function bc(s){const e=Ie(s);if(e.Ee===null){e.Ee=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ee.push(l),t.add(l.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let m=new kt(en.comparator);return h.filters.forEach(g=>{g.getFlattenedFilters().forEach(v=>{v.isInequality()&&(m=m.add(v.field))})}),m})(e).forEach(l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ee.push(new Lc(l,r))}),t.has(en.keyField().canonicalString())||e.Ee.push(new Lc(en.keyField(),r))}return e.Ee}function Us(s){const e=Ie(s);return e.de||(e.de=cj(e,bc(s))),e.de}function cj(s,e){if(s.limitType==="F")return BT(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map(o=>{const l=o.dir==="desc"?"asc":"desc";return new Lc(o.field,l)});const t=s.endAt?new uh(s.endAt.position,s.endAt.inclusive):null,r=s.startAt?new uh(s.startAt.position,s.startAt.inclusive):null;return BT(s.path,s.collectionGroup,e,s.filters,s.limit,t,r)}}function Hp(s,e){const t=s.filters.concat([e]);return new Wo(s.path,s.collectionGroup,s.explicitOrderBy.slice(),t,s.limit,s.limitType,s.startAt,s.endAt)}function Gp(s,e,t){return new Wo(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,t,s.startAt,s.endAt)}function Dh(s,e){return Cg(Us(s),Us(e))&&s.limitType===e.limitType}function IA(s){return`${Ig(Us(s))}|lt:${s.limitType}`}function wo(s){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(o=>SA(o)).join(", ")}]`),Wc(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(o=>function(h){return`${h.field.canonicalString()} (${h.dir})`}(o)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(o=>qo(o)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(o=>qo(o)).join(",")),`Target(${r})`}(Us(s))}; limitType=${s.limitType})`}function Oh(s,e){return e.isFoundDocument()&&function(r,o){const l=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(l):ve.isDocumentKey(r.path)?r.path.isEqual(l):r.path.isImmediateParentOf(l)}(s,e)&&function(r,o){for(const l of bc(r))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0}(s,e)&&function(r,o){for(const l of r.filters)if(!l.matches(o))return!1;return!0}(s,e)&&function(r,o){return!(r.startAt&&!function(h,m,g){const v=qT(h,m,g);return h.inclusive?v<=0:v<0}(r.startAt,bc(r),o)||r.endAt&&!function(h,m,g){const v=qT(h,m,g);return h.inclusive?v>=0:v>0}(r.endAt,bc(r),o))}(s,e)}function uj(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function CA(s){return(e,t)=>{let r=!1;for(const o of bc(s)){const l=dj(o,e,t);if(l!==0)return l;r=r||o.field.isKeyField()}return 0}}function dj(s,e,t){const r=s.field.isKeyField()?ve.comparator(e.key,t.key):function(l,h,m){const g=h.data.field(l),v=m.data.field(l);return g!==null&&v!==null?Fo(g,v):Ee(42886)}(s.field,e,t);switch(s.dir){case"asc":return r;case"desc":return-1*r;default:return Ee(19790,{direction:s.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[o,l]of r)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(o===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return r.length===1?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Sr(this.inner,(t,r)=>{for(const[o,l]of r)e(o,l)})}isEmpty(){return hA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hj=new mt(ve.comparator);function Ai(){return hj}const RA=new mt(ve.comparator);function gc(...s){let e=RA;for(const t of s)e=e.insert(t.key,t);return e}function jA(s){let e=RA;return s.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function pa(){return Ac()}function DA(){return Ac()}function Ac(){return new xa(s=>s.toString(),(s,e)=>s.isEqual(e))}const fj=new mt(ve.comparator),mj=new kt(ve.comparator);function Fe(...s){let e=mj;for(const t of s)e=e.add(t);return e}const pj=new kt(Oe);function gj(){return pj}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rg(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:oh(e)?"-0":e}}function OA(s){return{integerValue:""+s}}function vj(s,e){return H1(e)?OA(e):Rg(s,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mh{constructor(){this._=void 0}}function yj(s,e,t){return s instanceof Uc?function(o,l){const h={fields:{[pA]:{stringValue:mA},[vA]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&wg(l)&&(l=Rh(l)),l&&(h.fields[gA]=l),{mapValue:h}}(t,e):s instanceof Fc?PA(s,e):s instanceof qc?kA(s,e):function(o,l){const h=MA(o,l),m=GT(h)+GT(o.Re);return qp(h)&&qp(o.Re)?OA(m):Rg(o.serializer,m)}(s,e)}function _j(s,e,t){return s instanceof Fc?PA(s,e):s instanceof qc?kA(s,e):t}function MA(s,e){return s instanceof dh?function(r){return qp(r)||function(l){return!!l&&"doubleValue"in l}(r)}(e)?e:{integerValue:0}:null}class Uc extends Mh{}class Fc extends Mh{constructor(e){super(),this.elements=e}}function PA(s,e){const t=VA(e);for(const r of s.elements)t.some(o=>Fs(o,r))||t.push(r);return{arrayValue:{values:t}}}class qc extends Mh{constructor(e){super(),this.elements=e}}function kA(s,e){let t=VA(e);for(const r of s.elements)t=t.filter(o=>!Fs(o,r));return{arrayValue:{values:t}}}class dh extends Mh{constructor(e,t){super(),this.serializer=e,this.Re=t}}function GT(s){return bt(s.integerValue||s.doubleValue)}function VA(s){return xg(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ej{constructor(e,t){this.field=e,this.transform=t}}function Tj(s,e){return s.field.isEqual(e.field)&&function(r,o){return r instanceof Fc&&o instanceof Fc||r instanceof qc&&o instanceof qc?Uo(r.elements,o.elements,Fs):r instanceof dh&&o instanceof dh?Fs(r.Re,o.Re):r instanceof Uc&&o instanceof Uc}(s.transform,e.transform)}class bj{constructor(e,t){this.version=e,this.transformResults=t}}class tn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new tn}static exists(e){return new tn(void 0,e)}static updateTime(e){return new tn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Yd(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class Ph{}function LA(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new kh(s.key,tn.none()):new Zc(s.key,s.data,tn.none());{const t=s.data,r=yn.empty();let o=new kt(en.comparator);for(let l of e.fields)if(!o.has(l)){let h=t.field(l);h===null&&l.length>1&&(l=l.popLast(),h=t.field(l)),h===null?r.delete(l):r.set(l,h),o=o.add(l)}return new wr(s.key,r,new Vn(o.toArray()),tn.none())}}function Aj(s,e,t){s instanceof Zc?function(o,l,h){const m=o.value.clone(),g=KT(o.fieldTransforms,l,h.transformResults);m.setAll(g),l.convertToFoundDocument(h.version,m).setHasCommittedMutations()}(s,e,t):s instanceof wr?function(o,l,h){if(!Yd(o.precondition,l))return void l.convertToUnknownDocument(h.version);const m=KT(o.fieldTransforms,l,h.transformResults),g=l.data;g.setAll(UA(o)),g.setAll(m),l.convertToFoundDocument(h.version,g).setHasCommittedMutations()}(s,e,t):function(o,l,h){l.convertToNoDocument(h.version).setHasCommittedMutations()}(0,e,t)}function Nc(s,e,t,r){return s instanceof Zc?function(l,h,m,g){if(!Yd(l.precondition,h))return m;const v=l.value.clone(),_=YT(l.fieldTransforms,g,h);return v.setAll(_),h.convertToFoundDocument(h.version,v).setHasLocalMutations(),null}(s,e,t,r):s instanceof wr?function(l,h,m,g){if(!Yd(l.precondition,h))return m;const v=YT(l.fieldTransforms,g,h),_=h.data;return _.setAll(UA(l)),_.setAll(v),h.convertToFoundDocument(h.version,_).setHasLocalMutations(),m===null?null:m.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(b=>b.field))}(s,e,t,r):function(l,h,m){return Yd(l.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):m}(s,e,t)}function Nj(s,e){let t=null;for(const r of s.fieldTransforms){const o=e.data.field(r.field),l=MA(r.transform,o||null);l!=null&&(t===null&&(t=yn.empty()),t.set(r.field,l))}return t||null}function $T(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&Uo(r,o,(l,h)=>Tj(l,h))}(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class Zc extends Ph{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class wr extends Ph{constructor(e,t,r,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function UA(s){const e=new Map;return s.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=s.data.field(t);e.set(t,r)}}),e}function KT(s,e,t){const r=new Map;Ge(s.length===t.length,32656,{Ve:t.length,me:s.length});for(let o=0;o<t.length;o++){const l=s[o],h=l.transform,m=e.data.field(l.field);r.set(l.field,_j(h,m,t[o]))}return r}function YT(s,e,t){const r=new Map;for(const o of s){const l=o.transform,h=t.data.field(o.field);r.set(o.field,yj(l,h,e))}return r}class kh extends Ph{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class FA extends Ph{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sj{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&Aj(l,e,r[o])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Nc(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Nc(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=DA();return this.mutations.forEach(o=>{const l=e.get(o.key),h=l.overlayedDocument;let m=this.applyToLocalView(h,l.mutatedFields);m=t.has(o.key)?null:m;const g=LA(h,m);g!==null&&r.set(o.key,g),h.isValidDocument()||h.convertToNoDocument(Ne.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Fe())}isEqual(e){return this.batchId===e.batchId&&Uo(this.mutations,e.mutations,(t,r)=>$T(t,r))&&Uo(this.baseMutations,e.baseMutations,(t,r)=>$T(t,r))}}class jg{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){Ge(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let o=function(){return fj}();const l=e.mutations;for(let h=0;h<l.length;h++)o=o.insert(l[h].key,r[h].version);return new jg(e,t,r,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wj{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xj{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xt,He;function qA(s){switch(s){case te.OK:return Ee(64938);case te.CANCELLED:case te.UNKNOWN:case te.DEADLINE_EXCEEDED:case te.RESOURCE_EXHAUSTED:case te.INTERNAL:case te.UNAVAILABLE:case te.UNAUTHENTICATED:return!1;case te.INVALID_ARGUMENT:case te.NOT_FOUND:case te.ALREADY_EXISTS:case te.PERMISSION_DENIED:case te.FAILED_PRECONDITION:case te.ABORTED:case te.OUT_OF_RANGE:case te.UNIMPLEMENTED:case te.DATA_LOSS:return!0;default:return Ee(15467,{code:s})}}function zA(s){if(s===void 0)return bi("GRPC error has no .code"),te.UNKNOWN;switch(s){case xt.OK:return te.OK;case xt.CANCELLED:return te.CANCELLED;case xt.UNKNOWN:return te.UNKNOWN;case xt.DEADLINE_EXCEEDED:return te.DEADLINE_EXCEEDED;case xt.RESOURCE_EXHAUSTED:return te.RESOURCE_EXHAUSTED;case xt.INTERNAL:return te.INTERNAL;case xt.UNAVAILABLE:return te.UNAVAILABLE;case xt.UNAUTHENTICATED:return te.UNAUTHENTICATED;case xt.INVALID_ARGUMENT:return te.INVALID_ARGUMENT;case xt.NOT_FOUND:return te.NOT_FOUND;case xt.ALREADY_EXISTS:return te.ALREADY_EXISTS;case xt.PERMISSION_DENIED:return te.PERMISSION_DENIED;case xt.FAILED_PRECONDITION:return te.FAILED_PRECONDITION;case xt.ABORTED:return te.ABORTED;case xt.OUT_OF_RANGE:return te.OUT_OF_RANGE;case xt.UNIMPLEMENTED:return te.UNIMPLEMENTED;case xt.DATA_LOSS:return te.DATA_LOSS;default:return Ee(39323,{code:s})}}(He=xt||(xt={}))[He.OK=0]="OK",He[He.CANCELLED=1]="CANCELLED",He[He.UNKNOWN=2]="UNKNOWN",He[He.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",He[He.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",He[He.NOT_FOUND=5]="NOT_FOUND",He[He.ALREADY_EXISTS=6]="ALREADY_EXISTS",He[He.PERMISSION_DENIED=7]="PERMISSION_DENIED",He[He.UNAUTHENTICATED=16]="UNAUTHENTICATED",He[He.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",He[He.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",He[He.ABORTED=10]="ABORTED",He[He.OUT_OF_RANGE=11]="OUT_OF_RANGE",He[He.UNIMPLEMENTED=12]="UNIMPLEMENTED",He[He.INTERNAL=13]="INTERNAL",He[He.UNAVAILABLE=14]="UNAVAILABLE",He[He.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ij=new cr([4294967295,4294967295],0);function QT(s){const e=cA().encode(s),t=new tA;return t.update(e),new Uint8Array(t.digest())}function XT(s){const e=new DataView(s.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new cr([t,r],0),new cr([o,l],0)]}class Dg{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new vc(`Invalid padding: ${t}`);if(r<0)throw new vc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new vc(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new vc(`Invalid padding when bitmap length is 0: ${t}`);this.pe=8*e.length-t,this.ye=cr.fromNumber(this.pe)}we(e,t,r){let o=e.add(t.multiply(cr.fromNumber(r)));return o.compare(Ij)===1&&(o=new cr([o.getBits(0),o.getBits(1)],0)),o.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const t=QT(e),[r,o]=XT(t);for(let l=0;l<this.hashCount;l++){const h=this.we(r,o,l);if(!this.be(h))return!1}return!0}static create(e,t,r){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),h=new Dg(l,o,t);return r.forEach(m=>h.insert(m)),h}insert(e){if(this.pe===0)return;const t=QT(e),[r,o]=XT(t);for(let l=0;l<this.hashCount;l++){const h=this.we(r,o,l);this.Se(h)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class vc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh{constructor(e,t,r,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const o=new Map;return o.set(e,Jc.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Vh(Ne.min(),o,new mt(Oe),Ai(),Fe())}}class Jc{constructor(e,t,r,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Jc(r,t,Fe(),Fe(),Fe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qd{constructor(e,t,r,o){this.De=e,this.removedTargetIds=t,this.key=r,this.ve=o}}class BA{constructor(e,t){this.targetId=e,this.Ce=t}}class HA{constructor(e,t,r=sn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class WT{constructor(){this.Fe=0,this.Me=ZT(),this.xe=sn.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=Fe(),t=Fe(),r=Fe();return this.Me.forEach((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:Ee(38017,{changeType:l})}}),new Jc(this.xe,this.Oe,e,t,r)}Qe(){this.Ne=!1,this.Me=ZT()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,Ge(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class Cj{constructor(e){this.ze=e,this.je=new Map,this.He=Ai(),this.Je=kd(),this.Ye=kd(),this.Ze=new mt(Oe)}Xe(e){for(const t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(const t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,t=>{const r=this.rt(t);switch(e.state){case 0:this.it(t)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(t);break;case 3:this.it(t)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),r.ke(e.resumeToken));break;default:Ee(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach((r,o)=>{this.it(o)&&t(o)})}ot(e){const t=e.targetId,r=e.Ce.count,o=this._t(t);if(o){const l=o.target;if(Bp(l))if(r===0){const h=new ve(l.path);this.tt(t,h,Gt.newNoDocument(h,Ne.min()))}else Ge(r===1,20013,{expectedCount:r});else{const h=this.ut(t);if(h!==r){const m=this.ct(e),g=m?this.lt(m,e,h):1;if(g!==0){this.st(t);const v=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,v)}}}}}ct(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:l=0}=t;let h,m;try{h=mr(r).toUint8Array()}catch(g){if(g instanceof fA)return Lo("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{m=new Dg(h,o,l)}catch(g){return Lo(g instanceof vc?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return m.pe===0?null:m}lt(e,t,r){return t.Ce.count===r-this.Tt(e,t.targetId)?0:2}Tt(e,t){const r=this.ze.getRemoteKeysForTarget(t);let o=0;return r.forEach(l=>{const h=this.ze.Pt(),m=`projects/${h.projectId}/databases/${h.database}/documents/${l.path.canonicalString()}`;e.mightContain(m)||(this.tt(t,l,null),o++)}),o}It(e){const t=new Map;this.je.forEach((l,h)=>{const m=this._t(h);if(m){if(l.current&&Bp(m.target)){const g=new ve(m.target.path);this.Et(g).has(h)||this.dt(h,g)||this.tt(h,g,Gt.newNoDocument(g,e))}l.Le&&(t.set(h,l.qe()),l.Qe())}});let r=Fe();this.Ye.forEach((l,h)=>{let m=!0;h.forEachWhile(g=>{const v=this._t(g);return!v||v.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)}),m&&(r=r.add(l))}),this.He.forEach((l,h)=>h.setReadTime(e));const o=new Vh(e,t,this.Ze,this.He,r);return this.He=Ai(),this.Je=kd(),this.Ye=kd(),this.Ze=new mt(Oe),o}et(e,t){if(!this.it(e))return;const r=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,r),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,r){if(!this.it(e))return;const o=this.rt(e);this.dt(e,t)?o.$e(t,1):o.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),r&&(this.He=this.He.insert(t,r))}removeTarget(e){this.je.delete(e)}ut(e){const t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new WT,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new kt(Oe),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new kt(Oe),this.Je=this.Je.insert(e,t)),t}it(e){const t=this._t(e)!==null;return t||fe("WatchChangeAggregator","Detected inactive target",e),t}_t(e){const t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new WT),this.ze.getRemoteKeysForTarget(e).forEach(t=>{this.tt(e,t,null)})}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}}function kd(){return new mt(ve.comparator)}function ZT(){return new mt(ve.comparator)}const Rj={asc:"ASCENDING",desc:"DESCENDING"},jj={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Dj={and:"AND",or:"OR"};class Oj{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function $p(s,e){return s.useProto3Json||Wc(e)?e:{value:e}}function hh(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function GA(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function Mj(s,e){return hh(s,e.toTimestamp())}function Un(s){return Ge(!!s,49232),Ne.fromTimestamp(function(t){const r=fr(t);return new Pt(r.seconds,r.nanos)}(s))}function Og(s,e){return Kp(s,e).canonicalString()}function Kp(s,e){const t=function(o){return new it(["projects",o.projectId,"databases",o.database])}(s).child("documents");return e===void 0?t:t.child(e)}function $A(s){const e=it.fromString(s);return Ge(ZA(e),10190,{key:e.toString()}),e}function fh(s,e){return Og(s.databaseId,e.path)}function Sc(s,e){const t=$A(e);if(t.get(1)!==s.databaseId.projectId)throw new he(te.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+s.databaseId.projectId);if(t.get(3)!==s.databaseId.database)throw new he(te.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+s.databaseId.database);return new ve(YA(t))}function KA(s,e){return Og(s.databaseId,e)}function Pj(s){const e=$A(s);return e.length===4?it.emptyPath():YA(e)}function Yp(s){return new it(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function YA(s){return Ge(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function JT(s,e,t){return{name:fh(s,e),fields:t.value.mapValue.fields}}function kj(s,e){return"found"in e?function(r,o){Ge(!!o.found,43571),o.found.name,o.found.updateTime;const l=Sc(r,o.found.name),h=Un(o.found.updateTime),m=o.found.createTime?Un(o.found.createTime):Ne.min(),g=new yn({mapValue:{fields:o.found.fields}});return Gt.newFoundDocument(l,h,m,g)}(s,e):"missing"in e?function(r,o){Ge(!!o.missing,3894),Ge(!!o.readTime,22933);const l=Sc(r,o.missing),h=Un(o.readTime);return Gt.newNoDocument(l,h)}(s,e):Ee(7234,{result:e})}function Vj(s,e){let t;if("targetChange"in e){e.targetChange;const r=function(v){return v==="NO_CHANGE"?0:v==="ADD"?1:v==="REMOVE"?2:v==="CURRENT"?3:v==="RESET"?4:Ee(39313,{state:v})}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=function(v,_){return v.useProto3Json?(Ge(_===void 0||typeof _=="string",58123),sn.fromBase64String(_||"")):(Ge(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),sn.fromUint8Array(_||new Uint8Array))}(s,e.targetChange.resumeToken),h=e.targetChange.cause,m=h&&function(v){const _=v.code===void 0?te.UNKNOWN:zA(v.code);return new he(_,v.message||"")}(h);t=new HA(r,o,l,m||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const o=Sc(s,r.document.name),l=Un(r.document.updateTime),h=r.document.createTime?Un(r.document.createTime):Ne.min(),m=new yn({mapValue:{fields:r.document.fields}}),g=Gt.newFoundDocument(o,l,h,m),v=r.targetIds||[],_=r.removedTargetIds||[];t=new Qd(v,_,g.key,g)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const o=Sc(s,r.document),l=r.readTime?Un(r.readTime):Ne.min(),h=Gt.newNoDocument(o,l),m=r.removedTargetIds||[];t=new Qd([],m,h.key,h)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const o=Sc(s,r.document),l=r.removedTargetIds||[];t=new Qd([],l,o,null)}else{if(!("filter"in e))return Ee(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:o=0,unchangedNames:l}=r,h=new xj(o,l),m=r.targetId;t=new BA(m,h)}}return t}function QA(s,e){let t;if(e instanceof Zc)t={update:JT(s,e.key,e.value)};else if(e instanceof kh)t={delete:fh(s,e.key)};else if(e instanceof wr)t={update:JT(s,e.key,e.data),updateMask:$j(e.fieldMask)};else{if(!(e instanceof FA))return Ee(16599,{ft:e.type});t={verify:fh(s,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(l,h){const m=h.transform;if(m instanceof Uc)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof Fc)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof qc)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof dh)return{fieldPath:h.field.canonicalString(),increment:m.Re};throw Ee(20930,{transform:h.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(o,l){return l.updateTime!==void 0?{updateTime:Mj(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Ee(27497)}(s,e.precondition)),t}function Lj(s,e){return s&&s.length>0?(Ge(e!==void 0,14353),s.map(t=>function(o,l){let h=o.updateTime?Un(o.updateTime):Un(l);return h.isEqual(Ne.min())&&(h=Un(l)),new bj(h,o.transformResults||[])}(t,e))):[]}function Uj(s,e){return{documents:[KA(s,e.path)]}}function Fj(s,e){const t={structuredQuery:{}},r=e.path;let o;e.collectionGroup!==null?(o=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=KA(s,o);const l=function(v){if(v.length!==0)return WA(ys.create(v,"and"))}(e.filters);l&&(t.structuredQuery.where=l);const h=function(v){if(v.length!==0)return v.map(_=>function(A){return{field:xo(A.field),direction:Bj(A.dir)}}(_))}(e.orderBy);h&&(t.structuredQuery.orderBy=h);const m=$p(s,e.limit);return m!==null&&(t.structuredQuery.limit=m),e.startAt&&(t.structuredQuery.startAt=function(v){return{before:v.inclusive,values:v.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(v){return{before:!v.inclusive,values:v.position}}(e.endAt)),{gt:t,parent:o}}function qj(s){let e=Pj(s.parent);const t=s.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){Ge(r===1,65062);const _=t.from[0];_.allDescendants?o=_.collectionId:e=e.child(_.collectionId)}let l=[];t.where&&(l=function(b){const A=XA(b);return A instanceof ys&&AA(A)?A.getFilters():[A]}(t.where));let h=[];t.orderBy&&(h=function(b){return b.map(A=>function(I){return new Lc(Io(I.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(I.direction))}(A))}(t.orderBy));let m=null;t.limit&&(m=function(b){let A;return A=typeof b=="object"?b.value:b,Wc(A)?null:A}(t.limit));let g=null;t.startAt&&(g=function(b){const A=!!b.before,M=b.values||[];return new uh(M,A)}(t.startAt));let v=null;return t.endAt&&(v=function(b){const A=!b.before,M=b.values||[];return new uh(M,A)}(t.endAt)),lj(e,o,h,l,m,"F",g,v)}function zj(s,e){const t=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ee(28987,{purpose:o})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function XA(s){return s.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Io(t.unaryFilter.field);return It.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=Io(t.unaryFilter.field);return It.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Io(t.unaryFilter.field);return It.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=Io(t.unaryFilter.field);return It.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ee(61313);default:return Ee(60726)}}(s):s.fieldFilter!==void 0?function(t){return It.create(Io(t.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ee(58110);default:return Ee(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(s):s.compositeFilter!==void 0?function(t){return ys.create(t.compositeFilter.filters.map(r=>XA(r)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ee(1026)}}(t.compositeFilter.op))}(s):Ee(30097,{filter:s})}function Bj(s){return Rj[s]}function Hj(s){return jj[s]}function Gj(s){return Dj[s]}function xo(s){return{fieldPath:s.canonicalString()}}function Io(s){return en.fromServerFormat(s.fieldPath)}function WA(s){return s instanceof It?function(t){if(t.op==="=="){if(FT(t.value))return{unaryFilter:{field:xo(t.field),op:"IS_NAN"}};if(UT(t.value))return{unaryFilter:{field:xo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(FT(t.value))return{unaryFilter:{field:xo(t.field),op:"IS_NOT_NAN"}};if(UT(t.value))return{unaryFilter:{field:xo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:xo(t.field),op:Hj(t.op),value:t.value}}}(s):s instanceof ys?function(t){const r=t.getFilters().map(o=>WA(o));return r.length===1?r[0]:{compositeFilter:{op:Gj(t.op),filters:r}}}(s):Ee(54877,{filter:s})}function $j(s){const e=[];return s.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function ZA(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar{constructor(e,t,r,o,l=Ne.min(),h=Ne.min(),m=sn.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=m,this.expectedCount=g}withSequenceNumber(e){return new ar(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ar(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ar(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ar(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kj{constructor(e){this.wt=e}}function Yj(s){const e=qj({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?Gp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qj{constructor(){this.Cn=new Xj}addToCollectionParentIndex(e,t){return this.Cn.add(t),se.resolve()}getCollectionParents(e,t){return se.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return se.resolve()}deleteFieldIndex(e,t){return se.resolve()}deleteAllFieldIndexes(e){return se.resolve()}createTargetIndexes(e,t){return se.resolve()}getDocumentsMatchingTarget(e,t){return se.resolve(null)}getIndexType(e,t){return se.resolve(0)}getFieldIndexes(e,t){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,t){return se.resolve(hr.min())}getMinOffsetFromCollectionGroup(e,t){return se.resolve(hr.min())}updateCollectionGroup(e,t,r){return se.resolve()}updateIndexEntries(e,t){return se.resolve()}}class Xj{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new kt(it.comparator),l=!o.has(r);return this.index[t]=o.add(r),l}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new kt(it.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},JA=41943040;class An{static withCacheSize(e){return new An(e,An.DEFAULT_COLLECTION_PERCENTILE,An.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */An.DEFAULT_COLLECTION_PERCENTILE=10,An.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,An.DEFAULT=new An(JA,An.DEFAULT_COLLECTION_PERCENTILE,An.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),An.DISABLED=new An(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new zo(0)}static lr(){return new zo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tb="LruGarbageCollector",Wj=1048576;function nb([s,e],[t,r]){const o=Oe(s,t);return o===0?Oe(e,r):o}class Zj{constructor(e){this.Er=e,this.buffer=new kt(nb),this.dr=0}Ar(){return++this.dr}Rr(e){const t=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();nb(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Jj{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){fe(tb,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Xo(t)?fe(tb,"Ignoring IndexedDB error during garbage collection: ",t):await Qo(t)}await this.mr(3e5)})}}class eD{constructor(e,t){this.gr=e,this.params=t}calculateTargetCount(e,t){return this.gr.pr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return se.resolve(Ch.le);const r=new Zj(t);return this.gr.forEachTarget(e,o=>r.Rr(o.sequenceNumber)).next(()=>this.gr.yr(e,o=>r.Rr(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.gr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.gr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(fe("LruGarbageCollector","Garbage collection skipped; disabled"),se.resolve(eb)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(fe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),eb):this.wr(e,t))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,t){let r,o,l,h,m,g,v;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(b=>(b>this.params.maximumSequenceNumbersToCollect?(fe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${b}`),o=this.params.maximumSequenceNumbersToCollect):o=b,h=Date.now(),this.nthSequenceNumber(e,o))).next(b=>(r=b,m=Date.now(),this.removeTargets(e,r,t))).next(b=>(l=b,g=Date.now(),this.removeOrphanedDocuments(e,r))).next(b=>(v=Date.now(),So()<=Le.DEBUG&&fe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-_}ms
	Determined least recently used ${o} in `+(m-h)+`ms
	Removed ${l} targets in `+(g-m)+`ms
	Removed ${b} documents in `+(v-g)+`ms
Total Duration: ${v-_}ms`),se.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:b})))}}function tD(s,e){return new eD(s,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nD{constructor(){this.changes=new xa(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Gt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?se.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sD{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iD{constructor(e,t,r,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(r=o,this.remoteDocumentCache.getEntry(e,t))).next(o=>(r!==null&&Nc(r.mutation,o,Vn.empty(),Pt.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Fe()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Fe()){const o=pa();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,r).next(l=>{let h=gc();return l.forEach((m,g)=>{h=h.insert(m,g.overlayedDocument)}),h}))}getOverlayedDocuments(e,t){const r=pa();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Fe()))}populateOverlays(e,t,r){const o=[];return r.forEach(l=>{t.has(l)||o.push(l)}),this.documentOverlayCache.getOverlays(e,o).next(l=>{l.forEach((h,m)=>{t.set(h,m)})})}computeViews(e,t,r,o){let l=Ai();const h=Ac(),m=function(){return Ac()}();return t.forEach((g,v)=>{const _=r.get(v.key);o.has(v.key)&&(_===void 0||_.mutation instanceof wr)?l=l.insert(v.key,v):_!==void 0?(h.set(v.key,_.mutation.getFieldMask()),Nc(_.mutation,v,_.mutation.getFieldMask(),Pt.now())):h.set(v.key,Vn.empty())}),this.recalculateAndSaveOverlays(e,l).next(g=>(g.forEach((v,_)=>h.set(v,_)),t.forEach((v,_)=>{var b;return m.set(v,new sD(_,(b=h.get(v))!==null&&b!==void 0?b:null))}),m))}recalculateAndSaveOverlays(e,t){const r=Ac();let o=new mt((h,m)=>h-m),l=Fe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(h=>{for(const m of h)m.keys().forEach(g=>{const v=t.get(g);if(v===null)return;let _=r.get(g)||Vn.empty();_=m.applyToLocalView(v,_),r.set(g,_);const b=(o.get(m.batchId)||Fe()).add(g);o=o.insert(m.batchId,b)})}).next(()=>{const h=[],m=o.getReverseIterator();for(;m.hasNext();){const g=m.getNext(),v=g.key,_=g.value,b=DA();_.forEach(A=>{if(!l.has(A)){const M=LA(t.get(A),r.get(A));M!==null&&b.set(A,M),l=l.add(A)}}),h.push(this.documentOverlayCache.saveOverlays(e,v,b))}return se.waitFor(h)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,o){return function(h){return ve.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):xA(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,o):this.getDocumentsMatchingCollectionQuery(e,t,r,o)}getNextDocuments(e,t,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,o).next(l=>{const h=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,o-l.size):se.resolve(pa());let m=Mc,g=l;return h.next(v=>se.forEach(v,(_,b)=>(m<b.largestBatchId&&(m=b.largestBatchId),l.get(_)?se.resolve():this.remoteDocumentCache.getEntry(e,_).next(A=>{g=g.insert(_,A)}))).next(()=>this.populateOverlays(e,v,l)).next(()=>this.computeViews(e,g,v,Fe())).next(_=>({batchId:m,changes:jA(_)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ve(t)).next(r=>{let o=gc();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,r,o){const l=t.collectionGroup;let h=gc();return this.indexManager.getCollectionParents(e,l).next(m=>se.forEach(m,g=>{const v=function(b,A){return new Wo(A,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt)}(t,g.child(l));return this.getDocumentsMatchingCollectionQuery(e,v,r,o).next(_=>{_.forEach((b,A)=>{h=h.insert(b,A)})})}).next(()=>h))}getDocumentsMatchingCollectionQuery(e,t,r,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(h=>(l=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,l,o))).next(h=>{l.forEach((g,v)=>{const _=v.getKey();h.get(_)===null&&(h=h.insert(_,Gt.newInvalidDocument(_)))});let m=gc();return h.forEach((g,v)=>{const _=l.get(g);_!==void 0&&Nc(_.mutation,v,Vn.empty(),Pt.now()),Oh(t,v)&&(m=m.insert(g,v))}),m})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rD{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,t){return se.resolve(this.kr.get(t))}saveBundleMetadata(e,t){return this.kr.set(t.id,function(o){return{id:o.id,version:o.version,createTime:Un(o.createTime)}}(t)),se.resolve()}getNamedQuery(e,t){return se.resolve(this.qr.get(t))}saveNamedQuery(e,t){return this.qr.set(t.name,function(o){return{name:o.name,query:Yj(o.bundledQuery),readTime:Un(o.readTime)}}(t)),se.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aD{constructor(){this.overlays=new mt(ve.comparator),this.Qr=new Map}getOverlay(e,t){return se.resolve(this.overlays.get(t))}getOverlays(e,t){const r=pa();return se.forEach(t,o=>this.getOverlay(e,o).next(l=>{l!==null&&r.set(o,l)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((o,l)=>{this.St(e,t,l)}),se.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.Qr.get(r);return o!==void 0&&(o.forEach(l=>this.overlays=this.overlays.remove(l)),this.Qr.delete(r)),se.resolve()}getOverlaysForCollection(e,t,r){const o=pa(),l=t.length+1,h=new ve(t.child("")),m=this.overlays.getIteratorFrom(h);for(;m.hasNext();){const g=m.getNext().value,v=g.getKey();if(!t.isPrefixOf(v.path))break;v.path.length===l&&g.largestBatchId>r&&o.set(g.getKey(),g)}return se.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let l=new mt((v,_)=>v-_);const h=this.overlays.getIterator();for(;h.hasNext();){const v=h.getNext().value;if(v.getKey().getCollectionGroup()===t&&v.largestBatchId>r){let _=l.get(v.largestBatchId);_===null&&(_=pa(),l=l.insert(v.largestBatchId,_)),_.set(v.getKey(),v)}}const m=pa(),g=l.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach((v,_)=>m.set(v,_)),!(m.size()>=o)););return se.resolve(m)}St(e,t,r){const o=this.overlays.get(r.key);if(o!==null){const h=this.Qr.get(o.largestBatchId).delete(r.key);this.Qr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(r.key,new wj(t,r));let l=this.Qr.get(t);l===void 0&&(l=Fe(),this.Qr.set(t,l)),this.Qr.set(t,l.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oD{constructor(){this.sessionToken=sn.EMPTY_BYTE_STRING}getSessionToken(e){return se.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,se.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mg{constructor(){this.$r=new kt(Ht.Ur),this.Kr=new kt(Ht.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,t){const r=new Ht(e,t);this.$r=this.$r.add(r),this.Kr=this.Kr.add(r)}Gr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.zr(new Ht(e,t))}jr(e,t){e.forEach(r=>this.removeReference(r,t))}Hr(e){const t=new ve(new it([])),r=new Ht(t,e),o=new Ht(t,e+1),l=[];return this.Kr.forEachInRange([r,o],h=>{this.zr(h),l.push(h.key)}),l}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const t=new ve(new it([])),r=new Ht(t,e),o=new Ht(t,e+1);let l=Fe();return this.Kr.forEachInRange([r,o],h=>{l=l.add(h.key)}),l}containsKey(e){const t=new Ht(e,0),r=this.$r.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Ht{constructor(e,t){this.key=e,this.Zr=t}static Ur(e,t){return ve.comparator(e.key,t.key)||Oe(e.Zr,t.Zr)}static Wr(e,t){return Oe(e.Zr,t.Zr)||ve.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lD{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.nr=1,this.Xr=new kt(Ht.Ur)}checkEmpty(e){return se.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,o){const l=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new Sj(l,t,r,o);this.mutationQueue.push(h);for(const m of o)this.Xr=this.Xr.add(new Ht(m.key,l)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return se.resolve(h)}lookupMutationBatch(e,t){return se.resolve(this.ei(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=this.ti(r),l=o<0?0:o;return se.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(this.mutationQueue.length===0?Sg:this.nr-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ht(t,0),o=new Ht(t,Number.POSITIVE_INFINITY),l=[];return this.Xr.forEachInRange([r,o],h=>{const m=this.ei(h.Zr);l.push(m)}),se.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new kt(Oe);return t.forEach(o=>{const l=new Ht(o,0),h=new Ht(o,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([l,h],m=>{r=r.add(m.Zr)})}),se.resolve(this.ni(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let l=r;ve.isDocumentKey(l)||(l=l.child(""));const h=new Ht(new ve(l),0);let m=new kt(Oe);return this.Xr.forEachWhile(g=>{const v=g.key.path;return!!r.isPrefixOf(v)&&(v.length===o&&(m=m.add(g.Zr)),!0)},h),se.resolve(this.ni(m))}ni(e){const t=[];return e.forEach(r=>{const o=this.ei(r);o!==null&&t.push(o)}),t}removeMutationBatch(e,t){Ge(this.ri(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Xr;return se.forEach(t.mutations,o=>{const l=new Ht(o.key,t.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Xr=r})}sr(e){}containsKey(e,t){const r=new Ht(t,0),o=this.Xr.firstAfterOrEqual(r);return se.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,se.resolve()}ri(e,t){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const t=this.ti(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cD{constructor(e){this.ii=e,this.docs=function(){return new mt(ve.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),l=o?o.size:0,h=this.ii(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:h}),this.size+=h-l,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return se.resolve(r?r.document.mutableCopy():Gt.newInvalidDocument(t))}getEntries(e,t){let r=Ai();return t.forEach(o=>{const l=this.docs.get(o);r=r.insert(o,l?l.document.mutableCopy():Gt.newInvalidDocument(o))}),se.resolve(r)}getDocumentsMatchingQuery(e,t,r,o){let l=Ai();const h=t.path,m=new ve(h.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(m);for(;g.hasNext();){const{key:v,value:{document:_}}=g.getNext();if(!h.isPrefixOf(v.path))break;v.path.length>h.length+1||F1(U1(_),r)<=0||(o.has(_.key)||Oh(t,_))&&(l=l.insert(_.key,_.mutableCopy()))}return se.resolve(l)}getAllFromCollectionGroup(e,t,r,o){Ee(9500)}si(e,t){return se.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new uD(this)}getSize(e){return se.resolve(this.size)}}class uD extends nD{constructor(e){super(),this.Br=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.Br.addEntry(e,o)):this.Br.removeEntry(r)}),se.waitFor(t)}getFromCache(e,t){return this.Br.getEntry(e,t)}getAllFromCache(e,t){return this.Br.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dD{constructor(e){this.persistence=e,this.oi=new xa(t=>Ig(t),Cg),this.lastRemoteSnapshotVersion=Ne.min(),this.highestTargetId=0,this._i=0,this.ai=new Mg,this.targetCount=0,this.ui=zo.cr()}forEachTarget(e,t){return this.oi.forEach((r,o)=>t(o)),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this._i&&(this._i=t),se.resolve()}Tr(e){this.oi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ui=new zo(t),this.highestTargetId=t),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,t){return this.Tr(t),this.targetCount+=1,se.resolve()}updateTargetData(e,t){return this.Tr(t),se.resolve()}removeTargetData(e,t){return this.oi.delete(t.target),this.ai.Hr(t.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,t,r){let o=0;const l=[];return this.oi.forEach((h,m)=>{m.sequenceNumber<=t&&r.get(m.targetId)===null&&(this.oi.delete(h),l.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),se.waitFor(l).next(()=>o)}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,t){const r=this.oi.get(t)||null;return se.resolve(r)}addMatchingKeys(e,t,r){return this.ai.Gr(t,r),se.resolve()}removeMatchingKeys(e,t,r){this.ai.jr(t,r);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach(h=>{l.push(o.markPotentiallyOrphaned(e,h))}),se.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.ai.Hr(t),se.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ai.Yr(t);return se.resolve(r)}containsKey(e,t){return se.resolve(this.ai.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eN{constructor(e,t){this.ci={},this.overlays={},this.li=new Ch(0),this.hi=!1,this.hi=!0,this.Pi=new oD,this.referenceDelegate=e(this),this.Ti=new dD(this),this.indexManager=new Qj,this.remoteDocumentCache=function(o){return new cD(o)}(r=>this.referenceDelegate.Ii(r)),this.serializer=new Kj(t),this.Ei=new rD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new aD,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ci[e.toKey()];return r||(r=new lD(t,this.referenceDelegate),this.ci[e.toKey()]=r),r}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,t,r){fe("MemoryPersistence","Starting transaction:",e);const o=new hD(this.li.next());return this.referenceDelegate.di(),r(o).next(l=>this.referenceDelegate.Ai(o).next(()=>l)).toPromise().then(l=>(o.raiseOnCommittedEvent(),l))}Ri(e,t){return se.or(Object.values(this.ci).map(r=>()=>r.containsKey(e,t)))}}class hD extends z1{constructor(e){super(),this.currentSequenceNumber=e}}class Pg{constructor(e){this.persistence=e,this.Vi=new Mg,this.mi=null}static fi(e){return new Pg(e)}get gi(){if(this.mi)return this.mi;throw Ee(60996)}addReference(e,t,r){return this.Vi.addReference(r,t),this.gi.delete(r.toString()),se.resolve()}removeReference(e,t,r){return this.Vi.removeReference(r,t),this.gi.add(r.toString()),se.resolve()}markPotentiallyOrphaned(e,t){return this.gi.add(t.toString()),se.resolve()}removeTarget(e,t){this.Vi.Hr(t.targetId).forEach(o=>this.gi.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(l=>this.gi.add(l.toString()))}).next(()=>r.removeTargetData(e,t))}di(){this.mi=new Set}Ai(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.gi,r=>{const o=ve.fromPath(r);return this.pi(e,o).next(l=>{l||t.removeEntry(o,Ne.min())})}).next(()=>(this.mi=null,t.apply(e)))}updateLimboDocument(e,t){return this.pi(e,t).next(r=>{r?this.gi.delete(t.toString()):this.gi.add(t.toString())})}Ii(e){return 0}pi(e,t){return se.or([()=>se.resolve(this.Vi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ri(e,t)])}}class mh{constructor(e,t){this.persistence=e,this.yi=new xa(r=>G1(r.path),(r,o)=>r.isEqual(o)),this.garbageCollector=tD(this,t)}static fi(e,t){return new mh(e,t)}di(){}Ai(e){return se.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}pr(e){const t=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}br(e){let t=0;return this.yr(e,r=>{t++}).next(()=>t)}yr(e,t){return se.forEach(this.yi,(r,o)=>this.Dr(e,r,o).next(l=>l?se.resolve():t(o)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.si(e,h=>this.Dr(e,h,t).next(m=>{m||(r++,l.removeEntry(h,Ne.min()))})).next(()=>l.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.yi.set(t,e.currentSequenceNumber),se.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.yi.set(r,e.currentSequenceNumber),se.resolve()}removeReference(e,t,r){return this.yi.set(r,e.currentSequenceNumber),se.resolve()}updateLimboDocument(e,t){return this.yi.set(t,e.currentSequenceNumber),se.resolve()}Ii(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=$d(e.data.value)),t}Dr(e,t,r){return se.or([()=>this.persistence.Ri(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.yi.get(t);return se.resolve(o!==void 0&&o>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kg{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.ds=r,this.As=o}static Rs(e,t){let r=Fe(),o=Fe();for(const l of t.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new kg(e,t.fromCache,r,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fD{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mD{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return $x()?8:B1(hn())>0?6:4}()}initialize(e,t){this.ys=e,this.indexManager=t,this.Vs=!0}getDocumentsMatchingQuery(e,t,r,o){const l={result:null};return this.ws(e,t).next(h=>{l.result=h}).next(()=>{if(!l.result)return this.bs(e,t,o,r).next(h=>{l.result=h})}).next(()=>{if(l.result)return;const h=new fD;return this.Ss(e,t,h).next(m=>{if(l.result=m,this.fs)return this.Ds(e,t,h,m.size)})}).next(()=>l.result)}Ds(e,t,r,o){return r.documentReadCount<this.gs?(So()<=Le.DEBUG&&fe("QueryEngine","SDK will not create cache indexes for query:",wo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),se.resolve()):(So()<=Le.DEBUG&&fe("QueryEngine","Query:",wo(t),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.ps*o?(So()<=Le.DEBUG&&fe("QueryEngine","The SDK decides to create cache indexes for query:",wo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Us(t))):se.resolve())}ws(e,t){if(HT(t))return se.resolve(null);let r=Us(t);return this.indexManager.getIndexType(e,r).next(o=>o===0?null:(t.limit!==null&&o===1&&(t=Gp(t,null,"F"),r=Us(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(l=>{const h=Fe(...l);return this.ys.getDocuments(e,h).next(m=>this.indexManager.getMinOffset(e,r).next(g=>{const v=this.vs(t,m);return this.Cs(t,v,h,g.readTime)?this.ws(e,Gp(t,null,"F")):this.Fs(e,v,t,g)}))})))}bs(e,t,r,o){return HT(t)||o.isEqual(Ne.min())?se.resolve(null):this.ys.getDocuments(e,r).next(l=>{const h=this.vs(t,l);return this.Cs(t,h,r,o)?se.resolve(null):(So()<=Le.DEBUG&&fe("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),wo(t)),this.Fs(e,h,t,L1(o,Mc)).next(m=>m))})}vs(e,t){let r=new kt(CA(e));return t.forEach((o,l)=>{Oh(e,l)&&(r=r.add(l))}),r}Cs(e,t,r,o){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}Ss(e,t,r){return So()<=Le.DEBUG&&fe("QueryEngine","Using full collection scan to execute query:",wo(t)),this.ys.getDocumentsMatchingQuery(e,t,hr.min(),r)}Fs(e,t,r,o){return this.ys.getDocumentsMatchingQuery(e,r,o).next(l=>(t.forEach(h=>{l=l.insert(h.key,h)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vg="LocalStore",pD=3e8;class gD{constructor(e,t,r,o){this.persistence=e,this.Ms=t,this.serializer=o,this.xs=new mt(Oe),this.Os=new xa(l=>Ig(l),Cg),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(r)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new iD(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.xs))}}function vD(s,e,t,r){return new gD(s,e,t,r)}async function tN(s,e){const t=Ie(s);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.mutationQueue.getAllMutationBatches(r).next(l=>(o=l,t.Ls(e),t.mutationQueue.getAllMutationBatches(r))).next(l=>{const h=[],m=[];let g=Fe();for(const v of o){h.push(v.batchId);for(const _ of v.mutations)g=g.add(_.key)}for(const v of l){m.push(v.batchId);for(const _ of v.mutations)g=g.add(_.key)}return t.localDocuments.getDocuments(r,g).next(v=>({ks:v,removedBatchIds:h,addedBatchIds:m}))})})}function yD(s,e){const t=Ie(s);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),l=t.Bs.newChangeBuffer({trackRemovals:!0});return function(m,g,v,_){const b=v.batch,A=b.keys();let M=se.resolve();return A.forEach(I=>{M=M.next(()=>_.getEntry(g,I)).next(U=>{const x=v.docVersions.get(I);Ge(x!==null,48541),U.version.compareTo(x)<0&&(b.applyToRemoteDocument(U,v),U.isValidDocument()&&(U.setReadTime(v.commitVersion),_.addEntry(U)))})}),M.next(()=>m.mutationQueue.removeMutationBatch(g,b))}(t,r,e,l).next(()=>l.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(m){let g=Fe();for(let v=0;v<m.mutationResults.length;++v)m.mutationResults[v].transformResults.length>0&&(g=g.add(m.batch.mutations[v].key));return g}(e))).next(()=>t.localDocuments.getDocuments(r,o))})}function nN(s){const e=Ie(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ti.getLastRemoteSnapshotVersion(t))}function _D(s,e){const t=Ie(s),r=e.snapshotVersion;let o=t.xs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const h=t.Bs.newChangeBuffer({trackRemovals:!0});o=t.xs;const m=[];e.targetChanges.forEach((_,b)=>{const A=o.get(b);if(!A)return;m.push(t.Ti.removeMatchingKeys(l,_.removedDocuments,b).next(()=>t.Ti.addMatchingKeys(l,_.addedDocuments,b)));let M=A.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(b)!==null?M=M.withResumeToken(sn.EMPTY_BYTE_STRING,Ne.min()).withLastLimboFreeSnapshotVersion(Ne.min()):_.resumeToken.approximateByteSize()>0&&(M=M.withResumeToken(_.resumeToken,r)),o=o.insert(b,M),function(U,x,$){return U.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-U.snapshotVersion.toMicroseconds()>=pD?!0:$.addedDocuments.size+$.modifiedDocuments.size+$.removedDocuments.size>0}(A,M,_)&&m.push(t.Ti.updateTargetData(l,M))});let g=Ai(),v=Fe();if(e.documentUpdates.forEach(_=>{e.resolvedLimboDocuments.has(_)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(l,_))}),m.push(ED(l,h,e.documentUpdates).next(_=>{g=_.qs,v=_.Qs})),!r.isEqual(Ne.min())){const _=t.Ti.getLastRemoteSnapshotVersion(l).next(b=>t.Ti.setTargetsMetadata(l,l.currentSequenceNumber,r));m.push(_)}return se.waitFor(m).next(()=>h.apply(l)).next(()=>t.localDocuments.getLocalViewOfDocuments(l,g,v)).next(()=>g)}).then(l=>(t.xs=o,l))}function ED(s,e,t){let r=Fe(),o=Fe();return t.forEach(l=>r=r.add(l)),e.getEntries(s,r).next(l=>{let h=Ai();return t.forEach((m,g)=>{const v=l.get(m);g.isFoundDocument()!==v.isFoundDocument()&&(o=o.add(m)),g.isNoDocument()&&g.version.isEqual(Ne.min())?(e.removeEntry(m,g.readTime),h=h.insert(m,g)):!v.isValidDocument()||g.version.compareTo(v.version)>0||g.version.compareTo(v.version)===0&&v.hasPendingWrites?(e.addEntry(g),h=h.insert(m,g)):fe(Vg,"Ignoring outdated watch update for ",m,". Current version:",v.version," Watch version:",g.version)}),{qs:h,Qs:o}})}function TD(s,e){const t=Ie(s);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Sg),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function bD(s,e){const t=Ie(s);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.Ti.getTargetData(r,e).next(l=>l?(o=l,se.resolve(o)):t.Ti.allocateTargetId(r).next(h=>(o=new ar(e,h,"TargetPurposeListen",r.currentSequenceNumber),t.Ti.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.xs.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.xs=t.xs.insert(r.targetId,r),t.Os.set(e,r.targetId)),r})}async function Qp(s,e,t){const r=Ie(s),o=r.xs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",l,h=>r.persistence.referenceDelegate.removeTarget(h,o))}catch(h){if(!Xo(h))throw h;fe(Vg,`Failed to update sequence numbers for target ${e}: ${h}`)}r.xs=r.xs.remove(e),r.Os.delete(o.target)}function sb(s,e,t){const r=Ie(s);let o=Ne.min(),l=Fe();return r.persistence.runTransaction("Execute query","readwrite",h=>function(g,v,_){const b=Ie(g),A=b.Os.get(_);return A!==void 0?se.resolve(b.xs.get(A)):b.Ti.getTargetData(v,_)}(r,h,Us(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(h,m.targetId).next(g=>{l=g})}).next(()=>r.Ms.getDocumentsMatchingQuery(h,e,t?o:Ne.min(),t?l:Fe())).next(m=>(AD(r,uj(e),m),{documents:m,$s:l})))}function AD(s,e,t){let r=s.Ns.get(e)||Ne.min();t.forEach((o,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)}),s.Ns.set(e,r)}class ib{constructor(){this.activeTargetIds=gj()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ND{constructor(){this.xo=new ib,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,t,r){this.Oo[e]=t}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new ib,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SD{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rb="ConnectivityMonitor";class ab{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){fe(rb,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){fe(rb,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vd=null;function Xp(){return Vd===null?Vd=function(){return 268435456+Math.round(2147483648*Math.random())}():Vd++,"0x"+Vd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pp="RestConnection",wD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class xD{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Ko=t+"://"+e.host,this.Wo=`projects/${r}/databases/${o}`,this.Go=this.databaseId.database===lh?`project_id=${r}`:`project_id=${r}&database_id=${o}`}zo(e,t,r,o,l){const h=Xp(),m=this.jo(e,t.toUriEncodedString());fe(pp,`Sending RPC '${e}' ${h}:`,m,r);const g={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(g,o,l);const{host:v}=new URL(m),_=Sa(v);return this.Jo(e,m,g,r,_).then(b=>(fe(pp,`Received RPC '${e}' ${h}: `,b),b),b=>{throw Lo(pp,`RPC '${e}' ${h} failed with error: `,b,"url: ",m,"request:",r),b})}Yo(e,t,r,o,l,h){return this.zo(e,t,r,o,l)}Ho(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Yo}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,l)=>e[l]=o),r&&r.headers.forEach((o,l)=>e[l]=o)}jo(e,t){const r=wD[e];return`${this.Ko}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ID{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ln="WebChannelConnection";class CD extends xD{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,o,l){const h=Xp();return new Promise((m,g)=>{const v=new nA;v.setWithCredentials(!0),v.listenOnce(sA.COMPLETE,()=>{try{switch(v.getLastErrorCode()){case Gd.NO_ERROR:const b=v.getResponseJson();fe(ln,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(b)),m(b);break;case Gd.TIMEOUT:fe(ln,`RPC '${e}' ${h} timed out`),g(new he(te.DEADLINE_EXCEEDED,"Request time out"));break;case Gd.HTTP_ERROR:const A=v.getStatus();if(fe(ln,`RPC '${e}' ${h} failed with status:`,A,"response text:",v.getResponseText()),A>0){let M=v.getResponseJson();Array.isArray(M)&&(M=M[0]);const I=M?.error;if(I&&I.status&&I.message){const U=function($){const W=$.toLowerCase().replace(/_/g,"-");return Object.values(te).indexOf(W)>=0?W:te.UNKNOWN}(I.status);g(new he(U,I.message))}else g(new he(te.UNKNOWN,"Server responded with status "+v.getStatus()))}else g(new he(te.UNAVAILABLE,"Connection failed."));break;default:Ee(9055,{h_:e,streamId:h,P_:v.getLastErrorCode(),T_:v.getLastError()})}}finally{fe(ln,`RPC '${e}' ${h} completed.`)}});const _=JSON.stringify(o);fe(ln,`RPC '${e}' ${h} sending request:`,o),v.send(t,"POST",_,r,15)})}I_(e,t,r){const o=Xp(),l=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=aA(),m=rA(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;v!==void 0&&(g.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(g.useFetchStreams=!0),this.Ho(g.initMessageHeaders,t,r),g.encodeInitMessageHeaders=!0;const _=l.join("");fe(ln,`Creating RPC '${e}' stream ${o}: ${_}`,g);const b=h.createWebChannel(_,g);this.E_(b);let A=!1,M=!1;const I=new ID({Zo:x=>{M?fe(ln,`Not sending because RPC '${e}' stream ${o} is closed:`,x):(A||(fe(ln,`Opening RPC '${e}' stream ${o} transport.`),b.open(),A=!0),fe(ln,`RPC '${e}' stream ${o} sending:`,x),b.send(x))},Xo:()=>b.close()}),U=(x,$,W)=>{x.listen($,K=>{try{W(K)}catch(J){setTimeout(()=>{throw J},0)}})};return U(b,pc.EventType.OPEN,()=>{M||(fe(ln,`RPC '${e}' stream ${o} transport opened.`),I.__())}),U(b,pc.EventType.CLOSE,()=>{M||(M=!0,fe(ln,`RPC '${e}' stream ${o} transport closed`),I.u_(),this.d_(b))}),U(b,pc.EventType.ERROR,x=>{M||(M=!0,Lo(ln,`RPC '${e}' stream ${o} transport errored. Name:`,x.name,"Message:",x.message),I.u_(new he(te.UNAVAILABLE,"The operation could not be completed")))}),U(b,pc.EventType.MESSAGE,x=>{var $;if(!M){const W=x.data[0];Ge(!!W,16349);const K=W,J=K?.error||(($=K[0])===null||$===void 0?void 0:$.error);if(J){fe(ln,`RPC '${e}' stream ${o} received error:`,J);const q=J.status;let oe=function(R){const D=xt[R];if(D!==void 0)return zA(D)}(q),O=J.message;oe===void 0&&(oe=te.INTERNAL,O="Unknown error status: "+q+" with message "+J.message),M=!0,I.u_(new he(oe,O)),b.close()}else fe(ln,`RPC '${e}' stream ${o} received:`,W),I.c_(W)}}),U(m,iA.STAT_EVENT,x=>{x.stat===Lp.PROXY?fe(ln,`RPC '${e}' stream ${o} detected buffering proxy`):x.stat===Lp.NOPROXY&&fe(ln,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{I.a_()},0),I}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(t=>t===e)}}function gp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lh(s){return new Oj(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lg{constructor(e,t,r=1e3,o=1.5,l=6e4){this.xi=e,this.timerId=t,this.A_=r,this.R_=o,this.V_=l,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();const t=Math.floor(this.m_+this.w_()),r=Math.max(0,Date.now()-this.g_),o=Math.max(0,t-r);o>0&&fe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.m_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,o,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ob="PersistentStream";class sN{constructor(e,t,r,o,l,h,m,g){this.xi=e,this.S_=r,this.D_=o,this.connection=l,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=m,this.listener=g,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new Lg(e,t)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(e,t){this.U_(),this.K_(),this.x_.cancel(),this.v_++,e!==4?this.x_.reset():t&&t.code===te.RESOURCE_EXHAUSTED?(bi(t.toString()),bi("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):t&&t.code===te.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(t)}W_(){}auth(){this.state=1;const e=this.G_(this.v_),t=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.v_===t&&this.z_(r,o)},r=>{e(()=>{const o=new he(te.UNKNOWN,"Fetching auth token failed: "+r.message);return this.j_(o)})})}z_(e,t){const r=this.G_(this.v_);this.stream=this.H_(e,t),this.stream.e_(()=>{r(()=>this.listener.e_())}),this.stream.n_(()=>{r(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(o=>{r(()=>this.j_(o))}),this.stream.onMessage(o=>{r(()=>++this.M_==1?this.J_(o):this.onNext(o))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(e){return fe(ob,`close with error: ${e}`),this.stream=null,this.close(4,e)}G_(e){return t=>{this.xi.enqueueAndForget(()=>this.v_===e?t():(fe(ob,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class RD extends sN{constructor(e,t,r,o,l,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,h),this.serializer=l}H_(e,t){return this.connection.I_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();const t=Vj(this.serializer,e),r=function(l){if(!("targetChange"in l))return Ne.min();const h=l.targetChange;return h.targetIds&&h.targetIds.length?Ne.min():h.readTime?Un(h.readTime):Ne.min()}(e);return this.listener.Y_(t,r)}Z_(e){const t={};t.database=Yp(this.serializer),t.addTarget=function(l,h){let m;const g=h.target;if(m=Bp(g)?{documents:Uj(l,g)}:{query:Fj(l,g).gt},m.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){m.resumeToken=GA(l,h.resumeToken);const v=$p(l,h.expectedCount);v!==null&&(m.expectedCount=v)}else if(h.snapshotVersion.compareTo(Ne.min())>0){m.readTime=hh(l,h.snapshotVersion.toTimestamp());const v=$p(l,h.expectedCount);v!==null&&(m.expectedCount=v)}return m}(this.serializer,e);const r=zj(this.serializer,e);r&&(t.labels=r),this.Q_(t)}X_(e){const t={};t.database=Yp(this.serializer),t.removeTarget=e,this.Q_(t)}}class jD extends sN{constructor(e,t,r,o,l,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,h),this.serializer=l}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,t){return this.connection.I_("Write",e,t)}J_(e){return Ge(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ge(!e.writeResults||e.writeResults.length===0,55816),this.listener.na()}onNext(e){Ge(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();const t=Lj(e.writeResults,e.commitTime),r=Un(e.commitTime);return this.listener.ra(r,t)}ia(){const e={};e.database=Yp(this.serializer),this.Q_(e)}ta(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>QA(this.serializer,r))};this.Q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DD{}class OD extends DD{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=o,this.sa=!1}oa(){if(this.sa)throw new he(te.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,t,r,o){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,h])=>this.connection.zo(e,Kp(t,r),o,l,h)).catch(l=>{throw l.name==="FirebaseError"?(l.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new he(te.UNKNOWN,l.toString())})}Yo(e,t,r,o,l){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,m])=>this.connection.Yo(e,Kp(t,r),o,h,m,l)).catch(h=>{throw h.name==="FirebaseError"?(h.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new he(te.UNKNOWN,h.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class MD{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.la("Offline")))}set(e){this.Ta(),this._a=0,e==="Online"&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(bi(t),this.ua=!1):fe("OnlineStateTracker",t)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ta="RemoteStore";class PD{constructor(e,t,r,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=l,this.Ra.No(h=>{r.enqueueAndForget(async()=>{Ia(this)&&(fe(Ta,"Restarting streams for network reachability change."),await async function(g){const v=Ie(g);v.da.add(4),await eu(v),v.Va.set("Unknown"),v.da.delete(4),await Uh(v)}(this))})}),this.Va=new MD(r,o)}}async function Uh(s){if(Ia(s))for(const e of s.Aa)await e(!0)}async function eu(s){for(const e of s.Aa)await e(!1)}function iN(s,e){const t=Ie(s);t.Ea.has(e.targetId)||(t.Ea.set(e.targetId,e),zg(t)?qg(t):Zo(t).N_()&&Fg(t,e))}function Ug(s,e){const t=Ie(s),r=Zo(t);t.Ea.delete(e),r.N_()&&rN(t,e),t.Ea.size===0&&(r.N_()?r.k_():Ia(t)&&t.Va.set("Unknown"))}function Fg(s,e){if(s.ma.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ne.min())>0){const t=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Zo(s).Z_(e)}function rN(s,e){s.ma.Ke(e),Zo(s).X_(e)}function qg(s){s.ma=new Cj({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>s.Ea.get(e)||null,Pt:()=>s.datastore.serializer.databaseId}),Zo(s).start(),s.Va.ca()}function zg(s){return Ia(s)&&!Zo(s).O_()&&s.Ea.size>0}function Ia(s){return Ie(s).da.size===0}function aN(s){s.ma=void 0}async function kD(s){s.Va.set("Online")}async function VD(s){s.Ea.forEach((e,t)=>{Fg(s,e)})}async function LD(s,e){aN(s),zg(s)?(s.Va.Pa(e),qg(s)):s.Va.set("Unknown")}async function UD(s,e,t){if(s.Va.set("Online"),e instanceof HA&&e.state===2&&e.cause)try{await async function(o,l){const h=l.cause;for(const m of l.targetIds)o.Ea.has(m)&&(await o.remoteSyncer.rejectListen(m,h),o.Ea.delete(m),o.ma.removeTarget(m))}(s,e)}catch(r){fe(Ta,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await ph(s,r)}else if(e instanceof Qd?s.ma.Xe(e):e instanceof BA?s.ma.ot(e):s.ma.nt(e),!t.isEqual(Ne.min()))try{const r=await nN(s.localStore);t.compareTo(r)>=0&&await function(l,h){const m=l.ma.It(h);return m.targetChanges.forEach((g,v)=>{if(g.resumeToken.approximateByteSize()>0){const _=l.Ea.get(v);_&&l.Ea.set(v,_.withResumeToken(g.resumeToken,h))}}),m.targetMismatches.forEach((g,v)=>{const _=l.Ea.get(g);if(!_)return;l.Ea.set(g,_.withResumeToken(sn.EMPTY_BYTE_STRING,_.snapshotVersion)),rN(l,g);const b=new ar(_.target,g,v,_.sequenceNumber);Fg(l,b)}),l.remoteSyncer.applyRemoteEvent(m)}(s,t)}catch(r){fe(Ta,"Failed to raise snapshot:",r),await ph(s,r)}}async function ph(s,e,t){if(!Xo(e))throw e;s.da.add(1),await eu(s),s.Va.set("Offline"),t||(t=()=>nN(s.localStore)),s.asyncQueue.enqueueRetryable(async()=>{fe(Ta,"Retrying IndexedDB access"),await t(),s.da.delete(1),await Uh(s)})}function oN(s,e){return e().catch(t=>ph(s,t,e))}async function Fh(s){const e=Ie(s),t=gr(e);let r=e.Ia.length>0?e.Ia[e.Ia.length-1].batchId:Sg;for(;FD(e);)try{const o=await TD(e.localStore,r);if(o===null){e.Ia.length===0&&t.k_();break}r=o.batchId,qD(e,o)}catch(o){await ph(e,o)}lN(e)&&cN(e)}function FD(s){return Ia(s)&&s.Ia.length<10}function qD(s,e){s.Ia.push(e);const t=gr(s);t.N_()&&t.ea&&t.ta(e.mutations)}function lN(s){return Ia(s)&&!gr(s).O_()&&s.Ia.length>0}function cN(s){gr(s).start()}async function zD(s){gr(s).ia()}async function BD(s){const e=gr(s);for(const t of s.Ia)e.ta(t.mutations)}async function HD(s,e,t){const r=s.Ia.shift(),o=jg.from(r,e,t);await oN(s,()=>s.remoteSyncer.applySuccessfulWrite(o)),await Fh(s)}async function GD(s,e){e&&gr(s).ea&&await async function(r,o){if(function(h){return qA(h)&&h!==te.ABORTED}(o.code)){const l=r.Ia.shift();gr(r).L_(),await oN(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,o)),await Fh(r)}}(s,e),lN(s)&&cN(s)}async function lb(s,e){const t=Ie(s);t.asyncQueue.verifyOperationInProgress(),fe(Ta,"RemoteStore received new credentials");const r=Ia(t);t.da.add(3),await eu(t),r&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.da.delete(3),await Uh(t)}async function $D(s,e){const t=Ie(s);e?(t.da.delete(2),await Uh(t)):e||(t.da.add(2),await eu(t),t.Va.set("Unknown"))}function Zo(s){return s.fa||(s.fa=function(t,r,o){const l=Ie(t);return l.oa(),new RD(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)}(s.datastore,s.asyncQueue,{e_:kD.bind(null,s),n_:VD.bind(null,s),i_:LD.bind(null,s),Y_:UD.bind(null,s)}),s.Aa.push(async e=>{e?(s.fa.L_(),zg(s)?qg(s):s.Va.set("Unknown")):(await s.fa.stop(),aN(s))})),s.fa}function gr(s){return s.ga||(s.ga=function(t,r,o){const l=Ie(t);return l.oa(),new jD(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)}(s.datastore,s.asyncQueue,{e_:()=>Promise.resolve(),n_:zD.bind(null,s),i_:GD.bind(null,s),na:BD.bind(null,s),ra:HD.bind(null,s)}),s.Aa.push(async e=>{e?(s.ga.L_(),await Fh(s)):(await s.ga.stop(),s.Ia.length>0&&(fe(Ta,`Stopping write stream with ${s.Ia.length} pending writes`),s.Ia=[]))})),s.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bg{constructor(e,t,r,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=l,this.deferred=new Ls,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(h=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,o,l){const h=Date.now()+r,m=new Bg(e,t,h,o,l);return m.start(r),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new he(te.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Hg(s,e){if(bi("AsyncQueue",`${e}: ${s}`),Xo(s))return new he(te.UNAVAILABLE,`${e}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{static emptySet(e){return new Po(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||ve.comparator(t.key,r.key):(t,r)=>ve.comparator(t.key,r.key),this.keyedMap=gc(),this.sortedSet=new mt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Po)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=r.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Po;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cb{constructor(){this.pa=new mt(ve.comparator)}track(e){const t=e.doc.key,r=this.pa.get(t);r?e.type!==0&&r.type===3?this.pa=this.pa.insert(t,e):e.type===3&&r.type!==1?this.pa=this.pa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.pa=this.pa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.pa=this.pa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.pa=this.pa.remove(t):e.type===1&&r.type===2?this.pa=this.pa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.pa=this.pa.insert(t,{type:2,doc:e.doc}):Ee(63341,{Vt:e,ya:r}):this.pa=this.pa.insert(t,e)}wa(){const e=[];return this.pa.inorderTraversal((t,r)=>{e.push(r)}),e}}class Bo{constructor(e,t,r,o,l,h,m,g,v){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=l,this.fromCache=h,this.syncStateChanged=m,this.excludesMetadataChanges=g,this.hasCachedResults=v}static fromInitialDocuments(e,t,r,o,l){const h=[];return t.forEach(m=>{h.push({type:0,doc:m})}),new Bo(e,t,Po.emptySet(t),h,r,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Dh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KD{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}}class YD{constructor(){this.queries=ub(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const o=Ie(t),l=o.queries;o.queries=ub(),l.forEach((h,m)=>{for(const g of m.Sa)g.onError(r)})})(this,new he(te.ABORTED,"Firestore shutting down"))}}function ub(){return new xa(s=>IA(s),Dh)}async function Gg(s,e){const t=Ie(s);let r=3;const o=e.query;let l=t.queries.get(o);l?!l.Da()&&e.va()&&(r=2):(l=new KD,r=e.va()?0:1);try{switch(r){case 0:l.ba=await t.onListen(o,!0);break;case 1:l.ba=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(h){const m=Hg(h,`Initialization of query '${wo(e.query)}' failed`);return void e.onError(m)}t.queries.set(o,l),l.Sa.push(e),e.Fa(t.onlineState),l.ba&&e.Ma(l.ba)&&Kg(t)}async function $g(s,e){const t=Ie(s),r=e.query;let o=3;const l=t.queries.get(r);if(l){const h=l.Sa.indexOf(e);h>=0&&(l.Sa.splice(h,1),l.Sa.length===0?o=e.va()?0:1:!l.Da()&&e.va()&&(o=2))}switch(o){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function QD(s,e){const t=Ie(s);let r=!1;for(const o of e){const l=o.query,h=t.queries.get(l);if(h){for(const m of h.Sa)m.Ma(o)&&(r=!0);h.ba=o}}r&&Kg(t)}function XD(s,e,t){const r=Ie(s),o=r.queries.get(e);if(o)for(const l of o.Sa)l.onError(t);r.queries.delete(e)}function Kg(s){s.Ca.forEach(e=>{e.next()})}var Wp,db;(db=Wp||(Wp={})).xa="default",db.Cache="cache";class Yg{constructor(e,t,r){this.query=e,this.Oa=t,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=r||{}}Ma(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)o.type!==3&&r.push(o);e=new Bo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Na?this.La(e)&&(this.Oa.next(e),t=!0):this.ka(e,this.onlineState)&&(this.qa(e),t=!0),this.Ba=e,t}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let t=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),t=!0),t}ka(e,t){if(!e.fromCache||!this.va())return!0;const r=t!=="Offline";return(!this.options.Qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}La(e){if(e.docChanges.length>0)return!0;const t=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}qa(e){e=Bo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==Wp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uN{constructor(e){this.key=e}}class dN{constructor(e){this.key=e}}class WD{constructor(e,t){this.query=e,this.Ha=t,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Fe(),this.mutatedKeys=Fe(),this.Za=CA(e),this.Xa=new Po(this.Za)}get eu(){return this.Ha}tu(e,t){const r=t?t.nu:new cb,o=t?t.Xa:this.Xa;let l=t?t.mutatedKeys:this.mutatedKeys,h=o,m=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,v=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((_,b)=>{const A=o.get(_),M=Oh(this.query,b)?b:null,I=!!A&&this.mutatedKeys.has(A.key),U=!!M&&(M.hasLocalMutations||this.mutatedKeys.has(M.key)&&M.hasCommittedMutations);let x=!1;A&&M?A.data.isEqual(M.data)?I!==U&&(r.track({type:3,doc:M}),x=!0):this.ru(A,M)||(r.track({type:2,doc:M}),x=!0,(g&&this.Za(M,g)>0||v&&this.Za(M,v)<0)&&(m=!0)):!A&&M?(r.track({type:0,doc:M}),x=!0):A&&!M&&(r.track({type:1,doc:A}),x=!0,(g||v)&&(m=!0)),x&&(M?(h=h.add(M),l=U?l.add(_):l.delete(_)):(h=h.delete(_),l=l.delete(_)))}),this.query.limit!==null)for(;h.size>this.query.limit;){const _=this.query.limitType==="F"?h.last():h.first();h=h.delete(_.key),l=l.delete(_.key),r.track({type:1,doc:_})}return{Xa:h,nu:r,Cs:m,mutatedKeys:l}}ru(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,o){const l=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;const h=e.nu.wa();h.sort((_,b)=>function(M,I){const U=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ee(20277,{Vt:x})}};return U(M)-U(I)}(_.type,b.type)||this.Za(_.doc,b.doc)),this.iu(r),o=o!=null&&o;const m=t&&!o?this.su():[],g=this.Ya.size===0&&this.current&&!o?1:0,v=g!==this.Ja;return this.Ja=g,h.length!==0||v?{snapshot:new Bo(this.query,e.Xa,l,h,e.mutatedKeys,g===0,v,!1,!!r&&r.resumeToken.approximateByteSize()>0),ou:m}:{ou:m}}Fa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new cb,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}su(){if(!this.current)return[];const e=this.Ya;this.Ya=Fe(),this.Xa.forEach(r=>{this._u(r.key)&&(this.Ya=this.Ya.add(r.key))});const t=[];return e.forEach(r=>{this.Ya.has(r)||t.push(new dN(r))}),this.Ya.forEach(r=>{e.has(r)||t.push(new uN(r))}),t}au(e){this.Ha=e.$s,this.Ya=Fe();const t=this.tu(e.documents);return this.applyChanges(t,!0)}uu(){return Bo.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const Qg="SyncEngine";class ZD{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class JD{constructor(e){this.key=e,this.cu=!1}}class eO{constructor(e,t,r,o,l,h){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=h,this.lu={},this.hu=new xa(m=>IA(m),Dh),this.Pu=new Map,this.Tu=new Set,this.Iu=new mt(ve.comparator),this.Eu=new Map,this.du=new Mg,this.Au={},this.Ru=new Map,this.Vu=zo.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function tO(s,e,t=!0){const r=vN(s);let o;const l=r.hu.get(e);return l?(r.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.uu()):o=await hN(r,e,t,!0),o}async function nO(s,e){const t=vN(s);await hN(t,e,!0,!1)}async function hN(s,e,t,r){const o=await bD(s.localStore,Us(e)),l=o.targetId,h=s.sharedClientState.addLocalQueryTarget(l,t);let m;return r&&(m=await sO(s,e,l,h==="current",o.resumeToken)),s.isPrimaryClient&&t&&iN(s.remoteStore,o),m}async function sO(s,e,t,r,o){s.fu=(b,A,M)=>async function(U,x,$,W){let K=x.view.tu($);K.Cs&&(K=await sb(U.localStore,x.query,!1).then(({documents:O})=>x.view.tu(O,K)));const J=W&&W.targetChanges.get(x.targetId),q=W&&W.targetMismatches.get(x.targetId)!=null,oe=x.view.applyChanges(K,U.isPrimaryClient,J,q);return fb(U,x.targetId,oe.ou),oe.snapshot}(s,b,A,M);const l=await sb(s.localStore,e,!0),h=new WD(e,l.$s),m=h.tu(l.documents),g=Jc.createSynthesizedTargetChangeForCurrentChange(t,r&&s.onlineState!=="Offline",o),v=h.applyChanges(m,s.isPrimaryClient,g);fb(s,t,v.ou);const _=new ZD(e,t,h);return s.hu.set(e,_),s.Pu.has(t)?s.Pu.get(t).push(e):s.Pu.set(t,[e]),v.snapshot}async function iO(s,e,t){const r=Ie(s),o=r.hu.get(e),l=r.Pu.get(o.targetId);if(l.length>1)return r.Pu.set(o.targetId,l.filter(h=>!Dh(h,e))),void r.hu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await Qp(r.localStore,o.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(o.targetId),t&&Ug(r.remoteStore,o.targetId),Zp(r,o.targetId)}).catch(Qo)):(Zp(r,o.targetId),await Qp(r.localStore,o.targetId,!0))}async function rO(s,e){const t=Ie(s),r=t.hu.get(e),o=t.Pu.get(r.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Ug(t.remoteStore,r.targetId))}async function aO(s,e,t){const r=fO(s);try{const o=await function(h,m){const g=Ie(h),v=Pt.now(),_=m.reduce((M,I)=>M.add(I.key),Fe());let b,A;return g.persistence.runTransaction("Locally write mutations","readwrite",M=>{let I=Ai(),U=Fe();return g.Bs.getEntries(M,_).next(x=>{I=x,I.forEach(($,W)=>{W.isValidDocument()||(U=U.add($))})}).next(()=>g.localDocuments.getOverlayedDocuments(M,I)).next(x=>{b=x;const $=[];for(const W of m){const K=Nj(W,b.get(W.key).overlayedDocument);K!=null&&$.push(new wr(W.key,K,EA(K.value.mapValue),tn.exists(!0)))}return g.mutationQueue.addMutationBatch(M,v,$,m)}).next(x=>{A=x;const $=x.applyToLocalDocumentSet(b,U);return g.documentOverlayCache.saveOverlays(M,x.batchId,$)})}).then(()=>({batchId:A.batchId,changes:jA(b)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(h,m,g){let v=h.Au[h.currentUser.toKey()];v||(v=new mt(Oe)),v=v.insert(m,g),h.Au[h.currentUser.toKey()]=v}(r,o.batchId,t),await tu(r,o.changes),await Fh(r.remoteStore)}catch(o){const l=Hg(o,"Failed to persist write");t.reject(l)}}async function fN(s,e){const t=Ie(s);try{const r=await _D(t.localStore,e);e.targetChanges.forEach((o,l)=>{const h=t.Eu.get(l);h&&(Ge(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.cu=!0:o.modifiedDocuments.size>0?Ge(h.cu,14607):o.removedDocuments.size>0&&(Ge(h.cu,42227),h.cu=!1))}),await tu(t,r,e)}catch(r){await Qo(r)}}function hb(s,e,t){const r=Ie(s);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const o=[];r.hu.forEach((l,h)=>{const m=h.view.Fa(e);m.snapshot&&o.push(m.snapshot)}),function(h,m){const g=Ie(h);g.onlineState=m;let v=!1;g.queries.forEach((_,b)=>{for(const A of b.Sa)A.Fa(m)&&(v=!0)}),v&&Kg(g)}(r.eventManager,e),o.length&&r.lu.Y_(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function oO(s,e,t){const r=Ie(s);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.Eu.get(e),l=o&&o.key;if(l){let h=new mt(ve.comparator);h=h.insert(l,Gt.newNoDocument(l,Ne.min()));const m=Fe().add(l),g=new Vh(Ne.min(),new Map,new mt(Oe),h,m);await fN(r,g),r.Iu=r.Iu.remove(l),r.Eu.delete(e),Xg(r)}else await Qp(r.localStore,e,!1).then(()=>Zp(r,e,t)).catch(Qo)}async function lO(s,e){const t=Ie(s),r=e.batch.batchId;try{const o=await yD(t.localStore,e);pN(t,r,null),mN(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await tu(t,o)}catch(o){await Qo(o)}}async function cO(s,e,t){const r=Ie(s);try{const o=await function(h,m){const g=Ie(h);return g.persistence.runTransaction("Reject batch","readwrite-primary",v=>{let _;return g.mutationQueue.lookupMutationBatch(v,m).next(b=>(Ge(b!==null,37113),_=b.keys(),g.mutationQueue.removeMutationBatch(v,b))).next(()=>g.mutationQueue.performConsistencyCheck(v)).next(()=>g.documentOverlayCache.removeOverlaysForBatchId(v,_,m)).next(()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,_)).next(()=>g.localDocuments.getDocuments(v,_))})}(r.localStore,e);pN(r,e,t),mN(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await tu(r,o)}catch(o){await Qo(o)}}function mN(s,e){(s.Ru.get(e)||[]).forEach(t=>{t.resolve()}),s.Ru.delete(e)}function pN(s,e,t){const r=Ie(s);let o=r.Au[r.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),r.Au[r.currentUser.toKey()]=o}}function Zp(s,e,t=null){s.sharedClientState.removeLocalQueryTarget(e);for(const r of s.Pu.get(e))s.hu.delete(r),t&&s.lu.gu(r,t);s.Pu.delete(e),s.isPrimaryClient&&s.du.Hr(e).forEach(r=>{s.du.containsKey(r)||gN(s,r)})}function gN(s,e){s.Tu.delete(e.path.canonicalString());const t=s.Iu.get(e);t!==null&&(Ug(s.remoteStore,t),s.Iu=s.Iu.remove(e),s.Eu.delete(t),Xg(s))}function fb(s,e,t){for(const r of t)r instanceof uN?(s.du.addReference(r.key,e),uO(s,r)):r instanceof dN?(fe(Qg,"Document no longer in limbo: "+r.key),s.du.removeReference(r.key,e),s.du.containsKey(r.key)||gN(s,r.key)):Ee(19791,{pu:r})}function uO(s,e){const t=e.key,r=t.path.canonicalString();s.Iu.get(t)||s.Tu.has(r)||(fe(Qg,"New document in limbo: "+t),s.Tu.add(r),Xg(s))}function Xg(s){for(;s.Tu.size>0&&s.Iu.size<s.maxConcurrentLimboResolutions;){const e=s.Tu.values().next().value;s.Tu.delete(e);const t=new ve(it.fromString(e)),r=s.Vu.next();s.Eu.set(r,new JD(t)),s.Iu=s.Iu.insert(t,r),iN(s.remoteStore,new ar(Us(jh(t.path)),r,"TargetPurposeLimboResolution",Ch.le))}}async function tu(s,e,t){const r=Ie(s),o=[],l=[],h=[];r.hu.isEmpty()||(r.hu.forEach((m,g)=>{h.push(r.fu(g,e,t).then(v=>{var _;if((v||t)&&r.isPrimaryClient){const b=v?!v.fromCache:(_=t?.targetChanges.get(g.targetId))===null||_===void 0?void 0:_.current;r.sharedClientState.updateQueryState(g.targetId,b?"current":"not-current")}if(v){o.push(v);const b=kg.Rs(g.targetId,v);l.push(b)}}))}),await Promise.all(h),r.lu.Y_(o),await async function(g,v){const _=Ie(g);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",b=>se.forEach(v,A=>se.forEach(A.ds,M=>_.persistence.referenceDelegate.addReference(b,A.targetId,M)).next(()=>se.forEach(A.As,M=>_.persistence.referenceDelegate.removeReference(b,A.targetId,M)))))}catch(b){if(!Xo(b))throw b;fe(Vg,"Failed to update sequence numbers: "+b)}for(const b of v){const A=b.targetId;if(!b.fromCache){const M=_.xs.get(A),I=M.snapshotVersion,U=M.withLastLimboFreeSnapshotVersion(I);_.xs=_.xs.insert(A,U)}}}(r.localStore,l))}async function dO(s,e){const t=Ie(s);if(!t.currentUser.isEqual(e)){fe(Qg,"User change. New user:",e.toKey());const r=await tN(t.localStore,e);t.currentUser=e,function(l,h){l.Ru.forEach(m=>{m.forEach(g=>{g.reject(new he(te.CANCELLED,h))})}),l.Ru.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await tu(t,r.ks)}}function hO(s,e){const t=Ie(s),r=t.Eu.get(e);if(r&&r.cu)return Fe().add(r.key);{let o=Fe();const l=t.Pu.get(e);if(!l)return o;for(const h of l){const m=t.hu.get(h);o=o.unionWith(m.view.eu)}return o}}function vN(s){const e=Ie(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=fN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=hO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=oO.bind(null,e),e.lu.Y_=QD.bind(null,e.eventManager),e.lu.gu=XD.bind(null,e.eventManager),e}function fO(s){const e=Ie(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=lO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=cO.bind(null,e),e}class gh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Lh(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Su(e),await this.persistence.start(),this.localStore=this.Du(e),this.gcScheduler=this.vu(e,this.localStore),this.indexBackfillerScheduler=this.Cu(e,this.localStore)}vu(e,t){return null}Cu(e,t){return null}Du(e){return vD(this.persistence,new mD,e.initialUser,this.serializer)}Su(e){return new eN(Pg.fi,this.serializer)}bu(e){return new ND}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}gh.provider={build:()=>new gh};class mO extends gh{constructor(e){super(),this.cacheSizeBytes=e}vu(e,t){Ge(this.persistence.referenceDelegate instanceof mh,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new Jj(r,e.asyncQueue,t)}Su(e){const t=this.cacheSizeBytes!==void 0?An.withCacheSize(this.cacheSizeBytes):An.DEFAULT;return new eN(r=>mh.fi(r,t),this.serializer)}}class Jp{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>hb(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=dO.bind(null,this.syncEngine),await $D(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new YD}()}createDatastore(e){const t=Lh(e.databaseInfo.databaseId),r=function(l){return new CD(l)}(e.databaseInfo);return function(l,h,m,g){return new OD(l,h,m,g)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,o,l,h,m){return new PD(r,o,l,h,m)}(this.localStore,this.datastore,e.asyncQueue,t=>hb(this.syncEngine,t,0),function(){return ab.C()?new ab:new SD}())}createSyncEngine(e,t){return function(o,l,h,m,g,v,_){const b=new eO(o,l,h,m,g,v);return _&&(b.mu=!0),b}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(o){const l=Ie(o);fe(Ta,"RemoteStore shutting down."),l.da.add(5),await eu(l),l.Ra.shutdown(),l.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Jp.provider={build:()=>new Jp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):bi("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pO{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new he(te.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(o,l){const h=Ie(o),m={documents:l.map(b=>fh(h.serializer,b))},g=await h.Yo("BatchGetDocuments",h.serializer.databaseId,it.emptyPath(),m,l.length),v=new Map;g.forEach(b=>{const A=kj(h.serializer,b);v.set(A.key.toString(),A)});const _=[];return l.forEach(b=>{const A=v.get(b.toString());Ge(!!A,55234,{key:b}),_.push(A)}),_}(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new kh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{const o=ve.fromPath(r);this.mutations.push(new FA(o,this.precondition(o)))}),await async function(r,o){const l=Ie(r),h={writes:o.map(m=>QA(l.serializer,m))};await l.zo("Commit",l.serializer.databaseId,it.emptyPath(),h)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Ee(50498,{Uu:e.constructor.name});t=Ne.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new he(te.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Ne.min())?tn.exists(!1):tn.updateTime(t):tn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ne.min()))throw new he(te.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return tn.updateTime(t)}return tn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gO{constructor(e,t,r,o,l){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=o,this.deferred=l,this.Ku=r.maxAttempts,this.x_=new Lg(this.asyncQueue,"transaction_retry")}Wu(){this.Ku-=1,this.Gu()}Gu(){this.x_.y_(async()=>{const e=new pO(this.datastore),t=this.zu(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(o=>{this.ju(o)}))}).catch(r=>{this.ju(r)})})}zu(e){try{const t=this.updateFunction(e);return!Wc(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}ju(e){this.Ku>0&&this.Hu(e)?(this.Ku-=1,this.asyncQueue.enqueueAndForget(()=>(this.Gu(),Promise.resolve()))):this.deferred.reject(e)}Hu(e){if(e.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!qA(t)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vr="FirestoreClient";class vO{constructor(e,t,r,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=cn.UNAUTHENTICATED,this.clientId=uA.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(r,async h=>{fe(vr,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h}),this.appCheckCredentials.start(r,h=>(fe(vr,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ls;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Hg(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function vp(s,e){s.asyncQueue.verifyOperationInProgress(),fe(vr,"Initializing OfflineComponentProvider");const t=s.configuration;await e.initialize(t);let r=t.initialUser;s.setCredentialChangeListener(async o=>{r.isEqual(o)||(await tN(e.localStore,o),r=o)}),e.persistence.setDatabaseDeletedListener(()=>s.terminate()),s._offlineComponents=e}async function mb(s,e){s.asyncQueue.verifyOperationInProgress();const t=await yO(s);fe(vr,"Initializing OnlineComponentProvider"),await e.initialize(t,s.configuration),s.setCredentialChangeListener(r=>lb(e.remoteStore,r)),s.setAppCheckTokenChangeListener((r,o)=>lb(e.remoteStore,o)),s._onlineComponents=e}async function yO(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){fe(vr,"Using user provided OfflineComponentProvider");try{await vp(s,s._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(o){return o.name==="FirebaseError"?o.code===te.FAILED_PRECONDITION||o.code===te.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(t))throw t;Lo("Error using user provided cache. Falling back to memory cache: "+t),await vp(s,new gh)}}else fe(vr,"Using default OfflineComponentProvider"),await vp(s,new mO(void 0));return s._offlineComponents}async function Zg(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(fe(vr,"Using user provided OnlineComponentProvider"),await mb(s,s._uninitializedComponentsProvider._online)):(fe(vr,"Using default OnlineComponentProvider"),await mb(s,new Jp))),s._onlineComponents}function _O(s){return Zg(s).then(e=>e.syncEngine)}function EO(s){return Zg(s).then(e=>e.datastore)}async function vh(s){const e=await Zg(s),t=e.eventManager;return t.onListen=tO.bind(null,e.syncEngine),t.onUnlisten=iO.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=nO.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=rO.bind(null,e.syncEngine),t}function TO(s,e,t={}){const r=new Ls;return s.asyncQueue.enqueueAndForget(async()=>function(l,h,m,g,v){const _=new Wg({next:A=>{_.xu(),h.enqueueAndForget(()=>$g(l,b));const M=A.docs.has(m);!M&&A.fromCache?v.reject(new he(te.UNAVAILABLE,"Failed to get document because the client is offline.")):M&&A.fromCache&&g&&g.source==="server"?v.reject(new he(te.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(A)},error:A=>v.reject(A)}),b=new Yg(jh(m.path),_,{includeMetadataChanges:!0,Qa:!0});return Gg(l,b)}(await vh(s),s.asyncQueue,e,t,r)),r.promise}function bO(s,e,t={}){const r=new Ls;return s.asyncQueue.enqueueAndForget(async()=>function(l,h,m,g,v){const _=new Wg({next:A=>{_.xu(),h.enqueueAndForget(()=>$g(l,b)),A.fromCache&&g.source==="server"?v.reject(new he(te.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(A)},error:A=>v.reject(A)}),b=new Yg(m,_,{includeMetadataChanges:!0,Qa:!0});return Gg(l,b)}(await vh(s),s.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yN(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pb=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _N(s,e,t){if(!t)throw new he(te.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function AO(s,e,t,r){if(e===!0&&r===!0)throw new he(te.INVALID_ARGUMENT,`${s} and ${t} cannot be used together.`)}function gb(s){if(!ve.isDocumentKey(s))throw new he(te.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function vb(s){if(ve.isDocumentKey(s))throw new he(te.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function qh(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":Ee(12329,{type:typeof s})}function _n(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new he(te.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=qh(s);throw new he(te.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EN="firestore.googleapis.com",yb=!0;class _b{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new he(te.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=EN,this.ssl=yb}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:yb;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=JA;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Wj)throw new he(te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}AO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=yN((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new he(te.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new he(te.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new he(te.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,o){return r.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class zh{constructor(e,t,r,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new _b({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new he(te.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new he(te.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new _b(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new C1;switch(r.type){case"firstParty":return new O1(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new he(te.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=pb.get(t);r&&(fe("ComponentProvider","Removing Datastore"),pb.delete(t),r.terminate())}(this),Promise.resolve()}}function NO(s,e,t,r={}){var o;s=_n(s,zh);const l=Sa(e),h=s._getSettings(),m=Object.assign(Object.assign({},h),{emulatorOptions:s._getEmulatorOptions()}),g=`${e}:${t}`;l&&(lg(`https://${g}`),cg("Firestore",!0)),h.host!==EN&&h.host!==g&&Lo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const v=Object.assign(Object.assign({},h),{host:g,ssl:l,emulatorOptions:r});if(!dr(v,m)&&(s._setSettings(v),r.mockUserToken)){let _,b;if(typeof r.mockUserToken=="string")_=r.mockUserToken,b=cn.MOCK_USER;else{_=f0(r.mockUserToken,(o=s._app)===null||o===void 0?void 0:o.options.projectId);const A=r.mockUserToken.sub||r.mockUserToken.user_id;if(!A)throw new he(te.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");b=new cn(A)}s._authCredentials=new R1(new lA(_,b))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new xr(this.firestore,e,this._query)}}class nn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ur(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new nn(this.firestore,e,this._key)}}class ur extends xr{constructor(e,t,r){super(e,t,jh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new nn(this.firestore,null,new ve(e))}withConverter(e){return new ur(this.firestore,e,this._path)}}function wn(s,e,...t){if(s=lt(s),_N("collection","path",e),s instanceof zh){const r=it.fromString(e,...t);return vb(r),new ur(s,null,r)}{if(!(s instanceof nn||s instanceof ur))throw new he(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(it.fromString(e,...t));return vb(r),new ur(s.firestore,null,r)}}function xn(s,e,...t){if(s=lt(s),arguments.length===1&&(e=uA.newId()),_N("doc","path",e),s instanceof zh){const r=it.fromString(e,...t);return gb(r),new nn(s,null,new ve(r))}{if(!(s instanceof nn||s instanceof ur))throw new he(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(it.fromString(e,...t));return gb(r),new nn(s.firestore,s instanceof ur?s.converter:null,new ve(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eb="AsyncQueue";class Tb{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new Lg(this,"async_queue_retry"),this.rc=()=>{const r=gp();r&&fe(Eb,"Visibility state changed to "+r.visibilityState),this.x_.b_()},this.sc=e;const t=gp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;const t=gp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});const t=new Ls;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!Xo(e))throw e;fe(Eb,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(e){const t=this.sc.then(()=>(this.ec=!0,e().catch(r=>{throw this.Xu=r,this.ec=!1,bi("INTERNAL UNHANDLED ERROR: ",bb(r)),r}).then(r=>(this.ec=!1,r))));return this.sc=t,t}enqueueAfterDelay(e,t,r){this.oc(),this.nc.indexOf(e)>-1&&(t=0);const o=Bg.createAndSchedule(this,e,t,r,l=>this.uc(l));return this.Zu.push(o),o}oc(){this.Xu&&Ee(47125,{cc:bb(this.Xu)})}verifyOperationInProgress(){}async lc(){let e;do e=this.sc,await e;while(e!==this.sc)}hc(e){for(const t of this.Zu)if(t.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Zu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){const t=this.Zu.indexOf(e);this.Zu.splice(t,1)}}function bb(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ab(s){return function(t,r){if(typeof t!="object"||t===null)return!1;const o=t;for(const l of r)if(l in o&&typeof o[l]=="function")return!0;return!1}(s,["next","error","complete"])}class qs extends zh{constructor(e,t,r,o){super(e,t,r,o),this.type="firestore",this._queue=new Tb,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Tb(e),this._firestoreClient=void 0,await e}}}function SO(s,e){const t=typeof s=="object"?s:$c(),r=typeof s=="string"?s:lh,o=Ni(t,"firestore").getImmediate({identifier:r});if(!o._initialized){const l=u0("firestore");l&&NO(o,...l)}return o}function nu(s){if(s._terminated)throw new he(te.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||wO(s),s._firestoreClient}function wO(s){var e,t,r;const o=s._freezeSettings(),l=function(m,g,v,_){return new Y1(m,g,v,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,yN(_.experimentalLongPollingOptions),_.useFetchStreams,_.isUsingEmulator)}(s._databaseId,((e=s._app)===null||e===void 0?void 0:e.options.appId)||"",s._persistenceKey,o);s._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=o.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(s._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),s._firestoreClient=new vO(s._authCredentials,s._appCheckCredentials,s._queue,l,s._componentsProvider&&function(m){const g=m?._online.build();return{_offline:m?._offline.build(g),_online:g}}(s._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ba(sn.fromBase64String(e))}catch(t){throw new he(te.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ba(sn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new he(te.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new en(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jg{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new he(te.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new he(te.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Oe(this._lat,e._lat)||Oe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ev{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,o){if(r.length!==o.length)return!1;for(let l=0;l<r.length;++l)if(r[l]!==o[l])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xO=/^__.*__$/;class IO{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new wr(e,this.data,this.fieldMask,t,this.fieldTransforms):new Zc(e,this.data,t,this.fieldTransforms)}}class TN{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new wr(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function bN(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ee(40011,{Ic:s})}}class tv{constructor(e,t,r,o,l,h){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=o,l===void 0&&this.Ec(),this.fieldTransforms=l||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new tv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.dc({path:r,Rc:!1});return o.Vc(e),o}mc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.dc({path:r,Rc:!1});return o.Ec(),o}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return yh(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(e.length===0)throw this.gc("Document fields must not be empty");if(bN(this.Ic)&&xO.test(e))throw this.gc('Document fields cannot begin and end with "__"')}}class CO{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Lh(e)}bc(e,t,r,o=!1){return new tv({Ic:e,methodName:t,wc:r,path:en.emptyPath(),Rc:!1,yc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function iu(s){const e=s._freezeSettings(),t=Lh(s._databaseId);return new CO(s._databaseId,!!e.ignoreUndefinedProperties,t)}function nv(s,e,t,r,o,l={}){const h=s.bc(l.merge||l.mergeFields?2:0,e,t,o);iv("Data must be an object, but it was:",h,r);const m=SN(r,h);let g,v;if(l.merge)g=new Vn(h.fieldMask),v=h.fieldTransforms;else if(l.mergeFields){const _=[];for(const b of l.mergeFields){const A=eg(e,b,t);if(!h.contains(A))throw new he(te.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);xN(_,A)||_.push(A)}g=new Vn(_),v=h.fieldTransforms.filter(b=>g.covers(b.field))}else g=null,v=h.fieldTransforms;return new IO(new yn(m),g,v)}class Hh extends Bh{_toFieldTransform(e){if(e.Ic!==2)throw e.Ic===1?e.gc(`${this._methodName}() can only appear at the top level of your update data`):e.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Hh}}class sv extends Bh{_toFieldTransform(e){return new Ej(e.path,new Uc)}isEqual(e){return e instanceof sv}}function AN(s,e,t,r){const o=s.bc(1,e,t);iv("Data must be an object, but it was:",o,r);const l=[],h=yn.empty();Sr(r,(g,v)=>{const _=rv(e,g,t);v=lt(v);const b=o.mc(_);if(v instanceof Hh)l.push(_);else{const A=ru(v,b);A!=null&&(l.push(_),h.set(_,A))}});const m=new Vn(l);return new TN(h,m,o.fieldTransforms)}function NN(s,e,t,r,o,l){const h=s.bc(1,e,t),m=[eg(e,r,t)],g=[o];if(l.length%2!=0)throw new he(te.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let A=0;A<l.length;A+=2)m.push(eg(e,l[A])),g.push(l[A+1]);const v=[],_=yn.empty();for(let A=m.length-1;A>=0;--A)if(!xN(v,m[A])){const M=m[A];let I=g[A];I=lt(I);const U=h.mc(M);if(I instanceof Hh)v.push(M);else{const x=ru(I,U);x!=null&&(v.push(M),_.set(M,x))}}const b=new Vn(v);return new TN(_,b,h.fieldTransforms)}function RO(s,e,t,r=!1){return ru(t,s.bc(r?4:3,e))}function ru(s,e){if(wN(s=lt(s)))return iv("Unsupported field value:",e,s),SN(s,e);if(s instanceof Bh)return function(r,o){if(!bN(o.Ic))throw o.gc(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.gc(`${r._methodName}() is not currently supported inside arrays`);const l=r._toFieldTransform(o);l&&o.fieldTransforms.push(l)}(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.Rc&&e.Ic!==4)throw e.gc("Nested arrays are not supported");return function(r,o){const l=[];let h=0;for(const m of r){let g=ru(m,o.fc(h));g==null&&(g={nullValue:"NULL_VALUE"}),l.push(g),h++}return{arrayValue:{values:l}}}(s,e)}return function(r,o){if((r=lt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return vj(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const l=Pt.fromDate(r);return{timestampValue:hh(o.serializer,l)}}if(r instanceof Pt){const l=new Pt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:hh(o.serializer,l)}}if(r instanceof Jg)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ba)return{bytesValue:GA(o.serializer,r._byteString)};if(r instanceof nn){const l=o.databaseId,h=r.firestore._databaseId;if(!h.isEqual(l))throw o.gc(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Og(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof ev)return function(h,m){return{mapValue:{fields:{[yA]:{stringValue:_A},[ch]:{arrayValue:{values:h.toArray().map(v=>{if(typeof v!="number")throw m.gc("VectorValues must only contain numeric values.");return Rg(m.serializer,v)})}}}}}}(r,o);throw o.gc(`Unsupported field value: ${qh(r)}`)}(s,e)}function SN(s,e){const t={};return hA(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Sr(s,(r,o)=>{const l=ru(o,e.Ac(r));l!=null&&(t[r]=l)}),{mapValue:{fields:t}}}function wN(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof Pt||s instanceof Jg||s instanceof ba||s instanceof nn||s instanceof Bh||s instanceof ev)}function iv(s,e,t){if(!wN(t)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(t)){const r=qh(t);throw r==="an object"?e.gc(s+" a custom object"):e.gc(s+" "+r)}}function eg(s,e,t){if((e=lt(e))instanceof su)return e._internalPath;if(typeof e=="string")return rv(s,e);throw yh("Field path arguments must be of type string or ",s,!1,void 0,t)}const jO=new RegExp("[~\\*/\\[\\]]");function rv(s,e,t){if(e.search(jO)>=0)throw yh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,t);try{return new su(...e.split("."))._internalPath}catch{throw yh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,t)}}function yh(s,e,t,r,o){const l=r&&!r.isEmpty(),h=o!==void 0;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let g="";return(l||h)&&(g+=" (found",l&&(g+=` in field ${r}`),h&&(g+=` in document ${o}`),g+=")"),new he(te.INVALID_ARGUMENT,m+s+g)}function xN(s,e){return s.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h{constructor(e,t,r,o,l){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new nn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new DO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Gh("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class DO extends _h{data(){return super.data()}}function Gh(s,e){return typeof e=="string"?rv(s,e):e instanceof su?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IN(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new he(te.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class av{}class CN extends av{}function ft(s,e,...t){let r=[];e instanceof av&&r.push(e),r=r.concat(t),function(l){const h=l.filter(g=>g instanceof ov).length,m=l.filter(g=>g instanceof $h).length;if(h>1||h>0&&m>0)throw new he(te.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const o of r)s=o._apply(s);return s}class $h extends CN{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new $h(e,t,r)}_apply(e){const t=this._parse(e);return RN(e._query,t),new xr(e.firestore,e.converter,Hp(e._query,t))}_parse(e){const t=iu(e.firestore);return function(l,h,m,g,v,_,b){let A;if(v.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new he(te.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){Sb(b,_);const I=[];for(const U of b)I.push(Nb(g,l,U));A={arrayValue:{values:I}}}else A=Nb(g,l,b)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||Sb(b,_),A=RO(m,h,b,_==="in"||_==="not-in");return It.create(v,_,A)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Mt(s,e,t){const r=e,o=Gh("where",s);return $h._create(o,r,t)}class ov extends av{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new ov(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:ys.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(o,l){let h=o;const m=l.getFlattenedFilters();for(const g of m)RN(h,g),h=Hp(h,g)}(e._query,t),new xr(e.firestore,e.converter,Hp(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class lv extends CN{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new lv(e,t)}_apply(e){const t=function(o,l,h){if(o.startAt!==null)throw new he(te.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new he(te.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Lc(l,h)}(e._query,this._field,this._direction);return new xr(e.firestore,e.converter,function(o,l){const h=o.explicitOrderBy.concat([l]);return new Wo(o.path,o.collectionGroup,h,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(e._query,t))}}function Jo(s,e="asc"){const t=e,r=Gh("orderBy",s);return lv._create(r,t)}function Nb(s,e,t){if(typeof(t=lt(t))=="string"){if(t==="")throw new he(te.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!xA(e)&&t.indexOf("/")!==-1)throw new he(te.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(it.fromString(t));if(!ve.isDocumentKey(r))throw new he(te.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return LT(s,new ve(r))}if(t instanceof nn)return LT(s,t._key);throw new he(te.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${qh(t)}.`)}function Sb(s,e){if(!Array.isArray(s)||s.length===0)throw new he(te.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function RN(s,e){const t=function(o,l){for(const h of o)for(const m of h.getFlattenedFilters())if(l.indexOf(m.op)>=0)return m.op;return null}(s.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new he(te.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new he(te.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class jN{convertValue(e,t="none"){switch(pr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return bt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(mr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ee(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Sr(e,(o,l)=>{r[o]=this.convertValue(l,t)}),r}convertVectorValue(e){var t,r,o;const l=(o=(r=(t=e.fields)===null||t===void 0?void 0:t[ch].arrayValue)===null||r===void 0?void 0:r.values)===null||o===void 0?void 0:o.map(h=>bt(h.doubleValue));return new ev(l)}convertGeoPoint(e){return new Jg(bt(e.latitude),bt(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Rh(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Pc(e));default:return null}}convertTimestamp(e){const t=fr(e);return new Pt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=it.fromString(e);Ge(ZA(r),9688,{name:e});const o=new kc(r.get(1),r.get(3)),l=new ve(r.popFirst(5));return o.isEqual(t)||bi(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cv(s,e,t){let r;return r=s?t&&(t.merge||t.mergeFields)?s.toFirestore(e,t):s.toFirestore(e):e,r}class OO extends jN{constructor(e){super(),this.firestore=e}convertBytes(e){return new ba(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new nn(this.firestore,null,t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class uv extends _h{constructor(e,t,r,o,l,h){super(e,t,r,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Xd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Gh("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Xd extends uv{data(e={}){return super.data(e)}}class DN{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Co(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Xd(this._firestore,this._userDataWriter,r.key,r,new Co(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new he(te.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,l){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map(m=>{const g=new Xd(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Co(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:g,oldIndex:-1,newIndex:h++}})}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(m=>l||m.type!==3).map(m=>{const g=new Xd(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Co(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let v=-1,_=-1;return m.type!==0&&(v=h.indexOf(m.doc.key),h=h.delete(m.doc.key)),m.type!==1&&(h=h.add(m.doc),_=h.indexOf(m.doc.key)),{type:MO(m.type),doc:g,oldIndex:v,newIndex:_}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function MO(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ee(61501,{type:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function el(s){s=_n(s,nn);const e=_n(s.firestore,qs);return TO(nu(e),s._key).then(t=>ON(e,s,t))}class Kh extends jN{constructor(e){super(),this.firestore=e}convertBytes(e){return new ba(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new nn(this.firestore,null,t)}}function Ir(s){s=_n(s,xr);const e=_n(s.firestore,qs),t=nu(e),r=new Kh(e);return IN(s._query),bO(t,s._query).then(o=>new DN(e,r,s,o))}function dv(s,e,t){s=_n(s,nn);const r=_n(s.firestore,qs),o=cv(s.converter,e,t);return Qh(r,[nv(iu(r),"setDoc",s._key,o,s.converter!==null,t).toMutation(s._key,tn.none())])}function Yh(s,e,t,...r){s=_n(s,nn);const o=_n(s.firestore,qs),l=iu(o);let h;return h=typeof(e=lt(e))=="string"||e instanceof su?NN(l,"updateDoc",s._key,e,t,r):AN(l,"updateDoc",s._key,e),Qh(o,[h.toMutation(s._key,tn.exists(!0))])}function PO(s){return Qh(_n(s.firestore,qs),[new kh(s._key,tn.none())])}function kO(s,e){const t=_n(s.firestore,qs),r=xn(s),o=cv(s.converter,e);return Qh(t,[nv(iu(s.firestore),"addDoc",r._key,o,s.converter!==null,{}).toMutation(r._key,tn.exists(!1))]).then(()=>r)}function hv(s,...e){var t,r,o;s=lt(s);let l={includeMetadataChanges:!1,source:"default"},h=0;typeof e[h]!="object"||Ab(e[h])||(l=e[h],h++);const m={includeMetadataChanges:l.includeMetadataChanges,source:l.source};if(Ab(e[h])){const b=e[h];e[h]=(t=b.next)===null||t===void 0?void 0:t.bind(b),e[h+1]=(r=b.error)===null||r===void 0?void 0:r.bind(b),e[h+2]=(o=b.complete)===null||o===void 0?void 0:o.bind(b)}let g,v,_;if(s instanceof nn)v=_n(s.firestore,qs),_=jh(s._key.path),g={next:b=>{e[h]&&e[h](ON(v,s,b))},error:e[h+1],complete:e[h+2]};else{const b=_n(s,xr);v=_n(b.firestore,qs),_=b._query;const A=new Kh(v);g={next:M=>{e[h]&&e[h](new DN(v,A,b,M))},error:e[h+1],complete:e[h+2]},IN(s._query)}return function(A,M,I,U){const x=new Wg(U),$=new Yg(M,x,I);return A.asyncQueue.enqueueAndForget(async()=>Gg(await vh(A),$)),()=>{x.xu(),A.asyncQueue.enqueueAndForget(async()=>$g(await vh(A),$))}}(nu(v),_,m,g)}function Qh(s,e){return function(r,o){const l=new Ls;return r.asyncQueue.enqueueAndForget(async()=>aO(await _O(r),o,l)),l.promise}(nu(s),e)}function ON(s,e,t){const r=t.docs.get(e._key),o=new Kh(s);return new uv(s,o,e._key,r,new Co(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VO={maxAttempts:5};function yc(s,e){if((s=lt(s)).firestore!==e)throw new he(te.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LO{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=iu(e)}get(e){const t=yc(e,this._firestore),r=new OO(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||o.length!==1)return Ee(24041);const l=o[0];if(l.isFoundDocument())return new _h(this._firestore,r,l.key,l,t.converter);if(l.isNoDocument())return new _h(this._firestore,r,t._key,null,t.converter);throw Ee(18433,{doc:l})})}set(e,t,r){const o=yc(e,this._firestore),l=cv(o.converter,t,r),h=nv(this._dataReader,"Transaction.set",o._key,l,o.converter!==null,r);return this._transaction.set(o._key,h),this}update(e,t,r,...o){const l=yc(e,this._firestore);let h;return h=typeof(t=lt(t))=="string"||t instanceof su?NN(this._dataReader,"Transaction.update",l._key,t,r,o):AN(this._dataReader,"Transaction.update",l._key,t),this._transaction.update(l._key,h),this}delete(e){const t=yc(e,this._firestore);return this._transaction.delete(t._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UO extends LO{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=yc(e,this._firestore),r=new Kh(this._firestore);return super.get(e).then(o=>new uv(this._firestore,r,t._key,o._document,new Co(!1,!1),t.converter))}}function MN(s,e,t){s=_n(s,qs);const r=Object.assign(Object.assign({},VO),t);return function(l){if(l.maxAttempts<1)throw new he(te.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(l,h,m){const g=new Ls;return l.asyncQueue.enqueueAndForget(async()=>{const v=await EO(l);new gO(l.asyncQueue,v,m,h,g).Wu()}),g.promise}(nu(s),o=>e(new UO(s,o)),r)}function vs(){return new sv("serverTimestamp")}(function(e,t=!0){(function(o){Yo=o})(wa),ts(new qn("firestore",(r,{instanceIdentifier:o,options:l})=>{const h=r.getProvider("app").getImmediate(),m=new qs(new j1(r.getProvider("auth-internal")),new M1(h,r.getProvider("app-check-internal")),function(v,_){if(!Object.prototype.hasOwnProperty.apply(v.options,["projectId"]))throw new he(te.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new kc(v.options.projectId,_)}(h,o),h);return l=Object.assign({useFetchStreams:t},l),m._setSettings(l),m},"PUBLIC").setMultipleInstances(!0)),dn(wT,xT,e),dn(wT,xT,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PN="firebasestorage.googleapis.com",FO="storageBucket",qO=2*60*1e3,zO=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs extends ss{constructor(e,t,r=0){super(yp(e),`Firebase Storage: ${t} (${yp(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Bs.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return yp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var zs;(function(s){s.UNKNOWN="unknown",s.OBJECT_NOT_FOUND="object-not-found",s.BUCKET_NOT_FOUND="bucket-not-found",s.PROJECT_NOT_FOUND="project-not-found",s.QUOTA_EXCEEDED="quota-exceeded",s.UNAUTHENTICATED="unauthenticated",s.UNAUTHORIZED="unauthorized",s.UNAUTHORIZED_APP="unauthorized-app",s.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",s.INVALID_CHECKSUM="invalid-checksum",s.CANCELED="canceled",s.INVALID_EVENT_NAME="invalid-event-name",s.INVALID_URL="invalid-url",s.INVALID_DEFAULT_BUCKET="invalid-default-bucket",s.NO_DEFAULT_BUCKET="no-default-bucket",s.CANNOT_SLICE_BLOB="cannot-slice-blob",s.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",s.NO_DOWNLOAD_URL="no-download-url",s.INVALID_ARGUMENT="invalid-argument",s.INVALID_ARGUMENT_COUNT="invalid-argument-count",s.APP_DELETED="app-deleted",s.INVALID_ROOT_OPERATION="invalid-root-operation",s.INVALID_FORMAT="invalid-format",s.INTERNAL_ERROR="internal-error",s.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(zs||(zs={}));function yp(s){return"storage/"+s}function BO(){const s="An unknown error occurred, please check the error payload for server response.";return new Bs(zs.UNKNOWN,s)}function HO(){return new Bs(zs.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function GO(){return new Bs(zs.CANCELED,"User canceled the upload/download.")}function $O(s){return new Bs(zs.INVALID_URL,"Invalid URL '"+s+"'.")}function KO(s){return new Bs(zs.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+s+"'.")}function wb(s){return new Bs(zs.INVALID_ARGUMENT,s)}function kN(){return new Bs(zs.APP_DELETED,"The Firebase app was deleted.")}function YO(s){return new Bs(zs.INVALID_ROOT_OPERATION,"The operation '"+s+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=ps.makeFromUrl(e,t)}catch{return new ps(e,"")}if(r.path==="")return r;throw KO(e)}static makeFromUrl(e,t){let r=null;const o="([A-Za-z0-9.\\-_]+)";function l(J){J.path.charAt(J.path.length-1)==="/"&&(J.path_=J.path_.slice(0,-1))}const h="(/(.*))?$",m=new RegExp("^gs://"+o+h,"i"),g={bucket:1,path:3};function v(J){J.path_=decodeURIComponent(J.path)}const _="v[A-Za-z0-9_]+",b=t.replace(/[.]/g,"\\."),A="(/([^?#]*).*)?$",M=new RegExp(`^https?://${b}/${_}/b/${o}/o${A}`,"i"),I={bucket:1,path:3},U=t===PN?"(?:storage.googleapis.com|storage.cloud.google.com)":t,x="([^?#]*)",$=new RegExp(`^https?://${U}/${o}/${x}`,"i"),K=[{regex:m,indices:g,postModify:l},{regex:M,indices:I,postModify:v},{regex:$,indices:{bucket:1,path:2},postModify:v}];for(let J=0;J<K.length;J++){const q=K[J],oe=q.regex.exec(e);if(oe){const O=oe[q.indices.bucket];let S=oe[q.indices.path];S||(S=""),r=new ps(O,S),q.postModify(r);break}}if(r==null)throw $O(e);return r}}class QO{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XO(s,e,t){let r=1,o=null,l=null,h=!1,m=0;function g(){return m===2}let v=!1;function _(...x){v||(v=!0,e.apply(null,x))}function b(x){o=setTimeout(()=>{o=null,s(M,g())},x)}function A(){l&&clearTimeout(l)}function M(x,...$){if(v){A();return}if(x){A(),_.call(null,x,...$);return}if(g()||h){A(),_.call(null,x,...$);return}r<64&&(r*=2);let K;m===1?(m=2,K=0):K=(r+Math.random())*1e3,b(K)}let I=!1;function U(x){I||(I=!0,A(),!v&&(o!==null?(x||(m=2),clearTimeout(o),b(0)):x||(m=1)))}return b(0),l=setTimeout(()=>{h=!0,U(!0)},t),U}function WO(s){s(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZO(s){return s!==void 0}function xb(s,e,t,r){if(r<e)throw wb(`Invalid value for '${s}'. Expected ${e} or greater.`);if(r>t)throw wb(`Invalid value for '${s}'. Expected ${t} or less.`)}function JO(s){const e=encodeURIComponent;let t="?";for(const r in s)if(s.hasOwnProperty(r)){const o=e(r)+"="+e(s[r]);t=t+o+"&"}return t=t.slice(0,-1),t}var Eh;(function(s){s[s.NO_ERROR=0]="NO_ERROR",s[s.NETWORK_ERROR=1]="NETWORK_ERROR",s[s.ABORT=2]="ABORT"})(Eh||(Eh={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eM(s,e){const t=s>=500&&s<600,o=[408,429].indexOf(s)!==-1,l=e.indexOf(s)!==-1;return t||o||l}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tM{constructor(e,t,r,o,l,h,m,g,v,_,b,A=!0,M=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=o,this.successCodes_=l,this.additionalRetryCodes_=h,this.callback_=m,this.errorCallback_=g,this.timeout_=v,this.progressCallback_=_,this.connectionFactory_=b,this.retry=A,this.isUsingEmulator=M,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((I,U)=>{this.resolve_=I,this.reject_=U,this.start_()})}start_(){const e=(r,o)=>{if(o){r(!1,new Ld(!1,null,!0));return}const l=this.connectionFactory_();this.pendingConnection_=l;const h=m=>{const g=m.loaded,v=m.lengthComputable?m.total:-1;this.progressCallback_!==null&&this.progressCallback_(g,v)};this.progressCallback_!==null&&l.addUploadProgressListener(h),l.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&l.removeUploadProgressListener(h),this.pendingConnection_=null;const m=l.getErrorCode()===Eh.NO_ERROR,g=l.getStatus();if(!m||eM(g,this.additionalRetryCodes_)&&this.retry){const _=l.getErrorCode()===Eh.ABORT;r(!1,new Ld(!1,null,_));return}const v=this.successCodes_.indexOf(g)!==-1;r(!0,new Ld(v,l))})},t=(r,o)=>{const l=this.resolve_,h=this.reject_,m=o.connection;if(o.wasSuccessCode)try{const g=this.callback_(m,m.getResponse());ZO(g)?l(g):l()}catch(g){h(g)}else if(m!==null){const g=BO();g.serverResponse=m.getErrorText(),this.errorCallback_?h(this.errorCallback_(m,g)):h(g)}else if(o.canceled){const g=this.appDelete_?kN():GO();h(g)}else{const g=HO();h(g)}};this.canceled_?t(!1,new Ld(!1,null,!0)):this.backoffId_=XO(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&WO(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Ld{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function nM(s,e){e!==null&&e.length>0&&(s.Authorization="Firebase "+e)}function sM(s,e){s["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function iM(s,e){e&&(s["X-Firebase-GMPID"]=e)}function rM(s,e){e!==null&&(s["X-Firebase-AppCheck"]=e)}function aM(s,e,t,r,o,l,h=!0,m=!1){const g=JO(s.urlParams),v=s.url+g,_=Object.assign({},s.headers);return iM(_,e),nM(_,t),sM(_,l),rM(_,r),new tM(v,s.method,_,s.body,s.successCodes,s.additionalRetryCodes,s.handler,s.errorHandler,s.timeout,s.progressCallback,o,h,m)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oM(s){if(s.length===0)return null;const e=s.lastIndexOf("/");return e===-1?"":s.slice(0,e)}function lM(s){const e=s.lastIndexOf("/",s.length-2);return e===-1?s:s.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th{constructor(e,t){this._service=e,t instanceof ps?this._location=t:this._location=ps.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Th(e,t)}get root(){const e=new ps(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return lM(this._location.path)}get storage(){return this._service}get parent(){const e=oM(this._location.path);if(e===null)return null;const t=new ps(this._location.bucket,e);return new Th(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw YO(e)}}function Ib(s,e){const t=e?.[FO];return t==null?null:ps.makeFromBucketSpec(t,s)}function cM(s,e,t,r={}){s.host=`${e}:${t}`;const o=Sa(e);o&&(lg(`https://${s.host}/b`),cg("Storage",!0)),s._isUsingEmulator=!0,s._protocol=o?"https":"http";const{mockUserToken:l}=r;l&&(s._overrideAuthToken=typeof l=="string"?l:f0(l,s.app.options.projectId))}class uM{constructor(e,t,r,o,l,h=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=o,this._firebaseVersion=l,this._isUsingEmulator=h,this._bucket=null,this._host=PN,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=qO,this._maxUploadRetryTime=zO,this._requests=new Set,o!=null?this._bucket=ps.makeFromBucketSpec(o,this._host):this._bucket=Ib(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ps.makeFromBucketSpec(this._url,e):this._bucket=Ib(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){xb("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){xb("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(Nn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Th(this,e)}_makeRequest(e,t,r,o,l=!0){if(this._deleted)return new QO(kN());{const h=aM(e,this._appId,r,o,t,this._firebaseVersion,l,this._isUsingEmulator);return this._requests.add(h),h.getPromise().then(()=>this._requests.delete(h),()=>this._requests.delete(h)),h}}async makeRequestWithTokens(e,t){const[r,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,o).getPromise()}}const Cb="@firebase/storage",Rb="0.13.13";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VN="storage";function dM(s=$c(),e){s=lt(s);const r=Ni(s,VN).getImmediate({identifier:e}),o=u0("storage");return o&&hM(r,...o),r}function hM(s,e,t,r={}){cM(s,e,t,r)}function fM(s,{instanceIdentifier:e}){const t=s.getProvider("app").getImmediate(),r=s.getProvider("auth-internal"),o=s.getProvider("app-check-internal");return new uM(t,r,o,e,wa)}function mM(){ts(new qn(VN,fM,"PUBLIC").setMultipleInstances(!0)),dn(Cb,Rb,""),dn(Cb,Rb,"esm2017")}mM();const LN="@firebase/installations",fv="0.6.17";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UN=1e4,FN=`w:${fv}`,qN="FIS_v2",pM="https://firebaseinstallations.googleapis.com/v1",gM=60*60*1e3,vM="installations",yM="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _M={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Aa=new Tr(vM,yM,_M);function zN(s){return s instanceof ss&&s.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BN({projectId:s}){return`${pM}/projects/${s}/installations`}function HN(s){return{token:s.token,requestStatus:2,expiresIn:TM(s.expiresIn),creationTime:Date.now()}}async function GN(s,e){const r=(await e.json()).error;return Aa.create("request-failed",{requestName:s,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function $N({apiKey:s}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":s})}function EM(s,{refreshToken:e}){const t=$N(s);return t.append("Authorization",bM(e)),t}async function KN(s){const e=await s();return e.status>=500&&e.status<600?s():e}function TM(s){return Number(s.replace("s","000"))}function bM(s){return`${qN} ${s}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AM({appConfig:s,heartbeatServiceProvider:e},{fid:t}){const r=BN(s),o=$N(s),l=e.getImmediate({optional:!0});if(l){const v=await l.getHeartbeatsHeader();v&&o.append("x-firebase-client",v)}const h={fid:t,authVersion:qN,appId:s.appId,sdkVersion:FN},m={method:"POST",headers:o,body:JSON.stringify(h)},g=await KN(()=>fetch(r,m));if(g.ok){const v=await g.json();return{fid:v.fid||t,registrationStatus:2,refreshToken:v.refreshToken,authToken:HN(v.authToken)}}else throw await GN("Create Installation",g)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YN(s){return new Promise(e=>{setTimeout(e,s)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NM(s){return btoa(String.fromCharCode(...s)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SM=/^[cdef][\w-]{21}$/,tg="";function wM(){try{const s=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(s),s[0]=112+s[0]%16;const t=xM(s);return SM.test(t)?t:tg}catch{return tg}}function xM(s){return NM(s).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xh(s){return`${s.appName}!${s.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QN=new Map;function XN(s,e){const t=Xh(s);WN(t,e),IM(t,e)}function WN(s,e){const t=QN.get(s);if(t)for(const r of t)r(e)}function IM(s,e){const t=CM();t&&t.postMessage({key:s,fid:e}),RM()}let ga=null;function CM(){return!ga&&"BroadcastChannel"in self&&(ga=new BroadcastChannel("[Firebase] FID Change"),ga.onmessage=s=>{WN(s.data.key,s.data.fid)}),ga}function RM(){QN.size===0&&ga&&(ga.close(),ga=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jM="firebase-installations-database",DM=1,Na="firebase-installations-store";let _p=null;function mv(){return _p||(_p=y0(jM,DM,{upgrade:(s,e)=>{switch(e){case 0:s.createObjectStore(Na)}}})),_p}async function bh(s,e){const t=Xh(s),o=(await mv()).transaction(Na,"readwrite"),l=o.objectStore(Na),h=await l.get(t);return await l.put(e,t),await o.done,(!h||h.fid!==e.fid)&&XN(s,e.fid),e}async function ZN(s){const e=Xh(s),r=(await mv()).transaction(Na,"readwrite");await r.objectStore(Na).delete(e),await r.done}async function Wh(s,e){const t=Xh(s),o=(await mv()).transaction(Na,"readwrite"),l=o.objectStore(Na),h=await l.get(t),m=e(h);return m===void 0?await l.delete(t):await l.put(m,t),await o.done,m&&(!h||h.fid!==m.fid)&&XN(s,m.fid),m}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pv(s){let e;const t=await Wh(s.appConfig,r=>{const o=OM(r),l=MM(s,o);return e=l.registrationPromise,l.installationEntry});return t.fid===tg?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function OM(s){const e=s||{fid:wM(),registrationStatus:0};return JN(e)}function MM(s,e){if(e.registrationStatus===0){if(!navigator.onLine){const o=Promise.reject(Aa.create("app-offline"));return{installationEntry:e,registrationPromise:o}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=PM(s,t);return{installationEntry:t,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:kM(s)}:{installationEntry:e}}async function PM(s,e){try{const t=await AM(s,e);return bh(s.appConfig,t)}catch(t){throw zN(t)&&t.customData.serverCode===409?await ZN(s.appConfig):await bh(s.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function kM(s){let e=await jb(s.appConfig);for(;e.registrationStatus===1;)await YN(100),e=await jb(s.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:r}=await pv(s);return r||t}return e}function jb(s){return Wh(s,e=>{if(!e)throw Aa.create("installation-not-found");return JN(e)})}function JN(s){return VM(s)?{fid:s.fid,registrationStatus:0}:s}function VM(s){return s.registrationStatus===1&&s.registrationTime+UN<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LM({appConfig:s,heartbeatServiceProvider:e},t){const r=UM(s,t),o=EM(s,t),l=e.getImmediate({optional:!0});if(l){const v=await l.getHeartbeatsHeader();v&&o.append("x-firebase-client",v)}const h={installation:{sdkVersion:FN,appId:s.appId}},m={method:"POST",headers:o,body:JSON.stringify(h)},g=await KN(()=>fetch(r,m));if(g.ok){const v=await g.json();return HN(v)}else throw await GN("Generate Auth Token",g)}function UM(s,{fid:e}){return`${BN(s)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gv(s,e=!1){let t;const r=await Wh(s.appConfig,l=>{if(!eS(l))throw Aa.create("not-registered");const h=l.authToken;if(!e&&zM(h))return l;if(h.requestStatus===1)return t=FM(s,e),l;{if(!navigator.onLine)throw Aa.create("app-offline");const m=HM(l);return t=qM(s,m),m}});return t?await t:r.authToken}async function FM(s,e){let t=await Db(s.appConfig);for(;t.authToken.requestStatus===1;)await YN(100),t=await Db(s.appConfig);const r=t.authToken;return r.requestStatus===0?gv(s,e):r}function Db(s){return Wh(s,e=>{if(!eS(e))throw Aa.create("not-registered");const t=e.authToken;return GM(t)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function qM(s,e){try{const t=await LM(s,e),r=Object.assign(Object.assign({},e),{authToken:t});return await bh(s.appConfig,r),t}catch(t){if(zN(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await ZN(s.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await bh(s.appConfig,r)}throw t}}function eS(s){return s!==void 0&&s.registrationStatus===2}function zM(s){return s.requestStatus===2&&!BM(s)}function BM(s){const e=Date.now();return e<s.creationTime||s.creationTime+s.expiresIn<e+gM}function HM(s){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},s),{authToken:e})}function GM(s){return s.requestStatus===1&&s.requestTime+UN<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $M(s){const e=s,{installationEntry:t,registrationPromise:r}=await pv(e);return r?r.catch(console.error):gv(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KM(s,e=!1){const t=s;return await YM(t),(await gv(t,e)).token}async function YM(s){const{registrationPromise:e}=await pv(s);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QM(s){if(!s||!s.options)throw Ep("App Configuration");if(!s.name)throw Ep("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!s.options[t])throw Ep(t);return{appName:s.name,projectId:s.options.projectId,apiKey:s.options.apiKey,appId:s.options.appId}}function Ep(s){return Aa.create("missing-app-config-values",{valueName:s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tS="installations",XM="installations-internal",WM=s=>{const e=s.getProvider("app").getImmediate(),t=QM(e),r=Ni(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},ZM=s=>{const e=s.getProvider("app").getImmediate(),t=Ni(e,tS).getImmediate();return{getId:()=>$M(t),getToken:o=>KM(t,o)}};function JM(){ts(new qn(tS,WM,"PUBLIC")),ts(new qn(XM,ZM,"PRIVATE"))}JM();dn(LN,fv);dn(LN,fv,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ah="analytics",e2="firebase_id",t2="origin",n2=60*1e3,s2="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",vv="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sn=new Gc("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i2={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Fn=new Tr("analytics","Analytics",i2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r2(s){if(!s.startsWith(vv)){const e=Fn.create("invalid-gtag-resource",{gtagURL:s});return Sn.warn(e.message),""}return s}function nS(s){return Promise.all(s.map(e=>e.catch(t=>t)))}function a2(s,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(s,e)),t}function o2(s,e){const t=a2("firebase-js-sdk-policy",{createScriptURL:r2}),r=document.createElement("script"),o=`${vv}?l=${s}&id=${e}`;r.src=t?t?.createScriptURL(o):o,r.async=!0,document.head.appendChild(r)}function l2(s){let e=[];return Array.isArray(window[s])?e=window[s]:window[s]=e,e}async function c2(s,e,t,r,o,l){const h=r[o];try{if(h)await e[h];else{const g=(await nS(t)).find(v=>v.measurementId===o);g&&await e[g.appId]}}catch(m){Sn.error(m)}s("config",o,l)}async function u2(s,e,t,r,o){try{let l=[];if(o&&o.send_to){let h=o.send_to;Array.isArray(h)||(h=[h]);const m=await nS(t);for(const g of h){const v=m.find(b=>b.measurementId===g),_=v&&e[v.appId];if(_)l.push(_);else{l=[];break}}}l.length===0&&(l=Object.values(e)),await Promise.all(l),s("event",r,o||{})}catch(l){Sn.error(l)}}function d2(s,e,t,r){async function o(l,...h){try{if(l==="event"){const[m,g]=h;await u2(s,e,t,m,g)}else if(l==="config"){const[m,g]=h;await c2(s,e,t,r,m,g)}else if(l==="consent"){const[m,g]=h;s("consent",m,g)}else if(l==="get"){const[m,g,v]=h;s("get",m,g,v)}else if(l==="set"){const[m]=h;s("set",m)}else s(l,...h)}catch(m){Sn.error(m)}}return o}function h2(s,e,t,r,o){let l=function(...h){window[r].push(arguments)};return window[o]&&typeof window[o]=="function"&&(l=window[o]),window[o]=d2(l,s,e,t),{gtagCore:l,wrappedGtag:window[o]}}function f2(s){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(vv)&&t.src.includes(s))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m2=30,p2=1e3;class g2{constructor(e={},t=p2){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const sS=new g2;function v2(s){return new Headers({Accept:"application/json","x-goog-api-key":s})}async function y2(s){var e;const{appId:t,apiKey:r}=s,o={method:"GET",headers:v2(r)},l=s2.replace("{app-id}",t),h=await fetch(l,o);if(h.status!==200&&h.status!==304){let m="";try{const g=await h.json();!((e=g.error)===null||e===void 0)&&e.message&&(m=g.error.message)}catch{}throw Fn.create("config-fetch-failed",{httpStatus:h.status,responseMessage:m})}return h.json()}async function _2(s,e=sS,t){const{appId:r,apiKey:o,measurementId:l}=s.options;if(!r)throw Fn.create("no-app-id");if(!o){if(l)return{measurementId:l,appId:r};throw Fn.create("no-api-key")}const h=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},m=new b2;return setTimeout(async()=>{m.abort()},n2),iS({appId:r,apiKey:o,measurementId:l},h,m,e)}async function iS(s,{throttleEndTimeMillis:e,backoffCount:t},r,o=sS){var l;const{appId:h,measurementId:m}=s;try{await E2(r,e)}catch(g){if(m)return Sn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${m} provided in the "measurementId" field in the local Firebase config. [${g?.message}]`),{appId:h,measurementId:m};throw g}try{const g=await y2(s);return o.deleteThrottleMetadata(h),g}catch(g){const v=g;if(!T2(v)){if(o.deleteThrottleMetadata(h),m)return Sn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${m} provided in the "measurementId" field in the local Firebase config. [${v?.message}]`),{appId:h,measurementId:m};throw g}const _=Number((l=v?.customData)===null||l===void 0?void 0:l.httpStatus)===503?WE(t,o.intervalMillis,m2):WE(t,o.intervalMillis),b={throttleEndTimeMillis:Date.now()+_,backoffCount:t+1};return o.setThrottleMetadata(h,b),Sn.debug(`Calling attemptFetch again in ${_} millis`),iS(s,b,r,o)}}function E2(s,e){return new Promise((t,r)=>{const o=Math.max(e-Date.now(),0),l=setTimeout(t,o);s.addEventListener(()=>{clearTimeout(l),r(Fn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function T2(s){if(!(s instanceof ss)||!s.customData)return!1;const e=Number(s.customData.httpStatus);return e===429||e===500||e===503||e===504}class b2{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function A2(s,e,t,r,o){if(o&&o.global){s("event",t,r);return}else{const l=await e,h=Object.assign(Object.assign({},r),{send_to:l});s("event",t,h)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N2(){if(ug())try{await dg()}catch(s){return Sn.warn(Fn.create("indexeddb-unavailable",{errorInfo:s?.toString()}).message),!1}else return Sn.warn(Fn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function S2(s,e,t,r,o,l,h){var m;const g=_2(s);g.then(M=>{t[M.measurementId]=M.appId,s.options.measurementId&&M.measurementId!==s.options.measurementId&&Sn.warn(`The measurement ID in the local Firebase config (${s.options.measurementId}) does not match the measurement ID fetched from the server (${M.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(M=>Sn.error(M)),e.push(g);const v=N2().then(M=>{if(M)return r.getId()}),[_,b]=await Promise.all([g,v]);f2(l)||o2(l,_.measurementId),o("js",new Date);const A=(m=h?.config)!==null&&m!==void 0?m:{};return A[t2]="firebase",A.update=!0,b!=null&&(A[e2]=b),o("config",_.measurementId,A),_.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w2{constructor(e){this.app=e}_delete(){return delete wc[this.app.options.appId],Promise.resolve()}}let wc={},Ob=[];const Mb={};let Tp="dataLayer",x2="gtag",Pb,rS,kb=!1;function I2(){const s=[];if(m0()&&s.push("This is a browser extension environment."),p0()||s.push("Cookies are not available."),s.length>0){const e=s.map((r,o)=>`(${o+1}) ${r}`).join(" "),t=Fn.create("invalid-analytics-context",{errorInfo:e});Sn.warn(t.message)}}function C2(s,e,t){I2();const r=s.options.appId;if(!r)throw Fn.create("no-app-id");if(!s.options.apiKey)if(s.options.measurementId)Sn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${s.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Fn.create("no-api-key");if(wc[r]!=null)throw Fn.create("already-exists",{id:r});if(!kb){l2(Tp);const{wrappedGtag:l,gtagCore:h}=h2(wc,Ob,Mb,Tp,x2);rS=l,Pb=h,kb=!0}return wc[r]=S2(s,Ob,Mb,e,Pb,Tp,t),new w2(s)}function R2(s=$c()){s=lt(s);const e=Ni(s,Ah);return e.isInitialized()?e.getImmediate():j2(s)}function j2(s,e={}){const t=Ni(s,Ah);if(t.isInitialized()){const o=t.getImmediate();if(dr(e,t.getOptions()))return o;throw Fn.create("already-initialized")}return t.initialize({options:e})}function D2(s,e,t,r){s=lt(s),A2(rS,wc[s.app.options.appId],e,t,r).catch(o=>Sn.error(o))}const Vb="@firebase/analytics",Lb="0.10.16";function O2(){ts(new qn(Ah,(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("installations-internal").getImmediate();return C2(r,o,t)},"PUBLIC")),ts(new qn("analytics-internal",s,"PRIVATE")),dn(Vb,Lb),dn(Vb,Lb,"esm2017");function s(e){try{const t=e.getProvider(Ah).getImmediate();return{logEvent:(r,o,l)=>D2(t,r,o,l)}}catch(t){throw Fn.create("interop-component-reg-failed",{reason:t})}}}O2();var ng,Ub,Zh=function(){var s=self.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0];if(s&&s.responseStart>0&&s.responseStart<performance.now())return s},aS=function(s){if(document.readyState==="loading")return"loading";var e=Zh();if(e){if(s<e.domInteractive)return"loading";if(e.domContentLoadedEventStart===0||s<e.domContentLoadedEventStart)return"dom-interactive";if(e.domComplete===0||s<e.domComplete)return"dom-content-loaded"}return"complete"},M2=function(s){var e=s.nodeName;return s.nodeType===1?e.toLowerCase():e.toUpperCase().replace(/^#/,"")},yv=function(s,e){var t="";try{for(;s&&s.nodeType!==9;){var r=s,o=r.id?"#"+r.id:M2(r)+(r.classList&&r.classList.value&&r.classList.value.trim()&&r.classList.value.trim().length?"."+r.classList.value.trim().replace(/\s+/g,"."):"");if(t.length+o.length>(e||100)-1)return t||o;if(t=t?o+">"+t:o,r.id)break;s=r.parentNode}}catch{}return t},oS=-1,P2=function(){return oS},au=function(s){addEventListener("pageshow",function(e){e.persisted&&(oS=e.timeStamp,s(e))},!0)},_v=function(){var s=Zh();return s&&s.activationStart||0},yr=function(s,e){var t=Zh(),r="navigate";return P2()>=0?r="back-forward-cache":t&&(document.prerendering||_v()>0?r="prerender":document.wasDiscarded?r="restore":t.type&&(r=t.type.replace(/_/g,"-"))),{name:s,value:e===void 0?-1:e,rating:"good",delta:0,entries:[],id:"v4-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:r}},tl=function(s,e,t){try{if(PerformanceObserver.supportedEntryTypes.includes(s)){var r=new PerformanceObserver(function(o){Promise.resolve().then(function(){e(o.getEntries())})});return r.observe(Object.assign({type:s,buffered:!0},t||{})),r}}catch{}},_r=function(s,e,t,r){var o,l;return function(h){e.value>=0&&(h||r)&&((l=e.value-(o||0))||o===void 0)&&(o=e.value,e.delta=l,e.rating=function(m,g){return m>g[1]?"poor":m>g[0]?"needs-improvement":"good"}(e.value,t),s(e))}},Ev=function(s){requestAnimationFrame(function(){return requestAnimationFrame(function(){return s()})})},Jh=function(s){document.addEventListener("visibilitychange",function(){document.visibilityState==="hidden"&&s()})},Tv=function(s){var e=!1;return function(){e||(s(),e=!0)}},Ro=-1,Fb=function(){return document.visibilityState!=="hidden"||document.prerendering?1/0:0},Nh=function(s){document.visibilityState==="hidden"&&Ro>-1&&(Ro=s.type==="visibilitychange"?s.timeStamp:0,k2())},qb=function(){addEventListener("visibilitychange",Nh,!0),addEventListener("prerenderingchange",Nh,!0)},k2=function(){removeEventListener("visibilitychange",Nh,!0),removeEventListener("prerenderingchange",Nh,!0)},lS=function(){return Ro<0&&(Ro=Fb(),qb(),au(function(){setTimeout(function(){Ro=Fb(),qb()},0)})),{get firstHiddenTime(){return Ro}}},bv=function(s){document.prerendering?addEventListener("prerenderingchange",function(){return s()},!0):s()},zb=[1800,3e3],V2=function(s,e){e=e||{},bv(function(){var t,r=lS(),o=yr("FCP"),l=tl("paint",function(h){h.forEach(function(m){m.name==="first-contentful-paint"&&(l.disconnect(),m.startTime<r.firstHiddenTime&&(o.value=Math.max(m.startTime-_v(),0),o.entries.push(m),t(!0)))})});l&&(t=_r(s,o,zb,e.reportAllChanges),au(function(h){o=yr("FCP"),t=_r(s,o,zb,e.reportAllChanges),Ev(function(){o.value=performance.now()-h.timeStamp,t(!0)})}))})},Bb=[.1,.25],L2=function(s,e){(function(t,r){r=r||{},V2(Tv(function(){var o,l=yr("CLS",0),h=0,m=[],g=function(_){_.forEach(function(b){if(!b.hadRecentInput){var A=m[0],M=m[m.length-1];h&&b.startTime-M.startTime<1e3&&b.startTime-A.startTime<5e3?(h+=b.value,m.push(b)):(h=b.value,m=[b])}}),h>l.value&&(l.value=h,l.entries=m,o())},v=tl("layout-shift",g);v&&(o=_r(t,l,Bb,r.reportAllChanges),Jh(function(){g(v.takeRecords()),o(!0)}),au(function(){h=0,l=yr("CLS",0),o=_r(t,l,Bb,r.reportAllChanges),Ev(function(){return o()})}),setTimeout(o,0))}))})(function(t){var r=function(o){var l,h={};if(o.entries.length){var m=o.entries.reduce(function(v,_){return v&&v.value>_.value?v:_});if(m&&m.sources&&m.sources.length){var g=(l=m.sources).find(function(v){return v.node&&v.node.nodeType===1})||l[0];g&&(h={largestShiftTarget:yv(g.node),largestShiftTime:m.startTime,largestShiftValue:m.value,largestShiftSource:g,largestShiftEntry:m,loadState:aS(m.startTime)})}}return Object.assign(o,{attribution:h})}(t);s(r)},e)},cS=0,bp=1/0,Ud=0,U2=function(s){s.forEach(function(e){e.interactionId&&(bp=Math.min(bp,e.interactionId),Ud=Math.max(Ud,e.interactionId),cS=Ud?(Ud-bp)/7+1:0)})},uS=function(){return ng?cS:performance.interactionCount||0},F2=function(){"interactionCount"in performance||ng||(ng=tl("event",U2,{type:"event",buffered:!0,durationThreshold:0}))},ds=[],xc=new Map,dS=0,q2=function(){var s=Math.min(ds.length-1,Math.floor((uS()-dS)/50));return ds[s]},hS=[],z2=function(s){if(hS.forEach(function(o){return o(s)}),s.interactionId||s.entryType==="first-input"){var e=ds[ds.length-1],t=xc.get(s.interactionId);if(t||ds.length<10||s.duration>e.latency){if(t)s.duration>t.latency?(t.entries=[s],t.latency=s.duration):s.duration===t.latency&&s.startTime===t.entries[0].startTime&&t.entries.push(s);else{var r={id:s.interactionId,latency:s.duration,entries:[s]};xc.set(r.id,r),ds.push(r)}ds.sort(function(o,l){return l.latency-o.latency}),ds.length>10&&ds.splice(10).forEach(function(o){return xc.delete(o.id)})}}},Av=function(s){var e=self.requestIdleCallback||self.setTimeout,t=-1;return s=Tv(s),document.visibilityState==="hidden"?s():(t=e(s),Jh(s)),t},Hb=[200,500],B2=function(s,e){"PerformanceEventTiming"in self&&"interactionId"in PerformanceEventTiming.prototype&&(e=e||{},bv(function(){var t;F2();var r,o=yr("INP"),l=function(m){Av(function(){m.forEach(z2);var g=q2();g&&g.latency!==o.value&&(o.value=g.latency,o.entries=g.entries,r())})},h=tl("event",l,{durationThreshold:(t=e.durationThreshold)!==null&&t!==void 0?t:40});r=_r(s,o,Hb,e.reportAllChanges),h&&(h.observe({type:"first-input",buffered:!0}),Jh(function(){l(h.takeRecords()),r(!0)}),au(function(){dS=uS(),ds.length=0,xc.clear(),o=yr("INP"),r=_r(s,o,Hb,e.reportAllChanges)}))}))},ko=[],rr=[],sg=0,Nv=new WeakMap,Vo=new Map,ig=-1,H2=function(s){ko=ko.concat(s),fS()},fS=function(){ig<0&&(ig=Av(G2))},G2=function(){Vo.size>10&&Vo.forEach(function(h,m){xc.has(m)||Vo.delete(m)});var s=ds.map(function(h){return Nv.get(h.entries[0])}),e=rr.length-50;rr=rr.filter(function(h,m){return m>=e||s.includes(h)});for(var t=new Set,r=0;r<rr.length;r++){var o=rr[r];mS(o.startTime,o.processingEnd).forEach(function(h){t.add(h)})}var l=ko.length-1-50;ko=ko.filter(function(h,m){return h.startTime>sg&&m>l||t.has(h)}),ig=-1};hS.push(function(s){s.interactionId&&s.target&&!Vo.has(s.interactionId)&&Vo.set(s.interactionId,s.target)},function(s){var e,t=s.startTime+s.duration;sg=Math.max(sg,s.processingEnd);for(var r=rr.length-1;r>=0;r--){var o=rr[r];if(Math.abs(t-o.renderTime)<=8){(e=o).startTime=Math.min(s.startTime,e.startTime),e.processingStart=Math.min(s.processingStart,e.processingStart),e.processingEnd=Math.max(s.processingEnd,e.processingEnd),e.entries.push(s);break}}e||(e={startTime:s.startTime,processingStart:s.processingStart,processingEnd:s.processingEnd,renderTime:t,entries:[s]},rr.push(e)),(s.interactionId||s.entryType==="first-input")&&Nv.set(s,e),fS()});var mS=function(s,e){for(var t,r=[],o=0;t=ko[o];o++)if(!(t.startTime+t.duration<s)){if(t.startTime>e)break;r.push(t)}return r},$2=function(s,e){Ub||(Ub=tl("long-animation-frame",H2)),B2(function(t){var r=function(o){var l=o.entries[0],h=Nv.get(l),m=l.processingStart,g=h.processingEnd,v=h.entries.sort(function(x,$){return x.processingStart-$.processingStart}),_=mS(l.startTime,g),b=o.entries.find(function(x){return x.target}),A=b&&b.target||Vo.get(l.interactionId),M=[l.startTime+l.duration,g].concat(_.map(function(x){return x.startTime+x.duration})),I=Math.max.apply(Math,M),U={interactionTarget:yv(A),interactionTargetElement:A,interactionType:l.name.startsWith("key")?"keyboard":"pointer",interactionTime:l.startTime,nextPaintTime:I,processedEventEntries:v,longAnimationFrameEntries:_,inputDelay:m-l.startTime,processingDuration:g-m,presentationDelay:Math.max(I-g,0),loadState:aS(l.startTime)};return Object.assign(o,{attribution:U})}(t);s(r)},e)},Gb=[2500,4e3],Ap={},K2=function(s,e){(function(t,r){r=r||{},bv(function(){var o,l=lS(),h=yr("LCP"),m=function(_){r.reportAllChanges||(_=_.slice(-1)),_.forEach(function(b){b.startTime<l.firstHiddenTime&&(h.value=Math.max(b.startTime-_v(),0),h.entries=[b],o())})},g=tl("largest-contentful-paint",m);if(g){o=_r(t,h,Gb,r.reportAllChanges);var v=Tv(function(){Ap[h.id]||(m(g.takeRecords()),g.disconnect(),Ap[h.id]=!0,o(!0))});["keydown","click"].forEach(function(_){addEventListener(_,function(){return Av(v)},{once:!0,capture:!0})}),Jh(v),au(function(_){h=yr("LCP"),o=_r(t,h,Gb,r.reportAllChanges),Ev(function(){h.value=performance.now()-_.timeStamp,Ap[h.id]=!0,o(!0)})})}})})(function(t){var r=function(o){var l={timeToFirstByte:0,resourceLoadDelay:0,resourceLoadDuration:0,elementRenderDelay:o.value};if(o.entries.length){var h=Zh();if(h){var m=h.activationStart||0,g=o.entries[o.entries.length-1],v=g.url&&performance.getEntriesByType("resource").filter(function(I){return I.name===g.url})[0],_=Math.max(0,h.responseStart-m),b=Math.max(_,v?(v.requestStart||v.startTime)-m:0),A=Math.max(b,v?v.responseEnd-m:0),M=Math.max(A,g.startTime-m);l={element:yv(g.element),timeToFirstByte:_,resourceLoadDelay:b-_,resourceLoadDuration:A-b,elementRenderDelay:M-A,navigationEntry:h,lcpEntry:g},g.url&&(l.url=g.url),v&&(l.lcpResourceEntry=v)}}return Object.assign(o,{attribution:l})}(t);s(r)},e)};const $b="@firebase/performance",rg="0.7.6";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pS=rg,Y2="FB-PERF-TRACE-START",Q2="FB-PERF-TRACE-STOP",ag="FB-PERF-TRACE-MEASURE",gS="_wt_",vS="_fp",yS="_fcp",_S="_fid",ES="_lcp",X2="lcp_element",TS="_inp",W2="inp_interactionTarget",bS="_cls",Z2="cls_largestShiftTarget",AS="@firebase/performance/config",NS="@firebase/performance/configexpire",J2="performance",SS="Performance";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eP={"trace started":"Trace {$traceName} was started before.","trace stopped":"Trace {$traceName} is not running.","nonpositive trace startTime":"Trace {$traceName} startTime should be positive.","nonpositive trace duration":"Trace {$traceName} duration should be positive.","no window":"Window is not available.","no app id":"App id is not available.","no project id":"Project id is not available.","no api key":"Api key is not available.","invalid cc log":"Attempted to queue invalid cc event","FB not default":"Performance can only start when Firebase app instance is the default one.","RC response not ok":"RC response is not ok","invalid attribute name":"Attribute name {$attributeName} is invalid.","invalid attribute value":"Attribute value {$attributeValue} is invalid.","invalid custom metric name":"Custom metric name {$customMetricName} is invalid","invalid String merger input":"Input for String merger is invalid, contact support team to resolve.","already initialized":"initializePerformance() has already been called with different options. To avoid this error, call initializePerformance() with the same options as when it was originally called, or call getPerformance() to return the already initialized instance."},un=new Tr(J2,SS,eP);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Er=new Gc(SS);Er.logLevel=Le.INFO;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Np,wS;class Vt{constructor(e){if(this.window=e,!e)throw un.create("no window");this.performance=e.performance,this.PerformanceObserver=e.PerformanceObserver,this.windowLocation=e.location,this.navigator=e.navigator,this.document=e.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=e.localStorage),e.perfMetrics&&e.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=e.perfMetrics.onFirstInputDelay),this.onLCP=K2,this.onINP=$2,this.onCLS=L2}getUrl(){return this.windowLocation.href.split("?")[0]}mark(e){!this.performance||!this.performance.mark||this.performance.mark(e)}measure(e,t,r){!this.performance||!this.performance.measure||this.performance.measure(e,t,r)}getEntriesByType(e){return!this.performance||!this.performance.getEntriesByType?[]:this.performance.getEntriesByType(e)}getEntriesByName(e){return!this.performance||!this.performance.getEntriesByName?[]:this.performance.getEntriesByName(e)}getTimeOrigin(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)}requiredApisAvailable(){return!fetch||!Promise||!p0()?(Er.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1):ug()?!0:(Er.info("IndexedDB is not supported by current browser"),!1)}setupObserver(e,t){if(!this.PerformanceObserver)return;new this.PerformanceObserver(o=>{for(const l of o.getEntries())t(l)}).observe({entryTypes:[e]})}static getInstance(){return Np===void 0&&(Np=new Vt(wS)),Np}}function tP(s){wS=s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xS;function nP(s){const e=s.getId();return e.then(t=>{xS=t}),e}function Sv(){return xS}function sP(s){const e=s.getToken();return e.then(t=>{}),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kb(s,e){const t=s.length-e.length;if(t<0||t>1)throw un.create("invalid String merger input");const r=[];for(let o=0;o<s.length;o++)r.push(s.charAt(o)),e.length>o&&r.push(e.charAt(o));return r.join("")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sp;class Ln{constructor(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=Kb("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=Kb("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}getFlTransportFullUrl(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)}static getInstance(){return Sp===void 0&&(Sp=new Ln),Sp}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ic;(function(s){s[s.UNKNOWN=0]="UNKNOWN",s[s.VISIBLE=1]="VISIBLE",s[s.HIDDEN=2]="HIDDEN"})(Ic||(Ic={}));const iP=["firebase_","google_","ga_"],rP=new RegExp("^[a-zA-Z]\\w*$"),aP=40,oP=100;function lP(){const s=Vt.getInstance().navigator;return s?.serviceWorker?s.serviceWorker.controller?2:3:1}function cP(){switch(Vt.getInstance().document.visibilityState){case"visible":return Ic.VISIBLE;case"hidden":return Ic.HIDDEN;default:return Ic.UNKNOWN}}function uP(){const e=Vt.getInstance().navigator.connection;switch(e&&e.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}function dP(s){return s.length===0||s.length>aP?!1:!iP.some(t=>s.startsWith(t))&&!!s.match(rP)}function hP(s){return s.length!==0&&s.length<=oP}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IS(s){var e;const t=(e=s.options)===null||e===void 0?void 0:e.appId;if(!t)throw un.create("no app id");return t}function fP(s){var e;const t=(e=s.options)===null||e===void 0?void 0:e.projectId;if(!t)throw un.create("no project id");return t}function mP(s){var e;const t=(e=s.options)===null||e===void 0?void 0:e.apiKey;if(!t)throw un.create("no api key");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pP="0.0.1",us={loggingEnabled:!0},gP="FIREBASE_INSTALLATIONS_AUTH";function vP(s,e){const t=yP();return t?(Yb(t),Promise.resolve()):TP(s,e).then(Yb).then(r=>_P(r),()=>{})}function yP(){const s=Vt.getInstance().localStorage;if(!s)return;const e=s.getItem(NS);if(!e||!bP(e))return;const t=s.getItem(AS);if(t)try{return JSON.parse(t)}catch{return}}function _P(s){const e=Vt.getInstance().localStorage;!s||!e||(e.setItem(AS,JSON.stringify(s)),e.setItem(NS,String(Date.now()+Ln.getInstance().configTimeToLive*60*60*1e3)))}const EP="Could not fetch config, will use default configs";function TP(s,e){return sP(s.installations).then(t=>{const r=fP(s.app),o=mP(s.app),l=`https://firebaseremoteconfig.googleapis.com/v1/projects/${r}/namespaces/fireperf:fetch?key=${o}`,h=new Request(l,{method:"POST",headers:{Authorization:`${gP} ${t}`},body:JSON.stringify({app_instance_id:e,app_instance_id_token:t,app_id:IS(s.app),app_version:pS,sdk_version:pP})});return fetch(h).then(m=>{if(m.ok)return m.json();throw un.create("RC response not ok")})}).catch(()=>{Er.info(EP)})}function Yb(s){if(!s)return s;const e=Ln.getInstance(),t=s.entries||{};return t.fpr_enabled!==void 0?e.loggingEnabled=String(t.fpr_enabled)==="true":e.loggingEnabled=us.loggingEnabled,t.fpr_log_source?e.logSource=Number(t.fpr_log_source):us.logSource&&(e.logSource=us.logSource),t.fpr_log_endpoint_url?e.logEndPointUrl=t.fpr_log_endpoint_url:us.logEndPointUrl&&(e.logEndPointUrl=us.logEndPointUrl),t.fpr_log_transport_key?e.transportKey=t.fpr_log_transport_key:us.transportKey&&(e.transportKey=us.transportKey),t.fpr_vc_network_request_sampling_rate!==void 0?e.networkRequestsSamplingRate=Number(t.fpr_vc_network_request_sampling_rate):us.networkRequestsSamplingRate!==void 0&&(e.networkRequestsSamplingRate=us.networkRequestsSamplingRate),t.fpr_vc_trace_sampling_rate!==void 0?e.tracesSamplingRate=Number(t.fpr_vc_trace_sampling_rate):us.tracesSamplingRate!==void 0&&(e.tracesSamplingRate=us.tracesSamplingRate),e.logTraceAfterSampling=Qb(e.tracesSamplingRate),e.logNetworkAfterSampling=Qb(e.networkRequestsSamplingRate),s}function bP(s){return Number(s)>Date.now()}function Qb(s){return Math.random()<=s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wv=1,wp;function CS(s){return wv=2,wp=wp||NP(s),wp}function AP(){return wv===3}function NP(s){return SP().then(()=>nP(s.installations)).then(e=>vP(s,e)).then(()=>Xb(),()=>Xb())}function SP(){const s=Vt.getInstance().document;return new Promise(e=>{if(s&&s.readyState!=="complete"){const t=()=>{s.readyState==="complete"&&(s.removeEventListener("readystatechange",t),e())};s.addEventListener("readystatechange",t)}else e()})}function Xb(){wv=3}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RS=10*1e3,wP=5.5*1e3,xP=1e3,jS=3;let Wd=jS,va=[],Wb=!1;function IP(){Wb||(xv(wP),Wb=!0)}function xv(s){setTimeout(()=>{Wd<=0||(va.length>0&&DS(),xv(RS))},s)}function DS(){const s=va.splice(0,xP),e=s.map(r=>({source_extension_json_proto3:r.message,event_time_ms:String(r.eventTime)})),t={request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:Ln.getInstance().logSource,log_event:e};CP(t).then(()=>{Wd=jS}).catch(()=>{va=[...s,...va],Wd--,Er.info(`Tries left: ${Wd}.`),xv(RS)})}function CP(s){const e=Ln.getInstance().getFlTransportFullUrl(),t=JSON.stringify(s);return navigator.sendBeacon&&navigator.sendBeacon(e,t)?Promise.resolve():fetch(e,{method:"POST",body:t,keepalive:!0}).then()}function RP(s){if(!s.eventTime||!s.message)throw un.create("invalid cc log");va=[...va,s]}function jP(s){return(...e)=>{const t=s(...e);RP({message:t,eventTime:Date.now()})}}function DP(){for(;va.length>0;)DS()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cc;function OS(s,e){Cc||(Cc={send:jP(PP),flush:DP}),Cc.send(s,e)}function Fd(s){const e=Ln.getInstance();!e.instrumentationEnabled&&s.isAuto||!e.dataCollectionEnabled&&!s.isAuto||Vt.getInstance().requiredApisAvailable()&&(AP()?xp(s):CS(s.performanceController).then(()=>xp(s),()=>xp(s)))}function OP(){Cc&&Cc.flush()}function xp(s){if(!Sv())return;const e=Ln.getInstance();!e.loggingEnabled||!e.logTraceAfterSampling||OS(s,1)}function MP(s){const e=Ln.getInstance();if(!e.instrumentationEnabled)return;const t=s.url,r=e.logEndPointUrl.split("?")[0],o=e.flTransportEndpointUrl.split("?")[0];t===r||t===o||!e.loggingEnabled||!e.logNetworkAfterSampling||OS(s,0)}function PP(s,e){return e===0?kP(s):VP(s)}function kP(s){const e={url:s.url,http_method:s.httpMethod||0,http_response_code:200,response_payload_bytes:s.responsePayloadBytes,client_start_time_us:s.startTimeUs,time_to_response_initiated_us:s.timeToResponseInitiatedUs,time_to_response_completed_us:s.timeToResponseCompletedUs},t={application_info:MS(s.performanceController.app),network_request_metric:e};return JSON.stringify(t)}function VP(s){const e={name:s.name,is_auto:s.isAuto,client_start_time_us:s.startTimeUs,duration_us:s.durationUs};Object.keys(s.counters).length!==0&&(e.counters=s.counters);const t=s.getAttributes();Object.keys(t).length!==0&&(e.custom_attributes=t);const r={application_info:MS(s.performanceController.app),trace_metric:e};return JSON.stringify(r)}function MS(s){return{google_app_id:IS(s),app_instance_id:Sv(),web_app_info:{sdk_version:pS,page_url:Vt.getInstance().getUrl(),service_worker_status:lP(),visibility_state:cP(),effective_connection_type:uP()},application_process_state:0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zb(s,e){const t=e;if(!t||t.responseStart===void 0)return;const r=Vt.getInstance().getTimeOrigin(),o=Math.floor((t.startTime+r)*1e3),l=t.responseStart?Math.floor((t.responseStart-t.startTime)*1e3):void 0,h=Math.floor((t.responseEnd-t.startTime)*1e3),m=t.name&&t.name.split("?")[0],g={performanceController:s,url:m,responsePayloadBytes:t.transferSize,startTimeUs:o,timeToResponseInitiatedUs:l,timeToResponseCompletedUs:h};MP(g)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LP=100,UP="_",FP=[vS,yS,_S,ES,bS,TS];function qP(s,e){return s.length===0||s.length>LP?!1:e&&e.startsWith(gS)&&FP.indexOf(s)>-1||!s.startsWith(UP)}function zP(s){const e=Math.floor(s);return e<s&&Er.info(`Metric value should be an Integer, setting the value as : ${e}.`),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc{constructor(e,t,r=!1,o){this.performanceController=e,this.name=t,this.isAuto=r,this.state=1,this.customAttributes={},this.counters={},this.api=Vt.getInstance(),this.randomId=Math.floor(Math.random()*1e6),this.isAuto||(this.traceStartMark=`${Y2}-${this.randomId}-${this.name}`,this.traceStopMark=`${Q2}-${this.randomId}-${this.name}`,this.traceMeasure=o||`${ag}-${this.randomId}-${this.name}`,o&&this.calculateTraceMetrics())}start(){if(this.state!==1)throw un.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2}stop(){if(this.state!==2)throw un.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),Fd(this)}record(e,t,r){if(e<=0)throw un.create("nonpositive trace startTime",{traceName:this.name});if(t<=0)throw un.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(t*1e3),this.startTimeUs=Math.floor(e*1e3),r&&r.attributes&&(this.customAttributes=Object.assign({},r.attributes)),r&&r.metrics)for(const o of Object.keys(r.metrics))isNaN(Number(r.metrics[o]))||(this.counters[o]=Math.floor(Number(r.metrics[o])));Fd(this)}incrementMetric(e,t=1){this.counters[e]===void 0?this.putMetric(e,t):this.putMetric(e,this.counters[e]+t)}putMetric(e,t){if(qP(e,this.name))this.counters[e]=zP(t??0);else throw un.create("invalid custom metric name",{customMetricName:e})}getMetric(e){return this.counters[e]||0}putAttribute(e,t){const r=dP(e),o=hP(t);if(r&&o){this.customAttributes[e]=t;return}if(!r)throw un.create("invalid attribute name",{attributeName:e});if(!o)throw un.create("invalid attribute value",{attributeValue:t})}getAttribute(e){return this.customAttributes[e]}removeAttribute(e){this.customAttributes[e]!==void 0&&delete this.customAttributes[e]}getAttributes(){return Object.assign({},this.customAttributes)}setStartTime(e){this.startTimeUs=e}setDuration(e){this.durationUs=e}calculateTraceMetrics(){const e=this.api.getEntriesByName(this.traceMeasure),t=e&&e[0];t&&(this.durationUs=Math.floor(t.duration*1e3),this.startTimeUs=Math.floor((t.startTime+this.api.getTimeOrigin())*1e3))}static createOobTrace(e,t,r,o,l){const h=Vt.getInstance().getUrl();if(!h)return;const m=new zc(e,gS+h,!0),g=Math.floor(Vt.getInstance().getTimeOrigin()*1e3);m.setStartTime(g),t&&t[0]&&(m.setDuration(Math.floor(t[0].duration*1e3)),m.putMetric("domInteractive",Math.floor(t[0].domInteractive*1e3)),m.putMetric("domContentLoadedEventEnd",Math.floor(t[0].domContentLoadedEventEnd*1e3)),m.putMetric("loadEventEnd",Math.floor(t[0].loadEventEnd*1e3)));const v="first-paint",_="first-contentful-paint";if(r){const b=r.find(M=>M.name===v);b&&b.startTime&&m.putMetric(vS,Math.floor(b.startTime*1e3));const A=r.find(M=>M.name===_);A&&A.startTime&&m.putMetric(yS,Math.floor(A.startTime*1e3)),l&&m.putMetric(_S,Math.floor(l*1e3))}this.addWebVitalMetric(m,ES,X2,o.lcp),this.addWebVitalMetric(m,bS,Z2,o.cls),this.addWebVitalMetric(m,TS,W2,o.inp),Fd(m),OP()}static addWebVitalMetric(e,t,r,o){o&&(e.putMetric(t,Math.floor(o.value*1e3)),o.elementAttribution&&e.putAttribute(r,o.elementAttribution))}static createUserTimingTrace(e,t){const r=new zc(e,t,!1,t);Fd(r)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zd={},Jb=!1,PS;function e0(s){Sv()&&(setTimeout(()=>HP(s),0),setTimeout(()=>BP(s),0),setTimeout(()=>GP(s),0))}function BP(s){const e=Vt.getInstance(),t=e.getEntriesByType("resource");for(const r of t)Zb(s,r);e.setupObserver("resource",r=>Zb(s,r))}function HP(s){const e=Vt.getInstance();"onpagehide"in window?e.document.addEventListener("pagehide",()=>Ip(s)):e.document.addEventListener("unload",()=>Ip(s)),e.document.addEventListener("visibilitychange",()=>{e.document.visibilityState==="hidden"&&Ip(s)}),e.onFirstInputDelay&&e.onFirstInputDelay(t=>{PS=t}),e.onLCP(t=>{var r;Zd.lcp={value:t.value,elementAttribution:(r=t.attribution)===null||r===void 0?void 0:r.element}}),e.onCLS(t=>{var r;Zd.cls={value:t.value,elementAttribution:(r=t.attribution)===null||r===void 0?void 0:r.largestShiftTarget}}),e.onINP(t=>{var r;Zd.inp={value:t.value,elementAttribution:(r=t.attribution)===null||r===void 0?void 0:r.interactionTarget}})}function GP(s){const e=Vt.getInstance(),t=e.getEntriesByType("measure");for(const r of t)t0(s,r);e.setupObserver("measure",r=>t0(s,r))}function t0(s,e){const t=e.name;t.substring(0,ag.length)!==ag&&zc.createUserTimingTrace(s,t)}function Ip(s){if(!Jb){Jb=!0;const e=Vt.getInstance(),t=e.getEntriesByType("navigation"),r=e.getEntriesByType("paint");setTimeout(()=>{zc.createOobTrace(s,t,r,Zd,PS)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $P{constructor(e,t){this.app=e,this.installations=t,this.initialized=!1}_init(e){this.initialized||(e?.dataCollectionEnabled!==void 0&&(this.dataCollectionEnabled=e.dataCollectionEnabled),e?.instrumentationEnabled!==void 0&&(this.instrumentationEnabled=e.instrumentationEnabled),Vt.getInstance().requiredApisAvailable()?dg().then(t=>{t&&(IP(),CS(this).then(()=>e0(this),()=>e0(this)),this.initialized=!0)}).catch(t=>{Er.info(`Environment doesn't support IndexedDB: ${t}`)}):Er.info('Firebase Performance cannot start if the browser does not support "Fetch" and "Promise", or cookies are disabled.'))}set instrumentationEnabled(e){Ln.getInstance().instrumentationEnabled=e}get instrumentationEnabled(){return Ln.getInstance().instrumentationEnabled}set dataCollectionEnabled(e){Ln.getInstance().dataCollectionEnabled=e}get dataCollectionEnabled(){return Ln.getInstance().dataCollectionEnabled}}const KP="[DEFAULT]";function YP(s=$c()){return s=lt(s),Ni(s,"performance").getImmediate()}const QP=(s,{options:e})=>{const t=s.getProvider("app").getImmediate(),r=s.getProvider("installations-internal").getImmediate();if(t.name!==KP)throw un.create("FB not default");if(typeof window>"u")throw un.create("no window");tP(window);const o=new $P(t,r);return o._init(e),o};function XP(){ts(new qn("performance",QP,"PUBLIC")),dn($b,rg),dn($b,rg,"esm2017")}XP();const WP={apiKey:"AIzaSyCbU834quCY8hjSffRwljJLgZrcxK8i2F4",authDomain:"liquidacionapp-62962.firebaseapp.com",projectId:"liquidacionapp-62962",storageBucket:"liquidacionapp-62962.firebasestorage.app",messagingSenderId:"851382130132",appId:"1:851382130132:web:eaba38fab449f14fb5b241"},ou=_0(WP);typeof window<"u"&&R2(ou);typeof window<"u"&&YP(ou);const Rc=S1(ou),rt=SO(ou);dM(ou);const hs={ADMIN:"admin",CONTADOR:"contador",CLIENTE:"cliente"},dt={MANAGE_INVENTORY:"canManageInventory",CREATE_MOVEMENTS:"canCreateMovements",VIEW_ALL_MOVEMENTS:"canViewAllMovements",MANAGE_VEHICLES:"canManageVehicles",MANAGE_SUPPLIERS:"canManageSuppliers",VIEW_REPORTS:"canViewReports",EXPORT_REPORTS:"canExportReports",MODIFY_SETTINGS:"canModifySettings"},ZP="contacto.evert@gmail.com",kS=s=>{switch(s){case hs.ADMIN:return{[dt.MANAGE_INVENTORY]:!0,[dt.CREATE_MOVEMENTS]:!0,[dt.VIEW_ALL_MOVEMENTS]:!0,[dt.MANAGE_VEHICLES]:!0,[dt.MANAGE_SUPPLIERS]:!0,[dt.VIEW_REPORTS]:!0,[dt.EXPORT_REPORTS]:!0,[dt.MODIFY_SETTINGS]:!0};case hs.CONTADOR:return{[dt.MANAGE_INVENTORY]:!0,[dt.CREATE_MOVEMENTS]:!0,[dt.VIEW_ALL_MOVEMENTS]:!0,[dt.MANAGE_VEHICLES]:!1,[dt.MANAGE_SUPPLIERS]:!1,[dt.VIEW_REPORTS]:!0,[dt.EXPORT_REPORTS]:!0,[dt.MODIFY_SETTINGS]:!1};case hs.CLIENTE:default:return{[dt.MANAGE_INVENTORY]:!1,[dt.CREATE_MOVEMENTS]:!0,[dt.VIEW_ALL_MOVEMENTS]:!1,[dt.MANAGE_VEHICLES]:!1,[dt.MANAGE_SUPPLIERS]:!1,[dt.VIEW_REPORTS]:!1,[dt.EXPORT_REPORTS]:!1,[dt.MODIFY_SETTINGS]:!1}}},JP=s=>s===ZP?hs.ADMIN:hs.CLIENTE,Ho=()=>"artifacts/1:851382130132:web:eaba38fab449f14fb5b241/invitations",ek=()=>{const s="ABCDEFGHIJKLMNPQRSTUVWXYZ123456789";let e="";for(let t=0;t<8;t++)e+=s.charAt(Math.floor(Math.random()*s.length));return e},tk=async(s,e)=>{try{const t=await ef(e);if(!t.success||t.userData.role!=="admin")return{success:!1,error:"Solo administradores pueden crear invitaciones"};let r,o=!1,l=0;for(;!o&&l<10;){r=ek();const g=ft(wn(rt,Ho()),Mt("code","==",r));(await Ir(g)).empty&&(o=!0),l++}if(!o)return{success:!1,error:"No se pudo generar un código único"};const h=xn(wn(rt,Ho())),m={code:r,targetEmail:s.email.toLowerCase(),targetRole:s.role||hs.CLIENTE,targetName:s.name||"",status:"pending",appContext:"combustibles",expiresAt:new Date(Date.now()+7*24*60*60*1e3),createdAt:vs(),createdBy:e,usedAt:null,usedBy:null};return await dv(h,m),console.log("🎫 Invitación creada:",{code:r,email:s.email,role:s.role}),{success:!0,invitation:{id:h.id,code:r,...m}}}catch(t){return console.error("Error creating invitation:",t),{success:!1,error:t.message}}},VS=async s=>{try{const e=ft(wn(rt,Ho()),Mt("code","==",s.toUpperCase()),Mt("status","==","pending")),t=await Ir(e);if(t.empty)return{success:!1,error:"Código de invitación inválido o expirado"};const r=t.docs[0],o=r.data(),l=new Date,h=o.expiresAt.toDate();return l>h?{success:!1,error:"Código de invitación expirado"}:{success:!0,invitation:{id:r.id,...o}}}catch(e){return console.error("Error validating invitation:",e),{success:!1,error:e.message}}},nk=async(s,e)=>{try{const t=xn(rt,Ho(),s);return await Yh(t,{status:"used",usedAt:vs(),usedBy:e}),{success:!0}}catch(t){return console.error("Error marking invitation as used:",t),{success:!1,error:t.message}}},sk=async s=>{try{const e=await ef(s);if(!e.success||e.userData.role!=="admin")return{success:!1,error:"Solo administradores pueden ver invitaciones"};const t=ft(wn(rt,Ho())),r=await Ir(t),o=[];return r.forEach(l=>{o.push({id:l.id,...l.data()})}),o.sort((l,h)=>{const m=l.createdAt?.toDate()||new Date(0);return(h.createdAt?.toDate()||new Date(0))-m}),{success:!0,invitations:o}}catch(e){return console.error("Error getting invitations:",e),{success:!1,error:e.message}}},ik=async(s,e)=>{try{const t=await ef(e);if(!t.success||t.userData.role!=="admin")return{success:!1,error:"Solo administradores pueden cancelar invitaciones"};const r=xn(rt,Ho(),s);return await Yh(r,{status:"cancelled",cancelledAt:vs(),cancelledBy:e}),{success:!0}}catch(t){return console.error("Error cancelling invitation:",t),{success:!1,error:t.message}}},rk=s=>kS(s.targetRole),LS=async(s,e={})=>{const t=xn(rt,"artifacts/1:851382130132:web:eaba38fab449f14fb5b241/users",s.uid);try{const r=await el(t);if(r.exists())return{success:!0,userData:r.data(),isNewUser:!1};{const o=JP(s.email),l={uid:s.uid,email:s.email,displayName:s.displayName||"",photoURL:s.photoURL||"",role:o,emailVerified:s.emailVerified,combustiblesPermissions:kS(o),createdAt:new Date().toISOString(),lastLogin:new Date().toISOString(),...e};return await dv(t,l),{success:!0,userData:l,isNewUser:!0}}}catch(r){return console.error("Error creating/updating user profile:",r),{success:!1,error:r.message}}},n0=async(s,e,t={})=>{const r=xn(rt,"artifacts/1:851382130132:web:eaba38fab449f14fb5b241/users",s.uid);try{const o=await el(r);if(o.exists())return{success:!0,userData:o.data(),isNewUser:!1};const l=await VS(e);if(!l.success)return l;const h=l.invitation;if(h.targetEmail!==s.email.toLowerCase())return{success:!1,error:"El código de invitación no corresponde a este email"};const m={uid:s.uid,email:s.email,displayName:s.displayName||h.targetName||"",photoURL:s.photoURL||"",role:h.targetRole,emailVerified:s.emailVerified,combustiblesPermissions:rk(h),invitationUsed:h.id,createdAt:new Date().toISOString(),lastLogin:new Date().toISOString(),...t};return await dv(r,m),await nk(h.id,s.uid),console.log("👤 Usuario creado con invitación:",{email:s.email,role:h.targetRole,invitationCode:h.code}),{success:!0,userData:m,isNewUser:!0}}catch(o){return console.error("Error creating user profile with invitation:",o),{success:!1,error:o.message}}},ef=async s=>{try{const e=xn(rt,"artifacts/1:851382130132:web:eaba38fab449f14fb5b241/users",s),t=await el(e);return t.exists()?{success:!0,userData:t.data()}:{success:!1,error:"Usuario no encontrado"}}catch(e){return console.error("Error fetching user profile:",e),{success:!1,error:e.message}}},US=ie.createContext(),Ca=()=>{const s=ie.useContext(US);if(s===void 0)throw new Error("useCombustibles must be used within a CombustiblesProvider");return s},ak=({children:s})=>{const[e,t]=ie.useState(null),[r,o]=ie.useState(null),[l,h]=ie.useState(!0),[m,g]=ie.useState(null),[v,_]=ie.useState([]),[b,A]=ie.useState([]),[M,I]=ie.useState([]),[U,x]=ie.useState([]);ie.useEffect(()=>{const R=fR(Rc,async D=>{try{if(h(!0),D){t(D);let k=await ef(D.uid);k.success||(k=await LS(D,{provider:"existing_account",appContext:"combustibles"})),k.success?o(k.userData):g("Error cargando perfil de usuario")}else t(null),o(null),_([]),A([]),I([]),x([])}catch(k){console.error("Error en autenticación:",k),g("Error de autenticación")}finally{h(!1)}});return()=>R()},[]);const S={user:e,userProfile:r,loading:l,error:m,hasPermission:R=>r?.combustiblesPermissions?.[R]||!1,isAdmin:()=>r?.role==="admin",isCounterOrAbove:()=>r?.role==="admin"||r?.role==="contador",inventory:v,movements:b,vehicles:M,suppliers:U,setInventory:_,setMovements:A,setVehicles:I,setSuppliers:x,refreshInventory:async()=>{console.log("Refrescando inventario...")},refreshMovements:async()=>{console.log("Refrescando movimientos...")},refreshVehicles:async()=>{console.log("Refrescando vehículos...")},refreshSuppliers:async()=>{console.log("Refrescando proveedores...")}};return u.jsx(US.Provider,{value:S,children:s})},ok=({children:s,currentView:e,onViewChange:t})=>{const{userProfile:r,isAdmin:o,isCounterOrAbove:l}=Ca(),[h,m]=ie.useState(!1),g=[{id:"dashboard",name:"Dashboard",icon:"📊",description:"Vista general",requiredPermission:null},{id:"inventory",name:"Inventario",icon:"🛢️",description:"Gestión de stock",requiredPermission:"canManageInventory"},{id:"movements",name:"Movimientos",icon:"📈",description:"Entradas y salidas",requiredPermission:"canCreateMovements"},{id:"vehicles",name:"Vehículos",icon:"🚜",description:"Maquinaria forestal",requiredPermission:null},{id:"suppliers",name:"Proveedores",icon:"🏪",description:"Gestión de proveedores",requiredPermission:"canManageSuppliers"},{id:"reports",name:"Reportes",icon:"📋",description:"Análisis y reportes",requiredPermission:"canViewReports"},{id:"admin",name:"Administración",icon:"⚙️",description:"Gestión de usuarios",requiredPermission:"admin"}],v=M=>{t(M),m(!1)},_=M=>M?M==="admin"?o():r?.combustiblesPermissions?.[M]||!1:!0,b=g.filter(M=>_(M.requiredPermission)),A=async()=>{try{await mR(Rc)}catch(M){console.error("Error al cerrar sesión:",M)}};return u.jsxs("div",{className:"dashboard-layout",children:[u.jsx("header",{className:"dashboard-header",children:u.jsxs("div",{className:"header-content",children:[u.jsx("button",{className:"sidebar-toggle",onClick:()=>m(!h),children:"☰"}),u.jsxs("div",{className:"header-title",children:[u.jsx("h1",{children:"⛽ Gestión de Combustibles"}),u.jsx("span",{className:"subtitle",children:"Forestech Colombia"})]}),u.jsxs("div",{className:"header-user",children:[u.jsxs("div",{className:"user-info",children:[u.jsx("span",{className:"user-name",children:r?.displayName||r?.email}),u.jsx("span",{className:"user-role",children:r?.role})]}),u.jsx("div",{className:"user-avatar",children:r?.photoURL?u.jsx("img",{src:r.photoURL,alt:"Avatar"}):u.jsx("div",{className:"avatar-placeholder",children:(r?.displayName||r?.email||"U").charAt(0).toUpperCase()})}),u.jsx("button",{className:"logout-button",onClick:A,title:"Cerrar sesión",children:"🚪"})]})]})}),u.jsxs("div",{className:"dashboard-body",children:[u.jsxs("aside",{className:`dashboard-sidebar ${h?"open":""}`,children:[u.jsx("nav",{className:"sidebar-nav",children:b.map(M=>u.jsxs("button",{className:`nav-item ${e===M.id?"active":""}`,onClick:()=>v(M.id),children:[u.jsx("span",{className:"nav-icon",children:M.icon}),u.jsxs("div",{className:"nav-content",children:[u.jsx("span",{className:"nav-name",children:M.name}),u.jsx("span",{className:"nav-description",children:M.description})]})]},M.id))}),u.jsx("div",{className:"sidebar-footer",children:u.jsxs("div",{className:"user-permissions",children:[u.jsx("h4",{children:"Permisos Activos:"}),u.jsxs("div",{className:"permission-list",children:[o()&&u.jsx("span",{className:"permission admin",children:"👑 Administrador"}),l()&&u.jsx("span",{className:"permission counter",children:"📊 Gestión Operativa"}),_("canManageInventory")&&u.jsx("span",{className:"permission",children:"🛢️ Inventario"}),_("canManageVehicles")&&u.jsx("span",{className:"permission",children:"🚜 Vehículos"})]})]})})]}),u.jsx("main",{className:"dashboard-main",children:u.jsx("div",{className:"main-content",children:s})})]}),h&&u.jsx("div",{className:"sidebar-overlay",onClick:()=>m(!1)})]})},fa={DIESEL:"diesel",GASOLINE:"gasoline",ACPM:"acpm",LUBRICANTS:"lubricants",TWO_STROKE:"two_stroke",MIXED:"mixed"},Go={[fa.DIESEL]:{name:"Diésel",description:"Combustible para maquinaria pesada",unit:"galones",category:"Combustible",color:"#fbbf24",icon:"🚛",density:.85,priceUnit:"COP/galón"},[fa.GASOLINE]:{name:"Gasolina",description:"Combustible para vehículos livianos",unit:"galones",category:"Combustible",color:"#ef4444",icon:"⛽",density:.75,priceUnit:"COP/galón"},[fa.ACPM]:{name:"ACPM",description:"Aceite Combustible Para Motor",unit:"galones",category:"Combustible",color:"#8b5cf6",icon:"🚜",density:.85,priceUnit:"COP/galón"},[fa.LUBRICANTS]:{name:"Lubricantes",description:"Aceites y lubricantes para mantenimiento",unit:"litros",category:"Mantenimiento",color:"#06b6d4",icon:"🛢️",density:.9,priceUnit:"COP/litro"},[fa.TWO_STROKE]:{name:"Mezcla 2T",description:"Mezcla para motores de 2 tiempos (motosierras)",unit:"litros",category:"Especializado",color:"#10b981",icon:"🪚",density:.78,priceUnit:"COP/litro"},[fa.MIXED]:{name:"Mixto",description:"Compatible con múltiples tipos de combustible",unit:"galones",category:"Flexible",color:"#64748b",icon:"🔄",density:.8,priceUnit:"COP/galón"}},vn={CRITICAL:"critical",LOW:"low",MEDIUM:"medium",HIGH:"high",FULL:"full"},jo={[vn.CRITICAL]:{label:"Crítico",color:"#dc2626",icon:"🚨",threshold:.1},[vn.LOW]:{label:"Bajo",color:"#ea580c",icon:"⚠️",threshold:.25},[vn.MEDIUM]:{label:"Medio",color:"#ca8a04",icon:"📊",threshold:.5},[vn.HIGH]:{label:"Alto",color:"#16a34a",icon:"✅",threshold:.75},[vn.FULL]:{label:"Completo",color:"#059669",icon:"🟢",threshold:1}},FS=(s,e)=>{if(e===0)return vn.CRITICAL;const t=s/e;return t<jo[vn.CRITICAL].threshold?vn.CRITICAL:t<jo[vn.LOW].threshold?vn.LOW:t<jo[vn.MEDIUM].threshold?vn.MEDIUM:t<jo[vn.HIGH].threshold?vn.HIGH:vn.FULL},$o="combustibles_inventory",lk=async(s,e)=>{try{const t=Go[s.fuelType];if(!t)return{success:!1,error:"Tipo de combustible no válido"};const r=ft(wn(rt,$o),Mt("fuelType","==",s.fuelType),Mt("location","==",s.location));if(!(await Ir(r)).empty)return{success:!1,error:`Ya existe ${t.name} en ${s.location}`};const l={fuelType:s.fuelType,name:t.name,description:s.description||t.description,currentStock:Number(s.currentStock)||0,maxCapacity:Number(s.maxCapacity),minThreshold:Number(s.minThreshold)||s.maxCapacity*.15,unit:t.unit,location:s.location,pricePerUnit:Number(s.pricePerUnit)||0,supplier:s.supplier||"",status:s.status||"active",createdAt:new Date,createdBy:e,lastUpdated:new Date,updatedBy:e};return{success:!0,data:{id:(await kO(wn(rt,$o),l)).id,...l},message:`${t.name} agregado al inventario exitosamente`}}catch(t){return console.error("Error creating inventory item:",t),{success:!1,error:t.message}}},qS=async()=>{try{const s=ft(wn(rt,$o),Jo("fuelType","asc")),e=await Ir(s),t=[];return e.forEach(r=>{const o=r.data();t.push({id:r.id,...o,stockLevel:FS(o.currentStock,o.maxCapacity),stockPercentage:Math.round(o.currentStock/o.maxCapacity*100),needsRestock:o.currentStock<=o.minThreshold})}),{success:!0,data:t}}catch(s){return console.error("Error fetching inventory items:",s),{success:!1,error:s.message}}},ck=async(s,e,t)=>{try{const r=xn(rt,$o,s);if(!(await el(r)).exists())return{success:!1,error:"Item no encontrado"};const l={...e,lastUpdated:new Date,updatedBy:t};return delete l.id,delete l.createdAt,delete l.createdBy,await Yh(r,l),{success:!0,message:"Item actualizado exitosamente",data:{id:s,...l}}}catch(r){return console.error("Error updating inventory item:",r),{success:!1,error:r.message}}},uk=async s=>{try{const e=xn(rt,$o,s);return(await el(e)).exists()?(await PO(e),{success:!0,message:"Item eliminado exitosamente"}):{success:!1,error:"Item no encontrado"}}catch(e){return console.error("Error deleting inventory item:",e),{success:!1,error:e.message}}},zS=s=>{const e=ft(wn(rt,$o),Jo("fuelType","asc"));return hv(e,t=>{const r=[];t.forEach(o=>{const l=o.data();r.push({id:o.id,...l,stockLevel:FS(l.currentStock,l.maxCapacity),stockPercentage:Math.round(l.currentStock/l.maxCapacity*100),needsRestock:l.currentStock<=l.minThreshold})}),s(r)},t=>{console.error("Error in inventory subscription:",t),s(null,t)})},dk=async()=>{try{const s=await qS();if(!s.success)return s;const e=s.data,t={totalItems:e.length,activeItems:e.filter(r=>r.status==="active").length,lowStockItems:e.filter(r=>r.needsRestock).length,totalValue:e.reduce((r,o)=>r+o.currentStock*o.pricePerUnit,0),averageStockLevel:e.length>0?Math.round(e.reduce((r,o)=>r+o.stockPercentage,0)/e.length):0,byFuelType:{}};return e.forEach(r=>{t.byFuelType[r.fuelType]||(t.byFuelType[r.fuelType]={count:0,totalStock:0,totalCapacity:0,totalValue:0}),t.byFuelType[r.fuelType].count++,t.byFuelType[r.fuelType].totalStock+=r.currentStock,t.byFuelType[r.fuelType].totalCapacity+=r.maxCapacity,t.byFuelType[r.fuelType].totalValue+=r.currentStock*r.pricePerUnit}),{success:!0,data:t}}catch(s){return console.error("Error calculating inventory stats:",s),{success:!1,error:s.message}}},nl="combustibles_movements",s0="combustibles_inventory",Te={ENTRADA:"entrada",SALIDA:"salida",TRANSFERENCIA:"transferencia",AJUSTE:"ajuste"},Ue={PENDIENTE:"pendiente",COMPLETADO:"completado",CANCELADO:"cancelado"},hk=async s=>{try{vk(s);const e={...s,createdAt:vs(),updatedAt:vs(),status:Ue.PENDIENTE,totalValue:GS(s),effectiveDate:s.effectiveDate||vs()},t=await MN(rt,async r=>{const o=xn(wn(rt,nl));return r.set(o,e),await $S(r,e,o.id),o.id});return console.log("✅ Movimiento creado exitosamente:",t),t}catch(e){throw console.error("❌ Error al crear movimiento:",e),new Error(`Error al crear movimiento: ${e.message}`)}},fk=async(s={})=>{try{let e=wn(rt,nl);s.type&&(e=ft(e,Mt("type","==",s.type))),s.status&&(e=ft(e,Mt("status","==",s.status))),s.fuelType&&(e=ft(e,Mt("fuelType","==",s.fuelType))),s.vehicleId&&(e=ft(e,Mt("vehicleId","==",s.vehicleId))),e=ft(e,Jo("createdAt","desc"));const t=await Ir(e),r=[];return t.forEach(o=>{r.push({id:o.id,...o.data(),createdAt:o.data().createdAt?.toDate?.()||o.data().createdAt,updatedAt:o.data().updatedAt?.toDate?.()||o.data().updatedAt,effectiveDate:o.data().effectiveDate?.toDate?.()||o.data().effectiveDate})}),r}catch(e){throw console.error("❌ Error al obtener movimientos:",e),new Error(`Error al obtener movimientos: ${e.message}`)}},mk=async s=>{try{if(!s)throw new Error("ID de movimiento requerido");const e=xn(rt,nl,s),t=await el(e);return t.exists()?{id:t.id,...t.data(),createdAt:t.data().createdAt?.toDate?.()||t.data().createdAt,updatedAt:t.data().updatedAt?.toDate?.()||t.data().updatedAt,effectiveDate:t.data().effectiveDate?.toDate?.()||t.data().effectiveDate}:null}catch(e){throw console.error("❌ Error al obtener movimiento:",e),new Error(`Error al obtener movimiento: ${e.message}`)}},BS=async(s,e)=>{try{if(!s)throw new Error("ID de movimiento requerido");const t={...e,updatedAt:vs(),...e.quantity||e.unitPrice?{totalValue:GS(e)}:{}},r=xn(rt,nl,s);await Yh(r,t),console.log("✅ Movimiento actualizado exitosamente")}catch(t){throw console.error("❌ Error al actualizar movimiento:",t),new Error(`Error al actualizar movimiento: ${t.message}`)}},HS=(s,e={})=>{try{let t=wn(rt,nl);return e.type&&(t=ft(t,Mt("type","==",e.type))),e.status&&(t=ft(t,Mt("status","==",e.status))),t=ft(t,Jo("createdAt","desc")),hv(t,r=>{const o=[];r.forEach(l=>{o.push({id:l.id,...l.data(),createdAt:l.data().createdAt?.toDate?.()||l.data().createdAt,updatedAt:l.data().updatedAt?.toDate?.()||l.data().updatedAt,effectiveDate:l.data().effectiveDate?.toDate?.()||l.data().effectiveDate})}),s(o)},r=>{console.error("❌ Error en suscripción de movimientos:",r),s([],r)})}catch(t){throw console.error("❌ Error al configurar suscripción:",t),new Error(`Error en suscripción: ${t.message}`)}},pk=async s=>{try{const e=await mk(s);if(!e)throw new Error("Movimiento no encontrado");if(e.status!==Ue.PENDIENTE)throw new Error("Solo se pueden aprobar movimientos pendientes");await MN(rt,async t=>{const r=xn(rt,nl,s);t.update(r,{status:Ue.COMPLETADO,approvedAt:vs(),updatedAt:vs()}),await $S(t,e,s)}),console.log("✅ Movimiento aprobado exitosamente")}catch(e){throw console.error("❌ Error al aprobar movimiento:",e),new Error(`Error al aprobar movimiento: ${e.message}`)}},gk=async(s={})=>{try{const e=await fk(s),t={totalMovements:e.length,byType:{},byStatus:{},byFuelType:{},totalValue:0,totalQuantity:0,averageValue:0,thisMonth:0,lastMonth:0,thisWeek:0},r=new Date,o=new Date(r.getFullYear(),r.getMonth(),1),l=new Date(r.getFullYear(),r.getMonth()-1,1),h=new Date(r.setDate(r.getDate()-r.getDay()));return e.forEach(m=>{t.byType[m.type]=(t.byType[m.type]||0)+1,t.byStatus[m.status]=(t.byStatus[m.status]||0)+1,t.byFuelType[m.fuelType]=(t.byFuelType[m.fuelType]||0)+1,t.totalValue+=m.totalValue||0,t.totalQuantity+=m.quantity||0;const g=new Date(m.createdAt);g>=o&&t.thisMonth++,g>=l&&g<o&&t.lastMonth++,g>=h&&t.thisWeek++}),t.averageValue=t.totalMovements>0?t.totalValue/t.totalMovements:0,t}catch(e){throw console.error("❌ Error al calcular estadísticas:",e),new Error(`Error al calcular estadísticas: ${e.message}`)}},vk=s=>{const e=["type","fuelType","quantity","unitPrice"];for(const t of e)if(!s[t])throw new Error(`Campo requerido: ${t}`);if(!Object.values(Te).includes(s.type))throw new Error("Tipo de movimiento inválido");if(s.quantity<=0)throw new Error("La cantidad debe ser mayor a cero");if(s.unitPrice<0)throw new Error("El precio unitario no puede ser negativo");if(s.type===Te.SALIDA&&!s.vehicleId)throw new Error("Las salidas deben tener un vehículo asociado");if(s.type===Te.TRANSFERENCIA&&!s.destinationLocation)throw new Error("Las transferencias deben tener una ubicación destino")},GS=s=>(s.quantity||0)*(s.unitPrice||0),$S=async(s,e,t)=>{try{const r=ft(wn(rt,s0),Mt("fuelType","==",e.fuelType),Mt("location","==",e.location||"principal")),o=await Ir(r);if(o.empty)throw new Error(`No se encontró inventario para ${e.fuelType} en ${e.location||"ubicación principal"}`);const l=o.docs[0],h=l.data(),m=xn(rt,s0,l.id);let g=h.currentStock;switch(e.type){case Te.ENTRADA:g+=e.quantity;break;case Te.SALIDA:if(g-=e.quantity,g<0)throw new Error("Stock insuficiente para realizar la salida");break;case Te.AJUSTE:g+=e.quantity,g<0&&(g=0);break;case Te.TRANSFERENCIA:if(g-=e.quantity,g<0)throw new Error("Stock insuficiente para realizar la transferencia");break}s.update(m,{currentStock:g,lastMovement:{movementId:t,type:e.type,quantity:e.quantity,date:vs()},updatedAt:vs()})}catch(r){throw console.error("❌ Error al actualizar inventario:",r),r}},KS="combustibles_vehicles",pe={EXCAVADORA:"excavadora",BULLDOZER:"bulldozer",CARGADOR:"cargador",CAMION:"camion",GRUA:"grua",MOTOSIERRA:"motosierra",TRACTOR:"tractor",VOLQUETA:"volqueta",OTROS:"otros"},Re={ACTIVO:"activo",MANTENIMIENTO:"mantenimiento",INACTIVO:"inactivo",REPARACION:"reparacion"},yt={DIESEL:"Diesel",GASOLINA:"Gasolina",ACPM:"ACPM",MIXTO:"Mixto"},YS=async(s={})=>{try{let e=wn(rt,KS);s.type&&(e=ft(e,Mt("type","==",s.type))),s.status&&(e=ft(e,Mt("status","==",s.status))),s.fuelType&&(e=ft(e,Mt("fuelType","==",s.fuelType))),s.location&&(e=ft(e,Mt("currentLocation","==",s.location))),e=ft(e,Jo("vehicleId","asc"));const t=await Ir(e),r=[];return t.forEach(o=>{r.push({id:o.id,...o.data(),createdAt:o.data().createdAt?.toDate?.()||o.data().createdAt,updatedAt:o.data().updatedAt?.toDate?.()||o.data().updatedAt,lastMovementDate:o.data().lastMovementDate?.toDate?.()||o.data().lastMovementDate,lastMaintenanceDate:o.data().lastMaintenanceDate?.toDate?.()||o.data().lastMaintenanceDate})}),r}catch(e){throw console.error("❌ Error al obtener vehículos:",e),new Error(`Error al obtener vehículos: ${e.message}`)}},QS=(s,e={})=>{try{let t=wn(rt,KS);return e.type&&(t=ft(t,Mt("type","==",e.type))),e.status&&(t=ft(t,Mt("status","==",e.status))),t=ft(t,Jo("vehicleId","asc")),hv(t,r=>{const o=[];r.forEach(l=>{o.push({id:l.id,...l.data(),createdAt:l.data().createdAt?.toDate?.()||l.data().createdAt,updatedAt:l.data().updatedAt?.toDate?.()||l.data().updatedAt,lastMovementDate:l.data().lastMovementDate?.toDate?.()||l.data().lastMovementDate,lastMaintenanceDate:l.data().lastMaintenanceDate?.toDate?.()||l.data().lastMaintenanceDate})}),s(o)},r=>{console.error("❌ Error en suscripción de vehículos:",r),s([],r)})}catch(t){throw console.error("❌ Error al configurar suscripción:",t),new Error(`Error en suscripción: ${t.message}`)}},yk=async(s={})=>{try{const e=await YS(s),t={totalVehicles:e.length,byType:{},byStatus:{},byFuelType:{},totalFuelConsumed:0,totalHoursWorked:0,averageConsumption:0,mostActiveVehicle:null,leastActiveVehicle:null};let r=0,o=1/0;return e.forEach(l=>{t.byType[l.type]=(t.byType[l.type]||0)+1,t.byStatus[l.status]=(t.byStatus[l.status]||0)+1,t.byFuelType[l.fuelType]=(t.byFuelType[l.fuelType]||0)+1,t.totalFuelConsumed+=l.totalFuelConsumed||0,t.totalHoursWorked+=l.totalHoursWorked||0;const h=l.totalMovements||0;h>r&&(r=h,t.mostActiveVehicle=l),h<o&&h>0&&(o=h,t.leastActiveVehicle=l)}),t.totalHoursWorked>0&&(t.averageConsumption=t.totalFuelConsumed/t.totalHoursWorked),t}catch(e){throw console.error("❌ Error al calcular estadísticas:",e),new Error(`Error al calcular estadísticas: ${e.message}`)}},i0=()=>{const[s,e]=ie.useState({totalFuel:0,activeVehicles:0,pendingMovements:0,lowStockAlerts:0}),[t,r]=ie.useState([]),[o,l]=ie.useState(!0),[h,m]=ie.useState(null),[g,v]=ie.useState({inventory:!1,movements:!1,vehicles:!1});ie.useEffect(()=>{l(!0),m(null);const A=zS(U=>{const x=U.reduce((W,K)=>W+(K.currentStock||0),0),$=U.filter(W=>(W.currentStock||0)<(W.minThreshold||0)).length;e(W=>({...W,totalFuel:x,lowStockAlerts:$})),v(W=>({...W,inventory:!0}))}),M=HS(U=>{const x=U.filter(W=>W.status==="pending").length,$=U.sort((W,K)=>K.date.toMillis()-W.date.toMillis()).slice(0,5);e(W=>({...W,pendingMovements:x})),r($),v(W=>({...W,movements:!0}))},U=>{console.error("Error loading movements:",U),m("Error cargando movimientos")}),I=QS(U=>{const x=U.filter($=>$.status==="active").length;e($=>({...$,activeVehicles:x})),v($=>({...$,vehicles:!0}))},U=>{console.error("Error loading vehicles:",U),m("Error cargando vehículos")});return()=>{A(),M(),I()}},[]),ie.useEffect(()=>{Object.values(g).every(M=>M)&&l(!1)},[g]);const _=ie.useMemo(()=>A=>new Intl.NumberFormat("es-CO").format(A),[]),b=A=>{switch(A.type){case"entry":return`Entrada de ${A.quantity} ${A.unit} de ${A.fuelType}.`;case"exit":return`Salida de ${A.quantity} ${A.unit} para vehículo ${A.vehicleId||"N/A"}.`;case"transfer":return`Transferencia de ${A.quantity} ${A.unit} de ${A.fromLocation} a ${A.toLocation}.`;case"adjustment":return`Ajuste de inventario: ${A.quantity} ${A.unit} de ${A.fuelType}.`;default:return"Movimiento registrado."}};return o?u.jsxs("div",{className:"dashboard-main",children:[u.jsx("h1",{className:"dashboard-title",children:"Dashboard Operativo"}),u.jsx("p",{className:"dashboard-subtitle",children:"Cargando datos en tiempo real..."}),u.jsx("div",{className:"loading-spinner-container",children:u.jsx("div",{className:"loading-spinner"})})]}):h?u.jsxs("div",{className:"dashboard-main",children:[u.jsx("h1",{className:"dashboard-title",children:"Dashboard Operativo"}),u.jsxs("div",{className:"error-message",children:[u.jsxs("p",{children:["⚠️ ",h]}),u.jsx("button",{onClick:()=>window.location.reload(),children:"Reintentar"})]})]}):u.jsxs("div",{className:"dashboard-main",children:[u.jsx("h1",{className:"dashboard-title",children:"Dashboard Operativo"}),u.jsx("p",{className:"dashboard-subtitle",children:"Resumen general del estado de combustibles y maquinaria."}),u.jsxs("div",{className:"stats-grid",children:[u.jsxs("div",{className:"stat-card",children:[u.jsx("div",{className:"stat-icon fuel-icon",children:"🛢️"}),u.jsxs("div",{className:"stat-info",children:[u.jsx("p",{children:"Combustible Total"}),u.jsxs("h2",{children:[_(s.totalFuel)," gal"]})]})]}),u.jsxs("div",{className:"stat-card",children:[u.jsx("div",{className:"stat-icon vehicle-icon",children:"🚜"}),u.jsxs("div",{className:"stat-info",children:[u.jsx("p",{children:"Vehículos Activos"}),u.jsx("h2",{children:_(s.activeVehicles)})]})]}),u.jsxs("div",{className:"stat-card",children:[u.jsx("div",{className:"stat-icon movement-icon",children:"🔄"}),u.jsxs("div",{className:"stat-info",children:[u.jsx("p",{children:"Movimientos Pendientes"}),u.jsx("h2",{children:_(s.pendingMovements)})]})]}),u.jsxs("div",{className:`stat-card ${s.lowStockAlerts>0?"alert":""}`,children:[u.jsx("div",{className:"stat-icon alert-icon",children:"⚠️"}),u.jsxs("div",{className:"stat-info",children:[u.jsx("p",{children:"Alertas de Stock"}),u.jsx("h2",{children:_(s.lowStockAlerts)})]})]})]}),u.jsxs("div",{className:"dashboard-content",children:[u.jsxs("div",{className:"dashboard-widget",children:[u.jsx("h3",{children:"Actividad Reciente"}),t.length>0?u.jsx("ul",{children:t.map(A=>u.jsxs("li",{children:[u.jsx("span",{className:`movement-type-badge ${A.type}`,children:A.type}),b(A),u.jsx("span",{className:"movement-date",children:A.date.toDate().toLocaleDateString()})]},A.id))}):u.jsx("p",{children:"No hay movimientos recientes."})]}),u.jsxs("div",{className:"dashboard-widget",children:[u.jsx("h3",{children:"Consumo por Tipo de Combustible"}),u.jsx("div",{className:"chart-placeholder",children:u.jsx("p",{children:"Gráfico de consumo próximamente"})})]})]})]})},_k=({items:s,onEdit:e,onDelete:t,canManage:r})=>{const[o,l]=ie.useState("name"),[h,m]=ie.useState("asc"),g=I=>new Intl.NumberFormat("es-CO").format(I),v=I=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(I),_=I=>{const x=new Date-new Date(I.seconds?I.seconds*1e3:I),$=Math.floor(x/(1e3*60*60)),W=Math.floor($/24);return W>0?`${W}d`:$>0?`${$}h`:"ahora"},b=I=>{o===I?m(h==="asc"?"desc":"asc"):(l(I),m("asc"))},A=[...s].sort((I,U)=>{let x=I[o],$=U[o];return o==="lastUpdated"&&(x=new Date(x.seconds?x.seconds*1e3:x),$=new Date($.seconds?$.seconds*1e3:$)),x<$?h==="asc"?-1:1:x>$?h==="asc"?1:-1:0}),M=I=>o!==I?"↕️":h==="asc"?"↑":"↓";return u.jsxs("div",{className:"inventory-table-container",children:[u.jsx("div",{className:"table-wrapper",children:u.jsxs("table",{className:"inventory-table",children:[u.jsx("thead",{children:u.jsxs("tr",{children:[u.jsxs("th",{onClick:()=>b("name"),className:"sortable",children:["Combustible ",M("name")]}),u.jsxs("th",{onClick:()=>b("location"),className:"sortable",children:["Ubicación ",M("location")]}),u.jsxs("th",{onClick:()=>b("currentStock"),className:"sortable",children:["Stock Actual ",M("currentStock")]}),u.jsxs("th",{onClick:()=>b("stockPercentage"),className:"sortable",children:["Nivel ",M("stockPercentage")]}),u.jsxs("th",{onClick:()=>b("pricePerUnit"),className:"sortable",children:["Precio ",M("pricePerUnit")]}),u.jsx("th",{children:"Valor Total"}),u.jsxs("th",{onClick:()=>b("status"),className:"sortable",children:["Estado ",M("status")]}),u.jsxs("th",{onClick:()=>b("lastUpdated"),className:"sortable",children:["Actualizado ",M("lastUpdated")]}),r&&u.jsx("th",{children:"Acciones"})]})}),u.jsx("tbody",{children:A.map(I=>{const U=Go[I.fuelType],x=jo[I.stockLevel],$=I.currentStock*I.pricePerUnit;return u.jsxs("tr",{className:I.needsRestock?"needs-restock":"",children:[u.jsx("td",{className:"fuel-cell",children:u.jsxs("div",{className:"fuel-info",children:[u.jsx("span",{className:"fuel-icon",style:{color:U?.color},children:U?.icon}),u.jsxs("div",{children:[u.jsx("div",{className:"fuel-name",children:U?.name}),u.jsx("div",{className:"fuel-type",children:I.fuelType})]})]})}),u.jsx("td",{children:I.location}),u.jsxs("td",{className:"stock-cell",children:[u.jsxs("div",{className:"stock-info",children:[u.jsx("span",{className:"stock-amount",children:g(I.currentStock)}),u.jsxs("span",{className:"stock-unit",children:["/ ",g(I.maxCapacity)," ",I.unit]})]}),I.needsRestock&&u.jsx("div",{className:"restock-indicator",children:"⚠️ Bajo mínimo"})]}),u.jsx("td",{className:"level-cell",children:u.jsxs("div",{className:"level-info",children:[u.jsxs("div",{className:"level-badge",style:{backgroundColor:x?.color,color:"white"},children:[I.stockPercentage,"%"]}),u.jsx("div",{className:"level-bar",children:u.jsx("div",{className:"level-fill",style:{width:`${I.stockPercentage}%`,backgroundColor:x?.color}})})]})}),u.jsx("td",{className:"price-cell",children:u.jsxs("div",{className:"price-info",children:[u.jsx("span",{className:"price-amount",children:v(I.pricePerUnit)}),u.jsxs("span",{className:"price-unit",children:["/ ",I.unit]})]})}),u.jsx("td",{className:"value-cell",children:u.jsx("span",{className:"total-value",children:v($)})}),u.jsx("td",{className:"status-cell",children:u.jsxs("span",{className:`status-badge ${I.status}`,children:[u.jsx("span",{className:"status-dot"}),I.status==="active"?"Activo":I.status==="inactive"?"Inactivo":I.status==="maintenance"?"Mantenimiento":I.status]})}),u.jsx("td",{className:"updated-cell",children:u.jsx("span",{className:"time-ago",children:_(I.lastUpdated)})}),r&&u.jsx("td",{className:"actions-cell",children:u.jsxs("div",{className:"action-buttons",children:[u.jsx("button",{className:"btn btn-sm btn-secondary",onClick:()=>e(I),title:"Editar",children:"✏️"}),u.jsx("button",{className:"btn btn-sm btn-danger",onClick:()=>t(I),title:"Eliminar",children:"🗑️"})]})})]},I.id)})})]})}),u.jsxs("div",{className:"table-footer",children:[u.jsxs("div",{className:"table-info",children:[A.length," items ordenados por ",o,"(",h==="asc"?"ascendente":"descendente",")"]}),u.jsxs("div",{className:"table-legend",children:[u.jsxs("span",{className:"legend-item",children:[u.jsx("span",{className:"legend-dot critical"}),"Crítico"]}),u.jsxs("span",{className:"legend-item",children:[u.jsx("span",{className:"legend-dot low"}),"Bajo"]}),u.jsxs("span",{className:"legend-item",children:[u.jsx("span",{className:"legend-dot normal"}),"Normal"]}),u.jsxs("span",{className:"legend-item",children:[u.jsx("span",{className:"legend-dot high"}),"Alto"]})]})]})]})},Ek=({items:s,onEdit:e,onDelete:t,canManage:r})=>{const o=m=>new Intl.NumberFormat("es-CO").format(m),l=m=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(m),h=m=>{const v=new Date-new Date(m.seconds?m.seconds*1e3:m),_=Math.floor(v/(1e3*60*60)),b=Math.floor(_/24);return b>0?`hace ${b} día${b>1?"s":""}`:_>0?`hace ${_} hora${_>1?"s":""}`:"hace unos minutos"};return u.jsx("div",{className:"inventory-cards-grid",children:s.map(m=>{const g=Go[m.fuelType],v=jo[m.stockLevel],_=m.currentStock*m.pricePerUnit;return u.jsxs("div",{className:"inventory-card",children:[u.jsxs("div",{className:"card-header",children:[u.jsxs("div",{className:"fuel-info",children:[u.jsx("span",{className:"fuel-icon",style:{color:g?.color},children:g?.icon}),u.jsxs("div",{className:"fuel-details",children:[u.jsx("h3",{children:g?.name}),u.jsx("p",{className:"location",children:m.location})]})]}),u.jsx("div",{className:"stock-status",children:u.jsxs("span",{className:"status-badge",style:{backgroundColor:v?.color,color:"white"},children:[v?.icon," ",v?.label]})})]}),u.jsxs("div",{className:"stock-progress",children:[u.jsxs("div",{className:"progress-header",children:[u.jsxs("span",{className:"stock-text",children:[o(m.currentStock)," / ",o(m.maxCapacity)," ",m.unit]}),u.jsxs("span",{className:"percentage",children:[m.stockPercentage,"%"]})]}),u.jsx("div",{className:"progress-bar",children:u.jsx("div",{className:"progress-fill",style:{width:`${m.stockPercentage}%`,backgroundColor:v?.color}})}),m.needsRestock&&u.jsxs("div",{className:"restock-warning",children:["⚠️ Bajo nivel mínimo (",o(m.minThreshold)," ",m.unit,")"]})]}),u.jsxs("div",{className:"card-metrics",children:[u.jsxs("div",{className:"metric",children:[u.jsxs("span",{className:"metric-label",children:["Precio por ",m.unit,":"]}),u.jsx("span",{className:"metric-value",children:l(m.pricePerUnit)})]}),u.jsxs("div",{className:"metric",children:[u.jsx("span",{className:"metric-label",children:"Valor total:"}),u.jsx("span",{className:"metric-value",children:l(_)})]}),m.supplier&&u.jsxs("div",{className:"metric",children:[u.jsx("span",{className:"metric-label",children:"Proveedor:"}),u.jsx("span",{className:"metric-value",children:m.supplier})]})]}),u.jsxs("div",{className:"card-footer",children:[u.jsxs("div",{className:"status-info",children:[u.jsx("span",{className:`status-dot ${m.status}`}),u.jsx("span",{className:"status-text",children:m.status==="active"?"Activo":m.status==="inactive"?"Inactivo":m.status==="maintenance"?"Mantenimiento":m.status})]}),u.jsxs("div",{className:"last-update",children:["Actualizado ",h(m.lastUpdated)]})]}),r&&u.jsxs("div",{className:"card-actions",children:[u.jsx("button",{className:"btn btn-secondary btn-sm",onClick:()=>e(m),title:"Editar combustible",children:"✏️ Editar"}),u.jsx("button",{className:"btn btn-danger btn-sm",onClick:()=>t(m),title:"Eliminar combustible",children:"🗑️ Eliminar"})]}),m.description&&m.description!==g?.description&&u.jsx("div",{className:"card-description",children:u.jsx("p",{children:m.description})})]},m.id)})})},Tk=({item:s,onClose:e,onSuccess:t})=>{const{userProfile:r}=Ca(),o=!!s,[l,h]=ie.useState({fuelType:"",location:"",currentStock:"",maxCapacity:"",minThreshold:"",pricePerUnit:"",supplier:"",description:"",status:"active"}),[m,g]=ie.useState({}),[v,_]=ie.useState(!1);ie.useEffect(()=>{o&&s&&h({fuelType:s.fuelType||"",location:s.location||"",currentStock:s.currentStock||"",maxCapacity:s.maxCapacity||"",minThreshold:s.minThreshold||"",pricePerUnit:s.pricePerUnit||"",supplier:s.supplier||"",description:s.description||"",status:s.status||"active"})},[o,s]),ie.useEffect(()=>{if(l.maxCapacity&&!l.minThreshold){const U=Math.round(Number(l.maxCapacity)*.15);h(x=>({...x,minThreshold:U}))}},[l.maxCapacity]);const b=U=>{const{name:x,value:$}=U.target;h(W=>({...W,[x]:$})),m[x]&&g(W=>({...W,[x]:null}))},A=()=>{const U={};l.fuelType||(U.fuelType="Tipo de combustible es requerido"),l.location||(U.location="Ubicación es requerida"),l.maxCapacity||(U.maxCapacity="Capacidad máxima es requerida");const x=Number(l.currentStock),$=Number(l.maxCapacity),W=Number(l.minThreshold),K=Number(l.pricePerUnit);return l.currentStock&&(isNaN(x)||x<0)&&(U.currentStock="Stock actual debe ser un número válido mayor o igual a 0"),l.maxCapacity&&(isNaN($)||$<=0)&&(U.maxCapacity="Capacidad máxima debe ser un número válido mayor a 0"),l.minThreshold&&(isNaN(W)||W<0)&&(U.minThreshold="Umbral mínimo debe ser un número válido mayor o igual a 0"),l.pricePerUnit&&(isNaN(K)||K<0)&&(U.pricePerUnit="Precio debe ser un número válido mayor o igual a 0"),x>$&&(U.currentStock="Stock actual no puede ser mayor a la capacidad máxima"),W>$&&(U.minThreshold="Umbral mínimo no puede ser mayor a la capacidad máxima"),g(U),Object.keys(U).length===0},M=async U=>{if(U.preventDefault(),!!A()){_(!0);try{let x;o?x=await ck(s.id,{location:l.location,currentStock:Number(l.currentStock)||0,maxCapacity:Number(l.maxCapacity),minThreshold:Number(l.minThreshold)||Number(l.maxCapacity)*.15,pricePerUnit:Number(l.pricePerUnit)||0,supplier:l.supplier,description:l.description,status:l.status},r.uid):x=await lk({fuelType:l.fuelType,location:l.location,currentStock:Number(l.currentStock)||0,maxCapacity:Number(l.maxCapacity),minThreshold:Number(l.minThreshold)||Number(l.maxCapacity)*.15,pricePerUnit:Number(l.pricePerUnit)||0,supplier:l.supplier,description:l.description,status:l.status},r.uid),x.success?(alert(x.message),t()):alert(`Error: ${x.error}`)}catch(x){console.error("Error saving inventory item:",x),alert("Error inesperado al guardar el item")}finally{_(!1)}}},I=Go[l.fuelType];return u.jsx("div",{className:"modal-overlay",onClick:e,children:u.jsxs("div",{className:"modal-content inventory-modal",onClick:U=>U.stopPropagation(),children:[u.jsxs("div",{className:"modal-header",children:[u.jsx("h2",{children:o?"✏️ Editar Combustible":"➕ Agregar Nuevo Combustible"}),u.jsx("button",{className:"modal-close",onClick:e,children:"✕"})]}),u.jsxs("form",{onSubmit:M,className:"modal-form",children:[u.jsxs("div",{className:"form-grid",children:[u.jsxs("div",{className:"form-group",children:[u.jsxs("label",{htmlFor:"fuelType",children:["Tipo de Combustible *",I&&u.jsxs("span",{className:"fuel-preview",children:[I.icon," ",I.name]})]}),u.jsxs("select",{id:"fuelType",name:"fuelType",value:l.fuelType,onChange:b,disabled:o,className:m.fuelType?"error":"",required:!0,children:[u.jsx("option",{value:"",children:"Seleccionar tipo..."}),Object.entries(fa).map(([U,x])=>{const $=Go[x];return u.jsxs("option",{value:x,children:[$.icon," ",$.name," (",$.unit,")"]},U)})]}),m.fuelType&&u.jsx("span",{className:"error-text",children:m.fuelType})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"location",children:"Ubicación / Tanque *"}),u.jsx("input",{type:"text",id:"location",name:"location",value:l.location,onChange:b,placeholder:"ej. Tanque Principal, Depósito A, Bodega Norte",className:m.location?"error":"",required:!0}),m.location&&u.jsx("span",{className:"error-text",children:m.location})]}),u.jsxs("div",{className:"form-group",children:[u.jsxs("label",{htmlFor:"currentStock",children:["Stock Actual ",I&&`(${I.unit})`]}),u.jsx("input",{type:"number",id:"currentStock",name:"currentStock",value:l.currentStock,onChange:b,placeholder:"0",min:"0",step:"0.01",className:m.currentStock?"error":""}),m.currentStock&&u.jsx("span",{className:"error-text",children:m.currentStock})]}),u.jsxs("div",{className:"form-group",children:[u.jsxs("label",{htmlFor:"maxCapacity",children:["Capacidad Máxima * ",I&&`(${I.unit})`]}),u.jsx("input",{type:"number",id:"maxCapacity",name:"maxCapacity",value:l.maxCapacity,onChange:b,placeholder:"1000",min:"1",step:"0.01",className:m.maxCapacity?"error":"",required:!0}),m.maxCapacity&&u.jsx("span",{className:"error-text",children:m.maxCapacity})]}),u.jsxs("div",{className:"form-group",children:[u.jsxs("label",{htmlFor:"minThreshold",children:["Umbral Mínimo ",I&&`(${I.unit})`,u.jsx("span",{className:"field-hint",children:"Para alertas de stock bajo"})]}),u.jsx("input",{type:"number",id:"minThreshold",name:"minThreshold",value:l.minThreshold,onChange:b,placeholder:"Auto: 15% de capacidad máxima",min:"0",step:"0.01",className:m.minThreshold?"error":""}),m.minThreshold&&u.jsx("span",{className:"error-text",children:m.minThreshold}),l.maxCapacity&&u.jsxs("span",{className:"field-hint",children:["Sugerido: ",Math.round(Number(l.maxCapacity)*.15)," ",I?.unit||"unidades"]})]}),u.jsxs("div",{className:"form-group",children:[u.jsxs("label",{htmlFor:"pricePerUnit",children:["Precio por ",I?.unit||"Unidad"]}),u.jsx("input",{type:"number",id:"pricePerUnit",name:"pricePerUnit",value:l.pricePerUnit,onChange:b,placeholder:"12000",min:"0",step:"0.01",className:m.pricePerUnit?"error":""}),m.pricePerUnit&&u.jsx("span",{className:"error-text",children:m.pricePerUnit})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"supplier",children:"Proveedor Principal"}),u.jsx("input",{type:"text",id:"supplier",name:"supplier",value:l.supplier,onChange:b,placeholder:"ej. Petrobras, Terpel, Mobil"})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"status",children:"Estado"}),u.jsxs("select",{id:"status",name:"status",value:l.status,onChange:b,children:[u.jsx("option",{value:"active",children:"Activo"}),u.jsx("option",{value:"inactive",children:"Inactivo"}),u.jsx("option",{value:"maintenance",children:"Mantenimiento"})]})]}),u.jsxs("div",{className:"form-group full-width",children:[u.jsx("label",{htmlFor:"description",children:"Descripción / Notas"}),u.jsx("textarea",{id:"description",name:"description",value:l.description,onChange:b,placeholder:"Información adicional sobre este combustible...",rows:"3"})]})]}),I&&l.maxCapacity&&u.jsxs("div",{className:"form-preview",children:[u.jsx("h4",{children:"📊 Vista Previa"}),u.jsxs("div",{className:"preview-card",children:[u.jsxs("div",{className:"preview-header",children:[u.jsxs("span",{style:{color:I.color},children:[I.icon," ",I.name]}),u.jsx("span",{children:l.location})]}),u.jsxs("div",{className:"preview-capacity",children:[l.currentStock||0," / ",l.maxCapacity," ",I.unit,l.currentStock&&l.maxCapacity&&u.jsxs("span",{className:"preview-percentage",children:["(",Math.round(Number(l.currentStock)/Number(l.maxCapacity)*100),"%)"]})]}),l.pricePerUnit&&u.jsxs("div",{className:"preview-value",children:["Valor total: ",new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format((Number(l.currentStock)||0)*Number(l.pricePerUnit))]})]})]}),u.jsxs("div",{className:"modal-actions",children:[u.jsx("button",{type:"button",onClick:e,className:"btn btn-secondary",children:"Cancelar"}),u.jsx("button",{type:"submit",className:"btn btn-primary",disabled:v,children:v?"Guardando...":o?"Actualizar":"Crear"})]})]})]})})},r0=(s,e=[])=>{if(!s||!s.fuelType||!s.quantity)return{isValid:!1,error:"Datos de movimiento incompletos",availableStock:0,requiredStock:0};const{fuelType:t,quantity:r,type:o,sourceLocation:l}=s,h=parseFloat(r)||0;if(o!=="outbound"&&o!=="transfer")return{isValid:!0,message:"Movimiento no requiere validación de stock",availableStock:0,requiredStock:h};const m=e.filter(_=>_.fuelType===t&&_.location===l&&_.status==="active").reduce((_,b)=>_+(parseFloat(b.quantity)||0),0),g=m>=h,v=m-h;return{isValid:g,availableStock:m,requiredStock:h,remainingStock:v,fuelType:t,location:l,error:g?null:`Stock insuficiente. Disponible: ${m}, Requerido: ${h}`,warning:v<m*.2&&v>=0?"Stock quedará bajo después del movimiento":null}},Bc=s=>typeof s!="number"||isNaN(s)?"$0":new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0,maximumFractionDigits:0}).format(s),fs=(s,e=2)=>typeof s!="number"||isNaN(s)?"0":new Intl.NumberFormat("es-CO",{minimumFractionDigits:e,maximumFractionDigits:e}).format(s),bk=({stats:s})=>u.jsxs("div",{className:"inventory-stats",children:[u.jsxs("div",{className:"stats-grid",children:[u.jsxs("div",{className:"stat-card primary",children:[u.jsx("div",{className:"stat-icon",children:"💰"}),u.jsxs("div",{className:"stat-content",children:[u.jsx("h3",{children:"Valor Total"}),u.jsx("div",{className:"stat-value",children:Bc(s.totalValue)}),u.jsxs("div",{className:"stat-subtitle",children:[fs(s.totalItems)," tipos de combustible"]})]})]}),u.jsxs("div",{className:"stat-card success",children:[u.jsx("div",{className:"stat-icon",children:"✅"}),u.jsxs("div",{className:"stat-content",children:[u.jsx("h3",{children:"Items Activos"}),u.jsx("div",{className:"stat-value",children:s.activeItems}),u.jsxs("div",{className:"stat-subtitle",children:[Math.round(s.activeItems/s.totalItems*100),"% del total"]})]})]}),u.jsxs("div",{className:`stat-card ${s.lowStockItems>0?"warning":"info"}`,children:[u.jsx("div",{className:"stat-icon",children:s.lowStockItems>0?"⚠️":"📊"}),u.jsxs("div",{className:"stat-content",children:[u.jsx("h3",{children:"Stock Bajo"}),u.jsx("div",{className:"stat-value",children:s.lowStockItems}),u.jsx("div",{className:"stat-subtitle",children:s.lowStockItems>0?"Requieren atención":"Niveles normales"})]})]}),u.jsxs("div",{className:"stat-card info",children:[u.jsx("div",{className:"stat-icon",children:"📈"}),u.jsxs("div",{className:"stat-content",children:[u.jsx("h3",{children:"Nivel Promedio"}),u.jsxs("div",{className:"stat-value",children:[s.averageStockLevel,"%"]}),u.jsx("div",{className:"stat-subtitle",children:"Capacidad promedio utilizada"})]})]})]}),u.jsxs("div",{className:"fuel-type-summary",children:[u.jsx("h4",{children:"📊 Resumen por Tipo de Combustible"}),u.jsx("div",{className:"fuel-types-grid",children:Object.entries(s.byFuelType).map(([e,t])=>{const r=Go[e],o=t.totalCapacity>0?Math.round(t.totalStock/t.totalCapacity*100):0;return u.jsxs("div",{className:"fuel-type-card",children:[u.jsxs("div",{className:"fuel-header",children:[u.jsx("span",{className:"fuel-icon",style:{color:r?.color||"#6b7280"},children:r?.icon||"⛽"}),u.jsxs("div",{className:"fuel-info",children:[u.jsx("h5",{children:r?.name||e}),u.jsxs("span",{className:"fuel-count",children:[t.count," ubicaciones"]})]})]}),u.jsxs("div",{className:"fuel-metrics",children:[u.jsxs("div",{className:"metric",children:[u.jsx("span",{className:"metric-label",children:"Stock Total:"}),u.jsxs("span",{className:"metric-value",children:[fs(t.totalStock)," ",r?.unit||"unidades"]})]}),u.jsxs("div",{className:"metric",children:[u.jsx("span",{className:"metric-label",children:"Capacidad:"}),u.jsxs("span",{className:"metric-value",children:[fs(t.totalCapacity)," ",r?.unit||"unidades"]})]}),u.jsxs("div",{className:"metric",children:[u.jsx("span",{className:"metric-label",children:"Utilización:"}),u.jsxs("span",{className:`metric-value ${o<25?"low":o>75?"high":"normal"}`,children:[o,"%"]})]}),u.jsxs("div",{className:"metric",children:[u.jsx("span",{className:"metric-label",children:"Valor:"}),u.jsx("span",{className:"metric-value",children:Bc(t.totalValue)})]})]}),u.jsx("div",{className:"progress-bar",children:u.jsx("div",{className:"progress-fill",style:{width:`${o}%`,backgroundColor:r?.color||"#6b7280"}})})]},e)})}),Object.keys(s.byFuelType).length===0&&u.jsx("div",{className:"empty-fuel-types",children:u.jsx("p",{children:"No hay tipos de combustible registrados en el inventario."})})]})]}),Ak=()=>{const{hasPermission:s}=Ca(),[e,t]=ie.useState([]),[r,o]=ie.useState(null),[l,h]=ie.useState(!0),[m,g]=ie.useState(null),[v,_]=ie.useState("cards"),[b,A]=ie.useState(!1),[M,I]=ie.useState(null),[U,x]=ie.useState("all"),[$,W]=ie.useState("");ie.useEffect(()=>{let R=null;return(()=>{R=zS((k,C)=>{if(C){console.error("Error in inventory subscription:",C),g("Error cargando inventario en tiempo real");return}t(k||[]),h(!1)})})(),()=>{R&&R()}},[]),ie.useEffect(()=>{(async()=>{const D=await dk();D.success&&o(D.data)})()},[e]);const K=e.filter(R=>{if(U==="active"&&R.status!=="active"||U==="low-stock"&&!R.needsRestock)return!1;if($){const D=$.toLowerCase();return R.name.toLowerCase().includes(D)||R.location.toLowerCase().includes(D)||R.fuelType.toLowerCase().includes(D)}return!0}),J=()=>{if(!s("canManageInventory")){alert("No tienes permisos para crear items de inventario");return}I(null),A(!0)},q=R=>{if(!s("canManageInventory")){alert("No tienes permisos para editar items de inventario");return}I(R),A(!0)},oe=async R=>{if(!s("canManageInventory")){alert("No tienes permisos para eliminar items de inventario");return}if(!window.confirm(`¿Estás seguro de eliminar ${R.name} de ${R.location}?

Esta acción no se puede deshacer.`))return;h(!0);const k=await uk(R.id);k.success?alert("Item eliminado exitosamente"):(g(k.error),alert(`Error al eliminar: ${k.error}`)),h(!1)},O=()=>{A(!1),I(null)},S=()=>{O()};return l&&e.length===0?u.jsxs("div",{className:"inventory-loading",children:[u.jsx("div",{className:"loading-spinner"}),u.jsx("p",{children:"Cargando inventario..."})]}):u.jsxs("div",{className:"inventory-main",children:[u.jsxs("div",{className:"inventory-header",children:[u.jsxs("div",{className:"header-title",children:[u.jsx("h2",{children:"🛢️ Gestión de Inventario"}),u.jsx("p",{children:"Control de stock de combustibles en tiempo real"})]}),s("canManageInventory")&&u.jsx("button",{className:"btn btn-primary",onClick:J,children:"➕ Agregar Combustible"})]}),r&&u.jsx(bk,{stats:r}),u.jsxs("div",{className:"inventory-controls",children:[u.jsxs("div",{className:"search-filters",children:[u.jsx("input",{type:"text",placeholder:"Buscar por nombre, ubicación o tipo...",value:$,onChange:R=>W(R.target.value),className:"search-input"}),u.jsxs("select",{value:U,onChange:R=>x(R.target.value),className:"filter-select",children:[u.jsx("option",{value:"all",children:"Todos los items"}),u.jsx("option",{value:"active",children:"Solo activos"}),u.jsx("option",{value:"low-stock",children:"Stock bajo"})]})]}),u.jsxs("div",{className:"view-toggle",children:[u.jsx("button",{className:`toggle-btn ${v==="cards"?"active":""}`,onClick:()=>_("cards"),children:"📱 Cards"}),u.jsx("button",{className:`toggle-btn ${v==="table"?"active":""}`,onClick:()=>_("table"),children:"📊 Tabla"})]})]}),m&&u.jsxs("div",{className:"error-banner",children:[u.jsxs("span",{children:["⚠️ ",m]}),u.jsx("button",{onClick:()=>g(null),children:"✕"})]}),u.jsx("div",{className:"inventory-content",children:K.length===0?u.jsxs("div",{className:"empty-state",children:[u.jsx("div",{className:"empty-icon",children:"📦"}),u.jsx("h3",{children:"No hay items de inventario"}),u.jsx("p",{children:$||U!=="all"?"No se encontraron items con los filtros aplicados":"Comienza agregando tu primer tipo de combustible al inventario"}),s("canManageInventory")&&u.jsx("button",{className:"btn btn-primary",onClick:J,children:"➕ Agregar Primer Combustible"})]}):u.jsx(u.Fragment,{children:v==="cards"?u.jsx(Ek,{items:K,onEdit:q,onDelete:oe,canManage:s("canManageInventory")}):u.jsx(_k,{items:K,onEdit:q,onDelete:oe,canManage:s("canManageInventory")})})}),K.length>0&&u.jsx("div",{className:"results-footer",children:u.jsxs("p",{children:["Mostrando ",K.length," de ",e.length," items",$&&` · Filtro: "${$}"`,U!=="all"&&` · Estado: ${U}`]})}),b&&u.jsx(Tk,{item:M,onClose:O,onSuccess:S})]})},Nk=({stats:s,filters:e})=>{if(!s)return null;const t=(h,m)=>m===0?h>0?100:0:((h-m)/m*100).toFixed(1),r=h=>{switch(h){case Te.ENTRADA:return"#10b981";case Te.SALIDA:return"#ef4444";case Te.TRANSFERENCIA:return"#3b82f6";case Te.AJUSTE:return"#f59e0b";default:return"#6b7280"}},o=h=>{switch(h){case Te.ENTRADA:return"📥";case Te.SALIDA:return"📤";case Te.TRANSFERENCIA:return"🔄";case Te.AJUSTE:return"⚖️";default:return"📋"}},l=t(s.thisMonth,s.lastMonth);return u.jsxs("div",{className:"movements-stats",children:[u.jsxs("div",{className:"stats-grid",children:[u.jsxs("div",{className:"stat-card primary",children:[u.jsx("div",{className:"stat-icon",children:"📊"}),u.jsxs("div",{className:"stat-content",children:[u.jsx("div",{className:"stat-value",children:fs(s.totalMovements)}),u.jsx("div",{className:"stat-label",children:"Total Movimientos"}),u.jsxs("div",{className:"stat-trend",children:[u.jsxs("span",{className:`trend ${l>=0?"positive":"negative"}`,children:[l>=0?"📈":"📉"," ",Math.abs(l),"%"]}),u.jsx("span",{className:"trend-label",children:"vs mes anterior"})]})]})]}),u.jsxs("div",{className:"stat-card",children:[u.jsx("div",{className:"stat-icon",children:"💰"}),u.jsxs("div",{className:"stat-content",children:[u.jsx("div",{className:"stat-value",children:Bc(s.totalValue)}),u.jsx("div",{className:"stat-label",children:"Valor Total"}),u.jsxs("div",{className:"stat-secondary",children:["Promedio: ",Bc(s.averageValue)]})]})]}),u.jsxs("div",{className:"stat-card",children:[u.jsx("div",{className:"stat-icon",children:"⛽"}),u.jsxs("div",{className:"stat-content",children:[u.jsx("div",{className:"stat-value",children:fs(s.totalQuantity)}),u.jsx("div",{className:"stat-label",children:"Galones Total"}),u.jsxs("div",{className:"stat-secondary",children:["Promedio: ",fs(s.totalQuantity/(s.totalMovements||1))," gal/mov"]})]})]}),u.jsxs("div",{className:"stat-card",children:[u.jsx("div",{className:"stat-icon",children:"📅"}),u.jsxs("div",{className:"stat-content",children:[u.jsx("div",{className:"stat-value",children:fs(s.thisWeek)}),u.jsx("div",{className:"stat-label",children:"Esta Semana"}),u.jsxs("div",{className:"stat-secondary",children:[fs(s.thisMonth)," este mes"]})]})]})]}),u.jsxs("div",{className:"stats-breakdown",children:[u.jsxs("div",{className:"breakdown-section",children:[u.jsx("h4",{children:"📋 Por Tipo de Movimiento"}),u.jsx("div",{className:"breakdown-grid",children:Object.entries(s.byType).map(([h,m])=>{const g=(m/s.totalMovements*100).toFixed(1);return u.jsxs("div",{className:"breakdown-item",children:[u.jsxs("div",{className:"breakdown-header",children:[u.jsx("span",{className:"breakdown-icon",children:o(h)}),u.jsx("span",{className:"breakdown-label",children:h.charAt(0).toUpperCase()+h.slice(1)})]}),u.jsx("div",{className:"breakdown-value",children:m}),u.jsx("div",{className:"breakdown-bar",children:u.jsx("div",{className:"breakdown-fill",style:{width:`${g}%`,backgroundColor:r(h)}})}),u.jsxs("div",{className:"breakdown-percentage",children:[g,"%"]})]},h)})})]}),u.jsxs("div",{className:"breakdown-section",children:[u.jsx("h4",{children:"⚡ Por Estado"}),u.jsx("div",{className:"breakdown-grid",children:Object.entries(s.byStatus).map(([h,m])=>{const g=(m/s.totalMovements*100).toFixed(1),v=b=>{switch(b){case Ue.COMPLETADO:return"#10b981";case Ue.PENDIENTE:return"#f59e0b";case Ue.CANCELADO:return"#ef4444";default:return"#6b7280"}},_=b=>{switch(b){case Ue.COMPLETADO:return"✅";case Ue.PENDIENTE:return"⏳";case Ue.CANCELADO:return"❌";default:return"❓"}};return u.jsxs("div",{className:"breakdown-item",children:[u.jsxs("div",{className:"breakdown-header",children:[u.jsx("span",{className:"breakdown-icon",children:_(h)}),u.jsx("span",{className:"breakdown-label",children:h.charAt(0).toUpperCase()+h.slice(1)})]}),u.jsx("div",{className:"breakdown-value",children:m}),u.jsx("div",{className:"breakdown-bar",children:u.jsx("div",{className:"breakdown-fill",style:{width:`${g}%`,backgroundColor:v(h)}})}),u.jsxs("div",{className:"breakdown-percentage",children:[g,"%"]})]},h)})})]}),u.jsxs("div",{className:"breakdown-section",children:[u.jsx("h4",{children:"⛽ Por Tipo de Combustible"}),u.jsx("div",{className:"breakdown-grid",children:Object.entries(s.byFuelType).map(([h,m])=>{const g=(m/s.totalMovements*100).toFixed(1),v=_=>{switch(_?.toLowerCase()){case"diesel":return"🚛";case"gasolina":return"🚗";case"acpm":return"🚚";case"lubricante":return"🛢️";default:return"⛽"}};return u.jsxs("div",{className:"breakdown-item",children:[u.jsxs("div",{className:"breakdown-header",children:[u.jsx("span",{className:"breakdown-icon",children:v(h)}),u.jsx("span",{className:"breakdown-label",children:h})]}),u.jsx("div",{className:"breakdown-value",children:m}),u.jsx("div",{className:"breakdown-bar",children:u.jsx("div",{className:"breakdown-fill",style:{width:`${g}%`,backgroundColor:"#059669"}})}),u.jsxs("div",{className:"breakdown-percentage",children:[g,"%"]})]},h)})})]})]}),(e.type||e.status||e.fuelType||e.vehicleId)&&u.jsxs("div",{className:"active-filters",children:[u.jsx("h4",{children:"🔍 Filtros Activos"}),u.jsxs("div",{className:"filters-list",children:[e.type&&u.jsxs("span",{className:"filter-tag",children:["Tipo: ",e.type]}),e.status&&u.jsxs("span",{className:"filter-tag",children:["Estado: ",e.status]}),e.fuelType&&u.jsxs("span",{className:"filter-tag",children:["Combustible: ",e.fuelType]}),e.vehicleId&&u.jsxs("span",{className:"filter-tag",children:["Vehículo: ",e.vehicleId]})]})]})]})},Sk=({filters:s,onFilterChange:e,onClearFilters:t,searchTerm:r,onSearchChange:o,viewMode:l,onViewModeChange:h,totalResults:m})=>{const[g,v]=ie.useState(!1),_=[{value:"Diesel",label:"Diesel 🚛"},{value:"Gasolina",label:"Gasolina 🚗"},{value:"ACPM",label:"ACPM 🚚"},{value:"Lubricante",label:"Lubricante 🛢️"}],b=[{value:"all",label:"Todos los períodos"},{value:"today",label:"Hoy"},{value:"week",label:"Esta semana"},{value:"month",label:"Este mes"},{value:"quarter",label:"Este trimestre"},{value:"year",label:"Este año"}],A=Object.values(s).filter(U=>U&&U!==""&&U!=="all").length,M=(U,x)=>{e({[U]:x})},I=U=>{e(U)};return u.jsxs("div",{className:"movements-filters",children:[u.jsxs("div",{className:"filters-main",children:[u.jsx("div",{className:"search-section",children:u.jsxs("div",{className:"search-box",children:[u.jsx("span",{className:"search-icon",children:"🔍"}),u.jsx("input",{type:"text",placeholder:"Buscar por combustible, vehículo, referencia...",value:r,onChange:U=>o(U.target.value),className:"search-input"}),r&&u.jsx("button",{className:"search-clear",onClick:()=>o(""),title:"Limpiar búsqueda",children:"✕"})]})}),u.jsxs("div",{className:"filters-controls",children:[u.jsxs("div",{className:"quick-filters",children:[u.jsx("button",{className:`quick-filter ${s.type===Te.ENTRADA?"active":""}`,onClick:()=>I({type:Te.ENTRADA}),children:"📥 Entradas"}),u.jsx("button",{className:`quick-filter ${s.type===Te.SALIDA?"active":""}`,onClick:()=>I({type:Te.SALIDA}),children:"📤 Salidas"}),u.jsx("button",{className:`quick-filter ${s.status===Ue.PENDIENTE?"active":""}`,onClick:()=>I({status:Ue.PENDIENTE}),children:"⏳ Pendientes"})]}),u.jsxs("button",{className:`btn-advanced-filters ${g?"active":""}`,onClick:()=>v(!g),children:["🎛️ Filtros",A>0&&u.jsx("span",{className:"filters-count",children:A})]}),u.jsxs("div",{className:"view-modes",children:[u.jsx("button",{className:`view-mode ${l==="cards"?"active":""}`,onClick:()=>h("cards"),title:"Vista en tarjetas",children:"🎴"}),u.jsx("button",{className:`view-mode ${l==="table"?"active":""}`,onClick:()=>h("table"),title:"Vista en tabla",children:"📋"})]})]})]}),g&&u.jsxs("div",{className:"filters-advanced",children:[u.jsxs("div",{className:"filters-grid",children:[u.jsxs("div",{className:"filter-group",children:[u.jsx("label",{children:"Tipo de Movimiento"}),u.jsxs("select",{value:s.type,onChange:U=>M("type",U.target.value),className:"filter-select",children:[u.jsx("option",{value:"",children:"Todos los tipos"}),u.jsx("option",{value:Te.ENTRADA,children:"📥 Entrada"}),u.jsx("option",{value:Te.SALIDA,children:"📤 Salida"}),u.jsx("option",{value:Te.TRANSFERENCIA,children:"🔄 Transferencia"}),u.jsx("option",{value:Te.AJUSTE,children:"⚖️ Ajuste"})]})]}),u.jsxs("div",{className:"filter-group",children:[u.jsx("label",{children:"Estado"}),u.jsxs("select",{value:s.status,onChange:U=>M("status",U.target.value),className:"filter-select",children:[u.jsx("option",{value:"",children:"Todos los estados"}),u.jsx("option",{value:Ue.PENDIENTE,children:"⏳ Pendiente"}),u.jsx("option",{value:Ue.COMPLETADO,children:"✅ Completado"}),u.jsx("option",{value:Ue.CANCELADO,children:"❌ Cancelado"})]})]}),u.jsxs("div",{className:"filter-group",children:[u.jsx("label",{children:"Tipo de Combustible"}),u.jsxs("select",{value:s.fuelType,onChange:U=>M("fuelType",U.target.value),className:"filter-select",children:[u.jsx("option",{value:"",children:"Todos los combustibles"}),_.map(U=>u.jsx("option",{value:U.value,children:U.label},U.value))]})]}),u.jsxs("div",{className:"filter-group",children:[u.jsx("label",{children:"Período"}),u.jsx("select",{value:s.dateRange,onChange:U=>M("dateRange",U.target.value),className:"filter-select",children:b.map(U=>u.jsx("option",{value:U.value,children:U.label},U.value))})]}),u.jsxs("div",{className:"filter-group",children:[u.jsx("label",{children:"Vehículo/Equipo"}),u.jsx("input",{type:"text",placeholder:"ID del vehículo...",value:s.vehicleId,onChange:U=>M("vehicleId",U.target.value),className:"filter-input"})]})]}),u.jsxs("div",{className:"filters-actions",children:[u.jsx("button",{className:"btn-clear-filters",onClick:t,disabled:A===0,children:"🗑️ Limpiar Filtros"}),u.jsxs("div",{className:"filters-info",children:[u.jsxs("span",{className:"results-count",children:[m," resultado",m!==1?"s":""]}),A>0&&u.jsxs("span",{className:"active-filters-text",children:["(",A," filtro",A!==1?"s":""," activo",A!==1?"s":"",")"]})]})]})]}),u.jsx("div",{className:"keyboard-shortcuts",style:{display:"none"},children:u.jsx("small",{children:"💡 Atajos: Ctrl+F (buscar), Ctrl+1 (entradas), Ctrl+2 (salidas), Ctrl+3 (pendientes)"})})]})},wk=({movements:s,onEdit:e,onView:t,onApprove:r,onReject:o,userRole:l})=>{const h=I=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0,maximumFractionDigits:0}).format(I),m=I=>I?(I instanceof Date?I:new Date(I)).toLocaleDateString("es-CO",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"Sin fecha",g=I=>{if(!I)return"";const U=new Date,x=I instanceof Date?I:new Date(I),$=Math.abs(U-x),W=Math.ceil($/(1e3*60*60*24));return W===1?"hace 1 día":W<7?`hace ${W} días`:W<30?`hace ${Math.ceil(W/7)} semanas`:W<365?`hace ${Math.ceil(W/30)} meses`:`hace ${Math.ceil(W/365)} años`},v=I=>{switch(I){case Te.ENTRADA:return"movement-entrada";case Te.SALIDA:return"movement-salida";case Te.TRANSFERENCIA:return"movement-transferencia";case Te.AJUSTE:return"movement-ajuste";default:return"movement-default"}},_=I=>{switch(I){case Ue.COMPLETADO:return"status-completado";case Ue.PENDIENTE:return"status-pendiente";case Ue.CANCELADO:return"status-cancelado";default:return"status-default"}},b=I=>{switch(I){case Te.ENTRADA:return"📥";case Te.SALIDA:return"📤";case Te.TRANSFERENCIA:return"🔄";case Te.AJUSTE:return"⚖️";default:return"📋"}},A=I=>{switch(I?.toLowerCase()){case"diesel":return"🚛";case"gasolina":return"🚗";case"acpm":return"🚚";case"lubricante":return"🛢️";default:return"⛽"}},M=I=>{switch(I){case Ue.COMPLETADO:return"✅";case Ue.PENDIENTE:return"⏳";case Ue.CANCELADO:return"❌";default:return"❓"}};return u.jsx("div",{className:"movements-cards",children:s.map(I=>u.jsxs("div",{className:`movement-card ${v(I.type)}`,children:[u.jsxs("div",{className:"card-header",children:[u.jsxs("div",{className:"movement-type",children:[u.jsx("span",{className:"type-icon",children:b(I.type)}),u.jsx("span",{className:"type-label",children:I.type.charAt(0).toUpperCase()+I.type.slice(1)})]}),u.jsxs("div",{className:`status-badge ${_(I.status)}`,children:[u.jsx("span",{className:"status-icon",children:M(I.status)}),u.jsx("span",{className:"status-label",children:I.status.charAt(0).toUpperCase()+I.status.slice(1)})]})]}),u.jsxs("div",{className:"card-content",children:[u.jsxs("div",{className:"fuel-info",children:[u.jsx("span",{className:"fuel-icon",children:A(I.fuelType)}),u.jsx("span",{className:"fuel-type",children:I.fuelType}),u.jsxs("span",{className:"quantity",children:[I.quantity," galones"]})]}),u.jsxs("div",{className:"value-info",children:[u.jsx("div",{className:"total-value",children:h(I.totalValue)}),u.jsxs("div",{className:"unit-price",children:[h(I.unitPrice),"/galón"]})]}),I.vehicleId&&u.jsxs("div",{className:"vehicle-info",children:[u.jsx("span",{className:"vehicle-icon",children:"🚜"}),u.jsxs("span",{className:"vehicle-id",children:["Vehículo: ",I.vehicleId]})]}),I.location&&u.jsxs("div",{className:"location-info",children:[u.jsx("span",{className:"location-icon",children:"📍"}),u.jsx("span",{className:"location",children:I.location})]}),I.description&&u.jsx("div",{className:"description",children:u.jsx("p",{children:I.description})}),I.reference&&u.jsxs("div",{className:"reference",children:[u.jsx("span",{className:"reference-label",children:"Ref:"}),u.jsx("span",{className:"reference-value",children:I.reference})]})]}),u.jsxs("div",{className:"card-footer",children:[u.jsxs("div",{className:"date-info",children:[u.jsx("div",{className:"created-date",children:m(I.createdAt)}),u.jsx("div",{className:"relative-time",children:g(I.createdAt)})]}),u.jsxs("div",{className:"card-actions",children:[l==="admin"&&I.status===Ue.PENDIENTE&&u.jsxs("div",{className:"admin-actions",children:[u.jsx("button",{className:"btn-approve",onClick:()=>r(I.id),title:"Aprobar movimiento",children:"✓ Aprobar"}),u.jsx("button",{className:"btn-reject",onClick:()=>o(I.id),title:"Rechazar movimiento",children:"✗ Rechazar"})]}),u.jsxs("div",{className:"user-actions",children:[u.jsx("button",{className:"btn-view",onClick:()=>t(I),title:"Ver detalles",children:"👁️ Ver"}),e&&I.status===Ue.PENDIENTE&&u.jsx("button",{className:"btn-edit",onClick:()=>e(I),title:"Editar movimiento",children:"✏️ Editar"})]})]})]}),I.status===Ue.PENDIENTE&&u.jsx("div",{className:"urgency-indicator",children:u.jsx("div",{className:"urgency-pulse"})}),I.type===Te.AJUSTE&&u.jsx("div",{className:"adjustment-badge",children:u.jsx("span",{children:"Ajuste"})}),I.type===Te.TRANSFERENCIA&&I.destinationLocation&&u.jsxs("div",{className:"transfer-info",children:[u.jsx("span",{className:"transfer-arrow",children:"→"}),u.jsx("span",{className:"destination",children:I.destinationLocation})]})]},I.id))})},xk=({movements:s,onEdit:e,onView:t,onApprove:r,onReject:o,userRole:l})=>{const[h,m]=ie.useState("createdAt"),[g,v]=ie.useState("desc"),_=K=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0,maximumFractionDigits:0}).format(K),b=K=>K?(K instanceof Date?K:new Date(K)).toLocaleDateString("es-CO",{day:"2-digit",month:"2-digit",year:"2-digit",hour:"2-digit",minute:"2-digit"}):"Sin fecha",A=K=>{switch(K){case Te.ENTRADA:return"📥";case Te.SALIDA:return"📤";case Te.TRANSFERENCIA:return"🔄";case Te.AJUSTE:return"⚖️";default:return"📋"}},M=K=>{switch(K?.toLowerCase()){case"diesel":return"🚛";case"gasolina":return"🚗";case"acpm":return"🚚";case"lubricante":return"🛢️";default:return"⛽"}},I=K=>{switch(K){case Ue.COMPLETADO:return"✅";case Ue.PENDIENTE:return"⏳";case Ue.CANCELADO:return"❌";default:return"❓"}},U=K=>{switch(K){case Ue.COMPLETADO:return"status-completado";case Ue.PENDIENTE:return"status-pendiente";case Ue.CANCELADO:return"status-cancelado";default:return"status-default"}},x=K=>{h===K?v(g==="asc"?"desc":"asc"):(m(K),v("asc"))},$=[...s].sort((K,J)=>{let q=K[h],oe=J[h];return(h.includes("Date")||h.includes("At"))&&(q=new Date(q),oe=new Date(oe)),typeof q=="number"&&typeof oe=="number"?g==="asc"?q-oe:oe-q:typeof q=="string"&&typeof oe=="string"?g==="asc"?q.localeCompare(oe):oe.localeCompare(q):q instanceof Date&&oe instanceof Date?g==="asc"?q-oe:oe-q:0}),W=K=>h!==K?"↕️":g==="asc"?"↑":"↓";return u.jsxs("div",{className:"movements-table-container",children:[u.jsx("div",{className:"table-wrapper",children:u.jsxs("table",{className:"movements-table",children:[u.jsx("thead",{children:u.jsxs("tr",{children:[u.jsxs("th",{className:"sortable",onClick:()=>x("type"),children:["Tipo ",W("type")]}),u.jsxs("th",{className:"sortable",onClick:()=>x("fuelType"),children:["Combustible ",W("fuelType")]}),u.jsxs("th",{className:"sortable text-right",onClick:()=>x("quantity"),children:["Cantidad ",W("quantity")]}),u.jsxs("th",{className:"sortable text-right",onClick:()=>x("unitPrice"),children:["Precio/Gal ",W("unitPrice")]}),u.jsxs("th",{className:"sortable text-right",onClick:()=>x("totalValue"),children:["Valor Total ",W("totalValue")]}),u.jsx("th",{children:"Vehículo"}),u.jsx("th",{children:"Ubicación"}),u.jsxs("th",{className:"sortable",onClick:()=>x("status"),children:["Estado ",W("status")]}),u.jsxs("th",{className:"sortable",onClick:()=>x("createdAt"),children:["Fecha ",W("createdAt")]}),u.jsx("th",{className:"actions-column",children:"Acciones"})]})}),u.jsx("tbody",{children:$.map(K=>u.jsxs("tr",{className:`movement-row ${K.status===Ue.PENDIENTE?"pending-row":""}`,children:[u.jsx("td",{className:"type-cell",children:u.jsxs("div",{className:"type-content",children:[u.jsx("span",{className:"type-icon",children:A(K.type)}),u.jsx("span",{className:"type-text",children:K.type.charAt(0).toUpperCase()+K.type.slice(1)})]})}),u.jsx("td",{className:"fuel-cell",children:u.jsxs("div",{className:"fuel-content",children:[u.jsx("span",{className:"fuel-icon",children:M(K.fuelType)}),u.jsx("span",{className:"fuel-text",children:K.fuelType})]})}),u.jsxs("td",{className:"quantity-cell text-right",children:[u.jsx("span",{className:"quantity-value",children:K.quantity}),u.jsx("span",{className:"quantity-unit",children:"gal"})]}),u.jsx("td",{className:"price-cell text-right",children:_(K.unitPrice)}),u.jsx("td",{className:"value-cell text-right",children:u.jsx("strong",{children:_(K.totalValue)})}),u.jsx("td",{className:"vehicle-cell",children:K.vehicleId?u.jsxs("span",{className:"vehicle-id",children:["🚜 ",K.vehicleId]}):u.jsx("span",{className:"no-vehicle",children:"-"})}),u.jsx("td",{className:"location-cell",children:u.jsxs("span",{className:"location-text",children:["📍 ",K.location||"Principal"]})}),u.jsx("td",{className:"status-cell",children:u.jsxs("div",{className:`status-badge ${U(K.status)}`,children:[u.jsx("span",{className:"status-icon",children:I(K.status)}),u.jsx("span",{className:"status-text",children:K.status.charAt(0).toUpperCase()+K.status.slice(1)})]})}),u.jsx("td",{className:"date-cell",children:u.jsxs("div",{className:"date-content",children:[u.jsx("span",{className:"date-value",children:b(K.createdAt)}),K.reference&&u.jsxs("span",{className:"reference-small",children:["#",K.reference]})]})}),u.jsx("td",{className:"actions-cell",children:u.jsxs("div",{className:"action-buttons",children:[u.jsx("button",{className:"btn-action btn-view",onClick:()=>t(K),title:"Ver detalles",children:"👁️"}),l==="admin"&&K.status===Ue.PENDIENTE&&u.jsxs(u.Fragment,{children:[u.jsx("button",{className:"btn-action btn-approve",onClick:()=>r(K.id),title:"Aprobar movimiento",children:"✓"}),u.jsx("button",{className:"btn-action btn-reject",onClick:()=>o(K.id),title:"Rechazar movimiento",children:"✗"})]}),e&&K.status===Ue.PENDIENTE&&u.jsx("button",{className:"btn-action btn-edit",onClick:()=>e(K),title:"Editar movimiento",children:"✏️"})]})})]},K.id))})]})}),u.jsxs("div",{className:"table-info",children:[u.jsxs("div",{className:"table-summary",children:[u.jsxs("span",{className:"total-rows",children:[s.length," movimiento",s.length!==1?"s":""]}),h&&u.jsxs("span",{className:"sort-info",children:["Ordenado por ",h," (",g==="asc"?"ascendente":"descendente",")"]})]}),u.jsxs("div",{className:"table-legend",children:[u.jsxs("span",{className:"legend-item",children:[u.jsx("span",{className:"legend-icon",children:"⏳"})," Pendiente"]}),u.jsxs("span",{className:"legend-item",children:[u.jsx("span",{className:"legend-icon",children:"✅"})," Completado"]}),u.jsxs("span",{className:"legend-item",children:[u.jsx("span",{className:"legend-icon",children:"❌"})," Cancelado"]})]})]})]})},Ik=({movements:s,viewMode:e,onEdit:t,onView:r,userRole:o})=>e==="table"?u.jsx(xk,{movements:s,onEdit:t,onView:r,userRole:o}):u.jsx(wk,{movements:s,onEdit:t,onView:r,userRole:o}),Ck=({isOpen:s,onClose:e,movement:t,mode:r,onSuccess:o})=>{const[l,h]=ie.useState({type:"",fuelType:"",quantity:"",unitPrice:"",location:"Principal",vehicleId:"",destinationLocation:"",description:"",reference:"",effectiveDate:new Date().toISOString().slice(0,16)}),[m,g]=ie.useState(!1),[v,_]=ie.useState(""),[b,A]=ie.useState({}),[M,I]=ie.useState([]),[U,x]=ie.useState(!1),[$,W]=ie.useState([]),[K,J]=ie.useState(""),q=[{value:"Diesel",label:"Diesel 🚛",price:12500},{value:"Gasolina",label:"Gasolina 🚗",price:14200},{value:"ACPM",label:"ACPM 🚚",price:13800},{value:"Lubricante",label:"Lubricante 🛢️",price:45e3}],oe=["Principal","Bodega Norte","Bodega Sur","Campo Operativo","Estación Móvil"];ie.useEffect(()=>{(async()=>{if(s){x(!0);try{const[j,Ce]=await Promise.all([YS(),qS()]);I(j),W(Ce.success?Ce.data:[])}catch(j){console.error("Error al cargar datos:",j)}finally{x(!1)}}})()},[s]),ie.useEffect(()=>{t&&(r==="edit"||r==="view")?h({type:t.type||"",fuelType:t.fuelType||"",quantity:t.quantity?.toString()||"",unitPrice:t.unitPrice?.toString()||"",location:t.location||"Principal",vehicleId:t.vehicleId||"",destinationLocation:t.destinationLocation||"",description:t.description||"",reference:t.reference||"",effectiveDate:t.effectiveDate?new Date(t.effectiveDate).toISOString().slice(0,16):new Date().toISOString().slice(0,16)}):r==="create"&&h({type:"",fuelType:"",quantity:"",unitPrice:"",location:"Principal",vehicleId:"",destinationLocation:"",description:"",reference:"",effectiveDate:new Date().toISOString().slice(0,16)}),_(""),A({})},[t,r,s]),ie.useEffect(()=>{if(l.fuelType&&!l.unitPrice){const C=q.find(j=>j.value===l.fuelType);C&&h(j=>({...j,unitPrice:C.price.toString()}))}},[l.fuelType]),ie.useEffect(()=>{if(J(""),(l.type===Te.SALIDA||l.type===Te.TRANSFERENCIA)&&l.fuelType&&l.location&&l.quantity&&$.length>0){const C={type:l.type===Te.SALIDA?"outbound":"transfer",fuelType:l.fuelType,quantity:l.quantity,sourceLocation:l.location},j=r0(C,$);j.isValid?j.warning&&J(`⚠️ ${j.warning}`):J(`🚫 ${j.error}`)}},[l.type,l.fuelType,l.location,l.quantity,$]);const O=(C,j)=>{h(Ce=>({...Ce,[C]:j})),b[C]&&A(Ce=>({...Ce,[C]:""}))},S=()=>{const C={};if(l.type||(C.type="Tipo de movimiento requerido"),l.fuelType||(C.fuelType="Tipo de combustible requerido"),l.quantity?parseFloat(l.quantity)<=0&&(C.quantity="La cantidad debe ser mayor a cero"):C.quantity="Cantidad requerida",l.unitPrice?parseFloat(l.unitPrice)<0&&(C.unitPrice="El precio no puede ser negativo"):C.unitPrice="Precio unitario requerido",l.type===Te.SALIDA&&!l.vehicleId&&(C.vehicleId="Las salidas requieren un vehículo"),l.type===Te.TRANSFERENCIA&&!l.destinationLocation&&(C.destinationLocation="Las transferencias requieren una ubicación destino"),(l.type===Te.SALIDA||l.type===Te.TRANSFERENCIA)&&l.fuelType&&l.location&&l.quantity&&$.length>0){const j={type:l.type===Te.SALIDA?"outbound":"transfer",fuelType:l.fuelType,quantity:l.quantity,sourceLocation:l.location},Ce=r0(j,$);Ce.isValid||(C.quantity=Ce.error)}return A(C),Object.keys(C).length===0},R=async C=>{if(C.preventDefault(),!S()){_("Por favor corrige los errores en el formulario");return}g(!0),_("");try{const j={...l,quantity:parseFloat(l.quantity),unitPrice:parseFloat(l.unitPrice),effectiveDate:new Date(l.effectiveDate)};r==="create"?await hk(j):r==="edit"&&await BS(t.id,j),o()}catch(j){console.error("Error al guardar movimiento:",j),_(j.message||"Error al guardar el movimiento")}finally{g(!1)}},D=(parseFloat(l.quantity)||0)*(parseFloat(l.unitPrice)||0),k=()=>{switch(r){case"create":return"➕ Nuevo Movimiento";case"edit":return"✏️ Editar Movimiento";case"view":return"👁️ Detalles del Movimiento";default:return"Movimiento"}};return s?u.jsx("div",{className:"modal-overlay",onClick:e,children:u.jsxs("div",{className:"modal-content movement-modal",onClick:C=>C.stopPropagation(),children:[u.jsxs("div",{className:"modal-header",children:[u.jsx("h3",{children:k()}),u.jsx("button",{className:"modal-close",onClick:e,children:"✕"})]}),u.jsxs("div",{className:"modal-body",children:[v&&u.jsxs("div",{className:"error-message",children:[u.jsx("span",{className:"error-icon",children:"⚠️"}),v]}),u.jsxs("form",{onSubmit:R,className:"movement-form",children:[u.jsxs("div",{className:"form-row",children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Tipo de Movimiento *"}),u.jsxs("select",{value:l.type,onChange:C=>O("type",C.target.value),disabled:r==="view",className:b.type?"error":"",children:[u.jsx("option",{value:"",children:"Seleccionar tipo..."}),u.jsx("option",{value:Te.ENTRADA,children:"📥 Entrada"}),u.jsx("option",{value:Te.SALIDA,children:"📤 Salida"}),u.jsx("option",{value:Te.TRANSFERENCIA,children:"🔄 Transferencia"}),u.jsx("option",{value:Te.AJUSTE,children:"⚖️ Ajuste"})]}),b.type&&u.jsx("span",{className:"field-error",children:b.type})]}),r==="view"&&t&&u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Estado"}),u.jsx("div",{className:"status-display",children:u.jsxs("span",{className:`status-badge status-${t.status}`,children:[t.status===Ue.COMPLETADO&&"✅",t.status===Ue.PENDIENTE&&"⏳",t.status===Ue.CANCELADO&&"❌",t.status.charAt(0).toUpperCase()+t.status.slice(1)]})})]})]}),u.jsxs("div",{className:"form-row",children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Tipo de Combustible *"}),u.jsxs("select",{value:l.fuelType,onChange:C=>O("fuelType",C.target.value),disabled:r==="view",className:b.fuelType?"error":"",children:[u.jsx("option",{value:"",children:"Seleccionar combustible..."}),q.map(C=>u.jsx("option",{value:C.value,children:C.label},C.value))]}),b.fuelType&&u.jsx("span",{className:"field-error",children:b.fuelType})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Cantidad (galones) *"}),u.jsx("input",{type:"number",step:"0.01",min:"0",value:l.quantity,onChange:C=>O("quantity",C.target.value),disabled:r==="view",placeholder:"0.00",className:b.quantity?"error":""}),b.quantity&&u.jsx("span",{className:"field-error",children:b.quantity}),K&&!b.quantity&&u.jsx("div",{className:"stock-warning",children:K})]})]}),u.jsxs("div",{className:"form-row",children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Precio Unitario (COP) *"}),u.jsx("input",{type:"number",step:"1",min:"0",value:l.unitPrice,onChange:C=>O("unitPrice",C.target.value),disabled:r==="view",placeholder:"0",className:b.unitPrice?"error":""}),b.unitPrice&&u.jsx("span",{className:"field-error",children:b.unitPrice})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Valor Total"}),u.jsx("div",{className:"total-value-display",children:Bc(D)})]})]}),u.jsxs("div",{className:"form-row",children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Ubicación"}),u.jsx("select",{value:l.location,onChange:C=>O("location",C.target.value),disabled:r==="view",children:oe.map(C=>u.jsxs("option",{value:C,children:["📍 ",C]},C))})]}),u.jsxs("div",{className:"form-group",children:[u.jsxs("label",{children:["Vehículo/Equipo ",l.type===Te.SALIDA&&"*"]}),l.type===Te.SALIDA?U?u.jsxs("div",{className:"loading-vehicles",children:[u.jsx("span",{className:"loading-spinner small"}),"Cargando vehículos..."]}):u.jsxs("select",{value:l.vehicleId,onChange:C=>O("vehicleId",C.target.value),disabled:r==="view",className:b.vehicleId?"error":"",children:[u.jsx("option",{value:"",children:"Seleccionar vehículo destino..."}),M.map(C=>u.jsxs("option",{value:C.vehicleId,children:["🚜 ",C.vehicleId," - ",C.name," (",C.type,")"]},C.id))]}):u.jsx("input",{type:"text",value:l.vehicleId,onChange:C=>O("vehicleId",C.target.value),disabled:r==="view",placeholder:"ID del vehículo o equipo",className:b.vehicleId?"error":""}),b.vehicleId&&u.jsx("span",{className:"field-error",children:b.vehicleId})]})]}),l.type===Te.TRANSFERENCIA&&u.jsx("div",{className:"form-row",children:u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Ubicación Destino *"}),u.jsxs("select",{value:l.destinationLocation,onChange:C=>O("destinationLocation",C.target.value),disabled:r==="view",className:b.destinationLocation?"error":"",children:[u.jsx("option",{value:"",children:"Seleccionar destino..."}),oe.filter(C=>C!==l.location).map(C=>u.jsxs("option",{value:C,children:["📍 ",C]},C))]}),b.destinationLocation&&u.jsx("span",{className:"field-error",children:b.destinationLocation})]})}),u.jsxs("div",{className:"form-row",children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Fecha Efectiva"}),u.jsx("input",{type:"datetime-local",value:l.effectiveDate,onChange:C=>O("effectiveDate",C.target.value),disabled:r==="view"})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Referencia"}),u.jsx("input",{type:"text",value:l.reference,onChange:C=>O("reference",C.target.value),disabled:r==="view",placeholder:"Factura, orden, etc."})]})]}),u.jsx("div",{className:"form-row",children:u.jsxs("div",{className:"form-group full-width",children:[u.jsx("label",{children:"Descripción"}),u.jsx("textarea",{value:l.description,onChange:C=>O("description",C.target.value),disabled:r==="view",placeholder:"Detalles adicionales del movimiento...",rows:"3"})]})}),r==="view"&&t&&u.jsx("div",{className:"movement-details",children:u.jsxs("div",{className:"details-section",children:[u.jsx("h4",{children:"📋 Información del Sistema"}),u.jsxs("div",{className:"details-grid",children:[u.jsxs("div",{className:"detail-item",children:[u.jsx("label",{children:"ID:"}),u.jsx("span",{children:t.id})]}),u.jsxs("div",{className:"detail-item",children:[u.jsx("label",{children:"Creado:"}),u.jsx("span",{children:new Date(t.createdAt).toLocaleString("es-CO")})]}),t.updatedAt&&u.jsxs("div",{className:"detail-item",children:[u.jsx("label",{children:"Actualizado:"}),u.jsx("span",{children:new Date(t.updatedAt).toLocaleString("es-CO")})]}),t.approvedAt&&u.jsxs("div",{className:"detail-item",children:[u.jsx("label",{children:"Aprobado:"}),u.jsx("span",{children:new Date(t.approvedAt).toLocaleString("es-CO")})]})]})]})})]})]}),u.jsxs("div",{className:"modal-footer",children:[u.jsx("button",{type:"button",className:"btn-cancel",onClick:e,children:r==="view"?"Cerrar":"Cancelar"}),r!=="view"&&u.jsx("button",{type:"submit",className:"btn-primary",onClick:R,disabled:m,children:m?u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"loading-spinner small"}),"Guardando..."]}):r==="create"?"Crear Movimiento":"Actualizar Movimiento"})]})]})}):null},Rk=()=>{const{user:s,userProfile:e}=Ca(),[t,r]=ie.useState([]),[o,l]=ie.useState(null),[h,m]=ie.useState(!0),[g,v]=ie.useState(null),[_,b]=ie.useState({type:"",status:"",fuelType:"",vehicleId:"",dateRange:"all"}),[A,M]=ie.useState("cards"),[I,U]=ie.useState(""),[x,$]=ie.useState(!1),[W,K]=ie.useState(null),[J,q]=ie.useState("create");ie.useEffect(()=>{if(!s)return;m(!0);const re=HS((ue,ye)=>{if(ye){console.error("Error en suscripción de movimientos:",ye),v("Error al cargar movimientos"),m(!1);return}r(ue),v(null),m(!1)},_);return()=>re()},[s,_]),ie.useEffect(()=>{s&&(async()=>{try{const ue=await gk(_);l(ue)}catch(ue){console.error("Error al cargar estadísticas:",ue)}})()},[s,t,_]);const oe=t.filter(re=>{if(!I)return!0;const ue=I.toLowerCase();return re.fuelType?.toLowerCase().includes(ue)||re.type?.toLowerCase().includes(ue)||re.location?.toLowerCase().includes(ue)||re.vehicleId?.toLowerCase().includes(ue)||re.description?.toLowerCase().includes(ue)||re.reference?.toLowerCase().includes(ue)}),O=()=>{K(null),q("create"),$(!0)},S=re=>{K(re),q("edit"),$(!0)},R=re=>{K(re),q("view"),$(!0)},D=()=>{$(!1),K(null)},k=re=>{b(ue=>({...ue,...re}))},C=()=>{b({type:"",status:"",fuelType:"",vehicleId:"",dateRange:"all"}),U("")},j=async re=>{if(window.confirm("¿Estás seguro de que quieres aprobar este movimiento? Esta acción actualizará el inventario."))try{await pk(re),alert("Movimiento aprobado y stock actualizado.")}catch(ue){console.error("Error al aprobar movimiento:",ue),alert(`Error al aprobar movimiento: ${ue.message}`)}},Ce=async re=>{if(window.confirm("¿Estás seguro de que quieres rechazar este movimiento?"))try{await BS(re,{status:Ue.CANCELADO}),alert("Movimiento rechazado.")}catch(ue){console.error("Error al rechazar movimiento:",ue),alert(`Error al rechazar movimiento: ${ue.message}`)}},$e=e?.role==="admin"||e?.role==="contador"||e?.role==="cliente",X=e?.role==="admin";return h?u.jsx("div",{className:"movements-main",children:u.jsxs("div",{className:"loading-container",children:[u.jsx("div",{className:"loading-spinner"}),u.jsx("p",{children:"Cargando movimientos..."})]})}):g?u.jsx("div",{className:"movements-main",children:u.jsxs("div",{className:"error-container",children:[u.jsx("div",{className:"error-icon",children:"⚠️"}),u.jsx("h3",{children:"Error al cargar movimientos"}),u.jsx("p",{children:g}),u.jsx("button",{className:"btn-retry",onClick:()=>window.location.reload(),children:"Reintentar"})]})}):u.jsxs("div",{className:"movements-main",children:[u.jsxs("div",{className:"movements-header",children:[u.jsxs("div",{className:"header-title",children:[u.jsx("h2",{children:"📊 Movimientos de Combustibles"}),u.jsx("p",{children:"Gestiona entradas, salidas, transferencias y ajustes de inventario"})]}),$e&&u.jsx("button",{className:"btn-create-movement",onClick:O,children:"➕ Nuevo Movimiento"})]}),o&&u.jsx(Nk,{stats:o,filters:_}),u.jsx(Sk,{filters:_,onFilterChange:k,onClearFilters:C,searchTerm:I,onSearchChange:U,viewMode:A,onViewModeChange:M,totalResults:oe.length}),oe.length===0?u.jsxs("div",{className:"empty-state",children:[u.jsx("div",{className:"empty-icon",children:"📋"}),u.jsx("h3",{children:t.length===0?"No hay movimientos registrados":"No se encontraron movimientos"}),u.jsx("p",{children:t.length===0?"Comienza creando tu primer movimiento de combustible":"Intenta ajustar los filtros de búsqueda"}),t.length===0&&$e&&u.jsx("button",{className:"btn-create-first",onClick:O,children:"➕ Crear Primer Movimiento"})]}):u.jsx(Ik,{movements:oe,viewMode:A,onEdit:X?S:null,onView:R,onApprove:j,onReject:Ce,userRole:s?.role}),x&&u.jsx(Ck,{isOpen:x,onClose:D,movement:W,mode:J,onSuccess:()=>{D()}})]})},jk=({stats:s,filters:e})=>{if(!s)return null;const t=b=>`${fs(b)} gal`,r=b=>`${fs(b)} hrs`,o=b=>`${b.toFixed(2)} gal/hr`,l=b=>{switch(b){case pe.EXCAVADORA:return"#059669";case pe.BULLDOZER:return"#dc2626";case pe.CARGADOR:return"#2563eb";case pe.CAMION:return"#7c3aed";case pe.GRUA:return"#ea580c";case pe.MOTOSIERRA:return"#16a34a";case pe.TRACTOR:return"#ca8a04";case pe.VOLQUETA:return"#9333ea";default:return"#6b7280"}},h=b=>{switch(b){case pe.EXCAVADORA:return"🚚";case pe.BULLDOZER:return"🚜";case pe.CARGADOR:return"🏗️";case pe.CAMION:return"🚛";case pe.GRUA:return"🏗️";case pe.MOTOSIERRA:return"🪚";case pe.TRACTOR:return"🚜";case pe.VOLQUETA:return"🚛";default:return"🚗"}},m=b=>{switch(b){case Re.ACTIVO:return"#10b981";case Re.MANTENIMIENTO:return"#f59e0b";case Re.INACTIVO:return"#6b7280";case Re.REPARACION:return"#ef4444";default:return"#6b7280"}},g=b=>{switch(b){case Re.ACTIVO:return"✅";case Re.MANTENIMIENTO:return"🔧";case Re.INACTIVO:return"⏸️";case Re.REPARACION:return"🔴";default:return"❓"}},v=b=>{switch(b){case yt.DIESEL:return"🚛";case yt.GASOLINA:return"🚗";case yt.ACPM:return"🚚";case yt.MIXTO:return"⛽";default:return"⛽"}},_=s.totalVehicles>0?((s.byStatus[Re.ACTIVO]||0)/s.totalVehicles*100).toFixed(1):0;return u.jsxs("div",{className:"vehicles-stats",children:[u.jsxs("div",{className:"stats-grid",children:[u.jsxs("div",{className:"stat-card primary",children:[u.jsx("div",{className:"stat-icon",children:"🚜"}),u.jsxs("div",{className:"stat-content",children:[u.jsx("div",{className:"stat-value",children:fs(s.totalVehicles)}),u.jsx("div",{className:"stat-label",children:"Total Vehículos"}),u.jsx("div",{className:"stat-trend",children:u.jsxs("span",{className:`trend ${_>=80?"positive":"warning"}`,children:[_>=80?"📈":"⚠️"," ",_,"% activos"]})})]})]}),u.jsxs("div",{className:"stat-card",children:[u.jsx("div",{className:"stat-icon",children:"⛽"}),u.jsxs("div",{className:"stat-content",children:[u.jsx("div",{className:"stat-value",children:t(s.totalFuelConsumed)}),u.jsx("div",{className:"stat-label",children:"Combustible Consumido"}),u.jsxs("div",{className:"stat-secondary",children:["Promedio: ",o(s.averageConsumption||0)]})]})]}),u.jsxs("div",{className:"stat-card",children:[u.jsx("div",{className:"stat-icon",children:"⏰"}),u.jsxs("div",{className:"stat-content",children:[u.jsx("div",{className:"stat-value",children:r(s.totalHoursWorked)}),u.jsx("div",{className:"stat-label",children:"Horas Trabajadas"}),u.jsxs("div",{className:"stat-secondary",children:["Promedio: ",r(s.totalHoursWorked/(s.totalVehicles||1))]})]})]}),u.jsxs("div",{className:"stat-card",children:[u.jsx("div",{className:"stat-icon",children:"🏆"}),u.jsxs("div",{className:"stat-content",children:[u.jsx("div",{className:"stat-value",children:s.mostActiveVehicle?s.mostActiveVehicle.vehicleId:"N/A"}),u.jsx("div",{className:"stat-label",children:"Más Activo"}),u.jsx("div",{className:"stat-secondary",children:s.mostActiveVehicle?`${s.mostActiveVehicle.totalMovements||0} movimientos`:"Sin datos"})]})]})]}),u.jsxs("div",{className:"stats-breakdown",children:[u.jsxs("div",{className:"breakdown-section",children:[u.jsx("h4",{children:"🚜 Por Tipo de Vehículo"}),u.jsx("div",{className:"breakdown-grid",children:Object.entries(s.byType).map(([b,A])=>{const M=(A/s.totalVehicles*100).toFixed(1);return u.jsxs("div",{className:"breakdown-item",children:[u.jsxs("div",{className:"breakdown-header",children:[u.jsx("span",{className:"breakdown-icon",children:h(b)}),u.jsx("span",{className:"breakdown-label",children:b.charAt(0).toUpperCase()+b.slice(1)})]}),u.jsx("div",{className:"breakdown-value",children:A}),u.jsx("div",{className:"breakdown-bar",children:u.jsx("div",{className:"breakdown-fill",style:{width:`${M}%`,backgroundColor:l(b)}})}),u.jsxs("div",{className:"breakdown-percentage",children:[M,"%"]})]},b)})})]}),u.jsxs("div",{className:"breakdown-section",children:[u.jsx("h4",{children:"⚡ Por Estado"}),u.jsx("div",{className:"breakdown-grid",children:Object.entries(s.byStatus).map(([b,A])=>{const M=(A/s.totalVehicles*100).toFixed(1);return u.jsxs("div",{className:"breakdown-item",children:[u.jsxs("div",{className:"breakdown-header",children:[u.jsx("span",{className:"breakdown-icon",children:g(b)}),u.jsx("span",{className:"breakdown-label",children:b.charAt(0).toUpperCase()+b.slice(1)})]}),u.jsx("div",{className:"breakdown-value",children:A}),u.jsx("div",{className:"breakdown-bar",children:u.jsx("div",{className:"breakdown-fill",style:{width:`${M}%`,backgroundColor:m(b)}})}),u.jsxs("div",{className:"breakdown-percentage",children:[M,"%"]})]},b)})})]}),u.jsxs("div",{className:"breakdown-section",children:[u.jsx("h4",{children:"⛽ Por Tipo de Combustible"}),u.jsx("div",{className:"breakdown-grid",children:Object.entries(s.byFuelType).map(([b,A])=>{const M=(A/s.totalVehicles*100).toFixed(1);return u.jsxs("div",{className:"breakdown-item",children:[u.jsxs("div",{className:"breakdown-header",children:[u.jsx("span",{className:"breakdown-icon",children:v(b)}),u.jsx("span",{className:"breakdown-label",children:b})]}),u.jsx("div",{className:"breakdown-value",children:A}),u.jsx("div",{className:"breakdown-bar",children:u.jsx("div",{className:"breakdown-fill",style:{width:`${M}%`,backgroundColor:"#059669"}})}),u.jsxs("div",{className:"breakdown-percentage",children:[M,"%"]})]},b)})})]})]}),(s.totalFuelConsumed>0||s.totalHoursWorked>0)&&u.jsxs("div",{className:"performance-metrics",children:[u.jsx("h4",{children:"📊 Métricas de Rendimiento"}),u.jsxs("div",{className:"metrics-grid",children:[u.jsxs("div",{className:"metric-card",children:[u.jsx("div",{className:"metric-icon",children:"⚡"}),u.jsxs("div",{className:"metric-content",children:[u.jsx("div",{className:"metric-label",children:"Eficiencia de Flota"}),u.jsxs("div",{className:"metric-value",children:[_,"%"]}),u.jsxs("div",{className:"metric-description",children:[s.byStatus[Re.ACTIVO]||0," de ",s.totalVehicles," activos"]})]})]}),s.averageConsumption>0&&u.jsxs("div",{className:"metric-card",children:[u.jsx("div",{className:"metric-icon",children:"📈"}),u.jsxs("div",{className:"metric-content",children:[u.jsx("div",{className:"metric-label",children:"Consumo Promedio"}),u.jsx("div",{className:"metric-value",children:o(s.averageConsumption)}),u.jsx("div",{className:"metric-description",children:"Por vehículo por hora trabajada"})]})]}),s.mostActiveVehicle&&u.jsxs("div",{className:"metric-card",children:[u.jsx("div",{className:"metric-icon",children:"🏆"}),u.jsxs("div",{className:"metric-content",children:[u.jsx("div",{className:"metric-label",children:"Mayor Utilización"}),u.jsx("div",{className:"metric-value",children:s.mostActiveVehicle.vehicleId}),u.jsxs("div",{className:"metric-description",children:[t(s.mostActiveVehicle.totalFuelConsumed||0)," consumidos"]})]})]}),s.leastActiveVehicle&&u.jsxs("div",{className:"metric-card",children:[u.jsx("div",{className:"metric-icon",children:"📉"}),u.jsxs("div",{className:"metric-content",children:[u.jsx("div",{className:"metric-label",children:"Menor Utilización"}),u.jsx("div",{className:"metric-value",children:s.leastActiveVehicle.vehicleId}),u.jsxs("div",{className:"metric-description",children:[t(s.leastActiveVehicle.totalFuelConsumed||0)," consumidos"]})]})]})]})]}),(e.type||e.status||e.fuelType||e.location)&&u.jsxs("div",{className:"active-filters",children:[u.jsx("h4",{children:"🔍 Filtros Activos"}),u.jsxs("div",{className:"filters-list",children:[e.type&&u.jsxs("span",{className:"filter-tag",children:["Tipo: ",e.type]}),e.status&&u.jsxs("span",{className:"filter-tag",children:["Estado: ",e.status]}),e.fuelType&&u.jsxs("span",{className:"filter-tag",children:["Combustible: ",e.fuelType]}),e.location&&u.jsxs("span",{className:"filter-tag",children:["Ubicación: ",e.location]})]})]})]})},Dk=({filters:s,onFilterChange:e,onClearFilters:t,searchTerm:r,onSearchChange:o,viewMode:l,onViewModeChange:h,totalResults:m})=>{const[g,v]=ie.useState(!1),_=["Oficina Principal","Bodega Norte","Bodega Sur","Campo Operativo","Taller Mecánico","Proyecto A","Proyecto B","En Reparación","Otros"],b=Object.values(s).filter(I=>I&&I!==""&&I!=="all").length,A=(I,U)=>{e({[I]:U})},M=I=>{e(I)};return u.jsxs("div",{className:"vehicles-filters",children:[u.jsxs("div",{className:"filters-main",children:[u.jsx("div",{className:"search-section",children:u.jsxs("div",{className:"search-box",children:[u.jsx("span",{className:"search-icon",children:"🔍"}),u.jsx("input",{type:"text",placeholder:"Buscar por ID, nombre, marca, modelo, ubicación...",value:r,onChange:I=>o(I.target.value),className:"search-input"}),r&&u.jsx("button",{className:"search-clear",onClick:()=>o(""),title:"Limpiar búsqueda",children:"✕"})]})}),u.jsxs("div",{className:"filters-controls",children:[u.jsxs("div",{className:"quick-filters",children:[u.jsx("button",{className:`quick-filter ${s.status===Re.ACTIVO?"active":""}`,onClick:()=>M({status:Re.ACTIVO}),children:"✅ Activos"}),u.jsx("button",{className:`quick-filter ${s.status===Re.MANTENIMIENTO?"active":""}`,onClick:()=>M({status:Re.MANTENIMIENTO}),children:"🔧 Mantenimiento"}),u.jsx("button",{className:`quick-filter ${s.type===pe.EXCAVADORA?"active":""}`,onClick:()=>M({type:pe.EXCAVADORA}),children:"🚚 Excavadoras"}),u.jsx("button",{className:`quick-filter ${s.type===pe.TRACTOR?"active":""}`,onClick:()=>M({type:pe.TRACTOR}),children:"🚜 Tractores"})]}),u.jsxs("button",{className:`btn-advanced-filters ${g?"active":""}`,onClick:()=>v(!g),children:["🎛️ Filtros",b>0&&u.jsx("span",{className:"filters-count",children:b})]}),u.jsxs("div",{className:"view-modes",children:[u.jsx("button",{className:`view-mode ${l==="cards"?"active":""}`,onClick:()=>h("cards"),title:"Vista en tarjetas",children:"🎴"}),u.jsx("button",{className:`view-mode ${l==="table"?"active":""}`,onClick:()=>h("table"),title:"Vista en tabla",children:"📋"})]})]})]}),g&&u.jsxs("div",{className:"filters-advanced",children:[u.jsxs("div",{className:"filters-grid",children:[u.jsxs("div",{className:"filter-group",children:[u.jsx("label",{children:"Tipo de Vehículo"}),u.jsxs("select",{value:s.type,onChange:I=>A("type",I.target.value),className:"filter-select",children:[u.jsx("option",{value:"",children:"Todos los tipos"}),u.jsx("option",{value:pe.EXCAVADORA,children:"🚚 Excavadora"}),u.jsx("option",{value:pe.BULLDOZER,children:"🚜 Bulldozer"}),u.jsx("option",{value:pe.CARGADOR,children:"🏗️ Cargador"}),u.jsx("option",{value:pe.CAMION,children:"🚛 Camión"}),u.jsx("option",{value:pe.GRUA,children:"🏗️ Grúa"}),u.jsx("option",{value:pe.MOTOSIERRA,children:"🪚 Motosierra"}),u.jsx("option",{value:pe.TRACTOR,children:"🚜 Tractor"}),u.jsx("option",{value:pe.VOLQUETA,children:"🚛 Volqueta"}),u.jsx("option",{value:pe.OTROS,children:"🚗 Otros"})]})]}),u.jsxs("div",{className:"filter-group",children:[u.jsx("label",{children:"Estado"}),u.jsxs("select",{value:s.status,onChange:I=>A("status",I.target.value),className:"filter-select",children:[u.jsx("option",{value:"",children:"Todos los estados"}),u.jsx("option",{value:Re.ACTIVO,children:"✅ Activo"}),u.jsx("option",{value:Re.MANTENIMIENTO,children:"🔧 Mantenimiento"}),u.jsx("option",{value:Re.INACTIVO,children:"⏸️ Inactivo"}),u.jsx("option",{value:Re.REPARACION,children:"🔴 Reparación"})]})]}),u.jsxs("div",{className:"filter-group",children:[u.jsx("label",{children:"Tipo de Combustible"}),u.jsxs("select",{value:s.fuelType,onChange:I=>A("fuelType",I.target.value),className:"filter-select",children:[u.jsx("option",{value:"",children:"Todos los combustibles"}),u.jsx("option",{value:yt.DIESEL,children:"🚛 Diesel"}),u.jsx("option",{value:yt.GASOLINA,children:"🚗 Gasolina"}),u.jsx("option",{value:yt.ACPM,children:"🚚 ACPM"}),u.jsx("option",{value:yt.MIXTO,children:"⛽ Mixto"})]})]}),u.jsxs("div",{className:"filter-group",children:[u.jsx("label",{children:"Ubicación Actual"}),u.jsxs("select",{value:s.location,onChange:I=>A("location",I.target.value),className:"filter-select",children:[u.jsx("option",{value:"",children:"Todas las ubicaciones"}),_.map(I=>u.jsxs("option",{value:I,children:["📍 ",I]},I))]})]}),u.jsxs("div",{className:"filter-group",children:[u.jsx("label",{children:"Mantenimiento"}),u.jsxs("select",{value:s.maintenance,onChange:I=>A("maintenance",I.target.value),className:"filter-select",children:[u.jsx("option",{value:"all",children:"Todos"}),u.jsx("option",{value:"due",children:"Mantenimiento debido"}),u.jsx("option",{value:"overdue",children:"Mantenimiento vencido"}),u.jsx("option",{value:"recent",children:"Mantenimiento reciente"})]})]})]}),u.jsxs("div",{className:"filters-actions",children:[u.jsx("button",{className:"btn-clear-filters",onClick:t,disabled:b===0,children:"🗑️ Limpiar Filtros"}),u.jsxs("div",{className:"filters-info",children:[u.jsxs("span",{className:"results-count",children:[m," resultado",m!==1?"s":""]}),b>0&&u.jsxs("span",{className:"active-filters-text",children:["(",b," filtro",b!==1?"s":""," activo",b!==1?"s":"",")"]})]})]})]}),b>0&&u.jsx("div",{className:"active-filters-summary",children:u.jsxs("div",{className:"summary-content",children:[u.jsx("span",{className:"summary-label",children:"Filtros activos:"}),u.jsxs("div",{className:"summary-tags",children:[s.type&&u.jsxs("span",{className:"summary-tag",onClick:()=>A("type",""),children:["Tipo: ",s.type," ✕"]}),s.status&&u.jsxs("span",{className:"summary-tag",onClick:()=>A("status",""),children:["Estado: ",s.status," ✕"]}),s.fuelType&&u.jsxs("span",{className:"summary-tag",onClick:()=>A("fuelType",""),children:["Combustible: ",s.fuelType," ✕"]}),s.location&&u.jsxs("span",{className:"summary-tag",onClick:()=>A("location",""),children:["Ubicación: ",s.location," ✕"]}),s.maintenance!=="all"&&u.jsxs("span",{className:"summary-tag",onClick:()=>A("maintenance","all"),children:["Mantenimiento: ",s.maintenance," ✕"]})]})]})}),u.jsx("div",{className:"keyboard-shortcuts",style:{display:"none"},children:u.jsx("small",{children:"💡 Atajos: Ctrl+F (buscar), Ctrl+1 (activos), Ctrl+2 (mantenimiento), Ctrl+T (tractores)"})})]})},Ok=({vehicles:s,onEdit:e,onView:t,onMaintenance:r})=>{const o=x=>new Intl.NumberFormat("es-CO").format(x),l=x=>`${o(x)} gal`,h=x=>`${o(x)} hrs`,m=x=>x?(x instanceof Date?x:new Date(x)).toLocaleDateString("es-CO",{day:"2-digit",month:"2-digit",year:"numeric"}):"Sin fecha",g=x=>{if(!x)return"";const $=new Date,W=x instanceof Date?x:new Date(x),K=Math.abs($-W),J=Math.ceil(K/(1e3*60*60*24));return J===1?"hace 1 día":J<7?`hace ${J} días`:J<30?`hace ${Math.ceil(J/7)} semanas`:J<365?`hace ${Math.ceil(J/30)} meses`:`hace ${Math.ceil(J/365)} años`},v=x=>{switch(x){case pe.EXCAVADORA:return"vehicle-excavadora";case pe.BULLDOZER:return"vehicle-bulldozer";case pe.CARGADOR:return"vehicle-cargador";case pe.CAMION:return"vehicle-camion";case pe.GRUA:return"vehicle-grua";case pe.MOTOSIERRA:return"vehicle-motosierra";case pe.TRACTOR:return"vehicle-tractor";case pe.VOLQUETA:return"vehicle-volqueta";default:return"vehicle-default"}},_=x=>{switch(x){case Re.ACTIVO:return"status-activo";case Re.MANTENIMIENTO:return"status-mantenimiento";case Re.INACTIVO:return"status-inactivo";case Re.REPARACION:return"status-reparacion";default:return"status-default"}},b=x=>{switch(x){case pe.EXCAVADORA:return"🚚";case pe.BULLDOZER:return"🚜";case pe.CARGADOR:return"🏗️";case pe.CAMION:return"🚛";case pe.GRUA:return"🏗️";case pe.MOTOSIERRA:return"🪚";case pe.TRACTOR:return"🚜";case pe.VOLQUETA:return"🚛";default:return"🚗"}},A=x=>{switch(x){case yt.DIESEL:return"🚛";case yt.GASOLINA:return"🚗";case yt.ACPM:return"🚚";case yt.MIXTO:return"⛽";default:return"⛽"}},M=x=>{switch(x){case Re.ACTIVO:return"✅";case Re.MANTENIMIENTO:return"🔧";case Re.INACTIVO:return"⏸️";case Re.REPARACION:return"🔴";default:return"❓"}},I=x=>!x.totalHoursWorked||x.totalHoursWorked===0?x.estimatedConsumptionPerHour||0:x.totalFuelConsumed/x.totalHoursWorked,U=x=>x.lastMaintenanceDate?Math.floor((new Date-new Date(x.lastMaintenanceDate))/(1e3*60*60*24))>90:!0;return u.jsx("div",{className:"vehicles-cards",children:s.map(x=>u.jsxs("div",{className:`vehicle-card ${v(x.type)}`,children:[u.jsx("div",{className:"card-header",children:u.jsxs("div",{className:"vehicle-info",children:[u.jsxs("div",{className:"vehicle-id-section",children:[u.jsx("span",{className:"vehicle-icon",children:b(x.type)}),u.jsxs("div",{className:"vehicle-details",children:[u.jsx("span",{className:"vehicle-id",children:x.vehicleId}),u.jsx("span",{className:"vehicle-name",children:x.name})]})]}),u.jsxs("div",{className:`status-badge ${_(x.status)}`,children:[u.jsx("span",{className:"status-icon",children:M(x.status)}),u.jsx("span",{className:"status-label",children:x.status.charAt(0).toUpperCase()+x.status.slice(1)})]})]})}),u.jsxs("div",{className:"card-content",children:[u.jsxs("div",{className:"basic-info",children:[u.jsxs("div",{className:"info-row",children:[u.jsx("span",{className:"info-label",children:"Tipo:"}),u.jsxs("span",{className:"info-value",children:[b(x.type)," ",x.type.charAt(0).toUpperCase()+x.type.slice(1)]})]}),x.brand&&x.model&&u.jsxs("div",{className:"info-row",children:[u.jsx("span",{className:"info-label",children:"Marca/Modelo:"}),u.jsxs("span",{className:"info-value",children:[x.brand," ",x.model]})]}),u.jsxs("div",{className:"info-row",children:[u.jsx("span",{className:"info-label",children:"Combustible:"}),u.jsxs("span",{className:"info-value",children:[A(x.fuelType)," ",x.fuelType]})]}),x.currentLocation&&u.jsxs("div",{className:"info-row",children:[u.jsx("span",{className:"info-label",children:"Ubicación:"}),u.jsxs("span",{className:"info-value",children:["📍 ",x.currentLocation]})]})]}),u.jsxs("div",{className:"consumption-metrics",children:[u.jsxs("div",{className:"metric-item",children:[u.jsx("div",{className:"metric-icon",children:"⛽"}),u.jsxs("div",{className:"metric-content",children:[u.jsx("div",{className:"metric-value",children:l(x.totalFuelConsumed||0)}),u.jsx("div",{className:"metric-label",children:"Consumido"})]})]}),u.jsxs("div",{className:"metric-item",children:[u.jsx("div",{className:"metric-icon",children:"⏰"}),u.jsxs("div",{className:"metric-content",children:[u.jsx("div",{className:"metric-value",children:h(x.totalHoursWorked||0)}),u.jsx("div",{className:"metric-label",children:"Trabajadas"})]})]}),u.jsxs("div",{className:"metric-item",children:[u.jsx("div",{className:"metric-icon",children:"📊"}),u.jsxs("div",{className:"metric-content",children:[u.jsxs("div",{className:"metric-value",children:[I(x).toFixed(1)," gal/hr"]}),u.jsx("div",{className:"metric-label",children:"Consumo"})]})]}),u.jsxs("div",{className:"metric-item",children:[u.jsx("div",{className:"metric-icon",children:"🔄"}),u.jsxs("div",{className:"metric-content",children:[u.jsx("div",{className:"metric-value",children:x.totalMovements||0}),u.jsx("div",{className:"metric-label",children:"Movimientos"})]})]})]}),(x.enginePower||x.fuelCapacity||x.year)&&u.jsxs("div",{className:"technical-specs",children:[x.enginePower&&u.jsxs("div",{className:"spec-item",children:[u.jsx("span",{className:"spec-icon",children:"⚡"}),u.jsxs("span",{className:"spec-value",children:[x.enginePower," HP"]})]}),x.fuelCapacity&&u.jsxs("div",{className:"spec-item",children:[u.jsx("span",{className:"spec-icon",children:"🛢️"}),u.jsxs("span",{className:"spec-value",children:[x.fuelCapacity," gal"]})]}),x.year&&u.jsxs("div",{className:"spec-item",children:[u.jsx("span",{className:"spec-icon",children:"📅"}),u.jsx("span",{className:"spec-value",children:x.year})]})]}),x.description&&u.jsx("div",{className:"description",children:u.jsx("p",{children:x.description})})]}),u.jsxs("div",{className:"card-footer",children:[u.jsxs("div",{className:"date-info",children:[x.lastMovementDate&&u.jsxs("div",{className:"date-item",children:[u.jsx("span",{className:"date-label",children:"Último movimiento:"}),u.jsx("span",{className:"date-value",children:m(x.lastMovementDate)}),u.jsx("span",{className:"date-relative",children:g(x.lastMovementDate)})]}),x.lastMaintenanceDate&&u.jsxs("div",{className:"date-item",children:[u.jsx("span",{className:"date-label",children:"Último mantenimiento:"}),u.jsx("span",{className:"date-value",children:m(x.lastMaintenanceDate)}),u.jsx("span",{className:"date-relative",children:g(x.lastMaintenanceDate)})]})]}),u.jsxs("div",{className:"card-actions",children:[u.jsx("button",{className:"btn-view",onClick:()=>t(x),title:"Ver detalles",children:"👁️"}),e&&x.status!==Re.REPARACION&&u.jsx("button",{className:"btn-edit",onClick:()=>e(x),title:"Editar vehículo",children:"✏️"}),r&&u.jsx("button",{className:"btn-maintenance",onClick:()=>r(x),title:"Registrar mantenimiento",children:"🔧"})]})]}),x.status===Re.MANTENIMIENTO&&u.jsx("div",{className:"maintenance-indicator",children:u.jsx("div",{className:"maintenance-pulse"})}),U(x)&&x.status===Re.ACTIVO&&u.jsx("div",{className:"maintenance-due-badge",children:u.jsx("span",{children:"Mantenimiento Debido"})}),x.status===Re.REPARACION&&u.jsx("div",{className:"repair-badge",children:u.jsx("span",{children:"En Reparación"})}),x.totalHoursWorked>0&&u.jsxs("div",{className:"efficiency-indicator",children:[u.jsx("div",{className:"efficiency-bar",children:u.jsx("div",{className:"efficiency-fill",style:{width:`${Math.min(x.totalHoursWorked/2e3*100,100)}%`}})}),u.jsxs("span",{className:"efficiency-label",children:[(x.totalHoursWorked/2e3*100).toFixed(1),"% utilización anual"]})]})]},x.id))})},Mk=({vehicles:s,onEdit:e,onView:t,onMaintenance:r})=>{const[o,l]=ie.useState("vehicleId"),[h,m]=ie.useState("asc"),g=q=>new Intl.NumberFormat("es-CO").format(q),v=q=>`${g(q)} gal`,_=q=>`${g(q)} hrs`,b=q=>q?(q instanceof Date?q:new Date(q)).toLocaleDateString("es-CO",{day:"2-digit",month:"2-digit",year:"2-digit"}):"-",A=q=>{switch(q){case pe.EXCAVADORA:return"🚚";case pe.BULLDOZER:return"🚜";case pe.CARGADOR:return"🏗️";case pe.CAMION:return"🚛";case pe.GRUA:return"🏗️";case pe.MOTOSIERRA:return"🪚";case pe.TRACTOR:return"🚜";case pe.VOLQUETA:return"🚛";default:return"🚗"}},M=q=>{switch(q){case yt.DIESEL:return"🚛";case yt.GASOLINA:return"🚗";case yt.ACPM:return"🚚";case yt.MIXTO:return"⛽";default:return"⛽"}},I=q=>{switch(q){case Re.ACTIVO:return"✅";case Re.MANTENIMIENTO:return"🔧";case Re.INACTIVO:return"⏸️";case Re.REPARACION:return"🔴";default:return"❓"}},U=q=>{switch(q){case Re.ACTIVO:return"status-activo";case Re.MANTENIMIENTO:return"status-mantenimiento";case Re.INACTIVO:return"status-inactivo";case Re.REPARACION:return"status-reparacion";default:return"status-default"}},x=q=>{o===q?m(h==="asc"?"desc":"asc"):(l(q),m("asc"))},$=[...s].sort((q,oe)=>{let O=q[o],S=oe[o];return(o.includes("Date")||o.includes("At"))&&(O=new Date(O||0),S=new Date(S||0)),typeof O=="number"&&typeof S=="number"?h==="asc"?O-S:S-O:typeof O=="string"&&typeof S=="string"?h==="asc"?O.localeCompare(S):S.localeCompare(O):O instanceof Date&&S instanceof Date?h==="asc"?O-S:S-O:!O&&!S?0:O?S?0:h==="asc"?-1:1:h==="asc"?1:-1}),W=q=>o!==q?"↕️":h==="asc"?"↑":"↓",K=q=>!q.totalHoursWorked||q.totalHoursWorked===0?q.estimatedConsumptionPerHour||0:q.totalFuelConsumed/q.totalHoursWorked,J=q=>q.lastMaintenanceDate?Math.floor((new Date-new Date(q.lastMaintenanceDate))/(1e3*60*60*24))>90:!0;return u.jsxs("div",{className:"vehicles-table-container",children:[u.jsx("div",{className:"table-wrapper",children:u.jsxs("table",{className:"vehicles-table",children:[u.jsx("thead",{children:u.jsxs("tr",{children:[u.jsxs("th",{className:"sortable",onClick:()=>x("vehicleId"),children:["ID Vehículo ",W("vehicleId")]}),u.jsxs("th",{className:"sortable",onClick:()=>x("name"),children:["Nombre ",W("name")]}),u.jsxs("th",{className:"sortable",onClick:()=>x("type"),children:["Tipo ",W("type")]}),u.jsx("th",{children:"Marca/Modelo"}),u.jsxs("th",{className:"sortable",onClick:()=>x("fuelType"),children:["Combustible ",W("fuelType")]}),u.jsxs("th",{className:"sortable text-right",onClick:()=>x("totalFuelConsumed"),children:["Consumido ",W("totalFuelConsumed")]}),u.jsxs("th",{className:"sortable text-right",onClick:()=>x("totalHoursWorked"),children:["Horas ",W("totalHoursWorked")]}),u.jsx("th",{className:"text-right",children:"Consumo/Hr"}),u.jsx("th",{children:"Ubicación"}),u.jsxs("th",{className:"sortable",onClick:()=>x("status"),children:["Estado ",W("status")]}),u.jsxs("th",{className:"sortable",onClick:()=>x("lastMovementDate"),children:["Último Mov. ",W("lastMovementDate")]}),u.jsx("th",{className:"actions-column",children:"Acciones"})]})}),u.jsx("tbody",{children:$.map(q=>u.jsxs("tr",{className:`vehicle-row ${q.status===Re.MANTENIMIENTO?"maintenance-row":""} ${J(q)?"needs-maintenance":""}`,children:[u.jsx("td",{className:"vehicle-id-cell",children:u.jsxs("div",{className:"id-content",children:[u.jsx("span",{className:"vehicle-icon",children:A(q.type)}),u.jsx("span",{className:"vehicle-id",children:q.vehicleId})]})}),u.jsx("td",{className:"name-cell",children:u.jsx("span",{className:"vehicle-name",children:q.name})}),u.jsx("td",{className:"type-cell",children:u.jsx("span",{className:"type-text",children:q.type.charAt(0).toUpperCase()+q.type.slice(1)})}),u.jsx("td",{className:"brand-model-cell",children:q.brand&&q.model?u.jsxs("span",{className:"brand-model",children:[q.brand," ",q.model]}):u.jsx("span",{className:"no-data",children:"-"})}),u.jsx("td",{className:"fuel-cell",children:u.jsxs("div",{className:"fuel-content",children:[u.jsx("span",{className:"fuel-icon",children:M(q.fuelType)}),u.jsx("span",{className:"fuel-text",children:q.fuelType})]})}),u.jsx("td",{className:"consumption-cell text-right",children:u.jsx("span",{className:"consumption-value",children:v(q.totalFuelConsumed||0)})}),u.jsx("td",{className:"hours-cell text-right",children:u.jsx("span",{className:"hours-value",children:_(q.totalHoursWorked||0)})}),u.jsx("td",{className:"rate-cell text-right",children:u.jsxs("span",{className:"rate-value",children:[K(q).toFixed(1)," gal/hr"]})}),u.jsx("td",{className:"location-cell",children:u.jsxs("span",{className:"location-text",children:["📍 ",q.currentLocation||"Sin ubicación"]})}),u.jsx("td",{className:"status-cell",children:u.jsxs("div",{className:`status-badge ${U(q.status)}`,children:[u.jsx("span",{className:"status-icon",children:I(q.status)}),u.jsx("span",{className:"status-text",children:q.status.charAt(0).toUpperCase()+q.status.slice(1)})]})}),u.jsx("td",{className:"date-cell",children:u.jsxs("div",{className:"date-content",children:[u.jsx("span",{className:"date-value",children:b(q.lastMovementDate)}),J(q)&&u.jsx("span",{className:"maintenance-warning",children:"⚠️"})]})}),u.jsx("td",{className:"actions-cell",children:u.jsxs("div",{className:"action-buttons",children:[u.jsx("button",{className:"btn-action btn-view",onClick:()=>t(q),title:"Ver detalles",children:"👁️"}),e&&q.status!==Re.REPARACION&&u.jsx("button",{className:"btn-action btn-edit",onClick:()=>e(q),title:"Editar vehículo",children:"✏️"}),r&&u.jsx("button",{className:"btn-action btn-maintenance",onClick:()=>r(q),title:"Registrar mantenimiento",children:"🔧"})]})})]},q.id))})]})}),u.jsxs("div",{className:"table-info",children:[u.jsxs("div",{className:"table-summary",children:[u.jsxs("span",{className:"total-rows",children:[s.length," vehículo",s.length!==1?"s":""]}),o&&u.jsxs("span",{className:"sort-info",children:["Ordenado por ",o," (",h==="asc"?"ascendente":"descendente",")"]})]}),u.jsxs("div",{className:"table-legend",children:[u.jsxs("span",{className:"legend-item",children:[u.jsx("span",{className:"legend-icon",children:"✅"})," Activo"]}),u.jsxs("span",{className:"legend-item",children:[u.jsx("span",{className:"legend-icon",children:"🔧"})," Mantenimiento"]}),u.jsxs("span",{className:"legend-item",children:[u.jsx("span",{className:"legend-icon",children:"⏸️"})," Inactivo"]}),u.jsxs("span",{className:"legend-item",children:[u.jsx("span",{className:"legend-icon",children:"🔴"})," Reparación"]}),u.jsxs("span",{className:"legend-item",children:[u.jsx("span",{className:"legend-icon",children:"⚠️"})," Mantto. Debido"]})]})]})]})},Pk=({vehicles:s,viewMode:e,onEdit:t,onView:r,onMaintenance:o})=>e==="table"?u.jsx(Mk,{vehicles:s,onEdit:t,onView:r,onMaintenance:o}):u.jsx(Ok,{vehicles:s,onEdit:t,onView:r,onMaintenance:o}),Wt={HARVESTING:"harvesting",TRANSPORT:"transport",MAINTENANCE:"maintenance",SUPPORT:"support"},Zt={CHAINSAW:"chainsaw",HARVESTER:"harvester",FORWARDER:"forwarder",SKIDDER:"skidder",LOG_TRUCK:"log_truck",PICKUP_TRUCK:"pickup_truck",CAR:"car",MOTORCYCLE:"motorcycle",ATV:"atv",BULLDOZER:"bulldozer",EXCAVATOR:"excavator",GRADER:"grader",LOADER:"loader",WATER_PUMP:"water_pump",FIRE_PUMP:"fire_pump",GENERATOR:"generator",COMPRESSOR:"compressor"},kk={[Zt.CHAINSAW]:{name:"Motosierra",category:Wt.HARVESTING,fuelType:"two_stroke",avgConsumption:2.5,icon:"🪚",color:"#dc2626",description:"Herramienta para corte de árboles"},[Zt.HARVESTER]:{name:"Cosechadora Forestal",category:Wt.HARVESTING,fuelType:"diesel",avgConsumption:25,icon:"🚜",color:"#059669",description:"Máquina para corte y procesamiento de árboles"},[Zt.FORWARDER]:{name:"Forwarder",category:Wt.HARVESTING,fuelType:"diesel",avgConsumption:20,icon:"🚚",color:"#0891b2",description:"Transporte de troncos dentro del bosque"},[Zt.LOG_TRUCK]:{name:"Camión Maderero",category:Wt.TRANSPORT,fuelType:"acpm",avgConsumption:3.5,icon:"🚚",color:"#ea580c",description:"Transporte de madera a destino"},[Zt.PICKUP_TRUCK]:{name:"Camioneta",category:Wt.TRANSPORT,fuelType:"gasoline",avgConsumption:8,icon:"🚐",color:"#2563eb",description:"Transporte de personal y herramientas"},[Zt.CAR]:{name:"Automóvil",category:Wt.TRANSPORT,fuelType:"gasoline",avgConsumption:12,icon:"🚗",color:"#3b82f6",description:"Vehículo liviano para transporte ejecutivo"},[Zt.MOTORCYCLE]:{name:"Motocicleta",category:Wt.TRANSPORT,fuelType:"gasoline",avgConsumption:25,icon:"🏍️",color:"#6366f1",description:"Transporte ágil para terrenos difíciles"},[Zt.ATV]:{name:"Cuatrimoto",category:Wt.TRANSPORT,fuelType:"gasoline",avgConsumption:15,icon:"🏍️",color:"#84cc16",description:"Vehículo todo terreno para supervisión"},[Zt.SKIDDER]:{name:"Skidder",category:Wt.HARVESTING,fuelType:"diesel",avgConsumption:22,icon:"🚜",color:"#f59e0b",description:"Arrastre de troncos desde el lugar de corte"},[Zt.BULLDOZER]:{name:"Bulldozer",category:Wt.MAINTENANCE,fuelType:"diesel",avgConsumption:30,icon:"🚜",color:"#f97316",description:"Construcción y mantenimiento de caminos"},[Zt.EXCAVATOR]:{name:"Excavadora",category:Wt.MAINTENANCE,fuelType:"diesel",avgConsumption:28,icon:"🏗️",color:"#eab308",description:"Excavación y movimiento de tierra"},[Zt.GRADER]:{name:"Motoniveladora",category:Wt.MAINTENANCE,fuelType:"diesel",avgConsumption:25,icon:"🚜",color:"#a3a3a3",description:"Nivelación y mantenimiento de vías"},[Zt.LOADER]:{name:"Cargador Frontal",category:Wt.MAINTENANCE,fuelType:"diesel",avgConsumption:24,icon:"🚜",color:"#71717a",description:"Carga y descarga de materiales"},[Zt.WATER_PUMP]:{name:"Motobomba de Agua",category:Wt.SUPPORT,fuelType:"gasoline",avgConsumption:3.5,icon:"💧",color:"#0891b2",description:"Bombeo de agua para operaciones"},[Zt.FIRE_PUMP]:{name:"Motobomba Contra Incendios",category:Wt.SUPPORT,fuelType:"gasoline",avgConsumption:4.2,icon:"🔥",color:"#dc2626",description:"Equipo de emergencia contra incendios"},[Zt.GENERATOR]:{name:"Generador Eléctrico",category:Wt.SUPPORT,fuelType:"gasoline",avgConsumption:2.8,icon:"⚡",color:"#7c3aed",description:"Suministro de energía eléctrica"},[Zt.COMPRESSOR]:{name:"Compresor de Aire",category:Wt.SUPPORT,fuelType:"gasoline",avgConsumption:2.5,icon:"💨",color:"#64748b",description:"Suministro de aire comprimido"}},Vk=({isOpen:s,onClose:e,vehicle:t,onSave:r,mode:o="create",userRole:l})=>{const h=()=>({vehicleId:t?.vehicleId||"",name:t?.name||"",type:t?.type||pe.EXCAVADORA,brand:t?.brand||"",model:t?.model||"",year:t?.year||new Date().getFullYear(),fuelType:t?.fuelType||yt.DIESEL,fuelCapacity:t?.fuelCapacity||0,enginePower:t?.enginePower||0,status:t?.status||Re.ACTIVO,currentLocation:t?.currentLocation||"",description:t?.description||"",estimatedConsumptionPerHour:t?.estimatedConsumptionPerHour||0,serialNumber:t?.serialNumber||"",plateNumber:t?.plateNumber||"",lastMaintenanceDate:t?.lastMaintenanceDate?new Date(t.lastMaintenanceDate).toISOString().split("T")[0]:"",nextMaintenanceDate:t?.nextMaintenanceDate?new Date(t.nextMaintenanceDate).toISOString().split("T")[0]:"",purchaseDate:t?.purchaseDate?new Date(t.purchaseDate).toISOString().split("T")[0]:"",warrantyExpiration:t?.warrantyExpiration?new Date(t.warrantyExpiration).toISOString().split("T")[0]:""}),[m,g]=ie.useState(h()),[v,_]=ie.useState({}),[b,A]=ie.useState(!1),[M,I]=ie.useState(""),[U,x]=ie.useState(!1);ie.useEffect(()=>{s&&(g(h()),_({}))},[s,t]);const $=S=>{const{name:R,value:D,type:k}=S.target,C=k==="number"?parseFloat(D)||0:D;g(j=>({...j,[R]:C})),v[R]&&_(j=>({...j,[R]:null}))},W=()=>{const S={};m.vehicleId.trim()?m.vehicleId.length<3&&(S.vehicleId="El ID debe tener al menos 3 caracteres"):S.vehicleId="El ID del vehículo es obligatorio",m.name.trim()?m.name.length<2&&(S.name="El nombre debe tener al menos 2 caracteres"):S.name="El nombre del vehículo es obligatorio",m.fuelCapacity<=0?S.fuelCapacity="La capacidad de combustible debe ser mayor a 0":m.fuelCapacity>1e3&&(S.fuelCapacity="La capacidad no puede ser mayor a 1000 galones"),m.enginePower<0?S.enginePower="La potencia no puede ser negativa":m.enginePower>1e3&&(S.enginePower="La potencia no puede ser mayor a 1000 HP"),m.estimatedConsumptionPerHour<0?S.estimatedConsumptionPerHour="El consumo no puede ser negativo":m.estimatedConsumptionPerHour>50&&(S.estimatedConsumptionPerHour="El consumo no puede ser mayor a 50 gal/hr");const R=new Date().getFullYear();if(m.year<1990?S.year="El año no puede ser anterior a 1990":m.year>R+1&&(S.year=`El año no puede ser mayor a ${R+1}`),m.lastMaintenanceDate&&m.nextMaintenanceDate){const D=new Date(m.lastMaintenanceDate);new Date(m.nextMaintenanceDate)<=D&&(S.nextMaintenanceDate="La próxima fecha debe ser posterior al último mantenimiento")}return m.purchaseDate&&new Date(m.purchaseDate)>new Date&&(S.purchaseDate="La fecha de compra no puede ser futura"),_(S),Object.keys(S).length===0},K=async S=>{if(S.preventDefault(),!!W()){A(!0);try{const R={...m,lastMaintenanceDate:m.lastMaintenanceDate||null,nextMaintenanceDate:m.nextMaintenanceDate||null,purchaseDate:m.purchaseDate||null,warrantyExpiration:m.warrantyExpiration||null};await r(R),e()}catch(R){console.error("Error guardando vehículo:",R),_({general:"Error al guardar el vehículo. Intenta nuevamente."})}finally{A(!1)}}},J=S=>{switch(S){case pe.EXCAVADORA:return"🚚";case pe.BULLDOZER:return"🚜";case pe.CARGADOR:return"🏗️";case pe.CAMION:return"🚛";case pe.GRUA:return"🏗️";case pe.MOTOSIERRA:return"🪚";case pe.TRACTOR:return"🚜";case pe.VOLQUETA:return"🚛";default:return"🚗"}},q=S=>{switch(S){case yt.DIESEL:return"🚛";case yt.GASOLINA:return"🚗";case yt.ACPM:return"🚚";case yt.MIXTO:return"⛽";default:return"⛽"}},oe=o==="view",O=l==="admin"||l==="supervisor";return s?u.jsx("div",{className:"modal-overlay",onClick:e,children:u.jsxs("div",{className:"modal-content vehicle-modal",onClick:S=>S.stopPropagation(),children:[u.jsxs("div",{className:"modal-header",children:[u.jsxs("div",{className:"modal-title",children:[u.jsx("span",{className:"title-icon",children:o==="create"?"➕":o==="edit"?"✏️":"👁️"}),u.jsxs("div",{className:"title-text",children:[u.jsxs("h3",{children:[o==="create"&&"Crear Nuevo Vehículo",o==="edit"&&"Editar Vehículo",o==="view"&&"Detalles del Vehículo"]}),u.jsxs("p",{children:[o==="create"&&"Registra un nuevo vehículo en la flota",o==="edit"&&"Modifica la información del vehículo",o==="view"&&"Información completa del vehículo"]})]})]}),u.jsx("button",{className:"btn-close",onClick:e,type:"button",children:"✕"})]}),u.jsxs("form",{onSubmit:K,className:"modal-form",children:[u.jsxs("div",{className:"form-content",children:[u.jsxs("div",{className:"vehicle-preview",children:[u.jsxs("div",{className:"preview-header",children:[u.jsx("span",{className:"preview-icon",children:J(m.type)}),u.jsxs("div",{className:"preview-info",children:[u.jsx("span",{className:"preview-id",children:m.vehicleId||"ID-000"}),u.jsx("span",{className:"preview-name",children:m.name||"Nombre del vehículo"})]}),u.jsxs("div",{className:"preview-fuel",children:[u.jsx("span",{className:"fuel-icon",children:q(m.fuelType)}),u.jsx("span",{className:"fuel-text",children:m.fuelType})]})]}),u.jsxs("div",{className:"preview-specs",children:[m.enginePower>0&&u.jsxs("span",{className:"spec",children:["⚡ ",m.enginePower," HP"]}),m.fuelCapacity>0&&u.jsxs("span",{className:"spec",children:["🛢️ ",m.fuelCapacity," gal"]}),m.year&&u.jsxs("span",{className:"spec",children:["📅 ",m.year]})]})]}),v.general&&u.jsxs("div",{className:"error-message general-error",children:["⚠️ ",v.general]}),u.jsxs("div",{className:"form-section",children:[u.jsx("h4",{className:"section-title",children:"📋 Información Básica"}),u.jsxs("div",{className:"form-grid",children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"vehicleId",children:"ID del Vehículo *"}),u.jsx("input",{type:"text",id:"vehicleId",name:"vehicleId",value:m.vehicleId,onChange:$,placeholder:"Ej: EXC-001",className:v.vehicleId?"error":"",disabled:oe||o==="edit"&&!O,maxLength:20}),v.vehicleId&&u.jsx("span",{className:"error-text",children:v.vehicleId})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"name",children:"Nombre del Vehículo *"}),u.jsx("input",{type:"text",id:"name",name:"name",value:m.name,onChange:$,placeholder:"Ej: Excavadora Principal",className:v.name?"error":"",disabled:oe||o==="edit"&&!O,maxLength:100}),v.name&&u.jsx("span",{className:"error-text",children:v.name})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"type",children:"Tipo de Vehículo"}),U?u.jsxs("div",{className:"custom-type-input",children:[u.jsx("input",{type:"text",placeholder:"Ej: Montacargas, Grúa Torre, etc.",value:M,onChange:S=>I(S.target.value),onKeyDown:S=>{S.key==="Enter"?(S.preventDefault(),M.trim()&&(g(R=>({...R,type:M.trim()})),x(!1),I(""))):S.key==="Escape"&&(x(!1),I(""))},autoFocus:!0}),u.jsx("button",{type:"button",className:"btn-confirm-custom",onClick:()=>{M.trim()&&(g(S=>({...S,type:M.trim()})),x(!1),I(""))},title:"Confirmar tipo personalizado",children:"✓"}),u.jsx("button",{type:"button",className:"btn-cancel-custom",onClick:()=>{x(!1),I("")},title:"Cancelar",children:"✕"})]}):u.jsxs("div",{className:"select-with-button",children:[u.jsx("select",{id:"type",name:"type",value:m.type,onChange:$,disabled:oe||o==="edit"&&!O,children:Object.entries(kk).map(([S,R])=>u.jsxs("option",{value:S,children:[R.icon," ",R.name]},S))}),u.jsx("button",{type:"button",className:"btn-add-custom",onClick:()=>x(!0),disabled:oe||o==="edit"&&!O,title:"Agregar tipo personalizado",children:"➕"})]})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"status",children:"Estado"}),u.jsx("select",{id:"status",name:"status",value:m.status,onChange:$,disabled:oe||o==="edit"&&!O,children:Object.values(Re).map(S=>u.jsx("option",{value:S,children:S.charAt(0).toUpperCase()+S.slice(1)},S))})]})]})]}),u.jsxs("div",{className:"form-section",children:[u.jsx("h4",{className:"section-title",children:"🔧 Especificaciones Técnicas"}),u.jsxs("div",{className:"form-grid",children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"brand",children:"Marca"}),u.jsx("input",{type:"text",id:"brand",name:"brand",value:m.brand,onChange:$,placeholder:"Ej: Caterpillar",disabled:oe||o==="edit"&&!O,maxLength:50})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"model",children:"Modelo"}),u.jsx("input",{type:"text",id:"model",name:"model",value:m.model,onChange:$,placeholder:"Ej: 320D",disabled:oe||o==="edit"&&!O,maxLength:50})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"year",children:"Año"}),u.jsx("input",{type:"number",id:"year",name:"year",value:m.year,onChange:$,min:"1990",max:new Date().getFullYear()+1,className:v.year?"error":"",disabled:oe||o==="edit"&&!O}),v.year&&u.jsx("span",{className:"error-text",children:v.year})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"serialNumber",children:"Número de Serie"}),u.jsx("input",{type:"text",id:"serialNumber",name:"serialNumber",value:m.serialNumber,onChange:$,placeholder:"Ej: ABC123456789",disabled:oe||o==="edit"&&!O,maxLength:50})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"plateNumber",children:"Placa"}),u.jsx("input",{type:"text",id:"plateNumber",name:"plateNumber",value:m.plateNumber,onChange:$,placeholder:"Ej: ABC123",disabled:oe||o==="edit"&&!O,maxLength:10})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"enginePower",children:"Potencia del Motor (HP)"}),u.jsx("input",{type:"number",id:"enginePower",name:"enginePower",value:m.enginePower,onChange:$,min:"0",max:"1000",step:"0.1",className:v.enginePower?"error":"",disabled:oe||o==="edit"&&!O}),v.enginePower&&u.jsx("span",{className:"error-text",children:v.enginePower})]})]})]}),u.jsxs("div",{className:"form-section",children:[u.jsx("h4",{className:"section-title",children:"⛽ Información de Combustible"}),u.jsxs("div",{className:"form-grid",children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"fuelType",children:"Tipo de Combustible"}),u.jsx("select",{id:"fuelType",name:"fuelType",value:m.fuelType,onChange:$,disabled:oe||o==="edit"&&!O,children:Object.values(yt).map(S=>u.jsxs("option",{value:S,children:[q(S)," ",S.charAt(0).toUpperCase()+S.slice(1)]},S))})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"fuelCapacity",children:"Capacidad de Combustible (gal) *"}),u.jsx("input",{type:"number",id:"fuelCapacity",name:"fuelCapacity",value:m.fuelCapacity,onChange:$,min:"0",max:"1000",step:"0.1",className:v.fuelCapacity?"error":"",disabled:oe||o==="edit"&&!O}),v.fuelCapacity&&u.jsx("span",{className:"error-text",children:v.fuelCapacity})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"estimatedConsumptionPerHour",children:"Consumo Estimado (gal/hr)"}),u.jsx("input",{type:"number",id:"estimatedConsumptionPerHour",name:"estimatedConsumptionPerHour",value:m.estimatedConsumptionPerHour,onChange:$,min:"0",max:"50",step:"0.1",className:v.estimatedConsumptionPerHour?"error":"",disabled:oe||o==="edit"&&!O}),v.estimatedConsumptionPerHour&&u.jsx("span",{className:"error-text",children:v.estimatedConsumptionPerHour})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"currentLocation",children:"Ubicación Actual"}),u.jsx("input",{type:"text",id:"currentLocation",name:"currentLocation",value:m.currentLocation,onChange:$,placeholder:"Ej: Sector Norte - Lote 15",disabled:oe||o==="edit"&&!O,maxLength:100})]})]})]}),u.jsxs("div",{className:"form-section",children:[u.jsx("h4",{className:"section-title",children:"📅 Fechas Importantes"}),u.jsxs("div",{className:"form-grid",children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"purchaseDate",children:"Fecha de Compra"}),u.jsx("input",{type:"date",id:"purchaseDate",name:"purchaseDate",value:m.purchaseDate,onChange:$,max:new Date().toISOString().split("T")[0],className:v.purchaseDate?"error":"",disabled:oe||o==="edit"&&!O}),v.purchaseDate&&u.jsx("span",{className:"error-text",children:v.purchaseDate})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"warrantyExpiration",children:"Vencimiento de Garantía"}),u.jsx("input",{type:"date",id:"warrantyExpiration",name:"warrantyExpiration",value:m.warrantyExpiration,onChange:$,disabled:oe||o==="edit"&&!O})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"lastMaintenanceDate",children:"Último Mantenimiento"}),u.jsx("input",{type:"date",id:"lastMaintenanceDate",name:"lastMaintenanceDate",value:m.lastMaintenanceDate,onChange:$,disabled:oe||o==="edit"&&!O})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"nextMaintenanceDate",children:"Próximo Mantenimiento"}),u.jsx("input",{type:"date",id:"nextMaintenanceDate",name:"nextMaintenanceDate",value:m.nextMaintenanceDate,onChange:$,className:v.nextMaintenanceDate?"error":"",disabled:oe||o==="edit"&&!O}),v.nextMaintenanceDate&&u.jsx("span",{className:"error-text",children:v.nextMaintenanceDate})]})]})]}),u.jsxs("div",{className:"form-section",children:[u.jsx("h4",{className:"section-title",children:"📝 Descripción y Notas"}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"description",children:"Descripción"}),u.jsx("textarea",{id:"description",name:"description",value:m.description,onChange:$,placeholder:"Información adicional sobre el vehículo...",rows:"3",maxLength:"500",disabled:oe||o==="edit"&&!O}),u.jsxs("span",{className:"char-count",children:[m.description.length,"/500 caracteres"]})]})]})]}),u.jsxs("div",{className:"modal-footer",children:[u.jsx("button",{type:"button",className:"btn-secondary",onClick:e,disabled:b,children:o==="view"?"Cerrar":"Cancelar"}),!oe&&O&&u.jsx("button",{type:"submit",className:"btn-primary",disabled:b,children:b?u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"loading-spinner"}),"Guardando..."]}):u.jsx(u.Fragment,{children:o==="create"?"➕ Crear Vehículo":"💾 Guardar Cambios"})})]})]})]})}):null},Ao={PREVENTIVO:"preventivo",CORRECTIVO:"correctivo",PREDICTIVO:"predictivo",EMERGENCIA:"emergencia"},tr={PROGRAMADO:"programado",EN_PROCESO:"en_proceso",COMPLETADO:"completado",CANCELADO:"cancelado"},No={BAJA:"baja",MEDIA:"media",ALTA:"alta",CRITICA:"critica"},Lk=({isOpen:s,onClose:e,vehicle:t,maintenance:r,onSave:o,mode:l="create",userRole:h})=>{const m=()=>({vehicleId:t?.vehicleId||"",vehicleName:t?.name||"",type:r?.type||Ao.PREVENTIVO,title:r?.title||"",description:r?.description||"",priority:r?.priority||No.MEDIA,status:r?.status||tr.PROGRAMADO,scheduledDate:r?.scheduledDate?new Date(r.scheduledDate).toISOString().split("T")[0]:"",startDate:r?.startDate?new Date(r.startDate).toISOString().split("T")[0]:"",completedDate:r?.completedDate?new Date(r.completedDate).toISOString().split("T")[0]:"",estimatedHours:r?.estimatedHours||0,actualHours:r?.actualHours||0,estimatedCost:r?.estimatedCost||0,actualCost:r?.actualCost||0,technician:r?.technician||"",workshop:r?.workshop||"",parts:r?.parts||[],notes:r?.notes||"",nextMaintenanceKm:r?.nextMaintenanceKm||0,nextMaintenanceHours:r?.nextMaintenanceHours||0,nextMaintenanceDate:r?.nextMaintenanceDate?new Date(r.nextMaintenanceDate).toISOString().split("T")[0]:""}),[g,v]=ie.useState(m()),[_,b]=ie.useState({}),[A,M]=ie.useState(!1),[I,U]=ie.useState({name:"",quantity:1,cost:0});ie.useEffect(()=>{s&&(v(m()),b({}))},[s,r,t]);const x=C=>{const{name:j,value:Ce,type:$e}=C.target,X=$e==="number"?parseFloat(Ce)||0:Ce;v(re=>({...re,[j]:X})),_[j]&&b(re=>({...re,[j]:null}))},$=C=>{const{name:j,value:Ce,type:$e}=C.target,X=$e==="number"?parseFloat(Ce)||0:Ce;U(re=>({...re,[j]:X}))},W=()=>{if(!I.name.trim())return;const C={id:Date.now().toString(),name:I.name.trim(),quantity:I.quantity,cost:I.cost,total:I.quantity*I.cost};v(j=>({...j,parts:[...j.parts,C]})),U({name:"",quantity:1,cost:0})},K=C=>{v(j=>({...j,parts:j.parts.filter(Ce=>Ce.id!==C)}))},J=()=>{const C={};if(g.title.trim()||(C.title="El título del mantenimiento es obligatorio"),g.description.trim()||(C.description="La descripción es obligatoria"),g.scheduledDate||(C.scheduledDate="La fecha programada es obligatoria"),g.startDate&&g.completedDate){const j=new Date(g.startDate);new Date(g.completedDate)<j&&(C.completedDate="La fecha de finalización debe ser posterior al inicio")}return g.scheduledDate&&g.startDate&&(new Date(g.scheduledDate),new Date(g.startDate)),g.estimatedHours<0&&(C.estimatedHours="Las horas estimadas no pueden ser negativas"),g.actualHours<0&&(C.actualHours="Las horas reales no pueden ser negativas"),g.estimatedCost<0&&(C.estimatedCost="El costo estimado no puede ser negativo"),g.actualCost<0&&(C.actualCost="El costo real no puede ser negativo"),g.status===tr.COMPLETADO&&!g.completedDate&&(C.completedDate="La fecha de finalización es obligatoria para mantenimientos completados"),g.status===tr.EN_PROCESO&&!g.startDate&&(C.startDate="La fecha de inicio es obligatoria para mantenimientos en proceso"),b(C),Object.keys(C).length===0},q=async C=>{if(C.preventDefault(),!!J()){M(!0);try{const j=g.parts.reduce((re,ue)=>re+ue.total,0),Ce=g.estimatedCost+j,$e=g.actualCost+j,X={...g,vehicleId:t.id,vehicleName:t.name,totalPartsCost:j,totalEstimatedCost:Ce,totalActualCost:$e,scheduledDate:g.scheduledDate||null,startDate:g.startDate||null,completedDate:g.completedDate||null,nextMaintenanceDate:g.nextMaintenanceDate||null,createdAt:r?.createdAt||new Date,updatedAt:new Date};await o(X),e()}catch(j){console.error("Error guardando mantenimiento:",j),b({general:"Error al guardar el mantenimiento. Intenta nuevamente."})}finally{M(!1)}}},oe=C=>{switch(C){case Ao.PREVENTIVO:return"🔧";case Ao.CORRECTIVO:return"🛠️";case Ao.PREDICTIVO:return"📊";case Ao.EMERGENCIA:return"🚨";default:return"⚙️"}},O=C=>{switch(C){case No.BAJA:return"priority-low";case No.MEDIA:return"priority-medium";case No.ALTA:return"priority-high";case No.CRITICA:return"priority-critical";default:return"priority-medium"}},S=C=>{switch(C){case tr.PROGRAMADO:return"status-scheduled";case tr.EN_PROCESO:return"status-in-progress";case tr.COMPLETADO:return"status-completed";case tr.CANCELADO:return"status-cancelled";default:return"status-scheduled"}},R=()=>g.parts.reduce((C,j)=>C+j.total,0),D=l==="view",k=h==="admin"||h==="supervisor";return s?u.jsx("div",{className:"modal-overlay",onClick:e,children:u.jsxs("div",{className:"modal-content maintenance-modal",onClick:C=>C.stopPropagation(),children:[u.jsxs("div",{className:"modal-header",children:[u.jsxs("div",{className:"modal-title",children:[u.jsx("span",{className:"title-icon",children:l==="create"?"➕":l==="edit"?"✏️":"👁️"}),u.jsxs("div",{className:"title-text",children:[u.jsxs("h3",{children:[l==="create"&&"Registrar Mantenimiento",l==="edit"&&"Editar Mantenimiento",l==="view"&&"Detalles del Mantenimiento"]}),u.jsxs("p",{children:["Vehículo: ",t?.vehicleId," - ",t?.name]})]})]}),u.jsx("button",{className:"btn-close",onClick:e,type:"button",children:"✕"})]}),u.jsxs("form",{onSubmit:q,className:"modal-form",children:[u.jsxs("div",{className:"form-content",children:[_.general&&u.jsxs("div",{className:"error-message general-error",children:["⚠️ ",_.general]}),u.jsxs("div",{className:"form-section",children:[u.jsx("h4",{className:"section-title",children:"📋 Información del Mantenimiento"}),u.jsxs("div",{className:"form-grid",children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"type",children:"Tipo de Mantenimiento"}),u.jsx("select",{id:"type",name:"type",value:g.type,onChange:x,disabled:D||l==="edit"&&!k,children:Object.values(Ao).map(C=>u.jsxs("option",{value:C,children:[oe(C)," ",C.charAt(0).toUpperCase()+C.slice(1)]},C))})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"priority",children:"Prioridad"}),u.jsx("select",{id:"priority",name:"priority",value:g.priority,onChange:x,className:O(g.priority),disabled:D||l==="edit"&&!k,children:Object.values(No).map(C=>u.jsx("option",{value:C,children:C.charAt(0).toUpperCase()+C.slice(1)},C))})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"status",children:"Estado"}),u.jsx("select",{id:"status",name:"status",value:g.status,onChange:x,className:S(g.status),disabled:D||l==="edit"&&!k,children:Object.values(tr).map(C=>u.jsx("option",{value:C,children:C.charAt(0).toUpperCase()+C.slice(1).replace("_"," ")},C))})]}),u.jsxs("div",{className:"form-group full-width",children:[u.jsx("label",{htmlFor:"title",children:"Título del Mantenimiento *"}),u.jsx("input",{type:"text",id:"title",name:"title",value:g.title,onChange:x,placeholder:"Ej: Cambio de aceite y filtros",className:_.title?"error":"",disabled:D||l==="edit"&&!k,maxLength:100}),_.title&&u.jsx("span",{className:"error-text",children:_.title})]})]})]}),u.jsxs("div",{className:"form-section",children:[u.jsx("h4",{className:"section-title",children:"📅 Programación"}),u.jsxs("div",{className:"form-grid",children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"scheduledDate",children:"Fecha Programada *"}),u.jsx("input",{type:"date",id:"scheduledDate",name:"scheduledDate",value:g.scheduledDate,onChange:x,className:_.scheduledDate?"error":"",disabled:D||l==="edit"&&!k}),_.scheduledDate&&u.jsx("span",{className:"error-text",children:_.scheduledDate})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"startDate",children:"Fecha de Inicio"}),u.jsx("input",{type:"date",id:"startDate",name:"startDate",value:g.startDate,onChange:x,className:_.startDate?"error":"",disabled:D||l==="edit"&&!k}),_.startDate&&u.jsx("span",{className:"error-text",children:_.startDate})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"completedDate",children:"Fecha de Finalización"}),u.jsx("input",{type:"date",id:"completedDate",name:"completedDate",value:g.completedDate,onChange:x,className:_.completedDate?"error":"",disabled:D||l==="edit"&&!k}),_.completedDate&&u.jsx("span",{className:"error-text",children:_.completedDate})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"nextMaintenanceDate",children:"Próximo Mantenimiento"}),u.jsx("input",{type:"date",id:"nextMaintenanceDate",name:"nextMaintenanceDate",value:g.nextMaintenanceDate,onChange:x,disabled:D||l==="edit"&&!k})]})]})]}),u.jsxs("div",{className:"form-section",children:[u.jsx("h4",{className:"section-title",children:"💰 Recursos y Costos"}),u.jsxs("div",{className:"form-grid",children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"technician",children:"Técnico Responsable"}),u.jsx("input",{type:"text",id:"technician",name:"technician",value:g.technician,onChange:x,placeholder:"Nombre del técnico",disabled:D||l==="edit"&&!k,maxLength:100})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"workshop",children:"Taller/Ubicación"}),u.jsx("input",{type:"text",id:"workshop",name:"workshop",value:g.workshop,onChange:x,placeholder:"Taller donde se realiza",disabled:D||l==="edit"&&!k,maxLength:100})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"estimatedHours",children:"Horas Estimadas"}),u.jsx("input",{type:"number",id:"estimatedHours",name:"estimatedHours",value:g.estimatedHours,onChange:x,min:"0",step:"0.5",className:_.estimatedHours?"error":"",disabled:D||l==="edit"&&!k}),_.estimatedHours&&u.jsx("span",{className:"error-text",children:_.estimatedHours})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"actualHours",children:"Horas Reales"}),u.jsx("input",{type:"number",id:"actualHours",name:"actualHours",value:g.actualHours,onChange:x,min:"0",step:"0.5",className:_.actualHours?"error":"",disabled:D||l==="edit"&&!k}),_.actualHours&&u.jsx("span",{className:"error-text",children:_.actualHours})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"estimatedCost",children:"Costo Estimado (COP)"}),u.jsx("input",{type:"number",id:"estimatedCost",name:"estimatedCost",value:g.estimatedCost,onChange:x,min:"0",step:"1000",className:_.estimatedCost?"error":"",disabled:D||l==="edit"&&!k}),_.estimatedCost&&u.jsx("span",{className:"error-text",children:_.estimatedCost})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"actualCost",children:"Costo Real (COP)"}),u.jsx("input",{type:"number",id:"actualCost",name:"actualCost",value:g.actualCost,onChange:x,min:"0",step:"1000",className:_.actualCost?"error":"",disabled:D||l==="edit"&&!k}),_.actualCost&&u.jsx("span",{className:"error-text",children:_.actualCost})]})]})]}),u.jsxs("div",{className:"form-section",children:[u.jsx("h4",{className:"section-title",children:"🔧 Partes y Repuestos"}),!D&&k&&u.jsx("div",{className:"parts-form",children:u.jsxs("div",{className:"form-grid",children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"partName",children:"Nombre de la Parte"}),u.jsx("input",{type:"text",id:"partName",name:"name",value:I.name,onChange:$,placeholder:"Ej: Filtro de aceite",maxLength:100})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"partQuantity",children:"Cantidad"}),u.jsx("input",{type:"number",id:"partQuantity",name:"quantity",value:I.quantity,onChange:$,min:"1",step:"1"})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"partCost",children:"Costo Unitario (COP)"}),u.jsx("input",{type:"number",id:"partCost",name:"cost",value:I.cost,onChange:$,min:"0",step:"1000"})]}),u.jsx("div",{className:"form-group",children:u.jsx("button",{type:"button",className:"btn-add-part",onClick:W,disabled:!I.name.trim(),children:"➕ Agregar"})})]})}),g.parts.length>0&&u.jsx("div",{className:"parts-list",children:u.jsxs("table",{className:"parts-table",children:[u.jsx("thead",{children:u.jsxs("tr",{children:[u.jsx("th",{children:"Parte"}),u.jsx("th",{children:"Cantidad"}),u.jsx("th",{children:"Costo Unit."}),u.jsx("th",{children:"Total"}),!D&&k&&u.jsx("th",{children:"Acciones"})]})}),u.jsx("tbody",{children:g.parts.map(C=>u.jsxs("tr",{children:[u.jsx("td",{children:C.name}),u.jsx("td",{children:C.quantity}),u.jsxs("td",{children:["$",C.cost.toLocaleString("es-CO")]}),u.jsxs("td",{children:["$",C.total.toLocaleString("es-CO")]}),!D&&k&&u.jsx("td",{children:u.jsx("button",{type:"button",className:"btn-remove-part",onClick:()=>K(C.id),title:"Eliminar parte",children:"🗑️"})})]},C.id))}),u.jsx("tfoot",{children:u.jsxs("tr",{className:"total-row",children:[u.jsx("td",{colSpan:"3",children:u.jsx("strong",{children:"Total Partes:"})}),u.jsx("td",{children:u.jsxs("strong",{children:["$",R().toLocaleString("es-CO")]})}),!D&&k&&u.jsx("td",{})]})})]})})]}),u.jsxs("div",{className:"form-section",children:[u.jsx("h4",{className:"section-title",children:"🔄 Próximo Mantenimiento"}),u.jsxs("div",{className:"form-grid",children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"nextMaintenanceKm",children:"Próximo Mantenimiento (Km)"}),u.jsx("input",{type:"number",id:"nextMaintenanceKm",name:"nextMaintenanceKm",value:g.nextMaintenanceKm,onChange:x,min:"0",step:"1000",placeholder:"0 = No aplica",disabled:D||l==="edit"&&!k})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"nextMaintenanceHours",children:"Próximo Mantenimiento (Horas)"}),u.jsx("input",{type:"number",id:"nextMaintenanceHours",name:"nextMaintenanceHours",value:g.nextMaintenanceHours,onChange:x,min:"0",step:"100",placeholder:"0 = No aplica",disabled:D||l==="edit"&&!k})]})]})]}),u.jsxs("div",{className:"form-section",children:[u.jsx("h4",{className:"section-title",children:"📝 Descripción y Notas"}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"description",children:"Descripción del Trabajo *"}),u.jsx("textarea",{id:"description",name:"description",value:g.description,onChange:x,placeholder:"Describe el trabajo a realizar o realizado...",rows:"3",maxLength:"500",className:_.description?"error":"",disabled:D||l==="edit"&&!k}),_.description&&u.jsx("span",{className:"error-text",children:_.description})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"notes",children:"Notas Adicionales"}),u.jsx("textarea",{id:"notes",name:"notes",value:g.notes,onChange:x,placeholder:"Observaciones, recomendaciones, problemas encontrados...",rows:"3",maxLength:"500",disabled:D||l==="edit"&&!k}),u.jsxs("span",{className:"char-count",children:[g.notes.length,"/500 caracteres"]})]})]}),u.jsxs("div",{className:"cost-summary",children:[u.jsx("h4",{children:"💰 Resumen de Costos"}),u.jsxs("div",{className:"cost-grid",children:[u.jsxs("div",{className:"cost-item",children:[u.jsx("span",{className:"cost-label",children:"Mano de Obra:"}),u.jsxs("span",{className:"cost-value",children:["$",g.actualCost.toLocaleString("es-CO")]})]}),u.jsxs("div",{className:"cost-item",children:[u.jsx("span",{className:"cost-label",children:"Partes:"}),u.jsxs("span",{className:"cost-value",children:["$",R().toLocaleString("es-CO")]})]}),u.jsxs("div",{className:"cost-item total-cost",children:[u.jsx("span",{className:"cost-label",children:"Total:"}),u.jsxs("span",{className:"cost-value",children:["$",(g.actualCost+R()).toLocaleString("es-CO")]})]})]})]})]}),u.jsxs("div",{className:"modal-footer",children:[u.jsx("button",{type:"button",className:"btn-secondary",onClick:e,disabled:A,children:l==="view"?"Cerrar":"Cancelar"}),!D&&k&&u.jsx("button",{type:"submit",className:"btn-primary",disabled:A,children:A?u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"loading-spinner"}),"Guardando..."]}):u.jsx(u.Fragment,{children:l==="create"?"➕ Registrar Mantenimiento":"💾 Guardar Cambios"})})]})]})]})}):null},Uk=()=>{const{user:s,userProfile:e}=Ca(),[t,r]=ie.useState([]),[o,l]=ie.useState(null),[h,m]=ie.useState(!0),[g,v]=ie.useState(null),[_,b]=ie.useState({type:"",status:"",fuelType:"",location:"",maintenance:"all"}),[A,M]=ie.useState("cards"),[I,U]=ie.useState(""),[x,$]=ie.useState(!1),[W,K]=ie.useState(!1),[J,q]=ie.useState(null),[oe,O]=ie.useState("create");ie.useEffect(()=>{if(!s)return;m(!0);const ye=QS((V,ae)=>{if(ae){console.error("Error en suscripción de vehículos:",ae),v("Error al cargar vehículos"),m(!1);return}r(V),v(null),m(!1)},_);return()=>ye()},[s,_]),ie.useEffect(()=>{s&&(async()=>{try{const V=await yk(_);l(V)}catch(V){console.error("Error al cargar estadísticas:",V)}})()},[s,t,_]);const S=t.filter(ye=>{if(!I)return!0;const V=I.toLowerCase();return ye.vehicleId?.toLowerCase().includes(V)||ye.name?.toLowerCase().includes(V)||ye.type?.toLowerCase().includes(V)||ye.brand?.toLowerCase().includes(V)||ye.model?.toLowerCase().includes(V)||ye.currentLocation?.toLowerCase().includes(V)||ye.description?.toLowerCase().includes(V)}),R=()=>{q(null),O("create"),$(!0)},D=ye=>{q(ye),O("edit"),$(!0)},k=ye=>{q(ye),O("view"),$(!0)},C=ye=>{q(ye),K(!0)},j=()=>{$(!1),K(!1),q(null)},Ce=ye=>{b(V=>({...V,...ye}))},$e=()=>{b({type:"",status:"",fuelType:"",location:"",maintenance:"all"}),U("")},X=e?.role==="admin"||e?.role==="contador"||e?.role==="cliente",re=e?.role==="admin",ue=e?.role==="admin"||e?.role==="contador";return h?u.jsx("div",{className:"vehicles-main",children:u.jsxs("div",{className:"loading-container",children:[u.jsx("div",{className:"loading-spinner"}),u.jsx("p",{children:"Cargando vehículos..."})]})}):g?u.jsx("div",{className:"vehicles-main",children:u.jsxs("div",{className:"error-container",children:[u.jsx("div",{className:"error-icon",children:"⚠️"}),u.jsx("h3",{children:"Error al cargar vehículos"}),u.jsx("p",{children:g}),u.jsx("button",{className:"btn-retry",onClick:()=>window.location.reload(),children:"Reintentar"})]})}):u.jsxs("div",{className:"vehicles-main",children:[u.jsxs("div",{className:"vehicles-header",children:[u.jsxs("div",{className:"header-title",children:[u.jsx("h2",{children:"🚜 Gestión de Vehículos"}),u.jsx("p",{children:"Administra la maquinaria y vehículos forestales"})]}),X&&u.jsx("button",{className:"btn-create-vehicle",onClick:R,children:"➕ Nuevo Vehículo"})]}),o&&u.jsx(jk,{stats:o,filters:_}),u.jsx(Dk,{filters:_,onFilterChange:Ce,onClearFilters:$e,searchTerm:I,onSearchChange:U,viewMode:A,onViewModeChange:M,totalResults:S.length}),S.length===0?u.jsxs("div",{className:"empty-state",children:[u.jsx("div",{className:"empty-icon",children:"🚜"}),u.jsx("h3",{children:t.length===0?"No hay vehículos registrados":"No se encontraron vehículos"}),u.jsx("p",{children:t.length===0?"Comienza registrando tu primer vehículo o maquinaria forestal":"Intenta ajustar los filtros de búsqueda"}),t.length===0&&X&&u.jsx("button",{className:"btn-create-first",onClick:R,children:"➕ Registrar Primer Vehículo"})]}):u.jsx(Pk,{vehicles:S,viewMode:A,onEdit:re?D:null,onView:k,onMaintenance:ue?C:null,userRole:s?.role}),x&&u.jsx(Vk,{isOpen:x,onClose:j,vehicle:J,mode:oe,onSuccess:()=>{j()}}),W&&u.jsx(Lk,{isOpen:W,onClose:j,vehicle:J,onSuccess:()=>{j()}})]})},Fk=()=>{const{user:s,userProfile:e}=Ca(),[t,r]=ie.useState("invitations"),[o,l]=ie.useState([]),[h,m]=ie.useState(!1),[g,v]=ie.useState(!1),[_,b]=ie.useState(!1),[A,M]=ie.useState({email:"",name:"",role:hs.CLIENTE});ie.useEffect(()=>{s&&e?.role==="admin"&&I()},[s,e]);const I=async()=>{m(!0);try{const J=await sk(s.uid);J.success?l(J.invitations):console.error("Error loading invitations:",J.error)}catch(J){console.error("Error loading invitations:",J)}finally{m(!1)}},U=async J=>{J.preventDefault(),b(!0);try{const q=await tk(A,s.uid);q.success?(M({email:"",name:"",role:hs.CLIENTE}),v(!1),await I(),alert(`Invitación creada exitosamente!
Código: ${q.invitation.code}`)):alert(`Error: ${q.error}`)}catch(q){console.error("Error creating invitation:",q),alert("Error creando invitación")}finally{b(!1)}},x=async J=>{if(confirm("¿Estás seguro de cancelar esta invitación?"))try{const q=await ik(J,s.uid);q.success?(await I(),alert("Invitación cancelada exitosamente")):alert(`Error: ${q.error}`)}catch(q){console.error("Error cancelling invitation:",q),alert("Error cancelando invitación")}},$=J=>({pending:{text:"Pendiente",class:"status-pending"},used:{text:"Usada",class:"status-used"},cancelled:{text:"Cancelada",class:"status-cancelled"},expired:{text:"Expirada",class:"status-expired"}})[J]||{text:J,class:"status-unknown"},W=J=>({admin:"Administrador",contador:"Contador",cliente:"Cliente"})[J]||J,K=J=>J?(J.toDate?J.toDate():new Date(J)).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A";return e?.role!=="admin"?u.jsxs("div",{className:"admin-unauthorized",children:[u.jsx("h2",{children:"⛔ Acceso Denegado"}),u.jsx("p",{children:"Solo los administradores pueden acceder a esta sección."})]}):u.jsxs("div",{className:"admin-main",children:[u.jsxs("div",{className:"admin-header",children:[u.jsx("h1",{children:"⚙️ Administración del Sistema"}),u.jsx("p",{children:"Gestión de usuarios y configuraciones"})]}),u.jsxs("div",{className:"admin-tabs",children:[u.jsx("button",{className:`tab-button ${t==="invitations"?"active":""}`,onClick:()=>r("invitations"),children:"🎫 Invitaciones"}),u.jsx("button",{className:`tab-button ${t==="users"?"active":""}`,onClick:()=>r("users"),children:"👥 Usuarios"}),u.jsx("button",{className:`tab-button ${t==="settings"?"active":""}`,onClick:()=>r("settings"),children:"⚙️ Configuración"})]}),u.jsxs("div",{className:"admin-content",children:[t==="invitations"&&u.jsxs("div",{className:"invitations-section",children:[u.jsxs("div",{className:"section-header",children:[u.jsx("h2",{children:"Gestión de Invitaciones"}),u.jsx("button",{className:"create-button",onClick:()=>v(!0),children:"+ Crear Invitación"})]}),h?u.jsx("div",{className:"loading",children:"Cargando invitaciones..."}):u.jsxs("div",{className:"invitations-table",children:[u.jsxs("table",{children:[u.jsx("thead",{children:u.jsxs("tr",{children:[u.jsx("th",{children:"Código"}),u.jsx("th",{children:"Email"}),u.jsx("th",{children:"Nombre"}),u.jsx("th",{children:"Rol"}),u.jsx("th",{children:"Estado"}),u.jsx("th",{children:"Creada"}),u.jsx("th",{children:"Expira"}),u.jsx("th",{children:"Acciones"})]})}),u.jsx("tbody",{children:o.map(J=>{const q=$(J.status);return u.jsxs("tr",{children:[u.jsx("td",{children:u.jsx("code",{className:"invitation-code",children:J.code})}),u.jsx("td",{children:J.targetEmail}),u.jsx("td",{children:J.targetName||"-"}),u.jsx("td",{children:W(J.targetRole)}),u.jsx("td",{children:u.jsx("span",{className:`status-badge ${q.class}`,children:q.text})}),u.jsx("td",{children:K(J.createdAt)}),u.jsx("td",{children:K(J.expiresAt)}),u.jsx("td",{children:J.status==="pending"&&u.jsx("button",{className:"cancel-button",onClick:()=>x(J.id),children:"Cancelar"})})]},J.id)})})]}),o.length===0&&u.jsx("div",{className:"empty-state",children:u.jsx("p",{children:"No hay invitaciones creadas"})})]})]}),t==="users"&&u.jsxs("div",{className:"users-section",children:[u.jsx("h2",{children:"👥 Usuarios del Sistema"}),u.jsxs("div",{className:"coming-soon",children:[u.jsx("span",{children:"🚧 En desarrollo"}),u.jsx("p",{children:"Próximamente: Lista de usuarios registrados, edición de permisos, y estadísticas."})]})]}),t==="settings"&&u.jsxs("div",{className:"settings-section",children:[u.jsx("h2",{children:"⚙️ Configuración del Sistema"}),u.jsxs("div",{className:"coming-soon",children:[u.jsx("span",{children:"🚧 En desarrollo"}),u.jsx("p",{children:"Próximamente: Configuraciones generales, notificaciones, y parámetros del sistema."})]})]})]}),g&&u.jsx("div",{className:"modal-overlay",onClick:()=>v(!1),children:u.jsxs("div",{className:"modal-content",onClick:J=>J.stopPropagation(),children:[u.jsxs("div",{className:"modal-header",children:[u.jsx("h3",{children:"Crear Nueva Invitación"}),u.jsx("button",{className:"modal-close",onClick:()=>v(!1),children:"×"})]}),u.jsxs("form",{onSubmit:U,className:"invitation-form",children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"email",children:"Email del usuario:"}),u.jsx("input",{id:"email",type:"email",required:!0,value:A.email,onChange:J=>M({...A,email:J.target.value}),placeholder:"usuario@ejemplo.com"})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"name",children:"Nombre (opcional):"}),u.jsx("input",{id:"name",type:"text",value:A.name,onChange:J=>M({...A,name:J.target.value}),placeholder:"Nombre del usuario"})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"role",children:"Rol:"}),u.jsxs("select",{id:"role",value:A.role,onChange:J=>M({...A,role:J.target.value}),children:[u.jsx("option",{value:hs.CLIENTE,children:"Cliente"}),u.jsx("option",{value:hs.CONTADOR,children:"Contador"}),u.jsx("option",{value:hs.ADMIN,children:"Administrador"})]})]}),u.jsxs("div",{className:"form-actions",children:[u.jsx("button",{type:"button",className:"cancel-button",onClick:()=>v(!1),children:"Cancelar"}),u.jsx("button",{type:"submit",className:"create-button",disabled:_,children:_?"Creando...":"Crear Invitación"})]})]})]})})]})},qk=()=>u.jsxs("div",{className:"module-placeholder",children:[u.jsx("h2",{children:"🏪 Módulo de Proveedores"}),u.jsx("p",{children:"Gestión de proveedores de combustible"}),u.jsxs("div",{className:"coming-soon",children:[u.jsx("span",{children:"🚧 En desarrollo"}),u.jsx("p",{children:"Próximamente: Base de datos de proveedores, comparación de precios, y evaluación."})]})]}),zk=()=>u.jsxs("div",{className:"module-placeholder",children:[u.jsx("h2",{children:"📋 Módulo de Reportes"}),u.jsx("p",{children:"Análisis y reportes de combustibles"}),u.jsxs("div",{className:"coming-soon",children:[u.jsx("span",{children:"🚧 En desarrollo"}),u.jsx("p",{children:"Próximamente: Reportes personalizables, gráficos interactivos, y exportación."})]})]}),Bk=()=>{const[s,e]=ie.useState("dashboard"),t=()=>{switch(s){case"dashboard":return u.jsx(i0,{});case"inventory":return u.jsx(Ak,{});case"movements":return u.jsx(Rk,{});case"vehicles":return u.jsx(Uk,{});case"suppliers":return u.jsx(qk,{});case"reports":return u.jsx(zk,{});case"admin":return u.jsx(Fk,{});default:return u.jsx(i0,{})}};return u.jsx(ok,{currentView:s,onViewChange:e,children:t()})},Hk=()=>{const[s,e]=ie.useState("login"),[t,r]=ie.useState(!1),[o,l]=ie.useState(""),[h,m]=ie.useState(""),[g,v]=ie.useState(""),[_,b]=ie.useState(""),[A,M]=ie.useState({email:"",password:"",confirmPassword:"",invitationCode:""}),[I,U]=ie.useState(""),[x,$]=ie.useState(null),W=async R=>{R.preventDefault(),r(!0),l("");try{await uR(Rc,g,_)}catch(D){console.error("Error en login:",D),l(oe(D.code))}finally{r(!1)}},K=async()=>{r(!0),l("");try{const R=new gi,D=await MR(Rc,R);x?await n0(D.user,x.code):await LS(D.user)}catch(R){console.error("Error en login con Google:",R),l("Error al iniciar sesión con Google")}finally{r(!1)}},J=async R=>{R.preventDefault(),r(!0),l(""),m("");try{const D=await VS(I);D.success?($(D.invitation),m(`Invitación válida para: ${D.invitation.targetEmail}`),e("register"),M({...A,email:D.invitation.targetEmail,invitationCode:I})):l(D.error)}catch(D){console.error("Error validando invitación:",D),l("Error validando código de invitación")}finally{r(!1)}},q=async R=>{if(R.preventDefault(),r(!0),l(""),A.password!==A.confirmPassword){l("Las contraseñas no coinciden"),r(!1);return}if(A.password.length<6){l("La contraseña debe tener al menos 6 caracteres"),r(!1);return}try{const D=await cR(Rc,A.email,A.password),k=await n0(D.user,A.invitationCode);k.success?m("¡Registro exitoso! Bienvenido al sistema."):l(k.error)}catch(D){console.error("Error en registro:",D),l(oe(D.code))}finally{r(!1)}},oe=R=>{switch(R){case"auth/invalid-email":return"El formato del email es inválido";case"auth/user-not-found":return"Usuario no encontrado";case"auth/wrong-password":return"Contraseña incorrecta";case"auth/invalid-credential":return"Email o contraseña incorrectos";case"auth/email-already-in-use":return"Este email ya está registrado";case"auth/weak-password":return"La contraseña es muy débil";default:return"Error de autenticación. Inténtalo de nuevo."}},O=()=>{l(""),m(""),v(""),b(""),U(""),$(null),M({email:"",password:"",confirmPassword:"",invitationCode:""})},S=()=>{switch(s){case"login":return u.jsxs(u.Fragment,{children:[u.jsxs("form",{onSubmit:W,children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"email",children:"Email:"}),u.jsx("input",{id:"email",type:"email",value:g,onChange:R=>v(R.target.value),required:!0,disabled:t,placeholder:"tu-email@ejemplo.com"})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"password",children:"Contraseña:"}),u.jsx("input",{id:"password",type:"password",value:_,onChange:R=>b(R.target.value),required:!0,disabled:t,placeholder:"Tu contraseña"})]}),u.jsx("button",{type:"submit",className:"auth-button primary",disabled:t,children:t?"Iniciando sesión...":"Iniciar Sesión"})]}),u.jsx("div",{className:"auth-divider",children:u.jsx("span",{children:"o"})}),u.jsxs("button",{onClick:K,className:"auth-button google",disabled:t,children:[u.jsx("span",{children:"🔗"}),"Continuar con Google"]}),u.jsx("div",{className:"auth-actions",children:u.jsx("button",{className:"link-button",onClick:()=>{O(),e("invite")},children:"¿Tienes un código de invitación? Regístrate aquí"})})]});case"invite":return u.jsxs(u.Fragment,{children:[u.jsxs("form",{onSubmit:J,children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"inviteCode",children:"Código de invitación:"}),u.jsx("input",{id:"inviteCode",type:"text",value:I,onChange:R=>U(R.target.value.toUpperCase()),required:!0,disabled:t,placeholder:"XXXXXXXX",maxLength:8,style:{textTransform:"uppercase",fontFamily:"monospace"}}),u.jsx("small",{children:"Ingresa el código de 8 caracteres que recibiste"})]}),u.jsx("button",{type:"submit",className:"auth-button primary",disabled:t,children:t?"Validando...":"Validar Código"})]}),u.jsx("div",{className:"auth-actions",children:u.jsx("button",{className:"link-button",onClick:()=>{O(),e("login")},children:"Volver al inicio de sesión"})})]});case"register":return u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"invitation-info",children:u.jsxs("div",{className:"success-message",children:["✅ Código válido para: ",x?.targetEmail]})}),u.jsxs("form",{onSubmit:q,children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"registerEmail",children:"Email:"}),u.jsx("input",{id:"registerEmail",type:"email",value:A.email,disabled:!0,className:"disabled-input"})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"registerPassword",children:"Contraseña:"}),u.jsx("input",{id:"registerPassword",type:"password",value:A.password,onChange:R=>M({...A,password:R.target.value}),required:!0,disabled:t,placeholder:"Mínimo 6 caracteres",minLength:6})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"confirmPassword",children:"Confirmar contraseña:"}),u.jsx("input",{id:"confirmPassword",type:"password",value:A.confirmPassword,onChange:R=>M({...A,confirmPassword:R.target.value}),required:!0,disabled:t,placeholder:"Repite tu contraseña"})]}),u.jsx("button",{type:"submit",className:"auth-button primary",disabled:t,children:t?"Registrando...":"Crear Cuenta"})]}),u.jsx("div",{className:"auth-divider",children:u.jsx("span",{children:"o"})}),u.jsxs("button",{onClick:K,className:"auth-button google",disabled:t,children:[u.jsx("span",{children:"🔗"}),"Registrarse con Google"]}),u.jsx("div",{className:"auth-actions",children:u.jsx("button",{className:"link-button",onClick:()=>{O(),e("invite")},children:"Usar otro código de invitación"})})]});default:return null}};return u.jsx("div",{className:"auth-container",children:u.jsxs("div",{className:"auth-card",children:[u.jsxs("div",{className:"auth-header",children:[u.jsx("h1",{children:"⛽ Combustibles"}),u.jsx("h2",{children:"Forestech Colombia"}),u.jsxs("p",{children:[s==="login"&&"Sistema de gestión de combustibles",s==="invite"&&"Validar código de invitación",s==="register"&&"Crear nueva cuenta"]})]}),u.jsxs("div",{className:"auth-form",children:[o&&u.jsx("div",{className:"error-message",children:o}),h&&u.jsx("div",{className:"success-message",children:h}),S(),u.jsx("div",{className:"auth-footer",children:u.jsx("p",{children:u.jsxs("small",{children:["Solo usuarios autorizados pueden acceder al sistema.",u.jsx("br",{}),s==="login"?"Contacta al administrador para obtener un código de invitación.":"Si no tienes código, contacta al administrador."]})})})]})]})})};function Gk(){return u.jsx(ak,{children:u.jsx($k,{})})}function $k(){const{user:s,loading:e}=Ca();return e?u.jsx("div",{className:"loading-container",children:u.jsxs("div",{className:"loader",children:[u.jsx("div",{className:"spinner"}),u.jsx("p",{children:"Cargando..."})]})}):u.jsxs("div",{className:"App",children:[!s&&u.jsx(Hk,{}),s&&u.jsx(Bk,{})]})}Cx.createRoot(document.getElementById("root")).render(u.jsx(ie.StrictMode,{children:u.jsx(Gk,{})}));
