const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/MigrationPage-Bt0sJ-KE.js","assets/productsService-Dwy7fUdc.js","assets/MigrationPage-BOSfrvsH.css","assets/InventoryMain-CGZ6Bhog.js","assets/InventoryMain-IBCPRbBR.css","assets/MovementsMain-CX56GQB0.js","assets/MovementsMain-DPqKi7xb.css","assets/VehiclesMain-Ddxx6IDS.js","assets/VehiclesMain-oCtbq_EQ.css","assets/MaintenanceMain-BlOOTLys.js","assets/MaintenanceMain-CwCTJFzo.css","assets/ProductsMain-K81D-u5K.js","assets/ProductsMain-D0DHXlsC.css","assets/SuppliersMain-D_nkYnHp.js","assets/SuppliersMain-ElCAjoxt.css","assets/AdminMain-DPSSXXaL.js","assets/AdminMain-afUgM0ui.css","assets/ReportsMain-uVG74J5u.js","assets/ReportsMain-BWhrXjbE.css"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();function q1(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Pm={exports:{}},Tu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VT;function j1(){if(VT)return Tu;VT=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var d in a)d!=="key"&&(l[d]=a[d])}else l=a;return a=l.ref,{$$typeof:n,type:i,key:c,ref:a!==void 0?a:null,props:l}}return Tu.Fragment=e,Tu.jsx=t,Tu.jsxs=t,Tu}var kT;function H1(){return kT||(kT=1,Pm.exports=j1()),Pm.exports}var Y=H1(),Vm={exports:{}},Ie={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xT;function G1(){if(xT)return Ie;xT=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),A=Symbol.iterator;function T(M){return M===null||typeof M!="object"?null:(M=A&&M[A]||M["@@iterator"],typeof M=="function"?M:null)}var N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},O=Object.assign,H={};function U(M,te,le){this.props=M,this.context=te,this.refs=H,this.updater=le||N}U.prototype.isReactComponent={},U.prototype.setState=function(M,te){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,te,"setState")},U.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function G(){}G.prototype=U.prototype;function ie(M,te,le){this.props=M,this.context=te,this.refs=H,this.updater=le||N}var ne=ie.prototype=new G;ne.constructor=ie,O(ne,U.prototype),ne.isPureReactComponent=!0;var he=Array.isArray,ce={H:null,A:null,T:null,S:null,V:null},Ee=Object.prototype.hasOwnProperty;function P(M,te,le,re,ye,Oe){return le=Oe.ref,{$$typeof:n,type:M,key:te,ref:le!==void 0?le:null,props:Oe}}function R(M,te){return P(M.type,te,void 0,void 0,void 0,M.props)}function S(M){return typeof M=="object"&&M!==null&&M.$$typeof===n}function C(M){var te={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(le){return te[le]})}var V=/\/+/g;function x(M,te){return typeof M=="object"&&M!==null&&M.key!=null?C(""+M.key):te.toString(36)}function D(){}function Tt(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(D,D):(M.status="pending",M.then(function(te){M.status==="pending"&&(M.status="fulfilled",M.value=te)},function(te){M.status==="pending"&&(M.status="rejected",M.reason=te)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function yt(M,te,le,re,ye){var Oe=typeof M;(Oe==="undefined"||Oe==="boolean")&&(M=null);var Se=!1;if(M===null)Se=!0;else switch(Oe){case"bigint":case"string":case"number":Se=!0;break;case"object":switch(M.$$typeof){case n:case e:Se=!0;break;case _:return Se=M._init,yt(Se(M._payload),te,le,re,ye)}}if(Se)return ye=ye(M),Se=re===""?"."+x(M,0):re,he(ye)?(le="",Se!=null&&(le=Se.replace(V,"$&/")+"/"),yt(ye,te,le,"",function(_r){return _r})):ye!=null&&(S(ye)&&(ye=R(ye,le+(ye.key==null||M&&M.key===ye.key?"":(""+ye.key).replace(V,"$&/")+"/")+Se)),te.push(ye)),1;Se=0;var Ft=re===""?".":re+":";if(he(M))for(var at=0;at<M.length;at++)re=M[at],Oe=Ft+x(re,at),Se+=yt(re,te,le,Oe,ye);else if(at=T(M),typeof at=="function")for(M=at.call(M),at=0;!(re=M.next()).done;)re=re.value,Oe=Ft+x(re,at++),Se+=yt(re,te,le,Oe,ye);else if(Oe==="object"){if(typeof M.then=="function")return yt(Tt(M),te,le,re,ye);throw te=String(M),Error("Objects are not valid as a React child (found: "+(te==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":te)+"). If you meant to render a collection of children, use an array instead.")}return Se}function X(M,te,le){if(M==null)return M;var re=[],ye=0;return yt(M,re,"","",function(Oe){return te.call(le,Oe,ye++)}),re}function oe(M){if(M._status===-1){var te=M._result;te=te(),te.then(function(le){(M._status===0||M._status===-1)&&(M._status=1,M._result=le)},function(le){(M._status===0||M._status===-1)&&(M._status=2,M._result=le)}),M._status===-1&&(M._status=0,M._result=te)}if(M._status===1)return M._result.default;throw M._result}var ge=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var te=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(te))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)};function $e(){}return Ie.Children={map:X,forEach:function(M,te,le){X(M,function(){te.apply(this,arguments)},le)},count:function(M){var te=0;return X(M,function(){te++}),te},toArray:function(M){return X(M,function(te){return te})||[]},only:function(M){if(!S(M))throw Error("React.Children.only expected to receive a single React element child.");return M}},Ie.Component=U,Ie.Fragment=t,Ie.Profiler=a,Ie.PureComponent=ie,Ie.StrictMode=i,Ie.Suspense=p,Ie.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ce,Ie.__COMPILER_RUNTIME={__proto__:null,c:function(M){return ce.H.useMemoCache(M)}},Ie.cache=function(M){return function(){return M.apply(null,arguments)}},Ie.cloneElement=function(M,te,le){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var re=O({},M.props),ye=M.key,Oe=void 0;if(te!=null)for(Se in te.ref!==void 0&&(Oe=void 0),te.key!==void 0&&(ye=""+te.key),te)!Ee.call(te,Se)||Se==="key"||Se==="__self"||Se==="__source"||Se==="ref"&&te.ref===void 0||(re[Se]=te[Se]);var Se=arguments.length-2;if(Se===1)re.children=le;else if(1<Se){for(var Ft=Array(Se),at=0;at<Se;at++)Ft[at]=arguments[at+2];re.children=Ft}return P(M.type,ye,void 0,void 0,Oe,re)},Ie.createContext=function(M){return M={$$typeof:c,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:l,_context:M},M},Ie.createElement=function(M,te,le){var re,ye={},Oe=null;if(te!=null)for(re in te.key!==void 0&&(Oe=""+te.key),te)Ee.call(te,re)&&re!=="key"&&re!=="__self"&&re!=="__source"&&(ye[re]=te[re]);var Se=arguments.length-2;if(Se===1)ye.children=le;else if(1<Se){for(var Ft=Array(Se),at=0;at<Se;at++)Ft[at]=arguments[at+2];ye.children=Ft}if(M&&M.defaultProps)for(re in Se=M.defaultProps,Se)ye[re]===void 0&&(ye[re]=Se[re]);return P(M,Oe,void 0,void 0,null,ye)},Ie.createRef=function(){return{current:null}},Ie.forwardRef=function(M){return{$$typeof:d,render:M}},Ie.isValidElement=S,Ie.lazy=function(M){return{$$typeof:_,_payload:{_status:-1,_result:M},_init:oe}},Ie.memo=function(M,te){return{$$typeof:g,type:M,compare:te===void 0?null:te}},Ie.startTransition=function(M){var te=ce.T,le={};ce.T=le;try{var re=M(),ye=ce.S;ye!==null&&ye(le,re),typeof re=="object"&&re!==null&&typeof re.then=="function"&&re.then($e,ge)}catch(Oe){ge(Oe)}finally{ce.T=te}},Ie.unstable_useCacheRefresh=function(){return ce.H.useCacheRefresh()},Ie.use=function(M){return ce.H.use(M)},Ie.useActionState=function(M,te,le){return ce.H.useActionState(M,te,le)},Ie.useCallback=function(M,te){return ce.H.useCallback(M,te)},Ie.useContext=function(M){return ce.H.useContext(M)},Ie.useDebugValue=function(){},Ie.useDeferredValue=function(M,te){return ce.H.useDeferredValue(M,te)},Ie.useEffect=function(M,te,le){var re=ce.H;if(typeof le=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return re.useEffect(M,te)},Ie.useId=function(){return ce.H.useId()},Ie.useImperativeHandle=function(M,te,le){return ce.H.useImperativeHandle(M,te,le)},Ie.useInsertionEffect=function(M,te){return ce.H.useInsertionEffect(M,te)},Ie.useLayoutEffect=function(M,te){return ce.H.useLayoutEffect(M,te)},Ie.useMemo=function(M,te){return ce.H.useMemo(M,te)},Ie.useOptimistic=function(M,te){return ce.H.useOptimistic(M,te)},Ie.useReducer=function(M,te,le){return ce.H.useReducer(M,te,le)},Ie.useRef=function(M){return ce.H.useRef(M)},Ie.useState=function(M){return ce.H.useState(M)},Ie.useSyncExternalStore=function(M,te,le){return ce.H.useSyncExternalStore(M,te,le)},Ie.useTransition=function(){return ce.H.useTransition()},Ie.version="19.1.0",Ie}var LT;function jg(){return LT||(LT=1,Vm.exports=G1()),Vm.exports}var $=jg();const $4=q1($);var km={exports:{}},Au={},xm={exports:{}},Lm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UT;function $1(){return UT||(UT=1,function(n){function e(X,oe){var ge=X.length;X.push(oe);e:for(;0<ge;){var $e=ge-1>>>1,M=X[$e];if(0<a(M,oe))X[$e]=oe,X[ge]=M,ge=$e;else break e}}function t(X){return X.length===0?null:X[0]}function i(X){if(X.length===0)return null;var oe=X[0],ge=X.pop();if(ge!==oe){X[0]=ge;e:for(var $e=0,M=X.length,te=M>>>1;$e<te;){var le=2*($e+1)-1,re=X[le],ye=le+1,Oe=X[ye];if(0>a(re,ge))ye<M&&0>a(Oe,re)?(X[$e]=Oe,X[ye]=ge,$e=ye):(X[$e]=re,X[le]=ge,$e=le);else if(ye<M&&0>a(Oe,ge))X[$e]=Oe,X[ye]=ge,$e=ye;else break e}}return oe}function a(X,oe){var ge=X.sortIndex-oe.sortIndex;return ge!==0?ge:X.id-oe.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();n.unstable_now=function(){return c.now()-d}}var p=[],g=[],_=1,A=null,T=3,N=!1,O=!1,H=!1,U=!1,G=typeof setTimeout=="function"?setTimeout:null,ie=typeof clearTimeout=="function"?clearTimeout:null,ne=typeof setImmediate<"u"?setImmediate:null;function he(X){for(var oe=t(g);oe!==null;){if(oe.callback===null)i(g);else if(oe.startTime<=X)i(g),oe.sortIndex=oe.expirationTime,e(p,oe);else break;oe=t(g)}}function ce(X){if(H=!1,he(X),!O)if(t(p)!==null)O=!0,Ee||(Ee=!0,x());else{var oe=t(g);oe!==null&&yt(ce,oe.startTime-X)}}var Ee=!1,P=-1,R=5,S=-1;function C(){return U?!0:!(n.unstable_now()-S<R)}function V(){if(U=!1,Ee){var X=n.unstable_now();S=X;var oe=!0;try{e:{O=!1,H&&(H=!1,ie(P),P=-1),N=!0;var ge=T;try{t:{for(he(X),A=t(p);A!==null&&!(A.expirationTime>X&&C());){var $e=A.callback;if(typeof $e=="function"){A.callback=null,T=A.priorityLevel;var M=$e(A.expirationTime<=X);if(X=n.unstable_now(),typeof M=="function"){A.callback=M,he(X),oe=!0;break t}A===t(p)&&i(p),he(X)}else i(p);A=t(p)}if(A!==null)oe=!0;else{var te=t(g);te!==null&&yt(ce,te.startTime-X),oe=!1}}break e}finally{A=null,T=ge,N=!1}oe=void 0}}finally{oe?x():Ee=!1}}}var x;if(typeof ne=="function")x=function(){ne(V)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,Tt=D.port2;D.port1.onmessage=V,x=function(){Tt.postMessage(null)}}else x=function(){G(V,0)};function yt(X,oe){P=G(function(){X(n.unstable_now())},oe)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(X){X.callback=null},n.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<X?Math.floor(1e3/X):5},n.unstable_getCurrentPriorityLevel=function(){return T},n.unstable_next=function(X){switch(T){case 1:case 2:case 3:var oe=3;break;default:oe=T}var ge=T;T=oe;try{return X()}finally{T=ge}},n.unstable_requestPaint=function(){U=!0},n.unstable_runWithPriority=function(X,oe){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var ge=T;T=X;try{return oe()}finally{T=ge}},n.unstable_scheduleCallback=function(X,oe,ge){var $e=n.unstable_now();switch(typeof ge=="object"&&ge!==null?(ge=ge.delay,ge=typeof ge=="number"&&0<ge?$e+ge:$e):ge=$e,X){case 1:var M=-1;break;case 2:M=250;break;case 5:M=1073741823;break;case 4:M=1e4;break;default:M=5e3}return M=ge+M,X={id:_++,callback:oe,priorityLevel:X,startTime:ge,expirationTime:M,sortIndex:-1},ge>$e?(X.sortIndex=ge,e(g,X),t(p)===null&&X===t(g)&&(H?(ie(P),P=-1):H=!0,yt(ce,ge-$e))):(X.sortIndex=M,e(p,X),O||N||(O=!0,Ee||(Ee=!0,x()))),X},n.unstable_shouldYield=C,n.unstable_wrapCallback=function(X){var oe=T;return function(){var ge=T;T=oe;try{return X.apply(this,arguments)}finally{T=ge}}}}(Lm)),Lm}var BT;function K1(){return BT||(BT=1,xm.exports=$1()),xm.exports}var Um={exports:{}},on={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zT;function Y1(){if(zT)return on;zT=1;var n=jg();function e(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)g+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(p,g,_){var A=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:A==null?null:""+A,children:p,containerInfo:g,implementation:_}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(p,g){if(p==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return on.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,on.createPortal=function(p,g){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return l(p,g,null,_)},on.flushSync=function(p){var g=c.T,_=i.p;try{if(c.T=null,i.p=2,p)return p()}finally{c.T=g,i.p=_,i.d.f()}},on.preconnect=function(p,g){typeof p=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,i.d.C(p,g))},on.prefetchDNS=function(p){typeof p=="string"&&i.d.D(p)},on.preinit=function(p,g){if(typeof p=="string"&&g&&typeof g.as=="string"){var _=g.as,A=d(_,g.crossOrigin),T=typeof g.integrity=="string"?g.integrity:void 0,N=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;_==="style"?i.d.S(p,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:A,integrity:T,fetchPriority:N}):_==="script"&&i.d.X(p,{crossOrigin:A,integrity:T,fetchPriority:N,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},on.preinitModule=function(p,g){if(typeof p=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var _=d(g.as,g.crossOrigin);i.d.M(p,{crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&i.d.M(p)},on.preload=function(p,g){if(typeof p=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var _=g.as,A=d(_,g.crossOrigin);i.d.L(p,_,{crossOrigin:A,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},on.preloadModule=function(p,g){if(typeof p=="string")if(g){var _=d(g.as,g.crossOrigin);i.d.m(p,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else i.d.m(p)},on.requestFormReset=function(p){i.d.r(p)},on.unstable_batchedUpdates=function(p,g){return p(g)},on.useFormState=function(p,g,_){return c.H.useFormState(p,g,_)},on.useFormStatus=function(){return c.H.useHostTransitionStatus()},on.version="19.1.0",on}var FT;function Q1(){if(FT)return Um.exports;FT=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Um.exports=Y1(),Um.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qT;function X1(){if(qT)return Au;qT=1;var n=K1(),e=jg(),t=Q1();function i(r){var s="https://react.dev/errors/"+r;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function l(r){var s=r,o=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,(s.flags&4098)!==0&&(o=s.return),r=s.return;while(r)}return s.tag===3?o:null}function c(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function d(r){if(l(r)!==r)throw Error(i(188))}function p(r){var s=r.alternate;if(!s){if(s=l(r),s===null)throw Error(i(188));return s!==r?null:r}for(var o=r,u=s;;){var f=o.return;if(f===null)break;var m=f.alternate;if(m===null){if(u=f.return,u!==null){o=u;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===o)return d(f),r;if(m===u)return d(f),s;m=m.sibling}throw Error(i(188))}if(o.return!==u.return)o=f,u=m;else{for(var E=!1,w=f.child;w;){if(w===o){E=!0,o=f,u=m;break}if(w===u){E=!0,u=f,o=m;break}w=w.sibling}if(!E){for(w=m.child;w;){if(w===o){E=!0,o=m,u=f;break}if(w===u){E=!0,u=m,o=f;break}w=w.sibling}if(!E)throw Error(i(189))}}if(o.alternate!==u)throw Error(i(190))}if(o.tag!==3)throw Error(i(188));return o.stateNode.current===o?r:s}function g(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r;for(r=r.child;r!==null;){if(s=g(r),s!==null)return s;r=r.sibling}return null}var _=Object.assign,A=Symbol.for("react.element"),T=Symbol.for("react.transitional.element"),N=Symbol.for("react.portal"),O=Symbol.for("react.fragment"),H=Symbol.for("react.strict_mode"),U=Symbol.for("react.profiler"),G=Symbol.for("react.provider"),ie=Symbol.for("react.consumer"),ne=Symbol.for("react.context"),he=Symbol.for("react.forward_ref"),ce=Symbol.for("react.suspense"),Ee=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),S=Symbol.for("react.activity"),C=Symbol.for("react.memo_cache_sentinel"),V=Symbol.iterator;function x(r){return r===null||typeof r!="object"?null:(r=V&&r[V]||r["@@iterator"],typeof r=="function"?r:null)}var D=Symbol.for("react.client.reference");function Tt(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===D?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case O:return"Fragment";case U:return"Profiler";case H:return"StrictMode";case ce:return"Suspense";case Ee:return"SuspenseList";case S:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case N:return"Portal";case ne:return(r.displayName||"Context")+".Provider";case ie:return(r._context.displayName||"Context")+".Consumer";case he:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case P:return s=r.displayName||null,s!==null?s:Tt(r.type)||"Memo";case R:s=r._payload,r=r._init;try{return Tt(r(s))}catch{}}return null}var yt=Array.isArray,X=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oe=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ge={pending:!1,data:null,method:null,action:null},$e=[],M=-1;function te(r){return{current:r}}function le(r){0>M||(r.current=$e[M],$e[M]=null,M--)}function re(r,s){M++,$e[M]=r.current,r.current=s}var ye=te(null),Oe=te(null),Se=te(null),Ft=te(null);function at(r,s){switch(re(Se,s),re(Oe,r),re(ye,null),s.nodeType){case 9:case 11:r=(r=s.documentElement)&&(r=r.namespaceURI)?lT(r):0;break;default:if(r=s.tagName,s=s.namespaceURI)s=lT(s),r=uT(s,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}le(ye),re(ye,r)}function _r(){le(ye),le(Oe),le(Se)}function ki(r){r.memoizedState!==null&&re(Ft,r);var s=ye.current,o=uT(s,r.type);s!==o&&(re(Oe,r),re(ye,o))}function Xr(r){Oe.current===r&&(le(ye),le(Oe)),Ft.current===r&&(le(Ft),gu._currentValue=ge)}var Fs=Object.prototype.hasOwnProperty,qs=n.unstable_scheduleCallback,js=n.unstable_cancelCallback,dl=n.unstable_shouldYield,Oc=n.unstable_requestPaint,Fn=n.unstable_now,Pd=n.unstable_getCurrentPriorityLevel,pl=n.unstable_ImmediatePriority,Ha=n.unstable_UserBlockingPriority,Hs=n.unstable_NormalPriority,Vd=n.unstable_LowPriority,Ga=n.unstable_IdlePriority,ml=n.log,Mc=n.unstable_setDisableYieldValue,_t=null,Xe=null;function Rn(r){if(typeof ml=="function"&&Mc(r),Xe&&typeof Xe.setStrictMode=="function")try{Xe.setStrictMode(_t,r)}catch{}}var sn=Math.clz32?Math.clz32:Gs,Pc=Math.log,kd=Math.LN2;function Gs(r){return r>>>=0,r===0?32:31-(Pc(r)/kd|0)|0}var $s=256,Ks=4194304;function sr(r){var s=r&42;if(s!==0)return s;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function $a(r,s,o){var u=r.pendingLanes;if(u===0)return 0;var f=0,m=r.suspendedLanes,E=r.pingedLanes;r=r.warmLanes;var w=u&134217727;return w!==0?(u=w&~m,u!==0?f=sr(u):(E&=w,E!==0?f=sr(E):o||(o=w&~r,o!==0&&(f=sr(o))))):(w=u&~m,w!==0?f=sr(w):E!==0?f=sr(E):o||(o=u&~r,o!==0&&(f=sr(o)))),f===0?0:s!==0&&s!==f&&(s&m)===0&&(m=f&-f,o=s&-s,m>=o||m===32&&(o&4194048)!==0)?s:f}function Ys(r,s){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&s)===0}function gl(r,s){switch(r){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yl(){var r=$s;return $s<<=1,($s&4194048)===0&&($s=256),r}function _l(){var r=Ks;return Ks<<=1,(Ks&62914560)===0&&(Ks=4194304),r}function Wr(r){for(var s=[],o=0;31>o;o++)s.push(r);return s}function Zr(r,s){r.pendingLanes|=s,s!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function vl(r,s,o,u,f,m){var E=r.pendingLanes;r.pendingLanes=o,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=o,r.entangledLanes&=o,r.errorRecoveryDisabledLanes&=o,r.shellSuspendCounter=0;var w=r.entanglements,I=r.expirationTimes,F=r.hiddenUpdates;for(o=E&~o;0<o;){var W=31-sn(o),J=1<<W;w[W]=0,I[W]=-1;var q=F[W];if(q!==null)for(F[W]=null,W=0;W<q.length;W++){var j=q[W];j!==null&&(j.lane&=-536870913)}o&=~J}u!==0&&vr(r,u,0),m!==0&&f===0&&r.tag!==0&&(r.suspendedLanes|=m&~(E&~s))}function vr(r,s,o){r.pendingLanes|=s,r.suspendedLanes&=~s;var u=31-sn(s);r.entangledLanes|=s,r.entanglements[u]=r.entanglements[u]|1073741824|o&4194090}function El(r,s){var o=r.entangledLanes|=s;for(r=r.entanglements;o;){var u=31-sn(o),f=1<<u;f&s|r[u]&s&&(r[u]|=s),o&=~f}}function xi(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function Ka(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function Li(){var r=oe.p;return r!==0?r:(r=window.event,r===void 0?32:CT(r.type))}function Vc(r,s){var o=oe.p;try{return oe.p=r,s()}finally{oe.p=o}}var ct=Math.random().toString(36).slice(2),Vt="__reactFiber$"+ct,It="__reactProps$"+ct,qn="__reactContainer$"+ct,Tl="__reactEvents$"+ct,xd="__reactListeners$"+ct,Ui="__reactHandles$"+ct,kc="__reactResources$"+ct,Qs="__reactMarker$"+ct;function Bi(r){delete r[Vt],delete r[It],delete r[Tl],delete r[xd],delete r[Ui]}function Jr(r){var s=r[Vt];if(s)return s;for(var o=r.parentNode;o;){if(s=o[qn]||o[Vt]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(r=dT(r);r!==null;){if(o=r[Vt])return o;r=dT(r)}return s}r=o,o=r.parentNode}return null}function Er(r){if(r=r[Vt]||r[qn]){var s=r.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return r}return null}function Tr(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r.stateNode;throw Error(i(33))}function pn(r){var s=r[kc];return s||(s=r[kc]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function At(r){r[Qs]=!0}var Al=new Set,Ya={};function ar(r,s){ei(r,s),ei(r+"Capture",s)}function ei(r,s){for(Ya[r]=s,r=0;r<s.length;r++)Al.add(s[r])}var xc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Lc={},Xs={};function Uc(r){return Fs.call(Xs,r)?!0:Fs.call(Lc,r)?!1:xc.test(r)?Xs[r]=!0:(Lc[r]=!0,!1)}function zi(r,s,o){if(Uc(s))if(o===null)r.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":r.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){r.removeAttribute(s);return}}r.setAttribute(s,""+o)}}function Ar(r,s,o){if(o===null)r.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(s);return}r.setAttribute(s,""+o)}}function Qt(r,s,o,u){if(u===null)r.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(o);return}r.setAttributeNS(s,o,""+u)}}var Ws,Bc;function ti(r){if(Ws===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);Ws=s&&s[1]||"",Bc=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ws+r+Bc}var Qa=!1;function Xa(r,s){if(!r||Qa)return"";Qa=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var J=function(){throw Error()};if(Object.defineProperty(J.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(J,[])}catch(j){var q=j}Reflect.construct(r,[],J)}else{try{J.call()}catch(j){q=j}r.call(J.prototype)}}else{try{throw Error()}catch(j){q=j}(J=r())&&typeof J.catch=="function"&&J.catch(function(){})}}catch(j){if(j&&q&&typeof j.stack=="string")return[j.stack,q.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=u.DetermineComponentFrameRoot(),E=m[0],w=m[1];if(E&&w){var I=E.split(`
`),F=w.split(`
`);for(f=u=0;u<I.length&&!I[u].includes("DetermineComponentFrameRoot");)u++;for(;f<F.length&&!F[f].includes("DetermineComponentFrameRoot");)f++;if(u===I.length||f===F.length)for(u=I.length-1,f=F.length-1;1<=u&&0<=f&&I[u]!==F[f];)f--;for(;1<=u&&0<=f;u--,f--)if(I[u]!==F[f]){if(u!==1||f!==1)do if(u--,f--,0>f||I[u]!==F[f]){var W=`
`+I[u].replace(" at new "," at ");return r.displayName&&W.includes("<anonymous>")&&(W=W.replace("<anonymous>",r.displayName)),W}while(1<=u&&0<=f);break}}}finally{Qa=!1,Error.prepareStackTrace=o}return(o=r?r.displayName||r.name:"")?ti(o):""}function wl(r){switch(r.tag){case 26:case 27:case 5:return ti(r.type);case 16:return ti("Lazy");case 13:return ti("Suspense");case 19:return ti("SuspenseList");case 0:case 15:return Xa(r.type,!1);case 11:return Xa(r.type.render,!1);case 1:return Xa(r.type,!0);case 31:return ti("Activity");default:return""}}function Wa(r){try{var s="";do s+=wl(r),r=r.return;while(r);return s}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function mn(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function bl(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Ld(r){var s=bl(r)?"checked":"value",o=Object.getOwnPropertyDescriptor(r.constructor.prototype,s),u=""+r[s];if(!r.hasOwnProperty(s)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var f=o.get,m=o.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return f.call(this)},set:function(E){u=""+E,m.call(this,E)}}),Object.defineProperty(r,s,{enumerable:o.enumerable}),{getValue:function(){return u},setValue:function(E){u=""+E},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function Za(r){r._valueTracker||(r._valueTracker=Ld(r))}function Sl(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var o=s.getValue(),u="";return r&&(u=bl(r)?r.checked?"true":"false":r.value),r=u,r!==o?(s.setValue(r),!0):!1}function Zs(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var Ud=/[\n"\\]/g;function Ct(r){return r.replace(Ud,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function In(r,s,o,u,f,m,E,w){r.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?r.type=E:r.removeAttribute("type"),s!=null?E==="number"?(s===0&&r.value===""||r.value!=s)&&(r.value=""+mn(s)):r.value!==""+mn(s)&&(r.value=""+mn(s)):E!=="submit"&&E!=="reset"||r.removeAttribute("value"),s!=null?Fi(r,E,mn(s)):o!=null?Fi(r,E,mn(o)):u!=null&&r.removeAttribute("value"),f==null&&m!=null&&(r.defaultChecked=!!m),f!=null&&(r.checked=f&&typeof f!="function"&&typeof f!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?r.name=""+mn(w):r.removeAttribute("name")}function Js(r,s,o,u,f,m,E,w){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(r.type=m),s!=null||o!=null){if(!(m!=="submit"&&m!=="reset"||s!=null))return;o=o!=null?""+mn(o):"",s=s!=null?""+mn(s):o,w||s===r.value||(r.value=s),r.defaultValue=s}u=u??f,u=typeof u!="function"&&typeof u!="symbol"&&!!u,r.checked=w?r.checked:!!u,r.defaultChecked=!!u,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(r.name=E)}function Fi(r,s,o){s==="number"&&Zs(r.ownerDocument)===r||r.defaultValue===""+o||(r.defaultValue=""+o)}function ni(r,s,o,u){if(r=r.options,s){s={};for(var f=0;f<o.length;f++)s["$"+o[f]]=!0;for(o=0;o<r.length;o++)f=s.hasOwnProperty("$"+r[o].value),r[o].selected!==f&&(r[o].selected=f),f&&u&&(r[o].defaultSelected=!0)}else{for(o=""+mn(o),s=null,f=0;f<r.length;f++){if(r[f].value===o){r[f].selected=!0,u&&(r[f].defaultSelected=!0);return}s!==null||r[f].disabled||(s=r[f])}s!==null&&(s.selected=!0)}}function Je(r,s,o){if(s!=null&&(s=""+mn(s),s!==r.value&&(r.value=s),o==null)){r.defaultValue!==s&&(r.defaultValue=s);return}r.defaultValue=o!=null?""+mn(o):""}function ea(r,s,o,u){if(s==null){if(u!=null){if(o!=null)throw Error(i(92));if(yt(u)){if(1<u.length)throw Error(i(93));u=u[0]}o=u}o==null&&(o=""),s=o}o=mn(s),r.defaultValue=o,u=r.textContent,u===o&&u!==""&&u!==null&&(r.value=u)}function jn(r,s){if(s){var o=r.firstChild;if(o&&o===r.lastChild&&o.nodeType===3){o.nodeValue=s;return}}r.textContent=s}var ta=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function zc(r,s,o){var u=s.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?r.setProperty(s,""):s==="float"?r.cssFloat="":r[s]="":u?r.setProperty(s,o):typeof o!="number"||o===0||ta.has(s)?s==="float"?r.cssFloat=o:r[s]=(""+o).trim():r[s]=o+"px"}function Rl(r,s,o){if(s!=null&&typeof s!="object")throw Error(i(62));if(r=r.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?r.setProperty(u,""):u==="float"?r.cssFloat="":r[u]="");for(var f in s)u=s[f],s.hasOwnProperty(f)&&o[f]!==u&&zc(r,f,u)}else for(var m in s)s.hasOwnProperty(m)&&zc(r,m,s[m])}function Il(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Bd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),zd=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ja(r){return zd.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}var ri=null;function Hn(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var ii=null,si=null;function Cl(r){var s=Er(r);if(s&&(r=s.stateNode)){var o=r[It]||null;e:switch(r=s.stateNode,s.type){case"input":if(In(r,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),s=o.name,o.type==="radio"&&s!=null){for(o=r;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Ct(""+s)+'"][type="radio"]'),s=0;s<o.length;s++){var u=o[s];if(u!==r&&u.form===r.form){var f=u[It]||null;if(!f)throw Error(i(90));In(u,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(s=0;s<o.length;s++)u=o[s],u.form===r.form&&Sl(u)}break e;case"textarea":Je(r,o.value,o.defaultValue);break e;case"select":s=o.value,s!=null&&ni(r,!!o.multiple,s,!1)}}}var wr=!1;function Fc(r,s,o){if(wr)return r(s,o);wr=!0;try{var u=r(s);return u}finally{if(wr=!1,(ii!==null||si!==null)&&(Vh(),ii&&(s=ii,r=si,si=ii=null,Cl(s),r)))for(s=0;s<r.length;s++)Cl(r[s])}}function na(r,s){var o=r.stateNode;if(o===null)return null;var u=o[It]||null;if(u===null)return null;o=u[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(r=r.type,u=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!u;break e;default:r=!1}if(r)return null;if(o&&typeof o!="function")throw Error(i(231,s,typeof o));return o}var or=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Gn=!1;if(or)try{var ra={};Object.defineProperty(ra,"passive",{get:function(){Gn=!0}}),window.addEventListener("test",ra,ra),window.removeEventListener("test",ra,ra)}catch{Gn=!1}var br=null,qi=null,ai=null;function Nl(){if(ai)return ai;var r,s=qi,o=s.length,u,f="value"in br?br.value:br.textContent,m=f.length;for(r=0;r<o&&s[r]===f[r];r++);var E=o-r;for(u=1;u<=E&&s[o-u]===f[m-u];u++);return ai=f.slice(r,1<u?1-u:void 0)}function Sr(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function Rr(){return!0}function Dl(){return!1}function qt(r){function s(o,u,f,m,E){this._reactName=o,this._targetInst=f,this.type=u,this.nativeEvent=m,this.target=E,this.currentTarget=null;for(var w in r)r.hasOwnProperty(w)&&(o=r[w],this[w]=o?o(m):m[w]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Rr:Dl,this.isPropagationStopped=Dl,this}return _(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Rr)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Rr)},persist:function(){},isPersistent:Rr}),s}var Ye={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},eo=qt(Ye),ia=_({},Ye,{view:0,detail:0}),qc=qt(ia),to,no,Ir,sa=_({},ia,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:la,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Ir&&(Ir&&r.type==="mousemove"?(to=r.screenX-Ir.screenX,no=r.screenY-Ir.screenY):no=to=0,Ir=r),to)},movementY:function(r){return"movementY"in r?r.movementY:no}}),$n=qt(sa),jc=_({},sa,{dataTransfer:0}),Fd=qt(jc),aa=_({},ia,{relatedTarget:0}),ro=qt(aa),Ol=_({},Ye,{animationName:0,elapsedTime:0,pseudoElement:0}),io=qt(Ol),Hc=_({},Ye,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),so=qt(Hc),qd=_({},Ye,{data:0}),Ml=qt(qd),oa={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Gc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$c={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pl(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=$c[r])?!!s[r]:!1}function la(){return Pl}var Kc=_({},ia,{key:function(r){if(r.key){var s=oa[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=Sr(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Gc[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:la,charCode:function(r){return r.type==="keypress"?Sr(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Sr(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),ao=qt(Kc),Yc=_({},sa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Vl=qt(Yc),oi=_({},ia,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:la}),Qc=qt(oi),Xc=_({},Ye,{propertyName:0,elapsedTime:0,pseudoElement:0}),Wc=qt(Xc),Zc=_({},sa,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),oo=qt(Zc),gn=_({},Ye,{newState:0,oldState:0}),Jc=qt(gn),eh=[9,13,27,32],Cr=or&&"CompositionEvent"in window,h=null;or&&"documentMode"in document&&(h=document.documentMode);var y=or&&"TextEvent"in window&&!h,v=or&&(!Cr||h&&8<h&&11>=h),b=" ",B=!1;function K(r,s){switch(r){case"keyup":return eh.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function se(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Be=!1;function kt(r,s){switch(r){case"compositionend":return se(s);case"keypress":return s.which!==32?null:(B=!0,b);case"textInput":return r=s.data,r===b&&B?null:r;default:return null}}function ze(r,s){if(Be)return r==="compositionend"||!Cr&&K(r,s)?(r=Nl(),ai=qi=br=null,Be=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return v&&s.locale!=="ko"?null:s.data;default:return null}}var jt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xt(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!jt[r.type]:s==="textarea"}function li(r,s,o,u){ii?si?si.push(u):si=[u]:ii=u,s=zh(s,"onChange"),0<s.length&&(o=new eo("onChange","change",null,o,u),r.push({event:o,listeners:s}))}var Xt=null,Nr=null;function kl(r){rT(r,0)}function th(r){var s=Tr(r);if(Sl(s))return r}function b_(r,s){if(r==="change")return s}var S_=!1;if(or){var jd;if(or){var Hd="oninput"in document;if(!Hd){var R_=document.createElement("div");R_.setAttribute("oninput","return;"),Hd=typeof R_.oninput=="function"}jd=Hd}else jd=!1;S_=jd&&(!document.documentMode||9<document.documentMode)}function I_(){Xt&&(Xt.detachEvent("onpropertychange",C_),Nr=Xt=null)}function C_(r){if(r.propertyName==="value"&&th(Nr)){var s=[];li(s,Nr,r,Hn(r)),Fc(kl,s)}}function _I(r,s,o){r==="focusin"?(I_(),Xt=s,Nr=o,Xt.attachEvent("onpropertychange",C_)):r==="focusout"&&I_()}function vI(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return th(Nr)}function EI(r,s){if(r==="click")return th(s)}function TI(r,s){if(r==="input"||r==="change")return th(s)}function AI(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var Cn=typeof Object.is=="function"?Object.is:AI;function xl(r,s){if(Cn(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var o=Object.keys(r),u=Object.keys(s);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var f=o[u];if(!Fs.call(s,f)||!Cn(r[f],s[f]))return!1}return!0}function N_(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function D_(r,s){var o=N_(r);r=0;for(var u;o;){if(o.nodeType===3){if(u=r+o.textContent.length,r<=s&&u>=s)return{node:o,offset:s-r};r=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=N_(o)}}function O_(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?O_(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function M_(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var s=Zs(r.document);s instanceof r.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)r=s.contentWindow;else break;s=Zs(r.document)}return s}function Gd(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}var wI=or&&"documentMode"in document&&11>=document.documentMode,lo=null,$d=null,Ll=null,Kd=!1;function P_(r,s,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Kd||lo==null||lo!==Zs(u)||(u=lo,"selectionStart"in u&&Gd(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Ll&&xl(Ll,u)||(Ll=u,u=zh($d,"onSelect"),0<u.length&&(s=new eo("onSelect","select",null,s,o),r.push({event:s,listeners:u}),s.target=lo)))}function ua(r,s){var o={};return o[r.toLowerCase()]=s.toLowerCase(),o["Webkit"+r]="webkit"+s,o["Moz"+r]="moz"+s,o}var uo={animationend:ua("Animation","AnimationEnd"),animationiteration:ua("Animation","AnimationIteration"),animationstart:ua("Animation","AnimationStart"),transitionrun:ua("Transition","TransitionRun"),transitionstart:ua("Transition","TransitionStart"),transitioncancel:ua("Transition","TransitionCancel"),transitionend:ua("Transition","TransitionEnd")},Yd={},V_={};or&&(V_=document.createElement("div").style,"AnimationEvent"in window||(delete uo.animationend.animation,delete uo.animationiteration.animation,delete uo.animationstart.animation),"TransitionEvent"in window||delete uo.transitionend.transition);function ca(r){if(Yd[r])return Yd[r];if(!uo[r])return r;var s=uo[r],o;for(o in s)if(s.hasOwnProperty(o)&&o in V_)return Yd[r]=s[o];return r}var k_=ca("animationend"),x_=ca("animationiteration"),L_=ca("animationstart"),bI=ca("transitionrun"),SI=ca("transitionstart"),RI=ca("transitioncancel"),U_=ca("transitionend"),B_=new Map,Qd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Qd.push("scrollEnd");function lr(r,s){B_.set(r,s),ar(s,[r])}var z_=new WeakMap;function Kn(r,s){if(typeof r=="object"&&r!==null){var o=z_.get(r);return o!==void 0?o:(s={value:r,source:s,stack:Wa(s)},z_.set(r,s),s)}return{value:r,source:s,stack:Wa(s)}}var Yn=[],co=0,Xd=0;function nh(){for(var r=co,s=Xd=co=0;s<r;){var o=Yn[s];Yn[s++]=null;var u=Yn[s];Yn[s++]=null;var f=Yn[s];Yn[s++]=null;var m=Yn[s];if(Yn[s++]=null,u!==null&&f!==null){var E=u.pending;E===null?f.next=f:(f.next=E.next,E.next=f),u.pending=f}m!==0&&F_(o,f,m)}}function rh(r,s,o,u){Yn[co++]=r,Yn[co++]=s,Yn[co++]=o,Yn[co++]=u,Xd|=u,r.lanes|=u,r=r.alternate,r!==null&&(r.lanes|=u)}function Wd(r,s,o,u){return rh(r,s,o,u),ih(r)}function ho(r,s){return rh(r,null,null,s),ih(r)}function F_(r,s,o){r.lanes|=o;var u=r.alternate;u!==null&&(u.lanes|=o);for(var f=!1,m=r.return;m!==null;)m.childLanes|=o,u=m.alternate,u!==null&&(u.childLanes|=o),m.tag===22&&(r=m.stateNode,r===null||r._visibility&1||(f=!0)),r=m,m=m.return;return r.tag===3?(m=r.stateNode,f&&s!==null&&(f=31-sn(o),r=m.hiddenUpdates,u=r[f],u===null?r[f]=[s]:u.push(s),s.lane=o|536870912),m):null}function ih(r){if(50<lu)throw lu=0,rm=null,Error(i(185));for(var s=r.return;s!==null;)r=s,s=r.return;return r.tag===3?r.stateNode:null}var fo={};function II(r,s,o,u){this.tag=r,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nn(r,s,o,u){return new II(r,s,o,u)}function Zd(r){return r=r.prototype,!(!r||!r.isReactComponent)}function ui(r,s){var o=r.alternate;return o===null?(o=Nn(r.tag,s,r.key,r.mode),o.elementType=r.elementType,o.type=r.type,o.stateNode=r.stateNode,o.alternate=r,r.alternate=o):(o.pendingProps=s,o.type=r.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=r.flags&65011712,o.childLanes=r.childLanes,o.lanes=r.lanes,o.child=r.child,o.memoizedProps=r.memoizedProps,o.memoizedState=r.memoizedState,o.updateQueue=r.updateQueue,s=r.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=r.sibling,o.index=r.index,o.ref=r.ref,o.refCleanup=r.refCleanup,o}function q_(r,s){r.flags&=65011714;var o=r.alternate;return o===null?(r.childLanes=0,r.lanes=s,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,s=o.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),r}function sh(r,s,o,u,f,m){var E=0;if(u=r,typeof r=="function")Zd(r)&&(E=1);else if(typeof r=="string")E=N1(r,o,ye.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case S:return r=Nn(31,o,s,f),r.elementType=S,r.lanes=m,r;case O:return ha(o.children,f,m,s);case H:E=8,f|=24;break;case U:return r=Nn(12,o,s,f|2),r.elementType=U,r.lanes=m,r;case ce:return r=Nn(13,o,s,f),r.elementType=ce,r.lanes=m,r;case Ee:return r=Nn(19,o,s,f),r.elementType=Ee,r.lanes=m,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case G:case ne:E=10;break e;case ie:E=9;break e;case he:E=11;break e;case P:E=14;break e;case R:E=16,u=null;break e}E=29,o=Error(i(130,r===null?"null":typeof r,"")),u=null}return s=Nn(E,o,s,f),s.elementType=r,s.type=u,s.lanes=m,s}function ha(r,s,o,u){return r=Nn(7,r,u,s),r.lanes=o,r}function Jd(r,s,o){return r=Nn(6,r,null,s),r.lanes=o,r}function ep(r,s,o){return s=Nn(4,r.children!==null?r.children:[],r.key,s),s.lanes=o,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}var po=[],mo=0,ah=null,oh=0,Qn=[],Xn=0,fa=null,ci=1,hi="";function da(r,s){po[mo++]=oh,po[mo++]=ah,ah=r,oh=s}function j_(r,s,o){Qn[Xn++]=ci,Qn[Xn++]=hi,Qn[Xn++]=fa,fa=r;var u=ci;r=hi;var f=32-sn(u)-1;u&=~(1<<f),o+=1;var m=32-sn(s)+f;if(30<m){var E=f-f%5;m=(u&(1<<E)-1).toString(32),u>>=E,f-=E,ci=1<<32-sn(s)+f|o<<f|u,hi=m+r}else ci=1<<m|o<<f|u,hi=r}function tp(r){r.return!==null&&(da(r,1),j_(r,1,0))}function np(r){for(;r===ah;)ah=po[--mo],po[mo]=null,oh=po[--mo],po[mo]=null;for(;r===fa;)fa=Qn[--Xn],Qn[Xn]=null,hi=Qn[--Xn],Qn[Xn]=null,ci=Qn[--Xn],Qn[Xn]=null}var yn=null,vt=null,Ke=!1,pa=null,Dr=!1,rp=Error(i(519));function ma(r){var s=Error(i(418,""));throw zl(Kn(s,r)),rp}function H_(r){var s=r.stateNode,o=r.type,u=r.memoizedProps;switch(s[Vt]=r,s[It]=u,o){case"dialog":Ve("cancel",s),Ve("close",s);break;case"iframe":case"object":case"embed":Ve("load",s);break;case"video":case"audio":for(o=0;o<cu.length;o++)Ve(cu[o],s);break;case"source":Ve("error",s);break;case"img":case"image":case"link":Ve("error",s),Ve("load",s);break;case"details":Ve("toggle",s);break;case"input":Ve("invalid",s),Js(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),Za(s);break;case"select":Ve("invalid",s);break;case"textarea":Ve("invalid",s),ea(s,u.value,u.defaultValue,u.children),Za(s)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||s.textContent===""+o||u.suppressHydrationWarning===!0||oT(s.textContent,o)?(u.popover!=null&&(Ve("beforetoggle",s),Ve("toggle",s)),u.onScroll!=null&&Ve("scroll",s),u.onScrollEnd!=null&&Ve("scrollend",s),u.onClick!=null&&(s.onclick=Fh),s=!0):s=!1,s||ma(r)}function G_(r){for(yn=r.return;yn;)switch(yn.tag){case 5:case 13:Dr=!1;return;case 27:case 3:Dr=!0;return;default:yn=yn.return}}function Ul(r){if(r!==yn)return!1;if(!Ke)return G_(r),Ke=!0,!1;var s=r.tag,o;if((o=s!==3&&s!==27)&&((o=s===5)&&(o=r.type,o=!(o!=="form"&&o!=="button")||vm(r.type,r.memoizedProps)),o=!o),o&&vt&&ma(r),G_(r),s===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));e:{for(r=r.nextSibling,s=0;r;){if(r.nodeType===8)if(o=r.data,o==="/$"){if(s===0){vt=cr(r.nextSibling);break e}s--}else o!=="$"&&o!=="$!"&&o!=="$?"||s++;r=r.nextSibling}vt=null}}else s===27?(s=vt,is(r.type)?(r=wm,wm=null,vt=r):vt=s):vt=yn?cr(r.stateNode.nextSibling):null;return!0}function Bl(){vt=yn=null,Ke=!1}function $_(){var r=pa;return r!==null&&(An===null?An=r:An.push.apply(An,r),pa=null),r}function zl(r){pa===null?pa=[r]:pa.push(r)}var ip=te(null),ga=null,fi=null;function ji(r,s,o){re(ip,s._currentValue),s._currentValue=o}function di(r){r._currentValue=ip.current,le(ip)}function sp(r,s,o){for(;r!==null;){var u=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),r===o)break;r=r.return}}function ap(r,s,o,u){var f=r.child;for(f!==null&&(f.return=r);f!==null;){var m=f.dependencies;if(m!==null){var E=f.child;m=m.firstContext;e:for(;m!==null;){var w=m;m=f;for(var I=0;I<s.length;I++)if(w.context===s[I]){m.lanes|=o,w=m.alternate,w!==null&&(w.lanes|=o),sp(m.return,o,r),u||(E=null);break e}m=w.next}}else if(f.tag===18){if(E=f.return,E===null)throw Error(i(341));E.lanes|=o,m=E.alternate,m!==null&&(m.lanes|=o),sp(E,o,r),E=null}else E=f.child;if(E!==null)E.return=f;else for(E=f;E!==null;){if(E===r){E=null;break}if(f=E.sibling,f!==null){f.return=E.return,E=f;break}E=E.return}f=E}}function Fl(r,s,o,u){r=null;for(var f=s,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var E=f.alternate;if(E===null)throw Error(i(387));if(E=E.memoizedProps,E!==null){var w=f.type;Cn(f.pendingProps.value,E.value)||(r!==null?r.push(w):r=[w])}}else if(f===Ft.current){if(E=f.alternate,E===null)throw Error(i(387));E.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(r!==null?r.push(gu):r=[gu])}f=f.return}r!==null&&ap(s,r,o,u),s.flags|=262144}function lh(r){for(r=r.firstContext;r!==null;){if(!Cn(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function ya(r){ga=r,fi=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function an(r){return K_(ga,r)}function uh(r,s){return ga===null&&ya(r),K_(r,s)}function K_(r,s){var o=s._currentValue;if(s={context:s,memoizedValue:o,next:null},fi===null){if(r===null)throw Error(i(308));fi=s,r.dependencies={lanes:0,firstContext:s},r.flags|=524288}else fi=fi.next=s;return o}var CI=typeof AbortController<"u"?AbortController:function(){var r=[],s=this.signal={aborted:!1,addEventListener:function(o,u){r.push(u)}};this.abort=function(){s.aborted=!0,r.forEach(function(o){return o()})}},NI=n.unstable_scheduleCallback,DI=n.unstable_NormalPriority,Lt={$$typeof:ne,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function op(){return{controller:new CI,data:new Map,refCount:0}}function ql(r){r.refCount--,r.refCount===0&&NI(DI,function(){r.controller.abort()})}var jl=null,lp=0,go=0,yo=null;function OI(r,s){if(jl===null){var o=jl=[];lp=0,go=cm(),yo={status:"pending",value:void 0,then:function(u){o.push(u)}}}return lp++,s.then(Y_,Y_),s}function Y_(){if(--lp===0&&jl!==null){yo!==null&&(yo.status="fulfilled");var r=jl;jl=null,go=0,yo=null;for(var s=0;s<r.length;s++)(0,r[s])()}}function MI(r,s){var o=[],u={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return r.then(function(){u.status="fulfilled",u.value=s;for(var f=0;f<o.length;f++)(0,o[f])(s)},function(f){for(u.status="rejected",u.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),u}var Q_=X.S;X.S=function(r,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&OI(r,s),Q_!==null&&Q_(r,s)};var _a=te(null);function up(){var r=_a.current;return r!==null?r:ot.pooledCache}function ch(r,s){s===null?re(_a,_a.current):re(_a,s.pool)}function X_(){var r=up();return r===null?null:{parent:Lt._currentValue,pool:r}}var Hl=Error(i(460)),W_=Error(i(474)),hh=Error(i(542)),cp={then:function(){}};function Z_(r){return r=r.status,r==="fulfilled"||r==="rejected"}function fh(){}function J_(r,s,o){switch(o=r[o],o===void 0?r.push(s):o!==s&&(s.then(fh,fh),s=o),s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,tv(r),r;default:if(typeof s.status=="string")s.then(fh,fh);else{if(r=ot,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=s,r.status="pending",r.then(function(u){if(s.status==="pending"){var f=s;f.status="fulfilled",f.value=u}},function(u){if(s.status==="pending"){var f=s;f.status="rejected",f.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,tv(r),r}throw Gl=s,Hl}}var Gl=null;function ev(){if(Gl===null)throw Error(i(459));var r=Gl;return Gl=null,r}function tv(r){if(r===Hl||r===hh)throw Error(i(483))}var Hi=!1;function hp(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function fp(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Gi(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function $i(r,s,o){var u=r.updateQueue;if(u===null)return null;if(u=u.shared,(We&2)!==0){var f=u.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),u.pending=s,s=ih(r),F_(r,null,o),s}return rh(r,u,s,o),ih(r)}function $l(r,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194048)!==0)){var u=s.lanes;u&=r.pendingLanes,o|=u,s.lanes=o,El(r,o)}}function dp(r,s){var o=r.updateQueue,u=r.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var f=null,m=null;if(o=o.firstBaseUpdate,o!==null){do{var E={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};m===null?f=m=E:m=m.next=E,o=o.next}while(o!==null);m===null?f=m=s:m=m.next=s}else f=m=s;o={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:u.shared,callbacks:u.callbacks},r.updateQueue=o;return}r=o.lastBaseUpdate,r===null?o.firstBaseUpdate=s:r.next=s,o.lastBaseUpdate=s}var pp=!1;function Kl(){if(pp){var r=yo;if(r!==null)throw r}}function Yl(r,s,o,u){pp=!1;var f=r.updateQueue;Hi=!1;var m=f.firstBaseUpdate,E=f.lastBaseUpdate,w=f.shared.pending;if(w!==null){f.shared.pending=null;var I=w,F=I.next;I.next=null,E===null?m=F:E.next=F,E=I;var W=r.alternate;W!==null&&(W=W.updateQueue,w=W.lastBaseUpdate,w!==E&&(w===null?W.firstBaseUpdate=F:w.next=F,W.lastBaseUpdate=I))}if(m!==null){var J=f.baseState;E=0,W=F=I=null,w=m;do{var q=w.lane&-536870913,j=q!==w.lane;if(j?(Fe&q)===q:(u&q)===q){q!==0&&q===go&&(pp=!0),W!==null&&(W=W.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var be=r,ve=w;q=s;var nt=o;switch(ve.tag){case 1:if(be=ve.payload,typeof be=="function"){J=be.call(nt,J,q);break e}J=be;break e;case 3:be.flags=be.flags&-65537|128;case 0:if(be=ve.payload,q=typeof be=="function"?be.call(nt,J,q):be,q==null)break e;J=_({},J,q);break e;case 2:Hi=!0}}q=w.callback,q!==null&&(r.flags|=64,j&&(r.flags|=8192),j=f.callbacks,j===null?f.callbacks=[q]:j.push(q))}else j={lane:q,tag:w.tag,payload:w.payload,callback:w.callback,next:null},W===null?(F=W=j,I=J):W=W.next=j,E|=q;if(w=w.next,w===null){if(w=f.shared.pending,w===null)break;j=w,w=j.next,j.next=null,f.lastBaseUpdate=j,f.shared.pending=null}}while(!0);W===null&&(I=J),f.baseState=I,f.firstBaseUpdate=F,f.lastBaseUpdate=W,m===null&&(f.shared.lanes=0),es|=E,r.lanes=E,r.memoizedState=J}}function nv(r,s){if(typeof r!="function")throw Error(i(191,r));r.call(s)}function rv(r,s){var o=r.callbacks;if(o!==null)for(r.callbacks=null,r=0;r<o.length;r++)nv(o[r],s)}var _o=te(null),dh=te(0);function iv(r,s){r=Ei,re(dh,r),re(_o,s),Ei=r|s.baseLanes}function mp(){re(dh,Ei),re(_o,_o.current)}function gp(){Ei=dh.current,le(_o),le(dh)}var Ki=0,Ce=null,et=null,Nt=null,ph=!1,vo=!1,va=!1,mh=0,Ql=0,Eo=null,PI=0;function wt(){throw Error(i(321))}function yp(r,s){if(s===null)return!1;for(var o=0;o<s.length&&o<r.length;o++)if(!Cn(r[o],s[o]))return!1;return!0}function _p(r,s,o,u,f,m){return Ki=m,Ce=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,X.H=r===null||r.memoizedState===null?Fv:qv,va=!1,m=o(u,f),va=!1,vo&&(m=av(s,o,u,f)),sv(r),m}function sv(r){X.H=Th;var s=et!==null&&et.next!==null;if(Ki=0,Nt=et=Ce=null,ph=!1,Ql=0,Eo=null,s)throw Error(i(300));r===null||Ht||(r=r.dependencies,r!==null&&lh(r)&&(Ht=!0))}function av(r,s,o,u){Ce=r;var f=0;do{if(vo&&(Eo=null),Ql=0,vo=!1,25<=f)throw Error(i(301));if(f+=1,Nt=et=null,r.updateQueue!=null){var m=r.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}X.H=zI,m=s(o,u)}while(vo);return m}function VI(){var r=X.H,s=r.useState()[0];return s=typeof s.then=="function"?Xl(s):s,r=r.useState()[0],(et!==null?et.memoizedState:null)!==r&&(Ce.flags|=1024),s}function vp(){var r=mh!==0;return mh=0,r}function Ep(r,s,o){s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~o}function Tp(r){if(ph){for(r=r.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}ph=!1}Ki=0,Nt=et=Ce=null,vo=!1,Ql=mh=0,Eo=null}function En(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nt===null?Ce.memoizedState=Nt=r:Nt=Nt.next=r,Nt}function Dt(){if(et===null){var r=Ce.alternate;r=r!==null?r.memoizedState:null}else r=et.next;var s=Nt===null?Ce.memoizedState:Nt.next;if(s!==null)Nt=s,et=r;else{if(r===null)throw Ce.alternate===null?Error(i(467)):Error(i(310));et=r,r={memoizedState:et.memoizedState,baseState:et.baseState,baseQueue:et.baseQueue,queue:et.queue,next:null},Nt===null?Ce.memoizedState=Nt=r:Nt=Nt.next=r}return Nt}function Ap(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Xl(r){var s=Ql;return Ql+=1,Eo===null&&(Eo=[]),r=J_(Eo,r,s),s=Ce,(Nt===null?s.memoizedState:Nt.next)===null&&(s=s.alternate,X.H=s===null||s.memoizedState===null?Fv:qv),r}function gh(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return Xl(r);if(r.$$typeof===ne)return an(r)}throw Error(i(438,String(r)))}function wp(r){var s=null,o=Ce.updateQueue;if(o!==null&&(s=o.memoCache),s==null){var u=Ce.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(f){return f.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),o===null&&(o=Ap(),Ce.updateQueue=o),o.memoCache=s,o=s.data[s.index],o===void 0)for(o=s.data[s.index]=Array(r),u=0;u<r;u++)o[u]=C;return s.index++,o}function pi(r,s){return typeof s=="function"?s(r):s}function yh(r){var s=Dt();return bp(s,et,r)}function bp(r,s,o){var u=r.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=o;var f=r.baseQueue,m=u.pending;if(m!==null){if(f!==null){var E=f.next;f.next=m.next,m.next=E}s.baseQueue=f=m,u.pending=null}if(m=r.baseState,f===null)r.memoizedState=m;else{s=f.next;var w=E=null,I=null,F=s,W=!1;do{var J=F.lane&-536870913;if(J!==F.lane?(Fe&J)===J:(Ki&J)===J){var q=F.revertLane;if(q===0)I!==null&&(I=I.next={lane:0,revertLane:0,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),J===go&&(W=!0);else if((Ki&q)===q){F=F.next,q===go&&(W=!0);continue}else J={lane:0,revertLane:F.revertLane,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},I===null?(w=I=J,E=m):I=I.next=J,Ce.lanes|=q,es|=q;J=F.action,va&&o(m,J),m=F.hasEagerState?F.eagerState:o(m,J)}else q={lane:J,revertLane:F.revertLane,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},I===null?(w=I=q,E=m):I=I.next=q,Ce.lanes|=J,es|=J;F=F.next}while(F!==null&&F!==s);if(I===null?E=m:I.next=w,!Cn(m,r.memoizedState)&&(Ht=!0,W&&(o=yo,o!==null)))throw o;r.memoizedState=m,r.baseState=E,r.baseQueue=I,u.lastRenderedState=m}return f===null&&(u.lanes=0),[r.memoizedState,u.dispatch]}function Sp(r){var s=Dt(),o=s.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=r;var u=o.dispatch,f=o.pending,m=s.memoizedState;if(f!==null){o.pending=null;var E=f=f.next;do m=r(m,E.action),E=E.next;while(E!==f);Cn(m,s.memoizedState)||(Ht=!0),s.memoizedState=m,s.baseQueue===null&&(s.baseState=m),o.lastRenderedState=m}return[m,u]}function ov(r,s,o){var u=Ce,f=Dt(),m=Ke;if(m){if(o===void 0)throw Error(i(407));o=o()}else o=s();var E=!Cn((et||f).memoizedState,o);E&&(f.memoizedState=o,Ht=!0),f=f.queue;var w=cv.bind(null,u,f,r);if(Wl(2048,8,w,[r]),f.getSnapshot!==s||E||Nt!==null&&Nt.memoizedState.tag&1){if(u.flags|=2048,To(9,_h(),uv.bind(null,u,f,o,s),null),ot===null)throw Error(i(349));m||(Ki&124)!==0||lv(u,s,o)}return o}function lv(r,s,o){r.flags|=16384,r={getSnapshot:s,value:o},s=Ce.updateQueue,s===null?(s=Ap(),Ce.updateQueue=s,s.stores=[r]):(o=s.stores,o===null?s.stores=[r]:o.push(r))}function uv(r,s,o,u){s.value=o,s.getSnapshot=u,hv(s)&&fv(r)}function cv(r,s,o){return o(function(){hv(s)&&fv(r)})}function hv(r){var s=r.getSnapshot;r=r.value;try{var o=s();return!Cn(r,o)}catch{return!0}}function fv(r){var s=ho(r,2);s!==null&&Vn(s,r,2)}function Rp(r){var s=En();if(typeof r=="function"){var o=r;if(r=o(),va){Rn(!0);try{o()}finally{Rn(!1)}}}return s.memoizedState=s.baseState=r,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:pi,lastRenderedState:r},s}function dv(r,s,o,u){return r.baseState=o,bp(r,et,typeof u=="function"?u:pi)}function kI(r,s,o,u,f){if(Eh(r))throw Error(i(485));if(r=s.action,r!==null){var m={payload:f,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){m.listeners.push(E)}};X.T!==null?o(!0):m.isTransition=!1,u(m),o=s.pending,o===null?(m.next=s.pending=m,pv(s,m)):(m.next=o.next,s.pending=o.next=m)}}function pv(r,s){var o=s.action,u=s.payload,f=r.state;if(s.isTransition){var m=X.T,E={};X.T=E;try{var w=o(f,u),I=X.S;I!==null&&I(E,w),mv(r,s,w)}catch(F){Ip(r,s,F)}finally{X.T=m}}else try{m=o(f,u),mv(r,s,m)}catch(F){Ip(r,s,F)}}function mv(r,s,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){gv(r,s,u)},function(u){return Ip(r,s,u)}):gv(r,s,o)}function gv(r,s,o){s.status="fulfilled",s.value=o,yv(s),r.state=o,s=r.pending,s!==null&&(o=s.next,o===s?r.pending=null:(o=o.next,s.next=o,pv(r,o)))}function Ip(r,s,o){var u=r.pending;if(r.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=o,yv(s),s=s.next;while(s!==u)}r.action=null}function yv(r){r=r.listeners;for(var s=0;s<r.length;s++)(0,r[s])()}function _v(r,s){return s}function vv(r,s){if(Ke){var o=ot.formState;if(o!==null){e:{var u=Ce;if(Ke){if(vt){t:{for(var f=vt,m=Dr;f.nodeType!==8;){if(!m){f=null;break t}if(f=cr(f.nextSibling),f===null){f=null;break t}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){vt=cr(f.nextSibling),u=f.data==="F!";break e}}ma(u)}u=!1}u&&(s=o[0])}}return o=En(),o.memoizedState=o.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:_v,lastRenderedState:s},o.queue=u,o=Uv.bind(null,Ce,u),u.dispatch=o,u=Rp(!1),m=Mp.bind(null,Ce,!1,u.queue),u=En(),f={state:s,dispatch:null,action:r,pending:null},u.queue=f,o=kI.bind(null,Ce,f,m,o),f.dispatch=o,u.memoizedState=r,[s,o,!1]}function Ev(r){var s=Dt();return Tv(s,et,r)}function Tv(r,s,o){if(s=bp(r,s,_v)[0],r=yh(pi)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var u=Xl(s)}catch(E){throw E===Hl?hh:E}else u=s;s=Dt();var f=s.queue,m=f.dispatch;return o!==s.memoizedState&&(Ce.flags|=2048,To(9,_h(),xI.bind(null,f,o),null)),[u,m,r]}function xI(r,s){r.action=s}function Av(r){var s=Dt(),o=et;if(o!==null)return Tv(s,o,r);Dt(),s=s.memoizedState,o=Dt();var u=o.queue.dispatch;return o.memoizedState=r,[s,u,!1]}function To(r,s,o,u){return r={tag:r,create:o,deps:u,inst:s,next:null},s=Ce.updateQueue,s===null&&(s=Ap(),Ce.updateQueue=s),o=s.lastEffect,o===null?s.lastEffect=r.next=r:(u=o.next,o.next=r,r.next=u,s.lastEffect=r),r}function _h(){return{destroy:void 0,resource:void 0}}function wv(){return Dt().memoizedState}function vh(r,s,o,u){var f=En();u=u===void 0?null:u,Ce.flags|=r,f.memoizedState=To(1|s,_h(),o,u)}function Wl(r,s,o,u){var f=Dt();u=u===void 0?null:u;var m=f.memoizedState.inst;et!==null&&u!==null&&yp(u,et.memoizedState.deps)?f.memoizedState=To(s,m,o,u):(Ce.flags|=r,f.memoizedState=To(1|s,m,o,u))}function bv(r,s){vh(8390656,8,r,s)}function Sv(r,s){Wl(2048,8,r,s)}function Rv(r,s){return Wl(4,2,r,s)}function Iv(r,s){return Wl(4,4,r,s)}function Cv(r,s){if(typeof s=="function"){r=r();var o=s(r);return function(){typeof o=="function"?o():s(null)}}if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function Nv(r,s,o){o=o!=null?o.concat([r]):null,Wl(4,4,Cv.bind(null,s,r),o)}function Cp(){}function Dv(r,s){var o=Dt();s=s===void 0?null:s;var u=o.memoizedState;return s!==null&&yp(s,u[1])?u[0]:(o.memoizedState=[r,s],r)}function Ov(r,s){var o=Dt();s=s===void 0?null:s;var u=o.memoizedState;if(s!==null&&yp(s,u[1]))return u[0];if(u=r(),va){Rn(!0);try{r()}finally{Rn(!1)}}return o.memoizedState=[u,s],u}function Np(r,s,o){return o===void 0||(Ki&1073741824)!==0?r.memoizedState=s:(r.memoizedState=o,r=VE(),Ce.lanes|=r,es|=r,o)}function Mv(r,s,o,u){return Cn(o,s)?o:_o.current!==null?(r=Np(r,o,u),Cn(r,s)||(Ht=!0),r):(Ki&42)===0?(Ht=!0,r.memoizedState=o):(r=VE(),Ce.lanes|=r,es|=r,s)}function Pv(r,s,o,u,f){var m=oe.p;oe.p=m!==0&&8>m?m:8;var E=X.T,w={};X.T=w,Mp(r,!1,s,o);try{var I=f(),F=X.S;if(F!==null&&F(w,I),I!==null&&typeof I=="object"&&typeof I.then=="function"){var W=MI(I,u);Zl(r,s,W,Pn(r))}else Zl(r,s,u,Pn(r))}catch(J){Zl(r,s,{then:function(){},status:"rejected",reason:J},Pn())}finally{oe.p=m,X.T=E}}function LI(){}function Dp(r,s,o,u){if(r.tag!==5)throw Error(i(476));var f=Vv(r).queue;Pv(r,f,s,ge,o===null?LI:function(){return kv(r),o(u)})}function Vv(r){var s=r.memoizedState;if(s!==null)return s;s={memoizedState:ge,baseState:ge,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:pi,lastRenderedState:ge},next:null};var o={};return s.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:pi,lastRenderedState:o},next:null},r.memoizedState=s,r=r.alternate,r!==null&&(r.memoizedState=s),s}function kv(r){var s=Vv(r).next.queue;Zl(r,s,{},Pn())}function Op(){return an(gu)}function xv(){return Dt().memoizedState}function Lv(){return Dt().memoizedState}function UI(r){for(var s=r.return;s!==null;){switch(s.tag){case 24:case 3:var o=Pn();r=Gi(o);var u=$i(s,r,o);u!==null&&(Vn(u,s,o),$l(u,s,o)),s={cache:op()},r.payload=s;return}s=s.return}}function BI(r,s,o){var u=Pn();o={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},Eh(r)?Bv(s,o):(o=Wd(r,s,o,u),o!==null&&(Vn(o,r,u),zv(o,s,u)))}function Uv(r,s,o){var u=Pn();Zl(r,s,o,u)}function Zl(r,s,o,u){var f={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(Eh(r))Bv(s,f);else{var m=r.alternate;if(r.lanes===0&&(m===null||m.lanes===0)&&(m=s.lastRenderedReducer,m!==null))try{var E=s.lastRenderedState,w=m(E,o);if(f.hasEagerState=!0,f.eagerState=w,Cn(w,E))return rh(r,s,f,0),ot===null&&nh(),!1}catch{}finally{}if(o=Wd(r,s,f,u),o!==null)return Vn(o,r,u),zv(o,s,u),!0}return!1}function Mp(r,s,o,u){if(u={lane:2,revertLane:cm(),action:u,hasEagerState:!1,eagerState:null,next:null},Eh(r)){if(s)throw Error(i(479))}else s=Wd(r,o,u,2),s!==null&&Vn(s,r,2)}function Eh(r){var s=r.alternate;return r===Ce||s!==null&&s===Ce}function Bv(r,s){vo=ph=!0;var o=r.pending;o===null?s.next=s:(s.next=o.next,o.next=s),r.pending=s}function zv(r,s,o){if((o&4194048)!==0){var u=s.lanes;u&=r.pendingLanes,o|=u,s.lanes=o,El(r,o)}}var Th={readContext:an,use:gh,useCallback:wt,useContext:wt,useEffect:wt,useImperativeHandle:wt,useLayoutEffect:wt,useInsertionEffect:wt,useMemo:wt,useReducer:wt,useRef:wt,useState:wt,useDebugValue:wt,useDeferredValue:wt,useTransition:wt,useSyncExternalStore:wt,useId:wt,useHostTransitionStatus:wt,useFormState:wt,useActionState:wt,useOptimistic:wt,useMemoCache:wt,useCacheRefresh:wt},Fv={readContext:an,use:gh,useCallback:function(r,s){return En().memoizedState=[r,s===void 0?null:s],r},useContext:an,useEffect:bv,useImperativeHandle:function(r,s,o){o=o!=null?o.concat([r]):null,vh(4194308,4,Cv.bind(null,s,r),o)},useLayoutEffect:function(r,s){return vh(4194308,4,r,s)},useInsertionEffect:function(r,s){vh(4,2,r,s)},useMemo:function(r,s){var o=En();s=s===void 0?null:s;var u=r();if(va){Rn(!0);try{r()}finally{Rn(!1)}}return o.memoizedState=[u,s],u},useReducer:function(r,s,o){var u=En();if(o!==void 0){var f=o(s);if(va){Rn(!0);try{o(s)}finally{Rn(!1)}}}else f=s;return u.memoizedState=u.baseState=f,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:f},u.queue=r,r=r.dispatch=BI.bind(null,Ce,r),[u.memoizedState,r]},useRef:function(r){var s=En();return r={current:r},s.memoizedState=r},useState:function(r){r=Rp(r);var s=r.queue,o=Uv.bind(null,Ce,s);return s.dispatch=o,[r.memoizedState,o]},useDebugValue:Cp,useDeferredValue:function(r,s){var o=En();return Np(o,r,s)},useTransition:function(){var r=Rp(!1);return r=Pv.bind(null,Ce,r.queue,!0,!1),En().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,s,o){var u=Ce,f=En();if(Ke){if(o===void 0)throw Error(i(407));o=o()}else{if(o=s(),ot===null)throw Error(i(349));(Fe&124)!==0||lv(u,s,o)}f.memoizedState=o;var m={value:o,getSnapshot:s};return f.queue=m,bv(cv.bind(null,u,m,r),[r]),u.flags|=2048,To(9,_h(),uv.bind(null,u,m,o,s),null),o},useId:function(){var r=En(),s=ot.identifierPrefix;if(Ke){var o=hi,u=ci;o=(u&~(1<<32-sn(u)-1)).toString(32)+o,s="«"+s+"R"+o,o=mh++,0<o&&(s+="H"+o.toString(32)),s+="»"}else o=PI++,s="«"+s+"r"+o.toString(32)+"»";return r.memoizedState=s},useHostTransitionStatus:Op,useFormState:vv,useActionState:vv,useOptimistic:function(r){var s=En();s.memoizedState=s.baseState=r;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=o,s=Mp.bind(null,Ce,!0,o),o.dispatch=s,[r,s]},useMemoCache:wp,useCacheRefresh:function(){return En().memoizedState=UI.bind(null,Ce)}},qv={readContext:an,use:gh,useCallback:Dv,useContext:an,useEffect:Sv,useImperativeHandle:Nv,useInsertionEffect:Rv,useLayoutEffect:Iv,useMemo:Ov,useReducer:yh,useRef:wv,useState:function(){return yh(pi)},useDebugValue:Cp,useDeferredValue:function(r,s){var o=Dt();return Mv(o,et.memoizedState,r,s)},useTransition:function(){var r=yh(pi)[0],s=Dt().memoizedState;return[typeof r=="boolean"?r:Xl(r),s]},useSyncExternalStore:ov,useId:xv,useHostTransitionStatus:Op,useFormState:Ev,useActionState:Ev,useOptimistic:function(r,s){var o=Dt();return dv(o,et,r,s)},useMemoCache:wp,useCacheRefresh:Lv},zI={readContext:an,use:gh,useCallback:Dv,useContext:an,useEffect:Sv,useImperativeHandle:Nv,useInsertionEffect:Rv,useLayoutEffect:Iv,useMemo:Ov,useReducer:Sp,useRef:wv,useState:function(){return Sp(pi)},useDebugValue:Cp,useDeferredValue:function(r,s){var o=Dt();return et===null?Np(o,r,s):Mv(o,et.memoizedState,r,s)},useTransition:function(){var r=Sp(pi)[0],s=Dt().memoizedState;return[typeof r=="boolean"?r:Xl(r),s]},useSyncExternalStore:ov,useId:xv,useHostTransitionStatus:Op,useFormState:Av,useActionState:Av,useOptimistic:function(r,s){var o=Dt();return et!==null?dv(o,et,r,s):(o.baseState=r,[r,o.queue.dispatch])},useMemoCache:wp,useCacheRefresh:Lv},Ao=null,Jl=0;function Ah(r){var s=Jl;return Jl+=1,Ao===null&&(Ao=[]),J_(Ao,r,s)}function eu(r,s){s=s.props.ref,r.ref=s!==void 0?s:null}function wh(r,s){throw s.$$typeof===A?Error(i(525)):(r=Object.prototype.toString.call(s),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r)))}function jv(r){var s=r._init;return s(r._payload)}function Hv(r){function s(L,k){if(r){var z=L.deletions;z===null?(L.deletions=[k],L.flags|=16):z.push(k)}}function o(L,k){if(!r)return null;for(;k!==null;)s(L,k),k=k.sibling;return null}function u(L){for(var k=new Map;L!==null;)L.key!==null?k.set(L.key,L):k.set(L.index,L),L=L.sibling;return k}function f(L,k){return L=ui(L,k),L.index=0,L.sibling=null,L}function m(L,k,z){return L.index=z,r?(z=L.alternate,z!==null?(z=z.index,z<k?(L.flags|=67108866,k):z):(L.flags|=67108866,k)):(L.flags|=1048576,k)}function E(L){return r&&L.alternate===null&&(L.flags|=67108866),L}function w(L,k,z,Z){return k===null||k.tag!==6?(k=Jd(z,L.mode,Z),k.return=L,k):(k=f(k,z),k.return=L,k)}function I(L,k,z,Z){var fe=z.type;return fe===O?W(L,k,z.props.children,Z,z.key):k!==null&&(k.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===R&&jv(fe)===k.type)?(k=f(k,z.props),eu(k,z),k.return=L,k):(k=sh(z.type,z.key,z.props,null,L.mode,Z),eu(k,z),k.return=L,k)}function F(L,k,z,Z){return k===null||k.tag!==4||k.stateNode.containerInfo!==z.containerInfo||k.stateNode.implementation!==z.implementation?(k=ep(z,L.mode,Z),k.return=L,k):(k=f(k,z.children||[]),k.return=L,k)}function W(L,k,z,Z,fe){return k===null||k.tag!==7?(k=ha(z,L.mode,Z,fe),k.return=L,k):(k=f(k,z),k.return=L,k)}function J(L,k,z){if(typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint")return k=Jd(""+k,L.mode,z),k.return=L,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case T:return z=sh(k.type,k.key,k.props,null,L.mode,z),eu(z,k),z.return=L,z;case N:return k=ep(k,L.mode,z),k.return=L,k;case R:var Z=k._init;return k=Z(k._payload),J(L,k,z)}if(yt(k)||x(k))return k=ha(k,L.mode,z,null),k.return=L,k;if(typeof k.then=="function")return J(L,Ah(k),z);if(k.$$typeof===ne)return J(L,uh(L,k),z);wh(L,k)}return null}function q(L,k,z,Z){var fe=k!==null?k.key:null;if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return fe!==null?null:w(L,k,""+z,Z);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case T:return z.key===fe?I(L,k,z,Z):null;case N:return z.key===fe?F(L,k,z,Z):null;case R:return fe=z._init,z=fe(z._payload),q(L,k,z,Z)}if(yt(z)||x(z))return fe!==null?null:W(L,k,z,Z,null);if(typeof z.then=="function")return q(L,k,Ah(z),Z);if(z.$$typeof===ne)return q(L,k,uh(L,z),Z);wh(L,z)}return null}function j(L,k,z,Z,fe){if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return L=L.get(z)||null,w(k,L,""+Z,fe);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case T:return L=L.get(Z.key===null?z:Z.key)||null,I(k,L,Z,fe);case N:return L=L.get(Z.key===null?z:Z.key)||null,F(k,L,Z,fe);case R:var Me=Z._init;return Z=Me(Z._payload),j(L,k,z,Z,fe)}if(yt(Z)||x(Z))return L=L.get(z)||null,W(k,L,Z,fe,null);if(typeof Z.then=="function")return j(L,k,z,Ah(Z),fe);if(Z.$$typeof===ne)return j(L,k,z,uh(k,Z),fe);wh(k,Z)}return null}function be(L,k,z,Z){for(var fe=null,Me=null,pe=k,Te=k=0,$t=null;pe!==null&&Te<z.length;Te++){pe.index>Te?($t=pe,pe=null):$t=pe.sibling;var Ge=q(L,pe,z[Te],Z);if(Ge===null){pe===null&&(pe=$t);break}r&&pe&&Ge.alternate===null&&s(L,pe),k=m(Ge,k,Te),Me===null?fe=Ge:Me.sibling=Ge,Me=Ge,pe=$t}if(Te===z.length)return o(L,pe),Ke&&da(L,Te),fe;if(pe===null){for(;Te<z.length;Te++)pe=J(L,z[Te],Z),pe!==null&&(k=m(pe,k,Te),Me===null?fe=pe:Me.sibling=pe,Me=pe);return Ke&&da(L,Te),fe}for(pe=u(pe);Te<z.length;Te++)$t=j(pe,L,Te,z[Te],Z),$t!==null&&(r&&$t.alternate!==null&&pe.delete($t.key===null?Te:$t.key),k=m($t,k,Te),Me===null?fe=$t:Me.sibling=$t,Me=$t);return r&&pe.forEach(function(us){return s(L,us)}),Ke&&da(L,Te),fe}function ve(L,k,z,Z){if(z==null)throw Error(i(151));for(var fe=null,Me=null,pe=k,Te=k=0,$t=null,Ge=z.next();pe!==null&&!Ge.done;Te++,Ge=z.next()){pe.index>Te?($t=pe,pe=null):$t=pe.sibling;var us=q(L,pe,Ge.value,Z);if(us===null){pe===null&&(pe=$t);break}r&&pe&&us.alternate===null&&s(L,pe),k=m(us,k,Te),Me===null?fe=us:Me.sibling=us,Me=us,pe=$t}if(Ge.done)return o(L,pe),Ke&&da(L,Te),fe;if(pe===null){for(;!Ge.done;Te++,Ge=z.next())Ge=J(L,Ge.value,Z),Ge!==null&&(k=m(Ge,k,Te),Me===null?fe=Ge:Me.sibling=Ge,Me=Ge);return Ke&&da(L,Te),fe}for(pe=u(pe);!Ge.done;Te++,Ge=z.next())Ge=j(pe,L,Te,Ge.value,Z),Ge!==null&&(r&&Ge.alternate!==null&&pe.delete(Ge.key===null?Te:Ge.key),k=m(Ge,k,Te),Me===null?fe=Ge:Me.sibling=Ge,Me=Ge);return r&&pe.forEach(function(F1){return s(L,F1)}),Ke&&da(L,Te),fe}function nt(L,k,z,Z){if(typeof z=="object"&&z!==null&&z.type===O&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case T:e:{for(var fe=z.key;k!==null;){if(k.key===fe){if(fe=z.type,fe===O){if(k.tag===7){o(L,k.sibling),Z=f(k,z.props.children),Z.return=L,L=Z;break e}}else if(k.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===R&&jv(fe)===k.type){o(L,k.sibling),Z=f(k,z.props),eu(Z,z),Z.return=L,L=Z;break e}o(L,k);break}else s(L,k);k=k.sibling}z.type===O?(Z=ha(z.props.children,L.mode,Z,z.key),Z.return=L,L=Z):(Z=sh(z.type,z.key,z.props,null,L.mode,Z),eu(Z,z),Z.return=L,L=Z)}return E(L);case N:e:{for(fe=z.key;k!==null;){if(k.key===fe)if(k.tag===4&&k.stateNode.containerInfo===z.containerInfo&&k.stateNode.implementation===z.implementation){o(L,k.sibling),Z=f(k,z.children||[]),Z.return=L,L=Z;break e}else{o(L,k);break}else s(L,k);k=k.sibling}Z=ep(z,L.mode,Z),Z.return=L,L=Z}return E(L);case R:return fe=z._init,z=fe(z._payload),nt(L,k,z,Z)}if(yt(z))return be(L,k,z,Z);if(x(z)){if(fe=x(z),typeof fe!="function")throw Error(i(150));return z=fe.call(z),ve(L,k,z,Z)}if(typeof z.then=="function")return nt(L,k,Ah(z),Z);if(z.$$typeof===ne)return nt(L,k,uh(L,z),Z);wh(L,z)}return typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint"?(z=""+z,k!==null&&k.tag===6?(o(L,k.sibling),Z=f(k,z),Z.return=L,L=Z):(o(L,k),Z=Jd(z,L.mode,Z),Z.return=L,L=Z),E(L)):o(L,k)}return function(L,k,z,Z){try{Jl=0;var fe=nt(L,k,z,Z);return Ao=null,fe}catch(pe){if(pe===Hl||pe===hh)throw pe;var Me=Nn(29,pe,null,L.mode);return Me.lanes=Z,Me.return=L,Me}finally{}}}var wo=Hv(!0),Gv=Hv(!1),Wn=te(null),Or=null;function Yi(r){var s=r.alternate;re(Ut,Ut.current&1),re(Wn,r),Or===null&&(s===null||_o.current!==null||s.memoizedState!==null)&&(Or=r)}function $v(r){if(r.tag===22){if(re(Ut,Ut.current),re(Wn,r),Or===null){var s=r.alternate;s!==null&&s.memoizedState!==null&&(Or=r)}}else Qi()}function Qi(){re(Ut,Ut.current),re(Wn,Wn.current)}function mi(r){le(Wn),Or===r&&(Or=null),le(Ut)}var Ut=te(0);function bh(r){for(var s=r;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||Am(o)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function Pp(r,s,o,u){s=r.memoizedState,o=o(u,s),o=o==null?s:_({},s,o),r.memoizedState=o,r.lanes===0&&(r.updateQueue.baseState=o)}var Vp={enqueueSetState:function(r,s,o){r=r._reactInternals;var u=Pn(),f=Gi(u);f.payload=s,o!=null&&(f.callback=o),s=$i(r,f,u),s!==null&&(Vn(s,r,u),$l(s,r,u))},enqueueReplaceState:function(r,s,o){r=r._reactInternals;var u=Pn(),f=Gi(u);f.tag=1,f.payload=s,o!=null&&(f.callback=o),s=$i(r,f,u),s!==null&&(Vn(s,r,u),$l(s,r,u))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var o=Pn(),u=Gi(o);u.tag=2,s!=null&&(u.callback=s),s=$i(r,u,o),s!==null&&(Vn(s,r,o),$l(s,r,o))}};function Kv(r,s,o,u,f,m,E){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(u,m,E):s.prototype&&s.prototype.isPureReactComponent?!xl(o,u)||!xl(f,m):!0}function Yv(r,s,o,u){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,u),s.state!==r&&Vp.enqueueReplaceState(s,s.state,null)}function Ea(r,s){var o=s;if("ref"in s){o={};for(var u in s)u!=="ref"&&(o[u]=s[u])}if(r=r.defaultProps){o===s&&(o=_({},o));for(var f in r)o[f]===void 0&&(o[f]=r[f])}return o}var Sh=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)};function Qv(r){Sh(r)}function Xv(r){console.error(r)}function Wv(r){Sh(r)}function Rh(r,s){try{var o=r.onUncaughtError;o(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function Zv(r,s,o){try{var u=r.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function kp(r,s,o){return o=Gi(o),o.tag=3,o.payload={element:null},o.callback=function(){Rh(r,s)},o}function Jv(r){return r=Gi(r),r.tag=3,r}function eE(r,s,o,u){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var m=u.value;r.payload=function(){return f(m)},r.callback=function(){Zv(s,o,u)}}var E=o.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(r.callback=function(){Zv(s,o,u),typeof f!="function"&&(ts===null?ts=new Set([this]):ts.add(this));var w=u.stack;this.componentDidCatch(u.value,{componentStack:w!==null?w:""})})}function FI(r,s,o,u,f){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=o.alternate,s!==null&&Fl(s,o,f,!0),o=Wn.current,o!==null){switch(o.tag){case 13:return Or===null?sm():o.alternate===null&&Et===0&&(Et=3),o.flags&=-257,o.flags|=65536,o.lanes=f,u===cp?o.flags|=16384:(s=o.updateQueue,s===null?o.updateQueue=new Set([u]):s.add(u),om(r,u,f)),!1;case 22:return o.flags|=65536,u===cp?o.flags|=16384:(s=o.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=s):(o=s.retryQueue,o===null?s.retryQueue=new Set([u]):o.add(u)),om(r,u,f)),!1}throw Error(i(435,o.tag))}return om(r,u,f),sm(),!1}if(Ke)return s=Wn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=f,u!==rp&&(r=Error(i(422),{cause:u}),zl(Kn(r,o)))):(u!==rp&&(s=Error(i(423),{cause:u}),zl(Kn(s,o))),r=r.current.alternate,r.flags|=65536,f&=-f,r.lanes|=f,u=Kn(u,o),f=kp(r.stateNode,u,f),dp(r,f),Et!==4&&(Et=2)),!1;var m=Error(i(520),{cause:u});if(m=Kn(m,o),ou===null?ou=[m]:ou.push(m),Et!==4&&(Et=2),s===null)return!0;u=Kn(u,o),o=s;do{switch(o.tag){case 3:return o.flags|=65536,r=f&-f,o.lanes|=r,r=kp(o.stateNode,u,r),dp(o,r),!1;case 1:if(s=o.type,m=o.stateNode,(o.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(ts===null||!ts.has(m))))return o.flags|=65536,f&=-f,o.lanes|=f,f=Jv(f),eE(f,r,o,u),dp(o,f),!1}o=o.return}while(o!==null);return!1}var tE=Error(i(461)),Ht=!1;function Wt(r,s,o,u){s.child=r===null?Gv(s,null,o,u):wo(s,r.child,o,u)}function nE(r,s,o,u,f){o=o.render;var m=s.ref;if("ref"in u){var E={};for(var w in u)w!=="ref"&&(E[w]=u[w])}else E=u;return ya(s),u=_p(r,s,o,E,m,f),w=vp(),r!==null&&!Ht?(Ep(r,s,f),gi(r,s,f)):(Ke&&w&&tp(s),s.flags|=1,Wt(r,s,u,f),s.child)}function rE(r,s,o,u,f){if(r===null){var m=o.type;return typeof m=="function"&&!Zd(m)&&m.defaultProps===void 0&&o.compare===null?(s.tag=15,s.type=m,iE(r,s,m,u,f)):(r=sh(o.type,null,u,s,s.mode,f),r.ref=s.ref,r.return=s,s.child=r)}if(m=r.child,!jp(r,f)){var E=m.memoizedProps;if(o=o.compare,o=o!==null?o:xl,o(E,u)&&r.ref===s.ref)return gi(r,s,f)}return s.flags|=1,r=ui(m,u),r.ref=s.ref,r.return=s,s.child=r}function iE(r,s,o,u,f){if(r!==null){var m=r.memoizedProps;if(xl(m,u)&&r.ref===s.ref)if(Ht=!1,s.pendingProps=u=m,jp(r,f))(r.flags&131072)!==0&&(Ht=!0);else return s.lanes=r.lanes,gi(r,s,f)}return xp(r,s,o,u,f)}function sE(r,s,o){var u=s.pendingProps,f=u.children,m=r!==null?r.memoizedState:null;if(u.mode==="hidden"){if((s.flags&128)!==0){if(u=m!==null?m.baseLanes|o:o,r!==null){for(f=s.child=r.child,m=0;f!==null;)m=m|f.lanes|f.childLanes,f=f.sibling;s.childLanes=m&~u}else s.childLanes=0,s.child=null;return aE(r,s,u,o)}if((o&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},r!==null&&ch(s,m!==null?m.cachePool:null),m!==null?iv(s,m):mp(),$v(s);else return s.lanes=s.childLanes=536870912,aE(r,s,m!==null?m.baseLanes|o:o,o)}else m!==null?(ch(s,m.cachePool),iv(s,m),Qi(),s.memoizedState=null):(r!==null&&ch(s,null),mp(),Qi());return Wt(r,s,f,o),s.child}function aE(r,s,o,u){var f=up();return f=f===null?null:{parent:Lt._currentValue,pool:f},s.memoizedState={baseLanes:o,cachePool:f},r!==null&&ch(s,null),mp(),$v(s),r!==null&&Fl(r,s,u,!0),null}function Ih(r,s){var o=s.ref;if(o===null)r!==null&&r.ref!==null&&(s.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(i(284));(r===null||r.ref!==o)&&(s.flags|=4194816)}}function xp(r,s,o,u,f){return ya(s),o=_p(r,s,o,u,void 0,f),u=vp(),r!==null&&!Ht?(Ep(r,s,f),gi(r,s,f)):(Ke&&u&&tp(s),s.flags|=1,Wt(r,s,o,f),s.child)}function oE(r,s,o,u,f,m){return ya(s),s.updateQueue=null,o=av(s,u,o,f),sv(r),u=vp(),r!==null&&!Ht?(Ep(r,s,m),gi(r,s,m)):(Ke&&u&&tp(s),s.flags|=1,Wt(r,s,o,m),s.child)}function lE(r,s,o,u,f){if(ya(s),s.stateNode===null){var m=fo,E=o.contextType;typeof E=="object"&&E!==null&&(m=an(E)),m=new o(u,m),s.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Vp,s.stateNode=m,m._reactInternals=s,m=s.stateNode,m.props=u,m.state=s.memoizedState,m.refs={},hp(s),E=o.contextType,m.context=typeof E=="object"&&E!==null?an(E):fo,m.state=s.memoizedState,E=o.getDerivedStateFromProps,typeof E=="function"&&(Pp(s,o,E,u),m.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(E=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),E!==m.state&&Vp.enqueueReplaceState(m,m.state,null),Yl(s,u,m,f),Kl(),m.state=s.memoizedState),typeof m.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(r===null){m=s.stateNode;var w=s.memoizedProps,I=Ea(o,w);m.props=I;var F=m.context,W=o.contextType;E=fo,typeof W=="object"&&W!==null&&(E=an(W));var J=o.getDerivedStateFromProps;W=typeof J=="function"||typeof m.getSnapshotBeforeUpdate=="function",w=s.pendingProps!==w,W||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(w||F!==E)&&Yv(s,m,u,E),Hi=!1;var q=s.memoizedState;m.state=q,Yl(s,u,m,f),Kl(),F=s.memoizedState,w||q!==F||Hi?(typeof J=="function"&&(Pp(s,o,J,u),F=s.memoizedState),(I=Hi||Kv(s,o,I,u,q,F,E))?(W||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(s.flags|=4194308)):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=F),m.props=u,m.state=F,m.context=E,u=I):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{m=s.stateNode,fp(r,s),E=s.memoizedProps,W=Ea(o,E),m.props=W,J=s.pendingProps,q=m.context,F=o.contextType,I=fo,typeof F=="object"&&F!==null&&(I=an(F)),w=o.getDerivedStateFromProps,(F=typeof w=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(E!==J||q!==I)&&Yv(s,m,u,I),Hi=!1,q=s.memoizedState,m.state=q,Yl(s,u,m,f),Kl();var j=s.memoizedState;E!==J||q!==j||Hi||r!==null&&r.dependencies!==null&&lh(r.dependencies)?(typeof w=="function"&&(Pp(s,o,w,u),j=s.memoizedState),(W=Hi||Kv(s,o,W,u,q,j,I)||r!==null&&r.dependencies!==null&&lh(r.dependencies))?(F||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(u,j,I),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(u,j,I)),typeof m.componentDidUpdate=="function"&&(s.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof m.componentDidUpdate!="function"||E===r.memoizedProps&&q===r.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||E===r.memoizedProps&&q===r.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=j),m.props=u,m.state=j,m.context=I,u=W):(typeof m.componentDidUpdate!="function"||E===r.memoizedProps&&q===r.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||E===r.memoizedProps&&q===r.memoizedState||(s.flags|=1024),u=!1)}return m=u,Ih(r,s),u=(s.flags&128)!==0,m||u?(m=s.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:m.render(),s.flags|=1,r!==null&&u?(s.child=wo(s,r.child,null,f),s.child=wo(s,null,o,f)):Wt(r,s,o,f),s.memoizedState=m.state,r=s.child):r=gi(r,s,f),r}function uE(r,s,o,u){return Bl(),s.flags|=256,Wt(r,s,o,u),s.child}var Lp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Up(r){return{baseLanes:r,cachePool:X_()}}function Bp(r,s,o){return r=r!==null?r.childLanes&~o:0,s&&(r|=Zn),r}function cE(r,s,o){var u=s.pendingProps,f=!1,m=(s.flags&128)!==0,E;if((E=m)||(E=r!==null&&r.memoizedState===null?!1:(Ut.current&2)!==0),E&&(f=!0,s.flags&=-129),E=(s.flags&32)!==0,s.flags&=-33,r===null){if(Ke){if(f?Yi(s):Qi(),Ke){var w=vt,I;if(I=w){e:{for(I=w,w=Dr;I.nodeType!==8;){if(!w){w=null;break e}if(I=cr(I.nextSibling),I===null){w=null;break e}}w=I}w!==null?(s.memoizedState={dehydrated:w,treeContext:fa!==null?{id:ci,overflow:hi}:null,retryLane:536870912,hydrationErrors:null},I=Nn(18,null,null,0),I.stateNode=w,I.return=s,s.child=I,yn=s,vt=null,I=!0):I=!1}I||ma(s)}if(w=s.memoizedState,w!==null&&(w=w.dehydrated,w!==null))return Am(w)?s.lanes=32:s.lanes=536870912,null;mi(s)}return w=u.children,u=u.fallback,f?(Qi(),f=s.mode,w=Ch({mode:"hidden",children:w},f),u=ha(u,f,o,null),w.return=s,u.return=s,w.sibling=u,s.child=w,f=s.child,f.memoizedState=Up(o),f.childLanes=Bp(r,E,o),s.memoizedState=Lp,u):(Yi(s),zp(s,w))}if(I=r.memoizedState,I!==null&&(w=I.dehydrated,w!==null)){if(m)s.flags&256?(Yi(s),s.flags&=-257,s=Fp(r,s,o)):s.memoizedState!==null?(Qi(),s.child=r.child,s.flags|=128,s=null):(Qi(),f=u.fallback,w=s.mode,u=Ch({mode:"visible",children:u.children},w),f=ha(f,w,o,null),f.flags|=2,u.return=s,f.return=s,u.sibling=f,s.child=u,wo(s,r.child,null,o),u=s.child,u.memoizedState=Up(o),u.childLanes=Bp(r,E,o),s.memoizedState=Lp,s=f);else if(Yi(s),Am(w)){if(E=w.nextSibling&&w.nextSibling.dataset,E)var F=E.dgst;E=F,u=Error(i(419)),u.stack="",u.digest=E,zl({value:u,source:null,stack:null}),s=Fp(r,s,o)}else if(Ht||Fl(r,s,o,!1),E=(o&r.childLanes)!==0,Ht||E){if(E=ot,E!==null&&(u=o&-o,u=(u&42)!==0?1:xi(u),u=(u&(E.suspendedLanes|o))!==0?0:u,u!==0&&u!==I.retryLane))throw I.retryLane=u,ho(r,u),Vn(E,r,u),tE;w.data==="$?"||sm(),s=Fp(r,s,o)}else w.data==="$?"?(s.flags|=192,s.child=r.child,s=null):(r=I.treeContext,vt=cr(w.nextSibling),yn=s,Ke=!0,pa=null,Dr=!1,r!==null&&(Qn[Xn++]=ci,Qn[Xn++]=hi,Qn[Xn++]=fa,ci=r.id,hi=r.overflow,fa=s),s=zp(s,u.children),s.flags|=4096);return s}return f?(Qi(),f=u.fallback,w=s.mode,I=r.child,F=I.sibling,u=ui(I,{mode:"hidden",children:u.children}),u.subtreeFlags=I.subtreeFlags&65011712,F!==null?f=ui(F,f):(f=ha(f,w,o,null),f.flags|=2),f.return=s,u.return=s,u.sibling=f,s.child=u,u=f,f=s.child,w=r.child.memoizedState,w===null?w=Up(o):(I=w.cachePool,I!==null?(F=Lt._currentValue,I=I.parent!==F?{parent:F,pool:F}:I):I=X_(),w={baseLanes:w.baseLanes|o,cachePool:I}),f.memoizedState=w,f.childLanes=Bp(r,E,o),s.memoizedState=Lp,u):(Yi(s),o=r.child,r=o.sibling,o=ui(o,{mode:"visible",children:u.children}),o.return=s,o.sibling=null,r!==null&&(E=s.deletions,E===null?(s.deletions=[r],s.flags|=16):E.push(r)),s.child=o,s.memoizedState=null,o)}function zp(r,s){return s=Ch({mode:"visible",children:s},r.mode),s.return=r,r.child=s}function Ch(r,s){return r=Nn(22,r,null,s),r.lanes=0,r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},r}function Fp(r,s,o){return wo(s,r.child,null,o),r=zp(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function hE(r,s,o){r.lanes|=s;var u=r.alternate;u!==null&&(u.lanes|=s),sp(r.return,s,o)}function qp(r,s,o,u,f){var m=r.memoizedState;m===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:f}:(m.isBackwards=s,m.rendering=null,m.renderingStartTime=0,m.last=u,m.tail=o,m.tailMode=f)}function fE(r,s,o){var u=s.pendingProps,f=u.revealOrder,m=u.tail;if(Wt(r,s,u.children,o),u=Ut.current,(u&2)!==0)u=u&1|2,s.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&hE(r,o,s);else if(r.tag===19)hE(r,o,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}u&=1}switch(re(Ut,u),f){case"forwards":for(o=s.child,f=null;o!==null;)r=o.alternate,r!==null&&bh(r)===null&&(f=o),o=o.sibling;o=f,o===null?(f=s.child,s.child=null):(f=o.sibling,o.sibling=null),qp(s,!1,f,o,m);break;case"backwards":for(o=null,f=s.child,s.child=null;f!==null;){if(r=f.alternate,r!==null&&bh(r)===null){s.child=f;break}r=f.sibling,f.sibling=o,o=f,f=r}qp(s,!0,o,null,m);break;case"together":qp(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function gi(r,s,o){if(r!==null&&(s.dependencies=r.dependencies),es|=s.lanes,(o&s.childLanes)===0)if(r!==null){if(Fl(r,s,o,!1),(o&s.childLanes)===0)return null}else return null;if(r!==null&&s.child!==r.child)throw Error(i(153));if(s.child!==null){for(r=s.child,o=ui(r,r.pendingProps),s.child=o,o.return=s;r.sibling!==null;)r=r.sibling,o=o.sibling=ui(r,r.pendingProps),o.return=s;o.sibling=null}return s.child}function jp(r,s){return(r.lanes&s)!==0?!0:(r=r.dependencies,!!(r!==null&&lh(r)))}function qI(r,s,o){switch(s.tag){case 3:at(s,s.stateNode.containerInfo),ji(s,Lt,r.memoizedState.cache),Bl();break;case 27:case 5:ki(s);break;case 4:at(s,s.stateNode.containerInfo);break;case 10:ji(s,s.type,s.memoizedProps.value);break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?(Yi(s),s.flags|=128,null):(o&s.child.childLanes)!==0?cE(r,s,o):(Yi(s),r=gi(r,s,o),r!==null?r.sibling:null);Yi(s);break;case 19:var f=(r.flags&128)!==0;if(u=(o&s.childLanes)!==0,u||(Fl(r,s,o,!1),u=(o&s.childLanes)!==0),f){if(u)return fE(r,s,o);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),re(Ut,Ut.current),u)break;return null;case 22:case 23:return s.lanes=0,sE(r,s,o);case 24:ji(s,Lt,r.memoizedState.cache)}return gi(r,s,o)}function dE(r,s,o){if(r!==null)if(r.memoizedProps!==s.pendingProps)Ht=!0;else{if(!jp(r,o)&&(s.flags&128)===0)return Ht=!1,qI(r,s,o);Ht=(r.flags&131072)!==0}else Ht=!1,Ke&&(s.flags&1048576)!==0&&j_(s,oh,s.index);switch(s.lanes=0,s.tag){case 16:e:{r=s.pendingProps;var u=s.elementType,f=u._init;if(u=f(u._payload),s.type=u,typeof u=="function")Zd(u)?(r=Ea(u,r),s.tag=1,s=lE(null,s,u,r,o)):(s.tag=0,s=xp(null,s,u,r,o));else{if(u!=null){if(f=u.$$typeof,f===he){s.tag=11,s=nE(null,s,u,r,o);break e}else if(f===P){s.tag=14,s=rE(null,s,u,r,o);break e}}throw s=Tt(u)||u,Error(i(306,s,""))}}return s;case 0:return xp(r,s,s.type,s.pendingProps,o);case 1:return u=s.type,f=Ea(u,s.pendingProps),lE(r,s,u,f,o);case 3:e:{if(at(s,s.stateNode.containerInfo),r===null)throw Error(i(387));u=s.pendingProps;var m=s.memoizedState;f=m.element,fp(r,s),Yl(s,u,null,o);var E=s.memoizedState;if(u=E.cache,ji(s,Lt,u),u!==m.cache&&ap(s,[Lt],o,!0),Kl(),u=E.element,m.isDehydrated)if(m={element:u,isDehydrated:!1,cache:E.cache},s.updateQueue.baseState=m,s.memoizedState=m,s.flags&256){s=uE(r,s,u,o);break e}else if(u!==f){f=Kn(Error(i(424)),s),zl(f),s=uE(r,s,u,o);break e}else{switch(r=s.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(vt=cr(r.firstChild),yn=s,Ke=!0,pa=null,Dr=!0,o=Gv(s,null,u,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(Bl(),u===f){s=gi(r,s,o);break e}Wt(r,s,u,o)}s=s.child}return s;case 26:return Ih(r,s),r===null?(o=yT(s.type,null,s.pendingProps,null))?s.memoizedState=o:Ke||(o=s.type,r=s.pendingProps,u=qh(Se.current).createElement(o),u[Vt]=s,u[It]=r,Jt(u,o,r),At(u),s.stateNode=u):s.memoizedState=yT(s.type,r.memoizedProps,s.pendingProps,r.memoizedState),null;case 27:return ki(s),r===null&&Ke&&(u=s.stateNode=pT(s.type,s.pendingProps,Se.current),yn=s,Dr=!0,f=vt,is(s.type)?(wm=f,vt=cr(u.firstChild)):vt=f),Wt(r,s,s.pendingProps.children,o),Ih(r,s),r===null&&(s.flags|=4194304),s.child;case 5:return r===null&&Ke&&((f=u=vt)&&(u=g1(u,s.type,s.pendingProps,Dr),u!==null?(s.stateNode=u,yn=s,vt=cr(u.firstChild),Dr=!1,f=!0):f=!1),f||ma(s)),ki(s),f=s.type,m=s.pendingProps,E=r!==null?r.memoizedProps:null,u=m.children,vm(f,m)?u=null:E!==null&&vm(f,E)&&(s.flags|=32),s.memoizedState!==null&&(f=_p(r,s,VI,null,null,o),gu._currentValue=f),Ih(r,s),Wt(r,s,u,o),s.child;case 6:return r===null&&Ke&&((r=o=vt)&&(o=y1(o,s.pendingProps,Dr),o!==null?(s.stateNode=o,yn=s,vt=null,r=!0):r=!1),r||ma(s)),null;case 13:return cE(r,s,o);case 4:return at(s,s.stateNode.containerInfo),u=s.pendingProps,r===null?s.child=wo(s,null,u,o):Wt(r,s,u,o),s.child;case 11:return nE(r,s,s.type,s.pendingProps,o);case 7:return Wt(r,s,s.pendingProps,o),s.child;case 8:return Wt(r,s,s.pendingProps.children,o),s.child;case 12:return Wt(r,s,s.pendingProps.children,o),s.child;case 10:return u=s.pendingProps,ji(s,s.type,u.value),Wt(r,s,u.children,o),s.child;case 9:return f=s.type._context,u=s.pendingProps.children,ya(s),f=an(f),u=u(f),s.flags|=1,Wt(r,s,u,o),s.child;case 14:return rE(r,s,s.type,s.pendingProps,o);case 15:return iE(r,s,s.type,s.pendingProps,o);case 19:return fE(r,s,o);case 31:return u=s.pendingProps,o=s.mode,u={mode:u.mode,children:u.children},r===null?(o=Ch(u,o),o.ref=s.ref,s.child=o,o.return=s,s=o):(o=ui(r.child,u),o.ref=s.ref,s.child=o,o.return=s,s=o),s;case 22:return sE(r,s,o);case 24:return ya(s),u=an(Lt),r===null?(f=up(),f===null&&(f=ot,m=op(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=o),f=m),s.memoizedState={parent:u,cache:f},hp(s),ji(s,Lt,f)):((r.lanes&o)!==0&&(fp(r,s),Yl(s,null,null,o),Kl()),f=r.memoizedState,m=s.memoizedState,f.parent!==u?(f={parent:u,cache:u},s.memoizedState=f,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=f),ji(s,Lt,u)):(u=m.cache,ji(s,Lt,u),u!==f.cache&&ap(s,[Lt],o,!0))),Wt(r,s,s.pendingProps.children,o),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function yi(r){r.flags|=4}function pE(r,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!AT(s)){if(s=Wn.current,s!==null&&((Fe&4194048)===Fe?Or!==null:(Fe&62914560)!==Fe&&(Fe&536870912)===0||s!==Or))throw Gl=cp,W_;r.flags|=8192}}function Nh(r,s){s!==null&&(r.flags|=4),r.flags&16384&&(s=r.tag!==22?_l():536870912,r.lanes|=s,Io|=s)}function tu(r,s){if(!Ke)switch(r.tailMode){case"hidden":s=r.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?r.tail=null:o.sibling=null;break;case"collapsed":o=r.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:u.sibling=null}}function ft(r){var s=r.alternate!==null&&r.alternate.child===r.child,o=0,u=0;if(s)for(var f=r.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags&65011712,u|=f.flags&65011712,f.return=r,f=f.sibling;else for(f=r.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=r,f=f.sibling;return r.subtreeFlags|=u,r.childLanes=o,s}function jI(r,s,o){var u=s.pendingProps;switch(np(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ft(s),null;case 1:return ft(s),null;case 3:return o=s.stateNode,u=null,r!==null&&(u=r.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),di(Lt),_r(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(r===null||r.child===null)&&(Ul(s)?yi(s):r===null||r.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,$_())),ft(s),null;case 26:return o=s.memoizedState,r===null?(yi(s),o!==null?(ft(s),pE(s,o)):(ft(s),s.flags&=-16777217)):o?o!==r.memoizedState?(yi(s),ft(s),pE(s,o)):(ft(s),s.flags&=-16777217):(r.memoizedProps!==u&&yi(s),ft(s),s.flags&=-16777217),null;case 27:Xr(s),o=Se.current;var f=s.type;if(r!==null&&s.stateNode!=null)r.memoizedProps!==u&&yi(s);else{if(!u){if(s.stateNode===null)throw Error(i(166));return ft(s),null}r=ye.current,Ul(s)?H_(s):(r=pT(f,u,o),s.stateNode=r,yi(s))}return ft(s),null;case 5:if(Xr(s),o=s.type,r!==null&&s.stateNode!=null)r.memoizedProps!==u&&yi(s);else{if(!u){if(s.stateNode===null)throw Error(i(166));return ft(s),null}if(r=ye.current,Ul(s))H_(s);else{switch(f=qh(Se.current),r){case 1:r=f.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:r=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":r=f.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":r=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":r=f.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof u.is=="string"?f.createElement("select",{is:u.is}):f.createElement("select"),u.multiple?r.multiple=!0:u.size&&(r.size=u.size);break;default:r=typeof u.is=="string"?f.createElement(o,{is:u.is}):f.createElement(o)}}r[Vt]=s,r[It]=u;e:for(f=s.child;f!==null;){if(f.tag===5||f.tag===6)r.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===s)break e;for(;f.sibling===null;){if(f.return===null||f.return===s)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}s.stateNode=r;e:switch(Jt(r,o,u),o){case"button":case"input":case"select":case"textarea":r=!!u.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&yi(s)}}return ft(s),s.flags&=-16777217,null;case 6:if(r&&s.stateNode!=null)r.memoizedProps!==u&&yi(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(i(166));if(r=Se.current,Ul(s)){if(r=s.stateNode,o=s.memoizedProps,u=null,f=yn,f!==null)switch(f.tag){case 27:case 5:u=f.memoizedProps}r[Vt]=s,r=!!(r.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||oT(r.nodeValue,o)),r||ma(s)}else r=qh(r).createTextNode(u),r[Vt]=s,s.stateNode=r}return ft(s),null;case 13:if(u=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(f=Ul(s),u!==null&&u.dehydrated!==null){if(r===null){if(!f)throw Error(i(318));if(f=s.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(i(317));f[Vt]=s}else Bl(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;ft(s),f=!1}else f=$_(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=f),f=!0;if(!f)return s.flags&256?(mi(s),s):(mi(s),null)}if(mi(s),(s.flags&128)!==0)return s.lanes=o,s;if(o=u!==null,r=r!==null&&r.memoizedState!==null,o){u=s.child,f=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(f=u.alternate.memoizedState.cachePool.pool);var m=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),m!==f&&(u.flags|=2048)}return o!==r&&o&&(s.child.flags|=8192),Nh(s,s.updateQueue),ft(s),null;case 4:return _r(),r===null&&pm(s.stateNode.containerInfo),ft(s),null;case 10:return di(s.type),ft(s),null;case 19:if(le(Ut),f=s.memoizedState,f===null)return ft(s),null;if(u=(s.flags&128)!==0,m=f.rendering,m===null)if(u)tu(f,!1);else{if(Et!==0||r!==null&&(r.flags&128)!==0)for(r=s.child;r!==null;){if(m=bh(r),m!==null){for(s.flags|=128,tu(f,!1),r=m.updateQueue,s.updateQueue=r,Nh(s,r),s.subtreeFlags=0,r=o,o=s.child;o!==null;)q_(o,r),o=o.sibling;return re(Ut,Ut.current&1|2),s.child}r=r.sibling}f.tail!==null&&Fn()>Mh&&(s.flags|=128,u=!0,tu(f,!1),s.lanes=4194304)}else{if(!u)if(r=bh(m),r!==null){if(s.flags|=128,u=!0,r=r.updateQueue,s.updateQueue=r,Nh(s,r),tu(f,!0),f.tail===null&&f.tailMode==="hidden"&&!m.alternate&&!Ke)return ft(s),null}else 2*Fn()-f.renderingStartTime>Mh&&o!==536870912&&(s.flags|=128,u=!0,tu(f,!1),s.lanes=4194304);f.isBackwards?(m.sibling=s.child,s.child=m):(r=f.last,r!==null?r.sibling=m:s.child=m,f.last=m)}return f.tail!==null?(s=f.tail,f.rendering=s,f.tail=s.sibling,f.renderingStartTime=Fn(),s.sibling=null,r=Ut.current,re(Ut,u?r&1|2:r&1),s):(ft(s),null);case 22:case 23:return mi(s),gp(),u=s.memoizedState!==null,r!==null?r.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(o&536870912)!==0&&(s.flags&128)===0&&(ft(s),s.subtreeFlags&6&&(s.flags|=8192)):ft(s),o=s.updateQueue,o!==null&&Nh(s,o.retryQueue),o=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==o&&(s.flags|=2048),r!==null&&le(_a),null;case 24:return o=null,r!==null&&(o=r.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),di(Lt),ft(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function HI(r,s){switch(np(s),s.tag){case 1:return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return di(Lt),_r(),r=s.flags,(r&65536)!==0&&(r&128)===0?(s.flags=r&-65537|128,s):null;case 26:case 27:case 5:return Xr(s),null;case 13:if(mi(s),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(i(340));Bl()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return le(Ut),null;case 4:return _r(),null;case 10:return di(s.type),null;case 22:case 23:return mi(s),gp(),r!==null&&le(_a),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 24:return di(Lt),null;case 25:return null;default:return null}}function mE(r,s){switch(np(s),s.tag){case 3:di(Lt),_r();break;case 26:case 27:case 5:Xr(s);break;case 4:_r();break;case 13:mi(s);break;case 19:le(Ut);break;case 10:di(s.type);break;case 22:case 23:mi(s),gp(),r!==null&&le(_a);break;case 24:di(Lt)}}function nu(r,s){try{var o=s.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var f=u.next;o=f;do{if((o.tag&r)===r){u=void 0;var m=o.create,E=o.inst;u=m(),E.destroy=u}o=o.next}while(o!==f)}}catch(w){it(s,s.return,w)}}function Xi(r,s,o){try{var u=s.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var m=f.next;u=m;do{if((u.tag&r)===r){var E=u.inst,w=E.destroy;if(w!==void 0){E.destroy=void 0,f=s;var I=o,F=w;try{F()}catch(W){it(f,I,W)}}}u=u.next}while(u!==m)}}catch(W){it(s,s.return,W)}}function gE(r){var s=r.updateQueue;if(s!==null){var o=r.stateNode;try{rv(s,o)}catch(u){it(r,r.return,u)}}}function yE(r,s,o){o.props=Ea(r.type,r.memoizedProps),o.state=r.memoizedState;try{o.componentWillUnmount()}catch(u){it(r,s,u)}}function ru(r,s){try{var o=r.ref;if(o!==null){switch(r.tag){case 26:case 27:case 5:var u=r.stateNode;break;case 30:u=r.stateNode;break;default:u=r.stateNode}typeof o=="function"?r.refCleanup=o(u):o.current=u}}catch(f){it(r,s,f)}}function Mr(r,s){var o=r.ref,u=r.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(f){it(r,s,f)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){it(r,s,f)}else o.current=null}function _E(r){var s=r.type,o=r.memoizedProps,u=r.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(f){it(r,r.return,f)}}function Hp(r,s,o){try{var u=r.stateNode;h1(u,r.type,o,s),u[It]=s}catch(f){it(r,r.return,f)}}function vE(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&is(r.type)||r.tag===4}function Gp(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||vE(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&is(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function $p(r,s,o){var u=r.tag;if(u===5||u===6)r=r.stateNode,s?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(r,s):(s=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,s.appendChild(r),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=Fh));else if(u!==4&&(u===27&&is(r.type)&&(o=r.stateNode,s=null),r=r.child,r!==null))for($p(r,s,o),r=r.sibling;r!==null;)$p(r,s,o),r=r.sibling}function Dh(r,s,o){var u=r.tag;if(u===5||u===6)r=r.stateNode,s?o.insertBefore(r,s):o.appendChild(r);else if(u!==4&&(u===27&&is(r.type)&&(o=r.stateNode),r=r.child,r!==null))for(Dh(r,s,o),r=r.sibling;r!==null;)Dh(r,s,o),r=r.sibling}function EE(r){var s=r.stateNode,o=r.memoizedProps;try{for(var u=r.type,f=s.attributes;f.length;)s.removeAttributeNode(f[0]);Jt(s,u,o),s[Vt]=r,s[It]=o}catch(m){it(r,r.return,m)}}var _i=!1,bt=!1,Kp=!1,TE=typeof WeakSet=="function"?WeakSet:Set,Gt=null;function GI(r,s){if(r=r.containerInfo,ym=Yh,r=M_(r),Gd(r)){if("selectionStart"in r)var o={start:r.selectionStart,end:r.selectionEnd};else e:{o=(o=r.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var f=u.anchorOffset,m=u.focusNode;u=u.focusOffset;try{o.nodeType,m.nodeType}catch{o=null;break e}var E=0,w=-1,I=-1,F=0,W=0,J=r,q=null;t:for(;;){for(var j;J!==o||f!==0&&J.nodeType!==3||(w=E+f),J!==m||u!==0&&J.nodeType!==3||(I=E+u),J.nodeType===3&&(E+=J.nodeValue.length),(j=J.firstChild)!==null;)q=J,J=j;for(;;){if(J===r)break t;if(q===o&&++F===f&&(w=E),q===m&&++W===u&&(I=E),(j=J.nextSibling)!==null)break;J=q,q=J.parentNode}J=j}o=w===-1||I===-1?null:{start:w,end:I}}else o=null}o=o||{start:0,end:0}}else o=null;for(_m={focusedElem:r,selectionRange:o},Yh=!1,Gt=s;Gt!==null;)if(s=Gt,r=s.child,(s.subtreeFlags&1024)!==0&&r!==null)r.return=s,Gt=r;else for(;Gt!==null;){switch(s=Gt,m=s.alternate,r=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((r&1024)!==0&&m!==null){r=void 0,o=s,f=m.memoizedProps,m=m.memoizedState,u=o.stateNode;try{var be=Ea(o.type,f,o.elementType===o.type);r=u.getSnapshotBeforeUpdate(be,m),u.__reactInternalSnapshotBeforeUpdate=r}catch(ve){it(o,o.return,ve)}}break;case 3:if((r&1024)!==0){if(r=s.stateNode.containerInfo,o=r.nodeType,o===9)Tm(r);else if(o===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":Tm(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=s.sibling,r!==null){r.return=s.return,Gt=r;break}Gt=s.return}}function AE(r,s,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:Wi(r,o),u&4&&nu(5,o);break;case 1:if(Wi(r,o),u&4)if(r=o.stateNode,s===null)try{r.componentDidMount()}catch(E){it(o,o.return,E)}else{var f=Ea(o.type,s.memoizedProps);s=s.memoizedState;try{r.componentDidUpdate(f,s,r.__reactInternalSnapshotBeforeUpdate)}catch(E){it(o,o.return,E)}}u&64&&gE(o),u&512&&ru(o,o.return);break;case 3:if(Wi(r,o),u&64&&(r=o.updateQueue,r!==null)){if(s=null,o.child!==null)switch(o.child.tag){case 27:case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}try{rv(r,s)}catch(E){it(o,o.return,E)}}break;case 27:s===null&&u&4&&EE(o);case 26:case 5:Wi(r,o),s===null&&u&4&&_E(o),u&512&&ru(o,o.return);break;case 12:Wi(r,o);break;case 13:Wi(r,o),u&4&&SE(r,o),u&64&&(r=o.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(o=e1.bind(null,o),_1(r,o))));break;case 22:if(u=o.memoizedState!==null||_i,!u){s=s!==null&&s.memoizedState!==null||bt,f=_i;var m=bt;_i=u,(bt=s)&&!m?Zi(r,o,(o.subtreeFlags&8772)!==0):Wi(r,o),_i=f,bt=m}break;case 30:break;default:Wi(r,o)}}function wE(r){var s=r.alternate;s!==null&&(r.alternate=null,wE(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&Bi(s)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var ht=null,Tn=!1;function vi(r,s,o){for(o=o.child;o!==null;)bE(r,s,o),o=o.sibling}function bE(r,s,o){if(Xe&&typeof Xe.onCommitFiberUnmount=="function")try{Xe.onCommitFiberUnmount(_t,o)}catch{}switch(o.tag){case 26:bt||Mr(o,s),vi(r,s,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:bt||Mr(o,s);var u=ht,f=Tn;is(o.type)&&(ht=o.stateNode,Tn=!1),vi(r,s,o),fu(o.stateNode),ht=u,Tn=f;break;case 5:bt||Mr(o,s);case 6:if(u=ht,f=Tn,ht=null,vi(r,s,o),ht=u,Tn=f,ht!==null)if(Tn)try{(ht.nodeType===9?ht.body:ht.nodeName==="HTML"?ht.ownerDocument.body:ht).removeChild(o.stateNode)}catch(m){it(o,s,m)}else try{ht.removeChild(o.stateNode)}catch(m){it(o,s,m)}break;case 18:ht!==null&&(Tn?(r=ht,fT(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,o.stateNode),Eu(r)):fT(ht,o.stateNode));break;case 4:u=ht,f=Tn,ht=o.stateNode.containerInfo,Tn=!0,vi(r,s,o),ht=u,Tn=f;break;case 0:case 11:case 14:case 15:bt||Xi(2,o,s),bt||Xi(4,o,s),vi(r,s,o);break;case 1:bt||(Mr(o,s),u=o.stateNode,typeof u.componentWillUnmount=="function"&&yE(o,s,u)),vi(r,s,o);break;case 21:vi(r,s,o);break;case 22:bt=(u=bt)||o.memoizedState!==null,vi(r,s,o),bt=u;break;default:vi(r,s,o)}}function SE(r,s){if(s.memoizedState===null&&(r=s.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{Eu(r)}catch(o){it(s,s.return,o)}}function $I(r){switch(r.tag){case 13:case 19:var s=r.stateNode;return s===null&&(s=r.stateNode=new TE),s;case 22:return r=r.stateNode,s=r._retryCache,s===null&&(s=r._retryCache=new TE),s;default:throw Error(i(435,r.tag))}}function Yp(r,s){var o=$I(r);s.forEach(function(u){var f=t1.bind(null,r,u);o.has(u)||(o.add(u),u.then(f,f))})}function Dn(r,s){var o=s.deletions;if(o!==null)for(var u=0;u<o.length;u++){var f=o[u],m=r,E=s,w=E;e:for(;w!==null;){switch(w.tag){case 27:if(is(w.type)){ht=w.stateNode,Tn=!1;break e}break;case 5:ht=w.stateNode,Tn=!1;break e;case 3:case 4:ht=w.stateNode.containerInfo,Tn=!0;break e}w=w.return}if(ht===null)throw Error(i(160));bE(m,E,f),ht=null,Tn=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)RE(s,r),s=s.sibling}var ur=null;function RE(r,s){var o=r.alternate,u=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:Dn(s,r),On(r),u&4&&(Xi(3,r,r.return),nu(3,r),Xi(5,r,r.return));break;case 1:Dn(s,r),On(r),u&512&&(bt||o===null||Mr(o,o.return)),u&64&&_i&&(r=r.updateQueue,r!==null&&(u=r.callbacks,u!==null&&(o=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var f=ur;if(Dn(s,r),On(r),u&512&&(bt||o===null||Mr(o,o.return)),u&4){var m=o!==null?o.memoizedState:null;if(u=r.memoizedState,o===null)if(u===null)if(r.stateNode===null){e:{u=r.type,o=r.memoizedProps,f=f.ownerDocument||f;t:switch(u){case"title":m=f.getElementsByTagName("title")[0],(!m||m[Qs]||m[Vt]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(u),f.head.insertBefore(m,f.querySelector("head > title"))),Jt(m,u,o),m[Vt]=r,At(m),u=m;break e;case"link":var E=ET("link","href",f).get(u+(o.href||""));if(E){for(var w=0;w<E.length;w++)if(m=E[w],m.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&m.getAttribute("rel")===(o.rel==null?null:o.rel)&&m.getAttribute("title")===(o.title==null?null:o.title)&&m.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){E.splice(w,1);break t}}m=f.createElement(u),Jt(m,u,o),f.head.appendChild(m);break;case"meta":if(E=ET("meta","content",f).get(u+(o.content||""))){for(w=0;w<E.length;w++)if(m=E[w],m.getAttribute("content")===(o.content==null?null:""+o.content)&&m.getAttribute("name")===(o.name==null?null:o.name)&&m.getAttribute("property")===(o.property==null?null:o.property)&&m.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&m.getAttribute("charset")===(o.charSet==null?null:o.charSet)){E.splice(w,1);break t}}m=f.createElement(u),Jt(m,u,o),f.head.appendChild(m);break;default:throw Error(i(468,u))}m[Vt]=r,At(m),u=m}r.stateNode=u}else TT(f,r.type,r.stateNode);else r.stateNode=vT(f,u,r.memoizedProps);else m!==u?(m===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):m.count--,u===null?TT(f,r.type,r.stateNode):vT(f,u,r.memoizedProps)):u===null&&r.stateNode!==null&&Hp(r,r.memoizedProps,o.memoizedProps)}break;case 27:Dn(s,r),On(r),u&512&&(bt||o===null||Mr(o,o.return)),o!==null&&u&4&&Hp(r,r.memoizedProps,o.memoizedProps);break;case 5:if(Dn(s,r),On(r),u&512&&(bt||o===null||Mr(o,o.return)),r.flags&32){f=r.stateNode;try{jn(f,"")}catch(j){it(r,r.return,j)}}u&4&&r.stateNode!=null&&(f=r.memoizedProps,Hp(r,f,o!==null?o.memoizedProps:f)),u&1024&&(Kp=!0);break;case 6:if(Dn(s,r),On(r),u&4){if(r.stateNode===null)throw Error(i(162));u=r.memoizedProps,o=r.stateNode;try{o.nodeValue=u}catch(j){it(r,r.return,j)}}break;case 3:if(Gh=null,f=ur,ur=jh(s.containerInfo),Dn(s,r),ur=f,On(r),u&4&&o!==null&&o.memoizedState.isDehydrated)try{Eu(s.containerInfo)}catch(j){it(r,r.return,j)}Kp&&(Kp=!1,IE(r));break;case 4:u=ur,ur=jh(r.stateNode.containerInfo),Dn(s,r),On(r),ur=u;break;case 12:Dn(s,r),On(r);break;case 13:Dn(s,r),On(r),r.child.flags&8192&&r.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(em=Fn()),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,Yp(r,u)));break;case 22:f=r.memoizedState!==null;var I=o!==null&&o.memoizedState!==null,F=_i,W=bt;if(_i=F||f,bt=W||I,Dn(s,r),bt=W,_i=F,On(r),u&8192)e:for(s=r.stateNode,s._visibility=f?s._visibility&-2:s._visibility|1,f&&(o===null||I||_i||bt||Ta(r)),o=null,s=r;;){if(s.tag===5||s.tag===26){if(o===null){I=o=s;try{if(m=I.stateNode,f)E=m.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{w=I.stateNode;var J=I.memoizedProps.style,q=J!=null&&J.hasOwnProperty("display")?J.display:null;w.style.display=q==null||typeof q=="boolean"?"":(""+q).trim()}}catch(j){it(I,I.return,j)}}}else if(s.tag===6){if(o===null){I=s;try{I.stateNode.nodeValue=f?"":I.memoizedProps}catch(j){it(I,I.return,j)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===r)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break e;for(;s.sibling===null;){if(s.return===null||s.return===r)break e;o===s&&(o=null),s=s.return}o===s&&(o=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=r.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,Yp(r,o))));break;case 19:Dn(s,r),On(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,Yp(r,u)));break;case 30:break;case 21:break;default:Dn(s,r),On(r)}}function On(r){var s=r.flags;if(s&2){try{for(var o,u=r.return;u!==null;){if(vE(u)){o=u;break}u=u.return}if(o==null)throw Error(i(160));switch(o.tag){case 27:var f=o.stateNode,m=Gp(r);Dh(r,m,f);break;case 5:var E=o.stateNode;o.flags&32&&(jn(E,""),o.flags&=-33);var w=Gp(r);Dh(r,w,E);break;case 3:case 4:var I=o.stateNode.containerInfo,F=Gp(r);$p(r,F,I);break;default:throw Error(i(161))}}catch(W){it(r,r.return,W)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function IE(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var s=r;IE(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),r=r.sibling}}function Wi(r,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)AE(r,s.alternate,s),s=s.sibling}function Ta(r){for(r=r.child;r!==null;){var s=r;switch(s.tag){case 0:case 11:case 14:case 15:Xi(4,s,s.return),Ta(s);break;case 1:Mr(s,s.return);var o=s.stateNode;typeof o.componentWillUnmount=="function"&&yE(s,s.return,o),Ta(s);break;case 27:fu(s.stateNode);case 26:case 5:Mr(s,s.return),Ta(s);break;case 22:s.memoizedState===null&&Ta(s);break;case 30:Ta(s);break;default:Ta(s)}r=r.sibling}}function Zi(r,s,o){for(o=o&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,f=r,m=s,E=m.flags;switch(m.tag){case 0:case 11:case 15:Zi(f,m,o),nu(4,m);break;case 1:if(Zi(f,m,o),u=m,f=u.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(F){it(u,u.return,F)}if(u=m,f=u.updateQueue,f!==null){var w=u.stateNode;try{var I=f.shared.hiddenCallbacks;if(I!==null)for(f.shared.hiddenCallbacks=null,f=0;f<I.length;f++)nv(I[f],w)}catch(F){it(u,u.return,F)}}o&&E&64&&gE(m),ru(m,m.return);break;case 27:EE(m);case 26:case 5:Zi(f,m,o),o&&u===null&&E&4&&_E(m),ru(m,m.return);break;case 12:Zi(f,m,o);break;case 13:Zi(f,m,o),o&&E&4&&SE(f,m);break;case 22:m.memoizedState===null&&Zi(f,m,o),ru(m,m.return);break;case 30:break;default:Zi(f,m,o)}s=s.sibling}}function Qp(r,s){var o=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),r=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(r=s.memoizedState.cachePool.pool),r!==o&&(r!=null&&r.refCount++,o!=null&&ql(o))}function Xp(r,s){r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&ql(r))}function Pr(r,s,o,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)CE(r,s,o,u),s=s.sibling}function CE(r,s,o,u){var f=s.flags;switch(s.tag){case 0:case 11:case 15:Pr(r,s,o,u),f&2048&&nu(9,s);break;case 1:Pr(r,s,o,u);break;case 3:Pr(r,s,o,u),f&2048&&(r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&ql(r)));break;case 12:if(f&2048){Pr(r,s,o,u),r=s.stateNode;try{var m=s.memoizedProps,E=m.id,w=m.onPostCommit;typeof w=="function"&&w(E,s.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(I){it(s,s.return,I)}}else Pr(r,s,o,u);break;case 13:Pr(r,s,o,u);break;case 23:break;case 22:m=s.stateNode,E=s.alternate,s.memoizedState!==null?m._visibility&2?Pr(r,s,o,u):iu(r,s):m._visibility&2?Pr(r,s,o,u):(m._visibility|=2,bo(r,s,o,u,(s.subtreeFlags&10256)!==0)),f&2048&&Qp(E,s);break;case 24:Pr(r,s,o,u),f&2048&&Xp(s.alternate,s);break;default:Pr(r,s,o,u)}}function bo(r,s,o,u,f){for(f=f&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var m=r,E=s,w=o,I=u,F=E.flags;switch(E.tag){case 0:case 11:case 15:bo(m,E,w,I,f),nu(8,E);break;case 23:break;case 22:var W=E.stateNode;E.memoizedState!==null?W._visibility&2?bo(m,E,w,I,f):iu(m,E):(W._visibility|=2,bo(m,E,w,I,f)),f&&F&2048&&Qp(E.alternate,E);break;case 24:bo(m,E,w,I,f),f&&F&2048&&Xp(E.alternate,E);break;default:bo(m,E,w,I,f)}s=s.sibling}}function iu(r,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var o=r,u=s,f=u.flags;switch(u.tag){case 22:iu(o,u),f&2048&&Qp(u.alternate,u);break;case 24:iu(o,u),f&2048&&Xp(u.alternate,u);break;default:iu(o,u)}s=s.sibling}}var su=8192;function So(r){if(r.subtreeFlags&su)for(r=r.child;r!==null;)NE(r),r=r.sibling}function NE(r){switch(r.tag){case 26:So(r),r.flags&su&&r.memoizedState!==null&&O1(ur,r.memoizedState,r.memoizedProps);break;case 5:So(r);break;case 3:case 4:var s=ur;ur=jh(r.stateNode.containerInfo),So(r),ur=s;break;case 22:r.memoizedState===null&&(s=r.alternate,s!==null&&s.memoizedState!==null?(s=su,su=16777216,So(r),su=s):So(r));break;default:So(r)}}function DE(r){var s=r.alternate;if(s!==null&&(r=s.child,r!==null)){s.child=null;do s=r.sibling,r.sibling=null,r=s;while(r!==null)}}function au(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];Gt=u,ME(u,r)}DE(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)OE(r),r=r.sibling}function OE(r){switch(r.tag){case 0:case 11:case 15:au(r),r.flags&2048&&Xi(9,r,r.return);break;case 3:au(r);break;case 12:au(r);break;case 22:var s=r.stateNode;r.memoizedState!==null&&s._visibility&2&&(r.return===null||r.return.tag!==13)?(s._visibility&=-3,Oh(r)):au(r);break;default:au(r)}}function Oh(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];Gt=u,ME(u,r)}DE(r)}for(r=r.child;r!==null;){switch(s=r,s.tag){case 0:case 11:case 15:Xi(8,s,s.return),Oh(s);break;case 22:o=s.stateNode,o._visibility&2&&(o._visibility&=-3,Oh(s));break;default:Oh(s)}r=r.sibling}}function ME(r,s){for(;Gt!==null;){var o=Gt;switch(o.tag){case 0:case 11:case 15:Xi(8,o,s);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:ql(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,Gt=u;else e:for(o=r;Gt!==null;){u=Gt;var f=u.sibling,m=u.return;if(wE(u),u===o){Gt=null;break e}if(f!==null){f.return=m,Gt=f;break e}Gt=m}}}var KI={getCacheForType:function(r){var s=an(Lt),o=s.data.get(r);return o===void 0&&(o=r(),s.data.set(r,o)),o}},YI=typeof WeakMap=="function"?WeakMap:Map,We=0,ot=null,Pe=null,Fe=0,Ze=0,Mn=null,Ji=!1,Ro=!1,Wp=!1,Ei=0,Et=0,es=0,Aa=0,Zp=0,Zn=0,Io=0,ou=null,An=null,Jp=!1,em=0,Mh=1/0,Ph=null,ts=null,Zt=0,ns=null,Co=null,No=0,tm=0,nm=null,PE=null,lu=0,rm=null;function Pn(){if((We&2)!==0&&Fe!==0)return Fe&-Fe;if(X.T!==null){var r=go;return r!==0?r:cm()}return Li()}function VE(){Zn===0&&(Zn=(Fe&536870912)===0||Ke?yl():536870912);var r=Wn.current;return r!==null&&(r.flags|=32),Zn}function Vn(r,s,o){(r===ot&&(Ze===2||Ze===9)||r.cancelPendingCommit!==null)&&(Do(r,0),rs(r,Fe,Zn,!1)),Zr(r,o),((We&2)===0||r!==ot)&&(r===ot&&((We&2)===0&&(Aa|=o),Et===4&&rs(r,Fe,Zn,!1)),Vr(r))}function kE(r,s,o){if((We&6)!==0)throw Error(i(327));var u=!o&&(s&124)===0&&(s&r.expiredLanes)===0||Ys(r,s),f=u?WI(r,s):am(r,s,!0),m=u;do{if(f===0){Ro&&!u&&rs(r,s,0,!1);break}else{if(o=r.current.alternate,m&&!QI(o)){f=am(r,s,!1),m=!1;continue}if(f===2){if(m=s,r.errorRecoveryDisabledLanes&m)var E=0;else E=r.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){s=E;e:{var w=r;f=ou;var I=w.current.memoizedState.isDehydrated;if(I&&(Do(w,E).flags|=256),E=am(w,E,!1),E!==2){if(Wp&&!I){w.errorRecoveryDisabledLanes|=m,Aa|=m,f=4;break e}m=An,An=f,m!==null&&(An===null?An=m:An.push.apply(An,m))}f=E}if(m=!1,f!==2)continue}}if(f===1){Do(r,0),rs(r,s,0,!0);break}e:{switch(u=r,m=f,m){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:rs(u,s,Zn,!Ji);break e;case 2:An=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(f=em+300-Fn(),10<f)){if(rs(u,s,Zn,!Ji),$a(u,0,!0)!==0)break e;u.timeoutHandle=cT(xE.bind(null,u,o,An,Ph,Jp,s,Zn,Aa,Io,Ji,m,2,-0,0),f);break e}xE(u,o,An,Ph,Jp,s,Zn,Aa,Io,Ji,m,0,-0,0)}}break}while(!0);Vr(r)}function xE(r,s,o,u,f,m,E,w,I,F,W,J,q,j){if(r.timeoutHandle=-1,J=s.subtreeFlags,(J&8192||(J&16785408)===16785408)&&(mu={stylesheets:null,count:0,unsuspend:D1},NE(s),J=M1(),J!==null)){r.cancelPendingCommit=J(jE.bind(null,r,s,m,o,u,f,E,w,I,W,1,q,j)),rs(r,m,E,!F);return}jE(r,s,m,o,u,f,E,w,I)}function QI(r){for(var s=r;;){var o=s.tag;if((o===0||o===11||o===15)&&s.flags&16384&&(o=s.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var f=o[u],m=f.getSnapshot;f=f.value;try{if(!Cn(m(),f))return!1}catch{return!1}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function rs(r,s,o,u){s&=~Zp,s&=~Aa,r.suspendedLanes|=s,r.pingedLanes&=~s,u&&(r.warmLanes|=s),u=r.expirationTimes;for(var f=s;0<f;){var m=31-sn(f),E=1<<m;u[m]=-1,f&=~E}o!==0&&vr(r,o,s)}function Vh(){return(We&6)===0?(uu(0),!1):!0}function im(){if(Pe!==null){if(Ze===0)var r=Pe.return;else r=Pe,fi=ga=null,Tp(r),Ao=null,Jl=0,r=Pe;for(;r!==null;)mE(r.alternate,r),r=r.return;Pe=null}}function Do(r,s){var o=r.timeoutHandle;o!==-1&&(r.timeoutHandle=-1,d1(o)),o=r.cancelPendingCommit,o!==null&&(r.cancelPendingCommit=null,o()),im(),ot=r,Pe=o=ui(r.current,null),Fe=s,Ze=0,Mn=null,Ji=!1,Ro=Ys(r,s),Wp=!1,Io=Zn=Zp=Aa=es=Et=0,An=ou=null,Jp=!1,(s&8)!==0&&(s|=s&32);var u=r.entangledLanes;if(u!==0)for(r=r.entanglements,u&=s;0<u;){var f=31-sn(u),m=1<<f;s|=r[f],u&=~m}return Ei=s,nh(),o}function LE(r,s){Ce=null,X.H=Th,s===Hl||s===hh?(s=ev(),Ze=3):s===W_?(s=ev(),Ze=4):Ze=s===tE?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Mn=s,Pe===null&&(Et=1,Rh(r,Kn(s,r.current)))}function UE(){var r=X.H;return X.H=Th,r===null?Th:r}function BE(){var r=X.A;return X.A=KI,r}function sm(){Et=4,Ji||(Fe&4194048)!==Fe&&Wn.current!==null||(Ro=!0),(es&134217727)===0&&(Aa&134217727)===0||ot===null||rs(ot,Fe,Zn,!1)}function am(r,s,o){var u=We;We|=2;var f=UE(),m=BE();(ot!==r||Fe!==s)&&(Ph=null,Do(r,s)),s=!1;var E=Et;e:do try{if(Ze!==0&&Pe!==null){var w=Pe,I=Mn;switch(Ze){case 8:im(),E=6;break e;case 3:case 2:case 9:case 6:Wn.current===null&&(s=!0);var F=Ze;if(Ze=0,Mn=null,Oo(r,w,I,F),o&&Ro){E=0;break e}break;default:F=Ze,Ze=0,Mn=null,Oo(r,w,I,F)}}XI(),E=Et;break}catch(W){LE(r,W)}while(!0);return s&&r.shellSuspendCounter++,fi=ga=null,We=u,X.H=f,X.A=m,Pe===null&&(ot=null,Fe=0,nh()),E}function XI(){for(;Pe!==null;)zE(Pe)}function WI(r,s){var o=We;We|=2;var u=UE(),f=BE();ot!==r||Fe!==s?(Ph=null,Mh=Fn()+500,Do(r,s)):Ro=Ys(r,s);e:do try{if(Ze!==0&&Pe!==null){s=Pe;var m=Mn;t:switch(Ze){case 1:Ze=0,Mn=null,Oo(r,s,m,1);break;case 2:case 9:if(Z_(m)){Ze=0,Mn=null,FE(s);break}s=function(){Ze!==2&&Ze!==9||ot!==r||(Ze=7),Vr(r)},m.then(s,s);break e;case 3:Ze=7;break e;case 4:Ze=5;break e;case 7:Z_(m)?(Ze=0,Mn=null,FE(s)):(Ze=0,Mn=null,Oo(r,s,m,7));break;case 5:var E=null;switch(Pe.tag){case 26:E=Pe.memoizedState;case 5:case 27:var w=Pe;if(!E||AT(E)){Ze=0,Mn=null;var I=w.sibling;if(I!==null)Pe=I;else{var F=w.return;F!==null?(Pe=F,kh(F)):Pe=null}break t}}Ze=0,Mn=null,Oo(r,s,m,5);break;case 6:Ze=0,Mn=null,Oo(r,s,m,6);break;case 8:im(),Et=6;break e;default:throw Error(i(462))}}ZI();break}catch(W){LE(r,W)}while(!0);return fi=ga=null,X.H=u,X.A=f,We=o,Pe!==null?0:(ot=null,Fe=0,nh(),Et)}function ZI(){for(;Pe!==null&&!dl();)zE(Pe)}function zE(r){var s=dE(r.alternate,r,Ei);r.memoizedProps=r.pendingProps,s===null?kh(r):Pe=s}function FE(r){var s=r,o=s.alternate;switch(s.tag){case 15:case 0:s=oE(o,s,s.pendingProps,s.type,void 0,Fe);break;case 11:s=oE(o,s,s.pendingProps,s.type.render,s.ref,Fe);break;case 5:Tp(s);default:mE(o,s),s=Pe=q_(s,Ei),s=dE(o,s,Ei)}r.memoizedProps=r.pendingProps,s===null?kh(r):Pe=s}function Oo(r,s,o,u){fi=ga=null,Tp(s),Ao=null,Jl=0;var f=s.return;try{if(FI(r,f,s,o,Fe)){Et=1,Rh(r,Kn(o,r.current)),Pe=null;return}}catch(m){if(f!==null)throw Pe=f,m;Et=1,Rh(r,Kn(o,r.current)),Pe=null;return}s.flags&32768?(Ke||u===1?r=!0:Ro||(Fe&536870912)!==0?r=!1:(Ji=r=!0,(u===2||u===9||u===3||u===6)&&(u=Wn.current,u!==null&&u.tag===13&&(u.flags|=16384))),qE(s,r)):kh(s)}function kh(r){var s=r;do{if((s.flags&32768)!==0){qE(s,Ji);return}r=s.return;var o=jI(s.alternate,s,Ei);if(o!==null){Pe=o;return}if(s=s.sibling,s!==null){Pe=s;return}Pe=s=r}while(s!==null);Et===0&&(Et=5)}function qE(r,s){do{var o=HI(r.alternate,r);if(o!==null){o.flags&=32767,Pe=o;return}if(o=r.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!s&&(r=r.sibling,r!==null)){Pe=r;return}Pe=r=o}while(r!==null);Et=6,Pe=null}function jE(r,s,o,u,f,m,E,w,I){r.cancelPendingCommit=null;do xh();while(Zt!==0);if((We&6)!==0)throw Error(i(327));if(s!==null){if(s===r.current)throw Error(i(177));if(m=s.lanes|s.childLanes,m|=Xd,vl(r,o,m,E,w,I),r===ot&&(Pe=ot=null,Fe=0),Co=s,ns=r,No=o,tm=m,nm=f,PE=u,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,n1(Hs,function(){return YE(),null})):(r.callbackNode=null,r.callbackPriority=0),u=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||u){u=X.T,X.T=null,f=oe.p,oe.p=2,E=We,We|=4;try{GI(r,s,o)}finally{We=E,oe.p=f,X.T=u}}Zt=1,HE(),GE(),$E()}}function HE(){if(Zt===1){Zt=0;var r=ns,s=Co,o=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||o){o=X.T,X.T=null;var u=oe.p;oe.p=2;var f=We;We|=4;try{RE(s,r);var m=_m,E=M_(r.containerInfo),w=m.focusedElem,I=m.selectionRange;if(E!==w&&w&&w.ownerDocument&&O_(w.ownerDocument.documentElement,w)){if(I!==null&&Gd(w)){var F=I.start,W=I.end;if(W===void 0&&(W=F),"selectionStart"in w)w.selectionStart=F,w.selectionEnd=Math.min(W,w.value.length);else{var J=w.ownerDocument||document,q=J&&J.defaultView||window;if(q.getSelection){var j=q.getSelection(),be=w.textContent.length,ve=Math.min(I.start,be),nt=I.end===void 0?ve:Math.min(I.end,be);!j.extend&&ve>nt&&(E=nt,nt=ve,ve=E);var L=D_(w,ve),k=D_(w,nt);if(L&&k&&(j.rangeCount!==1||j.anchorNode!==L.node||j.anchorOffset!==L.offset||j.focusNode!==k.node||j.focusOffset!==k.offset)){var z=J.createRange();z.setStart(L.node,L.offset),j.removeAllRanges(),ve>nt?(j.addRange(z),j.extend(k.node,k.offset)):(z.setEnd(k.node,k.offset),j.addRange(z))}}}}for(J=[],j=w;j=j.parentNode;)j.nodeType===1&&J.push({element:j,left:j.scrollLeft,top:j.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<J.length;w++){var Z=J[w];Z.element.scrollLeft=Z.left,Z.element.scrollTop=Z.top}}Yh=!!ym,_m=ym=null}finally{We=f,oe.p=u,X.T=o}}r.current=s,Zt=2}}function GE(){if(Zt===2){Zt=0;var r=ns,s=Co,o=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||o){o=X.T,X.T=null;var u=oe.p;oe.p=2;var f=We;We|=4;try{AE(r,s.alternate,s)}finally{We=f,oe.p=u,X.T=o}}Zt=3}}function $E(){if(Zt===4||Zt===3){Zt=0,Oc();var r=ns,s=Co,o=No,u=PE;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Zt=5:(Zt=0,Co=ns=null,KE(r,r.pendingLanes));var f=r.pendingLanes;if(f===0&&(ts=null),Ka(o),s=s.stateNode,Xe&&typeof Xe.onCommitFiberRoot=="function")try{Xe.onCommitFiberRoot(_t,s,void 0,(s.current.flags&128)===128)}catch{}if(u!==null){s=X.T,f=oe.p,oe.p=2,X.T=null;try{for(var m=r.onRecoverableError,E=0;E<u.length;E++){var w=u[E];m(w.value,{componentStack:w.stack})}}finally{X.T=s,oe.p=f}}(No&3)!==0&&xh(),Vr(r),f=r.pendingLanes,(o&4194090)!==0&&(f&42)!==0?r===rm?lu++:(lu=0,rm=r):lu=0,uu(0)}}function KE(r,s){(r.pooledCacheLanes&=s)===0&&(s=r.pooledCache,s!=null&&(r.pooledCache=null,ql(s)))}function xh(r){return HE(),GE(),$E(),YE()}function YE(){if(Zt!==5)return!1;var r=ns,s=tm;tm=0;var o=Ka(No),u=X.T,f=oe.p;try{oe.p=32>o?32:o,X.T=null,o=nm,nm=null;var m=ns,E=No;if(Zt=0,Co=ns=null,No=0,(We&6)!==0)throw Error(i(331));var w=We;if(We|=4,OE(m.current),CE(m,m.current,E,o),We=w,uu(0,!1),Xe&&typeof Xe.onPostCommitFiberRoot=="function")try{Xe.onPostCommitFiberRoot(_t,m)}catch{}return!0}finally{oe.p=f,X.T=u,KE(r,s)}}function QE(r,s,o){s=Kn(o,s),s=kp(r.stateNode,s,2),r=$i(r,s,2),r!==null&&(Zr(r,2),Vr(r))}function it(r,s,o){if(r.tag===3)QE(r,r,o);else for(;s!==null;){if(s.tag===3){QE(s,r,o);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(ts===null||!ts.has(u))){r=Kn(o,r),o=Jv(2),u=$i(s,o,2),u!==null&&(eE(o,u,s,r),Zr(u,2),Vr(u));break}}s=s.return}}function om(r,s,o){var u=r.pingCache;if(u===null){u=r.pingCache=new YI;var f=new Set;u.set(s,f)}else f=u.get(s),f===void 0&&(f=new Set,u.set(s,f));f.has(o)||(Wp=!0,f.add(o),r=JI.bind(null,r,s,o),s.then(r,r))}function JI(r,s,o){var u=r.pingCache;u!==null&&u.delete(s),r.pingedLanes|=r.suspendedLanes&o,r.warmLanes&=~o,ot===r&&(Fe&o)===o&&(Et===4||Et===3&&(Fe&62914560)===Fe&&300>Fn()-em?(We&2)===0&&Do(r,0):Zp|=o,Io===Fe&&(Io=0)),Vr(r)}function XE(r,s){s===0&&(s=_l()),r=ho(r,s),r!==null&&(Zr(r,s),Vr(r))}function e1(r){var s=r.memoizedState,o=0;s!==null&&(o=s.retryLane),XE(r,o)}function t1(r,s){var o=0;switch(r.tag){case 13:var u=r.stateNode,f=r.memoizedState;f!==null&&(o=f.retryLane);break;case 19:u=r.stateNode;break;case 22:u=r.stateNode._retryCache;break;default:throw Error(i(314))}u!==null&&u.delete(s),XE(r,o)}function n1(r,s){return qs(r,s)}var Lh=null,Mo=null,lm=!1,Uh=!1,um=!1,wa=0;function Vr(r){r!==Mo&&r.next===null&&(Mo===null?Lh=Mo=r:Mo=Mo.next=r),Uh=!0,lm||(lm=!0,i1())}function uu(r,s){if(!um&&Uh){um=!0;do for(var o=!1,u=Lh;u!==null;){if(r!==0){var f=u.pendingLanes;if(f===0)var m=0;else{var E=u.suspendedLanes,w=u.pingedLanes;m=(1<<31-sn(42|r)+1)-1,m&=f&~(E&~w),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(o=!0,eT(u,m))}else m=Fe,m=$a(u,u===ot?m:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(m&3)===0||Ys(u,m)||(o=!0,eT(u,m));u=u.next}while(o);um=!1}}function r1(){WE()}function WE(){Uh=lm=!1;var r=0;wa!==0&&(f1()&&(r=wa),wa=0);for(var s=Fn(),o=null,u=Lh;u!==null;){var f=u.next,m=ZE(u,s);m===0?(u.next=null,o===null?Lh=f:o.next=f,f===null&&(Mo=o)):(o=u,(r!==0||(m&3)!==0)&&(Uh=!0)),u=f}uu(r)}function ZE(r,s){for(var o=r.suspendedLanes,u=r.pingedLanes,f=r.expirationTimes,m=r.pendingLanes&-62914561;0<m;){var E=31-sn(m),w=1<<E,I=f[E];I===-1?((w&o)===0||(w&u)!==0)&&(f[E]=gl(w,s)):I<=s&&(r.expiredLanes|=w),m&=~w}if(s=ot,o=Fe,o=$a(r,r===s?o:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u=r.callbackNode,o===0||r===s&&(Ze===2||Ze===9)||r.cancelPendingCommit!==null)return u!==null&&u!==null&&js(u),r.callbackNode=null,r.callbackPriority=0;if((o&3)===0||Ys(r,o)){if(s=o&-o,s===r.callbackPriority)return s;switch(u!==null&&js(u),Ka(o)){case 2:case 8:o=Ha;break;case 32:o=Hs;break;case 268435456:o=Ga;break;default:o=Hs}return u=JE.bind(null,r),o=qs(o,u),r.callbackPriority=s,r.callbackNode=o,s}return u!==null&&u!==null&&js(u),r.callbackPriority=2,r.callbackNode=null,2}function JE(r,s){if(Zt!==0&&Zt!==5)return r.callbackNode=null,r.callbackPriority=0,null;var o=r.callbackNode;if(xh()&&r.callbackNode!==o)return null;var u=Fe;return u=$a(r,r===ot?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u===0?null:(kE(r,u,s),ZE(r,Fn()),r.callbackNode!=null&&r.callbackNode===o?JE.bind(null,r):null)}function eT(r,s){if(xh())return null;kE(r,s,!0)}function i1(){p1(function(){(We&6)!==0?qs(pl,r1):WE()})}function cm(){return wa===0&&(wa=yl()),wa}function tT(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:Ja(""+r)}function nT(r,s){var o=s.ownerDocument.createElement("input");return o.name=s.name,o.value=s.value,r.id&&o.setAttribute("form",r.id),s.parentNode.insertBefore(o,s),r=new FormData(r),o.parentNode.removeChild(o),r}function s1(r,s,o,u,f){if(s==="submit"&&o&&o.stateNode===f){var m=tT((f[It]||null).action),E=u.submitter;E&&(s=(s=E[It]||null)?tT(s.formAction):E.getAttribute("formAction"),s!==null&&(m=s,E=null));var w=new eo("action","action",null,u,f);r.push({event:w,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(wa!==0){var I=E?nT(f,E):new FormData(f);Dp(o,{pending:!0,data:I,method:f.method,action:m},null,I)}}else typeof m=="function"&&(w.preventDefault(),I=E?nT(f,E):new FormData(f),Dp(o,{pending:!0,data:I,method:f.method,action:m},m,I))},currentTarget:f}]})}}for(var hm=0;hm<Qd.length;hm++){var fm=Qd[hm],a1=fm.toLowerCase(),o1=fm[0].toUpperCase()+fm.slice(1);lr(a1,"on"+o1)}lr(k_,"onAnimationEnd"),lr(x_,"onAnimationIteration"),lr(L_,"onAnimationStart"),lr("dblclick","onDoubleClick"),lr("focusin","onFocus"),lr("focusout","onBlur"),lr(bI,"onTransitionRun"),lr(SI,"onTransitionStart"),lr(RI,"onTransitionCancel"),lr(U_,"onTransitionEnd"),ei("onMouseEnter",["mouseout","mouseover"]),ei("onMouseLeave",["mouseout","mouseover"]),ei("onPointerEnter",["pointerout","pointerover"]),ei("onPointerLeave",["pointerout","pointerover"]),ar("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ar("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ar("onBeforeInput",["compositionend","keypress","textInput","paste"]),ar("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ar("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ar("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var cu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),l1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(cu));function rT(r,s){s=(s&4)!==0;for(var o=0;o<r.length;o++){var u=r[o],f=u.event;u=u.listeners;e:{var m=void 0;if(s)for(var E=u.length-1;0<=E;E--){var w=u[E],I=w.instance,F=w.currentTarget;if(w=w.listener,I!==m&&f.isPropagationStopped())break e;m=w,f.currentTarget=F;try{m(f)}catch(W){Sh(W)}f.currentTarget=null,m=I}else for(E=0;E<u.length;E++){if(w=u[E],I=w.instance,F=w.currentTarget,w=w.listener,I!==m&&f.isPropagationStopped())break e;m=w,f.currentTarget=F;try{m(f)}catch(W){Sh(W)}f.currentTarget=null,m=I}}}}function Ve(r,s){var o=s[Tl];o===void 0&&(o=s[Tl]=new Set);var u=r+"__bubble";o.has(u)||(iT(s,r,2,!1),o.add(u))}function dm(r,s,o){var u=0;s&&(u|=4),iT(o,r,u,s)}var Bh="_reactListening"+Math.random().toString(36).slice(2);function pm(r){if(!r[Bh]){r[Bh]=!0,Al.forEach(function(o){o!=="selectionchange"&&(l1.has(o)||dm(o,!1,r),dm(o,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[Bh]||(s[Bh]=!0,dm("selectionchange",!1,s))}}function iT(r,s,o,u){switch(CT(s)){case 2:var f=k1;break;case 8:f=x1;break;default:f=Cm}o=f.bind(null,s,o,r),f=void 0,!Gn||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),u?f!==void 0?r.addEventListener(s,o,{capture:!0,passive:f}):r.addEventListener(s,o,!0):f!==void 0?r.addEventListener(s,o,{passive:f}):r.addEventListener(s,o,!1)}function mm(r,s,o,u,f){var m=u;if((s&1)===0&&(s&2)===0&&u!==null)e:for(;;){if(u===null)return;var E=u.tag;if(E===3||E===4){var w=u.stateNode.containerInfo;if(w===f)break;if(E===4)for(E=u.return;E!==null;){var I=E.tag;if((I===3||I===4)&&E.stateNode.containerInfo===f)return;E=E.return}for(;w!==null;){if(E=Jr(w),E===null)return;if(I=E.tag,I===5||I===6||I===26||I===27){u=m=E;continue e}w=w.parentNode}}u=u.return}Fc(function(){var F=m,W=Hn(o),J=[];e:{var q=B_.get(r);if(q!==void 0){var j=eo,be=r;switch(r){case"keypress":if(Sr(o)===0)break e;case"keydown":case"keyup":j=ao;break;case"focusin":be="focus",j=ro;break;case"focusout":be="blur",j=ro;break;case"beforeblur":case"afterblur":j=ro;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":j=$n;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":j=Fd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":j=Qc;break;case k_:case x_:case L_:j=io;break;case U_:j=Wc;break;case"scroll":case"scrollend":j=qc;break;case"wheel":j=oo;break;case"copy":case"cut":case"paste":j=so;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":j=Vl;break;case"toggle":case"beforetoggle":j=Jc}var ve=(s&4)!==0,nt=!ve&&(r==="scroll"||r==="scrollend"),L=ve?q!==null?q+"Capture":null:q;ve=[];for(var k=F,z;k!==null;){var Z=k;if(z=Z.stateNode,Z=Z.tag,Z!==5&&Z!==26&&Z!==27||z===null||L===null||(Z=na(k,L),Z!=null&&ve.push(hu(k,Z,z))),nt)break;k=k.return}0<ve.length&&(q=new j(q,be,null,o,W),J.push({event:q,listeners:ve}))}}if((s&7)===0){e:{if(q=r==="mouseover"||r==="pointerover",j=r==="mouseout"||r==="pointerout",q&&o!==ri&&(be=o.relatedTarget||o.fromElement)&&(Jr(be)||be[qn]))break e;if((j||q)&&(q=W.window===W?W:(q=W.ownerDocument)?q.defaultView||q.parentWindow:window,j?(be=o.relatedTarget||o.toElement,j=F,be=be?Jr(be):null,be!==null&&(nt=l(be),ve=be.tag,be!==nt||ve!==5&&ve!==27&&ve!==6)&&(be=null)):(j=null,be=F),j!==be)){if(ve=$n,Z="onMouseLeave",L="onMouseEnter",k="mouse",(r==="pointerout"||r==="pointerover")&&(ve=Vl,Z="onPointerLeave",L="onPointerEnter",k="pointer"),nt=j==null?q:Tr(j),z=be==null?q:Tr(be),q=new ve(Z,k+"leave",j,o,W),q.target=nt,q.relatedTarget=z,Z=null,Jr(W)===F&&(ve=new ve(L,k+"enter",be,o,W),ve.target=z,ve.relatedTarget=nt,Z=ve),nt=Z,j&&be)t:{for(ve=j,L=be,k=0,z=ve;z;z=Po(z))k++;for(z=0,Z=L;Z;Z=Po(Z))z++;for(;0<k-z;)ve=Po(ve),k--;for(;0<z-k;)L=Po(L),z--;for(;k--;){if(ve===L||L!==null&&ve===L.alternate)break t;ve=Po(ve),L=Po(L)}ve=null}else ve=null;j!==null&&sT(J,q,j,ve,!1),be!==null&&nt!==null&&sT(J,nt,be,ve,!0)}}e:{if(q=F?Tr(F):window,j=q.nodeName&&q.nodeName.toLowerCase(),j==="select"||j==="input"&&q.type==="file")var fe=b_;else if(xt(q))if(S_)fe=TI;else{fe=vI;var Me=_I}else j=q.nodeName,!j||j.toLowerCase()!=="input"||q.type!=="checkbox"&&q.type!=="radio"?F&&Il(F.elementType)&&(fe=b_):fe=EI;if(fe&&(fe=fe(r,F))){li(J,fe,o,W);break e}Me&&Me(r,q,F),r==="focusout"&&F&&q.type==="number"&&F.memoizedProps.value!=null&&Fi(q,"number",q.value)}switch(Me=F?Tr(F):window,r){case"focusin":(xt(Me)||Me.contentEditable==="true")&&(lo=Me,$d=F,Ll=null);break;case"focusout":Ll=$d=lo=null;break;case"mousedown":Kd=!0;break;case"contextmenu":case"mouseup":case"dragend":Kd=!1,P_(J,o,W);break;case"selectionchange":if(wI)break;case"keydown":case"keyup":P_(J,o,W)}var pe;if(Cr)e:{switch(r){case"compositionstart":var Te="onCompositionStart";break e;case"compositionend":Te="onCompositionEnd";break e;case"compositionupdate":Te="onCompositionUpdate";break e}Te=void 0}else Be?K(r,o)&&(Te="onCompositionEnd"):r==="keydown"&&o.keyCode===229&&(Te="onCompositionStart");Te&&(v&&o.locale!=="ko"&&(Be||Te!=="onCompositionStart"?Te==="onCompositionEnd"&&Be&&(pe=Nl()):(br=W,qi="value"in br?br.value:br.textContent,Be=!0)),Me=zh(F,Te),0<Me.length&&(Te=new Ml(Te,r,null,o,W),J.push({event:Te,listeners:Me}),pe?Te.data=pe:(pe=se(o),pe!==null&&(Te.data=pe)))),(pe=y?kt(r,o):ze(r,o))&&(Te=zh(F,"onBeforeInput"),0<Te.length&&(Me=new Ml("onBeforeInput","beforeinput",null,o,W),J.push({event:Me,listeners:Te}),Me.data=pe)),s1(J,r,F,o,W)}rT(J,s)})}function hu(r,s,o){return{instance:r,listener:s,currentTarget:o}}function zh(r,s){for(var o=s+"Capture",u=[];r!==null;){var f=r,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=na(r,o),f!=null&&u.unshift(hu(r,f,m)),f=na(r,s),f!=null&&u.push(hu(r,f,m))),r.tag===3)return u;r=r.return}return[]}function Po(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function sT(r,s,o,u,f){for(var m=s._reactName,E=[];o!==null&&o!==u;){var w=o,I=w.alternate,F=w.stateNode;if(w=w.tag,I!==null&&I===u)break;w!==5&&w!==26&&w!==27||F===null||(I=F,f?(F=na(o,m),F!=null&&E.unshift(hu(o,F,I))):f||(F=na(o,m),F!=null&&E.push(hu(o,F,I)))),o=o.return}E.length!==0&&r.push({event:s,listeners:E})}var u1=/\r\n?/g,c1=/\u0000|\uFFFD/g;function aT(r){return(typeof r=="string"?r:""+r).replace(u1,`
`).replace(c1,"")}function oT(r,s){return s=aT(s),aT(r)===s}function Fh(){}function tt(r,s,o,u,f,m){switch(o){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||jn(r,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&jn(r,""+u);break;case"className":Ar(r,"class",u);break;case"tabIndex":Ar(r,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Ar(r,o,u);break;case"style":Rl(r,u,m);break;case"data":if(s!=="object"){Ar(r,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||o!=="href")){r.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(o);break}u=Ja(""+u),r.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){r.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(o==="formAction"?(s!=="input"&&tt(r,s,"name",f.name,f,null),tt(r,s,"formEncType",f.formEncType,f,null),tt(r,s,"formMethod",f.formMethod,f,null),tt(r,s,"formTarget",f.formTarget,f,null)):(tt(r,s,"encType",f.encType,f,null),tt(r,s,"method",f.method,f,null),tt(r,s,"target",f.target,f,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(o);break}u=Ja(""+u),r.setAttribute(o,u);break;case"onClick":u!=null&&(r.onclick=Fh);break;case"onScroll":u!=null&&Ve("scroll",r);break;case"onScrollEnd":u!=null&&Ve("scrollend",r);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(i(60));r.innerHTML=o}}break;case"multiple":r.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":r.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){r.removeAttribute("xlink:href");break}o=Ja(""+u),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,""+u):r.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,""):r.removeAttribute(o);break;case"capture":case"download":u===!0?r.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,u):r.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?r.setAttribute(o,u):r.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?r.removeAttribute(o):r.setAttribute(o,u);break;case"popover":Ve("beforetoggle",r),Ve("toggle",r),zi(r,"popover",u);break;case"xlinkActuate":Qt(r,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Qt(r,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Qt(r,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Qt(r,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Qt(r,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Qt(r,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Qt(r,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Qt(r,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Qt(r,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":zi(r,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Bd.get(o)||o,zi(r,o,u))}}function gm(r,s,o,u,f,m){switch(o){case"style":Rl(r,u,m);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(i(60));r.innerHTML=o}}break;case"children":typeof u=="string"?jn(r,u):(typeof u=="number"||typeof u=="bigint")&&jn(r,""+u);break;case"onScroll":u!=null&&Ve("scroll",r);break;case"onScrollEnd":u!=null&&Ve("scrollend",r);break;case"onClick":u!=null&&(r.onclick=Fh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ya.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),s=o.slice(2,f?o.length-7:void 0),m=r[It]||null,m=m!=null?m[o]:null,typeof m=="function"&&r.removeEventListener(s,m,f),typeof u=="function")){typeof m!="function"&&m!==null&&(o in r?r[o]=null:r.hasAttribute(o)&&r.removeAttribute(o)),r.addEventListener(s,u,f);break e}o in r?r[o]=u:u===!0?r.setAttribute(o,""):zi(r,o,u)}}}function Jt(r,s,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ve("error",r),Ve("load",r);var u=!1,f=!1,m;for(m in o)if(o.hasOwnProperty(m)){var E=o[m];if(E!=null)switch(m){case"src":u=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:tt(r,s,m,E,o,null)}}f&&tt(r,s,"srcSet",o.srcSet,o,null),u&&tt(r,s,"src",o.src,o,null);return;case"input":Ve("invalid",r);var w=m=E=f=null,I=null,F=null;for(u in o)if(o.hasOwnProperty(u)){var W=o[u];if(W!=null)switch(u){case"name":f=W;break;case"type":E=W;break;case"checked":I=W;break;case"defaultChecked":F=W;break;case"value":m=W;break;case"defaultValue":w=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(i(137,s));break;default:tt(r,s,u,W,o,null)}}Js(r,m,w,I,F,E,f,!1),Za(r);return;case"select":Ve("invalid",r),u=E=m=null;for(f in o)if(o.hasOwnProperty(f)&&(w=o[f],w!=null))switch(f){case"value":m=w;break;case"defaultValue":E=w;break;case"multiple":u=w;default:tt(r,s,f,w,o,null)}s=m,o=E,r.multiple=!!u,s!=null?ni(r,!!u,s,!1):o!=null&&ni(r,!!u,o,!0);return;case"textarea":Ve("invalid",r),m=f=u=null;for(E in o)if(o.hasOwnProperty(E)&&(w=o[E],w!=null))switch(E){case"value":u=w;break;case"defaultValue":f=w;break;case"children":m=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(i(91));break;default:tt(r,s,E,w,o,null)}ea(r,u,f,m),Za(r);return;case"option":for(I in o)if(o.hasOwnProperty(I)&&(u=o[I],u!=null))switch(I){case"selected":r.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:tt(r,s,I,u,o,null)}return;case"dialog":Ve("beforetoggle",r),Ve("toggle",r),Ve("cancel",r),Ve("close",r);break;case"iframe":case"object":Ve("load",r);break;case"video":case"audio":for(u=0;u<cu.length;u++)Ve(cu[u],r);break;case"image":Ve("error",r),Ve("load",r);break;case"details":Ve("toggle",r);break;case"embed":case"source":case"link":Ve("error",r),Ve("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(F in o)if(o.hasOwnProperty(F)&&(u=o[F],u!=null))switch(F){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:tt(r,s,F,u,o,null)}return;default:if(Il(s)){for(W in o)o.hasOwnProperty(W)&&(u=o[W],u!==void 0&&gm(r,s,W,u,o,void 0));return}}for(w in o)o.hasOwnProperty(w)&&(u=o[w],u!=null&&tt(r,s,w,u,o,null))}function h1(r,s,o,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,E=null,w=null,I=null,F=null,W=null;for(j in o){var J=o[j];if(o.hasOwnProperty(j)&&J!=null)switch(j){case"checked":break;case"value":break;case"defaultValue":I=J;default:u.hasOwnProperty(j)||tt(r,s,j,null,u,J)}}for(var q in u){var j=u[q];if(J=o[q],u.hasOwnProperty(q)&&(j!=null||J!=null))switch(q){case"type":m=j;break;case"name":f=j;break;case"checked":F=j;break;case"defaultChecked":W=j;break;case"value":E=j;break;case"defaultValue":w=j;break;case"children":case"dangerouslySetInnerHTML":if(j!=null)throw Error(i(137,s));break;default:j!==J&&tt(r,s,q,j,u,J)}}In(r,E,w,I,F,W,m,f);return;case"select":j=E=w=q=null;for(m in o)if(I=o[m],o.hasOwnProperty(m)&&I!=null)switch(m){case"value":break;case"multiple":j=I;default:u.hasOwnProperty(m)||tt(r,s,m,null,u,I)}for(f in u)if(m=u[f],I=o[f],u.hasOwnProperty(f)&&(m!=null||I!=null))switch(f){case"value":q=m;break;case"defaultValue":w=m;break;case"multiple":E=m;default:m!==I&&tt(r,s,f,m,u,I)}s=w,o=E,u=j,q!=null?ni(r,!!o,q,!1):!!u!=!!o&&(s!=null?ni(r,!!o,s,!0):ni(r,!!o,o?[]:"",!1));return;case"textarea":j=q=null;for(w in o)if(f=o[w],o.hasOwnProperty(w)&&f!=null&&!u.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:tt(r,s,w,null,u,f)}for(E in u)if(f=u[E],m=o[E],u.hasOwnProperty(E)&&(f!=null||m!=null))switch(E){case"value":q=f;break;case"defaultValue":j=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(i(91));break;default:f!==m&&tt(r,s,E,f,u,m)}Je(r,q,j);return;case"option":for(var be in o)if(q=o[be],o.hasOwnProperty(be)&&q!=null&&!u.hasOwnProperty(be))switch(be){case"selected":r.selected=!1;break;default:tt(r,s,be,null,u,q)}for(I in u)if(q=u[I],j=o[I],u.hasOwnProperty(I)&&q!==j&&(q!=null||j!=null))switch(I){case"selected":r.selected=q&&typeof q!="function"&&typeof q!="symbol";break;default:tt(r,s,I,q,u,j)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ve in o)q=o[ve],o.hasOwnProperty(ve)&&q!=null&&!u.hasOwnProperty(ve)&&tt(r,s,ve,null,u,q);for(F in u)if(q=u[F],j=o[F],u.hasOwnProperty(F)&&q!==j&&(q!=null||j!=null))switch(F){case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(i(137,s));break;default:tt(r,s,F,q,u,j)}return;default:if(Il(s)){for(var nt in o)q=o[nt],o.hasOwnProperty(nt)&&q!==void 0&&!u.hasOwnProperty(nt)&&gm(r,s,nt,void 0,u,q);for(W in u)q=u[W],j=o[W],!u.hasOwnProperty(W)||q===j||q===void 0&&j===void 0||gm(r,s,W,q,u,j);return}}for(var L in o)q=o[L],o.hasOwnProperty(L)&&q!=null&&!u.hasOwnProperty(L)&&tt(r,s,L,null,u,q);for(J in u)q=u[J],j=o[J],!u.hasOwnProperty(J)||q===j||q==null&&j==null||tt(r,s,J,q,u,j)}var ym=null,_m=null;function qh(r){return r.nodeType===9?r:r.ownerDocument}function lT(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function uT(r,s){if(r===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&s==="foreignObject"?0:r}function vm(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Em=null;function f1(){var r=window.event;return r&&r.type==="popstate"?r===Em?!1:(Em=r,!0):(Em=null,!1)}var cT=typeof setTimeout=="function"?setTimeout:void 0,d1=typeof clearTimeout=="function"?clearTimeout:void 0,hT=typeof Promise=="function"?Promise:void 0,p1=typeof queueMicrotask=="function"?queueMicrotask:typeof hT<"u"?function(r){return hT.resolve(null).then(r).catch(m1)}:cT;function m1(r){setTimeout(function(){throw r})}function is(r){return r==="head"}function fT(r,s){var o=s,u=0,f=0;do{var m=o.nextSibling;if(r.removeChild(o),m&&m.nodeType===8)if(o=m.data,o==="/$"){if(0<u&&8>u){o=u;var E=r.ownerDocument;if(o&1&&fu(E.documentElement),o&2&&fu(E.body),o&4)for(o=E.head,fu(o),E=o.firstChild;E;){var w=E.nextSibling,I=E.nodeName;E[Qs]||I==="SCRIPT"||I==="STYLE"||I==="LINK"&&E.rel.toLowerCase()==="stylesheet"||o.removeChild(E),E=w}}if(f===0){r.removeChild(m),Eu(s);return}f--}else o==="$"||o==="$?"||o==="$!"?f++:u=o.charCodeAt(0)-48;else u=0;o=m}while(o);Eu(s)}function Tm(r){var s=r.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var o=s;switch(s=s.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Tm(o),Bi(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}r.removeChild(o)}}function g1(r,s,o,u){for(;r.nodeType===1;){var f=o;if(r.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(u){if(!r[Qs])switch(s){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(m=r.getAttribute("rel"),m==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(m!==f.rel||r.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||r.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||r.getAttribute("title")!==(f.title==null?null:f.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(m=r.getAttribute("src"),(m!==(f.src==null?null:f.src)||r.getAttribute("type")!==(f.type==null?null:f.type)||r.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(s==="input"&&r.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&r.getAttribute("name")===m)return r}else return r;if(r=cr(r.nextSibling),r===null)break}return null}function y1(r,s,o){if(s==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!o||(r=cr(r.nextSibling),r===null))return null;return r}function Am(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState==="complete"}function _1(r,s){var o=r.ownerDocument;if(r.data!=="$?"||o.readyState==="complete")s();else{var u=function(){s(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),r._reactRetry=u}}function cr(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return r}var wm=null;function dT(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var o=r.data;if(o==="$"||o==="$!"||o==="$?"){if(s===0)return r;s--}else o==="/$"&&s++}r=r.previousSibling}return null}function pT(r,s,o){switch(s=qh(o),r){case"html":if(r=s.documentElement,!r)throw Error(i(452));return r;case"head":if(r=s.head,!r)throw Error(i(453));return r;case"body":if(r=s.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}function fu(r){for(var s=r.attributes;s.length;)r.removeAttributeNode(s[0]);Bi(r)}var Jn=new Map,mT=new Set;function jh(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var Ti=oe.d;oe.d={f:v1,r:E1,D:T1,C:A1,L:w1,m:b1,X:R1,S:S1,M:I1};function v1(){var r=Ti.f(),s=Vh();return r||s}function E1(r){var s=Er(r);s!==null&&s.tag===5&&s.type==="form"?kv(s):Ti.r(r)}var Vo=typeof document>"u"?null:document;function gT(r,s,o){var u=Vo;if(u&&typeof s=="string"&&s){var f=Ct(s);f='link[rel="'+r+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),mT.has(f)||(mT.add(f),r={rel:r,crossOrigin:o,href:s},u.querySelector(f)===null&&(s=u.createElement("link"),Jt(s,"link",r),At(s),u.head.appendChild(s)))}}function T1(r){Ti.D(r),gT("dns-prefetch",r,null)}function A1(r,s){Ti.C(r,s),gT("preconnect",r,s)}function w1(r,s,o){Ti.L(r,s,o);var u=Vo;if(u&&r&&s){var f='link[rel="preload"][as="'+Ct(s)+'"]';s==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+Ct(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+Ct(o.imageSizes)+'"]')):f+='[href="'+Ct(r)+'"]';var m=f;switch(s){case"style":m=ko(r);break;case"script":m=xo(r)}Jn.has(m)||(r=_({rel:"preload",href:s==="image"&&o&&o.imageSrcSet?void 0:r,as:s},o),Jn.set(m,r),u.querySelector(f)!==null||s==="style"&&u.querySelector(du(m))||s==="script"&&u.querySelector(pu(m))||(s=u.createElement("link"),Jt(s,"link",r),At(s),u.head.appendChild(s)))}}function b1(r,s){Ti.m(r,s);var o=Vo;if(o&&r){var u=s&&typeof s.as=="string"?s.as:"script",f='link[rel="modulepreload"][as="'+Ct(u)+'"][href="'+Ct(r)+'"]',m=f;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=xo(r)}if(!Jn.has(m)&&(r=_({rel:"modulepreload",href:r},s),Jn.set(m,r),o.querySelector(f)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(pu(m)))return}u=o.createElement("link"),Jt(u,"link",r),At(u),o.head.appendChild(u)}}}function S1(r,s,o){Ti.S(r,s,o);var u=Vo;if(u&&r){var f=pn(u).hoistableStyles,m=ko(r);s=s||"default";var E=f.get(m);if(!E){var w={loading:0,preload:null};if(E=u.querySelector(du(m)))w.loading=5;else{r=_({rel:"stylesheet",href:r,"data-precedence":s},o),(o=Jn.get(m))&&bm(r,o);var I=E=u.createElement("link");At(I),Jt(I,"link",r),I._p=new Promise(function(F,W){I.onload=F,I.onerror=W}),I.addEventListener("load",function(){w.loading|=1}),I.addEventListener("error",function(){w.loading|=2}),w.loading|=4,Hh(E,s,u)}E={type:"stylesheet",instance:E,count:1,state:w},f.set(m,E)}}}function R1(r,s){Ti.X(r,s);var o=Vo;if(o&&r){var u=pn(o).hoistableScripts,f=xo(r),m=u.get(f);m||(m=o.querySelector(pu(f)),m||(r=_({src:r,async:!0},s),(s=Jn.get(f))&&Sm(r,s),m=o.createElement("script"),At(m),Jt(m,"link",r),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(f,m))}}function I1(r,s){Ti.M(r,s);var o=Vo;if(o&&r){var u=pn(o).hoistableScripts,f=xo(r),m=u.get(f);m||(m=o.querySelector(pu(f)),m||(r=_({src:r,async:!0,type:"module"},s),(s=Jn.get(f))&&Sm(r,s),m=o.createElement("script"),At(m),Jt(m,"link",r),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(f,m))}}function yT(r,s,o,u){var f=(f=Se.current)?jh(f):null;if(!f)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(s=ko(o.href),o=pn(f).hoistableStyles,u=o.get(s),u||(u={type:"style",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){r=ko(o.href);var m=pn(f).hoistableStyles,E=m.get(r);if(E||(f=f.ownerDocument||f,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(r,E),(m=f.querySelector(du(r)))&&!m._p&&(E.instance=m,E.state.loading=5),Jn.has(r)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Jn.set(r,o),m||C1(f,r,o,E.state))),s&&u===null)throw Error(i(528,""));return E}if(s&&u!==null)throw Error(i(529,""));return null;case"script":return s=o.async,o=o.src,typeof o=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=xo(o),o=pn(f).hoistableScripts,u=o.get(s),u||(u={type:"script",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function ko(r){return'href="'+Ct(r)+'"'}function du(r){return'link[rel="stylesheet"]['+r+"]"}function _T(r){return _({},r,{"data-precedence":r.precedence,precedence:null})}function C1(r,s,o,u){r.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=r.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),Jt(s,"link",o),At(s),r.head.appendChild(s))}function xo(r){return'[src="'+Ct(r)+'"]'}function pu(r){return"script[async]"+r}function vT(r,s,o){if(s.count++,s.instance===null)switch(s.type){case"style":var u=r.querySelector('style[data-href~="'+Ct(o.href)+'"]');if(u)return s.instance=u,At(u),u;var f=_({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(r.ownerDocument||r).createElement("style"),At(u),Jt(u,"style",f),Hh(u,o.precedence,r),s.instance=u;case"stylesheet":f=ko(o.href);var m=r.querySelector(du(f));if(m)return s.state.loading|=4,s.instance=m,At(m),m;u=_T(o),(f=Jn.get(f))&&bm(u,f),m=(r.ownerDocument||r).createElement("link"),At(m);var E=m;return E._p=new Promise(function(w,I){E.onload=w,E.onerror=I}),Jt(m,"link",u),s.state.loading|=4,Hh(m,o.precedence,r),s.instance=m;case"script":return m=xo(o.src),(f=r.querySelector(pu(m)))?(s.instance=f,At(f),f):(u=o,(f=Jn.get(m))&&(u=_({},o),Sm(u,f)),r=r.ownerDocument||r,f=r.createElement("script"),At(f),Jt(f,"link",u),r.head.appendChild(f),s.instance=f);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,Hh(u,o.precedence,r));return s.instance}function Hh(r,s,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=u.length?u[u.length-1]:null,m=f,E=0;E<u.length;E++){var w=u[E];if(w.dataset.precedence===s)m=w;else if(m!==f)break}m?m.parentNode.insertBefore(r,m.nextSibling):(s=o.nodeType===9?o.head:o,s.insertBefore(r,s.firstChild))}function bm(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.title==null&&(r.title=s.title)}function Sm(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.integrity==null&&(r.integrity=s.integrity)}var Gh=null;function ET(r,s,o){if(Gh===null){var u=new Map,f=Gh=new Map;f.set(o,u)}else f=Gh,u=f.get(o),u||(u=new Map,f.set(o,u));if(u.has(r))return u;for(u.set(r,null),o=o.getElementsByTagName(r),f=0;f<o.length;f++){var m=o[f];if(!(m[Qs]||m[Vt]||r==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var E=m.getAttribute(s)||"";E=r+E;var w=u.get(E);w?w.push(m):u.set(E,[m])}}return u}function TT(r,s,o){r=r.ownerDocument||r,r.head.insertBefore(o,s==="title"?r.querySelector("head > title"):null)}function N1(r,s,o){if(o===1||s.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return r=s.disabled,typeof s.precedence=="string"&&r==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function AT(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}var mu=null;function D1(){}function O1(r,s,o){if(mu===null)throw Error(i(475));var u=mu;if(s.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var f=ko(o.href),m=r.querySelector(du(f));if(m){r=m._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(u.count++,u=$h.bind(u),r.then(u,u)),s.state.loading|=4,s.instance=m,At(m);return}m=r.ownerDocument||r,o=_T(o),(f=Jn.get(f))&&bm(o,f),m=m.createElement("link"),At(m);var E=m;E._p=new Promise(function(w,I){E.onload=w,E.onerror=I}),Jt(m,"link",o),s.instance=m}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(s,r),(r=s.state.preload)&&(s.state.loading&3)===0&&(u.count++,s=$h.bind(u),r.addEventListener("load",s),r.addEventListener("error",s))}}function M1(){if(mu===null)throw Error(i(475));var r=mu;return r.stylesheets&&r.count===0&&Rm(r,r.stylesheets),0<r.count?function(s){var o=setTimeout(function(){if(r.stylesheets&&Rm(r,r.stylesheets),r.unsuspend){var u=r.unsuspend;r.unsuspend=null,u()}},6e4);return r.unsuspend=s,function(){r.unsuspend=null,clearTimeout(o)}}:null}function $h(){if(this.count--,this.count===0){if(this.stylesheets)Rm(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var Kh=null;function Rm(r,s){r.stylesheets=null,r.unsuspend!==null&&(r.count++,Kh=new Map,s.forEach(P1,r),Kh=null,$h.call(r))}function P1(r,s){if(!(s.state.loading&4)){var o=Kh.get(r);if(o)var u=o.get(null);else{o=new Map,Kh.set(r,o);for(var f=r.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var E=f[m];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(o.set(E.dataset.precedence,E),u=E)}u&&o.set(null,u)}f=s.instance,E=f.getAttribute("data-precedence"),m=o.get(E)||u,m===u&&o.set(null,f),o.set(E,f),this.count++,u=$h.bind(this),f.addEventListener("load",u),f.addEventListener("error",u),m?m.parentNode.insertBefore(f,m.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(f,r.firstChild)),s.state.loading|=4}}var gu={$$typeof:ne,Provider:null,Consumer:null,_currentValue:ge,_currentValue2:ge,_threadCount:0};function V1(r,s,o,u,f,m,E,w){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Wr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wr(0),this.hiddenUpdates=Wr(null),this.identifierPrefix=u,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=w,this.incompleteTransitions=new Map}function wT(r,s,o,u,f,m,E,w,I,F,W,J){return r=new V1(r,s,o,E,w,I,F,J),s=1,m===!0&&(s|=24),m=Nn(3,null,null,s),r.current=m,m.stateNode=r,s=op(),s.refCount++,r.pooledCache=s,s.refCount++,m.memoizedState={element:u,isDehydrated:o,cache:s},hp(m),r}function bT(r){return r?(r=fo,r):fo}function ST(r,s,o,u,f,m){f=bT(f),u.context===null?u.context=f:u.pendingContext=f,u=Gi(s),u.payload={element:o},m=m===void 0?null:m,m!==null&&(u.callback=m),o=$i(r,u,s),o!==null&&(Vn(o,r,s),$l(o,r,s))}function RT(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var o=r.retryLane;r.retryLane=o!==0&&o<s?o:s}}function Im(r,s){RT(r,s),(r=r.alternate)&&RT(r,s)}function IT(r){if(r.tag===13){var s=ho(r,67108864);s!==null&&Vn(s,r,67108864),Im(r,67108864)}}var Yh=!0;function k1(r,s,o,u){var f=X.T;X.T=null;var m=oe.p;try{oe.p=2,Cm(r,s,o,u)}finally{oe.p=m,X.T=f}}function x1(r,s,o,u){var f=X.T;X.T=null;var m=oe.p;try{oe.p=8,Cm(r,s,o,u)}finally{oe.p=m,X.T=f}}function Cm(r,s,o,u){if(Yh){var f=Nm(u);if(f===null)mm(r,s,u,Qh,o),NT(r,u);else if(U1(f,r,s,o,u))u.stopPropagation();else if(NT(r,u),s&4&&-1<L1.indexOf(r)){for(;f!==null;){var m=Er(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var E=sr(m.pendingLanes);if(E!==0){var w=m;for(w.pendingLanes|=2,w.entangledLanes|=2;E;){var I=1<<31-sn(E);w.entanglements[1]|=I,E&=~I}Vr(m),(We&6)===0&&(Mh=Fn()+500,uu(0))}}break;case 13:w=ho(m,2),w!==null&&Vn(w,m,2),Vh(),Im(m,2)}if(m=Nm(u),m===null&&mm(r,s,u,Qh,o),m===f)break;f=m}f!==null&&u.stopPropagation()}else mm(r,s,u,null,o)}}function Nm(r){return r=Hn(r),Dm(r)}var Qh=null;function Dm(r){if(Qh=null,r=Jr(r),r!==null){var s=l(r);if(s===null)r=null;else{var o=s.tag;if(o===13){if(r=c(s),r!==null)return r;r=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null)}}return Qh=r,null}function CT(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Pd()){case pl:return 2;case Ha:return 8;case Hs:case Vd:return 32;case Ga:return 268435456;default:return 32}default:return 32}}var Om=!1,ss=null,as=null,os=null,yu=new Map,_u=new Map,ls=[],L1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function NT(r,s){switch(r){case"focusin":case"focusout":ss=null;break;case"dragenter":case"dragleave":as=null;break;case"mouseover":case"mouseout":os=null;break;case"pointerover":case"pointerout":yu.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":_u.delete(s.pointerId)}}function vu(r,s,o,u,f,m){return r===null||r.nativeEvent!==m?(r={blockedOn:s,domEventName:o,eventSystemFlags:u,nativeEvent:m,targetContainers:[f]},s!==null&&(s=Er(s),s!==null&&IT(s)),r):(r.eventSystemFlags|=u,s=r.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),r)}function U1(r,s,o,u,f){switch(s){case"focusin":return ss=vu(ss,r,s,o,u,f),!0;case"dragenter":return as=vu(as,r,s,o,u,f),!0;case"mouseover":return os=vu(os,r,s,o,u,f),!0;case"pointerover":var m=f.pointerId;return yu.set(m,vu(yu.get(m)||null,r,s,o,u,f)),!0;case"gotpointercapture":return m=f.pointerId,_u.set(m,vu(_u.get(m)||null,r,s,o,u,f)),!0}return!1}function DT(r){var s=Jr(r.target);if(s!==null){var o=l(s);if(o!==null){if(s=o.tag,s===13){if(s=c(o),s!==null){r.blockedOn=s,Vc(r.priority,function(){if(o.tag===13){var u=Pn();u=xi(u);var f=ho(o,u);f!==null&&Vn(f,o,u),Im(o,u)}});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){r.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Xh(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var o=Nm(r.nativeEvent);if(o===null){o=r.nativeEvent;var u=new o.constructor(o.type,o);ri=u,o.target.dispatchEvent(u),ri=null}else return s=Er(o),s!==null&&IT(s),r.blockedOn=o,!1;s.shift()}return!0}function OT(r,s,o){Xh(r)&&o.delete(s)}function B1(){Om=!1,ss!==null&&Xh(ss)&&(ss=null),as!==null&&Xh(as)&&(as=null),os!==null&&Xh(os)&&(os=null),yu.forEach(OT),_u.forEach(OT)}function Wh(r,s){r.blockedOn===s&&(r.blockedOn=null,Om||(Om=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,B1)))}var Zh=null;function MT(r){Zh!==r&&(Zh=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Zh===r&&(Zh=null);for(var s=0;s<r.length;s+=3){var o=r[s],u=r[s+1],f=r[s+2];if(typeof u!="function"){if(Dm(u||o)===null)continue;break}var m=Er(o);m!==null&&(r.splice(s,3),s-=3,Dp(m,{pending:!0,data:f,method:o.method,action:u},u,f))}}))}function Eu(r){function s(I){return Wh(I,r)}ss!==null&&Wh(ss,r),as!==null&&Wh(as,r),os!==null&&Wh(os,r),yu.forEach(s),_u.forEach(s);for(var o=0;o<ls.length;o++){var u=ls[o];u.blockedOn===r&&(u.blockedOn=null)}for(;0<ls.length&&(o=ls[0],o.blockedOn===null);)DT(o),o.blockedOn===null&&ls.shift();if(o=(r.ownerDocument||r).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var f=o[u],m=o[u+1],E=f[It]||null;if(typeof m=="function")E||MT(o);else if(E){var w=null;if(m&&m.hasAttribute("formAction")){if(f=m,E=m[It]||null)w=E.formAction;else if(Dm(f)!==null)continue}else w=E.action;typeof w=="function"?o[u+1]=w:(o.splice(u,3),u-=3),MT(o)}}}function Mm(r){this._internalRoot=r}Jh.prototype.render=Mm.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(i(409));var o=s.current,u=Pn();ST(o,u,r,s,null,null)},Jh.prototype.unmount=Mm.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;ST(r.current,2,null,r,null,null),Vh(),s[qn]=null}};function Jh(r){this._internalRoot=r}Jh.prototype.unstable_scheduleHydration=function(r){if(r){var s=Li();r={blockedOn:null,target:r,priority:s};for(var o=0;o<ls.length&&s!==0&&s<ls[o].priority;o++);ls.splice(o,0,r),o===0&&DT(r)}};var PT=e.version;if(PT!=="19.1.0")throw Error(i(527,PT,"19.1.0"));oe.findDOMNode=function(r){var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=p(s),r=r!==null?g(r):null,r=r===null?null:r.stateNode,r};var z1={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:X,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ef=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ef.isDisabled&&ef.supportsFiber)try{_t=ef.inject(z1),Xe=ef}catch{}}return Au.createRoot=function(r,s){if(!a(r))throw Error(i(299));var o=!1,u="",f=Qv,m=Xv,E=Wv,w=null;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(f=s.onUncaughtError),s.onCaughtError!==void 0&&(m=s.onCaughtError),s.onRecoverableError!==void 0&&(E=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(w=s.unstable_transitionCallbacks)),s=wT(r,1,!1,null,null,o,u,f,m,E,w,null),r[qn]=s.current,pm(r),new Mm(s)},Au.hydrateRoot=function(r,s,o){if(!a(r))throw Error(i(299));var u=!1,f="",m=Qv,E=Xv,w=Wv,I=null,F=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(m=o.onUncaughtError),o.onCaughtError!==void 0&&(E=o.onCaughtError),o.onRecoverableError!==void 0&&(w=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(I=o.unstable_transitionCallbacks),o.formState!==void 0&&(F=o.formState)),s=wT(r,1,!0,s,o??null,u,f,m,E,w,I,F),s.context=bT(null),o=s.current,u=Pn(),u=xi(u),f=Gi(u),f.callback=null,$i(o,f,u),o=u,s.current.lanes=o,Zr(s,o),Vr(s),r[qn]=s.current,pm(r),new Jh(s)},Au.version="19.1.0",Au}var jT;function W1(){if(jT)return km.exports;jT=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),km.exports=X1(),km.exports}var Z1=W1(),wu={},HT;function J1(){if(HT)return wu;HT=1,Object.defineProperty(wu,"__esModule",{value:!0}),wu.parse=c,wu.serialize=g;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,i=/^[\u0020-\u003A\u003D-\u007E]*$/,a=Object.prototype.toString,l=(()=>{const T=function(){};return T.prototype=Object.create(null),T})();function c(T,N){const O=new l,H=T.length;if(H<2)return O;const U=N?.decode||_;let G=0;do{const ie=T.indexOf("=",G);if(ie===-1)break;const ne=T.indexOf(";",G),he=ne===-1?H:ne;if(ie>he){G=T.lastIndexOf(";",ie-1)+1;continue}const ce=d(T,G,ie),Ee=p(T,ie,ce),P=T.slice(ce,Ee);if(O[P]===void 0){let R=d(T,ie+1,he),S=p(T,he,R);const C=U(T.slice(R,S));O[P]=C}G=he+1}while(G<H);return O}function d(T,N,O){do{const H=T.charCodeAt(N);if(H!==32&&H!==9)return N}while(++N<O);return O}function p(T,N,O){for(;N>O;){const H=T.charCodeAt(--N);if(H!==32&&H!==9)return N+1}return O}function g(T,N,O){const H=O?.encode||encodeURIComponent;if(!n.test(T))throw new TypeError(`argument name is invalid: ${T}`);const U=H(N);if(!e.test(U))throw new TypeError(`argument val is invalid: ${N}`);let G=T+"="+U;if(!O)return G;if(O.maxAge!==void 0){if(!Number.isInteger(O.maxAge))throw new TypeError(`option maxAge is invalid: ${O.maxAge}`);G+="; Max-Age="+O.maxAge}if(O.domain){if(!t.test(O.domain))throw new TypeError(`option domain is invalid: ${O.domain}`);G+="; Domain="+O.domain}if(O.path){if(!i.test(O.path))throw new TypeError(`option path is invalid: ${O.path}`);G+="; Path="+O.path}if(O.expires){if(!A(O.expires)||!Number.isFinite(O.expires.valueOf()))throw new TypeError(`option expires is invalid: ${O.expires}`);G+="; Expires="+O.expires.toUTCString()}if(O.httpOnly&&(G+="; HttpOnly"),O.secure&&(G+="; Secure"),O.partitioned&&(G+="; Partitioned"),O.priority)switch(typeof O.priority=="string"?O.priority.toLowerCase():void 0){case"low":G+="; Priority=Low";break;case"medium":G+="; Priority=Medium";break;case"high":G+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${O.priority}`)}if(O.sameSite)switch(typeof O.sameSite=="string"?O.sameSite.toLowerCase():O.sameSite){case!0:case"strict":G+="; SameSite=Strict";break;case"lax":G+="; SameSite=Lax";break;case"none":G+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${O.sameSite}`)}return G}function _(T){if(T.indexOf("%")===-1)return T;try{return decodeURIComponent(T)}catch{return T}}function A(T){return a.call(T)==="[object Date]"}return wu}J1();var GT="popstate";function eC(n={}){function e(i,a){let{pathname:l,search:c,hash:d}=i.location;return lg("",{pathname:l,search:c,hash:d},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(i,a){return typeof a=="string"?a:Hu(a)}return nC(e,t,null,n)}function mt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function qr(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function tC(){return Math.random().toString(36).substring(2,10)}function $T(n,e){return{usr:n.state,key:n.key,idx:e}}function lg(n,e,t=null,i){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?il(e):e,state:t,key:e&&e.key||i||tC()}}function Hu({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function il(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substring(i),n=n.substring(0,i)),n&&(e.pathname=n)}return e}function nC(n,e,t,i={}){let{window:a=document.defaultView,v5Compat:l=!1}=i,c=a.history,d="POP",p=null,g=_();g==null&&(g=0,c.replaceState({...c.state,idx:g},""));function _(){return(c.state||{idx:null}).idx}function A(){d="POP";let U=_(),G=U==null?null:U-g;g=U,p&&p({action:d,location:H.location,delta:G})}function T(U,G){d="PUSH";let ie=lg(H.location,U,G);g=_()+1;let ne=$T(ie,g),he=H.createHref(ie);try{c.pushState(ne,"",he)}catch(ce){if(ce instanceof DOMException&&ce.name==="DataCloneError")throw ce;a.location.assign(he)}l&&p&&p({action:d,location:H.location,delta:1})}function N(U,G){d="REPLACE";let ie=lg(H.location,U,G);g=_();let ne=$T(ie,g),he=H.createHref(ie);c.replaceState(ne,"",he),l&&p&&p({action:d,location:H.location,delta:0})}function O(U){return rC(U)}let H={get action(){return d},get location(){return n(a,c)},listen(U){if(p)throw new Error("A history only accepts one active listener");return a.addEventListener(GT,A),p=U,()=>{a.removeEventListener(GT,A),p=null}},createHref(U){return e(a,U)},createURL:O,encodeLocation(U){let G=O(U);return{pathname:G.pathname,search:G.search,hash:G.hash}},push:T,replace:N,go(U){return c.go(U)}};return H}function rC(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),mt(t,"No window.location.(origin|href) available to create URL");let i=typeof n=="string"?n:Hu(n);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=t+i),new URL(i,t)}function cw(n,e,t="/"){return iC(n,e,t,!1)}function iC(n,e,t,i){let a=typeof e=="string"?il(e):e,l=Ii(a.pathname||"/",t);if(l==null)return null;let c=hw(n);sC(c);let d=null;for(let p=0;d==null&&p<c.length;++p){let g=gC(l);d=pC(c[p],g,i)}return d}function hw(n,e=[],t=[],i=""){let a=(l,c,d)=>{let p={relativePath:d===void 0?l.path||"":d,caseSensitive:l.caseSensitive===!0,childrenIndex:c,route:l};p.relativePath.startsWith("/")&&(mt(p.relativePath.startsWith(i),`Absolute route path "${p.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(i.length));let g=Si([i,p.relativePath]),_=t.concat(p);l.children&&l.children.length>0&&(mt(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),hw(l.children,e,_,g)),!(l.path==null&&!l.index)&&e.push({path:g,score:fC(g,l.index),routesMeta:_})};return n.forEach((l,c)=>{if(l.path===""||!l.path?.includes("?"))a(l,c);else for(let d of fw(l.path))a(l,c,d)}),e}function fw(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,a=t.endsWith("?"),l=t.replace(/\?$/,"");if(i.length===0)return a?[l,""]:[l];let c=fw(i.join("/")),d=[];return d.push(...c.map(p=>p===""?l:[l,p].join("/"))),a&&d.push(...c),d.map(p=>n.startsWith("/")&&p===""?"/":p)}function sC(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:dC(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var aC=/^:[\w-]+$/,oC=3,lC=2,uC=1,cC=10,hC=-2,KT=n=>n==="*";function fC(n,e){let t=n.split("/"),i=t.length;return t.some(KT)&&(i+=hC),e&&(i+=lC),t.filter(a=>!KT(a)).reduce((a,l)=>a+(aC.test(l)?oC:l===""?uC:cC),i)}function dC(n,e){return n.length===e.length&&n.slice(0,-1).every((i,a)=>i===e[a])?n[n.length-1]-e[e.length-1]:0}function pC(n,e,t=!1){let{routesMeta:i}=n,a={},l="/",c=[];for(let d=0;d<i.length;++d){let p=i[d],g=d===i.length-1,_=l==="/"?e:e.slice(l.length)||"/",A=Rf({path:p.relativePath,caseSensitive:p.caseSensitive,end:g},_),T=p.route;if(!A&&g&&t&&!i[i.length-1].route.index&&(A=Rf({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},_)),!A)return null;Object.assign(a,A.params),c.push({params:a,pathname:Si([l,A.pathname]),pathnameBase:EC(Si([l,A.pathnameBase])),route:T}),A.pathnameBase!=="/"&&(l=Si([l,A.pathnameBase]))}return c}function Rf(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=mC(n.path,n.caseSensitive,n.end),a=e.match(t);if(!a)return null;let l=a[0],c=l.replace(/(.)\/+$/,"$1"),d=a.slice(1);return{params:i.reduce((g,{paramName:_,isOptional:A},T)=>{if(_==="*"){let O=d[T]||"";c=l.slice(0,l.length-O.length).replace(/(.)\/+$/,"$1")}const N=d[T];return A&&!N?g[_]=void 0:g[_]=(N||"").replace(/%2F/g,"/"),g},{}),pathname:l,pathnameBase:c,pattern:n}}function mC(n,e=!1,t=!0){qr(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let i=[],a="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,p)=>(i.push({paramName:d,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),a+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":n!==""&&n!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),i]}function gC(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return qr(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Ii(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}function yC(n,e="/"){let{pathname:t,search:i="",hash:a=""}=typeof n=="string"?il(n):n;return{pathname:t?t.startsWith("/")?t:_C(t,e):e,search:TC(i),hash:AC(a)}}function _C(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function Bm(n,e,t,i){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function vC(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function dw(n){let e=vC(n);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function pw(n,e,t,i=!1){let a;typeof n=="string"?a=il(n):(a={...n},mt(!a.pathname||!a.pathname.includes("?"),Bm("?","pathname","search",a)),mt(!a.pathname||!a.pathname.includes("#"),Bm("#","pathname","hash",a)),mt(!a.search||!a.search.includes("#"),Bm("#","search","hash",a)));let l=n===""||a.pathname==="",c=l?"/":a.pathname,d;if(c==null)d=t;else{let A=e.length-1;if(!i&&c.startsWith("..")){let T=c.split("/");for(;T[0]==="..";)T.shift(),A-=1;a.pathname=T.join("/")}d=A>=0?e[A]:"/"}let p=yC(a,d),g=c&&c!=="/"&&c.endsWith("/"),_=(l||c===".")&&t.endsWith("/");return!p.pathname.endsWith("/")&&(g||_)&&(p.pathname+="/"),p}var Si=n=>n.join("/").replace(/\/\/+/g,"/"),EC=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),TC=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,AC=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function wC(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var mw=["POST","PUT","PATCH","DELETE"];new Set(mw);var bC=["GET",...mw];new Set(bC);var sl=$.createContext(null);sl.displayName="DataRouter";var ed=$.createContext(null);ed.displayName="DataRouterState";var gw=$.createContext({isTransitioning:!1});gw.displayName="ViewTransition";var SC=$.createContext(new Map);SC.displayName="Fetchers";var RC=$.createContext(null);RC.displayName="Await";var $r=$.createContext(null);$r.displayName="Navigation";var oc=$.createContext(null);oc.displayName="Location";var Kr=$.createContext({outlet:null,matches:[],isDataRoute:!1});Kr.displayName="Route";var Hg=$.createContext(null);Hg.displayName="RouteError";function IC(n,{relative:e}={}){mt(lc(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=$.useContext($r),{hash:a,pathname:l,search:c}=uc(n,{relative:e}),d=l;return t!=="/"&&(d=l==="/"?t:Si([t,l])),i.createHref({pathname:d,search:c,hash:a})}function lc(){return $.useContext(oc)!=null}function Ms(){return mt(lc(),"useLocation() may be used only in the context of a <Router> component."),$.useContext(oc).location}var yw="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function _w(n){$.useContext($r).static||$.useLayoutEffect(n)}function CC(){let{isDataRoute:n}=$.useContext(Kr);return n?jC():NC()}function NC(){mt(lc(),"useNavigate() may be used only in the context of a <Router> component.");let n=$.useContext(sl),{basename:e,navigator:t}=$.useContext($r),{matches:i}=$.useContext(Kr),{pathname:a}=Ms(),l=JSON.stringify(dw(i)),c=$.useRef(!1);return _w(()=>{c.current=!0}),$.useCallback((p,g={})=>{if(qr(c.current,yw),!c.current)return;if(typeof p=="number"){t.go(p);return}let _=pw(p,JSON.parse(l),a,g.relative==="path");n==null&&e!=="/"&&(_.pathname=_.pathname==="/"?e:Si([e,_.pathname])),(g.replace?t.replace:t.push)(_,g.state,g)},[e,t,l,a,n])}var DC=$.createContext(null);function OC(n){let e=$.useContext(Kr).outlet;return e&&$.createElement(DC.Provider,{value:n},e)}function uc(n,{relative:e}={}){let{matches:t}=$.useContext(Kr),{pathname:i}=Ms(),a=JSON.stringify(dw(t));return $.useMemo(()=>pw(n,JSON.parse(a),i,e==="path"),[n,a,i,e])}function MC(n,e){return vw(n,e)}function vw(n,e,t,i){mt(lc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=$.useContext($r),{matches:l}=$.useContext(Kr),c=l[l.length-1],d=c?c.params:{},p=c?c.pathname:"/",g=c?c.pathnameBase:"/",_=c&&c.route;{let G=_&&_.path||"";Ew(p,!_||G.endsWith("*")||G.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${G}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${G}"> to <Route path="${G==="/"?"*":`${G}/*`}">.`)}let A=Ms(),T;if(e){let G=typeof e=="string"?il(e):e;mt(g==="/"||G.pathname?.startsWith(g),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${G.pathname}" was given in the \`location\` prop.`),T=G}else T=A;let N=T.pathname||"/",O=N;if(g!=="/"){let G=g.replace(/^\//,"").split("/");O="/"+N.replace(/^\//,"").split("/").slice(G.length).join("/")}let H=cw(n,{pathname:O});qr(_||H!=null,`No routes matched location "${T.pathname}${T.search}${T.hash}" `),qr(H==null||H[H.length-1].route.element!==void 0||H[H.length-1].route.Component!==void 0||H[H.length-1].route.lazy!==void 0,`Matched leaf route at location "${T.pathname}${T.search}${T.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let U=LC(H&&H.map(G=>Object.assign({},G,{params:Object.assign({},d,G.params),pathname:Si([g,a.encodeLocation?a.encodeLocation(G.pathname).pathname:G.pathname]),pathnameBase:G.pathnameBase==="/"?g:Si([g,a.encodeLocation?a.encodeLocation(G.pathnameBase).pathname:G.pathnameBase])})),l,t,i);return e&&U?$.createElement(oc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...T},navigationType:"POP"}},U):U}function PC(){let n=qC(),e=wC(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i},l={padding:"2px 4px",backgroundColor:i},c=null;return console.error("Error handled by React Router default ErrorBoundary:",n),c=$.createElement($.Fragment,null,$.createElement("p",null,"💿 Hey developer 👋"),$.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",$.createElement("code",{style:l},"ErrorBoundary")," or"," ",$.createElement("code",{style:l},"errorElement")," prop on your route.")),$.createElement($.Fragment,null,$.createElement("h2",null,"Unexpected Application Error!"),$.createElement("h3",{style:{fontStyle:"italic"}},e),t?$.createElement("pre",{style:a},t):null,c)}var VC=$.createElement(PC,null),kC=class extends $.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?$.createElement(Kr.Provider,{value:this.props.routeContext},$.createElement(Hg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function xC({routeContext:n,match:e,children:t}){let i=$.useContext(sl);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),$.createElement(Kr.Provider,{value:n},t)}function LC(n,e=[],t=null,i=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let a=n,l=t?.errors;if(l!=null){let p=a.findIndex(g=>g.route.id&&l?.[g.route.id]!==void 0);mt(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),a=a.slice(0,Math.min(a.length,p+1))}let c=!1,d=-1;if(t)for(let p=0;p<a.length;p++){let g=a[p];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(d=p),g.route.id){let{loaderData:_,errors:A}=t,T=g.route.loader&&!_.hasOwnProperty(g.route.id)&&(!A||A[g.route.id]===void 0);if(g.route.lazy||T){c=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}return a.reduceRight((p,g,_)=>{let A,T=!1,N=null,O=null;t&&(A=l&&g.route.id?l[g.route.id]:void 0,N=g.route.errorElement||VC,c&&(d<0&&_===0?(Ew("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),T=!0,O=null):d===_&&(T=!0,O=g.route.hydrateFallbackElement||null)));let H=e.concat(a.slice(0,_+1)),U=()=>{let G;return A?G=N:T?G=O:g.route.Component?G=$.createElement(g.route.Component,null):g.route.element?G=g.route.element:G=p,$.createElement(xC,{match:g,routeContext:{outlet:p,matches:H,isDataRoute:t!=null},children:G})};return t&&(g.route.ErrorBoundary||g.route.errorElement||_===0)?$.createElement(kC,{location:t.location,revalidation:t.revalidation,component:N,error:A,children:U(),routeContext:{outlet:null,matches:H,isDataRoute:!0}}):U()},null)}function Gg(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function UC(n){let e=$.useContext(sl);return mt(e,Gg(n)),e}function BC(n){let e=$.useContext(ed);return mt(e,Gg(n)),e}function zC(n){let e=$.useContext(Kr);return mt(e,Gg(n)),e}function $g(n){let e=zC(n),t=e.matches[e.matches.length-1];return mt(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function FC(){return $g("useRouteId")}function qC(){let n=$.useContext(Hg),e=BC("useRouteError"),t=$g("useRouteError");return n!==void 0?n:e.errors?.[t]}function jC(){let{router:n}=UC("useNavigate"),e=$g("useNavigate"),t=$.useRef(!1);return _w(()=>{t.current=!0}),$.useCallback(async(a,l={})=>{qr(t.current,yw),t.current&&(typeof a=="number"?n.navigate(a):await n.navigate(a,{fromRouteId:e,...l}))},[n,e])}var YT={};function Ew(n,e,t){!e&&!YT[n]&&(YT[n]=!0,qr(!1,t))}$.memo(HC);function HC({routes:n,future:e,state:t}){return vw(n,void 0,t,e)}function GC(n){return OC(n.context)}function er(n){mt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function $C({basename:n="/",children:e=null,location:t,navigationType:i="POP",navigator:a,static:l=!1}){mt(!lc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=n.replace(/^\/*/,"/"),d=$.useMemo(()=>({basename:c,navigator:a,static:l,future:{}}),[c,a,l]);typeof t=="string"&&(t=il(t));let{pathname:p="/",search:g="",hash:_="",state:A=null,key:T="default"}=t,N=$.useMemo(()=>{let O=Ii(p,c);return O==null?null:{location:{pathname:O,search:g,hash:_,state:A,key:T},navigationType:i}},[c,p,g,_,A,T,i]);return qr(N!=null,`<Router basename="${c}"> is not able to match the URL "${p}${g}${_}" because it does not start with the basename, so the <Router> won't render anything.`),N==null?null:$.createElement($r.Provider,{value:d},$.createElement(oc.Provider,{children:e,value:N}))}function KC({children:n,location:e}){return MC(ug(n),e)}function ug(n,e=[]){let t=[];return $.Children.forEach(n,(i,a)=>{if(!$.isValidElement(i))return;let l=[...e,a];if(i.type===$.Fragment){t.push.apply(t,ug(i.props.children,l));return}mt(i.type===er,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),mt(!i.props.index||!i.props.children,"An index route cannot have child routes.");let c={id:i.props.id||l.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(c.children=ug(i.props.children,l)),t.push(c)}),t}var ff="get",df="application/x-www-form-urlencoded";function td(n){return n!=null&&typeof n.tagName=="string"}function YC(n){return td(n)&&n.tagName.toLowerCase()==="button"}function QC(n){return td(n)&&n.tagName.toLowerCase()==="form"}function XC(n){return td(n)&&n.tagName.toLowerCase()==="input"}function WC(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function ZC(n,e){return n.button===0&&(!e||e==="_self")&&!WC(n)}var tf=null;function JC(){if(tf===null)try{new FormData(document.createElement("form"),0),tf=!1}catch{tf=!0}return tf}var eN=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function zm(n){return n!=null&&!eN.has(n)?(qr(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${df}"`),null):n}function tN(n,e){let t,i,a,l,c;if(QC(n)){let d=n.getAttribute("action");i=d?Ii(d,e):null,t=n.getAttribute("method")||ff,a=zm(n.getAttribute("enctype"))||df,l=new FormData(n)}else if(YC(n)||XC(n)&&(n.type==="submit"||n.type==="image")){let d=n.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=n.getAttribute("formaction")||d.getAttribute("action");if(i=p?Ii(p,e):null,t=n.getAttribute("formmethod")||d.getAttribute("method")||ff,a=zm(n.getAttribute("formenctype"))||zm(d.getAttribute("enctype"))||df,l=new FormData(d,n),!JC()){let{name:g,type:_,value:A}=n;if(_==="image"){let T=g?`${g}.`:"";l.append(`${T}x`,"0"),l.append(`${T}y`,"0")}else g&&l.append(g,A)}}else{if(td(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=ff,i=null,a=df,c=n}return l&&a==="text/plain"&&(c=l,l=void 0),{action:i,method:t.toLowerCase(),encType:a,formData:l,body:c}}function Kg(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function nN(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function rN(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function iN(n,e,t){let i=await Promise.all(n.map(async a=>{let l=e.routes[a.route.id];if(l){let c=await nN(l,t);return c.links?c.links():[]}return[]}));return lN(i.flat(1).filter(rN).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function QT(n,e,t,i,a,l){let c=(p,g)=>t[g]?p.route.id!==t[g].route.id:!0,d=(p,g)=>t[g].pathname!==p.pathname||t[g].route.path?.endsWith("*")&&t[g].params["*"]!==p.params["*"];return l==="assets"?e.filter((p,g)=>c(p,g)||d(p,g)):l==="data"?e.filter((p,g)=>{let _=i.routes[p.route.id];if(!_||!_.hasLoader)return!1;if(c(p,g)||d(p,g))return!0;if(p.route.shouldRevalidate){let A=p.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof A=="boolean")return A}return!0}):[]}function sN(n,e,{includeHydrateFallback:t}={}){return aN(n.map(i=>{let a=e.routes[i.route.id];if(!a)return[];let l=[a.module];return a.clientActionModule&&(l=l.concat(a.clientActionModule)),a.clientLoaderModule&&(l=l.concat(a.clientLoaderModule)),t&&a.hydrateFallbackModule&&(l=l.concat(a.hydrateFallbackModule)),a.imports&&(l=l.concat(a.imports)),l}).flat(1))}function aN(n){return[...new Set(n)]}function oN(n){let e={},t=Object.keys(n).sort();for(let i of t)e[i]=n[i];return e}function lN(n,e){let t=new Set;return new Set(e),n.reduce((i,a)=>{let l=JSON.stringify(oN(a));return t.has(l)||(t.add(l),i.push({key:l,link:a})),i},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var uN=new Set([100,101,204,205]);function cN(n,e){let t=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t.pathname==="/"?t.pathname="_root.data":e&&Ii(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function Tw(){let n=$.useContext(sl);return Kg(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function hN(){let n=$.useContext(ed);return Kg(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Yg=$.createContext(void 0);Yg.displayName="FrameworkContext";function Aw(){let n=$.useContext(Yg);return Kg(n,"You must render this element inside a <HydratedRouter> element"),n}function fN(n,e){let t=$.useContext(Yg),[i,a]=$.useState(!1),[l,c]=$.useState(!1),{onFocus:d,onBlur:p,onMouseEnter:g,onMouseLeave:_,onTouchStart:A}=e,T=$.useRef(null);$.useEffect(()=>{if(n==="render"&&c(!0),n==="viewport"){let H=G=>{G.forEach(ie=>{c(ie.isIntersecting)})},U=new IntersectionObserver(H,{threshold:.5});return T.current&&U.observe(T.current),()=>{U.disconnect()}}},[n]),$.useEffect(()=>{if(i){let H=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(H)}}},[i]);let N=()=>{a(!0)},O=()=>{a(!1),c(!1)};return t?n!=="intent"?[l,T,{}]:[l,T,{onFocus:bu(d,N),onBlur:bu(p,O),onMouseEnter:bu(g,N),onMouseLeave:bu(_,O),onTouchStart:bu(A,N)}]:[!1,T,{}]}function bu(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function dN({page:n,...e}){let{router:t}=Tw(),i=$.useMemo(()=>cw(t.routes,n,t.basename),[t.routes,n,t.basename]);return i?$.createElement(mN,{page:n,matches:i,...e}):null}function pN(n){let{manifest:e,routeModules:t}=Aw(),[i,a]=$.useState([]);return $.useEffect(()=>{let l=!1;return iN(n,e,t).then(c=>{l||a(c)}),()=>{l=!0}},[n,e,t]),i}function mN({page:n,matches:e,...t}){let i=Ms(),{manifest:a,routeModules:l}=Aw(),{basename:c}=Tw(),{loaderData:d,matches:p}=hN(),g=$.useMemo(()=>QT(n,e,p,a,i,"data"),[n,e,p,a,i]),_=$.useMemo(()=>QT(n,e,p,a,i,"assets"),[n,e,p,a,i]),A=$.useMemo(()=>{if(n===i.pathname+i.search+i.hash)return[];let O=new Set,H=!1;if(e.forEach(G=>{let ie=a.routes[G.route.id];!ie||!ie.hasLoader||(!g.some(ne=>ne.route.id===G.route.id)&&G.route.id in d&&l[G.route.id]?.shouldRevalidate||ie.hasClientLoader?H=!0:O.add(G.route.id))}),O.size===0)return[];let U=cN(n,c);return H&&O.size>0&&U.searchParams.set("_routes",e.filter(G=>O.has(G.route.id)).map(G=>G.route.id).join(",")),[U.pathname+U.search]},[c,d,i,a,g,e,n,l]),T=$.useMemo(()=>sN(_,a),[_,a]),N=pN(_);return $.createElement($.Fragment,null,A.map(O=>$.createElement("link",{key:O,rel:"prefetch",as:"fetch",href:O,...t})),T.map(O=>$.createElement("link",{key:O,rel:"modulepreload",href:O,...t})),N.map(({key:O,link:H})=>$.createElement("link",{key:O,...H})))}function gN(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var ww=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{ww&&(window.__reactRouterVersion="7.6.3")}catch{}function yN({basename:n,children:e,window:t}){let i=$.useRef();i.current==null&&(i.current=eC({window:t,v5Compat:!0}));let a=i.current,[l,c]=$.useState({action:a.action,location:a.location}),d=$.useCallback(p=>{$.startTransition(()=>c(p))},[c]);return $.useLayoutEffect(()=>a.listen(d),[a,d]),$.createElement($C,{basename:n,children:e,location:l.location,navigationType:l.action,navigator:a})}var bw=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Qg=$.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:a,reloadDocument:l,replace:c,state:d,target:p,to:g,preventScrollReset:_,viewTransition:A,...T},N){let{basename:O}=$.useContext($r),H=typeof g=="string"&&bw.test(g),U,G=!1;if(typeof g=="string"&&H&&(U=g,ww))try{let S=new URL(window.location.href),C=g.startsWith("//")?new URL(S.protocol+g):new URL(g),V=Ii(C.pathname,O);C.origin===S.origin&&V!=null?g=V+C.search+C.hash:G=!0}catch{qr(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let ie=IC(g,{relative:a}),[ne,he,ce]=fN(i,T),Ee=TN(g,{replace:c,state:d,target:p,preventScrollReset:_,relative:a,viewTransition:A});function P(S){e&&e(S),S.defaultPrevented||Ee(S)}let R=$.createElement("a",{...T,...ce,href:U||ie,onClick:G||l?e:P,ref:gN(N,he),target:p,"data-discover":!H&&t==="render"?"true":void 0});return ne&&!H?$.createElement($.Fragment,null,R,$.createElement(dN,{page:ie})):R});Qg.displayName="Link";var _N=$.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:a=!1,style:l,to:c,viewTransition:d,children:p,...g},_){let A=uc(c,{relative:g.relative}),T=Ms(),N=$.useContext(ed),{navigator:O,basename:H}=$.useContext($r),U=N!=null&&RN(A)&&d===!0,G=O.encodeLocation?O.encodeLocation(A).pathname:A.pathname,ie=T.pathname,ne=N&&N.navigation&&N.navigation.location?N.navigation.location.pathname:null;t||(ie=ie.toLowerCase(),ne=ne?ne.toLowerCase():null,G=G.toLowerCase()),ne&&H&&(ne=Ii(ne,H)||ne);const he=G!=="/"&&G.endsWith("/")?G.length-1:G.length;let ce=ie===G||!a&&ie.startsWith(G)&&ie.charAt(he)==="/",Ee=ne!=null&&(ne===G||!a&&ne.startsWith(G)&&ne.charAt(G.length)==="/"),P={isActive:ce,isPending:Ee,isTransitioning:U},R=ce?e:void 0,S;typeof i=="function"?S=i(P):S=[i,ce?"active":null,Ee?"pending":null,U?"transitioning":null].filter(Boolean).join(" ");let C=typeof l=="function"?l(P):l;return $.createElement(Qg,{...g,"aria-current":R,className:S,ref:_,style:C,to:c,viewTransition:d},typeof p=="function"?p(P):p)});_N.displayName="NavLink";var vN=$.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:a,state:l,method:c=ff,action:d,onSubmit:p,relative:g,preventScrollReset:_,viewTransition:A,...T},N)=>{let O=bN(),H=SN(d,{relative:g}),U=c.toLowerCase()==="get"?"get":"post",G=typeof d=="string"&&bw.test(d),ie=ne=>{if(p&&p(ne),ne.defaultPrevented)return;ne.preventDefault();let he=ne.nativeEvent.submitter,ce=he?.getAttribute("formmethod")||c;O(he||ne.currentTarget,{fetcherKey:e,method:ce,navigate:t,replace:a,state:l,relative:g,preventScrollReset:_,viewTransition:A})};return $.createElement("form",{ref:N,method:U,action:H,onSubmit:i?p:ie,...T,"data-discover":!G&&n==="render"?"true":void 0})});vN.displayName="Form";function EN(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Sw(n){let e=$.useContext(sl);return mt(e,EN(n)),e}function TN(n,{target:e,replace:t,state:i,preventScrollReset:a,relative:l,viewTransition:c}={}){let d=CC(),p=Ms(),g=uc(n,{relative:l});return $.useCallback(_=>{if(ZC(_,e)){_.preventDefault();let A=t!==void 0?t:Hu(p)===Hu(g);d(n,{replace:A,state:i,preventScrollReset:a,relative:l,viewTransition:c})}},[p,d,g,t,i,e,n,a,l,c])}var AN=0,wN=()=>`__${String(++AN)}__`;function bN(){let{router:n}=Sw("useSubmit"),{basename:e}=$.useContext($r),t=FC();return $.useCallback(async(i,a={})=>{let{action:l,method:c,encType:d,formData:p,body:g}=tN(i,e);if(a.navigate===!1){let _=a.fetcherKey||wN();await n.fetch(_,t,a.action||l,{preventScrollReset:a.preventScrollReset,formData:p,body:g,formMethod:a.method||c,formEncType:a.encType||d,flushSync:a.flushSync})}else await n.navigate(a.action||l,{preventScrollReset:a.preventScrollReset,formData:p,body:g,formMethod:a.method||c,formEncType:a.encType||d,replace:a.replace,state:a.state,fromRouteId:t,flushSync:a.flushSync,viewTransition:a.viewTransition})},[n,e,t])}function SN(n,{relative:e}={}){let{basename:t}=$.useContext($r),i=$.useContext(Kr);mt(i,"useFormAction must be used inside a RouteContext");let[a]=i.matches.slice(-1),l={...uc(n||".",{relative:e})},c=Ms();if(n==null){l.search=c.search;let d=new URLSearchParams(l.search),p=d.getAll("index");if(p.some(_=>_==="")){d.delete("index"),p.filter(A=>A).forEach(A=>d.append("index",A));let _=d.toString();l.search=_?`?${_}`:""}}return(!n||n===".")&&a.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:Si([t,l.pathname])),Hu(l)}function RN(n,e={}){let t=$.useContext(gw);mt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=Sw("useViewTransitionState"),a=uc(n,{relative:e.relative});if(!t.isTransitioning)return!1;let l=Ii(t.currentLocation.pathname,i)||t.currentLocation.pathname,c=Ii(t.nextLocation.pathname,i)||t.nextLocation.pathname;return Rf(a.pathname,c)!=null||Rf(a.pathname,l)!=null}[...uN];const IN="modulepreload",CN=function(n){return"/combustibles/"+n},XT={},Yr=function(e,t,i){let a=Promise.resolve();if(t&&t.length>0){let p=function(g){return Promise.all(g.map(_=>Promise.resolve(_).then(A=>({status:"fulfilled",value:A}),A=>({status:"rejected",reason:A}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),d=c?.nonce||c?.getAttribute("nonce");a=p(t.map(g=>{if(g=CN(g),g in XT)return;XT[g]=!0;const _=g.endsWith(".css"),A=_?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${A}`))return;const T=document.createElement("link");if(T.rel=_?"stylesheet":IN,_||(T.as="script"),T.crossOrigin="",T.href=g,d&&T.setAttribute("nonce",d),document.head.appendChild(T),_)return new Promise((N,O)=>{T.addEventListener("load",N),T.addEventListener("error",()=>O(new Error(`Unable to preload CSS for ${g}`)))})}))}function l(c){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=c,window.dispatchEvent(d),!d.defaultPrevented)throw c}return a.then(c=>{for(const d of c||[])d.status==="rejected"&&l(d.reason);return e().catch(l)})},NN=()=>{};var WT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rw=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let a=n.charCodeAt(i);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(a=65536+((a&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},DN=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const a=n[t++];if(a<128)e[i++]=String.fromCharCode(a);else if(a>191&&a<224){const l=n[t++];e[i++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=n[t++],c=n[t++],d=n[t++],p=((a&7)<<18|(l&63)<<12|(c&63)<<6|d&63)-65536;e[i++]=String.fromCharCode(55296+(p>>10)),e[i++]=String.fromCharCode(56320+(p&1023))}else{const l=n[t++],c=n[t++];e[i++]=String.fromCharCode((a&15)<<12|(l&63)<<6|c&63)}}return e.join("")},Iw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let a=0;a<n.length;a+=3){const l=n[a],c=a+1<n.length,d=c?n[a+1]:0,p=a+2<n.length,g=p?n[a+2]:0,_=l>>2,A=(l&3)<<4|d>>4;let T=(d&15)<<2|g>>6,N=g&63;p||(N=64,c||(T=64)),i.push(t[_],t[A],t[T],t[N])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Rw(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):DN(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let a=0;a<n.length;){const l=t[n.charAt(a++)],d=a<n.length?t[n.charAt(a)]:0;++a;const g=a<n.length?t[n.charAt(a)]:64;++a;const A=a<n.length?t[n.charAt(a)]:64;if(++a,l==null||d==null||g==null||A==null)throw new ON;const T=l<<2|d>>4;if(i.push(T),g!==64){const N=d<<4&240|g>>2;if(i.push(N),A!==64){const O=g<<6&192|A;i.push(O)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class ON extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const MN=function(n){const e=Rw(n);return Iw.encodeByteArray(e,!0)},If=function(n){return MN(n).replace(/\./g,"")},Cw=function(n){try{return Iw.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VN=()=>PN().__FIREBASE_DEFAULTS__,kN=()=>{if(typeof process>"u"||typeof WT>"u")return;const n=WT.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},xN=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Cw(n[1]);return e&&JSON.parse(e)},nd=()=>{try{return NN()||VN()||kN()||xN()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Nw=n=>{var e,t;return(t=(e=nd())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},Dw=n=>{const e=Nw(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},Ow=()=>{var n;return(n=nd())===null||n===void 0?void 0:n.config},Mw=n=>{var e;return(e=nd())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ua(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Xg(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pw(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",a=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},n);return[If(JSON.stringify(t)),If(JSON.stringify(c)),""].join(".")}const Mu={};function UN(){const n={prod:[],emulator:[]};for(const e of Object.keys(Mu))Mu[e]?n.emulator.push(e):n.prod.push(e);return n}function BN(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let ZT=!1;function Wg(n,e){if(typeof window>"u"||typeof document>"u"||!Ua(window.location.host)||Mu[n]===e||Mu[n]||ZT)return;Mu[n]=e;function t(T){return`__firebase__banner__${T}`}const i="__firebase__banner",l=UN().prod.length>0;function c(){const T=document.getElementById(i);T&&T.remove()}function d(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function p(T,N){T.setAttribute("width","24"),T.setAttribute("id",N),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function g(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{ZT=!0,c()},T}function _(T,N){T.setAttribute("id",N),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function A(){const T=BN(i),N=t("text"),O=document.getElementById(N)||document.createElement("span"),H=t("learnmore"),U=document.getElementById(H)||document.createElement("a"),G=t("preprendIcon"),ie=document.getElementById(G)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const ne=T.element;d(ne),_(U,H);const he=g();p(ie,G),ne.append(ie,O,U,he),document.body.appendChild(ne)}l?(O.innerText="Preview backend disconnected.",ie.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ie.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,O.innerText="Preview backend running in this workspace."),O.setAttribute("id",N)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",A):A()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function zN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(dn())}function FN(){var n;const e=(n=nd())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function qN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Zg(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function jN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function HN(){const n=dn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function GN(){return!FN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function rd(){try{return typeof indexedDB=="object"}catch{return!1}}function id(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(i);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{var l;e(((l=a.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}function Jg(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $N="FirebaseError";class ir extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=$N,Object.setPrototypeOf(this,ir.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ps.prototype.create)}}class Ps{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],c=l?KN(l,i):"Error",d=`${this.serviceName}: ${c} (${a}).`;return new ir(a,d,i)}}function KN(n,e){return n.replace(YN,(t,i)=>{const a=e[i];return a!=null?String(a):`<${i}?>`})}const YN=/\{\$([^}]+)}/g;function QN(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Ts(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const a of t){if(!i.includes(a))return!1;const l=n[a],c=e[a];if(JT(l)&&JT(c)){if(!Ts(l,c))return!1}else if(l!==c)return!1}for(const a of i)if(!t.includes(a))return!1;return!0}function JT(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cc(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Su(n){const e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[a,l]=i.split("=");e[decodeURIComponent(a)]=decodeURIComponent(l)}}),e}function Ru(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function XN(n,e){const t=new WN(n,e);return t.subscribe.bind(t)}class WN{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let a;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");ZN(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:i},a.next===void 0&&(a.next=Fm),a.error===void 0&&(a.error=Fm),a.complete===void 0&&(a.complete=Fm);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ZN(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Fm(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JN=1e3,eD=2,tD=4*60*60*1e3,nD=.5;function e0(n,e=JN,t=eD){const i=e*Math.pow(t,n),a=Math.round(nD*i*(Math.random()-.5)*2);return Math.min(tD,i+a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ut(n){return n&&n._delegate?n._delegate:n}class zn{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ba="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rD{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new LN;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&i.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e?.identifier),a=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(a)return null;throw l}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(sD(e))try{this.getOrInitializeService({instanceIdentifier:ba})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});i.resolve(l)}catch{}}}}clearInstance(e=ba){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ba){return this.instances.has(e)}getOptions(e=ba){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);i===d&&c.resolve(a)}return a}onInit(e,t){var i;const a=this.normalizeInstanceIdentifier(t),l=(i=this.onInitCallbacks.get(a))!==null&&i!==void 0?i:new Set;l.add(e),this.onInitCallbacks.set(a,l);const c=this.instances.get(a);return c&&e(c,a),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const a of i)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:iD(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=ba){return this.component?this.component.multipleInstances?e:ba:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function iD(n){return n===ba?void 0:n}function sD(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aD{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new rD(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ke;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(ke||(ke={}));const oD={debug:ke.DEBUG,verbose:ke.VERBOSE,info:ke.INFO,warn:ke.WARN,error:ke.ERROR,silent:ke.SILENT},lD=ke.INFO,uD={[ke.DEBUG]:"log",[ke.VERBOSE]:"log",[ke.INFO]:"info",[ke.WARN]:"warn",[ke.ERROR]:"error"},cD=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),a=uD[e];if(a)console[a](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class hc{constructor(e){this.name=e,this._logLevel=lD,this._logHandler=cD,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ke))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?oD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ke.DEBUG,...e),this._logHandler(this,ke.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ke.VERBOSE,...e),this._logHandler(this,ke.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ke.INFO,...e),this._logHandler(this,ke.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ke.WARN,...e),this._logHandler(this,ke.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ke.ERROR,...e),this._logHandler(this,ke.ERROR,...e)}}const hD=(n,e)=>e.some(t=>n instanceof t);let t0,n0;function fD(){return t0||(t0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function dD(){return n0||(n0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Vw=new WeakMap,cg=new WeakMap,kw=new WeakMap,qm=new WeakMap,ey=new WeakMap;function pD(n){const e=new Promise((t,i)=>{const a=()=>{n.removeEventListener("success",l),n.removeEventListener("error",c)},l=()=>{t(gs(n.result)),a()},c=()=>{i(n.error),a()};n.addEventListener("success",l),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&Vw.set(t,n)}).catch(()=>{}),ey.set(e,n),e}function mD(n){if(cg.has(n))return;const e=new Promise((t,i)=>{const a=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",c),n.removeEventListener("abort",c)},l=()=>{t(),a()},c=()=>{i(n.error||new DOMException("AbortError","AbortError")),a()};n.addEventListener("complete",l),n.addEventListener("error",c),n.addEventListener("abort",c)});cg.set(n,e)}let hg={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return cg.get(n);if(e==="objectStoreNames")return n.objectStoreNames||kw.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return gs(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function gD(n){hg=n(hg)}function yD(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(jm(this),e,...t);return kw.set(i,e.sort?e.sort():[e]),gs(i)}:dD().includes(n)?function(...e){return n.apply(jm(this),e),gs(Vw.get(this))}:function(...e){return gs(n.apply(jm(this),e))}}function _D(n){return typeof n=="function"?yD(n):(n instanceof IDBTransaction&&mD(n),hD(n,fD())?new Proxy(n,hg):n)}function gs(n){if(n instanceof IDBRequest)return pD(n);if(qm.has(n))return qm.get(n);const e=_D(n);return e!==n&&(qm.set(n,e),ey.set(e,n)),e}const jm=n=>ey.get(n);function xw(n,e,{blocked:t,upgrade:i,blocking:a,terminated:l}={}){const c=indexedDB.open(n,e),d=gs(c);return i&&c.addEventListener("upgradeneeded",p=>{i(gs(c.result),p.oldVersion,p.newVersion,gs(c.transaction),p)}),t&&c.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),d.then(p=>{l&&p.addEventListener("close",()=>l()),a&&p.addEventListener("versionchange",g=>a(g.oldVersion,g.newVersion,g))}).catch(()=>{}),d}const vD=["get","getKey","getAll","getAllKeys","count"],ED=["put","add","delete","clear"],Hm=new Map;function r0(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Hm.get(e))return Hm.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,a=ED.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(a||vD.includes(t)))return;const l=async function(c,...d){const p=this.transaction(c,a?"readwrite":"readonly");let g=p.store;return i&&(g=g.index(d.shift())),(await Promise.all([g[t](...d),a&&p.done]))[0]};return Hm.set(e,l),l}gD(n=>({...n,get:(e,t,i)=>r0(e,t)||n.get(e,t,i),has:(e,t)=>!!r0(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TD{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(AD(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function AD(n){const e=n.getComponent();return e?.type==="VERSION"}const fg="@firebase/app",i0="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ci=new hc("@firebase/app"),wD="@firebase/app-compat",bD="@firebase/analytics-compat",SD="@firebase/analytics",RD="@firebase/app-check-compat",ID="@firebase/app-check",CD="@firebase/auth",ND="@firebase/auth-compat",DD="@firebase/database",OD="@firebase/data-connect",MD="@firebase/database-compat",PD="@firebase/functions",VD="@firebase/functions-compat",kD="@firebase/installations",xD="@firebase/installations-compat",LD="@firebase/messaging",UD="@firebase/messaging-compat",BD="@firebase/performance",zD="@firebase/performance-compat",FD="@firebase/remote-config",qD="@firebase/remote-config-compat",jD="@firebase/storage",HD="@firebase/storage-compat",GD="@firebase/firestore",$D="@firebase/ai",KD="@firebase/firestore-compat",YD="firebase",QD="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dg="[DEFAULT]",XD={[fg]:"fire-core",[wD]:"fire-core-compat",[SD]:"fire-analytics",[bD]:"fire-analytics-compat",[ID]:"fire-app-check",[RD]:"fire-app-check-compat",[CD]:"fire-auth",[ND]:"fire-auth-compat",[DD]:"fire-rtdb",[OD]:"fire-data-connect",[MD]:"fire-rtdb-compat",[PD]:"fire-fn",[VD]:"fire-fn-compat",[kD]:"fire-iid",[xD]:"fire-iid-compat",[LD]:"fire-fcm",[UD]:"fire-fcm-compat",[BD]:"fire-perf",[zD]:"fire-perf-compat",[FD]:"fire-rc",[qD]:"fire-rc-compat",[jD]:"fire-gcs",[HD]:"fire-gcs-compat",[GD]:"fire-fst",[KD]:"fire-fst-compat",[$D]:"fire-vertex","fire-js":"fire-js",[YD]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cf=new Map,WD=new Map,pg=new Map;function s0(n,e){try{n.container.addComponent(e)}catch(t){Ci.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function nr(n){const e=n.name;if(pg.has(e))return Ci.debug(`There were multiple attempts to register component ${e}.`),!1;pg.set(e,n);for(const t of Cf.values())s0(t,n);for(const t of WD.values())s0(t,n);return!0}function Mi(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function bn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZD={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ys=new Ps("app","Firebase",ZD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JD{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new zn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ys.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ba=QD;function Lw(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i=Object.assign({name:dg,automaticDataCollectionEnabled:!0},e),a=i.name;if(typeof a!="string"||!a)throw ys.create("bad-app-name",{appName:String(a)});if(t||(t=Ow()),!t)throw ys.create("no-options");const l=Cf.get(a);if(l){if(Ts(t,l.options)&&Ts(i,l.config))return l;throw ys.create("duplicate-app",{appName:a})}const c=new aD(a);for(const p of pg.values())c.addComponent(p);const d=new JD(t,i,c);return Cf.set(a,d),d}function fc(n=dg){const e=Cf.get(n);if(!e&&n===dg&&Ow())return Lw();if(!e)throw ys.create("no-app",{appName:n});return e}function fn(n,e,t){var i;let a=(i=XD[n])!==null&&i!==void 0?i:n;t&&(a+=`-${t}`);const l=a.match(/\s|\//),c=e.match(/\s|\//);if(l||c){const d=[`Unable to register library "${a}" with version "${e}":`];l&&d.push(`library name "${a}" contains illegal characters (whitespace or "/")`),l&&c&&d.push("and"),c&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ci.warn(d.join(" "));return}nr(new zn(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eO="firebase-heartbeat-database",tO=1,Gu="firebase-heartbeat-store";let Gm=null;function Uw(){return Gm||(Gm=xw(eO,tO,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Gu)}catch(t){console.warn(t)}}}}).catch(n=>{throw ys.create("idb-open",{originalErrorMessage:n.message})})),Gm}async function nO(n){try{const t=(await Uw()).transaction(Gu),i=await t.objectStore(Gu).get(Bw(n));return await t.done,i}catch(e){if(e instanceof ir)Ci.warn(e.message);else{const t=ys.create("idb-get",{originalErrorMessage:e?.message});Ci.warn(t.message)}}}async function a0(n,e){try{const i=(await Uw()).transaction(Gu,"readwrite");await i.objectStore(Gu).put(e,Bw(n)),await i.done}catch(t){if(t instanceof ir)Ci.warn(t.message);else{const i=ys.create("idb-set",{originalErrorMessage:t?.message});Ci.warn(i.message)}}}function Bw(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rO=1024,iO=30;class sO{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new oO(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=o0();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:a}),this._heartbeatsCache.heartbeats.length>iO){const c=lO(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Ci.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=o0(),{heartbeatsToSend:i,unsentEntries:a}=aO(this._heartbeatsCache.heartbeats),l=If(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Ci.warn(t),""}}}function o0(){return new Date().toISOString().substring(0,10)}function aO(n,e=rO){const t=[];let i=n.slice();for(const a of n){const l=t.find(c=>c.agent===a.agent);if(l){if(l.dates.push(a.date),l0(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),l0(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class oO{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return rd()?id().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await nO(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return a0(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return a0(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function l0(n){return If(JSON.stringify({version:2,heartbeats:n})).length}function lO(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uO(n){nr(new zn("platform-logger",e=>new TD(e),"PRIVATE")),nr(new zn("heartbeat",e=>new sO(e),"PRIVATE")),fn(fg,i0,n),fn(fg,i0,"esm2017"),fn("fire-js","")}uO("");function ty(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(n);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(n,i[a])&&(t[i[a]]=n[i[a]]);return t}function zw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const cO=zw,Fw=new Ps("auth","Firebase",zw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nf=new hc("@firebase/auth");function hO(n,...e){Nf.logLevel<=ke.WARN&&Nf.warn(`Auth (${Ba}): ${n}`,...e)}function pf(n,...e){Nf.logLevel<=ke.ERROR&&Nf.error(`Auth (${Ba}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rr(n,...e){throw ry(n,...e)}function mr(n,...e){return ry(n,...e)}function ny(n,e,t){const i=Object.assign(Object.assign({},cO()),{[e]:t});return new Ps("auth","Firebase",i).create(e,{appName:n.name})}function Ri(n){return ny(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function fO(n,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&rr(n,"argument-error"),ny(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ry(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return Fw.create(n,...e)}function we(n,e,...t){if(!n)throw ry(e,...t)}function wi(n){const e="INTERNAL ASSERTION FAILED: "+n;throw pf(e),new Error(e)}function Ni(n,e){n||wi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mg(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function dO(){return u0()==="http:"||u0()==="https:"}function u0(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pO(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(dO()||Zg()||"connection"in navigator)?navigator.onLine:!0}function mO(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ni(t>e,"Short delay should be less than long delay!"),this.isMobile=zN()||jN()}get(){return pO()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iy(n,e){Ni(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qw{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;wi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;wi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;wi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gO={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yO=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],_O=new dc(3e4,6e4);function Vs(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function ks(n,e,t,i,a={}){return jw(n,a,async()=>{let l={},c={};i&&(e==="GET"?c=i:l={body:JSON.stringify(i)});const d=cc(Object.assign({key:n.config.apiKey},c)).slice(1),p=await n._getAdditionalHeaders();p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode);const g=Object.assign({method:e,headers:p},l);return qN()||(g.referrerPolicy="no-referrer"),n.emulatorConfig&&Ua(n.emulatorConfig.host)&&(g.credentials="include"),qw.fetch()(await Hw(n,n.config.apiHost,t,d),g)})}async function jw(n,e,t){n._canInitEmulator=!1;const i=Object.assign(Object.assign({},gO),e);try{const a=new EO(n),l=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw nf(n,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const d=l.ok?c.errorMessage:c.error.message,[p,g]=d.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw nf(n,"credential-already-in-use",c);if(p==="EMAIL_EXISTS")throw nf(n,"email-already-in-use",c);if(p==="USER_DISABLED")throw nf(n,"user-disabled",c);const _=i[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw ny(n,_,g);rr(n,_)}}catch(a){if(a instanceof ir)throw a;rr(n,"network-request-failed",{message:String(a)})}}async function pc(n,e,t,i,a={}){const l=await ks(n,e,t,i,a);return"mfaPendingCredential"in l&&rr(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function Hw(n,e,t,i){const a=`${e}${t}?${i}`,l=n,c=l.config.emulator?iy(n.config,a):`${n.config.apiScheme}://${a}`;return yO.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}function vO(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class EO{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(mr(this.auth,"network-request-failed")),_O.get())})}}function nf(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const a=mr(n,e,i);return a.customData._tokenResponse=t,a}function c0(n){return n!==void 0&&n.enterprise!==void 0}class TO{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return vO(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function AO(n,e){return ks(n,"GET","/v2/recaptchaConfig",Vs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wO(n,e){return ks(n,"POST","/v1/accounts:delete",e)}async function Df(n,e){return ks(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pu(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function bO(n,e=!1){const t=ut(n),i=await t.getIdToken(e),a=sy(i);we(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,c=l?.sign_in_provider;return{claims:a,token:i,authTime:Pu($m(a.auth_time)),issuedAtTime:Pu($m(a.iat)),expirationTime:Pu($m(a.exp)),signInProvider:c||null,signInSecondFactor:l?.sign_in_second_factor||null}}function $m(n){return Number(n)*1e3}function sy(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return pf("JWT malformed, contained fewer than 3 sections"),null;try{const a=Cw(t);return a?JSON.parse(a):(pf("Failed to decode base64 JWT payload"),null)}catch(a){return pf("Caught error parsing JWT payload as JSON",a?.toString()),null}}function h0(n){const e=sy(n);return we(e,"internal-error"),we(typeof e.exp<"u","internal-error"),we(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $u(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof ir&&SO(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function SO({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RO{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const a=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Pu(this.lastLoginAt),this.creationTime=Pu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Of(n){var e;const t=n.auth,i=await n.getIdToken(),a=await $u(n,Df(t,{idToken:i}));we(a?.users.length,t,"internal-error");const l=a.users[0];n._notifyReloadListener(l);const c=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?Gw(l.providerUserInfo):[],d=CO(n.providerData,c),p=n.isAnonymous,g=!(n.email&&l.passwordHash)&&!d?.length,_=p?g:!1,A={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:d,metadata:new gg(l.createdAt,l.lastLoginAt),isAnonymous:_};Object.assign(n,A)}async function IO(n){const e=ut(n);await Of(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function CO(n,e){return[...n.filter(i=>!e.some(a=>a.providerId===i.providerId)),...e]}function Gw(n){return n.map(e=>{var{providerId:t}=e,i=ty(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NO(n,e){const t=await jw(n,{},async()=>{const i=cc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=n.config,c=await Hw(n,a,"/v1/token",`key=${l}`),d=await n._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:d,body:i};return n.emulatorConfig&&Ua(n.emulatorConfig.host)&&(p.credentials="include"),qw.fetch()(c,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function DO(n,e){return ks(n,"POST","/v2/accounts:revokeToken",Vs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){we(e.idToken,"internal-error"),we(typeof e.idToken<"u","internal-error"),we(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):h0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){we(e.length!==0,"internal-error");const t=h0(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(we(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:a,expiresIn:l}=await NO(e,t);this.updateTokensAndExpiration(i,a,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:a,expirationTime:l}=t,c=new jo;return i&&(we(typeof i=="string","internal-error",{appName:e}),c.refreshToken=i),a&&(we(typeof a=="string","internal-error",{appName:e}),c.accessToken=a),l&&(we(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new jo,this.toJSON())}_performRefresh(){return wi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cs(n,e){we(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class dr{constructor(e){var{uid:t,auth:i,stsTokenManager:a}=e,l=ty(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new RO(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new gg(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await $u(this,this.stsTokenManager.getToken(this.auth,e));return we(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return bO(this,e)}reload(){return IO(this)}_assign(e){this!==e&&(we(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new dr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){we(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Of(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(bn(this.auth.app))return Promise.reject(Ri(this.auth));const e=await this.getIdToken();return await $u(this,wO(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,a,l,c,d,p,g,_;const A=(i=t.displayName)!==null&&i!==void 0?i:void 0,T=(a=t.email)!==null&&a!==void 0?a:void 0,N=(l=t.phoneNumber)!==null&&l!==void 0?l:void 0,O=(c=t.photoURL)!==null&&c!==void 0?c:void 0,H=(d=t.tenantId)!==null&&d!==void 0?d:void 0,U=(p=t._redirectEventId)!==null&&p!==void 0?p:void 0,G=(g=t.createdAt)!==null&&g!==void 0?g:void 0,ie=(_=t.lastLoginAt)!==null&&_!==void 0?_:void 0,{uid:ne,emailVerified:he,isAnonymous:ce,providerData:Ee,stsTokenManager:P}=t;we(ne&&P,e,"internal-error");const R=jo.fromJSON(this.name,P);we(typeof ne=="string",e,"internal-error"),cs(A,e.name),cs(T,e.name),we(typeof he=="boolean",e,"internal-error"),we(typeof ce=="boolean",e,"internal-error"),cs(N,e.name),cs(O,e.name),cs(H,e.name),cs(U,e.name),cs(G,e.name),cs(ie,e.name);const S=new dr({uid:ne,auth:e,email:T,emailVerified:he,displayName:A,isAnonymous:ce,photoURL:O,phoneNumber:N,tenantId:H,stsTokenManager:R,createdAt:G,lastLoginAt:ie});return Ee&&Array.isArray(Ee)&&(S.providerData=Ee.map(C=>Object.assign({},C))),U&&(S._redirectEventId=U),S}static async _fromIdTokenResponse(e,t,i=!1){const a=new jo;a.updateFromServerResponse(t);const l=new dr({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:i});return await Of(l),l}static async _fromGetAccountInfoResponse(e,t,i){const a=t.users[0];we(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?Gw(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!l?.length,d=new jo;d.updateFromIdToken(i);const p=new dr({uid:a.localId,auth:e,stsTokenManager:d,isAnonymous:c}),g={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new gg(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!l?.length};return Object.assign(p,g),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f0=new Map;function bi(n){Ni(n instanceof Function,"Expected a class definition");let e=f0.get(n);return e?(Ni(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,f0.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $w{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}$w.type="NONE";const d0=$w;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mf(n,e,t){return`firebase:${n}:${e}:${t}`}class Ho{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:a,name:l}=this.auth;this.fullUserKey=mf(this.userKey,a.apiKey,l),this.fullPersistenceKey=mf("persistence",a.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Df(this.auth,{idToken:e}).catch(()=>{});return t?dr._fromGetAccountInfoResponse(this.auth,t,e):null}return dr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Ho(bi(d0),e,i);const a=(await Promise.all(t.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let l=a[0]||bi(d0);const c=mf(i,e.config.apiKey,e.name);let d=null;for(const g of t)try{const _=await g._get(c);if(_){let A;if(typeof _=="string"){const T=await Df(e,{idToken:_}).catch(()=>{});if(!T)break;A=await dr._fromGetAccountInfoResponse(e,T,_)}else A=dr._fromJSON(e,_);g!==l&&(d=A),l=g;break}}catch{}const p=a.filter(g=>g._shouldAllowMigration);return!l._shouldAllowMigration||!p.length?new Ho(l,e,i):(l=p[0],d&&await l._set(c,d.toJSON()),await Promise.all(t.map(async g=>{if(g!==l)try{await g._remove(c)}catch{}})),new Ho(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p0(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Xw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Kw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Zw(e))return"Blackberry";if(Jw(e))return"Webos";if(Yw(e))return"Safari";if((e.includes("chrome/")||Qw(e))&&!e.includes("edge/"))return"Chrome";if(Ww(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if(i?.length===2)return i[1]}return"Other"}function Kw(n=dn()){return/firefox\//i.test(n)}function Yw(n=dn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Qw(n=dn()){return/crios\//i.test(n)}function Xw(n=dn()){return/iemobile/i.test(n)}function Ww(n=dn()){return/android/i.test(n)}function Zw(n=dn()){return/blackberry/i.test(n)}function Jw(n=dn()){return/webos/i.test(n)}function ay(n=dn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function OO(n=dn()){var e;return ay(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function MO(){return HN()&&document.documentMode===10}function eb(n=dn()){return ay(n)||Ww(n)||Jw(n)||Zw(n)||/windows phone/i.test(n)||Xw(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tb(n,e=[]){let t;switch(n){case"Browser":t=p0(dn());break;case"Worker":t=`${p0(dn())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ba}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PO{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((c,d)=>{try{const p=e(l);c(p)}catch(p){d(p)}});i.onAbort=t,this.queue.push(i);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VO(n,e={}){return ks(n,"GET","/v2/passwordPolicy",Vs(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kO=6;class xO{constructor(e){var t,i,a,l;const c=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=c.minPasswordLength)!==null&&t!==void 0?t:kO,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(a=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&a!==void 0?a:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,a,l,c,d;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(t=p.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),p.isValid&&(p.isValid=(i=p.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),p.isValid&&(p.isValid=(a=p.containsLowercaseLetter)!==null&&a!==void 0?a:!0),p.isValid&&(p.isValid=(l=p.containsUppercaseLetter)!==null&&l!==void 0?l:!0),p.isValid&&(p.isValid=(c=p.containsNumericCharacter)!==null&&c!==void 0?c:!0),p.isValid&&(p.isValid=(d=p.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),p}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let a=0;a<e.length;a++)i=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LO{constructor(e,t,i,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new m0(this),this.idTokenSubscription=new m0(this),this.beforeStateQueue=new PO(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Fw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=bi(t)),this._initializationPromise=this.queue(async()=>{var i,a,l;if(!this._deleted&&(this.persistenceManager=await Ho.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((a=this._popupRedirectResolver)===null||a===void 0)&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Df(this,{idToken:e}),i=await dr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(bn(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let a=i,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,d=a?._redirectEventId,p=await this.tryRedirectSignIn(e);(!c||c===d)&&p?.user&&(a=p.user,l=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(a)}catch(c){a=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return we(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Of(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=mO()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(bn(this.app))return Promise.reject(Ri(this));const t=e?ut(e):null;return t&&we(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&we(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return bn(this.app)?Promise.reject(Ri(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return bn(this.app)?Promise.reject(Ri(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(bi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await VO(this),t=new xO(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ps("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await DO(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&bi(e)||this._popupRedirectResolver;we(t,this,"argument-error"),this.redirectPersistenceManager=await Ho.create(this,[bi(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,a){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(we(d,this,"internal-error"),d.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,i,a);return()=>{c=!0,p()}}else{const p=e.addObserver(t);return()=>{c=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return we(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=tb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);const a=await this._getAppCheckToken();return a&&(t["X-Firebase-AppCheck"]=a),t}async _getAppCheckToken(){var e;if(bn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&hO(`Error while retrieving App Check token: ${t.error}`),t?.token}}function xs(n){return ut(n)}class m0{constructor(e){this.auth=e,this.observer=null,this.addObserver=XN(t=>this.observer=t)}get next(){return we(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function UO(n){sd=n}function nb(n){return sd.loadJS(n)}function BO(){return sd.recaptchaEnterpriseScript}function zO(){return sd.gapiScript}function FO(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class qO{constructor(){this.enterprise=new jO}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class jO{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const HO="recaptcha-enterprise",rb="NO_RECAPTCHA";class GO{constructor(e){this.type=HO,this.auth=xs(e)}async verify(e="verify",t=!1){async function i(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(c,d)=>{AO(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const g=new TO(p);return l.tenantId==null?l._agentRecaptchaConfig=g:l._tenantRecaptchaConfigs[l.tenantId]=g,c(g.siteKey)}}).catch(p=>{d(p)})})}function a(l,c,d){const p=window.grecaptcha;c0(p)?p.enterprise.ready(()=>{p.enterprise.execute(l,{action:e}).then(g=>{c(g)}).catch(()=>{c(rb)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new qO().execute("siteKey",{action:"verify"}):new Promise((l,c)=>{i(this.auth).then(d=>{if(!t&&c0(window.grecaptcha))a(d,l,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let p=BO();p.length!==0&&(p+=d),nb(p).then(()=>{a(d,l,c)}).catch(g=>{c(g)})}}).catch(d=>{c(d)})})}}async function g0(n,e,t,i=!1,a=!1){const l=new GO(n);let c;if(a)c=rb;else try{c=await l.verify(t)}catch{c=await l.verify(t,!0)}const d=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const p=d.phoneEnrollmentInfo.phoneNumber,g=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:g,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const p=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return i?Object.assign(d,{captchaResp:c}):Object.assign(d,{captchaResponse:c}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function yg(n,e,t,i,a){var l;if(!((l=n._getRecaptchaConfig())===null||l===void 0)&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await g0(n,e,t,t==="getOobCode");return i(n,c)}else return i(n,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await g0(n,e,t,t==="getOobCode");return i(n,d)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $O(n,e){const t=Mi(n,"auth");if(t.isInitialized()){const a=t.getImmediate(),l=t.getOptions();if(Ts(l,e??{}))return a;rr(a,"already-initialized")}return t.initialize({options:e})}function KO(n,e){const t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(bi);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e?.popupRedirectResolver)}function YO(n,e,t){const i=xs(n);we(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const a=!1,l=ib(e),{host:c,port:d}=QO(e),p=d===null?"":`:${d}`,g={url:`${l}//${c}${p}/`},_=Object.freeze({host:c,port:d,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!i._canInitEmulator){we(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),we(Ts(g,i.config.emulator)&&Ts(_,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=g,i.emulatorConfig=_,i.settings.appVerificationDisabledForTesting=!0,Ua(c)?(Xg(`${l}//${c}${p}`),Wg("Auth",!0)):XO()}function ib(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function QO(n){const e=ib(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(i);if(a){const l=a[1];return{host:l,port:y0(i.substr(l.length+1))}}else{const[l,c]=i.split(":");return{host:l,port:y0(c)}}}function y0(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function XO(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oy{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return wi("not implemented")}_getIdTokenResponse(e){return wi("not implemented")}_linkToIdToken(e,t){return wi("not implemented")}_getReauthenticationResolver(e){return wi("not implemented")}}async function WO(n,e){return ks(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZO(n,e){return pc(n,"POST","/v1/accounts:signInWithPassword",Vs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JO(n,e){return pc(n,"POST","/v1/accounts:signInWithEmailLink",Vs(n,e))}async function eM(n,e){return pc(n,"POST","/v1/accounts:signInWithEmailLink",Vs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku extends oy{constructor(e,t,i,a=null){super("password",i),this._email=e,this._password=t,this._tenantId=a}static _fromEmailAndPassword(e,t){return new Ku(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new Ku(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return yg(e,t,"signInWithPassword",ZO);case"emailLink":return JO(e,{email:this._email,oobCode:this._password});default:rr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return yg(e,i,"signUpPassword",WO);case"emailLink":return eM(e,{idToken:t,email:this._email,oobCode:this._password});default:rr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Go(n,e){return pc(n,"POST","/v1/accounts:signInWithIdp",Vs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tM="http://localhost";class Ma extends oy{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ma(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):rr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:a}=t,l=ty(t,["providerId","signInMethod"]);if(!i||!a)return null;const c=new Ma(i,a);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return Go(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Go(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Go(e,t)}buildRequest(){const e={requestUri:tM,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=cc(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nM(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function rM(n){const e=Su(Ru(n)).link,t=e?Su(Ru(e)).deep_link_id:null,i=Su(Ru(n)).deep_link_id;return(i?Su(Ru(i)).link:null)||i||t||e||n}class ly{constructor(e){var t,i,a,l,c,d;const p=Su(Ru(e)),g=(t=p.apiKey)!==null&&t!==void 0?t:null,_=(i=p.oobCode)!==null&&i!==void 0?i:null,A=nM((a=p.mode)!==null&&a!==void 0?a:null);we(g&&_&&A,"argument-error"),this.apiKey=g,this.operation=A,this.code=_,this.continueUrl=(l=p.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(c=p.lang)!==null&&c!==void 0?c:null,this.tenantId=(d=p.tenantId)!==null&&d!==void 0?d:null}static parseLink(e){const t=rM(e);try{return new ly(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al{constructor(){this.providerId=al.PROVIDER_ID}static credential(e,t){return Ku._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=ly.parseLink(t);return we(i,"argument-error"),Ku._fromEmailAndCode(e,i.code,i.tenantId)}}al.PROVIDER_ID="password";al.EMAIL_PASSWORD_SIGN_IN_METHOD="password";al.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uy{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc extends uy{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs extends mc{constructor(){super("facebook.com")}static credential(e){return Ma._fromParams({providerId:hs.PROVIDER_ID,signInMethod:hs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return hs.credentialFromTaggedObject(e)}static credentialFromError(e){return hs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return hs.credential(e.oauthAccessToken)}catch{return null}}}hs.FACEBOOK_SIGN_IN_METHOD="facebook.com";hs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai extends mc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ma._fromParams({providerId:Ai.PROVIDER_ID,signInMethod:Ai.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ai.credentialFromTaggedObject(e)}static credentialFromError(e){return Ai.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return Ai.credential(t,i)}catch{return null}}}Ai.GOOGLE_SIGN_IN_METHOD="google.com";Ai.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs extends mc{constructor(){super("github.com")}static credential(e){return Ma._fromParams({providerId:fs.PROVIDER_ID,signInMethod:fs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return fs.credentialFromTaggedObject(e)}static credentialFromError(e){return fs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return fs.credential(e.oauthAccessToken)}catch{return null}}}fs.GITHUB_SIGN_IN_METHOD="github.com";fs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds extends mc{constructor(){super("twitter.com")}static credential(e,t){return Ma._fromParams({providerId:ds.PROVIDER_ID,signInMethod:ds.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ds.credentialFromTaggedObject(e)}static credentialFromError(e){return ds.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return ds.credential(t,i)}catch{return null}}}ds.TWITTER_SIGN_IN_METHOD="twitter.com";ds.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iM(n,e){return pc(n,"POST","/v1/accounts:signUp",Vs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,a=!1){const l=await dr._fromIdTokenResponse(e,i,a),c=_0(i);return new Pa({user:l,providerId:c,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const a=_0(i);return new Pa({user:e,providerId:a,_tokenResponse:i,operationType:t})}}function _0(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf extends ir{constructor(e,t,i,a){var l;super(t.code,t.message),this.operationType=i,this.user=a,Object.setPrototypeOf(this,Mf.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,a){return new Mf(e,t,i,a)}}function sb(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Mf._fromErrorAndOperation(n,l,e,i):l})}async function sM(n,e,t=!1){const i=await $u(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Pa._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aM(n,e,t=!1){const{auth:i}=n;if(bn(i.app))return Promise.reject(Ri(i));const a="reauthenticate";try{const l=await $u(n,sb(i,a,e,n),t);we(l.idToken,i,"internal-error");const c=sy(l.idToken);we(c,i,"internal-error");const{sub:d}=c;return we(n.uid===d,i,"user-mismatch"),Pa._forOperation(n,a,l)}catch(l){throw l?.code==="auth/user-not-found"&&rr(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ab(n,e,t=!1){if(bn(n.app))return Promise.reject(Ri(n));const i="signIn",a=await sb(n,i,e),l=await Pa._fromIdTokenResponse(n,i,a);return t||await n._updateCurrentUser(l.user),l}async function oM(n,e){return ab(xs(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ob(n){const e=xs(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function lM(n,e,t){if(bn(n.app))return Promise.reject(Ri(n));const i=xs(n),c=await yg(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",iM).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&ob(n),p}),d=await Pa._fromIdTokenResponse(i,"signIn",c);return await i._updateCurrentUser(d.user),d}function uM(n,e,t){return bn(n.app)?Promise.reject(Ri(n)):oM(ut(n),al.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&ob(n),i})}function cM(n,e,t,i){return ut(n).onIdTokenChanged(e,t,i)}function hM(n,e,t){return ut(n).beforeAuthStateChanged(e,t)}function fM(n,e,t,i){return ut(n).onAuthStateChanged(e,t,i)}function dM(n){return ut(n).signOut()}const Pf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lb{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Pf,"1"),this.storage.removeItem(Pf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pM=1e3,mM=10;class ub extends lb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=eb(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),a=this.localCache[t];i!==a&&e(t,a,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,d,p)=>{this.notifyListeners(c,p)});return}const i=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(i);!t&&this.localCache[i]===c||this.notifyListeners(i,c)},l=this.storage.getItem(i);MO()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,mM):a()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},pM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}ub.type="LOCAL";const gM=ub;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cb extends lb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}cb.type="SESSION";const hb=cb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yM(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ad{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const i=new ad(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:a,data:l}=t.data,c=this.handlersMap[a];if(!c?.size)return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:a});const d=Array.from(c).map(async g=>g(t.origin,l)),p=await yM(d);t.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ad.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cy(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _M{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,c;return new Promise((d,p)=>{const g=cy("",20);a.port1.start();const _=setTimeout(()=>{p(new Error("unsupported_event"))},i);c={messageChannel:a,onMessage(A){const T=A;if(T.data.eventId===g)switch(T.data.status){case"ack":clearTimeout(_),l=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),d(T.data.response);break;default:clearTimeout(_),clearTimeout(l),p(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:g,data:t},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lr(){return window}function vM(n){Lr().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fb(){return typeof Lr().WorkerGlobalScope<"u"&&typeof Lr().importScripts=="function"}async function EM(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function TM(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function AM(){return fb()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const db="firebaseLocalStorageDb",wM=1,Vf="firebaseLocalStorage",pb="fbase_key";class gc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function od(n,e){return n.transaction([Vf],e?"readwrite":"readonly").objectStore(Vf)}function bM(){const n=indexedDB.deleteDatabase(db);return new gc(n).toPromise()}function _g(){const n=indexedDB.open(db,wM);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(Vf,{keyPath:pb})}catch(a){t(a)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(Vf)?e(i):(i.close(),await bM(),e(await _g()))})})}async function v0(n,e,t){const i=od(n,!0).put({[pb]:e,value:t});return new gc(i).toPromise()}async function SM(n,e){const t=od(n,!1).get(e),i=await new gc(t).toPromise();return i===void 0?null:i.value}function E0(n,e){const t=od(n,!0).delete(e);return new gc(t).toPromise()}const RM=800,IM=3;class mb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await _g(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>IM)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return fb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ad._getInstance(AM()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await EM(),!this.activeServiceWorker)return;this.sender=new _M(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((t=i[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||TM()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await _g();return await v0(e,Pf,"1"),await E0(e,Pf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>v0(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>SM(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>E0(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=od(a,!1).getAll();return new gc(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)i.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!i.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),RM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}mb.type="LOCAL";const CM=mb;new dc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gb(n,e){return e?bi(e):(we(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hy extends oy{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Go(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Go(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Go(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function NM(n){return ab(n.auth,new hy(n),n.bypassAuthState)}function DM(n){const{auth:e,user:t}=n;return we(t,e,"internal-error"),aM(t,new hy(n),n.bypassAuthState)}async function OM(n){const{auth:e,user:t}=n;return we(t,e,"internal-error"),sM(t,new hy(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yb{constructor(e,t,i,a,l=!1){this.auth=e,this.resolver=i,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:a,tenantId:l,error:c,type:d}=e;if(c){this.reject(c);return}const p={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(p))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return NM;case"linkViaPopup":case"linkViaRedirect":return OM;case"reauthViaPopup":case"reauthViaRedirect":return DM;default:rr(this.auth,"internal-error")}}resolve(e){Ni(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ni(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MM=new dc(2e3,1e4);async function PM(n,e,t){if(bn(n.app))return Promise.reject(mr(n,"operation-not-supported-in-this-environment"));const i=xs(n);fO(n,e,uy);const a=gb(i,t);return new Ra(i,"signInViaPopup",e,a).executeNotNull()}class Ra extends yb{constructor(e,t,i,a,l){super(e,t,a,l),this.provider=i,this.authWindow=null,this.pollId=null,Ra.currentPopupAction&&Ra.currentPopupAction.cancel(),Ra.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return we(e,this.auth,"internal-error"),e}async onExecution(){Ni(this.filter.length===1,"Popup operations only handle one event");const e=cy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(mr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(mr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ra.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if(!((i=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(mr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,MM.get())};e()}}Ra.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VM="pendingRedirect",gf=new Map;class kM extends yb{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=gf.get(this.auth._key());if(!e){try{const i=await xM(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}gf.set(this.auth._key(),e)}return this.bypassAuthState||gf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function xM(n,e){const t=BM(e),i=UM(n);if(!await i._isAvailable())return!1;const a=await i._get(t)==="true";return await i._remove(t),a}function LM(n,e){gf.set(n._key(),e)}function UM(n){return bi(n._redirectPersistence)}function BM(n){return mf(VM,n.config.apiKey,n.name)}async function zM(n,e,t=!1){if(bn(n.app))return Promise.reject(Ri(n));const i=xs(n),a=gb(i,e),c=await new kM(i,a,t).execute();return c&&!t&&(delete c.user._redirectEventId,await i._persistUserIfCurrent(c.user),await i._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FM=10*60*1e3;class qM{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!jM(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!_b(e)){const a=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(mr(this.auth,a))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=FM&&this.cachedEventUids.clear(),this.cachedEventUids.has(T0(e))}saveEventToCache(e){this.cachedEventUids.add(T0(e)),this.lastProcessedEventTime=Date.now()}}function T0(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function _b({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function jM(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return _b(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HM(n,e={}){return ks(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GM=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,$M=/^https?/;async function KM(n){if(n.config.emulator)return;const{authorizedDomains:e}=await HM(n);for(const t of e)try{if(YM(t))return}catch{}rr(n,"unauthorized-domain")}function YM(n){const e=mg(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===i}if(!$M.test(t))return!1;if(GM.test(n))return i===n;const a=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QM=new dc(3e4,6e4);function A0(){const n=Lr().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function XM(n){return new Promise((e,t)=>{var i,a,l;function c(){A0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{A0(),t(mr(n,"network-request-failed"))},timeout:QM.get()})}if(!((a=(i=Lr().gapi)===null||i===void 0?void 0:i.iframes)===null||a===void 0)&&a.Iframe)e(gapi.iframes.getContext());else if(!((l=Lr().gapi)===null||l===void 0)&&l.load)c();else{const d=FO("iframefcb");return Lr()[d]=()=>{gapi.load?c():t(mr(n,"network-request-failed"))},nb(`${zO()}?onload=${d}`).catch(p=>t(p))}}).catch(e=>{throw yf=null,e})}let yf=null;function WM(n){return yf=yf||XM(n),yf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZM=new dc(5e3,15e3),JM="__/auth/iframe",e2="emulator/auth/iframe",t2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},n2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function r2(n){const e=n.config;we(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?iy(e,e2):`https://${n.config.authDomain}/${JM}`,i={apiKey:e.apiKey,appName:n.name,v:Ba},a=n2.get(n.config.apiHost);a&&(i.eid=a);const l=n._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${cc(i).slice(1)}`}async function i2(n){const e=await WM(n),t=Lr().gapi;return we(t,n,"internal-error"),e.open({where:document.body,url:r2(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:t2,dontclear:!0},i=>new Promise(async(a,l)=>{await i.restyle({setHideOnLeave:!1});const c=mr(n,"network-request-failed"),d=Lr().setTimeout(()=>{l(c)},ZM.get());function p(){Lr().clearTimeout(d),a(i)}i.ping(p).then(p,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},a2=500,o2=600,l2="_blank",u2="http://localhost";class w0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function c2(n,e,t,i=a2,a=o2){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-i)/2,0).toString();let d="";const p=Object.assign(Object.assign({},s2),{width:i.toString(),height:a.toString(),top:l,left:c}),g=dn().toLowerCase();t&&(d=Qw(g)?l2:t),Kw(g)&&(e=e||u2,p.scrollbars="yes");const _=Object.entries(p).reduce((T,[N,O])=>`${T}${N}=${O},`,"");if(OO(g)&&d!=="_self")return h2(e||"",d),new w0(null);const A=window.open(e||"",d,_);we(A,n,"popup-blocked");try{A.focus()}catch{}return new w0(A)}function h2(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f2="__/auth/handler",d2="emulator/auth/handler",p2=encodeURIComponent("fac");async function b0(n,e,t,i,a,l){we(n.config.authDomain,n,"auth-domain-config-required"),we(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:Ba,eventId:a};if(e instanceof uy){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",QN(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,A]of Object.entries({}))c[_]=A}if(e instanceof mc){const _=e.getScopes().filter(A=>A!=="");_.length>0&&(c.scopes=_.join(","))}n.tenantId&&(c.tid=n.tenantId);const d=c;for(const _ of Object.keys(d))d[_]===void 0&&delete d[_];const p=await n._getAppCheckToken(),g=p?`#${p2}=${encodeURIComponent(p)}`:"";return`${m2(n)}?${cc(d).slice(1)}${g}`}function m2({config:n}){return n.emulator?iy(n,d2):`https://${n.authDomain}/${f2}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Km="webStorageSupport";class g2{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=hb,this._completeRedirectFn=zM,this._overrideRedirectResult=LM}async _openPopup(e,t,i,a){var l;Ni((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const c=await b0(e,t,i,mg(),a);return c2(e,c,cy())}async _openRedirect(e,t,i,a){await this._originValidation(e);const l=await b0(e,t,i,mg(),a);return vM(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:l}=this.eventManagers[t];return a?Promise.resolve(a):(Ni(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await i2(e),i=new qM(e);return t.register("authEvent",a=>(we(a?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Km,{type:Km},a=>{var l;const c=(l=a?.[0])===null||l===void 0?void 0:l[Km];c!==void 0&&t(!!c),rr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=KM(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return eb()||Yw()||ay()}}const y2=g2;var S0="@firebase/auth",R0="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _2{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){we(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v2(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function E2(n){nr(new zn("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=i.options;we(c&&!c.includes(":"),"invalid-api-key",{appName:i.name});const p={apiKey:c,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:tb(n)},g=new LO(i,a,l,p);return KO(g,t),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),nr(new zn("auth-internal",e=>{const t=xs(e.getProvider("auth").getImmediate());return(i=>new _2(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),fn(S0,R0,v2(n)),fn(S0,R0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T2=5*60,A2=Mw("authIdTokenMaxAge")||T2;let I0=null;const w2=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>A2)return;const a=t?.token;I0!==a&&(I0=a,await fetch(n,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function b2(n=fc()){const e=Mi(n,"auth");if(e.isInitialized())return e.getImmediate();const t=$O(n,{popupRedirectResolver:y2,persistence:[CM,gM,hb]}),i=Mw("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const c=w2(l.toString());hM(t,c,()=>c(t.currentUser)),cM(t,d=>c(d))}}const a=Nw("auth");return a&&YO(t,`http://${a}`),t}function S2(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}UO({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=a=>{const l=mr("internal-error");l.customData=a,t(l)},i.type="text/javascript",i.charset="UTF-8",S2().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});E2("Browser");var R2="firebase",I2="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */fn(R2,I2,"app");var C0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var _s,vb;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(P,R){function S(){}S.prototype=R.prototype,P.D=R.prototype,P.prototype=new S,P.prototype.constructor=P,P.C=function(C,V,x){for(var D=Array(arguments.length-2),Tt=2;Tt<arguments.length;Tt++)D[Tt-2]=arguments[Tt];return R.prototype[V].apply(C,D)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(P,R,S){S||(S=0);var C=Array(16);if(typeof R=="string")for(var V=0;16>V;++V)C[V]=R.charCodeAt(S++)|R.charCodeAt(S++)<<8|R.charCodeAt(S++)<<16|R.charCodeAt(S++)<<24;else for(V=0;16>V;++V)C[V]=R[S++]|R[S++]<<8|R[S++]<<16|R[S++]<<24;R=P.g[0],S=P.g[1],V=P.g[2];var x=P.g[3],D=R+(x^S&(V^x))+C[0]+3614090360&4294967295;R=S+(D<<7&4294967295|D>>>25),D=x+(V^R&(S^V))+C[1]+3905402710&4294967295,x=R+(D<<12&4294967295|D>>>20),D=V+(S^x&(R^S))+C[2]+606105819&4294967295,V=x+(D<<17&4294967295|D>>>15),D=S+(R^V&(x^R))+C[3]+3250441966&4294967295,S=V+(D<<22&4294967295|D>>>10),D=R+(x^S&(V^x))+C[4]+4118548399&4294967295,R=S+(D<<7&4294967295|D>>>25),D=x+(V^R&(S^V))+C[5]+1200080426&4294967295,x=R+(D<<12&4294967295|D>>>20),D=V+(S^x&(R^S))+C[6]+2821735955&4294967295,V=x+(D<<17&4294967295|D>>>15),D=S+(R^V&(x^R))+C[7]+4249261313&4294967295,S=V+(D<<22&4294967295|D>>>10),D=R+(x^S&(V^x))+C[8]+1770035416&4294967295,R=S+(D<<7&4294967295|D>>>25),D=x+(V^R&(S^V))+C[9]+2336552879&4294967295,x=R+(D<<12&4294967295|D>>>20),D=V+(S^x&(R^S))+C[10]+4294925233&4294967295,V=x+(D<<17&4294967295|D>>>15),D=S+(R^V&(x^R))+C[11]+2304563134&4294967295,S=V+(D<<22&4294967295|D>>>10),D=R+(x^S&(V^x))+C[12]+1804603682&4294967295,R=S+(D<<7&4294967295|D>>>25),D=x+(V^R&(S^V))+C[13]+4254626195&4294967295,x=R+(D<<12&4294967295|D>>>20),D=V+(S^x&(R^S))+C[14]+2792965006&4294967295,V=x+(D<<17&4294967295|D>>>15),D=S+(R^V&(x^R))+C[15]+1236535329&4294967295,S=V+(D<<22&4294967295|D>>>10),D=R+(V^x&(S^V))+C[1]+4129170786&4294967295,R=S+(D<<5&4294967295|D>>>27),D=x+(S^V&(R^S))+C[6]+3225465664&4294967295,x=R+(D<<9&4294967295|D>>>23),D=V+(R^S&(x^R))+C[11]+643717713&4294967295,V=x+(D<<14&4294967295|D>>>18),D=S+(x^R&(V^x))+C[0]+3921069994&4294967295,S=V+(D<<20&4294967295|D>>>12),D=R+(V^x&(S^V))+C[5]+3593408605&4294967295,R=S+(D<<5&4294967295|D>>>27),D=x+(S^V&(R^S))+C[10]+38016083&4294967295,x=R+(D<<9&4294967295|D>>>23),D=V+(R^S&(x^R))+C[15]+3634488961&4294967295,V=x+(D<<14&4294967295|D>>>18),D=S+(x^R&(V^x))+C[4]+3889429448&4294967295,S=V+(D<<20&4294967295|D>>>12),D=R+(V^x&(S^V))+C[9]+568446438&4294967295,R=S+(D<<5&4294967295|D>>>27),D=x+(S^V&(R^S))+C[14]+3275163606&4294967295,x=R+(D<<9&4294967295|D>>>23),D=V+(R^S&(x^R))+C[3]+4107603335&4294967295,V=x+(D<<14&4294967295|D>>>18),D=S+(x^R&(V^x))+C[8]+1163531501&4294967295,S=V+(D<<20&4294967295|D>>>12),D=R+(V^x&(S^V))+C[13]+2850285829&4294967295,R=S+(D<<5&4294967295|D>>>27),D=x+(S^V&(R^S))+C[2]+4243563512&4294967295,x=R+(D<<9&4294967295|D>>>23),D=V+(R^S&(x^R))+C[7]+1735328473&4294967295,V=x+(D<<14&4294967295|D>>>18),D=S+(x^R&(V^x))+C[12]+2368359562&4294967295,S=V+(D<<20&4294967295|D>>>12),D=R+(S^V^x)+C[5]+4294588738&4294967295,R=S+(D<<4&4294967295|D>>>28),D=x+(R^S^V)+C[8]+2272392833&4294967295,x=R+(D<<11&4294967295|D>>>21),D=V+(x^R^S)+C[11]+1839030562&4294967295,V=x+(D<<16&4294967295|D>>>16),D=S+(V^x^R)+C[14]+4259657740&4294967295,S=V+(D<<23&4294967295|D>>>9),D=R+(S^V^x)+C[1]+2763975236&4294967295,R=S+(D<<4&4294967295|D>>>28),D=x+(R^S^V)+C[4]+1272893353&4294967295,x=R+(D<<11&4294967295|D>>>21),D=V+(x^R^S)+C[7]+4139469664&4294967295,V=x+(D<<16&4294967295|D>>>16),D=S+(V^x^R)+C[10]+3200236656&4294967295,S=V+(D<<23&4294967295|D>>>9),D=R+(S^V^x)+C[13]+681279174&4294967295,R=S+(D<<4&4294967295|D>>>28),D=x+(R^S^V)+C[0]+3936430074&4294967295,x=R+(D<<11&4294967295|D>>>21),D=V+(x^R^S)+C[3]+3572445317&4294967295,V=x+(D<<16&4294967295|D>>>16),D=S+(V^x^R)+C[6]+76029189&4294967295,S=V+(D<<23&4294967295|D>>>9),D=R+(S^V^x)+C[9]+3654602809&4294967295,R=S+(D<<4&4294967295|D>>>28),D=x+(R^S^V)+C[12]+3873151461&4294967295,x=R+(D<<11&4294967295|D>>>21),D=V+(x^R^S)+C[15]+530742520&4294967295,V=x+(D<<16&4294967295|D>>>16),D=S+(V^x^R)+C[2]+3299628645&4294967295,S=V+(D<<23&4294967295|D>>>9),D=R+(V^(S|~x))+C[0]+4096336452&4294967295,R=S+(D<<6&4294967295|D>>>26),D=x+(S^(R|~V))+C[7]+1126891415&4294967295,x=R+(D<<10&4294967295|D>>>22),D=V+(R^(x|~S))+C[14]+2878612391&4294967295,V=x+(D<<15&4294967295|D>>>17),D=S+(x^(V|~R))+C[5]+4237533241&4294967295,S=V+(D<<21&4294967295|D>>>11),D=R+(V^(S|~x))+C[12]+1700485571&4294967295,R=S+(D<<6&4294967295|D>>>26),D=x+(S^(R|~V))+C[3]+2399980690&4294967295,x=R+(D<<10&4294967295|D>>>22),D=V+(R^(x|~S))+C[10]+4293915773&4294967295,V=x+(D<<15&4294967295|D>>>17),D=S+(x^(V|~R))+C[1]+2240044497&4294967295,S=V+(D<<21&4294967295|D>>>11),D=R+(V^(S|~x))+C[8]+1873313359&4294967295,R=S+(D<<6&4294967295|D>>>26),D=x+(S^(R|~V))+C[15]+4264355552&4294967295,x=R+(D<<10&4294967295|D>>>22),D=V+(R^(x|~S))+C[6]+2734768916&4294967295,V=x+(D<<15&4294967295|D>>>17),D=S+(x^(V|~R))+C[13]+1309151649&4294967295,S=V+(D<<21&4294967295|D>>>11),D=R+(V^(S|~x))+C[4]+4149444226&4294967295,R=S+(D<<6&4294967295|D>>>26),D=x+(S^(R|~V))+C[11]+3174756917&4294967295,x=R+(D<<10&4294967295|D>>>22),D=V+(R^(x|~S))+C[2]+718787259&4294967295,V=x+(D<<15&4294967295|D>>>17),D=S+(x^(V|~R))+C[9]+3951481745&4294967295,P.g[0]=P.g[0]+R&4294967295,P.g[1]=P.g[1]+(V+(D<<21&4294967295|D>>>11))&4294967295,P.g[2]=P.g[2]+V&4294967295,P.g[3]=P.g[3]+x&4294967295}i.prototype.u=function(P,R){R===void 0&&(R=P.length);for(var S=R-this.blockSize,C=this.B,V=this.h,x=0;x<R;){if(V==0)for(;x<=S;)a(this,P,x),x+=this.blockSize;if(typeof P=="string"){for(;x<R;)if(C[V++]=P.charCodeAt(x++),V==this.blockSize){a(this,C),V=0;break}}else for(;x<R;)if(C[V++]=P[x++],V==this.blockSize){a(this,C),V=0;break}}this.h=V,this.o+=R},i.prototype.v=function(){var P=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);P[0]=128;for(var R=1;R<P.length-8;++R)P[R]=0;var S=8*this.o;for(R=P.length-8;R<P.length;++R)P[R]=S&255,S/=256;for(this.u(P),P=Array(16),R=S=0;4>R;++R)for(var C=0;32>C;C+=8)P[S++]=this.g[R]>>>C&255;return P};function l(P,R){var S=d;return Object.prototype.hasOwnProperty.call(S,P)?S[P]:S[P]=R(P)}function c(P,R){this.h=R;for(var S=[],C=!0,V=P.length-1;0<=V;V--){var x=P[V]|0;C&&x==R||(S[V]=x,C=!1)}this.g=S}var d={};function p(P){return-128<=P&&128>P?l(P,function(R){return new c([R|0],0>R?-1:0)}):new c([P|0],0>P?-1:0)}function g(P){if(isNaN(P)||!isFinite(P))return A;if(0>P)return U(g(-P));for(var R=[],S=1,C=0;P>=S;C++)R[C]=P/S|0,S*=4294967296;return new c(R,0)}function _(P,R){if(P.length==0)throw Error("number format error: empty string");if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(P.charAt(0)=="-")return U(_(P.substring(1),R));if(0<=P.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=g(Math.pow(R,8)),C=A,V=0;V<P.length;V+=8){var x=Math.min(8,P.length-V),D=parseInt(P.substring(V,V+x),R);8>x?(x=g(Math.pow(R,x)),C=C.j(x).add(g(D))):(C=C.j(S),C=C.add(g(D)))}return C}var A=p(0),T=p(1),N=p(16777216);n=c.prototype,n.m=function(){if(H(this))return-U(this).m();for(var P=0,R=1,S=0;S<this.g.length;S++){var C=this.i(S);P+=(0<=C?C:4294967296+C)*R,R*=4294967296}return P},n.toString=function(P){if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(O(this))return"0";if(H(this))return"-"+U(this).toString(P);for(var R=g(Math.pow(P,6)),S=this,C="";;){var V=he(S,R).g;S=G(S,V.j(R));var x=((0<S.g.length?S.g[0]:S.h)>>>0).toString(P);if(S=V,O(S))return x+C;for(;6>x.length;)x="0"+x;C=x+C}},n.i=function(P){return 0>P?0:P<this.g.length?this.g[P]:this.h};function O(P){if(P.h!=0)return!1;for(var R=0;R<P.g.length;R++)if(P.g[R]!=0)return!1;return!0}function H(P){return P.h==-1}n.l=function(P){return P=G(this,P),H(P)?-1:O(P)?0:1};function U(P){for(var R=P.g.length,S=[],C=0;C<R;C++)S[C]=~P.g[C];return new c(S,~P.h).add(T)}n.abs=function(){return H(this)?U(this):this},n.add=function(P){for(var R=Math.max(this.g.length,P.g.length),S=[],C=0,V=0;V<=R;V++){var x=C+(this.i(V)&65535)+(P.i(V)&65535),D=(x>>>16)+(this.i(V)>>>16)+(P.i(V)>>>16);C=D>>>16,x&=65535,D&=65535,S[V]=D<<16|x}return new c(S,S[S.length-1]&-2147483648?-1:0)};function G(P,R){return P.add(U(R))}n.j=function(P){if(O(this)||O(P))return A;if(H(this))return H(P)?U(this).j(U(P)):U(U(this).j(P));if(H(P))return U(this.j(U(P)));if(0>this.l(N)&&0>P.l(N))return g(this.m()*P.m());for(var R=this.g.length+P.g.length,S=[],C=0;C<2*R;C++)S[C]=0;for(C=0;C<this.g.length;C++)for(var V=0;V<P.g.length;V++){var x=this.i(C)>>>16,D=this.i(C)&65535,Tt=P.i(V)>>>16,yt=P.i(V)&65535;S[2*C+2*V]+=D*yt,ie(S,2*C+2*V),S[2*C+2*V+1]+=x*yt,ie(S,2*C+2*V+1),S[2*C+2*V+1]+=D*Tt,ie(S,2*C+2*V+1),S[2*C+2*V+2]+=x*Tt,ie(S,2*C+2*V+2)}for(C=0;C<R;C++)S[C]=S[2*C+1]<<16|S[2*C];for(C=R;C<2*R;C++)S[C]=0;return new c(S,0)};function ie(P,R){for(;(P[R]&65535)!=P[R];)P[R+1]+=P[R]>>>16,P[R]&=65535,R++}function ne(P,R){this.g=P,this.h=R}function he(P,R){if(O(R))throw Error("division by zero");if(O(P))return new ne(A,A);if(H(P))return R=he(U(P),R),new ne(U(R.g),U(R.h));if(H(R))return R=he(P,U(R)),new ne(U(R.g),R.h);if(30<P.g.length){if(H(P)||H(R))throw Error("slowDivide_ only works with positive integers.");for(var S=T,C=R;0>=C.l(P);)S=ce(S),C=ce(C);var V=Ee(S,1),x=Ee(C,1);for(C=Ee(C,2),S=Ee(S,2);!O(C);){var D=x.add(C);0>=D.l(P)&&(V=V.add(S),x=D),C=Ee(C,1),S=Ee(S,1)}return R=G(P,V.j(R)),new ne(V,R)}for(V=A;0<=P.l(R);){for(S=Math.max(1,Math.floor(P.m()/R.m())),C=Math.ceil(Math.log(S)/Math.LN2),C=48>=C?1:Math.pow(2,C-48),x=g(S),D=x.j(R);H(D)||0<D.l(P);)S-=C,x=g(S),D=x.j(R);O(x)&&(x=T),V=V.add(x),P=G(P,D)}return new ne(V,P)}n.A=function(P){return he(this,P).h},n.and=function(P){for(var R=Math.max(this.g.length,P.g.length),S=[],C=0;C<R;C++)S[C]=this.i(C)&P.i(C);return new c(S,this.h&P.h)},n.or=function(P){for(var R=Math.max(this.g.length,P.g.length),S=[],C=0;C<R;C++)S[C]=this.i(C)|P.i(C);return new c(S,this.h|P.h)},n.xor=function(P){for(var R=Math.max(this.g.length,P.g.length),S=[],C=0;C<R;C++)S[C]=this.i(C)^P.i(C);return new c(S,this.h^P.h)};function ce(P){for(var R=P.g.length+1,S=[],C=0;C<R;C++)S[C]=P.i(C)<<1|P.i(C-1)>>>31;return new c(S,P.h)}function Ee(P,R){var S=R>>5;R%=32;for(var C=P.g.length-S,V=[],x=0;x<C;x++)V[x]=0<R?P.i(x+S)>>>R|P.i(x+S+1)<<32-R:P.i(x+S);return new c(V,P.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,vb=i,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=g,c.fromString=_,_s=c}).apply(typeof C0<"u"?C0:typeof self<"u"?self:typeof window<"u"?window:{});var rf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Eb,Iu,Tb,_f,vg,Ab,wb,bb;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,y,v){return h==Array.prototype||h==Object.prototype||(h[y]=v.value),h};function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof rf=="object"&&rf];for(var y=0;y<h.length;++y){var v=h[y];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var i=t(this);function a(h,y){if(y)e:{var v=i;h=h.split(".");for(var b=0;b<h.length-1;b++){var B=h[b];if(!(B in v))break e;v=v[B]}h=h[h.length-1],b=v[h],y=y(b),y!=b&&y!=null&&e(v,h,{configurable:!0,writable:!0,value:y})}}function l(h,y){h instanceof String&&(h+="");var v=0,b=!1,B={next:function(){if(!b&&v<h.length){var K=v++;return{value:y(K,h[K]),done:!1}}return b=!0,{done:!0,value:void 0}}};return B[Symbol.iterator]=function(){return B},B}a("Array.prototype.values",function(h){return h||function(){return l(this,function(y,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},d=this||self;function p(h){var y=typeof h;return y=y!="object"?y:h?Array.isArray(h)?"array":y:"null",y=="array"||y=="object"&&typeof h.length=="number"}function g(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function _(h,y,v){return h.call.apply(h.bind,arguments)}function A(h,y,v){if(!h)throw Error();if(2<arguments.length){var b=Array.prototype.slice.call(arguments,2);return function(){var B=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(B,b),h.apply(y,B)}}return function(){return h.apply(y,arguments)}}function T(h,y,v){return T=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:A,T.apply(null,arguments)}function N(h,y){var v=Array.prototype.slice.call(arguments,1);return function(){var b=v.slice();return b.push.apply(b,arguments),h.apply(this,b)}}function O(h,y){function v(){}v.prototype=y.prototype,h.aa=y.prototype,h.prototype=new v,h.prototype.constructor=h,h.Qb=function(b,B,K){for(var se=Array(arguments.length-2),Be=2;Be<arguments.length;Be++)se[Be-2]=arguments[Be];return y.prototype[B].apply(b,se)}}function H(h){const y=h.length;if(0<y){const v=Array(y);for(let b=0;b<y;b++)v[b]=h[b];return v}return[]}function U(h,y){for(let v=1;v<arguments.length;v++){const b=arguments[v];if(p(b)){const B=h.length||0,K=b.length||0;h.length=B+K;for(let se=0;se<K;se++)h[B+se]=b[se]}else h.push(b)}}class G{constructor(y,v){this.i=y,this.j=v,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function ie(h){return/^[\s\xa0]*$/.test(h)}function ne(){var h=d.navigator;return h&&(h=h.userAgent)?h:""}function he(h){return he[" "](h),h}he[" "]=function(){};var ce=ne().indexOf("Gecko")!=-1&&!(ne().toLowerCase().indexOf("webkit")!=-1&&ne().indexOf("Edge")==-1)&&!(ne().indexOf("Trident")!=-1||ne().indexOf("MSIE")!=-1)&&ne().indexOf("Edge")==-1;function Ee(h,y,v){for(const b in h)y.call(v,h[b],b,h)}function P(h,y){for(const v in h)y.call(void 0,h[v],v,h)}function R(h){const y={};for(const v in h)y[v]=h[v];return y}const S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(h,y){let v,b;for(let B=1;B<arguments.length;B++){b=arguments[B];for(v in b)h[v]=b[v];for(let K=0;K<S.length;K++)v=S[K],Object.prototype.hasOwnProperty.call(b,v)&&(h[v]=b[v])}}function V(h){var y=1;h=h.split(":");const v=[];for(;0<y&&h.length;)v.push(h.shift()),y--;return h.length&&v.push(h.join(":")),v}function x(h){d.setTimeout(()=>{throw h},0)}function D(){var h=$e;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class Tt{constructor(){this.h=this.g=null}add(y,v){const b=yt.get();b.set(y,v),this.h?this.h.next=b:this.g=b,this.h=b}}var yt=new G(()=>new X,h=>h.reset());class X{constructor(){this.next=this.g=this.h=null}set(y,v){this.h=y,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let oe,ge=!1,$e=new Tt,M=()=>{const h=d.Promise.resolve(void 0);oe=()=>{h.then(te)}};var te=()=>{for(var h;h=D();){try{h.h.call(h.g)}catch(v){x(v)}var y=yt;y.j(h),100>y.h&&(y.h++,h.next=y.g,y.g=h)}ge=!1};function le(){this.s=this.s,this.C=this.C}le.prototype.s=!1,le.prototype.ma=function(){this.s||(this.s=!0,this.N())},le.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function re(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}re.prototype.h=function(){this.defaultPrevented=!0};var ye=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const v=()=>{};d.addEventListener("test",v,y),d.removeEventListener("test",v,y)}catch{}return h}();function Oe(h,y){if(re.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var v=this.type=h.type,b=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget){if(ce){e:{try{he(y.nodeName);var B=!0;break e}catch{}B=!1}B||(y=null)}}else v=="mouseover"?y=h.fromElement:v=="mouseout"&&(y=h.toElement);this.relatedTarget=y,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:Se[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&Oe.aa.h.call(this)}}O(Oe,re);var Se={2:"touch",3:"pen",4:"mouse"};Oe.prototype.h=function(){Oe.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Ft="closure_listenable_"+(1e6*Math.random()|0),at=0;function _r(h,y,v,b,B){this.listener=h,this.proxy=null,this.src=y,this.type=v,this.capture=!!b,this.ha=B,this.key=++at,this.da=this.fa=!1}function ki(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Xr(h){this.src=h,this.g={},this.h=0}Xr.prototype.add=function(h,y,v,b,B){var K=h.toString();h=this.g[K],h||(h=this.g[K]=[],this.h++);var se=qs(h,y,b,B);return-1<se?(y=h[se],v||(y.fa=!1)):(y=new _r(y,this.src,K,!!b,B),y.fa=v,h.push(y)),y};function Fs(h,y){var v=y.type;if(v in h.g){var b=h.g[v],B=Array.prototype.indexOf.call(b,y,void 0),K;(K=0<=B)&&Array.prototype.splice.call(b,B,1),K&&(ki(y),h.g[v].length==0&&(delete h.g[v],h.h--))}}function qs(h,y,v,b){for(var B=0;B<h.length;++B){var K=h[B];if(!K.da&&K.listener==y&&K.capture==!!v&&K.ha==b)return B}return-1}var js="closure_lm_"+(1e6*Math.random()|0),dl={};function Oc(h,y,v,b,B){if(Array.isArray(y)){for(var K=0;K<y.length;K++)Oc(h,y[K],v,b,B);return null}return v=Mc(v),h&&h[Ft]?h.K(y,v,g(b)?!!b.capture:!1,B):Fn(h,y,v,!1,b,B)}function Fn(h,y,v,b,B,K){if(!y)throw Error("Invalid event type");var se=g(B)?!!B.capture:!!B,Be=Ga(h);if(Be||(h[js]=Be=new Xr(h)),v=Be.add(y,v,b,se,K),v.proxy)return v;if(b=Pd(),v.proxy=b,b.src=h,b.listener=v,h.addEventListener)ye||(B=se),B===void 0&&(B=!1),h.addEventListener(y.toString(),b,B);else if(h.attachEvent)h.attachEvent(Hs(y.toString()),b);else if(h.addListener&&h.removeListener)h.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Pd(){function h(v){return y.call(h.src,h.listener,v)}const y=Vd;return h}function pl(h,y,v,b,B){if(Array.isArray(y))for(var K=0;K<y.length;K++)pl(h,y[K],v,b,B);else b=g(b)?!!b.capture:!!b,v=Mc(v),h&&h[Ft]?(h=h.i,y=String(y).toString(),y in h.g&&(K=h.g[y],v=qs(K,v,b,B),-1<v&&(ki(K[v]),Array.prototype.splice.call(K,v,1),K.length==0&&(delete h.g[y],h.h--)))):h&&(h=Ga(h))&&(y=h.g[y.toString()],h=-1,y&&(h=qs(y,v,b,B)),(v=-1<h?y[h]:null)&&Ha(v))}function Ha(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[Ft])Fs(y.i,h);else{var v=h.type,b=h.proxy;y.removeEventListener?y.removeEventListener(v,b,h.capture):y.detachEvent?y.detachEvent(Hs(v),b):y.addListener&&y.removeListener&&y.removeListener(b),(v=Ga(y))?(Fs(v,h),v.h==0&&(v.src=null,y[js]=null)):ki(h)}}}function Hs(h){return h in dl?dl[h]:dl[h]="on"+h}function Vd(h,y){if(h.da)h=!0;else{y=new Oe(y,this);var v=h.listener,b=h.ha||h.src;h.fa&&Ha(h),h=v.call(b,y)}return h}function Ga(h){return h=h[js],h instanceof Xr?h:null}var ml="__closure_events_fn_"+(1e9*Math.random()>>>0);function Mc(h){return typeof h=="function"?h:(h[ml]||(h[ml]=function(y){return h.handleEvent(y)}),h[ml])}function _t(){le.call(this),this.i=new Xr(this),this.M=this,this.F=null}O(_t,le),_t.prototype[Ft]=!0,_t.prototype.removeEventListener=function(h,y,v,b){pl(this,h,y,v,b)};function Xe(h,y){var v,b=h.F;if(b)for(v=[];b;b=b.F)v.push(b);if(h=h.M,b=y.type||y,typeof y=="string")y=new re(y,h);else if(y instanceof re)y.target=y.target||h;else{var B=y;y=new re(b,h),C(y,B)}if(B=!0,v)for(var K=v.length-1;0<=K;K--){var se=y.g=v[K];B=Rn(se,b,!0,y)&&B}if(se=y.g=h,B=Rn(se,b,!0,y)&&B,B=Rn(se,b,!1,y)&&B,v)for(K=0;K<v.length;K++)se=y.g=v[K],B=Rn(se,b,!1,y)&&B}_t.prototype.N=function(){if(_t.aa.N.call(this),this.i){var h=this.i,y;for(y in h.g){for(var v=h.g[y],b=0;b<v.length;b++)ki(v[b]);delete h.g[y],h.h--}}this.F=null},_t.prototype.K=function(h,y,v,b){return this.i.add(String(h),y,!1,v,b)},_t.prototype.L=function(h,y,v,b){return this.i.add(String(h),y,!0,v,b)};function Rn(h,y,v,b){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();for(var B=!0,K=0;K<y.length;++K){var se=y[K];if(se&&!se.da&&se.capture==v){var Be=se.listener,kt=se.ha||se.src;se.fa&&Fs(h.i,se),B=Be.call(kt,b)!==!1&&B}}return B&&!b.defaultPrevented}function sn(h,y,v){if(typeof h=="function")v&&(h=T(h,v));else if(h&&typeof h.handleEvent=="function")h=T(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:d.setTimeout(h,y||0)}function Pc(h){h.g=sn(()=>{h.g=null,h.i&&(h.i=!1,Pc(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class kd extends le{constructor(y,v){super(),this.m=y,this.l=v,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Pc(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Gs(h){le.call(this),this.h=h,this.g={}}O(Gs,le);var $s=[];function Ks(h){Ee(h.g,function(y,v){this.g.hasOwnProperty(v)&&Ha(y)},h),h.g={}}Gs.prototype.N=function(){Gs.aa.N.call(this),Ks(this)},Gs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var sr=d.JSON.stringify,$a=d.JSON.parse,Ys=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function gl(){}gl.prototype.h=null;function yl(h){return h.h||(h.h=h.i())}function _l(){}var Wr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Zr(){re.call(this,"d")}O(Zr,re);function vl(){re.call(this,"c")}O(vl,re);var vr={},El=null;function xi(){return El=El||new _t}vr.La="serverreachability";function Ka(h){re.call(this,vr.La,h)}O(Ka,re);function Li(h){const y=xi();Xe(y,new Ka(y))}vr.STAT_EVENT="statevent";function Vc(h,y){re.call(this,vr.STAT_EVENT,h),this.stat=y}O(Vc,re);function ct(h){const y=xi();Xe(y,new Vc(y,h))}vr.Ma="timingevent";function Vt(h,y){re.call(this,vr.Ma,h),this.size=y}O(Vt,re);function It(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},y)}function qn(){this.g=!0}qn.prototype.xa=function(){this.g=!1};function Tl(h,y,v,b,B,K){h.info(function(){if(h.g)if(K)for(var se="",Be=K.split("&"),kt=0;kt<Be.length;kt++){var ze=Be[kt].split("=");if(1<ze.length){var jt=ze[0];ze=ze[1];var xt=jt.split("_");se=2<=xt.length&&xt[1]=="type"?se+(jt+"="+ze+"&"):se+(jt+"=redacted&")}}else se=null;else se=K;return"XMLHTTP REQ ("+b+") [attempt "+B+"]: "+y+`
`+v+`
`+se})}function xd(h,y,v,b,B,K,se){h.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+B+"]: "+y+`
`+v+`
`+K+" "+se})}function Ui(h,y,v,b){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+Qs(h,v)+(b?" "+b:"")})}function kc(h,y){h.info(function(){return"TIMEOUT: "+y})}qn.prototype.info=function(){};function Qs(h,y){if(!h.g)return y;if(!y)return null;try{var v=JSON.parse(y);if(v){for(h=0;h<v.length;h++)if(Array.isArray(v[h])){var b=v[h];if(!(2>b.length)){var B=b[1];if(Array.isArray(B)&&!(1>B.length)){var K=B[0];if(K!="noop"&&K!="stop"&&K!="close")for(var se=1;se<B.length;se++)B[se]=""}}}}return sr(v)}catch{return y}}var Bi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Jr={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Er;function Tr(){}O(Tr,gl),Tr.prototype.g=function(){return new XMLHttpRequest},Tr.prototype.i=function(){return{}},Er=new Tr;function pn(h,y,v,b){this.j=h,this.i=y,this.l=v,this.R=b||1,this.U=new Gs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new At}function At(){this.i=null,this.g="",this.h=!1}var Al={},Ya={};function ar(h,y,v){h.L=1,h.v=ea(In(y)),h.m=v,h.P=!0,ei(h,null)}function ei(h,y){h.F=Date.now(),Xs(h),h.A=In(h.v);var v=h.A,b=h.R;Array.isArray(b)||(b=[String(b)]),Cl(v.i,"t",b),h.C=0,v=h.j.J,h.h=new At,h.g=Wc(h.j,v?y:null,!h.m),0<h.O&&(h.M=new kd(T(h.Y,h,h.g),h.O)),y=h.U,v=h.g,b=h.ca;var B="readystatechange";Array.isArray(B)||(B&&($s[0]=B.toString()),B=$s);for(var K=0;K<B.length;K++){var se=Oc(v,B[K],b||y.handleEvent,!1,y.h||y);if(!se)break;y.g[se.key]=se}y=h.H?R(h.H):{},h.m?(h.u||(h.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,y)):(h.u="GET",h.g.ea(h.A,h.u,null,y)),Li(),Tl(h.i,h.u,h.A,h.l,h.R,h.m)}pn.prototype.ca=function(h){h=h.target;const y=this.M;y&&$n(h)==3?y.j():this.Y(h)},pn.prototype.Y=function(h){try{if(h==this.g)e:{const xt=$n(this.g);var y=this.g.Ba();const li=this.g.Z();if(!(3>xt)&&(xt!=3||this.g&&(this.h.h||this.g.oa()||jc(this.g)))){this.J||xt!=4||y==7||(y==8||0>=li?Li(3):Li(2)),zi(this);var v=this.g.Z();this.X=v;t:if(xc(this)){var b=jc(this.g);h="";var B=b.length,K=$n(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Qt(this),Ar(this);var se="";break t}this.h.i=new d.TextDecoder}for(y=0;y<B;y++)this.h.h=!0,h+=this.h.i.decode(b[y],{stream:!(K&&y==B-1)});b.length=0,this.h.g+=h,this.C=0,se=this.h.g}else se=this.g.oa();if(this.o=v==200,xd(this.i,this.u,this.A,this.l,this.R,xt,v),this.o){if(this.T&&!this.K){t:{if(this.g){var Be,kt=this.g;if((Be=kt.g?kt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ie(Be)){var ze=Be;break t}}ze=null}if(v=ze)Ui(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ws(this,v);else{this.o=!1,this.s=3,ct(12),Qt(this),Ar(this);break e}}if(this.P){v=!0;let Xt;for(;!this.J&&this.C<se.length;)if(Xt=Lc(this,se),Xt==Ya){xt==4&&(this.s=4,ct(14),v=!1),Ui(this.i,this.l,null,"[Incomplete Response]");break}else if(Xt==Al){this.s=4,ct(15),Ui(this.i,this.l,se,"[Invalid Chunk]"),v=!1;break}else Ui(this.i,this.l,Xt,null),Ws(this,Xt);if(xc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),xt!=4||se.length!=0||this.h.h||(this.s=1,ct(16),v=!1),this.o=this.o&&v,!v)Ui(this.i,this.l,se,"[Invalid Chunked Response]"),Qt(this),Ar(this);else if(0<se.length&&!this.W){this.W=!0;var jt=this.j;jt.g==this&&jt.ba&&!jt.M&&(jt.j.info("Great, no buffering proxy detected. Bytes received: "+se.length),la(jt),jt.M=!0,ct(11))}}else Ui(this.i,this.l,se,null),Ws(this,se);xt==4&&Qt(this),this.o&&!this.J&&(xt==4?Yc(this.j,this):(this.o=!1,Xs(this)))}else Fd(this.g),v==400&&0<se.indexOf("Unknown SID")?(this.s=3,ct(12)):(this.s=0,ct(13)),Qt(this),Ar(this)}}}catch{}finally{}};function xc(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function Lc(h,y){var v=h.C,b=y.indexOf(`
`,v);return b==-1?Ya:(v=Number(y.substring(v,b)),isNaN(v)?Al:(b+=1,b+v>y.length?Ya:(y=y.slice(b,b+v),h.C=b+v,y)))}pn.prototype.cancel=function(){this.J=!0,Qt(this)};function Xs(h){h.S=Date.now()+h.I,Uc(h,h.I)}function Uc(h,y){if(h.B!=null)throw Error("WatchDog timer not null");h.B=It(T(h.ba,h),y)}function zi(h){h.B&&(d.clearTimeout(h.B),h.B=null)}pn.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(kc(this.i,this.A),this.L!=2&&(Li(),ct(17)),Qt(this),this.s=2,Ar(this)):Uc(this,this.S-h)};function Ar(h){h.j.G==0||h.J||Yc(h.j,h)}function Qt(h){zi(h);var y=h.M;y&&typeof y.ma=="function"&&y.ma(),h.M=null,Ks(h.U),h.g&&(y=h.g,h.g=null,y.abort(),y.ma())}function Ws(h,y){try{var v=h.j;if(v.G!=0&&(v.g==h||wl(v.h,h))){if(!h.K&&wl(v.h,h)&&v.G==3){try{var b=v.Da.g.parse(y)}catch{b=null}if(Array.isArray(b)&&b.length==3){var B=b;if(B[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<h.F)ao(v),io(v);else break e;Pl(v),ct(18)}}else v.za=B[1],0<v.za-v.T&&37500>B[2]&&v.F&&v.v==0&&!v.C&&(v.C=It(T(v.Za,v),6e3));if(1>=Xa(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else oi(v,11)}else if((h.K||v.g==h)&&ao(v),!ie(y))for(B=v.Da.g.parse(y),y=0;y<B.length;y++){let ze=B[y];if(v.T=ze[0],ze=ze[1],v.G==2)if(ze[0]=="c"){v.K=ze[1],v.ia=ze[2];const jt=ze[3];jt!=null&&(v.la=jt,v.j.info("VER="+v.la));const xt=ze[4];xt!=null&&(v.Aa=xt,v.j.info("SVER="+v.Aa));const li=ze[5];li!=null&&typeof li=="number"&&0<li&&(b=1.5*li,v.L=b,v.j.info("backChannelRequestTimeoutMs_="+b)),b=v;const Xt=h.g;if(Xt){const Nr=Xt.g?Xt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Nr){var K=b.h;K.g||Nr.indexOf("spdy")==-1&&Nr.indexOf("quic")==-1&&Nr.indexOf("h2")==-1||(K.j=K.l,K.g=new Set,K.h&&(Wa(K,K.h),K.h=null))}if(b.D){const kl=Xt.g?Xt.g.getResponseHeader("X-HTTP-Session-Id"):null;kl&&(b.ya=kl,Je(b.I,b.D,kl))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-h.F,v.j.info("Handshake RTT: "+v.R+"ms")),b=v;var se=h;if(b.qa=Xc(b,b.J?b.ia:null,b.W),se.K){mn(b.h,se);var Be=se,kt=b.L;kt&&(Be.I=kt),Be.B&&(zi(Be),Xs(Be)),b.g=se}else $c(b);0<v.i.length&&so(v)}else ze[0]!="stop"&&ze[0]!="close"||oi(v,7);else v.G==3&&(ze[0]=="stop"||ze[0]=="close"?ze[0]=="stop"?oi(v,7):Ol(v):ze[0]!="noop"&&v.l&&v.l.ta(ze),v.v=0)}}Li(4)}catch{}}var Bc=class{constructor(h,y){this.g=h,this.map=y}};function ti(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Qa(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Xa(h){return h.h?1:h.g?h.g.size:0}function wl(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function Wa(h,y){h.g?h.g.add(y):h.h=y}function mn(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}ti.prototype.cancel=function(){if(this.i=bl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function bl(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const v of h.g.values())y=y.concat(v.D);return y}return H(h.i)}function Ld(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(p(h)){for(var y=[],v=h.length,b=0;b<v;b++)y.push(h[b]);return y}y=[],v=0;for(b in h)y[v++]=h[b];return y}function Za(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(p(h)||typeof h=="string"){var y=[];h=h.length;for(var v=0;v<h;v++)y.push(v);return y}y=[],v=0;for(const b in h)y[v++]=b;return y}}}function Sl(h,y){if(h.forEach&&typeof h.forEach=="function")h.forEach(y,void 0);else if(p(h)||typeof h=="string")Array.prototype.forEach.call(h,y,void 0);else for(var v=Za(h),b=Ld(h),B=b.length,K=0;K<B;K++)y.call(void 0,b[K],v&&v[K],h)}var Zs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ud(h,y){if(h){h=h.split("&");for(var v=0;v<h.length;v++){var b=h[v].indexOf("="),B=null;if(0<=b){var K=h[v].substring(0,b);B=h[v].substring(b+1)}else K=h[v];y(K,B?decodeURIComponent(B.replace(/\+/g," ")):"")}}}function Ct(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof Ct){this.h=h.h,Js(this,h.j),this.o=h.o,this.g=h.g,Fi(this,h.s),this.l=h.l;var y=h.i,v=new ri;v.i=y.i,y.g&&(v.g=new Map(y.g),v.h=y.h),ni(this,v),this.m=h.m}else h&&(y=String(h).match(Zs))?(this.h=!1,Js(this,y[1]||"",!0),this.o=jn(y[2]||""),this.g=jn(y[3]||"",!0),Fi(this,y[4]),this.l=jn(y[5]||"",!0),ni(this,y[6]||"",!0),this.m=jn(y[7]||"")):(this.h=!1,this.i=new ri(null,this.h))}Ct.prototype.toString=function(){var h=[],y=this.j;y&&h.push(ta(y,Rl,!0),":");var v=this.g;return(v||y=="file")&&(h.push("//"),(y=this.o)&&h.push(ta(y,Rl,!0),"@"),h.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&h.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&h.push("/"),h.push(ta(v,v.charAt(0)=="/"?Bd:Il,!0))),(v=this.i.toString())&&h.push("?",v),(v=this.m)&&h.push("#",ta(v,Ja)),h.join("")};function In(h){return new Ct(h)}function Js(h,y,v){h.j=v?jn(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function Fi(h,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);h.s=y}else h.s=null}function ni(h,y,v){y instanceof ri?(h.i=y,Fc(h.i,h.h)):(v||(y=ta(y,zd)),h.i=new ri(y,h.h))}function Je(h,y,v){h.i.set(y,v)}function ea(h){return Je(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function jn(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function ta(h,y,v){return typeof h=="string"?(h=encodeURI(h).replace(y,zc),v&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function zc(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Rl=/[#\/\?@]/g,Il=/[#\?:]/g,Bd=/[#\?]/g,zd=/[#\?@]/g,Ja=/#/g;function ri(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function Hn(h){h.g||(h.g=new Map,h.h=0,h.i&&Ud(h.i,function(y,v){h.add(decodeURIComponent(y.replace(/\+/g," ")),v)}))}n=ri.prototype,n.add=function(h,y){Hn(this),this.i=null,h=wr(this,h);var v=this.g.get(h);return v||this.g.set(h,v=[]),v.push(y),this.h+=1,this};function ii(h,y){Hn(h),y=wr(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function si(h,y){return Hn(h),y=wr(h,y),h.g.has(y)}n.forEach=function(h,y){Hn(this),this.g.forEach(function(v,b){v.forEach(function(B){h.call(y,B,b,this)},this)},this)},n.na=function(){Hn(this);const h=Array.from(this.g.values()),y=Array.from(this.g.keys()),v=[];for(let b=0;b<y.length;b++){const B=h[b];for(let K=0;K<B.length;K++)v.push(y[b])}return v},n.V=function(h){Hn(this);let y=[];if(typeof h=="string")si(this,h)&&(y=y.concat(this.g.get(wr(this,h))));else{h=Array.from(this.g.values());for(let v=0;v<h.length;v++)y=y.concat(h[v])}return y},n.set=function(h,y){return Hn(this),this.i=null,h=wr(this,h),si(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},n.get=function(h,y){return h?(h=this.V(h),0<h.length?String(h[0]):y):y};function Cl(h,y,v){ii(h,y),0<v.length&&(h.i=null,h.g.set(wr(h,y),H(v)),h.h+=v.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(var v=0;v<y.length;v++){var b=y[v];const K=encodeURIComponent(String(b)),se=this.V(b);for(b=0;b<se.length;b++){var B=K;se[b]!==""&&(B+="="+encodeURIComponent(String(se[b]))),h.push(B)}}return this.i=h.join("&")};function wr(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function Fc(h,y){y&&!h.j&&(Hn(h),h.i=null,h.g.forEach(function(v,b){var B=b.toLowerCase();b!=B&&(ii(this,b),Cl(this,B,v))},h)),h.j=y}function na(h,y){const v=new qn;if(d.Image){const b=new Image;b.onload=N(Gn,v,"TestLoadImage: loaded",!0,y,b),b.onerror=N(Gn,v,"TestLoadImage: error",!1,y,b),b.onabort=N(Gn,v,"TestLoadImage: abort",!1,y,b),b.ontimeout=N(Gn,v,"TestLoadImage: timeout",!1,y,b),d.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=h}else y(!1)}function or(h,y){const v=new qn,b=new AbortController,B=setTimeout(()=>{b.abort(),Gn(v,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:b.signal}).then(K=>{clearTimeout(B),K.ok?Gn(v,"TestPingServer: ok",!0,y):Gn(v,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(B),Gn(v,"TestPingServer: error",!1,y)})}function Gn(h,y,v,b,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),b(v)}catch{}}function ra(){this.g=new Ys}function br(h,y,v){const b=v||"";try{Sl(h,function(B,K){let se=B;g(B)&&(se=sr(B)),y.push(b+K+"="+encodeURIComponent(se))})}catch(B){throw y.push(b+"type="+encodeURIComponent("_badmap")),B}}function qi(h){this.l=h.Ub||null,this.j=h.eb||!1}O(qi,gl),qi.prototype.g=function(){return new ai(this.l,this.j)},qi.prototype.i=function(h){return function(){return h}}({});function ai(h,y){_t.call(this),this.D=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}O(ai,_t),n=ai.prototype,n.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=y,this.readyState=1,Rr(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(y.body=h),(this.D||d).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Sr(this)),this.readyState=0},n.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Rr(this)),this.g&&(this.readyState=3,Rr(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Nl(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function Nl(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}n.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?Sr(this):Rr(this),this.readyState==3&&Nl(this)}},n.Ra=function(h){this.g&&(this.response=this.responseText=h,Sr(this))},n.Qa=function(h){this.g&&(this.response=h,Sr(this))},n.ga=function(){this.g&&Sr(this)};function Sr(h){h.readyState=4,h.l=null,h.j=null,h.v=null,Rr(h)}n.setRequestHeader=function(h,y){this.u.append(h,y)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var v=y.next();!v.done;)v=v.value,h.push(v[0]+": "+v[1]),v=y.next();return h.join(`\r
`)};function Rr(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(ai.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Dl(h){let y="";return Ee(h,function(v,b){y+=b,y+=":",y+=v,y+=`\r
`}),y}function qt(h,y,v){e:{for(b in v){var b=!1;break e}b=!0}b||(v=Dl(v),typeof h=="string"?v!=null&&encodeURIComponent(String(v)):Je(h,y,v))}function Ye(h){_t.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}O(Ye,_t);var eo=/^https?$/i,ia=["POST","PUT"];n=Ye.prototype,n.Ha=function(h){this.J=h},n.ea=function(h,y,v,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Er.g(),this.v=this.o?yl(this.o):yl(Er),this.g.onreadystatechange=T(this.Ea,this);try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(K){qc(this,K);return}if(h=v||"",v=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var B in b)v.set(B,b[B]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(const K of b.keys())v.set(K,b.get(K));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(v.keys()).find(K=>K.toLowerCase()=="content-type"),B=d.FormData&&h instanceof d.FormData,!(0<=Array.prototype.indexOf.call(ia,y,void 0))||b||B||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[K,se]of v)this.g.setRequestHeader(K,se);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{sa(this),this.u=!0,this.g.send(h),this.u=!1}catch(K){qc(this,K)}};function qc(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.m=5,to(h),Ir(h)}function to(h){h.A||(h.A=!0,Xe(h,"complete"),Xe(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,Xe(this,"complete"),Xe(this,"abort"),Ir(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ir(this,!0)),Ye.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?no(this):this.bb())},n.bb=function(){no(this)};function no(h){if(h.h&&typeof c<"u"&&(!h.v[1]||$n(h)!=4||h.Z()!=2)){if(h.u&&$n(h)==4)sn(h.Ea,0,h);else if(Xe(h,"readystatechange"),$n(h)==4){h.h=!1;try{const se=h.Z();e:switch(se){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var v;if(!(v=y)){var b;if(b=se===0){var B=String(h.D).match(Zs)[1]||null;!B&&d.self&&d.self.location&&(B=d.self.location.protocol.slice(0,-1)),b=!eo.test(B?B.toLowerCase():"")}v=b}if(v)Xe(h,"complete"),Xe(h,"success");else{h.m=6;try{var K=2<$n(h)?h.g.statusText:""}catch{K=""}h.l=K+" ["+h.Z()+"]",to(h)}}finally{Ir(h)}}}}function Ir(h,y){if(h.g){sa(h);const v=h.g,b=h.v[0]?()=>{}:null;h.g=null,h.v=null,y||Xe(h,"ready");try{v.onreadystatechange=b}catch{}}}function sa(h){h.I&&(d.clearTimeout(h.I),h.I=null)}n.isActive=function(){return!!this.g};function $n(h){return h.g?h.g.readyState:0}n.Z=function(){try{return 2<$n(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),$a(y)}};function jc(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Fd(h){const y={};h=(h.g&&2<=$n(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<h.length;b++){if(ie(h[b]))continue;var v=V(h[b]);const B=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const K=y[B]||[];y[B]=K,K.push(v)}P(y,function(b){return b.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function aa(h,y,v){return v&&v.internalChannelParams&&v.internalChannelParams[h]||y}function ro(h){this.Aa=0,this.i=[],this.j=new qn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=aa("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=aa("baseRetryDelayMs",5e3,h),this.cb=aa("retryDelaySeedMs",1e4,h),this.Wa=aa("forwardChannelMaxRetries",2,h),this.wa=aa("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new ti(h&&h.concurrentRequestLimit),this.Da=new ra,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=ro.prototype,n.la=8,n.G=1,n.connect=function(h,y,v,b){ct(0),this.W=h,this.H=y||{},v&&b!==void 0&&(this.H.OSID=v,this.H.OAID=b),this.F=this.X,this.I=Xc(this,null,this.W),so(this)};function Ol(h){if(Hc(h),h.G==3){var y=h.U++,v=In(h.I);if(Je(v,"SID",h.K),Je(v,"RID",y),Je(v,"TYPE","terminate"),oa(h,v),y=new pn(h,h.j,y),y.L=2,y.v=ea(In(v)),v=!1,d.navigator&&d.navigator.sendBeacon)try{v=d.navigator.sendBeacon(y.v.toString(),"")}catch{}!v&&d.Image&&(new Image().src=y.v,v=!0),v||(y.g=Wc(y.j,null),y.g.ea(y.v)),y.F=Date.now(),Xs(y)}Qc(h)}function io(h){h.g&&(la(h),h.g.cancel(),h.g=null)}function Hc(h){io(h),h.u&&(d.clearTimeout(h.u),h.u=null),ao(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&d.clearTimeout(h.s),h.s=null)}function so(h){if(!Qa(h.h)&&!h.s){h.s=!0;var y=h.Ga;oe||M(),ge||(oe(),ge=!0),$e.add(y,h),h.B=0}}function qd(h,y){return Xa(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=y.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=It(T(h.Ga,h,y),Vl(h,h.B)),h.B++,!0)}n.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const B=new pn(this,this.j,h);let K=this.o;if(this.S&&(K?(K=R(K),C(K,this.S)):K=this.S),this.m!==null||this.O||(B.H=K,K=null),this.P)e:{for(var y=0,v=0;v<this.i.length;v++){t:{var b=this.i[v];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break t}b=void 0}if(b===void 0)break;if(y+=b,4096<y){y=v;break e}if(y===4096||v===this.i.length-1){y=v+1;break e}}y=1e3}else y=1e3;y=Gc(this,B,y),v=In(this.I),Je(v,"RID",h),Je(v,"CVER",22),this.D&&Je(v,"X-HTTP-Session-Id",this.D),oa(this,v),K&&(this.O?y="headers="+encodeURIComponent(String(Dl(K)))+"&"+y:this.m&&qt(v,this.m,K)),Wa(this.h,B),this.Ua&&Je(v,"TYPE","init"),this.P?(Je(v,"$req",y),Je(v,"SID","null"),B.T=!0,ar(B,v,null)):ar(B,v,y),this.G=2}}else this.G==3&&(h?Ml(this,h):this.i.length==0||Qa(this.h)||Ml(this))};function Ml(h,y){var v;y?v=y.l:v=h.U++;const b=In(h.I);Je(b,"SID",h.K),Je(b,"RID",v),Je(b,"AID",h.T),oa(h,b),h.m&&h.o&&qt(b,h.m,h.o),v=new pn(h,h.j,v,h.B+1),h.m===null&&(v.H=h.o),y&&(h.i=y.D.concat(h.i)),y=Gc(h,v,1e3),v.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),Wa(h.h,v),ar(v,b,y)}function oa(h,y){h.H&&Ee(h.H,function(v,b){Je(y,b,v)}),h.l&&Sl({},function(v,b){Je(y,b,v)})}function Gc(h,y,v){v=Math.min(h.i.length,v);var b=h.l?T(h.l.Na,h.l,h):null;e:{var B=h.i;let K=-1;for(;;){const se=["count="+v];K==-1?0<v?(K=B[0].g,se.push("ofs="+K)):K=0:se.push("ofs="+K);let Be=!0;for(let kt=0;kt<v;kt++){let ze=B[kt].g;const jt=B[kt].map;if(ze-=K,0>ze)K=Math.max(0,B[kt].g-100),Be=!1;else try{br(jt,se,"req"+ze+"_")}catch{b&&b(jt)}}if(Be){b=se.join("&");break e}}}return h=h.i.splice(0,v),y.D=h,b}function $c(h){if(!h.g&&!h.u){h.Y=1;var y=h.Fa;oe||M(),ge||(oe(),ge=!0),$e.add(y,h),h.v=0}}function Pl(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=It(T(h.Fa,h),Vl(h,h.v)),h.v++,!0)}n.Fa=function(){if(this.u=null,Kc(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=It(T(this.ab,this),h)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ct(10),io(this),Kc(this))};function la(h){h.A!=null&&(d.clearTimeout(h.A),h.A=null)}function Kc(h){h.g=new pn(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var y=In(h.qa);Je(y,"RID","rpc"),Je(y,"SID",h.K),Je(y,"AID",h.T),Je(y,"CI",h.F?"0":"1"),!h.F&&h.ja&&Je(y,"TO",h.ja),Je(y,"TYPE","xmlhttp"),oa(h,y),h.m&&h.o&&qt(y,h.m,h.o),h.L&&(h.g.I=h.L);var v=h.g;h=h.ia,v.L=1,v.v=ea(In(y)),v.m=null,v.P=!0,ei(v,h)}n.Za=function(){this.C!=null&&(this.C=null,io(this),Pl(this),ct(19))};function ao(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function Yc(h,y){var v=null;if(h.g==y){ao(h),la(h),h.g=null;var b=2}else if(wl(h.h,y))v=y.D,mn(h.h,y),b=1;else return;if(h.G!=0){if(y.o)if(b==1){v=y.m?y.m.length:0,y=Date.now()-y.F;var B=h.B;b=xi(),Xe(b,new Vt(b,v)),so(h)}else $c(h);else if(B=y.s,B==3||B==0&&0<y.X||!(b==1&&qd(h,y)||b==2&&Pl(h)))switch(v&&0<v.length&&(y=h.h,y.i=y.i.concat(v)),B){case 1:oi(h,5);break;case 4:oi(h,10);break;case 3:oi(h,6);break;default:oi(h,2)}}}function Vl(h,y){let v=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(v*=2),v*y}function oi(h,y){if(h.j.info("Error code "+y),y==2){var v=T(h.fb,h),b=h.Xa;const B=!b;b=new Ct(b||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||Js(b,"https"),ea(b),B?na(b.toString(),v):or(b.toString(),v)}else ct(2);h.G=0,h.l&&h.l.sa(y),Qc(h),Hc(h)}n.fb=function(h){h?(this.j.info("Successfully pinged google.com"),ct(2)):(this.j.info("Failed to ping google.com"),ct(1))};function Qc(h){if(h.G=0,h.ka=[],h.l){const y=bl(h.h);(y.length!=0||h.i.length!=0)&&(U(h.ka,y),U(h.ka,h.i),h.h.i.length=0,H(h.i),h.i.length=0),h.l.ra()}}function Xc(h,y,v){var b=v instanceof Ct?In(v):new Ct(v);if(b.g!="")y&&(b.g=y+"."+b.g),Fi(b,b.s);else{var B=d.location;b=B.protocol,y=y?y+"."+B.hostname:B.hostname,B=+B.port;var K=new Ct(null);b&&Js(K,b),y&&(K.g=y),B&&Fi(K,B),v&&(K.l=v),b=K}return v=h.D,y=h.ya,v&&y&&Je(b,v,y),Je(b,"VER",h.la),oa(h,b),b}function Wc(h,y,v){if(y&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Ca&&!h.pa?new Ye(new qi({eb:v})):new Ye(h.pa),y.Ha(h.J),y}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Zc(){}n=Zc.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function oo(){}oo.prototype.g=function(h,y){return new gn(h,y)};function gn(h,y){_t.call(this),this.g=new ro(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(h?h["X-WebChannel-Client-Profile"]=y.va:h={"X-WebChannel-Client-Profile":y.va}),this.g.S=h,(h=y&&y.Sb)&&!ie(h)&&(this.g.m=h),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!ie(y)&&(this.g.D=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new Cr(this)}O(gn,_t),gn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},gn.prototype.close=function(){Ol(this.g)},gn.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var v={};v.__data__=h,h=v}else this.u&&(v={},v.__data__=sr(h),h=v);y.i.push(new Bc(y.Ya++,h)),y.G==3&&so(y)},gn.prototype.N=function(){this.g.l=null,delete this.j,Ol(this.g),delete this.g,gn.aa.N.call(this)};function Jc(h){Zr.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const v in y){h=v;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}O(Jc,Zr);function eh(){vl.call(this),this.status=1}O(eh,vl);function Cr(h){this.g=h}O(Cr,Zc),Cr.prototype.ua=function(){Xe(this.g,"a")},Cr.prototype.ta=function(h){Xe(this.g,new Jc(h))},Cr.prototype.sa=function(h){Xe(this.g,new eh)},Cr.prototype.ra=function(){Xe(this.g,"b")},oo.prototype.createWebChannel=oo.prototype.g,gn.prototype.send=gn.prototype.o,gn.prototype.open=gn.prototype.m,gn.prototype.close=gn.prototype.close,bb=function(){return new oo},wb=function(){return xi()},Ab=vr,vg={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Bi.NO_ERROR=0,Bi.TIMEOUT=8,Bi.HTTP_ERROR=6,_f=Bi,Jr.COMPLETE="complete",Tb=Jr,_l.EventType=Wr,Wr.OPEN="a",Wr.CLOSE="b",Wr.ERROR="c",Wr.MESSAGE="d",_t.prototype.listen=_t.prototype.K,Iu=_l,Ye.prototype.listenOnce=Ye.prototype.L,Ye.prototype.getLastError=Ye.prototype.Ka,Ye.prototype.getLastErrorCode=Ye.prototype.Ba,Ye.prototype.getStatus=Ye.prototype.Z,Ye.prototype.getResponseJson=Ye.prototype.Oa,Ye.prototype.getResponseText=Ye.prototype.oa,Ye.prototype.send=Ye.prototype.ea,Ye.prototype.setWithCredentials=Ye.prototype.Ha,Eb=Ye}).apply(typeof rf<"u"?rf:typeof self<"u"?self:typeof window<"u"?window:{});const N0="@firebase/firestore",D0="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}cn.UNAUTHENTICATED=new cn(null),cn.GOOGLE_CREDENTIALS=new cn("google-credentials-uid"),cn.FIRST_PARTY=new cn("first-party-uid"),cn.MOCK_USER=new cn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ol="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Va=new hc("@firebase/firestore");function Lo(){return Va.logLevel}function ue(n,...e){if(Va.logLevel<=ke.DEBUG){const t=e.map(fy);Va.debug(`Firestore (${ol}): ${n}`,...t)}}function Di(n,...e){if(Va.logLevel<=ke.ERROR){const t=e.map(fy);Va.error(`Firestore (${ol}): ${n}`,...t)}}function As(n,...e){if(Va.logLevel<=ke.WARN){const t=e.map(fy);Va.warn(`Firestore (${ol}): ${n}`,...t)}}function fy(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _e(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,Sb(n,i,t)}function Sb(n,e,t){let i=`FIRESTORE (${ol}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw Di(i),new Error(i)}function je(n,e,t,i){let a="Unexpected state";typeof t=="string"?a=t:i=t,n||Sb(e,a,i)}function Re(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ae extends ir{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rb{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class C2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(cn.UNAUTHENTICATED))}shutdown(){}}class N2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class D2{constructor(e){this.t=e,this.currentUser=cn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){je(this.o===void 0,42304);let i=this.i;const a=p=>this.i!==i?(i=this.i,t(p)):Promise.resolve();let l=new Ur;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Ur,e.enqueueRetryable(()=>a(this.currentUser))};const c=()=>{const p=l;e.enqueueRetryable(async()=>{await p.promise,await a(this.currentUser)})},d=p=>{ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(p=>d(p)),setTimeout(()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?d(p):(ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Ur)}},0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(je(typeof i.accessToken=="string",31837,{l:i}),new Rb(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return je(e===null||typeof e=="string",2055,{h:e}),new cn(e)}}class O2{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=cn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class M2{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new O2(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(cn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class O0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class P2{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,bn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){je(this.o===void 0,3512);const i=l=>{l.error!=null&&ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,ue("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>i(l))};const a=l=>{ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(l=>a(l)),setTimeout(()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new O0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(je(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new O0(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V2(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ib(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dy{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const a=V2(40);for(let l=0;l<a.length;++l)i.length<20&&a[l]<t&&(i+=e.charAt(a[l]%62))}return i}}function Ne(n,e){return n<e?-1:n>e?1:0}function Eg(n,e){let t=0;for(;t<n.length&&t<e.length;){const i=n.codePointAt(t),a=e.codePointAt(t);if(i!==a){if(i<128&&a<128)return Ne(i,a);{const l=Ib(),c=k2(l.encode(M0(n,t)),l.encode(M0(e,t)));return c!==0?c:Ne(i,a)}}t+=i>65535?2:1}return Ne(n.length,e.length)}function M0(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function k2(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return Ne(n[t],e[t]);return Ne(n.length,e.length)}function Xo(n,e,t){return n.length===e.length&&n.every((i,a)=>t(i,e[a]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P0="__name__";class kr{constructor(e,t,i){t===void 0?t=0:t>e.length&&_e(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&_e(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return kr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof kr?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let a=0;a<i;a++){const l=kr.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return Ne(e.length,t.length)}static compareSegments(e,t){const i=kr.isNumericId(e),a=kr.isNumericId(t);return i&&!a?-1:!i&&a?1:i&&a?kr.extractNumericId(e).compare(kr.extractNumericId(t)):Eg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return _s.fromString(e.substring(4,e.length-2))}}class rt extends kr{construct(e,t,i){return new rt(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new ae(Q.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(a=>a.length>0))}return new rt(t)}static emptyPath(){return new rt([])}}const x2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class tn extends kr{construct(e,t,i){return new tn(e,t,i)}static isValidIdentifier(e){return x2.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),tn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===P0}static keyField(){return new tn([P0])}static fromServerFormat(e){const t=[];let i="",a=0;const l=()=>{if(i.length===0)throw new ae(Q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let c=!1;for(;a<e.length;){const d=e[a];if(d==="\\"){if(a+1===e.length)throw new ae(Q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[a+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new ae(Q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=p,a+=2}else d==="`"?(c=!c,a++):d!=="."||c?(i+=d,a++):(l(),a++)}if(l(),c)throw new ae(Q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new tn(t)}static emptyPath(){return new tn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{constructor(e){this.path=e}static fromPath(e){return new me(rt.fromString(e))}static fromName(e){return new me(rt.fromString(e).popFirst(5))}static empty(){return new me(rt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&rt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return rt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new me(new rt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cb(n,e,t){if(!t)throw new ae(Q.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function L2(n,e,t,i){if(e===!0&&i===!0)throw new ae(Q.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function V0(n){if(!me.isDocumentKey(n))throw new ae(Q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function k0(n){if(me.isDocumentKey(n))throw new ae(Q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Nb(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function ld(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":_e(12329,{type:typeof n})}function vn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ae(Q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=ld(n);throw new ae(Q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function U2(n,e){if(e<=0)throw new ae(Q.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pt(n,e){const t={typeString:n};return e&&(t.value=e),t}function yc(n,e){if(!Nb(n))throw new ae(Q.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const a=e[i].typeString,l="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}const c=n[i];if(a&&typeof c!==a){t=`JSON field '${i}' must be a ${a}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${i}' field to equal '${l.value}'`;break}}if(t)throw new ae(Q.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x0=-62135596800,L0=1e6;class lt{static now(){return lt.fromMillis(Date.now())}static fromDate(e){return lt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*L0);return new lt(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ae(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ae(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<x0)throw new ae(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ae(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/L0}_compareTo(e){return this.seconds===e.seconds?Ne(this.nanoseconds,e.nanoseconds):Ne(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:lt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(yc(e,lt._jsonSchema))return new lt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-x0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}lt._jsonSchemaVersion="firestore/timestamp/1.0",lt._jsonSchema={type:Pt("string",lt._jsonSchemaVersion),seconds:Pt("number"),nanoseconds:Pt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{static fromTimestamp(e){return new Ae(e)}static min(){return new Ae(new lt(0,0))}static max(){return new Ae(new lt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yu=-1;function B2(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,a=Ae.fromTimestamp(i===1e9?new lt(t+1,0):new lt(t,i));return new ws(a,me.empty(),e)}function z2(n){return new ws(n.readTime,n.key,Yu)}class ws{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new ws(Ae.min(),me.empty(),Yu)}static max(){return new ws(Ae.max(),me.empty(),Yu)}}function F2(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=me.comparator(n.documentKey,e.documentKey),t!==0?t:Ne(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class j2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ll(n){if(n.code!==Q.FAILED_PRECONDITION||n.message!==q2)throw n;ue("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&_e(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ee((i,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,a)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ee?t:ee.resolve(t)}catch(t){return ee.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ee.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ee.reject(t)}static resolve(e){return new ee((t,i)=>{t(e)})}static reject(e){return new ee((t,i)=>{i(e)})}static waitFor(e){return new ee((t,i)=>{let a=0,l=0,c=!1;e.forEach(d=>{++a,d.next(()=>{++l,c&&l===a&&t()},p=>i(p))}),c=!0,l===a&&t()})}static or(e){let t=ee.resolve(!1);for(const i of e)t=t.next(a=>a?ee.resolve(a):i());return t}static forEach(e,t){const i=[];return e.forEach((a,l)=>{i.push(t.call(this,a,l))}),this.waitFor(i)}static mapArray(e,t){return new ee((i,a)=>{const l=e.length,c=new Array(l);let d=0;for(let p=0;p<l;p++){const g=p;t(e[g]).next(_=>{c[g]=_,++d,d===l&&i(c)},_=>a(_))}})}static doWhile(e,t){return new ee((i,a)=>{const l=()=>{e()===!0?t().next(()=>{l()},a):i()};l()})}}function H2(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function ul(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this._e(i),this.ae=i=>t.writeSequenceNumber(i))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}ud.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const py=-1;function _c(n){return n==null}function kf(n){return n===0&&1/n==-1/0}function G2(n){return typeof n=="number"&&Number.isInteger(n)&&!kf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Db="";function $2(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=U0(e)),e=K2(n.get(t),e);return U0(e)}function K2(n,e){let t=e;const i=n.length;for(let a=0;a<i;a++){const l=n.charAt(a);switch(l){case"\0":t+="";break;case Db:t+="";break;default:t+=l}}return t}function U0(n){return n+Db+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B0(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ls(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Ob(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e,t){this.comparator=e,this.root=t||en.EMPTY}insert(e,t){return new gt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,en.BLACK,null,null))}remove(e){return new gt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,en.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const a=this.comparator(e,i.key);if(a===0)return t+i.left.size;a<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new sf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new sf(this.root,e,this.comparator,!1)}getReverseIterator(){return new sf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new sf(this.root,e,this.comparator,!0)}}class sf{constructor(e,t,i,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class en{constructor(e,t,i,a,l){this.key=e,this.value=t,this.color=i??en.RED,this.left=a??en.EMPTY,this.right=l??en.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,a,l){return new en(e??this.key,t??this.value,i??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let a=this;const l=i(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,i),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,i)),a.fixUp()}removeMin(){if(this.left.isEmpty())return en.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return en.EMPTY;i=a.right.min(),a=a.copy(i.key,i.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,en.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,en.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw _e(43730,{key:this.key,value:this.value});if(this.right.isRed())throw _e(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw _e(27949);return e+(this.isRed()?0:1)}}en.EMPTY=null,en.RED=!0,en.BLACK=!1;en.EMPTY=new class{constructor(){this.size=0}get key(){throw _e(57766)}get value(){throw _e(16141)}get color(){throw _e(16727)}get left(){throw _e(29726)}get right(){throw _e(36894)}copy(e,t,i,a,l){return this}insert(e,t,i){return new en(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e){this.comparator=e,this.data=new gt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const a=i.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new z0(this.data.getIterator())}getIteratorFrom(e){return new z0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof Bt)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=i.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Bt(this.comparator);return t.data=e,t}}class z0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(e){this.fields=e,e.sort(tn.comparator)}static empty(){return new xn([])}unionWith(e){let t=new Bt(tn.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new xn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Xo(this.fields,e.fields,(t,i)=>t.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new Mb("Invalid base64 string: "+l):l}}(e);return new rn(t)}static fromUint8Array(e){const t=function(a){let l="";for(let c=0;c<a.length;++c)l+=String.fromCharCode(a[c]);return l}(e);return new rn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const i=new Uint8Array(t.length);for(let a=0;a<t.length;a++)i[a]=t.charCodeAt(a);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ne(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}rn.EMPTY_BYTE_STRING=new rn("");const Y2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function bs(n){if(je(!!n,39018),typeof n=="string"){let e=0;const t=Y2.exec(n);if(je(!!t,46558,{timestamp:n}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:St(n.seconds),nanos:St(n.nanos)}}function St(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Ss(n){return typeof n=="string"?rn.fromBase64String(n):rn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pb="server_timestamp",Vb="__type__",kb="__previous_value__",xb="__local_write_time__";function my(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[Vb])===null||t===void 0?void 0:t.stringValue)===Pb}function cd(n){const e=n.mapValue.fields[kb];return my(e)?cd(e):e}function Qu(n){const e=bs(n.mapValue.fields[xb].timestampValue);return new lt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q2{constructor(e,t,i,a,l,c,d,p,g,_){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=a,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=p,this.useFetchStreams=g,this.isUsingEmulator=_}}const xf="(default)";class Xu{constructor(e,t){this.projectId=e,this.database=t||xf}static empty(){return new Xu("","")}get isDefaultDatabase(){return this.database===xf}isEqual(e){return e instanceof Xu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lb="__type__",X2="__max__",af={mapValue:{}},Ub="__vector__",Lf="value";function Rs(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?my(n)?4:Z2(n)?9007199254740991:W2(n)?10:11:_e(28295,{value:n})}function jr(n,e){if(n===e)return!0;const t=Rs(n);if(t!==Rs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Qu(n).isEqual(Qu(e));case 3:return function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const c=bs(a.timestampValue),d=bs(l.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(a,l){return Ss(a.bytesValue).isEqual(Ss(l.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(a,l){return St(a.geoPointValue.latitude)===St(l.geoPointValue.latitude)&&St(a.geoPointValue.longitude)===St(l.geoPointValue.longitude)}(n,e);case 2:return function(a,l){if("integerValue"in a&&"integerValue"in l)return St(a.integerValue)===St(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const c=St(a.doubleValue),d=St(l.doubleValue);return c===d?kf(c)===kf(d):isNaN(c)&&isNaN(d)}return!1}(n,e);case 9:return Xo(n.arrayValue.values||[],e.arrayValue.values||[],jr);case 10:case 11:return function(a,l){const c=a.mapValue.fields||{},d=l.mapValue.fields||{};if(B0(c)!==B0(d))return!1;for(const p in c)if(c.hasOwnProperty(p)&&(d[p]===void 0||!jr(c[p],d[p])))return!1;return!0}(n,e);default:return _e(52216,{left:n})}}function Wu(n,e){return(n.values||[]).find(t=>jr(t,e))!==void 0}function Wo(n,e){if(n===e)return 0;const t=Rs(n),i=Rs(e);if(t!==i)return Ne(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ne(n.booleanValue,e.booleanValue);case 2:return function(l,c){const d=St(l.integerValue||l.doubleValue),p=St(c.integerValue||c.doubleValue);return d<p?-1:d>p?1:d===p?0:isNaN(d)?isNaN(p)?0:-1:1}(n,e);case 3:return F0(n.timestampValue,e.timestampValue);case 4:return F0(Qu(n),Qu(e));case 5:return Eg(n.stringValue,e.stringValue);case 6:return function(l,c){const d=Ss(l),p=Ss(c);return d.compareTo(p)}(n.bytesValue,e.bytesValue);case 7:return function(l,c){const d=l.split("/"),p=c.split("/");for(let g=0;g<d.length&&g<p.length;g++){const _=Ne(d[g],p[g]);if(_!==0)return _}return Ne(d.length,p.length)}(n.referenceValue,e.referenceValue);case 8:return function(l,c){const d=Ne(St(l.latitude),St(c.latitude));return d!==0?d:Ne(St(l.longitude),St(c.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return q0(n.arrayValue,e.arrayValue);case 10:return function(l,c){var d,p,g,_;const A=l.fields||{},T=c.fields||{},N=(d=A[Lf])===null||d===void 0?void 0:d.arrayValue,O=(p=T[Lf])===null||p===void 0?void 0:p.arrayValue,H=Ne(((g=N?.values)===null||g===void 0?void 0:g.length)||0,((_=O?.values)===null||_===void 0?void 0:_.length)||0);return H!==0?H:q0(N,O)}(n.mapValue,e.mapValue);case 11:return function(l,c){if(l===af.mapValue&&c===af.mapValue)return 0;if(l===af.mapValue)return 1;if(c===af.mapValue)return-1;const d=l.fields||{},p=Object.keys(d),g=c.fields||{},_=Object.keys(g);p.sort(),_.sort();for(let A=0;A<p.length&&A<_.length;++A){const T=Eg(p[A],_[A]);if(T!==0)return T;const N=Wo(d[p[A]],g[_[A]]);if(N!==0)return N}return Ne(p.length,_.length)}(n.mapValue,e.mapValue);default:throw _e(23264,{le:t})}}function F0(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ne(n,e);const t=bs(n),i=bs(e),a=Ne(t.seconds,i.seconds);return a!==0?a:Ne(t.nanos,i.nanos)}function q0(n,e){const t=n.values||[],i=e.values||[];for(let a=0;a<t.length&&a<i.length;++a){const l=Wo(t[a],i[a]);if(l)return l}return Ne(t.length,i.length)}function Zo(n){return Tg(n)}function Tg(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const i=bs(t);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Ss(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return me.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let i="[",a=!0;for(const l of t.values||[])a?a=!1:i+=",",i+=Tg(l);return i+"]"}(n.arrayValue):"mapValue"in n?function(t){const i=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const c of i)l?l=!1:a+=",",a+=`${c}:${Tg(t.fields[c])}`;return a+"}"}(n.mapValue):_e(61005,{value:n})}function vf(n){switch(Rs(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=cd(n);return e?16+vf(e):16;case 5:return 2*n.stringValue.length;case 6:return Ss(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((a,l)=>a+vf(l),0)}(n.arrayValue);case 10:case 11:return function(i){let a=0;return Ls(i.fields,(l,c)=>{a+=l.length+vf(c)}),a}(n.mapValue);default:throw _e(13486,{value:n})}}function j0(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Ag(n){return!!n&&"integerValue"in n}function gy(n){return!!n&&"arrayValue"in n}function H0(n){return!!n&&"nullValue"in n}function G0(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Ef(n){return!!n&&"mapValue"in n}function W2(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[Lb])===null||t===void 0?void 0:t.stringValue)===Ub}function Vu(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Ls(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=Vu(i)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Vu(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Z2(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===X2}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e){this.value=e}static empty(){return new _n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Ef(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Vu(t)}setAll(e){let t=tn.emptyPath(),i={},a=[];e.forEach((c,d)=>{if(!t.isImmediateParentOf(d)){const p=this.getFieldsMap(t);this.applyChanges(p,i,a),i={},a=[],t=d.popLast()}c?i[d.lastSegment()]=Vu(c):a.push(d.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,i,a)}delete(e){const t=this.field(e.popLast());Ef(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return jr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let a=t.mapValue.fields[e.get(i)];Ef(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,i){Ls(t,(a,l)=>e[a]=l);for(const a of i)delete e[a]}clone(){return new _n(Vu(this.value))}}function Bb(n){const e=[];return Ls(n.fields,(t,i)=>{const a=new tn([t]);if(Ef(i)){const l=Bb(i.mapValue).fields;if(l.length===0)e.push(a);else for(const c of l)e.push(a.child(c))}else e.push(a)}),new xn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e,t,i,a,l,c,d){this.key=e,this.documentType=t,this.version=i,this.readTime=a,this.createTime=l,this.data=c,this.documentState=d}static newInvalidDocument(e){return new Yt(e,0,Ae.min(),Ae.min(),Ae.min(),_n.empty(),0)}static newFoundDocument(e,t,i,a){return new Yt(e,1,t,Ae.min(),i,a,0)}static newNoDocument(e,t){return new Yt(e,2,t,Ae.min(),Ae.min(),_n.empty(),0)}static newUnknownDocument(e,t){return new Yt(e,3,t,Ae.min(),Ae.min(),_n.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=_n.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=_n.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Yt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Yt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uf{constructor(e,t){this.position=e,this.inclusive=t}}function $0(n,e,t){let i=0;for(let a=0;a<n.position.length;a++){const l=e[a],c=n.position[a];if(l.field.isKeyField()?i=me.comparator(me.fromName(c.referenceValue),t.key):i=Wo(c,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function K0(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!jr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu{constructor(e,t="asc"){this.field=e,this.dir=t}}function J2(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zb{}class Mt extends zb{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new tP(e,t,i):t==="array-contains"?new iP(e,i):t==="in"?new sP(e,i):t==="not-in"?new aP(e,i):t==="array-contains-any"?new oP(e,i):new Mt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new nP(e,i):new rP(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Wo(t,this.value)):t!==null&&Rs(this.value)===Rs(t)&&this.matchesComparison(Wo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return _e(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class gr extends zb{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new gr(e,t)}matches(e){return Fb(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function Fb(n){return n.op==="and"}function qb(n){return eP(n)&&Fb(n)}function eP(n){for(const e of n.filters)if(e instanceof gr)return!1;return!0}function wg(n){if(n instanceof Mt)return n.field.canonicalString()+n.op.toString()+Zo(n.value);if(qb(n))return n.filters.map(e=>wg(e)).join(",");{const e=n.filters.map(t=>wg(t)).join(",");return`${n.op}(${e})`}}function jb(n,e){return n instanceof Mt?function(i,a){return a instanceof Mt&&i.op===a.op&&i.field.isEqual(a.field)&&jr(i.value,a.value)}(n,e):n instanceof gr?function(i,a){return a instanceof gr&&i.op===a.op&&i.filters.length===a.filters.length?i.filters.reduce((l,c,d)=>l&&jb(c,a.filters[d]),!0):!1}(n,e):void _e(19439)}function Hb(n){return n instanceof Mt?function(t){return`${t.field.canonicalString()} ${t.op} ${Zo(t.value)}`}(n):n instanceof gr?function(t){return t.op.toString()+" {"+t.getFilters().map(Hb).join(" ,")+"}"}(n):"Filter"}class tP extends Mt{constructor(e,t,i){super(e,t,i),this.key=me.fromName(i.referenceValue)}matches(e){const t=me.comparator(e.key,this.key);return this.matchesComparison(t)}}class nP extends Mt{constructor(e,t){super(e,"in",t),this.keys=Gb("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class rP extends Mt{constructor(e,t){super(e,"not-in",t),this.keys=Gb("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Gb(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(i=>me.fromName(i.referenceValue))}class iP extends Mt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return gy(t)&&Wu(t.arrayValue,this.value)}}class sP extends Mt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Wu(this.value.arrayValue,t)}}class aP extends Mt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Wu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Wu(this.value.arrayValue,t)}}class oP extends Mt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!gy(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>Wu(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lP{constructor(e,t=null,i=[],a=[],l=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=a,this.limit=l,this.startAt=c,this.endAt=d,this.Pe=null}}function Y0(n,e=null,t=[],i=[],a=null,l=null,c=null){return new lP(n,e,t,i,a,l,c)}function yy(n){const e=Re(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>wg(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>function(l){return l.field.canonicalString()+l.dir}(i)).join(","),_c(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>Zo(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>Zo(i)).join(",")),e.Pe=t}return e.Pe}function _y(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!J2(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!jb(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!K0(n.startAt,e.startAt)&&K0(n.endAt,e.endAt)}function bg(n){return me.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl{constructor(e,t=null,i=[],a=[],l=null,c="F",d=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=a,this.limit=l,this.limitType=c,this.startAt=d,this.endAt=p,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function uP(n,e,t,i,a,l,c,d){return new cl(n,e,t,i,a,l,c,d)}function hd(n){return new cl(n)}function Q0(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function $b(n){return n.collectionGroup!==null}function ku(n){const e=Re(n);if(e.Te===null){e.Te=[];const t=new Set;for(const l of e.explicitOrderBy)e.Te.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new Bt(tn.comparator);return c.filters.forEach(p=>{p.getFlattenedFilters().forEach(g=>{g.isInequality()&&(d=d.add(g.field))})}),d})(e).forEach(l=>{t.has(l.canonicalString())||l.isKeyField()||e.Te.push(new Zu(l,i))}),t.has(tn.keyField().canonicalString())||e.Te.push(new Zu(tn.keyField(),i))}return e.Te}function Br(n){const e=Re(n);return e.Ie||(e.Ie=cP(e,ku(n))),e.Ie}function cP(n,e){if(n.limitType==="F")return Y0(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(a=>{const l=a.dir==="desc"?"asc":"desc";return new Zu(a.field,l)});const t=n.endAt?new Uf(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Uf(n.startAt.position,n.startAt.inclusive):null;return Y0(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function Sg(n,e){const t=n.filters.concat([e]);return new cl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Bf(n,e,t){return new cl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function fd(n,e){return _y(Br(n),Br(e))&&n.limitType===e.limitType}function Kb(n){return`${yy(Br(n))}|lt:${n.limitType}`}function Uo(n){return`Query(target=${function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(a=>Hb(a)).join(", ")}]`),_c(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(a=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(a)).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(a=>Zo(a)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(a=>Zo(a)).join(",")),`Target(${i})`}(Br(n))}; limitType=${n.limitType})`}function dd(n,e){return e.isFoundDocument()&&function(i,a){const l=a.key.path;return i.collectionGroup!==null?a.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):me.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)}(n,e)&&function(i,a){for(const l of ku(i))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0}(n,e)&&function(i,a){for(const l of i.filters)if(!l.matches(a))return!1;return!0}(n,e)&&function(i,a){return!(i.startAt&&!function(c,d,p){const g=$0(c,d,p);return c.inclusive?g<=0:g<0}(i.startAt,ku(i),a)||i.endAt&&!function(c,d,p){const g=$0(c,d,p);return c.inclusive?g>=0:g>0}(i.endAt,ku(i),a))}(n,e)}function hP(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Yb(n){return(e,t)=>{let i=!1;for(const a of ku(n)){const l=fP(a,e,t);if(l!==0)return l;i=i||a.field.isKeyField()}return 0}}function fP(n,e,t){const i=n.field.isKeyField()?me.comparator(e.key,t.key):function(l,c,d){const p=c.data.field(l),g=d.data.field(l);return p!==null&&g!==null?Wo(p,g):_e(42886)}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return _e(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[a,l]of i)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),a=this.inner[i];if(a===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return i.length===1?delete this.inner[t]:i.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Ls(this.inner,(t,i)=>{for(const[a,l]of i)e(a,l)})}isEmpty(){return Ob(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dP=new gt(me.comparator);function Oi(){return dP}const Qb=new gt(me.comparator);function Cu(...n){let e=Qb;for(const t of n)e=e.insert(t.key,t);return e}function Xb(n){let e=Qb;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function Ia(){return xu()}function Wb(){return xu()}function xu(){return new za(n=>n.toString(),(n,e)=>n.isEqual(e))}const pP=new gt(me.comparator),mP=new Bt(me.comparator);function Ue(...n){let e=mP;for(const t of n)e=e.add(t);return e}const gP=new Bt(Ne);function yP(){return gP}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vy(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:kf(e)?"-0":e}}function Zb(n){return{integerValue:""+n}}function _P(n,e){return G2(e)?Zb(e):vy(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pd{constructor(){this._=void 0}}function vP(n,e,t){return n instanceof Ju?function(a,l){const c={fields:{[Vb]:{stringValue:Pb},[xb]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&my(l)&&(l=cd(l)),l&&(c.fields[kb]=l),{mapValue:c}}(t,e):n instanceof ec?eS(n,e):n instanceof tc?tS(n,e):function(a,l){const c=Jb(a,l),d=X0(c)+X0(a.Ee);return Ag(c)&&Ag(a.Ee)?Zb(d):vy(a.serializer,d)}(n,e)}function EP(n,e,t){return n instanceof ec?eS(n,e):n instanceof tc?tS(n,e):t}function Jb(n,e){return n instanceof zf?function(i){return Ag(i)||function(l){return!!l&&"doubleValue"in l}(i)}(e)?e:{integerValue:0}:null}class Ju extends pd{}class ec extends pd{constructor(e){super(),this.elements=e}}function eS(n,e){const t=nS(e);for(const i of n.elements)t.some(a=>jr(a,i))||t.push(i);return{arrayValue:{values:t}}}class tc extends pd{constructor(e){super(),this.elements=e}}function tS(n,e){let t=nS(e);for(const i of n.elements)t=t.filter(a=>!jr(a,i));return{arrayValue:{values:t}}}class zf extends pd{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function X0(n){return St(n.integerValue||n.doubleValue)}function nS(n){return gy(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TP{constructor(e,t){this.field=e,this.transform=t}}function AP(n,e){return n.field.isEqual(e.field)&&function(i,a){return i instanceof ec&&a instanceof ec||i instanceof tc&&a instanceof tc?Xo(i.elements,a.elements,jr):i instanceof zf&&a instanceof zf?jr(i.Ee,a.Ee):i instanceof Ju&&a instanceof Ju}(n.transform,e.transform)}class wP{constructor(e,t){this.version=e,this.transformResults=t}}class nn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new nn}static exists(e){return new nn(void 0,e)}static updateTime(e){return new nn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Tf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class md{}function rS(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new gd(n.key,nn.none()):new vc(n.key,n.data,nn.none());{const t=n.data,i=_n.empty();let a=new Bt(tn.comparator);for(let l of e.fields)if(!a.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?i.delete(l):i.set(l,c),a=a.add(l)}return new Us(n.key,i,new xn(a.toArray()),nn.none())}}function bP(n,e,t){n instanceof vc?function(a,l,c){const d=a.value.clone(),p=Z0(a.fieldTransforms,l,c.transformResults);d.setAll(p),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()}(n,e,t):n instanceof Us?function(a,l,c){if(!Tf(a.precondition,l))return void l.convertToUnknownDocument(c.version);const d=Z0(a.fieldTransforms,l,c.transformResults),p=l.data;p.setAll(iS(a)),p.setAll(d),l.convertToFoundDocument(c.version,p).setHasCommittedMutations()}(n,e,t):function(a,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()}(0,e,t)}function Lu(n,e,t,i){return n instanceof vc?function(l,c,d,p){if(!Tf(l.precondition,c))return d;const g=l.value.clone(),_=J0(l.fieldTransforms,p,c);return g.setAll(_),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),null}(n,e,t,i):n instanceof Us?function(l,c,d,p){if(!Tf(l.precondition,c))return d;const g=J0(l.fieldTransforms,p,c),_=c.data;return _.setAll(iS(l)),_.setAll(g),c.convertToFoundDocument(c.version,_).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(A=>A.field))}(n,e,t,i):function(l,c,d){return Tf(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d}(n,e,t)}function SP(n,e){let t=null;for(const i of n.fieldTransforms){const a=e.data.field(i.field),l=Jb(i.transform,a||null);l!=null&&(t===null&&(t=_n.empty()),t.set(i.field,l))}return t||null}function W0(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(i,a){return i===void 0&&a===void 0||!(!i||!a)&&Xo(i,a,(l,c)=>AP(l,c))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class vc extends md{constructor(e,t,i,a=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Us extends md{constructor(e,t,i,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function iS(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}}),e}function Z0(n,e,t){const i=new Map;je(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let a=0;a<t.length;a++){const l=n[a],c=l.transform,d=e.data.field(l.field);i.set(l.field,EP(c,d,t[a]))}return i}function J0(n,e,t){const i=new Map;for(const a of n){const l=a.transform,c=t.data.field(a.field);i.set(a.field,vP(l,c,e))}return i}class gd extends md{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class sS extends md{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RP{constructor(e,t,i,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=a}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&bP(l,e,i[a])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=Lu(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=Lu(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=Wb();return this.mutations.forEach(a=>{const l=e.get(a.key),c=l.overlayedDocument;let d=this.applyToLocalView(c,l.mutatedFields);d=t.has(a.key)?null:d;const p=rS(c,d);p!==null&&i.set(a.key,p),c.isValidDocument()||c.convertToNoDocument(Ae.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ue())}isEqual(e){return this.batchId===e.batchId&&Xo(this.mutations,e.mutations,(t,i)=>W0(t,i))&&Xo(this.baseMutations,e.baseMutations,(t,i)=>W0(t,i))}}class Ey{constructor(e,t,i,a){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=a}static from(e,t,i){je(e.mutations.length===i.length,58842,{Ve:e.mutations.length,me:i.length});let a=function(){return pP}();const l=e.mutations;for(let c=0;c<l.length;c++)a=a.insert(l[c].key,i[c].version);return new Ey(e,t,i,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IP{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CP{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ot,qe;function aS(n){switch(n){case Q.OK:return _e(64938);case Q.CANCELLED:case Q.UNKNOWN:case Q.DEADLINE_EXCEEDED:case Q.RESOURCE_EXHAUSTED:case Q.INTERNAL:case Q.UNAVAILABLE:case Q.UNAUTHENTICATED:return!1;case Q.INVALID_ARGUMENT:case Q.NOT_FOUND:case Q.ALREADY_EXISTS:case Q.PERMISSION_DENIED:case Q.FAILED_PRECONDITION:case Q.ABORTED:case Q.OUT_OF_RANGE:case Q.UNIMPLEMENTED:case Q.DATA_LOSS:return!0;default:return _e(15467,{code:n})}}function oS(n){if(n===void 0)return Di("GRPC error has no .code"),Q.UNKNOWN;switch(n){case Ot.OK:return Q.OK;case Ot.CANCELLED:return Q.CANCELLED;case Ot.UNKNOWN:return Q.UNKNOWN;case Ot.DEADLINE_EXCEEDED:return Q.DEADLINE_EXCEEDED;case Ot.RESOURCE_EXHAUSTED:return Q.RESOURCE_EXHAUSTED;case Ot.INTERNAL:return Q.INTERNAL;case Ot.UNAVAILABLE:return Q.UNAVAILABLE;case Ot.UNAUTHENTICATED:return Q.UNAUTHENTICATED;case Ot.INVALID_ARGUMENT:return Q.INVALID_ARGUMENT;case Ot.NOT_FOUND:return Q.NOT_FOUND;case Ot.ALREADY_EXISTS:return Q.ALREADY_EXISTS;case Ot.PERMISSION_DENIED:return Q.PERMISSION_DENIED;case Ot.FAILED_PRECONDITION:return Q.FAILED_PRECONDITION;case Ot.ABORTED:return Q.ABORTED;case Ot.OUT_OF_RANGE:return Q.OUT_OF_RANGE;case Ot.UNIMPLEMENTED:return Q.UNIMPLEMENTED;case Ot.DATA_LOSS:return Q.DATA_LOSS;default:return _e(39323,{code:n})}}(qe=Ot||(Ot={}))[qe.OK=0]="OK",qe[qe.CANCELLED=1]="CANCELLED",qe[qe.UNKNOWN=2]="UNKNOWN",qe[qe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",qe[qe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",qe[qe.NOT_FOUND=5]="NOT_FOUND",qe[qe.ALREADY_EXISTS=6]="ALREADY_EXISTS",qe[qe.PERMISSION_DENIED=7]="PERMISSION_DENIED",qe[qe.UNAUTHENTICATED=16]="UNAUTHENTICATED",qe[qe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",qe[qe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",qe[qe.ABORTED=10]="ABORTED",qe[qe.OUT_OF_RANGE=11]="OUT_OF_RANGE",qe[qe.UNIMPLEMENTED=12]="UNIMPLEMENTED",qe[qe.INTERNAL=13]="INTERNAL",qe[qe.UNAVAILABLE=14]="UNAVAILABLE",qe[qe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NP=new _s([4294967295,4294967295],0);function eA(n){const e=Ib().encode(n),t=new vb;return t.update(e),new Uint8Array(t.digest())}function tA(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new _s([t,i],0),new _s([a,l],0)]}class Ty{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Nu(`Invalid padding: ${t}`);if(i<0)throw new Nu(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Nu(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Nu(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=_s.fromNumber(this.fe)}pe(e,t,i){let a=e.add(t.multiply(_s.fromNumber(i)));return a.compare(NP)===1&&(a=new _s([a.getBits(0),a.getBits(1)],0)),a.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const t=eA(e),[i,a]=tA(t);for(let l=0;l<this.hashCount;l++){const c=this.pe(i,a,l);if(!this.ye(c))return!1}return!0}static create(e,t,i){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new Ty(l,a,t);return i.forEach(d=>c.insert(d)),c}insert(e){if(this.fe===0)return;const t=eA(e),[i,a]=tA(t);for(let l=0;l<this.hashCount;l++){const c=this.pe(i,a,l);this.we(c)}}we(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Nu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(e,t,i,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const a=new Map;return a.set(e,Ec.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new yd(Ae.min(),a,new gt(Ne),Oi(),Ue())}}class Ec{constructor(e,t,i,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Ec(i,t,Ue(),Ue(),Ue())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Af{constructor(e,t,i,a){this.Se=e,this.removedTargetIds=t,this.key=i,this.be=a}}class lS{constructor(e,t){this.targetId=e,this.De=t}}class uS{constructor(e,t,i=rn.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=a}}class nA{constructor(){this.ve=0,this.Ce=rA(),this.Fe=rn.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Ue(),t=Ue(),i=Ue();return this.Ce.forEach((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:i=i.add(a);break;default:_e(38017,{changeType:l})}}),new Ec(this.Fe,this.Me,e,t,i)}ke(){this.xe=!1,this.Ce=rA()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,je(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class DP{constructor(e){this.We=e,this.Ge=new Map,this.ze=Oi(),this.je=of(),this.Je=of(),this.He=new gt(Ne)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{const i=this.tt(t);switch(e.state){case 0:this.nt(t)&&i.Be(e.resumeToken);break;case 1:i.Ue(),i.Oe||i.ke(),i.Be(e.resumeToken);break;case 2:i.Ue(),i.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(i.Ke(),i.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),i.Be(e.resumeToken));break;default:_e(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((i,a)=>{this.nt(a)&&t(a)})}it(e){const t=e.targetId,i=e.De.count,a=this.st(t);if(a){const l=a.target;if(bg(l))if(i===0){const c=new me(l.path);this.Xe(t,c,Yt.newNoDocument(c,Ae.min()))}else je(i===1,20013,{expectedCount:i});else{const c=this.ot(t);if(c!==i){const d=this._t(e),p=d?this.ut(d,e,c):1;if(p!==0){this.rt(t);const g=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,g)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:a=0},hashCount:l=0}=t;let c,d;try{c=Ss(i).toUint8Array()}catch(p){if(p instanceof Mb)return As("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{d=new Ty(c,a,l)}catch(p){return As(p instanceof Nu?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return d.fe===0?null:d}ut(e,t,i){return t.De.count===i-this.ht(e,t.targetId)?0:2}ht(e,t){const i=this.We.getRemoteKeysForTarget(t);let a=0;return i.forEach(l=>{const c=this.We.lt(),d=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.Xe(t,l,null),a++)}),a}Pt(e){const t=new Map;this.Ge.forEach((l,c)=>{const d=this.st(c);if(d){if(l.current&&bg(d.target)){const p=new me(d.target.path);this.Tt(p).has(c)||this.It(c,p)||this.Xe(c,p,Yt.newNoDocument(p,e))}l.Ne&&(t.set(c,l.Le()),l.ke())}});let i=Ue();this.Je.forEach((l,c)=>{let d=!0;c.forEachWhile(p=>{const g=this.st(p);return!g||g.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)}),d&&(i=i.add(l))}),this.ze.forEach((l,c)=>c.setReadTime(e));const a=new yd(e,t,this.He,this.ze,i);return this.ze=Oi(),this.je=of(),this.Je=of(),this.He=new gt(Ne),a}Ze(e,t){if(!this.nt(e))return;const i=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,i),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,i){if(!this.nt(e))return;const a=this.tt(e);this.It(e,t)?a.qe(t,1):a.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),i&&(this.ze=this.ze.insert(t,i))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new nA,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new Bt(Ne),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new Bt(Ne),this.je=this.je.insert(e,t)),t}nt(e){const t=this.st(e)!==null;return t||ue("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new nA),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function of(){return new gt(me.comparator)}function rA(){return new gt(me.comparator)}const OP={asc:"ASCENDING",desc:"DESCENDING"},MP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},PP={and:"AND",or:"OR"};class VP{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Rg(n,e){return n.useProto3Json||_c(e)?e:{value:e}}function Ff(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function cS(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function kP(n,e){return Ff(n,e.toTimestamp())}function Un(n){return je(!!n,49232),Ae.fromTimestamp(function(t){const i=bs(t);return new lt(i.seconds,i.nanos)}(n))}function Ay(n,e){return Ig(n,e).canonicalString()}function Ig(n,e){const t=function(a){return new rt(["projects",a.projectId,"databases",a.database])}(n).child("documents");return e===void 0?t:t.child(e)}function hS(n){const e=rt.fromString(n);return je(yS(e),10190,{key:e.toString()}),e}function qf(n,e){return Ay(n.databaseId,e.path)}function Uu(n,e){const t=hS(e);if(t.get(1)!==n.databaseId.projectId)throw new ae(Q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ae(Q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new me(dS(t))}function fS(n,e){return Ay(n.databaseId,e)}function xP(n){const e=hS(n);return e.length===4?rt.emptyPath():dS(e)}function Cg(n){return new rt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function dS(n){return je(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function iA(n,e,t){return{name:qf(n,e),fields:t.value.mapValue.fields}}function LP(n,e){return"found"in e?function(i,a){je(!!a.found,43571),a.found.name,a.found.updateTime;const l=Uu(i,a.found.name),c=Un(a.found.updateTime),d=a.found.createTime?Un(a.found.createTime):Ae.min(),p=new _n({mapValue:{fields:a.found.fields}});return Yt.newFoundDocument(l,c,d,p)}(n,e):"missing"in e?function(i,a){je(!!a.missing,3894),je(!!a.readTime,22933);const l=Uu(i,a.missing),c=Un(a.readTime);return Yt.newNoDocument(l,c)}(n,e):_e(7234,{result:e})}function UP(n,e){let t;if("targetChange"in e){e.targetChange;const i=function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:_e(39313,{state:g})}(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=function(g,_){return g.useProto3Json?(je(_===void 0||typeof _=="string",58123),rn.fromBase64String(_||"")):(je(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),rn.fromUint8Array(_||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&function(g){const _=g.code===void 0?Q.UNKNOWN:oS(g.code);return new ae(_,g.message||"")}(c);t=new uS(i,a,l,d||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const a=Uu(n,i.document.name),l=Un(i.document.updateTime),c=i.document.createTime?Un(i.document.createTime):Ae.min(),d=new _n({mapValue:{fields:i.document.fields}}),p=Yt.newFoundDocument(a,l,c,d),g=i.targetIds||[],_=i.removedTargetIds||[];t=new Af(g,_,p.key,p)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const a=Uu(n,i.document),l=i.readTime?Un(i.readTime):Ae.min(),c=Yt.newNoDocument(a,l),d=i.removedTargetIds||[];t=new Af([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const a=Uu(n,i.document),l=i.removedTargetIds||[];t=new Af([],l,a,null)}else{if(!("filter"in e))return _e(11601,{At:e});{e.filter;const i=e.filter;i.targetId;const{count:a=0,unchangedNames:l}=i,c=new CP(a,l),d=i.targetId;t=new lS(d,c)}}return t}function pS(n,e){let t;if(e instanceof vc)t={update:iA(n,e.key,e.value)};else if(e instanceof gd)t={delete:qf(n,e.key)};else if(e instanceof Us)t={update:iA(n,e.key,e.data),updateMask:KP(e.fieldMask)};else{if(!(e instanceof sS))return _e(16599,{Rt:e.type});t={verify:qf(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(l,c){const d=c.transform;if(d instanceof Ju)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof ec)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof tc)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof zf)return{fieldPath:c.field.canonicalString(),increment:d.Ee};throw _e(20930,{transform:c.transform})}(0,i))),e.precondition.isNone||(t.currentDocument=function(a,l){return l.updateTime!==void 0?{updateTime:kP(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:_e(27497)}(n,e.precondition)),t}function BP(n,e){return n&&n.length>0?(je(e!==void 0,14353),n.map(t=>function(a,l){let c=a.updateTime?Un(a.updateTime):Un(l);return c.isEqual(Ae.min())&&(c=Un(l)),new wP(c,a.transformResults||[])}(t,e))):[]}function zP(n,e){return{documents:[fS(n,e.path)]}}function FP(n,e){const t={structuredQuery:{}},i=e.path;let a;e.collectionGroup!==null?(a=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=fS(n,a);const l=function(g){if(g.length!==0)return gS(gr.create(g,"and"))}(e.filters);l&&(t.structuredQuery.where=l);const c=function(g){if(g.length!==0)return g.map(_=>function(T){return{field:Bo(T.field),direction:HP(T.dir)}}(_))}(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=Rg(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=function(g){return{before:g.inclusive,values:g.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(g){return{before:!g.inclusive,values:g.position}}(e.endAt)),{Vt:t,parent:a}}function qP(n){let e=xP(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let a=null;if(i>0){je(i===1,65062);const _=t.from[0];_.allDescendants?a=_.collectionId:e=e.child(_.collectionId)}let l=[];t.where&&(l=function(A){const T=mS(A);return T instanceof gr&&qb(T)?T.getFilters():[T]}(t.where));let c=[];t.orderBy&&(c=function(A){return A.map(T=>function(O){return new Zu(zo(O.field),function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(O.direction))}(T))}(t.orderBy));let d=null;t.limit&&(d=function(A){let T;return T=typeof A=="object"?A.value:A,_c(T)?null:T}(t.limit));let p=null;t.startAt&&(p=function(A){const T=!!A.before,N=A.values||[];return new Uf(N,T)}(t.startAt));let g=null;return t.endAt&&(g=function(A){const T=!A.before,N=A.values||[];return new Uf(N,T)}(t.endAt)),uP(e,a,c,l,d,"F",p,g)}function jP(n,e){const t=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return _e(28987,{purpose:a})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function mS(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=zo(t.unaryFilter.field);return Mt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const a=zo(t.unaryFilter.field);return Mt.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=zo(t.unaryFilter.field);return Mt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=zo(t.unaryFilter.field);return Mt.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return _e(61313);default:return _e(60726)}}(n):n.fieldFilter!==void 0?function(t){return Mt.create(zo(t.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return _e(58110);default:return _e(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return gr.create(t.compositeFilter.filters.map(i=>mS(i)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return _e(1026)}}(t.compositeFilter.op))}(n):_e(30097,{filter:n})}function HP(n){return OP[n]}function GP(n){return MP[n]}function $P(n){return PP[n]}function Bo(n){return{fieldPath:n.canonicalString()}}function zo(n){return tn.fromServerFormat(n.fieldPath)}function gS(n){return n instanceof Mt?function(t){if(t.op==="=="){if(G0(t.value))return{unaryFilter:{field:Bo(t.field),op:"IS_NAN"}};if(H0(t.value))return{unaryFilter:{field:Bo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(G0(t.value))return{unaryFilter:{field:Bo(t.field),op:"IS_NOT_NAN"}};if(H0(t.value))return{unaryFilter:{field:Bo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Bo(t.field),op:GP(t.op),value:t.value}}}(n):n instanceof gr?function(t){const i=t.getFilters().map(a=>gS(a));return i.length===1?i[0]:{compositeFilter:{op:$P(t.op),filters:i}}}(n):_e(54877,{filter:n})}function KP(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function yS(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{constructor(e,t,i,a,l=Ae.min(),c=Ae.min(),d=rn.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=p}withSequenceNumber(e){return new ms(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ms(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ms(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ms(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YP{constructor(e){this.gt=e}}function QP(n){const e=qP({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Bf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XP{constructor(){this.Dn=new WP}addToCollectionParentIndex(e,t){return this.Dn.add(t),ee.resolve()}getCollectionParents(e,t){return ee.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return ee.resolve()}deleteFieldIndex(e,t){return ee.resolve()}deleteAllFieldIndexes(e){return ee.resolve()}createTargetIndexes(e,t){return ee.resolve()}getDocumentsMatchingTarget(e,t){return ee.resolve(null)}getIndexType(e,t){return ee.resolve(0)}getFieldIndexes(e,t){return ee.resolve([])}getNextCollectionGroupToUpdate(e){return ee.resolve(null)}getMinOffset(e,t){return ee.resolve(ws.min())}getMinOffsetFromCollectionGroup(e,t){return ee.resolve(ws.min())}updateCollectionGroup(e,t,i){return ee.resolve()}updateIndexEntries(e,t){return ee.resolve()}}class WP{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t]||new Bt(rt.comparator),l=!a.has(i);return this.index[t]=a.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t];return a&&a.has(i)}getEntries(e){return(this.index[e]||new Bt(rt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sA={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},_S=41943040;class wn{static withCacheSize(e){return new wn(e,wn.DEFAULT_COLLECTION_PERCENTILE,wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */wn.DEFAULT_COLLECTION_PERCENTILE=10,wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,wn.DEFAULT=new wn(_S,wn.DEFAULT_COLLECTION_PERCENTILE,wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),wn.DISABLED=new wn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Jo(0)}static ur(){return new Jo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aA="LruGarbageCollector",ZP=1048576;function oA([n,e],[t,i]){const a=Ne(n,t);return a===0?Ne(e,i):a}class JP{constructor(e){this.Tr=e,this.buffer=new Bt(oA),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();oA(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class eV{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){ue(aA,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){ul(t)?ue(aA,"Ignoring IndexedDB error during garbage collection: ",t):await ll(t)}await this.Rr(3e5)})}}class tV{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(t===0)return ee.resolve(ud.ue);const i=new JP(t);return this.Vr.forEachTarget(e,a=>i.Er(a.sequenceNumber)).next(()=>this.Vr.gr(e,a=>i.Er(a))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.Vr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ue("LruGarbageCollector","Garbage collection skipped; disabled"),ee.resolve(sA)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(ue("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),sA):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let i,a,l,c,d,p,g;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(A=>(A>this.params.maximumSequenceNumbersToCollect?(ue("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${A}`),a=this.params.maximumSequenceNumbersToCollect):a=A,c=Date.now(),this.nthSequenceNumber(e,a))).next(A=>(i=A,d=Date.now(),this.removeTargets(e,i,t))).next(A=>(l=A,p=Date.now(),this.removeOrphanedDocuments(e,i))).next(A=>(g=Date.now(),Lo()<=ke.DEBUG&&ue("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-_}ms
	Determined least recently used ${a} in `+(d-c)+`ms
	Removed ${l} targets in `+(p-d)+`ms
	Removed ${A} documents in `+(g-p)+`ms
Total Duration: ${g-_}ms`),ee.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:A})))}}function nV(n,e){return new tV(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rV{constructor(){this.changes=new za(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Yt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?ee.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iV{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sV{constructor(e,t,i,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=a}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(a=>(i=a,this.remoteDocumentCache.getEntry(e,t))).next(a=>(i!==null&&Lu(i.mutation,a,xn.empty(),lt.now()),a))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,Ue()).next(()=>i))}getLocalViewOfDocuments(e,t,i=Ue()){const a=Ia();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,i).next(l=>{let c=Cu();return l.forEach((d,p)=>{c=c.insert(d,p.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const i=Ia();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,Ue()))}populateOverlays(e,t,i){const a=[];return i.forEach(l=>{t.has(l)||a.push(l)}),this.documentOverlayCache.getOverlays(e,a).next(l=>{l.forEach((c,d)=>{t.set(c,d)})})}computeViews(e,t,i,a){let l=Oi();const c=xu(),d=function(){return xu()}();return t.forEach((p,g)=>{const _=i.get(g.key);a.has(g.key)&&(_===void 0||_.mutation instanceof Us)?l=l.insert(g.key,g):_!==void 0?(c.set(g.key,_.mutation.getFieldMask()),Lu(_.mutation,g,_.mutation.getFieldMask(),lt.now())):c.set(g.key,xn.empty())}),this.recalculateAndSaveOverlays(e,l).next(p=>(p.forEach((g,_)=>c.set(g,_)),t.forEach((g,_)=>{var A;return d.set(g,new iV(_,(A=c.get(g))!==null&&A!==void 0?A:null))}),d))}recalculateAndSaveOverlays(e,t){const i=xu();let a=new gt((c,d)=>c-d),l=Ue();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const d of c)d.keys().forEach(p=>{const g=t.get(p);if(g===null)return;let _=i.get(p)||xn.empty();_=d.applyToLocalView(g,_),i.set(p,_);const A=(a.get(d.batchId)||Ue()).add(p);a=a.insert(d.batchId,A)})}).next(()=>{const c=[],d=a.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),g=p.key,_=p.value,A=Wb();_.forEach(T=>{if(!l.has(T)){const N=rS(t.get(T),i.get(T));N!==null&&A.set(T,N),l=l.add(T)}}),c.push(this.documentOverlayCache.saveOverlays(e,g,A))}return ee.waitFor(c)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i,a){return function(c){return me.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):$b(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,a):this.getDocumentsMatchingCollectionQuery(e,t,i,a)}getNextDocuments(e,t,i,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,a).next(l=>{const c=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,a-l.size):ee.resolve(Ia());let d=Yu,p=l;return c.next(g=>ee.forEach(g,(_,A)=>(d<A.largestBatchId&&(d=A.largestBatchId),l.get(_)?ee.resolve():this.remoteDocumentCache.getEntry(e,_).next(T=>{p=p.insert(_,T)}))).next(()=>this.populateOverlays(e,g,l)).next(()=>this.computeViews(e,p,g,Ue())).next(_=>({batchId:d,changes:Xb(_)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new me(t)).next(i=>{let a=Cu();return i.isFoundDocument()&&(a=a.insert(i.key,i)),a})}getDocumentsMatchingCollectionGroupQuery(e,t,i,a){const l=t.collectionGroup;let c=Cu();return this.indexManager.getCollectionParents(e,l).next(d=>ee.forEach(d,p=>{const g=function(A,T){return new cl(T,null,A.explicitOrderBy.slice(),A.filters.slice(),A.limit,A.limitType,A.startAt,A.endAt)}(t,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,g,i,a).next(_=>{_.forEach((A,T)=>{c=c.insert(A,T)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,t,i,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,a))).next(c=>{l.forEach((p,g)=>{const _=g.getKey();c.get(_)===null&&(c=c.insert(_,Yt.newInvalidDocument(_)))});let d=Cu();return c.forEach((p,g)=>{const _=l.get(p);_!==void 0&&Lu(_.mutation,g,xn.empty(),lt.now()),dd(t,g)&&(d=d.insert(p,g))}),d})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aV{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return ee.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,function(a){return{id:a.id,version:a.version,createTime:Un(a.createTime)}}(t)),ee.resolve()}getNamedQuery(e,t){return ee.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,function(a){return{name:a.name,query:QP(a.bundledQuery),readTime:Un(a.readTime)}}(t)),ee.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oV{constructor(){this.overlays=new gt(me.comparator),this.kr=new Map}getOverlay(e,t){return ee.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Ia();return ee.forEach(t,a=>this.getOverlay(e,a).next(l=>{l!==null&&i.set(a,l)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((a,l)=>{this.wt(e,t,l)}),ee.resolve()}removeOverlaysForBatchId(e,t,i){const a=this.kr.get(i);return a!==void 0&&(a.forEach(l=>this.overlays=this.overlays.remove(l)),this.kr.delete(i)),ee.resolve()}getOverlaysForCollection(e,t,i){const a=Ia(),l=t.length+1,c=new me(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const p=d.getNext().value,g=p.getKey();if(!t.isPrefixOf(g.path))break;g.path.length===l&&p.largestBatchId>i&&a.set(p.getKey(),p)}return ee.resolve(a)}getOverlaysForCollectionGroup(e,t,i,a){let l=new gt((g,_)=>g-_);const c=this.overlays.getIterator();for(;c.hasNext();){const g=c.getNext().value;if(g.getKey().getCollectionGroup()===t&&g.largestBatchId>i){let _=l.get(g.largestBatchId);_===null&&(_=Ia(),l=l.insert(g.largestBatchId,_)),_.set(g.getKey(),g)}}const d=Ia(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((g,_)=>d.set(g,_)),!(d.size()>=a)););return ee.resolve(d)}wt(e,t,i){const a=this.overlays.get(i.key);if(a!==null){const c=this.kr.get(a.largestBatchId).delete(i.key);this.kr.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new IP(t,i));let l=this.kr.get(t);l===void 0&&(l=Ue(),this.kr.set(t,l)),this.kr.set(t,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lV{constructor(){this.sessionToken=rn.EMPTY_BYTE_STRING}getSessionToken(e){return ee.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ee.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wy{constructor(){this.qr=new Bt(Kt.Qr),this.$r=new Bt(Kt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const i=new Kt(e,t);this.qr=this.qr.add(i),this.$r=this.$r.add(i)}Kr(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.Wr(new Kt(e,t))}Gr(e,t){e.forEach(i=>this.removeReference(i,t))}zr(e){const t=new me(new rt([])),i=new Kt(t,e),a=new Kt(t,e+1),l=[];return this.$r.forEachInRange([i,a],c=>{this.Wr(c),l.push(c.key)}),l}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new me(new rt([])),i=new Kt(t,e),a=new Kt(t,e+1);let l=Ue();return this.$r.forEachInRange([i,a],c=>{l=l.add(c.key)}),l}containsKey(e){const t=new Kt(e,0),i=this.qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Kt{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return me.comparator(e.key,t.key)||Ne(e.Hr,t.Hr)}static Ur(e,t){return Ne(e.Hr,t.Hr)||me.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uV{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new Bt(Kt.Qr)}checkEmpty(e){return ee.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,a){const l=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new RP(l,t,i,a);this.mutationQueue.push(c);for(const d of a)this.Yr=this.Yr.add(new Kt(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return ee.resolve(c)}lookupMutationBatch(e,t){return ee.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,a=this.Xr(i),l=a<0?0:a;return ee.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return ee.resolve(this.mutationQueue.length===0?py:this.er-1)}getAllMutationBatches(e){return ee.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Kt(t,0),a=new Kt(t,Number.POSITIVE_INFINITY),l=[];return this.Yr.forEachInRange([i,a],c=>{const d=this.Zr(c.Hr);l.push(d)}),ee.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Bt(Ne);return t.forEach(a=>{const l=new Kt(a,0),c=new Kt(a,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([l,c],d=>{i=i.add(d.Hr)})}),ee.resolve(this.ei(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,a=i.length+1;let l=i;me.isDocumentKey(l)||(l=l.child(""));const c=new Kt(new me(l),0);let d=new Bt(Ne);return this.Yr.forEachWhile(p=>{const g=p.key.path;return!!i.isPrefixOf(g)&&(g.length===a&&(d=d.add(p.Hr)),!0)},c),ee.resolve(this.ei(d))}ei(e){const t=[];return e.forEach(i=>{const a=this.Zr(i);a!==null&&t.push(a)}),t}removeMutationBatch(e,t){je(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Yr;return ee.forEach(t.mutations,a=>{const l=new Kt(a.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.Yr=i})}rr(e){}containsKey(e,t){const i=new Kt(t,0),a=this.Yr.firstAfterOrEqual(i);return ee.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,ee.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cV{constructor(e){this.ni=e,this.docs=function(){return new gt(me.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,a=this.docs.get(i),l=a?a.size:0,c=this.ni(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return ee.resolve(i?i.document.mutableCopy():Yt.newInvalidDocument(t))}getEntries(e,t){let i=Oi();return t.forEach(a=>{const l=this.docs.get(a);i=i.insert(a,l?l.document.mutableCopy():Yt.newInvalidDocument(a))}),ee.resolve(i)}getDocumentsMatchingQuery(e,t,i,a){let l=Oi();const c=t.path,d=new me(c.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(d);for(;p.hasNext();){const{key:g,value:{document:_}}=p.getNext();if(!c.isPrefixOf(g.path))break;g.path.length>c.length+1||F2(z2(_),i)<=0||(a.has(_.key)||dd(t,_))&&(l=l.insert(_.key,_.mutableCopy()))}return ee.resolve(l)}getAllFromCollectionGroup(e,t,i,a){_e(9500)}ri(e,t){return ee.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new hV(this)}getSize(e){return ee.resolve(this.size)}}class hV extends rV{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach((i,a)=>{a.isValidDocument()?t.push(this.Or.addEntry(e,a)):this.Or.removeEntry(i)}),ee.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fV{constructor(e){this.persistence=e,this.ii=new za(t=>yy(t),_y),this.lastRemoteSnapshotVersion=Ae.min(),this.highestTargetId=0,this.si=0,this.oi=new wy,this.targetCount=0,this._i=Jo.ar()}forEachTarget(e,t){return this.ii.forEach((i,a)=>t(a)),ee.resolve()}getLastRemoteSnapshotVersion(e){return ee.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ee.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),ee.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.si&&(this.si=t),ee.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new Jo(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,ee.resolve()}updateTargetData(e,t){return this.hr(t),ee.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,ee.resolve()}removeTargets(e,t,i){let a=0;const l=[];return this.ii.forEach((c,d)=>{d.sequenceNumber<=t&&i.get(d.targetId)===null&&(this.ii.delete(c),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),a++)}),ee.waitFor(l).next(()=>a)}getTargetCount(e){return ee.resolve(this.targetCount)}getTargetData(e,t){const i=this.ii.get(t)||null;return ee.resolve(i)}addMatchingKeys(e,t,i){return this.oi.Kr(t,i),ee.resolve()}removeMatchingKeys(e,t,i){this.oi.Gr(t,i);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach(c=>{l.push(a.markPotentiallyOrphaned(e,c))}),ee.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),ee.resolve()}getMatchingKeysForTargetId(e,t){const i=this.oi.Jr(t);return ee.resolve(i)}containsKey(e,t){return ee.resolve(this.oi.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vS{constructor(e,t){this.ai={},this.overlays={},this.ui=new ud(0),this.ci=!1,this.ci=!0,this.li=new lV,this.referenceDelegate=e(this),this.hi=new fV(this),this.indexManager=new XP,this.remoteDocumentCache=function(a){return new cV(a)}(i=>this.referenceDelegate.Pi(i)),this.serializer=new YP(t),this.Ti=new aV(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new oV,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ai[e.toKey()];return i||(i=new uV(t,this.referenceDelegate),this.ai[e.toKey()]=i),i}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,i){ue("MemoryPersistence","Starting transaction:",e);const a=new dV(this.ui.next());return this.referenceDelegate.Ii(),i(a).next(l=>this.referenceDelegate.di(a).next(()=>l)).toPromise().then(l=>(a.raiseOnCommittedEvent(),l))}Ei(e,t){return ee.or(Object.values(this.ai).map(i=>()=>i.containsKey(e,t)))}}class dV extends j2{constructor(e){super(),this.currentSequenceNumber=e}}class by{constructor(e){this.persistence=e,this.Ai=new wy,this.Ri=null}static Vi(e){return new by(e)}get mi(){if(this.Ri)return this.Ri;throw _e(60996)}addReference(e,t,i){return this.Ai.addReference(i,t),this.mi.delete(i.toString()),ee.resolve()}removeReference(e,t,i){return this.Ai.removeReference(i,t),this.mi.add(i.toString()),ee.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),ee.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(a=>this.mi.add(a.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(a=>{a.forEach(l=>this.mi.add(l.toString()))}).next(()=>i.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ee.forEach(this.mi,i=>{const a=me.fromPath(i);return this.fi(e,a).next(l=>{l||t.removeEntry(a,Ae.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(i=>{i?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return ee.or([()=>ee.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class jf{constructor(e,t){this.persistence=e,this.gi=new za(i=>$2(i.path),(i,a)=>i.isEqual(a)),this.garbageCollector=nV(this,t)}static Vi(e,t){return new jf(e,t)}Ii(){}di(e){return ee.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>t.next(a=>i+a))}yr(e){let t=0;return this.gr(e,i=>{t++}).next(()=>t)}gr(e,t){return ee.forEach(this.gi,(i,a)=>this.Sr(e,i,a).next(l=>l?ee.resolve():t(a)))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.ri(e,c=>this.Sr(e,c,t).next(d=>{d||(i++,l.removeEntry(c,Ae.min()))})).next(()=>l.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),ee.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.gi.set(i,e.currentSequenceNumber),ee.resolve()}removeReference(e,t,i){return this.gi.set(i,e.currentSequenceNumber),ee.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),ee.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=vf(e.data.value)),t}Sr(e,t,i){return ee.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.gi.get(t);return ee.resolve(a!==void 0&&a>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sy{constructor(e,t,i,a){this.targetId=e,this.fromCache=t,this.Is=i,this.ds=a}static Es(e,t){let i=Ue(),a=Ue();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new Sy(e,t.fromCache,i,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pV{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mV{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return GN()?8:H2(dn())>0?6:4}()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,i,a){const l={result:null};return this.ps(e,t).next(c=>{l.result=c}).next(()=>{if(!l.result)return this.ys(e,t,a,i).next(c=>{l.result=c})}).next(()=>{if(l.result)return;const c=new pV;return this.ws(e,t,c).next(d=>{if(l.result=d,this.Rs)return this.Ss(e,t,c,d.size)})}).next(()=>l.result)}Ss(e,t,i,a){return i.documentReadCount<this.Vs?(Lo()<=ke.DEBUG&&ue("QueryEngine","SDK will not create cache indexes for query:",Uo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),ee.resolve()):(Lo()<=ke.DEBUG&&ue("QueryEngine","Query:",Uo(t),"scans",i.documentReadCount,"local documents and returns",a,"documents as results."),i.documentReadCount>this.fs*a?(Lo()<=ke.DEBUG&&ue("QueryEngine","The SDK decides to create cache indexes for query:",Uo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Br(t))):ee.resolve())}ps(e,t){if(Q0(t))return ee.resolve(null);let i=Br(t);return this.indexManager.getIndexType(e,i).next(a=>a===0?null:(t.limit!==null&&a===1&&(t=Bf(t,null,"F"),i=Br(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(l=>{const c=Ue(...l);return this.gs.getDocuments(e,c).next(d=>this.indexManager.getMinOffset(e,i).next(p=>{const g=this.bs(t,d);return this.Ds(t,g,c,p.readTime)?this.ps(e,Bf(t,null,"F")):this.vs(e,g,t,p)}))})))}ys(e,t,i,a){return Q0(t)||a.isEqual(Ae.min())?ee.resolve(null):this.gs.getDocuments(e,i).next(l=>{const c=this.bs(t,l);return this.Ds(t,c,i,a)?ee.resolve(null):(Lo()<=ke.DEBUG&&ue("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Uo(t)),this.vs(e,c,t,B2(a,Yu)).next(d=>d))})}bs(e,t){let i=new Bt(Yb(e));return t.forEach((a,l)=>{dd(e,l)&&(i=i.add(l))}),i}Ds(e,t,i,a){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}ws(e,t,i){return Lo()<=ke.DEBUG&&ue("QueryEngine","Using full collection scan to execute query:",Uo(t)),this.gs.getDocumentsMatchingQuery(e,t,ws.min(),i)}vs(e,t,i,a){return this.gs.getDocumentsMatchingQuery(e,i,a).next(l=>(t.forEach(c=>{l=l.insert(c.key,c)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ry="LocalStore",gV=3e8;class yV{constructor(e,t,i,a){this.persistence=e,this.Cs=t,this.serializer=a,this.Fs=new gt(Ne),this.Ms=new za(l=>yy(l),_y),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(i)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new sV(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}}function _V(n,e,t,i){return new yV(n,e,t,i)}async function ES(n,e){const t=Re(n);return await t.persistence.runTransaction("Handle user change","readonly",i=>{let a;return t.mutationQueue.getAllMutationBatches(i).next(l=>(a=l,t.Ns(e),t.mutationQueue.getAllMutationBatches(i))).next(l=>{const c=[],d=[];let p=Ue();for(const g of a){c.push(g.batchId);for(const _ of g.mutations)p=p.add(_.key)}for(const g of l){d.push(g.batchId);for(const _ of g.mutations)p=p.add(_.key)}return t.localDocuments.getDocuments(i,p).next(g=>({Bs:g,removedBatchIds:c,addedBatchIds:d}))})})}function vV(n,e){const t=Re(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const a=e.batch.keys(),l=t.Os.newChangeBuffer({trackRemovals:!0});return function(d,p,g,_){const A=g.batch,T=A.keys();let N=ee.resolve();return T.forEach(O=>{N=N.next(()=>_.getEntry(p,O)).next(H=>{const U=g.docVersions.get(O);je(U!==null,48541),H.version.compareTo(U)<0&&(A.applyToRemoteDocument(H,g),H.isValidDocument()&&(H.setReadTime(g.commitVersion),_.addEntry(H)))})}),N.next(()=>d.mutationQueue.removeMutationBatch(p,A))}(t,i,e,l).next(()=>l.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,a,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(d){let p=Ue();for(let g=0;g<d.mutationResults.length;++g)d.mutationResults[g].transformResults.length>0&&(p=p.add(d.batch.mutations[g].key));return p}(e))).next(()=>t.localDocuments.getDocuments(i,a))})}function TS(n){const e=Re(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function EV(n,e){const t=Re(n),i=e.snapshotVersion;let a=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const c=t.Os.newChangeBuffer({trackRemovals:!0});a=t.Fs;const d=[];e.targetChanges.forEach((_,A)=>{const T=a.get(A);if(!T)return;d.push(t.hi.removeMatchingKeys(l,_.removedDocuments,A).next(()=>t.hi.addMatchingKeys(l,_.addedDocuments,A)));let N=T.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(A)!==null?N=N.withResumeToken(rn.EMPTY_BYTE_STRING,Ae.min()).withLastLimboFreeSnapshotVersion(Ae.min()):_.resumeToken.approximateByteSize()>0&&(N=N.withResumeToken(_.resumeToken,i)),a=a.insert(A,N),function(H,U,G){return H.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-H.snapshotVersion.toMicroseconds()>=gV?!0:G.addedDocuments.size+G.modifiedDocuments.size+G.removedDocuments.size>0}(T,N,_)&&d.push(t.hi.updateTargetData(l,N))});let p=Oi(),g=Ue();if(e.documentUpdates.forEach(_=>{e.resolvedLimboDocuments.has(_)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,_))}),d.push(TV(l,c,e.documentUpdates).next(_=>{p=_.Ls,g=_.ks})),!i.isEqual(Ae.min())){const _=t.hi.getLastRemoteSnapshotVersion(l).next(A=>t.hi.setTargetsMetadata(l,l.currentSequenceNumber,i));d.push(_)}return ee.waitFor(d).next(()=>c.apply(l)).next(()=>t.localDocuments.getLocalViewOfDocuments(l,p,g)).next(()=>p)}).then(l=>(t.Fs=a,l))}function TV(n,e,t){let i=Ue(),a=Ue();return t.forEach(l=>i=i.add(l)),e.getEntries(n,i).next(l=>{let c=Oi();return t.forEach((d,p)=>{const g=l.get(d);p.isFoundDocument()!==g.isFoundDocument()&&(a=a.add(d)),p.isNoDocument()&&p.version.isEqual(Ae.min())?(e.removeEntry(d,p.readTime),c=c.insert(d,p)):!g.isValidDocument()||p.version.compareTo(g.version)>0||p.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(p),c=c.insert(d,p)):ue(Ry,"Ignoring outdated watch update for ",d,". Current version:",g.version," Watch version:",p.version)}),{Ls:c,ks:a}})}function AV(n,e){const t=Re(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=py),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function wV(n,e){const t=Re(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let a;return t.hi.getTargetData(i,e).next(l=>l?(a=l,ee.resolve(a)):t.hi.allocateTargetId(i).next(c=>(a=new ms(e,c,"TargetPurposeListen",i.currentSequenceNumber),t.hi.addTargetData(i,a).next(()=>a))))}).then(i=>{const a=t.Fs.get(i.targetId);return(a===null||i.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(i.targetId,i),t.Ms.set(e,i.targetId)),i})}async function Ng(n,e,t){const i=Re(n),a=i.Fs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,c=>i.persistence.referenceDelegate.removeTarget(c,a))}catch(c){if(!ul(c))throw c;ue(Ry,`Failed to update sequence numbers for target ${e}: ${c}`)}i.Fs=i.Fs.remove(e),i.Ms.delete(a.target)}function lA(n,e,t){const i=Re(n);let a=Ae.min(),l=Ue();return i.persistence.runTransaction("Execute query","readwrite",c=>function(p,g,_){const A=Re(p),T=A.Ms.get(_);return T!==void 0?ee.resolve(A.Fs.get(T)):A.hi.getTargetData(g,_)}(i,c,Br(e)).next(d=>{if(d)return a=d.lastLimboFreeSnapshotVersion,i.hi.getMatchingKeysForTargetId(c,d.targetId).next(p=>{l=p})}).next(()=>i.Cs.getDocumentsMatchingQuery(c,e,t?a:Ae.min(),t?l:Ue())).next(d=>(bV(i,hP(e),d),{documents:d,qs:l})))}function bV(n,e,t){let i=n.xs.get(e)||Ae.min();t.forEach((a,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)}),n.xs.set(e,i)}class uA{constructor(){this.activeTargetIds=yP()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class SV{constructor(){this.Fo=new uA,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,i){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new uA,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RV{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cA="ConnectivityMonitor";class hA{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){ue(cA,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){ue(cA,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lf=null;function Dg(){return lf===null?lf=function(){return 268435456+Math.round(2147483648*Math.random())}():lf++,"0x"+lf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ym="RestConnection",IV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class CV{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${i}/databases/${a}`,this.Ko=this.databaseId.database===xf?`project_id=${i}`:`project_id=${i}&database_id=${a}`}Wo(e,t,i,a,l){const c=Dg(),d=this.Go(e,t.toUriEncodedString());ue(Ym,`Sending RPC '${e}' ${c}:`,d,i);const p={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(p,a,l);const{host:g}=new URL(d),_=Ua(g);return this.jo(e,d,p,i,_).then(A=>(ue(Ym,`Received RPC '${e}' ${c}: `,A),A),A=>{throw As(Ym,`RPC '${e}' ${c} failed with error: `,A,"url: ",d,"request:",i),A})}Jo(e,t,i,a,l,c){return this.Wo(e,t,i,a,l)}zo(e,t,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ol}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((a,l)=>e[l]=a),i&&i.headers.forEach((a,l)=>e[l]=a)}Go(e,t){const i=IV[e];return`${this.$o}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NV{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ln="WebChannelConnection";class DV extends CV{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,i,a,l){const c=Dg();return new Promise((d,p)=>{const g=new Eb;g.setWithCredentials(!0),g.listenOnce(Tb.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case _f.NO_ERROR:const A=g.getResponseJson();ue(ln,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(A)),d(A);break;case _f.TIMEOUT:ue(ln,`RPC '${e}' ${c} timed out`),p(new ae(Q.DEADLINE_EXCEEDED,"Request time out"));break;case _f.HTTP_ERROR:const T=g.getStatus();if(ue(ln,`RPC '${e}' ${c} failed with status:`,T,"response text:",g.getResponseText()),T>0){let N=g.getResponseJson();Array.isArray(N)&&(N=N[0]);const O=N?.error;if(O&&O.status&&O.message){const H=function(G){const ie=G.toLowerCase().replace(/_/g,"-");return Object.values(Q).indexOf(ie)>=0?ie:Q.UNKNOWN}(O.status);p(new ae(H,O.message))}else p(new ae(Q.UNKNOWN,"Server responded with status "+g.getStatus()))}else p(new ae(Q.UNAVAILABLE,"Connection failed."));break;default:_e(9055,{c_:e,streamId:c,l_:g.getLastErrorCode(),h_:g.getLastError()})}}finally{ue(ln,`RPC '${e}' ${c} completed.`)}});const _=JSON.stringify(a);ue(ln,`RPC '${e}' ${c} sending request:`,a),g.send(t,"POST",_,i,15)})}P_(e,t,i){const a=Dg(),l=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=bb(),d=wb(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(p.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(p.useFetchStreams=!0),this.zo(p.initMessageHeaders,t,i),p.encodeInitMessageHeaders=!0;const _=l.join("");ue(ln,`Creating RPC '${e}' stream ${a}: ${_}`,p);const A=c.createWebChannel(_,p);this.T_(A);let T=!1,N=!1;const O=new NV({Ho:U=>{N?ue(ln,`Not sending because RPC '${e}' stream ${a} is closed:`,U):(T||(ue(ln,`Opening RPC '${e}' stream ${a} transport.`),A.open(),T=!0),ue(ln,`RPC '${e}' stream ${a} sending:`,U),A.send(U))},Yo:()=>A.close()}),H=(U,G,ie)=>{U.listen(G,ne=>{try{ie(ne)}catch(he){setTimeout(()=>{throw he},0)}})};return H(A,Iu.EventType.OPEN,()=>{N||(ue(ln,`RPC '${e}' stream ${a} transport opened.`),O.s_())}),H(A,Iu.EventType.CLOSE,()=>{N||(N=!0,ue(ln,`RPC '${e}' stream ${a} transport closed`),O.__(),this.I_(A))}),H(A,Iu.EventType.ERROR,U=>{N||(N=!0,As(ln,`RPC '${e}' stream ${a} transport errored. Name:`,U.name,"Message:",U.message),O.__(new ae(Q.UNAVAILABLE,"The operation could not be completed")))}),H(A,Iu.EventType.MESSAGE,U=>{var G;if(!N){const ie=U.data[0];je(!!ie,16349);const ne=ie,he=ne?.error||((G=ne[0])===null||G===void 0?void 0:G.error);if(he){ue(ln,`RPC '${e}' stream ${a} received error:`,he);const ce=he.status;let Ee=function(S){const C=Ot[S];if(C!==void 0)return oS(C)}(ce),P=he.message;Ee===void 0&&(Ee=Q.INTERNAL,P="Unknown error status: "+ce+" with message "+he.message),N=!0,O.__(new ae(Ee,P)),A.close()}else ue(ln,`RPC '${e}' stream ${a} received:`,ie),O.a_(ie)}}),H(d,Ab.STAT_EVENT,U=>{U.stat===vg.PROXY?ue(ln,`RPC '${e}' stream ${a} detected buffering proxy`):U.stat===vg.NOPROXY&&ue(ln,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{O.o_()},0),O}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}}function Qm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _d(n){return new VP(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iy{constructor(e,t,i=1e3,a=1.5,l=6e4){this.Fi=e,this.timerId=t,this.d_=i,this.E_=a,this.A_=l,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),i=Math.max(0,Date.now()-this.m_),a=Math.max(0,t-i);a>0&&ue("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,a,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fA="PersistentStream";class AS{constructor(e,t,i,a,l,c,d,p){this.Fi=e,this.w_=i,this.S_=a,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new Iy(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===Q.RESOURCE_EXHAUSTED?(Di(t.toString()),Di("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===Q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,a])=>{this.b_===t&&this.W_(i,a)},i=>{e(()=>{const a=new ae(Q.UNKNOWN,"Fetching auth token failed: "+i.message);return this.G_(a)})})}W_(e,t){const i=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{i(()=>this.listener.Zo())}),this.stream.e_(()=>{i(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(a=>{i(()=>this.G_(a))}),this.stream.onMessage(a=>{i(()=>++this.C_==1?this.j_(a):this.onNext(a))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return ue(fA,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(ue(fA,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class OV extends AS{constructor(e,t,i,a,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,a,c),this.serializer=l}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=UP(this.serializer,e),i=function(l){if(!("targetChange"in l))return Ae.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Ae.min():c.readTime?Un(c.readTime):Ae.min()}(e);return this.listener.J_(t,i)}H_(e){const t={};t.database=Cg(this.serializer),t.addTarget=function(l,c){let d;const p=c.target;if(d=bg(p)?{documents:zP(l,p)}:{query:FP(l,p).Vt},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=cS(l,c.resumeToken);const g=Rg(l,c.expectedCount);g!==null&&(d.expectedCount=g)}else if(c.snapshotVersion.compareTo(Ae.min())>0){d.readTime=Ff(l,c.snapshotVersion.toTimestamp());const g=Rg(l,c.expectedCount);g!==null&&(d.expectedCount=g)}return d}(this.serializer,e);const i=jP(this.serializer,e);i&&(t.labels=i),this.k_(t)}Y_(e){const t={};t.database=Cg(this.serializer),t.removeTarget=e,this.k_(t)}}class MV extends AS{constructor(e,t,i,a,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,a,c),this.serializer=l}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return je(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,je(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){je(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=BP(e.writeResults,e.commitTime),i=Un(e.commitTime);return this.listener.ta(i,t)}na(){const e={};e.database=Cg(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>pS(this.serializer,i))};this.k_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PV{}class VV extends PV{constructor(e,t,i,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=a,this.ra=!1}ia(){if(this.ra)throw new ae(Q.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,i,a){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,c])=>this.connection.Wo(e,Ig(t,i),a,l,c)).catch(l=>{throw l.name==="FirebaseError"?(l.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ae(Q.UNKNOWN,l.toString())})}Jo(e,t,i,a,l){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,d])=>this.connection.Jo(e,Ig(t,i),a,c,d,l)).catch(c=>{throw c.name==="FirebaseError"?(c.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ae(Q.UNKNOWN,c.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class kV{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Di(t),this._a=!1):ue("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ka="RemoteStore";class xV{constructor(e,t,i,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=l,this.Ea.xo(c=>{i.enqueueAndForget(async()=>{Fa(this)&&(ue(ka,"Restarting streams for network reachability change."),await async function(p){const g=Re(p);g.Ia.add(4),await Tc(g),g.Aa.set("Unknown"),g.Ia.delete(4),await vd(g)}(this))})}),this.Aa=new kV(i,a)}}async function vd(n){if(Fa(n))for(const e of n.da)await e(!0)}async function Tc(n){for(const e of n.da)await e(!1)}function wS(n,e){const t=Re(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),Oy(t)?Dy(t):hl(t).x_()&&Ny(t,e))}function Cy(n,e){const t=Re(n),i=hl(t);t.Ta.delete(e),i.x_()&&bS(t,e),t.Ta.size===0&&(i.x_()?i.B_():Fa(t)&&t.Aa.set("Unknown"))}function Ny(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ae.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}hl(n).H_(e)}function bS(n,e){n.Ra.$e(e),hl(n).Y_(e)}function Dy(n){n.Ra=new DP({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),hl(n).start(),n.Aa.aa()}function Oy(n){return Fa(n)&&!hl(n).M_()&&n.Ta.size>0}function Fa(n){return Re(n).Ia.size===0}function SS(n){n.Ra=void 0}async function LV(n){n.Aa.set("Online")}async function UV(n){n.Ta.forEach((e,t)=>{Ny(n,e)})}async function BV(n,e){SS(n),Oy(n)?(n.Aa.la(e),Dy(n)):n.Aa.set("Unknown")}async function zV(n,e,t){if(n.Aa.set("Online"),e instanceof uS&&e.state===2&&e.cause)try{await async function(a,l){const c=l.cause;for(const d of l.targetIds)a.Ta.has(d)&&(await a.remoteSyncer.rejectListen(d,c),a.Ta.delete(d),a.Ra.removeTarget(d))}(n,e)}catch(i){ue(ka,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Hf(n,i)}else if(e instanceof Af?n.Ra.Ye(e):e instanceof lS?n.Ra.it(e):n.Ra.et(e),!t.isEqual(Ae.min()))try{const i=await TS(n.localStore);t.compareTo(i)>=0&&await function(l,c){const d=l.Ra.Pt(c);return d.targetChanges.forEach((p,g)=>{if(p.resumeToken.approximateByteSize()>0){const _=l.Ta.get(g);_&&l.Ta.set(g,_.withResumeToken(p.resumeToken,c))}}),d.targetMismatches.forEach((p,g)=>{const _=l.Ta.get(p);if(!_)return;l.Ta.set(p,_.withResumeToken(rn.EMPTY_BYTE_STRING,_.snapshotVersion)),bS(l,p);const A=new ms(_.target,p,g,_.sequenceNumber);Ny(l,A)}),l.remoteSyncer.applyRemoteEvent(d)}(n,t)}catch(i){ue(ka,"Failed to raise snapshot:",i),await Hf(n,i)}}async function Hf(n,e,t){if(!ul(e))throw e;n.Ia.add(1),await Tc(n),n.Aa.set("Offline"),t||(t=()=>TS(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{ue(ka,"Retrying IndexedDB access"),await t(),n.Ia.delete(1),await vd(n)})}function RS(n,e){return e().catch(t=>Hf(n,t,e))}async function Ed(n){const e=Re(n),t=Is(e);let i=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:py;for(;FV(e);)try{const a=await AV(e.localStore,i);if(a===null){e.Pa.length===0&&t.B_();break}i=a.batchId,qV(e,a)}catch(a){await Hf(e,a)}IS(e)&&CS(e)}function FV(n){return Fa(n)&&n.Pa.length<10}function qV(n,e){n.Pa.push(e);const t=Is(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function IS(n){return Fa(n)&&!Is(n).M_()&&n.Pa.length>0}function CS(n){Is(n).start()}async function jV(n){Is(n).na()}async function HV(n){const e=Is(n);for(const t of n.Pa)e.X_(t.mutations)}async function GV(n,e,t){const i=n.Pa.shift(),a=Ey.from(i,e,t);await RS(n,()=>n.remoteSyncer.applySuccessfulWrite(a)),await Ed(n)}async function $V(n,e){e&&Is(n).Z_&&await async function(i,a){if(function(c){return aS(c)&&c!==Q.ABORTED}(a.code)){const l=i.Pa.shift();Is(i).N_(),await RS(i,()=>i.remoteSyncer.rejectFailedWrite(l.batchId,a)),await Ed(i)}}(n,e),IS(n)&&CS(n)}async function dA(n,e){const t=Re(n);t.asyncQueue.verifyOperationInProgress(),ue(ka,"RemoteStore received new credentials");const i=Fa(t);t.Ia.add(3),await Tc(t),i&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await vd(t)}async function KV(n,e){const t=Re(n);e?(t.Ia.delete(2),await vd(t)):e||(t.Ia.add(2),await Tc(t),t.Aa.set("Unknown"))}function hl(n){return n.Va||(n.Va=function(t,i,a){const l=Re(t);return l.ia(),new OV(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)}(n.datastore,n.asyncQueue,{Zo:LV.bind(null,n),e_:UV.bind(null,n),n_:BV.bind(null,n),J_:zV.bind(null,n)}),n.da.push(async e=>{e?(n.Va.N_(),Oy(n)?Dy(n):n.Aa.set("Unknown")):(await n.Va.stop(),SS(n))})),n.Va}function Is(n){return n.ma||(n.ma=function(t,i,a){const l=Re(t);return l.ia(),new MV(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)}(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:jV.bind(null,n),n_:$V.bind(null,n),ea:HV.bind(null,n),ta:GV.bind(null,n)}),n.da.push(async e=>{e?(n.ma.N_(),await Ed(n)):(await n.ma.stop(),n.Pa.length>0&&(ue(ka,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))})),n.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class My{constructor(e,t,i,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=a,this.removalCallback=l,this.deferred=new Ur,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,a,l){const c=Date.now()+i,d=new My(e,t,c,a,l);return d.start(i),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ae(Q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Py(n,e){if(Di("AsyncQueue",`${e}: ${n}`),ul(n))return new ae(Q.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o{static emptySet(e){return new $o(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||me.comparator(t.key,i.key):(t,i)=>me.comparator(t.key,i.key),this.keyedMap=Cu(),this.sortedSet=new gt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof $o)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=i.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new $o;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA{constructor(){this.fa=new gt(me.comparator)}track(e){const t=e.doc.key,i=this.fa.get(t);i?e.type!==0&&i.type===3?this.fa=this.fa.insert(t,e):e.type===3&&i.type!==1?this.fa=this.fa.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.fa=this.fa.remove(t):e.type===1&&i.type===2?this.fa=this.fa.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):_e(63341,{At:e,ga:i}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal((t,i)=>{e.push(i)}),e}}class el{constructor(e,t,i,a,l,c,d,p,g){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=a,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=p,this.hasCachedResults=g}static fromInitialDocuments(e,t,i,a,l){const c=[];return t.forEach(d=>{c.push({type:0,doc:d})}),new el(e,t,$o.emptySet(t),c,i,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&fd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==i[a].type||!t[a].doc.isEqual(i[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YV{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class QV{constructor(){this.queries=mA(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,i){const a=Re(t),l=a.queries;a.queries=mA(),l.forEach((c,d)=>{for(const p of d.wa)p.onError(i)})})(this,new ae(Q.ABORTED,"Firestore shutting down"))}}function mA(){return new za(n=>Kb(n),fd)}async function Vy(n,e){const t=Re(n);let i=3;const a=e.query;let l=t.queries.get(a);l?!l.Sa()&&e.ba()&&(i=2):(l=new YV,i=e.ba()?0:1);try{switch(i){case 0:l.ya=await t.onListen(a,!0);break;case 1:l.ya=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(c){const d=Py(c,`Initialization of query '${Uo(e.query)}' failed`);return void e.onError(d)}t.queries.set(a,l),l.wa.push(e),e.va(t.onlineState),l.ya&&e.Ca(l.ya)&&xy(t)}async function ky(n,e){const t=Re(n),i=e.query;let a=3;const l=t.queries.get(i);if(l){const c=l.wa.indexOf(e);c>=0&&(l.wa.splice(c,1),l.wa.length===0?a=e.ba()?0:1:!l.Sa()&&e.ba()&&(a=2))}switch(a){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function XV(n,e){const t=Re(n);let i=!1;for(const a of e){const l=a.query,c=t.queries.get(l);if(c){for(const d of c.wa)d.Ca(a)&&(i=!0);c.ya=a}}i&&xy(t)}function WV(n,e,t){const i=Re(n),a=i.queries.get(e);if(a)for(const l of a.wa)l.onError(t);i.queries.delete(e)}function xy(n){n.Da.forEach(e=>{e.next()})}var Og,gA;(gA=Og||(Og={})).Fa="default",gA.Cache="cache";class Ly{constructor(e,t,i){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=i||{}}Ca(e){if(!this.options.includeMetadataChanges){const i=[];for(const a of e.docChanges)a.type!==3&&i.push(a);e=new el(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;const i=t!=="Offline";return(!this.options.ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=el.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Og.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NS{constructor(e){this.key=e}}class DS{constructor(e){this.key=e}}class ZV{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Ue(),this.mutatedKeys=Ue(),this.Xa=Yb(e),this.eu=new $o(this.Xa)}get tu(){return this.Ha}nu(e,t){const i=t?t.ru:new pA,a=t?t.eu:this.eu;let l=t?t.mutatedKeys:this.mutatedKeys,c=a,d=!1;const p=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,g=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((_,A)=>{const T=a.get(_),N=dd(this.query,A)?A:null,O=!!T&&this.mutatedKeys.has(T.key),H=!!N&&(N.hasLocalMutations||this.mutatedKeys.has(N.key)&&N.hasCommittedMutations);let U=!1;T&&N?T.data.isEqual(N.data)?O!==H&&(i.track({type:3,doc:N}),U=!0):this.iu(T,N)||(i.track({type:2,doc:N}),U=!0,(p&&this.Xa(N,p)>0||g&&this.Xa(N,g)<0)&&(d=!0)):!T&&N?(i.track({type:0,doc:N}),U=!0):T&&!N&&(i.track({type:1,doc:T}),U=!0,(p||g)&&(d=!0)),U&&(N?(c=c.add(N),l=H?l.add(_):l.delete(_)):(c=c.delete(_),l=l.delete(_)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const _=this.query.limitType==="F"?c.last():c.first();c=c.delete(_.key),l=l.delete(_.key),i.track({type:1,doc:_})}return{eu:c,ru:i,Ds:d,mutatedKeys:l}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,a){const l=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const c=e.ru.pa();c.sort((_,A)=>function(N,O){const H=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return _e(20277,{At:U})}};return H(N)-H(O)}(_.type,A.type)||this.Xa(_.doc,A.doc)),this.su(i),a=a!=null&&a;const d=t&&!a?this.ou():[],p=this.Za.size===0&&this.current&&!a?1:0,g=p!==this.Ya;return this.Ya=p,c.length!==0||g?{snapshot:new el(this.query,e.eu,l,c,e.mutatedKeys,p===0,g,!1,!!i&&i.resumeToken.approximateByteSize()>0),_u:d}:{_u:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new pA,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=Ue(),this.eu.forEach(i=>{this.au(i.key)&&(this.Za=this.Za.add(i.key))});const t=[];return e.forEach(i=>{this.Za.has(i)||t.push(new DS(i))}),this.Za.forEach(i=>{e.has(i)||t.push(new NS(i))}),t}uu(e){this.Ha=e.qs,this.Za=Ue();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return el.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const Uy="SyncEngine";class JV{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class ek{constructor(e){this.key=e,this.lu=!1}}class tk{constructor(e,t,i,a,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.hu={},this.Pu=new za(d=>Kb(d),fd),this.Tu=new Map,this.Iu=new Set,this.du=new gt(me.comparator),this.Eu=new Map,this.Au=new wy,this.Ru={},this.Vu=new Map,this.mu=Jo.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function nk(n,e,t=!0){const i=xS(n);let a;const l=i.Pu.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.cu()):a=await OS(i,e,t,!0),a}async function rk(n,e){const t=xS(n);await OS(t,e,!0,!1)}async function OS(n,e,t,i){const a=await wV(n.localStore,Br(e)),l=a.targetId,c=n.sharedClientState.addLocalQueryTarget(l,t);let d;return i&&(d=await ik(n,e,l,c==="current",a.resumeToken)),n.isPrimaryClient&&t&&wS(n.remoteStore,a),d}async function ik(n,e,t,i,a){n.gu=(A,T,N)=>async function(H,U,G,ie){let ne=U.view.nu(G);ne.Ds&&(ne=await lA(H.localStore,U.query,!1).then(({documents:P})=>U.view.nu(P,ne)));const he=ie&&ie.targetChanges.get(U.targetId),ce=ie&&ie.targetMismatches.get(U.targetId)!=null,Ee=U.view.applyChanges(ne,H.isPrimaryClient,he,ce);return _A(H,U.targetId,Ee._u),Ee.snapshot}(n,A,T,N);const l=await lA(n.localStore,e,!0),c=new ZV(e,l.qs),d=c.nu(l.documents),p=Ec.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",a),g=c.applyChanges(d,n.isPrimaryClient,p);_A(n,t,g._u);const _=new JV(e,t,c);return n.Pu.set(e,_),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),g.snapshot}async function sk(n,e,t){const i=Re(n),a=i.Pu.get(e),l=i.Tu.get(a.targetId);if(l.length>1)return i.Tu.set(a.targetId,l.filter(c=>!fd(c,e))),void i.Pu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(a.targetId),i.sharedClientState.isActiveQueryTarget(a.targetId)||await Ng(i.localStore,a.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(a.targetId),t&&Cy(i.remoteStore,a.targetId),Mg(i,a.targetId)}).catch(ll)):(Mg(i,a.targetId),await Ng(i.localStore,a.targetId,!0))}async function ak(n,e){const t=Re(n),i=t.Pu.get(e),a=t.Tu.get(i.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),Cy(t.remoteStore,i.targetId))}async function ok(n,e,t){const i=pk(n);try{const a=await function(c,d){const p=Re(c),g=lt.now(),_=d.reduce((N,O)=>N.add(O.key),Ue());let A,T;return p.persistence.runTransaction("Locally write mutations","readwrite",N=>{let O=Oi(),H=Ue();return p.Os.getEntries(N,_).next(U=>{O=U,O.forEach((G,ie)=>{ie.isValidDocument()||(H=H.add(G))})}).next(()=>p.localDocuments.getOverlayedDocuments(N,O)).next(U=>{A=U;const G=[];for(const ie of d){const ne=SP(ie,A.get(ie.key).overlayedDocument);ne!=null&&G.push(new Us(ie.key,ne,Bb(ne.value.mapValue),nn.exists(!0)))}return p.mutationQueue.addMutationBatch(N,g,G,d)}).next(U=>{T=U;const G=U.applyToLocalDocumentSet(A,H);return p.documentOverlayCache.saveOverlays(N,U.batchId,G)})}).then(()=>({batchId:T.batchId,changes:Xb(A)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(a.batchId),function(c,d,p){let g=c.Ru[c.currentUser.toKey()];g||(g=new gt(Ne)),g=g.insert(d,p),c.Ru[c.currentUser.toKey()]=g}(i,a.batchId,t),await Ac(i,a.changes),await Ed(i.remoteStore)}catch(a){const l=Py(a,"Failed to persist write");t.reject(l)}}async function MS(n,e){const t=Re(n);try{const i=await EV(t.localStore,e);e.targetChanges.forEach((a,l)=>{const c=t.Eu.get(l);c&&(je(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?c.lu=!0:a.modifiedDocuments.size>0?je(c.lu,14607):a.removedDocuments.size>0&&(je(c.lu,42227),c.lu=!1))}),await Ac(t,i,e)}catch(i){await ll(i)}}function yA(n,e,t){const i=Re(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const a=[];i.Pu.forEach((l,c)=>{const d=c.view.va(e);d.snapshot&&a.push(d.snapshot)}),function(c,d){const p=Re(c);p.onlineState=d;let g=!1;p.queries.forEach((_,A)=>{for(const T of A.wa)T.va(d)&&(g=!0)}),g&&xy(p)}(i.eventManager,e),a.length&&i.hu.J_(a),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function lk(n,e,t){const i=Re(n);i.sharedClientState.updateQueryState(e,"rejected",t);const a=i.Eu.get(e),l=a&&a.key;if(l){let c=new gt(me.comparator);c=c.insert(l,Yt.newNoDocument(l,Ae.min()));const d=Ue().add(l),p=new yd(Ae.min(),new Map,new gt(Ne),c,d);await MS(i,p),i.du=i.du.remove(l),i.Eu.delete(e),By(i)}else await Ng(i.localStore,e,!1).then(()=>Mg(i,e,t)).catch(ll)}async function uk(n,e){const t=Re(n),i=e.batch.batchId;try{const a=await vV(t.localStore,e);VS(t,i,null),PS(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Ac(t,a)}catch(a){await ll(a)}}async function ck(n,e,t){const i=Re(n);try{const a=await function(c,d){const p=Re(c);return p.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let _;return p.mutationQueue.lookupMutationBatch(g,d).next(A=>(je(A!==null,37113),_=A.keys(),p.mutationQueue.removeMutationBatch(g,A))).next(()=>p.mutationQueue.performConsistencyCheck(g)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(g,_,d)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,_)).next(()=>p.localDocuments.getDocuments(g,_))})}(i.localStore,e);VS(i,e,t),PS(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Ac(i,a)}catch(a){await ll(a)}}function PS(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function VS(n,e,t){const i=Re(n);let a=i.Ru[i.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),i.Ru[i.currentUser.toKey()]=a}}function Mg(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Tu.get(e))n.Pu.delete(i),t&&n.hu.pu(i,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach(i=>{n.Au.containsKey(i)||kS(n,i)})}function kS(n,e){n.Iu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Cy(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),By(n))}function _A(n,e,t){for(const i of t)i instanceof NS?(n.Au.addReference(i.key,e),hk(n,i)):i instanceof DS?(ue(Uy,"Document no longer in limbo: "+i.key),n.Au.removeReference(i.key,e),n.Au.containsKey(i.key)||kS(n,i.key)):_e(19791,{yu:i})}function hk(n,e){const t=e.key,i=t.path.canonicalString();n.du.get(t)||n.Iu.has(i)||(ue(Uy,"New document in limbo: "+t),n.Iu.add(i),By(n))}function By(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Iu.values().next().value;n.Iu.delete(e);const t=new me(rt.fromString(e)),i=n.mu.next();n.Eu.set(i,new ek(t)),n.du=n.du.insert(t,i),wS(n.remoteStore,new ms(Br(hd(t.path)),i,"TargetPurposeLimboResolution",ud.ue))}}async function Ac(n,e,t){const i=Re(n),a=[],l=[],c=[];i.Pu.isEmpty()||(i.Pu.forEach((d,p)=>{c.push(i.gu(p,e,t).then(g=>{var _;if((g||t)&&i.isPrimaryClient){const A=g?!g.fromCache:(_=t?.targetChanges.get(p.targetId))===null||_===void 0?void 0:_.current;i.sharedClientState.updateQueryState(p.targetId,A?"current":"not-current")}if(g){a.push(g);const A=Sy.Es(p.targetId,g);l.push(A)}}))}),await Promise.all(c),i.hu.J_(a),await async function(p,g){const _=Re(p);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",A=>ee.forEach(g,T=>ee.forEach(T.Is,N=>_.persistence.referenceDelegate.addReference(A,T.targetId,N)).next(()=>ee.forEach(T.ds,N=>_.persistence.referenceDelegate.removeReference(A,T.targetId,N)))))}catch(A){if(!ul(A))throw A;ue(Ry,"Failed to update sequence numbers: "+A)}for(const A of g){const T=A.targetId;if(!A.fromCache){const N=_.Fs.get(T),O=N.snapshotVersion,H=N.withLastLimboFreeSnapshotVersion(O);_.Fs=_.Fs.insert(T,H)}}}(i.localStore,l))}async function fk(n,e){const t=Re(n);if(!t.currentUser.isEqual(e)){ue(Uy,"User change. New user:",e.toKey());const i=await ES(t.localStore,e);t.currentUser=e,function(l,c){l.Vu.forEach(d=>{d.forEach(p=>{p.reject(new ae(Q.CANCELLED,c))})}),l.Vu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Ac(t,i.Bs)}}function dk(n,e){const t=Re(n),i=t.Eu.get(e);if(i&&i.lu)return Ue().add(i.key);{let a=Ue();const l=t.Tu.get(e);if(!l)return a;for(const c of l){const d=t.Pu.get(c);a=a.unionWith(d.view.tu)}return a}}function xS(n){const e=Re(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=MS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=dk.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=lk.bind(null,e),e.hu.J_=XV.bind(null,e.eventManager),e.hu.pu=WV.bind(null,e.eventManager),e}function pk(n){const e=Re(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=uk.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ck.bind(null,e),e}class Gf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=_d(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return _V(this.persistence,new mV,e.initialUser,this.serializer)}Du(e){return new vS(by.Vi,this.serializer)}bu(e){return new SV}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Gf.provider={build:()=>new Gf};class mk extends Gf{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){je(this.persistence.referenceDelegate instanceof jf,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new eV(i,e.asyncQueue,t)}Du(e){const t=this.cacheSizeBytes!==void 0?wn.withCacheSize(this.cacheSizeBytes):wn.DEFAULT;return new vS(i=>jf.Vi(i,t),this.serializer)}}class Pg{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>yA(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=fk.bind(null,this.syncEngine),await KV(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new QV}()}createDatastore(e){const t=_d(e.databaseInfo.databaseId),i=function(l){return new DV(l)}(e.databaseInfo);return function(l,c,d,p){return new VV(l,c,d,p)}(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return function(i,a,l,c,d){return new xV(i,a,l,c,d)}(this.localStore,this.datastore,e.asyncQueue,t=>yA(this.syncEngine,t,0),function(){return hA.C()?new hA:new RV}())}createSyncEngine(e,t){return function(a,l,c,d,p,g,_){const A=new tk(a,l,c,d,p,g);return _&&(A.fu=!0),A}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(a){const l=Re(a);ue(ka,"RemoteStore shutting down."),l.Ia.add(5),await Tc(l),l.Ea.shutdown(),l.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Pg.provider={build:()=>new Pg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zy{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Di("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gk{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new ae(Q.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(a,l){const c=Re(a),d={documents:l.map(A=>qf(c.serializer,A))},p=await c.Jo("BatchGetDocuments",c.serializer.databaseId,rt.emptyPath(),d,l.length),g=new Map;p.forEach(A=>{const T=LP(c.serializer,A);g.set(T.key.toString(),T)});const _=[];return l.forEach(A=>{const T=g.get(A.toString());je(!!T,55234,{key:A}),_.push(T)}),_}(this.datastore,e);return t.forEach(i=>this.recordVersion(i)),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new gd(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,i)=>{const a=me.fromPath(i);this.mutations.push(new sS(a,this.precondition(a)))}),await async function(i,a){const l=Re(i),c={writes:a.map(d=>pS(l.serializer,d))};await l.Wo("Commit",l.serializer.databaseId,rt.emptyPath(),c)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw _e(50498,{Wu:e.constructor.name});t=Ae.min()}const i=this.readVersions.get(e.key.toString());if(i){if(!t.isEqual(i))throw new ae(Q.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Ae.min())?nn.exists(!1):nn.updateTime(t):nn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ae.min()))throw new ae(Q.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return nn.updateTime(t)}return nn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yk{constructor(e,t,i,a,l){this.asyncQueue=e,this.datastore=t,this.options=i,this.updateFunction=a,this.deferred=l,this.Gu=i.maxAttempts,this.F_=new Iy(this.asyncQueue,"transaction_retry")}zu(){this.Gu-=1,this.ju()}ju(){this.F_.g_(async()=>{const e=new gk(this.datastore),t=this.Ju(e);t&&t.then(i=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(i)}).catch(a=>{this.Hu(a)}))}).catch(i=>{this.Hu(i)})})}Ju(e){try{const t=this.updateFunction(e);return!_c(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Hu(e){this.Gu>0&&this.Yu(e)?(this.Gu-=1,this.asyncQueue.enqueueAndForget(()=>(this.ju(),Promise.resolve()))):this.deferred.reject(e)}Yu(e){if(e.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!aS(t)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cs="FirestoreClient";class _k{constructor(e,t,i,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=a,this.user=cn.UNAUTHENTICATED,this.clientId=dy.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,async c=>{ue(Cs,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(i,c=>(ue(Cs,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ur;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=Py(t,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Xm(n,e){n.asyncQueue.verifyOperationInProgress(),ue(Cs,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(async a=>{i.isEqual(a)||(await ES(e.localStore,a),i=a)}),e.persistence.setDatabaseDeletedListener(()=>{As("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{ue("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(a=>{As("Terminating Firestore due to IndexedDb database deletion failed",a)})}),n._offlineComponents=e}async function vA(n,e){n.asyncQueue.verifyOperationInProgress();const t=await vk(n);ue(Cs,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(i=>dA(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>dA(e.remoteStore,a)),n._onlineComponents=e}async function vk(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ue(Cs,"Using user provided OfflineComponentProvider");try{await Xm(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(a){return a.name==="FirebaseError"?a.code===Q.FAILED_PRECONDITION||a.code===Q.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(t))throw t;As("Error using user provided cache. Falling back to memory cache: "+t),await Xm(n,new Gf)}}else ue(Cs,"Using default OfflineComponentProvider"),await Xm(n,new mk(void 0));return n._offlineComponents}async function Fy(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ue(Cs,"Using user provided OnlineComponentProvider"),await vA(n,n._uninitializedComponentsProvider._online)):(ue(Cs,"Using default OnlineComponentProvider"),await vA(n,new Pg))),n._onlineComponents}function Ek(n){return Fy(n).then(e=>e.syncEngine)}function Tk(n){return Fy(n).then(e=>e.datastore)}async function $f(n){const e=await Fy(n),t=e.eventManager;return t.onListen=nk.bind(null,e.syncEngine),t.onUnlisten=sk.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=rk.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=ak.bind(null,e.syncEngine),t}function Ak(n,e,t={}){const i=new Ur;return n.asyncQueue.enqueueAndForget(async()=>function(l,c,d,p,g){const _=new zy({next:T=>{_.Ou(),c.enqueueAndForget(()=>ky(l,A));const N=T.docs.has(d);!N&&T.fromCache?g.reject(new ae(Q.UNAVAILABLE,"Failed to get document because the client is offline.")):N&&T.fromCache&&p&&p.source==="server"?g.reject(new ae(Q.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(T)},error:T=>g.reject(T)}),A=new Ly(hd(d.path),_,{includeMetadataChanges:!0,ka:!0});return Vy(l,A)}(await $f(n),n.asyncQueue,e,t,i)),i.promise}function wk(n,e,t={}){const i=new Ur;return n.asyncQueue.enqueueAndForget(async()=>function(l,c,d,p,g){const _=new zy({next:T=>{_.Ou(),c.enqueueAndForget(()=>ky(l,A)),T.fromCache&&p.source==="server"?g.reject(new ae(Q.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(T)},error:T=>g.reject(T)}),A=new Ly(d,_,{includeMetadataChanges:!0,ka:!0});return Vy(l,A)}(await $f(n),n.asyncQueue,e,t,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LS(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EA=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const US="firestore.googleapis.com",TA=!0;class AA{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new ae(Q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=US,this.ssl=TA}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:TA;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=_S;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<ZP)throw new ae(Q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}L2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=LS((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new ae(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new ae(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new ae(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,a){return i.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Td{constructor(e,t,i,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new AA({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ae(Q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ae(Q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new AA(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new C2;switch(i.type){case"firstParty":return new M2(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ae(Q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const i=EA.get(t);i&&(ue("ComponentProvider","Removing Datastore"),EA.delete(t),i.terminate())}(this),Promise.resolve()}}function bk(n,e,t,i={}){var a;n=vn(n,Td);const l=Ua(e),c=n._getSettings(),d=Object.assign(Object.assign({},c),{emulatorOptions:n._getEmulatorOptions()}),p=`${e}:${t}`;l&&(Xg(`https://${p}`),Wg("Firestore",!0)),c.host!==US&&c.host!==p&&As("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g=Object.assign(Object.assign({},c),{host:p,ssl:l,emulatorOptions:i});if(!Ts(g,d)&&(n._setSettings(g),i.mockUserToken)){let _,A;if(typeof i.mockUserToken=="string")_=i.mockUserToken,A=cn.MOCK_USER;else{_=Pw(i.mockUserToken,(a=n._app)===null||a===void 0?void 0:a.options.projectId);const T=i.mockUserToken.sub||i.mockUserToken.user_id;if(!T)throw new ae(Q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");A=new cn(T)}n._authCredentials=new N2(new Rb(_,A))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Pi(this.firestore,e,this._query)}}class pt{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new vs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new pt(this.firestore,e,this._key)}toJSON(){return{type:pt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(yc(t,pt._jsonSchema))return new pt(e,i||null,new me(rt.fromString(t.referencePath)))}}pt._jsonSchemaVersion="firestore/documentReference/1.0",pt._jsonSchema={type:Pt("string",pt._jsonSchemaVersion),referencePath:Pt("string")};class vs extends Pi{constructor(e,t,i){super(e,t,hd(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new pt(this.firestore,null,new me(e))}withConverter(e){return new vs(this.firestore,e,this._path)}}function He(n,e,...t){if(n=ut(n),Cb("collection","path",e),n instanceof Td){const i=rt.fromString(e,...t);return k0(i),new vs(n,null,i)}{if(!(n instanceof pt||n instanceof vs))throw new ae(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(rt.fromString(e,...t));return k0(i),new vs(n.firestore,null,i)}}function Qe(n,e,...t){if(n=ut(n),arguments.length===1&&(e=dy.newId()),Cb("doc","path",e),n instanceof Td){const i=rt.fromString(e,...t);return V0(i),new pt(n,null,new me(i))}{if(!(n instanceof pt||n instanceof vs))throw new ae(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(rt.fromString(e,...t));return V0(i),new pt(n.firestore,n instanceof vs?n.converter:null,new me(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wA="AsyncQueue";class bA{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new Iy(this,"async_queue_retry"),this.oc=()=>{const i=Qm();i&&ue(wA,"Visibility state changed to "+i.visibilityState),this.F_.y_()},this._c=e;const t=Qm();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=Qm();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const t=new Ur;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!ul(e))throw e;ue(wA,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const t=this._c.then(()=>(this.nc=!0,e().catch(i=>{throw this.tc=i,this.nc=!1,Di("INTERNAL UNHANDLED ERROR: ",SA(i)),i}).then(i=>(this.nc=!1,i))));return this._c=t,t}enqueueAfterDelay(e,t,i){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const a=My.createAndSchedule(this,e,t,i,l=>this.lc(l));return this.ec.push(a),a}ac(){this.tc&&_e(47125,{hc:SA(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function SA(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RA(n){return function(t,i){if(typeof t!="object"||t===null)return!1;const a=t;for(const l of i)if(l in a&&typeof a[l]=="function")return!0;return!1}(n,["next","error","complete"])}class Hr extends Td{constructor(e,t,i,a){super(e,t,i,a),this.type="firestore",this._queue=new bA,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new bA(e),this._firestoreClient=void 0,await e}}}function Sk(n,e){const t=typeof n=="object"?n:fc(),i=typeof n=="string"?n:xf,a=Mi(t,"firestore").getImmediate({identifier:i});if(!a._initialized){const l=Dw("firestore");l&&bk(a,...l)}return a}function wc(n){if(n._terminated)throw new ae(Q.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Rk(n),n._firestoreClient}function Rk(n){var e,t,i;const a=n._freezeSettings(),l=function(d,p,g,_){return new Q2(d,p,g,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,LS(_.experimentalLongPollingOptions),_.useFetchStreams,_.isUsingEmulator)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,a);n._componentsProvider||!((t=a.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=a.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),n._firestoreClient=new _k(n._authCredentials,n._appCheckCredentials,n._queue,l,n._componentsProvider&&function(d){const p=d?._online.build();return{_offline:d?._offline.build(p),_online:p}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new kn(rn.fromBase64String(e))}catch(t){throw new ae(Q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new kn(rn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:kn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(yc(e,kn._jsonSchema))return kn.fromBase64String(e.bytes)}}kn._jsonSchemaVersion="firestore/bytes/1.0",kn._jsonSchema={type:Pt("string",kn._jsonSchemaVersion),bytes:Pt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ae(Q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new tn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ae(Q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ae(Q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ne(this._lat,e._lat)||Ne(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:zr._jsonSchemaVersion}}static fromJSON(e){if(yc(e,zr._jsonSchema))return new zr(e.latitude,e.longitude)}}zr._jsonSchemaVersion="firestore/geoPoint/1.0",zr._jsonSchema={type:Pt("string",zr._jsonSchemaVersion),latitude:Pt("number"),longitude:Pt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,a){if(i.length!==a.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==a[l])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Fr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(yc(e,Fr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new Fr(e.vectorValues);throw new ae(Q.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Fr._jsonSchemaVersion="firestore/vectorValue/1.0",Fr._jsonSchema={type:Pt("string",Fr._jsonSchemaVersion),vectorValues:Pt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ik=/^__.*__$/;class Ck{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Us(e,this.data,this.fieldMask,t,this.fieldTransforms):new vc(e,this.data,t,this.fieldTransforms)}}class BS{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Us(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function zS(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw _e(40011,{Ec:n})}}class qy{constructor(e,t,i,a,l,c){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=a,l===void 0&&this.Ac(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new qy(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),a=this.Rc({path:i,mc:!1});return a.fc(e),a}gc(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),a=this.Rc({path:i,mc:!1});return a.Ac(),a}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Kf(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(zS(this.Ec)&&Ik.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class Nk{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||_d(e)}Dc(e,t,i,a=!1){return new qy({Ec:e,methodName:t,bc:i,path:tn.emptyPath(),mc:!1,Sc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Sc(n){const e=n._freezeSettings(),t=_d(n._databaseId);return new Nk(n._databaseId,!!e.ignoreUndefinedProperties,t)}function jy(n,e,t,i,a,l={}){const c=n.Dc(l.merge||l.mergeFields?2:0,e,t,a);Gy("Data must be an object, but it was:",c,i);const d=jS(i,c);let p,g;if(l.merge)p=new xn(c.fieldMask),g=c.fieldTransforms;else if(l.mergeFields){const _=[];for(const A of l.mergeFields){const T=Vg(e,A,t);if(!c.contains(T))throw new ae(Q.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);GS(_,T)||_.push(T)}p=new xn(_),g=c.fieldTransforms.filter(A=>p.covers(A.field))}else p=null,g=c.fieldTransforms;return new Ck(new _n(d),p,g)}class wd extends Ad{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof wd}}class Hy extends Ad{_toFieldTransform(e){return new TP(e.path,new Ju)}isEqual(e){return e instanceof Hy}}function FS(n,e,t,i){const a=n.Dc(1,e,t);Gy("Data must be an object, but it was:",a,i);const l=[],c=_n.empty();Ls(i,(p,g)=>{const _=$y(e,p,t);g=ut(g);const A=a.gc(_);if(g instanceof wd)l.push(_);else{const T=Rc(g,A);T!=null&&(l.push(_),c.set(_,T))}});const d=new xn(l);return new BS(c,d,a.fieldTransforms)}function qS(n,e,t,i,a,l){const c=n.Dc(1,e,t),d=[Vg(e,i,t)],p=[a];if(l.length%2!=0)throw new ae(Q.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<l.length;T+=2)d.push(Vg(e,l[T])),p.push(l[T+1]);const g=[],_=_n.empty();for(let T=d.length-1;T>=0;--T)if(!GS(g,d[T])){const N=d[T];let O=p[T];O=ut(O);const H=c.gc(N);if(O instanceof wd)g.push(N);else{const U=Rc(O,H);U!=null&&(g.push(N),_.set(N,U))}}const A=new xn(g);return new BS(_,A,c.fieldTransforms)}function Dk(n,e,t,i=!1){return Rc(t,n.Dc(i?4:3,e))}function Rc(n,e){if(HS(n=ut(n)))return Gy("Unsupported field value:",e,n),jS(n,e);if(n instanceof Ad)return function(i,a){if(!zS(a.Ec))throw a.wc(`${i._methodName}() can only be used with update() and set()`);if(!a.path)throw a.wc(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(a);l&&a.fieldTransforms.push(l)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(i,a){const l=[];let c=0;for(const d of i){let p=Rc(d,a.yc(c));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),c++}return{arrayValue:{values:l}}}(n,e)}return function(i,a){if((i=ut(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return _P(a.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=lt.fromDate(i);return{timestampValue:Ff(a.serializer,l)}}if(i instanceof lt){const l=new lt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Ff(a.serializer,l)}}if(i instanceof zr)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof kn)return{bytesValue:cS(a.serializer,i._byteString)};if(i instanceof pt){const l=a.databaseId,c=i.firestore._databaseId;if(!c.isEqual(l))throw a.wc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Ay(i.firestore._databaseId||a.databaseId,i._key.path)}}if(i instanceof Fr)return function(c,d){return{mapValue:{fields:{[Lb]:{stringValue:Ub},[Lf]:{arrayValue:{values:c.toArray().map(g=>{if(typeof g!="number")throw d.wc("VectorValues must only contain numeric values.");return vy(d.serializer,g)})}}}}}}(i,a);throw a.wc(`Unsupported field value: ${ld(i)}`)}(n,e)}function jS(n,e){const t={};return Ob(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ls(n,(i,a)=>{const l=Rc(a,e.Vc(i));l!=null&&(t[i]=l)}),{mapValue:{fields:t}}}function HS(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof lt||n instanceof zr||n instanceof kn||n instanceof pt||n instanceof Ad||n instanceof Fr)}function Gy(n,e,t){if(!HS(t)||!Nb(t)){const i=ld(t);throw i==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+i)}}function Vg(n,e,t){if((e=ut(e))instanceof bc)return e._internalPath;if(typeof e=="string")return $y(n,e);throw Kf("Field path arguments must be of type string or ",n,!1,void 0,t)}const Ok=new RegExp("[~\\*/\\[\\]]");function $y(n,e,t){if(e.search(Ok)>=0)throw Kf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new bc(...e.split("."))._internalPath}catch{throw Kf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Kf(n,e,t,i,a){const l=i&&!i.isEmpty(),c=a!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(l||c)&&(p+=" (found",l&&(p+=` in field ${i}`),c&&(p+=` in document ${a}`),p+=")"),new ae(Q.INVALID_ARGUMENT,d+n+p)}function GS(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yf{constructor(e,t,i,a,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new pt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Mk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(bd("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class Mk extends Yf{data(){return super.data()}}function bd(n,e){return typeof e=="string"?$y(n,e):e instanceof bc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $S(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ae(Q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ky{}class Yy extends Ky{}function De(n,e,...t){let i=[];e instanceof Ky&&i.push(e),i=i.concat(t),function(l){const c=l.filter(p=>p instanceof Qy).length,d=l.filter(p=>p instanceof Sd).length;if(c>1||c>0&&d>0)throw new ae(Q.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const a of i)n=a._apply(n);return n}class Sd extends Yy{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new Sd(e,t,i)}_apply(e){const t=this._parse(e);return KS(e._query,t),new Pi(e.firestore,e.converter,Sg(e._query,t))}_parse(e){const t=Sc(e.firestore);return function(l,c,d,p,g,_,A){let T;if(g.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new ae(Q.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){CA(A,_);const O=[];for(const H of A)O.push(IA(p,l,H));T={arrayValue:{values:O}}}else T=IA(p,l,A)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||CA(A,_),T=Dk(d,c,A,_==="in"||_==="not-in");return Mt.create(g,_,T)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Le(n,e,t){const i=e,a=bd("where",n);return Sd._create(a,i,t)}class Qy extends Ky{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Qy(e,t)}_parse(e){const t=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return t.length===1?t[0]:gr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(a,l){let c=a;const d=l.getFlattenedFilters();for(const p of d)KS(c,p),c=Sg(c,p)}(e._query,t),new Pi(e.firestore,e.converter,Sg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Xy extends Yy{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Xy(e,t)}_apply(e){const t=function(a,l,c){if(a.startAt!==null)throw new ae(Q.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new ae(Q.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Zu(l,c)}(e._query,this._field,this._direction);return new Pi(e.firestore,e.converter,function(a,l){const c=a.explicitOrderBy.concat([l]);return new cl(a.path,a.collectionGroup,c,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(e._query,t))}}function Vi(n,e="asc"){const t=e,i=bd("orderBy",n);return Xy._create(i,t)}class Wy extends Yy{constructor(e,t,i){super(),this.type=e,this._limit=t,this._limitType=i}static _create(e,t,i){return new Wy(e,t,i)}_apply(e){return new Pi(e.firestore,e.converter,Bf(e._query,this._limit,this._limitType))}}function Pk(n){return U2("limit",n),Wy._create("limit",n,"F")}function IA(n,e,t){if(typeof(t=ut(t))=="string"){if(t==="")throw new ae(Q.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!$b(e)&&t.indexOf("/")!==-1)throw new ae(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(rt.fromString(t));if(!me.isDocumentKey(i))throw new ae(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return j0(n,new me(i))}if(t instanceof pt)return j0(n,t._key);throw new ae(Q.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ld(t)}.`)}function CA(n,e){if(!Array.isArray(n)||n.length===0)throw new ae(Q.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function KS(n,e){const t=function(a,l){for(const c of a)for(const d of c.getFlattenedFilters())if(l.indexOf(d.op)>=0)return d.op;return null}(n.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new ae(Q.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ae(Q.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class YS{convertValue(e,t="none"){switch(Rs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return St(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ss(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw _e(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Ls(e,(a,l)=>{i[a]=this.convertValue(l,t)}),i}convertVectorValue(e){var t,i,a;const l=(a=(i=(t=e.fields)===null||t===void 0?void 0:t[Lf].arrayValue)===null||i===void 0?void 0:i.values)===null||a===void 0?void 0:a.map(c=>St(c.doubleValue));return new Fr(l)}convertGeoPoint(e){return new zr(St(e.latitude),St(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=cd(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Qu(e));default:return null}}convertTimestamp(e){const t=bs(e);return new lt(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=rt.fromString(e);je(yS(i),9688,{name:e});const a=new Xu(i.get(1),i.get(3)),l=new me(i.popFirst(5));return a.isEqual(t)||Di(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zy(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class Vk extends YS{constructor(e){super(),this.firestore=e}convertBytes(e){return new kn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new pt(this.firestore,null,t)}}class Fo{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Es extends Yf{constructor(e,t,i,a,l,c){super(e,t,i,a,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new wf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(bd("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ae(Q.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Es._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Es._jsonSchemaVersion="firestore/documentSnapshot/1.0",Es._jsonSchema={type:Pt("string",Es._jsonSchemaVersion),bundleSource:Pt("string","DocumentSnapshot"),bundleName:Pt("string"),bundle:Pt("string")};class wf extends Es{data(e={}){return super.data(e)}}class Da{constructor(e,t,i,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new Fo(a.hasPendingWrites,a.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new wf(this._firestore,this._userDataWriter,i.key,i,new Fo(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ae(Q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(a,l){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map(d=>{const p=new wf(a._firestore,a._userDataWriter,d.doc.key,d.doc,new Fo(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);return d.doc,{type:"added",doc:p,oldIndex:-1,newIndex:c++}})}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(d=>l||d.type!==3).map(d=>{const p=new wf(a._firestore,a._userDataWriter,d.doc.key,d.doc,new Fo(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);let g=-1,_=-1;return d.type!==0&&(g=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),_=c.indexOf(d.doc.key)),{type:kk(d.type),doc:p,oldIndex:g,newIndex:_}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ae(Q.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Da._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=dy.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],a=[];return this.docs.forEach(l=>{l._document!==null&&(t.push(l._document),i.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),a.push(l.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function kk(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return _e(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bs(n){n=vn(n,pt);const e=vn(n.firestore,Hr);return Ak(wc(e),n._key).then(t=>XS(e,n,t))}Da._jsonSchemaVersion="firestore/querySnapshot/1.0",Da._jsonSchema={type:Pt("string",Da._jsonSchemaVersion),bundleSource:Pt("string","QuerySnapshot"),bundleName:Pt("string"),bundle:Pt("string")};class Rd extends YS{constructor(e){super(),this.firestore=e}convertBytes(e){return new kn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new pt(this.firestore,null,t)}}function Rt(n){n=vn(n,Pi);const e=vn(n.firestore,Hr),t=wc(e),i=new Rd(e);return $S(n._query),wk(t,n._query).then(a=>new Da(e,i,n,a))}function Jy(n,e,t){n=vn(n,pt);const i=vn(n.firestore,Hr),a=Zy(n.converter,e,t);return Id(i,[jy(Sc(i),"setDoc",n._key,a,n.converter!==null,t).toMutation(n._key,nn.none())])}function qa(n,e,t,...i){n=vn(n,pt);const a=vn(n.firestore,Hr),l=Sc(a);let c;return c=typeof(e=ut(e))=="string"||e instanceof bc?qS(l,"updateDoc",n._key,e,t,i):FS(l,"updateDoc",n._key,e),Id(a,[c.toMutation(n._key,nn.exists(!0))])}function QS(n){return Id(vn(n.firestore,Hr),[new gd(n._key,nn.none())])}function e_(n,e){const t=vn(n.firestore,Hr),i=Qe(n),a=Zy(n.converter,e);return Id(t,[jy(Sc(n.firestore),"addDoc",i._key,a,n.converter!==null,{}).toMutation(i._key,nn.exists(!1))]).then(()=>i)}function Ic(n,...e){var t,i,a;n=ut(n);let l={includeMetadataChanges:!1,source:"default"},c=0;typeof e[c]!="object"||RA(e[c])||(l=e[c++]);const d={includeMetadataChanges:l.includeMetadataChanges,source:l.source};if(RA(e[c])){const A=e[c];e[c]=(t=A.next)===null||t===void 0?void 0:t.bind(A),e[c+1]=(i=A.error)===null||i===void 0?void 0:i.bind(A),e[c+2]=(a=A.complete)===null||a===void 0?void 0:a.bind(A)}let p,g,_;if(n instanceof pt)g=vn(n.firestore,Hr),_=hd(n._key.path),p={next:A=>{e[c]&&e[c](XS(g,n,A))},error:e[c+1],complete:e[c+2]};else{const A=vn(n,Pi);g=vn(A.firestore,Hr),_=A._query;const T=new Rd(g);p={next:N=>{e[c]&&e[c](new Da(g,T,A,N))},error:e[c+1],complete:e[c+2]},$S(n._query)}return function(T,N,O,H){const U=new zy(H),G=new Ly(N,U,O);return T.asyncQueue.enqueueAndForget(async()=>Vy(await $f(T),G)),()=>{U.Ou(),T.asyncQueue.enqueueAndForget(async()=>ky(await $f(T),G))}}(wc(g),_,d,p)}function Id(n,e){return function(i,a){const l=new Ur;return i.asyncQueue.enqueueAndForget(async()=>ok(await Ek(i),a,l)),l.promise}(wc(n),e)}function XS(n,e,t){const i=t.docs.get(e._key),a=new Rd(n);return new Es(n,a,e._key,i,new Fo(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xk={maxAttempts:5};function Du(n,e){if((n=ut(n)).firestore!==e)throw new ae(Q.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lk{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Sc(e)}get(e){const t=Du(e,this._firestore),i=new Vk(this._firestore);return this._transaction.lookup([t._key]).then(a=>{if(!a||a.length!==1)return _e(24041);const l=a[0];if(l.isFoundDocument())return new Yf(this._firestore,i,l.key,l,t.converter);if(l.isNoDocument())return new Yf(this._firestore,i,t._key,null,t.converter);throw _e(18433,{doc:l})})}set(e,t,i){const a=Du(e,this._firestore),l=Zy(a.converter,t,i),c=jy(this._dataReader,"Transaction.set",a._key,l,a.converter!==null,i);return this._transaction.set(a._key,c),this}update(e,t,i,...a){const l=Du(e,this._firestore);let c;return c=typeof(t=ut(t))=="string"||t instanceof bc?qS(this._dataReader,"Transaction.update",l._key,t,i,a):FS(this._dataReader,"Transaction.update",l._key,t),this._transaction.update(l._key,c),this}delete(e){const t=Du(e,this._firestore);return this._transaction.delete(t._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uk extends Lk{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Du(e,this._firestore),i=new Rd(this._firestore);return super.get(e).then(a=>new Es(this._firestore,i,t._key,a._document,new Fo(!1,!1),t.converter))}}function Cc(n,e,t){n=vn(n,Hr);const i=Object.assign(Object.assign({},xk),t);return function(l){if(l.maxAttempts<1)throw new ae(Q.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(l,c,d){const p=new Ur;return l.asyncQueue.enqueueAndForget(async()=>{const g=await Tk(l);new yk(l.asyncQueue,g,d,c,p).zu()}),p.promise}(wc(n),a=>e(new Uk(n,a)),i)}function xe(){return new Hy("serverTimestamp")}(function(e,t=!0){(function(a){ol=a})(Ba),nr(new zn("firestore",(i,{instanceIdentifier:a,options:l})=>{const c=i.getProvider("app").getImmediate(),d=new Hr(new D2(i.getProvider("auth-internal")),new P2(c,i.getProvider("app-check-internal")),function(g,_){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new ae(Q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Xu(g.options.projectId,_)}(c,a),c);return l=Object.assign({useFetchStreams:t},l),d._setSettings(l),d},"PUBLIC").setMultipleInstances(!0)),fn(N0,D0,e),fn(N0,D0,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WS="firebasestorage.googleapis.com",Bk="storageBucket",zk=2*60*1e3,Fk=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr extends ir{constructor(e,t,i=0){super(Wm(e),`Firebase Storage: ${t} (${Wm(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Qr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Wm(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Gr;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Gr||(Gr={}));function Wm(n){return"storage/"+n}function qk(){const n="An unknown error occurred, please check the error payload for server response.";return new Qr(Gr.UNKNOWN,n)}function jk(){return new Qr(Gr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Hk(){return new Qr(Gr.CANCELED,"User canceled the upload/download.")}function Gk(n){return new Qr(Gr.INVALID_URL,"Invalid URL '"+n+"'.")}function $k(n){return new Qr(Gr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function NA(n){return new Qr(Gr.INVALID_ARGUMENT,n)}function ZS(){return new Qr(Gr.APP_DELETED,"The Firebase app was deleted.")}function Kk(n){return new Qr(Gr.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let i;try{i=pr.makeFromUrl(e,t)}catch{return new pr(e,"")}if(i.path==="")return i;throw $k(e)}static makeFromUrl(e,t){let i=null;const a="([A-Za-z0-9.\\-_]+)";function l(he){he.path.charAt(he.path.length-1)==="/"&&(he.path_=he.path_.slice(0,-1))}const c="(/(.*))?$",d=new RegExp("^gs://"+a+c,"i"),p={bucket:1,path:3};function g(he){he.path_=decodeURIComponent(he.path)}const _="v[A-Za-z0-9_]+",A=t.replace(/[.]/g,"\\."),T="(/([^?#]*).*)?$",N=new RegExp(`^https?://${A}/${_}/b/${a}/o${T}`,"i"),O={bucket:1,path:3},H=t===WS?"(?:storage.googleapis.com|storage.cloud.google.com)":t,U="([^?#]*)",G=new RegExp(`^https?://${H}/${a}/${U}`,"i"),ne=[{regex:d,indices:p,postModify:l},{regex:N,indices:O,postModify:g},{regex:G,indices:{bucket:1,path:2},postModify:g}];for(let he=0;he<ne.length;he++){const ce=ne[he],Ee=ce.regex.exec(e);if(Ee){const P=Ee[ce.indices.bucket];let R=Ee[ce.indices.path];R||(R=""),i=new pr(P,R),ce.postModify(i);break}}if(i==null)throw Gk(e);return i}}class Yk{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qk(n,e,t){let i=1,a=null,l=null,c=!1,d=0;function p(){return d===2}let g=!1;function _(...U){g||(g=!0,e.apply(null,U))}function A(U){a=setTimeout(()=>{a=null,n(N,p())},U)}function T(){l&&clearTimeout(l)}function N(U,...G){if(g){T();return}if(U){T(),_.call(null,U,...G);return}if(p()||c){T(),_.call(null,U,...G);return}i<64&&(i*=2);let ne;d===1?(d=2,ne=0):ne=(i+Math.random())*1e3,A(ne)}let O=!1;function H(U){O||(O=!0,T(),!g&&(a!==null?(U||(d=2),clearTimeout(a),A(0)):U||(d=1)))}return A(0),l=setTimeout(()=>{c=!0,H(!0)},t),H}function Xk(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wk(n){return n!==void 0}function DA(n,e,t,i){if(i<e)throw NA(`Invalid value for '${n}'. Expected ${e} or greater.`);if(i>t)throw NA(`Invalid value for '${n}'. Expected ${t} or less.`)}function Zk(n){const e=encodeURIComponent;let t="?";for(const i in n)if(n.hasOwnProperty(i)){const a=e(i)+"="+e(n[i]);t=t+a+"&"}return t=t.slice(0,-1),t}var Qf;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Qf||(Qf={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jk(n,e){const t=n>=500&&n<600,a=[408,429].indexOf(n)!==-1,l=e.indexOf(n)!==-1;return t||a||l}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ex{constructor(e,t,i,a,l,c,d,p,g,_,A,T=!0,N=!1){this.url_=e,this.method_=t,this.headers_=i,this.body_=a,this.successCodes_=l,this.additionalRetryCodes_=c,this.callback_=d,this.errorCallback_=p,this.timeout_=g,this.progressCallback_=_,this.connectionFactory_=A,this.retry=T,this.isUsingEmulator=N,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((O,H)=>{this.resolve_=O,this.reject_=H,this.start_()})}start_(){const e=(i,a)=>{if(a){i(!1,new uf(!1,null,!0));return}const l=this.connectionFactory_();this.pendingConnection_=l;const c=d=>{const p=d.loaded,g=d.lengthComputable?d.total:-1;this.progressCallback_!==null&&this.progressCallback_(p,g)};this.progressCallback_!==null&&l.addUploadProgressListener(c),l.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&l.removeUploadProgressListener(c),this.pendingConnection_=null;const d=l.getErrorCode()===Qf.NO_ERROR,p=l.getStatus();if(!d||Jk(p,this.additionalRetryCodes_)&&this.retry){const _=l.getErrorCode()===Qf.ABORT;i(!1,new uf(!1,null,_));return}const g=this.successCodes_.indexOf(p)!==-1;i(!0,new uf(g,l))})},t=(i,a)=>{const l=this.resolve_,c=this.reject_,d=a.connection;if(a.wasSuccessCode)try{const p=this.callback_(d,d.getResponse());Wk(p)?l(p):l()}catch(p){c(p)}else if(d!==null){const p=qk();p.serverResponse=d.getErrorText(),this.errorCallback_?c(this.errorCallback_(d,p)):c(p)}else if(a.canceled){const p=this.appDelete_?ZS():Hk();c(p)}else{const p=jk();c(p)}};this.canceled_?t(!1,new uf(!1,null,!0)):this.backoffId_=Qk(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Xk(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class uf{constructor(e,t,i){this.wasSuccessCode=e,this.connection=t,this.canceled=!!i}}function tx(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function nx(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function rx(n,e){e&&(n["X-Firebase-GMPID"]=e)}function ix(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function sx(n,e,t,i,a,l,c=!0,d=!1){const p=Zk(n.urlParams),g=n.url+p,_=Object.assign({},n.headers);return rx(_,e),tx(_,t),nx(_,l),ix(_,i),new ex(g,n.method,_,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,a,c,d)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ax(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function ox(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xf{constructor(e,t){this._service=e,t instanceof pr?this._location=t:this._location=pr.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Xf(e,t)}get root(){const e=new pr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return ox(this._location.path)}get storage(){return this._service}get parent(){const e=ax(this._location.path);if(e===null)return null;const t=new pr(this._location.bucket,e);return new Xf(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw Kk(e)}}function OA(n,e){const t=e?.[Bk];return t==null?null:pr.makeFromBucketSpec(t,n)}function lx(n,e,t,i={}){n.host=`${e}:${t}`;const a=Ua(e);a&&(Xg(`https://${n.host}/b`),Wg("Storage",!0)),n._isUsingEmulator=!0,n._protocol=a?"https":"http";const{mockUserToken:l}=i;l&&(n._overrideAuthToken=typeof l=="string"?l:Pw(l,n.app.options.projectId))}class ux{constructor(e,t,i,a,l,c=!1){this.app=e,this._authProvider=t,this._appCheckProvider=i,this._url=a,this._firebaseVersion=l,this._isUsingEmulator=c,this._bucket=null,this._host=WS,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=zk,this._maxUploadRetryTime=Fk,this._requests=new Set,a!=null?this._bucket=pr.makeFromBucketSpec(a,this._host):this._bucket=OA(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=pr.makeFromBucketSpec(this._url,e):this._bucket=OA(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){DA("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){DA("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(bn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Xf(this,e)}_makeRequest(e,t,i,a,l=!0){if(this._deleted)return new Yk(ZS());{const c=sx(e,this._appId,i,a,t,this._firebaseVersion,l,this._isUsingEmulator);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}async makeRequestWithTokens(e,t){const[i,a]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,i,a).getPromise()}}const MA="@firebase/storage",PA="0.13.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JS="storage";function cx(n=fc(),e){n=ut(n);const i=Mi(n,JS).getImmediate({identifier:e}),a=Dw("storage");return a&&hx(i,...a),i}function hx(n,e,t,i={}){lx(n,e,t,i)}function fx(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),a=n.getProvider("app-check-internal");return new ux(t,i,a,e,Ba)}function dx(){nr(new zn(JS,fx,"PUBLIC").setMultipleInstances(!0)),fn(MA,PA,""),fn(MA,PA,"esm2017")}dx();const eR="@firebase/installations",t_="0.6.18";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tR=1e4,nR=`w:${t_}`,rR="FIS_v2",px="https://firebaseinstallations.googleapis.com/v1",mx=60*60*1e3,gx="installations",yx="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _x={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},xa=new Ps(gx,yx,_x);function iR(n){return n instanceof ir&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sR({projectId:n}){return`${px}/projects/${n}/installations`}function aR(n){return{token:n.token,requestStatus:2,expiresIn:Ex(n.expiresIn),creationTime:Date.now()}}async function oR(n,e){const i=(await e.json()).error;return xa.create("request-failed",{requestName:n,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function lR({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function vx(n,{refreshToken:e}){const t=lR(n);return t.append("Authorization",Tx(e)),t}async function uR(n){const e=await n();return e.status>=500&&e.status<600?n():e}function Ex(n){return Number(n.replace("s","000"))}function Tx(n){return`${rR} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ax({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const i=sR(n),a=lR(n),l=e.getImmediate({optional:!0});if(l){const g=await l.getHeartbeatsHeader();g&&a.append("x-firebase-client",g)}const c={fid:t,authVersion:rR,appId:n.appId,sdkVersion:nR},d={method:"POST",headers:a,body:JSON.stringify(c)},p=await uR(()=>fetch(i,d));if(p.ok){const g=await p.json();return{fid:g.fid||t,registrationStatus:2,refreshToken:g.refreshToken,authToken:aR(g.authToken)}}else throw await oR("Create Installation",p)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cR(n){return new Promise(e=>{setTimeout(e,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wx(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bx=/^[cdef][\w-]{21}$/,kg="";function Sx(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=Rx(n);return bx.test(t)?t:kg}catch{return kg}}function Rx(n){return wx(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cd(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hR=new Map;function fR(n,e){const t=Cd(n);dR(t,e),Ix(t,e)}function dR(n,e){const t=hR.get(n);if(t)for(const i of t)i(e)}function Ix(n,e){const t=Cx();t&&t.postMessage({key:n,fid:e}),Nx()}let Ca=null;function Cx(){return!Ca&&"BroadcastChannel"in self&&(Ca=new BroadcastChannel("[Firebase] FID Change"),Ca.onmessage=n=>{dR(n.data.key,n.data.fid)}),Ca}function Nx(){hR.size===0&&Ca&&(Ca.close(),Ca=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dx="firebase-installations-database",Ox=1,La="firebase-installations-store";let Zm=null;function n_(){return Zm||(Zm=xw(Dx,Ox,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(La)}}})),Zm}async function Wf(n,e){const t=Cd(n),a=(await n_()).transaction(La,"readwrite"),l=a.objectStore(La),c=await l.get(t);return await l.put(e,t),await a.done,(!c||c.fid!==e.fid)&&fR(n,e.fid),e}async function pR(n){const e=Cd(n),i=(await n_()).transaction(La,"readwrite");await i.objectStore(La).delete(e),await i.done}async function Nd(n,e){const t=Cd(n),a=(await n_()).transaction(La,"readwrite"),l=a.objectStore(La),c=await l.get(t),d=e(c);return d===void 0?await l.delete(t):await l.put(d,t),await a.done,d&&(!c||c.fid!==d.fid)&&fR(n,d.fid),d}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r_(n){let e;const t=await Nd(n.appConfig,i=>{const a=Mx(i),l=Px(n,a);return e=l.registrationPromise,l.installationEntry});return t.fid===kg?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function Mx(n){const e=n||{fid:Sx(),registrationStatus:0};return mR(e)}function Px(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const a=Promise.reject(xa.create("app-offline"));return{installationEntry:e,registrationPromise:a}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=Vx(n,t);return{installationEntry:t,registrationPromise:i}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:kx(n)}:{installationEntry:e}}async function Vx(n,e){try{const t=await Ax(n,e);return Wf(n.appConfig,t)}catch(t){throw iR(t)&&t.customData.serverCode===409?await pR(n.appConfig):await Wf(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function kx(n){let e=await VA(n.appConfig);for(;e.registrationStatus===1;)await cR(100),e=await VA(n.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:i}=await r_(n);return i||t}return e}function VA(n){return Nd(n,e=>{if(!e)throw xa.create("installation-not-found");return mR(e)})}function mR(n){return xx(n)?{fid:n.fid,registrationStatus:0}:n}function xx(n){return n.registrationStatus===1&&n.registrationTime+tR<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lx({appConfig:n,heartbeatServiceProvider:e},t){const i=Ux(n,t),a=vx(n,t),l=e.getImmediate({optional:!0});if(l){const g=await l.getHeartbeatsHeader();g&&a.append("x-firebase-client",g)}const c={installation:{sdkVersion:nR,appId:n.appId}},d={method:"POST",headers:a,body:JSON.stringify(c)},p=await uR(()=>fetch(i,d));if(p.ok){const g=await p.json();return aR(g)}else throw await oR("Generate Auth Token",p)}function Ux(n,{fid:e}){return`${sR(n)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i_(n,e=!1){let t;const i=await Nd(n.appConfig,l=>{if(!gR(l))throw xa.create("not-registered");const c=l.authToken;if(!e&&Fx(c))return l;if(c.requestStatus===1)return t=Bx(n,e),l;{if(!navigator.onLine)throw xa.create("app-offline");const d=jx(l);return t=zx(n,d),d}});return t?await t:i.authToken}async function Bx(n,e){let t=await kA(n.appConfig);for(;t.authToken.requestStatus===1;)await cR(100),t=await kA(n.appConfig);const i=t.authToken;return i.requestStatus===0?i_(n,e):i}function kA(n){return Nd(n,e=>{if(!gR(e))throw xa.create("not-registered");const t=e.authToken;return Hx(t)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function zx(n,e){try{const t=await Lx(n,e),i=Object.assign(Object.assign({},e),{authToken:t});return await Wf(n.appConfig,i),t}catch(t){if(iR(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await pR(n.appConfig);else{const i=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Wf(n.appConfig,i)}throw t}}function gR(n){return n!==void 0&&n.registrationStatus===2}function Fx(n){return n.requestStatus===2&&!qx(n)}function qx(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+mx}function jx(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}function Hx(n){return n.requestStatus===1&&n.requestTime+tR<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gx(n){const e=n,{installationEntry:t,registrationPromise:i}=await r_(e);return i?i.catch(console.error):i_(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $x(n,e=!1){const t=n;return await Kx(t),(await i_(t,e)).token}async function Kx(n){const{registrationPromise:e}=await r_(n);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yx(n){if(!n||!n.options)throw Jm("App Configuration");if(!n.name)throw Jm("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw Jm(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function Jm(n){return xa.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yR="installations",Qx="installations-internal",Xx=n=>{const e=n.getProvider("app").getImmediate(),t=Yx(e),i=Mi(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},Wx=n=>{const e=n.getProvider("app").getImmediate(),t=Mi(e,yR).getImmediate();return{getId:()=>Gx(t),getToken:a=>$x(t,a)}};function Zx(){nr(new zn(yR,Xx,"PUBLIC")),nr(new zn(Qx,Wx,"PRIVATE"))}Zx();fn(eR,t_);fn(eR,t_,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zf="analytics",Jx="firebase_id",eL="origin",tL=60*1e3,nL="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",s_="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sn=new hc("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rL={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Bn=new Ps("analytics","Analytics",rL);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iL(n){if(!n.startsWith(s_)){const e=Bn.create("invalid-gtag-resource",{gtagURL:n});return Sn.warn(e.message),""}return n}function _R(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function sL(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function aL(n,e){const t=sL("firebase-js-sdk-policy",{createScriptURL:iL}),i=document.createElement("script"),a=`${s_}?l=${n}&id=${e}`;i.src=t?t?.createScriptURL(a):a,i.async=!0,document.head.appendChild(i)}function oL(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}async function lL(n,e,t,i,a,l){const c=i[a];try{if(c)await e[c];else{const p=(await _R(t)).find(g=>g.measurementId===a);p&&await e[p.appId]}}catch(d){Sn.error(d)}n("config",a,l)}async function uL(n,e,t,i,a){try{let l=[];if(a&&a.send_to){let c=a.send_to;Array.isArray(c)||(c=[c]);const d=await _R(t);for(const p of c){const g=d.find(A=>A.measurementId===p),_=g&&e[g.appId];if(_)l.push(_);else{l=[];break}}}l.length===0&&(l=Object.values(e)),await Promise.all(l),n("event",i,a||{})}catch(l){Sn.error(l)}}function cL(n,e,t,i){async function a(l,...c){try{if(l==="event"){const[d,p]=c;await uL(n,e,t,d,p)}else if(l==="config"){const[d,p]=c;await lL(n,e,t,i,d,p)}else if(l==="consent"){const[d,p]=c;n("consent",d,p)}else if(l==="get"){const[d,p,g]=c;n("get",d,p,g)}else if(l==="set"){const[d]=c;n("set",d)}else n(l,...c)}catch(d){Sn.error(d)}}return a}function hL(n,e,t,i,a){let l=function(...c){window[i].push(arguments)};return window[a]&&typeof window[a]=="function"&&(l=window[a]),window[a]=cL(l,n,e,t),{gtagCore:l,wrappedGtag:window[a]}}function fL(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(s_)&&t.src.includes(n))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dL=30,pL=1e3;class mL{constructor(e={},t=pL){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const vR=new mL;function gL(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function yL(n){var e;const{appId:t,apiKey:i}=n,a={method:"GET",headers:gL(i)},l=nL.replace("{app-id}",t),c=await fetch(l,a);if(c.status!==200&&c.status!==304){let d="";try{const p=await c.json();!((e=p.error)===null||e===void 0)&&e.message&&(d=p.error.message)}catch{}throw Bn.create("config-fetch-failed",{httpStatus:c.status,responseMessage:d})}return c.json()}async function _L(n,e=vR,t){const{appId:i,apiKey:a,measurementId:l}=n.options;if(!i)throw Bn.create("no-app-id");if(!a){if(l)return{measurementId:l,appId:i};throw Bn.create("no-api-key")}const c=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},d=new TL;return setTimeout(async()=>{d.abort()},tL),ER({appId:i,apiKey:a,measurementId:l},c,d,e)}async function ER(n,{throttleEndTimeMillis:e,backoffCount:t},i,a=vR){var l;const{appId:c,measurementId:d}=n;try{await vL(i,e)}catch(p){if(d)return Sn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${p?.message}]`),{appId:c,measurementId:d};throw p}try{const p=await yL(n);return a.deleteThrottleMetadata(c),p}catch(p){const g=p;if(!EL(g)){if(a.deleteThrottleMetadata(c),d)return Sn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${g?.message}]`),{appId:c,measurementId:d};throw p}const _=Number((l=g?.customData)===null||l===void 0?void 0:l.httpStatus)===503?e0(t,a.intervalMillis,dL):e0(t,a.intervalMillis),A={throttleEndTimeMillis:Date.now()+_,backoffCount:t+1};return a.setThrottleMetadata(c,A),Sn.debug(`Calling attemptFetch again in ${_} millis`),ER(n,A,i,a)}}function vL(n,e){return new Promise((t,i)=>{const a=Math.max(e-Date.now(),0),l=setTimeout(t,a);n.addEventListener(()=>{clearTimeout(l),i(Bn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function EL(n){if(!(n instanceof ir)||!n.customData)return!1;const e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}class TL{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function AL(n,e,t,i,a){if(a&&a.global){n("event",t,i);return}else{const l=await e,c=Object.assign(Object.assign({},i),{send_to:l});n("event",t,c)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wL(){if(rd())try{await id()}catch(n){return Sn.warn(Bn.create("indexeddb-unavailable",{errorInfo:n?.toString()}).message),!1}else return Sn.warn(Bn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function bL(n,e,t,i,a,l,c){var d;const p=_L(n);p.then(N=>{t[N.measurementId]=N.appId,n.options.measurementId&&N.measurementId!==n.options.measurementId&&Sn.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${N.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(N=>Sn.error(N)),e.push(p);const g=wL().then(N=>{if(N)return i.getId()}),[_,A]=await Promise.all([p,g]);fL(l)||aL(l,_.measurementId),a("js",new Date);const T=(d=c?.config)!==null&&d!==void 0?d:{};return T[eL]="firebase",T.update=!0,A!=null&&(T[Jx]=A),a("config",_.measurementId,T),_.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SL{constructor(e){this.app=e}_delete(){return delete Bu[this.app.options.appId],Promise.resolve()}}let Bu={},xA=[];const LA={};let eg="dataLayer",RL="gtag",UA,TR,BA=!1;function IL(){const n=[];if(Zg()&&n.push("This is a browser extension environment."),Jg()||n.push("Cookies are not available."),n.length>0){const e=n.map((i,a)=>`(${a+1}) ${i}`).join(" "),t=Bn.create("invalid-analytics-context",{errorInfo:e});Sn.warn(t.message)}}function CL(n,e,t){IL();const i=n.options.appId;if(!i)throw Bn.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)Sn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Bn.create("no-api-key");if(Bu[i]!=null)throw Bn.create("already-exists",{id:i});if(!BA){oL(eg);const{wrappedGtag:l,gtagCore:c}=hL(Bu,xA,LA,eg,RL);TR=l,UA=c,BA=!0}return Bu[i]=bL(n,xA,LA,e,UA,eg,t),new SL(n)}function NL(n=fc()){n=ut(n);const e=Mi(n,Zf);return e.isInitialized()?e.getImmediate():DL(n)}function DL(n,e={}){const t=Mi(n,Zf);if(t.isInitialized()){const a=t.getImmediate();if(Ts(e,t.getOptions()))return a;throw Bn.create("already-initialized")}return t.initialize({options:e})}async function OL(){if(Zg()||!Jg()||!rd())return!1;try{return await id()}catch{return!1}}function ML(n,e,t,i){n=ut(n),AL(TR,Bu[n.app.options.appId],e,t,i).catch(a=>Sn.error(a))}const zA="@firebase/analytics",FA="0.10.17";function PL(){nr(new zn(Zf,(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),a=e.getProvider("installations-internal").getImmediate();return CL(i,a,t)},"PUBLIC")),nr(new zn("analytics-internal",n,"PRIVATE")),fn(zA,FA),fn(zA,FA,"esm2017");function n(e){try{const t=e.getProvider(Zf).getImmediate();return{logEvent:(i,a,l)=>ML(t,i,a,l)}}catch(t){throw Bn.create("interop-component-reg-failed",{reason:t})}}}PL();var xg,qA,Dd=function(){var n=self.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0];if(n&&n.responseStart>0&&n.responseStart<performance.now())return n},AR=function(n){if(document.readyState==="loading")return"loading";var e=Dd();if(e){if(n<e.domInteractive)return"loading";if(e.domContentLoadedEventStart===0||n<e.domContentLoadedEventStart)return"dom-interactive";if(e.domComplete===0||n<e.domComplete)return"dom-content-loaded"}return"complete"},VL=function(n){var e=n.nodeName;return n.nodeType===1?e.toLowerCase():e.toUpperCase().replace(/^#/,"")},a_=function(n,e){var t="";try{for(;n&&n.nodeType!==9;){var i=n,a=i.id?"#"+i.id:VL(i)+(i.classList&&i.classList.value&&i.classList.value.trim()&&i.classList.value.trim().length?"."+i.classList.value.trim().replace(/\s+/g,"."):"");if(t.length+a.length>(e||100)-1)return t||a;if(t=t?a+">"+t:a,i.id)break;n=i.parentNode}}catch{}return t},wR=-1,kL=function(){return wR},Nc=function(n){addEventListener("pageshow",function(e){e.persisted&&(wR=e.timeStamp,n(e))},!0)},o_=function(){var n=Dd();return n&&n.activationStart||0},Ns=function(n,e){var t=Dd(),i="navigate";return kL()>=0?i="back-forward-cache":t&&(document.prerendering||o_()>0?i="prerender":document.wasDiscarded?i="restore":t.type&&(i=t.type.replace(/_/g,"-"))),{name:n,value:e===void 0?-1:e,rating:"good",delta:0,entries:[],id:"v4-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:i}},fl=function(n,e,t){try{if(PerformanceObserver.supportedEntryTypes.includes(n)){var i=new PerformanceObserver(function(a){Promise.resolve().then(function(){e(a.getEntries())})});return i.observe(Object.assign({type:n,buffered:!0},t||{})),i}}catch{}},Ds=function(n,e,t,i){var a,l;return function(c){e.value>=0&&(c||i)&&((l=e.value-(a||0))||a===void 0)&&(a=e.value,e.delta=l,e.rating=function(d,p){return d>p[1]?"poor":d>p[0]?"needs-improvement":"good"}(e.value,t),n(e))}},l_=function(n){requestAnimationFrame(function(){return requestAnimationFrame(function(){return n()})})},Od=function(n){document.addEventListener("visibilitychange",function(){document.visibilityState==="hidden"&&n()})},u_=function(n){var e=!1;return function(){e||(n(),e=!0)}},qo=-1,jA=function(){return document.visibilityState!=="hidden"||document.prerendering?1/0:0},Jf=function(n){document.visibilityState==="hidden"&&qo>-1&&(qo=n.type==="visibilitychange"?n.timeStamp:0,xL())},HA=function(){addEventListener("visibilitychange",Jf,!0),addEventListener("prerenderingchange",Jf,!0)},xL=function(){removeEventListener("visibilitychange",Jf,!0),removeEventListener("prerenderingchange",Jf,!0)},bR=function(){return qo<0&&(qo=jA(),HA(),Nc(function(){setTimeout(function(){qo=jA(),HA()},0)})),{get firstHiddenTime(){return qo}}},c_=function(n){document.prerendering?addEventListener("prerenderingchange",function(){return n()},!0):n()},GA=[1800,3e3],LL=function(n,e){e=e||{},c_(function(){var t,i=bR(),a=Ns("FCP"),l=fl("paint",function(c){c.forEach(function(d){d.name==="first-contentful-paint"&&(l.disconnect(),d.startTime<i.firstHiddenTime&&(a.value=Math.max(d.startTime-o_(),0),a.entries.push(d),t(!0)))})});l&&(t=Ds(n,a,GA,e.reportAllChanges),Nc(function(c){a=Ns("FCP"),t=Ds(n,a,GA,e.reportAllChanges),l_(function(){a.value=performance.now()-c.timeStamp,t(!0)})}))})},$A=[.1,.25],UL=function(n,e){(function(t,i){i=i||{},LL(u_(function(){var a,l=Ns("CLS",0),c=0,d=[],p=function(_){_.forEach(function(A){if(!A.hadRecentInput){var T=d[0],N=d[d.length-1];c&&A.startTime-N.startTime<1e3&&A.startTime-T.startTime<5e3?(c+=A.value,d.push(A)):(c=A.value,d=[A])}}),c>l.value&&(l.value=c,l.entries=d,a())},g=fl("layout-shift",p);g&&(a=Ds(t,l,$A,i.reportAllChanges),Od(function(){p(g.takeRecords()),a(!0)}),Nc(function(){c=0,l=Ns("CLS",0),a=Ds(t,l,$A,i.reportAllChanges),l_(function(){return a()})}),setTimeout(a,0))}))})(function(t){var i=function(a){var l,c={};if(a.entries.length){var d=a.entries.reduce(function(g,_){return g&&g.value>_.value?g:_});if(d&&d.sources&&d.sources.length){var p=(l=d.sources).find(function(g){return g.node&&g.node.nodeType===1})||l[0];p&&(c={largestShiftTarget:a_(p.node),largestShiftTime:d.startTime,largestShiftValue:d.value,largestShiftSource:p,largestShiftEntry:d,loadState:AR(d.startTime)})}}return Object.assign(a,{attribution:c})}(t);n(i)},e)},SR=0,tg=1/0,cf=0,BL=function(n){n.forEach(function(e){e.interactionId&&(tg=Math.min(tg,e.interactionId),cf=Math.max(cf,e.interactionId),SR=cf?(cf-tg)/7+1:0)})},RR=function(){return xg?SR:performance.interactionCount||0},zL=function(){"interactionCount"in performance||xg||(xg=fl("event",BL,{type:"event",buffered:!0,durationThreshold:0}))},fr=[],zu=new Map,IR=0,FL=function(){var n=Math.min(fr.length-1,Math.floor((RR()-IR)/50));return fr[n]},CR=[],qL=function(n){if(CR.forEach(function(a){return a(n)}),n.interactionId||n.entryType==="first-input"){var e=fr[fr.length-1],t=zu.get(n.interactionId);if(t||fr.length<10||n.duration>e.latency){if(t)n.duration>t.latency?(t.entries=[n],t.latency=n.duration):n.duration===t.latency&&n.startTime===t.entries[0].startTime&&t.entries.push(n);else{var i={id:n.interactionId,latency:n.duration,entries:[n]};zu.set(i.id,i),fr.push(i)}fr.sort(function(a,l){return l.latency-a.latency}),fr.length>10&&fr.splice(10).forEach(function(a){return zu.delete(a.id)})}}},h_=function(n){var e=self.requestIdleCallback||self.setTimeout,t=-1;return n=u_(n),document.visibilityState==="hidden"?n():(t=e(n),Od(n)),t},KA=[200,500],jL=function(n,e){"PerformanceEventTiming"in self&&"interactionId"in PerformanceEventTiming.prototype&&(e=e||{},c_(function(){var t;zL();var i,a=Ns("INP"),l=function(d){h_(function(){d.forEach(qL);var p=FL();p&&p.latency!==a.value&&(a.value=p.latency,a.entries=p.entries,i())})},c=fl("event",l,{durationThreshold:(t=e.durationThreshold)!==null&&t!==void 0?t:40});i=Ds(n,a,KA,e.reportAllChanges),c&&(c.observe({type:"first-input",buffered:!0}),Od(function(){l(c.takeRecords()),i(!0)}),Nc(function(){IR=RR(),fr.length=0,zu.clear(),a=Ns("INP"),i=Ds(n,a,KA,e.reportAllChanges)}))}))},Ko=[],ps=[],Lg=0,f_=new WeakMap,Yo=new Map,Ug=-1,HL=function(n){Ko=Ko.concat(n),NR()},NR=function(){Ug<0&&(Ug=h_(GL))},GL=function(){Yo.size>10&&Yo.forEach(function(c,d){zu.has(d)||Yo.delete(d)});var n=fr.map(function(c){return f_.get(c.entries[0])}),e=ps.length-50;ps=ps.filter(function(c,d){return d>=e||n.includes(c)});for(var t=new Set,i=0;i<ps.length;i++){var a=ps[i];DR(a.startTime,a.processingEnd).forEach(function(c){t.add(c)})}var l=Ko.length-1-50;Ko=Ko.filter(function(c,d){return c.startTime>Lg&&d>l||t.has(c)}),Ug=-1};CR.push(function(n){n.interactionId&&n.target&&!Yo.has(n.interactionId)&&Yo.set(n.interactionId,n.target)},function(n){var e,t=n.startTime+n.duration;Lg=Math.max(Lg,n.processingEnd);for(var i=ps.length-1;i>=0;i--){var a=ps[i];if(Math.abs(t-a.renderTime)<=8){(e=a).startTime=Math.min(n.startTime,e.startTime),e.processingStart=Math.min(n.processingStart,e.processingStart),e.processingEnd=Math.max(n.processingEnd,e.processingEnd),e.entries.push(n);break}}e||(e={startTime:n.startTime,processingStart:n.processingStart,processingEnd:n.processingEnd,renderTime:t,entries:[n]},ps.push(e)),(n.interactionId||n.entryType==="first-input")&&f_.set(n,e),NR()});var DR=function(n,e){for(var t,i=[],a=0;t=Ko[a];a++)if(!(t.startTime+t.duration<n)){if(t.startTime>e)break;i.push(t)}return i},$L=function(n,e){qA||(qA=fl("long-animation-frame",HL)),jL(function(t){var i=function(a){var l=a.entries[0],c=f_.get(l),d=l.processingStart,p=c.processingEnd,g=c.entries.sort(function(U,G){return U.processingStart-G.processingStart}),_=DR(l.startTime,p),A=a.entries.find(function(U){return U.target}),T=A&&A.target||Yo.get(l.interactionId),N=[l.startTime+l.duration,p].concat(_.map(function(U){return U.startTime+U.duration})),O=Math.max.apply(Math,N),H={interactionTarget:a_(T),interactionTargetElement:T,interactionType:l.name.startsWith("key")?"keyboard":"pointer",interactionTime:l.startTime,nextPaintTime:O,processedEventEntries:g,longAnimationFrameEntries:_,inputDelay:d-l.startTime,processingDuration:p-d,presentationDelay:Math.max(O-p,0),loadState:AR(l.startTime)};return Object.assign(a,{attribution:H})}(t);n(i)},e)},YA=[2500,4e3],ng={},KL=function(n,e){(function(t,i){i=i||{},c_(function(){var a,l=bR(),c=Ns("LCP"),d=function(_){i.reportAllChanges||(_=_.slice(-1)),_.forEach(function(A){A.startTime<l.firstHiddenTime&&(c.value=Math.max(A.startTime-o_(),0),c.entries=[A],a())})},p=fl("largest-contentful-paint",d);if(p){a=Ds(t,c,YA,i.reportAllChanges);var g=u_(function(){ng[c.id]||(d(p.takeRecords()),p.disconnect(),ng[c.id]=!0,a(!0))});["keydown","click"].forEach(function(_){addEventListener(_,function(){return h_(g)},{once:!0,capture:!0})}),Od(g),Nc(function(_){c=Ns("LCP"),a=Ds(t,c,YA,i.reportAllChanges),l_(function(){c.value=performance.now()-_.timeStamp,ng[c.id]=!0,a(!0)})})}})})(function(t){var i=function(a){var l={timeToFirstByte:0,resourceLoadDelay:0,resourceLoadDuration:0,elementRenderDelay:a.value};if(a.entries.length){var c=Dd();if(c){var d=c.activationStart||0,p=a.entries[a.entries.length-1],g=p.url&&performance.getEntriesByType("resource").filter(function(O){return O.name===p.url})[0],_=Math.max(0,c.responseStart-d),A=Math.max(_,g?(g.requestStart||g.startTime)-d:0),T=Math.max(A,g?g.responseEnd-d:0),N=Math.max(T,p.startTime-d);l={element:a_(p.element),timeToFirstByte:_,resourceLoadDelay:A-_,resourceLoadDuration:T-A,elementRenderDelay:N-T,navigationEntry:c,lcpEntry:p},p.url&&(l.url=p.url),g&&(l.lcpResourceEntry=g)}}return Object.assign(a,{attribution:l})}(t);n(i)},e)};const QA="@firebase/performance",Bg="0.7.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OR=Bg,YL="FB-PERF-TRACE-START",QL="FB-PERF-TRACE-STOP",zg="FB-PERF-TRACE-MEASURE",MR="_wt_",PR="_fp",VR="_fcp",kR="_fid",xR="_lcp",XL="lcp_element",LR="_inp",WL="inp_interactionTarget",UR="_cls",ZL="cls_largestShiftTarget",BR="@firebase/performance/config",zR="@firebase/performance/configexpire",JL="performance",FR="Performance";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eU={"trace started":"Trace {$traceName} was started before.","trace stopped":"Trace {$traceName} is not running.","nonpositive trace startTime":"Trace {$traceName} startTime should be positive.","nonpositive trace duration":"Trace {$traceName} duration should be positive.","no window":"Window is not available.","no app id":"App id is not available.","no project id":"Project id is not available.","no api key":"Api key is not available.","invalid cc log":"Attempted to queue invalid cc event","FB not default":"Performance can only start when Firebase app instance is the default one.","RC response not ok":"RC response is not ok","invalid attribute name":"Attribute name {$attributeName} is invalid.","invalid attribute value":"Attribute value {$attributeValue} is invalid.","invalid custom metric name":"Custom metric name {$customMetricName} is invalid","invalid String merger input":"Input for String merger is invalid, contact support team to resolve.","already initialized":"initializePerformance() has already been called with different options. To avoid this error, call initializePerformance() with the same options as when it was originally called, or call getPerformance() to return the already initialized instance."},hn=new Ps(JL,FR,eU);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Os=new hc(FR);Os.logLevel=ke.INFO;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rg,qR;class zt{constructor(e){if(this.window=e,!e)throw hn.create("no window");this.performance=e.performance,this.PerformanceObserver=e.PerformanceObserver,this.windowLocation=e.location,this.navigator=e.navigator,this.document=e.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=e.localStorage),e.perfMetrics&&e.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=e.perfMetrics.onFirstInputDelay),this.onLCP=KL,this.onINP=$L,this.onCLS=UL}getUrl(){return this.windowLocation.href.split("?")[0]}mark(e){!this.performance||!this.performance.mark||this.performance.mark(e)}measure(e,t,i){!this.performance||!this.performance.measure||this.performance.measure(e,t,i)}getEntriesByType(e){return!this.performance||!this.performance.getEntriesByType?[]:this.performance.getEntriesByType(e)}getEntriesByName(e){return!this.performance||!this.performance.getEntriesByName?[]:this.performance.getEntriesByName(e)}getTimeOrigin(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)}requiredApisAvailable(){return!fetch||!Promise||!Jg()?(Os.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1):rd()?!0:(Os.info("IndexedDB is not supported by current browser"),!1)}setupObserver(e,t){if(!this.PerformanceObserver)return;new this.PerformanceObserver(a=>{for(const l of a.getEntries())t(l)}).observe({entryTypes:[e]})}static getInstance(){return rg===void 0&&(rg=new zt(qR)),rg}}function tU(n){qR=n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jR;function nU(n){const e=n.getId();return e.then(t=>{jR=t}),e}function d_(){return jR}function rU(n){const e=n.getToken();return e.then(t=>{}),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XA(n,e){const t=n.length-e.length;if(t<0||t>1)throw hn.create("invalid String merger input");const i=[];for(let a=0;a<n.length;a++)i.push(n.charAt(a)),e.length>a&&i.push(e.charAt(a));return i.join("")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ig;class Ln{constructor(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=XA("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=XA("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}getFlTransportFullUrl(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)}static getInstance(){return ig===void 0&&(ig=new Ln),ig}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fu;(function(n){n[n.UNKNOWN=0]="UNKNOWN",n[n.VISIBLE=1]="VISIBLE",n[n.HIDDEN=2]="HIDDEN"})(Fu||(Fu={}));const iU=["firebase_","google_","ga_"],sU=new RegExp("^[a-zA-Z]\\w*$"),aU=40,oU=100;function lU(){const n=zt.getInstance().navigator;return n?.serviceWorker?n.serviceWorker.controller?2:3:1}function uU(){switch(zt.getInstance().document.visibilityState){case"visible":return Fu.VISIBLE;case"hidden":return Fu.HIDDEN;default:return Fu.UNKNOWN}}function cU(){const e=zt.getInstance().navigator.connection;switch(e&&e.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}function hU(n){return n.length===0||n.length>aU?!1:!iU.some(t=>n.startsWith(t))&&!!n.match(sU)}function fU(n){return n.length!==0&&n.length<=oU}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HR(n){var e;const t=(e=n.options)===null||e===void 0?void 0:e.appId;if(!t)throw hn.create("no app id");return t}function dU(n){var e;const t=(e=n.options)===null||e===void 0?void 0:e.projectId;if(!t)throw hn.create("no project id");return t}function pU(n){var e;const t=(e=n.options)===null||e===void 0?void 0:e.apiKey;if(!t)throw hn.create("no api key");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mU="0.0.1",hr={loggingEnabled:!0},gU="FIREBASE_INSTALLATIONS_AUTH";function yU(n,e){const t=_U();return t?(WA(t),Promise.resolve()):TU(n,e).then(WA).then(i=>vU(i),()=>{})}function _U(){const n=zt.getInstance().localStorage;if(!n)return;const e=n.getItem(zR);if(!e||!AU(e))return;const t=n.getItem(BR);if(t)try{return JSON.parse(t)}catch{return}}function vU(n){const e=zt.getInstance().localStorage;!n||!e||(e.setItem(BR,JSON.stringify(n)),e.setItem(zR,String(Date.now()+Ln.getInstance().configTimeToLive*60*60*1e3)))}const EU="Could not fetch config, will use default configs";function TU(n,e){return rU(n.installations).then(t=>{const i=dU(n.app),a=pU(n.app),l=`https://firebaseremoteconfig.googleapis.com/v1/projects/${i}/namespaces/fireperf:fetch?key=${a}`,c=new Request(l,{method:"POST",headers:{Authorization:`${gU} ${t}`},body:JSON.stringify({app_instance_id:e,app_instance_id_token:t,app_id:HR(n.app),app_version:OR,sdk_version:mU})});return fetch(c).then(d=>{if(d.ok)return d.json();throw hn.create("RC response not ok")})}).catch(()=>{Os.info(EU)})}function WA(n){if(!n)return n;const e=Ln.getInstance(),t=n.entries||{};return t.fpr_enabled!==void 0?e.loggingEnabled=String(t.fpr_enabled)==="true":e.loggingEnabled=hr.loggingEnabled,t.fpr_log_source?e.logSource=Number(t.fpr_log_source):hr.logSource&&(e.logSource=hr.logSource),t.fpr_log_endpoint_url?e.logEndPointUrl=t.fpr_log_endpoint_url:hr.logEndPointUrl&&(e.logEndPointUrl=hr.logEndPointUrl),t.fpr_log_transport_key?e.transportKey=t.fpr_log_transport_key:hr.transportKey&&(e.transportKey=hr.transportKey),t.fpr_vc_network_request_sampling_rate!==void 0?e.networkRequestsSamplingRate=Number(t.fpr_vc_network_request_sampling_rate):hr.networkRequestsSamplingRate!==void 0&&(e.networkRequestsSamplingRate=hr.networkRequestsSamplingRate),t.fpr_vc_trace_sampling_rate!==void 0?e.tracesSamplingRate=Number(t.fpr_vc_trace_sampling_rate):hr.tracesSamplingRate!==void 0&&(e.tracesSamplingRate=hr.tracesSamplingRate),e.logTraceAfterSampling=ZA(e.tracesSamplingRate),e.logNetworkAfterSampling=ZA(e.networkRequestsSamplingRate),n}function AU(n){return Number(n)>Date.now()}function ZA(n){return Math.random()<=n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let p_=1,sg;function GR(n){return p_=2,sg=sg||bU(n),sg}function wU(){return p_===3}function bU(n){return SU().then(()=>nU(n.installations)).then(e=>yU(n,e)).then(()=>JA(),()=>JA())}function SU(){const n=zt.getInstance().document;return new Promise(e=>{if(n&&n.readyState!=="complete"){const t=()=>{n.readyState==="complete"&&(n.removeEventListener("readystatechange",t),e())};n.addEventListener("readystatechange",t)}else e()})}function JA(){p_=3}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $R=10*1e3,RU=5.5*1e3,IU=1e3,KR=3;let bf=KR,Oa=[],ew=!1;function CU(){ew||(m_(RU),ew=!0)}function m_(n){setTimeout(()=>{bf<=0||(Oa.length>0&&YR(),m_($R))},n)}function YR(){const n=Oa.splice(0,IU),e=n.map(i=>({source_extension_json_proto3:i.message,event_time_ms:String(i.eventTime)})),t={request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:Ln.getInstance().logSource,log_event:e};NU(t).then(()=>{bf=KR}).catch(()=>{Oa=[...n,...Oa],bf--,Os.info(`Tries left: ${bf}.`),m_($R)})}function NU(n){const e=Ln.getInstance().getFlTransportFullUrl(),t=JSON.stringify(n);return navigator.sendBeacon&&navigator.sendBeacon(e,t)?Promise.resolve():fetch(e,{method:"POST",body:t,keepalive:!0}).then()}function DU(n){if(!n.eventTime||!n.message)throw hn.create("invalid cc log");Oa=[...Oa,n]}function OU(n){return(...e)=>{const t=n(...e);DU({message:t,eventTime:Date.now()})}}function MU(){for(;Oa.length>0;)YR()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qu;function QR(n,e){qu||(qu={send:OU(kU),flush:MU}),qu.send(n,e)}function hf(n){const e=Ln.getInstance();!e.instrumentationEnabled&&n.isAuto||!e.dataCollectionEnabled&&!n.isAuto||zt.getInstance().requiredApisAvailable()&&(wU()?ag(n):GR(n.performanceController).then(()=>ag(n),()=>ag(n)))}function PU(){qu&&qu.flush()}function ag(n){if(!d_())return;const e=Ln.getInstance();!e.loggingEnabled||!e.logTraceAfterSampling||QR(n,1)}function VU(n){const e=Ln.getInstance();if(!e.instrumentationEnabled)return;const t=n.url,i=e.logEndPointUrl.split("?")[0],a=e.flTransportEndpointUrl.split("?")[0];t===i||t===a||!e.loggingEnabled||!e.logNetworkAfterSampling||QR(n,0)}function kU(n,e){return e===0?xU(n):LU(n)}function xU(n){const e={url:n.url,http_method:n.httpMethod||0,http_response_code:200,response_payload_bytes:n.responsePayloadBytes,client_start_time_us:n.startTimeUs,time_to_response_initiated_us:n.timeToResponseInitiatedUs,time_to_response_completed_us:n.timeToResponseCompletedUs},t={application_info:XR(n.performanceController.app),network_request_metric:e};return JSON.stringify(t)}function LU(n){const e={name:n.name,is_auto:n.isAuto,client_start_time_us:n.startTimeUs,duration_us:n.durationUs};Object.keys(n.counters).length!==0&&(e.counters=n.counters);const t=n.getAttributes();Object.keys(t).length!==0&&(e.custom_attributes=t);const i={application_info:XR(n.performanceController.app),trace_metric:e};return JSON.stringify(i)}function XR(n){return{google_app_id:HR(n),app_instance_id:d_(),web_app_info:{sdk_version:OR,page_url:zt.getInstance().getUrl(),service_worker_status:lU(),visibility_state:uU(),effective_connection_type:cU()},application_process_state:0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tw(n,e){const t=e;if(!t||t.responseStart===void 0)return;const i=zt.getInstance().getTimeOrigin(),a=Math.floor((t.startTime+i)*1e3),l=t.responseStart?Math.floor((t.responseStart-t.startTime)*1e3):void 0,c=Math.floor((t.responseEnd-t.startTime)*1e3),d=t.name&&t.name.split("?")[0],p={performanceController:n,url:d,responsePayloadBytes:t.transferSize,startTimeUs:a,timeToResponseInitiatedUs:l,timeToResponseCompletedUs:c};VU(p)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UU=100,BU="_",zU=[PR,VR,kR,xR,UR,LR];function FU(n,e){return n.length===0||n.length>UU?!1:e&&e.startsWith(MR)&&zU.indexOf(n)>-1||!n.startsWith(BU)}function qU(n){const e=Math.floor(n);return e<n&&Os.info(`Metric value should be an Integer, setting the value as : ${e}.`),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc{constructor(e,t,i=!1,a){this.performanceController=e,this.name=t,this.isAuto=i,this.state=1,this.customAttributes={},this.counters={},this.api=zt.getInstance(),this.randomId=Math.floor(Math.random()*1e6),this.isAuto||(this.traceStartMark=`${YL}-${this.randomId}-${this.name}`,this.traceStopMark=`${QL}-${this.randomId}-${this.name}`,this.traceMeasure=a||`${zg}-${this.randomId}-${this.name}`,a&&this.calculateTraceMetrics())}start(){if(this.state!==1)throw hn.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2}stop(){if(this.state!==2)throw hn.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),hf(this)}record(e,t,i){if(e<=0)throw hn.create("nonpositive trace startTime",{traceName:this.name});if(t<=0)throw hn.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(t*1e3),this.startTimeUs=Math.floor(e*1e3),i&&i.attributes&&(this.customAttributes=Object.assign({},i.attributes)),i&&i.metrics)for(const a of Object.keys(i.metrics))isNaN(Number(i.metrics[a]))||(this.counters[a]=Math.floor(Number(i.metrics[a])));hf(this)}incrementMetric(e,t=1){this.counters[e]===void 0?this.putMetric(e,t):this.putMetric(e,this.counters[e]+t)}putMetric(e,t){if(FU(e,this.name))this.counters[e]=qU(t??0);else throw hn.create("invalid custom metric name",{customMetricName:e})}getMetric(e){return this.counters[e]||0}putAttribute(e,t){const i=hU(e),a=fU(t);if(i&&a){this.customAttributes[e]=t;return}if(!i)throw hn.create("invalid attribute name",{attributeName:e});if(!a)throw hn.create("invalid attribute value",{attributeValue:t})}getAttribute(e){return this.customAttributes[e]}removeAttribute(e){this.customAttributes[e]!==void 0&&delete this.customAttributes[e]}getAttributes(){return Object.assign({},this.customAttributes)}setStartTime(e){this.startTimeUs=e}setDuration(e){this.durationUs=e}calculateTraceMetrics(){const e=this.api.getEntriesByName(this.traceMeasure),t=e&&e[0];t&&(this.durationUs=Math.floor(t.duration*1e3),this.startTimeUs=Math.floor((t.startTime+this.api.getTimeOrigin())*1e3))}static createOobTrace(e,t,i,a,l){const c=zt.getInstance().getUrl();if(!c)return;const d=new nc(e,MR+c,!0),p=Math.floor(zt.getInstance().getTimeOrigin()*1e3);d.setStartTime(p),t&&t[0]&&(d.setDuration(Math.floor(t[0].duration*1e3)),d.putMetric("domInteractive",Math.floor(t[0].domInteractive*1e3)),d.putMetric("domContentLoadedEventEnd",Math.floor(t[0].domContentLoadedEventEnd*1e3)),d.putMetric("loadEventEnd",Math.floor(t[0].loadEventEnd*1e3)));const g="first-paint",_="first-contentful-paint";if(i){const A=i.find(N=>N.name===g);A&&A.startTime&&d.putMetric(PR,Math.floor(A.startTime*1e3));const T=i.find(N=>N.name===_);T&&T.startTime&&d.putMetric(VR,Math.floor(T.startTime*1e3)),l&&d.putMetric(kR,Math.floor(l*1e3))}this.addWebVitalMetric(d,xR,XL,a.lcp),this.addWebVitalMetric(d,UR,ZL,a.cls),this.addWebVitalMetric(d,LR,WL,a.inp),hf(d),PU()}static addWebVitalMetric(e,t,i,a){a&&(e.putMetric(t,Math.floor(a.value*1e3)),a.elementAttribution&&e.putAttribute(i,a.elementAttribution))}static createUserTimingTrace(e,t){const i=new nc(e,t,!1,t);hf(i)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sf={},nw=!1,WR;function rw(n){d_()&&(setTimeout(()=>HU(n),0),setTimeout(()=>jU(n),0),setTimeout(()=>GU(n),0))}function jU(n){const e=zt.getInstance(),t=e.getEntriesByType("resource");for(const i of t)tw(n,i);e.setupObserver("resource",i=>tw(n,i))}function HU(n){const e=zt.getInstance();"onpagehide"in window?e.document.addEventListener("pagehide",()=>og(n)):e.document.addEventListener("unload",()=>og(n)),e.document.addEventListener("visibilitychange",()=>{e.document.visibilityState==="hidden"&&og(n)}),e.onFirstInputDelay&&e.onFirstInputDelay(t=>{WR=t}),e.onLCP(t=>{var i;Sf.lcp={value:t.value,elementAttribution:(i=t.attribution)===null||i===void 0?void 0:i.element}}),e.onCLS(t=>{var i;Sf.cls={value:t.value,elementAttribution:(i=t.attribution)===null||i===void 0?void 0:i.largestShiftTarget}}),e.onINP(t=>{var i;Sf.inp={value:t.value,elementAttribution:(i=t.attribution)===null||i===void 0?void 0:i.interactionTarget}})}function GU(n){const e=zt.getInstance(),t=e.getEntriesByType("measure");for(const i of t)iw(n,i);e.setupObserver("measure",i=>iw(n,i))}function iw(n,e){const t=e.name;t.substring(0,zg.length)!==zg&&nc.createUserTimingTrace(n,t)}function og(n){if(!nw){nw=!0;const e=zt.getInstance(),t=e.getEntriesByType("navigation"),i=e.getEntriesByType("paint");setTimeout(()=>{nc.createOobTrace(n,t,i,Sf,WR)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $U{constructor(e,t){this.app=e,this.installations=t,this.initialized=!1}_init(e){this.initialized||(e?.dataCollectionEnabled!==void 0&&(this.dataCollectionEnabled=e.dataCollectionEnabled),e?.instrumentationEnabled!==void 0&&(this.instrumentationEnabled=e.instrumentationEnabled),zt.getInstance().requiredApisAvailable()?id().then(t=>{t&&(CU(),GR(this).then(()=>rw(this),()=>rw(this)),this.initialized=!0)}).catch(t=>{Os.info(`Environment doesn't support IndexedDB: ${t}`)}):Os.info('Firebase Performance cannot start if the browser does not support "Fetch" and "Promise", or cookies are disabled.'))}set instrumentationEnabled(e){Ln.getInstance().instrumentationEnabled=e}get instrumentationEnabled(){return Ln.getInstance().instrumentationEnabled}set dataCollectionEnabled(e){Ln.getInstance().dataCollectionEnabled=e}get dataCollectionEnabled(){return Ln.getInstance().dataCollectionEnabled}}const KU="[DEFAULT]";function YU(n=fc()){return n=ut(n),Mi(n,"performance").getImmediate()}const QU=(n,{options:e})=>{const t=n.getProvider("app").getImmediate(),i=n.getProvider("installations-internal").getImmediate();if(t.name!==KU)throw hn.create("FB not default");if(typeof window>"u")throw hn.create("no window");tU(window);const a=new $U(t,i);return a._init(e),a};function XU(){nr(new zn("performance",QU,"PUBLIC")),fn(QA,Bg),fn(QA,Bg,"esm2017")}XU();const WU={apiKey:"AIzaSyCbU834quCY8hjSffRwljJLgZrcxK8i2F4",authDomain:"liquidacionapp-62962.firebaseapp.com",projectId:"liquidacionapp-62962",storageBucket:"liquidacionapp-62962.firebasestorage.app",messagingSenderId:"851382130132",appId:"1:851382130132:web:eaba38fab449f14fb5b241",measurementId:"G-MEASUREMENT_ID"},rc=Lw(WU),ju=b2(rc),de=Sk(rc);cx(rc);let ZU=null,JU=null;try{OL().then(n=>{n&&(ZU=NL(rc))}).catch(()=>{console.warn("Firebase Analytics no está soportado en este entorno")}),typeof window<"u"&&(JU=YU(rc))}catch(n){console.warn("Error al inicializar Firebase Analytics/Performance:",n)}const Qo={ADMIN:"admin",CONTADOR:"contador",CLIENTE:"cliente"},st={MANAGE_INVENTORY:"canManageInventory",CREATE_MOVEMENTS:"canCreateMovements",VIEW_ALL_MOVEMENTS:"canViewAllMovements",MANAGE_VEHICLES:"canManageVehicles",MANAGE_MAINTENANCE:"canManageMaintenance",MANAGE_SUPPLIERS:"canManageSuppliers",VIEW_REPORTS:"canViewReports",EXPORT_REPORTS:"canExportReports",MODIFY_SETTINGS:"canModifySettings"},e4="contacto.evert@gmail.com",ZR=n=>{switch(n){case Qo.ADMIN:return{[st.MANAGE_INVENTORY]:!0,[st.CREATE_MOVEMENTS]:!0,[st.VIEW_ALL_MOVEMENTS]:!0,[st.MANAGE_VEHICLES]:!0,[st.MANAGE_MAINTENANCE]:!0,[st.MANAGE_SUPPLIERS]:!0,[st.VIEW_REPORTS]:!0,[st.EXPORT_REPORTS]:!0,[st.MODIFY_SETTINGS]:!0};case Qo.CONTADOR:return{[st.MANAGE_INVENTORY]:!0,[st.CREATE_MOVEMENTS]:!0,[st.VIEW_ALL_MOVEMENTS]:!0,[st.MANAGE_VEHICLES]:!1,[st.MANAGE_MAINTENANCE]:!0,[st.MANAGE_SUPPLIERS]:!1,[st.VIEW_REPORTS]:!0,[st.EXPORT_REPORTS]:!0,[st.MODIFY_SETTINGS]:!1};case Qo.CLIENTE:default:return{[st.MANAGE_INVENTORY]:!1,[st.CREATE_MOVEMENTS]:!0,[st.VIEW_ALL_MOVEMENTS]:!1,[st.MANAGE_VEHICLES]:!1,[st.MANAGE_MAINTENANCE]:!1,[st.MANAGE_SUPPLIERS]:!1,[st.VIEW_REPORTS]:!1,[st.EXPORT_REPORTS]:!1,[st.MODIFY_SETTINGS]:!1}}},t4=n=>n===e4?Qo.ADMIN:Qo.CLIENTE,tl=()=>"artifacts/1:851382130132:web:eaba38fab449f14fb5b241/invitations",n4=()=>{const n="ABCDEFGHIJKLMNPQRSTUVWXYZ123456789";let e="";for(let t=0;t<8;t++)e+=n.charAt(Math.floor(Math.random()*n.length));return e},Y4=async(n,e)=>{try{const t=await Md(e);if(!t.success||t.userData.role!=="admin")return{success:!1,error:"Solo administradores pueden crear invitaciones"};let i,a=!1,l=0;for(;!a&&l<10;){i=n4();const p=De(He(de,tl()),Le("code","==",i));(await Rt(p)).empty&&(a=!0),l++}if(!a)return{success:!1,error:"No se pudo generar un código único"};const c=Qe(He(de,tl())),d={code:i,targetEmail:n.email.toLowerCase(),targetRole:n.role||Qo.CLIENTE,targetName:n.name||"",status:"pending",appContext:"combustibles",expiresAt:new Date(Date.now()+7*24*60*60*1e3),createdAt:xe(),createdBy:e,usedAt:null,usedBy:null};return await Jy(c,d),console.log("🎫 Invitación creada:",{code:i,email:n.email,role:n.role}),{success:!0,invitation:{id:c.id,code:i,...d}}}catch(t){return console.error("Error creating invitation:",t),{success:!1,error:t.message}}},JR=async n=>{try{const e=De(He(de,tl()),Le("code","==",n.toUpperCase()),Le("status","==","pending")),t=await Rt(e);if(t.empty)return{success:!1,error:"Código de invitación inválido o expirado"};const i=t.docs[0],a=i.data(),l=new Date,c=a.expiresAt.toDate();return l>c?{success:!1,error:"Código de invitación expirado"}:{success:!0,invitation:{id:i.id,...a}}}catch(e){return console.error("Error validating invitation:",e),{success:!1,error:e.message}}},r4=async(n,e)=>{try{const t=Qe(de,tl(),n);return await qa(t,{status:"used",usedAt:xe(),usedBy:e}),{success:!0}}catch(t){return console.error("Error marking invitation as used:",t),{success:!1,error:t.message}}},Q4=async n=>{try{const e=await Md(n);if(!e.success||e.userData.role!=="admin")return{success:!1,error:"Solo administradores pueden ver invitaciones"};const t=De(He(de,tl())),i=await Rt(t),a=[];return i.forEach(l=>{a.push({id:l.id,...l.data()})}),a.sort((l,c)=>{const d=l.createdAt?.toDate()||new Date(0);return(c.createdAt?.toDate()||new Date(0))-d}),{success:!0,invitations:a}}catch(e){return console.error("Error getting invitations:",e),{success:!1,error:e.message}}},X4=async(n,e)=>{try{const t=await Md(e);if(!t.success||t.userData.role!=="admin")return{success:!1,error:"Solo administradores pueden cancelar invitaciones"};const i=Qe(de,tl(),n);return await qa(i,{status:"cancelled",cancelledAt:xe(),cancelledBy:e}),{success:!0}}catch(t){return console.error("Error cancelling invitation:",t),{success:!1,error:t.message}}},i4=n=>ZR(n.targetRole),eI=async(n,e={})=>{const t=Qe(de,"artifacts/1:851382130132:web:eaba38fab449f14fb5b241/users",n.uid);try{const i=await Bs(t);if(i.exists())return{success:!0,userData:i.data(),isNewUser:!1};{const a=t4(n.email),l={uid:n.uid,email:n.email,displayName:n.displayName||"",photoURL:n.photoURL||"",role:a,emailVerified:n.emailVerified,combustiblesPermissions:ZR(a),createdAt:new Date().toISOString(),lastLogin:new Date().toISOString(),...e};return await Jy(t,l),{success:!0,userData:l,isNewUser:!0}}}catch(i){return console.error("Error creating/updating user profile:",i),{success:!1,error:i.message}}},sw=async(n,e,t={})=>{const i=Qe(de,"artifacts/1:851382130132:web:eaba38fab449f14fb5b241/users",n.uid);try{const a=await Bs(i);if(a.exists())return{success:!0,userData:a.data(),isNewUser:!1};const l=await JR(e);if(!l.success)return l;const c=l.invitation;if(c.targetEmail!==n.email.toLowerCase())return{success:!1,error:"El código de invitación no corresponde a este email"};const d={uid:n.uid,email:n.email,displayName:n.displayName||c.targetName||"",photoURL:n.photoURL||"",role:c.targetRole,emailVerified:n.emailVerified,combustiblesPermissions:i4(c),invitationUsed:c.id,createdAt:new Date().toISOString(),lastLogin:new Date().toISOString(),...t};return await Jy(i,d),await r4(c.id,n.uid),console.log("👤 Usuario creado con invitación:",{email:n.email,role:c.targetRole,invitationCode:c.code}),{success:!0,userData:d,isNewUser:!0}}catch(a){return console.error("Error creating user profile with invitation:",a),{success:!1,error:a.message}}},Md=async n=>{try{const e=Qe(de,"artifacts/1:851382130132:web:eaba38fab449f14fb5b241/users",n),t=await Bs(e);return t.exists()?{success:!0,userData:t.data()}:{success:!1,error:"Usuario no encontrado"}}catch(e){return console.error("Error fetching user profile:",e),{success:!1,error:e.message}}},Sa={DIESEL:"diesel",GASOLINE:"gasoline",ACPM:"acpm",LUBRICANTS:"lubricants",TWO_STROKE:"two_stroke",MIXED:"mixed"},s4={[Sa.DIESEL]:{name:"Diésel",description:"Combustible para maquinaria pesada",unit:"galones",category:"Combustible",color:"#fbbf24",icon:"🚛",density:.85,priceUnit:"COP/galón"},[Sa.GASOLINE]:{name:"Gasolina",description:"Combustible para vehículos livianos",unit:"galones",category:"Combustible",color:"#ef4444",icon:"⛽",density:.75,priceUnit:"COP/galón"},[Sa.ACPM]:{name:"ACPM",description:"Aceite Combustible Para Motor",unit:"galones",category:"Combustible",color:"#8b5cf6",icon:"🚜",density:.85,priceUnit:"COP/galón"},[Sa.LUBRICANTS]:{name:"Lubricantes",description:"Aceites y lubricantes para mantenimiento",unit:"litros",category:"Mantenimiento",color:"#06b6d4",icon:"🛢️",density:.9,priceUnit:"COP/litro"},[Sa.TWO_STROKE]:{name:"Mezcla 2T",description:"Mezcla para motores de 2 tiempos (motosierras)",unit:"litros",category:"Especializado",color:"#10b981",icon:"🪚",density:.78,priceUnit:"COP/litro"},[Sa.MIXED]:{name:"Mixto",description:"Compatible con múltiples tipos de combustible",unit:"galones",category:"Flexible",color:"#64748b",icon:"🔄",density:.8,priceUnit:"COP/galón"}},un={CRITICAL:"critical",LOW:"low",MEDIUM:"medium",HIGH:"high",FULL:"full"},Ou={[un.CRITICAL]:{label:"Crítico",color:"#dc2626",icon:"🚨",threshold:.1},[un.LOW]:{label:"Bajo",color:"#ea580c",icon:"⚠️",threshold:.25},[un.MEDIUM]:{label:"Medio",color:"#ca8a04",icon:"📊",threshold:.5},[un.HIGH]:{label:"Alto",color:"#16a34a",icon:"✅",threshold:.75},[un.FULL]:{label:"Completo",color:"#059669",icon:"🟢",threshold:1}},g_=(n,e)=>{if(e===0)return un.CRITICAL;const t=n/e;return t<Ou[un.CRITICAL].threshold?un.CRITICAL:t<Ou[un.LOW].threshold?un.LOW:t<Ou[un.MEDIUM].threshold?un.MEDIUM:t<Ou[un.HIGH].threshold?un.HIGH:un.FULL},a4=(n=[])=>Array.isArray(n)?n.reduce((e,t)=>{const i=parseFloat(t.currentStock)||0,a=parseFloat(t.pricePerUnit)||0;return e+i*a},0):0,o4=(n=[],e=null)=>{if(!Array.isArray(n))return e?0:{};if(e)return n.filter(i=>i.fuelType===e).reduce((i,a)=>i+(parseFloat(a.currentStock)||0),0);const t={};return Object.values(Sa).forEach(i=>{t[i]=n.filter(a=>a.fuelType===i).reduce((a,l)=>a+(parseFloat(l.currentStock)||0),0)}),t},l4=(n,e)=>{if(!e||e===0)return 0;const t=(parseFloat(n)||0)/parseFloat(e);return Math.min(Math.max(t*100,0),100)},u4=(n=[],e=.15)=>Array.isArray(n)?n.map(t=>{const i=parseFloat(t.currentStock)||0,a=parseFloat(t.maxCapacity)||0,l=a>0?i/a:0,c=g_(i,a);return{...t,percentage:l*100,stockLevel:c,isLowStock:l<=e,stockInfo:Ou[c]}}).filter(t=>t.isLowStock).sort((t,i)=>t.percentage-i.percentage):[],W4=(n=[])=>{if(!Array.isArray(n))return{totalValue:0,totalItems:0,activeItems:0,lowStockItems:0,criticalItems:0,averageStockLevel:0,stockByType:{}};const e=a4(n),t=n.length,i=n.filter(p=>p.status==="active").length,a=u4(n),l=a.filter(p=>p.stockLevel===un.CRITICAL).length,c=o4(n),d=n.length>0?n.reduce((p,g)=>{const _=l4(g.currentStock,g.maxCapacity);return p+_},0)/n.length:0;return{totalValue:e,totalItems:t,activeItems:i,lowStockItems:a.length,criticalItems:l,averageStockLevel:d,stockByType:c}},Z4=(n,e=[])=>{if(!n||!n.fuelType||!n.quantity)return{isValid:!1,error:"Datos de movimiento incompletos",availableStock:0,requiredStock:0};const{fuelType:t,quantity:i,type:a,sourceLocation:l}=n,c=parseFloat(i)||0;if(a!=="outbound"&&a!=="transfer")return{isValid:!0,message:"Movimiento no requiere validación de stock",availableStock:0,requiredStock:c};const d=e.filter(_=>_.fuelType===t&&_.location?.toLowerCase()===l?.toLowerCase()&&_.status==="active").reduce((_,A)=>_+(parseFloat(A.currentStock)||0),0),p=d>=c,g=d-c;return console.log(`Validación de stock - Tipo: ${t}, Ubicación: ${l}`,{itemsEncontrados:e.filter(_=>_.fuelType===t&&_.location?.toLowerCase()===l?.toLowerCase()&&_.status==="active").length,disponible:d,requerido:c,valido:d>=c}),{isValid:p,availableStock:d,requiredStock:c,remainingStock:g,fuelType:t,location:l,error:p?null:`Stock insuficiente. Disponible: ${d}, Requerido: ${c}`,warning:g<d*.2&&g>=0?"Stock quedará bajo después del movimiento":null}},y_=(n=[],e={})=>{if(!Array.isArray(n))return{totalCost:0,costsByType:{},costsByLocation:{}};let t=0;const i={},a={};return n.forEach(l=>{const c=parseFloat(l.quantity)||0,d=l.fuelType,p=l.sourceLocation||l.location,g=e[d]||parseFloat(l.pricePerUnit)||0,_=c*g;t+=_,i[d]||(i[d]=0),i[d]+=_,p&&(a[p]||(a[p]=0),a[p]+=_)}),{totalCost:t,costsByType:i,costsByLocation:a,averageCostPerMovement:n.length>0?t/n.length:0}},J4=(n=[])=>Array.isArray(n)?{totalMovements:n.length,pendingMovements:n.filter(t=>t.status==="pending").length,completedMovements:n.filter(t=>t.status==="completed").length,cancelledMovements:n.filter(t=>t.status==="cancelled").length,movementsByType:{inbound:n.filter(t=>t.type==="inbound").length,outbound:n.filter(t=>t.type==="outbound").length,transfer:n.filter(t=>t.type==="transfer").length,adjustment:n.filter(t=>t.type==="adjustment").length},totalQuantity:n.reduce((t,i)=>t+(parseFloat(i.quantity)||0),0)}:{totalMovements:0,pendingMovements:0,completedMovements:0,cancelledMovements:0,movementsByType:{},totalQuantity:0},tI=(n,e=[])=>{if(!n)return{averageConsumption:0,totalConsumption:0,movementsCount:0};const t=e.filter(c=>c.vehicleId===n.id&&c.type==="outbound"&&c.status==="completed"),i=t.reduce((c,d)=>c+(parseFloat(d.quantity)||0),0),a=t.length;return{averageConsumption:a>0?i/a:0,totalConsumption:i,movementsCount:a,consumptionByFuelType:t.reduce((c,d)=>{const p=d.fuelType;return c[p]||(c[p]=0),c[p]+=parseFloat(d.quantity)||0,c},{})}},c4=(n,e=[])=>{if(!n)return{efficiency:0,unit:"L/h"};const t=tI(n,e),i=parseFloat(n.hoursWorked)||0;if(i===0||t.totalConsumption===0)return{efficiency:0,unit:"L/h",hoursWorked:i,totalConsumption:t.totalConsumption};const a=t.totalConsumption/i;return{efficiency:a,unit:"L/h",hoursWorked:i,totalConsumption:t.totalConsumption,efficiencyRating:a<10?"Excelente":a<20?"Buena":a<30?"Regular":"Necesita revisión"}},e3=(n,e=[],t={})=>{if(!n)return{totalCost:0,costPerHour:0,costPerMovement:0};const i=e.filter(c=>c.vehicleId===n.id&&c.type==="outbound"&&c.status==="completed"),a=y_(i,t),l=parseFloat(n.hoursWorked)||0;return{totalCost:a.totalCost,costPerHour:l>0?a.totalCost/l:0,costPerMovement:a.averageCostPerMovement,costsByFuelType:a.costsByType,movementsCount:i.length}},t3=(n=[],e=[])=>{if(!Array.isArray(n))return{totalVehicles:0,activeVehicles:0,totalHours:0,totalConsumption:0,averageEfficiency:0,vehiclesByType:{},vehiclesByStatus:{}};const t=n.length,i=n.filter(A=>A.status==="active").length,a=n.reduce((A,T)=>A+(parseFloat(T.hoursWorked)||0),0);let l=0,c=0,d=0;n.forEach(A=>{const T=tI(A,e),N=c4(A,e);l+=T.totalConsumption,N.efficiency>0&&(c+=N.efficiency,d++)});const p=d>0?c/d:0,g=n.reduce((A,T)=>{const N=T.type||"unknown";return A[N]=(A[N]||0)+1,A},{}),_=n.reduce((A,T)=>{const N=T.status||"unknown";return A[N]=(A[N]||0)+1,A},{});return{totalVehicles:t,activeVehicles:i,totalHours:a,totalConsumption:l,averageEfficiency:p,vehiclesByType:g,vehiclesByStatus:_}},n3=(n=[],e={},t={})=>{if(!Array.isArray(n))return{totalValue:0,movementsInPeriod:0};const{start:i,end:a}=e;let l=n;(i||a)&&(l=n.filter(d=>{const p=new Date(d.createdAt||d.date),g=i?new Date(i):new Date(0),_=a?new Date(a):new Date;return p>=g&&p<=_}));const c=y_(l,t);return{totalValue:c.totalCost,movementsInPeriod:l.length,averageValuePerMovement:c.averageCostPerMovement,valueByType:c.costsByType,valueByLocation:c.costsByLocation}},r3=(n=[],e,t={})=>{if(!Array.isArray(n)||!e)return{totalCost:0,movementsCount:0};const i=n.filter(l=>l.sourceLocation===e||l.targetLocation===e||l.location===e),a=y_(i,t);return{location:e,totalCost:a.totalCost,movementsCount:i.length,averageCostPerMovement:a.averageCostPerMovement,costsByType:a.costsByType}},i3=(n=[],e=30)=>{if(!Array.isArray(n)||n.length===0)return{projectedConsumption:{},recommendedPurchases:{},confidence:0};const t=n.filter(A=>A.type==="outbound"&&A.status==="completed");if(t.length===0)return{projectedConsumption:{},recommendedPurchases:{},confidence:0};const i=t.map(A=>new Date(A.createdAt||A.date)),a=new Date(Math.min(...i)),l=new Date(Math.max(...i)),c=Math.max(1,(l-a)/(1e3*60*60*24)),d=t.reduce((A,T)=>{const N=T.fuelType;return A[N]||(A[N]=0),A[N]+=parseFloat(T.quantity)||0,A},{}),p={},g={};Object.entries(d).forEach(([A,T])=>{const N=T/c,O=N*e;p[A]={dailyAverage:N,projectedTotal:O,projectionDays:e,historicalTotal:T,historicalDays:c},g[A]=Math.ceil(O*1.2)});const _=Math.min(100,t.length/10*100);return{projectedConsumption:p,recommendedPurchases:g,confidence:_,dataPoints:t.length,projectionDays:e}},s3=n=>typeof n!="number"||isNaN(n)?"$0":new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0,maximumFractionDigits:0}).format(n),a3=(n,e=2)=>typeof n!="number"||isNaN(n)?"0":new Intl.NumberFormat("es-CO",{minimumFractionDigits:e,maximumFractionDigits:e}).format(n),o3=(n,e=1)=>typeof n!="number"||isNaN(n)?"0%":`${(n*100).toFixed(e)}%`,ic=(n,e,t=2)=>{const i=parseFloat(n)||0,a=parseFloat(e)||0;return parseFloat((i+a).toFixed(t))},sc=(n,e,t=2)=>{const i=parseFloat(n)||0,a=parseFloat(e)||0;return parseFloat((i-a).toFixed(t))},nl=(n,e=2)=>{const t=parseFloat(n)||0;return parseFloat(t.toFixed(e))},Fg=["principal","bodega austria","bodega ilusion","campo operativo","estación móvil"],l3=["bodega austria","bodega ilusion"],u3=n=>n?n.split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" "):"",ja="combustibles_movements",tr="combustibles_inventory",dt={ENTRADA:"entrada",SALIDA:"salida",TRANSFERENCIA:"transferencia",AJUSTE:"ajuste"},ac={PENDIENTE:"pendiente",COMPLETADO:"completado",CANCELADO:"cancelado"},h4=async n=>{try{y4(n);const e={...n,createdAt:xe(),updatedAt:xe(),status:ac.COMPLETADO,approvedAt:xe(),totalValue:rI(n),effectiveDate:n.effectiveDate||xe()},t=await Cc(de,async i=>{const a=Qe(He(de,ja));return i.set(a,e),await iI(i,e,a.id),a.id});return console.log("✅ Movimiento creado exitosamente:",t),t}catch(e){throw console.error("❌ Error al crear movimiento:",e),new Error(`Error al crear movimiento: ${e.message}`)}},nI=async(n={})=>{try{let e=He(de,ja);n.type&&(e=De(e,Le("type","==",n.type))),n.status&&(e=De(e,Le("status","==",n.status))),n.fuelType&&(e=De(e,Le("fuelType","==",n.fuelType))),n.vehicleId&&(e=De(e,Le("vehicleId","==",n.vehicleId))),e=De(e,Vi("createdAt","desc"));const t=await Rt(e),i=[];return t.forEach(a=>{i.push({id:a.id,...a.data(),createdAt:a.data().createdAt?.toDate?.()||a.data().createdAt,updatedAt:a.data().updatedAt?.toDate?.()||a.data().updatedAt,effectiveDate:a.data().effectiveDate?.toDate?.()||a.data().effectiveDate})}),i}catch(e){throw console.error("❌ Error al obtener movimientos:",e),new Error(`Error al obtener movimientos: ${e.message}`)}},__=async n=>{try{if(!n)throw new Error("ID de movimiento requerido");const e=Qe(de,ja,n),t=await Bs(e);return t.exists()?{id:t.id,...t.data(),createdAt:t.data().createdAt?.toDate?.()||t.data().createdAt,updatedAt:t.data().updatedAt?.toDate?.()||t.data().updatedAt,effectiveDate:t.data().effectiveDate?.toDate?.()||t.data().effectiveDate}:null}catch(e){throw console.error("❌ Error al obtener movimiento:",e),new Error(`Error al obtener movimiento: ${e.message}`)}},f4=async(n,e)=>{try{if(!n)throw new Error("ID de movimiento requerido");const t={...e,updatedAt:xe(),...e.quantity||e.unitPrice?{totalValue:rI(e)}:{}},i=Qe(de,ja,n);await qa(i,t),console.log("✅ Movimiento actualizado exitosamente")}catch(t){throw console.error("❌ Error al actualizar movimiento:",t),new Error(`Error al actualizar movimiento: ${t.message}`)}},d4=async n=>{try{if(!n)throw new Error("ID de movimiento requerido");const e=await __(n);if(!e)throw new Error("Movimiento no encontrado");await Cc(de,async t=>{const i=Qe(de,ja,n);e.status===ac.COMPLETADO&&await _4(t,e),t.delete(i)}),console.log("✅ Movimiento eliminado y cambios de inventario revertidos exitosamente")}catch(e){throw console.error("❌ Error al eliminar movimiento:",e),new Error(`Error al eliminar movimiento: ${e.message}`)}},p4=(n,e={})=>{try{let t=He(de,ja);return e.type&&(t=De(t,Le("type","==",e.type))),e.status&&(t=De(t,Le("status","==",e.status))),t=De(t,Vi("createdAt","desc")),Ic(t,i=>{const a=[];i.forEach(l=>{a.push({id:l.id,...l.data(),createdAt:l.data().createdAt?.toDate?.()||l.data().createdAt,updatedAt:l.data().updatedAt?.toDate?.()||l.data().updatedAt,effectiveDate:l.data().effectiveDate?.toDate?.()||l.data().effectiveDate})}),n(a)},i=>{console.error("❌ Error en suscripción de movimientos:",i),n([],i)})}catch(t){throw console.error("❌ Error al configurar suscripción:",t),new Error(`Error en suscripción: ${t.message}`)}},m4=async n=>{try{const e=await __(n);if(!e)throw new Error("Movimiento no encontrado");if(e.status!==ac.PENDIENTE)throw new Error("Solo se pueden aprobar movimientos pendientes");await Cc(de,async t=>{const i=Qe(de,ja,n);t.update(i,{status:ac.COMPLETADO,approvedAt:xe(),updatedAt:xe()}),await iI(t,e,n)}),console.log("✅ Movimiento aprobado exitosamente")}catch(e){throw console.error("❌ Error al aprobar movimiento:",e),new Error(`Error al aprobar movimiento: ${e.message}`)}},g4=async(n={})=>{try{const e=await nI(n),t={totalMovements:e.length,byType:{},byStatus:{},byFuelType:{},totalValue:0,totalQuantity:0,averageValue:0,thisMonth:0,lastMonth:0,thisWeek:0},i=new Date,a=new Date(i.getFullYear(),i.getMonth(),1),l=new Date(i.getFullYear(),i.getMonth()-1,1),c=new Date(i.setDate(i.getDate()-i.getDay()));return e.forEach(d=>{t.byType[d.type]=(t.byType[d.type]||0)+1,t.byStatus[d.status]=(t.byStatus[d.status]||0)+1,t.byFuelType[d.fuelType]=(t.byFuelType[d.fuelType]||0)+1,t.totalValue+=d.totalValue||0,t.totalQuantity+=d.quantity||0;const p=new Date(d.createdAt);p>=a&&t.thisMonth++,p>=l&&p<a&&t.lastMonth++,p>=c&&t.thisWeek++}),t.averageValue=t.totalMovements>0?t.totalValue/t.totalMovements:0,t}catch(e){throw console.error("❌ Error al calcular estadísticas:",e),new Error(`Error al calcular estadísticas: ${e.message}`)}},aw=n=>n?Fg.includes(n.toLowerCase()):!1,y4=n=>{const e=["type","fuelType","quantity","unitPrice"];for(const t of e)if(!n[t])throw new Error(`Campo requerido: ${t}`);if(!Object.values(dt).includes(n.type))throw new Error("Tipo de movimiento inválido");if(n.quantity<=0)throw new Error("La cantidad debe ser mayor a cero");if(n.unitPrice<0)throw new Error("El precio unitario no puede ser negativo");if(n.type===dt.SALIDA&&!n.vehicleId)throw new Error("Las salidas deben tener un vehículo asociado");if(n.type===dt.TRANSFERENCIA&&!n.destinationLocation)throw new Error("Las transferencias deben tener una ubicación destino");if(n.type===dt.ENTRADA){if(!n.supplierName)throw new Error("Las entradas deben tener un proveedor");if(!n.destinationLocation)throw new Error("Las entradas deben tener una ubicación destino")}if(n.type!==dt.ENTRADA&&n.location&&!aw(n.location))throw new Error(`Ubicación origen inválida: ${n.location}. Ubicaciones válidas: ${Fg.join(", ")}`);if(n.destinationLocation&&!aw(n.destinationLocation))throw new Error(`Ubicación destino inválida: ${n.destinationLocation}. Ubicaciones válidas: ${Fg.join(", ")}`);if(n.type===dt.TRANSFERENCIA){const t=(n.location||"principal").toLowerCase(),i=n.destinationLocation.toLowerCase();if(t===i)throw new Error("La ubicación origen y destino no pueden ser la misma en una transferencia")}},rI=n=>(n.quantity||0)*(n.unitPrice||0),iI=async(n,e,t)=>{try{let i=e.location||"principal";e.type===dt.ENTRADA&&(i=e.destinationLocation||"principal");const a=De(He(de,tr),Le("fuelType","==",e.fuelType),Le("location","==",i)),l=await Rt(a);if(l.empty){if(e.type!==dt.ENTRADA)throw new Error(`No se encontró inventario para ${e.fuelType} en ${i} para realizar un movimiento de ${e.type}.`);console.log(`📦 Creando inventario automático para ${e.fuelType} en ${i}`);const c=Qe(He(de,tr)),d={fuelType:e.fuelType,location:i,name:e.fuelType,maxCapacity:1e4,currentStock:nl(e.quantity,2),minThreshold:1500,pricePerUnit:e.unitPrice||0,createdAt:xe(),updatedAt:xe(),status:"active",lastMovement:{movementId:t,type:e.type,quantity:e.quantity,date:xe()}};n.set(c,d)}else{const c=l.docs[0],d=c.data(),p=Qe(de,tr,c.id);let g=d.currentStock;switch(e.type){case dt.ENTRADA:g=ic(g,e.quantity);break;case dt.SALIDA:if(g=sc(g,e.quantity),g<0)throw new Error("Stock insuficiente para realizar la salida");break;case dt.AJUSTE:g=ic(g,e.quantity),g<0&&(g=0);break;case dt.TRANSFERENCIA:if(g=sc(g,e.quantity),g<0)throw new Error("Stock insuficiente para realizar la transferencia");await v4(n,e,t);break}g=nl(g,2),n.update(p,{currentStock:g,lastMovement:{movementId:t,type:e.type,quantity:e.quantity,date:xe()},updatedAt:xe()})}e.type===dt.SALIDA&&e.vehicleId&&e.currentHours&&await lw(n,e.vehicleId,e.currentHours),e.type===dt.SALIDA&&e.vehicleId&&e.currentHours&&await lw(n,e.vehicleId,e.currentHours)}catch(i){throw console.error("❌ Error al actualizar inventario:",i),i}},_4=async(n,e)=>{try{console.log("🔄 Revirtiendo cambios de inventario para movimiento:",e.id);let t;switch(e.type){case dt.ENTRADA:t=e.destinationLocation||"principal";break;case dt.SALIDA:case dt.AJUSTE:t=e.location||"principal";break;case dt.TRANSFERENCIA:t=e.location||"principal";break;default:t=e.location||e.destinationLocation||"principal"}console.log(`🔍 Buscando inventario: ${e.fuelType} en ${t}`);const i=De(He(de,tr),Le("fuelType","==",e.fuelType),Le("location","==",t)),a=await Rt(i);if(a.empty){console.warn(`⚠️ No se encontró inventario para ${e.fuelType} en ${t}`);const p=De(He(de,tr),Le("fuelType","==",e.fuelType)),g=await Rt(p);if(g.empty)throw console.error(`❌ No existe inventario para ${e.fuelType} en ninguna ubicación`),new Error(`No se puede revertir: no existe inventario para ${e.fuelType} en ninguna ubicación. Movimiento huérfano detectado.`);console.log(`🔄 Usando inventario fallback en ${g.docs[0].data().location}`);const _=g.docs[0],A=_.data(),T=Qe(de,tr,_.id);await ow(n,T,A,e);return}const l=a.docs[0],c=l.data(),d=Qe(de,tr,l.id);await ow(n,d,c,e)}catch(t){throw console.error("❌ Error al revertir cambios de inventario:",t),new Error(`Error al revertir inventario: ${t.message}`)}},ow=async(n,e,t,i)=>{try{let a=t.currentStock;switch(i.type){case dt.ENTRADA:a=sc(a,i.quantity),a<0&&(console.warn("⚠️ Advertencia: La reversión resulta en stock negativo, ajustando a 0"),a=0);break;case dt.SALIDA:a=ic(a,i.quantity);break;case dt.AJUSTE:a=sc(a,i.quantity),a<0&&(console.warn("⚠️ Advertencia: La reversión de ajuste resulta en stock negativo, ajustando a 0"),a=0);break;case dt.TRANSFERENCIA:a=ic(a,i.quantity),await E4(n,i);break;default:throw new Error(`Tipo de movimiento no soportado para reversión: ${i.type}`)}a=nl(a,2),n.update(e,{currentStock:a,lastMovement:{movementId:null,type:"reversion",quantity:i.quantity,originalType:i.type,date:xe(),note:`Reversión de movimiento ${i.id} - Ubicación original: ${i.location||i.destinationLocation||"no especificada"}`},updatedAt:xe()}),console.log(`✅ Inventario revertido exitosamente. Stock anterior: ${t.currentStock}, Nuevo stock: ${a}`)}catch(a){throw console.error("❌ Error en procesamiento de reversión:",a),a}},v4=async(n,e,t)=>{try{if(!e.destinationLocation)throw new Error("Ubicación destino requerida para transferencias");console.log(`🔄 Transfiriendo ${e.quantity} ${e.fuelType} a ${e.destinationLocation}`);const i=De(He(de,tr),Le("fuelType","==",e.fuelType),Le("location","==",e.destinationLocation)),a=await Rt(i);if(a.empty){console.log(`📦 Creando inventario automático en destino: ${e.fuelType} en ${e.destinationLocation}`);const l=Qe(He(de,tr)),c={fuelType:e.fuelType,location:e.destinationLocation,name:e.fuelType,maxCapacity:1e4,currentStock:nl(e.quantity,2),minThreshold:1500,pricePerUnit:e.unitPrice||0,createdAt:xe(),updatedAt:xe(),status:"active",lastMovement:{movementId:t,type:"transferencia_entrada",quantity:e.quantity,date:xe(),originLocation:e.location}};n.set(l,c)}else{const l=a.docs[0],c=l.data(),d=Qe(de,tr,l.id),p=nl(ic(c.currentStock,e.quantity),2);n.update(d,{currentStock:p,lastMovement:{movementId:t,type:"transferencia_entrada",quantity:e.quantity,date:xe(),originLocation:e.location},updatedAt:xe()})}console.log("✅ Transferencia al destino completada exitosamente")}catch(i){throw console.error("❌ Error al transferir a destino:",i),new Error(`Error en transferencia a destino: ${i.message}`)}},E4=async(n,e)=>{try{if(!e.destinationLocation){console.warn("⚠️ No hay ubicación destino para revertir");return}console.log(`🔄 Revirtiendo transferencia en destino: ${e.destinationLocation}`);const t=De(He(de,tr),Le("fuelType","==",e.fuelType),Le("location","==",e.destinationLocation)),i=await Rt(t);if(i.empty){console.warn(`⚠️ No se encontró inventario destino para revertir: ${e.fuelType} en ${e.destinationLocation}`);return}const a=i.docs[0],l=a.data(),c=Qe(de,tr,a.id);let d=sc(l.currentStock,e.quantity);d<0&&(console.warn("⚠️ Advertencia: La reversión en destino resulta en stock negativo, ajustando a 0"),d=0),d=nl(d,2),n.update(c,{currentStock:d,lastMovement:{movementId:null,type:"reversion_transferencia",quantity:e.quantity,date:xe(),note:`Reversión de transferencia desde ${e.location}`},updatedAt:xe()}),console.log("✅ Reversión en destino completada exitosamente")}catch(t){throw console.error("❌ Error al revertir transferencia en destino:",t),new Error(`Error al revertir destino: ${t.message}`)}},lw=async(n,e,t)=>{try{console.log(`🕒 Actualizando horómetro del vehículo ${e} a ${t} horas`);const i=De(He(de,"combustibles_vehicles"),Le("vehicleId","==",e)),a=await Rt(i);if(a.empty){console.warn(`⚠️ Vehículo ${e} no encontrado para actualizar horómetro`);return}const l=a.docs[0],c=l.data(),d=Qe(de,"combustibles_vehicles",l.id),p=parseFloat(c.currentHours)||0,g=parseFloat(t);g<p&&console.warn(`⚠️ Nueva lectura horómetro (${g}) menor a la anterior (${p}). Actualizando de todas formas.`);const _=c.hourMeterHistory||[];_.push({previousHours:p,newHours:g,difference:g-p,updatedAt:new Date,updatedBy:"movement_service",source:"fuel_consumption"}),n.update(d,{currentHours:g,hourMeterHistory:_,lastHourMeterUpdate:xe(),updatedAt:xe()}),console.log(`✅ Horómetro actualizado: ${e} - ${p}h → ${g}h`)}catch(i){console.error("❌ Error al actualizar horómetro del vehículo:",i),console.warn("⚠️ Continuando con el movimiento sin actualización de horómetro")}},uw={createMovement:h4,getAllMovements:nI,getMovement:__,updateMovement:f4,deleteMovement:d4,subscribeToMovements:p4,approveMovement:m4,getMovementsStats:g4,MOVEMENT_TYPES:dt,MOVEMENT_STATUS:ac},rl="combustibles_inventory",c3=async(n,e)=>{try{const t=s4[n.fuelType];if(!t)return{success:!1,error:"Tipo de combustible no válido"};const i=De(He(de,rl),Le("fuelType","==",n.fuelType),Le("location","==",n.location.toLowerCase()));if(!(await Rt(i)).empty)return{success:!1,error:`Ya existe ${t.name} en ${n.location}`};const l={fuelType:n.fuelType,name:t.name,description:n.description||t.description,currentStock:Number(n.currentStock)||0,maxCapacity:Number(n.maxCapacity),minThreshold:Number(n.minThreshold)||n.maxCapacity*.15,unit:t.unit,location:n.location.toLowerCase(),pricePerUnit:Number(n.pricePerUnit)||0,supplier:n.supplier||"",status:n.status||"active",createdAt:new Date,createdBy:e,lastUpdated:new Date,updatedBy:e};return{success:!0,data:{id:(await e_(He(de,rl),l)).id,...l},message:`${t.name} agregado al inventario exitosamente`}}catch(t){return console.error("Error creating inventory item:",t),{success:!1,error:t.message}}},T4=async()=>{try{const n=De(He(de,rl),Vi("fuelType","asc")),e=await Rt(n),t=[];return e.forEach(i=>{const a=i.data();t.push({id:i.id,...a,stockLevel:g_(a.currentStock,a.maxCapacity),stockPercentage:Math.round(a.currentStock/a.maxCapacity*100),needsRestock:a.currentStock<=a.minThreshold})}),{success:!0,data:t}}catch(n){return console.error("Error fetching inventory items:",n),{success:!1,error:n.message}}},h3=async(n,e,t)=>{try{const i=Qe(de,rl,n);if(!(await Bs(i)).exists())return{success:!1,error:"Item no encontrado"};const l={...e,lastUpdated:new Date,updatedBy:t};return delete l.id,delete l.createdAt,delete l.createdBy,await qa(i,l),{success:!0,message:"Item actualizado exitosamente",data:{id:n,...l}}}catch(i){return console.error("Error updating inventory item:",i),{success:!1,error:i.message}}},f3=async n=>{try{const e=Qe(de,rl,n);return(await Bs(e)).exists()?(await QS(e),{success:!0,message:"Item eliminado exitosamente"}):{success:!1,error:"Item no encontrado"}}catch(e){return console.error("Error deleting inventory item:",e),{success:!1,error:e.message}}},A4=n=>{const e=De(He(de,rl),Vi("fuelType","asc"));return Ic(e,t=>{const i=[];t.forEach(a=>{const l=a.data();i.push({id:a.id,...l,stockLevel:g_(l.currentStock,l.maxCapacity),stockPercentage:Math.round(l.currentStock/l.maxCapacity*100),needsRestock:l.currentStock<=l.minThreshold})}),n(i)},t=>{console.error("Error in inventory subscription:",t),n(null,t)})},d3=async()=>{try{const n=await T4();if(!n.success)return n;const e=n.data,t={totalItems:e.length,activeItems:e.filter(i=>i.status==="active").length,lowStockItems:e.filter(i=>i.needsRestock).length,totalValue:e.reduce((i,a)=>i+a.currentStock*a.pricePerUnit,0),averageStockLevel:e.length>0?Math.round(e.reduce((i,a)=>i+a.stockPercentage,0)/e.length):0,byFuelType:{}};return e.forEach(i=>{t.byFuelType[i.fuelType]||(t.byFuelType[i.fuelType]={count:0,totalStock:0,totalCapacity:0,totalValue:0}),t.byFuelType[i.fuelType].count++,t.byFuelType[i.fuelType].totalStock+=i.currentStock,t.byFuelType[i.fuelType].totalCapacity+=i.maxCapacity,t.byFuelType[i.fuelType].totalValue+=i.currentStock*i.pricePerUnit}),{success:!0,data:t}}catch(n){return console.error("Error calculating inventory stats:",n),{success:!1,error:n.message}}},qg=[{id:"maquinaria_pesada",name:"Maquinaria Pesada",description:"Excavadoras, bulldozers, cargadores, grúas",icon:"🏗️",color:"#FF6B35",fuelTypes:["Diesel","ACPM"],fields:["enginePower","operatingWeight","bucketCapacity"]},{id:"transporte",name:"Transporte",description:"Camiones, camionetas, volquetas",icon:"🚛",color:"#2E86AB",fuelTypes:["Diesel","ACPM","Gasolina"],fields:["plateNumber","loadCapacity","enginePower"]},{id:"herramientas_motorizadas",name:"Herramientas Motorizadas",description:"Motosierras, guadañas, fumigadoras",icon:"🔧",color:"#A23B72",fuelTypes:["Gasolina","Mixto"],fields:["enginePower","weight"]},{id:"equipos_bombeo",name:"Equipos de Bombeo",description:"Motobombas, hidrolavadoras, plantas eléctricas",icon:"💧",color:"#F18F01",fuelTypes:["Diesel","Gasolina"],fields:["flow","pressure","enginePower"]},{id:"vehiculos_ligeros",name:"Vehículos Ligeros",description:"Motocicletas, cuatrimotos, vehículos de apoyo",icon:"🏍️",color:"#C73E1D",fuelTypes:["Gasolina"],fields:["plateNumber","enginePower"]},{id:"agricola",name:"Agrícola/Forestal",description:"Tractores, asperjadoras, equipos forestales",icon:"🚜",color:"#2F7D32",fuelTypes:["Diesel","ACPM"],fields:["enginePower","hasHourMeter","implementType"]},{id:"otros",name:"Otros",description:"Equipos especializados y otros vehículos",icon:"⚙️",color:"#616161",fuelTypes:["Diesel","Gasolina","ACPM","Mixto"],fields:["enginePower"]}],Dc={ACTIVO:"activo",MANTENIMIENTO:"mantenimiento",INACTIVO:"inactivo",REPARACION:"reparacion",FUERA_DE_SERVICIO:"fuera_de_servicio"},w4={DIESEL:"Diesel",GASOLINA:"Gasolina",ACPM:"ACPM",MIXTO:"Mixto"},p3=[{key:"plateNumber",label:"Número de Placa",type:"text",icon:"🏷️"},{key:"enginePower",label:"Potencia del Motor (HP)",type:"number",icon:"⚡"},{key:"fuelCapacity",label:"Capacidad de Combustible (Litros)",type:"number",icon:"⛽"},{key:"operatingWeight",label:"Peso Operativo (Toneladas)",type:"number",icon:"⚖️"},{key:"loadCapacity",label:"Capacidad de Carga (Toneladas)",type:"number",icon:"📦"},{key:"bucketCapacity",label:"Capacidad de Balde (m³)",type:"number",icon:"🪣"},{key:"hasHourMeter",label:"Tiene Horómetro",type:"boolean",icon:"⏰"},{key:"currentHours",label:"Horas Actuales",type:"number",icon:"🕐",dependsOn:"hasHourMeter"},{key:"implementType",label:"Tipo de Implemento",type:"text",icon:"🔧"},{key:"flow",label:"Caudal (L/min)",type:"number",icon:"💧"},{key:"pressure",label:"Presión (PSI)",type:"number",icon:"💨"},{key:"weight",label:"Peso (Kg)",type:"number",icon:"⚖️"}],m3=(n,e=[])=>{const t=e.find(i=>i.id===n);return t||qg.find(i=>i.id===n)||null},g3=(n=[])=>{const e=qg.map(i=>i.id),t=n.filter(i=>!e.includes(i.id));return[...qg,...t]},y3=n=>{const e=[];return(!n.id||typeof n.id!="string")&&e.push("ID de categoría requerido y debe ser texto"),(!n.name||typeof n.name!="string")&&e.push("Nombre de categoría requerido y debe ser texto"),n.name&&n.name.length<2&&e.push("Nombre debe tener al menos 2 caracteres"),n.fuelTypes&&!Array.isArray(n.fuelTypes)&&e.push("Tipos de combustible debe ser un array"),n.fields&&!Array.isArray(n.fields)&&e.push("Campos debe ser un array"),{isValid:e.length===0,errors:e}},_3=(n,e=[])=>{const t=n.toLowerCase().replace(/[^a-z0-9]/g,"_").replace(/_+/g,"_").replace(/^_|_$/g,"");let i=t,a=1;for(;e.some(l=>l.id===i);)i=`${t}_${a}`,a++;return i},yr="combustibles_vehicles",b4="combustibles_movements",Na={DIESEL:"Diesel",GASOLINA:"Gasolina",ACPM:"ACPM",MIXTO:"Mixto"},sI=async n=>{try{if(S4(n),await zs(n.vehicleId))throw new Error(`El código de vehículo '${n.vehicleId}' ya existe`);const t={...n,createdAt:xe(),updatedAt:xe(),status:n.status||Dc.ACTIVO,totalFuelConsumed:0,totalHoursWorked:0,totalMovements:0,lastMovementDate:null,estimatedConsumptionPerHour:pI(n)},i=await e_(He(de,yr),t);return console.log("✅ Vehículo creado exitosamente:",i.id),i.id}catch(e){throw console.error("❌ Error al crear vehículo:",e),new Error(`Error al crear vehículo: ${e.message}`)}},v_=async(n={})=>{try{let e=He(de,yr);n.type&&(e=De(e,Le("type","==",n.type))),n.status&&(e=De(e,Le("status","==",n.status))),n.fuelType&&(e=De(e,Le("fuelType","==",n.fuelType))),n.location&&(e=De(e,Le("currentLocation","==",n.location))),e=De(e,Vi("vehicleId","asc"));const t=await Rt(e),i=[];return t.forEach(a=>{i.push({id:a.id,...a.data(),createdAt:a.data().createdAt?.toDate?.()||a.data().createdAt,updatedAt:a.data().updatedAt?.toDate?.()||a.data().updatedAt,lastMovementDate:a.data().lastMovementDate?.toDate?.()||a.data().lastMovementDate,lastMaintenanceDate:a.data().lastMaintenanceDate?.toDate?.()||a.data().lastMaintenanceDate})}),i}catch(e){throw console.error("❌ Error al obtener vehículos:",e),new Error(`Error al obtener vehículos: ${e.message}`)}},E_=async n=>{try{if(!n)throw new Error("ID de vehículo requerido");const e=Qe(de,yr,n),t=await Bs(e);return t.exists()?{id:t.id,...t.data(),createdAt:t.data().createdAt?.toDate?.()||t.data().createdAt,updatedAt:t.data().updatedAt?.toDate?.()||t.data().updatedAt,lastMovementDate:t.data().lastMovementDate?.toDate?.()||t.data().lastMovementDate,lastMaintenanceDate:t.data().lastMaintenanceDate?.toDate?.()||t.data().lastMaintenanceDate}:null}catch(e){throw console.error("❌ Error al obtener vehículo:",e),new Error(`Error al obtener vehículo: ${e.message}`)}},zs=async n=>{try{const e=De(He(de,yr),Le("vehicleId","==",n)),t=await Rt(e);if(t.empty)return null;const i=t.docs[0];return{id:i.id,...i.data(),createdAt:i.data().createdAt?.toDate?.()||i.data().createdAt,updatedAt:i.data().updatedAt?.toDate?.()||i.data().updatedAt,lastMovementDate:i.data().lastMovementDate?.toDate?.()||i.data().lastMovementDate,lastMaintenanceDate:i.data().lastMaintenanceDate?.toDate?.()||i.data().lastMaintenanceDate}}catch(e){throw console.error("❌ Error al buscar vehículo por código:",e),new Error(`Error al buscar vehículo: ${e.message}`)}},T_=async(n,e)=>{try{if(!n)throw new Error("ID de vehículo requerido");if(e.vehicleId){const a=await zs(e.vehicleId);if(a&&a.id!==n)throw new Error(`El código de vehículo '${e.vehicleId}' ya existe`)}const t={...e,updatedAt:xe(),...e.enginePower||e.type?{estimatedConsumptionPerHour:pI(e)}:{}},i=Qe(de,yr,n);await qa(i,t),console.log("✅ Vehículo actualizado exitosamente")}catch(t){throw console.error("❌ Error al actualizar vehículo:",t),new Error(`Error al actualizar vehículo: ${t.message}`)}},aI=async n=>{try{if(!n)throw new Error("ID de vehículo requerido");if((await w_(n,{limit:1})).length>0)throw new Error("No se puede eliminar un vehículo con movimientos asociados. Cambie el estado a inactivo en su lugar.");await QS(Qe(de,yr,n)),console.log("✅ Vehículo eliminado exitosamente")}catch(e){throw console.error("❌ Error al eliminar vehículo:",e),new Error(`Error al eliminar vehículo: ${e.message}`)}},A_=(n,e={})=>{try{let t=He(de,yr);const i=[];e.category&&i.push(Le("category","==",e.category)),e.status&&i.push(Le("status","==",e.status)),e.fuelType&&i.push(Le("fuelType","==",e.fuelType)),e.currentLocation&&i.push(Le("currentLocation","==",e.currentLocation)),i.forEach(l=>{t=De(t,l)}),t=De(t,Vi("updatedAt","desc"));let a=null;return Ic(t,l=>{const c=Date.now();if(a&&c-a<500)return;a=c;const d=[],p={added:[],modified:[],removed:[]};l.docChanges().forEach(g=>{const _={id:g.doc.id,...g.doc.data(),createdAt:g.doc.data().createdAt?.toDate?.()||g.doc.data().createdAt,updatedAt:g.doc.data().updatedAt?.toDate?.()||g.doc.data().updatedAt,lastMovementDate:g.doc.data().lastMovementDate?.toDate?.()||g.doc.data().lastMovementDate,lastMaintenanceDate:g.doc.data().lastMaintenanceDate?.toDate?.()||g.doc.data().lastMaintenanceDate,lastHourMeterDate:g.doc.data().lastHourMeterDate?.toDate?.()||g.doc.data().lastHourMeterDate};g.type==="added"?p.added.push(_):g.type==="modified"?p.modified.push(_):g.type==="removed"&&p.removed.push({id:g.doc.id})}),l.forEach(g=>{d.push({id:g.id,...g.data(),createdAt:g.data().createdAt?.toDate?.()||g.data().createdAt,updatedAt:g.data().updatedAt?.toDate?.()||g.data().updatedAt,lastMovementDate:g.data().lastMovementDate?.toDate?.()||g.data().lastMovementDate,lastMaintenanceDate:g.data().lastMaintenanceDate?.toDate?.()||g.data().lastMaintenanceDate,lastHourMeterDate:g.data().lastHourMeterDate?.toDate?.()||g.data().lastHourMeterDate})}),n(d,null,p)},l=>{console.error("❌ Error en suscripción de vehículos:",l),n([],l)})}catch(t){throw console.error("❌ Error al configurar suscripción:",t),new Error(`Error en suscripción: ${t.message}`)}},oI=(n,e={})=>{try{let t=He(de,yr);return e.status&&(t=De(t,Le("status","==",e.status))),Ic(t,i=>{const a={total:0,byStatus:{},byCategory:{},byFuelType:{},totalFuelConsumed:0,totalHoursWorked:0,activeCount:0};i.forEach(l=>{const c=l.data();a.total++;const d=c.status||"unknown";a.byStatus[d]=(a.byStatus[d]||0)+1,d==="activo"&&a.activeCount++;const p=c.category||"sin_categoria";a.byCategory[p]=(a.byCategory[p]||0)+1;const g=c.fuelType||"unknown";a.byFuelType[g]=(a.byFuelType[g]||0)+1,a.totalFuelConsumed+=c.totalFuelConsumed||0,a.totalHoursWorked+=c.totalHoursWorked||0}),n(a)},i=>{console.error("❌ Error en suscripción de estadísticas:",i),n(null,i)})}catch(t){return console.error("❌ Error al configurar suscripción de estadísticas:",t),()=>{}}},w_=async(n,e={})=>{try{let t=De(He(de,b4),Le("vehicleId","==",n));t=De(t,Vi("createdAt","desc")),e.limit&&(t=De(t,Pk(e.limit)));const i=await Rt(t),a=[];return i.forEach(l=>{a.push({id:l.id,...l.data(),createdAt:l.data().createdAt?.toDate?.()||l.data().createdAt,updatedAt:l.data().updatedAt?.toDate?.()||l.data().updatedAt})}),a}catch(t){throw console.error("❌ Error al obtener movimientos del vehículo:",t),new Error(`Error al obtener movimientos: ${t.message}`)}},lI=async(n,e)=>{try{const t=await zs(n);if(!t){console.warn(`Vehículo ${n} no encontrado para actualizar métricas`);return}await Cc(de,async i=>{const a=Qe(de,yr,t.id),l=(t.totalFuelConsumed||0)+e.quantity,c=(t.totalMovements||0)+1;i.update(a,{totalFuelConsumed:l,totalMovements:c,lastMovementDate:xe(),...t.totalHoursWorked>0?{actualConsumptionPerHour:l/t.totalHoursWorked}:{},updatedAt:xe()})}),console.log(`✅ Métricas del vehículo ${n} actualizadas`)}catch(t){console.error("❌ Error al actualizar métricas del vehículo:",t)}},uI=async(n,e,t="")=>{try{const i=await zs(n);if(!i)throw new Error(`Vehículo ${n} no encontrado`);if(!i.hasHourMeter)throw new Error(`El vehículo ${n} no tiene sistema de horómetro`);const a=i.currentHours||0;if(e<a)throw new Error(`La nueva lectura (${e}h) no puede ser menor a la actual (${a}h)`);const l=e-a;await Cc(de,async c=>{const d=Qe(de,yr,i.id),p=i.hourMeterHistory||[];p.push({previousReading:a,newReading:e,hoursWorked:l,date:xe(),notes:t,registeredBy:"system"}),c.update(d,{currentHours:e,lastHourMeterReading:e,lastHourMeterDate:xe(),totalHoursWorked:(i.totalHoursWorked||0)+l,hourMeterHistory:p,...i.totalFuelConsumed>0?{actualConsumptionPerHour:i.totalFuelConsumed/((i.totalHoursWorked||0)+l)}:{},updatedAt:xe()})}),console.log(`✅ Horómetro del tractor ${n} actualizado: ${a}h → ${e}h (+${l}h)`)}catch(i){throw console.error("❌ Error al actualizar horómetro:",i),new Error(`Error al actualizar horómetro: ${i.message}`)}},cI=async(n,e=50)=>{try{const t=await zs(n);if(!t)throw new Error(`Vehículo ${n} no encontrado`);return t.hasHourMeter?(t.hourMeterHistory||[]).sort((a,l)=>{const c=a.date?.toDate?.()||a.date||new Date(0);return(l.date?.toDate?.()||l.date||new Date(0))-c}).slice(0,e).map(a=>({...a,date:a.date?.toDate?.()||a.date})):[]}catch(t){throw console.error("❌ Error al obtener historial de horómetro:",t),new Error(`Error al obtener historial: ${t.message}`)}},hI=async n=>{try{const e=await zs(n);if(!e)throw new Error(`Vehículo ${n} no encontrado`);if(!e.hasHourMeter)throw new Error(`El vehículo ${n} no tiene sistema de horómetro`);const t=e.totalFuelConsumed||0,i=e.totalHoursWorked||0,a=e.currentHours||0,l=e.estimatedConsumptionPerHour||0,c={vehicleCode:n,totalFuelConsumed:t,totalHoursWorked:i,currentHoursReading:a,estimatedConsumptionPerHour:l,actualConsumptionPerHour:i>0?t/i:0,efficiencyPercentage:0,fuelSaved:0,projectedNextMaintenance:null};l>0&&c.actualConsumptionPerHour>0&&(c.efficiencyPercentage=(l-c.actualConsumptionPerHour)/l*100,c.fuelSaved=(l-c.actualConsumptionPerHour)*i);const d=250-a%250;return c.projectedNextMaintenance={hoursRemaining:d,projectedHours:a+d},c}catch(e){throw console.error("❌ Error al calcular consumo del tractor:",e),new Error(`Error al calcular métricas: ${e.message}`)}},fI=async(n={})=>{try{const e=await v_(n),t={totalVehicles:e.length,byType:{},byStatus:{},byFuelType:{},totalFuelConsumed:0,totalHoursWorked:0,averageConsumption:0,mostActiveVehicle:null,leastActiveVehicle:null};let i=0,a=1/0;return e.forEach(l=>{t.byType[l.type]=(t.byType[l.type]||0)+1,t.byStatus[l.status]=(t.byStatus[l.status]||0)+1,t.byFuelType[l.fuelType]=(t.byFuelType[l.fuelType]||0)+1,t.totalFuelConsumed+=l.totalFuelConsumed||0,t.totalHoursWorked+=l.totalHoursWorked||0;const c=l.totalMovements||0;c>i&&(i=c,t.mostActiveVehicle=l),c<a&&c>0&&(a=c,t.leastActiveVehicle=l)}),t.totalHoursWorked>0&&(t.averageConsumption=t.totalFuelConsumed/t.totalHoursWorked),t}catch(e){throw console.error("❌ Error al calcular estadísticas:",e),new Error(`Error al calcular estadísticas: ${e.message}`)}},dI=async(n,e)=>{try{const t=await E_(n);if(!t)throw new Error("Vehículo no encontrado");const i=t.maintenanceHistory||[];i.push({...e,date:xe(),registeredAt:xe()}),await T_(n,{maintenanceHistory:i,lastMaintenanceDate:xe(),...e.type==="major"?{status:Dc.MANTENIMIENTO}:{}}),console.log("✅ Mantenimiento registrado exitosamente")}catch(t){throw console.error("❌ Error al registrar mantenimiento:",t),new Error(`Error al registrar mantenimiento: ${t.message}`)}},S4=n=>{const e=["vehicleId","name","type","fuelType"];for(const t of e)if(!n[t])throw new Error(`Campo requerido: ${t}`);if(!n.type||n.type.trim().length===0)throw new Error("Tipo de vehículo requerido");if(!Object.values(Na).includes(n.fuelType))throw new Error("Tipo de combustible inválido");if(n.status&&!Object.values(Dc).includes(n.status))throw new Error("Estado de vehículo inválido");if(n.enginePower&&n.enginePower<=0)throw new Error("La potencia del motor debe ser mayor a cero");if(n.fuelCapacity&&n.fuelCapacity<=0)throw new Error("La capacidad de combustible debe ser mayor a cero")},pI=n=>{const{type:e,enginePower:t,fuelType:i}=n,a={excavadora:.04,bulldozer:.05,cargador:.035,camion:.03,camioneta:.03,grua:.045,motosierra:.02,tractor:.025,volqueta:.035,motobomba:.035,fumigadora:.025,guadana:.02,motocicleta:.015,planta_electrica:.08,otros:.03},l={[Na.DIESEL]:1,[Na.GASOLINA]:1.2,[Na.ACPM]:.95,[Na.MIXTO]:1.1},c=a[e]||.03,d=l[i]||1;return c*(t||100)*d},mI=async n=>{try{const e=De(He(de,yr),Le("category","==",n));return(await Rt(e)).size}catch(e){return console.error("❌ Error al contar vehículos por categoría:",e),0}},R4={createVehicle:sI,getAllVehicles:v_,getVehicle:E_,getVehicleByCode:zs,updateVehicle:T_,deleteVehicle:aI,subscribeToVehicles:A_,subscribeToVehiclesStats:oI,getVehicleMovements:w_,updateVehicleMetrics:lI,updateHourMeter:uI,getHourMeterHistory:cI,calculateTractorConsumption:hI,getVehiclesStats:fI,registerMaintenance:dI,countVehiclesByCategory:mI,VEHICLE_STATUS:Dc,FUEL_COMPATIBILITY:Na},v3=Object.freeze(Object.defineProperty({__proto__:null,FUEL_COMPATIBILITY:Na,FUEL_TYPES:w4,VEHICLE_STATUS:Dc,calculateTractorConsumption:hI,countVehiclesByCategory:mI,createVehicle:sI,default:R4,deleteVehicle:aI,getAllVehicles:v_,getHourMeterHistory:cI,getVehicle:E_,getVehicleByCode:zs,getVehicleMovements:w_,getVehiclesStats:fI,registerMaintenance:dI,subscribeToVehicles:A_,subscribeToVehiclesStats:oI,updateHourMeter:uI,updateVehicle:T_,updateVehicleMetrics:lI},Symbol.toStringTag,{value:"Module"})),xr="combustibles_suppliers",E3=async(n,e)=>{try{const t=De(He(de,xr),Le("name","==",n.name.trim()));if(!(await Rt(t)).empty)return{success:!1,error:`Ya existe un proveedor con el nombre "${n.name}"`};if(n.taxId){const c=De(He(de,xr),Le("taxId","==",n.taxId.trim()));if(!(await Rt(c)).empty)return{success:!1,error:`Ya existe un proveedor con el NIT/Documento "${n.taxId}"`}}const a={name:n.name.trim(),taxId:n.taxId?.trim()||"",type:n.type||"proveedor",category:n.category||"combustibles",contactPerson:n.contactPerson?.trim()||"",phone:n.phone?.trim()||"",email:n.email?.trim()||"",address:n.address?.trim()||"",city:n.city?.trim()||"",state:n.state?.trim()||"Colombia",fuelTypes:n.fuelTypes||[],paymentTerms:n.paymentTerms||"contado",creditLimit:Number(n.creditLimit)||0,priceList:n.priceList||{},rating:Number(n.rating)||5,evaluationNotes:n.evaluationNotes||"",status:n.status||"active",isPreferred:n.isPreferred||!1,totalOrders:0,totalPurchased:0,lastOrderDate:null,averageDeliveryTime:0,createdAt:new Date,createdBy:e,lastUpdated:new Date,updatedBy:e};return{success:!0,data:{id:(await e_(He(de,xr),a)).id,...a},message:`Proveedor "${a.name}" creado exitosamente`}}catch(t){return console.error("Error creating supplier:",t),{success:!1,error:t.message}}},I4=async()=>{try{const n=De(He(de,xr),Vi("name","asc"));return{success:!0,data:(await Rt(n)).docs.map(i=>({id:i.id,...i.data()}))}}catch(n){return console.error("Error getting suppliers:",n),{success:!1,error:n.message}}},C4=n=>{const e=De(He(de,xr),Vi("name","asc"));return Ic(e,t=>{const i=t.docs.map(a=>({id:a.id,...a.data()}));n(i)})},T3=async(n,e,t)=>{try{const i=await Bs(Qe(de,xr,n));if(!i.exists())return{success:!1,error:"Proveedor no encontrado"};if(e.name&&e.name.trim()!==i.data().name){const l=De(He(de,xr),Le("name","==",e.name.trim()));if(!(await Rt(l)).empty)return{success:!1,error:`Ya existe un proveedor con el nombre "${e.name}"`}}if(e.taxId&&e.taxId.trim()!==i.data().taxId){const l=De(He(de,xr),Le("taxId","==",e.taxId.trim()));if(!(await Rt(l)).empty)return{success:!1,error:`Ya existe un proveedor con el NIT/Documento "${e.taxId}"`}}const a={...e,lastUpdated:new Date,updatedBy:t};return a.name&&(a.name=a.name.trim()),a.taxId&&(a.taxId=a.taxId.trim()),a.contactPerson&&(a.contactPerson=a.contactPerson.trim()),a.phone&&(a.phone=a.phone.trim()),a.email&&(a.email=a.email.trim()),await qa(Qe(de,xr,n),a),{success:!0,message:"Proveedor actualizado exitosamente"}}catch(i){return console.error("Error updating supplier:",i),{success:!1,error:i.message}}},A3=async(n,e)=>{try{return await qa(Qe(de,xr,n),{status:"inactive",lastUpdated:new Date,updatedBy:e}),{success:!0,message:"Proveedor desactivado exitosamente"}}catch(t){return console.error("Error deleting supplier:",t),{success:!1,error:t.message}}},w3=async()=>{try{const n=await I4();if(!n.success)return n;const e=n.data,t={total:e.length,active:e.filter(i=>i.status==="active").length,inactive:e.filter(i=>i.status==="inactive").length,suspended:e.filter(i=>i.status==="suspended").length,preferred:e.filter(i=>i.isPreferred).length,averageRating:e.length>0?e.reduce((i,a)=>i+(a.rating||0),0)/e.length:0,byCategory:{},byType:{}};return e.forEach(i=>{const a=i.category||"sin_categoria";t.byCategory[a]=(t.byCategory[a]||0)+1}),e.forEach(i=>{const a=i.type||"sin_tipo";t.byType[a]=(t.byType[a]||0)+1}),{success:!0,data:t}}catch(n){return console.error("Error getting suppliers stats:",n),{success:!1,error:n.message}}},gI=$.createContext(),yI=()=>{const n=$.useContext(gI);if(n===void 0)throw new Error("useCombustibles must be used within a CombustiblesProvider");return n},N4=({children:n})=>{const[e,t]=$.useState(null),[i,a]=$.useState(null),[l,c]=$.useState(!0),[d,p]=$.useState(null),[g,_]=$.useState([]),[A,T]=$.useState([]),[N,O]=$.useState([]),[H,U]=$.useState([]);$.useEffect(()=>{const C=fM(ju,async V=>{try{if(c(!0),V){t(V);let x=await Md(V.uid);x.success||(x=await eI(V,{provider:"existing_account",appContext:"combustibles"})),x.success?a(x.userData):p("Error cargando perfil de usuario")}else t(null),a(null),_([]),T([]),O([]),U([])}catch(x){console.error("Error en autenticación:",x),p("Error de autenticación")}finally{c(!1)}});return()=>C()},[]),$.useEffect(()=>{if(e){const C=A4(_),V=A_(O,Tt=>p(Tt.message)),x=C4(U),D=uw.subscribeToMovements(T,Tt=>p(Tt.message));return()=>{C(),V(),x(),D()}}},[e]);const S={user:e,userProfile:i,loading:l,error:d,hasPermission:C=>i?.combustiblesPermissions?.[C]||!1,isAdmin:()=>i?.role==="admin",isCounterOrAbove:()=>i?.role==="admin"||i?.role==="contador",inventory:g,movements:A,vehicles:N,suppliers:H,setInventory:_,setMovements:T,setVehicles:O,setSuppliers:U,deleteMovement:async C=>{try{return await uw.deleteMovement(C),{success:!0}}catch(V){return console.error("Error al eliminar el movimiento en el contexto:",V),p(V.message),{success:!1,error:V.message}}},refreshInventory:async()=>{console.log("Refrescando inventario...")},refreshMovements:async()=>{console.log("Refrescando movimientos...")},refreshVehicles:async()=>{console.log("Refrescando vehículos...")},refreshSuppliers:async()=>{console.log("Refrescando proveedores...")}};return Y.jsx(gI.Provider,{value:S,children:n})},D4=({children:n})=>{const{userProfile:e,isAdmin:t,isCounterOrAbove:i}=yI(),[a,l]=$.useState(!1),c=Ms(),d=[{id:"dashboard",path:"/",name:"Dashboard",icon:"📊",description:"Vista general",requiredPermission:null},{id:"inventory",path:"/inventario",name:"Inventario",icon:"🛢️",description:"Gestión de stock",requiredPermission:"canManageInventory"},{id:"movements",path:"/movimientos",name:"Movimientos",icon:"📈",description:"Entradas y salidas",requiredPermission:"canCreateMovements"},{id:"vehicles",path:"/vehiculos",name:"Vehículos",icon:"🚜",description:"Maquinaria forestal",requiredPermission:null},{id:"maintenance",path:"/mantenimiento",name:"Mantenimiento",icon:"🔧",description:"Cambios de aceite y baterías",requiredPermission:null},{id:"products",path:"/productos",name:"Productos",icon:"🛢️",description:"Tipos de combustibles",requiredPermission:null},{id:"suppliers",path:"/proveedores",name:"Proveedores",icon:"🏪",description:"Gestión de proveedores",requiredPermission:"canManageSuppliers"},{id:"reports",path:"/reportes",name:"Reportes",icon:"📋",description:"Análisis y reportes",requiredPermission:"canViewReports"},{id:"migration",path:"/migracion",name:"Migración",icon:"🔄",description:"Datos históricos",requiredPermission:"admin"},{id:"admin",path:"/admin",name:"Administración",icon:"⚙️",description:"Gestión de usuarios",requiredPermission:"admin"}],p=()=>{l(!1)},g=T=>T?T==="admin"?t():e?.combustiblesPermissions?.[T]||!1:!0,_=d.filter(T=>g(T.requiredPermission)),A=async()=>{try{await dM(ju)}catch(T){console.error("Error al cerrar sesión:",T)}};return Y.jsxs("div",{className:"dashboard-layout",children:[Y.jsx("header",{className:"dashboard-header",children:Y.jsxs("div",{className:"header-content",children:[Y.jsx("button",{className:"sidebar-toggle",onClick:()=>l(!a),children:"☰"}),Y.jsxs("div",{className:"header-title",children:[Y.jsx("h1",{children:"⛽ Gestión de Combustibles"}),Y.jsx("span",{className:"subtitle",children:"Forestech Colombia"})]}),Y.jsxs("div",{className:"header-user",children:[Y.jsxs("div",{className:"user-info",children:[Y.jsx("span",{className:"user-name",children:e?.displayName||e?.email}),Y.jsx("span",{className:"user-role",children:e?.role})]}),Y.jsx("div",{className:"user-avatar",children:e?.photoURL?Y.jsx("img",{src:e.photoURL,alt:"Avatar"}):Y.jsx("div",{className:"avatar-placeholder",children:(e?.displayName||e?.email||"U").charAt(0).toUpperCase()})}),Y.jsx("button",{className:"logout-button",onClick:A,title:"Cerrar sesión",children:"🚪"})]})]})}),Y.jsxs("div",{className:"dashboard-body",children:[Y.jsxs("aside",{className:`dashboard-sidebar ${a?"open":""}`,children:[Y.jsx("nav",{className:"sidebar-nav",children:_.map(T=>Y.jsxs(Qg,{to:T.path,className:`nav-item ${c.pathname===T.path?"active":""}`,onClick:p,children:[Y.jsx("span",{className:"nav-icon",children:T.icon}),Y.jsxs("div",{className:"nav-content",children:[Y.jsx("span",{className:"nav-name",children:T.name}),Y.jsx("span",{className:"nav-description",children:T.description})]})]},T.id))}),Y.jsx("div",{className:"sidebar-footer",children:Y.jsxs("div",{className:"user-permissions",children:[Y.jsx("h4",{children:"Permisos Activos:"}),Y.jsxs("div",{className:"permission-list",children:[t()&&Y.jsx("span",{className:"permission admin",children:"👑 Administrador"}),i()&&Y.jsx("span",{className:"permission counter",children:"📊 Gestión Operativa"}),g("canManageInventory")&&Y.jsx("span",{className:"permission",children:"🛢️ Inventario"}),g("canManageVehicles")&&Y.jsx("span",{className:"permission",children:"🚜 Vehículos"})]})]})})]}),Y.jsx("main",{className:"dashboard-main",children:Y.jsx("div",{className:"main-content",children:n})})]}),a&&Y.jsx("div",{className:"sidebar-overlay",onClick:()=>l(!1)})]})},O4=()=>Y.jsx(D4,{children:Y.jsx(GC,{})}),M4=()=>{const[n,e]=$.useState("login"),[t,i]=$.useState(!1),[a,l]=$.useState(""),[c,d]=$.useState(""),[p,g]=$.useState(""),[_,A]=$.useState(""),[T,N]=$.useState({email:"",password:"",confirmPassword:"",invitationCode:""}),[O,H]=$.useState(""),[U,G]=$.useState(null),ie=async S=>{S.preventDefault(),i(!0),l("");try{await uM(ju,p,_)}catch(C){console.error("Error en login:",C),l(Ee(C.code))}finally{i(!1)}},ne=async()=>{i(!0),l("");try{const S=new Ai,C=await PM(ju,S);U?await sw(C.user,U.code):await eI(C.user)}catch(S){console.error("Error en login con Google:",S),l("Error al iniciar sesión con Google")}finally{i(!1)}},he=async S=>{S.preventDefault(),i(!0),l(""),d("");try{const C=await JR(O);C.success?(G(C.invitation),d(`Invitación válida para: ${C.invitation.targetEmail}`),e("register"),N({...T,email:C.invitation.targetEmail,invitationCode:O})):l(C.error)}catch(C){console.error("Error validando invitación:",C),l("Error validando código de invitación")}finally{i(!1)}},ce=async S=>{if(S.preventDefault(),i(!0),l(""),T.password!==T.confirmPassword){l("Las contraseñas no coinciden"),i(!1);return}if(T.password.length<6){l("La contraseña debe tener al menos 6 caracteres"),i(!1);return}try{const C=await lM(ju,T.email,T.password),V=await sw(C.user,T.invitationCode);V.success?d("¡Registro exitoso! Bienvenido al sistema."):l(V.error)}catch(C){console.error("Error en registro:",C),l(Ee(C.code))}finally{i(!1)}},Ee=S=>{switch(S){case"auth/invalid-email":return"El formato del email es inválido";case"auth/user-not-found":return"Usuario no encontrado";case"auth/wrong-password":return"Contraseña incorrecta";case"auth/invalid-credential":return"Email o contraseña incorrectos";case"auth/email-already-in-use":return"Este email ya está registrado";case"auth/weak-password":return"La contraseña es muy débil";default:return"Error de autenticación. Inténtalo de nuevo."}},P=()=>{l(""),d(""),g(""),A(""),H(""),G(null),N({email:"",password:"",confirmPassword:"",invitationCode:""})},R=()=>{switch(n){case"login":return Y.jsxs(Y.Fragment,{children:[Y.jsxs("form",{onSubmit:ie,children:[Y.jsxs("div",{className:"form-group",children:[Y.jsx("label",{htmlFor:"email",children:"Email:"}),Y.jsx("input",{id:"email",type:"email",value:p,onChange:S=>g(S.target.value),required:!0,disabled:t,placeholder:"tu-email@ejemplo.com"})]}),Y.jsxs("div",{className:"form-group",children:[Y.jsx("label",{htmlFor:"password",children:"Contraseña:"}),Y.jsx("input",{id:"password",type:"password",value:_,onChange:S=>A(S.target.value),required:!0,disabled:t,placeholder:"Tu contraseña"})]}),Y.jsx("button",{type:"submit",className:"auth-button primary",disabled:t,children:t?"Iniciando sesión...":"Iniciar Sesión"})]}),Y.jsx("div",{className:"auth-divider",children:Y.jsx("span",{children:"o"})}),Y.jsxs("button",{onClick:ne,className:"auth-button google",disabled:t,children:[Y.jsx("span",{children:"🔗"}),"Continuar con Google"]}),Y.jsx("div",{className:"auth-actions",children:Y.jsx("button",{className:"link-button",onClick:()=>{P(),e("invite")},children:"¿Tienes un código de invitación? Regístrate aquí"})})]});case"invite":return Y.jsxs(Y.Fragment,{children:[Y.jsxs("form",{onSubmit:he,children:[Y.jsxs("div",{className:"form-group",children:[Y.jsx("label",{htmlFor:"inviteCode",children:"Código de invitación:"}),Y.jsx("input",{id:"inviteCode",type:"text",value:O,onChange:S=>H(S.target.value.toUpperCase()),required:!0,disabled:t,placeholder:"XXXXXXXX",maxLength:8,style:{textTransform:"uppercase",fontFamily:"monospace"}}),Y.jsx("small",{children:"Ingresa el código de 8 caracteres que recibiste"})]}),Y.jsx("button",{type:"submit",className:"auth-button primary",disabled:t,children:t?"Validando...":"Validar Código"})]}),Y.jsx("div",{className:"auth-actions",children:Y.jsx("button",{className:"link-button",onClick:()=>{P(),e("login")},children:"Volver al inicio de sesión"})})]});case"register":return Y.jsxs(Y.Fragment,{children:[Y.jsx("div",{className:"invitation-info",children:Y.jsxs("div",{className:"success-message",children:["✅ Código válido para: ",U?.targetEmail]})}),Y.jsxs("form",{onSubmit:ce,children:[Y.jsxs("div",{className:"form-group",children:[Y.jsx("label",{htmlFor:"registerEmail",children:"Email:"}),Y.jsx("input",{id:"registerEmail",type:"email",value:T.email,disabled:!0,className:"disabled-input"})]}),Y.jsxs("div",{className:"form-group",children:[Y.jsx("label",{htmlFor:"registerPassword",children:"Contraseña:"}),Y.jsx("input",{id:"registerPassword",type:"password",value:T.password,onChange:S=>N({...T,password:S.target.value}),required:!0,disabled:t,placeholder:"Mínimo 6 caracteres",minLength:6})]}),Y.jsxs("div",{className:"form-group",children:[Y.jsx("label",{htmlFor:"confirmPassword",children:"Confirmar contraseña:"}),Y.jsx("input",{id:"confirmPassword",type:"password",value:T.confirmPassword,onChange:S=>N({...T,confirmPassword:S.target.value}),required:!0,disabled:t,placeholder:"Repite tu contraseña"})]}),Y.jsx("button",{type:"submit",className:"auth-button primary",disabled:t,children:t?"Registrando...":"Crear Cuenta"})]}),Y.jsx("div",{className:"auth-divider",children:Y.jsx("span",{children:"o"})}),Y.jsxs("button",{onClick:ne,className:"auth-button google",disabled:t,children:[Y.jsx("span",{children:"🔗"}),"Registrarse con Google"]}),Y.jsx("div",{className:"auth-actions",children:Y.jsx("button",{className:"link-button",onClick:()=>{P(),e("invite")},children:"Usar otro código de invitación"})})]});default:return null}};return Y.jsx("div",{className:"auth-container",children:Y.jsxs("div",{className:"auth-card",children:[Y.jsxs("div",{className:"auth-header",children:[Y.jsx("h1",{children:"⛽ Combustibles"}),Y.jsx("h2",{children:"Forestech Colombia"}),Y.jsxs("p",{children:[n==="login"&&"Sistema de gestión de combustibles",n==="invite"&&"Validar código de invitación",n==="register"&&"Crear nueva cuenta"]})]}),Y.jsxs("div",{className:"auth-form",children:[a&&Y.jsx("div",{className:"error-message",children:a}),c&&Y.jsx("div",{className:"success-message",children:c}),R(),Y.jsx("div",{className:"auth-footer",children:Y.jsx("p",{children:Y.jsxs("small",{children:["Solo usuarios autorizados pueden acceder al sistema.",Y.jsx("br",{}),n==="login"?"Contacta al administrador para obtener un código de invitación.":"Si no tienes código, contacta al administrador."]})})})]})]})})},P4=$.lazy(()=>Yr(()=>import("./DashboardMain-CAh4gurP.js"),[])),V4=$.lazy(()=>Yr(()=>import("./MigrationPage-Bt0sJ-KE.js"),__vite__mapDeps([0,1,2]))),k4=$.lazy(()=>Yr(()=>import("./InventoryMain-CGZ6Bhog.js"),__vite__mapDeps([3,4]))),x4=$.lazy(()=>Yr(()=>import("./MovementsMain-CX56GQB0.js"),__vite__mapDeps([5,1,6]))),L4=$.lazy(()=>Yr(()=>import("./VehiclesMain-Ddxx6IDS.js"),__vite__mapDeps([7,8]))),U4=$.lazy(()=>Yr(()=>import("./MaintenanceMain-BlOOTLys.js"),__vite__mapDeps([9,10]))),B4=$.lazy(()=>Yr(()=>import("./ProductsMain-K81D-u5K.js"),__vite__mapDeps([11,1,12]))),z4=$.lazy(()=>Yr(()=>import("./SuppliersMain-D_nkYnHp.js"),__vite__mapDeps([13,14]))),F4=$.lazy(()=>Yr(()=>import("./AdminMain-DPSSXXaL.js"),__vite__mapDeps([15,16]))),q4=$.lazy(()=>Yr(()=>import("./ReportsMain-uVG74J5u.js"),__vite__mapDeps([17,18]))),j4=()=>Y.jsx("div",{className:"loading-container",children:Y.jsxs("div",{className:"loader",children:[Y.jsx("div",{className:"spinner"}),Y.jsx("p",{children:"Cargando vista..."})]})});function H4(){return Y.jsx(N4,{children:Y.jsx(G4,{})})}function G4(){const{user:n,loading:e}=yI();return e?Y.jsx("div",{className:"loading-container",children:Y.jsxs("div",{className:"loader",children:[Y.jsx("div",{className:"spinner"}),Y.jsx("p",{children:"Cargando..."})]})}):Y.jsx("div",{className:"App",children:n?Y.jsx($.Suspense,{fallback:Y.jsx(j4,{}),children:Y.jsx(KC,{children:Y.jsxs(er,{path:"/",element:Y.jsx(O4,{}),children:[Y.jsx(er,{index:!0,element:Y.jsx(P4,{})}),Y.jsx(er,{path:"inventario",element:Y.jsx(k4,{})}),Y.jsx(er,{path:"movimientos",element:Y.jsx(x4,{})}),Y.jsx(er,{path:"vehiculos",element:Y.jsx(L4,{})}),Y.jsx(er,{path:"mantenimiento",element:Y.jsx(U4,{})}),Y.jsx(er,{path:"productos",element:Y.jsx(B4,{})}),Y.jsx(er,{path:"proveedores",element:Y.jsx(z4,{})}),Y.jsx(er,{path:"reportes",element:Y.jsx(q4,{})}),Y.jsx(er,{path:"migracion",element:Y.jsx(V4,{})}),Y.jsx(er,{path:"admin",element:Y.jsx(F4,{})})]})})}):Y.jsx(M4,{})})}Z1.createRoot(document.getElementById("root")).render(Y.jsx($.StrictMode,{children:Y.jsx(yN,{children:Y.jsx(H4,{})})}));export{fI as $,p4 as A,g4 as B,f4 as C,m4 as D,Na as E,s4 as F,g3 as G,qg as H,De as I,Vi as J,Ic as K,QS as L,ac as M,y3 as N,Fg as O,_3 as P,e_ as Q,$4 as R,Ou as S,p3 as T,w4 as U,Dc as V,m3 as W,A_ as X,sI as Y,T_ as Z,Yr as _,s3 as a,Le as a0,Pk as a1,T3 as a2,E3 as a3,o3 as a4,C4 as a5,w3 as a6,A3 as a7,Qo as a8,Q4 as a9,X4 as aa,Y4 as ab,W4 as ac,u4 as ad,o4 as ae,i3 as af,t3 as ag,tI as ah,c4 as ai,e3 as aj,y_ as ak,n3 as al,r3 as am,J4 as an,v3 as ao,de as b,Jy as c,Qe as d,qa as e,a3 as f,Bs as g,Rt as h,He as i,Y as j,dt as k,Sa as l,uw as m,h3 as n,c3 as o,A4 as p,d3 as q,$ as r,xe as s,f3 as t,yI as u,R4 as v,u3 as w,Z4 as x,l3 as y,h4 as z};
