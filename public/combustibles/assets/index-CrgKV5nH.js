(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&r(h)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();var ep={exports:{}},uc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kE;function vx(){if(kE)return uc;kE=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,o,l){var h=null;if(l!==void 0&&(h=""+l),o.key!==void 0&&(h=""+o.key),"key"in o){l={};for(var m in o)m!=="key"&&(l[m]=o[m])}else l=o;return o=l.ref,{$$typeof:s,type:r,key:h,ref:o!==void 0?o:null,props:l}}return uc.Fragment=e,uc.jsx=t,uc.jsxs=t,uc}var VE;function yx(){return VE||(VE=1,ep.exports=vx()),ep.exports}var u=yx(),tp={exports:{}},De={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LE;function _x(){if(LE)return De;LE=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),h=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),A=Symbol.iterator;function b(V){return V===null||typeof V!="object"?null:(V=A&&V[A]||V["@@iterator"],typeof V=="function"?V:null)}var O={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},I=Object.assign,U={};function C(V,ae,de){this.props=V,this.context=ae,this.refs=U,this.updater=de||O}C.prototype.isReactComponent={},C.prototype.setState=function(V,ae){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,ae,"setState")},C.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function $(){}$.prototype=C.prototype;function W(V,ae,de){this.props=V,this.context=ae,this.refs=U,this.updater=de||O}var K=W.prototype=new $;K.constructor=W,I(K,C.prototype),K.isPureReactComponent=!0;var Z=Array.isArray,q={H:null,A:null,T:null,S:null,V:null},oe=Object.prototype.hasOwnProperty;function D(V,ae,de,le,Ee,Pe){return de=Pe.ref,{$$typeof:s,type:V,key:ae,ref:de!==void 0?de:null,props:Pe}}function S(V,ae){return D(V.type,ae,void 0,void 0,void 0,V.props)}function R(V){return typeof V=="object"&&V!==null&&V.$$typeof===s}function j(V){var ae={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(de){return ae[de]})}var k=/\/+/g;function M(V,ae){return typeof V=="object"&&V!==null&&V.key!=null?j(""+V.key):ae.toString(36)}function w(){}function ye(V){switch(V.status){case"fulfilled":return V.value;case"rejected":throw V.reason;default:switch(typeof V.status=="string"?V.then(w,w):(V.status="pending",V.then(function(ae){V.status==="pending"&&(V.status="fulfilled",V.value=ae)},function(ae){V.status==="pending"&&(V.status="rejected",V.reason=ae)})),V.status){case"fulfilled":return V.value;case"rejected":throw V.reason}}throw V}function Ae(V,ae,de,le,Ee){var Pe=typeof V;(Pe==="undefined"||Pe==="boolean")&&(V=null);var Ce=!1;if(V===null)Ce=!0;else switch(Pe){case"bigint":case"string":case"number":Ce=!0;break;case"object":switch(V.$$typeof){case s:case e:Ce=!0;break;case _:return Ce=V._init,Ae(Ce(V._payload),ae,de,le,Ee)}}if(Ce)return Ee=Ee(V),Ce=le===""?"."+M(V,0):le,Z(Ee)?(de="",Ce!=null&&(de=Ce.replace(k,"$&/")+"/"),Ae(Ee,ae,de,"",function(ys){return ys})):Ee!=null&&(R(Ee)&&(Ee=S(Ee,de+(Ee.key==null||V&&V.key===Ee.key?"":(""+Ee.key).replace(k,"$&/")+"/")+Ce)),ae.push(Ee)),1;Ce=0;var Lt=le===""?".":le+":";if(Z(V))for(var at=0;at<V.length;at++)le=V[at],Pe=Lt+M(le,at),Ce+=Ae(le,ae,de,Pe,Ee);else if(at=b(V),typeof at=="function")for(V=at.call(V),at=0;!(le=V.next()).done;)le=le.value,Pe=Lt+M(le,at++),Ce+=Ae(le,ae,de,Pe,Ee);else if(Pe==="object"){if(typeof V.then=="function")return Ae(ye(V),ae,de,le,Ee);throw ae=String(V),Error("Objects are not valid as a React child (found: "+(ae==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":ae)+"). If you meant to render a collection of children, use an array instead.")}return Ce}function Q(V,ae,de){if(V==null)return V;var le=[],Ee=0;return Ae(V,le,"","",function(Pe){return ae.call(de,Pe,Ee++)}),le}function ie(V){if(V._status===-1){var ae=V._result;ae=ae(),ae.then(function(de){(V._status===0||V._status===-1)&&(V._status=1,V._result=de)},function(de){(V._status===0||V._status===-1)&&(V._status=2,V._result=de)}),V._status===-1&&(V._status=0,V._result=ae)}if(V._status===1)return V._result.default;throw V._result}var ue=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ae=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent(ae))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",V);return}console.error(V)};function _e(){}return De.Children={map:Q,forEach:function(V,ae,de){Q(V,function(){ae.apply(this,arguments)},de)},count:function(V){var ae=0;return Q(V,function(){ae++}),ae},toArray:function(V){return Q(V,function(ae){return ae})||[]},only:function(V){if(!R(V))throw Error("React.Children.only expected to receive a single React element child.");return V}},De.Component=C,De.Fragment=t,De.Profiler=o,De.PureComponent=W,De.StrictMode=r,De.Suspense=g,De.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=q,De.__COMPILER_RUNTIME={__proto__:null,c:function(V){return q.H.useMemoCache(V)}},De.cache=function(V){return function(){return V.apply(null,arguments)}},De.cloneElement=function(V,ae,de){if(V==null)throw Error("The argument must be a React element, but you passed "+V+".");var le=I({},V.props),Ee=V.key,Pe=void 0;if(ae!=null)for(Ce in ae.ref!==void 0&&(Pe=void 0),ae.key!==void 0&&(Ee=""+ae.key),ae)!oe.call(ae,Ce)||Ce==="key"||Ce==="__self"||Ce==="__source"||Ce==="ref"&&ae.ref===void 0||(le[Ce]=ae[Ce]);var Ce=arguments.length-2;if(Ce===1)le.children=de;else if(1<Ce){for(var Lt=Array(Ce),at=0;at<Ce;at++)Lt[at]=arguments[at+2];le.children=Lt}return D(V.type,Ee,void 0,void 0,Pe,le)},De.createContext=function(V){return V={$$typeof:h,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider=V,V.Consumer={$$typeof:l,_context:V},V},De.createElement=function(V,ae,de){var le,Ee={},Pe=null;if(ae!=null)for(le in ae.key!==void 0&&(Pe=""+ae.key),ae)oe.call(ae,le)&&le!=="key"&&le!=="__self"&&le!=="__source"&&(Ee[le]=ae[le]);var Ce=arguments.length-2;if(Ce===1)Ee.children=de;else if(1<Ce){for(var Lt=Array(Ce),at=0;at<Ce;at++)Lt[at]=arguments[at+2];Ee.children=Lt}if(V&&V.defaultProps)for(le in Ce=V.defaultProps,Ce)Ee[le]===void 0&&(Ee[le]=Ce[le]);return D(V,Pe,void 0,void 0,null,Ee)},De.createRef=function(){return{current:null}},De.forwardRef=function(V){return{$$typeof:m,render:V}},De.isValidElement=R,De.lazy=function(V){return{$$typeof:_,_payload:{_status:-1,_result:V},_init:ie}},De.memo=function(V,ae){return{$$typeof:v,type:V,compare:ae===void 0?null:ae}},De.startTransition=function(V){var ae=q.T,de={};q.T=de;try{var le=V(),Ee=q.S;Ee!==null&&Ee(de,le),typeof le=="object"&&le!==null&&typeof le.then=="function"&&le.then(_e,ue)}catch(Pe){ue(Pe)}finally{q.T=ae}},De.unstable_useCacheRefresh=function(){return q.H.useCacheRefresh()},De.use=function(V){return q.H.use(V)},De.useActionState=function(V,ae,de){return q.H.useActionState(V,ae,de)},De.useCallback=function(V,ae){return q.H.useCallback(V,ae)},De.useContext=function(V){return q.H.useContext(V)},De.useDebugValue=function(){},De.useDeferredValue=function(V,ae){return q.H.useDeferredValue(V,ae)},De.useEffect=function(V,ae,de){var le=q.H;if(typeof de=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return le.useEffect(V,ae)},De.useId=function(){return q.H.useId()},De.useImperativeHandle=function(V,ae,de){return q.H.useImperativeHandle(V,ae,de)},De.useInsertionEffect=function(V,ae){return q.H.useInsertionEffect(V,ae)},De.useLayoutEffect=function(V,ae){return q.H.useLayoutEffect(V,ae)},De.useMemo=function(V,ae){return q.H.useMemo(V,ae)},De.useOptimistic=function(V,ae){return q.H.useOptimistic(V,ae)},De.useReducer=function(V,ae,de){return q.H.useReducer(V,ae,de)},De.useRef=function(V){return q.H.useRef(V)},De.useState=function(V){return q.H.useState(V)},De.useSyncExternalStore=function(V,ae,de){return q.H.useSyncExternalStore(V,ae,de)},De.useTransition=function(){return q.H.useTransition()},De.version="19.1.0",De}var UE;function rg(){return UE||(UE=1,tp.exports=_x()),tp.exports}var re=rg(),np={exports:{}},dc={},sp={exports:{}},ip={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FE;function Ex(){return FE||(FE=1,function(s){function e(Q,ie){var ue=Q.length;Q.push(ie);e:for(;0<ue;){var _e=ue-1>>>1,V=Q[_e];if(0<o(V,ie))Q[_e]=ie,Q[ue]=V,ue=_e;else break e}}function t(Q){return Q.length===0?null:Q[0]}function r(Q){if(Q.length===0)return null;var ie=Q[0],ue=Q.pop();if(ue!==ie){Q[0]=ue;e:for(var _e=0,V=Q.length,ae=V>>>1;_e<ae;){var de=2*(_e+1)-1,le=Q[de],Ee=de+1,Pe=Q[Ee];if(0>o(le,ue))Ee<V&&0>o(Pe,le)?(Q[_e]=Pe,Q[Ee]=ue,_e=Ee):(Q[_e]=le,Q[de]=ue,_e=de);else if(Ee<V&&0>o(Pe,ue))Q[_e]=Pe,Q[Ee]=ue,_e=Ee;else break e}}return ie}function o(Q,ie){var ue=Q.sortIndex-ie.sortIndex;return ue!==0?ue:Q.id-ie.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;s.unstable_now=function(){return l.now()}}else{var h=Date,m=h.now();s.unstable_now=function(){return h.now()-m}}var g=[],v=[],_=1,A=null,b=3,O=!1,I=!1,U=!1,C=!1,$=typeof setTimeout=="function"?setTimeout:null,W=typeof clearTimeout=="function"?clearTimeout:null,K=typeof setImmediate<"u"?setImmediate:null;function Z(Q){for(var ie=t(v);ie!==null;){if(ie.callback===null)r(v);else if(ie.startTime<=Q)r(v),ie.sortIndex=ie.expirationTime,e(g,ie);else break;ie=t(v)}}function q(Q){if(U=!1,Z(Q),!I)if(t(g)!==null)I=!0,oe||(oe=!0,M());else{var ie=t(v);ie!==null&&Ae(q,ie.startTime-Q)}}var oe=!1,D=-1,S=5,R=-1;function j(){return C?!0:!(s.unstable_now()-R<S)}function k(){if(C=!1,oe){var Q=s.unstable_now();R=Q;var ie=!0;try{e:{I=!1,U&&(U=!1,W(D),D=-1),O=!0;var ue=b;try{t:{for(Z(Q),A=t(g);A!==null&&!(A.expirationTime>Q&&j());){var _e=A.callback;if(typeof _e=="function"){A.callback=null,b=A.priorityLevel;var V=_e(A.expirationTime<=Q);if(Q=s.unstable_now(),typeof V=="function"){A.callback=V,Z(Q),ie=!0;break t}A===t(g)&&r(g),Z(Q)}else r(g);A=t(g)}if(A!==null)ie=!0;else{var ae=t(v);ae!==null&&Ae(q,ae.startTime-Q),ie=!1}}break e}finally{A=null,b=ue,O=!1}ie=void 0}}finally{ie?M():oe=!1}}}var M;if(typeof K=="function")M=function(){K(k)};else if(typeof MessageChannel<"u"){var w=new MessageChannel,ye=w.port2;w.port1.onmessage=k,M=function(){ye.postMessage(null)}}else M=function(){$(k,0)};function Ae(Q,ie){D=$(function(){Q(s.unstable_now())},ie)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(Q){Q.callback=null},s.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<Q?Math.floor(1e3/Q):5},s.unstable_getCurrentPriorityLevel=function(){return b},s.unstable_next=function(Q){switch(b){case 1:case 2:case 3:var ie=3;break;default:ie=b}var ue=b;b=ie;try{return Q()}finally{b=ue}},s.unstable_requestPaint=function(){C=!0},s.unstable_runWithPriority=function(Q,ie){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var ue=b;b=Q;try{return ie()}finally{b=ue}},s.unstable_scheduleCallback=function(Q,ie,ue){var _e=s.unstable_now();switch(typeof ue=="object"&&ue!==null?(ue=ue.delay,ue=typeof ue=="number"&&0<ue?_e+ue:_e):ue=_e,Q){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=ue+V,Q={id:_++,callback:ie,priorityLevel:Q,startTime:ue,expirationTime:V,sortIndex:-1},ue>_e?(Q.sortIndex=ue,e(v,Q),t(g)===null&&Q===t(v)&&(U?(W(D),D=-1):U=!0,Ae(q,ue-_e))):(Q.sortIndex=V,e(g,Q),I||O||(I=!0,oe||(oe=!0,M()))),Q},s.unstable_shouldYield=j,s.unstable_wrapCallback=function(Q){var ie=b;return function(){var ue=b;b=ie;try{return Q.apply(this,arguments)}finally{b=ue}}}}(ip)),ip}var qE;function Tx(){return qE||(qE=1,sp.exports=Ex()),sp.exports}var rp={exports:{}},on={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zE;function bx(){if(zE)return on;zE=1;var s=rg();function e(g){var v="https://react.dev/errors/"+g;if(1<arguments.length){v+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)v+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+g+"; visit "+v+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function l(g,v,_){var A=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:A==null?null:""+A,children:g,containerInfo:v,implementation:_}}var h=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(g,v){if(g==="font")return"";if(typeof v=="string")return v==="use-credentials"?v:""}return on.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,on.createPortal=function(g,v){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!v||v.nodeType!==1&&v.nodeType!==9&&v.nodeType!==11)throw Error(e(299));return l(g,v,null,_)},on.flushSync=function(g){var v=h.T,_=r.p;try{if(h.T=null,r.p=2,g)return g()}finally{h.T=v,r.p=_,r.d.f()}},on.preconnect=function(g,v){typeof g=="string"&&(v?(v=v.crossOrigin,v=typeof v=="string"?v==="use-credentials"?v:"":void 0):v=null,r.d.C(g,v))},on.prefetchDNS=function(g){typeof g=="string"&&r.d.D(g)},on.preinit=function(g,v){if(typeof g=="string"&&v&&typeof v.as=="string"){var _=v.as,A=m(_,v.crossOrigin),b=typeof v.integrity=="string"?v.integrity:void 0,O=typeof v.fetchPriority=="string"?v.fetchPriority:void 0;_==="style"?r.d.S(g,typeof v.precedence=="string"?v.precedence:void 0,{crossOrigin:A,integrity:b,fetchPriority:O}):_==="script"&&r.d.X(g,{crossOrigin:A,integrity:b,fetchPriority:O,nonce:typeof v.nonce=="string"?v.nonce:void 0})}},on.preinitModule=function(g,v){if(typeof g=="string")if(typeof v=="object"&&v!==null){if(v.as==null||v.as==="script"){var _=m(v.as,v.crossOrigin);r.d.M(g,{crossOrigin:_,integrity:typeof v.integrity=="string"?v.integrity:void 0,nonce:typeof v.nonce=="string"?v.nonce:void 0})}}else v==null&&r.d.M(g)},on.preload=function(g,v){if(typeof g=="string"&&typeof v=="object"&&v!==null&&typeof v.as=="string"){var _=v.as,A=m(_,v.crossOrigin);r.d.L(g,_,{crossOrigin:A,integrity:typeof v.integrity=="string"?v.integrity:void 0,nonce:typeof v.nonce=="string"?v.nonce:void 0,type:typeof v.type=="string"?v.type:void 0,fetchPriority:typeof v.fetchPriority=="string"?v.fetchPriority:void 0,referrerPolicy:typeof v.referrerPolicy=="string"?v.referrerPolicy:void 0,imageSrcSet:typeof v.imageSrcSet=="string"?v.imageSrcSet:void 0,imageSizes:typeof v.imageSizes=="string"?v.imageSizes:void 0,media:typeof v.media=="string"?v.media:void 0})}},on.preloadModule=function(g,v){if(typeof g=="string")if(v){var _=m(v.as,v.crossOrigin);r.d.m(g,{as:typeof v.as=="string"&&v.as!=="script"?v.as:void 0,crossOrigin:_,integrity:typeof v.integrity=="string"?v.integrity:void 0})}else r.d.m(g)},on.requestFormReset=function(g){r.d.r(g)},on.unstable_batchedUpdates=function(g,v){return g(v)},on.useFormState=function(g,v,_){return h.H.useFormState(g,v,_)},on.useFormStatus=function(){return h.H.useHostTransitionStatus()},on.version="19.1.0",on}var BE;function Ax(){if(BE)return rp.exports;BE=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),rp.exports=bx(),rp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HE;function Nx(){if(HE)return dc;HE=1;var s=Tx(),e=rg(),t=Ax();function r(n){var i="https://react.dev/errors/"+n;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var i=n,a=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(a=i.return),n=i.return;while(n)}return i.tag===3?a:null}function h(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function m(n){if(l(n)!==n)throw Error(r(188))}function g(n){var i=n.alternate;if(!i){if(i=l(n),i===null)throw Error(r(188));return i!==n?null:n}for(var a=n,c=i;;){var f=a.return;if(f===null)break;var p=f.alternate;if(p===null){if(c=f.return,c!==null){a=c;continue}break}if(f.child===p.child){for(p=f.child;p;){if(p===a)return m(f),n;if(p===c)return m(f),i;p=p.sibling}throw Error(r(188))}if(a.return!==c.return)a=f,c=p;else{for(var T=!1,N=f.child;N;){if(N===a){T=!0,a=f,c=p;break}if(N===c){T=!0,c=f,a=p;break}N=N.sibling}if(!T){for(N=p.child;N;){if(N===a){T=!0,a=p,c=f;break}if(N===c){T=!0,c=p,a=f;break}N=N.sibling}if(!T)throw Error(r(189))}}if(a.alternate!==c)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?n:i}function v(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n;for(n=n.child;n!==null;){if(i=v(n),i!==null)return i;n=n.sibling}return null}var _=Object.assign,A=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),O=Symbol.for("react.portal"),I=Symbol.for("react.fragment"),U=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),$=Symbol.for("react.provider"),W=Symbol.for("react.consumer"),K=Symbol.for("react.context"),Z=Symbol.for("react.forward_ref"),q=Symbol.for("react.suspense"),oe=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),j=Symbol.for("react.memo_cache_sentinel"),k=Symbol.iterator;function M(n){return n===null||typeof n!="object"?null:(n=k&&n[k]||n["@@iterator"],typeof n=="function"?n:null)}var w=Symbol.for("react.client.reference");function ye(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===w?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case I:return"Fragment";case C:return"Profiler";case U:return"StrictMode";case q:return"Suspense";case oe:return"SuspenseList";case R:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case O:return"Portal";case K:return(n.displayName||"Context")+".Provider";case W:return(n._context.displayName||"Context")+".Consumer";case Z:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case D:return i=n.displayName||null,i!==null?i:ye(n.type)||"Memo";case S:i=n._payload,n=n._init;try{return ye(n(i))}catch{}}return null}var Ae=Array.isArray,Q=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ie=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ue={pending:!1,data:null,method:null,action:null},_e=[],V=-1;function ae(n){return{current:n}}function de(n){0>V||(n.current=_e[V],_e[V]=null,V--)}function le(n,i){V++,_e[V]=n.current,n.current=i}var Ee=ae(null),Pe=ae(null),Ce=ae(null),Lt=ae(null);function at(n,i){switch(le(Ce,i),le(Pe,n),le(Ee,null),i.nodeType){case 9:case 11:n=(n=i.documentElement)&&(n=n.namespaceURI)?uE(n):0;break;default:if(n=i.tagName,i=i.namespaceURI)i=uE(i),n=dE(i,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}de(Ee),le(Ee,n)}function ys(){de(Ee),de(Pe),de(Ce)}function Ni(n){n.memoizedState!==null&&le(Lt,n);var i=Ee.current,a=dE(i,n.type);i!==a&&(le(Pe,n),le(Ee,a))}function Bs(n){Pe.current===n&&(de(Ee),de(Pe)),Lt.current===n&&(de(Lt),rc._currentValue=ue)}var Ir=Object.prototype.hasOwnProperty,Cr=s.unstable_scheduleCallback,Rr=s.unstable_cancelCallback,nl=s.unstable_shouldYield,au=s.unstable_requestPaint,zn=s.unstable_now,Jh=s.unstable_getCurrentPriorityLevel,sl=s.unstable_ImmediatePriority,Ca=s.unstable_UserBlockingPriority,jr=s.unstable_NormalPriority,ef=s.unstable_LowPriority,Ra=s.unstable_IdlePriority,il=s.log,ou=s.unstable_setDisableYieldValue,pt=null,Xe=null;function In(n){if(typeof il=="function"&&ou(n),Xe&&typeof Xe.setStrictMode=="function")try{Xe.setStrictMode(pt,n)}catch{}}var rn=Math.clz32?Math.clz32:Dr,lu=Math.log,tf=Math.LN2;function Dr(n){return n>>>=0,n===0?32:31-(lu(n)/tf|0)|0}var Or=256,Mr=4194304;function is(n){var i=n&42;if(i!==0)return i;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function ja(n,i,a){var c=n.pendingLanes;if(c===0)return 0;var f=0,p=n.suspendedLanes,T=n.pingedLanes;n=n.warmLanes;var N=c&134217727;return N!==0?(c=N&~p,c!==0?f=is(c):(T&=N,T!==0?f=is(T):a||(a=N&~n,a!==0&&(f=is(a))))):(N=c&~p,N!==0?f=is(N):T!==0?f=is(T):a||(a=c&~n,a!==0&&(f=is(a)))),f===0?0:i!==0&&i!==f&&(i&p)===0&&(p=f&-f,a=i&-i,p>=a||p===32&&(a&4194048)!==0)?i:f}function Pr(n,i){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&i)===0}function rl(n,i){switch(n){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function al(){var n=Or;return Or<<=1,(Or&4194048)===0&&(Or=256),n}function ol(){var n=Mr;return Mr<<=1,(Mr&62914560)===0&&(Mr=4194304),n}function Hs(n){for(var i=[],a=0;31>a;a++)i.push(n);return i}function Gs(n,i){n.pendingLanes|=i,i!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function ll(n,i,a,c,f,p){var T=n.pendingLanes;n.pendingLanes=a,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=a,n.entangledLanes&=a,n.errorRecoveryDisabledLanes&=a,n.shellSuspendCounter=0;var N=n.entanglements,P=n.expirationTimes,H=n.hiddenUpdates;for(a=T&~a;0<a;){var J=31-rn(a),ne=1<<J;N[J]=0,P[J]=-1;var G=H[J];if(G!==null)for(H[J]=null,J=0;J<G.length;J++){var Y=G[J];Y!==null&&(Y.lane&=-536870913)}a&=~ne}c!==0&&_s(n,c,0),p!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=p&~(T&~i))}function _s(n,i,a){n.pendingLanes|=i,n.suspendedLanes&=~i;var c=31-rn(i);n.entangledLanes|=i,n.entanglements[c]=n.entanglements[c]|1073741824|a&4194090}function cl(n,i){var a=n.entangledLanes|=i;for(n=n.entanglements;a;){var c=31-rn(a),f=1<<c;f&i|n[c]&i&&(n[c]|=i),a&=~f}}function Si(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function Da(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function wi(){var n=ie.p;return n!==0?n:(n=window.event,n===void 0?32:RE(n.type))}function cu(n,i){var a=ie.p;try{return ie.p=n,i()}finally{ie.p=a}}var ct=Math.random().toString(36).slice(2),Ct="__reactFiber$"+ct,At="__reactProps$"+ct,Bn="__reactContainer$"+ct,ul="__reactEvents$"+ct,nf="__reactListeners$"+ct,xi="__reactHandles$"+ct,uu="__reactResources$"+ct,kr="__reactMarker$"+ct;function Ii(n){delete n[Ct],delete n[At],delete n[ul],delete n[nf],delete n[xi]}function $s(n){var i=n[Ct];if(i)return i;for(var a=n.parentNode;a;){if(i=a[Bn]||a[Ct]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(n=pE(n);n!==null;){if(a=n[Ct])return a;n=pE(n)}return i}n=a,a=n.parentNode}return null}function Es(n){if(n=n[Ct]||n[Bn]){var i=n.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return n}return null}function Ts(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n.stateNode;throw Error(r(33))}function fn(n){var i=n[uu];return i||(i=n[uu]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function _t(n){n[kr]=!0}var dl=new Set,Oa={};function rs(n,i){Ks(n,i),Ks(n+"Capture",i)}function Ks(n,i){for(Oa[n]=i,n=0;n<i.length;n++)dl.add(i[n])}var du=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),hu={},Vr={};function fu(n){return Ir.call(Vr,n)?!0:Ir.call(hu,n)?!1:du.test(n)?Vr[n]=!0:(hu[n]=!0,!1)}function Ci(n,i,a){if(fu(i))if(a===null)n.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":n.removeAttribute(i);return;case"boolean":var c=i.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){n.removeAttribute(i);return}}n.setAttribute(i,""+a)}}function bs(n,i,a){if(a===null)n.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(i);return}n.setAttribute(i,""+a)}}function $t(n,i,a,c){if(c===null)n.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(a);return}n.setAttributeNS(i,a,""+c)}}var Lr,mu;function Ys(n){if(Lr===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);Lr=i&&i[1]||"",mu=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Lr+n+mu}var Ma=!1;function Pa(n,i){if(!n||Ma)return"";Ma=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(i){var ne=function(){throw Error()};if(Object.defineProperty(ne.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ne,[])}catch(Y){var G=Y}Reflect.construct(n,[],ne)}else{try{ne.call()}catch(Y){G=Y}n.call(ne.prototype)}}else{try{throw Error()}catch(Y){G=Y}(ne=n())&&typeof ne.catch=="function"&&ne.catch(function(){})}}catch(Y){if(Y&&G&&typeof Y.stack=="string")return[Y.stack,G.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=c.DetermineComponentFrameRoot(),T=p[0],N=p[1];if(T&&N){var P=T.split(`
`),H=N.split(`
`);for(f=c=0;c<P.length&&!P[c].includes("DetermineComponentFrameRoot");)c++;for(;f<H.length&&!H[f].includes("DetermineComponentFrameRoot");)f++;if(c===P.length||f===H.length)for(c=P.length-1,f=H.length-1;1<=c&&0<=f&&P[c]!==H[f];)f--;for(;1<=c&&0<=f;c--,f--)if(P[c]!==H[f]){if(c!==1||f!==1)do if(c--,f--,0>f||P[c]!==H[f]){var J=`
`+P[c].replace(" at new "," at ");return n.displayName&&J.includes("<anonymous>")&&(J=J.replace("<anonymous>",n.displayName)),J}while(1<=c&&0<=f);break}}}finally{Ma=!1,Error.prepareStackTrace=a}return(a=n?n.displayName||n.name:"")?Ys(a):""}function hl(n){switch(n.tag){case 26:case 27:case 5:return Ys(n.type);case 16:return Ys("Lazy");case 13:return Ys("Suspense");case 19:return Ys("SuspenseList");case 0:case 15:return Pa(n.type,!1);case 11:return Pa(n.type.render,!1);case 1:return Pa(n.type,!0);case 31:return Ys("Activity");default:return""}}function ka(n){try{var i="";do i+=hl(n),n=n.return;while(n);return i}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function mn(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function fl(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function sf(n){var i=fl(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,i),c=""+n[i];if(!n.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var f=a.get,p=a.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return f.call(this)},set:function(T){c=""+T,p.call(this,T)}}),Object.defineProperty(n,i,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(T){c=""+T},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function Va(n){n._valueTracker||(n._valueTracker=sf(n))}function ml(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var a=i.getValue(),c="";return n&&(c=fl(n)?n.checked?"true":"false":n.value),n=c,n!==a?(i.setValue(n),!0):!1}function Ur(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var rf=/[\n"\\]/g;function Nt(n){return n.replace(rf,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Cn(n,i,a,c,f,p,T,N){n.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?n.type=T:n.removeAttribute("type"),i!=null?T==="number"?(i===0&&n.value===""||n.value!=i)&&(n.value=""+mn(i)):n.value!==""+mn(i)&&(n.value=""+mn(i)):T!=="submit"&&T!=="reset"||n.removeAttribute("value"),i!=null?Ri(n,T,mn(i)):a!=null?Ri(n,T,mn(a)):c!=null&&n.removeAttribute("value"),f==null&&p!=null&&(n.defaultChecked=!!p),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"?n.name=""+mn(N):n.removeAttribute("name")}function Fr(n,i,a,c,f,p,T,N){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(n.type=p),i!=null||a!=null){if(!(p!=="submit"&&p!=="reset"||i!=null))return;a=a!=null?""+mn(a):"",i=i!=null?""+mn(i):a,N||i===n.value||(n.value=i),n.defaultValue=i}c=c??f,c=typeof c!="function"&&typeof c!="symbol"&&!!c,n.checked=N?n.checked:!!c,n.defaultChecked=!!c,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(n.name=T)}function Ri(n,i,a){i==="number"&&Ur(n.ownerDocument)===n||n.defaultValue===""+a||(n.defaultValue=""+a)}function Qs(n,i,a,c){if(n=n.options,i){i={};for(var f=0;f<a.length;f++)i["$"+a[f]]=!0;for(a=0;a<n.length;a++)f=i.hasOwnProperty("$"+n[a].value),n[a].selected!==f&&(n[a].selected=f),f&&c&&(n[a].defaultSelected=!0)}else{for(a=""+mn(a),i=null,f=0;f<n.length;f++){if(n[f].value===a){n[f].selected=!0,c&&(n[f].defaultSelected=!0);return}i!==null||n[f].disabled||(i=n[f])}i!==null&&(i.selected=!0)}}function Je(n,i,a){if(i!=null&&(i=""+mn(i),i!==n.value&&(n.value=i),a==null)){n.defaultValue!==i&&(n.defaultValue=i);return}n.defaultValue=a!=null?""+mn(a):""}function qr(n,i,a,c){if(i==null){if(c!=null){if(a!=null)throw Error(r(92));if(Ae(c)){if(1<c.length)throw Error(r(93));c=c[0]}a=c}a==null&&(a=""),i=a}a=mn(i),n.defaultValue=a,c=n.textContent,c===a&&c!==""&&c!==null&&(n.value=c)}function Hn(n,i){if(i){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=i;return}}n.textContent=i}var zr=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function pu(n,i,a){var c=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?c?n.setProperty(i,""):i==="float"?n.cssFloat="":n[i]="":c?n.setProperty(i,a):typeof a!="number"||a===0||zr.has(i)?i==="float"?n.cssFloat=a:n[i]=(""+a).trim():n[i]=a+"px"}function pl(n,i,a){if(i!=null&&typeof i!="object")throw Error(r(62));if(n=n.style,a!=null){for(var c in a)!a.hasOwnProperty(c)||i!=null&&i.hasOwnProperty(c)||(c.indexOf("--")===0?n.setProperty(c,""):c==="float"?n.cssFloat="":n[c]="");for(var f in i)c=i[f],i.hasOwnProperty(f)&&a[f]!==c&&pu(n,f,c)}else for(var p in i)i.hasOwnProperty(p)&&pu(n,p,i[p])}function gl(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var af=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),of=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function La(n){return of.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var Xs=null;function Gn(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Ws=null,Zs=null;function vl(n){var i=Es(n);if(i&&(n=i.stateNode)){var a=n[At]||null;e:switch(n=i.stateNode,i.type){case"input":if(Cn(n,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Nt(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var c=a[i];if(c!==n&&c.form===n.form){var f=c[At]||null;if(!f)throw Error(r(90));Cn(c,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<a.length;i++)c=a[i],c.form===n.form&&ml(c)}break e;case"textarea":Je(n,a.value,a.defaultValue);break e;case"select":i=a.value,i!=null&&Qs(n,!!a.multiple,i,!1)}}}var As=!1;function gu(n,i,a){if(As)return n(i,a);As=!0;try{var c=n(i);return c}finally{if(As=!1,(Ws!==null||Zs!==null)&&(cd(),Ws&&(i=Ws,n=Zs,Zs=Ws=null,vl(i),n)))for(i=0;i<n.length;i++)vl(n[i])}}function Br(n,i){var a=n.stateNode;if(a===null)return null;var c=a[At]||null;if(c===null)return null;a=c[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(r(231,i,typeof a));return a}var as=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$n=!1;if(as)try{var Hr={};Object.defineProperty(Hr,"passive",{get:function(){$n=!0}}),window.addEventListener("test",Hr,Hr),window.removeEventListener("test",Hr,Hr)}catch{$n=!1}var Ns=null,ji=null,Js=null;function yl(){if(Js)return Js;var n,i=ji,a=i.length,c,f="value"in Ns?Ns.value:Ns.textContent,p=f.length;for(n=0;n<a&&i[n]===f[n];n++);var T=a-n;for(c=1;c<=T&&i[a-c]===f[p-c];c++);return Js=f.slice(n,1<c?1-c:void 0)}function Ss(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function ws(){return!0}function _l(){return!1}function Ut(n){function i(a,c,f,p,T){this._reactName=a,this._targetInst=f,this.type=c,this.nativeEvent=p,this.target=T,this.currentTarget=null;for(var N in n)n.hasOwnProperty(N)&&(a=n[N],this[N]=a?a(p):p[N]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?ws:_l,this.isPropagationStopped=_l,this}return _(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ws)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ws)},persist:function(){},isPersistent:ws}),i}var Qe={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ua=Ut(Qe),Gr=_({},Qe,{view:0,detail:0}),vu=Ut(Gr),Fa,qa,xs,$r=_({},Gr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Qr,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==xs&&(xs&&n.type==="mousemove"?(Fa=n.screenX-xs.screenX,qa=n.screenY-xs.screenY):qa=Fa=0,xs=n),Fa)},movementY:function(n){return"movementY"in n?n.movementY:qa}}),Kn=Ut($r),yu=_({},$r,{dataTransfer:0}),lf=Ut(yu),Kr=_({},Gr,{relatedTarget:0}),za=Ut(Kr),El=_({},Qe,{animationName:0,elapsedTime:0,pseudoElement:0}),Ba=Ut(El),_u=_({},Qe,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Ha=Ut(_u),cf=_({},Qe,{data:0}),Tl=Ut(cf),Yr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Eu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Tu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function bl(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=Tu[n])?!!i[n]:!1}function Qr(){return bl}var bu=_({},Gr,{key:function(n){if(n.key){var i=Yr[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=Ss(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Eu[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Qr,charCode:function(n){return n.type==="keypress"?Ss(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Ss(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Ga=Ut(bu),Au=_({},$r,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Al=Ut(Au),ei=_({},Gr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Qr}),Nu=Ut(ei),Su=_({},Qe,{propertyName:0,elapsedTime:0,pseudoElement:0}),wu=Ut(Su),xu=_({},$r,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),$a=Ut(xu),pn=_({},Qe,{newState:0,oldState:0}),Iu=Ut(pn),Cu=[9,13,27,32],Is=as&&"CompositionEvent"in window,d=null;as&&"documentMode"in document&&(d=document.documentMode);var y=as&&"TextEvent"in window&&!d,E=as&&(!Is||d&&8<d&&11>=d),x=" ",z=!1;function X(n,i){switch(n){case"keyup":return Cu.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ce(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var ze=!1;function Rt(n,i){switch(n){case"compositionend":return ce(i);case"keypress":return i.which!==32?null:(z=!0,x);case"textInput":return n=i.data,n===x&&z?null:n;default:return null}}function Be(n,i){if(ze)return n==="compositionend"||!Is&&X(n,i)?(n=yl(),Js=ji=Ns=null,ze=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return E&&i.locale!=="ko"?null:i.data;default:return null}}var Ft={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jt(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!Ft[n.type]:i==="textarea"}function ti(n,i,a,c){Ws?Zs?Zs.push(c):Zs=[c]:Ws=c,i=pd(i,"onChange"),0<i.length&&(a=new Ua("onChange","change",null,a,c),n.push({event:a,listeners:i}))}var Kt=null,Cs=null;function Nl(n){rE(n,0)}function Ru(n){var i=Ts(n);if(ml(i))return n}function wv(n,i){if(n==="change")return i}var xv=!1;if(as){var uf;if(as){var df="oninput"in document;if(!df){var Iv=document.createElement("div");Iv.setAttribute("oninput","return;"),df=typeof Iv.oninput=="function"}uf=df}else uf=!1;xv=uf&&(!document.documentMode||9<document.documentMode)}function Cv(){Kt&&(Kt.detachEvent("onpropertychange",Rv),Cs=Kt=null)}function Rv(n){if(n.propertyName==="value"&&Ru(Cs)){var i=[];ti(i,Cs,n,Gn(n)),gu(Nl,i)}}function KS(n,i,a){n==="focusin"?(Cv(),Kt=i,Cs=a,Kt.attachEvent("onpropertychange",Rv)):n==="focusout"&&Cv()}function YS(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Ru(Cs)}function QS(n,i){if(n==="click")return Ru(i)}function XS(n,i){if(n==="input"||n==="change")return Ru(i)}function WS(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var Rn=typeof Object.is=="function"?Object.is:WS;function Sl(n,i){if(Rn(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var a=Object.keys(n),c=Object.keys(i);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var f=a[c];if(!Ir.call(i,f)||!Rn(n[f],i[f]))return!1}return!0}function jv(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Dv(n,i){var a=jv(n);n=0;for(var c;a;){if(a.nodeType===3){if(c=n+a.textContent.length,n<=i&&c>=i)return{node:a,offset:i-n};n=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=jv(a)}}function Ov(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?Ov(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function Mv(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var i=Ur(n.document);i instanceof n.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)n=i.contentWindow;else break;i=Ur(n.document)}return i}function hf(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}var ZS=as&&"documentMode"in document&&11>=document.documentMode,Ka=null,ff=null,wl=null,mf=!1;function Pv(n,i,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;mf||Ka==null||Ka!==Ur(c)||(c=Ka,"selectionStart"in c&&hf(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),wl&&Sl(wl,c)||(wl=c,c=pd(ff,"onSelect"),0<c.length&&(i=new Ua("onSelect","select",null,i,a),n.push({event:i,listeners:c}),i.target=Ka)))}function Xr(n,i){var a={};return a[n.toLowerCase()]=i.toLowerCase(),a["Webkit"+n]="webkit"+i,a["Moz"+n]="moz"+i,a}var Ya={animationend:Xr("Animation","AnimationEnd"),animationiteration:Xr("Animation","AnimationIteration"),animationstart:Xr("Animation","AnimationStart"),transitionrun:Xr("Transition","TransitionRun"),transitionstart:Xr("Transition","TransitionStart"),transitioncancel:Xr("Transition","TransitionCancel"),transitionend:Xr("Transition","TransitionEnd")},pf={},kv={};as&&(kv=document.createElement("div").style,"AnimationEvent"in window||(delete Ya.animationend.animation,delete Ya.animationiteration.animation,delete Ya.animationstart.animation),"TransitionEvent"in window||delete Ya.transitionend.transition);function Wr(n){if(pf[n])return pf[n];if(!Ya[n])return n;var i=Ya[n],a;for(a in i)if(i.hasOwnProperty(a)&&a in kv)return pf[n]=i[a];return n}var Vv=Wr("animationend"),Lv=Wr("animationiteration"),Uv=Wr("animationstart"),JS=Wr("transitionrun"),ew=Wr("transitionstart"),tw=Wr("transitioncancel"),Fv=Wr("transitionend"),qv=new Map,gf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");gf.push("scrollEnd");function os(n,i){qv.set(n,i),rs(i,[n])}var zv=new WeakMap;function Yn(n,i){if(typeof n=="object"&&n!==null){var a=zv.get(n);return a!==void 0?a:(i={value:n,source:i,stack:ka(i)},zv.set(n,i),i)}return{value:n,source:i,stack:ka(i)}}var Qn=[],Qa=0,vf=0;function ju(){for(var n=Qa,i=vf=Qa=0;i<n;){var a=Qn[i];Qn[i++]=null;var c=Qn[i];Qn[i++]=null;var f=Qn[i];Qn[i++]=null;var p=Qn[i];if(Qn[i++]=null,c!==null&&f!==null){var T=c.pending;T===null?f.next=f:(f.next=T.next,T.next=f),c.pending=f}p!==0&&Bv(a,f,p)}}function Du(n,i,a,c){Qn[Qa++]=n,Qn[Qa++]=i,Qn[Qa++]=a,Qn[Qa++]=c,vf|=c,n.lanes|=c,n=n.alternate,n!==null&&(n.lanes|=c)}function yf(n,i,a,c){return Du(n,i,a,c),Ou(n)}function Xa(n,i){return Du(n,null,null,i),Ou(n)}function Bv(n,i,a){n.lanes|=a;var c=n.alternate;c!==null&&(c.lanes|=a);for(var f=!1,p=n.return;p!==null;)p.childLanes|=a,c=p.alternate,c!==null&&(c.childLanes|=a),p.tag===22&&(n=p.stateNode,n===null||n._visibility&1||(f=!0)),n=p,p=p.return;return n.tag===3?(p=n.stateNode,f&&i!==null&&(f=31-rn(a),n=p.hiddenUpdates,c=n[f],c===null?n[f]=[i]:c.push(i),i.lane=a|536870912),p):null}function Ou(n){if(50<Wl)throw Wl=0,Nm=null,Error(r(185));for(var i=n.return;i!==null;)n=i,i=n.return;return n.tag===3?n.stateNode:null}var Wa={};function nw(n,i,a,c){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jn(n,i,a,c){return new nw(n,i,a,c)}function _f(n){return n=n.prototype,!(!n||!n.isReactComponent)}function ni(n,i){var a=n.alternate;return a===null?(a=jn(n.tag,i,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=i,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&65011712,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,i=n.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a.refCleanup=n.refCleanup,a}function Hv(n,i){n.flags&=65011714;var a=n.alternate;return a===null?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=a.childLanes,n.lanes=a.lanes,n.child=a.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=a.memoizedProps,n.memoizedState=a.memoizedState,n.updateQueue=a.updateQueue,n.type=a.type,i=a.dependencies,n.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),n}function Mu(n,i,a,c,f,p){var T=0;if(c=n,typeof n=="function")_f(n)&&(T=1);else if(typeof n=="string")T=ix(n,a,Ee.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case R:return n=jn(31,a,i,f),n.elementType=R,n.lanes=p,n;case I:return Zr(a.children,f,p,i);case U:T=8,f|=24;break;case C:return n=jn(12,a,i,f|2),n.elementType=C,n.lanes=p,n;case q:return n=jn(13,a,i,f),n.elementType=q,n.lanes=p,n;case oe:return n=jn(19,a,i,f),n.elementType=oe,n.lanes=p,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case $:case K:T=10;break e;case W:T=9;break e;case Z:T=11;break e;case D:T=14;break e;case S:T=16,c=null;break e}T=29,a=Error(r(130,n===null?"null":typeof n,"")),c=null}return i=jn(T,a,i,f),i.elementType=n,i.type=c,i.lanes=p,i}function Zr(n,i,a,c){return n=jn(7,n,c,i),n.lanes=a,n}function Ef(n,i,a){return n=jn(6,n,null,i),n.lanes=a,n}function Tf(n,i,a){return i=jn(4,n.children!==null?n.children:[],n.key,i),i.lanes=a,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}var Za=[],Ja=0,Pu=null,ku=0,Xn=[],Wn=0,Jr=null,si=1,ii="";function ea(n,i){Za[Ja++]=ku,Za[Ja++]=Pu,Pu=n,ku=i}function Gv(n,i,a){Xn[Wn++]=si,Xn[Wn++]=ii,Xn[Wn++]=Jr,Jr=n;var c=si;n=ii;var f=32-rn(c)-1;c&=~(1<<f),a+=1;var p=32-rn(i)+f;if(30<p){var T=f-f%5;p=(c&(1<<T)-1).toString(32),c>>=T,f-=T,si=1<<32-rn(i)+f|a<<f|c,ii=p+n}else si=1<<p|a<<f|c,ii=n}function bf(n){n.return!==null&&(ea(n,1),Gv(n,1,0))}function Af(n){for(;n===Pu;)Pu=Za[--Ja],Za[Ja]=null,ku=Za[--Ja],Za[Ja]=null;for(;n===Jr;)Jr=Xn[--Wn],Xn[Wn]=null,ii=Xn[--Wn],Xn[Wn]=null,si=Xn[--Wn],Xn[Wn]=null}var gn=null,gt=null,Ye=!1,ta=null,Rs=!1,Nf=Error(r(519));function na(n){var i=Error(r(418,""));throw Cl(Yn(i,n)),Nf}function $v(n){var i=n.stateNode,a=n.type,c=n.memoizedProps;switch(i[Ct]=n,i[At]=c,a){case"dialog":Le("cancel",i),Le("close",i);break;case"iframe":case"object":case"embed":Le("load",i);break;case"video":case"audio":for(a=0;a<Jl.length;a++)Le(Jl[a],i);break;case"source":Le("error",i);break;case"img":case"image":case"link":Le("error",i),Le("load",i);break;case"details":Le("toggle",i);break;case"input":Le("invalid",i),Fr(i,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0),Va(i);break;case"select":Le("invalid",i);break;case"textarea":Le("invalid",i),qr(i,c.value,c.defaultValue,c.children),Va(i)}a=c.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||c.suppressHydrationWarning===!0||cE(i.textContent,a)?(c.popover!=null&&(Le("beforetoggle",i),Le("toggle",i)),c.onScroll!=null&&Le("scroll",i),c.onScrollEnd!=null&&Le("scrollend",i),c.onClick!=null&&(i.onclick=gd),i=!0):i=!1,i||na(n)}function Kv(n){for(gn=n.return;gn;)switch(gn.tag){case 5:case 13:Rs=!1;return;case 27:case 3:Rs=!0;return;default:gn=gn.return}}function xl(n){if(n!==gn)return!1;if(!Ye)return Kv(n),Ye=!0,!1;var i=n.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=n.type,a=!(a!=="form"&&a!=="button")||Fm(n.type,n.memoizedProps)),a=!a),a&&gt&&na(n),Kv(n),i===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));e:{for(n=n.nextSibling,i=0;n;){if(n.nodeType===8)if(a=n.data,a==="/$"){if(i===0){gt=cs(n.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++;n=n.nextSibling}gt=null}}else i===27?(i=gt,Ki(n.type)?(n=Hm,Hm=null,gt=n):gt=i):gt=gn?cs(n.stateNode.nextSibling):null;return!0}function Il(){gt=gn=null,Ye=!1}function Yv(){var n=ta;return n!==null&&(bn===null?bn=n:bn.push.apply(bn,n),ta=null),n}function Cl(n){ta===null?ta=[n]:ta.push(n)}var Sf=ae(null),sa=null,ri=null;function Di(n,i,a){le(Sf,i._currentValue),i._currentValue=a}function ai(n){n._currentValue=Sf.current,de(Sf)}function wf(n,i,a){for(;n!==null;){var c=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,c!==null&&(c.childLanes|=i)):c!==null&&(c.childLanes&i)!==i&&(c.childLanes|=i),n===a)break;n=n.return}}function xf(n,i,a,c){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var p=f.dependencies;if(p!==null){var T=f.child;p=p.firstContext;e:for(;p!==null;){var N=p;p=f;for(var P=0;P<i.length;P++)if(N.context===i[P]){p.lanes|=a,N=p.alternate,N!==null&&(N.lanes|=a),wf(p.return,a,n),c||(T=null);break e}p=N.next}}else if(f.tag===18){if(T=f.return,T===null)throw Error(r(341));T.lanes|=a,p=T.alternate,p!==null&&(p.lanes|=a),wf(T,a,n),T=null}else T=f.child;if(T!==null)T.return=f;else for(T=f;T!==null;){if(T===n){T=null;break}if(f=T.sibling,f!==null){f.return=T.return,T=f;break}T=T.return}f=T}}function Rl(n,i,a,c){n=null;for(var f=i,p=!1;f!==null;){if(!p){if((f.flags&524288)!==0)p=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var T=f.alternate;if(T===null)throw Error(r(387));if(T=T.memoizedProps,T!==null){var N=f.type;Rn(f.pendingProps.value,T.value)||(n!==null?n.push(N):n=[N])}}else if(f===Lt.current){if(T=f.alternate,T===null)throw Error(r(387));T.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(rc):n=[rc])}f=f.return}n!==null&&xf(i,n,a,c),i.flags|=262144}function Vu(n){for(n=n.firstContext;n!==null;){if(!Rn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function ia(n){sa=n,ri=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function an(n){return Qv(sa,n)}function Lu(n,i){return sa===null&&ia(n),Qv(n,i)}function Qv(n,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},ri===null){if(n===null)throw Error(r(308));ri=i,n.dependencies={lanes:0,firstContext:i},n.flags|=524288}else ri=ri.next=i;return a}var sw=typeof AbortController<"u"?AbortController:function(){var n=[],i=this.signal={aborted:!1,addEventListener:function(a,c){n.push(c)}};this.abort=function(){i.aborted=!0,n.forEach(function(a){return a()})}},iw=s.unstable_scheduleCallback,rw=s.unstable_NormalPriority,Dt={$$typeof:K,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function If(){return{controller:new sw,data:new Map,refCount:0}}function jl(n){n.refCount--,n.refCount===0&&iw(rw,function(){n.controller.abort()})}var Dl=null,Cf=0,eo=0,to=null;function aw(n,i){if(Dl===null){var a=Dl=[];Cf=0,eo=jm(),to={status:"pending",value:void 0,then:function(c){a.push(c)}}}return Cf++,i.then(Xv,Xv),i}function Xv(){if(--Cf===0&&Dl!==null){to!==null&&(to.status="fulfilled");var n=Dl;Dl=null,eo=0,to=null;for(var i=0;i<n.length;i++)(0,n[i])()}}function ow(n,i){var a=[],c={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return n.then(function(){c.status="fulfilled",c.value=i;for(var f=0;f<a.length;f++)(0,a[f])(i)},function(f){for(c.status="rejected",c.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),c}var Wv=Q.S;Q.S=function(n,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&aw(n,i),Wv!==null&&Wv(n,i)};var ra=ae(null);function Rf(){var n=ra.current;return n!==null?n:ot.pooledCache}function Uu(n,i){i===null?le(ra,ra.current):le(ra,i.pool)}function Zv(){var n=Rf();return n===null?null:{parent:Dt._currentValue,pool:n}}var Ol=Error(r(460)),Jv=Error(r(474)),Fu=Error(r(542)),jf={then:function(){}};function ey(n){return n=n.status,n==="fulfilled"||n==="rejected"}function qu(){}function ty(n,i,a){switch(a=n[a],a===void 0?n.push(i):a!==i&&(i.then(qu,qu),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,sy(n),n;default:if(typeof i.status=="string")i.then(qu,qu);else{if(n=ot,n!==null&&100<n.shellSuspendCounter)throw Error(r(482));n=i,n.status="pending",n.then(function(c){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=c}},function(c){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=c}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,sy(n),n}throw Ml=i,Ol}}var Ml=null;function ny(){if(Ml===null)throw Error(r(459));var n=Ml;return Ml=null,n}function sy(n){if(n===Ol||n===Fu)throw Error(r(483))}var Oi=!1;function Df(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Of(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Mi(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Pi(n,i,a){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(We&2)!==0){var f=c.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),c.pending=i,i=Ou(n),Bv(n,null,a),i}return Du(n,c,i,a),Ou(n)}function Pl(n,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var c=i.lanes;c&=n.pendingLanes,a|=c,i.lanes=a,cl(n,a)}}function Mf(n,i){var a=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var f=null,p=null;if(a=a.firstBaseUpdate,a!==null){do{var T={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};p===null?f=p=T:p=p.next=T,a=a.next}while(a!==null);p===null?f=p=i:p=p.next=i}else f=p=i;a={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:p,shared:c.shared,callbacks:c.callbacks},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=i:n.next=i,a.lastBaseUpdate=i}var Pf=!1;function kl(){if(Pf){var n=to;if(n!==null)throw n}}function Vl(n,i,a,c){Pf=!1;var f=n.updateQueue;Oi=!1;var p=f.firstBaseUpdate,T=f.lastBaseUpdate,N=f.shared.pending;if(N!==null){f.shared.pending=null;var P=N,H=P.next;P.next=null,T===null?p=H:T.next=H,T=P;var J=n.alternate;J!==null&&(J=J.updateQueue,N=J.lastBaseUpdate,N!==T&&(N===null?J.firstBaseUpdate=H:N.next=H,J.lastBaseUpdate=P))}if(p!==null){var ne=f.baseState;T=0,J=H=P=null,N=p;do{var G=N.lane&-536870913,Y=G!==N.lane;if(Y?(He&G)===G:(c&G)===G){G!==0&&G===eo&&(Pf=!0),J!==null&&(J=J.next={lane:0,tag:N.tag,payload:N.payload,callback:null,next:null});e:{var Ie=n,be=N;G=i;var nt=a;switch(be.tag){case 1:if(Ie=be.payload,typeof Ie=="function"){ne=Ie.call(nt,ne,G);break e}ne=Ie;break e;case 3:Ie.flags=Ie.flags&-65537|128;case 0:if(Ie=be.payload,G=typeof Ie=="function"?Ie.call(nt,ne,G):Ie,G==null)break e;ne=_({},ne,G);break e;case 2:Oi=!0}}G=N.callback,G!==null&&(n.flags|=64,Y&&(n.flags|=8192),Y=f.callbacks,Y===null?f.callbacks=[G]:Y.push(G))}else Y={lane:G,tag:N.tag,payload:N.payload,callback:N.callback,next:null},J===null?(H=J=Y,P=ne):J=J.next=Y,T|=G;if(N=N.next,N===null){if(N=f.shared.pending,N===null)break;Y=N,N=Y.next,Y.next=null,f.lastBaseUpdate=Y,f.shared.pending=null}}while(!0);J===null&&(P=ne),f.baseState=P,f.firstBaseUpdate=H,f.lastBaseUpdate=J,p===null&&(f.shared.lanes=0),Bi|=T,n.lanes=T,n.memoizedState=ne}}function iy(n,i){if(typeof n!="function")throw Error(r(191,n));n.call(i)}function ry(n,i){var a=n.callbacks;if(a!==null)for(n.callbacks=null,n=0;n<a.length;n++)iy(a[n],i)}var no=ae(null),zu=ae(0);function ay(n,i){n=fi,le(zu,n),le(no,i),fi=n|i.baseLanes}function kf(){le(zu,fi),le(no,no.current)}function Vf(){fi=zu.current,de(no),de(zu)}var ki=0,Oe=null,et=null,St=null,Bu=!1,so=!1,aa=!1,Hu=0,Ll=0,io=null,lw=0;function Et(){throw Error(r(321))}function Lf(n,i){if(i===null)return!1;for(var a=0;a<i.length&&a<n.length;a++)if(!Rn(n[a],i[a]))return!1;return!0}function Uf(n,i,a,c,f,p){return ki=p,Oe=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Q.H=n===null||n.memoizedState===null?By:Hy,aa=!1,p=a(c,f),aa=!1,so&&(p=ly(i,a,c,f)),oy(n),p}function oy(n){Q.H=Xu;var i=et!==null&&et.next!==null;if(ki=0,St=et=Oe=null,Bu=!1,Ll=0,io=null,i)throw Error(r(300));n===null||qt||(n=n.dependencies,n!==null&&Vu(n)&&(qt=!0))}function ly(n,i,a,c){Oe=n;var f=0;do{if(so&&(io=null),Ll=0,so=!1,25<=f)throw Error(r(301));if(f+=1,St=et=null,n.updateQueue!=null){var p=n.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}Q.H=pw,p=i(a,c)}while(so);return p}function cw(){var n=Q.H,i=n.useState()[0];return i=typeof i.then=="function"?Ul(i):i,n=n.useState()[0],(et!==null?et.memoizedState:null)!==n&&(Oe.flags|=1024),i}function Ff(){var n=Hu!==0;return Hu=0,n}function qf(n,i,a){i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~a}function zf(n){if(Bu){for(n=n.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Bu=!1}ki=0,St=et=Oe=null,so=!1,Ll=Hu=0,io=null}function En(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return St===null?Oe.memoizedState=St=n:St=St.next=n,St}function wt(){if(et===null){var n=Oe.alternate;n=n!==null?n.memoizedState:null}else n=et.next;var i=St===null?Oe.memoizedState:St.next;if(i!==null)St=i,et=n;else{if(n===null)throw Oe.alternate===null?Error(r(467)):Error(r(310));et=n,n={memoizedState:et.memoizedState,baseState:et.baseState,baseQueue:et.baseQueue,queue:et.queue,next:null},St===null?Oe.memoizedState=St=n:St=St.next=n}return St}function Bf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ul(n){var i=Ll;return Ll+=1,io===null&&(io=[]),n=ty(io,n,i),i=Oe,(St===null?i.memoizedState:St.next)===null&&(i=i.alternate,Q.H=i===null||i.memoizedState===null?By:Hy),n}function Gu(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Ul(n);if(n.$$typeof===K)return an(n)}throw Error(r(438,String(n)))}function Hf(n){var i=null,a=Oe.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var c=Oe.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(i={data:c.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=Bf(),Oe.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(n),c=0;c<n;c++)a[c]=j;return i.index++,a}function oi(n,i){return typeof i=="function"?i(n):i}function $u(n){var i=wt();return Gf(i,et,n)}function Gf(n,i,a){var c=n.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=a;var f=n.baseQueue,p=c.pending;if(p!==null){if(f!==null){var T=f.next;f.next=p.next,p.next=T}i.baseQueue=f=p,c.pending=null}if(p=n.baseState,f===null)n.memoizedState=p;else{i=f.next;var N=T=null,P=null,H=i,J=!1;do{var ne=H.lane&-536870913;if(ne!==H.lane?(He&ne)===ne:(ki&ne)===ne){var G=H.revertLane;if(G===0)P!==null&&(P=P.next={lane:0,revertLane:0,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null}),ne===eo&&(J=!0);else if((ki&G)===G){H=H.next,G===eo&&(J=!0);continue}else ne={lane:0,revertLane:H.revertLane,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},P===null?(N=P=ne,T=p):P=P.next=ne,Oe.lanes|=G,Bi|=G;ne=H.action,aa&&a(p,ne),p=H.hasEagerState?H.eagerState:a(p,ne)}else G={lane:ne,revertLane:H.revertLane,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},P===null?(N=P=G,T=p):P=P.next=G,Oe.lanes|=ne,Bi|=ne;H=H.next}while(H!==null&&H!==i);if(P===null?T=p:P.next=N,!Rn(p,n.memoizedState)&&(qt=!0,J&&(a=to,a!==null)))throw a;n.memoizedState=p,n.baseState=T,n.baseQueue=P,c.lastRenderedState=p}return f===null&&(c.lanes=0),[n.memoizedState,c.dispatch]}function $f(n){var i=wt(),a=i.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=n;var c=a.dispatch,f=a.pending,p=i.memoizedState;if(f!==null){a.pending=null;var T=f=f.next;do p=n(p,T.action),T=T.next;while(T!==f);Rn(p,i.memoizedState)||(qt=!0),i.memoizedState=p,i.baseQueue===null&&(i.baseState=p),a.lastRenderedState=p}return[p,c]}function cy(n,i,a){var c=Oe,f=wt(),p=Ye;if(p){if(a===void 0)throw Error(r(407));a=a()}else a=i();var T=!Rn((et||f).memoizedState,a);T&&(f.memoizedState=a,qt=!0),f=f.queue;var N=hy.bind(null,c,f,n);if(Fl(2048,8,N,[n]),f.getSnapshot!==i||T||St!==null&&St.memoizedState.tag&1){if(c.flags|=2048,ro(9,Ku(),dy.bind(null,c,f,a,i),null),ot===null)throw Error(r(349));p||(ki&124)!==0||uy(c,i,a)}return a}function uy(n,i,a){n.flags|=16384,n={getSnapshot:i,value:a},i=Oe.updateQueue,i===null?(i=Bf(),Oe.updateQueue=i,i.stores=[n]):(a=i.stores,a===null?i.stores=[n]:a.push(n))}function dy(n,i,a,c){i.value=a,i.getSnapshot=c,fy(i)&&my(n)}function hy(n,i,a){return a(function(){fy(i)&&my(n)})}function fy(n){var i=n.getSnapshot;n=n.value;try{var a=i();return!Rn(n,a)}catch{return!0}}function my(n){var i=Xa(n,2);i!==null&&kn(i,n,2)}function Kf(n){var i=En();if(typeof n=="function"){var a=n;if(n=a(),aa){In(!0);try{a()}finally{In(!1)}}}return i.memoizedState=i.baseState=n,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:oi,lastRenderedState:n},i}function py(n,i,a,c){return n.baseState=a,Gf(n,et,typeof c=="function"?c:oi)}function uw(n,i,a,c,f){if(Qu(n))throw Error(r(485));if(n=i.action,n!==null){var p={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){p.listeners.push(T)}};Q.T!==null?a(!0):p.isTransition=!1,c(p),a=i.pending,a===null?(p.next=i.pending=p,gy(i,p)):(p.next=a.next,i.pending=a.next=p)}}function gy(n,i){var a=i.action,c=i.payload,f=n.state;if(i.isTransition){var p=Q.T,T={};Q.T=T;try{var N=a(f,c),P=Q.S;P!==null&&P(T,N),vy(n,i,N)}catch(H){Yf(n,i,H)}finally{Q.T=p}}else try{p=a(f,c),vy(n,i,p)}catch(H){Yf(n,i,H)}}function vy(n,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(c){yy(n,i,c)},function(c){return Yf(n,i,c)}):yy(n,i,a)}function yy(n,i,a){i.status="fulfilled",i.value=a,_y(i),n.state=a,i=n.pending,i!==null&&(a=i.next,a===i?n.pending=null:(a=a.next,i.next=a,gy(n,a)))}function Yf(n,i,a){var c=n.pending;if(n.pending=null,c!==null){c=c.next;do i.status="rejected",i.reason=a,_y(i),i=i.next;while(i!==c)}n.action=null}function _y(n){n=n.listeners;for(var i=0;i<n.length;i++)(0,n[i])()}function Ey(n,i){return i}function Ty(n,i){if(Ye){var a=ot.formState;if(a!==null){e:{var c=Oe;if(Ye){if(gt){t:{for(var f=gt,p=Rs;f.nodeType!==8;){if(!p){f=null;break t}if(f=cs(f.nextSibling),f===null){f=null;break t}}p=f.data,f=p==="F!"||p==="F"?f:null}if(f){gt=cs(f.nextSibling),c=f.data==="F!";break e}}na(c)}c=!1}c&&(i=a[0])}}return a=En(),a.memoizedState=a.baseState=i,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ey,lastRenderedState:i},a.queue=c,a=Fy.bind(null,Oe,c),c.dispatch=a,c=Kf(!1),p=Jf.bind(null,Oe,!1,c.queue),c=En(),f={state:i,dispatch:null,action:n,pending:null},c.queue=f,a=uw.bind(null,Oe,f,p,a),f.dispatch=a,c.memoizedState=n,[i,a,!1]}function by(n){var i=wt();return Ay(i,et,n)}function Ay(n,i,a){if(i=Gf(n,i,Ey)[0],n=$u(oi)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var c=Ul(i)}catch(T){throw T===Ol?Fu:T}else c=i;i=wt();var f=i.queue,p=f.dispatch;return a!==i.memoizedState&&(Oe.flags|=2048,ro(9,Ku(),dw.bind(null,f,a),null)),[c,p,n]}function dw(n,i){n.action=i}function Ny(n){var i=wt(),a=et;if(a!==null)return Ay(i,a,n);wt(),i=i.memoizedState,a=wt();var c=a.queue.dispatch;return a.memoizedState=n,[i,c,!1]}function ro(n,i,a,c){return n={tag:n,create:a,deps:c,inst:i,next:null},i=Oe.updateQueue,i===null&&(i=Bf(),Oe.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=n.next=n:(c=a.next,a.next=n,n.next=c,i.lastEffect=n),n}function Ku(){return{destroy:void 0,resource:void 0}}function Sy(){return wt().memoizedState}function Yu(n,i,a,c){var f=En();c=c===void 0?null:c,Oe.flags|=n,f.memoizedState=ro(1|i,Ku(),a,c)}function Fl(n,i,a,c){var f=wt();c=c===void 0?null:c;var p=f.memoizedState.inst;et!==null&&c!==null&&Lf(c,et.memoizedState.deps)?f.memoizedState=ro(i,p,a,c):(Oe.flags|=n,f.memoizedState=ro(1|i,p,a,c))}function wy(n,i){Yu(8390656,8,n,i)}function xy(n,i){Fl(2048,8,n,i)}function Iy(n,i){return Fl(4,2,n,i)}function Cy(n,i){return Fl(4,4,n,i)}function Ry(n,i){if(typeof i=="function"){n=n();var a=i(n);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function jy(n,i,a){a=a!=null?a.concat([n]):null,Fl(4,4,Ry.bind(null,i,n),a)}function Qf(){}function Dy(n,i){var a=wt();i=i===void 0?null:i;var c=a.memoizedState;return i!==null&&Lf(i,c[1])?c[0]:(a.memoizedState=[n,i],n)}function Oy(n,i){var a=wt();i=i===void 0?null:i;var c=a.memoizedState;if(i!==null&&Lf(i,c[1]))return c[0];if(c=n(),aa){In(!0);try{n()}finally{In(!1)}}return a.memoizedState=[c,i],c}function Xf(n,i,a){return a===void 0||(ki&1073741824)!==0?n.memoizedState=i:(n.memoizedState=a,n=k_(),Oe.lanes|=n,Bi|=n,a)}function My(n,i,a,c){return Rn(a,i)?a:no.current!==null?(n=Xf(n,a,c),Rn(n,i)||(qt=!0),n):(ki&42)===0?(qt=!0,n.memoizedState=a):(n=k_(),Oe.lanes|=n,Bi|=n,i)}function Py(n,i,a,c,f){var p=ie.p;ie.p=p!==0&&8>p?p:8;var T=Q.T,N={};Q.T=N,Jf(n,!1,i,a);try{var P=f(),H=Q.S;if(H!==null&&H(N,P),P!==null&&typeof P=="object"&&typeof P.then=="function"){var J=ow(P,c);ql(n,i,J,Pn(n))}else ql(n,i,c,Pn(n))}catch(ne){ql(n,i,{then:function(){},status:"rejected",reason:ne},Pn())}finally{ie.p=p,Q.T=T}}function hw(){}function Wf(n,i,a,c){if(n.tag!==5)throw Error(r(476));var f=ky(n).queue;Py(n,f,i,ue,a===null?hw:function(){return Vy(n),a(c)})}function ky(n){var i=n.memoizedState;if(i!==null)return i;i={memoizedState:ue,baseState:ue,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:oi,lastRenderedState:ue},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:oi,lastRenderedState:a},next:null},n.memoizedState=i,n=n.alternate,n!==null&&(n.memoizedState=i),i}function Vy(n){var i=ky(n).next.queue;ql(n,i,{},Pn())}function Zf(){return an(rc)}function Ly(){return wt().memoizedState}function Uy(){return wt().memoizedState}function fw(n){for(var i=n.return;i!==null;){switch(i.tag){case 24:case 3:var a=Pn();n=Mi(a);var c=Pi(i,n,a);c!==null&&(kn(c,i,a),Pl(c,i,a)),i={cache:If()},n.payload=i;return}i=i.return}}function mw(n,i,a){var c=Pn();a={lane:c,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},Qu(n)?qy(i,a):(a=yf(n,i,a,c),a!==null&&(kn(a,n,c),zy(a,i,c)))}function Fy(n,i,a){var c=Pn();ql(n,i,a,c)}function ql(n,i,a,c){var f={lane:c,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(Qu(n))qy(i,f);else{var p=n.alternate;if(n.lanes===0&&(p===null||p.lanes===0)&&(p=i.lastRenderedReducer,p!==null))try{var T=i.lastRenderedState,N=p(T,a);if(f.hasEagerState=!0,f.eagerState=N,Rn(N,T))return Du(n,i,f,0),ot===null&&ju(),!1}catch{}finally{}if(a=yf(n,i,f,c),a!==null)return kn(a,n,c),zy(a,i,c),!0}return!1}function Jf(n,i,a,c){if(c={lane:2,revertLane:jm(),action:c,hasEagerState:!1,eagerState:null,next:null},Qu(n)){if(i)throw Error(r(479))}else i=yf(n,a,c,2),i!==null&&kn(i,n,2)}function Qu(n){var i=n.alternate;return n===Oe||i!==null&&i===Oe}function qy(n,i){so=Bu=!0;var a=n.pending;a===null?i.next=i:(i.next=a.next,a.next=i),n.pending=i}function zy(n,i,a){if((a&4194048)!==0){var c=i.lanes;c&=n.pendingLanes,a|=c,i.lanes=a,cl(n,a)}}var Xu={readContext:an,use:Gu,useCallback:Et,useContext:Et,useEffect:Et,useImperativeHandle:Et,useLayoutEffect:Et,useInsertionEffect:Et,useMemo:Et,useReducer:Et,useRef:Et,useState:Et,useDebugValue:Et,useDeferredValue:Et,useTransition:Et,useSyncExternalStore:Et,useId:Et,useHostTransitionStatus:Et,useFormState:Et,useActionState:Et,useOptimistic:Et,useMemoCache:Et,useCacheRefresh:Et},By={readContext:an,use:Gu,useCallback:function(n,i){return En().memoizedState=[n,i===void 0?null:i],n},useContext:an,useEffect:wy,useImperativeHandle:function(n,i,a){a=a!=null?a.concat([n]):null,Yu(4194308,4,Ry.bind(null,i,n),a)},useLayoutEffect:function(n,i){return Yu(4194308,4,n,i)},useInsertionEffect:function(n,i){Yu(4,2,n,i)},useMemo:function(n,i){var a=En();i=i===void 0?null:i;var c=n();if(aa){In(!0);try{n()}finally{In(!1)}}return a.memoizedState=[c,i],c},useReducer:function(n,i,a){var c=En();if(a!==void 0){var f=a(i);if(aa){In(!0);try{a(i)}finally{In(!1)}}}else f=i;return c.memoizedState=c.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},c.queue=n,n=n.dispatch=mw.bind(null,Oe,n),[c.memoizedState,n]},useRef:function(n){var i=En();return n={current:n},i.memoizedState=n},useState:function(n){n=Kf(n);var i=n.queue,a=Fy.bind(null,Oe,i);return i.dispatch=a,[n.memoizedState,a]},useDebugValue:Qf,useDeferredValue:function(n,i){var a=En();return Xf(a,n,i)},useTransition:function(){var n=Kf(!1);return n=Py.bind(null,Oe,n.queue,!0,!1),En().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,i,a){var c=Oe,f=En();if(Ye){if(a===void 0)throw Error(r(407));a=a()}else{if(a=i(),ot===null)throw Error(r(349));(He&124)!==0||uy(c,i,a)}f.memoizedState=a;var p={value:a,getSnapshot:i};return f.queue=p,wy(hy.bind(null,c,p,n),[n]),c.flags|=2048,ro(9,Ku(),dy.bind(null,c,p,a,i),null),a},useId:function(){var n=En(),i=ot.identifierPrefix;if(Ye){var a=ii,c=si;a=(c&~(1<<32-rn(c)-1)).toString(32)+a,i="«"+i+"R"+a,a=Hu++,0<a&&(i+="H"+a.toString(32)),i+="»"}else a=lw++,i="«"+i+"r"+a.toString(32)+"»";return n.memoizedState=i},useHostTransitionStatus:Zf,useFormState:Ty,useActionState:Ty,useOptimistic:function(n){var i=En();i.memoizedState=i.baseState=n;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=Jf.bind(null,Oe,!0,a),a.dispatch=i,[n,i]},useMemoCache:Hf,useCacheRefresh:function(){return En().memoizedState=fw.bind(null,Oe)}},Hy={readContext:an,use:Gu,useCallback:Dy,useContext:an,useEffect:xy,useImperativeHandle:jy,useInsertionEffect:Iy,useLayoutEffect:Cy,useMemo:Oy,useReducer:$u,useRef:Sy,useState:function(){return $u(oi)},useDebugValue:Qf,useDeferredValue:function(n,i){var a=wt();return My(a,et.memoizedState,n,i)},useTransition:function(){var n=$u(oi)[0],i=wt().memoizedState;return[typeof n=="boolean"?n:Ul(n),i]},useSyncExternalStore:cy,useId:Ly,useHostTransitionStatus:Zf,useFormState:by,useActionState:by,useOptimistic:function(n,i){var a=wt();return py(a,et,n,i)},useMemoCache:Hf,useCacheRefresh:Uy},pw={readContext:an,use:Gu,useCallback:Dy,useContext:an,useEffect:xy,useImperativeHandle:jy,useInsertionEffect:Iy,useLayoutEffect:Cy,useMemo:Oy,useReducer:$f,useRef:Sy,useState:function(){return $f(oi)},useDebugValue:Qf,useDeferredValue:function(n,i){var a=wt();return et===null?Xf(a,n,i):My(a,et.memoizedState,n,i)},useTransition:function(){var n=$f(oi)[0],i=wt().memoizedState;return[typeof n=="boolean"?n:Ul(n),i]},useSyncExternalStore:cy,useId:Ly,useHostTransitionStatus:Zf,useFormState:Ny,useActionState:Ny,useOptimistic:function(n,i){var a=wt();return et!==null?py(a,et,n,i):(a.baseState=n,[n,a.queue.dispatch])},useMemoCache:Hf,useCacheRefresh:Uy},ao=null,zl=0;function Wu(n){var i=zl;return zl+=1,ao===null&&(ao=[]),ty(ao,n,i)}function Bl(n,i){i=i.props.ref,n.ref=i!==void 0?i:null}function Zu(n,i){throw i.$$typeof===A?Error(r(525)):(n=Object.prototype.toString.call(i),Error(r(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n)))}function Gy(n){var i=n._init;return i(n._payload)}function $y(n){function i(F,L){if(n){var B=F.deletions;B===null?(F.deletions=[L],F.flags|=16):B.push(L)}}function a(F,L){if(!n)return null;for(;L!==null;)i(F,L),L=L.sibling;return null}function c(F){for(var L=new Map;F!==null;)F.key!==null?L.set(F.key,F):L.set(F.index,F),F=F.sibling;return L}function f(F,L){return F=ni(F,L),F.index=0,F.sibling=null,F}function p(F,L,B){return F.index=B,n?(B=F.alternate,B!==null?(B=B.index,B<L?(F.flags|=67108866,L):B):(F.flags|=67108866,L)):(F.flags|=1048576,L)}function T(F){return n&&F.alternate===null&&(F.flags|=67108866),F}function N(F,L,B,ee){return L===null||L.tag!==6?(L=Ef(B,F.mode,ee),L.return=F,L):(L=f(L,B),L.return=F,L)}function P(F,L,B,ee){var me=B.type;return me===I?J(F,L,B.props.children,ee,B.key):L!==null&&(L.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===S&&Gy(me)===L.type)?(L=f(L,B.props),Bl(L,B),L.return=F,L):(L=Mu(B.type,B.key,B.props,null,F.mode,ee),Bl(L,B),L.return=F,L)}function H(F,L,B,ee){return L===null||L.tag!==4||L.stateNode.containerInfo!==B.containerInfo||L.stateNode.implementation!==B.implementation?(L=Tf(B,F.mode,ee),L.return=F,L):(L=f(L,B.children||[]),L.return=F,L)}function J(F,L,B,ee,me){return L===null||L.tag!==7?(L=Zr(B,F.mode,ee,me),L.return=F,L):(L=f(L,B),L.return=F,L)}function ne(F,L,B){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return L=Ef(""+L,F.mode,B),L.return=F,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case b:return B=Mu(L.type,L.key,L.props,null,F.mode,B),Bl(B,L),B.return=F,B;case O:return L=Tf(L,F.mode,B),L.return=F,L;case S:var ee=L._init;return L=ee(L._payload),ne(F,L,B)}if(Ae(L)||M(L))return L=Zr(L,F.mode,B,null),L.return=F,L;if(typeof L.then=="function")return ne(F,Wu(L),B);if(L.$$typeof===K)return ne(F,Lu(F,L),B);Zu(F,L)}return null}function G(F,L,B,ee){var me=L!==null?L.key:null;if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return me!==null?null:N(F,L,""+B,ee);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case b:return B.key===me?P(F,L,B,ee):null;case O:return B.key===me?H(F,L,B,ee):null;case S:return me=B._init,B=me(B._payload),G(F,L,B,ee)}if(Ae(B)||M(B))return me!==null?null:J(F,L,B,ee,null);if(typeof B.then=="function")return G(F,L,Wu(B),ee);if(B.$$typeof===K)return G(F,L,Lu(F,B),ee);Zu(F,B)}return null}function Y(F,L,B,ee,me){if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return F=F.get(B)||null,N(L,F,""+ee,me);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case b:return F=F.get(ee.key===null?B:ee.key)||null,P(L,F,ee,me);case O:return F=F.get(ee.key===null?B:ee.key)||null,H(L,F,ee,me);case S:var ke=ee._init;return ee=ke(ee._payload),Y(F,L,B,ee,me)}if(Ae(ee)||M(ee))return F=F.get(B)||null,J(L,F,ee,me,null);if(typeof ee.then=="function")return Y(F,L,B,Wu(ee),me);if(ee.$$typeof===K)return Y(F,L,B,Lu(L,ee),me);Zu(L,ee)}return null}function Ie(F,L,B,ee){for(var me=null,ke=null,ge=L,Ne=L=0,Bt=null;ge!==null&&Ne<B.length;Ne++){ge.index>Ne?(Bt=ge,ge=null):Bt=ge.sibling;var Ke=G(F,ge,B[Ne],ee);if(Ke===null){ge===null&&(ge=Bt);break}n&&ge&&Ke.alternate===null&&i(F,ge),L=p(Ke,L,Ne),ke===null?me=Ke:ke.sibling=Ke,ke=Ke,ge=Bt}if(Ne===B.length)return a(F,ge),Ye&&ea(F,Ne),me;if(ge===null){for(;Ne<B.length;Ne++)ge=ne(F,B[Ne],ee),ge!==null&&(L=p(ge,L,Ne),ke===null?me=ge:ke.sibling=ge,ke=ge);return Ye&&ea(F,Ne),me}for(ge=c(ge);Ne<B.length;Ne++)Bt=Y(ge,F,Ne,B[Ne],ee),Bt!==null&&(n&&Bt.alternate!==null&&ge.delete(Bt.key===null?Ne:Bt.key),L=p(Bt,L,Ne),ke===null?me=Bt:ke.sibling=Bt,ke=Bt);return n&&ge.forEach(function(Zi){return i(F,Zi)}),Ye&&ea(F,Ne),me}function be(F,L,B,ee){if(B==null)throw Error(r(151));for(var me=null,ke=null,ge=L,Ne=L=0,Bt=null,Ke=B.next();ge!==null&&!Ke.done;Ne++,Ke=B.next()){ge.index>Ne?(Bt=ge,ge=null):Bt=ge.sibling;var Zi=G(F,ge,Ke.value,ee);if(Zi===null){ge===null&&(ge=Bt);break}n&&ge&&Zi.alternate===null&&i(F,ge),L=p(Zi,L,Ne),ke===null?me=Zi:ke.sibling=Zi,ke=Zi,ge=Bt}if(Ke.done)return a(F,ge),Ye&&ea(F,Ne),me;if(ge===null){for(;!Ke.done;Ne++,Ke=B.next())Ke=ne(F,Ke.value,ee),Ke!==null&&(L=p(Ke,L,Ne),ke===null?me=Ke:ke.sibling=Ke,ke=Ke);return Ye&&ea(F,Ne),me}for(ge=c(ge);!Ke.done;Ne++,Ke=B.next())Ke=Y(ge,F,Ne,Ke.value,ee),Ke!==null&&(n&&Ke.alternate!==null&&ge.delete(Ke.key===null?Ne:Ke.key),L=p(Ke,L,Ne),ke===null?me=Ke:ke.sibling=Ke,ke=Ke);return n&&ge.forEach(function(gx){return i(F,gx)}),Ye&&ea(F,Ne),me}function nt(F,L,B,ee){if(typeof B=="object"&&B!==null&&B.type===I&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case b:e:{for(var me=B.key;L!==null;){if(L.key===me){if(me=B.type,me===I){if(L.tag===7){a(F,L.sibling),ee=f(L,B.props.children),ee.return=F,F=ee;break e}}else if(L.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===S&&Gy(me)===L.type){a(F,L.sibling),ee=f(L,B.props),Bl(ee,B),ee.return=F,F=ee;break e}a(F,L);break}else i(F,L);L=L.sibling}B.type===I?(ee=Zr(B.props.children,F.mode,ee,B.key),ee.return=F,F=ee):(ee=Mu(B.type,B.key,B.props,null,F.mode,ee),Bl(ee,B),ee.return=F,F=ee)}return T(F);case O:e:{for(me=B.key;L!==null;){if(L.key===me)if(L.tag===4&&L.stateNode.containerInfo===B.containerInfo&&L.stateNode.implementation===B.implementation){a(F,L.sibling),ee=f(L,B.children||[]),ee.return=F,F=ee;break e}else{a(F,L);break}else i(F,L);L=L.sibling}ee=Tf(B,F.mode,ee),ee.return=F,F=ee}return T(F);case S:return me=B._init,B=me(B._payload),nt(F,L,B,ee)}if(Ae(B))return Ie(F,L,B,ee);if(M(B)){if(me=M(B),typeof me!="function")throw Error(r(150));return B=me.call(B),be(F,L,B,ee)}if(typeof B.then=="function")return nt(F,L,Wu(B),ee);if(B.$$typeof===K)return nt(F,L,Lu(F,B),ee);Zu(F,B)}return typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint"?(B=""+B,L!==null&&L.tag===6?(a(F,L.sibling),ee=f(L,B),ee.return=F,F=ee):(a(F,L),ee=Ef(B,F.mode,ee),ee.return=F,F=ee),T(F)):a(F,L)}return function(F,L,B,ee){try{zl=0;var me=nt(F,L,B,ee);return ao=null,me}catch(ge){if(ge===Ol||ge===Fu)throw ge;var ke=jn(29,ge,null,F.mode);return ke.lanes=ee,ke.return=F,ke}finally{}}}var oo=$y(!0),Ky=$y(!1),Zn=ae(null),js=null;function Vi(n){var i=n.alternate;le(Ot,Ot.current&1),le(Zn,n),js===null&&(i===null||no.current!==null||i.memoizedState!==null)&&(js=n)}function Yy(n){if(n.tag===22){if(le(Ot,Ot.current),le(Zn,n),js===null){var i=n.alternate;i!==null&&i.memoizedState!==null&&(js=n)}}else Li()}function Li(){le(Ot,Ot.current),le(Zn,Zn.current)}function li(n){de(Zn),js===n&&(js=null),de(Ot)}var Ot=ae(0);function Ju(n){for(var i=n;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||Bm(a)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function em(n,i,a,c){i=n.memoizedState,a=a(c,i),a=a==null?i:_({},i,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var tm={enqueueSetState:function(n,i,a){n=n._reactInternals;var c=Pn(),f=Mi(c);f.payload=i,a!=null&&(f.callback=a),i=Pi(n,f,c),i!==null&&(kn(i,n,c),Pl(i,n,c))},enqueueReplaceState:function(n,i,a){n=n._reactInternals;var c=Pn(),f=Mi(c);f.tag=1,f.payload=i,a!=null&&(f.callback=a),i=Pi(n,f,c),i!==null&&(kn(i,n,c),Pl(i,n,c))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var a=Pn(),c=Mi(a);c.tag=2,i!=null&&(c.callback=i),i=Pi(n,c,a),i!==null&&(kn(i,n,a),Pl(i,n,a))}};function Qy(n,i,a,c,f,p,T){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,p,T):i.prototype&&i.prototype.isPureReactComponent?!Sl(a,c)||!Sl(f,p):!0}function Xy(n,i,a,c){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,c),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,c),i.state!==n&&tm.enqueueReplaceState(i,i.state,null)}function oa(n,i){var a=i;if("ref"in i){a={};for(var c in i)c!=="ref"&&(a[c]=i[c])}if(n=n.defaultProps){a===i&&(a=_({},a));for(var f in n)a[f]===void 0&&(a[f]=n[f])}return a}var ed=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function Wy(n){ed(n)}function Zy(n){console.error(n)}function Jy(n){ed(n)}function td(n,i){try{var a=n.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(c){setTimeout(function(){throw c})}}function e_(n,i,a){try{var c=n.onCaughtError;c(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function nm(n,i,a){return a=Mi(a),a.tag=3,a.payload={element:null},a.callback=function(){td(n,i)},a}function t_(n){return n=Mi(n),n.tag=3,n}function n_(n,i,a,c){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var p=c.value;n.payload=function(){return f(p)},n.callback=function(){e_(i,a,c)}}var T=a.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(n.callback=function(){e_(i,a,c),typeof f!="function"&&(Hi===null?Hi=new Set([this]):Hi.add(this));var N=c.stack;this.componentDidCatch(c.value,{componentStack:N!==null?N:""})})}function gw(n,i,a,c,f){if(a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(i=a.alternate,i!==null&&Rl(i,a,f,!0),a=Zn.current,a!==null){switch(a.tag){case 13:return js===null?wm():a.alternate===null&&vt===0&&(vt=3),a.flags&=-257,a.flags|=65536,a.lanes=f,c===jf?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([c]):i.add(c),Im(n,c,f)),!1;case 22:return a.flags|=65536,c===jf?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([c])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([c]):a.add(c)),Im(n,c,f)),!1}throw Error(r(435,a.tag))}return Im(n,c,f),wm(),!1}if(Ye)return i=Zn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,c!==Nf&&(n=Error(r(422),{cause:c}),Cl(Yn(n,a)))):(c!==Nf&&(i=Error(r(423),{cause:c}),Cl(Yn(i,a))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,c=Yn(c,a),f=nm(n.stateNode,c,f),Mf(n,f),vt!==4&&(vt=2)),!1;var p=Error(r(520),{cause:c});if(p=Yn(p,a),Xl===null?Xl=[p]:Xl.push(p),vt!==4&&(vt=2),i===null)return!0;c=Yn(c,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,n=f&-f,a.lanes|=n,n=nm(a.stateNode,c,n),Mf(a,n),!1;case 1:if(i=a.type,p=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(Hi===null||!Hi.has(p))))return a.flags|=65536,f&=-f,a.lanes|=f,f=t_(f),n_(f,n,a,c),Mf(a,f),!1}a=a.return}while(a!==null);return!1}var s_=Error(r(461)),qt=!1;function Yt(n,i,a,c){i.child=n===null?Ky(i,null,a,c):oo(i,n.child,a,c)}function i_(n,i,a,c,f){a=a.render;var p=i.ref;if("ref"in c){var T={};for(var N in c)N!=="ref"&&(T[N]=c[N])}else T=c;return ia(i),c=Uf(n,i,a,T,p,f),N=Ff(),n!==null&&!qt?(qf(n,i,f),ci(n,i,f)):(Ye&&N&&bf(i),i.flags|=1,Yt(n,i,c,f),i.child)}function r_(n,i,a,c,f){if(n===null){var p=a.type;return typeof p=="function"&&!_f(p)&&p.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=p,a_(n,i,p,c,f)):(n=Mu(a.type,null,c,i,i.mode,f),n.ref=i.ref,n.return=i,i.child=n)}if(p=n.child,!um(n,f)){var T=p.memoizedProps;if(a=a.compare,a=a!==null?a:Sl,a(T,c)&&n.ref===i.ref)return ci(n,i,f)}return i.flags|=1,n=ni(p,c),n.ref=i.ref,n.return=i,i.child=n}function a_(n,i,a,c,f){if(n!==null){var p=n.memoizedProps;if(Sl(p,c)&&n.ref===i.ref)if(qt=!1,i.pendingProps=c=p,um(n,f))(n.flags&131072)!==0&&(qt=!0);else return i.lanes=n.lanes,ci(n,i,f)}return sm(n,i,a,c,f)}function o_(n,i,a){var c=i.pendingProps,f=c.children,p=n!==null?n.memoizedState:null;if(c.mode==="hidden"){if((i.flags&128)!==0){if(c=p!==null?p.baseLanes|a:a,n!==null){for(f=i.child=n.child,p=0;f!==null;)p=p|f.lanes|f.childLanes,f=f.sibling;i.childLanes=p&~c}else i.childLanes=0,i.child=null;return l_(n,i,c,a)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},n!==null&&Uu(i,p!==null?p.cachePool:null),p!==null?ay(i,p):kf(),Yy(i);else return i.lanes=i.childLanes=536870912,l_(n,i,p!==null?p.baseLanes|a:a,a)}else p!==null?(Uu(i,p.cachePool),ay(i,p),Li(),i.memoizedState=null):(n!==null&&Uu(i,null),kf(),Li());return Yt(n,i,f,a),i.child}function l_(n,i,a,c){var f=Rf();return f=f===null?null:{parent:Dt._currentValue,pool:f},i.memoizedState={baseLanes:a,cachePool:f},n!==null&&Uu(i,null),kf(),Yy(i),n!==null&&Rl(n,i,c,!0),null}function nd(n,i){var a=i.ref;if(a===null)n!==null&&n.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(n===null||n.ref!==a)&&(i.flags|=4194816)}}function sm(n,i,a,c,f){return ia(i),a=Uf(n,i,a,c,void 0,f),c=Ff(),n!==null&&!qt?(qf(n,i,f),ci(n,i,f)):(Ye&&c&&bf(i),i.flags|=1,Yt(n,i,a,f),i.child)}function c_(n,i,a,c,f,p){return ia(i),i.updateQueue=null,a=ly(i,c,a,f),oy(n),c=Ff(),n!==null&&!qt?(qf(n,i,p),ci(n,i,p)):(Ye&&c&&bf(i),i.flags|=1,Yt(n,i,a,p),i.child)}function u_(n,i,a,c,f){if(ia(i),i.stateNode===null){var p=Wa,T=a.contextType;typeof T=="object"&&T!==null&&(p=an(T)),p=new a(c,p),i.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=tm,i.stateNode=p,p._reactInternals=i,p=i.stateNode,p.props=c,p.state=i.memoizedState,p.refs={},Df(i),T=a.contextType,p.context=typeof T=="object"&&T!==null?an(T):Wa,p.state=i.memoizedState,T=a.getDerivedStateFromProps,typeof T=="function"&&(em(i,a,T,c),p.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(T=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),T!==p.state&&tm.enqueueReplaceState(p,p.state,null),Vl(i,c,p,f),kl(),p.state=i.memoizedState),typeof p.componentDidMount=="function"&&(i.flags|=4194308),c=!0}else if(n===null){p=i.stateNode;var N=i.memoizedProps,P=oa(a,N);p.props=P;var H=p.context,J=a.contextType;T=Wa,typeof J=="object"&&J!==null&&(T=an(J));var ne=a.getDerivedStateFromProps;J=typeof ne=="function"||typeof p.getSnapshotBeforeUpdate=="function",N=i.pendingProps!==N,J||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(N||H!==T)&&Xy(i,p,c,T),Oi=!1;var G=i.memoizedState;p.state=G,Vl(i,c,p,f),kl(),H=i.memoizedState,N||G!==H||Oi?(typeof ne=="function"&&(em(i,a,ne,c),H=i.memoizedState),(P=Oi||Qy(i,a,P,c,G,H,T))?(J||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(i.flags|=4194308)):(typeof p.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=c,i.memoizedState=H),p.props=c,p.state=H,p.context=T,c=P):(typeof p.componentDidMount=="function"&&(i.flags|=4194308),c=!1)}else{p=i.stateNode,Of(n,i),T=i.memoizedProps,J=oa(a,T),p.props=J,ne=i.pendingProps,G=p.context,H=a.contextType,P=Wa,typeof H=="object"&&H!==null&&(P=an(H)),N=a.getDerivedStateFromProps,(H=typeof N=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(T!==ne||G!==P)&&Xy(i,p,c,P),Oi=!1,G=i.memoizedState,p.state=G,Vl(i,c,p,f),kl();var Y=i.memoizedState;T!==ne||G!==Y||Oi||n!==null&&n.dependencies!==null&&Vu(n.dependencies)?(typeof N=="function"&&(em(i,a,N,c),Y=i.memoizedState),(J=Oi||Qy(i,a,J,c,G,Y,P)||n!==null&&n.dependencies!==null&&Vu(n.dependencies))?(H||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(c,Y,P),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(c,Y,P)),typeof p.componentDidUpdate=="function"&&(i.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof p.componentDidUpdate!="function"||T===n.memoizedProps&&G===n.memoizedState||(i.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||T===n.memoizedProps&&G===n.memoizedState||(i.flags|=1024),i.memoizedProps=c,i.memoizedState=Y),p.props=c,p.state=Y,p.context=P,c=J):(typeof p.componentDidUpdate!="function"||T===n.memoizedProps&&G===n.memoizedState||(i.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||T===n.memoizedProps&&G===n.memoizedState||(i.flags|=1024),c=!1)}return p=c,nd(n,i),c=(i.flags&128)!==0,p||c?(p=i.stateNode,a=c&&typeof a.getDerivedStateFromError!="function"?null:p.render(),i.flags|=1,n!==null&&c?(i.child=oo(i,n.child,null,f),i.child=oo(i,null,a,f)):Yt(n,i,a,f),i.memoizedState=p.state,n=i.child):n=ci(n,i,f),n}function d_(n,i,a,c){return Il(),i.flags|=256,Yt(n,i,a,c),i.child}var im={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function rm(n){return{baseLanes:n,cachePool:Zv()}}function am(n,i,a){return n=n!==null?n.childLanes&~a:0,i&&(n|=Jn),n}function h_(n,i,a){var c=i.pendingProps,f=!1,p=(i.flags&128)!==0,T;if((T=p)||(T=n!==null&&n.memoizedState===null?!1:(Ot.current&2)!==0),T&&(f=!0,i.flags&=-129),T=(i.flags&32)!==0,i.flags&=-33,n===null){if(Ye){if(f?Vi(i):Li(),Ye){var N=gt,P;if(P=N){e:{for(P=N,N=Rs;P.nodeType!==8;){if(!N){N=null;break e}if(P=cs(P.nextSibling),P===null){N=null;break e}}N=P}N!==null?(i.memoizedState={dehydrated:N,treeContext:Jr!==null?{id:si,overflow:ii}:null,retryLane:536870912,hydrationErrors:null},P=jn(18,null,null,0),P.stateNode=N,P.return=i,i.child=P,gn=i,gt=null,P=!0):P=!1}P||na(i)}if(N=i.memoizedState,N!==null&&(N=N.dehydrated,N!==null))return Bm(N)?i.lanes=32:i.lanes=536870912,null;li(i)}return N=c.children,c=c.fallback,f?(Li(),f=i.mode,N=sd({mode:"hidden",children:N},f),c=Zr(c,f,a,null),N.return=i,c.return=i,N.sibling=c,i.child=N,f=i.child,f.memoizedState=rm(a),f.childLanes=am(n,T,a),i.memoizedState=im,c):(Vi(i),om(i,N))}if(P=n.memoizedState,P!==null&&(N=P.dehydrated,N!==null)){if(p)i.flags&256?(Vi(i),i.flags&=-257,i=lm(n,i,a)):i.memoizedState!==null?(Li(),i.child=n.child,i.flags|=128,i=null):(Li(),f=c.fallback,N=i.mode,c=sd({mode:"visible",children:c.children},N),f=Zr(f,N,a,null),f.flags|=2,c.return=i,f.return=i,c.sibling=f,i.child=c,oo(i,n.child,null,a),c=i.child,c.memoizedState=rm(a),c.childLanes=am(n,T,a),i.memoizedState=im,i=f);else if(Vi(i),Bm(N)){if(T=N.nextSibling&&N.nextSibling.dataset,T)var H=T.dgst;T=H,c=Error(r(419)),c.stack="",c.digest=T,Cl({value:c,source:null,stack:null}),i=lm(n,i,a)}else if(qt||Rl(n,i,a,!1),T=(a&n.childLanes)!==0,qt||T){if(T=ot,T!==null&&(c=a&-a,c=(c&42)!==0?1:Si(c),c=(c&(T.suspendedLanes|a))!==0?0:c,c!==0&&c!==P.retryLane))throw P.retryLane=c,Xa(n,c),kn(T,n,c),s_;N.data==="$?"||wm(),i=lm(n,i,a)}else N.data==="$?"?(i.flags|=192,i.child=n.child,i=null):(n=P.treeContext,gt=cs(N.nextSibling),gn=i,Ye=!0,ta=null,Rs=!1,n!==null&&(Xn[Wn++]=si,Xn[Wn++]=ii,Xn[Wn++]=Jr,si=n.id,ii=n.overflow,Jr=i),i=om(i,c.children),i.flags|=4096);return i}return f?(Li(),f=c.fallback,N=i.mode,P=n.child,H=P.sibling,c=ni(P,{mode:"hidden",children:c.children}),c.subtreeFlags=P.subtreeFlags&65011712,H!==null?f=ni(H,f):(f=Zr(f,N,a,null),f.flags|=2),f.return=i,c.return=i,c.sibling=f,i.child=c,c=f,f=i.child,N=n.child.memoizedState,N===null?N=rm(a):(P=N.cachePool,P!==null?(H=Dt._currentValue,P=P.parent!==H?{parent:H,pool:H}:P):P=Zv(),N={baseLanes:N.baseLanes|a,cachePool:P}),f.memoizedState=N,f.childLanes=am(n,T,a),i.memoizedState=im,c):(Vi(i),a=n.child,n=a.sibling,a=ni(a,{mode:"visible",children:c.children}),a.return=i,a.sibling=null,n!==null&&(T=i.deletions,T===null?(i.deletions=[n],i.flags|=16):T.push(n)),i.child=a,i.memoizedState=null,a)}function om(n,i){return i=sd({mode:"visible",children:i},n.mode),i.return=n,n.child=i}function sd(n,i){return n=jn(22,n,null,i),n.lanes=0,n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},n}function lm(n,i,a){return oo(i,n.child,null,a),n=om(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function f_(n,i,a){n.lanes|=i;var c=n.alternate;c!==null&&(c.lanes|=i),wf(n.return,i,a)}function cm(n,i,a,c,f){var p=n.memoizedState;p===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:f}:(p.isBackwards=i,p.rendering=null,p.renderingStartTime=0,p.last=c,p.tail=a,p.tailMode=f)}function m_(n,i,a){var c=i.pendingProps,f=c.revealOrder,p=c.tail;if(Yt(n,i,c.children,a),c=Ot.current,(c&2)!==0)c=c&1|2,i.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&f_(n,a,i);else if(n.tag===19)f_(n,a,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}switch(le(Ot,c),f){case"forwards":for(a=i.child,f=null;a!==null;)n=a.alternate,n!==null&&Ju(n)===null&&(f=a),a=a.sibling;a=f,a===null?(f=i.child,i.child=null):(f=a.sibling,a.sibling=null),cm(i,!1,f,a,p);break;case"backwards":for(a=null,f=i.child,i.child=null;f!==null;){if(n=f.alternate,n!==null&&Ju(n)===null){i.child=f;break}n=f.sibling,f.sibling=a,a=f,f=n}cm(i,!0,a,null,p);break;case"together":cm(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function ci(n,i,a){if(n!==null&&(i.dependencies=n.dependencies),Bi|=i.lanes,(a&i.childLanes)===0)if(n!==null){if(Rl(n,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(n!==null&&i.child!==n.child)throw Error(r(153));if(i.child!==null){for(n=i.child,a=ni(n,n.pendingProps),i.child=a,a.return=i;n.sibling!==null;)n=n.sibling,a=a.sibling=ni(n,n.pendingProps),a.return=i;a.sibling=null}return i.child}function um(n,i){return(n.lanes&i)!==0?!0:(n=n.dependencies,!!(n!==null&&Vu(n)))}function vw(n,i,a){switch(i.tag){case 3:at(i,i.stateNode.containerInfo),Di(i,Dt,n.memoizedState.cache),Il();break;case 27:case 5:Ni(i);break;case 4:at(i,i.stateNode.containerInfo);break;case 10:Di(i,i.type,i.memoizedProps.value);break;case 13:var c=i.memoizedState;if(c!==null)return c.dehydrated!==null?(Vi(i),i.flags|=128,null):(a&i.child.childLanes)!==0?h_(n,i,a):(Vi(i),n=ci(n,i,a),n!==null?n.sibling:null);Vi(i);break;case 19:var f=(n.flags&128)!==0;if(c=(a&i.childLanes)!==0,c||(Rl(n,i,a,!1),c=(a&i.childLanes)!==0),f){if(c)return m_(n,i,a);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),le(Ot,Ot.current),c)break;return null;case 22:case 23:return i.lanes=0,o_(n,i,a);case 24:Di(i,Dt,n.memoizedState.cache)}return ci(n,i,a)}function p_(n,i,a){if(n!==null)if(n.memoizedProps!==i.pendingProps)qt=!0;else{if(!um(n,a)&&(i.flags&128)===0)return qt=!1,vw(n,i,a);qt=(n.flags&131072)!==0}else qt=!1,Ye&&(i.flags&1048576)!==0&&Gv(i,ku,i.index);switch(i.lanes=0,i.tag){case 16:e:{n=i.pendingProps;var c=i.elementType,f=c._init;if(c=f(c._payload),i.type=c,typeof c=="function")_f(c)?(n=oa(c,n),i.tag=1,i=u_(null,i,c,n,a)):(i.tag=0,i=sm(null,i,c,n,a));else{if(c!=null){if(f=c.$$typeof,f===Z){i.tag=11,i=i_(null,i,c,n,a);break e}else if(f===D){i.tag=14,i=r_(null,i,c,n,a);break e}}throw i=ye(c)||c,Error(r(306,i,""))}}return i;case 0:return sm(n,i,i.type,i.pendingProps,a);case 1:return c=i.type,f=oa(c,i.pendingProps),u_(n,i,c,f,a);case 3:e:{if(at(i,i.stateNode.containerInfo),n===null)throw Error(r(387));c=i.pendingProps;var p=i.memoizedState;f=p.element,Of(n,i),Vl(i,c,null,a);var T=i.memoizedState;if(c=T.cache,Di(i,Dt,c),c!==p.cache&&xf(i,[Dt],a,!0),kl(),c=T.element,p.isDehydrated)if(p={element:c,isDehydrated:!1,cache:T.cache},i.updateQueue.baseState=p,i.memoizedState=p,i.flags&256){i=d_(n,i,c,a);break e}else if(c!==f){f=Yn(Error(r(424)),i),Cl(f),i=d_(n,i,c,a);break e}else{switch(n=i.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(gt=cs(n.firstChild),gn=i,Ye=!0,ta=null,Rs=!0,a=Ky(i,null,c,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Il(),c===f){i=ci(n,i,a);break e}Yt(n,i,c,a)}i=i.child}return i;case 26:return nd(n,i),n===null?(a=_E(i.type,null,i.pendingProps,null))?i.memoizedState=a:Ye||(a=i.type,n=i.pendingProps,c=vd(Ce.current).createElement(a),c[Ct]=i,c[At]=n,Xt(c,a,n),_t(c),i.stateNode=c):i.memoizedState=_E(i.type,n.memoizedProps,i.pendingProps,n.memoizedState),null;case 27:return Ni(i),n===null&&Ye&&(c=i.stateNode=gE(i.type,i.pendingProps,Ce.current),gn=i,Rs=!0,f=gt,Ki(i.type)?(Hm=f,gt=cs(c.firstChild)):gt=f),Yt(n,i,i.pendingProps.children,a),nd(n,i),n===null&&(i.flags|=4194304),i.child;case 5:return n===null&&Ye&&((f=c=gt)&&(c=Gw(c,i.type,i.pendingProps,Rs),c!==null?(i.stateNode=c,gn=i,gt=cs(c.firstChild),Rs=!1,f=!0):f=!1),f||na(i)),Ni(i),f=i.type,p=i.pendingProps,T=n!==null?n.memoizedProps:null,c=p.children,Fm(f,p)?c=null:T!==null&&Fm(f,T)&&(i.flags|=32),i.memoizedState!==null&&(f=Uf(n,i,cw,null,null,a),rc._currentValue=f),nd(n,i),Yt(n,i,c,a),i.child;case 6:return n===null&&Ye&&((n=a=gt)&&(a=$w(a,i.pendingProps,Rs),a!==null?(i.stateNode=a,gn=i,gt=null,n=!0):n=!1),n||na(i)),null;case 13:return h_(n,i,a);case 4:return at(i,i.stateNode.containerInfo),c=i.pendingProps,n===null?i.child=oo(i,null,c,a):Yt(n,i,c,a),i.child;case 11:return i_(n,i,i.type,i.pendingProps,a);case 7:return Yt(n,i,i.pendingProps,a),i.child;case 8:return Yt(n,i,i.pendingProps.children,a),i.child;case 12:return Yt(n,i,i.pendingProps.children,a),i.child;case 10:return c=i.pendingProps,Di(i,i.type,c.value),Yt(n,i,c.children,a),i.child;case 9:return f=i.type._context,c=i.pendingProps.children,ia(i),f=an(f),c=c(f),i.flags|=1,Yt(n,i,c,a),i.child;case 14:return r_(n,i,i.type,i.pendingProps,a);case 15:return a_(n,i,i.type,i.pendingProps,a);case 19:return m_(n,i,a);case 31:return c=i.pendingProps,a=i.mode,c={mode:c.mode,children:c.children},n===null?(a=sd(c,a),a.ref=i.ref,i.child=a,a.return=i,i=a):(a=ni(n.child,c),a.ref=i.ref,i.child=a,a.return=i,i=a),i;case 22:return o_(n,i,a);case 24:return ia(i),c=an(Dt),n===null?(f=Rf(),f===null&&(f=ot,p=If(),f.pooledCache=p,p.refCount++,p!==null&&(f.pooledCacheLanes|=a),f=p),i.memoizedState={parent:c,cache:f},Df(i),Di(i,Dt,f)):((n.lanes&a)!==0&&(Of(n,i),Vl(i,null,null,a),kl()),f=n.memoizedState,p=i.memoizedState,f.parent!==c?(f={parent:c,cache:c},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),Di(i,Dt,c)):(c=p.cache,Di(i,Dt,c),c!==f.cache&&xf(i,[Dt],a,!0))),Yt(n,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(r(156,i.tag))}function ui(n){n.flags|=4}function g_(n,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!NE(i)){if(i=Zn.current,i!==null&&((He&4194048)===He?js!==null:(He&62914560)!==He&&(He&536870912)===0||i!==js))throw Ml=jf,Jv;n.flags|=8192}}function id(n,i){i!==null&&(n.flags|=4),n.flags&16384&&(i=n.tag!==22?ol():536870912,n.lanes|=i,ho|=i)}function Hl(n,i){if(!Ye)switch(n.tailMode){case"hidden":i=n.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function ht(n){var i=n.alternate!==null&&n.alternate.child===n.child,a=0,c=0;if(i)for(var f=n.child;f!==null;)a|=f.lanes|f.childLanes,c|=f.subtreeFlags&65011712,c|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)a|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=c,n.childLanes=a,i}function yw(n,i,a){var c=i.pendingProps;switch(Af(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ht(i),null;case 1:return ht(i),null;case 3:return a=i.stateNode,c=null,n!==null&&(c=n.memoizedState.cache),i.memoizedState.cache!==c&&(i.flags|=2048),ai(Dt),ys(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(n===null||n.child===null)&&(xl(i)?ui(i):n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Yv())),ht(i),null;case 26:return a=i.memoizedState,n===null?(ui(i),a!==null?(ht(i),g_(i,a)):(ht(i),i.flags&=-16777217)):a?a!==n.memoizedState?(ui(i),ht(i),g_(i,a)):(ht(i),i.flags&=-16777217):(n.memoizedProps!==c&&ui(i),ht(i),i.flags&=-16777217),null;case 27:Bs(i),a=Ce.current;var f=i.type;if(n!==null&&i.stateNode!=null)n.memoizedProps!==c&&ui(i);else{if(!c){if(i.stateNode===null)throw Error(r(166));return ht(i),null}n=Ee.current,xl(i)?$v(i):(n=gE(f,c,a),i.stateNode=n,ui(i))}return ht(i),null;case 5:if(Bs(i),a=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==c&&ui(i);else{if(!c){if(i.stateNode===null)throw Error(r(166));return ht(i),null}if(n=Ee.current,xl(i))$v(i);else{switch(f=vd(Ce.current),n){case 1:n=f.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:n=f.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":n=f.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":n=f.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":n=f.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof c.is=="string"?f.createElement("select",{is:c.is}):f.createElement("select"),c.multiple?n.multiple=!0:c.size&&(n.size=c.size);break;default:n=typeof c.is=="string"?f.createElement(a,{is:c.is}):f.createElement(a)}}n[Ct]=i,n[At]=c;e:for(f=i.child;f!==null;){if(f.tag===5||f.tag===6)n.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===i)break e;for(;f.sibling===null;){if(f.return===null||f.return===i)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}i.stateNode=n;e:switch(Xt(n,a,c),a){case"button":case"input":case"select":case"textarea":n=!!c.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&ui(i)}}return ht(i),i.flags&=-16777217,null;case 6:if(n&&i.stateNode!=null)n.memoizedProps!==c&&ui(i);else{if(typeof c!="string"&&i.stateNode===null)throw Error(r(166));if(n=Ce.current,xl(i)){if(n=i.stateNode,a=i.memoizedProps,c=null,f=gn,f!==null)switch(f.tag){case 27:case 5:c=f.memoizedProps}n[Ct]=i,n=!!(n.nodeValue===a||c!==null&&c.suppressHydrationWarning===!0||cE(n.nodeValue,a)),n||na(i)}else n=vd(n).createTextNode(c),n[Ct]=i,i.stateNode=n}return ht(i),null;case 13:if(c=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=xl(i),c!==null&&c.dehydrated!==null){if(n===null){if(!f)throw Error(r(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));f[Ct]=i}else Il(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;ht(i),f=!1}else f=Yv(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return i.flags&256?(li(i),i):(li(i),null)}if(li(i),(i.flags&128)!==0)return i.lanes=a,i;if(a=c!==null,n=n!==null&&n.memoizedState!==null,a){c=i.child,f=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(f=c.alternate.memoizedState.cachePool.pool);var p=null;c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(p=c.memoizedState.cachePool.pool),p!==f&&(c.flags|=2048)}return a!==n&&a&&(i.child.flags|=8192),id(i,i.updateQueue),ht(i),null;case 4:return ys(),n===null&&Pm(i.stateNode.containerInfo),ht(i),null;case 10:return ai(i.type),ht(i),null;case 19:if(de(Ot),f=i.memoizedState,f===null)return ht(i),null;if(c=(i.flags&128)!==0,p=f.rendering,p===null)if(c)Hl(f,!1);else{if(vt!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(p=Ju(n),p!==null){for(i.flags|=128,Hl(f,!1),n=p.updateQueue,i.updateQueue=n,id(i,n),i.subtreeFlags=0,n=a,a=i.child;a!==null;)Hv(a,n),a=a.sibling;return le(Ot,Ot.current&1|2),i.child}n=n.sibling}f.tail!==null&&zn()>od&&(i.flags|=128,c=!0,Hl(f,!1),i.lanes=4194304)}else{if(!c)if(n=Ju(p),n!==null){if(i.flags|=128,c=!0,n=n.updateQueue,i.updateQueue=n,id(i,n),Hl(f,!0),f.tail===null&&f.tailMode==="hidden"&&!p.alternate&&!Ye)return ht(i),null}else 2*zn()-f.renderingStartTime>od&&a!==536870912&&(i.flags|=128,c=!0,Hl(f,!1),i.lanes=4194304);f.isBackwards?(p.sibling=i.child,i.child=p):(n=f.last,n!==null?n.sibling=p:i.child=p,f.last=p)}return f.tail!==null?(i=f.tail,f.rendering=i,f.tail=i.sibling,f.renderingStartTime=zn(),i.sibling=null,n=Ot.current,le(Ot,c?n&1|2:n&1),i):(ht(i),null);case 22:case 23:return li(i),Vf(),c=i.memoizedState!==null,n!==null?n.memoizedState!==null!==c&&(i.flags|=8192):c&&(i.flags|=8192),c?(a&536870912)!==0&&(i.flags&128)===0&&(ht(i),i.subtreeFlags&6&&(i.flags|=8192)):ht(i),a=i.updateQueue,a!==null&&id(i,a.retryQueue),a=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),c=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),c!==a&&(i.flags|=2048),n!==null&&de(ra),null;case 24:return a=null,n!==null&&(a=n.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),ai(Dt),ht(i),null;case 25:return null;case 30:return null}throw Error(r(156,i.tag))}function _w(n,i){switch(Af(i),i.tag){case 1:return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return ai(Dt),ys(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 26:case 27:case 5:return Bs(i),null;case 13:if(li(i),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(r(340));Il()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return de(Ot),null;case 4:return ys(),null;case 10:return ai(i.type),null;case 22:case 23:return li(i),Vf(),n!==null&&de(ra),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 24:return ai(Dt),null;case 25:return null;default:return null}}function v_(n,i){switch(Af(i),i.tag){case 3:ai(Dt),ys();break;case 26:case 27:case 5:Bs(i);break;case 4:ys();break;case 13:li(i);break;case 19:de(Ot);break;case 10:ai(i.type);break;case 22:case 23:li(i),Vf(),n!==null&&de(ra);break;case 24:ai(Dt)}}function Gl(n,i){try{var a=i.updateQueue,c=a!==null?a.lastEffect:null;if(c!==null){var f=c.next;a=f;do{if((a.tag&n)===n){c=void 0;var p=a.create,T=a.inst;c=p(),T.destroy=c}a=a.next}while(a!==f)}}catch(N){st(i,i.return,N)}}function Ui(n,i,a){try{var c=i.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var p=f.next;c=p;do{if((c.tag&n)===n){var T=c.inst,N=T.destroy;if(N!==void 0){T.destroy=void 0,f=i;var P=a,H=N;try{H()}catch(J){st(f,P,J)}}}c=c.next}while(c!==p)}}catch(J){st(i,i.return,J)}}function y_(n){var i=n.updateQueue;if(i!==null){var a=n.stateNode;try{ry(i,a)}catch(c){st(n,n.return,c)}}}function __(n,i,a){a.props=oa(n.type,n.memoizedProps),a.state=n.memoizedState;try{a.componentWillUnmount()}catch(c){st(n,i,c)}}function $l(n,i){try{var a=n.ref;if(a!==null){switch(n.tag){case 26:case 27:case 5:var c=n.stateNode;break;case 30:c=n.stateNode;break;default:c=n.stateNode}typeof a=="function"?n.refCleanup=a(c):a.current=c}}catch(f){st(n,i,f)}}function Ds(n,i){var a=n.ref,c=n.refCleanup;if(a!==null)if(typeof c=="function")try{c()}catch(f){st(n,i,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){st(n,i,f)}else a.current=null}function E_(n){var i=n.type,a=n.memoizedProps,c=n.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&c.focus();break e;case"img":a.src?c.src=a.src:a.srcSet&&(c.srcset=a.srcSet)}}catch(f){st(n,n.return,f)}}function dm(n,i,a){try{var c=n.stateNode;Fw(c,n.type,a,i),c[At]=i}catch(f){st(n,n.return,f)}}function T_(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Ki(n.type)||n.tag===4}function hm(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||T_(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Ki(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function fm(n,i,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(n,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(n),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=gd));else if(c!==4&&(c===27&&Ki(n.type)&&(a=n.stateNode,i=null),n=n.child,n!==null))for(fm(n,i,a),n=n.sibling;n!==null;)fm(n,i,a),n=n.sibling}function rd(n,i,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?a.insertBefore(n,i):a.appendChild(n);else if(c!==4&&(c===27&&Ki(n.type)&&(a=n.stateNode),n=n.child,n!==null))for(rd(n,i,a),n=n.sibling;n!==null;)rd(n,i,a),n=n.sibling}function b_(n){var i=n.stateNode,a=n.memoizedProps;try{for(var c=n.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);Xt(i,c,a),i[Ct]=n,i[At]=a}catch(p){st(n,n.return,p)}}var di=!1,Tt=!1,mm=!1,A_=typeof WeakSet=="function"?WeakSet:Set,zt=null;function Ew(n,i){if(n=n.containerInfo,Lm=Ad,n=Mv(n),hf(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var f=c.anchorOffset,p=c.focusNode;c=c.focusOffset;try{a.nodeType,p.nodeType}catch{a=null;break e}var T=0,N=-1,P=-1,H=0,J=0,ne=n,G=null;t:for(;;){for(var Y;ne!==a||f!==0&&ne.nodeType!==3||(N=T+f),ne!==p||c!==0&&ne.nodeType!==3||(P=T+c),ne.nodeType===3&&(T+=ne.nodeValue.length),(Y=ne.firstChild)!==null;)G=ne,ne=Y;for(;;){if(ne===n)break t;if(G===a&&++H===f&&(N=T),G===p&&++J===c&&(P=T),(Y=ne.nextSibling)!==null)break;ne=G,G=ne.parentNode}ne=Y}a=N===-1||P===-1?null:{start:N,end:P}}else a=null}a=a||{start:0,end:0}}else a=null;for(Um={focusedElem:n,selectionRange:a},Ad=!1,zt=i;zt!==null;)if(i=zt,n=i.child,(i.subtreeFlags&1024)!==0&&n!==null)n.return=i,zt=n;else for(;zt!==null;){switch(i=zt,p=i.alternate,n=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((n&1024)!==0&&p!==null){n=void 0,a=i,f=p.memoizedProps,p=p.memoizedState,c=a.stateNode;try{var Ie=oa(a.type,f,a.elementType===a.type);n=c.getSnapshotBeforeUpdate(Ie,p),c.__reactInternalSnapshotBeforeUpdate=n}catch(be){st(a,a.return,be)}}break;case 3:if((n&1024)!==0){if(n=i.stateNode.containerInfo,a=n.nodeType,a===9)zm(n);else if(a===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":zm(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(r(163))}if(n=i.sibling,n!==null){n.return=i.return,zt=n;break}zt=i.return}}function N_(n,i,a){var c=a.flags;switch(a.tag){case 0:case 11:case 15:Fi(n,a),c&4&&Gl(5,a);break;case 1:if(Fi(n,a),c&4)if(n=a.stateNode,i===null)try{n.componentDidMount()}catch(T){st(a,a.return,T)}else{var f=oa(a.type,i.memoizedProps);i=i.memoizedState;try{n.componentDidUpdate(f,i,n.__reactInternalSnapshotBeforeUpdate)}catch(T){st(a,a.return,T)}}c&64&&y_(a),c&512&&$l(a,a.return);break;case 3:if(Fi(n,a),c&64&&(n=a.updateQueue,n!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{ry(n,i)}catch(T){st(a,a.return,T)}}break;case 27:i===null&&c&4&&b_(a);case 26:case 5:Fi(n,a),i===null&&c&4&&E_(a),c&512&&$l(a,a.return);break;case 12:Fi(n,a);break;case 13:Fi(n,a),c&4&&x_(n,a),c&64&&(n=a.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(a=Cw.bind(null,a),Kw(n,a))));break;case 22:if(c=a.memoizedState!==null||di,!c){i=i!==null&&i.memoizedState!==null||Tt,f=di;var p=Tt;di=c,(Tt=i)&&!p?qi(n,a,(a.subtreeFlags&8772)!==0):Fi(n,a),di=f,Tt=p}break;case 30:break;default:Fi(n,a)}}function S_(n){var i=n.alternate;i!==null&&(n.alternate=null,S_(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&Ii(i)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var ut=null,Tn=!1;function hi(n,i,a){for(a=a.child;a!==null;)w_(n,i,a),a=a.sibling}function w_(n,i,a){if(Xe&&typeof Xe.onCommitFiberUnmount=="function")try{Xe.onCommitFiberUnmount(pt,a)}catch{}switch(a.tag){case 26:Tt||Ds(a,i),hi(n,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Tt||Ds(a,i);var c=ut,f=Tn;Ki(a.type)&&(ut=a.stateNode,Tn=!1),hi(n,i,a),tc(a.stateNode),ut=c,Tn=f;break;case 5:Tt||Ds(a,i);case 6:if(c=ut,f=Tn,ut=null,hi(n,i,a),ut=c,Tn=f,ut!==null)if(Tn)try{(ut.nodeType===9?ut.body:ut.nodeName==="HTML"?ut.ownerDocument.body:ut).removeChild(a.stateNode)}catch(p){st(a,i,p)}else try{ut.removeChild(a.stateNode)}catch(p){st(a,i,p)}break;case 18:ut!==null&&(Tn?(n=ut,mE(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,a.stateNode),cc(n)):mE(ut,a.stateNode));break;case 4:c=ut,f=Tn,ut=a.stateNode.containerInfo,Tn=!0,hi(n,i,a),ut=c,Tn=f;break;case 0:case 11:case 14:case 15:Tt||Ui(2,a,i),Tt||Ui(4,a,i),hi(n,i,a);break;case 1:Tt||(Ds(a,i),c=a.stateNode,typeof c.componentWillUnmount=="function"&&__(a,i,c)),hi(n,i,a);break;case 21:hi(n,i,a);break;case 22:Tt=(c=Tt)||a.memoizedState!==null,hi(n,i,a),Tt=c;break;default:hi(n,i,a)}}function x_(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{cc(n)}catch(a){st(i,i.return,a)}}function Tw(n){switch(n.tag){case 13:case 19:var i=n.stateNode;return i===null&&(i=n.stateNode=new A_),i;case 22:return n=n.stateNode,i=n._retryCache,i===null&&(i=n._retryCache=new A_),i;default:throw Error(r(435,n.tag))}}function pm(n,i){var a=Tw(n);i.forEach(function(c){var f=Rw.bind(null,n,c);a.has(c)||(a.add(c),c.then(f,f))})}function Dn(n,i){var a=i.deletions;if(a!==null)for(var c=0;c<a.length;c++){var f=a[c],p=n,T=i,N=T;e:for(;N!==null;){switch(N.tag){case 27:if(Ki(N.type)){ut=N.stateNode,Tn=!1;break e}break;case 5:ut=N.stateNode,Tn=!1;break e;case 3:case 4:ut=N.stateNode.containerInfo,Tn=!0;break e}N=N.return}if(ut===null)throw Error(r(160));w_(p,T,f),ut=null,Tn=!1,p=f.alternate,p!==null&&(p.return=null),f.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)I_(i,n),i=i.sibling}var ls=null;function I_(n,i){var a=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Dn(i,n),On(n),c&4&&(Ui(3,n,n.return),Gl(3,n),Ui(5,n,n.return));break;case 1:Dn(i,n),On(n),c&512&&(Tt||a===null||Ds(a,a.return)),c&64&&di&&(n=n.updateQueue,n!==null&&(c=n.callbacks,c!==null&&(a=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=a===null?c:a.concat(c))));break;case 26:var f=ls;if(Dn(i,n),On(n),c&512&&(Tt||a===null||Ds(a,a.return)),c&4){var p=a!==null?a.memoizedState:null;if(c=n.memoizedState,a===null)if(c===null)if(n.stateNode===null){e:{c=n.type,a=n.memoizedProps,f=f.ownerDocument||f;t:switch(c){case"title":p=f.getElementsByTagName("title")[0],(!p||p[kr]||p[Ct]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=f.createElement(c),f.head.insertBefore(p,f.querySelector("head > title"))),Xt(p,c,a),p[Ct]=n,_t(p),c=p;break e;case"link":var T=bE("link","href",f).get(c+(a.href||""));if(T){for(var N=0;N<T.length;N++)if(p=T[N],p.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&p.getAttribute("rel")===(a.rel==null?null:a.rel)&&p.getAttribute("title")===(a.title==null?null:a.title)&&p.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){T.splice(N,1);break t}}p=f.createElement(c),Xt(p,c,a),f.head.appendChild(p);break;case"meta":if(T=bE("meta","content",f).get(c+(a.content||""))){for(N=0;N<T.length;N++)if(p=T[N],p.getAttribute("content")===(a.content==null?null:""+a.content)&&p.getAttribute("name")===(a.name==null?null:a.name)&&p.getAttribute("property")===(a.property==null?null:a.property)&&p.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&p.getAttribute("charset")===(a.charSet==null?null:a.charSet)){T.splice(N,1);break t}}p=f.createElement(c),Xt(p,c,a),f.head.appendChild(p);break;default:throw Error(r(468,c))}p[Ct]=n,_t(p),c=p}n.stateNode=c}else AE(f,n.type,n.stateNode);else n.stateNode=TE(f,c,n.memoizedProps);else p!==c?(p===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):p.count--,c===null?AE(f,n.type,n.stateNode):TE(f,c,n.memoizedProps)):c===null&&n.stateNode!==null&&dm(n,n.memoizedProps,a.memoizedProps)}break;case 27:Dn(i,n),On(n),c&512&&(Tt||a===null||Ds(a,a.return)),a!==null&&c&4&&dm(n,n.memoizedProps,a.memoizedProps);break;case 5:if(Dn(i,n),On(n),c&512&&(Tt||a===null||Ds(a,a.return)),n.flags&32){f=n.stateNode;try{Hn(f,"")}catch(Y){st(n,n.return,Y)}}c&4&&n.stateNode!=null&&(f=n.memoizedProps,dm(n,f,a!==null?a.memoizedProps:f)),c&1024&&(mm=!0);break;case 6:if(Dn(i,n),On(n),c&4){if(n.stateNode===null)throw Error(r(162));c=n.memoizedProps,a=n.stateNode;try{a.nodeValue=c}catch(Y){st(n,n.return,Y)}}break;case 3:if(Ed=null,f=ls,ls=yd(i.containerInfo),Dn(i,n),ls=f,On(n),c&4&&a!==null&&a.memoizedState.isDehydrated)try{cc(i.containerInfo)}catch(Y){st(n,n.return,Y)}mm&&(mm=!1,C_(n));break;case 4:c=ls,ls=yd(n.stateNode.containerInfo),Dn(i,n),On(n),ls=c;break;case 12:Dn(i,n),On(n);break;case 13:Dn(i,n),On(n),n.child.flags&8192&&n.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Tm=zn()),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,pm(n,c)));break;case 22:f=n.memoizedState!==null;var P=a!==null&&a.memoizedState!==null,H=di,J=Tt;if(di=H||f,Tt=J||P,Dn(i,n),Tt=J,di=H,On(n),c&8192)e:for(i=n.stateNode,i._visibility=f?i._visibility&-2:i._visibility|1,f&&(a===null||P||di||Tt||la(n)),a=null,i=n;;){if(i.tag===5||i.tag===26){if(a===null){P=a=i;try{if(p=P.stateNode,f)T=p.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{N=P.stateNode;var ne=P.memoizedProps.style,G=ne!=null&&ne.hasOwnProperty("display")?ne.display:null;N.style.display=G==null||typeof G=="boolean"?"":(""+G).trim()}}catch(Y){st(P,P.return,Y)}}}else if(i.tag===6){if(a===null){P=i;try{P.stateNode.nodeValue=f?"":P.memoizedProps}catch(Y){st(P,P.return,Y)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===n)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break e;for(;i.sibling===null;){if(i.return===null||i.return===n)break e;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}c&4&&(c=n.updateQueue,c!==null&&(a=c.retryQueue,a!==null&&(c.retryQueue=null,pm(n,a))));break;case 19:Dn(i,n),On(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,pm(n,c)));break;case 30:break;case 21:break;default:Dn(i,n),On(n)}}function On(n){var i=n.flags;if(i&2){try{for(var a,c=n.return;c!==null;){if(T_(c)){a=c;break}c=c.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var f=a.stateNode,p=hm(n);rd(n,p,f);break;case 5:var T=a.stateNode;a.flags&32&&(Hn(T,""),a.flags&=-33);var N=hm(n);rd(n,N,T);break;case 3:case 4:var P=a.stateNode.containerInfo,H=hm(n);fm(n,H,P);break;default:throw Error(r(161))}}catch(J){st(n,n.return,J)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function C_(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var i=n;C_(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),n=n.sibling}}function Fi(n,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)N_(n,i.alternate,i),i=i.sibling}function la(n){for(n=n.child;n!==null;){var i=n;switch(i.tag){case 0:case 11:case 14:case 15:Ui(4,i,i.return),la(i);break;case 1:Ds(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&__(i,i.return,a),la(i);break;case 27:tc(i.stateNode);case 26:case 5:Ds(i,i.return),la(i);break;case 22:i.memoizedState===null&&la(i);break;case 30:la(i);break;default:la(i)}n=n.sibling}}function qi(n,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var c=i.alternate,f=n,p=i,T=p.flags;switch(p.tag){case 0:case 11:case 15:qi(f,p,a),Gl(4,p);break;case 1:if(qi(f,p,a),c=p,f=c.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(H){st(c,c.return,H)}if(c=p,f=c.updateQueue,f!==null){var N=c.stateNode;try{var P=f.shared.hiddenCallbacks;if(P!==null)for(f.shared.hiddenCallbacks=null,f=0;f<P.length;f++)iy(P[f],N)}catch(H){st(c,c.return,H)}}a&&T&64&&y_(p),$l(p,p.return);break;case 27:b_(p);case 26:case 5:qi(f,p,a),a&&c===null&&T&4&&E_(p),$l(p,p.return);break;case 12:qi(f,p,a);break;case 13:qi(f,p,a),a&&T&4&&x_(f,p);break;case 22:p.memoizedState===null&&qi(f,p,a),$l(p,p.return);break;case 30:break;default:qi(f,p,a)}i=i.sibling}}function gm(n,i){var a=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),n=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(n=i.memoizedState.cachePool.pool),n!==a&&(n!=null&&n.refCount++,a!=null&&jl(a))}function vm(n,i){n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&jl(n))}function Os(n,i,a,c){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)R_(n,i,a,c),i=i.sibling}function R_(n,i,a,c){var f=i.flags;switch(i.tag){case 0:case 11:case 15:Os(n,i,a,c),f&2048&&Gl(9,i);break;case 1:Os(n,i,a,c);break;case 3:Os(n,i,a,c),f&2048&&(n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&jl(n)));break;case 12:if(f&2048){Os(n,i,a,c),n=i.stateNode;try{var p=i.memoizedProps,T=p.id,N=p.onPostCommit;typeof N=="function"&&N(T,i.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(P){st(i,i.return,P)}}else Os(n,i,a,c);break;case 13:Os(n,i,a,c);break;case 23:break;case 22:p=i.stateNode,T=i.alternate,i.memoizedState!==null?p._visibility&2?Os(n,i,a,c):Kl(n,i):p._visibility&2?Os(n,i,a,c):(p._visibility|=2,lo(n,i,a,c,(i.subtreeFlags&10256)!==0)),f&2048&&gm(T,i);break;case 24:Os(n,i,a,c),f&2048&&vm(i.alternate,i);break;default:Os(n,i,a,c)}}function lo(n,i,a,c,f){for(f=f&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var p=n,T=i,N=a,P=c,H=T.flags;switch(T.tag){case 0:case 11:case 15:lo(p,T,N,P,f),Gl(8,T);break;case 23:break;case 22:var J=T.stateNode;T.memoizedState!==null?J._visibility&2?lo(p,T,N,P,f):Kl(p,T):(J._visibility|=2,lo(p,T,N,P,f)),f&&H&2048&&gm(T.alternate,T);break;case 24:lo(p,T,N,P,f),f&&H&2048&&vm(T.alternate,T);break;default:lo(p,T,N,P,f)}i=i.sibling}}function Kl(n,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=n,c=i,f=c.flags;switch(c.tag){case 22:Kl(a,c),f&2048&&gm(c.alternate,c);break;case 24:Kl(a,c),f&2048&&vm(c.alternate,c);break;default:Kl(a,c)}i=i.sibling}}var Yl=8192;function co(n){if(n.subtreeFlags&Yl)for(n=n.child;n!==null;)j_(n),n=n.sibling}function j_(n){switch(n.tag){case 26:co(n),n.flags&Yl&&n.memoizedState!==null&&ax(ls,n.memoizedState,n.memoizedProps);break;case 5:co(n);break;case 3:case 4:var i=ls;ls=yd(n.stateNode.containerInfo),co(n),ls=i;break;case 22:n.memoizedState===null&&(i=n.alternate,i!==null&&i.memoizedState!==null?(i=Yl,Yl=16777216,co(n),Yl=i):co(n));break;default:co(n)}}function D_(n){var i=n.alternate;if(i!==null&&(n=i.child,n!==null)){i.child=null;do i=n.sibling,n.sibling=null,n=i;while(n!==null)}}function Ql(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var c=i[a];zt=c,M_(c,n)}D_(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)O_(n),n=n.sibling}function O_(n){switch(n.tag){case 0:case 11:case 15:Ql(n),n.flags&2048&&Ui(9,n,n.return);break;case 3:Ql(n);break;case 12:Ql(n);break;case 22:var i=n.stateNode;n.memoizedState!==null&&i._visibility&2&&(n.return===null||n.return.tag!==13)?(i._visibility&=-3,ad(n)):Ql(n);break;default:Ql(n)}}function ad(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var c=i[a];zt=c,M_(c,n)}D_(n)}for(n=n.child;n!==null;){switch(i=n,i.tag){case 0:case 11:case 15:Ui(8,i,i.return),ad(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,ad(i));break;default:ad(i)}n=n.sibling}}function M_(n,i){for(;zt!==null;){var a=zt;switch(a.tag){case 0:case 11:case 15:Ui(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var c=a.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:jl(a.memoizedState.cache)}if(c=a.child,c!==null)c.return=a,zt=c;else e:for(a=n;zt!==null;){c=zt;var f=c.sibling,p=c.return;if(S_(c),c===a){zt=null;break e}if(f!==null){f.return=p,zt=f;break e}zt=p}}}var bw={getCacheForType:function(n){var i=an(Dt),a=i.data.get(n);return a===void 0&&(a=n(),i.data.set(n,a)),a}},Aw=typeof WeakMap=="function"?WeakMap:Map,We=0,ot=null,Ve=null,He=0,Ze=0,Mn=null,zi=!1,uo=!1,ym=!1,fi=0,vt=0,Bi=0,ca=0,_m=0,Jn=0,ho=0,Xl=null,bn=null,Em=!1,Tm=0,od=1/0,ld=null,Hi=null,Qt=0,Gi=null,fo=null,mo=0,bm=0,Am=null,P_=null,Wl=0,Nm=null;function Pn(){if((We&2)!==0&&He!==0)return He&-He;if(Q.T!==null){var n=eo;return n!==0?n:jm()}return wi()}function k_(){Jn===0&&(Jn=(He&536870912)===0||Ye?al():536870912);var n=Zn.current;return n!==null&&(n.flags|=32),Jn}function kn(n,i,a){(n===ot&&(Ze===2||Ze===9)||n.cancelPendingCommit!==null)&&(po(n,0),$i(n,He,Jn,!1)),Gs(n,a),((We&2)===0||n!==ot)&&(n===ot&&((We&2)===0&&(ca|=a),vt===4&&$i(n,He,Jn,!1)),Ms(n))}function V_(n,i,a){if((We&6)!==0)throw Error(r(327));var c=!a&&(i&124)===0&&(i&n.expiredLanes)===0||Pr(n,i),f=c?ww(n,i):xm(n,i,!0),p=c;do{if(f===0){uo&&!c&&$i(n,i,0,!1);break}else{if(a=n.current.alternate,p&&!Nw(a)){f=xm(n,i,!1),p=!1;continue}if(f===2){if(p=i,n.errorRecoveryDisabledLanes&p)var T=0;else T=n.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){i=T;e:{var N=n;f=Xl;var P=N.current.memoizedState.isDehydrated;if(P&&(po(N,T).flags|=256),T=xm(N,T,!1),T!==2){if(ym&&!P){N.errorRecoveryDisabledLanes|=p,ca|=p,f=4;break e}p=bn,bn=f,p!==null&&(bn===null?bn=p:bn.push.apply(bn,p))}f=T}if(p=!1,f!==2)continue}}if(f===1){po(n,0),$i(n,i,0,!0);break}e:{switch(c=n,p=f,p){case 0:case 1:throw Error(r(345));case 4:if((i&4194048)!==i)break;case 6:$i(c,i,Jn,!zi);break e;case 2:bn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((i&62914560)===i&&(f=Tm+300-zn(),10<f)){if($i(c,i,Jn,!zi),ja(c,0,!0)!==0)break e;c.timeoutHandle=hE(L_.bind(null,c,a,bn,ld,Em,i,Jn,ca,ho,zi,p,2,-0,0),f);break e}L_(c,a,bn,ld,Em,i,Jn,ca,ho,zi,p,0,-0,0)}}break}while(!0);Ms(n)}function L_(n,i,a,c,f,p,T,N,P,H,J,ne,G,Y){if(n.timeoutHandle=-1,ne=i.subtreeFlags,(ne&8192||(ne&16785408)===16785408)&&(ic={stylesheets:null,count:0,unsuspend:rx},j_(i),ne=ox(),ne!==null)){n.cancelPendingCommit=ne(G_.bind(null,n,i,p,a,c,f,T,N,P,J,1,G,Y)),$i(n,p,T,!H);return}G_(n,i,p,a,c,f,T,N,P)}function Nw(n){for(var i=n;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var c=0;c<a.length;c++){var f=a[c],p=f.getSnapshot;f=f.value;try{if(!Rn(p(),f))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function $i(n,i,a,c){i&=~_m,i&=~ca,n.suspendedLanes|=i,n.pingedLanes&=~i,c&&(n.warmLanes|=i),c=n.expirationTimes;for(var f=i;0<f;){var p=31-rn(f),T=1<<p;c[p]=-1,f&=~T}a!==0&&_s(n,a,i)}function cd(){return(We&6)===0?(Zl(0),!1):!0}function Sm(){if(Ve!==null){if(Ze===0)var n=Ve.return;else n=Ve,ri=sa=null,zf(n),ao=null,zl=0,n=Ve;for(;n!==null;)v_(n.alternate,n),n=n.return;Ve=null}}function po(n,i){var a=n.timeoutHandle;a!==-1&&(n.timeoutHandle=-1,zw(a)),a=n.cancelPendingCommit,a!==null&&(n.cancelPendingCommit=null,a()),Sm(),ot=n,Ve=a=ni(n.current,null),He=i,Ze=0,Mn=null,zi=!1,uo=Pr(n,i),ym=!1,ho=Jn=_m=ca=Bi=vt=0,bn=Xl=null,Em=!1,(i&8)!==0&&(i|=i&32);var c=n.entangledLanes;if(c!==0)for(n=n.entanglements,c&=i;0<c;){var f=31-rn(c),p=1<<f;i|=n[f],c&=~p}return fi=i,ju(),a}function U_(n,i){Oe=null,Q.H=Xu,i===Ol||i===Fu?(i=ny(),Ze=3):i===Jv?(i=ny(),Ze=4):Ze=i===s_?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Mn=i,Ve===null&&(vt=1,td(n,Yn(i,n.current)))}function F_(){var n=Q.H;return Q.H=Xu,n===null?Xu:n}function q_(){var n=Q.A;return Q.A=bw,n}function wm(){vt=4,zi||(He&4194048)!==He&&Zn.current!==null||(uo=!0),(Bi&134217727)===0&&(ca&134217727)===0||ot===null||$i(ot,He,Jn,!1)}function xm(n,i,a){var c=We;We|=2;var f=F_(),p=q_();(ot!==n||He!==i)&&(ld=null,po(n,i)),i=!1;var T=vt;e:do try{if(Ze!==0&&Ve!==null){var N=Ve,P=Mn;switch(Ze){case 8:Sm(),T=6;break e;case 3:case 2:case 9:case 6:Zn.current===null&&(i=!0);var H=Ze;if(Ze=0,Mn=null,go(n,N,P,H),a&&uo){T=0;break e}break;default:H=Ze,Ze=0,Mn=null,go(n,N,P,H)}}Sw(),T=vt;break}catch(J){U_(n,J)}while(!0);return i&&n.shellSuspendCounter++,ri=sa=null,We=c,Q.H=f,Q.A=p,Ve===null&&(ot=null,He=0,ju()),T}function Sw(){for(;Ve!==null;)z_(Ve)}function ww(n,i){var a=We;We|=2;var c=F_(),f=q_();ot!==n||He!==i?(ld=null,od=zn()+500,po(n,i)):uo=Pr(n,i);e:do try{if(Ze!==0&&Ve!==null){i=Ve;var p=Mn;t:switch(Ze){case 1:Ze=0,Mn=null,go(n,i,p,1);break;case 2:case 9:if(ey(p)){Ze=0,Mn=null,B_(i);break}i=function(){Ze!==2&&Ze!==9||ot!==n||(Ze=7),Ms(n)},p.then(i,i);break e;case 3:Ze=7;break e;case 4:Ze=5;break e;case 7:ey(p)?(Ze=0,Mn=null,B_(i)):(Ze=0,Mn=null,go(n,i,p,7));break;case 5:var T=null;switch(Ve.tag){case 26:T=Ve.memoizedState;case 5:case 27:var N=Ve;if(!T||NE(T)){Ze=0,Mn=null;var P=N.sibling;if(P!==null)Ve=P;else{var H=N.return;H!==null?(Ve=H,ud(H)):Ve=null}break t}}Ze=0,Mn=null,go(n,i,p,5);break;case 6:Ze=0,Mn=null,go(n,i,p,6);break;case 8:Sm(),vt=6;break e;default:throw Error(r(462))}}xw();break}catch(J){U_(n,J)}while(!0);return ri=sa=null,Q.H=c,Q.A=f,We=a,Ve!==null?0:(ot=null,He=0,ju(),vt)}function xw(){for(;Ve!==null&&!nl();)z_(Ve)}function z_(n){var i=p_(n.alternate,n,fi);n.memoizedProps=n.pendingProps,i===null?ud(n):Ve=i}function B_(n){var i=n,a=i.alternate;switch(i.tag){case 15:case 0:i=c_(a,i,i.pendingProps,i.type,void 0,He);break;case 11:i=c_(a,i,i.pendingProps,i.type.render,i.ref,He);break;case 5:zf(i);default:v_(a,i),i=Ve=Hv(i,fi),i=p_(a,i,fi)}n.memoizedProps=n.pendingProps,i===null?ud(n):Ve=i}function go(n,i,a,c){ri=sa=null,zf(i),ao=null,zl=0;var f=i.return;try{if(gw(n,f,i,a,He)){vt=1,td(n,Yn(a,n.current)),Ve=null;return}}catch(p){if(f!==null)throw Ve=f,p;vt=1,td(n,Yn(a,n.current)),Ve=null;return}i.flags&32768?(Ye||c===1?n=!0:uo||(He&536870912)!==0?n=!1:(zi=n=!0,(c===2||c===9||c===3||c===6)&&(c=Zn.current,c!==null&&c.tag===13&&(c.flags|=16384))),H_(i,n)):ud(i)}function ud(n){var i=n;do{if((i.flags&32768)!==0){H_(i,zi);return}n=i.return;var a=yw(i.alternate,i,fi);if(a!==null){Ve=a;return}if(i=i.sibling,i!==null){Ve=i;return}Ve=i=n}while(i!==null);vt===0&&(vt=5)}function H_(n,i){do{var a=_w(n.alternate,n);if(a!==null){a.flags&=32767,Ve=a;return}if(a=n.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(n=n.sibling,n!==null)){Ve=n;return}Ve=n=a}while(n!==null);vt=6,Ve=null}function G_(n,i,a,c,f,p,T,N,P){n.cancelPendingCommit=null;do dd();while(Qt!==0);if((We&6)!==0)throw Error(r(327));if(i!==null){if(i===n.current)throw Error(r(177));if(p=i.lanes|i.childLanes,p|=vf,ll(n,a,p,T,N,P),n===ot&&(Ve=ot=null,He=0),fo=i,Gi=n,mo=a,bm=p,Am=f,P_=c,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,jw(jr,function(){return X_(),null})):(n.callbackNode=null,n.callbackPriority=0),c=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||c){c=Q.T,Q.T=null,f=ie.p,ie.p=2,T=We,We|=4;try{Ew(n,i,a)}finally{We=T,ie.p=f,Q.T=c}}Qt=1,$_(),K_(),Y_()}}function $_(){if(Qt===1){Qt=0;var n=Gi,i=fo,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=Q.T,Q.T=null;var c=ie.p;ie.p=2;var f=We;We|=4;try{I_(i,n);var p=Um,T=Mv(n.containerInfo),N=p.focusedElem,P=p.selectionRange;if(T!==N&&N&&N.ownerDocument&&Ov(N.ownerDocument.documentElement,N)){if(P!==null&&hf(N)){var H=P.start,J=P.end;if(J===void 0&&(J=H),"selectionStart"in N)N.selectionStart=H,N.selectionEnd=Math.min(J,N.value.length);else{var ne=N.ownerDocument||document,G=ne&&ne.defaultView||window;if(G.getSelection){var Y=G.getSelection(),Ie=N.textContent.length,be=Math.min(P.start,Ie),nt=P.end===void 0?be:Math.min(P.end,Ie);!Y.extend&&be>nt&&(T=nt,nt=be,be=T);var F=Dv(N,be),L=Dv(N,nt);if(F&&L&&(Y.rangeCount!==1||Y.anchorNode!==F.node||Y.anchorOffset!==F.offset||Y.focusNode!==L.node||Y.focusOffset!==L.offset)){var B=ne.createRange();B.setStart(F.node,F.offset),Y.removeAllRanges(),be>nt?(Y.addRange(B),Y.extend(L.node,L.offset)):(B.setEnd(L.node,L.offset),Y.addRange(B))}}}}for(ne=[],Y=N;Y=Y.parentNode;)Y.nodeType===1&&ne.push({element:Y,left:Y.scrollLeft,top:Y.scrollTop});for(typeof N.focus=="function"&&N.focus(),N=0;N<ne.length;N++){var ee=ne[N];ee.element.scrollLeft=ee.left,ee.element.scrollTop=ee.top}}Ad=!!Lm,Um=Lm=null}finally{We=f,ie.p=c,Q.T=a}}n.current=i,Qt=2}}function K_(){if(Qt===2){Qt=0;var n=Gi,i=fo,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=Q.T,Q.T=null;var c=ie.p;ie.p=2;var f=We;We|=4;try{N_(n,i.alternate,i)}finally{We=f,ie.p=c,Q.T=a}}Qt=3}}function Y_(){if(Qt===4||Qt===3){Qt=0,au();var n=Gi,i=fo,a=mo,c=P_;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Qt=5:(Qt=0,fo=Gi=null,Q_(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(Hi=null),Da(a),i=i.stateNode,Xe&&typeof Xe.onCommitFiberRoot=="function")try{Xe.onCommitFiberRoot(pt,i,void 0,(i.current.flags&128)===128)}catch{}if(c!==null){i=Q.T,f=ie.p,ie.p=2,Q.T=null;try{for(var p=n.onRecoverableError,T=0;T<c.length;T++){var N=c[T];p(N.value,{componentStack:N.stack})}}finally{Q.T=i,ie.p=f}}(mo&3)!==0&&dd(),Ms(n),f=n.pendingLanes,(a&4194090)!==0&&(f&42)!==0?n===Nm?Wl++:(Wl=0,Nm=n):Wl=0,Zl(0)}}function Q_(n,i){(n.pooledCacheLanes&=i)===0&&(i=n.pooledCache,i!=null&&(n.pooledCache=null,jl(i)))}function dd(n){return $_(),K_(),Y_(),X_()}function X_(){if(Qt!==5)return!1;var n=Gi,i=bm;bm=0;var a=Da(mo),c=Q.T,f=ie.p;try{ie.p=32>a?32:a,Q.T=null,a=Am,Am=null;var p=Gi,T=mo;if(Qt=0,fo=Gi=null,mo=0,(We&6)!==0)throw Error(r(331));var N=We;if(We|=4,O_(p.current),R_(p,p.current,T,a),We=N,Zl(0,!1),Xe&&typeof Xe.onPostCommitFiberRoot=="function")try{Xe.onPostCommitFiberRoot(pt,p)}catch{}return!0}finally{ie.p=f,Q.T=c,Q_(n,i)}}function W_(n,i,a){i=Yn(a,i),i=nm(n.stateNode,i,2),n=Pi(n,i,2),n!==null&&(Gs(n,2),Ms(n))}function st(n,i,a){if(n.tag===3)W_(n,n,a);else for(;i!==null;){if(i.tag===3){W_(i,n,a);break}else if(i.tag===1){var c=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Hi===null||!Hi.has(c))){n=Yn(a,n),a=t_(2),c=Pi(i,a,2),c!==null&&(n_(a,c,i,n),Gs(c,2),Ms(c));break}}i=i.return}}function Im(n,i,a){var c=n.pingCache;if(c===null){c=n.pingCache=new Aw;var f=new Set;c.set(i,f)}else f=c.get(i),f===void 0&&(f=new Set,c.set(i,f));f.has(a)||(ym=!0,f.add(a),n=Iw.bind(null,n,i,a),i.then(n,n))}function Iw(n,i,a){var c=n.pingCache;c!==null&&c.delete(i),n.pingedLanes|=n.suspendedLanes&a,n.warmLanes&=~a,ot===n&&(He&a)===a&&(vt===4||vt===3&&(He&62914560)===He&&300>zn()-Tm?(We&2)===0&&po(n,0):_m|=a,ho===He&&(ho=0)),Ms(n)}function Z_(n,i){i===0&&(i=ol()),n=Xa(n,i),n!==null&&(Gs(n,i),Ms(n))}function Cw(n){var i=n.memoizedState,a=0;i!==null&&(a=i.retryLane),Z_(n,a)}function Rw(n,i){var a=0;switch(n.tag){case 13:var c=n.stateNode,f=n.memoizedState;f!==null&&(a=f.retryLane);break;case 19:c=n.stateNode;break;case 22:c=n.stateNode._retryCache;break;default:throw Error(r(314))}c!==null&&c.delete(i),Z_(n,a)}function jw(n,i){return Cr(n,i)}var hd=null,vo=null,Cm=!1,fd=!1,Rm=!1,ua=0;function Ms(n){n!==vo&&n.next===null&&(vo===null?hd=vo=n:vo=vo.next=n),fd=!0,Cm||(Cm=!0,Ow())}function Zl(n,i){if(!Rm&&fd){Rm=!0;do for(var a=!1,c=hd;c!==null;){if(n!==0){var f=c.pendingLanes;if(f===0)var p=0;else{var T=c.suspendedLanes,N=c.pingedLanes;p=(1<<31-rn(42|n)+1)-1,p&=f&~(T&~N),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(a=!0,nE(c,p))}else p=He,p=ja(c,c===ot?p:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(p&3)===0||Pr(c,p)||(a=!0,nE(c,p));c=c.next}while(a);Rm=!1}}function Dw(){J_()}function J_(){fd=Cm=!1;var n=0;ua!==0&&(qw()&&(n=ua),ua=0);for(var i=zn(),a=null,c=hd;c!==null;){var f=c.next,p=eE(c,i);p===0?(c.next=null,a===null?hd=f:a.next=f,f===null&&(vo=a)):(a=c,(n!==0||(p&3)!==0)&&(fd=!0)),c=f}Zl(n)}function eE(n,i){for(var a=n.suspendedLanes,c=n.pingedLanes,f=n.expirationTimes,p=n.pendingLanes&-62914561;0<p;){var T=31-rn(p),N=1<<T,P=f[T];P===-1?((N&a)===0||(N&c)!==0)&&(f[T]=rl(N,i)):P<=i&&(n.expiredLanes|=N),p&=~N}if(i=ot,a=He,a=ja(n,n===i?a:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c=n.callbackNode,a===0||n===i&&(Ze===2||Ze===9)||n.cancelPendingCommit!==null)return c!==null&&c!==null&&Rr(c),n.callbackNode=null,n.callbackPriority=0;if((a&3)===0||Pr(n,a)){if(i=a&-a,i===n.callbackPriority)return i;switch(c!==null&&Rr(c),Da(a)){case 2:case 8:a=Ca;break;case 32:a=jr;break;case 268435456:a=Ra;break;default:a=jr}return c=tE.bind(null,n),a=Cr(a,c),n.callbackPriority=i,n.callbackNode=a,i}return c!==null&&c!==null&&Rr(c),n.callbackPriority=2,n.callbackNode=null,2}function tE(n,i){if(Qt!==0&&Qt!==5)return n.callbackNode=null,n.callbackPriority=0,null;var a=n.callbackNode;if(dd()&&n.callbackNode!==a)return null;var c=He;return c=ja(n,n===ot?c:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c===0?null:(V_(n,c,i),eE(n,zn()),n.callbackNode!=null&&n.callbackNode===a?tE.bind(null,n):null)}function nE(n,i){if(dd())return null;V_(n,i,!0)}function Ow(){Bw(function(){(We&6)!==0?Cr(sl,Dw):J_()})}function jm(){return ua===0&&(ua=al()),ua}function sE(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:La(""+n)}function iE(n,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,n.id&&a.setAttribute("form",n.id),i.parentNode.insertBefore(a,i),n=new FormData(n),a.parentNode.removeChild(a),n}function Mw(n,i,a,c,f){if(i==="submit"&&a&&a.stateNode===f){var p=sE((f[At]||null).action),T=c.submitter;T&&(i=(i=T[At]||null)?sE(i.formAction):T.getAttribute("formAction"),i!==null&&(p=i,T=null));var N=new Ua("action","action",null,c,f);n.push({event:N,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(ua!==0){var P=T?iE(f,T):new FormData(f);Wf(a,{pending:!0,data:P,method:f.method,action:p},null,P)}}else typeof p=="function"&&(N.preventDefault(),P=T?iE(f,T):new FormData(f),Wf(a,{pending:!0,data:P,method:f.method,action:p},p,P))},currentTarget:f}]})}}for(var Dm=0;Dm<gf.length;Dm++){var Om=gf[Dm],Pw=Om.toLowerCase(),kw=Om[0].toUpperCase()+Om.slice(1);os(Pw,"on"+kw)}os(Vv,"onAnimationEnd"),os(Lv,"onAnimationIteration"),os(Uv,"onAnimationStart"),os("dblclick","onDoubleClick"),os("focusin","onFocus"),os("focusout","onBlur"),os(JS,"onTransitionRun"),os(ew,"onTransitionStart"),os(tw,"onTransitionCancel"),os(Fv,"onTransitionEnd"),Ks("onMouseEnter",["mouseout","mouseover"]),Ks("onMouseLeave",["mouseout","mouseover"]),Ks("onPointerEnter",["pointerout","pointerover"]),Ks("onPointerLeave",["pointerout","pointerover"]),rs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),rs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),rs("onBeforeInput",["compositionend","keypress","textInput","paste"]),rs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),rs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),rs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Jl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Vw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Jl));function rE(n,i){i=(i&4)!==0;for(var a=0;a<n.length;a++){var c=n[a],f=c.event;c=c.listeners;e:{var p=void 0;if(i)for(var T=c.length-1;0<=T;T--){var N=c[T],P=N.instance,H=N.currentTarget;if(N=N.listener,P!==p&&f.isPropagationStopped())break e;p=N,f.currentTarget=H;try{p(f)}catch(J){ed(J)}f.currentTarget=null,p=P}else for(T=0;T<c.length;T++){if(N=c[T],P=N.instance,H=N.currentTarget,N=N.listener,P!==p&&f.isPropagationStopped())break e;p=N,f.currentTarget=H;try{p(f)}catch(J){ed(J)}f.currentTarget=null,p=P}}}}function Le(n,i){var a=i[ul];a===void 0&&(a=i[ul]=new Set);var c=n+"__bubble";a.has(c)||(aE(i,n,2,!1),a.add(c))}function Mm(n,i,a){var c=0;i&&(c|=4),aE(a,n,c,i)}var md="_reactListening"+Math.random().toString(36).slice(2);function Pm(n){if(!n[md]){n[md]=!0,dl.forEach(function(a){a!=="selectionchange"&&(Vw.has(a)||Mm(a,!1,n),Mm(a,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[md]||(i[md]=!0,Mm("selectionchange",!1,i))}}function aE(n,i,a,c){switch(RE(i)){case 2:var f=ux;break;case 8:f=dx;break;default:f=Qm}a=f.bind(null,i,a,n),f=void 0,!$n||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),c?f!==void 0?n.addEventListener(i,a,{capture:!0,passive:f}):n.addEventListener(i,a,!0):f!==void 0?n.addEventListener(i,a,{passive:f}):n.addEventListener(i,a,!1)}function km(n,i,a,c,f){var p=c;if((i&1)===0&&(i&2)===0&&c!==null)e:for(;;){if(c===null)return;var T=c.tag;if(T===3||T===4){var N=c.stateNode.containerInfo;if(N===f)break;if(T===4)for(T=c.return;T!==null;){var P=T.tag;if((P===3||P===4)&&T.stateNode.containerInfo===f)return;T=T.return}for(;N!==null;){if(T=$s(N),T===null)return;if(P=T.tag,P===5||P===6||P===26||P===27){c=p=T;continue e}N=N.parentNode}}c=c.return}gu(function(){var H=p,J=Gn(a),ne=[];e:{var G=qv.get(n);if(G!==void 0){var Y=Ua,Ie=n;switch(n){case"keypress":if(Ss(a)===0)break e;case"keydown":case"keyup":Y=Ga;break;case"focusin":Ie="focus",Y=za;break;case"focusout":Ie="blur",Y=za;break;case"beforeblur":case"afterblur":Y=za;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Y=Kn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Y=lf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Y=Nu;break;case Vv:case Lv:case Uv:Y=Ba;break;case Fv:Y=wu;break;case"scroll":case"scrollend":Y=vu;break;case"wheel":Y=$a;break;case"copy":case"cut":case"paste":Y=Ha;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Y=Al;break;case"toggle":case"beforetoggle":Y=Iu}var be=(i&4)!==0,nt=!be&&(n==="scroll"||n==="scrollend"),F=be?G!==null?G+"Capture":null:G;be=[];for(var L=H,B;L!==null;){var ee=L;if(B=ee.stateNode,ee=ee.tag,ee!==5&&ee!==26&&ee!==27||B===null||F===null||(ee=Br(L,F),ee!=null&&be.push(ec(L,ee,B))),nt)break;L=L.return}0<be.length&&(G=new Y(G,Ie,null,a,J),ne.push({event:G,listeners:be}))}}if((i&7)===0){e:{if(G=n==="mouseover"||n==="pointerover",Y=n==="mouseout"||n==="pointerout",G&&a!==Xs&&(Ie=a.relatedTarget||a.fromElement)&&($s(Ie)||Ie[Bn]))break e;if((Y||G)&&(G=J.window===J?J:(G=J.ownerDocument)?G.defaultView||G.parentWindow:window,Y?(Ie=a.relatedTarget||a.toElement,Y=H,Ie=Ie?$s(Ie):null,Ie!==null&&(nt=l(Ie),be=Ie.tag,Ie!==nt||be!==5&&be!==27&&be!==6)&&(Ie=null)):(Y=null,Ie=H),Y!==Ie)){if(be=Kn,ee="onMouseLeave",F="onMouseEnter",L="mouse",(n==="pointerout"||n==="pointerover")&&(be=Al,ee="onPointerLeave",F="onPointerEnter",L="pointer"),nt=Y==null?G:Ts(Y),B=Ie==null?G:Ts(Ie),G=new be(ee,L+"leave",Y,a,J),G.target=nt,G.relatedTarget=B,ee=null,$s(J)===H&&(be=new be(F,L+"enter",Ie,a,J),be.target=B,be.relatedTarget=nt,ee=be),nt=ee,Y&&Ie)t:{for(be=Y,F=Ie,L=0,B=be;B;B=yo(B))L++;for(B=0,ee=F;ee;ee=yo(ee))B++;for(;0<L-B;)be=yo(be),L--;for(;0<B-L;)F=yo(F),B--;for(;L--;){if(be===F||F!==null&&be===F.alternate)break t;be=yo(be),F=yo(F)}be=null}else be=null;Y!==null&&oE(ne,G,Y,be,!1),Ie!==null&&nt!==null&&oE(ne,nt,Ie,be,!0)}}e:{if(G=H?Ts(H):window,Y=G.nodeName&&G.nodeName.toLowerCase(),Y==="select"||Y==="input"&&G.type==="file")var me=wv;else if(jt(G))if(xv)me=XS;else{me=YS;var ke=KS}else Y=G.nodeName,!Y||Y.toLowerCase()!=="input"||G.type!=="checkbox"&&G.type!=="radio"?H&&gl(H.elementType)&&(me=wv):me=QS;if(me&&(me=me(n,H))){ti(ne,me,a,J);break e}ke&&ke(n,G,H),n==="focusout"&&H&&G.type==="number"&&H.memoizedProps.value!=null&&Ri(G,"number",G.value)}switch(ke=H?Ts(H):window,n){case"focusin":(jt(ke)||ke.contentEditable==="true")&&(Ka=ke,ff=H,wl=null);break;case"focusout":wl=ff=Ka=null;break;case"mousedown":mf=!0;break;case"contextmenu":case"mouseup":case"dragend":mf=!1,Pv(ne,a,J);break;case"selectionchange":if(ZS)break;case"keydown":case"keyup":Pv(ne,a,J)}var ge;if(Is)e:{switch(n){case"compositionstart":var Ne="onCompositionStart";break e;case"compositionend":Ne="onCompositionEnd";break e;case"compositionupdate":Ne="onCompositionUpdate";break e}Ne=void 0}else ze?X(n,a)&&(Ne="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Ne="onCompositionStart");Ne&&(E&&a.locale!=="ko"&&(ze||Ne!=="onCompositionStart"?Ne==="onCompositionEnd"&&ze&&(ge=yl()):(Ns=J,ji="value"in Ns?Ns.value:Ns.textContent,ze=!0)),ke=pd(H,Ne),0<ke.length&&(Ne=new Tl(Ne,n,null,a,J),ne.push({event:Ne,listeners:ke}),ge?Ne.data=ge:(ge=ce(a),ge!==null&&(Ne.data=ge)))),(ge=y?Rt(n,a):Be(n,a))&&(Ne=pd(H,"onBeforeInput"),0<Ne.length&&(ke=new Tl("onBeforeInput","beforeinput",null,a,J),ne.push({event:ke,listeners:Ne}),ke.data=ge)),Mw(ne,n,H,a,J)}rE(ne,i)})}function ec(n,i,a){return{instance:n,listener:i,currentTarget:a}}function pd(n,i){for(var a=i+"Capture",c=[];n!==null;){var f=n,p=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||p===null||(f=Br(n,a),f!=null&&c.unshift(ec(n,f,p)),f=Br(n,i),f!=null&&c.push(ec(n,f,p))),n.tag===3)return c;n=n.return}return[]}function yo(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function oE(n,i,a,c,f){for(var p=i._reactName,T=[];a!==null&&a!==c;){var N=a,P=N.alternate,H=N.stateNode;if(N=N.tag,P!==null&&P===c)break;N!==5&&N!==26&&N!==27||H===null||(P=H,f?(H=Br(a,p),H!=null&&T.unshift(ec(a,H,P))):f||(H=Br(a,p),H!=null&&T.push(ec(a,H,P)))),a=a.return}T.length!==0&&n.push({event:i,listeners:T})}var Lw=/\r\n?/g,Uw=/\u0000|\uFFFD/g;function lE(n){return(typeof n=="string"?n:""+n).replace(Lw,`
`).replace(Uw,"")}function cE(n,i){return i=lE(i),lE(n)===i}function gd(){}function tt(n,i,a,c,f,p){switch(a){case"children":typeof c=="string"?i==="body"||i==="textarea"&&c===""||Hn(n,c):(typeof c=="number"||typeof c=="bigint")&&i!=="body"&&Hn(n,""+c);break;case"className":bs(n,"class",c);break;case"tabIndex":bs(n,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":bs(n,a,c);break;case"style":pl(n,c,p);break;case"data":if(i!=="object"){bs(n,"data",c);break}case"src":case"href":if(c===""&&(i!=="a"||a!=="href")){n.removeAttribute(a);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(a);break}c=La(""+c),n.setAttribute(a,c);break;case"action":case"formAction":if(typeof c=="function"){n.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(a==="formAction"?(i!=="input"&&tt(n,i,"name",f.name,f,null),tt(n,i,"formEncType",f.formEncType,f,null),tt(n,i,"formMethod",f.formMethod,f,null),tt(n,i,"formTarget",f.formTarget,f,null)):(tt(n,i,"encType",f.encType,f,null),tt(n,i,"method",f.method,f,null),tt(n,i,"target",f.target,f,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(a);break}c=La(""+c),n.setAttribute(a,c);break;case"onClick":c!=null&&(n.onclick=gd);break;case"onScroll":c!=null&&Le("scroll",n);break;case"onScrollEnd":c!=null&&Le("scrollend",n);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(r(61));if(a=c.__html,a!=null){if(f.children!=null)throw Error(r(60));n.innerHTML=a}}break;case"multiple":n.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":n.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){n.removeAttribute("xlink:href");break}a=La(""+c),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(a,""+c):n.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(a,""):n.removeAttribute(a);break;case"capture":case"download":c===!0?n.setAttribute(a,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(a,c):n.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?n.setAttribute(a,c):n.removeAttribute(a);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?n.removeAttribute(a):n.setAttribute(a,c);break;case"popover":Le("beforetoggle",n),Le("toggle",n),Ci(n,"popover",c);break;case"xlinkActuate":$t(n,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":$t(n,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":$t(n,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":$t(n,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":$t(n,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":$t(n,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":$t(n,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":$t(n,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":$t(n,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Ci(n,"is",c);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=af.get(a)||a,Ci(n,a,c))}}function Vm(n,i,a,c,f,p){switch(a){case"style":pl(n,c,p);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(r(61));if(a=c.__html,a!=null){if(f.children!=null)throw Error(r(60));n.innerHTML=a}}break;case"children":typeof c=="string"?Hn(n,c):(typeof c=="number"||typeof c=="bigint")&&Hn(n,""+c);break;case"onScroll":c!=null&&Le("scroll",n);break;case"onScrollEnd":c!=null&&Le("scrollend",n);break;case"onClick":c!=null&&(n.onclick=gd);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Oa.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),i=a.slice(2,f?a.length-7:void 0),p=n[At]||null,p=p!=null?p[a]:null,typeof p=="function"&&n.removeEventListener(i,p,f),typeof c=="function")){typeof p!="function"&&p!==null&&(a in n?n[a]=null:n.hasAttribute(a)&&n.removeAttribute(a)),n.addEventListener(i,c,f);break e}a in n?n[a]=c:c===!0?n.setAttribute(a,""):Ci(n,a,c)}}}function Xt(n,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Le("error",n),Le("load",n);var c=!1,f=!1,p;for(p in a)if(a.hasOwnProperty(p)){var T=a[p];if(T!=null)switch(p){case"src":c=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:tt(n,i,p,T,a,null)}}f&&tt(n,i,"srcSet",a.srcSet,a,null),c&&tt(n,i,"src",a.src,a,null);return;case"input":Le("invalid",n);var N=p=T=f=null,P=null,H=null;for(c in a)if(a.hasOwnProperty(c)){var J=a[c];if(J!=null)switch(c){case"name":f=J;break;case"type":T=J;break;case"checked":P=J;break;case"defaultChecked":H=J;break;case"value":p=J;break;case"defaultValue":N=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(r(137,i));break;default:tt(n,i,c,J,a,null)}}Fr(n,p,N,P,H,T,f,!1),Va(n);return;case"select":Le("invalid",n),c=T=p=null;for(f in a)if(a.hasOwnProperty(f)&&(N=a[f],N!=null))switch(f){case"value":p=N;break;case"defaultValue":T=N;break;case"multiple":c=N;default:tt(n,i,f,N,a,null)}i=p,a=T,n.multiple=!!c,i!=null?Qs(n,!!c,i,!1):a!=null&&Qs(n,!!c,a,!0);return;case"textarea":Le("invalid",n),p=f=c=null;for(T in a)if(a.hasOwnProperty(T)&&(N=a[T],N!=null))switch(T){case"value":c=N;break;case"defaultValue":f=N;break;case"children":p=N;break;case"dangerouslySetInnerHTML":if(N!=null)throw Error(r(91));break;default:tt(n,i,T,N,a,null)}qr(n,c,f,p),Va(n);return;case"option":for(P in a)if(a.hasOwnProperty(P)&&(c=a[P],c!=null))switch(P){case"selected":n.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:tt(n,i,P,c,a,null)}return;case"dialog":Le("beforetoggle",n),Le("toggle",n),Le("cancel",n),Le("close",n);break;case"iframe":case"object":Le("load",n);break;case"video":case"audio":for(c=0;c<Jl.length;c++)Le(Jl[c],n);break;case"image":Le("error",n),Le("load",n);break;case"details":Le("toggle",n);break;case"embed":case"source":case"link":Le("error",n),Le("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(H in a)if(a.hasOwnProperty(H)&&(c=a[H],c!=null))switch(H){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:tt(n,i,H,c,a,null)}return;default:if(gl(i)){for(J in a)a.hasOwnProperty(J)&&(c=a[J],c!==void 0&&Vm(n,i,J,c,a,void 0));return}}for(N in a)a.hasOwnProperty(N)&&(c=a[N],c!=null&&tt(n,i,N,c,a,null))}function Fw(n,i,a,c){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,p=null,T=null,N=null,P=null,H=null,J=null;for(Y in a){var ne=a[Y];if(a.hasOwnProperty(Y)&&ne!=null)switch(Y){case"checked":break;case"value":break;case"defaultValue":P=ne;default:c.hasOwnProperty(Y)||tt(n,i,Y,null,c,ne)}}for(var G in c){var Y=c[G];if(ne=a[G],c.hasOwnProperty(G)&&(Y!=null||ne!=null))switch(G){case"type":p=Y;break;case"name":f=Y;break;case"checked":H=Y;break;case"defaultChecked":J=Y;break;case"value":T=Y;break;case"defaultValue":N=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(r(137,i));break;default:Y!==ne&&tt(n,i,G,Y,c,ne)}}Cn(n,T,N,P,H,J,p,f);return;case"select":Y=T=N=G=null;for(p in a)if(P=a[p],a.hasOwnProperty(p)&&P!=null)switch(p){case"value":break;case"multiple":Y=P;default:c.hasOwnProperty(p)||tt(n,i,p,null,c,P)}for(f in c)if(p=c[f],P=a[f],c.hasOwnProperty(f)&&(p!=null||P!=null))switch(f){case"value":G=p;break;case"defaultValue":N=p;break;case"multiple":T=p;default:p!==P&&tt(n,i,f,p,c,P)}i=N,a=T,c=Y,G!=null?Qs(n,!!a,G,!1):!!c!=!!a&&(i!=null?Qs(n,!!a,i,!0):Qs(n,!!a,a?[]:"",!1));return;case"textarea":Y=G=null;for(N in a)if(f=a[N],a.hasOwnProperty(N)&&f!=null&&!c.hasOwnProperty(N))switch(N){case"value":break;case"children":break;default:tt(n,i,N,null,c,f)}for(T in c)if(f=c[T],p=a[T],c.hasOwnProperty(T)&&(f!=null||p!=null))switch(T){case"value":G=f;break;case"defaultValue":Y=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(r(91));break;default:f!==p&&tt(n,i,T,f,c,p)}Je(n,G,Y);return;case"option":for(var Ie in a)if(G=a[Ie],a.hasOwnProperty(Ie)&&G!=null&&!c.hasOwnProperty(Ie))switch(Ie){case"selected":n.selected=!1;break;default:tt(n,i,Ie,null,c,G)}for(P in c)if(G=c[P],Y=a[P],c.hasOwnProperty(P)&&G!==Y&&(G!=null||Y!=null))switch(P){case"selected":n.selected=G&&typeof G!="function"&&typeof G!="symbol";break;default:tt(n,i,P,G,c,Y)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var be in a)G=a[be],a.hasOwnProperty(be)&&G!=null&&!c.hasOwnProperty(be)&&tt(n,i,be,null,c,G);for(H in c)if(G=c[H],Y=a[H],c.hasOwnProperty(H)&&G!==Y&&(G!=null||Y!=null))switch(H){case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(r(137,i));break;default:tt(n,i,H,G,c,Y)}return;default:if(gl(i)){for(var nt in a)G=a[nt],a.hasOwnProperty(nt)&&G!==void 0&&!c.hasOwnProperty(nt)&&Vm(n,i,nt,void 0,c,G);for(J in c)G=c[J],Y=a[J],!c.hasOwnProperty(J)||G===Y||G===void 0&&Y===void 0||Vm(n,i,J,G,c,Y);return}}for(var F in a)G=a[F],a.hasOwnProperty(F)&&G!=null&&!c.hasOwnProperty(F)&&tt(n,i,F,null,c,G);for(ne in c)G=c[ne],Y=a[ne],!c.hasOwnProperty(ne)||G===Y||G==null&&Y==null||tt(n,i,ne,G,c,Y)}var Lm=null,Um=null;function vd(n){return n.nodeType===9?n:n.ownerDocument}function uE(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function dE(n,i){if(n===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&i==="foreignObject"?0:n}function Fm(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var qm=null;function qw(){var n=window.event;return n&&n.type==="popstate"?n===qm?!1:(qm=n,!0):(qm=null,!1)}var hE=typeof setTimeout=="function"?setTimeout:void 0,zw=typeof clearTimeout=="function"?clearTimeout:void 0,fE=typeof Promise=="function"?Promise:void 0,Bw=typeof queueMicrotask=="function"?queueMicrotask:typeof fE<"u"?function(n){return fE.resolve(null).then(n).catch(Hw)}:hE;function Hw(n){setTimeout(function(){throw n})}function Ki(n){return n==="head"}function mE(n,i){var a=i,c=0,f=0;do{var p=a.nextSibling;if(n.removeChild(a),p&&p.nodeType===8)if(a=p.data,a==="/$"){if(0<c&&8>c){a=c;var T=n.ownerDocument;if(a&1&&tc(T.documentElement),a&2&&tc(T.body),a&4)for(a=T.head,tc(a),T=a.firstChild;T;){var N=T.nextSibling,P=T.nodeName;T[kr]||P==="SCRIPT"||P==="STYLE"||P==="LINK"&&T.rel.toLowerCase()==="stylesheet"||a.removeChild(T),T=N}}if(f===0){n.removeChild(p),cc(i);return}f--}else a==="$"||a==="$?"||a==="$!"?f++:c=a.charCodeAt(0)-48;else c=0;a=p}while(a);cc(i)}function zm(n){var i=n.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":zm(a),Ii(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}n.removeChild(a)}}function Gw(n,i,a,c){for(;n.nodeType===1;){var f=a;if(n.nodeName.toLowerCase()!==i.toLowerCase()){if(!c&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(c){if(!n[kr])switch(i){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(p=n.getAttribute("rel"),p==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(p!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(p=n.getAttribute("src"),(p!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&p&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(i==="input"&&n.type==="hidden"){var p=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===p)return n}else return n;if(n=cs(n.nextSibling),n===null)break}return null}function $w(n,i,a){if(i==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!a||(n=cs(n.nextSibling),n===null))return null;return n}function Bm(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState==="complete"}function Kw(n,i){var a=n.ownerDocument;if(n.data!=="$?"||a.readyState==="complete")i();else{var c=function(){i(),a.removeEventListener("DOMContentLoaded",c)};a.addEventListener("DOMContentLoaded",c),n._reactRetry=c}}function cs(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return n}var Hm=null;function pE(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return n;i--}else a==="/$"&&i++}n=n.previousSibling}return null}function gE(n,i,a){switch(i=vd(a),n){case"html":if(n=i.documentElement,!n)throw Error(r(452));return n;case"head":if(n=i.head,!n)throw Error(r(453));return n;case"body":if(n=i.body,!n)throw Error(r(454));return n;default:throw Error(r(451))}}function tc(n){for(var i=n.attributes;i.length;)n.removeAttributeNode(i[0]);Ii(n)}var es=new Map,vE=new Set;function yd(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var mi=ie.d;ie.d={f:Yw,r:Qw,D:Xw,C:Ww,L:Zw,m:Jw,X:tx,S:ex,M:nx};function Yw(){var n=mi.f(),i=cd();return n||i}function Qw(n){var i=Es(n);i!==null&&i.tag===5&&i.type==="form"?Vy(i):mi.r(n)}var _o=typeof document>"u"?null:document;function yE(n,i,a){var c=_o;if(c&&typeof i=="string"&&i){var f=Nt(i);f='link[rel="'+n+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),vE.has(f)||(vE.add(f),n={rel:n,crossOrigin:a,href:i},c.querySelector(f)===null&&(i=c.createElement("link"),Xt(i,"link",n),_t(i),c.head.appendChild(i)))}}function Xw(n){mi.D(n),yE("dns-prefetch",n,null)}function Ww(n,i){mi.C(n,i),yE("preconnect",n,i)}function Zw(n,i,a){mi.L(n,i,a);var c=_o;if(c&&n&&i){var f='link[rel="preload"][as="'+Nt(i)+'"]';i==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+Nt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+Nt(a.imageSizes)+'"]')):f+='[href="'+Nt(n)+'"]';var p=f;switch(i){case"style":p=Eo(n);break;case"script":p=To(n)}es.has(p)||(n=_({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:n,as:i},a),es.set(p,n),c.querySelector(f)!==null||i==="style"&&c.querySelector(nc(p))||i==="script"&&c.querySelector(sc(p))||(i=c.createElement("link"),Xt(i,"link",n),_t(i),c.head.appendChild(i)))}}function Jw(n,i){mi.m(n,i);var a=_o;if(a&&n){var c=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+Nt(c)+'"][href="'+Nt(n)+'"]',p=f;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=To(n)}if(!es.has(p)&&(n=_({rel:"modulepreload",href:n},i),es.set(p,n),a.querySelector(f)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(sc(p)))return}c=a.createElement("link"),Xt(c,"link",n),_t(c),a.head.appendChild(c)}}}function ex(n,i,a){mi.S(n,i,a);var c=_o;if(c&&n){var f=fn(c).hoistableStyles,p=Eo(n);i=i||"default";var T=f.get(p);if(!T){var N={loading:0,preload:null};if(T=c.querySelector(nc(p)))N.loading=5;else{n=_({rel:"stylesheet",href:n,"data-precedence":i},a),(a=es.get(p))&&Gm(n,a);var P=T=c.createElement("link");_t(P),Xt(P,"link",n),P._p=new Promise(function(H,J){P.onload=H,P.onerror=J}),P.addEventListener("load",function(){N.loading|=1}),P.addEventListener("error",function(){N.loading|=2}),N.loading|=4,_d(T,i,c)}T={type:"stylesheet",instance:T,count:1,state:N},f.set(p,T)}}}function tx(n,i){mi.X(n,i);var a=_o;if(a&&n){var c=fn(a).hoistableScripts,f=To(n),p=c.get(f);p||(p=a.querySelector(sc(f)),p||(n=_({src:n,async:!0},i),(i=es.get(f))&&$m(n,i),p=a.createElement("script"),_t(p),Xt(p,"link",n),a.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},c.set(f,p))}}function nx(n,i){mi.M(n,i);var a=_o;if(a&&n){var c=fn(a).hoistableScripts,f=To(n),p=c.get(f);p||(p=a.querySelector(sc(f)),p||(n=_({src:n,async:!0,type:"module"},i),(i=es.get(f))&&$m(n,i),p=a.createElement("script"),_t(p),Xt(p,"link",n),a.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},c.set(f,p))}}function _E(n,i,a,c){var f=(f=Ce.current)?yd(f):null;if(!f)throw Error(r(446));switch(n){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=Eo(a.href),a=fn(f).hoistableStyles,c=a.get(i),c||(c={type:"style",instance:null,count:0,state:null},a.set(i,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){n=Eo(a.href);var p=fn(f).hoistableStyles,T=p.get(n);if(T||(f=f.ownerDocument||f,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(n,T),(p=f.querySelector(nc(n)))&&!p._p&&(T.instance=p,T.state.loading=5),es.has(n)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},es.set(n,a),p||sx(f,n,a,T.state))),i&&c===null)throw Error(r(528,""));return T}if(i&&c!==null)throw Error(r(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=To(a),a=fn(f).hoistableScripts,c=a.get(i),c||(c={type:"script",instance:null,count:0,state:null},a.set(i,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,n))}}function Eo(n){return'href="'+Nt(n)+'"'}function nc(n){return'link[rel="stylesheet"]['+n+"]"}function EE(n){return _({},n,{"data-precedence":n.precedence,precedence:null})}function sx(n,i,a,c){n.querySelector('link[rel="preload"][as="style"]['+i+"]")?c.loading=1:(i=n.createElement("link"),c.preload=i,i.addEventListener("load",function(){return c.loading|=1}),i.addEventListener("error",function(){return c.loading|=2}),Xt(i,"link",a),_t(i),n.head.appendChild(i))}function To(n){return'[src="'+Nt(n)+'"]'}function sc(n){return"script[async]"+n}function TE(n,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var c=n.querySelector('style[data-href~="'+Nt(a.href)+'"]');if(c)return i.instance=c,_t(c),c;var f=_({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return c=(n.ownerDocument||n).createElement("style"),_t(c),Xt(c,"style",f),_d(c,a.precedence,n),i.instance=c;case"stylesheet":f=Eo(a.href);var p=n.querySelector(nc(f));if(p)return i.state.loading|=4,i.instance=p,_t(p),p;c=EE(a),(f=es.get(f))&&Gm(c,f),p=(n.ownerDocument||n).createElement("link"),_t(p);var T=p;return T._p=new Promise(function(N,P){T.onload=N,T.onerror=P}),Xt(p,"link",c),i.state.loading|=4,_d(p,a.precedence,n),i.instance=p;case"script":return p=To(a.src),(f=n.querySelector(sc(p)))?(i.instance=f,_t(f),f):(c=a,(f=es.get(p))&&(c=_({},a),$m(c,f)),n=n.ownerDocument||n,f=n.createElement("script"),_t(f),Xt(f,"link",c),n.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(r(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(c=i.instance,i.state.loading|=4,_d(c,a.precedence,n));return i.instance}function _d(n,i,a){for(var c=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=c.length?c[c.length-1]:null,p=f,T=0;T<c.length;T++){var N=c[T];if(N.dataset.precedence===i)p=N;else if(p!==f)break}p?p.parentNode.insertBefore(n,p.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(n,i.firstChild))}function Gm(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.title==null&&(n.title=i.title)}function $m(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.integrity==null&&(n.integrity=i.integrity)}var Ed=null;function bE(n,i,a){if(Ed===null){var c=new Map,f=Ed=new Map;f.set(a,c)}else f=Ed,c=f.get(a),c||(c=new Map,f.set(a,c));if(c.has(n))return c;for(c.set(n,null),a=a.getElementsByTagName(n),f=0;f<a.length;f++){var p=a[f];if(!(p[kr]||p[Ct]||n==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var T=p.getAttribute(i)||"";T=n+T;var N=c.get(T);N?N.push(p):c.set(T,[p])}}return c}function AE(n,i,a){n=n.ownerDocument||n,n.head.insertBefore(a,i==="title"?n.querySelector("head > title"):null)}function ix(n,i,a){if(a===1||i.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return n=i.disabled,typeof i.precedence=="string"&&n==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function NE(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}var ic=null;function rx(){}function ax(n,i,a){if(ic===null)throw Error(r(475));var c=ic;if(i.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var f=Eo(a.href),p=n.querySelector(nc(f));if(p){n=p._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(c.count++,c=Td.bind(c),n.then(c,c)),i.state.loading|=4,i.instance=p,_t(p);return}p=n.ownerDocument||n,a=EE(a),(f=es.get(f))&&Gm(a,f),p=p.createElement("link"),_t(p);var T=p;T._p=new Promise(function(N,P){T.onload=N,T.onerror=P}),Xt(p,"link",a),i.instance=p}c.stylesheets===null&&(c.stylesheets=new Map),c.stylesheets.set(i,n),(n=i.state.preload)&&(i.state.loading&3)===0&&(c.count++,i=Td.bind(c),n.addEventListener("load",i),n.addEventListener("error",i))}}function ox(){if(ic===null)throw Error(r(475));var n=ic;return n.stylesheets&&n.count===0&&Km(n,n.stylesheets),0<n.count?function(i){var a=setTimeout(function(){if(n.stylesheets&&Km(n,n.stylesheets),n.unsuspend){var c=n.unsuspend;n.unsuspend=null,c()}},6e4);return n.unsuspend=i,function(){n.unsuspend=null,clearTimeout(a)}}:null}function Td(){if(this.count--,this.count===0){if(this.stylesheets)Km(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var bd=null;function Km(n,i){n.stylesheets=null,n.unsuspend!==null&&(n.count++,bd=new Map,i.forEach(lx,n),bd=null,Td.call(n))}function lx(n,i){if(!(i.state.loading&4)){var a=bd.get(n);if(a)var c=a.get(null);else{a=new Map,bd.set(n,a);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<f.length;p++){var T=f[p];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(a.set(T.dataset.precedence,T),c=T)}c&&a.set(null,c)}f=i.instance,T=f.getAttribute("data-precedence"),p=a.get(T)||c,p===c&&a.set(null,f),a.set(T,f),this.count++,c=Td.bind(this),f.addEventListener("load",c),f.addEventListener("error",c),p?p.parentNode.insertBefore(f,p.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),i.state.loading|=4}}var rc={$$typeof:K,Provider:null,Consumer:null,_currentValue:ue,_currentValue2:ue,_threadCount:0};function cx(n,i,a,c,f,p,T,N){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Hs(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Hs(0),this.hiddenUpdates=Hs(null),this.identifierPrefix=c,this.onUncaughtError=f,this.onCaughtError=p,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=N,this.incompleteTransitions=new Map}function SE(n,i,a,c,f,p,T,N,P,H,J,ne){return n=new cx(n,i,a,T,N,P,H,ne),i=1,p===!0&&(i|=24),p=jn(3,null,null,i),n.current=p,p.stateNode=n,i=If(),i.refCount++,n.pooledCache=i,i.refCount++,p.memoizedState={element:c,isDehydrated:a,cache:i},Df(p),n}function wE(n){return n?(n=Wa,n):Wa}function xE(n,i,a,c,f,p){f=wE(f),c.context===null?c.context=f:c.pendingContext=f,c=Mi(i),c.payload={element:a},p=p===void 0?null:p,p!==null&&(c.callback=p),a=Pi(n,c,i),a!==null&&(kn(a,n,i),Pl(a,n,i))}function IE(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<i?a:i}}function Ym(n,i){IE(n,i),(n=n.alternate)&&IE(n,i)}function CE(n){if(n.tag===13){var i=Xa(n,67108864);i!==null&&kn(i,n,67108864),Ym(n,67108864)}}var Ad=!0;function ux(n,i,a,c){var f=Q.T;Q.T=null;var p=ie.p;try{ie.p=2,Qm(n,i,a,c)}finally{ie.p=p,Q.T=f}}function dx(n,i,a,c){var f=Q.T;Q.T=null;var p=ie.p;try{ie.p=8,Qm(n,i,a,c)}finally{ie.p=p,Q.T=f}}function Qm(n,i,a,c){if(Ad){var f=Xm(c);if(f===null)km(n,i,c,Nd,a),jE(n,c);else if(fx(f,n,i,a,c))c.stopPropagation();else if(jE(n,c),i&4&&-1<hx.indexOf(n)){for(;f!==null;){var p=Es(f);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var T=is(p.pendingLanes);if(T!==0){var N=p;for(N.pendingLanes|=2,N.entangledLanes|=2;T;){var P=1<<31-rn(T);N.entanglements[1]|=P,T&=~P}Ms(p),(We&6)===0&&(od=zn()+500,Zl(0))}}break;case 13:N=Xa(p,2),N!==null&&kn(N,p,2),cd(),Ym(p,2)}if(p=Xm(c),p===null&&km(n,i,c,Nd,a),p===f)break;f=p}f!==null&&c.stopPropagation()}else km(n,i,c,null,a)}}function Xm(n){return n=Gn(n),Wm(n)}var Nd=null;function Wm(n){if(Nd=null,n=$s(n),n!==null){var i=l(n);if(i===null)n=null;else{var a=i.tag;if(a===13){if(n=h(i),n!==null)return n;n=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}return Nd=n,null}function RE(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Jh()){case sl:return 2;case Ca:return 8;case jr:case ef:return 32;case Ra:return 268435456;default:return 32}default:return 32}}var Zm=!1,Yi=null,Qi=null,Xi=null,ac=new Map,oc=new Map,Wi=[],hx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function jE(n,i){switch(n){case"focusin":case"focusout":Yi=null;break;case"dragenter":case"dragleave":Qi=null;break;case"mouseover":case"mouseout":Xi=null;break;case"pointerover":case"pointerout":ac.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":oc.delete(i.pointerId)}}function lc(n,i,a,c,f,p){return n===null||n.nativeEvent!==p?(n={blockedOn:i,domEventName:a,eventSystemFlags:c,nativeEvent:p,targetContainers:[f]},i!==null&&(i=Es(i),i!==null&&CE(i)),n):(n.eventSystemFlags|=c,i=n.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),n)}function fx(n,i,a,c,f){switch(i){case"focusin":return Yi=lc(Yi,n,i,a,c,f),!0;case"dragenter":return Qi=lc(Qi,n,i,a,c,f),!0;case"mouseover":return Xi=lc(Xi,n,i,a,c,f),!0;case"pointerover":var p=f.pointerId;return ac.set(p,lc(ac.get(p)||null,n,i,a,c,f)),!0;case"gotpointercapture":return p=f.pointerId,oc.set(p,lc(oc.get(p)||null,n,i,a,c,f)),!0}return!1}function DE(n){var i=$s(n.target);if(i!==null){var a=l(i);if(a!==null){if(i=a.tag,i===13){if(i=h(a),i!==null){n.blockedOn=i,cu(n.priority,function(){if(a.tag===13){var c=Pn();c=Si(c);var f=Xa(a,c);f!==null&&kn(f,a,c),Ym(a,c)}});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Sd(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var a=Xm(n.nativeEvent);if(a===null){a=n.nativeEvent;var c=new a.constructor(a.type,a);Xs=c,a.target.dispatchEvent(c),Xs=null}else return i=Es(a),i!==null&&CE(i),n.blockedOn=a,!1;i.shift()}return!0}function OE(n,i,a){Sd(n)&&a.delete(i)}function mx(){Zm=!1,Yi!==null&&Sd(Yi)&&(Yi=null),Qi!==null&&Sd(Qi)&&(Qi=null),Xi!==null&&Sd(Xi)&&(Xi=null),ac.forEach(OE),oc.forEach(OE)}function wd(n,i){n.blockedOn===i&&(n.blockedOn=null,Zm||(Zm=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,mx)))}var xd=null;function ME(n){xd!==n&&(xd=n,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){xd===n&&(xd=null);for(var i=0;i<n.length;i+=3){var a=n[i],c=n[i+1],f=n[i+2];if(typeof c!="function"){if(Wm(c||a)===null)continue;break}var p=Es(a);p!==null&&(n.splice(i,3),i-=3,Wf(p,{pending:!0,data:f,method:a.method,action:c},c,f))}}))}function cc(n){function i(P){return wd(P,n)}Yi!==null&&wd(Yi,n),Qi!==null&&wd(Qi,n),Xi!==null&&wd(Xi,n),ac.forEach(i),oc.forEach(i);for(var a=0;a<Wi.length;a++){var c=Wi[a];c.blockedOn===n&&(c.blockedOn=null)}for(;0<Wi.length&&(a=Wi[0],a.blockedOn===null);)DE(a),a.blockedOn===null&&Wi.shift();if(a=(n.ownerDocument||n).$$reactFormReplay,a!=null)for(c=0;c<a.length;c+=3){var f=a[c],p=a[c+1],T=f[At]||null;if(typeof p=="function")T||ME(a);else if(T){var N=null;if(p&&p.hasAttribute("formAction")){if(f=p,T=p[At]||null)N=T.formAction;else if(Wm(f)!==null)continue}else N=T.action;typeof N=="function"?a[c+1]=N:(a.splice(c,3),c-=3),ME(a)}}}function Jm(n){this._internalRoot=n}Id.prototype.render=Jm.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(r(409));var a=i.current,c=Pn();xE(a,c,n,i,null,null)},Id.prototype.unmount=Jm.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;xE(n.current,2,null,n,null,null),cd(),i[Bn]=null}};function Id(n){this._internalRoot=n}Id.prototype.unstable_scheduleHydration=function(n){if(n){var i=wi();n={blockedOn:null,target:n,priority:i};for(var a=0;a<Wi.length&&i!==0&&i<Wi[a].priority;a++);Wi.splice(a,0,n),a===0&&DE(n)}};var PE=e.version;if(PE!=="19.1.0")throw Error(r(527,PE,"19.1.0"));ie.findDOMNode=function(n){var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(r(188)):(n=Object.keys(n).join(","),Error(r(268,n)));return n=g(i),n=n!==null?v(n):null,n=n===null?null:n.stateNode,n};var px={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:Q,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Cd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Cd.isDisabled&&Cd.supportsFiber)try{pt=Cd.inject(px),Xe=Cd}catch{}}return dc.createRoot=function(n,i){if(!o(n))throw Error(r(299));var a=!1,c="",f=Wy,p=Zy,T=Jy,N=null;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(c=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(p=i.onCaughtError),i.onRecoverableError!==void 0&&(T=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(N=i.unstable_transitionCallbacks)),i=SE(n,1,!1,null,null,a,c,f,p,T,N,null),n[Bn]=i.current,Pm(n),new Jm(i)},dc.hydrateRoot=function(n,i,a){if(!o(n))throw Error(r(299));var c=!1,f="",p=Wy,T=Zy,N=Jy,P=null,H=null;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(p=a.onUncaughtError),a.onCaughtError!==void 0&&(T=a.onCaughtError),a.onRecoverableError!==void 0&&(N=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(P=a.unstable_transitionCallbacks),a.formState!==void 0&&(H=a.formState)),i=SE(n,1,!0,i,a??null,c,f,p,T,N,P,H),i.context=wE(null),a=i.current,c=Pn(),c=Si(c),f=Mi(c),f.callback=null,Pi(a,f,c),a=c,i.current.lanes=a,Gs(i,a),Ms(i),n[Bn]=i.current,Pm(n),new Id(i)},dc.version="19.1.0",dc}var GE;function Sx(){if(GE)return np.exports;GE=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),np.exports=Nx(),np.exports}var wx=Sx();const xx=()=>{};var $E={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s0=function(s){const e=[];let t=0;for(let r=0;r<s.length;r++){let o=s.charCodeAt(r);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&r+1<s.length&&(s.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(s.charCodeAt(++r)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},Ix=function(s){const e=[];let t=0,r=0;for(;t<s.length;){const o=s[t++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){const l=s[t++];e[r++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=s[t++],h=s[t++],m=s[t++],g=((o&7)<<18|(l&63)<<12|(h&63)<<6|m&63)-65536;e[r++]=String.fromCharCode(55296+(g>>10)),e[r++]=String.fromCharCode(56320+(g&1023))}else{const l=s[t++],h=s[t++];e[r++]=String.fromCharCode((o&15)<<12|(l&63)<<6|h&63)}}return e.join("")},i0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<s.length;o+=3){const l=s[o],h=o+1<s.length,m=h?s[o+1]:0,g=o+2<s.length,v=g?s[o+2]:0,_=l>>2,A=(l&3)<<4|m>>4;let b=(m&15)<<2|v>>6,O=v&63;g||(O=64,h||(b=64)),r.push(t[_],t[A],t[b],t[O])}return r.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(s0(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):Ix(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<s.length;){const l=t[s.charAt(o++)],m=o<s.length?t[s.charAt(o)]:0;++o;const v=o<s.length?t[s.charAt(o)]:64;++o;const A=o<s.length?t[s.charAt(o)]:64;if(++o,l==null||m==null||v==null||A==null)throw new Cx;const b=l<<2|m>>4;if(r.push(b),v!==64){const O=m<<4&240|v>>2;if(r.push(O),A!==64){const I=v<<6&192|A;r.push(I)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class Cx extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Rx=function(s){const e=s0(s);return i0.encodeByteArray(e,!0)},Wd=function(s){return Rx(s).replace(/\./g,"")},r0=function(s){try{return i0.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jx(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dx=()=>jx().__FIREBASE_DEFAULTS__,Ox=()=>{if(typeof process>"u"||typeof $E>"u")return;const s=$E.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},Mx=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&r0(s[1]);return e&&JSON.parse(e)},Ah=()=>{try{return xx()||Dx()||Ox()||Mx()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},a0=s=>{var e,t;return(t=(e=Ah())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[s]},o0=s=>{const e=a0(s);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},l0=()=>{var s;return(s=Ah())===null||s===void 0?void 0:s.config},c0=s=>{var e;return(e=Ah())===null||e===void 0?void 0:e[`_${s}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Px{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Na(s){return s.endsWith(".cloudworkstations.dev")}async function ag(s){return(await fetch(s,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u0(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",o=s.iat||0,l=s.sub||s.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},s);return[Wd(JSON.stringify(t)),Wd(JSON.stringify(h)),""].join(".")}const yc={};function kx(){const s={prod:[],emulator:[]};for(const e of Object.keys(yc))yc[e]?s.emulator.push(e):s.prod.push(e);return s}function Vx(s){let e=document.getElementById(s),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),t=!0),{created:t,element:e}}let KE=!1;function og(s,e){if(typeof window>"u"||typeof document>"u"||!Na(window.location.host)||yc[s]===e||yc[s]||KE)return;yc[s]=e;function t(b){return`__firebase__banner__${b}`}const r="__firebase__banner",l=kx().prod.length>0;function h(){const b=document.getElementById(r);b&&b.remove()}function m(b){b.style.display="flex",b.style.background="#7faaf0",b.style.position="fixed",b.style.bottom="5px",b.style.left="5px",b.style.padding=".5em",b.style.borderRadius="5px",b.style.alignItems="center"}function g(b,O){b.setAttribute("width","24"),b.setAttribute("id",O),b.setAttribute("height","24"),b.setAttribute("viewBox","0 0 24 24"),b.setAttribute("fill","none"),b.style.marginLeft="-6px"}function v(){const b=document.createElement("span");return b.style.cursor="pointer",b.style.marginLeft="16px",b.style.fontSize="24px",b.innerHTML=" &times;",b.onclick=()=>{KE=!0,h()},b}function _(b,O){b.setAttribute("id",O),b.innerText="Learn more",b.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",b.setAttribute("target","__blank"),b.style.paddingLeft="5px",b.style.textDecoration="underline"}function A(){const b=Vx(r),O=t("text"),I=document.getElementById(O)||document.createElement("span"),U=t("learnmore"),C=document.getElementById(U)||document.createElement("a"),$=t("preprendIcon"),W=document.getElementById($)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(b.created){const K=b.element;m(K),_(C,U);const Z=v();g(W,$),K.append(W,I,C,Z),document.body.appendChild(K)}l?(I.innerText="Preview backend disconnected.",W.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(W.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,I.innerText="Preview backend running in this workspace."),I.setAttribute("id",O)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",A):A()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Lx(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(hn())}function Ux(){var s;const e=(s=Ah())===null||s===void 0?void 0:s.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Fx(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function d0(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function qx(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function zx(){const s=hn();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function Bx(){return!Ux()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function lg(){try{return typeof indexedDB=="object"}catch{return!1}}function cg(){return new Promise((s,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(r),s(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}function h0(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hx="FirebaseError";class ss extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=Hx,Object.setPrototypeOf(this,ss.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Er.prototype.create)}}class Er{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],h=l?Gx(l,r):"Error",m=`${this.serviceName}: ${h} (${o}).`;return new ss(o,m,r)}}function Gx(s,e){return s.replace($x,(t,r)=>{const o=e[r];return o!=null?String(o):`<${r}?>`})}const $x=/\{\$([^}]+)}/g;function Kx(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function ur(s,e){if(s===e)return!0;const t=Object.keys(s),r=Object.keys(e);for(const o of t){if(!r.includes(o))return!1;const l=s[o],h=e[o];if(YE(l)&&YE(h)){if(!ur(l,h))return!1}else if(l!==h)return!1}for(const o of r)if(!t.includes(o))return!1;return!0}function YE(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zc(s){const e=[];for(const[t,r]of Object.entries(s))Array.isArray(r)?r.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function hc(s){const e={};return s.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[o,l]=r.split("=");e[decodeURIComponent(o)]=decodeURIComponent(l)}}),e}function fc(s){const e=s.indexOf("?");if(!e)return"";const t=s.indexOf("#",e);return s.substring(e,t>0?t:void 0)}function Yx(s,e){const t=new Qx(s,e);return t.subscribe.bind(t)}class Qx{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let o;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");Xx(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:r},o.next===void 0&&(o.next=ap),o.error===void 0&&(o.error=ap),o.complete===void 0&&(o.complete=ap);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Xx(s,e){if(typeof s!="object"||s===null)return!1;for(const t of e)if(t in s&&typeof s[t]=="function")return!0;return!1}function ap(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wx=1e3,Zx=2,Jx=4*60*60*1e3,eI=.5;function QE(s,e=Wx,t=Zx){const r=e*Math.pow(t,s),o=Math.round(eI*r*(Math.random()-.5)*2);return Math.min(Jx,r+o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lt(s){return s&&s._delegate?s._delegate:s}class qn{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const da="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tI{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new Px;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e?.identifier),o=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(l){if(o)return null;throw l}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(sI(e))try{this.getOrInitializeService({instanceIdentifier:da})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});r.resolve(l)}catch{}}}}clearInstance(e=da){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=da){return this.instances.has(e)}getOptions(e=da){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[l,h]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(l);r===m&&h.resolve(o)}return o}onInit(e,t){var r;const o=this.normalizeInstanceIdentifier(t),l=(r=this.onInitCallbacks.get(o))!==null&&r!==void 0?r:new Set;l.add(e),this.onInitCallbacks.set(o,l);const h=this.instances.get(o);return h&&e(h,o),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const o of r)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:nI(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=da){return this.component?this.component.multipleInstances?e:da:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function nI(s){return s===da?void 0:s}function sI(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new tI(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ue;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Ue||(Ue={}));const rI={debug:Ue.DEBUG,verbose:Ue.VERBOSE,info:Ue.INFO,warn:Ue.WARN,error:Ue.ERROR,silent:Ue.SILENT},aI=Ue.INFO,oI={[Ue.DEBUG]:"log",[Ue.VERBOSE]:"log",[Ue.INFO]:"info",[Ue.WARN]:"warn",[Ue.ERROR]:"error"},lI=(s,e,...t)=>{if(e<s.logLevel)return;const r=new Date().toISOString(),o=oI[e];if(o)console[o](`[${r}]  ${s.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Bc{constructor(e){this.name=e,this._logLevel=aI,this._logHandler=lI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?rI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ue.DEBUG,...e),this._logHandler(this,Ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ue.VERBOSE,...e),this._logHandler(this,Ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ue.INFO,...e),this._logHandler(this,Ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ue.WARN,...e),this._logHandler(this,Ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ue.ERROR,...e),this._logHandler(this,Ue.ERROR,...e)}}const cI=(s,e)=>e.some(t=>s instanceof t);let XE,WE;function uI(){return XE||(XE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function dI(){return WE||(WE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const f0=new WeakMap,xp=new WeakMap,m0=new WeakMap,op=new WeakMap,ug=new WeakMap;function hI(s){const e=new Promise((t,r)=>{const o=()=>{s.removeEventListener("success",l),s.removeEventListener("error",h)},l=()=>{t(ar(s.result)),o()},h=()=>{r(s.error),o()};s.addEventListener("success",l),s.addEventListener("error",h)});return e.then(t=>{t instanceof IDBCursor&&f0.set(t,s)}).catch(()=>{}),ug.set(e,s),e}function fI(s){if(xp.has(s))return;const e=new Promise((t,r)=>{const o=()=>{s.removeEventListener("complete",l),s.removeEventListener("error",h),s.removeEventListener("abort",h)},l=()=>{t(),o()},h=()=>{r(s.error||new DOMException("AbortError","AbortError")),o()};s.addEventListener("complete",l),s.addEventListener("error",h),s.addEventListener("abort",h)});xp.set(s,e)}let Ip={get(s,e,t){if(s instanceof IDBTransaction){if(e==="done")return xp.get(s);if(e==="objectStoreNames")return s.objectStoreNames||m0.get(s);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ar(s[e])},set(s,e,t){return s[e]=t,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function mI(s){Ip=s(Ip)}function pI(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=s.call(lp(this),e,...t);return m0.set(r,e.sort?e.sort():[e]),ar(r)}:dI().includes(s)?function(...e){return s.apply(lp(this),e),ar(f0.get(this))}:function(...e){return ar(s.apply(lp(this),e))}}function gI(s){return typeof s=="function"?pI(s):(s instanceof IDBTransaction&&fI(s),cI(s,uI())?new Proxy(s,Ip):s)}function ar(s){if(s instanceof IDBRequest)return hI(s);if(op.has(s))return op.get(s);const e=gI(s);return e!==s&&(op.set(s,e),ug.set(e,s)),e}const lp=s=>ug.get(s);function p0(s,e,{blocked:t,upgrade:r,blocking:o,terminated:l}={}){const h=indexedDB.open(s,e),m=ar(h);return r&&h.addEventListener("upgradeneeded",g=>{r(ar(h.result),g.oldVersion,g.newVersion,ar(h.transaction),g)}),t&&h.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),m.then(g=>{l&&g.addEventListener("close",()=>l()),o&&g.addEventListener("versionchange",v=>o(v.oldVersion,v.newVersion,v))}).catch(()=>{}),m}const vI=["get","getKey","getAll","getAllKeys","count"],yI=["put","add","delete","clear"],cp=new Map;function ZE(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(cp.get(e))return cp.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,o=yI.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(o||vI.includes(t)))return;const l=async function(h,...m){const g=this.transaction(h,o?"readwrite":"readonly");let v=g.store;return r&&(v=v.index(m.shift())),(await Promise.all([v[t](...m),o&&g.done]))[0]};return cp.set(e,l),l}mI(s=>({...s,get:(e,t,r)=>ZE(e,t)||s.get(e,t,r),has:(e,t)=>!!ZE(e,t)||s.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(EI(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function EI(s){const e=s.getComponent();return e?.type==="VERSION"}const Cp="@firebase/app",JE="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _i=new Bc("@firebase/app"),TI="@firebase/app-compat",bI="@firebase/analytics-compat",AI="@firebase/analytics",NI="@firebase/app-check-compat",SI="@firebase/app-check",wI="@firebase/auth",xI="@firebase/auth-compat",II="@firebase/database",CI="@firebase/data-connect",RI="@firebase/database-compat",jI="@firebase/functions",DI="@firebase/functions-compat",OI="@firebase/installations",MI="@firebase/installations-compat",PI="@firebase/messaging",kI="@firebase/messaging-compat",VI="@firebase/performance",LI="@firebase/performance-compat",UI="@firebase/remote-config",FI="@firebase/remote-config-compat",qI="@firebase/storage",zI="@firebase/storage-compat",BI="@firebase/firestore",HI="@firebase/ai",GI="@firebase/firestore-compat",$I="firebase",KI="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rp="[DEFAULT]",YI={[Cp]:"fire-core",[TI]:"fire-core-compat",[AI]:"fire-analytics",[bI]:"fire-analytics-compat",[SI]:"fire-app-check",[NI]:"fire-app-check-compat",[wI]:"fire-auth",[xI]:"fire-auth-compat",[II]:"fire-rtdb",[CI]:"fire-data-connect",[RI]:"fire-rtdb-compat",[jI]:"fire-fn",[DI]:"fire-fn-compat",[OI]:"fire-iid",[MI]:"fire-iid-compat",[PI]:"fire-fcm",[kI]:"fire-fcm-compat",[VI]:"fire-perf",[LI]:"fire-perf-compat",[UI]:"fire-rc",[FI]:"fire-rc-compat",[qI]:"fire-gcs",[zI]:"fire-gcs-compat",[BI]:"fire-fst",[GI]:"fire-fst-compat",[HI]:"fire-vertex","fire-js":"fire-js",[$I]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zd=new Map,QI=new Map,jp=new Map;function eT(s,e){try{s.container.addComponent(e)}catch(t){_i.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,t)}}function ts(s){const e=s.name;if(jp.has(e))return _i.debug(`There were multiple attempts to register component ${e}.`),!1;jp.set(e,s);for(const t of Zd.values())eT(t,s);for(const t of QI.values())eT(t,s);return!0}function Ai(s,e){const t=s.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),s.container.getProvider(e)}function Nn(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},or=new Er("app","Firebase",XI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WI{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new qn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw or.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sa=KI;function g0(s,e={}){let t=s;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Rp,automaticDataCollectionEnabled:!0},e),o=r.name;if(typeof o!="string"||!o)throw or.create("bad-app-name",{appName:String(o)});if(t||(t=l0()),!t)throw or.create("no-options");const l=Zd.get(o);if(l){if(ur(t,l.options)&&ur(r,l.config))return l;throw or.create("duplicate-app",{appName:o})}const h=new iI(o);for(const g of jp.values())h.addComponent(g);const m=new WI(t,r,h);return Zd.set(o,m),m}function Hc(s=Rp){const e=Zd.get(s);if(!e&&s===Rp&&l0())return g0();if(!e)throw or.create("no-app",{appName:s});return e}function dn(s,e,t){var r;let o=(r=YI[s])!==null&&r!==void 0?r:s;t&&(o+=`-${t}`);const l=o.match(/\s|\//),h=e.match(/\s|\//);if(l||h){const m=[`Unable to register library "${o}" with version "${e}":`];l&&m.push(`library name "${o}" contains illegal characters (whitespace or "/")`),l&&h&&m.push("and"),h&&m.push(`version name "${e}" contains illegal characters (whitespace or "/")`),_i.warn(m.join(" "));return}ts(new qn(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZI="firebase-heartbeat-database",JI=1,Rc="firebase-heartbeat-store";let up=null;function v0(){return up||(up=p0(ZI,JI,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(Rc)}catch(t){console.warn(t)}}}}).catch(s=>{throw or.create("idb-open",{originalErrorMessage:s.message})})),up}async function eC(s){try{const t=(await v0()).transaction(Rc),r=await t.objectStore(Rc).get(y0(s));return await t.done,r}catch(e){if(e instanceof ss)_i.warn(e.message);else{const t=or.create("idb-get",{originalErrorMessage:e?.message});_i.warn(t.message)}}}async function tT(s,e){try{const r=(await v0()).transaction(Rc,"readwrite");await r.objectStore(Rc).put(e,y0(s)),await r.done}catch(t){if(t instanceof ss)_i.warn(t.message);else{const r=or.create("idb-set",{originalErrorMessage:t?.message});_i.warn(r.message)}}}function y0(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tC=1024,nC=30;class sC{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new rC(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=nT();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(h=>h.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats.length>nC){const h=aC(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(h,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){_i.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=nT(),{heartbeatsToSend:r,unsentEntries:o}=iC(this._heartbeatsCache.heartbeats),l=Wd(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return _i.warn(t),""}}}function nT(){return new Date().toISOString().substring(0,10)}function iC(s,e=tC){const t=[];let r=s.slice();for(const o of s){const l=t.find(h=>h.agent===o.agent);if(l){if(l.dates.push(o.date),sT(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),sT(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class rC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return lg()?cg().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await eC(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return tT(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return tT(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function sT(s){return Wd(JSON.stringify({version:2,heartbeats:s})).length}function aC(s){if(s.length===0)return-1;let e=0,t=s[0].date;for(let r=1;r<s.length;r++)s[r].date<t&&(t=s[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oC(s){ts(new qn("platform-logger",e=>new _I(e),"PRIVATE")),ts(new qn("heartbeat",e=>new sC(e),"PRIVATE")),dn(Cp,JE,s),dn(Cp,JE,"esm2017"),dn("fire-js","")}oC("");function dg(s,e){var t={};for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&e.indexOf(r)<0&&(t[r]=s[r]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(s);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(s,r[o])&&(t[r[o]]=s[r[o]]);return t}function _0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const lC=_0,E0=new Er("auth","Firebase",_0());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jd=new Bc("@firebase/auth");function cC(s,...e){Jd.logLevel<=Ue.WARN&&Jd.warn(`Auth (${Sa}): ${s}`,...e)}function Ud(s,...e){Jd.logLevel<=Ue.ERROR&&Jd.error(`Auth (${Sa}): ${s}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ns(s,...e){throw fg(s,...e)}function ps(s,...e){return fg(s,...e)}function hg(s,e,t){const r=Object.assign(Object.assign({},lC()),{[e]:t});return new Er("auth","Firebase",r).create(e,{appName:s.name})}function yi(s){return hg(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function uC(s,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&ns(s,"argument-error"),hg(s,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function fg(s,...e){if(typeof s!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=s.name),s._errorFactory.create(t,...r)}return E0.create(s,...e)}function xe(s,e,...t){if(!s)throw fg(e,...t)}function gi(s){const e="INTERNAL ASSERTION FAILED: "+s;throw Ud(e),new Error(e)}function Ei(s,e){s||gi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dp(){var s;return typeof self<"u"&&((s=self.location)===null||s===void 0?void 0:s.href)||""}function dC(){return iT()==="http:"||iT()==="https:"}function iT(){var s;return typeof self<"u"&&((s=self.location)===null||s===void 0?void 0:s.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(dC()||d0()||"connection"in navigator)?navigator.onLine:!0}function fC(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ei(t>e,"Short delay should be less than long delay!"),this.isMobile=Lx()||qx()}get(){return hC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mg(s,e){Ei(s.emulator,"Emulator should always be set here");const{url:t}=s.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T0{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;gi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;gi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;gi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pC=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],gC=new Gc(3e4,6e4);function Tr(s,e){return s.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:s.tenantId}):e}async function br(s,e,t,r,o={}){return b0(s,o,async()=>{let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});const m=zc(Object.assign({key:s.config.apiKey},h)).slice(1),g=await s._getAdditionalHeaders();g["Content-Type"]="application/json",s.languageCode&&(g["X-Firebase-Locale"]=s.languageCode);const v=Object.assign({method:e,headers:g},l);return Fx()||(v.referrerPolicy="no-referrer"),s.emulatorConfig&&Na(s.emulatorConfig.host)&&(v.credentials="include"),T0.fetch()(await A0(s,s.config.apiHost,t,m),v)})}async function b0(s,e,t){s._canInitEmulator=!1;const r=Object.assign(Object.assign({},mC),e);try{const o=new yC(s),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const h=await l.json();if("needConfirmation"in h)throw Rd(s,"account-exists-with-different-credential",h);if(l.ok&&!("errorMessage"in h))return h;{const m=l.ok?h.errorMessage:h.error.message,[g,v]=m.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Rd(s,"credential-already-in-use",h);if(g==="EMAIL_EXISTS")throw Rd(s,"email-already-in-use",h);if(g==="USER_DISABLED")throw Rd(s,"user-disabled",h);const _=r[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(v)throw hg(s,_,v);ns(s,_)}}catch(o){if(o instanceof ss)throw o;ns(s,"network-request-failed",{message:String(o)})}}async function $c(s,e,t,r,o={}){const l=await br(s,e,t,r,o);return"mfaPendingCredential"in l&&ns(s,"multi-factor-auth-required",{_serverResponse:l}),l}async function A0(s,e,t,r){const o=`${e}${t}?${r}`,l=s,h=l.config.emulator?mg(s.config,o):`${s.config.apiScheme}://${o}`;return pC.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(h).toString():h}function vC(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class yC{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(ps(this.auth,"network-request-failed")),gC.get())})}}function Rd(s,e,t){const r={appName:s.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const o=ps(s,e,r);return o.customData._tokenResponse=t,o}function rT(s){return s!==void 0&&s.enterprise!==void 0}class _C{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return vC(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function EC(s,e){return br(s,"GET","/v2/recaptchaConfig",Tr(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TC(s,e){return br(s,"POST","/v1/accounts:delete",e)}async function eh(s,e){return br(s,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _c(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function bC(s,e=!1){const t=lt(s),r=await t.getIdToken(e),o=pg(r);xe(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,h=l?.sign_in_provider;return{claims:o,token:r,authTime:_c(dp(o.auth_time)),issuedAtTime:_c(dp(o.iat)),expirationTime:_c(dp(o.exp)),signInProvider:h||null,signInSecondFactor:l?.sign_in_second_factor||null}}function dp(s){return Number(s)*1e3}function pg(s){const[e,t,r]=s.split(".");if(e===void 0||t===void 0||r===void 0)return Ud("JWT malformed, contained fewer than 3 sections"),null;try{const o=r0(t);return o?JSON.parse(o):(Ud("Failed to decode base64 JWT payload"),null)}catch(o){return Ud("Caught error parsing JWT payload as JSON",o?.toString()),null}}function aT(s){const e=pg(s);return xe(e,"internal-error"),xe(typeof e.exp<"u","internal-error"),xe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jc(s,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof ss&&AC(r)&&s.auth.currentUser===s&&await s.auth.signOut(),r}}function AC({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NC{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Op{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=_c(this.lastLoginAt),this.creationTime=_c(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function th(s){var e;const t=s.auth,r=await s.getIdToken(),o=await jc(s,eh(t,{idToken:r}));xe(o?.users.length,t,"internal-error");const l=o.users[0];s._notifyReloadListener(l);const h=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?N0(l.providerUserInfo):[],m=wC(s.providerData,h),g=s.isAnonymous,v=!(s.email&&l.passwordHash)&&!m?.length,_=g?v:!1,A={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:m,metadata:new Op(l.createdAt,l.lastLoginAt),isAnonymous:_};Object.assign(s,A)}async function SC(s){const e=lt(s);await th(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function wC(s,e){return[...s.filter(r=>!e.some(o=>o.providerId===r.providerId)),...e]}function N0(s){return s.map(e=>{var{providerId:t}=e,r=dg(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xC(s,e){const t=await b0(s,{},async()=>{const r=zc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=s.config,h=await A0(s,o,"/v1/token",`key=${l}`),m=await s._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:m,body:r};return s.emulatorConfig&&Na(s.emulatorConfig.host)&&(g.credentials="include"),T0.fetch()(h,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function IC(s,e){return br(s,"POST","/v2/accounts:revokeToken",Tr(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){xe(e.idToken,"internal-error"),xe(typeof e.idToken<"u","internal-error"),xe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):aT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){xe(e.length!==0,"internal-error");const t=aT(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(xe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:o,expiresIn:l}=await xC(e,t);this.updateTokensAndExpiration(r,o,Number(l))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:o,expirationTime:l}=t,h=new jo;return r&&(xe(typeof r=="string","internal-error",{appName:e}),h.refreshToken=r),o&&(xe(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),l&&(xe(typeof l=="number","internal-error",{appName:e}),h.expirationTime=l),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new jo,this.toJSON())}_performRefresh(){return gi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ji(s,e){xe(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class fs{constructor(e){var{uid:t,auth:r,stsTokenManager:o}=e,l=dg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new NC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Op(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await jc(this,this.stsTokenManager.getToken(this.auth,e));return xe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return bC(this,e)}reload(){return SC(this)}_assign(e){this!==e&&(xe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new fs(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){xe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await th(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Nn(this.auth.app))return Promise.reject(yi(this.auth));const e=await this.getIdToken();return await jc(this,TC(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,o,l,h,m,g,v,_;const A=(r=t.displayName)!==null&&r!==void 0?r:void 0,b=(o=t.email)!==null&&o!==void 0?o:void 0,O=(l=t.phoneNumber)!==null&&l!==void 0?l:void 0,I=(h=t.photoURL)!==null&&h!==void 0?h:void 0,U=(m=t.tenantId)!==null&&m!==void 0?m:void 0,C=(g=t._redirectEventId)!==null&&g!==void 0?g:void 0,$=(v=t.createdAt)!==null&&v!==void 0?v:void 0,W=(_=t.lastLoginAt)!==null&&_!==void 0?_:void 0,{uid:K,emailVerified:Z,isAnonymous:q,providerData:oe,stsTokenManager:D}=t;xe(K&&D,e,"internal-error");const S=jo.fromJSON(this.name,D);xe(typeof K=="string",e,"internal-error"),Ji(A,e.name),Ji(b,e.name),xe(typeof Z=="boolean",e,"internal-error"),xe(typeof q=="boolean",e,"internal-error"),Ji(O,e.name),Ji(I,e.name),Ji(U,e.name),Ji(C,e.name),Ji($,e.name),Ji(W,e.name);const R=new fs({uid:K,auth:e,email:b,emailVerified:Z,displayName:A,isAnonymous:q,photoURL:I,phoneNumber:O,tenantId:U,stsTokenManager:S,createdAt:$,lastLoginAt:W});return oe&&Array.isArray(oe)&&(R.providerData=oe.map(j=>Object.assign({},j))),C&&(R._redirectEventId=C),R}static async _fromIdTokenResponse(e,t,r=!1){const o=new jo;o.updateFromServerResponse(t);const l=new fs({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:r});return await th(l),l}static async _fromGetAccountInfoResponse(e,t,r){const o=t.users[0];xe(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?N0(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!l?.length,m=new jo;m.updateFromIdToken(r);const g=new fs({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:h}),v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new Op(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!l?.length};return Object.assign(g,v),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oT=new Map;function vi(s){Ei(s instanceof Function,"Expected a class definition");let e=oT.get(s);return e?(Ei(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,oT.set(s,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}S0.type="NONE";const lT=S0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fd(s,e,t){return`firebase:${s}:${e}:${t}`}class Do{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:o,name:l}=this.auth;this.fullUserKey=Fd(this.userKey,o.apiKey,l),this.fullPersistenceKey=Fd("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await eh(this.auth,{idToken:e}).catch(()=>{});return t?fs._fromGetAccountInfoResponse(this.auth,t,e):null}return fs._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Do(vi(lT),e,r);const o=(await Promise.all(t.map(async v=>{if(await v._isAvailable())return v}))).filter(v=>v);let l=o[0]||vi(lT);const h=Fd(r,e.config.apiKey,e.name);let m=null;for(const v of t)try{const _=await v._get(h);if(_){let A;if(typeof _=="string"){const b=await eh(e,{idToken:_}).catch(()=>{});if(!b)break;A=await fs._fromGetAccountInfoResponse(e,b,_)}else A=fs._fromJSON(e,_);v!==l&&(m=A),l=v;break}}catch{}const g=o.filter(v=>v._shouldAllowMigration);return!l._shouldAllowMigration||!g.length?new Do(l,e,r):(l=g[0],m&&await l._set(h,m.toJSON()),await Promise.all(t.map(async v=>{if(v!==l)try{await v._remove(h)}catch{}})),new Do(l,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cT(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(C0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(w0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(j0(e))return"Blackberry";if(D0(e))return"Webos";if(x0(e))return"Safari";if((e.includes("chrome/")||I0(e))&&!e.includes("edge/"))return"Chrome";if(R0(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=s.match(t);if(r?.length===2)return r[1]}return"Other"}function w0(s=hn()){return/firefox\//i.test(s)}function x0(s=hn()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function I0(s=hn()){return/crios\//i.test(s)}function C0(s=hn()){return/iemobile/i.test(s)}function R0(s=hn()){return/android/i.test(s)}function j0(s=hn()){return/blackberry/i.test(s)}function D0(s=hn()){return/webos/i.test(s)}function gg(s=hn()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function CC(s=hn()){var e;return gg(s)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function RC(){return zx()&&document.documentMode===10}function O0(s=hn()){return gg(s)||R0(s)||D0(s)||j0(s)||/windows phone/i.test(s)||C0(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M0(s,e=[]){let t;switch(s){case"Browser":t=cT(hn());break;case"Worker":t=`${cT(hn())}-${s}`;break;default:t=s}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Sa}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jC{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=l=>new Promise((h,m)=>{try{const g=e(l);h(g)}catch(g){m(g)}});r.onAbort=t,this.queue.push(r);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DC(s,e={}){return br(s,"GET","/v2/passwordPolicy",Tr(s,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OC=6;class MC{constructor(e){var t,r,o,l;const h=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=h.minPasswordLength)!==null&&t!==void 0?t:OC,h.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=h.maxPasswordLength),h.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=h.containsLowercaseCharacter),h.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=h.containsUppercaseCharacter),h.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=h.containsNumericCharacter),h.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=h.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,o,l,h,m;const g={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,g),this.validatePasswordCharacterOptions(e,g),g.isValid&&(g.isValid=(t=g.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),g.isValid&&(g.isValid=(r=g.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),g.isValid&&(g.isValid=(o=g.containsLowercaseLetter)!==null&&o!==void 0?o:!0),g.isValid&&(g.isValid=(l=g.containsUppercaseLetter)!==null&&l!==void 0?l:!0),g.isValid&&(g.isValid=(h=g.containsNumericCharacter)!==null&&h!==void 0?h:!0),g.isValid&&(g.isValid=(m=g.containsNonAlphanumericCharacter)!==null&&m!==void 0?m:!0),g}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let o=0;o<e.length;o++)r=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{constructor(e,t,r,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new uT(this),this.idTokenSubscription=new uT(this),this.beforeStateQueue=new jC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=E0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=vi(t)),this._initializationPromise=this.queue(async()=>{var r,o,l;if(!this._deleted&&(this.persistenceManager=await Do.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await eh(this,{idToken:e}),r=await fs._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Nn(this.app)){const h=this.app.settings.authIdToken;return h?new Promise(m=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(h).then(m,m))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let o=r,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const h=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,m=o?._redirectEventId,g=await this.tryRedirectSignIn(e);(!h||h===m)&&g?.user&&(o=g.user,l=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(o)}catch(h){o=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(h))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return xe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await th(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=fC()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Nn(this.app))return Promise.reject(yi(this));const t=e?lt(e):null;return t&&xe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&xe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Nn(this.app)?Promise.reject(yi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Nn(this.app)?Promise.reject(yi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(vi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await DC(this),t=new MC(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Er("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await IC(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&vi(e)||this._popupRedirectResolver;xe(t,this,"argument-error"),this.redirectPersistenceManager=await Do.create(this,[vi(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let h=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(xe(m,this,"internal-error"),m.then(()=>{h||l(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,r,o);return()=>{h=!0,g()}}else{const g=e.addObserver(t);return()=>{h=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return xe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=M0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;if(Nn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&cC(`Error while retrieving App Check token: ${t.error}`),t?.token}}function Ar(s){return lt(s)}class uT{constructor(e){this.auth=e,this.observer=null,this.addObserver=Yx(t=>this.observer=t)}get next(){return xe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function kC(s){Nh=s}function P0(s){return Nh.loadJS(s)}function VC(){return Nh.recaptchaEnterpriseScript}function LC(){return Nh.gapiScript}function UC(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class FC{constructor(){this.enterprise=new qC}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class qC{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const zC="recaptcha-enterprise",k0="NO_RECAPTCHA";class BC{constructor(e){this.type=zC,this.auth=Ar(e)}async verify(e="verify",t=!1){async function r(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(h,m)=>{EC(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const v=new _C(g);return l.tenantId==null?l._agentRecaptchaConfig=v:l._tenantRecaptchaConfigs[l.tenantId]=v,h(v.siteKey)}}).catch(g=>{m(g)})})}function o(l,h,m){const g=window.grecaptcha;rT(g)?g.enterprise.ready(()=>{g.enterprise.execute(l,{action:e}).then(v=>{h(v)}).catch(()=>{h(k0)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new FC().execute("siteKey",{action:"verify"}):new Promise((l,h)=>{r(this.auth).then(m=>{if(!t&&rT(window.grecaptcha))o(m,l,h);else{if(typeof window>"u"){h(new Error("RecaptchaVerifier is only supported in browser"));return}let g=VC();g.length!==0&&(g+=m),P0(g).then(()=>{o(m,l,h)}).catch(v=>{h(v)})}}).catch(m=>{h(m)})})}}async function dT(s,e,t,r=!1,o=!1){const l=new BC(s);let h;if(o)h=k0;else try{h=await l.verify(t)}catch{h=await l.verify(t,!0)}const m=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const g=m.phoneEnrollmentInfo.phoneNumber,v=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:v,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const g=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return r?Object.assign(m,{captchaResp:h}):Object.assign(m,{captchaResponse:h}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function Mp(s,e,t,r,o){var l;if(!((l=s._getRecaptchaConfig())===null||l===void 0)&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const h=await dT(s,e,t,t==="getOobCode");return r(s,h)}else return r(s,e).catch(async h=>{if(h.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const m=await dT(s,e,t,t==="getOobCode");return r(s,m)}else return Promise.reject(h)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HC(s,e){const t=Ai(s,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(ur(l,e??{}))return o;ns(o,"already-initialized")}return t.initialize({options:e})}function GC(s,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(vi);e?.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(r,e?.popupRedirectResolver)}function $C(s,e,t){const r=Ar(s);xe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const o=!1,l=V0(e),{host:h,port:m}=KC(e),g=m===null?"":`:${m}`,v={url:`${l}//${h}${g}/`},_=Object.freeze({host:h,port:m,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!r._canInitEmulator){xe(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),xe(ur(v,r.config.emulator)&&ur(_,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=v,r.emulatorConfig=_,r.settings.appVerificationDisabledForTesting=!0,Na(h)?(ag(`${l}//${h}${g}`),og("Auth",!0)):YC()}function V0(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function KC(s){const e=V0(s),t=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(r);if(o){const l=o[1];return{host:l,port:hT(r.substr(l.length+1))}}else{const[l,h]=r.split(":");return{host:l,port:hT(h)}}}function hT(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function YC(){function s(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vg{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return gi("not implemented")}_getIdTokenResponse(e){return gi("not implemented")}_linkToIdToken(e,t){return gi("not implemented")}_getReauthenticationResolver(e){return gi("not implemented")}}async function QC(s,e){return br(s,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XC(s,e){return $c(s,"POST","/v1/accounts:signInWithPassword",Tr(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WC(s,e){return $c(s,"POST","/v1/accounts:signInWithEmailLink",Tr(s,e))}async function ZC(s,e){return $c(s,"POST","/v1/accounts:signInWithEmailLink",Tr(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dc extends vg{constructor(e,t,r,o=null){super("password",r),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new Dc(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Dc(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Mp(e,t,"signInWithPassword",XC);case"emailLink":return WC(e,{email:this._email,oobCode:this._password});default:ns(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Mp(e,r,"signUpPassword",QC);case"emailLink":return ZC(e,{idToken:t,email:this._email,oobCode:this._password});default:ns(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oo(s,e){return $c(s,"POST","/v1/accounts:signInWithIdp",Tr(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JC="http://localhost";class va extends vg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new va(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ns("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:o}=t,l=dg(t,["providerId","signInMethod"]);if(!r||!o)return null;const h=new va(r,o);return h.idToken=l.idToken||void 0,h.accessToken=l.accessToken||void 0,h.secret=l.secret,h.nonce=l.nonce,h.pendingToken=l.pendingToken||null,h}_getIdTokenResponse(e){const t=this.buildRequest();return Oo(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Oo(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Oo(e,t)}buildRequest(){const e={requestUri:JC,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=zc(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eR(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function tR(s){const e=hc(fc(s)).link,t=e?hc(fc(e)).deep_link_id:null,r=hc(fc(s)).deep_link_id;return(r?hc(fc(r)).link:null)||r||t||e||s}class yg{constructor(e){var t,r,o,l,h,m;const g=hc(fc(e)),v=(t=g.apiKey)!==null&&t!==void 0?t:null,_=(r=g.oobCode)!==null&&r!==void 0?r:null,A=eR((o=g.mode)!==null&&o!==void 0?o:null);xe(v&&_&&A,"argument-error"),this.apiKey=v,this.operation=A,this.code=_,this.continueUrl=(l=g.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(h=g.lang)!==null&&h!==void 0?h:null,this.tenantId=(m=g.tenantId)!==null&&m!==void 0?m:null}static parseLink(e){const t=tR(e);try{return new yg(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o{constructor(){this.providerId=$o.PROVIDER_ID}static credential(e,t){return Dc._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=yg.parseLink(t);return xe(r,"argument-error"),Dc._fromEmailAndCode(e,r.code,r.tenantId)}}$o.PROVIDER_ID="password";$o.EMAIL_PASSWORD_SIGN_IN_METHOD="password";$o.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _g{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc extends _g{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr extends Kc{constructor(){super("facebook.com")}static credential(e){return va._fromParams({providerId:tr.PROVIDER_ID,signInMethod:tr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return tr.credentialFromTaggedObject(e)}static credentialFromError(e){return tr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return tr.credential(e.oauthAccessToken)}catch{return null}}}tr.FACEBOOK_SIGN_IN_METHOD="facebook.com";tr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi extends Kc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return va._fromParams({providerId:pi.PROVIDER_ID,signInMethod:pi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return pi.credentialFromTaggedObject(e)}static credentialFromError(e){return pi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return pi.credential(t,r)}catch{return null}}}pi.GOOGLE_SIGN_IN_METHOD="google.com";pi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr extends Kc{constructor(){super("github.com")}static credential(e){return va._fromParams({providerId:nr.PROVIDER_ID,signInMethod:nr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return nr.credentialFromTaggedObject(e)}static credentialFromError(e){return nr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return nr.credential(e.oauthAccessToken)}catch{return null}}}nr.GITHUB_SIGN_IN_METHOD="github.com";nr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr extends Kc{constructor(){super("twitter.com")}static credential(e,t){return va._fromParams({providerId:sr.PROVIDER_ID,signInMethod:sr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return sr.credentialFromTaggedObject(e)}static credentialFromError(e){return sr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return sr.credential(t,r)}catch{return null}}}sr.TWITTER_SIGN_IN_METHOD="twitter.com";sr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nR(s,e){return $c(s,"POST","/v1/accounts:signUp",Tr(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,o=!1){const l=await fs._fromIdTokenResponse(e,r,o),h=fT(r);return new ya({user:l,providerId:h,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const o=fT(r);return new ya({user:e,providerId:o,_tokenResponse:r,operationType:t})}}function fT(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh extends ss{constructor(e,t,r,o){var l;super(t.code,t.message),this.operationType=r,this.user=o,Object.setPrototypeOf(this,nh.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,o){return new nh(e,t,r,o)}}function L0(s,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(s):t._getIdTokenResponse(s)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?nh._fromErrorAndOperation(s,l,e,r):l})}async function sR(s,e,t=!1){const r=await jc(s,e._linkToIdToken(s.auth,await s.getIdToken()),t);return ya._forOperation(s,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iR(s,e,t=!1){const{auth:r}=s;if(Nn(r.app))return Promise.reject(yi(r));const o="reauthenticate";try{const l=await jc(s,L0(r,o,e,s),t);xe(l.idToken,r,"internal-error");const h=pg(l.idToken);xe(h,r,"internal-error");const{sub:m}=h;return xe(s.uid===m,r,"user-mismatch"),ya._forOperation(s,o,l)}catch(l){throw l?.code==="auth/user-not-found"&&ns(r,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function U0(s,e,t=!1){if(Nn(s.app))return Promise.reject(yi(s));const r="signIn",o=await L0(s,r,e),l=await ya._fromIdTokenResponse(s,r,o);return t||await s._updateCurrentUser(l.user),l}async function rR(s,e){return U0(Ar(s),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F0(s){const e=Ar(s);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function aR(s,e,t){if(Nn(s.app))return Promise.reject(yi(s));const r=Ar(s),h=await Mp(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",nR).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&F0(s),g}),m=await ya._fromIdTokenResponse(r,"signIn",h);return await r._updateCurrentUser(m.user),m}function oR(s,e,t){return Nn(s.app)?Promise.reject(yi(s)):rR(lt(s),$o.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&F0(s),r})}function lR(s,e,t,r){return lt(s).onIdTokenChanged(e,t,r)}function cR(s,e,t){return lt(s).beforeAuthStateChanged(e,t)}function uR(s,e,t,r){return lt(s).onAuthStateChanged(e,t,r)}function dR(s){return lt(s).signOut()}const sh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q0{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(sh,"1"),this.storage.removeItem(sh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hR=1e3,fR=10;class z0 extends q0{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=O0(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),o=this.localCache[t];r!==o&&e(t,o,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((h,m,g)=>{this.notifyListeners(h,g)});return}const r=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(r);!t&&this.localCache[r]===h||this.notifyListeners(r,h)},l=this.storage.getItem(r);RC()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,fR):o()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},hR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}z0.type="LOCAL";const mR=z0;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B0 extends q0{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}B0.type="SESSION";const H0=B0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pR(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const r=new Sh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:o,data:l}=t.data,h=this.handlersMap[o];if(!h?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:o});const m=Array.from(h).map(async v=>v(t.origin,l)),g=await pR(m);t.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Sh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eg(s="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return s+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gR{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,h;return new Promise((m,g)=>{const v=Eg("",20);o.port1.start();const _=setTimeout(()=>{g(new Error("unsupported_event"))},r);h={messageChannel:o,onMessage(A){const b=A;if(b.data.eventId===v)switch(b.data.status){case"ack":clearTimeout(_),l=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),m(b.data.response);break;default:clearTimeout(_),clearTimeout(l),g(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:v,data:t},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ks(){return window}function vR(s){ks().location.href=s}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G0(){return typeof ks().WorkerGlobalScope<"u"&&typeof ks().importScripts=="function"}async function yR(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function _R(){var s;return((s=navigator?.serviceWorker)===null||s===void 0?void 0:s.controller)||null}function ER(){return G0()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $0="firebaseLocalStorageDb",TR=1,ih="firebaseLocalStorage",K0="fbase_key";class Yc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function wh(s,e){return s.transaction([ih],e?"readwrite":"readonly").objectStore(ih)}function bR(){const s=indexedDB.deleteDatabase($0);return new Yc(s).toPromise()}function Pp(){const s=indexedDB.open($0,TR);return new Promise((e,t)=>{s.addEventListener("error",()=>{t(s.error)}),s.addEventListener("upgradeneeded",()=>{const r=s.result;try{r.createObjectStore(ih,{keyPath:K0})}catch(o){t(o)}}),s.addEventListener("success",async()=>{const r=s.result;r.objectStoreNames.contains(ih)?e(r):(r.close(),await bR(),e(await Pp()))})})}async function mT(s,e,t){const r=wh(s,!0).put({[K0]:e,value:t});return new Yc(r).toPromise()}async function AR(s,e){const t=wh(s,!1).get(e),r=await new Yc(t).toPromise();return r===void 0?null:r.value}function pT(s,e){const t=wh(s,!0).delete(e);return new Yc(t).toPromise()}const NR=800,SR=3;class Y0{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Pp(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>SR)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return G0()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Sh._getInstance(ER()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await yR(),!this.activeServiceWorker)return;this.sender=new gR(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||_R()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Pp();return await mT(e,sh,"1"),await pT(e,sh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>mT(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>AR(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>pT(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=wh(o,!1).getAll();return new Yc(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),NR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Y0.type="LOCAL";const wR=Y0;new Gc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q0(s,e){return e?vi(e):(xe(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tg extends vg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Oo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Oo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Oo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function xR(s){return U0(s.auth,new Tg(s),s.bypassAuthState)}function IR(s){const{auth:e,user:t}=s;return xe(t,e,"internal-error"),iR(t,new Tg(s),s.bypassAuthState)}async function CR(s){const{auth:e,user:t}=s;return xe(t,e,"internal-error"),sR(t,new Tg(s),s.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X0{constructor(e,t,r,o,l=!1){this.auth=e,this.resolver=r,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:o,tenantId:l,error:h,type:m}=e;if(h){this.reject(h);return}const g={auth:this.auth,requestUri:t,sessionId:r,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(g))}catch(v){this.reject(v)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return xR;case"linkViaPopup":case"linkViaRedirect":return CR;case"reauthViaPopup":case"reauthViaRedirect":return IR;default:ns(this.auth,"internal-error")}}resolve(e){Ei(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ei(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RR=new Gc(2e3,1e4);async function jR(s,e,t){if(Nn(s.app))return Promise.reject(ps(s,"operation-not-supported-in-this-environment"));const r=Ar(s);uC(s,e,_g);const o=Q0(r,t);return new fa(r,"signInViaPopup",e,o).executeNotNull()}class fa extends X0{constructor(e,t,r,o,l){super(e,t,o,l),this.provider=r,this.authWindow=null,this.pollId=null,fa.currentPopupAction&&fa.currentPopupAction.cancel(),fa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return xe(e,this.auth,"internal-error"),e}async onExecution(){Ei(this.filter.length===1,"Popup operations only handle one event");const e=Eg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(ps(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ps(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,fa.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ps(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,RR.get())};e()}}fa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DR="pendingRedirect",qd=new Map;class OR extends X0{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=qd.get(this.auth._key());if(!e){try{const r=await MR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}qd.set(this.auth._key(),e)}return this.bypassAuthState||qd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function MR(s,e){const t=VR(e),r=kR(s);if(!await r._isAvailable())return!1;const o=await r._get(t)==="true";return await r._remove(t),o}function PR(s,e){qd.set(s._key(),e)}function kR(s){return vi(s._redirectPersistence)}function VR(s){return Fd(DR,s.config.apiKey,s.name)}async function LR(s,e,t=!1){if(Nn(s.app))return Promise.reject(yi(s));const r=Ar(s),o=Q0(r,e),h=await new OR(r,o,t).execute();return h&&!t&&(delete h.user._redirectEventId,await r._persistUserIfCurrent(h.user),await r._setRedirectUser(null,e)),h}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UR=10*60*1e3;class FR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!qR(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!W0(e)){const o=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(ps(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=UR&&this.cachedEventUids.clear(),this.cachedEventUids.has(gT(e))}saveEventToCache(e){this.cachedEventUids.add(gT(e)),this.lastProcessedEventTime=Date.now()}}function gT(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function W0({type:s,error:e}){return s==="unknown"&&e?.code==="auth/no-auth-event"}function qR(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return W0(s);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zR(s,e={}){return br(s,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,HR=/^https?/;async function GR(s){if(s.config.emulator)return;const{authorizedDomains:e}=await zR(s);for(const t of e)try{if($R(t))return}catch{}ns(s,"unauthorized-domain")}function $R(s){const e=Dp(),{protocol:t,hostname:r}=new URL(e);if(s.startsWith("chrome-extension://")){const h=new URL(s);return h.hostname===""&&r===""?t==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&h.hostname===r}if(!HR.test(t))return!1;if(BR.test(s))return r===s;const o=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KR=new Gc(3e4,6e4);function vT(){const s=ks().___jsl;if(s?.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let t=0;t<s.CP.length;t++)s.CP[t]=null}}function YR(s){return new Promise((e,t)=>{var r,o,l;function h(){vT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{vT(),t(ps(s,"network-request-failed"))},timeout:KR.get()})}if(!((o=(r=ks().gapi)===null||r===void 0?void 0:r.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((l=ks().gapi)===null||l===void 0)&&l.load)h();else{const m=UC("iframefcb");return ks()[m]=()=>{gapi.load?h():t(ps(s,"network-request-failed"))},P0(`${LC()}?onload=${m}`).catch(g=>t(g))}}).catch(e=>{throw zd=null,e})}let zd=null;function QR(s){return zd=zd||YR(s),zd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XR=new Gc(5e3,15e3),WR="__/auth/iframe",ZR="emulator/auth/iframe",JR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},e1=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function t1(s){const e=s.config;xe(e.authDomain,s,"auth-domain-config-required");const t=e.emulator?mg(e,ZR):`https://${s.config.authDomain}/${WR}`,r={apiKey:e.apiKey,appName:s.name,v:Sa},o=e1.get(s.config.apiHost);o&&(r.eid=o);const l=s._getFrameworks();return l.length&&(r.fw=l.join(",")),`${t}?${zc(r).slice(1)}`}async function n1(s){const e=await QR(s),t=ks().gapi;return xe(t,s,"internal-error"),e.open({where:document.body,url:t1(s),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:JR,dontclear:!0},r=>new Promise(async(o,l)=>{await r.restyle({setHideOnLeave:!1});const h=ps(s,"network-request-failed"),m=ks().setTimeout(()=>{l(h)},XR.get());function g(){ks().clearTimeout(m),o(r)}r.ping(g).then(g,()=>{l(h)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s1={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},i1=500,r1=600,a1="_blank",o1="http://localhost";class yT{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function l1(s,e,t,r=i1,o=r1){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-r)/2,0).toString();let m="";const g=Object.assign(Object.assign({},s1),{width:r.toString(),height:o.toString(),top:l,left:h}),v=hn().toLowerCase();t&&(m=I0(v)?a1:t),w0(v)&&(e=e||o1,g.scrollbars="yes");const _=Object.entries(g).reduce((b,[O,I])=>`${b}${O}=${I},`,"");if(CC(v)&&m!=="_self")return c1(e||"",m),new yT(null);const A=window.open(e||"",m,_);xe(A,s,"popup-blocked");try{A.focus()}catch{}return new yT(A)}function c1(s,e){const t=document.createElement("a");t.href=s,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u1="__/auth/handler",d1="emulator/auth/handler",h1=encodeURIComponent("fac");async function _T(s,e,t,r,o,l){xe(s.config.authDomain,s,"auth-domain-config-required"),xe(s.config.apiKey,s,"invalid-api-key");const h={apiKey:s.config.apiKey,appName:s.name,authType:t,redirectUrl:r,v:Sa,eventId:o};if(e instanceof _g){e.setDefaultLanguage(s.languageCode),h.providerId=e.providerId||"",Kx(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,A]of Object.entries({}))h[_]=A}if(e instanceof Kc){const _=e.getScopes().filter(A=>A!=="");_.length>0&&(h.scopes=_.join(","))}s.tenantId&&(h.tid=s.tenantId);const m=h;for(const _ of Object.keys(m))m[_]===void 0&&delete m[_];const g=await s._getAppCheckToken(),v=g?`#${h1}=${encodeURIComponent(g)}`:"";return`${f1(s)}?${zc(m).slice(1)}${v}`}function f1({config:s}){return s.emulator?mg(s,d1):`https://${s.authDomain}/${u1}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hp="webStorageSupport";class m1{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=H0,this._completeRedirectFn=LR,this._overrideRedirectResult=PR}async _openPopup(e,t,r,o){var l;Ei((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const h=await _T(e,t,r,Dp(),o);return l1(e,h,Eg())}async _openRedirect(e,t,r,o){await this._originValidation(e);const l=await _T(e,t,r,Dp(),o);return vR(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(Ei(l,"If manager is not set, promise should be"),l)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await n1(e),r=new FR(e);return t.register("authEvent",o=>(xe(o?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(hp,{type:hp},o=>{var l;const h=(l=o?.[0])===null||l===void 0?void 0:l[hp];h!==void 0&&t(!!h),ns(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=GR(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return O0()||x0()||gg()}}const p1=m1;var ET="@firebase/auth",TT="1.10.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g1{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){xe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v1(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function y1(s){ts(new qn("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:h,authDomain:m}=r.options;xe(h&&!h.includes(":"),"invalid-api-key",{appName:r.name});const g={apiKey:h,authDomain:m,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:M0(s)},v=new PC(r,o,l,g);return GC(v,t),v},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),ts(new qn("auth-internal",e=>{const t=Ar(e.getProvider("auth").getImmediate());return(r=>new g1(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),dn(ET,TT,v1(s)),dn(ET,TT,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _1=5*60,E1=c0("authIdTokenMaxAge")||_1;let bT=null;const T1=s=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>E1)return;const o=t?.token;bT!==o&&(bT=o,await fetch(s,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function b1(s=Hc()){const e=Ai(s,"auth");if(e.isInitialized())return e.getImmediate();const t=HC(s,{popupRedirectResolver:p1,persistence:[wR,mR,H0]}),r=c0("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(r,location.origin);if(location.origin===l.origin){const h=T1(l.toString());cR(t,h,()=>h(t.currentUser)),lR(t,m=>h(m))}}const o=a0("auth");return o&&$C(t,`http://${o}`),t}function A1(){var s,e;return(e=(s=document.getElementsByTagName("head"))===null||s===void 0?void 0:s[0])!==null&&e!==void 0?e:document}kC({loadJS(s){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",s),r.onload=e,r.onerror=o=>{const l=ps("internal-error");l.customData=o,t(l)},r.type="text/javascript",r.charset="UTF-8",A1().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});y1("Browser");var N1="firebase",S1="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */dn(N1,S1,"app");var AT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var lr,Z0;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,S){function R(){}R.prototype=S.prototype,D.D=S.prototype,D.prototype=new R,D.prototype.constructor=D,D.C=function(j,k,M){for(var w=Array(arguments.length-2),ye=2;ye<arguments.length;ye++)w[ye-2]=arguments[ye];return S.prototype[k].apply(j,w)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(D,S,R){R||(R=0);var j=Array(16);if(typeof S=="string")for(var k=0;16>k;++k)j[k]=S.charCodeAt(R++)|S.charCodeAt(R++)<<8|S.charCodeAt(R++)<<16|S.charCodeAt(R++)<<24;else for(k=0;16>k;++k)j[k]=S[R++]|S[R++]<<8|S[R++]<<16|S[R++]<<24;S=D.g[0],R=D.g[1],k=D.g[2];var M=D.g[3],w=S+(M^R&(k^M))+j[0]+3614090360&4294967295;S=R+(w<<7&4294967295|w>>>25),w=M+(k^S&(R^k))+j[1]+3905402710&4294967295,M=S+(w<<12&4294967295|w>>>20),w=k+(R^M&(S^R))+j[2]+606105819&4294967295,k=M+(w<<17&4294967295|w>>>15),w=R+(S^k&(M^S))+j[3]+3250441966&4294967295,R=k+(w<<22&4294967295|w>>>10),w=S+(M^R&(k^M))+j[4]+4118548399&4294967295,S=R+(w<<7&4294967295|w>>>25),w=M+(k^S&(R^k))+j[5]+1200080426&4294967295,M=S+(w<<12&4294967295|w>>>20),w=k+(R^M&(S^R))+j[6]+2821735955&4294967295,k=M+(w<<17&4294967295|w>>>15),w=R+(S^k&(M^S))+j[7]+4249261313&4294967295,R=k+(w<<22&4294967295|w>>>10),w=S+(M^R&(k^M))+j[8]+1770035416&4294967295,S=R+(w<<7&4294967295|w>>>25),w=M+(k^S&(R^k))+j[9]+2336552879&4294967295,M=S+(w<<12&4294967295|w>>>20),w=k+(R^M&(S^R))+j[10]+4294925233&4294967295,k=M+(w<<17&4294967295|w>>>15),w=R+(S^k&(M^S))+j[11]+2304563134&4294967295,R=k+(w<<22&4294967295|w>>>10),w=S+(M^R&(k^M))+j[12]+1804603682&4294967295,S=R+(w<<7&4294967295|w>>>25),w=M+(k^S&(R^k))+j[13]+4254626195&4294967295,M=S+(w<<12&4294967295|w>>>20),w=k+(R^M&(S^R))+j[14]+2792965006&4294967295,k=M+(w<<17&4294967295|w>>>15),w=R+(S^k&(M^S))+j[15]+1236535329&4294967295,R=k+(w<<22&4294967295|w>>>10),w=S+(k^M&(R^k))+j[1]+4129170786&4294967295,S=R+(w<<5&4294967295|w>>>27),w=M+(R^k&(S^R))+j[6]+3225465664&4294967295,M=S+(w<<9&4294967295|w>>>23),w=k+(S^R&(M^S))+j[11]+643717713&4294967295,k=M+(w<<14&4294967295|w>>>18),w=R+(M^S&(k^M))+j[0]+3921069994&4294967295,R=k+(w<<20&4294967295|w>>>12),w=S+(k^M&(R^k))+j[5]+3593408605&4294967295,S=R+(w<<5&4294967295|w>>>27),w=M+(R^k&(S^R))+j[10]+38016083&4294967295,M=S+(w<<9&4294967295|w>>>23),w=k+(S^R&(M^S))+j[15]+3634488961&4294967295,k=M+(w<<14&4294967295|w>>>18),w=R+(M^S&(k^M))+j[4]+3889429448&4294967295,R=k+(w<<20&4294967295|w>>>12),w=S+(k^M&(R^k))+j[9]+568446438&4294967295,S=R+(w<<5&4294967295|w>>>27),w=M+(R^k&(S^R))+j[14]+3275163606&4294967295,M=S+(w<<9&4294967295|w>>>23),w=k+(S^R&(M^S))+j[3]+4107603335&4294967295,k=M+(w<<14&4294967295|w>>>18),w=R+(M^S&(k^M))+j[8]+1163531501&4294967295,R=k+(w<<20&4294967295|w>>>12),w=S+(k^M&(R^k))+j[13]+2850285829&4294967295,S=R+(w<<5&4294967295|w>>>27),w=M+(R^k&(S^R))+j[2]+4243563512&4294967295,M=S+(w<<9&4294967295|w>>>23),w=k+(S^R&(M^S))+j[7]+1735328473&4294967295,k=M+(w<<14&4294967295|w>>>18),w=R+(M^S&(k^M))+j[12]+2368359562&4294967295,R=k+(w<<20&4294967295|w>>>12),w=S+(R^k^M)+j[5]+4294588738&4294967295,S=R+(w<<4&4294967295|w>>>28),w=M+(S^R^k)+j[8]+2272392833&4294967295,M=S+(w<<11&4294967295|w>>>21),w=k+(M^S^R)+j[11]+1839030562&4294967295,k=M+(w<<16&4294967295|w>>>16),w=R+(k^M^S)+j[14]+4259657740&4294967295,R=k+(w<<23&4294967295|w>>>9),w=S+(R^k^M)+j[1]+2763975236&4294967295,S=R+(w<<4&4294967295|w>>>28),w=M+(S^R^k)+j[4]+1272893353&4294967295,M=S+(w<<11&4294967295|w>>>21),w=k+(M^S^R)+j[7]+4139469664&4294967295,k=M+(w<<16&4294967295|w>>>16),w=R+(k^M^S)+j[10]+3200236656&4294967295,R=k+(w<<23&4294967295|w>>>9),w=S+(R^k^M)+j[13]+681279174&4294967295,S=R+(w<<4&4294967295|w>>>28),w=M+(S^R^k)+j[0]+3936430074&4294967295,M=S+(w<<11&4294967295|w>>>21),w=k+(M^S^R)+j[3]+3572445317&4294967295,k=M+(w<<16&4294967295|w>>>16),w=R+(k^M^S)+j[6]+76029189&4294967295,R=k+(w<<23&4294967295|w>>>9),w=S+(R^k^M)+j[9]+3654602809&4294967295,S=R+(w<<4&4294967295|w>>>28),w=M+(S^R^k)+j[12]+3873151461&4294967295,M=S+(w<<11&4294967295|w>>>21),w=k+(M^S^R)+j[15]+530742520&4294967295,k=M+(w<<16&4294967295|w>>>16),w=R+(k^M^S)+j[2]+3299628645&4294967295,R=k+(w<<23&4294967295|w>>>9),w=S+(k^(R|~M))+j[0]+4096336452&4294967295,S=R+(w<<6&4294967295|w>>>26),w=M+(R^(S|~k))+j[7]+1126891415&4294967295,M=S+(w<<10&4294967295|w>>>22),w=k+(S^(M|~R))+j[14]+2878612391&4294967295,k=M+(w<<15&4294967295|w>>>17),w=R+(M^(k|~S))+j[5]+4237533241&4294967295,R=k+(w<<21&4294967295|w>>>11),w=S+(k^(R|~M))+j[12]+1700485571&4294967295,S=R+(w<<6&4294967295|w>>>26),w=M+(R^(S|~k))+j[3]+2399980690&4294967295,M=S+(w<<10&4294967295|w>>>22),w=k+(S^(M|~R))+j[10]+4293915773&4294967295,k=M+(w<<15&4294967295|w>>>17),w=R+(M^(k|~S))+j[1]+2240044497&4294967295,R=k+(w<<21&4294967295|w>>>11),w=S+(k^(R|~M))+j[8]+1873313359&4294967295,S=R+(w<<6&4294967295|w>>>26),w=M+(R^(S|~k))+j[15]+4264355552&4294967295,M=S+(w<<10&4294967295|w>>>22),w=k+(S^(M|~R))+j[6]+2734768916&4294967295,k=M+(w<<15&4294967295|w>>>17),w=R+(M^(k|~S))+j[13]+1309151649&4294967295,R=k+(w<<21&4294967295|w>>>11),w=S+(k^(R|~M))+j[4]+4149444226&4294967295,S=R+(w<<6&4294967295|w>>>26),w=M+(R^(S|~k))+j[11]+3174756917&4294967295,M=S+(w<<10&4294967295|w>>>22),w=k+(S^(M|~R))+j[2]+718787259&4294967295,k=M+(w<<15&4294967295|w>>>17),w=R+(M^(k|~S))+j[9]+3951481745&4294967295,D.g[0]=D.g[0]+S&4294967295,D.g[1]=D.g[1]+(k+(w<<21&4294967295|w>>>11))&4294967295,D.g[2]=D.g[2]+k&4294967295,D.g[3]=D.g[3]+M&4294967295}r.prototype.u=function(D,S){S===void 0&&(S=D.length);for(var R=S-this.blockSize,j=this.B,k=this.h,M=0;M<S;){if(k==0)for(;M<=R;)o(this,D,M),M+=this.blockSize;if(typeof D=="string"){for(;M<S;)if(j[k++]=D.charCodeAt(M++),k==this.blockSize){o(this,j),k=0;break}}else for(;M<S;)if(j[k++]=D[M++],k==this.blockSize){o(this,j),k=0;break}}this.h=k,this.o+=S},r.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var S=1;S<D.length-8;++S)D[S]=0;var R=8*this.o;for(S=D.length-8;S<D.length;++S)D[S]=R&255,R/=256;for(this.u(D),D=Array(16),S=R=0;4>S;++S)for(var j=0;32>j;j+=8)D[R++]=this.g[S]>>>j&255;return D};function l(D,S){var R=m;return Object.prototype.hasOwnProperty.call(R,D)?R[D]:R[D]=S(D)}function h(D,S){this.h=S;for(var R=[],j=!0,k=D.length-1;0<=k;k--){var M=D[k]|0;j&&M==S||(R[k]=M,j=!1)}this.g=R}var m={};function g(D){return-128<=D&&128>D?l(D,function(S){return new h([S|0],0>S?-1:0)}):new h([D|0],0>D?-1:0)}function v(D){if(isNaN(D)||!isFinite(D))return A;if(0>D)return C(v(-D));for(var S=[],R=1,j=0;D>=R;j++)S[j]=D/R|0,R*=4294967296;return new h(S,0)}function _(D,S){if(D.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(D.charAt(0)=="-")return C(_(D.substring(1),S));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=v(Math.pow(S,8)),j=A,k=0;k<D.length;k+=8){var M=Math.min(8,D.length-k),w=parseInt(D.substring(k,k+M),S);8>M?(M=v(Math.pow(S,M)),j=j.j(M).add(v(w))):(j=j.j(R),j=j.add(v(w)))}return j}var A=g(0),b=g(1),O=g(16777216);s=h.prototype,s.m=function(){if(U(this))return-C(this).m();for(var D=0,S=1,R=0;R<this.g.length;R++){var j=this.i(R);D+=(0<=j?j:4294967296+j)*S,S*=4294967296}return D},s.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(I(this))return"0";if(U(this))return"-"+C(this).toString(D);for(var S=v(Math.pow(D,6)),R=this,j="";;){var k=Z(R,S).g;R=$(R,k.j(S));var M=((0<R.g.length?R.g[0]:R.h)>>>0).toString(D);if(R=k,I(R))return M+j;for(;6>M.length;)M="0"+M;j=M+j}},s.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function I(D){if(D.h!=0)return!1;for(var S=0;S<D.g.length;S++)if(D.g[S]!=0)return!1;return!0}function U(D){return D.h==-1}s.l=function(D){return D=$(this,D),U(D)?-1:I(D)?0:1};function C(D){for(var S=D.g.length,R=[],j=0;j<S;j++)R[j]=~D.g[j];return new h(R,~D.h).add(b)}s.abs=function(){return U(this)?C(this):this},s.add=function(D){for(var S=Math.max(this.g.length,D.g.length),R=[],j=0,k=0;k<=S;k++){var M=j+(this.i(k)&65535)+(D.i(k)&65535),w=(M>>>16)+(this.i(k)>>>16)+(D.i(k)>>>16);j=w>>>16,M&=65535,w&=65535,R[k]=w<<16|M}return new h(R,R[R.length-1]&-2147483648?-1:0)};function $(D,S){return D.add(C(S))}s.j=function(D){if(I(this)||I(D))return A;if(U(this))return U(D)?C(this).j(C(D)):C(C(this).j(D));if(U(D))return C(this.j(C(D)));if(0>this.l(O)&&0>D.l(O))return v(this.m()*D.m());for(var S=this.g.length+D.g.length,R=[],j=0;j<2*S;j++)R[j]=0;for(j=0;j<this.g.length;j++)for(var k=0;k<D.g.length;k++){var M=this.i(j)>>>16,w=this.i(j)&65535,ye=D.i(k)>>>16,Ae=D.i(k)&65535;R[2*j+2*k]+=w*Ae,W(R,2*j+2*k),R[2*j+2*k+1]+=M*Ae,W(R,2*j+2*k+1),R[2*j+2*k+1]+=w*ye,W(R,2*j+2*k+1),R[2*j+2*k+2]+=M*ye,W(R,2*j+2*k+2)}for(j=0;j<S;j++)R[j]=R[2*j+1]<<16|R[2*j];for(j=S;j<2*S;j++)R[j]=0;return new h(R,0)};function W(D,S){for(;(D[S]&65535)!=D[S];)D[S+1]+=D[S]>>>16,D[S]&=65535,S++}function K(D,S){this.g=D,this.h=S}function Z(D,S){if(I(S))throw Error("division by zero");if(I(D))return new K(A,A);if(U(D))return S=Z(C(D),S),new K(C(S.g),C(S.h));if(U(S))return S=Z(D,C(S)),new K(C(S.g),S.h);if(30<D.g.length){if(U(D)||U(S))throw Error("slowDivide_ only works with positive integers.");for(var R=b,j=S;0>=j.l(D);)R=q(R),j=q(j);var k=oe(R,1),M=oe(j,1);for(j=oe(j,2),R=oe(R,2);!I(j);){var w=M.add(j);0>=w.l(D)&&(k=k.add(R),M=w),j=oe(j,1),R=oe(R,1)}return S=$(D,k.j(S)),new K(k,S)}for(k=A;0<=D.l(S);){for(R=Math.max(1,Math.floor(D.m()/S.m())),j=Math.ceil(Math.log(R)/Math.LN2),j=48>=j?1:Math.pow(2,j-48),M=v(R),w=M.j(S);U(w)||0<w.l(D);)R-=j,M=v(R),w=M.j(S);I(M)&&(M=b),k=k.add(M),D=$(D,w)}return new K(k,D)}s.A=function(D){return Z(this,D).h},s.and=function(D){for(var S=Math.max(this.g.length,D.g.length),R=[],j=0;j<S;j++)R[j]=this.i(j)&D.i(j);return new h(R,this.h&D.h)},s.or=function(D){for(var S=Math.max(this.g.length,D.g.length),R=[],j=0;j<S;j++)R[j]=this.i(j)|D.i(j);return new h(R,this.h|D.h)},s.xor=function(D){for(var S=Math.max(this.g.length,D.g.length),R=[],j=0;j<S;j++)R[j]=this.i(j)^D.i(j);return new h(R,this.h^D.h)};function q(D){for(var S=D.g.length+1,R=[],j=0;j<S;j++)R[j]=D.i(j)<<1|D.i(j-1)>>>31;return new h(R,D.h)}function oe(D,S){var R=S>>5;S%=32;for(var j=D.g.length-R,k=[],M=0;M<j;M++)k[M]=0<S?D.i(M+R)>>>S|D.i(M+R+1)<<32-S:D.i(M+R);return new h(k,D.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Z0=r,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.A,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=v,h.fromString=_,lr=h}).apply(typeof AT<"u"?AT:typeof self<"u"?self:typeof window<"u"?window:{});var jd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var J0,mc,eA,Bd,kp,tA,nA,sA;(function(){var s,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,y,E){return d==Array.prototype||d==Object.prototype||(d[y]=E.value),d};function t(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof jd=="object"&&jd];for(var y=0;y<d.length;++y){var E=d[y];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var r=t(this);function o(d,y){if(y)e:{var E=r;d=d.split(".");for(var x=0;x<d.length-1;x++){var z=d[x];if(!(z in E))break e;E=E[z]}d=d[d.length-1],x=E[d],y=y(x),y!=x&&y!=null&&e(E,d,{configurable:!0,writable:!0,value:y})}}function l(d,y){d instanceof String&&(d+="");var E=0,x=!1,z={next:function(){if(!x&&E<d.length){var X=E++;return{value:y(X,d[X]),done:!1}}return x=!0,{done:!0,value:void 0}}};return z[Symbol.iterator]=function(){return z},z}o("Array.prototype.values",function(d){return d||function(){return l(this,function(y,E){return E})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var h=h||{},m=this||self;function g(d){var y=typeof d;return y=y!="object"?y:d?Array.isArray(d)?"array":y:"null",y=="array"||y=="object"&&typeof d.length=="number"}function v(d){var y=typeof d;return y=="object"&&d!=null||y=="function"}function _(d,y,E){return d.call.apply(d.bind,arguments)}function A(d,y,E){if(!d)throw Error();if(2<arguments.length){var x=Array.prototype.slice.call(arguments,2);return function(){var z=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(z,x),d.apply(y,z)}}return function(){return d.apply(y,arguments)}}function b(d,y,E){return b=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:A,b.apply(null,arguments)}function O(d,y){var E=Array.prototype.slice.call(arguments,1);return function(){var x=E.slice();return x.push.apply(x,arguments),d.apply(this,x)}}function I(d,y){function E(){}E.prototype=y.prototype,d.aa=y.prototype,d.prototype=new E,d.prototype.constructor=d,d.Qb=function(x,z,X){for(var ce=Array(arguments.length-2),ze=2;ze<arguments.length;ze++)ce[ze-2]=arguments[ze];return y.prototype[z].apply(x,ce)}}function U(d){const y=d.length;if(0<y){const E=Array(y);for(let x=0;x<y;x++)E[x]=d[x];return E}return[]}function C(d,y){for(let E=1;E<arguments.length;E++){const x=arguments[E];if(g(x)){const z=d.length||0,X=x.length||0;d.length=z+X;for(let ce=0;ce<X;ce++)d[z+ce]=x[ce]}else d.push(x)}}class ${constructor(y,E){this.i=y,this.j=E,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function W(d){return/^[\s\xa0]*$/.test(d)}function K(){var d=m.navigator;return d&&(d=d.userAgent)?d:""}function Z(d){return Z[" "](d),d}Z[" "]=function(){};var q=K().indexOf("Gecko")!=-1&&!(K().toLowerCase().indexOf("webkit")!=-1&&K().indexOf("Edge")==-1)&&!(K().indexOf("Trident")!=-1||K().indexOf("MSIE")!=-1)&&K().indexOf("Edge")==-1;function oe(d,y,E){for(const x in d)y.call(E,d[x],x,d)}function D(d,y){for(const E in d)y.call(void 0,d[E],E,d)}function S(d){const y={};for(const E in d)y[E]=d[E];return y}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function j(d,y){let E,x;for(let z=1;z<arguments.length;z++){x=arguments[z];for(E in x)d[E]=x[E];for(let X=0;X<R.length;X++)E=R[X],Object.prototype.hasOwnProperty.call(x,E)&&(d[E]=x[E])}}function k(d){var y=1;d=d.split(":");const E=[];for(;0<y&&d.length;)E.push(d.shift()),y--;return d.length&&E.push(d.join(":")),E}function M(d){m.setTimeout(()=>{throw d},0)}function w(){var d=_e;let y=null;return d.g&&(y=d.g,d.g=d.g.next,d.g||(d.h=null),y.next=null),y}class ye{constructor(){this.h=this.g=null}add(y,E){const x=Ae.get();x.set(y,E),this.h?this.h.next=x:this.g=x,this.h=x}}var Ae=new $(()=>new Q,d=>d.reset());class Q{constructor(){this.next=this.g=this.h=null}set(y,E){this.h=y,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let ie,ue=!1,_e=new ye,V=()=>{const d=m.Promise.resolve(void 0);ie=()=>{d.then(ae)}};var ae=()=>{for(var d;d=w();){try{d.h.call(d.g)}catch(E){M(E)}var y=Ae;y.j(d),100>y.h&&(y.h++,d.next=y.g,y.g=d)}ue=!1};function de(){this.s=this.s,this.C=this.C}de.prototype.s=!1,de.prototype.ma=function(){this.s||(this.s=!0,this.N())},de.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function le(d,y){this.type=d,this.g=this.target=y,this.defaultPrevented=!1}le.prototype.h=function(){this.defaultPrevented=!0};var Ee=function(){if(!m.addEventListener||!Object.defineProperty)return!1;var d=!1,y=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const E=()=>{};m.addEventListener("test",E,y),m.removeEventListener("test",E,y)}catch{}return d}();function Pe(d,y){if(le.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var E=this.type=d.type,x=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=y,y=d.relatedTarget){if(q){e:{try{Z(y.nodeName);var z=!0;break e}catch{}z=!1}z||(y=null)}}else E=="mouseover"?y=d.fromElement:E=="mouseout"&&(y=d.toElement);this.relatedTarget=y,x?(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:Ce[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&Pe.aa.h.call(this)}}I(Pe,le);var Ce={2:"touch",3:"pen",4:"mouse"};Pe.prototype.h=function(){Pe.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var Lt="closure_listenable_"+(1e6*Math.random()|0),at=0;function ys(d,y,E,x,z){this.listener=d,this.proxy=null,this.src=y,this.type=E,this.capture=!!x,this.ha=z,this.key=++at,this.da=this.fa=!1}function Ni(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function Bs(d){this.src=d,this.g={},this.h=0}Bs.prototype.add=function(d,y,E,x,z){var X=d.toString();d=this.g[X],d||(d=this.g[X]=[],this.h++);var ce=Cr(d,y,x,z);return-1<ce?(y=d[ce],E||(y.fa=!1)):(y=new ys(y,this.src,X,!!x,z),y.fa=E,d.push(y)),y};function Ir(d,y){var E=y.type;if(E in d.g){var x=d.g[E],z=Array.prototype.indexOf.call(x,y,void 0),X;(X=0<=z)&&Array.prototype.splice.call(x,z,1),X&&(Ni(y),d.g[E].length==0&&(delete d.g[E],d.h--))}}function Cr(d,y,E,x){for(var z=0;z<d.length;++z){var X=d[z];if(!X.da&&X.listener==y&&X.capture==!!E&&X.ha==x)return z}return-1}var Rr="closure_lm_"+(1e6*Math.random()|0),nl={};function au(d,y,E,x,z){if(Array.isArray(y)){for(var X=0;X<y.length;X++)au(d,y[X],E,x,z);return null}return E=ou(E),d&&d[Lt]?d.K(y,E,v(x)?!!x.capture:!1,z):zn(d,y,E,!1,x,z)}function zn(d,y,E,x,z,X){if(!y)throw Error("Invalid event type");var ce=v(z)?!!z.capture:!!z,ze=Ra(d);if(ze||(d[Rr]=ze=new Bs(d)),E=ze.add(y,E,x,ce,X),E.proxy)return E;if(x=Jh(),E.proxy=x,x.src=d,x.listener=E,d.addEventListener)Ee||(z=ce),z===void 0&&(z=!1),d.addEventListener(y.toString(),x,z);else if(d.attachEvent)d.attachEvent(jr(y.toString()),x);else if(d.addListener&&d.removeListener)d.addListener(x);else throw Error("addEventListener and attachEvent are unavailable.");return E}function Jh(){function d(E){return y.call(d.src,d.listener,E)}const y=ef;return d}function sl(d,y,E,x,z){if(Array.isArray(y))for(var X=0;X<y.length;X++)sl(d,y[X],E,x,z);else x=v(x)?!!x.capture:!!x,E=ou(E),d&&d[Lt]?(d=d.i,y=String(y).toString(),y in d.g&&(X=d.g[y],E=Cr(X,E,x,z),-1<E&&(Ni(X[E]),Array.prototype.splice.call(X,E,1),X.length==0&&(delete d.g[y],d.h--)))):d&&(d=Ra(d))&&(y=d.g[y.toString()],d=-1,y&&(d=Cr(y,E,x,z)),(E=-1<d?y[d]:null)&&Ca(E))}function Ca(d){if(typeof d!="number"&&d&&!d.da){var y=d.src;if(y&&y[Lt])Ir(y.i,d);else{var E=d.type,x=d.proxy;y.removeEventListener?y.removeEventListener(E,x,d.capture):y.detachEvent?y.detachEvent(jr(E),x):y.addListener&&y.removeListener&&y.removeListener(x),(E=Ra(y))?(Ir(E,d),E.h==0&&(E.src=null,y[Rr]=null)):Ni(d)}}}function jr(d){return d in nl?nl[d]:nl[d]="on"+d}function ef(d,y){if(d.da)d=!0;else{y=new Pe(y,this);var E=d.listener,x=d.ha||d.src;d.fa&&Ca(d),d=E.call(x,y)}return d}function Ra(d){return d=d[Rr],d instanceof Bs?d:null}var il="__closure_events_fn_"+(1e9*Math.random()>>>0);function ou(d){return typeof d=="function"?d:(d[il]||(d[il]=function(y){return d.handleEvent(y)}),d[il])}function pt(){de.call(this),this.i=new Bs(this),this.M=this,this.F=null}I(pt,de),pt.prototype[Lt]=!0,pt.prototype.removeEventListener=function(d,y,E,x){sl(this,d,y,E,x)};function Xe(d,y){var E,x=d.F;if(x)for(E=[];x;x=x.F)E.push(x);if(d=d.M,x=y.type||y,typeof y=="string")y=new le(y,d);else if(y instanceof le)y.target=y.target||d;else{var z=y;y=new le(x,d),j(y,z)}if(z=!0,E)for(var X=E.length-1;0<=X;X--){var ce=y.g=E[X];z=In(ce,x,!0,y)&&z}if(ce=y.g=d,z=In(ce,x,!0,y)&&z,z=In(ce,x,!1,y)&&z,E)for(X=0;X<E.length;X++)ce=y.g=E[X],z=In(ce,x,!1,y)&&z}pt.prototype.N=function(){if(pt.aa.N.call(this),this.i){var d=this.i,y;for(y in d.g){for(var E=d.g[y],x=0;x<E.length;x++)Ni(E[x]);delete d.g[y],d.h--}}this.F=null},pt.prototype.K=function(d,y,E,x){return this.i.add(String(d),y,!1,E,x)},pt.prototype.L=function(d,y,E,x){return this.i.add(String(d),y,!0,E,x)};function In(d,y,E,x){if(y=d.i.g[String(y)],!y)return!0;y=y.concat();for(var z=!0,X=0;X<y.length;++X){var ce=y[X];if(ce&&!ce.da&&ce.capture==E){var ze=ce.listener,Rt=ce.ha||ce.src;ce.fa&&Ir(d.i,ce),z=ze.call(Rt,x)!==!1&&z}}return z&&!x.defaultPrevented}function rn(d,y,E){if(typeof d=="function")E&&(d=b(d,E));else if(d&&typeof d.handleEvent=="function")d=b(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:m.setTimeout(d,y||0)}function lu(d){d.g=rn(()=>{d.g=null,d.i&&(d.i=!1,lu(d))},d.l);const y=d.h;d.h=null,d.m.apply(null,y)}class tf extends de{constructor(y,E){super(),this.m=y,this.l=E,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:lu(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Dr(d){de.call(this),this.h=d,this.g={}}I(Dr,de);var Or=[];function Mr(d){oe(d.g,function(y,E){this.g.hasOwnProperty(E)&&Ca(y)},d),d.g={}}Dr.prototype.N=function(){Dr.aa.N.call(this),Mr(this)},Dr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var is=m.JSON.stringify,ja=m.JSON.parse,Pr=class{stringify(d){return m.JSON.stringify(d,void 0)}parse(d){return m.JSON.parse(d,void 0)}};function rl(){}rl.prototype.h=null;function al(d){return d.h||(d.h=d.i())}function ol(){}var Hs={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Gs(){le.call(this,"d")}I(Gs,le);function ll(){le.call(this,"c")}I(ll,le);var _s={},cl=null;function Si(){return cl=cl||new pt}_s.La="serverreachability";function Da(d){le.call(this,_s.La,d)}I(Da,le);function wi(d){const y=Si();Xe(y,new Da(y))}_s.STAT_EVENT="statevent";function cu(d,y){le.call(this,_s.STAT_EVENT,d),this.stat=y}I(cu,le);function ct(d){const y=Si();Xe(y,new cu(y,d))}_s.Ma="timingevent";function Ct(d,y){le.call(this,_s.Ma,d),this.size=y}I(Ct,le);function At(d,y){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){d()},y)}function Bn(){this.g=!0}Bn.prototype.xa=function(){this.g=!1};function ul(d,y,E,x,z,X){d.info(function(){if(d.g)if(X)for(var ce="",ze=X.split("&"),Rt=0;Rt<ze.length;Rt++){var Be=ze[Rt].split("=");if(1<Be.length){var Ft=Be[0];Be=Be[1];var jt=Ft.split("_");ce=2<=jt.length&&jt[1]=="type"?ce+(Ft+"="+Be+"&"):ce+(Ft+"=redacted&")}}else ce=null;else ce=X;return"XMLHTTP REQ ("+x+") [attempt "+z+"]: "+y+`
`+E+`
`+ce})}function nf(d,y,E,x,z,X,ce){d.info(function(){return"XMLHTTP RESP ("+x+") [ attempt "+z+"]: "+y+`
`+E+`
`+X+" "+ce})}function xi(d,y,E,x){d.info(function(){return"XMLHTTP TEXT ("+y+"): "+kr(d,E)+(x?" "+x:"")})}function uu(d,y){d.info(function(){return"TIMEOUT: "+y})}Bn.prototype.info=function(){};function kr(d,y){if(!d.g)return y;if(!y)return null;try{var E=JSON.parse(y);if(E){for(d=0;d<E.length;d++)if(Array.isArray(E[d])){var x=E[d];if(!(2>x.length)){var z=x[1];if(Array.isArray(z)&&!(1>z.length)){var X=z[0];if(X!="noop"&&X!="stop"&&X!="close")for(var ce=1;ce<z.length;ce++)z[ce]=""}}}}return is(E)}catch{return y}}var Ii={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},$s={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Es;function Ts(){}I(Ts,rl),Ts.prototype.g=function(){return new XMLHttpRequest},Ts.prototype.i=function(){return{}},Es=new Ts;function fn(d,y,E,x){this.j=d,this.i=y,this.l=E,this.R=x||1,this.U=new Dr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new _t}function _t(){this.i=null,this.g="",this.h=!1}var dl={},Oa={};function rs(d,y,E){d.L=1,d.v=qr(Cn(y)),d.m=E,d.P=!0,Ks(d,null)}function Ks(d,y){d.F=Date.now(),Vr(d),d.A=Cn(d.v);var E=d.A,x=d.R;Array.isArray(x)||(x=[String(x)]),vl(E.i,"t",x),d.C=0,E=d.j.J,d.h=new _t,d.g=wu(d.j,E?y:null,!d.m),0<d.O&&(d.M=new tf(b(d.Y,d,d.g),d.O)),y=d.U,E=d.g,x=d.ca;var z="readystatechange";Array.isArray(z)||(z&&(Or[0]=z.toString()),z=Or);for(var X=0;X<z.length;X++){var ce=au(E,z[X],x||y.handleEvent,!1,y.h||y);if(!ce)break;y.g[ce.key]=ce}y=d.H?S(d.H):{},d.m?(d.u||(d.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,y)):(d.u="GET",d.g.ea(d.A,d.u,null,y)),wi(),ul(d.i,d.u,d.A,d.l,d.R,d.m)}fn.prototype.ca=function(d){d=d.target;const y=this.M;y&&Kn(d)==3?y.j():this.Y(d)},fn.prototype.Y=function(d){try{if(d==this.g)e:{const jt=Kn(this.g);var y=this.g.Ba();const ti=this.g.Z();if(!(3>jt)&&(jt!=3||this.g&&(this.h.h||this.g.oa()||yu(this.g)))){this.J||jt!=4||y==7||(y==8||0>=ti?wi(3):wi(2)),Ci(this);var E=this.g.Z();this.X=E;t:if(du(this)){var x=yu(this.g);d="";var z=x.length,X=Kn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){$t(this),bs(this);var ce="";break t}this.h.i=new m.TextDecoder}for(y=0;y<z;y++)this.h.h=!0,d+=this.h.i.decode(x[y],{stream:!(X&&y==z-1)});x.length=0,this.h.g+=d,this.C=0,ce=this.h.g}else ce=this.g.oa();if(this.o=E==200,nf(this.i,this.u,this.A,this.l,this.R,jt,E),this.o){if(this.T&&!this.K){t:{if(this.g){var ze,Rt=this.g;if((ze=Rt.g?Rt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!W(ze)){var Be=ze;break t}}Be=null}if(E=Be)xi(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Lr(this,E);else{this.o=!1,this.s=3,ct(12),$t(this),bs(this);break e}}if(this.P){E=!0;let Kt;for(;!this.J&&this.C<ce.length;)if(Kt=hu(this,ce),Kt==Oa){jt==4&&(this.s=4,ct(14),E=!1),xi(this.i,this.l,null,"[Incomplete Response]");break}else if(Kt==dl){this.s=4,ct(15),xi(this.i,this.l,ce,"[Invalid Chunk]"),E=!1;break}else xi(this.i,this.l,Kt,null),Lr(this,Kt);if(du(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),jt!=4||ce.length!=0||this.h.h||(this.s=1,ct(16),E=!1),this.o=this.o&&E,!E)xi(this.i,this.l,ce,"[Invalid Chunked Response]"),$t(this),bs(this);else if(0<ce.length&&!this.W){this.W=!0;var Ft=this.j;Ft.g==this&&Ft.ba&&!Ft.M&&(Ft.j.info("Great, no buffering proxy detected. Bytes received: "+ce.length),Qr(Ft),Ft.M=!0,ct(11))}}else xi(this.i,this.l,ce,null),Lr(this,ce);jt==4&&$t(this),this.o&&!this.J&&(jt==4?Au(this.j,this):(this.o=!1,Vr(this)))}else lf(this.g),E==400&&0<ce.indexOf("Unknown SID")?(this.s=3,ct(12)):(this.s=0,ct(13)),$t(this),bs(this)}}}catch{}finally{}};function du(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function hu(d,y){var E=d.C,x=y.indexOf(`
`,E);return x==-1?Oa:(E=Number(y.substring(E,x)),isNaN(E)?dl:(x+=1,x+E>y.length?Oa:(y=y.slice(x,x+E),d.C=x+E,y)))}fn.prototype.cancel=function(){this.J=!0,$t(this)};function Vr(d){d.S=Date.now()+d.I,fu(d,d.I)}function fu(d,y){if(d.B!=null)throw Error("WatchDog timer not null");d.B=At(b(d.ba,d),y)}function Ci(d){d.B&&(m.clearTimeout(d.B),d.B=null)}fn.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(uu(this.i,this.A),this.L!=2&&(wi(),ct(17)),$t(this),this.s=2,bs(this)):fu(this,this.S-d)};function bs(d){d.j.G==0||d.J||Au(d.j,d)}function $t(d){Ci(d);var y=d.M;y&&typeof y.ma=="function"&&y.ma(),d.M=null,Mr(d.U),d.g&&(y=d.g,d.g=null,y.abort(),y.ma())}function Lr(d,y){try{var E=d.j;if(E.G!=0&&(E.g==d||hl(E.h,d))){if(!d.K&&hl(E.h,d)&&E.G==3){try{var x=E.Da.g.parse(y)}catch{x=null}if(Array.isArray(x)&&x.length==3){var z=x;if(z[0]==0){e:if(!E.u){if(E.g)if(E.g.F+3e3<d.F)Ga(E),Ba(E);else break e;bl(E),ct(18)}}else E.za=z[1],0<E.za-E.T&&37500>z[2]&&E.F&&E.v==0&&!E.C&&(E.C=At(b(E.Za,E),6e3));if(1>=Pa(E.h)&&E.ca){try{E.ca()}catch{}E.ca=void 0}}else ei(E,11)}else if((d.K||E.g==d)&&Ga(E),!W(y))for(z=E.Da.g.parse(y),y=0;y<z.length;y++){let Be=z[y];if(E.T=Be[0],Be=Be[1],E.G==2)if(Be[0]=="c"){E.K=Be[1],E.ia=Be[2];const Ft=Be[3];Ft!=null&&(E.la=Ft,E.j.info("VER="+E.la));const jt=Be[4];jt!=null&&(E.Aa=jt,E.j.info("SVER="+E.Aa));const ti=Be[5];ti!=null&&typeof ti=="number"&&0<ti&&(x=1.5*ti,E.L=x,E.j.info("backChannelRequestTimeoutMs_="+x)),x=E;const Kt=d.g;if(Kt){const Cs=Kt.g?Kt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Cs){var X=x.h;X.g||Cs.indexOf("spdy")==-1&&Cs.indexOf("quic")==-1&&Cs.indexOf("h2")==-1||(X.j=X.l,X.g=new Set,X.h&&(ka(X,X.h),X.h=null))}if(x.D){const Nl=Kt.g?Kt.g.getResponseHeader("X-HTTP-Session-Id"):null;Nl&&(x.ya=Nl,Je(x.I,x.D,Nl))}}E.G=3,E.l&&E.l.ua(),E.ba&&(E.R=Date.now()-d.F,E.j.info("Handshake RTT: "+E.R+"ms")),x=E;var ce=d;if(x.qa=Su(x,x.J?x.ia:null,x.W),ce.K){mn(x.h,ce);var ze=ce,Rt=x.L;Rt&&(ze.I=Rt),ze.B&&(Ci(ze),Vr(ze)),x.g=ce}else Tu(x);0<E.i.length&&Ha(E)}else Be[0]!="stop"&&Be[0]!="close"||ei(E,7);else E.G==3&&(Be[0]=="stop"||Be[0]=="close"?Be[0]=="stop"?ei(E,7):El(E):Be[0]!="noop"&&E.l&&E.l.ta(Be),E.v=0)}}wi(4)}catch{}}var mu=class{constructor(d,y){this.g=d,this.map=y}};function Ys(d){this.l=d||10,m.PerformanceNavigationTiming?(d=m.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ma(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function Pa(d){return d.h?1:d.g?d.g.size:0}function hl(d,y){return d.h?d.h==y:d.g?d.g.has(y):!1}function ka(d,y){d.g?d.g.add(y):d.h=y}function mn(d,y){d.h&&d.h==y?d.h=null:d.g&&d.g.has(y)&&d.g.delete(y)}Ys.prototype.cancel=function(){if(this.i=fl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function fl(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let y=d.i;for(const E of d.g.values())y=y.concat(E.D);return y}return U(d.i)}function sf(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(g(d)){for(var y=[],E=d.length,x=0;x<E;x++)y.push(d[x]);return y}y=[],E=0;for(x in d)y[E++]=d[x];return y}function Va(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(g(d)||typeof d=="string"){var y=[];d=d.length;for(var E=0;E<d;E++)y.push(E);return y}y=[],E=0;for(const x in d)y[E++]=x;return y}}}function ml(d,y){if(d.forEach&&typeof d.forEach=="function")d.forEach(y,void 0);else if(g(d)||typeof d=="string")Array.prototype.forEach.call(d,y,void 0);else for(var E=Va(d),x=sf(d),z=x.length,X=0;X<z;X++)y.call(void 0,x[X],E&&E[X],d)}var Ur=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function rf(d,y){if(d){d=d.split("&");for(var E=0;E<d.length;E++){var x=d[E].indexOf("="),z=null;if(0<=x){var X=d[E].substring(0,x);z=d[E].substring(x+1)}else X=d[E];y(X,z?decodeURIComponent(z.replace(/\+/g," ")):"")}}}function Nt(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof Nt){this.h=d.h,Fr(this,d.j),this.o=d.o,this.g=d.g,Ri(this,d.s),this.l=d.l;var y=d.i,E=new Xs;E.i=y.i,y.g&&(E.g=new Map(y.g),E.h=y.h),Qs(this,E),this.m=d.m}else d&&(y=String(d).match(Ur))?(this.h=!1,Fr(this,y[1]||"",!0),this.o=Hn(y[2]||""),this.g=Hn(y[3]||"",!0),Ri(this,y[4]),this.l=Hn(y[5]||"",!0),Qs(this,y[6]||"",!0),this.m=Hn(y[7]||"")):(this.h=!1,this.i=new Xs(null,this.h))}Nt.prototype.toString=function(){var d=[],y=this.j;y&&d.push(zr(y,pl,!0),":");var E=this.g;return(E||y=="file")&&(d.push("//"),(y=this.o)&&d.push(zr(y,pl,!0),"@"),d.push(encodeURIComponent(String(E)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.s,E!=null&&d.push(":",String(E))),(E=this.l)&&(this.g&&E.charAt(0)!="/"&&d.push("/"),d.push(zr(E,E.charAt(0)=="/"?af:gl,!0))),(E=this.i.toString())&&d.push("?",E),(E=this.m)&&d.push("#",zr(E,La)),d.join("")};function Cn(d){return new Nt(d)}function Fr(d,y,E){d.j=E?Hn(y,!0):y,d.j&&(d.j=d.j.replace(/:$/,""))}function Ri(d,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);d.s=y}else d.s=null}function Qs(d,y,E){y instanceof Xs?(d.i=y,gu(d.i,d.h)):(E||(y=zr(y,of)),d.i=new Xs(y,d.h))}function Je(d,y,E){d.i.set(y,E)}function qr(d){return Je(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function Hn(d,y){return d?y?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function zr(d,y,E){return typeof d=="string"?(d=encodeURI(d).replace(y,pu),E&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function pu(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var pl=/[#\/\?@]/g,gl=/[#\?:]/g,af=/[#\?]/g,of=/[#\?@]/g,La=/#/g;function Xs(d,y){this.h=this.g=null,this.i=d||null,this.j=!!y}function Gn(d){d.g||(d.g=new Map,d.h=0,d.i&&rf(d.i,function(y,E){d.add(decodeURIComponent(y.replace(/\+/g," ")),E)}))}s=Xs.prototype,s.add=function(d,y){Gn(this),this.i=null,d=As(this,d);var E=this.g.get(d);return E||this.g.set(d,E=[]),E.push(y),this.h+=1,this};function Ws(d,y){Gn(d),y=As(d,y),d.g.has(y)&&(d.i=null,d.h-=d.g.get(y).length,d.g.delete(y))}function Zs(d,y){return Gn(d),y=As(d,y),d.g.has(y)}s.forEach=function(d,y){Gn(this),this.g.forEach(function(E,x){E.forEach(function(z){d.call(y,z,x,this)},this)},this)},s.na=function(){Gn(this);const d=Array.from(this.g.values()),y=Array.from(this.g.keys()),E=[];for(let x=0;x<y.length;x++){const z=d[x];for(let X=0;X<z.length;X++)E.push(y[x])}return E},s.V=function(d){Gn(this);let y=[];if(typeof d=="string")Zs(this,d)&&(y=y.concat(this.g.get(As(this,d))));else{d=Array.from(this.g.values());for(let E=0;E<d.length;E++)y=y.concat(d[E])}return y},s.set=function(d,y){return Gn(this),this.i=null,d=As(this,d),Zs(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[y]),this.h+=1,this},s.get=function(d,y){return d?(d=this.V(d),0<d.length?String(d[0]):y):y};function vl(d,y,E){Ws(d,y),0<E.length&&(d.i=null,d.g.set(As(d,y),U(E)),d.h+=E.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],y=Array.from(this.g.keys());for(var E=0;E<y.length;E++){var x=y[E];const X=encodeURIComponent(String(x)),ce=this.V(x);for(x=0;x<ce.length;x++){var z=X;ce[x]!==""&&(z+="="+encodeURIComponent(String(ce[x]))),d.push(z)}}return this.i=d.join("&")};function As(d,y){return y=String(y),d.j&&(y=y.toLowerCase()),y}function gu(d,y){y&&!d.j&&(Gn(d),d.i=null,d.g.forEach(function(E,x){var z=x.toLowerCase();x!=z&&(Ws(this,x),vl(this,z,E))},d)),d.j=y}function Br(d,y){const E=new Bn;if(m.Image){const x=new Image;x.onload=O($n,E,"TestLoadImage: loaded",!0,y,x),x.onerror=O($n,E,"TestLoadImage: error",!1,y,x),x.onabort=O($n,E,"TestLoadImage: abort",!1,y,x),x.ontimeout=O($n,E,"TestLoadImage: timeout",!1,y,x),m.setTimeout(function(){x.ontimeout&&x.ontimeout()},1e4),x.src=d}else y(!1)}function as(d,y){const E=new Bn,x=new AbortController,z=setTimeout(()=>{x.abort(),$n(E,"TestPingServer: timeout",!1,y)},1e4);fetch(d,{signal:x.signal}).then(X=>{clearTimeout(z),X.ok?$n(E,"TestPingServer: ok",!0,y):$n(E,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(z),$n(E,"TestPingServer: error",!1,y)})}function $n(d,y,E,x,z){try{z&&(z.onload=null,z.onerror=null,z.onabort=null,z.ontimeout=null),x(E)}catch{}}function Hr(){this.g=new Pr}function Ns(d,y,E){const x=E||"";try{ml(d,function(z,X){let ce=z;v(z)&&(ce=is(z)),y.push(x+X+"="+encodeURIComponent(ce))})}catch(z){throw y.push(x+"type="+encodeURIComponent("_badmap")),z}}function ji(d){this.l=d.Ub||null,this.j=d.eb||!1}I(ji,rl),ji.prototype.g=function(){return new Js(this.l,this.j)},ji.prototype.i=function(d){return function(){return d}}({});function Js(d,y){pt.call(this),this.D=d,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}I(Js,pt),s=Js.prototype,s.open=function(d,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=y,this.readyState=1,ws(this)},s.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(y.body=d),(this.D||m).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ss(this)),this.readyState=0},s.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,ws(this)),this.g&&(this.readyState=3,ws(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;yl(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function yl(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}s.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var y=d.value?d.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!d.done}))&&(this.response=this.responseText+=y)}d.done?Ss(this):ws(this),this.readyState==3&&yl(this)}},s.Ra=function(d){this.g&&(this.response=this.responseText=d,Ss(this))},s.Qa=function(d){this.g&&(this.response=d,Ss(this))},s.ga=function(){this.g&&Ss(this)};function Ss(d){d.readyState=4,d.l=null,d.j=null,d.v=null,ws(d)}s.setRequestHeader=function(d,y){this.u.append(d,y)},s.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],y=this.h.entries();for(var E=y.next();!E.done;)E=E.value,d.push(E[0]+": "+E[1]),E=y.next();return d.join(`\r
`)};function ws(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Js.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function _l(d){let y="";return oe(d,function(E,x){y+=x,y+=":",y+=E,y+=`\r
`}),y}function Ut(d,y,E){e:{for(x in E){var x=!1;break e}x=!0}x||(E=_l(E),typeof d=="string"?E!=null&&encodeURIComponent(String(E)):Je(d,y,E))}function Qe(d){pt.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}I(Qe,pt);var Ua=/^https?$/i,Gr=["POST","PUT"];s=Qe.prototype,s.Ha=function(d){this.J=d},s.ea=function(d,y,E,x){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);y=y?y.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Es.g(),this.v=this.o?al(this.o):al(Es),this.g.onreadystatechange=b(this.Ea,this);try{this.B=!0,this.g.open(y,String(d),!0),this.B=!1}catch(X){vu(this,X);return}if(d=E||"",E=new Map(this.headers),x)if(Object.getPrototypeOf(x)===Object.prototype)for(var z in x)E.set(z,x[z]);else if(typeof x.keys=="function"&&typeof x.get=="function")for(const X of x.keys())E.set(X,x.get(X));else throw Error("Unknown input type for opt_headers: "+String(x));x=Array.from(E.keys()).find(X=>X.toLowerCase()=="content-type"),z=m.FormData&&d instanceof m.FormData,!(0<=Array.prototype.indexOf.call(Gr,y,void 0))||x||z||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[X,ce]of E)this.g.setRequestHeader(X,ce);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{$r(this),this.u=!0,this.g.send(d),this.u=!1}catch(X){vu(this,X)}};function vu(d,y){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=y,d.m=5,Fa(d),xs(d)}function Fa(d){d.A||(d.A=!0,Xe(d,"complete"),Xe(d,"error"))}s.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,Xe(this,"complete"),Xe(this,"abort"),xs(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),xs(this,!0)),Qe.aa.N.call(this)},s.Ea=function(){this.s||(this.B||this.u||this.j?qa(this):this.bb())},s.bb=function(){qa(this)};function qa(d){if(d.h&&typeof h<"u"&&(!d.v[1]||Kn(d)!=4||d.Z()!=2)){if(d.u&&Kn(d)==4)rn(d.Ea,0,d);else if(Xe(d,"readystatechange"),Kn(d)==4){d.h=!1;try{const ce=d.Z();e:switch(ce){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var E;if(!(E=y)){var x;if(x=ce===0){var z=String(d.D).match(Ur)[1]||null;!z&&m.self&&m.self.location&&(z=m.self.location.protocol.slice(0,-1)),x=!Ua.test(z?z.toLowerCase():"")}E=x}if(E)Xe(d,"complete"),Xe(d,"success");else{d.m=6;try{var X=2<Kn(d)?d.g.statusText:""}catch{X=""}d.l=X+" ["+d.Z()+"]",Fa(d)}}finally{xs(d)}}}}function xs(d,y){if(d.g){$r(d);const E=d.g,x=d.v[0]?()=>{}:null;d.g=null,d.v=null,y||Xe(d,"ready");try{E.onreadystatechange=x}catch{}}}function $r(d){d.I&&(m.clearTimeout(d.I),d.I=null)}s.isActive=function(){return!!this.g};function Kn(d){return d.g?d.g.readyState:0}s.Z=function(){try{return 2<Kn(this)?this.g.status:-1}catch{return-1}},s.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.Oa=function(d){if(this.g){var y=this.g.responseText;return d&&y.indexOf(d)==0&&(y=y.substring(d.length)),ja(y)}};function yu(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function lf(d){const y={};d=(d.g&&2<=Kn(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let x=0;x<d.length;x++){if(W(d[x]))continue;var E=k(d[x]);const z=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const X=y[z]||[];y[z]=X,X.push(E)}D(y,function(x){return x.join(", ")})}s.Ba=function(){return this.m},s.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Kr(d,y,E){return E&&E.internalChannelParams&&E.internalChannelParams[d]||y}function za(d){this.Aa=0,this.i=[],this.j=new Bn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Kr("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Kr("baseRetryDelayMs",5e3,d),this.cb=Kr("retryDelaySeedMs",1e4,d),this.Wa=Kr("forwardChannelMaxRetries",2,d),this.wa=Kr("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new Ys(d&&d.concurrentRequestLimit),this.Da=new Hr,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}s=za.prototype,s.la=8,s.G=1,s.connect=function(d,y,E,x){ct(0),this.W=d,this.H=y||{},E&&x!==void 0&&(this.H.OSID=E,this.H.OAID=x),this.F=this.X,this.I=Su(this,null,this.W),Ha(this)};function El(d){if(_u(d),d.G==3){var y=d.U++,E=Cn(d.I);if(Je(E,"SID",d.K),Je(E,"RID",y),Je(E,"TYPE","terminate"),Yr(d,E),y=new fn(d,d.j,y),y.L=2,y.v=qr(Cn(E)),E=!1,m.navigator&&m.navigator.sendBeacon)try{E=m.navigator.sendBeacon(y.v.toString(),"")}catch{}!E&&m.Image&&(new Image().src=y.v,E=!0),E||(y.g=wu(y.j,null),y.g.ea(y.v)),y.F=Date.now(),Vr(y)}Nu(d)}function Ba(d){d.g&&(Qr(d),d.g.cancel(),d.g=null)}function _u(d){Ba(d),d.u&&(m.clearTimeout(d.u),d.u=null),Ga(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&m.clearTimeout(d.s),d.s=null)}function Ha(d){if(!Ma(d.h)&&!d.s){d.s=!0;var y=d.Ga;ie||V(),ue||(ie(),ue=!0),_e.add(y,d),d.B=0}}function cf(d,y){return Pa(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=y.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=At(b(d.Ga,d,y),Al(d,d.B)),d.B++,!0)}s.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const z=new fn(this,this.j,d);let X=this.o;if(this.S&&(X?(X=S(X),j(X,this.S)):X=this.S),this.m!==null||this.O||(z.H=X,X=null),this.P)e:{for(var y=0,E=0;E<this.i.length;E++){t:{var x=this.i[E];if("__data__"in x.map&&(x=x.map.__data__,typeof x=="string")){x=x.length;break t}x=void 0}if(x===void 0)break;if(y+=x,4096<y){y=E;break e}if(y===4096||E===this.i.length-1){y=E+1;break e}}y=1e3}else y=1e3;y=Eu(this,z,y),E=Cn(this.I),Je(E,"RID",d),Je(E,"CVER",22),this.D&&Je(E,"X-HTTP-Session-Id",this.D),Yr(this,E),X&&(this.O?y="headers="+encodeURIComponent(String(_l(X)))+"&"+y:this.m&&Ut(E,this.m,X)),ka(this.h,z),this.Ua&&Je(E,"TYPE","init"),this.P?(Je(E,"$req",y),Je(E,"SID","null"),z.T=!0,rs(z,E,null)):rs(z,E,y),this.G=2}}else this.G==3&&(d?Tl(this,d):this.i.length==0||Ma(this.h)||Tl(this))};function Tl(d,y){var E;y?E=y.l:E=d.U++;const x=Cn(d.I);Je(x,"SID",d.K),Je(x,"RID",E),Je(x,"AID",d.T),Yr(d,x),d.m&&d.o&&Ut(x,d.m,d.o),E=new fn(d,d.j,E,d.B+1),d.m===null&&(E.H=d.o),y&&(d.i=y.D.concat(d.i)),y=Eu(d,E,1e3),E.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),ka(d.h,E),rs(E,x,y)}function Yr(d,y){d.H&&oe(d.H,function(E,x){Je(y,x,E)}),d.l&&ml({},function(E,x){Je(y,x,E)})}function Eu(d,y,E){E=Math.min(d.i.length,E);var x=d.l?b(d.l.Na,d.l,d):null;e:{var z=d.i;let X=-1;for(;;){const ce=["count="+E];X==-1?0<E?(X=z[0].g,ce.push("ofs="+X)):X=0:ce.push("ofs="+X);let ze=!0;for(let Rt=0;Rt<E;Rt++){let Be=z[Rt].g;const Ft=z[Rt].map;if(Be-=X,0>Be)X=Math.max(0,z[Rt].g-100),ze=!1;else try{Ns(Ft,ce,"req"+Be+"_")}catch{x&&x(Ft)}}if(ze){x=ce.join("&");break e}}}return d=d.i.splice(0,E),y.D=d,x}function Tu(d){if(!d.g&&!d.u){d.Y=1;var y=d.Fa;ie||V(),ue||(ie(),ue=!0),_e.add(y,d),d.v=0}}function bl(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=At(b(d.Fa,d),Al(d,d.v)),d.v++,!0)}s.Fa=function(){if(this.u=null,bu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=At(b(this.ab,this),d)}},s.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ct(10),Ba(this),bu(this))};function Qr(d){d.A!=null&&(m.clearTimeout(d.A),d.A=null)}function bu(d){d.g=new fn(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var y=Cn(d.qa);Je(y,"RID","rpc"),Je(y,"SID",d.K),Je(y,"AID",d.T),Je(y,"CI",d.F?"0":"1"),!d.F&&d.ja&&Je(y,"TO",d.ja),Je(y,"TYPE","xmlhttp"),Yr(d,y),d.m&&d.o&&Ut(y,d.m,d.o),d.L&&(d.g.I=d.L);var E=d.g;d=d.ia,E.L=1,E.v=qr(Cn(y)),E.m=null,E.P=!0,Ks(E,d)}s.Za=function(){this.C!=null&&(this.C=null,Ba(this),bl(this),ct(19))};function Ga(d){d.C!=null&&(m.clearTimeout(d.C),d.C=null)}function Au(d,y){var E=null;if(d.g==y){Ga(d),Qr(d),d.g=null;var x=2}else if(hl(d.h,y))E=y.D,mn(d.h,y),x=1;else return;if(d.G!=0){if(y.o)if(x==1){E=y.m?y.m.length:0,y=Date.now()-y.F;var z=d.B;x=Si(),Xe(x,new Ct(x,E)),Ha(d)}else Tu(d);else if(z=y.s,z==3||z==0&&0<y.X||!(x==1&&cf(d,y)||x==2&&bl(d)))switch(E&&0<E.length&&(y=d.h,y.i=y.i.concat(E)),z){case 1:ei(d,5);break;case 4:ei(d,10);break;case 3:ei(d,6);break;default:ei(d,2)}}}function Al(d,y){let E=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(E*=2),E*y}function ei(d,y){if(d.j.info("Error code "+y),y==2){var E=b(d.fb,d),x=d.Xa;const z=!x;x=new Nt(x||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||Fr(x,"https"),qr(x),z?Br(x.toString(),E):as(x.toString(),E)}else ct(2);d.G=0,d.l&&d.l.sa(y),Nu(d),_u(d)}s.fb=function(d){d?(this.j.info("Successfully pinged google.com"),ct(2)):(this.j.info("Failed to ping google.com"),ct(1))};function Nu(d){if(d.G=0,d.ka=[],d.l){const y=fl(d.h);(y.length!=0||d.i.length!=0)&&(C(d.ka,y),C(d.ka,d.i),d.h.i.length=0,U(d.i),d.i.length=0),d.l.ra()}}function Su(d,y,E){var x=E instanceof Nt?Cn(E):new Nt(E);if(x.g!="")y&&(x.g=y+"."+x.g),Ri(x,x.s);else{var z=m.location;x=z.protocol,y=y?y+"."+z.hostname:z.hostname,z=+z.port;var X=new Nt(null);x&&Fr(X,x),y&&(X.g=y),z&&Ri(X,z),E&&(X.l=E),x=X}return E=d.D,y=d.ya,E&&y&&Je(x,E,y),Je(x,"VER",d.la),Yr(d,x),x}function wu(d,y,E){if(y&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=d.Ca&&!d.pa?new Qe(new ji({eb:E})):new Qe(d.pa),y.Ha(d.J),y}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function xu(){}s=xu.prototype,s.ua=function(){},s.ta=function(){},s.sa=function(){},s.ra=function(){},s.isActive=function(){return!0},s.Na=function(){};function $a(){}$a.prototype.g=function(d,y){return new pn(d,y)};function pn(d,y){pt.call(this),this.g=new za(y),this.l=d,this.h=y&&y.messageUrlParams||null,d=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(d?d["X-WebChannel-Content-Type"]=y.messageContentType:d={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(d?d["X-WebChannel-Client-Profile"]=y.va:d={"X-WebChannel-Client-Profile":y.va}),this.g.S=d,(d=y&&y.Sb)&&!W(d)&&(this.g.m=d),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!W(y)&&(this.g.D=y,d=this.h,d!==null&&y in d&&(d=this.h,y in d&&delete d[y])),this.j=new Is(this)}I(pn,pt),pn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},pn.prototype.close=function(){El(this.g)},pn.prototype.o=function(d){var y=this.g;if(typeof d=="string"){var E={};E.__data__=d,d=E}else this.u&&(E={},E.__data__=is(d),d=E);y.i.push(new mu(y.Ya++,d)),y.G==3&&Ha(y)},pn.prototype.N=function(){this.g.l=null,delete this.j,El(this.g),delete this.g,pn.aa.N.call(this)};function Iu(d){Gs.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var y=d.__sm__;if(y){e:{for(const E in y){d=E;break e}d=void 0}(this.i=d)&&(d=this.i,y=y!==null&&d in y?y[d]:void 0),this.data=y}else this.data=d}I(Iu,Gs);function Cu(){ll.call(this),this.status=1}I(Cu,ll);function Is(d){this.g=d}I(Is,xu),Is.prototype.ua=function(){Xe(this.g,"a")},Is.prototype.ta=function(d){Xe(this.g,new Iu(d))},Is.prototype.sa=function(d){Xe(this.g,new Cu)},Is.prototype.ra=function(){Xe(this.g,"b")},$a.prototype.createWebChannel=$a.prototype.g,pn.prototype.send=pn.prototype.o,pn.prototype.open=pn.prototype.m,pn.prototype.close=pn.prototype.close,sA=function(){return new $a},nA=function(){return Si()},tA=_s,kp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ii.NO_ERROR=0,Ii.TIMEOUT=8,Ii.HTTP_ERROR=6,Bd=Ii,$s.COMPLETE="complete",eA=$s,ol.EventType=Hs,Hs.OPEN="a",Hs.CLOSE="b",Hs.ERROR="c",Hs.MESSAGE="d",pt.prototype.listen=pt.prototype.K,mc=ol,Qe.prototype.listenOnce=Qe.prototype.L,Qe.prototype.getLastError=Qe.prototype.Ka,Qe.prototype.getLastErrorCode=Qe.prototype.Ba,Qe.prototype.getStatus=Qe.prototype.Z,Qe.prototype.getResponseJson=Qe.prototype.Oa,Qe.prototype.getResponseText=Qe.prototype.oa,Qe.prototype.send=Qe.prototype.ea,Qe.prototype.setWithCredentials=Qe.prototype.Ha,J0=Qe}).apply(typeof jd<"u"?jd:typeof self<"u"?self:typeof window<"u"?window:{});const NT="@firebase/firestore",ST="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}cn.UNAUTHENTICATED=new cn(null),cn.GOOGLE_CREDENTIALS=new cn("google-credentials-uid"),cn.FIRST_PARTY=new cn("first-party-uid"),cn.MOCK_USER=new cn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ko="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _a=new Bc("@firebase/firestore");function No(){return _a.logLevel}function fe(s,...e){if(_a.logLevel<=Ue.DEBUG){const t=e.map(bg);_a.debug(`Firestore (${Ko}): ${s}`,...t)}}function Ti(s,...e){if(_a.logLevel<=Ue.ERROR){const t=e.map(bg);_a.error(`Firestore (${Ko}): ${s}`,...t)}}function Vo(s,...e){if(_a.logLevel<=Ue.WARN){const t=e.map(bg);_a.warn(`Firestore (${Ko}): ${s}`,...t)}}function bg(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Te(s,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,iA(s,r,t)}function iA(s,e,t){let r=`FIRESTORE (${Ko}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Ti(r),new Error(r)}function $e(s,e,t,r){let o="Unexpected state";typeof t=="string"?o=t:r=t,s||iA(e,o,r)}function Re(s,e){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const te={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class he extends ss{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rA{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class w1{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(cn.UNAUTHENTICATED))}shutdown(){}}class x1{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class I1{constructor(e){this.t=e,this.currentUser=cn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){$e(this.o===void 0,42304);let r=this.i;const o=g=>this.i!==r?(r=this.i,t(g)):Promise.resolve();let l=new Vs;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Vs,e.enqueueRetryable(()=>o(this.currentUser))};const h=()=>{const g=l;e.enqueueRetryable(async()=>{await g.promise,await o(this.currentUser)})},m=g=>{fe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit(g=>m(g)),setTimeout(()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?m(g):(fe("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Vs)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(fe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?($e(typeof r.accessToken=="string",31837,{l:r}),new rA(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return $e(e===null||typeof e=="string",2055,{h:e}),new cn(e)}}class C1{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=cn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class R1{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new C1(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(cn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class wT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class j1{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Nn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){$e(this.o===void 0,3512);const r=l=>{l.error!=null&&fe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const h=l.token!==this.m;return this.m=l.token,fe("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>r(l))};const o=l=>{fe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(l=>o(l)),setTimeout(()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):fe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new wT(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?($e(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new wT(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D1(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<s;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aA(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oA{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const o=D1(40);for(let l=0;l<o.length;++l)r.length<20&&o[l]<t&&(r+=e.charAt(o[l]%62))}return r}}function Me(s,e){return s<e?-1:s>e?1:0}function Vp(s,e){let t=0;for(;t<s.length&&t<e.length;){const r=s.codePointAt(t),o=e.codePointAt(t);if(r!==o){if(r<128&&o<128)return Me(r,o);{const l=aA(),h=O1(l.encode(xT(s,t)),l.encode(xT(e,t)));return h!==0?h:Me(r,o)}}t+=r>65535?2:1}return Me(s.length,e.length)}function xT(s,e){return s.codePointAt(e)>65535?s.substring(e,e+2):s.substring(e,e+1)}function O1(s,e){for(let t=0;t<s.length&&t<e.length;++t)if(s[t]!==e[t])return Me(s[t],e[t]);return Me(s.length,e.length)}function Lo(s,e,t){return s.length===e.length&&s.every((r,o)=>t(r,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IT=-62135596800,CT=1e6;class Pt{static now(){return Pt.fromMillis(Date.now())}static fromDate(e){return Pt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*CT);return new Pt(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new he(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new he(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<IT)throw new he(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new he(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/CT}_compareTo(e){return this.seconds===e.seconds?Me(this.nanoseconds,e.nanoseconds):Me(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-IT;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{static fromTimestamp(e){return new we(e)}static min(){return new we(new Pt(0,0))}static max(){return new we(new Pt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RT="__name__";class Ps{constructor(e,t,r){t===void 0?t=0:t>e.length&&Te(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Te(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Ps.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ps?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const l=Ps.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return Me(e.length,t.length)}static compareSegments(e,t){const r=Ps.isNumericId(e),o=Ps.isNumericId(t);return r&&!o?-1:!r&&o?1:r&&o?Ps.extractNumericId(e).compare(Ps.extractNumericId(t)):Vp(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return lr.fromString(e.substring(4,e.length-2))}}class it extends Ps{construct(e,t,r){return new it(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new he(te.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new it(t)}static emptyPath(){return new it([])}}const M1=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class en extends Ps{construct(e,t,r){return new en(e,t,r)}static isValidIdentifier(e){return M1.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),en.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===RT}static keyField(){return new en([RT])}static fromServerFormat(e){const t=[];let r="",o=0;const l=()=>{if(r.length===0)throw new he(te.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let h=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new he(te.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new he(te.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=g,o+=2}else m==="`"?(h=!h,o++):m!=="."||h?(r+=m,o++):(l(),o++)}if(l(),h)throw new he(te.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new en(t)}static emptyPath(){return new en([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(e){this.path=e}static fromPath(e){return new ve(it.fromString(e))}static fromName(e){return new ve(it.fromString(e).popFirst(5))}static empty(){return new ve(it.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&it.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return it.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ve(new it(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oc=-1;function P1(s,e){const t=s.toTimestamp().seconds,r=s.toTimestamp().nanoseconds+1,o=we.fromTimestamp(r===1e9?new Pt(t+1,0):new Pt(t,r));return new dr(o,ve.empty(),e)}function k1(s){return new dr(s.readTime,s.key,Oc)}class dr{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new dr(we.min(),ve.empty(),Oc)}static max(){return new dr(we.max(),ve.empty(),Oc)}}function V1(s,e){let t=s.readTime.compareTo(e.readTime);return t!==0?t:(t=ve.comparator(s.documentKey,e.documentKey),t!==0?t:Me(s.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class U1{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yo(s){if(s.code!==te.FAILED_PRECONDITION||s.message!==L1)throw s;fe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Te(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new se((r,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof se?t:se.resolve(t)}catch(t){return se.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):se.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):se.reject(t)}static resolve(e){return new se((t,r)=>{t(e)})}static reject(e){return new se((t,r)=>{r(e)})}static waitFor(e){return new se((t,r)=>{let o=0,l=0,h=!1;e.forEach(m=>{++o,m.next(()=>{++l,h&&l===o&&t()},g=>r(g))}),h=!0,l===o&&t()})}static or(e){let t=se.resolve(!1);for(const r of e)t=t.next(o=>o?se.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,l)=>{r.push(t.call(this,o,l))}),this.waitFor(r)}static mapArray(e,t){return new se((r,o)=>{const l=e.length,h=new Array(l);let m=0;for(let g=0;g<l;g++){const v=g;t(e[v]).next(_=>{h[v]=_,++m,m===l&&r(h)},_=>o(_))}})}static doWhile(e,t){return new se((r,o)=>{const l=()=>{e()===!0?t().next(()=>{l()},o):r()};l()})}}function F1(s){const e=s.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Qo(s){return s.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>t.writeSequenceNumber(r))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}xh.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ag=-1;function Qc(s){return s==null}function rh(s){return s===0&&1/s==-1/0}function q1(s){return typeof s=="number"&&Number.isInteger(s)&&!rh(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lA="";function z1(s){let e="";for(let t=0;t<s.length;t++)e.length>0&&(e=jT(e)),e=B1(s.get(t),e);return jT(e)}function B1(s,e){let t=e;const r=s.length;for(let o=0;o<r;o++){const l=s.charAt(o);switch(l){case"\0":t+="";break;case lA:t+="";break;default:t+=l}}return t}function jT(s){return s+lA+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DT(s){let e=0;for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e++;return e}function Nr(s,e){for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e(t,s[t])}function cA(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e,t){this.comparator=e,this.root=t||Jt.EMPTY}insert(e,t){return new mt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Jt.BLACK,null,null))}remove(e){return new mt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Jt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(o===0)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Dd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Dd(this.root,e,this.comparator,!1)}getReverseIterator(){return new Dd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Dd(this.root,e,this.comparator,!0)}}class Dd{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Jt{constructor(e,t,r,o,l){this.key=e,this.value=t,this.color=r??Jt.RED,this.left=o??Jt.EMPTY,this.right=l??Jt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,l){return new Jt(e??this.key,t??this.value,r??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const l=r(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,r),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Jt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Jt.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Jt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Jt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Te(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Te(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Te(27949);return e+(this.isRed()?0:1)}}Jt.EMPTY=null,Jt.RED=!0,Jt.BLACK=!1;Jt.EMPTY=new class{constructor(){this.size=0}get key(){throw Te(57766)}get value(){throw Te(16141)}get color(){throw Te(16727)}get left(){throw Te(29726)}get right(){throw Te(36894)}copy(e,t,r,o,l){return this}insert(e,t,r){return new Jt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e){this.comparator=e,this.data=new mt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new OT(this.data.getIterator())}getIteratorFrom(e){return new OT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof kt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=r.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new kt(this.comparator);return t.data=e,t}}class OT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e){this.fields=e,e.sort(en.comparator)}static empty(){return new Vn([])}unionWith(e){let t=new kt(en.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Vn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Lo(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new uA("Invalid base64 string: "+l):l}}(e);return new sn(t)}static fromUint8Array(e){const t=function(o){let l="";for(let h=0;h<o.length;++h)l+=String.fromCharCode(o[h]);return l}(e);return new sn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Me(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}sn.EMPTY_BYTE_STRING=new sn("");const H1=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function hr(s){if($e(!!s,39018),typeof s=="string"){let e=0;const t=H1.exec(s);if($e(!!t,46558,{timestamp:s}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(s);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:bt(s.seconds),nanos:bt(s.nanos)}}function bt(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function fr(s){return typeof s=="string"?sn.fromBase64String(s):sn.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dA="server_timestamp",hA="__type__",fA="__previous_value__",mA="__local_write_time__";function Ng(s){var e,t;return((t=(((e=s?.mapValue)===null||e===void 0?void 0:e.fields)||{})[hA])===null||t===void 0?void 0:t.stringValue)===dA}function Ih(s){const e=s.mapValue.fields[fA];return Ng(e)?Ih(e):e}function Mc(s){const e=hr(s.mapValue.fields[mA].timestampValue);return new Pt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G1{constructor(e,t,r,o,l,h,m,g,v,_){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=l,this.forceLongPolling=h,this.autoDetectLongPolling=m,this.longPollingOptions=g,this.useFetchStreams=v,this.isUsingEmulator=_}}const ah="(default)";class Pc{constructor(e,t){this.projectId=e,this.database=t||ah}static empty(){return new Pc("","")}get isDefaultDatabase(){return this.database===ah}isEqual(e){return e instanceof Pc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pA="__type__",$1="__max__",Od={mapValue:{}},gA="__vector__",oh="value";function mr(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?Ng(s)?4:Y1(s)?9007199254740991:K1(s)?10:11:Te(28295,{value:s})}function Us(s,e){if(s===e)return!0;const t=mr(s);if(t!==mr(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return Mc(s).isEqual(Mc(e));case 3:return function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const h=hr(o.timestampValue),m=hr(l.timestampValue);return h.seconds===m.seconds&&h.nanos===m.nanos}(s,e);case 5:return s.stringValue===e.stringValue;case 6:return function(o,l){return fr(o.bytesValue).isEqual(fr(l.bytesValue))}(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return function(o,l){return bt(o.geoPointValue.latitude)===bt(l.geoPointValue.latitude)&&bt(o.geoPointValue.longitude)===bt(l.geoPointValue.longitude)}(s,e);case 2:return function(o,l){if("integerValue"in o&&"integerValue"in l)return bt(o.integerValue)===bt(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const h=bt(o.doubleValue),m=bt(l.doubleValue);return h===m?rh(h)===rh(m):isNaN(h)&&isNaN(m)}return!1}(s,e);case 9:return Lo(s.arrayValue.values||[],e.arrayValue.values||[],Us);case 10:case 11:return function(o,l){const h=o.mapValue.fields||{},m=l.mapValue.fields||{};if(DT(h)!==DT(m))return!1;for(const g in h)if(h.hasOwnProperty(g)&&(m[g]===void 0||!Us(h[g],m[g])))return!1;return!0}(s,e);default:return Te(52216,{left:s})}}function kc(s,e){return(s.values||[]).find(t=>Us(t,e))!==void 0}function Uo(s,e){if(s===e)return 0;const t=mr(s),r=mr(e);if(t!==r)return Me(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Me(s.booleanValue,e.booleanValue);case 2:return function(l,h){const m=bt(l.integerValue||l.doubleValue),g=bt(h.integerValue||h.doubleValue);return m<g?-1:m>g?1:m===g?0:isNaN(m)?isNaN(g)?0:-1:1}(s,e);case 3:return MT(s.timestampValue,e.timestampValue);case 4:return MT(Mc(s),Mc(e));case 5:return Vp(s.stringValue,e.stringValue);case 6:return function(l,h){const m=fr(l),g=fr(h);return m.compareTo(g)}(s.bytesValue,e.bytesValue);case 7:return function(l,h){const m=l.split("/"),g=h.split("/");for(let v=0;v<m.length&&v<g.length;v++){const _=Me(m[v],g[v]);if(_!==0)return _}return Me(m.length,g.length)}(s.referenceValue,e.referenceValue);case 8:return function(l,h){const m=Me(bt(l.latitude),bt(h.latitude));return m!==0?m:Me(bt(l.longitude),bt(h.longitude))}(s.geoPointValue,e.geoPointValue);case 9:return PT(s.arrayValue,e.arrayValue);case 10:return function(l,h){var m,g,v,_;const A=l.fields||{},b=h.fields||{},O=(m=A[oh])===null||m===void 0?void 0:m.arrayValue,I=(g=b[oh])===null||g===void 0?void 0:g.arrayValue,U=Me(((v=O?.values)===null||v===void 0?void 0:v.length)||0,((_=I?.values)===null||_===void 0?void 0:_.length)||0);return U!==0?U:PT(O,I)}(s.mapValue,e.mapValue);case 11:return function(l,h){if(l===Od.mapValue&&h===Od.mapValue)return 0;if(l===Od.mapValue)return 1;if(h===Od.mapValue)return-1;const m=l.fields||{},g=Object.keys(m),v=h.fields||{},_=Object.keys(v);g.sort(),_.sort();for(let A=0;A<g.length&&A<_.length;++A){const b=Vp(g[A],_[A]);if(b!==0)return b;const O=Uo(m[g[A]],v[_[A]]);if(O!==0)return O}return Me(g.length,_.length)}(s.mapValue,e.mapValue);default:throw Te(23264,{Pe:t})}}function MT(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return Me(s,e);const t=hr(s),r=hr(e),o=Me(t.seconds,r.seconds);return o!==0?o:Me(t.nanos,r.nanos)}function PT(s,e){const t=s.values||[],r=e.values||[];for(let o=0;o<t.length&&o<r.length;++o){const l=Uo(t[o],r[o]);if(l)return l}return Me(t.length,r.length)}function Fo(s){return Lp(s)}function Lp(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?function(t){const r=hr(t);return`time(${r.seconds},${r.nanos})`}(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?function(t){return fr(t).toBase64()}(s.bytesValue):"referenceValue"in s?function(t){return ve.fromName(t).toString()}(s.referenceValue):"geoPointValue"in s?function(t){return`geo(${t.latitude},${t.longitude})`}(s.geoPointValue):"arrayValue"in s?function(t){let r="[",o=!0;for(const l of t.values||[])o?o=!1:r+=",",r+=Lp(l);return r+"]"}(s.arrayValue):"mapValue"in s?function(t){const r=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const h of r)l?l=!1:o+=",",o+=`${h}:${Lp(t.fields[h])}`;return o+"}"}(s.mapValue):Te(61005,{value:s})}function Hd(s){switch(mr(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Ih(s);return e?16+Hd(e):16;case 5:return 2*s.stringValue.length;case 6:return fr(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((o,l)=>o+Hd(l),0)}(s.arrayValue);case 10:case 11:return function(r){let o=0;return Nr(r.fields,(l,h)=>{o+=l.length+Hd(h)}),o}(s.mapValue);default:throw Te(13486,{value:s})}}function kT(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function Up(s){return!!s&&"integerValue"in s}function Sg(s){return!!s&&"arrayValue"in s}function VT(s){return!!s&&"nullValue"in s}function LT(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function Gd(s){return!!s&&"mapValue"in s}function K1(s){var e,t;return((t=(((e=s?.mapValue)===null||e===void 0?void 0:e.fields)||{})[pA])===null||t===void 0?void 0:t.stringValue)===gA}function Ec(s){if(s.geoPointValue)return{geoPointValue:Object.assign({},s.geoPointValue)};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:Object.assign({},s.timestampValue)};if(s.mapValue){const e={mapValue:{fields:{}}};return Nr(s.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Ec(r)),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(s.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ec(s.arrayValue.values[t]);return e}return Object.assign({},s)}function Y1(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===$1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e){this.value=e}static empty(){return new yn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Gd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ec(t)}setAll(e){let t=en.emptyPath(),r={},o=[];e.forEach((h,m)=>{if(!t.isImmediateParentOf(m)){const g=this.getFieldsMap(t);this.applyChanges(g,r,o),r={},o=[],t=m.popLast()}h?r[m.lastSegment()]=Ec(h):o.push(m.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,r,o)}delete(e){const t=this.field(e.popLast());Gd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Us(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];Gd(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){Nr(t,(o,l)=>e[o]=l);for(const o of r)delete e[o]}clone(){return new yn(Ec(this.value))}}function vA(s){const e=[];return Nr(s.fields,(t,r)=>{const o=new en([t]);if(Gd(r)){const l=vA(r.mapValue).fields;if(l.length===0)e.push(o);else for(const h of l)e.push(o.child(h))}else e.push(o)}),new Vn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e,t,r,o,l,h,m){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.createTime=l,this.data=h,this.documentState=m}static newInvalidDocument(e){return new Gt(e,0,we.min(),we.min(),we.min(),yn.empty(),0)}static newFoundDocument(e,t,r,o){return new Gt(e,1,t,we.min(),r,o,0)}static newNoDocument(e,t){return new Gt(e,2,t,we.min(),we.min(),yn.empty(),0)}static newUnknownDocument(e,t){return new Gt(e,3,t,we.min(),we.min(),yn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(we.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=yn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=yn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=we.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Gt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Gt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lh{constructor(e,t){this.position=e,this.inclusive=t}}function UT(s,e,t){let r=0;for(let o=0;o<s.position.length;o++){const l=e[o],h=s.position[o];if(l.field.isKeyField()?r=ve.comparator(ve.fromName(h.referenceValue),t.key):r=Uo(h,t.data.field(l.field)),l.dir==="desc"&&(r*=-1),r!==0)break}return r}function FT(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let t=0;t<s.position.length;t++)if(!Us(s.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(e,t="asc"){this.field=e,this.dir=t}}function Q1(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yA{}class It extends yA{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new W1(e,t,r):t==="array-contains"?new ej(e,r):t==="in"?new tj(e,r):t==="not-in"?new nj(e,r):t==="array-contains-any"?new sj(e,r):new It(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Z1(e,r):new J1(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Uo(t,this.value)):t!==null&&mr(this.value)===mr(t)&&this.matchesComparison(Uo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Te(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class vs extends yA{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new vs(e,t)}matches(e){return _A(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function _A(s){return s.op==="and"}function EA(s){return X1(s)&&_A(s)}function X1(s){for(const e of s.filters)if(e instanceof vs)return!1;return!0}function Fp(s){if(s instanceof It)return s.field.canonicalString()+s.op.toString()+Fo(s.value);if(EA(s))return s.filters.map(e=>Fp(e)).join(",");{const e=s.filters.map(t=>Fp(t)).join(",");return`${s.op}(${e})`}}function TA(s,e){return s instanceof It?function(r,o){return o instanceof It&&r.op===o.op&&r.field.isEqual(o.field)&&Us(r.value,o.value)}(s,e):s instanceof vs?function(r,o){return o instanceof vs&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce((l,h,m)=>l&&TA(h,o.filters[m]),!0):!1}(s,e):void Te(19439)}function bA(s){return s instanceof It?function(t){return`${t.field.canonicalString()} ${t.op} ${Fo(t.value)}`}(s):s instanceof vs?function(t){return t.op.toString()+" {"+t.getFilters().map(bA).join(" ,")+"}"}(s):"Filter"}class W1 extends It{constructor(e,t,r){super(e,t,r),this.key=ve.fromName(r.referenceValue)}matches(e){const t=ve.comparator(e.key,this.key);return this.matchesComparison(t)}}class Z1 extends It{constructor(e,t){super(e,"in",t),this.keys=AA("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class J1 extends It{constructor(e,t){super(e,"not-in",t),this.keys=AA("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function AA(s,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>ve.fromName(r.referenceValue))}class ej extends It{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Sg(t)&&kc(t.arrayValue,this.value)}}class tj extends It{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&kc(this.value.arrayValue,t)}}class nj extends It{constructor(e,t){super(e,"not-in",t)}matches(e){if(kc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!kc(this.value.arrayValue,t)}}class sj extends It{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Sg(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>kc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ij{constructor(e,t=null,r=[],o=[],l=null,h=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=l,this.startAt=h,this.endAt=m,this.Ie=null}}function qT(s,e=null,t=[],r=[],o=null,l=null,h=null){return new ij(s,e,t,r,o,l,h)}function wg(s){const e=Re(s);if(e.Ie===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Fp(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(l){return l.field.canonicalString()+l.dir}(r)).join(","),Qc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Fo(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Fo(r)).join(",")),e.Ie=t}return e.Ie}function xg(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<s.orderBy.length;t++)if(!Q1(s.orderBy[t],e.orderBy[t]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let t=0;t<s.filters.length;t++)if(!TA(s.filters[t],e.filters[t]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!FT(s.startAt,e.startAt)&&FT(s.endAt,e.endAt)}function qp(s){return ve.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(e,t=null,r=[],o=[],l=null,h="F",m=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=l,this.limitType=h,this.startAt=m,this.endAt=g,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function rj(s,e,t,r,o,l,h,m){return new Xo(s,e,t,r,o,l,h,m)}function Ch(s){return new Xo(s)}function zT(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function NA(s){return s.collectionGroup!==null}function Tc(s){const e=Re(s);if(e.Ee===null){e.Ee=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ee.push(l),t.add(l.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let m=new kt(en.comparator);return h.filters.forEach(g=>{g.getFlattenedFilters().forEach(v=>{v.isInequality()&&(m=m.add(v.field))})}),m})(e).forEach(l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ee.push(new Vc(l,r))}),t.has(en.keyField().canonicalString())||e.Ee.push(new Vc(en.keyField(),r))}return e.Ee}function Ls(s){const e=Re(s);return e.de||(e.de=aj(e,Tc(s))),e.de}function aj(s,e){if(s.limitType==="F")return qT(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map(o=>{const l=o.dir==="desc"?"asc":"desc";return new Vc(o.field,l)});const t=s.endAt?new lh(s.endAt.position,s.endAt.inclusive):null,r=s.startAt?new lh(s.startAt.position,s.startAt.inclusive):null;return qT(s.path,s.collectionGroup,e,s.filters,s.limit,t,r)}}function zp(s,e){const t=s.filters.concat([e]);return new Xo(s.path,s.collectionGroup,s.explicitOrderBy.slice(),t,s.limit,s.limitType,s.startAt,s.endAt)}function Bp(s,e,t){return new Xo(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,t,s.startAt,s.endAt)}function Rh(s,e){return xg(Ls(s),Ls(e))&&s.limitType===e.limitType}function SA(s){return`${wg(Ls(s))}|lt:${s.limitType}`}function So(s){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(o=>bA(o)).join(", ")}]`),Qc(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(o=>function(h){return`${h.field.canonicalString()} (${h.dir})`}(o)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(o=>Fo(o)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(o=>Fo(o)).join(",")),`Target(${r})`}(Ls(s))}; limitType=${s.limitType})`}function jh(s,e){return e.isFoundDocument()&&function(r,o){const l=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(l):ve.isDocumentKey(r.path)?r.path.isEqual(l):r.path.isImmediateParentOf(l)}(s,e)&&function(r,o){for(const l of Tc(r))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0}(s,e)&&function(r,o){for(const l of r.filters)if(!l.matches(o))return!1;return!0}(s,e)&&function(r,o){return!(r.startAt&&!function(h,m,g){const v=UT(h,m,g);return h.inclusive?v<=0:v<0}(r.startAt,Tc(r),o)||r.endAt&&!function(h,m,g){const v=UT(h,m,g);return h.inclusive?v>=0:v>0}(r.endAt,Tc(r),o))}(s,e)}function oj(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function wA(s){return(e,t)=>{let r=!1;for(const o of Tc(s)){const l=lj(o,e,t);if(l!==0)return l;r=r||o.field.isKeyField()}return 0}}function lj(s,e,t){const r=s.field.isKeyField()?ve.comparator(e.key,t.key):function(l,h,m){const g=h.data.field(l),v=m.data.field(l);return g!==null&&v!==null?Uo(g,v):Te(42886)}(s.field,e,t);switch(s.dir){case"asc":return r;case"desc":return-1*r;default:return Te(19790,{direction:s.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[o,l]of r)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(o===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return r.length===1?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Nr(this.inner,(t,r)=>{for(const[o,l]of r)e(o,l)})}isEmpty(){return cA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cj=new mt(ve.comparator);function bi(){return cj}const xA=new mt(ve.comparator);function pc(...s){let e=xA;for(const t of s)e=e.insert(t.key,t);return e}function IA(s){let e=xA;return s.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function ma(){return bc()}function CA(){return bc()}function bc(){return new wa(s=>s.toString(),(s,e)=>s.isEqual(e))}const uj=new mt(ve.comparator),dj=new kt(ve.comparator);function qe(...s){let e=dj;for(const t of s)e=e.add(t);return e}const hj=new kt(Me);function fj(){return hj}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ig(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:rh(e)?"-0":e}}function RA(s){return{integerValue:""+s}}function mj(s,e){return q1(e)?RA(e):Ig(s,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh{constructor(){this._=void 0}}function pj(s,e,t){return s instanceof Lc?function(o,l){const h={fields:{[hA]:{stringValue:dA},[mA]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&Ng(l)&&(l=Ih(l)),l&&(h.fields[fA]=l),{mapValue:h}}(t,e):s instanceof Uc?DA(s,e):s instanceof Fc?OA(s,e):function(o,l){const h=jA(o,l),m=BT(h)+BT(o.Re);return Up(h)&&Up(o.Re)?RA(m):Ig(o.serializer,m)}(s,e)}function gj(s,e,t){return s instanceof Uc?DA(s,e):s instanceof Fc?OA(s,e):t}function jA(s,e){return s instanceof ch?function(r){return Up(r)||function(l){return!!l&&"doubleValue"in l}(r)}(e)?e:{integerValue:0}:null}class Lc extends Dh{}class Uc extends Dh{constructor(e){super(),this.elements=e}}function DA(s,e){const t=MA(e);for(const r of s.elements)t.some(o=>Us(o,r))||t.push(r);return{arrayValue:{values:t}}}class Fc extends Dh{constructor(e){super(),this.elements=e}}function OA(s,e){let t=MA(e);for(const r of s.elements)t=t.filter(o=>!Us(o,r));return{arrayValue:{values:t}}}class ch extends Dh{constructor(e,t){super(),this.serializer=e,this.Re=t}}function BT(s){return bt(s.integerValue||s.doubleValue)}function MA(s){return Sg(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vj{constructor(e,t){this.field=e,this.transform=t}}function yj(s,e){return s.field.isEqual(e.field)&&function(r,o){return r instanceof Uc&&o instanceof Uc||r instanceof Fc&&o instanceof Fc?Lo(r.elements,o.elements,Us):r instanceof ch&&o instanceof ch?Us(r.Re,o.Re):r instanceof Lc&&o instanceof Lc}(s.transform,e.transform)}class _j{constructor(e,t){this.version=e,this.transformResults=t}}class tn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new tn}static exists(e){return new tn(void 0,e)}static updateTime(e){return new tn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function $d(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class Oh{}function PA(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new Mh(s.key,tn.none()):new Xc(s.key,s.data,tn.none());{const t=s.data,r=yn.empty();let o=new kt(en.comparator);for(let l of e.fields)if(!o.has(l)){let h=t.field(l);h===null&&l.length>1&&(l=l.popLast(),h=t.field(l)),h===null?r.delete(l):r.set(l,h),o=o.add(l)}return new Sr(s.key,r,new Vn(o.toArray()),tn.none())}}function Ej(s,e,t){s instanceof Xc?function(o,l,h){const m=o.value.clone(),g=GT(o.fieldTransforms,l,h.transformResults);m.setAll(g),l.convertToFoundDocument(h.version,m).setHasCommittedMutations()}(s,e,t):s instanceof Sr?function(o,l,h){if(!$d(o.precondition,l))return void l.convertToUnknownDocument(h.version);const m=GT(o.fieldTransforms,l,h.transformResults),g=l.data;g.setAll(kA(o)),g.setAll(m),l.convertToFoundDocument(h.version,g).setHasCommittedMutations()}(s,e,t):function(o,l,h){l.convertToNoDocument(h.version).setHasCommittedMutations()}(0,e,t)}function Ac(s,e,t,r){return s instanceof Xc?function(l,h,m,g){if(!$d(l.precondition,h))return m;const v=l.value.clone(),_=$T(l.fieldTransforms,g,h);return v.setAll(_),h.convertToFoundDocument(h.version,v).setHasLocalMutations(),null}(s,e,t,r):s instanceof Sr?function(l,h,m,g){if(!$d(l.precondition,h))return m;const v=$T(l.fieldTransforms,g,h),_=h.data;return _.setAll(kA(l)),_.setAll(v),h.convertToFoundDocument(h.version,_).setHasLocalMutations(),m===null?null:m.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(A=>A.field))}(s,e,t,r):function(l,h,m){return $d(l.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):m}(s,e,t)}function Tj(s,e){let t=null;for(const r of s.fieldTransforms){const o=e.data.field(r.field),l=jA(r.transform,o||null);l!=null&&(t===null&&(t=yn.empty()),t.set(r.field,l))}return t||null}function HT(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&Lo(r,o,(l,h)=>yj(l,h))}(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class Xc extends Oh{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Sr extends Oh{constructor(e,t,r,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function kA(s){const e=new Map;return s.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=s.data.field(t);e.set(t,r)}}),e}function GT(s,e,t){const r=new Map;$e(s.length===t.length,32656,{Ve:t.length,me:s.length});for(let o=0;o<t.length;o++){const l=s[o],h=l.transform,m=e.data.field(l.field);r.set(l.field,gj(h,m,t[o]))}return r}function $T(s,e,t){const r=new Map;for(const o of s){const l=o.transform,h=t.data.field(o.field);r.set(o.field,pj(l,h,e))}return r}class Mh extends Oh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class VA extends Oh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bj{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&Ej(l,e,r[o])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Ac(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Ac(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=CA();return this.mutations.forEach(o=>{const l=e.get(o.key),h=l.overlayedDocument;let m=this.applyToLocalView(h,l.mutatedFields);m=t.has(o.key)?null:m;const g=PA(h,m);g!==null&&r.set(o.key,g),h.isValidDocument()||h.convertToNoDocument(we.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),qe())}isEqual(e){return this.batchId===e.batchId&&Lo(this.mutations,e.mutations,(t,r)=>HT(t,r))&&Lo(this.baseMutations,e.baseMutations,(t,r)=>HT(t,r))}}class Cg{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){$e(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let o=function(){return uj}();const l=e.mutations;for(let h=0;h<l.length;h++)o=o.insert(l[h].key,r[h].version);return new Cg(e,t,r,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aj{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nj{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xt,Ge;function LA(s){switch(s){case te.OK:return Te(64938);case te.CANCELLED:case te.UNKNOWN:case te.DEADLINE_EXCEEDED:case te.RESOURCE_EXHAUSTED:case te.INTERNAL:case te.UNAVAILABLE:case te.UNAUTHENTICATED:return!1;case te.INVALID_ARGUMENT:case te.NOT_FOUND:case te.ALREADY_EXISTS:case te.PERMISSION_DENIED:case te.FAILED_PRECONDITION:case te.ABORTED:case te.OUT_OF_RANGE:case te.UNIMPLEMENTED:case te.DATA_LOSS:return!0;default:return Te(15467,{code:s})}}function UA(s){if(s===void 0)return Ti("GRPC error has no .code"),te.UNKNOWN;switch(s){case xt.OK:return te.OK;case xt.CANCELLED:return te.CANCELLED;case xt.UNKNOWN:return te.UNKNOWN;case xt.DEADLINE_EXCEEDED:return te.DEADLINE_EXCEEDED;case xt.RESOURCE_EXHAUSTED:return te.RESOURCE_EXHAUSTED;case xt.INTERNAL:return te.INTERNAL;case xt.UNAVAILABLE:return te.UNAVAILABLE;case xt.UNAUTHENTICATED:return te.UNAUTHENTICATED;case xt.INVALID_ARGUMENT:return te.INVALID_ARGUMENT;case xt.NOT_FOUND:return te.NOT_FOUND;case xt.ALREADY_EXISTS:return te.ALREADY_EXISTS;case xt.PERMISSION_DENIED:return te.PERMISSION_DENIED;case xt.FAILED_PRECONDITION:return te.FAILED_PRECONDITION;case xt.ABORTED:return te.ABORTED;case xt.OUT_OF_RANGE:return te.OUT_OF_RANGE;case xt.UNIMPLEMENTED:return te.UNIMPLEMENTED;case xt.DATA_LOSS:return te.DATA_LOSS;default:return Te(39323,{code:s})}}(Ge=xt||(xt={}))[Ge.OK=0]="OK",Ge[Ge.CANCELLED=1]="CANCELLED",Ge[Ge.UNKNOWN=2]="UNKNOWN",Ge[Ge.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ge[Ge.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ge[Ge.NOT_FOUND=5]="NOT_FOUND",Ge[Ge.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ge[Ge.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ge[Ge.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ge[Ge.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ge[Ge.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ge[Ge.ABORTED=10]="ABORTED",Ge[Ge.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ge[Ge.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ge[Ge.INTERNAL=13]="INTERNAL",Ge[Ge.UNAVAILABLE=14]="UNAVAILABLE",Ge[Ge.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sj=new lr([4294967295,4294967295],0);function KT(s){const e=aA().encode(s),t=new Z0;return t.update(e),new Uint8Array(t.digest())}function YT(s){const e=new DataView(s.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new lr([t,r],0),new lr([o,l],0)]}class Rg{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new gc(`Invalid padding: ${t}`);if(r<0)throw new gc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new gc(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new gc(`Invalid padding when bitmap length is 0: ${t}`);this.pe=8*e.length-t,this.ye=lr.fromNumber(this.pe)}we(e,t,r){let o=e.add(t.multiply(lr.fromNumber(r)));return o.compare(Sj)===1&&(o=new lr([o.getBits(0),o.getBits(1)],0)),o.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const t=KT(e),[r,o]=YT(t);for(let l=0;l<this.hashCount;l++){const h=this.we(r,o,l);if(!this.be(h))return!1}return!0}static create(e,t,r){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),h=new Rg(l,o,t);return r.forEach(m=>h.insert(m)),h}insert(e){if(this.pe===0)return;const t=KT(e),[r,o]=YT(t);for(let l=0;l<this.hashCount;l++){const h=this.we(r,o,l);this.Se(h)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class gc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph{constructor(e,t,r,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const o=new Map;return o.set(e,Wc.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Ph(we.min(),o,new mt(Me),bi(),qe())}}class Wc{constructor(e,t,r,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Wc(r,t,qe(),qe(),qe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd{constructor(e,t,r,o){this.De=e,this.removedTargetIds=t,this.key=r,this.ve=o}}class FA{constructor(e,t){this.targetId=e,this.Ce=t}}class qA{constructor(e,t,r=sn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class QT{constructor(){this.Fe=0,this.Me=XT(),this.xe=sn.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=qe(),t=qe(),r=qe();return this.Me.forEach((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:Te(38017,{changeType:l})}}),new Wc(this.xe,this.Oe,e,t,r)}Qe(){this.Ne=!1,this.Me=XT()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,$e(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class wj{constructor(e){this.ze=e,this.je=new Map,this.He=bi(),this.Je=Md(),this.Ye=Md(),this.Ze=new mt(Me)}Xe(e){for(const t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(const t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,t=>{const r=this.rt(t);switch(e.state){case 0:this.it(t)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(t);break;case 3:this.it(t)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),r.ke(e.resumeToken));break;default:Te(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach((r,o)=>{this.it(o)&&t(o)})}ot(e){const t=e.targetId,r=e.Ce.count,o=this._t(t);if(o){const l=o.target;if(qp(l))if(r===0){const h=new ve(l.path);this.tt(t,h,Gt.newNoDocument(h,we.min()))}else $e(r===1,20013,{expectedCount:r});else{const h=this.ut(t);if(h!==r){const m=this.ct(e),g=m?this.lt(m,e,h):1;if(g!==0){this.st(t);const v=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,v)}}}}}ct(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:l=0}=t;let h,m;try{h=fr(r).toUint8Array()}catch(g){if(g instanceof uA)return Vo("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{m=new Rg(h,o,l)}catch(g){return Vo(g instanceof gc?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return m.pe===0?null:m}lt(e,t,r){return t.Ce.count===r-this.Tt(e,t.targetId)?0:2}Tt(e,t){const r=this.ze.getRemoteKeysForTarget(t);let o=0;return r.forEach(l=>{const h=this.ze.Pt(),m=`projects/${h.projectId}/databases/${h.database}/documents/${l.path.canonicalString()}`;e.mightContain(m)||(this.tt(t,l,null),o++)}),o}It(e){const t=new Map;this.je.forEach((l,h)=>{const m=this._t(h);if(m){if(l.current&&qp(m.target)){const g=new ve(m.target.path);this.Et(g).has(h)||this.dt(h,g)||this.tt(h,g,Gt.newNoDocument(g,e))}l.Le&&(t.set(h,l.qe()),l.Qe())}});let r=qe();this.Ye.forEach((l,h)=>{let m=!0;h.forEachWhile(g=>{const v=this._t(g);return!v||v.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)}),m&&(r=r.add(l))}),this.He.forEach((l,h)=>h.setReadTime(e));const o=new Ph(e,t,this.Ze,this.He,r);return this.He=bi(),this.Je=Md(),this.Ye=Md(),this.Ze=new mt(Me),o}et(e,t){if(!this.it(e))return;const r=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,r),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,r){if(!this.it(e))return;const o=this.rt(e);this.dt(e,t)?o.$e(t,1):o.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),r&&(this.He=this.He.insert(t,r))}removeTarget(e){this.je.delete(e)}ut(e){const t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new QT,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new kt(Me),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new kt(Me),this.Je=this.Je.insert(e,t)),t}it(e){const t=this._t(e)!==null;return t||fe("WatchChangeAggregator","Detected inactive target",e),t}_t(e){const t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new QT),this.ze.getRemoteKeysForTarget(e).forEach(t=>{this.tt(e,t,null)})}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}}function Md(){return new mt(ve.comparator)}function XT(){return new mt(ve.comparator)}const xj={asc:"ASCENDING",desc:"DESCENDING"},Ij={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Cj={and:"AND",or:"OR"};class Rj{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Hp(s,e){return s.useProto3Json||Qc(e)?e:{value:e}}function uh(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function zA(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function jj(s,e){return uh(s,e.toTimestamp())}function Un(s){return $e(!!s,49232),we.fromTimestamp(function(t){const r=hr(t);return new Pt(r.seconds,r.nanos)}(s))}function jg(s,e){return Gp(s,e).canonicalString()}function Gp(s,e){const t=function(o){return new it(["projects",o.projectId,"databases",o.database])}(s).child("documents");return e===void 0?t:t.child(e)}function BA(s){const e=it.fromString(s);return $e(QA(e),10190,{key:e.toString()}),e}function dh(s,e){return jg(s.databaseId,e.path)}function Nc(s,e){const t=BA(e);if(t.get(1)!==s.databaseId.projectId)throw new he(te.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+s.databaseId.projectId);if(t.get(3)!==s.databaseId.database)throw new he(te.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+s.databaseId.database);return new ve(GA(t))}function HA(s,e){return jg(s.databaseId,e)}function Dj(s){const e=BA(s);return e.length===4?it.emptyPath():GA(e)}function $p(s){return new it(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function GA(s){return $e(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function WT(s,e,t){return{name:dh(s,e),fields:t.value.mapValue.fields}}function Oj(s,e){return"found"in e?function(r,o){$e(!!o.found,43571),o.found.name,o.found.updateTime;const l=Nc(r,o.found.name),h=Un(o.found.updateTime),m=o.found.createTime?Un(o.found.createTime):we.min(),g=new yn({mapValue:{fields:o.found.fields}});return Gt.newFoundDocument(l,h,m,g)}(s,e):"missing"in e?function(r,o){$e(!!o.missing,3894),$e(!!o.readTime,22933);const l=Nc(r,o.missing),h=Un(o.readTime);return Gt.newNoDocument(l,h)}(s,e):Te(7234,{result:e})}function Mj(s,e){let t;if("targetChange"in e){e.targetChange;const r=function(v){return v==="NO_CHANGE"?0:v==="ADD"?1:v==="REMOVE"?2:v==="CURRENT"?3:v==="RESET"?4:Te(39313,{state:v})}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=function(v,_){return v.useProto3Json?($e(_===void 0||typeof _=="string",58123),sn.fromBase64String(_||"")):($e(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),sn.fromUint8Array(_||new Uint8Array))}(s,e.targetChange.resumeToken),h=e.targetChange.cause,m=h&&function(v){const _=v.code===void 0?te.UNKNOWN:UA(v.code);return new he(_,v.message||"")}(h);t=new qA(r,o,l,m||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const o=Nc(s,r.document.name),l=Un(r.document.updateTime),h=r.document.createTime?Un(r.document.createTime):we.min(),m=new yn({mapValue:{fields:r.document.fields}}),g=Gt.newFoundDocument(o,l,h,m),v=r.targetIds||[],_=r.removedTargetIds||[];t=new Kd(v,_,g.key,g)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const o=Nc(s,r.document),l=r.readTime?Un(r.readTime):we.min(),h=Gt.newNoDocument(o,l),m=r.removedTargetIds||[];t=new Kd([],m,h.key,h)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const o=Nc(s,r.document),l=r.removedTargetIds||[];t=new Kd([],l,o,null)}else{if(!("filter"in e))return Te(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:o=0,unchangedNames:l}=r,h=new Nj(o,l),m=r.targetId;t=new FA(m,h)}}return t}function $A(s,e){let t;if(e instanceof Xc)t={update:WT(s,e.key,e.value)};else if(e instanceof Mh)t={delete:dh(s,e.key)};else if(e instanceof Sr)t={update:WT(s,e.key,e.data),updateMask:Bj(e.fieldMask)};else{if(!(e instanceof VA))return Te(16599,{ft:e.type});t={verify:dh(s,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(l,h){const m=h.transform;if(m instanceof Lc)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof Uc)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof Fc)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof ch)return{fieldPath:h.field.canonicalString(),increment:m.Re};throw Te(20930,{transform:h.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(o,l){return l.updateTime!==void 0?{updateTime:jj(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Te(27497)}(s,e.precondition)),t}function Pj(s,e){return s&&s.length>0?($e(e!==void 0,14353),s.map(t=>function(o,l){let h=o.updateTime?Un(o.updateTime):Un(l);return h.isEqual(we.min())&&(h=Un(l)),new _j(h,o.transformResults||[])}(t,e))):[]}function kj(s,e){return{documents:[HA(s,e.path)]}}function Vj(s,e){const t={structuredQuery:{}},r=e.path;let o;e.collectionGroup!==null?(o=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=HA(s,o);const l=function(v){if(v.length!==0)return YA(vs.create(v,"and"))}(e.filters);l&&(t.structuredQuery.where=l);const h=function(v){if(v.length!==0)return v.map(_=>function(b){return{field:wo(b.field),direction:Fj(b.dir)}}(_))}(e.orderBy);h&&(t.structuredQuery.orderBy=h);const m=Hp(s,e.limit);return m!==null&&(t.structuredQuery.limit=m),e.startAt&&(t.structuredQuery.startAt=function(v){return{before:v.inclusive,values:v.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(v){return{before:!v.inclusive,values:v.position}}(e.endAt)),{gt:t,parent:o}}function Lj(s){let e=Dj(s.parent);const t=s.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){$e(r===1,65062);const _=t.from[0];_.allDescendants?o=_.collectionId:e=e.child(_.collectionId)}let l=[];t.where&&(l=function(A){const b=KA(A);return b instanceof vs&&EA(b)?b.getFilters():[b]}(t.where));let h=[];t.orderBy&&(h=function(A){return A.map(b=>function(I){return new Vc(xo(I.field),function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(I.direction))}(b))}(t.orderBy));let m=null;t.limit&&(m=function(A){let b;return b=typeof A=="object"?A.value:A,Qc(b)?null:b}(t.limit));let g=null;t.startAt&&(g=function(A){const b=!!A.before,O=A.values||[];return new lh(O,b)}(t.startAt));let v=null;return t.endAt&&(v=function(A){const b=!A.before,O=A.values||[];return new lh(O,b)}(t.endAt)),rj(e,o,h,l,m,"F",g,v)}function Uj(s,e){const t=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Te(28987,{purpose:o})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function KA(s){return s.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=xo(t.unaryFilter.field);return It.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=xo(t.unaryFilter.field);return It.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=xo(t.unaryFilter.field);return It.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=xo(t.unaryFilter.field);return It.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Te(61313);default:return Te(60726)}}(s):s.fieldFilter!==void 0?function(t){return It.create(xo(t.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Te(58110);default:return Te(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(s):s.compositeFilter!==void 0?function(t){return vs.create(t.compositeFilter.filters.map(r=>KA(r)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Te(1026)}}(t.compositeFilter.op))}(s):Te(30097,{filter:s})}function Fj(s){return xj[s]}function qj(s){return Ij[s]}function zj(s){return Cj[s]}function wo(s){return{fieldPath:s.canonicalString()}}function xo(s){return en.fromServerFormat(s.fieldPath)}function YA(s){return s instanceof It?function(t){if(t.op==="=="){if(LT(t.value))return{unaryFilter:{field:wo(t.field),op:"IS_NAN"}};if(VT(t.value))return{unaryFilter:{field:wo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(LT(t.value))return{unaryFilter:{field:wo(t.field),op:"IS_NOT_NAN"}};if(VT(t.value))return{unaryFilter:{field:wo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:wo(t.field),op:qj(t.op),value:t.value}}}(s):s instanceof vs?function(t){const r=t.getFilters().map(o=>YA(o));return r.length===1?r[0]:{compositeFilter:{op:zj(t.op),filters:r}}}(s):Te(54877,{filter:s})}function Bj(s){const e=[];return s.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function QA(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(e,t,r,o,l=we.min(),h=we.min(),m=sn.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=m,this.expectedCount=g}withSequenceNumber(e){return new rr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new rr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new rr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new rr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hj{constructor(e){this.wt=e}}function Gj(s){const e=Lj({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?Bp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $j{constructor(){this.Cn=new Kj}addToCollectionParentIndex(e,t){return this.Cn.add(t),se.resolve()}getCollectionParents(e,t){return se.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return se.resolve()}deleteFieldIndex(e,t){return se.resolve()}deleteAllFieldIndexes(e){return se.resolve()}createTargetIndexes(e,t){return se.resolve()}getDocumentsMatchingTarget(e,t){return se.resolve(null)}getIndexType(e,t){return se.resolve(0)}getFieldIndexes(e,t){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,t){return se.resolve(dr.min())}getMinOffsetFromCollectionGroup(e,t){return se.resolve(dr.min())}updateCollectionGroup(e,t,r){return se.resolve()}updateIndexEntries(e,t){return se.resolve()}}class Kj{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new kt(it.comparator),l=!o.has(r);return this.index[t]=o.add(r),l}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new kt(it.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},XA=41943040;class An{static withCacheSize(e){return new An(e,An.DEFAULT_COLLECTION_PERCENTILE,An.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */An.DEFAULT_COLLECTION_PERCENTILE=10,An.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,An.DEFAULT=new An(XA,An.DEFAULT_COLLECTION_PERCENTILE,An.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),An.DISABLED=new An(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new qo(0)}static lr(){return new qo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JT="LruGarbageCollector",Yj=1048576;function eb([s,e],[t,r]){const o=Me(s,t);return o===0?Me(e,r):o}class Qj{constructor(e){this.Er=e,this.buffer=new kt(eb),this.dr=0}Ar(){return++this.dr}Rr(e){const t=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();eb(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Xj{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){fe(JT,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Qo(t)?fe(JT,"Ignoring IndexedDB error during garbage collection: ",t):await Yo(t)}await this.mr(3e5)})}}class Wj{constructor(e,t){this.gr=e,this.params=t}calculateTargetCount(e,t){return this.gr.pr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return se.resolve(xh.le);const r=new Qj(t);return this.gr.forEachTarget(e,o=>r.Rr(o.sequenceNumber)).next(()=>this.gr.yr(e,o=>r.Rr(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.gr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.gr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(fe("LruGarbageCollector","Garbage collection skipped; disabled"),se.resolve(ZT)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(fe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ZT):this.wr(e,t))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,t){let r,o,l,h,m,g,v;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(A=>(A>this.params.maximumSequenceNumbersToCollect?(fe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${A}`),o=this.params.maximumSequenceNumbersToCollect):o=A,h=Date.now(),this.nthSequenceNumber(e,o))).next(A=>(r=A,m=Date.now(),this.removeTargets(e,r,t))).next(A=>(l=A,g=Date.now(),this.removeOrphanedDocuments(e,r))).next(A=>(v=Date.now(),No()<=Ue.DEBUG&&fe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-_}ms
	Determined least recently used ${o} in `+(m-h)+`ms
	Removed ${l} targets in `+(g-m)+`ms
	Removed ${A} documents in `+(v-g)+`ms
Total Duration: ${v-_}ms`),se.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:A})))}}function Zj(s,e){return new Wj(s,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jj{constructor(){this.changes=new wa(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Gt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?se.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eD{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tD{constructor(e,t,r,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(r=o,this.remoteDocumentCache.getEntry(e,t))).next(o=>(r!==null&&Ac(r.mutation,o,Vn.empty(),Pt.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,qe()).next(()=>r))}getLocalViewOfDocuments(e,t,r=qe()){const o=ma();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,r).next(l=>{let h=pc();return l.forEach((m,g)=>{h=h.insert(m,g.overlayedDocument)}),h}))}getOverlayedDocuments(e,t){const r=ma();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,qe()))}populateOverlays(e,t,r){const o=[];return r.forEach(l=>{t.has(l)||o.push(l)}),this.documentOverlayCache.getOverlays(e,o).next(l=>{l.forEach((h,m)=>{t.set(h,m)})})}computeViews(e,t,r,o){let l=bi();const h=bc(),m=function(){return bc()}();return t.forEach((g,v)=>{const _=r.get(v.key);o.has(v.key)&&(_===void 0||_.mutation instanceof Sr)?l=l.insert(v.key,v):_!==void 0?(h.set(v.key,_.mutation.getFieldMask()),Ac(_.mutation,v,_.mutation.getFieldMask(),Pt.now())):h.set(v.key,Vn.empty())}),this.recalculateAndSaveOverlays(e,l).next(g=>(g.forEach((v,_)=>h.set(v,_)),t.forEach((v,_)=>{var A;return m.set(v,new eD(_,(A=h.get(v))!==null&&A!==void 0?A:null))}),m))}recalculateAndSaveOverlays(e,t){const r=bc();let o=new mt((h,m)=>h-m),l=qe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(h=>{for(const m of h)m.keys().forEach(g=>{const v=t.get(g);if(v===null)return;let _=r.get(g)||Vn.empty();_=m.applyToLocalView(v,_),r.set(g,_);const A=(o.get(m.batchId)||qe()).add(g);o=o.insert(m.batchId,A)})}).next(()=>{const h=[],m=o.getReverseIterator();for(;m.hasNext();){const g=m.getNext(),v=g.key,_=g.value,A=CA();_.forEach(b=>{if(!l.has(b)){const O=PA(t.get(b),r.get(b));O!==null&&A.set(b,O),l=l.add(b)}}),h.push(this.documentOverlayCache.saveOverlays(e,v,A))}return se.waitFor(h)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,o){return function(h){return ve.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):NA(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,o):this.getDocumentsMatchingCollectionQuery(e,t,r,o)}getNextDocuments(e,t,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,o).next(l=>{const h=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,o-l.size):se.resolve(ma());let m=Oc,g=l;return h.next(v=>se.forEach(v,(_,A)=>(m<A.largestBatchId&&(m=A.largestBatchId),l.get(_)?se.resolve():this.remoteDocumentCache.getEntry(e,_).next(b=>{g=g.insert(_,b)}))).next(()=>this.populateOverlays(e,v,l)).next(()=>this.computeViews(e,g,v,qe())).next(_=>({batchId:m,changes:IA(_)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ve(t)).next(r=>{let o=pc();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,r,o){const l=t.collectionGroup;let h=pc();return this.indexManager.getCollectionParents(e,l).next(m=>se.forEach(m,g=>{const v=function(A,b){return new Xo(b,null,A.explicitOrderBy.slice(),A.filters.slice(),A.limit,A.limitType,A.startAt,A.endAt)}(t,g.child(l));return this.getDocumentsMatchingCollectionQuery(e,v,r,o).next(_=>{_.forEach((A,b)=>{h=h.insert(A,b)})})}).next(()=>h))}getDocumentsMatchingCollectionQuery(e,t,r,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(h=>(l=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,l,o))).next(h=>{l.forEach((g,v)=>{const _=v.getKey();h.get(_)===null&&(h=h.insert(_,Gt.newInvalidDocument(_)))});let m=pc();return h.forEach((g,v)=>{const _=l.get(g);_!==void 0&&Ac(_.mutation,v,Vn.empty(),Pt.now()),jh(t,v)&&(m=m.insert(g,v))}),m})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nD{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,t){return se.resolve(this.kr.get(t))}saveBundleMetadata(e,t){return this.kr.set(t.id,function(o){return{id:o.id,version:o.version,createTime:Un(o.createTime)}}(t)),se.resolve()}getNamedQuery(e,t){return se.resolve(this.qr.get(t))}saveNamedQuery(e,t){return this.qr.set(t.name,function(o){return{name:o.name,query:Gj(o.bundledQuery),readTime:Un(o.readTime)}}(t)),se.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sD{constructor(){this.overlays=new mt(ve.comparator),this.Qr=new Map}getOverlay(e,t){return se.resolve(this.overlays.get(t))}getOverlays(e,t){const r=ma();return se.forEach(t,o=>this.getOverlay(e,o).next(l=>{l!==null&&r.set(o,l)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((o,l)=>{this.St(e,t,l)}),se.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.Qr.get(r);return o!==void 0&&(o.forEach(l=>this.overlays=this.overlays.remove(l)),this.Qr.delete(r)),se.resolve()}getOverlaysForCollection(e,t,r){const o=ma(),l=t.length+1,h=new ve(t.child("")),m=this.overlays.getIteratorFrom(h);for(;m.hasNext();){const g=m.getNext().value,v=g.getKey();if(!t.isPrefixOf(v.path))break;v.path.length===l&&g.largestBatchId>r&&o.set(g.getKey(),g)}return se.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let l=new mt((v,_)=>v-_);const h=this.overlays.getIterator();for(;h.hasNext();){const v=h.getNext().value;if(v.getKey().getCollectionGroup()===t&&v.largestBatchId>r){let _=l.get(v.largestBatchId);_===null&&(_=ma(),l=l.insert(v.largestBatchId,_)),_.set(v.getKey(),v)}}const m=ma(),g=l.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach((v,_)=>m.set(v,_)),!(m.size()>=o)););return se.resolve(m)}St(e,t,r){const o=this.overlays.get(r.key);if(o!==null){const h=this.Qr.get(o.largestBatchId).delete(r.key);this.Qr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(r.key,new Aj(t,r));let l=this.Qr.get(t);l===void 0&&(l=qe(),this.Qr.set(t,l)),this.Qr.set(t,l.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iD{constructor(){this.sessionToken=sn.EMPTY_BYTE_STRING}getSessionToken(e){return se.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,se.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dg{constructor(){this.$r=new kt(Ht.Ur),this.Kr=new kt(Ht.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,t){const r=new Ht(e,t);this.$r=this.$r.add(r),this.Kr=this.Kr.add(r)}Gr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.zr(new Ht(e,t))}jr(e,t){e.forEach(r=>this.removeReference(r,t))}Hr(e){const t=new ve(new it([])),r=new Ht(t,e),o=new Ht(t,e+1),l=[];return this.Kr.forEachInRange([r,o],h=>{this.zr(h),l.push(h.key)}),l}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const t=new ve(new it([])),r=new Ht(t,e),o=new Ht(t,e+1);let l=qe();return this.Kr.forEachInRange([r,o],h=>{l=l.add(h.key)}),l}containsKey(e){const t=new Ht(e,0),r=this.$r.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Ht{constructor(e,t){this.key=e,this.Zr=t}static Ur(e,t){return ve.comparator(e.key,t.key)||Me(e.Zr,t.Zr)}static Wr(e,t){return Me(e.Zr,t.Zr)||ve.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rD{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.nr=1,this.Xr=new kt(Ht.Ur)}checkEmpty(e){return se.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,o){const l=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new bj(l,t,r,o);this.mutationQueue.push(h);for(const m of o)this.Xr=this.Xr.add(new Ht(m.key,l)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return se.resolve(h)}lookupMutationBatch(e,t){return se.resolve(this.ei(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=this.ti(r),l=o<0?0:o;return se.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(this.mutationQueue.length===0?Ag:this.nr-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ht(t,0),o=new Ht(t,Number.POSITIVE_INFINITY),l=[];return this.Xr.forEachInRange([r,o],h=>{const m=this.ei(h.Zr);l.push(m)}),se.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new kt(Me);return t.forEach(o=>{const l=new Ht(o,0),h=new Ht(o,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([l,h],m=>{r=r.add(m.Zr)})}),se.resolve(this.ni(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let l=r;ve.isDocumentKey(l)||(l=l.child(""));const h=new Ht(new ve(l),0);let m=new kt(Me);return this.Xr.forEachWhile(g=>{const v=g.key.path;return!!r.isPrefixOf(v)&&(v.length===o&&(m=m.add(g.Zr)),!0)},h),se.resolve(this.ni(m))}ni(e){const t=[];return e.forEach(r=>{const o=this.ei(r);o!==null&&t.push(o)}),t}removeMutationBatch(e,t){$e(this.ri(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Xr;return se.forEach(t.mutations,o=>{const l=new Ht(o.key,t.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Xr=r})}sr(e){}containsKey(e,t){const r=new Ht(t,0),o=this.Xr.firstAfterOrEqual(r);return se.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,se.resolve()}ri(e,t){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const t=this.ti(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aD{constructor(e){this.ii=e,this.docs=function(){return new mt(ve.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),l=o?o.size:0,h=this.ii(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:h}),this.size+=h-l,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return se.resolve(r?r.document.mutableCopy():Gt.newInvalidDocument(t))}getEntries(e,t){let r=bi();return t.forEach(o=>{const l=this.docs.get(o);r=r.insert(o,l?l.document.mutableCopy():Gt.newInvalidDocument(o))}),se.resolve(r)}getDocumentsMatchingQuery(e,t,r,o){let l=bi();const h=t.path,m=new ve(h.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(m);for(;g.hasNext();){const{key:v,value:{document:_}}=g.getNext();if(!h.isPrefixOf(v.path))break;v.path.length>h.length+1||V1(k1(_),r)<=0||(o.has(_.key)||jh(t,_))&&(l=l.insert(_.key,_.mutableCopy()))}return se.resolve(l)}getAllFromCollectionGroup(e,t,r,o){Te(9500)}si(e,t){return se.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new oD(this)}getSize(e){return se.resolve(this.size)}}class oD extends Jj{constructor(e){super(),this.Br=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.Br.addEntry(e,o)):this.Br.removeEntry(r)}),se.waitFor(t)}getFromCache(e,t){return this.Br.getEntry(e,t)}getAllFromCache(e,t){return this.Br.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lD{constructor(e){this.persistence=e,this.oi=new wa(t=>wg(t),xg),this.lastRemoteSnapshotVersion=we.min(),this.highestTargetId=0,this._i=0,this.ai=new Dg,this.targetCount=0,this.ui=qo.cr()}forEachTarget(e,t){return this.oi.forEach((r,o)=>t(o)),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this._i&&(this._i=t),se.resolve()}Tr(e){this.oi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ui=new qo(t),this.highestTargetId=t),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,t){return this.Tr(t),this.targetCount+=1,se.resolve()}updateTargetData(e,t){return this.Tr(t),se.resolve()}removeTargetData(e,t){return this.oi.delete(t.target),this.ai.Hr(t.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,t,r){let o=0;const l=[];return this.oi.forEach((h,m)=>{m.sequenceNumber<=t&&r.get(m.targetId)===null&&(this.oi.delete(h),l.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),se.waitFor(l).next(()=>o)}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,t){const r=this.oi.get(t)||null;return se.resolve(r)}addMatchingKeys(e,t,r){return this.ai.Gr(t,r),se.resolve()}removeMatchingKeys(e,t,r){this.ai.jr(t,r);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach(h=>{l.push(o.markPotentiallyOrphaned(e,h))}),se.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.ai.Hr(t),se.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ai.Yr(t);return se.resolve(r)}containsKey(e,t){return se.resolve(this.ai.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WA{constructor(e,t){this.ci={},this.overlays={},this.li=new xh(0),this.hi=!1,this.hi=!0,this.Pi=new iD,this.referenceDelegate=e(this),this.Ti=new lD(this),this.indexManager=new $j,this.remoteDocumentCache=function(o){return new aD(o)}(r=>this.referenceDelegate.Ii(r)),this.serializer=new Hj(t),this.Ei=new nD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new sD,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ci[e.toKey()];return r||(r=new rD(t,this.referenceDelegate),this.ci[e.toKey()]=r),r}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,t,r){fe("MemoryPersistence","Starting transaction:",e);const o=new cD(this.li.next());return this.referenceDelegate.di(),r(o).next(l=>this.referenceDelegate.Ai(o).next(()=>l)).toPromise().then(l=>(o.raiseOnCommittedEvent(),l))}Ri(e,t){return se.or(Object.values(this.ci).map(r=>()=>r.containsKey(e,t)))}}class cD extends U1{constructor(e){super(),this.currentSequenceNumber=e}}class Og{constructor(e){this.persistence=e,this.Vi=new Dg,this.mi=null}static fi(e){return new Og(e)}get gi(){if(this.mi)return this.mi;throw Te(60996)}addReference(e,t,r){return this.Vi.addReference(r,t),this.gi.delete(r.toString()),se.resolve()}removeReference(e,t,r){return this.Vi.removeReference(r,t),this.gi.add(r.toString()),se.resolve()}markPotentiallyOrphaned(e,t){return this.gi.add(t.toString()),se.resolve()}removeTarget(e,t){this.Vi.Hr(t.targetId).forEach(o=>this.gi.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(l=>this.gi.add(l.toString()))}).next(()=>r.removeTargetData(e,t))}di(){this.mi=new Set}Ai(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.gi,r=>{const o=ve.fromPath(r);return this.pi(e,o).next(l=>{l||t.removeEntry(o,we.min())})}).next(()=>(this.mi=null,t.apply(e)))}updateLimboDocument(e,t){return this.pi(e,t).next(r=>{r?this.gi.delete(t.toString()):this.gi.add(t.toString())})}Ii(e){return 0}pi(e,t){return se.or([()=>se.resolve(this.Vi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ri(e,t)])}}class hh{constructor(e,t){this.persistence=e,this.yi=new wa(r=>z1(r.path),(r,o)=>r.isEqual(o)),this.garbageCollector=Zj(this,t)}static fi(e,t){return new hh(e,t)}di(){}Ai(e){return se.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}pr(e){const t=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}br(e){let t=0;return this.yr(e,r=>{t++}).next(()=>t)}yr(e,t){return se.forEach(this.yi,(r,o)=>this.Dr(e,r,o).next(l=>l?se.resolve():t(o)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.si(e,h=>this.Dr(e,h,t).next(m=>{m||(r++,l.removeEntry(h,we.min()))})).next(()=>l.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.yi.set(t,e.currentSequenceNumber),se.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.yi.set(r,e.currentSequenceNumber),se.resolve()}removeReference(e,t,r){return this.yi.set(r,e.currentSequenceNumber),se.resolve()}updateLimboDocument(e,t){return this.yi.set(t,e.currentSequenceNumber),se.resolve()}Ii(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Hd(e.data.value)),t}Dr(e,t,r){return se.or([()=>this.persistence.Ri(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.yi.get(t);return se.resolve(o!==void 0&&o>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mg{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.ds=r,this.As=o}static Rs(e,t){let r=qe(),o=qe();for(const l of t.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new Mg(e,t.fromCache,r,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uD{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dD{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return Bx()?8:F1(hn())>0?6:4}()}initialize(e,t){this.ys=e,this.indexManager=t,this.Vs=!0}getDocumentsMatchingQuery(e,t,r,o){const l={result:null};return this.ws(e,t).next(h=>{l.result=h}).next(()=>{if(!l.result)return this.bs(e,t,o,r).next(h=>{l.result=h})}).next(()=>{if(l.result)return;const h=new uD;return this.Ss(e,t,h).next(m=>{if(l.result=m,this.fs)return this.Ds(e,t,h,m.size)})}).next(()=>l.result)}Ds(e,t,r,o){return r.documentReadCount<this.gs?(No()<=Ue.DEBUG&&fe("QueryEngine","SDK will not create cache indexes for query:",So(t),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),se.resolve()):(No()<=Ue.DEBUG&&fe("QueryEngine","Query:",So(t),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.ps*o?(No()<=Ue.DEBUG&&fe("QueryEngine","The SDK decides to create cache indexes for query:",So(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ls(t))):se.resolve())}ws(e,t){if(zT(t))return se.resolve(null);let r=Ls(t);return this.indexManager.getIndexType(e,r).next(o=>o===0?null:(t.limit!==null&&o===1&&(t=Bp(t,null,"F"),r=Ls(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(l=>{const h=qe(...l);return this.ys.getDocuments(e,h).next(m=>this.indexManager.getMinOffset(e,r).next(g=>{const v=this.vs(t,m);return this.Cs(t,v,h,g.readTime)?this.ws(e,Bp(t,null,"F")):this.Fs(e,v,t,g)}))})))}bs(e,t,r,o){return zT(t)||o.isEqual(we.min())?se.resolve(null):this.ys.getDocuments(e,r).next(l=>{const h=this.vs(t,l);return this.Cs(t,h,r,o)?se.resolve(null):(No()<=Ue.DEBUG&&fe("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),So(t)),this.Fs(e,h,t,P1(o,Oc)).next(m=>m))})}vs(e,t){let r=new kt(wA(e));return t.forEach((o,l)=>{jh(e,l)&&(r=r.add(l))}),r}Cs(e,t,r,o){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}Ss(e,t,r){return No()<=Ue.DEBUG&&fe("QueryEngine","Using full collection scan to execute query:",So(t)),this.ys.getDocumentsMatchingQuery(e,t,dr.min(),r)}Fs(e,t,r,o){return this.ys.getDocumentsMatchingQuery(e,r,o).next(l=>(t.forEach(h=>{l=l.insert(h.key,h)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pg="LocalStore",hD=3e8;class fD{constructor(e,t,r,o){this.persistence=e,this.Ms=t,this.serializer=o,this.xs=new mt(Me),this.Os=new wa(l=>wg(l),xg),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(r)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new tD(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.xs))}}function mD(s,e,t,r){return new fD(s,e,t,r)}async function ZA(s,e){const t=Re(s);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.mutationQueue.getAllMutationBatches(r).next(l=>(o=l,t.Ls(e),t.mutationQueue.getAllMutationBatches(r))).next(l=>{const h=[],m=[];let g=qe();for(const v of o){h.push(v.batchId);for(const _ of v.mutations)g=g.add(_.key)}for(const v of l){m.push(v.batchId);for(const _ of v.mutations)g=g.add(_.key)}return t.localDocuments.getDocuments(r,g).next(v=>({ks:v,removedBatchIds:h,addedBatchIds:m}))})})}function pD(s,e){const t=Re(s);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),l=t.Bs.newChangeBuffer({trackRemovals:!0});return function(m,g,v,_){const A=v.batch,b=A.keys();let O=se.resolve();return b.forEach(I=>{O=O.next(()=>_.getEntry(g,I)).next(U=>{const C=v.docVersions.get(I);$e(C!==null,48541),U.version.compareTo(C)<0&&(A.applyToRemoteDocument(U,v),U.isValidDocument()&&(U.setReadTime(v.commitVersion),_.addEntry(U)))})}),O.next(()=>m.mutationQueue.removeMutationBatch(g,A))}(t,r,e,l).next(()=>l.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(m){let g=qe();for(let v=0;v<m.mutationResults.length;++v)m.mutationResults[v].transformResults.length>0&&(g=g.add(m.batch.mutations[v].key));return g}(e))).next(()=>t.localDocuments.getDocuments(r,o))})}function JA(s){const e=Re(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ti.getLastRemoteSnapshotVersion(t))}function gD(s,e){const t=Re(s),r=e.snapshotVersion;let o=t.xs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const h=t.Bs.newChangeBuffer({trackRemovals:!0});o=t.xs;const m=[];e.targetChanges.forEach((_,A)=>{const b=o.get(A);if(!b)return;m.push(t.Ti.removeMatchingKeys(l,_.removedDocuments,A).next(()=>t.Ti.addMatchingKeys(l,_.addedDocuments,A)));let O=b.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(A)!==null?O=O.withResumeToken(sn.EMPTY_BYTE_STRING,we.min()).withLastLimboFreeSnapshotVersion(we.min()):_.resumeToken.approximateByteSize()>0&&(O=O.withResumeToken(_.resumeToken,r)),o=o.insert(A,O),function(U,C,$){return U.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-U.snapshotVersion.toMicroseconds()>=hD?!0:$.addedDocuments.size+$.modifiedDocuments.size+$.removedDocuments.size>0}(b,O,_)&&m.push(t.Ti.updateTargetData(l,O))});let g=bi(),v=qe();if(e.documentUpdates.forEach(_=>{e.resolvedLimboDocuments.has(_)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(l,_))}),m.push(vD(l,h,e.documentUpdates).next(_=>{g=_.qs,v=_.Qs})),!r.isEqual(we.min())){const _=t.Ti.getLastRemoteSnapshotVersion(l).next(A=>t.Ti.setTargetsMetadata(l,l.currentSequenceNumber,r));m.push(_)}return se.waitFor(m).next(()=>h.apply(l)).next(()=>t.localDocuments.getLocalViewOfDocuments(l,g,v)).next(()=>g)}).then(l=>(t.xs=o,l))}function vD(s,e,t){let r=qe(),o=qe();return t.forEach(l=>r=r.add(l)),e.getEntries(s,r).next(l=>{let h=bi();return t.forEach((m,g)=>{const v=l.get(m);g.isFoundDocument()!==v.isFoundDocument()&&(o=o.add(m)),g.isNoDocument()&&g.version.isEqual(we.min())?(e.removeEntry(m,g.readTime),h=h.insert(m,g)):!v.isValidDocument()||g.version.compareTo(v.version)>0||g.version.compareTo(v.version)===0&&v.hasPendingWrites?(e.addEntry(g),h=h.insert(m,g)):fe(Pg,"Ignoring outdated watch update for ",m,". Current version:",v.version," Watch version:",g.version)}),{qs:h,Qs:o}})}function yD(s,e){const t=Re(s);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Ag),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function _D(s,e){const t=Re(s);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.Ti.getTargetData(r,e).next(l=>l?(o=l,se.resolve(o)):t.Ti.allocateTargetId(r).next(h=>(o=new rr(e,h,"TargetPurposeListen",r.currentSequenceNumber),t.Ti.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.xs.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.xs=t.xs.insert(r.targetId,r),t.Os.set(e,r.targetId)),r})}async function Kp(s,e,t){const r=Re(s),o=r.xs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",l,h=>r.persistence.referenceDelegate.removeTarget(h,o))}catch(h){if(!Qo(h))throw h;fe(Pg,`Failed to update sequence numbers for target ${e}: ${h}`)}r.xs=r.xs.remove(e),r.Os.delete(o.target)}function tb(s,e,t){const r=Re(s);let o=we.min(),l=qe();return r.persistence.runTransaction("Execute query","readwrite",h=>function(g,v,_){const A=Re(g),b=A.Os.get(_);return b!==void 0?se.resolve(A.xs.get(b)):A.Ti.getTargetData(v,_)}(r,h,Ls(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(h,m.targetId).next(g=>{l=g})}).next(()=>r.Ms.getDocumentsMatchingQuery(h,e,t?o:we.min(),t?l:qe())).next(m=>(ED(r,oj(e),m),{documents:m,$s:l})))}function ED(s,e,t){let r=s.Ns.get(e)||we.min();t.forEach((o,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)}),s.Ns.set(e,r)}class nb{constructor(){this.activeTargetIds=fj()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class TD{constructor(){this.xo=new nb,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,t,r){this.Oo[e]=t}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new nb,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bD{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sb="ConnectivityMonitor";class ib{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){fe(sb,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){fe(sb,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pd=null;function Yp(){return Pd===null?Pd=function(){return 268435456+Math.round(2147483648*Math.random())}():Pd++,"0x"+Pd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fp="RestConnection",AD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class ND{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Ko=t+"://"+e.host,this.Wo=`projects/${r}/databases/${o}`,this.Go=this.databaseId.database===ah?`project_id=${r}`:`project_id=${r}&database_id=${o}`}zo(e,t,r,o,l){const h=Yp(),m=this.jo(e,t.toUriEncodedString());fe(fp,`Sending RPC '${e}' ${h}:`,m,r);const g={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(g,o,l);const{host:v}=new URL(m),_=Na(v);return this.Jo(e,m,g,r,_).then(A=>(fe(fp,`Received RPC '${e}' ${h}: `,A),A),A=>{throw Vo(fp,`RPC '${e}' ${h} failed with error: `,A,"url: ",m,"request:",r),A})}Yo(e,t,r,o,l,h){return this.zo(e,t,r,o,l)}Ho(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ko}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,l)=>e[l]=o),r&&r.headers.forEach((o,l)=>e[l]=o)}jo(e,t){const r=AD[e];return`${this.Ko}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SD{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ln="WebChannelConnection";class wD extends ND{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,o,l){const h=Yp();return new Promise((m,g)=>{const v=new J0;v.setWithCredentials(!0),v.listenOnce(eA.COMPLETE,()=>{try{switch(v.getLastErrorCode()){case Bd.NO_ERROR:const A=v.getResponseJson();fe(ln,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(A)),m(A);break;case Bd.TIMEOUT:fe(ln,`RPC '${e}' ${h} timed out`),g(new he(te.DEADLINE_EXCEEDED,"Request time out"));break;case Bd.HTTP_ERROR:const b=v.getStatus();if(fe(ln,`RPC '${e}' ${h} failed with status:`,b,"response text:",v.getResponseText()),b>0){let O=v.getResponseJson();Array.isArray(O)&&(O=O[0]);const I=O?.error;if(I&&I.status&&I.message){const U=function($){const W=$.toLowerCase().replace(/_/g,"-");return Object.values(te).indexOf(W)>=0?W:te.UNKNOWN}(I.status);g(new he(U,I.message))}else g(new he(te.UNKNOWN,"Server responded with status "+v.getStatus()))}else g(new he(te.UNAVAILABLE,"Connection failed."));break;default:Te(9055,{h_:e,streamId:h,P_:v.getLastErrorCode(),T_:v.getLastError()})}}finally{fe(ln,`RPC '${e}' ${h} completed.`)}});const _=JSON.stringify(o);fe(ln,`RPC '${e}' ${h} sending request:`,o),v.send(t,"POST",_,r,15)})}I_(e,t,r){const o=Yp(),l=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=sA(),m=nA(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;v!==void 0&&(g.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(g.useFetchStreams=!0),this.Ho(g.initMessageHeaders,t,r),g.encodeInitMessageHeaders=!0;const _=l.join("");fe(ln,`Creating RPC '${e}' stream ${o}: ${_}`,g);const A=h.createWebChannel(_,g);this.E_(A);let b=!1,O=!1;const I=new SD({Zo:C=>{O?fe(ln,`Not sending because RPC '${e}' stream ${o} is closed:`,C):(b||(fe(ln,`Opening RPC '${e}' stream ${o} transport.`),A.open(),b=!0),fe(ln,`RPC '${e}' stream ${o} sending:`,C),A.send(C))},Xo:()=>A.close()}),U=(C,$,W)=>{C.listen($,K=>{try{W(K)}catch(Z){setTimeout(()=>{throw Z},0)}})};return U(A,mc.EventType.OPEN,()=>{O||(fe(ln,`RPC '${e}' stream ${o} transport opened.`),I.__())}),U(A,mc.EventType.CLOSE,()=>{O||(O=!0,fe(ln,`RPC '${e}' stream ${o} transport closed`),I.u_(),this.d_(A))}),U(A,mc.EventType.ERROR,C=>{O||(O=!0,Vo(ln,`RPC '${e}' stream ${o} transport errored. Name:`,C.name,"Message:",C.message),I.u_(new he(te.UNAVAILABLE,"The operation could not be completed")))}),U(A,mc.EventType.MESSAGE,C=>{var $;if(!O){const W=C.data[0];$e(!!W,16349);const K=W,Z=K?.error||(($=K[0])===null||$===void 0?void 0:$.error);if(Z){fe(ln,`RPC '${e}' stream ${o} received error:`,Z);const q=Z.status;let oe=function(R){const j=xt[R];if(j!==void 0)return UA(j)}(q),D=Z.message;oe===void 0&&(oe=te.INTERNAL,D="Unknown error status: "+q+" with message "+Z.message),O=!0,I.u_(new he(oe,D)),A.close()}else fe(ln,`RPC '${e}' stream ${o} received:`,W),I.c_(W)}}),U(m,tA.STAT_EVENT,C=>{C.stat===kp.PROXY?fe(ln,`RPC '${e}' stream ${o} detected buffering proxy`):C.stat===kp.NOPROXY&&fe(ln,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{I.a_()},0),I}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(t=>t===e)}}function mp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kh(s){return new Rj(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kg{constructor(e,t,r=1e3,o=1.5,l=6e4){this.xi=e,this.timerId=t,this.A_=r,this.R_=o,this.V_=l,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();const t=Math.floor(this.m_+this.w_()),r=Math.max(0,Date.now()-this.g_),o=Math.max(0,t-r);o>0&&fe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.m_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,o,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rb="PersistentStream";class eN{constructor(e,t,r,o,l,h,m,g){this.xi=e,this.S_=r,this.D_=o,this.connection=l,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=m,this.listener=g,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new kg(e,t)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(e,t){this.U_(),this.K_(),this.x_.cancel(),this.v_++,e!==4?this.x_.reset():t&&t.code===te.RESOURCE_EXHAUSTED?(Ti(t.toString()),Ti("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):t&&t.code===te.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(t)}W_(){}auth(){this.state=1;const e=this.G_(this.v_),t=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.v_===t&&this.z_(r,o)},r=>{e(()=>{const o=new he(te.UNKNOWN,"Fetching auth token failed: "+r.message);return this.j_(o)})})}z_(e,t){const r=this.G_(this.v_);this.stream=this.H_(e,t),this.stream.e_(()=>{r(()=>this.listener.e_())}),this.stream.n_(()=>{r(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(o=>{r(()=>this.j_(o))}),this.stream.onMessage(o=>{r(()=>++this.M_==1?this.J_(o):this.onNext(o))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(e){return fe(rb,`close with error: ${e}`),this.stream=null,this.close(4,e)}G_(e){return t=>{this.xi.enqueueAndForget(()=>this.v_===e?t():(fe(rb,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class xD extends eN{constructor(e,t,r,o,l,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,h),this.serializer=l}H_(e,t){return this.connection.I_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();const t=Mj(this.serializer,e),r=function(l){if(!("targetChange"in l))return we.min();const h=l.targetChange;return h.targetIds&&h.targetIds.length?we.min():h.readTime?Un(h.readTime):we.min()}(e);return this.listener.Y_(t,r)}Z_(e){const t={};t.database=$p(this.serializer),t.addTarget=function(l,h){let m;const g=h.target;if(m=qp(g)?{documents:kj(l,g)}:{query:Vj(l,g).gt},m.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){m.resumeToken=zA(l,h.resumeToken);const v=Hp(l,h.expectedCount);v!==null&&(m.expectedCount=v)}else if(h.snapshotVersion.compareTo(we.min())>0){m.readTime=uh(l,h.snapshotVersion.toTimestamp());const v=Hp(l,h.expectedCount);v!==null&&(m.expectedCount=v)}return m}(this.serializer,e);const r=Uj(this.serializer,e);r&&(t.labels=r),this.Q_(t)}X_(e){const t={};t.database=$p(this.serializer),t.removeTarget=e,this.Q_(t)}}class ID extends eN{constructor(e,t,r,o,l,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,h),this.serializer=l}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,t){return this.connection.I_("Write",e,t)}J_(e){return $e(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,$e(!e.writeResults||e.writeResults.length===0,55816),this.listener.na()}onNext(e){$e(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();const t=Pj(e.writeResults,e.commitTime),r=Un(e.commitTime);return this.listener.ra(r,t)}ia(){const e={};e.database=$p(this.serializer),this.Q_(e)}ta(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>$A(this.serializer,r))};this.Q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CD{}class RD extends CD{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=o,this.sa=!1}oa(){if(this.sa)throw new he(te.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,t,r,o){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,h])=>this.connection.zo(e,Gp(t,r),o,l,h)).catch(l=>{throw l.name==="FirebaseError"?(l.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new he(te.UNKNOWN,l.toString())})}Yo(e,t,r,o,l){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,m])=>this.connection.Yo(e,Gp(t,r),o,h,m,l)).catch(h=>{throw h.name==="FirebaseError"?(h.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new he(te.UNKNOWN,h.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class jD{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.la("Offline")))}set(e){this.Ta(),this._a=0,e==="Online"&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(Ti(t),this.ua=!1):fe("OnlineStateTracker",t)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ea="RemoteStore";class DD{constructor(e,t,r,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=l,this.Ra.No(h=>{r.enqueueAndForget(async()=>{xa(this)&&(fe(Ea,"Restarting streams for network reachability change."),await async function(g){const v=Re(g);v.da.add(4),await Zc(v),v.Va.set("Unknown"),v.da.delete(4),await Vh(v)}(this))})}),this.Va=new jD(r,o)}}async function Vh(s){if(xa(s))for(const e of s.Aa)await e(!0)}async function Zc(s){for(const e of s.Aa)await e(!1)}function tN(s,e){const t=Re(s);t.Ea.has(e.targetId)||(t.Ea.set(e.targetId,e),Fg(t)?Ug(t):Wo(t).N_()&&Lg(t,e))}function Vg(s,e){const t=Re(s),r=Wo(t);t.Ea.delete(e),r.N_()&&nN(t,e),t.Ea.size===0&&(r.N_()?r.k_():xa(t)&&t.Va.set("Unknown"))}function Lg(s,e){if(s.ma.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(we.min())>0){const t=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Wo(s).Z_(e)}function nN(s,e){s.ma.Ke(e),Wo(s).X_(e)}function Ug(s){s.ma=new wj({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>s.Ea.get(e)||null,Pt:()=>s.datastore.serializer.databaseId}),Wo(s).start(),s.Va.ca()}function Fg(s){return xa(s)&&!Wo(s).O_()&&s.Ea.size>0}function xa(s){return Re(s).da.size===0}function sN(s){s.ma=void 0}async function OD(s){s.Va.set("Online")}async function MD(s){s.Ea.forEach((e,t)=>{Lg(s,e)})}async function PD(s,e){sN(s),Fg(s)?(s.Va.Pa(e),Ug(s)):s.Va.set("Unknown")}async function kD(s,e,t){if(s.Va.set("Online"),e instanceof qA&&e.state===2&&e.cause)try{await async function(o,l){const h=l.cause;for(const m of l.targetIds)o.Ea.has(m)&&(await o.remoteSyncer.rejectListen(m,h),o.Ea.delete(m),o.ma.removeTarget(m))}(s,e)}catch(r){fe(Ea,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await fh(s,r)}else if(e instanceof Kd?s.ma.Xe(e):e instanceof FA?s.ma.ot(e):s.ma.nt(e),!t.isEqual(we.min()))try{const r=await JA(s.localStore);t.compareTo(r)>=0&&await function(l,h){const m=l.ma.It(h);return m.targetChanges.forEach((g,v)=>{if(g.resumeToken.approximateByteSize()>0){const _=l.Ea.get(v);_&&l.Ea.set(v,_.withResumeToken(g.resumeToken,h))}}),m.targetMismatches.forEach((g,v)=>{const _=l.Ea.get(g);if(!_)return;l.Ea.set(g,_.withResumeToken(sn.EMPTY_BYTE_STRING,_.snapshotVersion)),nN(l,g);const A=new rr(_.target,g,v,_.sequenceNumber);Lg(l,A)}),l.remoteSyncer.applyRemoteEvent(m)}(s,t)}catch(r){fe(Ea,"Failed to raise snapshot:",r),await fh(s,r)}}async function fh(s,e,t){if(!Qo(e))throw e;s.da.add(1),await Zc(s),s.Va.set("Offline"),t||(t=()=>JA(s.localStore)),s.asyncQueue.enqueueRetryable(async()=>{fe(Ea,"Retrying IndexedDB access"),await t(),s.da.delete(1),await Vh(s)})}function iN(s,e){return e().catch(t=>fh(s,t,e))}async function Lh(s){const e=Re(s),t=pr(e);let r=e.Ia.length>0?e.Ia[e.Ia.length-1].batchId:Ag;for(;VD(e);)try{const o=await yD(e.localStore,r);if(o===null){e.Ia.length===0&&t.k_();break}r=o.batchId,LD(e,o)}catch(o){await fh(e,o)}rN(e)&&aN(e)}function VD(s){return xa(s)&&s.Ia.length<10}function LD(s,e){s.Ia.push(e);const t=pr(s);t.N_()&&t.ea&&t.ta(e.mutations)}function rN(s){return xa(s)&&!pr(s).O_()&&s.Ia.length>0}function aN(s){pr(s).start()}async function UD(s){pr(s).ia()}async function FD(s){const e=pr(s);for(const t of s.Ia)e.ta(t.mutations)}async function qD(s,e,t){const r=s.Ia.shift(),o=Cg.from(r,e,t);await iN(s,()=>s.remoteSyncer.applySuccessfulWrite(o)),await Lh(s)}async function zD(s,e){e&&pr(s).ea&&await async function(r,o){if(function(h){return LA(h)&&h!==te.ABORTED}(o.code)){const l=r.Ia.shift();pr(r).L_(),await iN(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,o)),await Lh(r)}}(s,e),rN(s)&&aN(s)}async function ab(s,e){const t=Re(s);t.asyncQueue.verifyOperationInProgress(),fe(Ea,"RemoteStore received new credentials");const r=xa(t);t.da.add(3),await Zc(t),r&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.da.delete(3),await Vh(t)}async function BD(s,e){const t=Re(s);e?(t.da.delete(2),await Vh(t)):e||(t.da.add(2),await Zc(t),t.Va.set("Unknown"))}function Wo(s){return s.fa||(s.fa=function(t,r,o){const l=Re(t);return l.oa(),new xD(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)}(s.datastore,s.asyncQueue,{e_:OD.bind(null,s),n_:MD.bind(null,s),i_:PD.bind(null,s),Y_:kD.bind(null,s)}),s.Aa.push(async e=>{e?(s.fa.L_(),Fg(s)?Ug(s):s.Va.set("Unknown")):(await s.fa.stop(),sN(s))})),s.fa}function pr(s){return s.ga||(s.ga=function(t,r,o){const l=Re(t);return l.oa(),new ID(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)}(s.datastore,s.asyncQueue,{e_:()=>Promise.resolve(),n_:UD.bind(null,s),i_:zD.bind(null,s),na:FD.bind(null,s),ra:qD.bind(null,s)}),s.Aa.push(async e=>{e?(s.ga.L_(),await Lh(s)):(await s.ga.stop(),s.Ia.length>0&&(fe(Ea,`Stopping write stream with ${s.Ia.length} pending writes`),s.Ia=[]))})),s.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qg{constructor(e,t,r,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=l,this.deferred=new Vs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(h=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,o,l){const h=Date.now()+r,m=new qg(e,t,h,o,l);return m.start(r),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new he(te.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function zg(s,e){if(Ti("AsyncQueue",`${e}: ${s}`),Qo(s))return new he(te.UNAVAILABLE,`${e}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{static emptySet(e){return new Mo(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||ve.comparator(t.key,r.key):(t,r)=>ve.comparator(t.key,r.key),this.keyedMap=pc(),this.sortedSet=new mt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Mo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=r.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Mo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ob{constructor(){this.pa=new mt(ve.comparator)}track(e){const t=e.doc.key,r=this.pa.get(t);r?e.type!==0&&r.type===3?this.pa=this.pa.insert(t,e):e.type===3&&r.type!==1?this.pa=this.pa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.pa=this.pa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.pa=this.pa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.pa=this.pa.remove(t):e.type===1&&r.type===2?this.pa=this.pa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.pa=this.pa.insert(t,{type:2,doc:e.doc}):Te(63341,{Vt:e,ya:r}):this.pa=this.pa.insert(t,e)}wa(){const e=[];return this.pa.inorderTraversal((t,r)=>{e.push(r)}),e}}class zo{constructor(e,t,r,o,l,h,m,g,v){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=l,this.fromCache=h,this.syncStateChanged=m,this.excludesMetadataChanges=g,this.hasCachedResults=v}static fromInitialDocuments(e,t,r,o,l){const h=[];return t.forEach(m=>{h.push({type:0,doc:m})}),new zo(e,t,Mo.emptySet(t),h,r,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Rh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HD{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}}class GD{constructor(){this.queries=lb(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const o=Re(t),l=o.queries;o.queries=lb(),l.forEach((h,m)=>{for(const g of m.Sa)g.onError(r)})})(this,new he(te.ABORTED,"Firestore shutting down"))}}function lb(){return new wa(s=>SA(s),Rh)}async function Bg(s,e){const t=Re(s);let r=3;const o=e.query;let l=t.queries.get(o);l?!l.Da()&&e.va()&&(r=2):(l=new HD,r=e.va()?0:1);try{switch(r){case 0:l.ba=await t.onListen(o,!0);break;case 1:l.ba=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(h){const m=zg(h,`Initialization of query '${So(e.query)}' failed`);return void e.onError(m)}t.queries.set(o,l),l.Sa.push(e),e.Fa(t.onlineState),l.ba&&e.Ma(l.ba)&&Gg(t)}async function Hg(s,e){const t=Re(s),r=e.query;let o=3;const l=t.queries.get(r);if(l){const h=l.Sa.indexOf(e);h>=0&&(l.Sa.splice(h,1),l.Sa.length===0?o=e.va()?0:1:!l.Da()&&e.va()&&(o=2))}switch(o){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function $D(s,e){const t=Re(s);let r=!1;for(const o of e){const l=o.query,h=t.queries.get(l);if(h){for(const m of h.Sa)m.Ma(o)&&(r=!0);h.ba=o}}r&&Gg(t)}function KD(s,e,t){const r=Re(s),o=r.queries.get(e);if(o)for(const l of o.Sa)l.onError(t);r.queries.delete(e)}function Gg(s){s.Ca.forEach(e=>{e.next()})}var Qp,cb;(cb=Qp||(Qp={})).xa="default",cb.Cache="cache";class $g{constructor(e,t,r){this.query=e,this.Oa=t,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=r||{}}Ma(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)o.type!==3&&r.push(o);e=new zo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Na?this.La(e)&&(this.Oa.next(e),t=!0):this.ka(e,this.onlineState)&&(this.qa(e),t=!0),this.Ba=e,t}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let t=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),t=!0),t}ka(e,t){if(!e.fromCache||!this.va())return!0;const r=t!=="Offline";return(!this.options.Qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}La(e){if(e.docChanges.length>0)return!0;const t=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}qa(e){e=zo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==Qp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oN{constructor(e){this.key=e}}class lN{constructor(e){this.key=e}}class YD{constructor(e,t){this.query=e,this.Ha=t,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=qe(),this.mutatedKeys=qe(),this.Za=wA(e),this.Xa=new Mo(this.Za)}get eu(){return this.Ha}tu(e,t){const r=t?t.nu:new ob,o=t?t.Xa:this.Xa;let l=t?t.mutatedKeys:this.mutatedKeys,h=o,m=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,v=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((_,A)=>{const b=o.get(_),O=jh(this.query,A)?A:null,I=!!b&&this.mutatedKeys.has(b.key),U=!!O&&(O.hasLocalMutations||this.mutatedKeys.has(O.key)&&O.hasCommittedMutations);let C=!1;b&&O?b.data.isEqual(O.data)?I!==U&&(r.track({type:3,doc:O}),C=!0):this.ru(b,O)||(r.track({type:2,doc:O}),C=!0,(g&&this.Za(O,g)>0||v&&this.Za(O,v)<0)&&(m=!0)):!b&&O?(r.track({type:0,doc:O}),C=!0):b&&!O&&(r.track({type:1,doc:b}),C=!0,(g||v)&&(m=!0)),C&&(O?(h=h.add(O),l=U?l.add(_):l.delete(_)):(h=h.delete(_),l=l.delete(_)))}),this.query.limit!==null)for(;h.size>this.query.limit;){const _=this.query.limitType==="F"?h.last():h.first();h=h.delete(_.key),l=l.delete(_.key),r.track({type:1,doc:_})}return{Xa:h,nu:r,Cs:m,mutatedKeys:l}}ru(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,o){const l=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;const h=e.nu.wa();h.sort((_,A)=>function(O,I){const U=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Te(20277,{Vt:C})}};return U(O)-U(I)}(_.type,A.type)||this.Za(_.doc,A.doc)),this.iu(r),o=o!=null&&o;const m=t&&!o?this.su():[],g=this.Ya.size===0&&this.current&&!o?1:0,v=g!==this.Ja;return this.Ja=g,h.length!==0||v?{snapshot:new zo(this.query,e.Xa,l,h,e.mutatedKeys,g===0,v,!1,!!r&&r.resumeToken.approximateByteSize()>0),ou:m}:{ou:m}}Fa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new ob,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}su(){if(!this.current)return[];const e=this.Ya;this.Ya=qe(),this.Xa.forEach(r=>{this._u(r.key)&&(this.Ya=this.Ya.add(r.key))});const t=[];return e.forEach(r=>{this.Ya.has(r)||t.push(new lN(r))}),this.Ya.forEach(r=>{e.has(r)||t.push(new oN(r))}),t}au(e){this.Ha=e.$s,this.Ya=qe();const t=this.tu(e.documents);return this.applyChanges(t,!0)}uu(){return zo.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const Kg="SyncEngine";class QD{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class XD{constructor(e){this.key=e,this.cu=!1}}class WD{constructor(e,t,r,o,l,h){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=h,this.lu={},this.hu=new wa(m=>SA(m),Rh),this.Pu=new Map,this.Tu=new Set,this.Iu=new mt(ve.comparator),this.Eu=new Map,this.du=new Dg,this.Au={},this.Ru=new Map,this.Vu=qo.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function ZD(s,e,t=!0){const r=mN(s);let o;const l=r.hu.get(e);return l?(r.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.uu()):o=await cN(r,e,t,!0),o}async function JD(s,e){const t=mN(s);await cN(t,e,!0,!1)}async function cN(s,e,t,r){const o=await _D(s.localStore,Ls(e)),l=o.targetId,h=s.sharedClientState.addLocalQueryTarget(l,t);let m;return r&&(m=await eO(s,e,l,h==="current",o.resumeToken)),s.isPrimaryClient&&t&&tN(s.remoteStore,o),m}async function eO(s,e,t,r,o){s.fu=(A,b,O)=>async function(U,C,$,W){let K=C.view.tu($);K.Cs&&(K=await tb(U.localStore,C.query,!1).then(({documents:D})=>C.view.tu(D,K)));const Z=W&&W.targetChanges.get(C.targetId),q=W&&W.targetMismatches.get(C.targetId)!=null,oe=C.view.applyChanges(K,U.isPrimaryClient,Z,q);return db(U,C.targetId,oe.ou),oe.snapshot}(s,A,b,O);const l=await tb(s.localStore,e,!0),h=new YD(e,l.$s),m=h.tu(l.documents),g=Wc.createSynthesizedTargetChangeForCurrentChange(t,r&&s.onlineState!=="Offline",o),v=h.applyChanges(m,s.isPrimaryClient,g);db(s,t,v.ou);const _=new QD(e,t,h);return s.hu.set(e,_),s.Pu.has(t)?s.Pu.get(t).push(e):s.Pu.set(t,[e]),v.snapshot}async function tO(s,e,t){const r=Re(s),o=r.hu.get(e),l=r.Pu.get(o.targetId);if(l.length>1)return r.Pu.set(o.targetId,l.filter(h=>!Rh(h,e))),void r.hu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await Kp(r.localStore,o.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(o.targetId),t&&Vg(r.remoteStore,o.targetId),Xp(r,o.targetId)}).catch(Yo)):(Xp(r,o.targetId),await Kp(r.localStore,o.targetId,!0))}async function nO(s,e){const t=Re(s),r=t.hu.get(e),o=t.Pu.get(r.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Vg(t.remoteStore,r.targetId))}async function sO(s,e,t){const r=uO(s);try{const o=await function(h,m){const g=Re(h),v=Pt.now(),_=m.reduce((O,I)=>O.add(I.key),qe());let A,b;return g.persistence.runTransaction("Locally write mutations","readwrite",O=>{let I=bi(),U=qe();return g.Bs.getEntries(O,_).next(C=>{I=C,I.forEach(($,W)=>{W.isValidDocument()||(U=U.add($))})}).next(()=>g.localDocuments.getOverlayedDocuments(O,I)).next(C=>{A=C;const $=[];for(const W of m){const K=Tj(W,A.get(W.key).overlayedDocument);K!=null&&$.push(new Sr(W.key,K,vA(K.value.mapValue),tn.exists(!0)))}return g.mutationQueue.addMutationBatch(O,v,$,m)}).next(C=>{b=C;const $=C.applyToLocalDocumentSet(A,U);return g.documentOverlayCache.saveOverlays(O,C.batchId,$)})}).then(()=>({batchId:b.batchId,changes:IA(A)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(h,m,g){let v=h.Au[h.currentUser.toKey()];v||(v=new mt(Me)),v=v.insert(m,g),h.Au[h.currentUser.toKey()]=v}(r,o.batchId,t),await Jc(r,o.changes),await Lh(r.remoteStore)}catch(o){const l=zg(o,"Failed to persist write");t.reject(l)}}async function uN(s,e){const t=Re(s);try{const r=await gD(t.localStore,e);e.targetChanges.forEach((o,l)=>{const h=t.Eu.get(l);h&&($e(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.cu=!0:o.modifiedDocuments.size>0?$e(h.cu,14607):o.removedDocuments.size>0&&($e(h.cu,42227),h.cu=!1))}),await Jc(t,r,e)}catch(r){await Yo(r)}}function ub(s,e,t){const r=Re(s);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const o=[];r.hu.forEach((l,h)=>{const m=h.view.Fa(e);m.snapshot&&o.push(m.snapshot)}),function(h,m){const g=Re(h);g.onlineState=m;let v=!1;g.queries.forEach((_,A)=>{for(const b of A.Sa)b.Fa(m)&&(v=!0)}),v&&Gg(g)}(r.eventManager,e),o.length&&r.lu.Y_(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function iO(s,e,t){const r=Re(s);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.Eu.get(e),l=o&&o.key;if(l){let h=new mt(ve.comparator);h=h.insert(l,Gt.newNoDocument(l,we.min()));const m=qe().add(l),g=new Ph(we.min(),new Map,new mt(Me),h,m);await uN(r,g),r.Iu=r.Iu.remove(l),r.Eu.delete(e),Yg(r)}else await Kp(r.localStore,e,!1).then(()=>Xp(r,e,t)).catch(Yo)}async function rO(s,e){const t=Re(s),r=e.batch.batchId;try{const o=await pD(t.localStore,e);hN(t,r,null),dN(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Jc(t,o)}catch(o){await Yo(o)}}async function aO(s,e,t){const r=Re(s);try{const o=await function(h,m){const g=Re(h);return g.persistence.runTransaction("Reject batch","readwrite-primary",v=>{let _;return g.mutationQueue.lookupMutationBatch(v,m).next(A=>($e(A!==null,37113),_=A.keys(),g.mutationQueue.removeMutationBatch(v,A))).next(()=>g.mutationQueue.performConsistencyCheck(v)).next(()=>g.documentOverlayCache.removeOverlaysForBatchId(v,_,m)).next(()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,_)).next(()=>g.localDocuments.getDocuments(v,_))})}(r.localStore,e);hN(r,e,t),dN(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Jc(r,o)}catch(o){await Yo(o)}}function dN(s,e){(s.Ru.get(e)||[]).forEach(t=>{t.resolve()}),s.Ru.delete(e)}function hN(s,e,t){const r=Re(s);let o=r.Au[r.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),r.Au[r.currentUser.toKey()]=o}}function Xp(s,e,t=null){s.sharedClientState.removeLocalQueryTarget(e);for(const r of s.Pu.get(e))s.hu.delete(r),t&&s.lu.gu(r,t);s.Pu.delete(e),s.isPrimaryClient&&s.du.Hr(e).forEach(r=>{s.du.containsKey(r)||fN(s,r)})}function fN(s,e){s.Tu.delete(e.path.canonicalString());const t=s.Iu.get(e);t!==null&&(Vg(s.remoteStore,t),s.Iu=s.Iu.remove(e),s.Eu.delete(t),Yg(s))}function db(s,e,t){for(const r of t)r instanceof oN?(s.du.addReference(r.key,e),oO(s,r)):r instanceof lN?(fe(Kg,"Document no longer in limbo: "+r.key),s.du.removeReference(r.key,e),s.du.containsKey(r.key)||fN(s,r.key)):Te(19791,{pu:r})}function oO(s,e){const t=e.key,r=t.path.canonicalString();s.Iu.get(t)||s.Tu.has(r)||(fe(Kg,"New document in limbo: "+t),s.Tu.add(r),Yg(s))}function Yg(s){for(;s.Tu.size>0&&s.Iu.size<s.maxConcurrentLimboResolutions;){const e=s.Tu.values().next().value;s.Tu.delete(e);const t=new ve(it.fromString(e)),r=s.Vu.next();s.Eu.set(r,new XD(t)),s.Iu=s.Iu.insert(t,r),tN(s.remoteStore,new rr(Ls(Ch(t.path)),r,"TargetPurposeLimboResolution",xh.le))}}async function Jc(s,e,t){const r=Re(s),o=[],l=[],h=[];r.hu.isEmpty()||(r.hu.forEach((m,g)=>{h.push(r.fu(g,e,t).then(v=>{var _;if((v||t)&&r.isPrimaryClient){const A=v?!v.fromCache:(_=t?.targetChanges.get(g.targetId))===null||_===void 0?void 0:_.current;r.sharedClientState.updateQueryState(g.targetId,A?"current":"not-current")}if(v){o.push(v);const A=Mg.Rs(g.targetId,v);l.push(A)}}))}),await Promise.all(h),r.lu.Y_(o),await async function(g,v){const _=Re(g);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",A=>se.forEach(v,b=>se.forEach(b.ds,O=>_.persistence.referenceDelegate.addReference(A,b.targetId,O)).next(()=>se.forEach(b.As,O=>_.persistence.referenceDelegate.removeReference(A,b.targetId,O)))))}catch(A){if(!Qo(A))throw A;fe(Pg,"Failed to update sequence numbers: "+A)}for(const A of v){const b=A.targetId;if(!A.fromCache){const O=_.xs.get(b),I=O.snapshotVersion,U=O.withLastLimboFreeSnapshotVersion(I);_.xs=_.xs.insert(b,U)}}}(r.localStore,l))}async function lO(s,e){const t=Re(s);if(!t.currentUser.isEqual(e)){fe(Kg,"User change. New user:",e.toKey());const r=await ZA(t.localStore,e);t.currentUser=e,function(l,h){l.Ru.forEach(m=>{m.forEach(g=>{g.reject(new he(te.CANCELLED,h))})}),l.Ru.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Jc(t,r.ks)}}function cO(s,e){const t=Re(s),r=t.Eu.get(e);if(r&&r.cu)return qe().add(r.key);{let o=qe();const l=t.Pu.get(e);if(!l)return o;for(const h of l){const m=t.hu.get(h);o=o.unionWith(m.view.eu)}return o}}function mN(s){const e=Re(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=uN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=cO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=iO.bind(null,e),e.lu.Y_=$D.bind(null,e.eventManager),e.lu.gu=KD.bind(null,e.eventManager),e}function uO(s){const e=Re(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=rO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=aO.bind(null,e),e}class mh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=kh(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Su(e),await this.persistence.start(),this.localStore=this.Du(e),this.gcScheduler=this.vu(e,this.localStore),this.indexBackfillerScheduler=this.Cu(e,this.localStore)}vu(e,t){return null}Cu(e,t){return null}Du(e){return mD(this.persistence,new dD,e.initialUser,this.serializer)}Su(e){return new WA(Og.fi,this.serializer)}bu(e){return new TD}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}mh.provider={build:()=>new mh};class dO extends mh{constructor(e){super(),this.cacheSizeBytes=e}vu(e,t){$e(this.persistence.referenceDelegate instanceof hh,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new Xj(r,e.asyncQueue,t)}Su(e){const t=this.cacheSizeBytes!==void 0?An.withCacheSize(this.cacheSizeBytes):An.DEFAULT;return new WA(r=>hh.fi(r,t),this.serializer)}}class Wp{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>ub(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=lO.bind(null,this.syncEngine),await BD(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new GD}()}createDatastore(e){const t=kh(e.databaseInfo.databaseId),r=function(l){return new wD(l)}(e.databaseInfo);return function(l,h,m,g){return new RD(l,h,m,g)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,o,l,h,m){return new DD(r,o,l,h,m)}(this.localStore,this.datastore,e.asyncQueue,t=>ub(this.syncEngine,t,0),function(){return ib.C()?new ib:new bD}())}createSyncEngine(e,t){return function(o,l,h,m,g,v,_){const A=new WD(o,l,h,m,g,v);return _&&(A.mu=!0),A}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(o){const l=Re(o);fe(Ea,"RemoteStore shutting down."),l.da.add(5),await Zc(l),l.Ra.shutdown(),l.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Wp.provider={build:()=>new Wp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):Ti("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hO{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new he(te.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(o,l){const h=Re(o),m={documents:l.map(A=>dh(h.serializer,A))},g=await h.Yo("BatchGetDocuments",h.serializer.databaseId,it.emptyPath(),m,l.length),v=new Map;g.forEach(A=>{const b=Oj(h.serializer,A);v.set(b.key.toString(),b)});const _=[];return l.forEach(A=>{const b=v.get(A.toString());$e(!!b,55234,{key:A}),_.push(b)}),_}(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Mh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{const o=ve.fromPath(r);this.mutations.push(new VA(o,this.precondition(o)))}),await async function(r,o){const l=Re(r),h={writes:o.map(m=>$A(l.serializer,m))};await l.zo("Commit",l.serializer.databaseId,it.emptyPath(),h)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Te(50498,{Uu:e.constructor.name});t=we.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new he(te.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(we.min())?tn.exists(!1):tn.updateTime(t):tn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(we.min()))throw new he(te.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return tn.updateTime(t)}return tn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fO{constructor(e,t,r,o,l){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=o,this.deferred=l,this.Ku=r.maxAttempts,this.x_=new kg(this.asyncQueue,"transaction_retry")}Wu(){this.Ku-=1,this.Gu()}Gu(){this.x_.y_(async()=>{const e=new hO(this.datastore),t=this.zu(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(o=>{this.ju(o)}))}).catch(r=>{this.ju(r)})})}zu(e){try{const t=this.updateFunction(e);return!Qc(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}ju(e){this.Ku>0&&this.Hu(e)?(this.Ku-=1,this.asyncQueue.enqueueAndForget(()=>(this.Gu(),Promise.resolve()))):this.deferred.reject(e)}Hu(e){if(e.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!LA(t)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gr="FirestoreClient";class mO{constructor(e,t,r,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=cn.UNAUTHENTICATED,this.clientId=oA.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(r,async h=>{fe(gr,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h}),this.appCheckCredentials.start(r,h=>(fe(gr,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Vs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=zg(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function pp(s,e){s.asyncQueue.verifyOperationInProgress(),fe(gr,"Initializing OfflineComponentProvider");const t=s.configuration;await e.initialize(t);let r=t.initialUser;s.setCredentialChangeListener(async o=>{r.isEqual(o)||(await ZA(e.localStore,o),r=o)}),e.persistence.setDatabaseDeletedListener(()=>s.terminate()),s._offlineComponents=e}async function hb(s,e){s.asyncQueue.verifyOperationInProgress();const t=await pO(s);fe(gr,"Initializing OnlineComponentProvider"),await e.initialize(t,s.configuration),s.setCredentialChangeListener(r=>ab(e.remoteStore,r)),s.setAppCheckTokenChangeListener((r,o)=>ab(e.remoteStore,o)),s._onlineComponents=e}async function pO(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){fe(gr,"Using user provided OfflineComponentProvider");try{await pp(s,s._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(o){return o.name==="FirebaseError"?o.code===te.FAILED_PRECONDITION||o.code===te.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(t))throw t;Vo("Error using user provided cache. Falling back to memory cache: "+t),await pp(s,new mh)}}else fe(gr,"Using default OfflineComponentProvider"),await pp(s,new dO(void 0));return s._offlineComponents}async function Xg(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(fe(gr,"Using user provided OnlineComponentProvider"),await hb(s,s._uninitializedComponentsProvider._online)):(fe(gr,"Using default OnlineComponentProvider"),await hb(s,new Wp))),s._onlineComponents}function gO(s){return Xg(s).then(e=>e.syncEngine)}function vO(s){return Xg(s).then(e=>e.datastore)}async function ph(s){const e=await Xg(s),t=e.eventManager;return t.onListen=ZD.bind(null,e.syncEngine),t.onUnlisten=tO.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=JD.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=nO.bind(null,e.syncEngine),t}function yO(s,e,t={}){const r=new Vs;return s.asyncQueue.enqueueAndForget(async()=>function(l,h,m,g,v){const _=new Qg({next:b=>{_.xu(),h.enqueueAndForget(()=>Hg(l,A));const O=b.docs.has(m);!O&&b.fromCache?v.reject(new he(te.UNAVAILABLE,"Failed to get document because the client is offline.")):O&&b.fromCache&&g&&g.source==="server"?v.reject(new he(te.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(b)},error:b=>v.reject(b)}),A=new $g(Ch(m.path),_,{includeMetadataChanges:!0,Qa:!0});return Bg(l,A)}(await ph(s),s.asyncQueue,e,t,r)),r.promise}function _O(s,e,t={}){const r=new Vs;return s.asyncQueue.enqueueAndForget(async()=>function(l,h,m,g,v){const _=new Qg({next:b=>{_.xu(),h.enqueueAndForget(()=>Hg(l,A)),b.fromCache&&g.source==="server"?v.reject(new he(te.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(b)},error:b=>v.reject(b)}),A=new $g(m,_,{includeMetadataChanges:!0,Qa:!0});return Bg(l,A)}(await ph(s),s.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pN(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fb=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gN(s,e,t){if(!t)throw new he(te.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function EO(s,e,t,r){if(e===!0&&r===!0)throw new he(te.INVALID_ARGUMENT,`${s} and ${t} cannot be used together.`)}function mb(s){if(!ve.isDocumentKey(s))throw new he(te.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function pb(s){if(ve.isDocumentKey(s))throw new he(te.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function Uh(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":Te(12329,{type:typeof s})}function _n(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new he(te.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Uh(s);throw new he(te.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vN="firestore.googleapis.com",gb=!0;class vb{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new he(te.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=vN,this.ssl=gb}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:gb;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=XA;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Yj)throw new he(te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}EO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=pN((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new he(te.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new he(te.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new he(te.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,o){return r.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Fh{constructor(e,t,r,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new vb({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new he(te.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new he(te.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new vb(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new w1;switch(r.type){case"firstParty":return new R1(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new he(te.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=fb.get(t);r&&(fe("ComponentProvider","Removing Datastore"),fb.delete(t),r.terminate())}(this),Promise.resolve()}}function TO(s,e,t,r={}){var o;s=_n(s,Fh);const l=Na(e),h=s._getSettings(),m=Object.assign(Object.assign({},h),{emulatorOptions:s._getEmulatorOptions()}),g=`${e}:${t}`;l&&(ag(`https://${g}`),og("Firestore",!0)),h.host!==vN&&h.host!==g&&Vo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const v=Object.assign(Object.assign({},h),{host:g,ssl:l,emulatorOptions:r});if(!ur(v,m)&&(s._setSettings(v),r.mockUserToken)){let _,A;if(typeof r.mockUserToken=="string")_=r.mockUserToken,A=cn.MOCK_USER;else{_=u0(r.mockUserToken,(o=s._app)===null||o===void 0?void 0:o.options.projectId);const b=r.mockUserToken.sub||r.mockUserToken.user_id;if(!b)throw new he(te.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");A=new cn(b)}s._authCredentials=new x1(new rA(_,A))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new wr(this.firestore,e,this._query)}}class nn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new cr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new nn(this.firestore,e,this._key)}}class cr extends wr{constructor(e,t,r){super(e,t,Ch(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new nn(this.firestore,null,new ve(e))}withConverter(e){return new cr(this.firestore,e,this._path)}}function wn(s,e,...t){if(s=lt(s),gN("collection","path",e),s instanceof Fh){const r=it.fromString(e,...t);return pb(r),new cr(s,null,r)}{if(!(s instanceof nn||s instanceof cr))throw new he(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(it.fromString(e,...t));return pb(r),new cr(s.firestore,null,r)}}function xn(s,e,...t){if(s=lt(s),arguments.length===1&&(e=oA.newId()),gN("doc","path",e),s instanceof Fh){const r=it.fromString(e,...t);return mb(r),new nn(s,null,new ve(r))}{if(!(s instanceof nn||s instanceof cr))throw new he(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(it.fromString(e,...t));return mb(r),new nn(s.firestore,s instanceof cr?s.converter:null,new ve(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yb="AsyncQueue";class _b{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new kg(this,"async_queue_retry"),this.rc=()=>{const r=mp();r&&fe(yb,"Visibility state changed to "+r.visibilityState),this.x_.b_()},this.sc=e;const t=mp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;const t=mp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});const t=new Vs;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!Qo(e))throw e;fe(yb,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(e){const t=this.sc.then(()=>(this.ec=!0,e().catch(r=>{throw this.Xu=r,this.ec=!1,Ti("INTERNAL UNHANDLED ERROR: ",Eb(r)),r}).then(r=>(this.ec=!1,r))));return this.sc=t,t}enqueueAfterDelay(e,t,r){this.oc(),this.nc.indexOf(e)>-1&&(t=0);const o=qg.createAndSchedule(this,e,t,r,l=>this.uc(l));return this.Zu.push(o),o}oc(){this.Xu&&Te(47125,{cc:Eb(this.Xu)})}verifyOperationInProgress(){}async lc(){let e;do e=this.sc,await e;while(e!==this.sc)}hc(e){for(const t of this.Zu)if(t.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Zu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){const t=this.Zu.indexOf(e);this.Zu.splice(t,1)}}function Eb(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tb(s){return function(t,r){if(typeof t!="object"||t===null)return!1;const o=t;for(const l of r)if(l in o&&typeof o[l]=="function")return!0;return!1}(s,["next","error","complete"])}class Fs extends Fh{constructor(e,t,r,o){super(e,t,r,o),this.type="firestore",this._queue=new _b,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new _b(e),this._firestoreClient=void 0,await e}}}function bO(s,e){const t=typeof s=="object"?s:Hc(),r=typeof s=="string"?s:ah,o=Ai(t,"firestore").getImmediate({identifier:r});if(!o._initialized){const l=o0("firestore");l&&TO(o,...l)}return o}function eu(s){if(s._terminated)throw new he(te.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||AO(s),s._firestoreClient}function AO(s){var e,t,r;const o=s._freezeSettings(),l=function(m,g,v,_){return new G1(m,g,v,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,pN(_.experimentalLongPollingOptions),_.useFetchStreams,_.isUsingEmulator)}(s._databaseId,((e=s._app)===null||e===void 0?void 0:e.options.appId)||"",s._persistenceKey,o);s._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=o.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(s._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),s._firestoreClient=new mO(s._authCredentials,s._appCheckCredentials,s._queue,l,s._componentsProvider&&function(m){const g=m?._online.build();return{_offline:m?._offline.build(g),_online:g}}(s._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ta(sn.fromBase64String(e))}catch(t){throw new he(te.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ta(sn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new he(te.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new en(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wg{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new he(te.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new he(te.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Me(this._lat,e._lat)||Me(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zg{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,o){if(r.length!==o.length)return!1;for(let l=0;l<r.length;++l)if(r[l]!==o[l])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NO=/^__.*__$/;class SO{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Sr(e,this.data,this.fieldMask,t,this.fieldTransforms):new Xc(e,this.data,t,this.fieldTransforms)}}class yN{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Sr(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function _N(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Te(40011,{Ic:s})}}class Jg{constructor(e,t,r,o,l,h){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=o,l===void 0&&this.Ec(),this.fieldTransforms=l||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new Jg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.dc({path:r,Rc:!1});return o.Vc(e),o}mc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.dc({path:r,Rc:!1});return o.Ec(),o}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return gh(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(e.length===0)throw this.gc("Document fields must not be empty");if(_N(this.Ic)&&NO.test(e))throw this.gc('Document fields cannot begin and end with "__"')}}class wO{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||kh(e)}bc(e,t,r,o=!1){return new Jg({Ic:e,methodName:t,wc:r,path:en.emptyPath(),Rc:!1,yc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function nu(s){const e=s._freezeSettings(),t=kh(s._databaseId);return new wO(s._databaseId,!!e.ignoreUndefinedProperties,t)}function ev(s,e,t,r,o,l={}){const h=s.bc(l.merge||l.mergeFields?2:0,e,t,o);nv("Data must be an object, but it was:",h,r);const m=bN(r,h);let g,v;if(l.merge)g=new Vn(h.fieldMask),v=h.fieldTransforms;else if(l.mergeFields){const _=[];for(const A of l.mergeFields){const b=Zp(e,A,t);if(!h.contains(b))throw new he(te.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);NN(_,b)||_.push(b)}g=new Vn(_),v=h.fieldTransforms.filter(A=>g.covers(A.field))}else g=null,v=h.fieldTransforms;return new SO(new yn(m),g,v)}class zh extends qh{_toFieldTransform(e){if(e.Ic!==2)throw e.Ic===1?e.gc(`${this._methodName}() can only appear at the top level of your update data`):e.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof zh}}class tv extends qh{_toFieldTransform(e){return new vj(e.path,new Lc)}isEqual(e){return e instanceof tv}}function EN(s,e,t,r){const o=s.bc(1,e,t);nv("Data must be an object, but it was:",o,r);const l=[],h=yn.empty();Nr(r,(g,v)=>{const _=sv(e,g,t);v=lt(v);const A=o.mc(_);if(v instanceof zh)l.push(_);else{const b=su(v,A);b!=null&&(l.push(_),h.set(_,b))}});const m=new Vn(l);return new yN(h,m,o.fieldTransforms)}function TN(s,e,t,r,o,l){const h=s.bc(1,e,t),m=[Zp(e,r,t)],g=[o];if(l.length%2!=0)throw new he(te.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let b=0;b<l.length;b+=2)m.push(Zp(e,l[b])),g.push(l[b+1]);const v=[],_=yn.empty();for(let b=m.length-1;b>=0;--b)if(!NN(v,m[b])){const O=m[b];let I=g[b];I=lt(I);const U=h.mc(O);if(I instanceof zh)v.push(O);else{const C=su(I,U);C!=null&&(v.push(O),_.set(O,C))}}const A=new Vn(v);return new yN(_,A,h.fieldTransforms)}function xO(s,e,t,r=!1){return su(t,s.bc(r?4:3,e))}function su(s,e){if(AN(s=lt(s)))return nv("Unsupported field value:",e,s),bN(s,e);if(s instanceof qh)return function(r,o){if(!_N(o.Ic))throw o.gc(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.gc(`${r._methodName}() is not currently supported inside arrays`);const l=r._toFieldTransform(o);l&&o.fieldTransforms.push(l)}(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.Rc&&e.Ic!==4)throw e.gc("Nested arrays are not supported");return function(r,o){const l=[];let h=0;for(const m of r){let g=su(m,o.fc(h));g==null&&(g={nullValue:"NULL_VALUE"}),l.push(g),h++}return{arrayValue:{values:l}}}(s,e)}return function(r,o){if((r=lt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return mj(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const l=Pt.fromDate(r);return{timestampValue:uh(o.serializer,l)}}if(r instanceof Pt){const l=new Pt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:uh(o.serializer,l)}}if(r instanceof Wg)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ta)return{bytesValue:zA(o.serializer,r._byteString)};if(r instanceof nn){const l=o.databaseId,h=r.firestore._databaseId;if(!h.isEqual(l))throw o.gc(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:jg(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof Zg)return function(h,m){return{mapValue:{fields:{[pA]:{stringValue:gA},[oh]:{arrayValue:{values:h.toArray().map(v=>{if(typeof v!="number")throw m.gc("VectorValues must only contain numeric values.");return Ig(m.serializer,v)})}}}}}}(r,o);throw o.gc(`Unsupported field value: ${Uh(r)}`)}(s,e)}function bN(s,e){const t={};return cA(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Nr(s,(r,o)=>{const l=su(o,e.Ac(r));l!=null&&(t[r]=l)}),{mapValue:{fields:t}}}function AN(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof Pt||s instanceof Wg||s instanceof Ta||s instanceof nn||s instanceof qh||s instanceof Zg)}function nv(s,e,t){if(!AN(t)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(t)){const r=Uh(t);throw r==="an object"?e.gc(s+" a custom object"):e.gc(s+" "+r)}}function Zp(s,e,t){if((e=lt(e))instanceof tu)return e._internalPath;if(typeof e=="string")return sv(s,e);throw gh("Field path arguments must be of type string or ",s,!1,void 0,t)}const IO=new RegExp("[~\\*/\\[\\]]");function sv(s,e,t){if(e.search(IO)>=0)throw gh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,t);try{return new tu(...e.split("."))._internalPath}catch{throw gh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,t)}}function gh(s,e,t,r,o){const l=r&&!r.isEmpty(),h=o!==void 0;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let g="";return(l||h)&&(g+=" (found",l&&(g+=` in field ${r}`),h&&(g+=` in document ${o}`),g+=")"),new he(te.INVALID_ARGUMENT,m+s+g)}function NN(s,e){return s.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vh{constructor(e,t,r,o,l){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new nn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new CO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Bh("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class CO extends vh{data(){return super.data()}}function Bh(s,e){return typeof e=="string"?sv(s,e):e instanceof tu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SN(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new he(te.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class iv{}class wN extends iv{}function ft(s,e,...t){let r=[];e instanceof iv&&r.push(e),r=r.concat(t),function(l){const h=l.filter(g=>g instanceof rv).length,m=l.filter(g=>g instanceof Hh).length;if(h>1||h>0&&m>0)throw new he(te.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const o of r)s=o._apply(s);return s}class Hh extends wN{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Hh(e,t,r)}_apply(e){const t=this._parse(e);return xN(e._query,t),new wr(e.firestore,e.converter,zp(e._query,t))}_parse(e){const t=nu(e.firestore);return function(l,h,m,g,v,_,A){let b;if(v.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new he(te.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){Ab(A,_);const I=[];for(const U of A)I.push(bb(g,l,U));b={arrayValue:{values:I}}}else b=bb(g,l,A)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||Ab(A,_),b=xO(m,h,A,_==="in"||_==="not-in");return It.create(v,_,b)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Mt(s,e,t){const r=e,o=Bh("where",s);return Hh._create(o,r,t)}class rv extends iv{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new rv(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:vs.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(o,l){let h=o;const m=l.getFlattenedFilters();for(const g of m)xN(h,g),h=zp(h,g)}(e._query,t),new wr(e.firestore,e.converter,zp(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class av extends wN{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new av(e,t)}_apply(e){const t=function(o,l,h){if(o.startAt!==null)throw new he(te.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new he(te.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Vc(l,h)}(e._query,this._field,this._direction);return new wr(e.firestore,e.converter,function(o,l){const h=o.explicitOrderBy.concat([l]);return new Xo(o.path,o.collectionGroup,h,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(e._query,t))}}function Zo(s,e="asc"){const t=e,r=Bh("orderBy",s);return av._create(r,t)}function bb(s,e,t){if(typeof(t=lt(t))=="string"){if(t==="")throw new he(te.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!NA(e)&&t.indexOf("/")!==-1)throw new he(te.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(it.fromString(t));if(!ve.isDocumentKey(r))throw new he(te.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return kT(s,new ve(r))}if(t instanceof nn)return kT(s,t._key);throw new he(te.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Uh(t)}.`)}function Ab(s,e){if(!Array.isArray(s)||s.length===0)throw new he(te.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function xN(s,e){const t=function(o,l){for(const h of o)for(const m of h.getFlattenedFilters())if(l.indexOf(m.op)>=0)return m.op;return null}(s.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new he(te.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new he(te.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class IN{convertValue(e,t="none"){switch(mr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return bt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(fr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Te(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Nr(e,(o,l)=>{r[o]=this.convertValue(l,t)}),r}convertVectorValue(e){var t,r,o;const l=(o=(r=(t=e.fields)===null||t===void 0?void 0:t[oh].arrayValue)===null||r===void 0?void 0:r.values)===null||o===void 0?void 0:o.map(h=>bt(h.doubleValue));return new Zg(l)}convertGeoPoint(e){return new Wg(bt(e.latitude),bt(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Ih(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Mc(e));default:return null}}convertTimestamp(e){const t=hr(e);return new Pt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=it.fromString(e);$e(QA(r),9688,{name:e});const o=new Pc(r.get(1),r.get(3)),l=new ve(r.popFirst(5));return o.isEqual(t)||Ti(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ov(s,e,t){let r;return r=s?t&&(t.merge||t.mergeFields)?s.toFirestore(e,t):s.toFirestore(e):e,r}class RO extends IN{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ta(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new nn(this.firestore,null,t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class lv extends vh{constructor(e,t,r,o,l,h){super(e,t,r,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Yd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Bh("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Yd extends lv{data(e={}){return super.data(e)}}class CN{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Io(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Yd(this._firestore,this._userDataWriter,r.key,r,new Io(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new he(te.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,l){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map(m=>{const g=new Yd(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Io(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:g,oldIndex:-1,newIndex:h++}})}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(m=>l||m.type!==3).map(m=>{const g=new Yd(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Io(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let v=-1,_=-1;return m.type!==0&&(v=h.indexOf(m.doc.key),h=h.delete(m.doc.key)),m.type!==1&&(h=h.add(m.doc),_=h.indexOf(m.doc.key)),{type:jO(m.type),doc:g,oldIndex:v,newIndex:_}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function jO(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Te(61501,{type:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jo(s){s=_n(s,nn);const e=_n(s.firestore,Fs);return yO(eu(e),s._key).then(t=>RN(e,s,t))}class Gh extends IN{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ta(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new nn(this.firestore,null,t)}}function xr(s){s=_n(s,wr);const e=_n(s.firestore,Fs),t=eu(e),r=new Gh(e);return SN(s._query),_O(t,s._query).then(o=>new CN(e,r,s,o))}function cv(s,e,t){s=_n(s,nn);const r=_n(s.firestore,Fs),o=ov(s.converter,e,t);return Kh(r,[ev(nu(r),"setDoc",s._key,o,s.converter!==null,t).toMutation(s._key,tn.none())])}function $h(s,e,t,...r){s=_n(s,nn);const o=_n(s.firestore,Fs),l=nu(o);let h;return h=typeof(e=lt(e))=="string"||e instanceof tu?TN(l,"updateDoc",s._key,e,t,r):EN(l,"updateDoc",s._key,e),Kh(o,[h.toMutation(s._key,tn.exists(!0))])}function DO(s){return Kh(_n(s.firestore,Fs),[new Mh(s._key,tn.none())])}function OO(s,e){const t=_n(s.firestore,Fs),r=xn(s),o=ov(s.converter,e);return Kh(t,[ev(nu(s.firestore),"addDoc",r._key,o,s.converter!==null,{}).toMutation(r._key,tn.exists(!1))]).then(()=>r)}function uv(s,...e){var t,r,o;s=lt(s);let l={includeMetadataChanges:!1,source:"default"},h=0;typeof e[h]!="object"||Tb(e[h])||(l=e[h],h++);const m={includeMetadataChanges:l.includeMetadataChanges,source:l.source};if(Tb(e[h])){const A=e[h];e[h]=(t=A.next)===null||t===void 0?void 0:t.bind(A),e[h+1]=(r=A.error)===null||r===void 0?void 0:r.bind(A),e[h+2]=(o=A.complete)===null||o===void 0?void 0:o.bind(A)}let g,v,_;if(s instanceof nn)v=_n(s.firestore,Fs),_=Ch(s._key.path),g={next:A=>{e[h]&&e[h](RN(v,s,A))},error:e[h+1],complete:e[h+2]};else{const A=_n(s,wr);v=_n(A.firestore,Fs),_=A._query;const b=new Gh(v);g={next:O=>{e[h]&&e[h](new CN(v,b,A,O))},error:e[h+1],complete:e[h+2]},SN(s._query)}return function(b,O,I,U){const C=new Qg(U),$=new $g(O,C,I);return b.asyncQueue.enqueueAndForget(async()=>Bg(await ph(b),$)),()=>{C.xu(),b.asyncQueue.enqueueAndForget(async()=>Hg(await ph(b),$))}}(eu(v),_,m,g)}function Kh(s,e){return function(r,o){const l=new Vs;return r.asyncQueue.enqueueAndForget(async()=>sO(await gO(r),o,l)),l.promise}(eu(s),e)}function RN(s,e,t){const r=t.docs.get(e._key),o=new Gh(s);return new lv(s,o,e._key,r,new Io(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MO={maxAttempts:5};function vc(s,e){if((s=lt(s)).firestore!==e)throw new he(te.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PO{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=nu(e)}get(e){const t=vc(e,this._firestore),r=new RO(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||o.length!==1)return Te(24041);const l=o[0];if(l.isFoundDocument())return new vh(this._firestore,r,l.key,l,t.converter);if(l.isNoDocument())return new vh(this._firestore,r,t._key,null,t.converter);throw Te(18433,{doc:l})})}set(e,t,r){const o=vc(e,this._firestore),l=ov(o.converter,t,r),h=ev(this._dataReader,"Transaction.set",o._key,l,o.converter!==null,r);return this._transaction.set(o._key,h),this}update(e,t,r,...o){const l=vc(e,this._firestore);let h;return h=typeof(t=lt(t))=="string"||t instanceof tu?TN(this._dataReader,"Transaction.update",l._key,t,r,o):EN(this._dataReader,"Transaction.update",l._key,t),this._transaction.update(l._key,h),this}delete(e){const t=vc(e,this._firestore);return this._transaction.delete(t._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kO extends PO{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=vc(e,this._firestore),r=new Gh(this._firestore);return super.get(e).then(o=>new lv(this._firestore,r,t._key,o._document,new Io(!1,!1),t.converter))}}function jN(s,e,t){s=_n(s,Fs);const r=Object.assign(Object.assign({},MO),t);return function(l){if(l.maxAttempts<1)throw new he(te.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(l,h,m){const g=new Vs;return l.asyncQueue.enqueueAndForget(async()=>{const v=await vO(l);new fO(l.asyncQueue,v,m,h,g).Wu()}),g.promise}(eu(s),o=>e(new kO(s,o)),r)}function gs(){return new tv("serverTimestamp")}(function(e,t=!0){(function(o){Ko=o})(Sa),ts(new qn("firestore",(r,{instanceIdentifier:o,options:l})=>{const h=r.getProvider("app").getImmediate(),m=new Fs(new I1(r.getProvider("auth-internal")),new j1(h,r.getProvider("app-check-internal")),function(v,_){if(!Object.prototype.hasOwnProperty.apply(v.options,["projectId"]))throw new he(te.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Pc(v.options.projectId,_)}(h,o),h);return l=Object.assign({useFetchStreams:t},l),m._setSettings(l),m},"PUBLIC").setMultipleInstances(!0)),dn(NT,ST,e),dn(NT,ST,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DN="firebasestorage.googleapis.com",VO="storageBucket",LO=2*60*1e3,UO=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs extends ss{constructor(e,t,r=0){super(gp(e),`Firebase Storage: ${t} (${gp(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,zs.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return gp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var qs;(function(s){s.UNKNOWN="unknown",s.OBJECT_NOT_FOUND="object-not-found",s.BUCKET_NOT_FOUND="bucket-not-found",s.PROJECT_NOT_FOUND="project-not-found",s.QUOTA_EXCEEDED="quota-exceeded",s.UNAUTHENTICATED="unauthenticated",s.UNAUTHORIZED="unauthorized",s.UNAUTHORIZED_APP="unauthorized-app",s.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",s.INVALID_CHECKSUM="invalid-checksum",s.CANCELED="canceled",s.INVALID_EVENT_NAME="invalid-event-name",s.INVALID_URL="invalid-url",s.INVALID_DEFAULT_BUCKET="invalid-default-bucket",s.NO_DEFAULT_BUCKET="no-default-bucket",s.CANNOT_SLICE_BLOB="cannot-slice-blob",s.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",s.NO_DOWNLOAD_URL="no-download-url",s.INVALID_ARGUMENT="invalid-argument",s.INVALID_ARGUMENT_COUNT="invalid-argument-count",s.APP_DELETED="app-deleted",s.INVALID_ROOT_OPERATION="invalid-root-operation",s.INVALID_FORMAT="invalid-format",s.INTERNAL_ERROR="internal-error",s.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(qs||(qs={}));function gp(s){return"storage/"+s}function FO(){const s="An unknown error occurred, please check the error payload for server response.";return new zs(qs.UNKNOWN,s)}function qO(){return new zs(qs.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function zO(){return new zs(qs.CANCELED,"User canceled the upload/download.")}function BO(s){return new zs(qs.INVALID_URL,"Invalid URL '"+s+"'.")}function HO(s){return new zs(qs.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+s+"'.")}function Nb(s){return new zs(qs.INVALID_ARGUMENT,s)}function ON(){return new zs(qs.APP_DELETED,"The Firebase app was deleted.")}function GO(s){return new zs(qs.INVALID_ROOT_OPERATION,"The operation '"+s+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=ms.makeFromUrl(e,t)}catch{return new ms(e,"")}if(r.path==="")return r;throw HO(e)}static makeFromUrl(e,t){let r=null;const o="([A-Za-z0-9.\\-_]+)";function l(Z){Z.path.charAt(Z.path.length-1)==="/"&&(Z.path_=Z.path_.slice(0,-1))}const h="(/(.*))?$",m=new RegExp("^gs://"+o+h,"i"),g={bucket:1,path:3};function v(Z){Z.path_=decodeURIComponent(Z.path)}const _="v[A-Za-z0-9_]+",A=t.replace(/[.]/g,"\\."),b="(/([^?#]*).*)?$",O=new RegExp(`^https?://${A}/${_}/b/${o}/o${b}`,"i"),I={bucket:1,path:3},U=t===DN?"(?:storage.googleapis.com|storage.cloud.google.com)":t,C="([^?#]*)",$=new RegExp(`^https?://${U}/${o}/${C}`,"i"),K=[{regex:m,indices:g,postModify:l},{regex:O,indices:I,postModify:v},{regex:$,indices:{bucket:1,path:2},postModify:v}];for(let Z=0;Z<K.length;Z++){const q=K[Z],oe=q.regex.exec(e);if(oe){const D=oe[q.indices.bucket];let S=oe[q.indices.path];S||(S=""),r=new ms(D,S),q.postModify(r);break}}if(r==null)throw BO(e);return r}}class $O{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KO(s,e,t){let r=1,o=null,l=null,h=!1,m=0;function g(){return m===2}let v=!1;function _(...C){v||(v=!0,e.apply(null,C))}function A(C){o=setTimeout(()=>{o=null,s(O,g())},C)}function b(){l&&clearTimeout(l)}function O(C,...$){if(v){b();return}if(C){b(),_.call(null,C,...$);return}if(g()||h){b(),_.call(null,C,...$);return}r<64&&(r*=2);let K;m===1?(m=2,K=0):K=(r+Math.random())*1e3,A(K)}let I=!1;function U(C){I||(I=!0,b(),!v&&(o!==null?(C||(m=2),clearTimeout(o),A(0)):C||(m=1)))}return A(0),l=setTimeout(()=>{h=!0,U(!0)},t),U}function YO(s){s(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QO(s){return s!==void 0}function Sb(s,e,t,r){if(r<e)throw Nb(`Invalid value for '${s}'. Expected ${e} or greater.`);if(r>t)throw Nb(`Invalid value for '${s}'. Expected ${t} or less.`)}function XO(s){const e=encodeURIComponent;let t="?";for(const r in s)if(s.hasOwnProperty(r)){const o=e(r)+"="+e(s[r]);t=t+o+"&"}return t=t.slice(0,-1),t}var yh;(function(s){s[s.NO_ERROR=0]="NO_ERROR",s[s.NETWORK_ERROR=1]="NETWORK_ERROR",s[s.ABORT=2]="ABORT"})(yh||(yh={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WO(s,e){const t=s>=500&&s<600,o=[408,429].indexOf(s)!==-1,l=e.indexOf(s)!==-1;return t||o||l}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZO{constructor(e,t,r,o,l,h,m,g,v,_,A,b=!0,O=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=o,this.successCodes_=l,this.additionalRetryCodes_=h,this.callback_=m,this.errorCallback_=g,this.timeout_=v,this.progressCallback_=_,this.connectionFactory_=A,this.retry=b,this.isUsingEmulator=O,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((I,U)=>{this.resolve_=I,this.reject_=U,this.start_()})}start_(){const e=(r,o)=>{if(o){r(!1,new kd(!1,null,!0));return}const l=this.connectionFactory_();this.pendingConnection_=l;const h=m=>{const g=m.loaded,v=m.lengthComputable?m.total:-1;this.progressCallback_!==null&&this.progressCallback_(g,v)};this.progressCallback_!==null&&l.addUploadProgressListener(h),l.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&l.removeUploadProgressListener(h),this.pendingConnection_=null;const m=l.getErrorCode()===yh.NO_ERROR,g=l.getStatus();if(!m||WO(g,this.additionalRetryCodes_)&&this.retry){const _=l.getErrorCode()===yh.ABORT;r(!1,new kd(!1,null,_));return}const v=this.successCodes_.indexOf(g)!==-1;r(!0,new kd(v,l))})},t=(r,o)=>{const l=this.resolve_,h=this.reject_,m=o.connection;if(o.wasSuccessCode)try{const g=this.callback_(m,m.getResponse());QO(g)?l(g):l()}catch(g){h(g)}else if(m!==null){const g=FO();g.serverResponse=m.getErrorText(),this.errorCallback_?h(this.errorCallback_(m,g)):h(g)}else if(o.canceled){const g=this.appDelete_?ON():zO();h(g)}else{const g=qO();h(g)}};this.canceled_?t(!1,new kd(!1,null,!0)):this.backoffId_=KO(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&YO(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class kd{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function JO(s,e){e!==null&&e.length>0&&(s.Authorization="Firebase "+e)}function eM(s,e){s["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function tM(s,e){e&&(s["X-Firebase-GMPID"]=e)}function nM(s,e){e!==null&&(s["X-Firebase-AppCheck"]=e)}function sM(s,e,t,r,o,l,h=!0,m=!1){const g=XO(s.urlParams),v=s.url+g,_=Object.assign({},s.headers);return tM(_,e),JO(_,t),eM(_,l),nM(_,r),new ZO(v,s.method,_,s.body,s.successCodes,s.additionalRetryCodes,s.handler,s.errorHandler,s.timeout,s.progressCallback,o,h,m)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iM(s){if(s.length===0)return null;const e=s.lastIndexOf("/");return e===-1?"":s.slice(0,e)}function rM(s){const e=s.lastIndexOf("/",s.length-2);return e===-1?s:s.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h{constructor(e,t){this._service=e,t instanceof ms?this._location=t:this._location=ms.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new _h(e,t)}get root(){const e=new ms(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return rM(this._location.path)}get storage(){return this._service}get parent(){const e=iM(this._location.path);if(e===null)return null;const t=new ms(this._location.bucket,e);return new _h(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw GO(e)}}function wb(s,e){const t=e?.[VO];return t==null?null:ms.makeFromBucketSpec(t,s)}function aM(s,e,t,r={}){s.host=`${e}:${t}`;const o=Na(e);o&&(ag(`https://${s.host}/b`),og("Storage",!0)),s._isUsingEmulator=!0,s._protocol=o?"https":"http";const{mockUserToken:l}=r;l&&(s._overrideAuthToken=typeof l=="string"?l:u0(l,s.app.options.projectId))}class oM{constructor(e,t,r,o,l,h=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=o,this._firebaseVersion=l,this._isUsingEmulator=h,this._bucket=null,this._host=DN,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=LO,this._maxUploadRetryTime=UO,this._requests=new Set,o!=null?this._bucket=ms.makeFromBucketSpec(o,this._host):this._bucket=wb(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ms.makeFromBucketSpec(this._url,e):this._bucket=wb(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Sb("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Sb("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(Nn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new _h(this,e)}_makeRequest(e,t,r,o,l=!0){if(this._deleted)return new $O(ON());{const h=sM(e,this._appId,r,o,t,this._firebaseVersion,l,this._isUsingEmulator);return this._requests.add(h),h.getPromise().then(()=>this._requests.delete(h),()=>this._requests.delete(h)),h}}async makeRequestWithTokens(e,t){const[r,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,o).getPromise()}}const xb="@firebase/storage",Ib="0.13.13";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MN="storage";function lM(s=Hc(),e){s=lt(s);const r=Ai(s,MN).getImmediate({identifier:e}),o=o0("storage");return o&&cM(r,...o),r}function cM(s,e,t,r={}){aM(s,e,t,r)}function uM(s,{instanceIdentifier:e}){const t=s.getProvider("app").getImmediate(),r=s.getProvider("auth-internal"),o=s.getProvider("app-check-internal");return new oM(t,r,o,e,Sa)}function dM(){ts(new qn(MN,uM,"PUBLIC").setMultipleInstances(!0)),dn(xb,Ib,""),dn(xb,Ib,"esm2017")}dM();const PN="@firebase/installations",dv="0.6.17";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kN=1e4,VN=`w:${dv}`,LN="FIS_v2",hM="https://firebaseinstallations.googleapis.com/v1",fM=60*60*1e3,mM="installations",pM="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gM={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},ba=new Er(mM,pM,gM);function UN(s){return s instanceof ss&&s.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FN({projectId:s}){return`${hM}/projects/${s}/installations`}function qN(s){return{token:s.token,requestStatus:2,expiresIn:yM(s.expiresIn),creationTime:Date.now()}}async function zN(s,e){const r=(await e.json()).error;return ba.create("request-failed",{requestName:s,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function BN({apiKey:s}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":s})}function vM(s,{refreshToken:e}){const t=BN(s);return t.append("Authorization",_M(e)),t}async function HN(s){const e=await s();return e.status>=500&&e.status<600?s():e}function yM(s){return Number(s.replace("s","000"))}function _M(s){return`${LN} ${s}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EM({appConfig:s,heartbeatServiceProvider:e},{fid:t}){const r=FN(s),o=BN(s),l=e.getImmediate({optional:!0});if(l){const v=await l.getHeartbeatsHeader();v&&o.append("x-firebase-client",v)}const h={fid:t,authVersion:LN,appId:s.appId,sdkVersion:VN},m={method:"POST",headers:o,body:JSON.stringify(h)},g=await HN(()=>fetch(r,m));if(g.ok){const v=await g.json();return{fid:v.fid||t,registrationStatus:2,refreshToken:v.refreshToken,authToken:qN(v.authToken)}}else throw await zN("Create Installation",g)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GN(s){return new Promise(e=>{setTimeout(e,s)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TM(s){return btoa(String.fromCharCode(...s)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bM=/^[cdef][\w-]{21}$/,Jp="";function AM(){try{const s=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(s),s[0]=112+s[0]%16;const t=NM(s);return bM.test(t)?t:Jp}catch{return Jp}}function NM(s){return TM(s).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yh(s){return`${s.appName}!${s.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $N=new Map;function KN(s,e){const t=Yh(s);YN(t,e),SM(t,e)}function YN(s,e){const t=$N.get(s);if(t)for(const r of t)r(e)}function SM(s,e){const t=wM();t&&t.postMessage({key:s,fid:e}),xM()}let pa=null;function wM(){return!pa&&"BroadcastChannel"in self&&(pa=new BroadcastChannel("[Firebase] FID Change"),pa.onmessage=s=>{YN(s.data.key,s.data.fid)}),pa}function xM(){$N.size===0&&pa&&(pa.close(),pa=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IM="firebase-installations-database",CM=1,Aa="firebase-installations-store";let vp=null;function hv(){return vp||(vp=p0(IM,CM,{upgrade:(s,e)=>{switch(e){case 0:s.createObjectStore(Aa)}}})),vp}async function Eh(s,e){const t=Yh(s),o=(await hv()).transaction(Aa,"readwrite"),l=o.objectStore(Aa),h=await l.get(t);return await l.put(e,t),await o.done,(!h||h.fid!==e.fid)&&KN(s,e.fid),e}async function QN(s){const e=Yh(s),r=(await hv()).transaction(Aa,"readwrite");await r.objectStore(Aa).delete(e),await r.done}async function Qh(s,e){const t=Yh(s),o=(await hv()).transaction(Aa,"readwrite"),l=o.objectStore(Aa),h=await l.get(t),m=e(h);return m===void 0?await l.delete(t):await l.put(m,t),await o.done,m&&(!h||h.fid!==m.fid)&&KN(s,m.fid),m}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fv(s){let e;const t=await Qh(s.appConfig,r=>{const o=RM(r),l=jM(s,o);return e=l.registrationPromise,l.installationEntry});return t.fid===Jp?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function RM(s){const e=s||{fid:AM(),registrationStatus:0};return XN(e)}function jM(s,e){if(e.registrationStatus===0){if(!navigator.onLine){const o=Promise.reject(ba.create("app-offline"));return{installationEntry:e,registrationPromise:o}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=DM(s,t);return{installationEntry:t,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:OM(s)}:{installationEntry:e}}async function DM(s,e){try{const t=await EM(s,e);return Eh(s.appConfig,t)}catch(t){throw UN(t)&&t.customData.serverCode===409?await QN(s.appConfig):await Eh(s.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function OM(s){let e=await Cb(s.appConfig);for(;e.registrationStatus===1;)await GN(100),e=await Cb(s.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:r}=await fv(s);return r||t}return e}function Cb(s){return Qh(s,e=>{if(!e)throw ba.create("installation-not-found");return XN(e)})}function XN(s){return MM(s)?{fid:s.fid,registrationStatus:0}:s}function MM(s){return s.registrationStatus===1&&s.registrationTime+kN<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PM({appConfig:s,heartbeatServiceProvider:e},t){const r=kM(s,t),o=vM(s,t),l=e.getImmediate({optional:!0});if(l){const v=await l.getHeartbeatsHeader();v&&o.append("x-firebase-client",v)}const h={installation:{sdkVersion:VN,appId:s.appId}},m={method:"POST",headers:o,body:JSON.stringify(h)},g=await HN(()=>fetch(r,m));if(g.ok){const v=await g.json();return qN(v)}else throw await zN("Generate Auth Token",g)}function kM(s,{fid:e}){return`${FN(s)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mv(s,e=!1){let t;const r=await Qh(s.appConfig,l=>{if(!WN(l))throw ba.create("not-registered");const h=l.authToken;if(!e&&UM(h))return l;if(h.requestStatus===1)return t=VM(s,e),l;{if(!navigator.onLine)throw ba.create("app-offline");const m=qM(l);return t=LM(s,m),m}});return t?await t:r.authToken}async function VM(s,e){let t=await Rb(s.appConfig);for(;t.authToken.requestStatus===1;)await GN(100),t=await Rb(s.appConfig);const r=t.authToken;return r.requestStatus===0?mv(s,e):r}function Rb(s){return Qh(s,e=>{if(!WN(e))throw ba.create("not-registered");const t=e.authToken;return zM(t)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function LM(s,e){try{const t=await PM(s,e),r=Object.assign(Object.assign({},e),{authToken:t});return await Eh(s.appConfig,r),t}catch(t){if(UN(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await QN(s.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Eh(s.appConfig,r)}throw t}}function WN(s){return s!==void 0&&s.registrationStatus===2}function UM(s){return s.requestStatus===2&&!FM(s)}function FM(s){const e=Date.now();return e<s.creationTime||s.creationTime+s.expiresIn<e+fM}function qM(s){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},s),{authToken:e})}function zM(s){return s.requestStatus===1&&s.requestTime+kN<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BM(s){const e=s,{installationEntry:t,registrationPromise:r}=await fv(e);return r?r.catch(console.error):mv(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HM(s,e=!1){const t=s;return await GM(t),(await mv(t,e)).token}async function GM(s){const{registrationPromise:e}=await fv(s);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $M(s){if(!s||!s.options)throw yp("App Configuration");if(!s.name)throw yp("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!s.options[t])throw yp(t);return{appName:s.name,projectId:s.options.projectId,apiKey:s.options.apiKey,appId:s.options.appId}}function yp(s){return ba.create("missing-app-config-values",{valueName:s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZN="installations",KM="installations-internal",YM=s=>{const e=s.getProvider("app").getImmediate(),t=$M(e),r=Ai(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},QM=s=>{const e=s.getProvider("app").getImmediate(),t=Ai(e,ZN).getImmediate();return{getId:()=>BM(t),getToken:o=>HM(t,o)}};function XM(){ts(new qn(ZN,YM,"PUBLIC")),ts(new qn(KM,QM,"PRIVATE"))}XM();dn(PN,dv);dn(PN,dv,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Th="analytics",WM="firebase_id",ZM="origin",JM=60*1e3,e2="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",pv="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sn=new Bc("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t2={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Fn=new Er("analytics","Analytics",t2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n2(s){if(!s.startsWith(pv)){const e=Fn.create("invalid-gtag-resource",{gtagURL:s});return Sn.warn(e.message),""}return s}function JN(s){return Promise.all(s.map(e=>e.catch(t=>t)))}function s2(s,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(s,e)),t}function i2(s,e){const t=s2("firebase-js-sdk-policy",{createScriptURL:n2}),r=document.createElement("script"),o=`${pv}?l=${s}&id=${e}`;r.src=t?t?.createScriptURL(o):o,r.async=!0,document.head.appendChild(r)}function r2(s){let e=[];return Array.isArray(window[s])?e=window[s]:window[s]=e,e}async function a2(s,e,t,r,o,l){const h=r[o];try{if(h)await e[h];else{const g=(await JN(t)).find(v=>v.measurementId===o);g&&await e[g.appId]}}catch(m){Sn.error(m)}s("config",o,l)}async function o2(s,e,t,r,o){try{let l=[];if(o&&o.send_to){let h=o.send_to;Array.isArray(h)||(h=[h]);const m=await JN(t);for(const g of h){const v=m.find(A=>A.measurementId===g),_=v&&e[v.appId];if(_)l.push(_);else{l=[];break}}}l.length===0&&(l=Object.values(e)),await Promise.all(l),s("event",r,o||{})}catch(l){Sn.error(l)}}function l2(s,e,t,r){async function o(l,...h){try{if(l==="event"){const[m,g]=h;await o2(s,e,t,m,g)}else if(l==="config"){const[m,g]=h;await a2(s,e,t,r,m,g)}else if(l==="consent"){const[m,g]=h;s("consent",m,g)}else if(l==="get"){const[m,g,v]=h;s("get",m,g,v)}else if(l==="set"){const[m]=h;s("set",m)}else s(l,...h)}catch(m){Sn.error(m)}}return o}function c2(s,e,t,r,o){let l=function(...h){window[r].push(arguments)};return window[o]&&typeof window[o]=="function"&&(l=window[o]),window[o]=l2(l,s,e,t),{gtagCore:l,wrappedGtag:window[o]}}function u2(s){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(pv)&&t.src.includes(s))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d2=30,h2=1e3;class f2{constructor(e={},t=h2){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const eS=new f2;function m2(s){return new Headers({Accept:"application/json","x-goog-api-key":s})}async function p2(s){var e;const{appId:t,apiKey:r}=s,o={method:"GET",headers:m2(r)},l=e2.replace("{app-id}",t),h=await fetch(l,o);if(h.status!==200&&h.status!==304){let m="";try{const g=await h.json();!((e=g.error)===null||e===void 0)&&e.message&&(m=g.error.message)}catch{}throw Fn.create("config-fetch-failed",{httpStatus:h.status,responseMessage:m})}return h.json()}async function g2(s,e=eS,t){const{appId:r,apiKey:o,measurementId:l}=s.options;if(!r)throw Fn.create("no-app-id");if(!o){if(l)return{measurementId:l,appId:r};throw Fn.create("no-api-key")}const h=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},m=new _2;return setTimeout(async()=>{m.abort()},JM),tS({appId:r,apiKey:o,measurementId:l},h,m,e)}async function tS(s,{throttleEndTimeMillis:e,backoffCount:t},r,o=eS){var l;const{appId:h,measurementId:m}=s;try{await v2(r,e)}catch(g){if(m)return Sn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${m} provided in the "measurementId" field in the local Firebase config. [${g?.message}]`),{appId:h,measurementId:m};throw g}try{const g=await p2(s);return o.deleteThrottleMetadata(h),g}catch(g){const v=g;if(!y2(v)){if(o.deleteThrottleMetadata(h),m)return Sn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${m} provided in the "measurementId" field in the local Firebase config. [${v?.message}]`),{appId:h,measurementId:m};throw g}const _=Number((l=v?.customData)===null||l===void 0?void 0:l.httpStatus)===503?QE(t,o.intervalMillis,d2):QE(t,o.intervalMillis),A={throttleEndTimeMillis:Date.now()+_,backoffCount:t+1};return o.setThrottleMetadata(h,A),Sn.debug(`Calling attemptFetch again in ${_} millis`),tS(s,A,r,o)}}function v2(s,e){return new Promise((t,r)=>{const o=Math.max(e-Date.now(),0),l=setTimeout(t,o);s.addEventListener(()=>{clearTimeout(l),r(Fn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function y2(s){if(!(s instanceof ss)||!s.customData)return!1;const e=Number(s.customData.httpStatus);return e===429||e===500||e===503||e===504}class _2{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function E2(s,e,t,r,o){if(o&&o.global){s("event",t,r);return}else{const l=await e,h=Object.assign(Object.assign({},r),{send_to:l});s("event",t,h)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T2(){if(lg())try{await cg()}catch(s){return Sn.warn(Fn.create("indexeddb-unavailable",{errorInfo:s?.toString()}).message),!1}else return Sn.warn(Fn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function b2(s,e,t,r,o,l,h){var m;const g=g2(s);g.then(O=>{t[O.measurementId]=O.appId,s.options.measurementId&&O.measurementId!==s.options.measurementId&&Sn.warn(`The measurement ID in the local Firebase config (${s.options.measurementId}) does not match the measurement ID fetched from the server (${O.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(O=>Sn.error(O)),e.push(g);const v=T2().then(O=>{if(O)return r.getId()}),[_,A]=await Promise.all([g,v]);u2(l)||i2(l,_.measurementId),o("js",new Date);const b=(m=h?.config)!==null&&m!==void 0?m:{};return b[ZM]="firebase",b.update=!0,A!=null&&(b[WM]=A),o("config",_.measurementId,b),_.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A2{constructor(e){this.app=e}_delete(){return delete Sc[this.app.options.appId],Promise.resolve()}}let Sc={},jb=[];const Db={};let _p="dataLayer",N2="gtag",Ob,nS,Mb=!1;function S2(){const s=[];if(d0()&&s.push("This is a browser extension environment."),h0()||s.push("Cookies are not available."),s.length>0){const e=s.map((r,o)=>`(${o+1}) ${r}`).join(" "),t=Fn.create("invalid-analytics-context",{errorInfo:e});Sn.warn(t.message)}}function w2(s,e,t){S2();const r=s.options.appId;if(!r)throw Fn.create("no-app-id");if(!s.options.apiKey)if(s.options.measurementId)Sn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${s.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Fn.create("no-api-key");if(Sc[r]!=null)throw Fn.create("already-exists",{id:r});if(!Mb){r2(_p);const{wrappedGtag:l,gtagCore:h}=c2(Sc,jb,Db,_p,N2);nS=l,Ob=h,Mb=!0}return Sc[r]=b2(s,jb,Db,e,Ob,_p,t),new A2(s)}function x2(s=Hc()){s=lt(s);const e=Ai(s,Th);return e.isInitialized()?e.getImmediate():I2(s)}function I2(s,e={}){const t=Ai(s,Th);if(t.isInitialized()){const o=t.getImmediate();if(ur(e,t.getOptions()))return o;throw Fn.create("already-initialized")}return t.initialize({options:e})}function C2(s,e,t,r){s=lt(s),E2(nS,Sc[s.app.options.appId],e,t,r).catch(o=>Sn.error(o))}const Pb="@firebase/analytics",kb="0.10.16";function R2(){ts(new qn(Th,(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("installations-internal").getImmediate();return w2(r,o,t)},"PUBLIC")),ts(new qn("analytics-internal",s,"PRIVATE")),dn(Pb,kb),dn(Pb,kb,"esm2017");function s(e){try{const t=e.getProvider(Th).getImmediate();return{logEvent:(r,o,l)=>C2(t,r,o,l)}}catch(t){throw Fn.create("interop-component-reg-failed",{reason:t})}}}R2();var eg,Vb,Xh=function(){var s=self.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0];if(s&&s.responseStart>0&&s.responseStart<performance.now())return s},sS=function(s){if(document.readyState==="loading")return"loading";var e=Xh();if(e){if(s<e.domInteractive)return"loading";if(e.domContentLoadedEventStart===0||s<e.domContentLoadedEventStart)return"dom-interactive";if(e.domComplete===0||s<e.domComplete)return"dom-content-loaded"}return"complete"},j2=function(s){var e=s.nodeName;return s.nodeType===1?e.toLowerCase():e.toUpperCase().replace(/^#/,"")},gv=function(s,e){var t="";try{for(;s&&s.nodeType!==9;){var r=s,o=r.id?"#"+r.id:j2(r)+(r.classList&&r.classList.value&&r.classList.value.trim()&&r.classList.value.trim().length?"."+r.classList.value.trim().replace(/\s+/g,"."):"");if(t.length+o.length>(e||100)-1)return t||o;if(t=t?o+">"+t:o,r.id)break;s=r.parentNode}}catch{}return t},iS=-1,D2=function(){return iS},iu=function(s){addEventListener("pageshow",function(e){e.persisted&&(iS=e.timeStamp,s(e))},!0)},vv=function(){var s=Xh();return s&&s.activationStart||0},vr=function(s,e){var t=Xh(),r="navigate";return D2()>=0?r="back-forward-cache":t&&(document.prerendering||vv()>0?r="prerender":document.wasDiscarded?r="restore":t.type&&(r=t.type.replace(/_/g,"-"))),{name:s,value:e===void 0?-1:e,rating:"good",delta:0,entries:[],id:"v4-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:r}},el=function(s,e,t){try{if(PerformanceObserver.supportedEntryTypes.includes(s)){var r=new PerformanceObserver(function(o){Promise.resolve().then(function(){e(o.getEntries())})});return r.observe(Object.assign({type:s,buffered:!0},t||{})),r}}catch{}},yr=function(s,e,t,r){var o,l;return function(h){e.value>=0&&(h||r)&&((l=e.value-(o||0))||o===void 0)&&(o=e.value,e.delta=l,e.rating=function(m,g){return m>g[1]?"poor":m>g[0]?"needs-improvement":"good"}(e.value,t),s(e))}},yv=function(s){requestAnimationFrame(function(){return requestAnimationFrame(function(){return s()})})},Wh=function(s){document.addEventListener("visibilitychange",function(){document.visibilityState==="hidden"&&s()})},_v=function(s){var e=!1;return function(){e||(s(),e=!0)}},Co=-1,Lb=function(){return document.visibilityState!=="hidden"||document.prerendering?1/0:0},bh=function(s){document.visibilityState==="hidden"&&Co>-1&&(Co=s.type==="visibilitychange"?s.timeStamp:0,O2())},Ub=function(){addEventListener("visibilitychange",bh,!0),addEventListener("prerenderingchange",bh,!0)},O2=function(){removeEventListener("visibilitychange",bh,!0),removeEventListener("prerenderingchange",bh,!0)},rS=function(){return Co<0&&(Co=Lb(),Ub(),iu(function(){setTimeout(function(){Co=Lb(),Ub()},0)})),{get firstHiddenTime(){return Co}}},Ev=function(s){document.prerendering?addEventListener("prerenderingchange",function(){return s()},!0):s()},Fb=[1800,3e3],M2=function(s,e){e=e||{},Ev(function(){var t,r=rS(),o=vr("FCP"),l=el("paint",function(h){h.forEach(function(m){m.name==="first-contentful-paint"&&(l.disconnect(),m.startTime<r.firstHiddenTime&&(o.value=Math.max(m.startTime-vv(),0),o.entries.push(m),t(!0)))})});l&&(t=yr(s,o,Fb,e.reportAllChanges),iu(function(h){o=vr("FCP"),t=yr(s,o,Fb,e.reportAllChanges),yv(function(){o.value=performance.now()-h.timeStamp,t(!0)})}))})},qb=[.1,.25],P2=function(s,e){(function(t,r){r=r||{},M2(_v(function(){var o,l=vr("CLS",0),h=0,m=[],g=function(_){_.forEach(function(A){if(!A.hadRecentInput){var b=m[0],O=m[m.length-1];h&&A.startTime-O.startTime<1e3&&A.startTime-b.startTime<5e3?(h+=A.value,m.push(A)):(h=A.value,m=[A])}}),h>l.value&&(l.value=h,l.entries=m,o())},v=el("layout-shift",g);v&&(o=yr(t,l,qb,r.reportAllChanges),Wh(function(){g(v.takeRecords()),o(!0)}),iu(function(){h=0,l=vr("CLS",0),o=yr(t,l,qb,r.reportAllChanges),yv(function(){return o()})}),setTimeout(o,0))}))})(function(t){var r=function(o){var l,h={};if(o.entries.length){var m=o.entries.reduce(function(v,_){return v&&v.value>_.value?v:_});if(m&&m.sources&&m.sources.length){var g=(l=m.sources).find(function(v){return v.node&&v.node.nodeType===1})||l[0];g&&(h={largestShiftTarget:gv(g.node),largestShiftTime:m.startTime,largestShiftValue:m.value,largestShiftSource:g,largestShiftEntry:m,loadState:sS(m.startTime)})}}return Object.assign(o,{attribution:h})}(t);s(r)},e)},aS=0,Ep=1/0,Vd=0,k2=function(s){s.forEach(function(e){e.interactionId&&(Ep=Math.min(Ep,e.interactionId),Vd=Math.max(Vd,e.interactionId),aS=Vd?(Vd-Ep)/7+1:0)})},oS=function(){return eg?aS:performance.interactionCount||0},V2=function(){"interactionCount"in performance||eg||(eg=el("event",k2,{type:"event",buffered:!0,durationThreshold:0}))},ds=[],wc=new Map,lS=0,L2=function(){var s=Math.min(ds.length-1,Math.floor((oS()-lS)/50));return ds[s]},cS=[],U2=function(s){if(cS.forEach(function(o){return o(s)}),s.interactionId||s.entryType==="first-input"){var e=ds[ds.length-1],t=wc.get(s.interactionId);if(t||ds.length<10||s.duration>e.latency){if(t)s.duration>t.latency?(t.entries=[s],t.latency=s.duration):s.duration===t.latency&&s.startTime===t.entries[0].startTime&&t.entries.push(s);else{var r={id:s.interactionId,latency:s.duration,entries:[s]};wc.set(r.id,r),ds.push(r)}ds.sort(function(o,l){return l.latency-o.latency}),ds.length>10&&ds.splice(10).forEach(function(o){return wc.delete(o.id)})}}},Tv=function(s){var e=self.requestIdleCallback||self.setTimeout,t=-1;return s=_v(s),document.visibilityState==="hidden"?s():(t=e(s),Wh(s)),t},zb=[200,500],F2=function(s,e){"PerformanceEventTiming"in self&&"interactionId"in PerformanceEventTiming.prototype&&(e=e||{},Ev(function(){var t;V2();var r,o=vr("INP"),l=function(m){Tv(function(){m.forEach(U2);var g=L2();g&&g.latency!==o.value&&(o.value=g.latency,o.entries=g.entries,r())})},h=el("event",l,{durationThreshold:(t=e.durationThreshold)!==null&&t!==void 0?t:40});r=yr(s,o,zb,e.reportAllChanges),h&&(h.observe({type:"first-input",buffered:!0}),Wh(function(){l(h.takeRecords()),r(!0)}),iu(function(){lS=oS(),ds.length=0,wc.clear(),o=vr("INP"),r=yr(s,o,zb,e.reportAllChanges)}))}))},Po=[],ir=[],tg=0,bv=new WeakMap,ko=new Map,ng=-1,q2=function(s){Po=Po.concat(s),uS()},uS=function(){ng<0&&(ng=Tv(z2))},z2=function(){ko.size>10&&ko.forEach(function(h,m){wc.has(m)||ko.delete(m)});var s=ds.map(function(h){return bv.get(h.entries[0])}),e=ir.length-50;ir=ir.filter(function(h,m){return m>=e||s.includes(h)});for(var t=new Set,r=0;r<ir.length;r++){var o=ir[r];dS(o.startTime,o.processingEnd).forEach(function(h){t.add(h)})}var l=Po.length-1-50;Po=Po.filter(function(h,m){return h.startTime>tg&&m>l||t.has(h)}),ng=-1};cS.push(function(s){s.interactionId&&s.target&&!ko.has(s.interactionId)&&ko.set(s.interactionId,s.target)},function(s){var e,t=s.startTime+s.duration;tg=Math.max(tg,s.processingEnd);for(var r=ir.length-1;r>=0;r--){var o=ir[r];if(Math.abs(t-o.renderTime)<=8){(e=o).startTime=Math.min(s.startTime,e.startTime),e.processingStart=Math.min(s.processingStart,e.processingStart),e.processingEnd=Math.max(s.processingEnd,e.processingEnd),e.entries.push(s);break}}e||(e={startTime:s.startTime,processingStart:s.processingStart,processingEnd:s.processingEnd,renderTime:t,entries:[s]},ir.push(e)),(s.interactionId||s.entryType==="first-input")&&bv.set(s,e),uS()});var dS=function(s,e){for(var t,r=[],o=0;t=Po[o];o++)if(!(t.startTime+t.duration<s)){if(t.startTime>e)break;r.push(t)}return r},B2=function(s,e){Vb||(Vb=el("long-animation-frame",q2)),F2(function(t){var r=function(o){var l=o.entries[0],h=bv.get(l),m=l.processingStart,g=h.processingEnd,v=h.entries.sort(function(C,$){return C.processingStart-$.processingStart}),_=dS(l.startTime,g),A=o.entries.find(function(C){return C.target}),b=A&&A.target||ko.get(l.interactionId),O=[l.startTime+l.duration,g].concat(_.map(function(C){return C.startTime+C.duration})),I=Math.max.apply(Math,O),U={interactionTarget:gv(b),interactionTargetElement:b,interactionType:l.name.startsWith("key")?"keyboard":"pointer",interactionTime:l.startTime,nextPaintTime:I,processedEventEntries:v,longAnimationFrameEntries:_,inputDelay:m-l.startTime,processingDuration:g-m,presentationDelay:Math.max(I-g,0),loadState:sS(l.startTime)};return Object.assign(o,{attribution:U})}(t);s(r)},e)},Bb=[2500,4e3],Tp={},H2=function(s,e){(function(t,r){r=r||{},Ev(function(){var o,l=rS(),h=vr("LCP"),m=function(_){r.reportAllChanges||(_=_.slice(-1)),_.forEach(function(A){A.startTime<l.firstHiddenTime&&(h.value=Math.max(A.startTime-vv(),0),h.entries=[A],o())})},g=el("largest-contentful-paint",m);if(g){o=yr(t,h,Bb,r.reportAllChanges);var v=_v(function(){Tp[h.id]||(m(g.takeRecords()),g.disconnect(),Tp[h.id]=!0,o(!0))});["keydown","click"].forEach(function(_){addEventListener(_,function(){return Tv(v)},{once:!0,capture:!0})}),Wh(v),iu(function(_){h=vr("LCP"),o=yr(t,h,Bb,r.reportAllChanges),yv(function(){h.value=performance.now()-_.timeStamp,Tp[h.id]=!0,o(!0)})})}})})(function(t){var r=function(o){var l={timeToFirstByte:0,resourceLoadDelay:0,resourceLoadDuration:0,elementRenderDelay:o.value};if(o.entries.length){var h=Xh();if(h){var m=h.activationStart||0,g=o.entries[o.entries.length-1],v=g.url&&performance.getEntriesByType("resource").filter(function(I){return I.name===g.url})[0],_=Math.max(0,h.responseStart-m),A=Math.max(_,v?(v.requestStart||v.startTime)-m:0),b=Math.max(A,v?v.responseEnd-m:0),O=Math.max(b,g.startTime-m);l={element:gv(g.element),timeToFirstByte:_,resourceLoadDelay:A-_,resourceLoadDuration:b-A,elementRenderDelay:O-b,navigationEntry:h,lcpEntry:g},g.url&&(l.url=g.url),v&&(l.lcpResourceEntry=v)}}return Object.assign(o,{attribution:l})}(t);s(r)},e)};const Hb="@firebase/performance",sg="0.7.6";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hS=sg,G2="FB-PERF-TRACE-START",$2="FB-PERF-TRACE-STOP",ig="FB-PERF-TRACE-MEASURE",fS="_wt_",mS="_fp",pS="_fcp",gS="_fid",vS="_lcp",K2="lcp_element",yS="_inp",Y2="inp_interactionTarget",_S="_cls",Q2="cls_largestShiftTarget",ES="@firebase/performance/config",TS="@firebase/performance/configexpire",X2="performance",bS="Performance";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W2={"trace started":"Trace {$traceName} was started before.","trace stopped":"Trace {$traceName} is not running.","nonpositive trace startTime":"Trace {$traceName} startTime should be positive.","nonpositive trace duration":"Trace {$traceName} duration should be positive.","no window":"Window is not available.","no app id":"App id is not available.","no project id":"Project id is not available.","no api key":"Api key is not available.","invalid cc log":"Attempted to queue invalid cc event","FB not default":"Performance can only start when Firebase app instance is the default one.","RC response not ok":"RC response is not ok","invalid attribute name":"Attribute name {$attributeName} is invalid.","invalid attribute value":"Attribute value {$attributeValue} is invalid.","invalid custom metric name":"Custom metric name {$customMetricName} is invalid","invalid String merger input":"Input for String merger is invalid, contact support team to resolve.","already initialized":"initializePerformance() has already been called with different options. To avoid this error, call initializePerformance() with the same options as when it was originally called, or call getPerformance() to return the already initialized instance."},un=new Er(X2,bS,W2);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _r=new Bc(bS);_r.logLevel=Ue.INFO;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bp,AS;class Vt{constructor(e){if(this.window=e,!e)throw un.create("no window");this.performance=e.performance,this.PerformanceObserver=e.PerformanceObserver,this.windowLocation=e.location,this.navigator=e.navigator,this.document=e.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=e.localStorage),e.perfMetrics&&e.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=e.perfMetrics.onFirstInputDelay),this.onLCP=H2,this.onINP=B2,this.onCLS=P2}getUrl(){return this.windowLocation.href.split("?")[0]}mark(e){!this.performance||!this.performance.mark||this.performance.mark(e)}measure(e,t,r){!this.performance||!this.performance.measure||this.performance.measure(e,t,r)}getEntriesByType(e){return!this.performance||!this.performance.getEntriesByType?[]:this.performance.getEntriesByType(e)}getEntriesByName(e){return!this.performance||!this.performance.getEntriesByName?[]:this.performance.getEntriesByName(e)}getTimeOrigin(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)}requiredApisAvailable(){return!fetch||!Promise||!h0()?(_r.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1):lg()?!0:(_r.info("IndexedDB is not supported by current browser"),!1)}setupObserver(e,t){if(!this.PerformanceObserver)return;new this.PerformanceObserver(o=>{for(const l of o.getEntries())t(l)}).observe({entryTypes:[e]})}static getInstance(){return bp===void 0&&(bp=new Vt(AS)),bp}}function Z2(s){AS=s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let NS;function J2(s){const e=s.getId();return e.then(t=>{NS=t}),e}function Av(){return NS}function eP(s){const e=s.getToken();return e.then(t=>{}),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gb(s,e){const t=s.length-e.length;if(t<0||t>1)throw un.create("invalid String merger input");const r=[];for(let o=0;o<s.length;o++)r.push(s.charAt(o)),e.length>o&&r.push(e.charAt(o));return r.join("")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ap;class Ln{constructor(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=Gb("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=Gb("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}getFlTransportFullUrl(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)}static getInstance(){return Ap===void 0&&(Ap=new Ln),Ap}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xc;(function(s){s[s.UNKNOWN=0]="UNKNOWN",s[s.VISIBLE=1]="VISIBLE",s[s.HIDDEN=2]="HIDDEN"})(xc||(xc={}));const tP=["firebase_","google_","ga_"],nP=new RegExp("^[a-zA-Z]\\w*$"),sP=40,iP=100;function rP(){const s=Vt.getInstance().navigator;return s?.serviceWorker?s.serviceWorker.controller?2:3:1}function aP(){switch(Vt.getInstance().document.visibilityState){case"visible":return xc.VISIBLE;case"hidden":return xc.HIDDEN;default:return xc.UNKNOWN}}function oP(){const e=Vt.getInstance().navigator.connection;switch(e&&e.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}function lP(s){return s.length===0||s.length>sP?!1:!tP.some(t=>s.startsWith(t))&&!!s.match(nP)}function cP(s){return s.length!==0&&s.length<=iP}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SS(s){var e;const t=(e=s.options)===null||e===void 0?void 0:e.appId;if(!t)throw un.create("no app id");return t}function uP(s){var e;const t=(e=s.options)===null||e===void 0?void 0:e.projectId;if(!t)throw un.create("no project id");return t}function dP(s){var e;const t=(e=s.options)===null||e===void 0?void 0:e.apiKey;if(!t)throw un.create("no api key");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hP="0.0.1",us={loggingEnabled:!0},fP="FIREBASE_INSTALLATIONS_AUTH";function mP(s,e){const t=pP();return t?($b(t),Promise.resolve()):yP(s,e).then($b).then(r=>gP(r),()=>{})}function pP(){const s=Vt.getInstance().localStorage;if(!s)return;const e=s.getItem(TS);if(!e||!_P(e))return;const t=s.getItem(ES);if(t)try{return JSON.parse(t)}catch{return}}function gP(s){const e=Vt.getInstance().localStorage;!s||!e||(e.setItem(ES,JSON.stringify(s)),e.setItem(TS,String(Date.now()+Ln.getInstance().configTimeToLive*60*60*1e3)))}const vP="Could not fetch config, will use default configs";function yP(s,e){return eP(s.installations).then(t=>{const r=uP(s.app),o=dP(s.app),l=`https://firebaseremoteconfig.googleapis.com/v1/projects/${r}/namespaces/fireperf:fetch?key=${o}`,h=new Request(l,{method:"POST",headers:{Authorization:`${fP} ${t}`},body:JSON.stringify({app_instance_id:e,app_instance_id_token:t,app_id:SS(s.app),app_version:hS,sdk_version:hP})});return fetch(h).then(m=>{if(m.ok)return m.json();throw un.create("RC response not ok")})}).catch(()=>{_r.info(vP)})}function $b(s){if(!s)return s;const e=Ln.getInstance(),t=s.entries||{};return t.fpr_enabled!==void 0?e.loggingEnabled=String(t.fpr_enabled)==="true":e.loggingEnabled=us.loggingEnabled,t.fpr_log_source?e.logSource=Number(t.fpr_log_source):us.logSource&&(e.logSource=us.logSource),t.fpr_log_endpoint_url?e.logEndPointUrl=t.fpr_log_endpoint_url:us.logEndPointUrl&&(e.logEndPointUrl=us.logEndPointUrl),t.fpr_log_transport_key?e.transportKey=t.fpr_log_transport_key:us.transportKey&&(e.transportKey=us.transportKey),t.fpr_vc_network_request_sampling_rate!==void 0?e.networkRequestsSamplingRate=Number(t.fpr_vc_network_request_sampling_rate):us.networkRequestsSamplingRate!==void 0&&(e.networkRequestsSamplingRate=us.networkRequestsSamplingRate),t.fpr_vc_trace_sampling_rate!==void 0?e.tracesSamplingRate=Number(t.fpr_vc_trace_sampling_rate):us.tracesSamplingRate!==void 0&&(e.tracesSamplingRate=us.tracesSamplingRate),e.logTraceAfterSampling=Kb(e.tracesSamplingRate),e.logNetworkAfterSampling=Kb(e.networkRequestsSamplingRate),s}function _P(s){return Number(s)>Date.now()}function Kb(s){return Math.random()<=s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nv=1,Np;function wS(s){return Nv=2,Np=Np||TP(s),Np}function EP(){return Nv===3}function TP(s){return bP().then(()=>J2(s.installations)).then(e=>mP(s,e)).then(()=>Yb(),()=>Yb())}function bP(){const s=Vt.getInstance().document;return new Promise(e=>{if(s&&s.readyState!=="complete"){const t=()=>{s.readyState==="complete"&&(s.removeEventListener("readystatechange",t),e())};s.addEventListener("readystatechange",t)}else e()})}function Yb(){Nv=3}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xS=10*1e3,AP=5.5*1e3,NP=1e3,IS=3;let Qd=IS,ga=[],Qb=!1;function SP(){Qb||(Sv(AP),Qb=!0)}function Sv(s){setTimeout(()=>{Qd<=0||(ga.length>0&&CS(),Sv(xS))},s)}function CS(){const s=ga.splice(0,NP),e=s.map(r=>({source_extension_json_proto3:r.message,event_time_ms:String(r.eventTime)})),t={request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:Ln.getInstance().logSource,log_event:e};wP(t).then(()=>{Qd=IS}).catch(()=>{ga=[...s,...ga],Qd--,_r.info(`Tries left: ${Qd}.`),Sv(xS)})}function wP(s){const e=Ln.getInstance().getFlTransportFullUrl(),t=JSON.stringify(s);return navigator.sendBeacon&&navigator.sendBeacon(e,t)?Promise.resolve():fetch(e,{method:"POST",body:t,keepalive:!0}).then()}function xP(s){if(!s.eventTime||!s.message)throw un.create("invalid cc log");ga=[...ga,s]}function IP(s){return(...e)=>{const t=s(...e);xP({message:t,eventTime:Date.now()})}}function CP(){for(;ga.length>0;)CS()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ic;function RS(s,e){Ic||(Ic={send:IP(DP),flush:CP}),Ic.send(s,e)}function Ld(s){const e=Ln.getInstance();!e.instrumentationEnabled&&s.isAuto||!e.dataCollectionEnabled&&!s.isAuto||Vt.getInstance().requiredApisAvailable()&&(EP()?Sp(s):wS(s.performanceController).then(()=>Sp(s),()=>Sp(s)))}function RP(){Ic&&Ic.flush()}function Sp(s){if(!Av())return;const e=Ln.getInstance();!e.loggingEnabled||!e.logTraceAfterSampling||RS(s,1)}function jP(s){const e=Ln.getInstance();if(!e.instrumentationEnabled)return;const t=s.url,r=e.logEndPointUrl.split("?")[0],o=e.flTransportEndpointUrl.split("?")[0];t===r||t===o||!e.loggingEnabled||!e.logNetworkAfterSampling||RS(s,0)}function DP(s,e){return e===0?OP(s):MP(s)}function OP(s){const e={url:s.url,http_method:s.httpMethod||0,http_response_code:200,response_payload_bytes:s.responsePayloadBytes,client_start_time_us:s.startTimeUs,time_to_response_initiated_us:s.timeToResponseInitiatedUs,time_to_response_completed_us:s.timeToResponseCompletedUs},t={application_info:jS(s.performanceController.app),network_request_metric:e};return JSON.stringify(t)}function MP(s){const e={name:s.name,is_auto:s.isAuto,client_start_time_us:s.startTimeUs,duration_us:s.durationUs};Object.keys(s.counters).length!==0&&(e.counters=s.counters);const t=s.getAttributes();Object.keys(t).length!==0&&(e.custom_attributes=t);const r={application_info:jS(s.performanceController.app),trace_metric:e};return JSON.stringify(r)}function jS(s){return{google_app_id:SS(s),app_instance_id:Av(),web_app_info:{sdk_version:hS,page_url:Vt.getInstance().getUrl(),service_worker_status:rP(),visibility_state:aP(),effective_connection_type:oP()},application_process_state:0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xb(s,e){const t=e;if(!t||t.responseStart===void 0)return;const r=Vt.getInstance().getTimeOrigin(),o=Math.floor((t.startTime+r)*1e3),l=t.responseStart?Math.floor((t.responseStart-t.startTime)*1e3):void 0,h=Math.floor((t.responseEnd-t.startTime)*1e3),m=t.name&&t.name.split("?")[0],g={performanceController:s,url:m,responsePayloadBytes:t.transferSize,startTimeUs:o,timeToResponseInitiatedUs:l,timeToResponseCompletedUs:h};jP(g)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PP=100,kP="_",VP=[mS,pS,gS,vS,_S,yS];function LP(s,e){return s.length===0||s.length>PP?!1:e&&e.startsWith(fS)&&VP.indexOf(s)>-1||!s.startsWith(kP)}function UP(s){const e=Math.floor(s);return e<s&&_r.info(`Metric value should be an Integer, setting the value as : ${e}.`),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(e,t,r=!1,o){this.performanceController=e,this.name=t,this.isAuto=r,this.state=1,this.customAttributes={},this.counters={},this.api=Vt.getInstance(),this.randomId=Math.floor(Math.random()*1e6),this.isAuto||(this.traceStartMark=`${G2}-${this.randomId}-${this.name}`,this.traceStopMark=`${$2}-${this.randomId}-${this.name}`,this.traceMeasure=o||`${ig}-${this.randomId}-${this.name}`,o&&this.calculateTraceMetrics())}start(){if(this.state!==1)throw un.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2}stop(){if(this.state!==2)throw un.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),Ld(this)}record(e,t,r){if(e<=0)throw un.create("nonpositive trace startTime",{traceName:this.name});if(t<=0)throw un.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(t*1e3),this.startTimeUs=Math.floor(e*1e3),r&&r.attributes&&(this.customAttributes=Object.assign({},r.attributes)),r&&r.metrics)for(const o of Object.keys(r.metrics))isNaN(Number(r.metrics[o]))||(this.counters[o]=Math.floor(Number(r.metrics[o])));Ld(this)}incrementMetric(e,t=1){this.counters[e]===void 0?this.putMetric(e,t):this.putMetric(e,this.counters[e]+t)}putMetric(e,t){if(LP(e,this.name))this.counters[e]=UP(t??0);else throw un.create("invalid custom metric name",{customMetricName:e})}getMetric(e){return this.counters[e]||0}putAttribute(e,t){const r=lP(e),o=cP(t);if(r&&o){this.customAttributes[e]=t;return}if(!r)throw un.create("invalid attribute name",{attributeName:e});if(!o)throw un.create("invalid attribute value",{attributeValue:t})}getAttribute(e){return this.customAttributes[e]}removeAttribute(e){this.customAttributes[e]!==void 0&&delete this.customAttributes[e]}getAttributes(){return Object.assign({},this.customAttributes)}setStartTime(e){this.startTimeUs=e}setDuration(e){this.durationUs=e}calculateTraceMetrics(){const e=this.api.getEntriesByName(this.traceMeasure),t=e&&e[0];t&&(this.durationUs=Math.floor(t.duration*1e3),this.startTimeUs=Math.floor((t.startTime+this.api.getTimeOrigin())*1e3))}static createOobTrace(e,t,r,o,l){const h=Vt.getInstance().getUrl();if(!h)return;const m=new qc(e,fS+h,!0),g=Math.floor(Vt.getInstance().getTimeOrigin()*1e3);m.setStartTime(g),t&&t[0]&&(m.setDuration(Math.floor(t[0].duration*1e3)),m.putMetric("domInteractive",Math.floor(t[0].domInteractive*1e3)),m.putMetric("domContentLoadedEventEnd",Math.floor(t[0].domContentLoadedEventEnd*1e3)),m.putMetric("loadEventEnd",Math.floor(t[0].loadEventEnd*1e3)));const v="first-paint",_="first-contentful-paint";if(r){const A=r.find(O=>O.name===v);A&&A.startTime&&m.putMetric(mS,Math.floor(A.startTime*1e3));const b=r.find(O=>O.name===_);b&&b.startTime&&m.putMetric(pS,Math.floor(b.startTime*1e3)),l&&m.putMetric(gS,Math.floor(l*1e3))}this.addWebVitalMetric(m,vS,K2,o.lcp),this.addWebVitalMetric(m,_S,Q2,o.cls),this.addWebVitalMetric(m,yS,Y2,o.inp),Ld(m),RP()}static addWebVitalMetric(e,t,r,o){o&&(e.putMetric(t,Math.floor(o.value*1e3)),o.elementAttribution&&e.putAttribute(r,o.elementAttribution))}static createUserTimingTrace(e,t){const r=new qc(e,t,!1,t);Ld(r)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xd={},Wb=!1,DS;function Zb(s){Av()&&(setTimeout(()=>qP(s),0),setTimeout(()=>FP(s),0),setTimeout(()=>zP(s),0))}function FP(s){const e=Vt.getInstance(),t=e.getEntriesByType("resource");for(const r of t)Xb(s,r);e.setupObserver("resource",r=>Xb(s,r))}function qP(s){const e=Vt.getInstance();"onpagehide"in window?e.document.addEventListener("pagehide",()=>wp(s)):e.document.addEventListener("unload",()=>wp(s)),e.document.addEventListener("visibilitychange",()=>{e.document.visibilityState==="hidden"&&wp(s)}),e.onFirstInputDelay&&e.onFirstInputDelay(t=>{DS=t}),e.onLCP(t=>{var r;Xd.lcp={value:t.value,elementAttribution:(r=t.attribution)===null||r===void 0?void 0:r.element}}),e.onCLS(t=>{var r;Xd.cls={value:t.value,elementAttribution:(r=t.attribution)===null||r===void 0?void 0:r.largestShiftTarget}}),e.onINP(t=>{var r;Xd.inp={value:t.value,elementAttribution:(r=t.attribution)===null||r===void 0?void 0:r.interactionTarget}})}function zP(s){const e=Vt.getInstance(),t=e.getEntriesByType("measure");for(const r of t)Jb(s,r);e.setupObserver("measure",r=>Jb(s,r))}function Jb(s,e){const t=e.name;t.substring(0,ig.length)!==ig&&qc.createUserTimingTrace(s,t)}function wp(s){if(!Wb){Wb=!0;const e=Vt.getInstance(),t=e.getEntriesByType("navigation"),r=e.getEntriesByType("paint");setTimeout(()=>{qc.createOobTrace(s,t,r,Xd,DS)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BP{constructor(e,t){this.app=e,this.installations=t,this.initialized=!1}_init(e){this.initialized||(e?.dataCollectionEnabled!==void 0&&(this.dataCollectionEnabled=e.dataCollectionEnabled),e?.instrumentationEnabled!==void 0&&(this.instrumentationEnabled=e.instrumentationEnabled),Vt.getInstance().requiredApisAvailable()?cg().then(t=>{t&&(SP(),wS(this).then(()=>Zb(this),()=>Zb(this)),this.initialized=!0)}).catch(t=>{_r.info(`Environment doesn't support IndexedDB: ${t}`)}):_r.info('Firebase Performance cannot start if the browser does not support "Fetch" and "Promise", or cookies are disabled.'))}set instrumentationEnabled(e){Ln.getInstance().instrumentationEnabled=e}get instrumentationEnabled(){return Ln.getInstance().instrumentationEnabled}set dataCollectionEnabled(e){Ln.getInstance().dataCollectionEnabled=e}get dataCollectionEnabled(){return Ln.getInstance().dataCollectionEnabled}}const HP="[DEFAULT]";function GP(s=Hc()){return s=lt(s),Ai(s,"performance").getImmediate()}const $P=(s,{options:e})=>{const t=s.getProvider("app").getImmediate(),r=s.getProvider("installations-internal").getImmediate();if(t.name!==HP)throw un.create("FB not default");if(typeof window>"u")throw un.create("no window");Z2(window);const o=new BP(t,r);return o._init(e),o};function KP(){ts(new qn("performance",$P,"PUBLIC")),dn(Hb,sg),dn(Hb,sg,"esm2017")}KP();const YP={apiKey:"AIzaSyCbU834quCY8hjSffRwljJLgZrcxK8i2F4",authDomain:"liquidacionapp-62962.firebaseapp.com",projectId:"liquidacionapp-62962",storageBucket:"liquidacionapp-62962.firebasestorage.app",messagingSenderId:"851382130132",appId:"1:851382130132:web:eaba38fab449f14fb5b241"},ru=g0(YP);typeof window<"u"&&x2(ru);typeof window<"u"&&GP(ru);const Cc=b1(ru),rt=bO(ru);lM(ru);const hs={ADMIN:"admin",CONTADOR:"contador",CLIENTE:"cliente"},dt={MANAGE_INVENTORY:"canManageInventory",CREATE_MOVEMENTS:"canCreateMovements",VIEW_ALL_MOVEMENTS:"canViewAllMovements",MANAGE_VEHICLES:"canManageVehicles",MANAGE_SUPPLIERS:"canManageSuppliers",VIEW_REPORTS:"canViewReports",EXPORT_REPORTS:"canExportReports",MODIFY_SETTINGS:"canModifySettings"},QP="contacto.evert@gmail.com",OS=s=>{switch(s){case hs.ADMIN:return{[dt.MANAGE_INVENTORY]:!0,[dt.CREATE_MOVEMENTS]:!0,[dt.VIEW_ALL_MOVEMENTS]:!0,[dt.MANAGE_VEHICLES]:!0,[dt.MANAGE_SUPPLIERS]:!0,[dt.VIEW_REPORTS]:!0,[dt.EXPORT_REPORTS]:!0,[dt.MODIFY_SETTINGS]:!0};case hs.CONTADOR:return{[dt.MANAGE_INVENTORY]:!0,[dt.CREATE_MOVEMENTS]:!0,[dt.VIEW_ALL_MOVEMENTS]:!0,[dt.MANAGE_VEHICLES]:!1,[dt.MANAGE_SUPPLIERS]:!1,[dt.VIEW_REPORTS]:!0,[dt.EXPORT_REPORTS]:!0,[dt.MODIFY_SETTINGS]:!1};case hs.CLIENTE:default:return{[dt.MANAGE_INVENTORY]:!1,[dt.CREATE_MOVEMENTS]:!0,[dt.VIEW_ALL_MOVEMENTS]:!1,[dt.MANAGE_VEHICLES]:!1,[dt.MANAGE_SUPPLIERS]:!1,[dt.VIEW_REPORTS]:!1,[dt.EXPORT_REPORTS]:!1,[dt.MODIFY_SETTINGS]:!1}}},XP=s=>s===QP?hs.ADMIN:hs.CLIENTE,Bo=()=>"artifacts/1:851382130132:web:eaba38fab449f14fb5b241/invitations",WP=()=>{const s="ABCDEFGHIJKLMNPQRSTUVWXYZ123456789";let e="";for(let t=0;t<8;t++)e+=s.charAt(Math.floor(Math.random()*s.length));return e},ZP=async(s,e)=>{try{const t=await Zh(e);if(!t.success||t.userData.role!=="admin")return{success:!1,error:"Solo administradores pueden crear invitaciones"};let r,o=!1,l=0;for(;!o&&l<10;){r=WP();const g=ft(wn(rt,Bo()),Mt("code","==",r));(await xr(g)).empty&&(o=!0),l++}if(!o)return{success:!1,error:"No se pudo generar un código único"};const h=xn(wn(rt,Bo())),m={code:r,targetEmail:s.email.toLowerCase(),targetRole:s.role||hs.CLIENTE,targetName:s.name||"",status:"pending",appContext:"combustibles",expiresAt:new Date(Date.now()+7*24*60*60*1e3),createdAt:gs(),createdBy:e,usedAt:null,usedBy:null};return await cv(h,m),console.log("🎫 Invitación creada:",{code:r,email:s.email,role:s.role}),{success:!0,invitation:{id:h.id,code:r,...m}}}catch(t){return console.error("Error creating invitation:",t),{success:!1,error:t.message}}},MS=async s=>{try{const e=ft(wn(rt,Bo()),Mt("code","==",s.toUpperCase()),Mt("status","==","pending")),t=await xr(e);if(t.empty)return{success:!1,error:"Código de invitación inválido o expirado"};const r=t.docs[0],o=r.data(),l=new Date,h=o.expiresAt.toDate();return l>h?{success:!1,error:"Código de invitación expirado"}:{success:!0,invitation:{id:r.id,...o}}}catch(e){return console.error("Error validating invitation:",e),{success:!1,error:e.message}}},JP=async(s,e)=>{try{const t=xn(rt,Bo(),s);return await $h(t,{status:"used",usedAt:gs(),usedBy:e}),{success:!0}}catch(t){return console.error("Error marking invitation as used:",t),{success:!1,error:t.message}}},ek=async s=>{try{const e=await Zh(s);if(!e.success||e.userData.role!=="admin")return{success:!1,error:"Solo administradores pueden ver invitaciones"};const t=ft(wn(rt,Bo())),r=await xr(t),o=[];return r.forEach(l=>{o.push({id:l.id,...l.data()})}),o.sort((l,h)=>{const m=l.createdAt?.toDate()||new Date(0);return(h.createdAt?.toDate()||new Date(0))-m}),{success:!0,invitations:o}}catch(e){return console.error("Error getting invitations:",e),{success:!1,error:e.message}}},tk=async(s,e)=>{try{const t=await Zh(e);if(!t.success||t.userData.role!=="admin")return{success:!1,error:"Solo administradores pueden cancelar invitaciones"};const r=xn(rt,Bo(),s);return await $h(r,{status:"cancelled",cancelledAt:gs(),cancelledBy:e}),{success:!0}}catch(t){return console.error("Error cancelling invitation:",t),{success:!1,error:t.message}}},nk=s=>OS(s.targetRole),PS=async(s,e={})=>{const t=xn(rt,"artifacts/1:851382130132:web:eaba38fab449f14fb5b241/users",s.uid);try{const r=await Jo(t);if(r.exists())return{success:!0,userData:r.data(),isNewUser:!1};{const o=XP(s.email),l={uid:s.uid,email:s.email,displayName:s.displayName||"",photoURL:s.photoURL||"",role:o,emailVerified:s.emailVerified,combustiblesPermissions:OS(o),createdAt:new Date().toISOString(),lastLogin:new Date().toISOString(),...e};return await cv(t,l),{success:!0,userData:l,isNewUser:!0}}}catch(r){return console.error("Error creating/updating user profile:",r),{success:!1,error:r.message}}},e0=async(s,e,t={})=>{const r=xn(rt,"artifacts/1:851382130132:web:eaba38fab449f14fb5b241/users",s.uid);try{const o=await Jo(r);if(o.exists())return{success:!0,userData:o.data(),isNewUser:!1};const l=await MS(e);if(!l.success)return l;const h=l.invitation;if(h.targetEmail!==s.email.toLowerCase())return{success:!1,error:"El código de invitación no corresponde a este email"};const m={uid:s.uid,email:s.email,displayName:s.displayName||h.targetName||"",photoURL:s.photoURL||"",role:h.targetRole,emailVerified:s.emailVerified,combustiblesPermissions:nk(h),invitationUsed:h.id,createdAt:new Date().toISOString(),lastLogin:new Date().toISOString(),...t};return await cv(r,m),await JP(h.id,s.uid),console.log("👤 Usuario creado con invitación:",{email:s.email,role:h.targetRole,invitationCode:h.code}),{success:!0,userData:m,isNewUser:!0}}catch(o){return console.error("Error creating user profile with invitation:",o),{success:!1,error:o.message}}},Zh=async s=>{try{const e=xn(rt,"artifacts/1:851382130132:web:eaba38fab449f14fb5b241/users",s),t=await Jo(e);return t.exists()?{success:!0,userData:t.data()}:{success:!1,error:"Usuario no encontrado"}}catch(e){return console.error("Error fetching user profile:",e),{success:!1,error:e.message}}},kS=re.createContext(),Ia=()=>{const s=re.useContext(kS);if(s===void 0)throw new Error("useCombustibles must be used within a CombustiblesProvider");return s},sk=({children:s})=>{const[e,t]=re.useState(null),[r,o]=re.useState(null),[l,h]=re.useState(!0),[m,g]=re.useState(null),[v,_]=re.useState([]),[A,b]=re.useState([]),[O,I]=re.useState([]),[U,C]=re.useState([]);re.useEffect(()=>{const R=uR(Cc,async j=>{try{if(h(!0),j){t(j);let k=await Zh(j.uid);k.success||(k=await PS(j,{provider:"existing_account",appContext:"combustibles"})),k.success?o(k.userData):g("Error cargando perfil de usuario")}else t(null),o(null),_([]),b([]),I([]),C([])}catch(k){console.error("Error en autenticación:",k),g("Error de autenticación")}finally{h(!1)}});return()=>R()},[]);const S={user:e,userProfile:r,loading:l,error:m,hasPermission:R=>r?.combustiblesPermissions?.[R]||!1,isAdmin:()=>r?.role==="admin",isCounterOrAbove:()=>r?.role==="admin"||r?.role==="contador",inventory:v,movements:A,vehicles:O,suppliers:U,setInventory:_,setMovements:b,setVehicles:I,setSuppliers:C,refreshInventory:async()=>{console.log("Refrescando inventario...")},refreshMovements:async()=>{console.log("Refrescando movimientos...")},refreshVehicles:async()=>{console.log("Refrescando vehículos...")},refreshSuppliers:async()=>{console.log("Refrescando proveedores...")}};return u.jsx(kS.Provider,{value:S,children:s})},ik=({children:s,currentView:e,onViewChange:t})=>{const{userProfile:r,isAdmin:o,isCounterOrAbove:l}=Ia(),[h,m]=re.useState(!1),g=[{id:"dashboard",name:"Dashboard",icon:"📊",description:"Vista general",requiredPermission:null},{id:"inventory",name:"Inventario",icon:"🛢️",description:"Gestión de stock",requiredPermission:"canManageInventory"},{id:"movements",name:"Movimientos",icon:"📈",description:"Entradas y salidas",requiredPermission:"canCreateMovements"},{id:"vehicles",name:"Vehículos",icon:"🚜",description:"Maquinaria forestal",requiredPermission:null},{id:"suppliers",name:"Proveedores",icon:"🏪",description:"Gestión de proveedores",requiredPermission:"canManageSuppliers"},{id:"reports",name:"Reportes",icon:"📋",description:"Análisis y reportes",requiredPermission:"canViewReports"},{id:"admin",name:"Administración",icon:"⚙️",description:"Gestión de usuarios",requiredPermission:"admin"}],v=O=>{t(O),m(!1)},_=O=>O?O==="admin"?o():r?.combustiblesPermissions?.[O]||!1:!0,A=g.filter(O=>_(O.requiredPermission)),b=async()=>{try{await dR(Cc)}catch(O){console.error("Error al cerrar sesión:",O)}};return u.jsxs("div",{className:"dashboard-layout",children:[u.jsx("header",{className:"dashboard-header",children:u.jsxs("div",{className:"header-content",children:[u.jsx("button",{className:"sidebar-toggle",onClick:()=>m(!h),children:"☰"}),u.jsxs("div",{className:"header-title",children:[u.jsx("h1",{children:"⛽ Gestión de Combustibles"}),u.jsx("span",{className:"subtitle",children:"Forestech Colombia"})]}),u.jsxs("div",{className:"header-user",children:[u.jsxs("div",{className:"user-info",children:[u.jsx("span",{className:"user-name",children:r?.displayName||r?.email}),u.jsx("span",{className:"user-role",children:r?.role})]}),u.jsx("div",{className:"user-avatar",children:r?.photoURL?u.jsx("img",{src:r.photoURL,alt:"Avatar"}):u.jsx("div",{className:"avatar-placeholder",children:(r?.displayName||r?.email||"U").charAt(0).toUpperCase()})}),u.jsx("button",{className:"logout-button",onClick:b,title:"Cerrar sesión",children:"🚪"})]})]})}),u.jsxs("div",{className:"dashboard-body",children:[u.jsxs("aside",{className:`dashboard-sidebar ${h?"open":""}`,children:[u.jsx("nav",{className:"sidebar-nav",children:A.map(O=>u.jsxs("button",{className:`nav-item ${e===O.id?"active":""}`,onClick:()=>v(O.id),children:[u.jsx("span",{className:"nav-icon",children:O.icon}),u.jsxs("div",{className:"nav-content",children:[u.jsx("span",{className:"nav-name",children:O.name}),u.jsx("span",{className:"nav-description",children:O.description})]})]},O.id))}),u.jsx("div",{className:"sidebar-footer",children:u.jsxs("div",{className:"user-permissions",children:[u.jsx("h4",{children:"Permisos Activos:"}),u.jsxs("div",{className:"permission-list",children:[o()&&u.jsx("span",{className:"permission admin",children:"👑 Administrador"}),l()&&u.jsx("span",{className:"permission counter",children:"📊 Gestión Operativa"}),_("canManageInventory")&&u.jsx("span",{className:"permission",children:"🛢️ Inventario"}),_("canManageVehicles")&&u.jsx("span",{className:"permission",children:"🚜 Vehículos"})]})]})})]}),u.jsx("main",{className:"dashboard-main",children:u.jsx("div",{className:"main-content",children:s})})]}),h&&u.jsx("div",{className:"sidebar-overlay",onClick:()=>m(!1)})]})},ha={DIESEL:"diesel",GASOLINE:"gasoline",ACPM:"acpm",LUBRICANTS:"lubricants",TWO_STROKE:"two_stroke",MIXED:"mixed"},Ho={[ha.DIESEL]:{name:"Diésel",description:"Combustible para maquinaria pesada",unit:"galones",category:"Combustible",color:"#fbbf24",icon:"🚛",density:.85,priceUnit:"COP/galón"},[ha.GASOLINE]:{name:"Gasolina",description:"Combustible para vehículos livianos",unit:"galones",category:"Combustible",color:"#ef4444",icon:"⛽",density:.75,priceUnit:"COP/galón"},[ha.ACPM]:{name:"ACPM",description:"Aceite Combustible Para Motor",unit:"galones",category:"Combustible",color:"#8b5cf6",icon:"🚜",density:.85,priceUnit:"COP/galón"},[ha.LUBRICANTS]:{name:"Lubricantes",description:"Aceites y lubricantes para mantenimiento",unit:"litros",category:"Mantenimiento",color:"#06b6d4",icon:"🛢️",density:.9,priceUnit:"COP/litro"},[ha.TWO_STROKE]:{name:"Mezcla 2T",description:"Mezcla para motores de 2 tiempos (motosierras)",unit:"litros",category:"Especializado",color:"#10b981",icon:"🪚",density:.78,priceUnit:"COP/litro"},[ha.MIXED]:{name:"Mixto",description:"Compatible con múltiples tipos de combustible",unit:"galones",category:"Flexible",color:"#64748b",icon:"🔄",density:.8,priceUnit:"COP/galón"}},vn={CRITICAL:"critical",LOW:"low",MEDIUM:"medium",HIGH:"high",FULL:"full"},Ro={[vn.CRITICAL]:{label:"Crítico",color:"#dc2626",icon:"🚨",threshold:.1},[vn.LOW]:{label:"Bajo",color:"#ea580c",icon:"⚠️",threshold:.25},[vn.MEDIUM]:{label:"Medio",color:"#ca8a04",icon:"📊",threshold:.5},[vn.HIGH]:{label:"Alto",color:"#16a34a",icon:"✅",threshold:.75},[vn.FULL]:{label:"Completo",color:"#059669",icon:"🟢",threshold:1}},VS=(s,e)=>{if(e===0)return vn.CRITICAL;const t=s/e;return t<Ro[vn.CRITICAL].threshold?vn.CRITICAL:t<Ro[vn.LOW].threshold?vn.LOW:t<Ro[vn.MEDIUM].threshold?vn.MEDIUM:t<Ro[vn.HIGH].threshold?vn.HIGH:vn.FULL},Go="combustibles_inventory",rk=async(s,e)=>{try{const t=Ho[s.fuelType];if(!t)return{success:!1,error:"Tipo de combustible no válido"};const r=ft(wn(rt,Go),Mt("fuelType","==",s.fuelType),Mt("location","==",s.location));if(!(await xr(r)).empty)return{success:!1,error:`Ya existe ${t.name} en ${s.location}`};const l={fuelType:s.fuelType,name:t.name,description:s.description||t.description,currentStock:Number(s.currentStock)||0,maxCapacity:Number(s.maxCapacity),minThreshold:Number(s.minThreshold)||s.maxCapacity*.15,unit:t.unit,location:s.location,pricePerUnit:Number(s.pricePerUnit)||0,supplier:s.supplier||"",status:s.status||"active",createdAt:new Date,createdBy:e,lastUpdated:new Date,updatedBy:e};return{success:!0,data:{id:(await OO(wn(rt,Go),l)).id,...l},message:`${t.name} agregado al inventario exitosamente`}}catch(t){return console.error("Error creating inventory item:",t),{success:!1,error:t.message}}},LS=async()=>{try{const s=ft(wn(rt,Go),Zo("fuelType","asc")),e=await xr(s),t=[];return e.forEach(r=>{const o=r.data();t.push({id:r.id,...o,stockLevel:VS(o.currentStock,o.maxCapacity),stockPercentage:Math.round(o.currentStock/o.maxCapacity*100),needsRestock:o.currentStock<=o.minThreshold})}),{success:!0,data:t}}catch(s){return console.error("Error fetching inventory items:",s),{success:!1,error:s.message}}},ak=async(s,e,t)=>{try{const r=xn(rt,Go,s);if(!(await Jo(r)).exists())return{success:!1,error:"Item no encontrado"};const l={...e,lastUpdated:new Date,updatedBy:t};return delete l.id,delete l.createdAt,delete l.createdBy,await $h(r,l),{success:!0,message:"Item actualizado exitosamente",data:{id:s,...l}}}catch(r){return console.error("Error updating inventory item:",r),{success:!1,error:r.message}}},ok=async s=>{try{const e=xn(rt,Go,s);return(await Jo(e)).exists()?(await DO(e),{success:!0,message:"Item eliminado exitosamente"}):{success:!1,error:"Item no encontrado"}}catch(e){return console.error("Error deleting inventory item:",e),{success:!1,error:e.message}}},US=s=>{const e=ft(wn(rt,Go),Zo("fuelType","asc"));return uv(e,t=>{const r=[];t.forEach(o=>{const l=o.data();r.push({id:o.id,...l,stockLevel:VS(l.currentStock,l.maxCapacity),stockPercentage:Math.round(l.currentStock/l.maxCapacity*100),needsRestock:l.currentStock<=l.minThreshold})}),s(r)},t=>{console.error("Error in inventory subscription:",t),s(null,t)})},lk=async()=>{try{const s=await LS();if(!s.success)return s;const e=s.data,t={totalItems:e.length,activeItems:e.filter(r=>r.status==="active").length,lowStockItems:e.filter(r=>r.needsRestock).length,totalValue:e.reduce((r,o)=>r+o.currentStock*o.pricePerUnit,0),averageStockLevel:e.length>0?Math.round(e.reduce((r,o)=>r+o.stockPercentage,0)/e.length):0,byFuelType:{}};return e.forEach(r=>{t.byFuelType[r.fuelType]||(t.byFuelType[r.fuelType]={count:0,totalStock:0,totalCapacity:0,totalValue:0}),t.byFuelType[r.fuelType].count++,t.byFuelType[r.fuelType].totalStock+=r.currentStock,t.byFuelType[r.fuelType].totalCapacity+=r.maxCapacity,t.byFuelType[r.fuelType].totalValue+=r.currentStock*r.pricePerUnit}),{success:!0,data:t}}catch(s){return console.error("Error calculating inventory stats:",s),{success:!1,error:s.message}}},tl="combustibles_movements",t0="combustibles_inventory",Se={ENTRADA:"entrada",SALIDA:"salida",TRANSFERENCIA:"transferencia",AJUSTE:"ajuste"},Fe={PENDIENTE:"pendiente",COMPLETADO:"completado",CANCELADO:"cancelado"},ck=async s=>{try{mk(s);const e={...s,createdAt:gs(),updatedAt:gs(),status:Fe.PENDIENTE,totalValue:zS(s),effectiveDate:s.effectiveDate||gs()},t=await jN(rt,async r=>{const o=xn(wn(rt,tl));return r.set(o,e),await BS(r,e,o.id),o.id});return console.log("✅ Movimiento creado exitosamente:",t),t}catch(e){throw console.error("❌ Error al crear movimiento:",e),new Error(`Error al crear movimiento: ${e.message}`)}},uk=async(s={})=>{try{let e=wn(rt,tl);s.type&&(e=ft(e,Mt("type","==",s.type))),s.status&&(e=ft(e,Mt("status","==",s.status))),s.fuelType&&(e=ft(e,Mt("fuelType","==",s.fuelType))),s.vehicleId&&(e=ft(e,Mt("vehicleId","==",s.vehicleId))),e=ft(e,Zo("createdAt","desc"));const t=await xr(e),r=[];return t.forEach(o=>{r.push({id:o.id,...o.data(),createdAt:o.data().createdAt?.toDate?.()||o.data().createdAt,updatedAt:o.data().updatedAt?.toDate?.()||o.data().updatedAt,effectiveDate:o.data().effectiveDate?.toDate?.()||o.data().effectiveDate})}),r}catch(e){throw console.error("❌ Error al obtener movimientos:",e),new Error(`Error al obtener movimientos: ${e.message}`)}},dk=async s=>{try{if(!s)throw new Error("ID de movimiento requerido");const e=xn(rt,tl,s),t=await Jo(e);return t.exists()?{id:t.id,...t.data(),createdAt:t.data().createdAt?.toDate?.()||t.data().createdAt,updatedAt:t.data().updatedAt?.toDate?.()||t.data().updatedAt,effectiveDate:t.data().effectiveDate?.toDate?.()||t.data().effectiveDate}:null}catch(e){throw console.error("❌ Error al obtener movimiento:",e),new Error(`Error al obtener movimiento: ${e.message}`)}},FS=async(s,e)=>{try{if(!s)throw new Error("ID de movimiento requerido");const t={...e,updatedAt:gs(),...e.quantity||e.unitPrice?{totalValue:zS(e)}:{}},r=xn(rt,tl,s);await $h(r,t),console.log("✅ Movimiento actualizado exitosamente")}catch(t){throw console.error("❌ Error al actualizar movimiento:",t),new Error(`Error al actualizar movimiento: ${t.message}`)}},qS=(s,e={})=>{try{let t=wn(rt,tl);return e.type&&(t=ft(t,Mt("type","==",e.type))),e.status&&(t=ft(t,Mt("status","==",e.status))),t=ft(t,Zo("createdAt","desc")),uv(t,r=>{const o=[];r.forEach(l=>{o.push({id:l.id,...l.data(),createdAt:l.data().createdAt?.toDate?.()||l.data().createdAt,updatedAt:l.data().updatedAt?.toDate?.()||l.data().updatedAt,effectiveDate:l.data().effectiveDate?.toDate?.()||l.data().effectiveDate})}),s(o)},r=>{console.error("❌ Error en suscripción de movimientos:",r),s([],r)})}catch(t){throw console.error("❌ Error al configurar suscripción:",t),new Error(`Error en suscripción: ${t.message}`)}},hk=async s=>{try{const e=await dk(s);if(!e)throw new Error("Movimiento no encontrado");if(e.status!==Fe.PENDIENTE)throw new Error("Solo se pueden aprobar movimientos pendientes");await jN(rt,async t=>{const r=xn(rt,tl,s);t.update(r,{status:Fe.COMPLETADO,approvedAt:gs(),updatedAt:gs()}),await BS(t,e,s)}),console.log("✅ Movimiento aprobado exitosamente")}catch(e){throw console.error("❌ Error al aprobar movimiento:",e),new Error(`Error al aprobar movimiento: ${e.message}`)}},fk=async(s={})=>{try{const e=await uk(s),t={totalMovements:e.length,byType:{},byStatus:{},byFuelType:{},totalValue:0,totalQuantity:0,averageValue:0,thisMonth:0,lastMonth:0,thisWeek:0},r=new Date,o=new Date(r.getFullYear(),r.getMonth(),1),l=new Date(r.getFullYear(),r.getMonth()-1,1),h=new Date(r.setDate(r.getDate()-r.getDay()));return e.forEach(m=>{t.byType[m.type]=(t.byType[m.type]||0)+1,t.byStatus[m.status]=(t.byStatus[m.status]||0)+1,t.byFuelType[m.fuelType]=(t.byFuelType[m.fuelType]||0)+1,t.totalValue+=m.totalValue||0,t.totalQuantity+=m.quantity||0;const g=new Date(m.createdAt);g>=o&&t.thisMonth++,g>=l&&g<o&&t.lastMonth++,g>=h&&t.thisWeek++}),t.averageValue=t.totalMovements>0?t.totalValue/t.totalMovements:0,t}catch(e){throw console.error("❌ Error al calcular estadísticas:",e),new Error(`Error al calcular estadísticas: ${e.message}`)}},mk=s=>{const e=["type","fuelType","quantity","unitPrice"];for(const t of e)if(!s[t])throw new Error(`Campo requerido: ${t}`);if(!Object.values(Se).includes(s.type))throw new Error("Tipo de movimiento inválido");if(s.quantity<=0)throw new Error("La cantidad debe ser mayor a cero");if(s.unitPrice<0)throw new Error("El precio unitario no puede ser negativo");if(s.type===Se.SALIDA&&!s.vehicleId)throw new Error("Las salidas deben tener un vehículo asociado");if(s.type===Se.TRANSFERENCIA&&!s.destinationLocation)throw new Error("Las transferencias deben tener una ubicación destino")},zS=s=>(s.quantity||0)*(s.unitPrice||0),BS=async(s,e,t)=>{try{const r=ft(wn(rt,t0),Mt("fuelType","==",e.fuelType),Mt("location","==",e.location||"principal")),o=await xr(r);if(o.empty)throw new Error(`No se encontró inventario para ${e.fuelType} en ${e.location||"ubicación principal"}`);const l=o.docs[0],h=l.data(),m=xn(rt,t0,l.id);let g=h.currentStock;switch(e.type){case Se.ENTRADA:g+=e.quantity;break;case Se.SALIDA:if(g-=e.quantity,g<0)throw new Error("Stock insuficiente para realizar la salida");break;case Se.AJUSTE:g+=e.quantity,g<0&&(g=0);break;case Se.TRANSFERENCIA:if(g-=e.quantity,g<0)throw new Error("Stock insuficiente para realizar la transferencia");break}s.update(m,{currentStock:g,lastMovement:{movementId:t,type:e.type,quantity:e.quantity,date:gs()},updatedAt:gs()})}catch(r){throw console.error("❌ Error al actualizar inventario:",r),r}},HS="combustibles_vehicles",pe={EXCAVADORA:"excavadora",BULLDOZER:"bulldozer",CARGADOR:"cargador",CAMION:"camion",GRUA:"grua",MOTOSIERRA:"motosierra",TRACTOR:"tractor",VOLQUETA:"volqueta",OTROS:"otros"},je={ACTIVO:"activo",MANTENIMIENTO:"mantenimiento",INACTIVO:"inactivo",REPARACION:"reparacion"},yt={DIESEL:"Diesel",GASOLINA:"Gasolina",ACPM:"ACPM",MIXTO:"Mixto"},GS=async(s={})=>{try{let e=wn(rt,HS);s.type&&(e=ft(e,Mt("type","==",s.type))),s.status&&(e=ft(e,Mt("status","==",s.status))),s.fuelType&&(e=ft(e,Mt("fuelType","==",s.fuelType))),s.location&&(e=ft(e,Mt("currentLocation","==",s.location))),e=ft(e,Zo("vehicleId","asc"));const t=await xr(e),r=[];return t.forEach(o=>{r.push({id:o.id,...o.data(),createdAt:o.data().createdAt?.toDate?.()||o.data().createdAt,updatedAt:o.data().updatedAt?.toDate?.()||o.data().updatedAt,lastMovementDate:o.data().lastMovementDate?.toDate?.()||o.data().lastMovementDate,lastMaintenanceDate:o.data().lastMaintenanceDate?.toDate?.()||o.data().lastMaintenanceDate})}),r}catch(e){throw console.error("❌ Error al obtener vehículos:",e),new Error(`Error al obtener vehículos: ${e.message}`)}},$S=(s,e={})=>{try{let t=wn(rt,HS);return e.type&&(t=ft(t,Mt("type","==",e.type))),e.status&&(t=ft(t,Mt("status","==",e.status))),t=ft(t,Zo("vehicleId","asc")),uv(t,r=>{const o=[];r.forEach(l=>{o.push({id:l.id,...l.data(),createdAt:l.data().createdAt?.toDate?.()||l.data().createdAt,updatedAt:l.data().updatedAt?.toDate?.()||l.data().updatedAt,lastMovementDate:l.data().lastMovementDate?.toDate?.()||l.data().lastMovementDate,lastMaintenanceDate:l.data().lastMaintenanceDate?.toDate?.()||l.data().lastMaintenanceDate})}),s(o)},r=>{console.error("❌ Error en suscripción de vehículos:",r),s([],r)})}catch(t){throw console.error("❌ Error al configurar suscripción:",t),new Error(`Error en suscripción: ${t.message}`)}},pk=async(s={})=>{try{const e=await GS(s),t={totalVehicles:e.length,byType:{},byStatus:{},byFuelType:{},totalFuelConsumed:0,totalHoursWorked:0,averageConsumption:0,mostActiveVehicle:null,leastActiveVehicle:null};let r=0,o=1/0;return e.forEach(l=>{t.byType[l.type]=(t.byType[l.type]||0)+1,t.byStatus[l.status]=(t.byStatus[l.status]||0)+1,t.byFuelType[l.fuelType]=(t.byFuelType[l.fuelType]||0)+1,t.totalFuelConsumed+=l.totalFuelConsumed||0,t.totalHoursWorked+=l.totalHoursWorked||0;const h=l.totalMovements||0;h>r&&(r=h,t.mostActiveVehicle=l),h<o&&h>0&&(o=h,t.leastActiveVehicle=l)}),t.totalHoursWorked>0&&(t.averageConsumption=t.totalFuelConsumed/t.totalHoursWorked),t}catch(e){throw console.error("❌ Error al calcular estadísticas:",e),new Error(`Error al calcular estadísticas: ${e.message}`)}},n0=()=>{const[s,e]=re.useState({totalFuel:0,activeVehicles:0,pendingMovements:0,lowStockAlerts:0}),[t,r]=re.useState([]),[o,l]=re.useState(!0),[h,m]=re.useState(null),[g,v]=re.useState({inventory:!1,movements:!1,vehicles:!1});re.useEffect(()=>{l(!0),m(null);const b=US(U=>{const C=U.reduce((W,K)=>W+(K.currentStock||0),0),$=U.filter(W=>(W.currentStock||0)<(W.minThreshold||0)).length;e(W=>({...W,totalFuel:C,lowStockAlerts:$})),v(W=>({...W,inventory:!0}))}),O=qS(U=>{const C=U.filter(W=>W.status==="pending").length,$=U.sort((W,K)=>K.date.toMillis()-W.date.toMillis()).slice(0,5);e(W=>({...W,pendingMovements:C})),r($),v(W=>({...W,movements:!0}))},U=>{console.error("Error loading movements:",U),m("Error cargando movimientos")}),I=$S(U=>{const C=U.filter($=>$.status==="active").length;e($=>({...$,activeVehicles:C})),v($=>({...$,vehicles:!0}))},U=>{console.error("Error loading vehicles:",U),m("Error cargando vehículos")});return()=>{b(),O(),I()}},[]),re.useEffect(()=>{Object.values(g).every(O=>O)&&l(!1)},[g]);const _=re.useMemo(()=>b=>new Intl.NumberFormat("es-CO").format(b),[]),A=b=>{switch(b.type){case"entry":return`Entrada de ${b.quantity} ${b.unit} de ${b.fuelType}.`;case"exit":return`Salida de ${b.quantity} ${b.unit} para vehículo ${b.vehicleId||"N/A"}.`;case"transfer":return`Transferencia de ${b.quantity} ${b.unit} de ${b.fromLocation} a ${b.toLocation}.`;case"adjustment":return`Ajuste de inventario: ${b.quantity} ${b.unit} de ${b.fuelType}.`;default:return"Movimiento registrado."}};return o?u.jsxs("div",{className:"dashboard-main",children:[u.jsx("h1",{className:"dashboard-title",children:"Dashboard Operativo"}),u.jsx("p",{className:"dashboard-subtitle",children:"Cargando datos en tiempo real..."}),u.jsx("div",{className:"loading-spinner-container",children:u.jsx("div",{className:"loading-spinner"})})]}):h?u.jsxs("div",{className:"dashboard-main",children:[u.jsx("h1",{className:"dashboard-title",children:"Dashboard Operativo"}),u.jsxs("div",{className:"error-message",children:[u.jsxs("p",{children:["⚠️ ",h]}),u.jsx("button",{onClick:()=>window.location.reload(),children:"Reintentar"})]})]}):u.jsxs("div",{className:"dashboard-main",children:[u.jsx("h1",{className:"dashboard-title",children:"Dashboard Operativo"}),u.jsx("p",{className:"dashboard-subtitle",children:"Resumen general del estado de combustibles y maquinaria."}),u.jsxs("div",{className:"stats-grid",children:[u.jsxs("div",{className:"stat-card",children:[u.jsx("div",{className:"stat-icon fuel-icon",children:"🛢️"}),u.jsxs("div",{className:"stat-info",children:[u.jsx("p",{children:"Combustible Total"}),u.jsxs("h2",{children:[_(s.totalFuel)," gal"]})]})]}),u.jsxs("div",{className:"stat-card",children:[u.jsx("div",{className:"stat-icon vehicle-icon",children:"🚜"}),u.jsxs("div",{className:"stat-info",children:[u.jsx("p",{children:"Vehículos Activos"}),u.jsx("h2",{children:_(s.activeVehicles)})]})]}),u.jsxs("div",{className:"stat-card",children:[u.jsx("div",{className:"stat-icon movement-icon",children:"🔄"}),u.jsxs("div",{className:"stat-info",children:[u.jsx("p",{children:"Movimientos Pendientes"}),u.jsx("h2",{children:_(s.pendingMovements)})]})]}),u.jsxs("div",{className:`stat-card ${s.lowStockAlerts>0?"alert":""}`,children:[u.jsx("div",{className:"stat-icon alert-icon",children:"⚠️"}),u.jsxs("div",{className:"stat-info",children:[u.jsx("p",{children:"Alertas de Stock"}),u.jsx("h2",{children:_(s.lowStockAlerts)})]})]})]}),u.jsxs("div",{className:"dashboard-content",children:[u.jsxs("div",{className:"dashboard-widget",children:[u.jsx("h3",{children:"Actividad Reciente"}),t.length>0?u.jsx("ul",{children:t.map(b=>u.jsxs("li",{children:[u.jsx("span",{className:`movement-type-badge ${b.type}`,children:b.type}),A(b),u.jsx("span",{className:"movement-date",children:b.date.toDate().toLocaleDateString()})]},b.id))}):u.jsx("p",{children:"No hay movimientos recientes."})]}),u.jsxs("div",{className:"dashboard-widget",children:[u.jsx("h3",{children:"Consumo por Tipo de Combustible"}),u.jsx("div",{className:"chart-placeholder",children:u.jsx("p",{children:"Gráfico de consumo próximamente"})})]})]})]})},gk=({items:s,onEdit:e,onDelete:t,canManage:r})=>{const[o,l]=re.useState("name"),[h,m]=re.useState("asc"),g=I=>new Intl.NumberFormat("es-CO").format(I),v=I=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(I),_=I=>{const C=new Date-new Date(I.seconds?I.seconds*1e3:I),$=Math.floor(C/(1e3*60*60)),W=Math.floor($/24);return W>0?`${W}d`:$>0?`${$}h`:"ahora"},A=I=>{o===I?m(h==="asc"?"desc":"asc"):(l(I),m("asc"))},b=[...s].sort((I,U)=>{let C=I[o],$=U[o];return o==="lastUpdated"&&(C=new Date(C.seconds?C.seconds*1e3:C),$=new Date($.seconds?$.seconds*1e3:$)),C<$?h==="asc"?-1:1:C>$?h==="asc"?1:-1:0}),O=I=>o!==I?"↕️":h==="asc"?"↑":"↓";return u.jsxs("div",{className:"inventory-table-container",children:[u.jsx("div",{className:"table-wrapper",children:u.jsxs("table",{className:"inventory-table",children:[u.jsx("thead",{children:u.jsxs("tr",{children:[u.jsxs("th",{onClick:()=>A("name"),className:"sortable",children:["Combustible ",O("name")]}),u.jsxs("th",{onClick:()=>A("location"),className:"sortable",children:["Ubicación ",O("location")]}),u.jsxs("th",{onClick:()=>A("currentStock"),className:"sortable",children:["Stock Actual ",O("currentStock")]}),u.jsxs("th",{onClick:()=>A("stockPercentage"),className:"sortable",children:["Nivel ",O("stockPercentage")]}),u.jsxs("th",{onClick:()=>A("pricePerUnit"),className:"sortable",children:["Precio ",O("pricePerUnit")]}),u.jsx("th",{children:"Valor Total"}),u.jsxs("th",{onClick:()=>A("status"),className:"sortable",children:["Estado ",O("status")]}),u.jsxs("th",{onClick:()=>A("lastUpdated"),className:"sortable",children:["Actualizado ",O("lastUpdated")]}),r&&u.jsx("th",{children:"Acciones"})]})}),u.jsx("tbody",{children:b.map(I=>{const U=Ho[I.fuelType],C=Ro[I.stockLevel],$=I.currentStock*I.pricePerUnit;return u.jsxs("tr",{className:I.needsRestock?"needs-restock":"",children:[u.jsx("td",{className:"fuel-cell",children:u.jsxs("div",{className:"fuel-info",children:[u.jsx("span",{className:"fuel-icon",style:{color:U?.color},children:U?.icon}),u.jsxs("div",{children:[u.jsx("div",{className:"fuel-name",children:U?.name}),u.jsx("div",{className:"fuel-type",children:I.fuelType})]})]})}),u.jsx("td",{children:I.location}),u.jsxs("td",{className:"stock-cell",children:[u.jsxs("div",{className:"stock-info",children:[u.jsx("span",{className:"stock-amount",children:g(I.currentStock)}),u.jsxs("span",{className:"stock-unit",children:["/ ",g(I.maxCapacity)," ",I.unit]})]}),I.needsRestock&&u.jsx("div",{className:"restock-indicator",children:"⚠️ Bajo mínimo"})]}),u.jsx("td",{className:"level-cell",children:u.jsxs("div",{className:"level-info",children:[u.jsxs("div",{className:"level-badge",style:{backgroundColor:C?.color,color:"white"},children:[I.stockPercentage,"%"]}),u.jsx("div",{className:"level-bar",children:u.jsx("div",{className:"level-fill",style:{width:`${I.stockPercentage}%`,backgroundColor:C?.color}})})]})}),u.jsx("td",{className:"price-cell",children:u.jsxs("div",{className:"price-info",children:[u.jsx("span",{className:"price-amount",children:v(I.pricePerUnit)}),u.jsxs("span",{className:"price-unit",children:["/ ",I.unit]})]})}),u.jsx("td",{className:"value-cell",children:u.jsx("span",{className:"total-value",children:v($)})}),u.jsx("td",{className:"status-cell",children:u.jsxs("span",{className:`status-badge ${I.status}`,children:[u.jsx("span",{className:"status-dot"}),I.status==="active"?"Activo":I.status==="inactive"?"Inactivo":I.status==="maintenance"?"Mantenimiento":I.status]})}),u.jsx("td",{className:"updated-cell",children:u.jsx("span",{className:"time-ago",children:_(I.lastUpdated)})}),r&&u.jsx("td",{className:"actions-cell",children:u.jsxs("div",{className:"action-buttons",children:[u.jsx("button",{className:"btn btn-sm btn-secondary",onClick:()=>e(I),title:"Editar",children:"✏️"}),u.jsx("button",{className:"btn btn-sm btn-danger",onClick:()=>t(I),title:"Eliminar",children:"🗑️"})]})})]},I.id)})})]})}),u.jsxs("div",{className:"table-footer",children:[u.jsxs("div",{className:"table-info",children:[b.length," items ordenados por ",o,"(",h==="asc"?"ascendente":"descendente",")"]}),u.jsxs("div",{className:"table-legend",children:[u.jsxs("span",{className:"legend-item",children:[u.jsx("span",{className:"legend-dot critical"}),"Crítico"]}),u.jsxs("span",{className:"legend-item",children:[u.jsx("span",{className:"legend-dot low"}),"Bajo"]}),u.jsxs("span",{className:"legend-item",children:[u.jsx("span",{className:"legend-dot normal"}),"Normal"]}),u.jsxs("span",{className:"legend-item",children:[u.jsx("span",{className:"legend-dot high"}),"Alto"]})]})]})]})},vk=({items:s,onEdit:e,onDelete:t,canManage:r})=>{const o=m=>new Intl.NumberFormat("es-CO").format(m),l=m=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(m),h=m=>{const v=new Date-new Date(m.seconds?m.seconds*1e3:m),_=Math.floor(v/(1e3*60*60)),A=Math.floor(_/24);return A>0?`hace ${A} día${A>1?"s":""}`:_>0?`hace ${_} hora${_>1?"s":""}`:"hace unos minutos"};return u.jsx("div",{className:"inventory-cards-grid",children:s.map(m=>{const g=Ho[m.fuelType],v=Ro[m.stockLevel],_=m.currentStock*m.pricePerUnit;return u.jsxs("div",{className:"inventory-card",children:[u.jsxs("div",{className:"card-header",children:[u.jsxs("div",{className:"fuel-info",children:[u.jsx("span",{className:"fuel-icon",style:{color:g?.color},children:g?.icon}),u.jsxs("div",{className:"fuel-details",children:[u.jsx("h3",{children:g?.name}),u.jsx("p",{className:"location",children:m.location})]})]}),u.jsx("div",{className:"stock-status",children:u.jsxs("span",{className:"status-badge",style:{backgroundColor:v?.color,color:"white"},children:[v?.icon," ",v?.label]})})]}),u.jsxs("div",{className:"stock-progress",children:[u.jsxs("div",{className:"progress-header",children:[u.jsxs("span",{className:"stock-text",children:[o(m.currentStock)," / ",o(m.maxCapacity)," ",m.unit]}),u.jsxs("span",{className:"percentage",children:[m.stockPercentage,"%"]})]}),u.jsx("div",{className:"progress-bar",children:u.jsx("div",{className:"progress-fill",style:{width:`${m.stockPercentage}%`,backgroundColor:v?.color}})}),m.needsRestock&&u.jsxs("div",{className:"restock-warning",children:["⚠️ Bajo nivel mínimo (",o(m.minThreshold)," ",m.unit,")"]})]}),u.jsxs("div",{className:"card-metrics",children:[u.jsxs("div",{className:"metric",children:[u.jsxs("span",{className:"metric-label",children:["Precio por ",m.unit,":"]}),u.jsx("span",{className:"metric-value",children:l(m.pricePerUnit)})]}),u.jsxs("div",{className:"metric",children:[u.jsx("span",{className:"metric-label",children:"Valor total:"}),u.jsx("span",{className:"metric-value",children:l(_)})]}),m.supplier&&u.jsxs("div",{className:"metric",children:[u.jsx("span",{className:"metric-label",children:"Proveedor:"}),u.jsx("span",{className:"metric-value",children:m.supplier})]})]}),u.jsxs("div",{className:"card-footer",children:[u.jsxs("div",{className:"status-info",children:[u.jsx("span",{className:`status-dot ${m.status}`}),u.jsx("span",{className:"status-text",children:m.status==="active"?"Activo":m.status==="inactive"?"Inactivo":m.status==="maintenance"?"Mantenimiento":m.status})]}),u.jsxs("div",{className:"last-update",children:["Actualizado ",h(m.lastUpdated)]})]}),r&&u.jsxs("div",{className:"card-actions",children:[u.jsx("button",{className:"btn btn-secondary btn-sm",onClick:()=>e(m),title:"Editar combustible",children:"✏️ Editar"}),u.jsx("button",{className:"btn btn-danger btn-sm",onClick:()=>t(m),title:"Eliminar combustible",children:"🗑️ Eliminar"})]}),m.description&&m.description!==g?.description&&u.jsx("div",{className:"card-description",children:u.jsx("p",{children:m.description})})]},m.id)})})},yk=({item:s,onClose:e,onSuccess:t})=>{const{userProfile:r}=Ia(),o=!!s,[l,h]=re.useState({fuelType:"",location:"",currentStock:"",maxCapacity:"",minThreshold:"",pricePerUnit:"",supplier:"",description:"",status:"active"}),[m,g]=re.useState({}),[v,_]=re.useState(!1);re.useEffect(()=>{o&&s&&h({fuelType:s.fuelType||"",location:s.location||"",currentStock:s.currentStock||"",maxCapacity:s.maxCapacity||"",minThreshold:s.minThreshold||"",pricePerUnit:s.pricePerUnit||"",supplier:s.supplier||"",description:s.description||"",status:s.status||"active"})},[o,s]),re.useEffect(()=>{if(l.maxCapacity&&!l.minThreshold){const U=Math.round(Number(l.maxCapacity)*.15);h(C=>({...C,minThreshold:U}))}},[l.maxCapacity]);const A=U=>{const{name:C,value:$}=U.target;h(W=>({...W,[C]:$})),m[C]&&g(W=>({...W,[C]:null}))},b=()=>{const U={};l.fuelType||(U.fuelType="Tipo de combustible es requerido"),l.location||(U.location="Ubicación es requerida"),l.maxCapacity||(U.maxCapacity="Capacidad máxima es requerida");const C=Number(l.currentStock),$=Number(l.maxCapacity),W=Number(l.minThreshold),K=Number(l.pricePerUnit);return l.currentStock&&(isNaN(C)||C<0)&&(U.currentStock="Stock actual debe ser un número válido mayor o igual a 0"),l.maxCapacity&&(isNaN($)||$<=0)&&(U.maxCapacity="Capacidad máxima debe ser un número válido mayor a 0"),l.minThreshold&&(isNaN(W)||W<0)&&(U.minThreshold="Umbral mínimo debe ser un número válido mayor o igual a 0"),l.pricePerUnit&&(isNaN(K)||K<0)&&(U.pricePerUnit="Precio debe ser un número válido mayor o igual a 0"),C>$&&(U.currentStock="Stock actual no puede ser mayor a la capacidad máxima"),W>$&&(U.minThreshold="Umbral mínimo no puede ser mayor a la capacidad máxima"),g(U),Object.keys(U).length===0},O=async U=>{if(U.preventDefault(),!!b()){_(!0);try{let C;o?C=await ak(s.id,{location:l.location,currentStock:Number(l.currentStock)||0,maxCapacity:Number(l.maxCapacity),minThreshold:Number(l.minThreshold)||Number(l.maxCapacity)*.15,pricePerUnit:Number(l.pricePerUnit)||0,supplier:l.supplier,description:l.description,status:l.status},r.uid):C=await rk({fuelType:l.fuelType,location:l.location,currentStock:Number(l.currentStock)||0,maxCapacity:Number(l.maxCapacity),minThreshold:Number(l.minThreshold)||Number(l.maxCapacity)*.15,pricePerUnit:Number(l.pricePerUnit)||0,supplier:l.supplier,description:l.description,status:l.status},r.uid),C.success?(alert(C.message),t()):alert(`Error: ${C.error}`)}catch(C){console.error("Error saving inventory item:",C),alert("Error inesperado al guardar el item")}finally{_(!1)}}},I=Ho[l.fuelType];return u.jsx("div",{className:"modal-overlay",onClick:e,children:u.jsxs("div",{className:"modal-content inventory-modal",onClick:U=>U.stopPropagation(),children:[u.jsxs("div",{className:"modal-header",children:[u.jsx("h2",{children:o?"✏️ Editar Combustible":"➕ Agregar Nuevo Combustible"}),u.jsx("button",{className:"modal-close",onClick:e,children:"✕"})]}),u.jsxs("form",{onSubmit:O,className:"modal-form",children:[u.jsxs("div",{className:"form-grid",children:[u.jsxs("div",{className:"form-group",children:[u.jsxs("label",{htmlFor:"fuelType",children:["Tipo de Combustible *",I&&u.jsxs("span",{className:"fuel-preview",children:[I.icon," ",I.name]})]}),u.jsxs("select",{id:"fuelType",name:"fuelType",value:l.fuelType,onChange:A,disabled:o,className:m.fuelType?"error":"",required:!0,children:[u.jsx("option",{value:"",children:"Seleccionar tipo..."}),Object.entries(ha).map(([U,C])=>{const $=Ho[C];return u.jsxs("option",{value:C,children:[$.icon," ",$.name," (",$.unit,")"]},U)})]}),m.fuelType&&u.jsx("span",{className:"error-text",children:m.fuelType})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"location",children:"Ubicación / Tanque *"}),u.jsx("input",{type:"text",id:"location",name:"location",value:l.location,onChange:A,placeholder:"ej. Tanque Principal, Depósito A, Bodega Norte",className:m.location?"error":"",required:!0}),m.location&&u.jsx("span",{className:"error-text",children:m.location})]}),u.jsxs("div",{className:"form-group",children:[u.jsxs("label",{htmlFor:"currentStock",children:["Stock Actual ",I&&`(${I.unit})`]}),u.jsx("input",{type:"number",id:"currentStock",name:"currentStock",value:l.currentStock,onChange:A,placeholder:"0",min:"0",step:"0.01",className:m.currentStock?"error":""}),m.currentStock&&u.jsx("span",{className:"error-text",children:m.currentStock})]}),u.jsxs("div",{className:"form-group",children:[u.jsxs("label",{htmlFor:"maxCapacity",children:["Capacidad Máxima * ",I&&`(${I.unit})`]}),u.jsx("input",{type:"number",id:"maxCapacity",name:"maxCapacity",value:l.maxCapacity,onChange:A,placeholder:"1000",min:"1",step:"0.01",className:m.maxCapacity?"error":"",required:!0}),m.maxCapacity&&u.jsx("span",{className:"error-text",children:m.maxCapacity})]}),u.jsxs("div",{className:"form-group",children:[u.jsxs("label",{htmlFor:"minThreshold",children:["Umbral Mínimo ",I&&`(${I.unit})`,u.jsx("span",{className:"field-hint",children:"Para alertas de stock bajo"})]}),u.jsx("input",{type:"number",id:"minThreshold",name:"minThreshold",value:l.minThreshold,onChange:A,placeholder:"Auto: 15% de capacidad máxima",min:"0",step:"0.01",className:m.minThreshold?"error":""}),m.minThreshold&&u.jsx("span",{className:"error-text",children:m.minThreshold}),l.maxCapacity&&u.jsxs("span",{className:"field-hint",children:["Sugerido: ",Math.round(Number(l.maxCapacity)*.15)," ",I?.unit||"unidades"]})]}),u.jsxs("div",{className:"form-group",children:[u.jsxs("label",{htmlFor:"pricePerUnit",children:["Precio por ",I?.unit||"Unidad"]}),u.jsx("input",{type:"number",id:"pricePerUnit",name:"pricePerUnit",value:l.pricePerUnit,onChange:A,placeholder:"12000",min:"0",step:"0.01",className:m.pricePerUnit?"error":""}),m.pricePerUnit&&u.jsx("span",{className:"error-text",children:m.pricePerUnit})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"supplier",children:"Proveedor Principal"}),u.jsx("input",{type:"text",id:"supplier",name:"supplier",value:l.supplier,onChange:A,placeholder:"ej. Petrobras, Terpel, Mobil"})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"status",children:"Estado"}),u.jsxs("select",{id:"status",name:"status",value:l.status,onChange:A,children:[u.jsx("option",{value:"active",children:"Activo"}),u.jsx("option",{value:"inactive",children:"Inactivo"}),u.jsx("option",{value:"maintenance",children:"Mantenimiento"})]})]}),u.jsxs("div",{className:"form-group full-width",children:[u.jsx("label",{htmlFor:"description",children:"Descripción / Notas"}),u.jsx("textarea",{id:"description",name:"description",value:l.description,onChange:A,placeholder:"Información adicional sobre este combustible...",rows:"3"})]})]}),I&&l.maxCapacity&&u.jsxs("div",{className:"form-preview",children:[u.jsx("h4",{children:"📊 Vista Previa"}),u.jsxs("div",{className:"preview-card",children:[u.jsxs("div",{className:"preview-header",children:[u.jsxs("span",{style:{color:I.color},children:[I.icon," ",I.name]}),u.jsx("span",{children:l.location})]}),u.jsxs("div",{className:"preview-capacity",children:[l.currentStock||0," / ",l.maxCapacity," ",I.unit,l.currentStock&&l.maxCapacity&&u.jsxs("span",{className:"preview-percentage",children:["(",Math.round(Number(l.currentStock)/Number(l.maxCapacity)*100),"%)"]})]}),l.pricePerUnit&&u.jsxs("div",{className:"preview-value",children:["Valor total: ",new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format((Number(l.currentStock)||0)*Number(l.pricePerUnit))]})]})]}),u.jsxs("div",{className:"modal-actions",children:[u.jsx("button",{type:"button",onClick:e,className:"btn btn-secondary",children:"Cancelar"}),u.jsx("button",{type:"submit",className:"btn btn-primary",disabled:v,children:v?"Guardando...":o?"Actualizar":"Crear"})]})]})]})})},_k=({stats:s})=>{const e=r=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(r),t=r=>new Intl.NumberFormat("es-CO").format(r);return u.jsxs("div",{className:"inventory-stats",children:[u.jsxs("div",{className:"stats-grid",children:[u.jsxs("div",{className:"stat-card primary",children:[u.jsx("div",{className:"stat-icon",children:"💰"}),u.jsxs("div",{className:"stat-content",children:[u.jsx("h3",{children:"Valor Total"}),u.jsx("div",{className:"stat-value",children:e(s.totalValue)}),u.jsxs("div",{className:"stat-subtitle",children:[t(s.totalItems)," tipos de combustible"]})]})]}),u.jsxs("div",{className:"stat-card success",children:[u.jsx("div",{className:"stat-icon",children:"✅"}),u.jsxs("div",{className:"stat-content",children:[u.jsx("h3",{children:"Items Activos"}),u.jsx("div",{className:"stat-value",children:s.activeItems}),u.jsxs("div",{className:"stat-subtitle",children:[Math.round(s.activeItems/s.totalItems*100),"% del total"]})]})]}),u.jsxs("div",{className:`stat-card ${s.lowStockItems>0?"warning":"info"}`,children:[u.jsx("div",{className:"stat-icon",children:s.lowStockItems>0?"⚠️":"📊"}),u.jsxs("div",{className:"stat-content",children:[u.jsx("h3",{children:"Stock Bajo"}),u.jsx("div",{className:"stat-value",children:s.lowStockItems}),u.jsx("div",{className:"stat-subtitle",children:s.lowStockItems>0?"Requieren atención":"Niveles normales"})]})]}),u.jsxs("div",{className:"stat-card info",children:[u.jsx("div",{className:"stat-icon",children:"📈"}),u.jsxs("div",{className:"stat-content",children:[u.jsx("h3",{children:"Nivel Promedio"}),u.jsxs("div",{className:"stat-value",children:[s.averageStockLevel,"%"]}),u.jsx("div",{className:"stat-subtitle",children:"Capacidad promedio utilizada"})]})]})]}),u.jsxs("div",{className:"fuel-type-summary",children:[u.jsx("h4",{children:"📊 Resumen por Tipo de Combustible"}),u.jsx("div",{className:"fuel-types-grid",children:Object.entries(s.byFuelType).map(([r,o])=>{const l=Ho[r],h=o.totalCapacity>0?Math.round(o.totalStock/o.totalCapacity*100):0;return u.jsxs("div",{className:"fuel-type-card",children:[u.jsxs("div",{className:"fuel-header",children:[u.jsx("span",{className:"fuel-icon",style:{color:l?.color||"#6b7280"},children:l?.icon||"⛽"}),u.jsxs("div",{className:"fuel-info",children:[u.jsx("h5",{children:l?.name||r}),u.jsxs("span",{className:"fuel-count",children:[o.count," ubicaciones"]})]})]}),u.jsxs("div",{className:"fuel-metrics",children:[u.jsxs("div",{className:"metric",children:[u.jsx("span",{className:"metric-label",children:"Stock Total:"}),u.jsxs("span",{className:"metric-value",children:[t(o.totalStock)," ",l?.unit||"unidades"]})]}),u.jsxs("div",{className:"metric",children:[u.jsx("span",{className:"metric-label",children:"Capacidad:"}),u.jsxs("span",{className:"metric-value",children:[t(o.totalCapacity)," ",l?.unit||"unidades"]})]}),u.jsxs("div",{className:"metric",children:[u.jsx("span",{className:"metric-label",children:"Utilización:"}),u.jsxs("span",{className:`metric-value ${h<25?"low":h>75?"high":"normal"}`,children:[h,"%"]})]}),u.jsxs("div",{className:"metric",children:[u.jsx("span",{className:"metric-label",children:"Valor:"}),u.jsx("span",{className:"metric-value",children:e(o.totalValue)})]})]}),u.jsx("div",{className:"progress-bar",children:u.jsx("div",{className:"progress-fill",style:{width:`${h}%`,backgroundColor:l?.color||"#6b7280"}})})]},r)})}),Object.keys(s.byFuelType).length===0&&u.jsx("div",{className:"empty-fuel-types",children:u.jsx("p",{children:"No hay tipos de combustible registrados en el inventario."})})]})]})},Ek=()=>{const{hasPermission:s}=Ia(),[e,t]=re.useState([]),[r,o]=re.useState(null),[l,h]=re.useState(!0),[m,g]=re.useState(null),[v,_]=re.useState("cards"),[A,b]=re.useState(!1),[O,I]=re.useState(null),[U,C]=re.useState("all"),[$,W]=re.useState("");re.useEffect(()=>{let R=null;return(()=>{R=US((k,M)=>{if(M){console.error("Error in inventory subscription:",M),g("Error cargando inventario en tiempo real");return}t(k||[]),h(!1)})})(),()=>{R&&R()}},[]),re.useEffect(()=>{(async()=>{const j=await lk();j.success&&o(j.data)})()},[e]);const K=e.filter(R=>{if(U==="active"&&R.status!=="active"||U==="low-stock"&&!R.needsRestock)return!1;if($){const j=$.toLowerCase();return R.name.toLowerCase().includes(j)||R.location.toLowerCase().includes(j)||R.fuelType.toLowerCase().includes(j)}return!0}),Z=()=>{if(!s("canManageInventory")){alert("No tienes permisos para crear items de inventario");return}I(null),b(!0)},q=R=>{if(!s("canManageInventory")){alert("No tienes permisos para editar items de inventario");return}I(R),b(!0)},oe=async R=>{if(!s("canManageInventory")){alert("No tienes permisos para eliminar items de inventario");return}if(!window.confirm(`¿Estás seguro de eliminar ${R.name} de ${R.location}?

Esta acción no se puede deshacer.`))return;h(!0);const k=await ok(R.id);k.success?alert("Item eliminado exitosamente"):(g(k.error),alert(`Error al eliminar: ${k.error}`)),h(!1)},D=()=>{b(!1),I(null)},S=()=>{D()};return l&&e.length===0?u.jsxs("div",{className:"inventory-loading",children:[u.jsx("div",{className:"loading-spinner"}),u.jsx("p",{children:"Cargando inventario..."})]}):u.jsxs("div",{className:"inventory-main",children:[u.jsxs("div",{className:"inventory-header",children:[u.jsxs("div",{className:"header-title",children:[u.jsx("h2",{children:"🛢️ Gestión de Inventario"}),u.jsx("p",{children:"Control de stock de combustibles en tiempo real"})]}),s("canManageInventory")&&u.jsx("button",{className:"btn btn-primary",onClick:Z,children:"➕ Agregar Combustible"})]}),r&&u.jsx(_k,{stats:r}),u.jsxs("div",{className:"inventory-controls",children:[u.jsxs("div",{className:"search-filters",children:[u.jsx("input",{type:"text",placeholder:"Buscar por nombre, ubicación o tipo...",value:$,onChange:R=>W(R.target.value),className:"search-input"}),u.jsxs("select",{value:U,onChange:R=>C(R.target.value),className:"filter-select",children:[u.jsx("option",{value:"all",children:"Todos los items"}),u.jsx("option",{value:"active",children:"Solo activos"}),u.jsx("option",{value:"low-stock",children:"Stock bajo"})]})]}),u.jsxs("div",{className:"view-toggle",children:[u.jsx("button",{className:`toggle-btn ${v==="cards"?"active":""}`,onClick:()=>_("cards"),children:"📱 Cards"}),u.jsx("button",{className:`toggle-btn ${v==="table"?"active":""}`,onClick:()=>_("table"),children:"📊 Tabla"})]})]}),m&&u.jsxs("div",{className:"error-banner",children:[u.jsxs("span",{children:["⚠️ ",m]}),u.jsx("button",{onClick:()=>g(null),children:"✕"})]}),u.jsx("div",{className:"inventory-content",children:K.length===0?u.jsxs("div",{className:"empty-state",children:[u.jsx("div",{className:"empty-icon",children:"📦"}),u.jsx("h3",{children:"No hay items de inventario"}),u.jsx("p",{children:$||U!=="all"?"No se encontraron items con los filtros aplicados":"Comienza agregando tu primer tipo de combustible al inventario"}),s("canManageInventory")&&u.jsx("button",{className:"btn btn-primary",onClick:Z,children:"➕ Agregar Primer Combustible"})]}):u.jsx(u.Fragment,{children:v==="cards"?u.jsx(vk,{items:K,onEdit:q,onDelete:oe,canManage:s("canManageInventory")}):u.jsx(gk,{items:K,onEdit:q,onDelete:oe,canManage:s("canManageInventory")})})}),K.length>0&&u.jsx("div",{className:"results-footer",children:u.jsxs("p",{children:["Mostrando ",K.length," de ",e.length," items",$&&` · Filtro: "${$}"`,U!=="all"&&` · Estado: ${U}`]})}),A&&u.jsx(yk,{item:O,onClose:D,onSuccess:S})]})},Tk=({stats:s,filters:e})=>{if(!s)return null;const t=g=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0,maximumFractionDigits:0}).format(g),r=g=>new Intl.NumberFormat("es-CO").format(g),o=(g,v)=>v===0?g>0?100:0:((g-v)/v*100).toFixed(1),l=g=>{switch(g){case Se.ENTRADA:return"#10b981";case Se.SALIDA:return"#ef4444";case Se.TRANSFERENCIA:return"#3b82f6";case Se.AJUSTE:return"#f59e0b";default:return"#6b7280"}},h=g=>{switch(g){case Se.ENTRADA:return"📥";case Se.SALIDA:return"📤";case Se.TRANSFERENCIA:return"🔄";case Se.AJUSTE:return"⚖️";default:return"📋"}},m=o(s.thisMonth,s.lastMonth);return u.jsxs("div",{className:"movements-stats",children:[u.jsxs("div",{className:"stats-grid",children:[u.jsxs("div",{className:"stat-card primary",children:[u.jsx("div",{className:"stat-icon",children:"📊"}),u.jsxs("div",{className:"stat-content",children:[u.jsx("div",{className:"stat-value",children:r(s.totalMovements)}),u.jsx("div",{className:"stat-label",children:"Total Movimientos"}),u.jsxs("div",{className:"stat-trend",children:[u.jsxs("span",{className:`trend ${m>=0?"positive":"negative"}`,children:[m>=0?"📈":"📉"," ",Math.abs(m),"%"]}),u.jsx("span",{className:"trend-label",children:"vs mes anterior"})]})]})]}),u.jsxs("div",{className:"stat-card",children:[u.jsx("div",{className:"stat-icon",children:"💰"}),u.jsxs("div",{className:"stat-content",children:[u.jsx("div",{className:"stat-value",children:t(s.totalValue)}),u.jsx("div",{className:"stat-label",children:"Valor Total"}),u.jsxs("div",{className:"stat-secondary",children:["Promedio: ",t(s.averageValue)]})]})]}),u.jsxs("div",{className:"stat-card",children:[u.jsx("div",{className:"stat-icon",children:"⛽"}),u.jsxs("div",{className:"stat-content",children:[u.jsx("div",{className:"stat-value",children:r(s.totalQuantity)}),u.jsx("div",{className:"stat-label",children:"Galones Total"}),u.jsxs("div",{className:"stat-secondary",children:["Promedio: ",r(s.totalQuantity/(s.totalMovements||1))," gal/mov"]})]})]}),u.jsxs("div",{className:"stat-card",children:[u.jsx("div",{className:"stat-icon",children:"📅"}),u.jsxs("div",{className:"stat-content",children:[u.jsx("div",{className:"stat-value",children:r(s.thisWeek)}),u.jsx("div",{className:"stat-label",children:"Esta Semana"}),u.jsxs("div",{className:"stat-secondary",children:[r(s.thisMonth)," este mes"]})]})]})]}),u.jsxs("div",{className:"stats-breakdown",children:[u.jsxs("div",{className:"breakdown-section",children:[u.jsx("h4",{children:"📋 Por Tipo de Movimiento"}),u.jsx("div",{className:"breakdown-grid",children:Object.entries(s.byType).map(([g,v])=>{const _=(v/s.totalMovements*100).toFixed(1);return u.jsxs("div",{className:"breakdown-item",children:[u.jsxs("div",{className:"breakdown-header",children:[u.jsx("span",{className:"breakdown-icon",children:h(g)}),u.jsx("span",{className:"breakdown-label",children:g.charAt(0).toUpperCase()+g.slice(1)})]}),u.jsx("div",{className:"breakdown-value",children:v}),u.jsx("div",{className:"breakdown-bar",children:u.jsx("div",{className:"breakdown-fill",style:{width:`${_}%`,backgroundColor:l(g)}})}),u.jsxs("div",{className:"breakdown-percentage",children:[_,"%"]})]},g)})})]}),u.jsxs("div",{className:"breakdown-section",children:[u.jsx("h4",{children:"⚡ Por Estado"}),u.jsx("div",{className:"breakdown-grid",children:Object.entries(s.byStatus).map(([g,v])=>{const _=(v/s.totalMovements*100).toFixed(1),A=O=>{switch(O){case Fe.COMPLETADO:return"#10b981";case Fe.PENDIENTE:return"#f59e0b";case Fe.CANCELADO:return"#ef4444";default:return"#6b7280"}},b=O=>{switch(O){case Fe.COMPLETADO:return"✅";case Fe.PENDIENTE:return"⏳";case Fe.CANCELADO:return"❌";default:return"❓"}};return u.jsxs("div",{className:"breakdown-item",children:[u.jsxs("div",{className:"breakdown-header",children:[u.jsx("span",{className:"breakdown-icon",children:b(g)}),u.jsx("span",{className:"breakdown-label",children:g.charAt(0).toUpperCase()+g.slice(1)})]}),u.jsx("div",{className:"breakdown-value",children:v}),u.jsx("div",{className:"breakdown-bar",children:u.jsx("div",{className:"breakdown-fill",style:{width:`${_}%`,backgroundColor:A(g)}})}),u.jsxs("div",{className:"breakdown-percentage",children:[_,"%"]})]},g)})})]}),u.jsxs("div",{className:"breakdown-section",children:[u.jsx("h4",{children:"⛽ Por Tipo de Combustible"}),u.jsx("div",{className:"breakdown-grid",children:Object.entries(s.byFuelType).map(([g,v])=>{const _=(v/s.totalMovements*100).toFixed(1),A=b=>{switch(b?.toLowerCase()){case"diesel":return"🚛";case"gasolina":return"🚗";case"acpm":return"🚚";case"lubricante":return"🛢️";default:return"⛽"}};return u.jsxs("div",{className:"breakdown-item",children:[u.jsxs("div",{className:"breakdown-header",children:[u.jsx("span",{className:"breakdown-icon",children:A(g)}),u.jsx("span",{className:"breakdown-label",children:g})]}),u.jsx("div",{className:"breakdown-value",children:v}),u.jsx("div",{className:"breakdown-bar",children:u.jsx("div",{className:"breakdown-fill",style:{width:`${_}%`,backgroundColor:"#059669"}})}),u.jsxs("div",{className:"breakdown-percentage",children:[_,"%"]})]},g)})})]})]}),(e.type||e.status||e.fuelType||e.vehicleId)&&u.jsxs("div",{className:"active-filters",children:[u.jsx("h4",{children:"🔍 Filtros Activos"}),u.jsxs("div",{className:"filters-list",children:[e.type&&u.jsxs("span",{className:"filter-tag",children:["Tipo: ",e.type]}),e.status&&u.jsxs("span",{className:"filter-tag",children:["Estado: ",e.status]}),e.fuelType&&u.jsxs("span",{className:"filter-tag",children:["Combustible: ",e.fuelType]}),e.vehicleId&&u.jsxs("span",{className:"filter-tag",children:["Vehículo: ",e.vehicleId]})]})]})]})},bk=({filters:s,onFilterChange:e,onClearFilters:t,searchTerm:r,onSearchChange:o,viewMode:l,onViewModeChange:h,totalResults:m})=>{const[g,v]=re.useState(!1),_=[{value:"Diesel",label:"Diesel 🚛"},{value:"Gasolina",label:"Gasolina 🚗"},{value:"ACPM",label:"ACPM 🚚"},{value:"Lubricante",label:"Lubricante 🛢️"}],A=[{value:"all",label:"Todos los períodos"},{value:"today",label:"Hoy"},{value:"week",label:"Esta semana"},{value:"month",label:"Este mes"},{value:"quarter",label:"Este trimestre"},{value:"year",label:"Este año"}],b=Object.values(s).filter(U=>U&&U!==""&&U!=="all").length,O=(U,C)=>{e({[U]:C})},I=U=>{e(U)};return u.jsxs("div",{className:"movements-filters",children:[u.jsxs("div",{className:"filters-main",children:[u.jsx("div",{className:"search-section",children:u.jsxs("div",{className:"search-box",children:[u.jsx("span",{className:"search-icon",children:"🔍"}),u.jsx("input",{type:"text",placeholder:"Buscar por combustible, vehículo, referencia...",value:r,onChange:U=>o(U.target.value),className:"search-input"}),r&&u.jsx("button",{className:"search-clear",onClick:()=>o(""),title:"Limpiar búsqueda",children:"✕"})]})}),u.jsxs("div",{className:"filters-controls",children:[u.jsxs("div",{className:"quick-filters",children:[u.jsx("button",{className:`quick-filter ${s.type===Se.ENTRADA?"active":""}`,onClick:()=>I({type:Se.ENTRADA}),children:"📥 Entradas"}),u.jsx("button",{className:`quick-filter ${s.type===Se.SALIDA?"active":""}`,onClick:()=>I({type:Se.SALIDA}),children:"📤 Salidas"}),u.jsx("button",{className:`quick-filter ${s.status===Fe.PENDIENTE?"active":""}`,onClick:()=>I({status:Fe.PENDIENTE}),children:"⏳ Pendientes"})]}),u.jsxs("button",{className:`btn-advanced-filters ${g?"active":""}`,onClick:()=>v(!g),children:["🎛️ Filtros",b>0&&u.jsx("span",{className:"filters-count",children:b})]}),u.jsxs("div",{className:"view-modes",children:[u.jsx("button",{className:`view-mode ${l==="cards"?"active":""}`,onClick:()=>h("cards"),title:"Vista en tarjetas",children:"🎴"}),u.jsx("button",{className:`view-mode ${l==="table"?"active":""}`,onClick:()=>h("table"),title:"Vista en tabla",children:"📋"})]})]})]}),g&&u.jsxs("div",{className:"filters-advanced",children:[u.jsxs("div",{className:"filters-grid",children:[u.jsxs("div",{className:"filter-group",children:[u.jsx("label",{children:"Tipo de Movimiento"}),u.jsxs("select",{value:s.type,onChange:U=>O("type",U.target.value),className:"filter-select",children:[u.jsx("option",{value:"",children:"Todos los tipos"}),u.jsx("option",{value:Se.ENTRADA,children:"📥 Entrada"}),u.jsx("option",{value:Se.SALIDA,children:"📤 Salida"}),u.jsx("option",{value:Se.TRANSFERENCIA,children:"🔄 Transferencia"}),u.jsx("option",{value:Se.AJUSTE,children:"⚖️ Ajuste"})]})]}),u.jsxs("div",{className:"filter-group",children:[u.jsx("label",{children:"Estado"}),u.jsxs("select",{value:s.status,onChange:U=>O("status",U.target.value),className:"filter-select",children:[u.jsx("option",{value:"",children:"Todos los estados"}),u.jsx("option",{value:Fe.PENDIENTE,children:"⏳ Pendiente"}),u.jsx("option",{value:Fe.COMPLETADO,children:"✅ Completado"}),u.jsx("option",{value:Fe.CANCELADO,children:"❌ Cancelado"})]})]}),u.jsxs("div",{className:"filter-group",children:[u.jsx("label",{children:"Tipo de Combustible"}),u.jsxs("select",{value:s.fuelType,onChange:U=>O("fuelType",U.target.value),className:"filter-select",children:[u.jsx("option",{value:"",children:"Todos los combustibles"}),_.map(U=>u.jsx("option",{value:U.value,children:U.label},U.value))]})]}),u.jsxs("div",{className:"filter-group",children:[u.jsx("label",{children:"Período"}),u.jsx("select",{value:s.dateRange,onChange:U=>O("dateRange",U.target.value),className:"filter-select",children:A.map(U=>u.jsx("option",{value:U.value,children:U.label},U.value))})]}),u.jsxs("div",{className:"filter-group",children:[u.jsx("label",{children:"Vehículo/Equipo"}),u.jsx("input",{type:"text",placeholder:"ID del vehículo...",value:s.vehicleId,onChange:U=>O("vehicleId",U.target.value),className:"filter-input"})]})]}),u.jsxs("div",{className:"filters-actions",children:[u.jsx("button",{className:"btn-clear-filters",onClick:t,disabled:b===0,children:"🗑️ Limpiar Filtros"}),u.jsxs("div",{className:"filters-info",children:[u.jsxs("span",{className:"results-count",children:[m," resultado",m!==1?"s":""]}),b>0&&u.jsxs("span",{className:"active-filters-text",children:["(",b," filtro",b!==1?"s":""," activo",b!==1?"s":"",")"]})]})]})]}),u.jsx("div",{className:"keyboard-shortcuts",style:{display:"none"},children:u.jsx("small",{children:"💡 Atajos: Ctrl+F (buscar), Ctrl+1 (entradas), Ctrl+2 (salidas), Ctrl+3 (pendientes)"})})]})},Ak=({movements:s,onEdit:e,onView:t,onApprove:r,onReject:o,userRole:l})=>{const h=I=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0,maximumFractionDigits:0}).format(I),m=I=>I?(I instanceof Date?I:new Date(I)).toLocaleDateString("es-CO",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"Sin fecha",g=I=>{if(!I)return"";const U=new Date,C=I instanceof Date?I:new Date(I),$=Math.abs(U-C),W=Math.ceil($/(1e3*60*60*24));return W===1?"hace 1 día":W<7?`hace ${W} días`:W<30?`hace ${Math.ceil(W/7)} semanas`:W<365?`hace ${Math.ceil(W/30)} meses`:`hace ${Math.ceil(W/365)} años`},v=I=>{switch(I){case Se.ENTRADA:return"movement-entrada";case Se.SALIDA:return"movement-salida";case Se.TRANSFERENCIA:return"movement-transferencia";case Se.AJUSTE:return"movement-ajuste";default:return"movement-default"}},_=I=>{switch(I){case Fe.COMPLETADO:return"status-completado";case Fe.PENDIENTE:return"status-pendiente";case Fe.CANCELADO:return"status-cancelado";default:return"status-default"}},A=I=>{switch(I){case Se.ENTRADA:return"📥";case Se.SALIDA:return"📤";case Se.TRANSFERENCIA:return"🔄";case Se.AJUSTE:return"⚖️";default:return"📋"}},b=I=>{switch(I?.toLowerCase()){case"diesel":return"🚛";case"gasolina":return"🚗";case"acpm":return"🚚";case"lubricante":return"🛢️";default:return"⛽"}},O=I=>{switch(I){case Fe.COMPLETADO:return"✅";case Fe.PENDIENTE:return"⏳";case Fe.CANCELADO:return"❌";default:return"❓"}};return u.jsx("div",{className:"movements-cards",children:s.map(I=>u.jsxs("div",{className:`movement-card ${v(I.type)}`,children:[u.jsxs("div",{className:"card-header",children:[u.jsxs("div",{className:"movement-type",children:[u.jsx("span",{className:"type-icon",children:A(I.type)}),u.jsx("span",{className:"type-label",children:I.type.charAt(0).toUpperCase()+I.type.slice(1)})]}),u.jsxs("div",{className:`status-badge ${_(I.status)}`,children:[u.jsx("span",{className:"status-icon",children:O(I.status)}),u.jsx("span",{className:"status-label",children:I.status.charAt(0).toUpperCase()+I.status.slice(1)})]})]}),u.jsxs("div",{className:"card-content",children:[u.jsxs("div",{className:"fuel-info",children:[u.jsx("span",{className:"fuel-icon",children:b(I.fuelType)}),u.jsx("span",{className:"fuel-type",children:I.fuelType}),u.jsxs("span",{className:"quantity",children:[I.quantity," galones"]})]}),u.jsxs("div",{className:"value-info",children:[u.jsx("div",{className:"total-value",children:h(I.totalValue)}),u.jsxs("div",{className:"unit-price",children:[h(I.unitPrice),"/galón"]})]}),I.vehicleId&&u.jsxs("div",{className:"vehicle-info",children:[u.jsx("span",{className:"vehicle-icon",children:"🚜"}),u.jsxs("span",{className:"vehicle-id",children:["Vehículo: ",I.vehicleId]})]}),I.location&&u.jsxs("div",{className:"location-info",children:[u.jsx("span",{className:"location-icon",children:"📍"}),u.jsx("span",{className:"location",children:I.location})]}),I.description&&u.jsx("div",{className:"description",children:u.jsx("p",{children:I.description})}),I.reference&&u.jsxs("div",{className:"reference",children:[u.jsx("span",{className:"reference-label",children:"Ref:"}),u.jsx("span",{className:"reference-value",children:I.reference})]})]}),u.jsxs("div",{className:"card-footer",children:[u.jsxs("div",{className:"date-info",children:[u.jsx("div",{className:"created-date",children:m(I.createdAt)}),u.jsx("div",{className:"relative-time",children:g(I.createdAt)})]}),u.jsxs("div",{className:"card-actions",children:[l==="admin"&&I.status===Fe.PENDIENTE&&u.jsxs("div",{className:"admin-actions",children:[u.jsx("button",{className:"btn-approve",onClick:()=>r(I.id),title:"Aprobar movimiento",children:"✓ Aprobar"}),u.jsx("button",{className:"btn-reject",onClick:()=>o(I.id),title:"Rechazar movimiento",children:"✗ Rechazar"})]}),u.jsxs("div",{className:"user-actions",children:[u.jsx("button",{className:"btn-view",onClick:()=>t(I),title:"Ver detalles",children:"👁️ Ver"}),e&&I.status===Fe.PENDIENTE&&u.jsx("button",{className:"btn-edit",onClick:()=>e(I),title:"Editar movimiento",children:"✏️ Editar"})]})]})]}),I.status===Fe.PENDIENTE&&u.jsx("div",{className:"urgency-indicator",children:u.jsx("div",{className:"urgency-pulse"})}),I.type===Se.AJUSTE&&u.jsx("div",{className:"adjustment-badge",children:u.jsx("span",{children:"Ajuste"})}),I.type===Se.TRANSFERENCIA&&I.destinationLocation&&u.jsxs("div",{className:"transfer-info",children:[u.jsx("span",{className:"transfer-arrow",children:"→"}),u.jsx("span",{className:"destination",children:I.destinationLocation})]})]},I.id))})},Nk=({movements:s,onEdit:e,onView:t,onApprove:r,onReject:o,userRole:l})=>{const[h,m]=re.useState("createdAt"),[g,v]=re.useState("desc"),_=K=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0,maximumFractionDigits:0}).format(K),A=K=>K?(K instanceof Date?K:new Date(K)).toLocaleDateString("es-CO",{day:"2-digit",month:"2-digit",year:"2-digit",hour:"2-digit",minute:"2-digit"}):"Sin fecha",b=K=>{switch(K){case Se.ENTRADA:return"📥";case Se.SALIDA:return"📤";case Se.TRANSFERENCIA:return"🔄";case Se.AJUSTE:return"⚖️";default:return"📋"}},O=K=>{switch(K?.toLowerCase()){case"diesel":return"🚛";case"gasolina":return"🚗";case"acpm":return"🚚";case"lubricante":return"🛢️";default:return"⛽"}},I=K=>{switch(K){case Fe.COMPLETADO:return"✅";case Fe.PENDIENTE:return"⏳";case Fe.CANCELADO:return"❌";default:return"❓"}},U=K=>{switch(K){case Fe.COMPLETADO:return"status-completado";case Fe.PENDIENTE:return"status-pendiente";case Fe.CANCELADO:return"status-cancelado";default:return"status-default"}},C=K=>{h===K?v(g==="asc"?"desc":"asc"):(m(K),v("asc"))},$=[...s].sort((K,Z)=>{let q=K[h],oe=Z[h];return(h.includes("Date")||h.includes("At"))&&(q=new Date(q),oe=new Date(oe)),typeof q=="number"&&typeof oe=="number"?g==="asc"?q-oe:oe-q:typeof q=="string"&&typeof oe=="string"?g==="asc"?q.localeCompare(oe):oe.localeCompare(q):q instanceof Date&&oe instanceof Date?g==="asc"?q-oe:oe-q:0}),W=K=>h!==K?"↕️":g==="asc"?"↑":"↓";return u.jsxs("div",{className:"movements-table-container",children:[u.jsx("div",{className:"table-wrapper",children:u.jsxs("table",{className:"movements-table",children:[u.jsx("thead",{children:u.jsxs("tr",{children:[u.jsxs("th",{className:"sortable",onClick:()=>C("type"),children:["Tipo ",W("type")]}),u.jsxs("th",{className:"sortable",onClick:()=>C("fuelType"),children:["Combustible ",W("fuelType")]}),u.jsxs("th",{className:"sortable text-right",onClick:()=>C("quantity"),children:["Cantidad ",W("quantity")]}),u.jsxs("th",{className:"sortable text-right",onClick:()=>C("unitPrice"),children:["Precio/Gal ",W("unitPrice")]}),u.jsxs("th",{className:"sortable text-right",onClick:()=>C("totalValue"),children:["Valor Total ",W("totalValue")]}),u.jsx("th",{children:"Vehículo"}),u.jsx("th",{children:"Ubicación"}),u.jsxs("th",{className:"sortable",onClick:()=>C("status"),children:["Estado ",W("status")]}),u.jsxs("th",{className:"sortable",onClick:()=>C("createdAt"),children:["Fecha ",W("createdAt")]}),u.jsx("th",{className:"actions-column",children:"Acciones"})]})}),u.jsx("tbody",{children:$.map(K=>u.jsxs("tr",{className:`movement-row ${K.status===Fe.PENDIENTE?"pending-row":""}`,children:[u.jsx("td",{className:"type-cell",children:u.jsxs("div",{className:"type-content",children:[u.jsx("span",{className:"type-icon",children:b(K.type)}),u.jsx("span",{className:"type-text",children:K.type.charAt(0).toUpperCase()+K.type.slice(1)})]})}),u.jsx("td",{className:"fuel-cell",children:u.jsxs("div",{className:"fuel-content",children:[u.jsx("span",{className:"fuel-icon",children:O(K.fuelType)}),u.jsx("span",{className:"fuel-text",children:K.fuelType})]})}),u.jsxs("td",{className:"quantity-cell text-right",children:[u.jsx("span",{className:"quantity-value",children:K.quantity}),u.jsx("span",{className:"quantity-unit",children:"gal"})]}),u.jsx("td",{className:"price-cell text-right",children:_(K.unitPrice)}),u.jsx("td",{className:"value-cell text-right",children:u.jsx("strong",{children:_(K.totalValue)})}),u.jsx("td",{className:"vehicle-cell",children:K.vehicleId?u.jsxs("span",{className:"vehicle-id",children:["🚜 ",K.vehicleId]}):u.jsx("span",{className:"no-vehicle",children:"-"})}),u.jsx("td",{className:"location-cell",children:u.jsxs("span",{className:"location-text",children:["📍 ",K.location||"Principal"]})}),u.jsx("td",{className:"status-cell",children:u.jsxs("div",{className:`status-badge ${U(K.status)}`,children:[u.jsx("span",{className:"status-icon",children:I(K.status)}),u.jsx("span",{className:"status-text",children:K.status.charAt(0).toUpperCase()+K.status.slice(1)})]})}),u.jsx("td",{className:"date-cell",children:u.jsxs("div",{className:"date-content",children:[u.jsx("span",{className:"date-value",children:A(K.createdAt)}),K.reference&&u.jsxs("span",{className:"reference-small",children:["#",K.reference]})]})}),u.jsx("td",{className:"actions-cell",children:u.jsxs("div",{className:"action-buttons",children:[u.jsx("button",{className:"btn-action btn-view",onClick:()=>t(K),title:"Ver detalles",children:"👁️"}),l==="admin"&&K.status===Fe.PENDIENTE&&u.jsxs(u.Fragment,{children:[u.jsx("button",{className:"btn-action btn-approve",onClick:()=>r(K.id),title:"Aprobar movimiento",children:"✓"}),u.jsx("button",{className:"btn-action btn-reject",onClick:()=>o(K.id),title:"Rechazar movimiento",children:"✗"})]}),e&&K.status===Fe.PENDIENTE&&u.jsx("button",{className:"btn-action btn-edit",onClick:()=>e(K),title:"Editar movimiento",children:"✏️"})]})})]},K.id))})]})}),u.jsxs("div",{className:"table-info",children:[u.jsxs("div",{className:"table-summary",children:[u.jsxs("span",{className:"total-rows",children:[s.length," movimiento",s.length!==1?"s":""]}),h&&u.jsxs("span",{className:"sort-info",children:["Ordenado por ",h," (",g==="asc"?"ascendente":"descendente",")"]})]}),u.jsxs("div",{className:"table-legend",children:[u.jsxs("span",{className:"legend-item",children:[u.jsx("span",{className:"legend-icon",children:"⏳"})," Pendiente"]}),u.jsxs("span",{className:"legend-item",children:[u.jsx("span",{className:"legend-icon",children:"✅"})," Completado"]}),u.jsxs("span",{className:"legend-item",children:[u.jsx("span",{className:"legend-icon",children:"❌"})," Cancelado"]})]})]})]})},Sk=({movements:s,viewMode:e,onEdit:t,onView:r,userRole:o})=>e==="table"?u.jsx(Nk,{movements:s,onEdit:t,onView:r,userRole:o}):u.jsx(Ak,{movements:s,onEdit:t,onView:r,userRole:o}),wk=({isOpen:s,onClose:e,movement:t,mode:r,onSuccess:o})=>{const[l,h]=re.useState({type:"",fuelType:"",quantity:"",unitPrice:"",location:"Principal",vehicleId:"",destinationLocation:"",description:"",reference:"",effectiveDate:new Date().toISOString().slice(0,16)}),[m,g]=re.useState(!1),[v,_]=re.useState(""),[A,b]=re.useState({}),[O,I]=re.useState([]),[U,C]=re.useState(!1),[$,W]=re.useState([]),[K,Z]=re.useState(""),q=[{value:"Diesel",label:"Diesel 🚛",price:12500},{value:"Gasolina",label:"Gasolina 🚗",price:14200},{value:"ACPM",label:"ACPM 🚚",price:13800},{value:"Lubricante",label:"Lubricante 🛢️",price:45e3}],oe=["Principal","Bodega Norte","Bodega Sur","Campo Operativo","Estación Móvil"];re.useEffect(()=>{(async()=>{if(s){C(!0);try{const[ye,Ae]=await Promise.all([GS(),LS()]);I(ye),W(Ae.success?Ae.data:[])}catch(ye){console.error("Error al cargar datos:",ye)}finally{C(!1)}}})()},[s]),re.useEffect(()=>{t&&(r==="edit"||r==="view")?h({type:t.type||"",fuelType:t.fuelType||"",quantity:t.quantity?.toString()||"",unitPrice:t.unitPrice?.toString()||"",location:t.location||"Principal",vehicleId:t.vehicleId||"",destinationLocation:t.destinationLocation||"",description:t.description||"",reference:t.reference||"",effectiveDate:t.effectiveDate?new Date(t.effectiveDate).toISOString().slice(0,16):new Date().toISOString().slice(0,16)}):r==="create"&&h({type:"",fuelType:"",quantity:"",unitPrice:"",location:"Principal",vehicleId:"",destinationLocation:"",description:"",reference:"",effectiveDate:new Date().toISOString().slice(0,16)}),_(""),b({})},[t,r,s]),re.useEffect(()=>{if(l.fuelType&&!l.unitPrice){const w=q.find(ye=>ye.value===l.fuelType);w&&h(ye=>({...ye,unitPrice:w.price.toString()}))}},[l.fuelType]),re.useEffect(()=>{(()=>{if(Z(""),(l.type===Se.SALIDA||l.type===Se.TRANSFERENCIA)&&l.fuelType&&l.location&&l.quantity&&$.length>0){const ye=$.find(ie=>ie.fuelType===l.fuelType&&ie.location===l.location);if(!ye){Z(`⚠️ No hay inventario de ${l.fuelType} en ${l.location}`);return}const Ae=parseFloat(l.quantity),Q=ye.currentStock||0;Ae>Q?Z(`⚠️ Stock insuficiente. Disponible: ${Q.toFixed(2)} gal, Solicitado: ${Ae.toFixed(2)} gal`):Ae>Q*.8&&Z(`⚠️ Atención: Esta salida dejará poco stock (${(Q-Ae).toFixed(2)} gal restantes)`)}})()},[l.type,l.fuelType,l.location,l.quantity,$]);const D=(w,ye)=>{h(Ae=>({...Ae,[w]:ye})),A[w]&&b(Ae=>({...Ae,[w]:""}))},S=()=>{const w={};if(l.type||(w.type="Tipo de movimiento requerido"),l.fuelType||(w.fuelType="Tipo de combustible requerido"),l.quantity?parseFloat(l.quantity)<=0&&(w.quantity="La cantidad debe ser mayor a cero"):w.quantity="Cantidad requerida",l.unitPrice?parseFloat(l.unitPrice)<0&&(w.unitPrice="El precio no puede ser negativo"):w.unitPrice="Precio unitario requerido",l.type===Se.SALIDA&&!l.vehicleId&&(w.vehicleId="Las salidas requieren un vehículo"),l.type===Se.TRANSFERENCIA&&!l.destinationLocation&&(w.destinationLocation="Las transferencias requieren una ubicación destino"),(l.type===Se.SALIDA||l.type===Se.TRANSFERENCIA)&&l.fuelType&&l.location&&l.quantity&&$.length>0){const ye=$.find(Ae=>Ae.fuelType===l.fuelType&&Ae.location===l.location);if(!ye)w.quantity=`No hay inventario de ${l.fuelType} en ${l.location}`;else{const Ae=parseFloat(l.quantity),Q=ye.currentStock||0;Ae>Q&&(w.quantity=`Stock insuficiente. Disponible: ${Q.toFixed(2)} gal`)}}return b(w),Object.keys(w).length===0},R=async w=>{if(w.preventDefault(),!S()){_("Por favor corrige los errores en el formulario");return}g(!0),_("");try{const ye={...l,quantity:parseFloat(l.quantity),unitPrice:parseFloat(l.unitPrice),effectiveDate:new Date(l.effectiveDate)};r==="create"?await ck(ye):r==="edit"&&await FS(t.id,ye),o()}catch(ye){console.error("Error al guardar movimiento:",ye),_(ye.message||"Error al guardar el movimiento")}finally{g(!1)}},j=(parseFloat(l.quantity)||0)*(parseFloat(l.unitPrice)||0),k=w=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0,maximumFractionDigits:0}).format(w),M=()=>{switch(r){case"create":return"➕ Nuevo Movimiento";case"edit":return"✏️ Editar Movimiento";case"view":return"👁️ Detalles del Movimiento";default:return"Movimiento"}};return s?u.jsx("div",{className:"modal-overlay",onClick:e,children:u.jsxs("div",{className:"modal-content movement-modal",onClick:w=>w.stopPropagation(),children:[u.jsxs("div",{className:"modal-header",children:[u.jsx("h3",{children:M()}),u.jsx("button",{className:"modal-close",onClick:e,children:"✕"})]}),u.jsxs("div",{className:"modal-body",children:[v&&u.jsxs("div",{className:"error-message",children:[u.jsx("span",{className:"error-icon",children:"⚠️"}),v]}),u.jsxs("form",{onSubmit:R,className:"movement-form",children:[u.jsxs("div",{className:"form-row",children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Tipo de Movimiento *"}),u.jsxs("select",{value:l.type,onChange:w=>D("type",w.target.value),disabled:r==="view",className:A.type?"error":"",children:[u.jsx("option",{value:"",children:"Seleccionar tipo..."}),u.jsx("option",{value:Se.ENTRADA,children:"📥 Entrada"}),u.jsx("option",{value:Se.SALIDA,children:"📤 Salida"}),u.jsx("option",{value:Se.TRANSFERENCIA,children:"🔄 Transferencia"}),u.jsx("option",{value:Se.AJUSTE,children:"⚖️ Ajuste"})]}),A.type&&u.jsx("span",{className:"field-error",children:A.type})]}),r==="view"&&t&&u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Estado"}),u.jsx("div",{className:"status-display",children:u.jsxs("span",{className:`status-badge status-${t.status}`,children:[t.status===Fe.COMPLETADO&&"✅",t.status===Fe.PENDIENTE&&"⏳",t.status===Fe.CANCELADO&&"❌",t.status.charAt(0).toUpperCase()+t.status.slice(1)]})})]})]}),u.jsxs("div",{className:"form-row",children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Tipo de Combustible *"}),u.jsxs("select",{value:l.fuelType,onChange:w=>D("fuelType",w.target.value),disabled:r==="view",className:A.fuelType?"error":"",children:[u.jsx("option",{value:"",children:"Seleccionar combustible..."}),q.map(w=>u.jsx("option",{value:w.value,children:w.label},w.value))]}),A.fuelType&&u.jsx("span",{className:"field-error",children:A.fuelType})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Cantidad (galones) *"}),u.jsx("input",{type:"number",step:"0.01",min:"0",value:l.quantity,onChange:w=>D("quantity",w.target.value),disabled:r==="view",placeholder:"0.00",className:A.quantity?"error":""}),A.quantity&&u.jsx("span",{className:"field-error",children:A.quantity}),K&&!A.quantity&&u.jsx("div",{className:"stock-warning",children:K})]})]}),u.jsxs("div",{className:"form-row",children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Precio Unitario (COP) *"}),u.jsx("input",{type:"number",step:"1",min:"0",value:l.unitPrice,onChange:w=>D("unitPrice",w.target.value),disabled:r==="view",placeholder:"0",className:A.unitPrice?"error":""}),A.unitPrice&&u.jsx("span",{className:"field-error",children:A.unitPrice})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Valor Total"}),u.jsx("div",{className:"total-value-display",children:k(j)})]})]}),u.jsxs("div",{className:"form-row",children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Ubicación"}),u.jsx("select",{value:l.location,onChange:w=>D("location",w.target.value),disabled:r==="view",children:oe.map(w=>u.jsxs("option",{value:w,children:["📍 ",w]},w))})]}),u.jsxs("div",{className:"form-group",children:[u.jsxs("label",{children:["Vehículo/Equipo ",l.type===Se.SALIDA&&"*"]}),l.type===Se.SALIDA?U?u.jsxs("div",{className:"loading-vehicles",children:[u.jsx("span",{className:"loading-spinner small"}),"Cargando vehículos..."]}):u.jsxs("select",{value:l.vehicleId,onChange:w=>D("vehicleId",w.target.value),disabled:r==="view",className:A.vehicleId?"error":"",children:[u.jsx("option",{value:"",children:"Seleccionar vehículo destino..."}),O.map(w=>u.jsxs("option",{value:w.vehicleId,children:["🚜 ",w.vehicleId," - ",w.name," (",w.type,")"]},w.id))]}):u.jsx("input",{type:"text",value:l.vehicleId,onChange:w=>D("vehicleId",w.target.value),disabled:r==="view",placeholder:"ID del vehículo o equipo",className:A.vehicleId?"error":""}),A.vehicleId&&u.jsx("span",{className:"field-error",children:A.vehicleId})]})]}),l.type===Se.TRANSFERENCIA&&u.jsx("div",{className:"form-row",children:u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Ubicación Destino *"}),u.jsxs("select",{value:l.destinationLocation,onChange:w=>D("destinationLocation",w.target.value),disabled:r==="view",className:A.destinationLocation?"error":"",children:[u.jsx("option",{value:"",children:"Seleccionar destino..."}),oe.filter(w=>w!==l.location).map(w=>u.jsxs("option",{value:w,children:["📍 ",w]},w))]}),A.destinationLocation&&u.jsx("span",{className:"field-error",children:A.destinationLocation})]})}),u.jsxs("div",{className:"form-row",children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Fecha Efectiva"}),u.jsx("input",{type:"datetime-local",value:l.effectiveDate,onChange:w=>D("effectiveDate",w.target.value),disabled:r==="view"})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{children:"Referencia"}),u.jsx("input",{type:"text",value:l.reference,onChange:w=>D("reference",w.target.value),disabled:r==="view",placeholder:"Factura, orden, etc."})]})]}),u.jsx("div",{className:"form-row",children:u.jsxs("div",{className:"form-group full-width",children:[u.jsx("label",{children:"Descripción"}),u.jsx("textarea",{value:l.description,onChange:w=>D("description",w.target.value),disabled:r==="view",placeholder:"Detalles adicionales del movimiento...",rows:"3"})]})}),r==="view"&&t&&u.jsx("div",{className:"movement-details",children:u.jsxs("div",{className:"details-section",children:[u.jsx("h4",{children:"📋 Información del Sistema"}),u.jsxs("div",{className:"details-grid",children:[u.jsxs("div",{className:"detail-item",children:[u.jsx("label",{children:"ID:"}),u.jsx("span",{children:t.id})]}),u.jsxs("div",{className:"detail-item",children:[u.jsx("label",{children:"Creado:"}),u.jsx("span",{children:new Date(t.createdAt).toLocaleString("es-CO")})]}),t.updatedAt&&u.jsxs("div",{className:"detail-item",children:[u.jsx("label",{children:"Actualizado:"}),u.jsx("span",{children:new Date(t.updatedAt).toLocaleString("es-CO")})]}),t.approvedAt&&u.jsxs("div",{className:"detail-item",children:[u.jsx("label",{children:"Aprobado:"}),u.jsx("span",{children:new Date(t.approvedAt).toLocaleString("es-CO")})]})]})]})})]})]}),u.jsxs("div",{className:"modal-footer",children:[u.jsx("button",{type:"button",className:"btn-cancel",onClick:e,children:r==="view"?"Cerrar":"Cancelar"}),r!=="view"&&u.jsx("button",{type:"submit",className:"btn-primary",onClick:R,disabled:m,children:m?u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"loading-spinner small"}),"Guardando..."]}):r==="create"?"Crear Movimiento":"Actualizar Movimiento"})]})]})}):null},xk=()=>{const{user:s,userProfile:e}=Ia(),[t,r]=re.useState([]),[o,l]=re.useState(null),[h,m]=re.useState(!0),[g,v]=re.useState(null),[_,A]=re.useState({type:"",status:"",fuelType:"",vehicleId:"",dateRange:"all"}),[b,O]=re.useState("cards"),[I,U]=re.useState(""),[C,$]=re.useState(!1),[W,K]=re.useState(null),[Z,q]=re.useState("create");re.useEffect(()=>{if(!s)return;m(!0);const ie=qS((ue,_e)=>{if(_e){console.error("Error en suscripción de movimientos:",_e),v("Error al cargar movimientos"),m(!1);return}r(ue),v(null),m(!1)},_);return()=>ie()},[s,_]),re.useEffect(()=>{s&&(async()=>{try{const ue=await fk(_);l(ue)}catch(ue){console.error("Error al cargar estadísticas:",ue)}})()},[s,t,_]);const oe=t.filter(ie=>{if(!I)return!0;const ue=I.toLowerCase();return ie.fuelType?.toLowerCase().includes(ue)||ie.type?.toLowerCase().includes(ue)||ie.location?.toLowerCase().includes(ue)||ie.vehicleId?.toLowerCase().includes(ue)||ie.description?.toLowerCase().includes(ue)||ie.reference?.toLowerCase().includes(ue)}),D=()=>{K(null),q("create"),$(!0)},S=ie=>{K(ie),q("edit"),$(!0)},R=ie=>{K(ie),q("view"),$(!0)},j=()=>{$(!1),K(null)},k=ie=>{A(ue=>({...ue,...ie}))},M=()=>{A({type:"",status:"",fuelType:"",vehicleId:"",dateRange:"all"}),U("")},w=async ie=>{if(window.confirm("¿Estás seguro de que quieres aprobar este movimiento? Esta acción actualizará el inventario."))try{await hk(ie),alert("Movimiento aprobado y stock actualizado.")}catch(ue){console.error("Error al aprobar movimiento:",ue),alert(`Error al aprobar movimiento: ${ue.message}`)}},ye=async ie=>{if(window.confirm("¿Estás seguro de que quieres rechazar este movimiento?"))try{await FS(ie,{status:Fe.CANCELADO}),alert("Movimiento rechazado.")}catch(ue){console.error("Error al rechazar movimiento:",ue),alert(`Error al rechazar movimiento: ${ue.message}`)}},Ae=e?.role==="admin"||e?.role==="contador"||e?.role==="cliente",Q=e?.role==="admin";return h?u.jsx("div",{className:"movements-main",children:u.jsxs("div",{className:"loading-container",children:[u.jsx("div",{className:"loading-spinner"}),u.jsx("p",{children:"Cargando movimientos..."})]})}):g?u.jsx("div",{className:"movements-main",children:u.jsxs("div",{className:"error-container",children:[u.jsx("div",{className:"error-icon",children:"⚠️"}),u.jsx("h3",{children:"Error al cargar movimientos"}),u.jsx("p",{children:g}),u.jsx("button",{className:"btn-retry",onClick:()=>window.location.reload(),children:"Reintentar"})]})}):u.jsxs("div",{className:"movements-main",children:[u.jsxs("div",{className:"movements-header",children:[u.jsxs("div",{className:"header-title",children:[u.jsx("h2",{children:"📊 Movimientos de Combustibles"}),u.jsx("p",{children:"Gestiona entradas, salidas, transferencias y ajustes de inventario"})]}),Ae&&u.jsx("button",{className:"btn-create-movement",onClick:D,children:"➕ Nuevo Movimiento"})]}),o&&u.jsx(Tk,{stats:o,filters:_}),u.jsx(bk,{filters:_,onFilterChange:k,onClearFilters:M,searchTerm:I,onSearchChange:U,viewMode:b,onViewModeChange:O,totalResults:oe.length}),oe.length===0?u.jsxs("div",{className:"empty-state",children:[u.jsx("div",{className:"empty-icon",children:"📋"}),u.jsx("h3",{children:t.length===0?"No hay movimientos registrados":"No se encontraron movimientos"}),u.jsx("p",{children:t.length===0?"Comienza creando tu primer movimiento de combustible":"Intenta ajustar los filtros de búsqueda"}),t.length===0&&Ae&&u.jsx("button",{className:"btn-create-first",onClick:D,children:"➕ Crear Primer Movimiento"})]}):u.jsx(Sk,{movements:oe,viewMode:b,onEdit:Q?S:null,onView:R,onApprove:w,onReject:ye,userRole:s?.role}),C&&u.jsx(wk,{isOpen:C,onClose:j,movement:W,mode:Z,onSuccess:()=>{j()}})]})},Ik=({stats:s,filters:e})=>{if(!s)return null;const t=b=>new Intl.NumberFormat("es-CO").format(b),r=b=>`${t(b)} gal`,o=b=>`${t(b)} hrs`,l=b=>`${b.toFixed(2)} gal/hr`,h=b=>{switch(b){case pe.EXCAVADORA:return"#059669";case pe.BULLDOZER:return"#dc2626";case pe.CARGADOR:return"#2563eb";case pe.CAMION:return"#7c3aed";case pe.GRUA:return"#ea580c";case pe.MOTOSIERRA:return"#16a34a";case pe.TRACTOR:return"#ca8a04";case pe.VOLQUETA:return"#9333ea";default:return"#6b7280"}},m=b=>{switch(b){case pe.EXCAVADORA:return"🚚";case pe.BULLDOZER:return"🚜";case pe.CARGADOR:return"🏗️";case pe.CAMION:return"🚛";case pe.GRUA:return"🏗️";case pe.MOTOSIERRA:return"🪚";case pe.TRACTOR:return"🚜";case pe.VOLQUETA:return"🚛";default:return"🚗"}},g=b=>{switch(b){case je.ACTIVO:return"#10b981";case je.MANTENIMIENTO:return"#f59e0b";case je.INACTIVO:return"#6b7280";case je.REPARACION:return"#ef4444";default:return"#6b7280"}},v=b=>{switch(b){case je.ACTIVO:return"✅";case je.MANTENIMIENTO:return"🔧";case je.INACTIVO:return"⏸️";case je.REPARACION:return"🔴";default:return"❓"}},_=b=>{switch(b){case yt.DIESEL:return"🚛";case yt.GASOLINA:return"🚗";case yt.ACPM:return"🚚";case yt.MIXTO:return"⛽";default:return"⛽"}},A=s.totalVehicles>0?((s.byStatus[je.ACTIVO]||0)/s.totalVehicles*100).toFixed(1):0;return u.jsxs("div",{className:"vehicles-stats",children:[u.jsxs("div",{className:"stats-grid",children:[u.jsxs("div",{className:"stat-card primary",children:[u.jsx("div",{className:"stat-icon",children:"🚜"}),u.jsxs("div",{className:"stat-content",children:[u.jsx("div",{className:"stat-value",children:t(s.totalVehicles)}),u.jsx("div",{className:"stat-label",children:"Total Vehículos"}),u.jsx("div",{className:"stat-trend",children:u.jsxs("span",{className:`trend ${A>=80?"positive":"warning"}`,children:[A>=80?"📈":"⚠️"," ",A,"% activos"]})})]})]}),u.jsxs("div",{className:"stat-card",children:[u.jsx("div",{className:"stat-icon",children:"⛽"}),u.jsxs("div",{className:"stat-content",children:[u.jsx("div",{className:"stat-value",children:r(s.totalFuelConsumed)}),u.jsx("div",{className:"stat-label",children:"Combustible Consumido"}),u.jsxs("div",{className:"stat-secondary",children:["Promedio: ",l(s.averageConsumption||0)]})]})]}),u.jsxs("div",{className:"stat-card",children:[u.jsx("div",{className:"stat-icon",children:"⏰"}),u.jsxs("div",{className:"stat-content",children:[u.jsx("div",{className:"stat-value",children:o(s.totalHoursWorked)}),u.jsx("div",{className:"stat-label",children:"Horas Trabajadas"}),u.jsxs("div",{className:"stat-secondary",children:["Promedio: ",o(s.totalHoursWorked/(s.totalVehicles||1))]})]})]}),u.jsxs("div",{className:"stat-card",children:[u.jsx("div",{className:"stat-icon",children:"🏆"}),u.jsxs("div",{className:"stat-content",children:[u.jsx("div",{className:"stat-value",children:s.mostActiveVehicle?s.mostActiveVehicle.vehicleId:"N/A"}),u.jsx("div",{className:"stat-label",children:"Más Activo"}),u.jsx("div",{className:"stat-secondary",children:s.mostActiveVehicle?`${s.mostActiveVehicle.totalMovements||0} movimientos`:"Sin datos"})]})]})]}),u.jsxs("div",{className:"stats-breakdown",children:[u.jsxs("div",{className:"breakdown-section",children:[u.jsx("h4",{children:"🚜 Por Tipo de Vehículo"}),u.jsx("div",{className:"breakdown-grid",children:Object.entries(s.byType).map(([b,O])=>{const I=(O/s.totalVehicles*100).toFixed(1);return u.jsxs("div",{className:"breakdown-item",children:[u.jsxs("div",{className:"breakdown-header",children:[u.jsx("span",{className:"breakdown-icon",children:m(b)}),u.jsx("span",{className:"breakdown-label",children:b.charAt(0).toUpperCase()+b.slice(1)})]}),u.jsx("div",{className:"breakdown-value",children:O}),u.jsx("div",{className:"breakdown-bar",children:u.jsx("div",{className:"breakdown-fill",style:{width:`${I}%`,backgroundColor:h(b)}})}),u.jsxs("div",{className:"breakdown-percentage",children:[I,"%"]})]},b)})})]}),u.jsxs("div",{className:"breakdown-section",children:[u.jsx("h4",{children:"⚡ Por Estado"}),u.jsx("div",{className:"breakdown-grid",children:Object.entries(s.byStatus).map(([b,O])=>{const I=(O/s.totalVehicles*100).toFixed(1);return u.jsxs("div",{className:"breakdown-item",children:[u.jsxs("div",{className:"breakdown-header",children:[u.jsx("span",{className:"breakdown-icon",children:v(b)}),u.jsx("span",{className:"breakdown-label",children:b.charAt(0).toUpperCase()+b.slice(1)})]}),u.jsx("div",{className:"breakdown-value",children:O}),u.jsx("div",{className:"breakdown-bar",children:u.jsx("div",{className:"breakdown-fill",style:{width:`${I}%`,backgroundColor:g(b)}})}),u.jsxs("div",{className:"breakdown-percentage",children:[I,"%"]})]},b)})})]}),u.jsxs("div",{className:"breakdown-section",children:[u.jsx("h4",{children:"⛽ Por Tipo de Combustible"}),u.jsx("div",{className:"breakdown-grid",children:Object.entries(s.byFuelType).map(([b,O])=>{const I=(O/s.totalVehicles*100).toFixed(1);return u.jsxs("div",{className:"breakdown-item",children:[u.jsxs("div",{className:"breakdown-header",children:[u.jsx("span",{className:"breakdown-icon",children:_(b)}),u.jsx("span",{className:"breakdown-label",children:b})]}),u.jsx("div",{className:"breakdown-value",children:O}),u.jsx("div",{className:"breakdown-bar",children:u.jsx("div",{className:"breakdown-fill",style:{width:`${I}%`,backgroundColor:"#059669"}})}),u.jsxs("div",{className:"breakdown-percentage",children:[I,"%"]})]},b)})})]})]}),(s.totalFuelConsumed>0||s.totalHoursWorked>0)&&u.jsxs("div",{className:"performance-metrics",children:[u.jsx("h4",{children:"📊 Métricas de Rendimiento"}),u.jsxs("div",{className:"metrics-grid",children:[u.jsxs("div",{className:"metric-card",children:[u.jsx("div",{className:"metric-icon",children:"⚡"}),u.jsxs("div",{className:"metric-content",children:[u.jsx("div",{className:"metric-label",children:"Eficiencia de Flota"}),u.jsxs("div",{className:"metric-value",children:[A,"%"]}),u.jsxs("div",{className:"metric-description",children:[s.byStatus[je.ACTIVO]||0," de ",s.totalVehicles," activos"]})]})]}),s.averageConsumption>0&&u.jsxs("div",{className:"metric-card",children:[u.jsx("div",{className:"metric-icon",children:"📈"}),u.jsxs("div",{className:"metric-content",children:[u.jsx("div",{className:"metric-label",children:"Consumo Promedio"}),u.jsx("div",{className:"metric-value",children:l(s.averageConsumption)}),u.jsx("div",{className:"metric-description",children:"Por vehículo por hora trabajada"})]})]}),s.mostActiveVehicle&&u.jsxs("div",{className:"metric-card",children:[u.jsx("div",{className:"metric-icon",children:"🏆"}),u.jsxs("div",{className:"metric-content",children:[u.jsx("div",{className:"metric-label",children:"Mayor Utilización"}),u.jsx("div",{className:"metric-value",children:s.mostActiveVehicle.vehicleId}),u.jsxs("div",{className:"metric-description",children:[r(s.mostActiveVehicle.totalFuelConsumed||0)," consumidos"]})]})]}),s.leastActiveVehicle&&u.jsxs("div",{className:"metric-card",children:[u.jsx("div",{className:"metric-icon",children:"📉"}),u.jsxs("div",{className:"metric-content",children:[u.jsx("div",{className:"metric-label",children:"Menor Utilización"}),u.jsx("div",{className:"metric-value",children:s.leastActiveVehicle.vehicleId}),u.jsxs("div",{className:"metric-description",children:[r(s.leastActiveVehicle.totalFuelConsumed||0)," consumidos"]})]})]})]})]}),(e.type||e.status||e.fuelType||e.location)&&u.jsxs("div",{className:"active-filters",children:[u.jsx("h4",{children:"🔍 Filtros Activos"}),u.jsxs("div",{className:"filters-list",children:[e.type&&u.jsxs("span",{className:"filter-tag",children:["Tipo: ",e.type]}),e.status&&u.jsxs("span",{className:"filter-tag",children:["Estado: ",e.status]}),e.fuelType&&u.jsxs("span",{className:"filter-tag",children:["Combustible: ",e.fuelType]}),e.location&&u.jsxs("span",{className:"filter-tag",children:["Ubicación: ",e.location]})]})]})]})},Ck=({filters:s,onFilterChange:e,onClearFilters:t,searchTerm:r,onSearchChange:o,viewMode:l,onViewModeChange:h,totalResults:m})=>{const[g,v]=re.useState(!1),_=["Oficina Principal","Bodega Norte","Bodega Sur","Campo Operativo","Taller Mecánico","Proyecto A","Proyecto B","En Reparación","Otros"],A=Object.values(s).filter(I=>I&&I!==""&&I!=="all").length,b=(I,U)=>{e({[I]:U})},O=I=>{e(I)};return u.jsxs("div",{className:"vehicles-filters",children:[u.jsxs("div",{className:"filters-main",children:[u.jsx("div",{className:"search-section",children:u.jsxs("div",{className:"search-box",children:[u.jsx("span",{className:"search-icon",children:"🔍"}),u.jsx("input",{type:"text",placeholder:"Buscar por ID, nombre, marca, modelo, ubicación...",value:r,onChange:I=>o(I.target.value),className:"search-input"}),r&&u.jsx("button",{className:"search-clear",onClick:()=>o(""),title:"Limpiar búsqueda",children:"✕"})]})}),u.jsxs("div",{className:"filters-controls",children:[u.jsxs("div",{className:"quick-filters",children:[u.jsx("button",{className:`quick-filter ${s.status===je.ACTIVO?"active":""}`,onClick:()=>O({status:je.ACTIVO}),children:"✅ Activos"}),u.jsx("button",{className:`quick-filter ${s.status===je.MANTENIMIENTO?"active":""}`,onClick:()=>O({status:je.MANTENIMIENTO}),children:"🔧 Mantenimiento"}),u.jsx("button",{className:`quick-filter ${s.type===pe.EXCAVADORA?"active":""}`,onClick:()=>O({type:pe.EXCAVADORA}),children:"🚚 Excavadoras"}),u.jsx("button",{className:`quick-filter ${s.type===pe.TRACTOR?"active":""}`,onClick:()=>O({type:pe.TRACTOR}),children:"🚜 Tractores"})]}),u.jsxs("button",{className:`btn-advanced-filters ${g?"active":""}`,onClick:()=>v(!g),children:["🎛️ Filtros",A>0&&u.jsx("span",{className:"filters-count",children:A})]}),u.jsxs("div",{className:"view-modes",children:[u.jsx("button",{className:`view-mode ${l==="cards"?"active":""}`,onClick:()=>h("cards"),title:"Vista en tarjetas",children:"🎴"}),u.jsx("button",{className:`view-mode ${l==="table"?"active":""}`,onClick:()=>h("table"),title:"Vista en tabla",children:"📋"})]})]})]}),g&&u.jsxs("div",{className:"filters-advanced",children:[u.jsxs("div",{className:"filters-grid",children:[u.jsxs("div",{className:"filter-group",children:[u.jsx("label",{children:"Tipo de Vehículo"}),u.jsxs("select",{value:s.type,onChange:I=>b("type",I.target.value),className:"filter-select",children:[u.jsx("option",{value:"",children:"Todos los tipos"}),u.jsx("option",{value:pe.EXCAVADORA,children:"🚚 Excavadora"}),u.jsx("option",{value:pe.BULLDOZER,children:"🚜 Bulldozer"}),u.jsx("option",{value:pe.CARGADOR,children:"🏗️ Cargador"}),u.jsx("option",{value:pe.CAMION,children:"🚛 Camión"}),u.jsx("option",{value:pe.GRUA,children:"🏗️ Grúa"}),u.jsx("option",{value:pe.MOTOSIERRA,children:"🪚 Motosierra"}),u.jsx("option",{value:pe.TRACTOR,children:"🚜 Tractor"}),u.jsx("option",{value:pe.VOLQUETA,children:"🚛 Volqueta"}),u.jsx("option",{value:pe.OTROS,children:"🚗 Otros"})]})]}),u.jsxs("div",{className:"filter-group",children:[u.jsx("label",{children:"Estado"}),u.jsxs("select",{value:s.status,onChange:I=>b("status",I.target.value),className:"filter-select",children:[u.jsx("option",{value:"",children:"Todos los estados"}),u.jsx("option",{value:je.ACTIVO,children:"✅ Activo"}),u.jsx("option",{value:je.MANTENIMIENTO,children:"🔧 Mantenimiento"}),u.jsx("option",{value:je.INACTIVO,children:"⏸️ Inactivo"}),u.jsx("option",{value:je.REPARACION,children:"🔴 Reparación"})]})]}),u.jsxs("div",{className:"filter-group",children:[u.jsx("label",{children:"Tipo de Combustible"}),u.jsxs("select",{value:s.fuelType,onChange:I=>b("fuelType",I.target.value),className:"filter-select",children:[u.jsx("option",{value:"",children:"Todos los combustibles"}),u.jsx("option",{value:yt.DIESEL,children:"🚛 Diesel"}),u.jsx("option",{value:yt.GASOLINA,children:"🚗 Gasolina"}),u.jsx("option",{value:yt.ACPM,children:"🚚 ACPM"}),u.jsx("option",{value:yt.MIXTO,children:"⛽ Mixto"})]})]}),u.jsxs("div",{className:"filter-group",children:[u.jsx("label",{children:"Ubicación Actual"}),u.jsxs("select",{value:s.location,onChange:I=>b("location",I.target.value),className:"filter-select",children:[u.jsx("option",{value:"",children:"Todas las ubicaciones"}),_.map(I=>u.jsxs("option",{value:I,children:["📍 ",I]},I))]})]}),u.jsxs("div",{className:"filter-group",children:[u.jsx("label",{children:"Mantenimiento"}),u.jsxs("select",{value:s.maintenance,onChange:I=>b("maintenance",I.target.value),className:"filter-select",children:[u.jsx("option",{value:"all",children:"Todos"}),u.jsx("option",{value:"due",children:"Mantenimiento debido"}),u.jsx("option",{value:"overdue",children:"Mantenimiento vencido"}),u.jsx("option",{value:"recent",children:"Mantenimiento reciente"})]})]})]}),u.jsxs("div",{className:"filters-actions",children:[u.jsx("button",{className:"btn-clear-filters",onClick:t,disabled:A===0,children:"🗑️ Limpiar Filtros"}),u.jsxs("div",{className:"filters-info",children:[u.jsxs("span",{className:"results-count",children:[m," resultado",m!==1?"s":""]}),A>0&&u.jsxs("span",{className:"active-filters-text",children:["(",A," filtro",A!==1?"s":""," activo",A!==1?"s":"",")"]})]})]})]}),A>0&&u.jsx("div",{className:"active-filters-summary",children:u.jsxs("div",{className:"summary-content",children:[u.jsx("span",{className:"summary-label",children:"Filtros activos:"}),u.jsxs("div",{className:"summary-tags",children:[s.type&&u.jsxs("span",{className:"summary-tag",onClick:()=>b("type",""),children:["Tipo: ",s.type," ✕"]}),s.status&&u.jsxs("span",{className:"summary-tag",onClick:()=>b("status",""),children:["Estado: ",s.status," ✕"]}),s.fuelType&&u.jsxs("span",{className:"summary-tag",onClick:()=>b("fuelType",""),children:["Combustible: ",s.fuelType," ✕"]}),s.location&&u.jsxs("span",{className:"summary-tag",onClick:()=>b("location",""),children:["Ubicación: ",s.location," ✕"]}),s.maintenance!=="all"&&u.jsxs("span",{className:"summary-tag",onClick:()=>b("maintenance","all"),children:["Mantenimiento: ",s.maintenance," ✕"]})]})]})}),u.jsx("div",{className:"keyboard-shortcuts",style:{display:"none"},children:u.jsx("small",{children:"💡 Atajos: Ctrl+F (buscar), Ctrl+1 (activos), Ctrl+2 (mantenimiento), Ctrl+T (tractores)"})})]})},Rk=({vehicles:s,onEdit:e,onView:t,onMaintenance:r})=>{const o=C=>new Intl.NumberFormat("es-CO").format(C),l=C=>`${o(C)} gal`,h=C=>`${o(C)} hrs`,m=C=>C?(C instanceof Date?C:new Date(C)).toLocaleDateString("es-CO",{day:"2-digit",month:"2-digit",year:"numeric"}):"Sin fecha",g=C=>{if(!C)return"";const $=new Date,W=C instanceof Date?C:new Date(C),K=Math.abs($-W),Z=Math.ceil(K/(1e3*60*60*24));return Z===1?"hace 1 día":Z<7?`hace ${Z} días`:Z<30?`hace ${Math.ceil(Z/7)} semanas`:Z<365?`hace ${Math.ceil(Z/30)} meses`:`hace ${Math.ceil(Z/365)} años`},v=C=>{switch(C){case pe.EXCAVADORA:return"vehicle-excavadora";case pe.BULLDOZER:return"vehicle-bulldozer";case pe.CARGADOR:return"vehicle-cargador";case pe.CAMION:return"vehicle-camion";case pe.GRUA:return"vehicle-grua";case pe.MOTOSIERRA:return"vehicle-motosierra";case pe.TRACTOR:return"vehicle-tractor";case pe.VOLQUETA:return"vehicle-volqueta";default:return"vehicle-default"}},_=C=>{switch(C){case je.ACTIVO:return"status-activo";case je.MANTENIMIENTO:return"status-mantenimiento";case je.INACTIVO:return"status-inactivo";case je.REPARACION:return"status-reparacion";default:return"status-default"}},A=C=>{switch(C){case pe.EXCAVADORA:return"🚚";case pe.BULLDOZER:return"🚜";case pe.CARGADOR:return"🏗️";case pe.CAMION:return"🚛";case pe.GRUA:return"🏗️";case pe.MOTOSIERRA:return"🪚";case pe.TRACTOR:return"🚜";case pe.VOLQUETA:return"🚛";default:return"🚗"}},b=C=>{switch(C){case yt.DIESEL:return"🚛";case yt.GASOLINA:return"🚗";case yt.ACPM:return"🚚";case yt.MIXTO:return"⛽";default:return"⛽"}},O=C=>{switch(C){case je.ACTIVO:return"✅";case je.MANTENIMIENTO:return"🔧";case je.INACTIVO:return"⏸️";case je.REPARACION:return"🔴";default:return"❓"}},I=C=>!C.totalHoursWorked||C.totalHoursWorked===0?C.estimatedConsumptionPerHour||0:C.totalFuelConsumed/C.totalHoursWorked,U=C=>C.lastMaintenanceDate?Math.floor((new Date-new Date(C.lastMaintenanceDate))/(1e3*60*60*24))>90:!0;return u.jsx("div",{className:"vehicles-cards",children:s.map(C=>u.jsxs("div",{className:`vehicle-card ${v(C.type)}`,children:[u.jsx("div",{className:"card-header",children:u.jsxs("div",{className:"vehicle-info",children:[u.jsxs("div",{className:"vehicle-id-section",children:[u.jsx("span",{className:"vehicle-icon",children:A(C.type)}),u.jsxs("div",{className:"vehicle-details",children:[u.jsx("span",{className:"vehicle-id",children:C.vehicleId}),u.jsx("span",{className:"vehicle-name",children:C.name})]})]}),u.jsxs("div",{className:`status-badge ${_(C.status)}`,children:[u.jsx("span",{className:"status-icon",children:O(C.status)}),u.jsx("span",{className:"status-label",children:C.status.charAt(0).toUpperCase()+C.status.slice(1)})]})]})}),u.jsxs("div",{className:"card-content",children:[u.jsxs("div",{className:"basic-info",children:[u.jsxs("div",{className:"info-row",children:[u.jsx("span",{className:"info-label",children:"Tipo:"}),u.jsxs("span",{className:"info-value",children:[A(C.type)," ",C.type.charAt(0).toUpperCase()+C.type.slice(1)]})]}),C.brand&&C.model&&u.jsxs("div",{className:"info-row",children:[u.jsx("span",{className:"info-label",children:"Marca/Modelo:"}),u.jsxs("span",{className:"info-value",children:[C.brand," ",C.model]})]}),u.jsxs("div",{className:"info-row",children:[u.jsx("span",{className:"info-label",children:"Combustible:"}),u.jsxs("span",{className:"info-value",children:[b(C.fuelType)," ",C.fuelType]})]}),C.currentLocation&&u.jsxs("div",{className:"info-row",children:[u.jsx("span",{className:"info-label",children:"Ubicación:"}),u.jsxs("span",{className:"info-value",children:["📍 ",C.currentLocation]})]})]}),u.jsxs("div",{className:"consumption-metrics",children:[u.jsxs("div",{className:"metric-item",children:[u.jsx("div",{className:"metric-icon",children:"⛽"}),u.jsxs("div",{className:"metric-content",children:[u.jsx("div",{className:"metric-value",children:l(C.totalFuelConsumed||0)}),u.jsx("div",{className:"metric-label",children:"Consumido"})]})]}),u.jsxs("div",{className:"metric-item",children:[u.jsx("div",{className:"metric-icon",children:"⏰"}),u.jsxs("div",{className:"metric-content",children:[u.jsx("div",{className:"metric-value",children:h(C.totalHoursWorked||0)}),u.jsx("div",{className:"metric-label",children:"Trabajadas"})]})]}),u.jsxs("div",{className:"metric-item",children:[u.jsx("div",{className:"metric-icon",children:"📊"}),u.jsxs("div",{className:"metric-content",children:[u.jsxs("div",{className:"metric-value",children:[I(C).toFixed(1)," gal/hr"]}),u.jsx("div",{className:"metric-label",children:"Consumo"})]})]}),u.jsxs("div",{className:"metric-item",children:[u.jsx("div",{className:"metric-icon",children:"🔄"}),u.jsxs("div",{className:"metric-content",children:[u.jsx("div",{className:"metric-value",children:C.totalMovements||0}),u.jsx("div",{className:"metric-label",children:"Movimientos"})]})]})]}),(C.enginePower||C.fuelCapacity||C.year)&&u.jsxs("div",{className:"technical-specs",children:[C.enginePower&&u.jsxs("div",{className:"spec-item",children:[u.jsx("span",{className:"spec-icon",children:"⚡"}),u.jsxs("span",{className:"spec-value",children:[C.enginePower," HP"]})]}),C.fuelCapacity&&u.jsxs("div",{className:"spec-item",children:[u.jsx("span",{className:"spec-icon",children:"🛢️"}),u.jsxs("span",{className:"spec-value",children:[C.fuelCapacity," gal"]})]}),C.year&&u.jsxs("div",{className:"spec-item",children:[u.jsx("span",{className:"spec-icon",children:"📅"}),u.jsx("span",{className:"spec-value",children:C.year})]})]}),C.description&&u.jsx("div",{className:"description",children:u.jsx("p",{children:C.description})})]}),u.jsxs("div",{className:"card-footer",children:[u.jsxs("div",{className:"date-info",children:[C.lastMovementDate&&u.jsxs("div",{className:"date-item",children:[u.jsx("span",{className:"date-label",children:"Último movimiento:"}),u.jsx("span",{className:"date-value",children:m(C.lastMovementDate)}),u.jsx("span",{className:"date-relative",children:g(C.lastMovementDate)})]}),C.lastMaintenanceDate&&u.jsxs("div",{className:"date-item",children:[u.jsx("span",{className:"date-label",children:"Último mantenimiento:"}),u.jsx("span",{className:"date-value",children:m(C.lastMaintenanceDate)}),u.jsx("span",{className:"date-relative",children:g(C.lastMaintenanceDate)})]})]}),u.jsxs("div",{className:"card-actions",children:[u.jsx("button",{className:"btn-view",onClick:()=>t(C),title:"Ver detalles",children:"👁️"}),e&&C.status!==je.REPARACION&&u.jsx("button",{className:"btn-edit",onClick:()=>e(C),title:"Editar vehículo",children:"✏️"}),r&&u.jsx("button",{className:"btn-maintenance",onClick:()=>r(C),title:"Registrar mantenimiento",children:"🔧"})]})]}),C.status===je.MANTENIMIENTO&&u.jsx("div",{className:"maintenance-indicator",children:u.jsx("div",{className:"maintenance-pulse"})}),U(C)&&C.status===je.ACTIVO&&u.jsx("div",{className:"maintenance-due-badge",children:u.jsx("span",{children:"Mantenimiento Debido"})}),C.status===je.REPARACION&&u.jsx("div",{className:"repair-badge",children:u.jsx("span",{children:"En Reparación"})}),C.totalHoursWorked>0&&u.jsxs("div",{className:"efficiency-indicator",children:[u.jsx("div",{className:"efficiency-bar",children:u.jsx("div",{className:"efficiency-fill",style:{width:`${Math.min(C.totalHoursWorked/2e3*100,100)}%`}})}),u.jsxs("span",{className:"efficiency-label",children:[(C.totalHoursWorked/2e3*100).toFixed(1),"% utilización anual"]})]})]},C.id))})},jk=({vehicles:s,onEdit:e,onView:t,onMaintenance:r})=>{const[o,l]=re.useState("vehicleId"),[h,m]=re.useState("asc"),g=q=>new Intl.NumberFormat("es-CO").format(q),v=q=>`${g(q)} gal`,_=q=>`${g(q)} hrs`,A=q=>q?(q instanceof Date?q:new Date(q)).toLocaleDateString("es-CO",{day:"2-digit",month:"2-digit",year:"2-digit"}):"-",b=q=>{switch(q){case pe.EXCAVADORA:return"🚚";case pe.BULLDOZER:return"🚜";case pe.CARGADOR:return"🏗️";case pe.CAMION:return"🚛";case pe.GRUA:return"🏗️";case pe.MOTOSIERRA:return"🪚";case pe.TRACTOR:return"🚜";case pe.VOLQUETA:return"🚛";default:return"🚗"}},O=q=>{switch(q){case yt.DIESEL:return"🚛";case yt.GASOLINA:return"🚗";case yt.ACPM:return"🚚";case yt.MIXTO:return"⛽";default:return"⛽"}},I=q=>{switch(q){case je.ACTIVO:return"✅";case je.MANTENIMIENTO:return"🔧";case je.INACTIVO:return"⏸️";case je.REPARACION:return"🔴";default:return"❓"}},U=q=>{switch(q){case je.ACTIVO:return"status-activo";case je.MANTENIMIENTO:return"status-mantenimiento";case je.INACTIVO:return"status-inactivo";case je.REPARACION:return"status-reparacion";default:return"status-default"}},C=q=>{o===q?m(h==="asc"?"desc":"asc"):(l(q),m("asc"))},$=[...s].sort((q,oe)=>{let D=q[o],S=oe[o];return(o.includes("Date")||o.includes("At"))&&(D=new Date(D||0),S=new Date(S||0)),typeof D=="number"&&typeof S=="number"?h==="asc"?D-S:S-D:typeof D=="string"&&typeof S=="string"?h==="asc"?D.localeCompare(S):S.localeCompare(D):D instanceof Date&&S instanceof Date?h==="asc"?D-S:S-D:!D&&!S?0:D?S?0:h==="asc"?-1:1:h==="asc"?1:-1}),W=q=>o!==q?"↕️":h==="asc"?"↑":"↓",K=q=>!q.totalHoursWorked||q.totalHoursWorked===0?q.estimatedConsumptionPerHour||0:q.totalFuelConsumed/q.totalHoursWorked,Z=q=>q.lastMaintenanceDate?Math.floor((new Date-new Date(q.lastMaintenanceDate))/(1e3*60*60*24))>90:!0;return u.jsxs("div",{className:"vehicles-table-container",children:[u.jsx("div",{className:"table-wrapper",children:u.jsxs("table",{className:"vehicles-table",children:[u.jsx("thead",{children:u.jsxs("tr",{children:[u.jsxs("th",{className:"sortable",onClick:()=>C("vehicleId"),children:["ID Vehículo ",W("vehicleId")]}),u.jsxs("th",{className:"sortable",onClick:()=>C("name"),children:["Nombre ",W("name")]}),u.jsxs("th",{className:"sortable",onClick:()=>C("type"),children:["Tipo ",W("type")]}),u.jsx("th",{children:"Marca/Modelo"}),u.jsxs("th",{className:"sortable",onClick:()=>C("fuelType"),children:["Combustible ",W("fuelType")]}),u.jsxs("th",{className:"sortable text-right",onClick:()=>C("totalFuelConsumed"),children:["Consumido ",W("totalFuelConsumed")]}),u.jsxs("th",{className:"sortable text-right",onClick:()=>C("totalHoursWorked"),children:["Horas ",W("totalHoursWorked")]}),u.jsx("th",{className:"text-right",children:"Consumo/Hr"}),u.jsx("th",{children:"Ubicación"}),u.jsxs("th",{className:"sortable",onClick:()=>C("status"),children:["Estado ",W("status")]}),u.jsxs("th",{className:"sortable",onClick:()=>C("lastMovementDate"),children:["Último Mov. ",W("lastMovementDate")]}),u.jsx("th",{className:"actions-column",children:"Acciones"})]})}),u.jsx("tbody",{children:$.map(q=>u.jsxs("tr",{className:`vehicle-row ${q.status===je.MANTENIMIENTO?"maintenance-row":""} ${Z(q)?"needs-maintenance":""}`,children:[u.jsx("td",{className:"vehicle-id-cell",children:u.jsxs("div",{className:"id-content",children:[u.jsx("span",{className:"vehicle-icon",children:b(q.type)}),u.jsx("span",{className:"vehicle-id",children:q.vehicleId})]})}),u.jsx("td",{className:"name-cell",children:u.jsx("span",{className:"vehicle-name",children:q.name})}),u.jsx("td",{className:"type-cell",children:u.jsx("span",{className:"type-text",children:q.type.charAt(0).toUpperCase()+q.type.slice(1)})}),u.jsx("td",{className:"brand-model-cell",children:q.brand&&q.model?u.jsxs("span",{className:"brand-model",children:[q.brand," ",q.model]}):u.jsx("span",{className:"no-data",children:"-"})}),u.jsx("td",{className:"fuel-cell",children:u.jsxs("div",{className:"fuel-content",children:[u.jsx("span",{className:"fuel-icon",children:O(q.fuelType)}),u.jsx("span",{className:"fuel-text",children:q.fuelType})]})}),u.jsx("td",{className:"consumption-cell text-right",children:u.jsx("span",{className:"consumption-value",children:v(q.totalFuelConsumed||0)})}),u.jsx("td",{className:"hours-cell text-right",children:u.jsx("span",{className:"hours-value",children:_(q.totalHoursWorked||0)})}),u.jsx("td",{className:"rate-cell text-right",children:u.jsxs("span",{className:"rate-value",children:[K(q).toFixed(1)," gal/hr"]})}),u.jsx("td",{className:"location-cell",children:u.jsxs("span",{className:"location-text",children:["📍 ",q.currentLocation||"Sin ubicación"]})}),u.jsx("td",{className:"status-cell",children:u.jsxs("div",{className:`status-badge ${U(q.status)}`,children:[u.jsx("span",{className:"status-icon",children:I(q.status)}),u.jsx("span",{className:"status-text",children:q.status.charAt(0).toUpperCase()+q.status.slice(1)})]})}),u.jsx("td",{className:"date-cell",children:u.jsxs("div",{className:"date-content",children:[u.jsx("span",{className:"date-value",children:A(q.lastMovementDate)}),Z(q)&&u.jsx("span",{className:"maintenance-warning",children:"⚠️"})]})}),u.jsx("td",{className:"actions-cell",children:u.jsxs("div",{className:"action-buttons",children:[u.jsx("button",{className:"btn-action btn-view",onClick:()=>t(q),title:"Ver detalles",children:"👁️"}),e&&q.status!==je.REPARACION&&u.jsx("button",{className:"btn-action btn-edit",onClick:()=>e(q),title:"Editar vehículo",children:"✏️"}),r&&u.jsx("button",{className:"btn-action btn-maintenance",onClick:()=>r(q),title:"Registrar mantenimiento",children:"🔧"})]})})]},q.id))})]})}),u.jsxs("div",{className:"table-info",children:[u.jsxs("div",{className:"table-summary",children:[u.jsxs("span",{className:"total-rows",children:[s.length," vehículo",s.length!==1?"s":""]}),o&&u.jsxs("span",{className:"sort-info",children:["Ordenado por ",o," (",h==="asc"?"ascendente":"descendente",")"]})]}),u.jsxs("div",{className:"table-legend",children:[u.jsxs("span",{className:"legend-item",children:[u.jsx("span",{className:"legend-icon",children:"✅"})," Activo"]}),u.jsxs("span",{className:"legend-item",children:[u.jsx("span",{className:"legend-icon",children:"🔧"})," Mantenimiento"]}),u.jsxs("span",{className:"legend-item",children:[u.jsx("span",{className:"legend-icon",children:"⏸️"})," Inactivo"]}),u.jsxs("span",{className:"legend-item",children:[u.jsx("span",{className:"legend-icon",children:"🔴"})," Reparación"]}),u.jsxs("span",{className:"legend-item",children:[u.jsx("span",{className:"legend-icon",children:"⚠️"})," Mantto. Debido"]})]})]})]})},Dk=({vehicles:s,viewMode:e,onEdit:t,onView:r,onMaintenance:o})=>e==="table"?u.jsx(jk,{vehicles:s,onEdit:t,onView:r,onMaintenance:o}):u.jsx(Rk,{vehicles:s,onEdit:t,onView:r,onMaintenance:o}),Wt={HARVESTING:"harvesting",TRANSPORT:"transport",MAINTENANCE:"maintenance",SUPPORT:"support"},Zt={CHAINSAW:"chainsaw",HARVESTER:"harvester",FORWARDER:"forwarder",SKIDDER:"skidder",LOG_TRUCK:"log_truck",PICKUP_TRUCK:"pickup_truck",CAR:"car",MOTORCYCLE:"motorcycle",ATV:"atv",BULLDOZER:"bulldozer",EXCAVATOR:"excavator",GRADER:"grader",LOADER:"loader",WATER_PUMP:"water_pump",FIRE_PUMP:"fire_pump",GENERATOR:"generator",COMPRESSOR:"compressor"},Ok={[Zt.CHAINSAW]:{name:"Motosierra",category:Wt.HARVESTING,fuelType:"two_stroke",avgConsumption:2.5,icon:"🪚",color:"#dc2626",description:"Herramienta para corte de árboles"},[Zt.HARVESTER]:{name:"Cosechadora Forestal",category:Wt.HARVESTING,fuelType:"diesel",avgConsumption:25,icon:"🚜",color:"#059669",description:"Máquina para corte y procesamiento de árboles"},[Zt.FORWARDER]:{name:"Forwarder",category:Wt.HARVESTING,fuelType:"diesel",avgConsumption:20,icon:"🚚",color:"#0891b2",description:"Transporte de troncos dentro del bosque"},[Zt.LOG_TRUCK]:{name:"Camión Maderero",category:Wt.TRANSPORT,fuelType:"acpm",avgConsumption:3.5,icon:"🚚",color:"#ea580c",description:"Transporte de madera a destino"},[Zt.PICKUP_TRUCK]:{name:"Camioneta",category:Wt.TRANSPORT,fuelType:"gasoline",avgConsumption:8,icon:"🚐",color:"#2563eb",description:"Transporte de personal y herramientas"},[Zt.CAR]:{name:"Automóvil",category:Wt.TRANSPORT,fuelType:"gasoline",avgConsumption:12,icon:"🚗",color:"#3b82f6",description:"Vehículo liviano para transporte ejecutivo"},[Zt.MOTORCYCLE]:{name:"Motocicleta",category:Wt.TRANSPORT,fuelType:"gasoline",avgConsumption:25,icon:"🏍️",color:"#6366f1",description:"Transporte ágil para terrenos difíciles"},[Zt.ATV]:{name:"Cuatrimoto",category:Wt.TRANSPORT,fuelType:"gasoline",avgConsumption:15,icon:"🏍️",color:"#84cc16",description:"Vehículo todo terreno para supervisión"},[Zt.SKIDDER]:{name:"Skidder",category:Wt.HARVESTING,fuelType:"diesel",avgConsumption:22,icon:"🚜",color:"#f59e0b",description:"Arrastre de troncos desde el lugar de corte"},[Zt.BULLDOZER]:{name:"Bulldozer",category:Wt.MAINTENANCE,fuelType:"diesel",avgConsumption:30,icon:"🚜",color:"#f97316",description:"Construcción y mantenimiento de caminos"},[Zt.EXCAVATOR]:{name:"Excavadora",category:Wt.MAINTENANCE,fuelType:"diesel",avgConsumption:28,icon:"🏗️",color:"#eab308",description:"Excavación y movimiento de tierra"},[Zt.GRADER]:{name:"Motoniveladora",category:Wt.MAINTENANCE,fuelType:"diesel",avgConsumption:25,icon:"🚜",color:"#a3a3a3",description:"Nivelación y mantenimiento de vías"},[Zt.LOADER]:{name:"Cargador Frontal",category:Wt.MAINTENANCE,fuelType:"diesel",avgConsumption:24,icon:"🚜",color:"#71717a",description:"Carga y descarga de materiales"},[Zt.WATER_PUMP]:{name:"Motobomba de Agua",category:Wt.SUPPORT,fuelType:"gasoline",avgConsumption:3.5,icon:"💧",color:"#0891b2",description:"Bombeo de agua para operaciones"},[Zt.FIRE_PUMP]:{name:"Motobomba Contra Incendios",category:Wt.SUPPORT,fuelType:"gasoline",avgConsumption:4.2,icon:"🔥",color:"#dc2626",description:"Equipo de emergencia contra incendios"},[Zt.GENERATOR]:{name:"Generador Eléctrico",category:Wt.SUPPORT,fuelType:"gasoline",avgConsumption:2.8,icon:"⚡",color:"#7c3aed",description:"Suministro de energía eléctrica"},[Zt.COMPRESSOR]:{name:"Compresor de Aire",category:Wt.SUPPORT,fuelType:"gasoline",avgConsumption:2.5,icon:"💨",color:"#64748b",description:"Suministro de aire comprimido"}},Mk=({isOpen:s,onClose:e,vehicle:t,onSave:r,mode:o="create",userRole:l})=>{const h=()=>({vehicleId:t?.vehicleId||"",name:t?.name||"",type:t?.type||pe.EXCAVADORA,brand:t?.brand||"",model:t?.model||"",year:t?.year||new Date().getFullYear(),fuelType:t?.fuelType||yt.DIESEL,fuelCapacity:t?.fuelCapacity||0,enginePower:t?.enginePower||0,status:t?.status||je.ACTIVO,currentLocation:t?.currentLocation||"",description:t?.description||"",estimatedConsumptionPerHour:t?.estimatedConsumptionPerHour||0,serialNumber:t?.serialNumber||"",plateNumber:t?.plateNumber||"",lastMaintenanceDate:t?.lastMaintenanceDate?new Date(t.lastMaintenanceDate).toISOString().split("T")[0]:"",nextMaintenanceDate:t?.nextMaintenanceDate?new Date(t.nextMaintenanceDate).toISOString().split("T")[0]:"",purchaseDate:t?.purchaseDate?new Date(t.purchaseDate).toISOString().split("T")[0]:"",warrantyExpiration:t?.warrantyExpiration?new Date(t.warrantyExpiration).toISOString().split("T")[0]:""}),[m,g]=re.useState(h()),[v,_]=re.useState({}),[A,b]=re.useState(!1),[O,I]=re.useState(""),[U,C]=re.useState(!1);re.useEffect(()=>{s&&(g(h()),_({}))},[s,t]);const $=S=>{const{name:R,value:j,type:k}=S.target,M=k==="number"?parseFloat(j)||0:j;g(w=>({...w,[R]:M})),v[R]&&_(w=>({...w,[R]:null}))},W=()=>{const S={};m.vehicleId.trim()?m.vehicleId.length<3&&(S.vehicleId="El ID debe tener al menos 3 caracteres"):S.vehicleId="El ID del vehículo es obligatorio",m.name.trim()?m.name.length<2&&(S.name="El nombre debe tener al menos 2 caracteres"):S.name="El nombre del vehículo es obligatorio",m.fuelCapacity<=0?S.fuelCapacity="La capacidad de combustible debe ser mayor a 0":m.fuelCapacity>1e3&&(S.fuelCapacity="La capacidad no puede ser mayor a 1000 galones"),m.enginePower<0?S.enginePower="La potencia no puede ser negativa":m.enginePower>1e3&&(S.enginePower="La potencia no puede ser mayor a 1000 HP"),m.estimatedConsumptionPerHour<0?S.estimatedConsumptionPerHour="El consumo no puede ser negativo":m.estimatedConsumptionPerHour>50&&(S.estimatedConsumptionPerHour="El consumo no puede ser mayor a 50 gal/hr");const R=new Date().getFullYear();if(m.year<1990?S.year="El año no puede ser anterior a 1990":m.year>R+1&&(S.year=`El año no puede ser mayor a ${R+1}`),m.lastMaintenanceDate&&m.nextMaintenanceDate){const j=new Date(m.lastMaintenanceDate);new Date(m.nextMaintenanceDate)<=j&&(S.nextMaintenanceDate="La próxima fecha debe ser posterior al último mantenimiento")}return m.purchaseDate&&new Date(m.purchaseDate)>new Date&&(S.purchaseDate="La fecha de compra no puede ser futura"),_(S),Object.keys(S).length===0},K=async S=>{if(S.preventDefault(),!!W()){b(!0);try{const R={...m,lastMaintenanceDate:m.lastMaintenanceDate||null,nextMaintenanceDate:m.nextMaintenanceDate||null,purchaseDate:m.purchaseDate||null,warrantyExpiration:m.warrantyExpiration||null};await r(R),e()}catch(R){console.error("Error guardando vehículo:",R),_({general:"Error al guardar el vehículo. Intenta nuevamente."})}finally{b(!1)}}},Z=S=>{switch(S){case pe.EXCAVADORA:return"🚚";case pe.BULLDOZER:return"🚜";case pe.CARGADOR:return"🏗️";case pe.CAMION:return"🚛";case pe.GRUA:return"🏗️";case pe.MOTOSIERRA:return"🪚";case pe.TRACTOR:return"🚜";case pe.VOLQUETA:return"🚛";default:return"🚗"}},q=S=>{switch(S){case yt.DIESEL:return"🚛";case yt.GASOLINA:return"🚗";case yt.ACPM:return"🚚";case yt.MIXTO:return"⛽";default:return"⛽"}},oe=o==="view",D=l==="admin"||l==="supervisor";return s?u.jsx("div",{className:"modal-overlay",onClick:e,children:u.jsxs("div",{className:"modal-content vehicle-modal",onClick:S=>S.stopPropagation(),children:[u.jsxs("div",{className:"modal-header",children:[u.jsxs("div",{className:"modal-title",children:[u.jsx("span",{className:"title-icon",children:o==="create"?"➕":o==="edit"?"✏️":"👁️"}),u.jsxs("div",{className:"title-text",children:[u.jsxs("h3",{children:[o==="create"&&"Crear Nuevo Vehículo",o==="edit"&&"Editar Vehículo",o==="view"&&"Detalles del Vehículo"]}),u.jsxs("p",{children:[o==="create"&&"Registra un nuevo vehículo en la flota",o==="edit"&&"Modifica la información del vehículo",o==="view"&&"Información completa del vehículo"]})]})]}),u.jsx("button",{className:"btn-close",onClick:e,type:"button",children:"✕"})]}),u.jsxs("form",{onSubmit:K,className:"modal-form",children:[u.jsxs("div",{className:"form-content",children:[u.jsxs("div",{className:"vehicle-preview",children:[u.jsxs("div",{className:"preview-header",children:[u.jsx("span",{className:"preview-icon",children:Z(m.type)}),u.jsxs("div",{className:"preview-info",children:[u.jsx("span",{className:"preview-id",children:m.vehicleId||"ID-000"}),u.jsx("span",{className:"preview-name",children:m.name||"Nombre del vehículo"})]}),u.jsxs("div",{className:"preview-fuel",children:[u.jsx("span",{className:"fuel-icon",children:q(m.fuelType)}),u.jsx("span",{className:"fuel-text",children:m.fuelType})]})]}),u.jsxs("div",{className:"preview-specs",children:[m.enginePower>0&&u.jsxs("span",{className:"spec",children:["⚡ ",m.enginePower," HP"]}),m.fuelCapacity>0&&u.jsxs("span",{className:"spec",children:["🛢️ ",m.fuelCapacity," gal"]}),m.year&&u.jsxs("span",{className:"spec",children:["📅 ",m.year]})]})]}),v.general&&u.jsxs("div",{className:"error-message general-error",children:["⚠️ ",v.general]}),u.jsxs("div",{className:"form-section",children:[u.jsx("h4",{className:"section-title",children:"📋 Información Básica"}),u.jsxs("div",{className:"form-grid",children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"vehicleId",children:"ID del Vehículo *"}),u.jsx("input",{type:"text",id:"vehicleId",name:"vehicleId",value:m.vehicleId,onChange:$,placeholder:"Ej: EXC-001",className:v.vehicleId?"error":"",disabled:oe||o==="edit"&&!D,maxLength:20}),v.vehicleId&&u.jsx("span",{className:"error-text",children:v.vehicleId})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"name",children:"Nombre del Vehículo *"}),u.jsx("input",{type:"text",id:"name",name:"name",value:m.name,onChange:$,placeholder:"Ej: Excavadora Principal",className:v.name?"error":"",disabled:oe||o==="edit"&&!D,maxLength:100}),v.name&&u.jsx("span",{className:"error-text",children:v.name})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"type",children:"Tipo de Vehículo"}),U?u.jsxs("div",{className:"custom-type-input",children:[u.jsx("input",{type:"text",placeholder:"Ej: Montacargas, Grúa Torre, etc.",value:O,onChange:S=>I(S.target.value),onKeyDown:S=>{S.key==="Enter"?(S.preventDefault(),O.trim()&&(g(R=>({...R,type:O.trim()})),C(!1),I(""))):S.key==="Escape"&&(C(!1),I(""))},autoFocus:!0}),u.jsx("button",{type:"button",className:"btn-confirm-custom",onClick:()=>{O.trim()&&(g(S=>({...S,type:O.trim()})),C(!1),I(""))},title:"Confirmar tipo personalizado",children:"✓"}),u.jsx("button",{type:"button",className:"btn-cancel-custom",onClick:()=>{C(!1),I("")},title:"Cancelar",children:"✕"})]}):u.jsxs("div",{className:"select-with-button",children:[u.jsx("select",{id:"type",name:"type",value:m.type,onChange:$,disabled:oe||o==="edit"&&!D,children:Object.entries(Ok).map(([S,R])=>u.jsxs("option",{value:S,children:[R.icon," ",R.name]},S))}),u.jsx("button",{type:"button",className:"btn-add-custom",onClick:()=>C(!0),disabled:oe||o==="edit"&&!D,title:"Agregar tipo personalizado",children:"➕"})]})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"status",children:"Estado"}),u.jsx("select",{id:"status",name:"status",value:m.status,onChange:$,disabled:oe||o==="edit"&&!D,children:Object.values(je).map(S=>u.jsx("option",{value:S,children:S.charAt(0).toUpperCase()+S.slice(1)},S))})]})]})]}),u.jsxs("div",{className:"form-section",children:[u.jsx("h4",{className:"section-title",children:"🔧 Especificaciones Técnicas"}),u.jsxs("div",{className:"form-grid",children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"brand",children:"Marca"}),u.jsx("input",{type:"text",id:"brand",name:"brand",value:m.brand,onChange:$,placeholder:"Ej: Caterpillar",disabled:oe||o==="edit"&&!D,maxLength:50})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"model",children:"Modelo"}),u.jsx("input",{type:"text",id:"model",name:"model",value:m.model,onChange:$,placeholder:"Ej: 320D",disabled:oe||o==="edit"&&!D,maxLength:50})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"year",children:"Año"}),u.jsx("input",{type:"number",id:"year",name:"year",value:m.year,onChange:$,min:"1990",max:new Date().getFullYear()+1,className:v.year?"error":"",disabled:oe||o==="edit"&&!D}),v.year&&u.jsx("span",{className:"error-text",children:v.year})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"serialNumber",children:"Número de Serie"}),u.jsx("input",{type:"text",id:"serialNumber",name:"serialNumber",value:m.serialNumber,onChange:$,placeholder:"Ej: ABC123456789",disabled:oe||o==="edit"&&!D,maxLength:50})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"plateNumber",children:"Placa"}),u.jsx("input",{type:"text",id:"plateNumber",name:"plateNumber",value:m.plateNumber,onChange:$,placeholder:"Ej: ABC123",disabled:oe||o==="edit"&&!D,maxLength:10})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"enginePower",children:"Potencia del Motor (HP)"}),u.jsx("input",{type:"number",id:"enginePower",name:"enginePower",value:m.enginePower,onChange:$,min:"0",max:"1000",step:"0.1",className:v.enginePower?"error":"",disabled:oe||o==="edit"&&!D}),v.enginePower&&u.jsx("span",{className:"error-text",children:v.enginePower})]})]})]}),u.jsxs("div",{className:"form-section",children:[u.jsx("h4",{className:"section-title",children:"⛽ Información de Combustible"}),u.jsxs("div",{className:"form-grid",children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"fuelType",children:"Tipo de Combustible"}),u.jsx("select",{id:"fuelType",name:"fuelType",value:m.fuelType,onChange:$,disabled:oe||o==="edit"&&!D,children:Object.values(yt).map(S=>u.jsxs("option",{value:S,children:[q(S)," ",S.charAt(0).toUpperCase()+S.slice(1)]},S))})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"fuelCapacity",children:"Capacidad de Combustible (gal) *"}),u.jsx("input",{type:"number",id:"fuelCapacity",name:"fuelCapacity",value:m.fuelCapacity,onChange:$,min:"0",max:"1000",step:"0.1",className:v.fuelCapacity?"error":"",disabled:oe||o==="edit"&&!D}),v.fuelCapacity&&u.jsx("span",{className:"error-text",children:v.fuelCapacity})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"estimatedConsumptionPerHour",children:"Consumo Estimado (gal/hr)"}),u.jsx("input",{type:"number",id:"estimatedConsumptionPerHour",name:"estimatedConsumptionPerHour",value:m.estimatedConsumptionPerHour,onChange:$,min:"0",max:"50",step:"0.1",className:v.estimatedConsumptionPerHour?"error":"",disabled:oe||o==="edit"&&!D}),v.estimatedConsumptionPerHour&&u.jsx("span",{className:"error-text",children:v.estimatedConsumptionPerHour})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"currentLocation",children:"Ubicación Actual"}),u.jsx("input",{type:"text",id:"currentLocation",name:"currentLocation",value:m.currentLocation,onChange:$,placeholder:"Ej: Sector Norte - Lote 15",disabled:oe||o==="edit"&&!D,maxLength:100})]})]})]}),u.jsxs("div",{className:"form-section",children:[u.jsx("h4",{className:"section-title",children:"📅 Fechas Importantes"}),u.jsxs("div",{className:"form-grid",children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"purchaseDate",children:"Fecha de Compra"}),u.jsx("input",{type:"date",id:"purchaseDate",name:"purchaseDate",value:m.purchaseDate,onChange:$,max:new Date().toISOString().split("T")[0],className:v.purchaseDate?"error":"",disabled:oe||o==="edit"&&!D}),v.purchaseDate&&u.jsx("span",{className:"error-text",children:v.purchaseDate})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"warrantyExpiration",children:"Vencimiento de Garantía"}),u.jsx("input",{type:"date",id:"warrantyExpiration",name:"warrantyExpiration",value:m.warrantyExpiration,onChange:$,disabled:oe||o==="edit"&&!D})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"lastMaintenanceDate",children:"Último Mantenimiento"}),u.jsx("input",{type:"date",id:"lastMaintenanceDate",name:"lastMaintenanceDate",value:m.lastMaintenanceDate,onChange:$,disabled:oe||o==="edit"&&!D})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"nextMaintenanceDate",children:"Próximo Mantenimiento"}),u.jsx("input",{type:"date",id:"nextMaintenanceDate",name:"nextMaintenanceDate",value:m.nextMaintenanceDate,onChange:$,className:v.nextMaintenanceDate?"error":"",disabled:oe||o==="edit"&&!D}),v.nextMaintenanceDate&&u.jsx("span",{className:"error-text",children:v.nextMaintenanceDate})]})]})]}),u.jsxs("div",{className:"form-section",children:[u.jsx("h4",{className:"section-title",children:"📝 Descripción y Notas"}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"description",children:"Descripción"}),u.jsx("textarea",{id:"description",name:"description",value:m.description,onChange:$,placeholder:"Información adicional sobre el vehículo...",rows:"3",maxLength:"500",disabled:oe||o==="edit"&&!D}),u.jsxs("span",{className:"char-count",children:[m.description.length,"/500 caracteres"]})]})]})]}),u.jsxs("div",{className:"modal-footer",children:[u.jsx("button",{type:"button",className:"btn-secondary",onClick:e,disabled:A,children:o==="view"?"Cerrar":"Cancelar"}),!oe&&D&&u.jsx("button",{type:"submit",className:"btn-primary",disabled:A,children:A?u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"loading-spinner"}),"Guardando..."]}):u.jsx(u.Fragment,{children:o==="create"?"➕ Crear Vehículo":"💾 Guardar Cambios"})})]})]})]})}):null},bo={PREVENTIVO:"preventivo",CORRECTIVO:"correctivo",PREDICTIVO:"predictivo",EMERGENCIA:"emergencia"},er={PROGRAMADO:"programado",EN_PROCESO:"en_proceso",COMPLETADO:"completado",CANCELADO:"cancelado"},Ao={BAJA:"baja",MEDIA:"media",ALTA:"alta",CRITICA:"critica"},Pk=({isOpen:s,onClose:e,vehicle:t,maintenance:r,onSave:o,mode:l="create",userRole:h})=>{const m=()=>({vehicleId:t?.vehicleId||"",vehicleName:t?.name||"",type:r?.type||bo.PREVENTIVO,title:r?.title||"",description:r?.description||"",priority:r?.priority||Ao.MEDIA,status:r?.status||er.PROGRAMADO,scheduledDate:r?.scheduledDate?new Date(r.scheduledDate).toISOString().split("T")[0]:"",startDate:r?.startDate?new Date(r.startDate).toISOString().split("T")[0]:"",completedDate:r?.completedDate?new Date(r.completedDate).toISOString().split("T")[0]:"",estimatedHours:r?.estimatedHours||0,actualHours:r?.actualHours||0,estimatedCost:r?.estimatedCost||0,actualCost:r?.actualCost||0,technician:r?.technician||"",workshop:r?.workshop||"",parts:r?.parts||[],notes:r?.notes||"",nextMaintenanceKm:r?.nextMaintenanceKm||0,nextMaintenanceHours:r?.nextMaintenanceHours||0,nextMaintenanceDate:r?.nextMaintenanceDate?new Date(r.nextMaintenanceDate).toISOString().split("T")[0]:""}),[g,v]=re.useState(m()),[_,A]=re.useState({}),[b,O]=re.useState(!1),[I,U]=re.useState({name:"",quantity:1,cost:0});re.useEffect(()=>{s&&(v(m()),A({}))},[s,r,t]);const C=M=>{const{name:w,value:ye,type:Ae}=M.target,Q=Ae==="number"?parseFloat(ye)||0:ye;v(ie=>({...ie,[w]:Q})),_[w]&&A(ie=>({...ie,[w]:null}))},$=M=>{const{name:w,value:ye,type:Ae}=M.target,Q=Ae==="number"?parseFloat(ye)||0:ye;U(ie=>({...ie,[w]:Q}))},W=()=>{if(!I.name.trim())return;const M={id:Date.now().toString(),name:I.name.trim(),quantity:I.quantity,cost:I.cost,total:I.quantity*I.cost};v(w=>({...w,parts:[...w.parts,M]})),U({name:"",quantity:1,cost:0})},K=M=>{v(w=>({...w,parts:w.parts.filter(ye=>ye.id!==M)}))},Z=()=>{const M={};if(g.title.trim()||(M.title="El título del mantenimiento es obligatorio"),g.description.trim()||(M.description="La descripción es obligatoria"),g.scheduledDate||(M.scheduledDate="La fecha programada es obligatoria"),g.startDate&&g.completedDate){const w=new Date(g.startDate);new Date(g.completedDate)<w&&(M.completedDate="La fecha de finalización debe ser posterior al inicio")}return g.scheduledDate&&g.startDate&&(new Date(g.scheduledDate),new Date(g.startDate)),g.estimatedHours<0&&(M.estimatedHours="Las horas estimadas no pueden ser negativas"),g.actualHours<0&&(M.actualHours="Las horas reales no pueden ser negativas"),g.estimatedCost<0&&(M.estimatedCost="El costo estimado no puede ser negativo"),g.actualCost<0&&(M.actualCost="El costo real no puede ser negativo"),g.status===er.COMPLETADO&&!g.completedDate&&(M.completedDate="La fecha de finalización es obligatoria para mantenimientos completados"),g.status===er.EN_PROCESO&&!g.startDate&&(M.startDate="La fecha de inicio es obligatoria para mantenimientos en proceso"),A(M),Object.keys(M).length===0},q=async M=>{if(M.preventDefault(),!!Z()){O(!0);try{const w=g.parts.reduce((ie,ue)=>ie+ue.total,0),ye=g.estimatedCost+w,Ae=g.actualCost+w,Q={...g,vehicleId:t.id,vehicleName:t.name,totalPartsCost:w,totalEstimatedCost:ye,totalActualCost:Ae,scheduledDate:g.scheduledDate||null,startDate:g.startDate||null,completedDate:g.completedDate||null,nextMaintenanceDate:g.nextMaintenanceDate||null,createdAt:r?.createdAt||new Date,updatedAt:new Date};await o(Q),e()}catch(w){console.error("Error guardando mantenimiento:",w),A({general:"Error al guardar el mantenimiento. Intenta nuevamente."})}finally{O(!1)}}},oe=M=>{switch(M){case bo.PREVENTIVO:return"🔧";case bo.CORRECTIVO:return"🛠️";case bo.PREDICTIVO:return"📊";case bo.EMERGENCIA:return"🚨";default:return"⚙️"}},D=M=>{switch(M){case Ao.BAJA:return"priority-low";case Ao.MEDIA:return"priority-medium";case Ao.ALTA:return"priority-high";case Ao.CRITICA:return"priority-critical";default:return"priority-medium"}},S=M=>{switch(M){case er.PROGRAMADO:return"status-scheduled";case er.EN_PROCESO:return"status-in-progress";case er.COMPLETADO:return"status-completed";case er.CANCELADO:return"status-cancelled";default:return"status-scheduled"}},R=()=>g.parts.reduce((M,w)=>M+w.total,0),j=l==="view",k=h==="admin"||h==="supervisor";return s?u.jsx("div",{className:"modal-overlay",onClick:e,children:u.jsxs("div",{className:"modal-content maintenance-modal",onClick:M=>M.stopPropagation(),children:[u.jsxs("div",{className:"modal-header",children:[u.jsxs("div",{className:"modal-title",children:[u.jsx("span",{className:"title-icon",children:l==="create"?"➕":l==="edit"?"✏️":"👁️"}),u.jsxs("div",{className:"title-text",children:[u.jsxs("h3",{children:[l==="create"&&"Registrar Mantenimiento",l==="edit"&&"Editar Mantenimiento",l==="view"&&"Detalles del Mantenimiento"]}),u.jsxs("p",{children:["Vehículo: ",t?.vehicleId," - ",t?.name]})]})]}),u.jsx("button",{className:"btn-close",onClick:e,type:"button",children:"✕"})]}),u.jsxs("form",{onSubmit:q,className:"modal-form",children:[u.jsxs("div",{className:"form-content",children:[_.general&&u.jsxs("div",{className:"error-message general-error",children:["⚠️ ",_.general]}),u.jsxs("div",{className:"form-section",children:[u.jsx("h4",{className:"section-title",children:"📋 Información del Mantenimiento"}),u.jsxs("div",{className:"form-grid",children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"type",children:"Tipo de Mantenimiento"}),u.jsx("select",{id:"type",name:"type",value:g.type,onChange:C,disabled:j||l==="edit"&&!k,children:Object.values(bo).map(M=>u.jsxs("option",{value:M,children:[oe(M)," ",M.charAt(0).toUpperCase()+M.slice(1)]},M))})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"priority",children:"Prioridad"}),u.jsx("select",{id:"priority",name:"priority",value:g.priority,onChange:C,className:D(g.priority),disabled:j||l==="edit"&&!k,children:Object.values(Ao).map(M=>u.jsx("option",{value:M,children:M.charAt(0).toUpperCase()+M.slice(1)},M))})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"status",children:"Estado"}),u.jsx("select",{id:"status",name:"status",value:g.status,onChange:C,className:S(g.status),disabled:j||l==="edit"&&!k,children:Object.values(er).map(M=>u.jsx("option",{value:M,children:M.charAt(0).toUpperCase()+M.slice(1).replace("_"," ")},M))})]}),u.jsxs("div",{className:"form-group full-width",children:[u.jsx("label",{htmlFor:"title",children:"Título del Mantenimiento *"}),u.jsx("input",{type:"text",id:"title",name:"title",value:g.title,onChange:C,placeholder:"Ej: Cambio de aceite y filtros",className:_.title?"error":"",disabled:j||l==="edit"&&!k,maxLength:100}),_.title&&u.jsx("span",{className:"error-text",children:_.title})]})]})]}),u.jsxs("div",{className:"form-section",children:[u.jsx("h4",{className:"section-title",children:"📅 Programación"}),u.jsxs("div",{className:"form-grid",children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"scheduledDate",children:"Fecha Programada *"}),u.jsx("input",{type:"date",id:"scheduledDate",name:"scheduledDate",value:g.scheduledDate,onChange:C,className:_.scheduledDate?"error":"",disabled:j||l==="edit"&&!k}),_.scheduledDate&&u.jsx("span",{className:"error-text",children:_.scheduledDate})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"startDate",children:"Fecha de Inicio"}),u.jsx("input",{type:"date",id:"startDate",name:"startDate",value:g.startDate,onChange:C,className:_.startDate?"error":"",disabled:j||l==="edit"&&!k}),_.startDate&&u.jsx("span",{className:"error-text",children:_.startDate})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"completedDate",children:"Fecha de Finalización"}),u.jsx("input",{type:"date",id:"completedDate",name:"completedDate",value:g.completedDate,onChange:C,className:_.completedDate?"error":"",disabled:j||l==="edit"&&!k}),_.completedDate&&u.jsx("span",{className:"error-text",children:_.completedDate})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"nextMaintenanceDate",children:"Próximo Mantenimiento"}),u.jsx("input",{type:"date",id:"nextMaintenanceDate",name:"nextMaintenanceDate",value:g.nextMaintenanceDate,onChange:C,disabled:j||l==="edit"&&!k})]})]})]}),u.jsxs("div",{className:"form-section",children:[u.jsx("h4",{className:"section-title",children:"💰 Recursos y Costos"}),u.jsxs("div",{className:"form-grid",children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"technician",children:"Técnico Responsable"}),u.jsx("input",{type:"text",id:"technician",name:"technician",value:g.technician,onChange:C,placeholder:"Nombre del técnico",disabled:j||l==="edit"&&!k,maxLength:100})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"workshop",children:"Taller/Ubicación"}),u.jsx("input",{type:"text",id:"workshop",name:"workshop",value:g.workshop,onChange:C,placeholder:"Taller donde se realiza",disabled:j||l==="edit"&&!k,maxLength:100})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"estimatedHours",children:"Horas Estimadas"}),u.jsx("input",{type:"number",id:"estimatedHours",name:"estimatedHours",value:g.estimatedHours,onChange:C,min:"0",step:"0.5",className:_.estimatedHours?"error":"",disabled:j||l==="edit"&&!k}),_.estimatedHours&&u.jsx("span",{className:"error-text",children:_.estimatedHours})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"actualHours",children:"Horas Reales"}),u.jsx("input",{type:"number",id:"actualHours",name:"actualHours",value:g.actualHours,onChange:C,min:"0",step:"0.5",className:_.actualHours?"error":"",disabled:j||l==="edit"&&!k}),_.actualHours&&u.jsx("span",{className:"error-text",children:_.actualHours})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"estimatedCost",children:"Costo Estimado (COP)"}),u.jsx("input",{type:"number",id:"estimatedCost",name:"estimatedCost",value:g.estimatedCost,onChange:C,min:"0",step:"1000",className:_.estimatedCost?"error":"",disabled:j||l==="edit"&&!k}),_.estimatedCost&&u.jsx("span",{className:"error-text",children:_.estimatedCost})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"actualCost",children:"Costo Real (COP)"}),u.jsx("input",{type:"number",id:"actualCost",name:"actualCost",value:g.actualCost,onChange:C,min:"0",step:"1000",className:_.actualCost?"error":"",disabled:j||l==="edit"&&!k}),_.actualCost&&u.jsx("span",{className:"error-text",children:_.actualCost})]})]})]}),u.jsxs("div",{className:"form-section",children:[u.jsx("h4",{className:"section-title",children:"🔧 Partes y Repuestos"}),!j&&k&&u.jsx("div",{className:"parts-form",children:u.jsxs("div",{className:"form-grid",children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"partName",children:"Nombre de la Parte"}),u.jsx("input",{type:"text",id:"partName",name:"name",value:I.name,onChange:$,placeholder:"Ej: Filtro de aceite",maxLength:100})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"partQuantity",children:"Cantidad"}),u.jsx("input",{type:"number",id:"partQuantity",name:"quantity",value:I.quantity,onChange:$,min:"1",step:"1"})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"partCost",children:"Costo Unitario (COP)"}),u.jsx("input",{type:"number",id:"partCost",name:"cost",value:I.cost,onChange:$,min:"0",step:"1000"})]}),u.jsx("div",{className:"form-group",children:u.jsx("button",{type:"button",className:"btn-add-part",onClick:W,disabled:!I.name.trim(),children:"➕ Agregar"})})]})}),g.parts.length>0&&u.jsx("div",{className:"parts-list",children:u.jsxs("table",{className:"parts-table",children:[u.jsx("thead",{children:u.jsxs("tr",{children:[u.jsx("th",{children:"Parte"}),u.jsx("th",{children:"Cantidad"}),u.jsx("th",{children:"Costo Unit."}),u.jsx("th",{children:"Total"}),!j&&k&&u.jsx("th",{children:"Acciones"})]})}),u.jsx("tbody",{children:g.parts.map(M=>u.jsxs("tr",{children:[u.jsx("td",{children:M.name}),u.jsx("td",{children:M.quantity}),u.jsxs("td",{children:["$",M.cost.toLocaleString("es-CO")]}),u.jsxs("td",{children:["$",M.total.toLocaleString("es-CO")]}),!j&&k&&u.jsx("td",{children:u.jsx("button",{type:"button",className:"btn-remove-part",onClick:()=>K(M.id),title:"Eliminar parte",children:"🗑️"})})]},M.id))}),u.jsx("tfoot",{children:u.jsxs("tr",{className:"total-row",children:[u.jsx("td",{colSpan:"3",children:u.jsx("strong",{children:"Total Partes:"})}),u.jsx("td",{children:u.jsxs("strong",{children:["$",R().toLocaleString("es-CO")]})}),!j&&k&&u.jsx("td",{})]})})]})})]}),u.jsxs("div",{className:"form-section",children:[u.jsx("h4",{className:"section-title",children:"🔄 Próximo Mantenimiento"}),u.jsxs("div",{className:"form-grid",children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"nextMaintenanceKm",children:"Próximo Mantenimiento (Km)"}),u.jsx("input",{type:"number",id:"nextMaintenanceKm",name:"nextMaintenanceKm",value:g.nextMaintenanceKm,onChange:C,min:"0",step:"1000",placeholder:"0 = No aplica",disabled:j||l==="edit"&&!k})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"nextMaintenanceHours",children:"Próximo Mantenimiento (Horas)"}),u.jsx("input",{type:"number",id:"nextMaintenanceHours",name:"nextMaintenanceHours",value:g.nextMaintenanceHours,onChange:C,min:"0",step:"100",placeholder:"0 = No aplica",disabled:j||l==="edit"&&!k})]})]})]}),u.jsxs("div",{className:"form-section",children:[u.jsx("h4",{className:"section-title",children:"📝 Descripción y Notas"}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"description",children:"Descripción del Trabajo *"}),u.jsx("textarea",{id:"description",name:"description",value:g.description,onChange:C,placeholder:"Describe el trabajo a realizar o realizado...",rows:"3",maxLength:"500",className:_.description?"error":"",disabled:j||l==="edit"&&!k}),_.description&&u.jsx("span",{className:"error-text",children:_.description})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"notes",children:"Notas Adicionales"}),u.jsx("textarea",{id:"notes",name:"notes",value:g.notes,onChange:C,placeholder:"Observaciones, recomendaciones, problemas encontrados...",rows:"3",maxLength:"500",disabled:j||l==="edit"&&!k}),u.jsxs("span",{className:"char-count",children:[g.notes.length,"/500 caracteres"]})]})]}),u.jsxs("div",{className:"cost-summary",children:[u.jsx("h4",{children:"💰 Resumen de Costos"}),u.jsxs("div",{className:"cost-grid",children:[u.jsxs("div",{className:"cost-item",children:[u.jsx("span",{className:"cost-label",children:"Mano de Obra:"}),u.jsxs("span",{className:"cost-value",children:["$",g.actualCost.toLocaleString("es-CO")]})]}),u.jsxs("div",{className:"cost-item",children:[u.jsx("span",{className:"cost-label",children:"Partes:"}),u.jsxs("span",{className:"cost-value",children:["$",R().toLocaleString("es-CO")]})]}),u.jsxs("div",{className:"cost-item total-cost",children:[u.jsx("span",{className:"cost-label",children:"Total:"}),u.jsxs("span",{className:"cost-value",children:["$",(g.actualCost+R()).toLocaleString("es-CO")]})]})]})]})]}),u.jsxs("div",{className:"modal-footer",children:[u.jsx("button",{type:"button",className:"btn-secondary",onClick:e,disabled:b,children:l==="view"?"Cerrar":"Cancelar"}),!j&&k&&u.jsx("button",{type:"submit",className:"btn-primary",disabled:b,children:b?u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"loading-spinner"}),"Guardando..."]}):u.jsx(u.Fragment,{children:l==="create"?"➕ Registrar Mantenimiento":"💾 Guardar Cambios"})})]})]})]})}):null},kk=()=>{const{user:s,userProfile:e}=Ia(),[t,r]=re.useState([]),[o,l]=re.useState(null),[h,m]=re.useState(!0),[g,v]=re.useState(null),[_,A]=re.useState({type:"",status:"",fuelType:"",location:"",maintenance:"all"}),[b,O]=re.useState("cards"),[I,U]=re.useState(""),[C,$]=re.useState(!1),[W,K]=re.useState(!1),[Z,q]=re.useState(null),[oe,D]=re.useState("create");re.useEffect(()=>{if(!s)return;m(!0);const _e=$S((V,ae)=>{if(ae){console.error("Error en suscripción de vehículos:",ae),v("Error al cargar vehículos"),m(!1);return}r(V),v(null),m(!1)},_);return()=>_e()},[s,_]),re.useEffect(()=>{s&&(async()=>{try{const V=await pk(_);l(V)}catch(V){console.error("Error al cargar estadísticas:",V)}})()},[s,t,_]);const S=t.filter(_e=>{if(!I)return!0;const V=I.toLowerCase();return _e.vehicleId?.toLowerCase().includes(V)||_e.name?.toLowerCase().includes(V)||_e.type?.toLowerCase().includes(V)||_e.brand?.toLowerCase().includes(V)||_e.model?.toLowerCase().includes(V)||_e.currentLocation?.toLowerCase().includes(V)||_e.description?.toLowerCase().includes(V)}),R=()=>{q(null),D("create"),$(!0)},j=_e=>{q(_e),D("edit"),$(!0)},k=_e=>{q(_e),D("view"),$(!0)},M=_e=>{q(_e),K(!0)},w=()=>{$(!1),K(!1),q(null)},ye=_e=>{A(V=>({...V,..._e}))},Ae=()=>{A({type:"",status:"",fuelType:"",location:"",maintenance:"all"}),U("")},Q=e?.role==="admin"||e?.role==="contador"||e?.role==="cliente",ie=e?.role==="admin",ue=e?.role==="admin"||e?.role==="contador";return h?u.jsx("div",{className:"vehicles-main",children:u.jsxs("div",{className:"loading-container",children:[u.jsx("div",{className:"loading-spinner"}),u.jsx("p",{children:"Cargando vehículos..."})]})}):g?u.jsx("div",{className:"vehicles-main",children:u.jsxs("div",{className:"error-container",children:[u.jsx("div",{className:"error-icon",children:"⚠️"}),u.jsx("h3",{children:"Error al cargar vehículos"}),u.jsx("p",{children:g}),u.jsx("button",{className:"btn-retry",onClick:()=>window.location.reload(),children:"Reintentar"})]})}):u.jsxs("div",{className:"vehicles-main",children:[u.jsxs("div",{className:"vehicles-header",children:[u.jsxs("div",{className:"header-title",children:[u.jsx("h2",{children:"🚜 Gestión de Vehículos"}),u.jsx("p",{children:"Administra la maquinaria y vehículos forestales"})]}),Q&&u.jsx("button",{className:"btn-create-vehicle",onClick:R,children:"➕ Nuevo Vehículo"})]}),o&&u.jsx(Ik,{stats:o,filters:_}),u.jsx(Ck,{filters:_,onFilterChange:ye,onClearFilters:Ae,searchTerm:I,onSearchChange:U,viewMode:b,onViewModeChange:O,totalResults:S.length}),S.length===0?u.jsxs("div",{className:"empty-state",children:[u.jsx("div",{className:"empty-icon",children:"🚜"}),u.jsx("h3",{children:t.length===0?"No hay vehículos registrados":"No se encontraron vehículos"}),u.jsx("p",{children:t.length===0?"Comienza registrando tu primer vehículo o maquinaria forestal":"Intenta ajustar los filtros de búsqueda"}),t.length===0&&Q&&u.jsx("button",{className:"btn-create-first",onClick:R,children:"➕ Registrar Primer Vehículo"})]}):u.jsx(Dk,{vehicles:S,viewMode:b,onEdit:ie?j:null,onView:k,onMaintenance:ue?M:null,userRole:s?.role}),C&&u.jsx(Mk,{isOpen:C,onClose:w,vehicle:Z,mode:oe,onSuccess:()=>{w()}}),W&&u.jsx(Pk,{isOpen:W,onClose:w,vehicle:Z,onSuccess:()=>{w()}})]})},Vk=()=>{const{user:s,userProfile:e}=Ia(),[t,r]=re.useState("invitations"),[o,l]=re.useState([]),[h,m]=re.useState(!1),[g,v]=re.useState(!1),[_,A]=re.useState(!1),[b,O]=re.useState({email:"",name:"",role:hs.CLIENTE});re.useEffect(()=>{s&&e?.role==="admin"&&I()},[s,e]);const I=async()=>{m(!0);try{const Z=await ek(s.uid);Z.success?l(Z.invitations):console.error("Error loading invitations:",Z.error)}catch(Z){console.error("Error loading invitations:",Z)}finally{m(!1)}},U=async Z=>{Z.preventDefault(),A(!0);try{const q=await ZP(b,s.uid);q.success?(O({email:"",name:"",role:hs.CLIENTE}),v(!1),await I(),alert(`Invitación creada exitosamente!
Código: ${q.invitation.code}`)):alert(`Error: ${q.error}`)}catch(q){console.error("Error creating invitation:",q),alert("Error creando invitación")}finally{A(!1)}},C=async Z=>{if(confirm("¿Estás seguro de cancelar esta invitación?"))try{const q=await tk(Z,s.uid);q.success?(await I(),alert("Invitación cancelada exitosamente")):alert(`Error: ${q.error}`)}catch(q){console.error("Error cancelling invitation:",q),alert("Error cancelando invitación")}},$=Z=>({pending:{text:"Pendiente",class:"status-pending"},used:{text:"Usada",class:"status-used"},cancelled:{text:"Cancelada",class:"status-cancelled"},expired:{text:"Expirada",class:"status-expired"}})[Z]||{text:Z,class:"status-unknown"},W=Z=>({admin:"Administrador",contador:"Contador",cliente:"Cliente"})[Z]||Z,K=Z=>Z?(Z.toDate?Z.toDate():new Date(Z)).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A";return e?.role!=="admin"?u.jsxs("div",{className:"admin-unauthorized",children:[u.jsx("h2",{children:"⛔ Acceso Denegado"}),u.jsx("p",{children:"Solo los administradores pueden acceder a esta sección."})]}):u.jsxs("div",{className:"admin-main",children:[u.jsxs("div",{className:"admin-header",children:[u.jsx("h1",{children:"⚙️ Administración del Sistema"}),u.jsx("p",{children:"Gestión de usuarios y configuraciones"})]}),u.jsxs("div",{className:"admin-tabs",children:[u.jsx("button",{className:`tab-button ${t==="invitations"?"active":""}`,onClick:()=>r("invitations"),children:"🎫 Invitaciones"}),u.jsx("button",{className:`tab-button ${t==="users"?"active":""}`,onClick:()=>r("users"),children:"👥 Usuarios"}),u.jsx("button",{className:`tab-button ${t==="settings"?"active":""}`,onClick:()=>r("settings"),children:"⚙️ Configuración"})]}),u.jsxs("div",{className:"admin-content",children:[t==="invitations"&&u.jsxs("div",{className:"invitations-section",children:[u.jsxs("div",{className:"section-header",children:[u.jsx("h2",{children:"Gestión de Invitaciones"}),u.jsx("button",{className:"create-button",onClick:()=>v(!0),children:"+ Crear Invitación"})]}),h?u.jsx("div",{className:"loading",children:"Cargando invitaciones..."}):u.jsxs("div",{className:"invitations-table",children:[u.jsxs("table",{children:[u.jsx("thead",{children:u.jsxs("tr",{children:[u.jsx("th",{children:"Código"}),u.jsx("th",{children:"Email"}),u.jsx("th",{children:"Nombre"}),u.jsx("th",{children:"Rol"}),u.jsx("th",{children:"Estado"}),u.jsx("th",{children:"Creada"}),u.jsx("th",{children:"Expira"}),u.jsx("th",{children:"Acciones"})]})}),u.jsx("tbody",{children:o.map(Z=>{const q=$(Z.status);return u.jsxs("tr",{children:[u.jsx("td",{children:u.jsx("code",{className:"invitation-code",children:Z.code})}),u.jsx("td",{children:Z.targetEmail}),u.jsx("td",{children:Z.targetName||"-"}),u.jsx("td",{children:W(Z.targetRole)}),u.jsx("td",{children:u.jsx("span",{className:`status-badge ${q.class}`,children:q.text})}),u.jsx("td",{children:K(Z.createdAt)}),u.jsx("td",{children:K(Z.expiresAt)}),u.jsx("td",{children:Z.status==="pending"&&u.jsx("button",{className:"cancel-button",onClick:()=>C(Z.id),children:"Cancelar"})})]},Z.id)})})]}),o.length===0&&u.jsx("div",{className:"empty-state",children:u.jsx("p",{children:"No hay invitaciones creadas"})})]})]}),t==="users"&&u.jsxs("div",{className:"users-section",children:[u.jsx("h2",{children:"👥 Usuarios del Sistema"}),u.jsxs("div",{className:"coming-soon",children:[u.jsx("span",{children:"🚧 En desarrollo"}),u.jsx("p",{children:"Próximamente: Lista de usuarios registrados, edición de permisos, y estadísticas."})]})]}),t==="settings"&&u.jsxs("div",{className:"settings-section",children:[u.jsx("h2",{children:"⚙️ Configuración del Sistema"}),u.jsxs("div",{className:"coming-soon",children:[u.jsx("span",{children:"🚧 En desarrollo"}),u.jsx("p",{children:"Próximamente: Configuraciones generales, notificaciones, y parámetros del sistema."})]})]})]}),g&&u.jsx("div",{className:"modal-overlay",onClick:()=>v(!1),children:u.jsxs("div",{className:"modal-content",onClick:Z=>Z.stopPropagation(),children:[u.jsxs("div",{className:"modal-header",children:[u.jsx("h3",{children:"Crear Nueva Invitación"}),u.jsx("button",{className:"modal-close",onClick:()=>v(!1),children:"×"})]}),u.jsxs("form",{onSubmit:U,className:"invitation-form",children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"email",children:"Email del usuario:"}),u.jsx("input",{id:"email",type:"email",required:!0,value:b.email,onChange:Z=>O({...b,email:Z.target.value}),placeholder:"usuario@ejemplo.com"})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"name",children:"Nombre (opcional):"}),u.jsx("input",{id:"name",type:"text",value:b.name,onChange:Z=>O({...b,name:Z.target.value}),placeholder:"Nombre del usuario"})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"role",children:"Rol:"}),u.jsxs("select",{id:"role",value:b.role,onChange:Z=>O({...b,role:Z.target.value}),children:[u.jsx("option",{value:hs.CLIENTE,children:"Cliente"}),u.jsx("option",{value:hs.CONTADOR,children:"Contador"}),u.jsx("option",{value:hs.ADMIN,children:"Administrador"})]})]}),u.jsxs("div",{className:"form-actions",children:[u.jsx("button",{type:"button",className:"cancel-button",onClick:()=>v(!1),children:"Cancelar"}),u.jsx("button",{type:"submit",className:"create-button",disabled:_,children:_?"Creando...":"Crear Invitación"})]})]})]})})]})},Lk=()=>u.jsxs("div",{className:"module-placeholder",children:[u.jsx("h2",{children:"🏪 Módulo de Proveedores"}),u.jsx("p",{children:"Gestión de proveedores de combustible"}),u.jsxs("div",{className:"coming-soon",children:[u.jsx("span",{children:"🚧 En desarrollo"}),u.jsx("p",{children:"Próximamente: Base de datos de proveedores, comparación de precios, y evaluación."})]})]}),Uk=()=>u.jsxs("div",{className:"module-placeholder",children:[u.jsx("h2",{children:"📋 Módulo de Reportes"}),u.jsx("p",{children:"Análisis y reportes de combustibles"}),u.jsxs("div",{className:"coming-soon",children:[u.jsx("span",{children:"🚧 En desarrollo"}),u.jsx("p",{children:"Próximamente: Reportes personalizables, gráficos interactivos, y exportación."})]})]}),Fk=()=>{const[s,e]=re.useState("dashboard"),t=()=>{switch(s){case"dashboard":return u.jsx(n0,{});case"inventory":return u.jsx(Ek,{});case"movements":return u.jsx(xk,{});case"vehicles":return u.jsx(kk,{});case"suppliers":return u.jsx(Lk,{});case"reports":return u.jsx(Uk,{});case"admin":return u.jsx(Vk,{});default:return u.jsx(n0,{})}};return u.jsx(ik,{currentView:s,onViewChange:e,children:t()})},qk=()=>{const[s,e]=re.useState("login"),[t,r]=re.useState(!1),[o,l]=re.useState(""),[h,m]=re.useState(""),[g,v]=re.useState(""),[_,A]=re.useState(""),[b,O]=re.useState({email:"",password:"",confirmPassword:"",invitationCode:""}),[I,U]=re.useState(""),[C,$]=re.useState(null),W=async R=>{R.preventDefault(),r(!0),l("");try{await oR(Cc,g,_)}catch(j){console.error("Error en login:",j),l(oe(j.code))}finally{r(!1)}},K=async()=>{r(!0),l("");try{const R=new pi,j=await jR(Cc,R);C?await e0(j.user,C.code):await PS(j.user)}catch(R){console.error("Error en login con Google:",R),l("Error al iniciar sesión con Google")}finally{r(!1)}},Z=async R=>{R.preventDefault(),r(!0),l(""),m("");try{const j=await MS(I);j.success?($(j.invitation),m(`Invitación válida para: ${j.invitation.targetEmail}`),e("register"),O({...b,email:j.invitation.targetEmail,invitationCode:I})):l(j.error)}catch(j){console.error("Error validando invitación:",j),l("Error validando código de invitación")}finally{r(!1)}},q=async R=>{if(R.preventDefault(),r(!0),l(""),b.password!==b.confirmPassword){l("Las contraseñas no coinciden"),r(!1);return}if(b.password.length<6){l("La contraseña debe tener al menos 6 caracteres"),r(!1);return}try{const j=await aR(Cc,b.email,b.password),k=await e0(j.user,b.invitationCode);k.success?m("¡Registro exitoso! Bienvenido al sistema."):l(k.error)}catch(j){console.error("Error en registro:",j),l(oe(j.code))}finally{r(!1)}},oe=R=>{switch(R){case"auth/invalid-email":return"El formato del email es inválido";case"auth/user-not-found":return"Usuario no encontrado";case"auth/wrong-password":return"Contraseña incorrecta";case"auth/invalid-credential":return"Email o contraseña incorrectos";case"auth/email-already-in-use":return"Este email ya está registrado";case"auth/weak-password":return"La contraseña es muy débil";default:return"Error de autenticación. Inténtalo de nuevo."}},D=()=>{l(""),m(""),v(""),A(""),U(""),$(null),O({email:"",password:"",confirmPassword:"",invitationCode:""})},S=()=>{switch(s){case"login":return u.jsxs(u.Fragment,{children:[u.jsxs("form",{onSubmit:W,children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"email",children:"Email:"}),u.jsx("input",{id:"email",type:"email",value:g,onChange:R=>v(R.target.value),required:!0,disabled:t,placeholder:"tu-email@ejemplo.com"})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"password",children:"Contraseña:"}),u.jsx("input",{id:"password",type:"password",value:_,onChange:R=>A(R.target.value),required:!0,disabled:t,placeholder:"Tu contraseña"})]}),u.jsx("button",{type:"submit",className:"auth-button primary",disabled:t,children:t?"Iniciando sesión...":"Iniciar Sesión"})]}),u.jsx("div",{className:"auth-divider",children:u.jsx("span",{children:"o"})}),u.jsxs("button",{onClick:K,className:"auth-button google",disabled:t,children:[u.jsx("span",{children:"🔗"}),"Continuar con Google"]}),u.jsx("div",{className:"auth-actions",children:u.jsx("button",{className:"link-button",onClick:()=>{D(),e("invite")},children:"¿Tienes un código de invitación? Regístrate aquí"})})]});case"invite":return u.jsxs(u.Fragment,{children:[u.jsxs("form",{onSubmit:Z,children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"inviteCode",children:"Código de invitación:"}),u.jsx("input",{id:"inviteCode",type:"text",value:I,onChange:R=>U(R.target.value.toUpperCase()),required:!0,disabled:t,placeholder:"XXXXXXXX",maxLength:8,style:{textTransform:"uppercase",fontFamily:"monospace"}}),u.jsx("small",{children:"Ingresa el código de 8 caracteres que recibiste"})]}),u.jsx("button",{type:"submit",className:"auth-button primary",disabled:t,children:t?"Validando...":"Validar Código"})]}),u.jsx("div",{className:"auth-actions",children:u.jsx("button",{className:"link-button",onClick:()=>{D(),e("login")},children:"Volver al inicio de sesión"})})]});case"register":return u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"invitation-info",children:u.jsxs("div",{className:"success-message",children:["✅ Código válido para: ",C?.targetEmail]})}),u.jsxs("form",{onSubmit:q,children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"registerEmail",children:"Email:"}),u.jsx("input",{id:"registerEmail",type:"email",value:b.email,disabled:!0,className:"disabled-input"})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"registerPassword",children:"Contraseña:"}),u.jsx("input",{id:"registerPassword",type:"password",value:b.password,onChange:R=>O({...b,password:R.target.value}),required:!0,disabled:t,placeholder:"Mínimo 6 caracteres",minLength:6})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"confirmPassword",children:"Confirmar contraseña:"}),u.jsx("input",{id:"confirmPassword",type:"password",value:b.confirmPassword,onChange:R=>O({...b,confirmPassword:R.target.value}),required:!0,disabled:t,placeholder:"Repite tu contraseña"})]}),u.jsx("button",{type:"submit",className:"auth-button primary",disabled:t,children:t?"Registrando...":"Crear Cuenta"})]}),u.jsx("div",{className:"auth-divider",children:u.jsx("span",{children:"o"})}),u.jsxs("button",{onClick:K,className:"auth-button google",disabled:t,children:[u.jsx("span",{children:"🔗"}),"Registrarse con Google"]}),u.jsx("div",{className:"auth-actions",children:u.jsx("button",{className:"link-button",onClick:()=>{D(),e("invite")},children:"Usar otro código de invitación"})})]});default:return null}};return u.jsx("div",{className:"auth-container",children:u.jsxs("div",{className:"auth-card",children:[u.jsxs("div",{className:"auth-header",children:[u.jsx("h1",{children:"⛽ Combustibles"}),u.jsx("h2",{children:"Forestech Colombia"}),u.jsxs("p",{children:[s==="login"&&"Sistema de gestión de combustibles",s==="invite"&&"Validar código de invitación",s==="register"&&"Crear nueva cuenta"]})]}),u.jsxs("div",{className:"auth-form",children:[o&&u.jsx("div",{className:"error-message",children:o}),h&&u.jsx("div",{className:"success-message",children:h}),S(),u.jsx("div",{className:"auth-footer",children:u.jsx("p",{children:u.jsxs("small",{children:["Solo usuarios autorizados pueden acceder al sistema.",u.jsx("br",{}),s==="login"?"Contacta al administrador para obtener un código de invitación.":"Si no tienes código, contacta al administrador."]})})})]})]})})};function zk(){return u.jsx(sk,{children:u.jsx(Bk,{})})}function Bk(){const{user:s,loading:e}=Ia();return e?u.jsx("div",{className:"loading-container",children:u.jsxs("div",{className:"loader",children:[u.jsx("div",{className:"spinner"}),u.jsx("p",{children:"Cargando..."})]})}):u.jsxs("div",{className:"App",children:[!s&&u.jsx(qk,{}),s&&u.jsx(Fk,{})]})}wx.createRoot(document.getElementById("root")).render(u.jsx(re.StrictMode,{children:u.jsx(zk,{})}));
