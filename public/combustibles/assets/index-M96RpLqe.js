const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/MigrationPage-Ddo5Hfyp.js","assets/productsService-361b-ndK.js","assets/MigrationPage-z_G5tBVa.css","assets/InventoryMain-CJrKigwH.js","assets/InventoryMain-IBCPRbBR.css","assets/MovementsMain-CNpQbmS5.js","assets/MovementsMain-DPqKi7xb.css","assets/VehiclesMain-DBflihJ3.js","assets/VehiclesMain-oCtbq_EQ.css","assets/MaintenanceMain-BGaxxEtv.js","assets/MaintenanceMain-CwCTJFzo.css","assets/ProductsMain-DGyNqtje.js","assets/ProductsMain-D0DHXlsC.css","assets/SuppliersMain-CWs2-DZc.js","assets/SuppliersMain-ElCAjoxt.css","assets/AdminMain-D3S8UkMr.js","assets/AdminMain-afUgM0ui.css","assets/ReportsMain-Cl5TfU9M.js","assets/ReportsMain-BWhrXjbE.css"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();function ZC(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var zp={exports:{}},Ru={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jT;function JC(){if(jT)return Ru;jT=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var d in a)d!=="key"&&(l[d]=a[d])}else l=a;return a=l.ref,{$$typeof:n,type:i,key:c,ref:a!==void 0?a:null,props:l}}return Ru.Fragment=e,Ru.jsx=t,Ru.jsxs=t,Ru}var BT;function e1(){return BT||(BT=1,zp.exports=JC()),zp.exports}var k=e1(),Fp={exports:{}},Ce={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qT;function t1(){if(qT)return Ce;qT=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),T=Symbol.iterator;function A(M){return M===null||typeof M!="object"?null:(M=T&&M[T]||M["@@iterator"],typeof M=="function"?M:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N=Object.assign,q={};function U(M,te,le){this.props=M,this.context=te,this.refs=q,this.updater=le||S}U.prototype.isReactComponent={},U.prototype.setState=function(M,te){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,te,"setState")},U.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function $(){}$.prototype=U.prototype;function ie(M,te,le){this.props=M,this.context=te,this.refs=q,this.updater=le||S}var ne=ie.prototype=new $;ne.constructor=ie,N(ne,U.prototype),ne.isPureReactComponent=!0;var he=Array.isArray,ce={H:null,A:null,T:null,S:null,V:null},Te=Object.prototype.hasOwnProperty;function P(M,te,le,re,ye,Me){return le=Me.ref,{$$typeof:n,type:M,key:te,ref:le!==void 0?le:null,props:Me}}function I(M,te){return P(M.type,te,void 0,void 0,void 0,M.props)}function R(M){return typeof M=="object"&&M!==null&&M.$$typeof===n}function O(M){var te={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(le){return te[le]})}var V=/\/+/g;function F(M,te){return typeof M=="object"&&M!==null&&M.key!=null?O(""+M.key):te.toString(36)}function D(){}function Qt(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(D,D):(M.status="pending",M.then(function(te){M.status==="pending"&&(M.status="fulfilled",M.value=te)},function(te){M.status==="pending"&&(M.status="rejected",M.reason=te)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function yt(M,te,le,re,ye){var Me=typeof M;(Me==="undefined"||Me==="boolean")&&(M=null);var Re=!1;if(M===null)Re=!0;else switch(Me){case"bigint":case"string":case"number":Re=!0;break;case"object":switch(M.$$typeof){case n:case e:Re=!0;break;case _:return Re=M._init,yt(Re(M._payload),te,le,re,ye)}}if(Re)return ye=ye(M),Re=re===""?"."+F(M,0):re,he(ye)?(le="",Re!=null&&(le=Re.replace(V,"$&/")+"/"),yt(ye,te,le,"",function(Tr){return Tr})):ye!=null&&(R(ye)&&(ye=I(ye,le+(ye.key==null||M&&M.key===ye.key?"":(""+ye.key).replace(V,"$&/")+"/")+Re)),te.push(ye)),1;Re=0;var Ft=re===""?".":re+":";if(he(M))for(var at=0;at<M.length;at++)re=M[at],Me=Ft+F(re,at),Re+=yt(re,te,le,Me,ye);else if(at=A(M),typeof at=="function")for(M=at.call(M),at=0;!(re=M.next()).done;)re=re.value,Me=Ft+F(re,at++),Re+=yt(re,te,le,Me,ye);else if(Me==="object"){if(typeof M.then=="function")return yt(Qt(M),te,le,re,ye);throw te=String(M),Error("Objects are not valid as a React child (found: "+(te==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":te)+"). If you meant to render a collection of children, use an array instead.")}return Re}function X(M,te,le){if(M==null)return M;var re=[],ye=0;return yt(M,re,"","",function(Me){return te.call(le,Me,ye++)}),re}function oe(M){if(M._status===-1){var te=M._result;te=te(),te.then(function(le){(M._status===0||M._status===-1)&&(M._status=1,M._result=le)},function(le){(M._status===0||M._status===-1)&&(M._status=2,M._result=le)}),M._status===-1&&(M._status=0,M._result=te)}if(M._status===1)return M._result.default;throw M._result}var ge=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var te=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(te))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)};function $e(){}return Ce.Children={map:X,forEach:function(M,te,le){X(M,function(){te.apply(this,arguments)},le)},count:function(M){var te=0;return X(M,function(){te++}),te},toArray:function(M){return X(M,function(te){return te})||[]},only:function(M){if(!R(M))throw Error("React.Children.only expected to receive a single React element child.");return M}},Ce.Component=U,Ce.Fragment=t,Ce.Profiler=a,Ce.PureComponent=ie,Ce.StrictMode=i,Ce.Suspense=m,Ce.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ce,Ce.__COMPILER_RUNTIME={__proto__:null,c:function(M){return ce.H.useMemoCache(M)}},Ce.cache=function(M){return function(){return M.apply(null,arguments)}},Ce.cloneElement=function(M,te,le){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var re=N({},M.props),ye=M.key,Me=void 0;if(te!=null)for(Re in te.ref!==void 0&&(Me=void 0),te.key!==void 0&&(ye=""+te.key),te)!Te.call(te,Re)||Re==="key"||Re==="__self"||Re==="__source"||Re==="ref"&&te.ref===void 0||(re[Re]=te[Re]);var Re=arguments.length-2;if(Re===1)re.children=le;else if(1<Re){for(var Ft=Array(Re),at=0;at<Re;at++)Ft[at]=arguments[at+2];re.children=Ft}return P(M.type,ye,void 0,void 0,Me,re)},Ce.createContext=function(M){return M={$$typeof:c,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:l,_context:M},M},Ce.createElement=function(M,te,le){var re,ye={},Me=null;if(te!=null)for(re in te.key!==void 0&&(Me=""+te.key),te)Te.call(te,re)&&re!=="key"&&re!=="__self"&&re!=="__source"&&(ye[re]=te[re]);var Re=arguments.length-2;if(Re===1)ye.children=le;else if(1<Re){for(var Ft=Array(Re),at=0;at<Re;at++)Ft[at]=arguments[at+2];ye.children=Ft}if(M&&M.defaultProps)for(re in Re=M.defaultProps,Re)ye[re]===void 0&&(ye[re]=Re[re]);return P(M,Me,void 0,void 0,null,ye)},Ce.createRef=function(){return{current:null}},Ce.forwardRef=function(M){return{$$typeof:d,render:M}},Ce.isValidElement=R,Ce.lazy=function(M){return{$$typeof:_,_payload:{_status:-1,_result:M},_init:oe}},Ce.memo=function(M,te){return{$$typeof:p,type:M,compare:te===void 0?null:te}},Ce.startTransition=function(M){var te=ce.T,le={};ce.T=le;try{var re=M(),ye=ce.S;ye!==null&&ye(le,re),typeof re=="object"&&re!==null&&typeof re.then=="function"&&re.then($e,ge)}catch(Me){ge(Me)}finally{ce.T=te}},Ce.unstable_useCacheRefresh=function(){return ce.H.useCacheRefresh()},Ce.use=function(M){return ce.H.use(M)},Ce.useActionState=function(M,te,le){return ce.H.useActionState(M,te,le)},Ce.useCallback=function(M,te){return ce.H.useCallback(M,te)},Ce.useContext=function(M){return ce.H.useContext(M)},Ce.useDebugValue=function(){},Ce.useDeferredValue=function(M,te){return ce.H.useDeferredValue(M,te)},Ce.useEffect=function(M,te,le){var re=ce.H;if(typeof le=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return re.useEffect(M,te)},Ce.useId=function(){return ce.H.useId()},Ce.useImperativeHandle=function(M,te,le){return ce.H.useImperativeHandle(M,te,le)},Ce.useInsertionEffect=function(M,te){return ce.H.useInsertionEffect(M,te)},Ce.useLayoutEffect=function(M,te){return ce.H.useLayoutEffect(M,te)},Ce.useMemo=function(M,te){return ce.H.useMemo(M,te)},Ce.useOptimistic=function(M,te){return ce.H.useOptimistic(M,te)},Ce.useReducer=function(M,te,le){return ce.H.useReducer(M,te,le)},Ce.useRef=function(M){return ce.H.useRef(M)},Ce.useState=function(M){return ce.H.useState(M)},Ce.useSyncExternalStore=function(M,te,le){return ce.H.useSyncExternalStore(M,te,le)},Ce.useTransition=function(){return ce.H.useTransition()},Ce.version="19.1.0",Ce}var HT;function Xg(){return HT||(HT=1,Fp.exports=t1()),Fp.exports}var z=Xg();const S6=ZC(z);var jp={exports:{}},Iu={},Bp={exports:{}},qp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GT;function n1(){return GT||(GT=1,function(n){function e(X,oe){var ge=X.length;X.push(oe);e:for(;0<ge;){var $e=ge-1>>>1,M=X[$e];if(0<a(M,oe))X[$e]=oe,X[ge]=M,ge=$e;else break e}}function t(X){return X.length===0?null:X[0]}function i(X){if(X.length===0)return null;var oe=X[0],ge=X.pop();if(ge!==oe){X[0]=ge;e:for(var $e=0,M=X.length,te=M>>>1;$e<te;){var le=2*($e+1)-1,re=X[le],ye=le+1,Me=X[ye];if(0>a(re,ge))ye<M&&0>a(Me,re)?(X[$e]=Me,X[ye]=ge,$e=ye):(X[$e]=re,X[le]=ge,$e=le);else if(ye<M&&0>a(Me,ge))X[$e]=Me,X[ye]=ge,$e=ye;else break e}}return oe}function a(X,oe){var ge=X.sortIndex-oe.sortIndex;return ge!==0?ge:X.id-oe.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();n.unstable_now=function(){return c.now()-d}}var m=[],p=[],_=1,T=null,A=3,S=!1,N=!1,q=!1,U=!1,$=typeof setTimeout=="function"?setTimeout:null,ie=typeof clearTimeout=="function"?clearTimeout:null,ne=typeof setImmediate<"u"?setImmediate:null;function he(X){for(var oe=t(p);oe!==null;){if(oe.callback===null)i(p);else if(oe.startTime<=X)i(p),oe.sortIndex=oe.expirationTime,e(m,oe);else break;oe=t(p)}}function ce(X){if(q=!1,he(X),!N)if(t(m)!==null)N=!0,Te||(Te=!0,F());else{var oe=t(p);oe!==null&&yt(ce,oe.startTime-X)}}var Te=!1,P=-1,I=5,R=-1;function O(){return U?!0:!(n.unstable_now()-R<I)}function V(){if(U=!1,Te){var X=n.unstable_now();R=X;var oe=!0;try{e:{N=!1,q&&(q=!1,ie(P),P=-1),S=!0;var ge=A;try{t:{for(he(X),T=t(m);T!==null&&!(T.expirationTime>X&&O());){var $e=T.callback;if(typeof $e=="function"){T.callback=null,A=T.priorityLevel;var M=$e(T.expirationTime<=X);if(X=n.unstable_now(),typeof M=="function"){T.callback=M,he(X),oe=!0;break t}T===t(m)&&i(m),he(X)}else i(m);T=t(m)}if(T!==null)oe=!0;else{var te=t(p);te!==null&&yt(ce,te.startTime-X),oe=!1}}break e}finally{T=null,A=ge,S=!1}oe=void 0}}finally{oe?F():Te=!1}}}var F;if(typeof ne=="function")F=function(){ne(V)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,Qt=D.port2;D.port1.onmessage=V,F=function(){Qt.postMessage(null)}}else F=function(){$(V,0)};function yt(X,oe){P=$(function(){X(n.unstable_now())},oe)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(X){X.callback=null},n.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<X?Math.floor(1e3/X):5},n.unstable_getCurrentPriorityLevel=function(){return A},n.unstable_next=function(X){switch(A){case 1:case 2:case 3:var oe=3;break;default:oe=A}var ge=A;A=oe;try{return X()}finally{A=ge}},n.unstable_requestPaint=function(){U=!0},n.unstable_runWithPriority=function(X,oe){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var ge=A;A=X;try{return oe()}finally{A=ge}},n.unstable_scheduleCallback=function(X,oe,ge){var $e=n.unstable_now();switch(typeof ge=="object"&&ge!==null?(ge=ge.delay,ge=typeof ge=="number"&&0<ge?$e+ge:$e):ge=$e,X){case 1:var M=-1;break;case 2:M=250;break;case 5:M=1073741823;break;case 4:M=1e4;break;default:M=5e3}return M=ge+M,X={id:_++,callback:oe,priorityLevel:X,startTime:ge,expirationTime:M,sortIndex:-1},ge>$e?(X.sortIndex=ge,e(p,X),t(m)===null&&X===t(p)&&(q?(ie(P),P=-1):q=!0,yt(ce,ge-$e))):(X.sortIndex=M,e(m,X),N||S||(N=!0,Te||(Te=!0,F()))),X},n.unstable_shouldYield=O,n.unstable_wrapCallback=function(X){var oe=A;return function(){var ge=A;A=oe;try{return X.apply(this,arguments)}finally{A=ge}}}}(qp)),qp}var $T;function r1(){return $T||($T=1,Bp.exports=n1()),Bp.exports}var Hp={exports:{}},on={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KT;function i1(){if(KT)return on;KT=1;var n=Xg();function e(m){var p="https://react.dev/errors/"+m;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)p+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+m+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(m,p,_){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:T==null?null:""+T,children:m,containerInfo:p,implementation:_}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(m,p){if(m==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return on.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,on.createPortal=function(m,p){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return l(m,p,null,_)},on.flushSync=function(m){var p=c.T,_=i.p;try{if(c.T=null,i.p=2,m)return m()}finally{c.T=p,i.p=_,i.d.f()}},on.preconnect=function(m,p){typeof m=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,i.d.C(m,p))},on.prefetchDNS=function(m){typeof m=="string"&&i.d.D(m)},on.preinit=function(m,p){if(typeof m=="string"&&p&&typeof p.as=="string"){var _=p.as,T=d(_,p.crossOrigin),A=typeof p.integrity=="string"?p.integrity:void 0,S=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;_==="style"?i.d.S(m,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:T,integrity:A,fetchPriority:S}):_==="script"&&i.d.X(m,{crossOrigin:T,integrity:A,fetchPriority:S,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},on.preinitModule=function(m,p){if(typeof m=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var _=d(p.as,p.crossOrigin);i.d.M(m,{crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&i.d.M(m)},on.preload=function(m,p){if(typeof m=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var _=p.as,T=d(_,p.crossOrigin);i.d.L(m,_,{crossOrigin:T,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},on.preloadModule=function(m,p){if(typeof m=="string")if(p){var _=d(p.as,p.crossOrigin);i.d.m(m,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else i.d.m(m)},on.requestFormReset=function(m){i.d.r(m)},on.unstable_batchedUpdates=function(m,p){return m(p)},on.useFormState=function(m,p,_){return c.H.useFormState(m,p,_)},on.useFormStatus=function(){return c.H.useHostTransitionStatus()},on.version="19.1.0",on}var QT;function s1(){if(QT)return Hp.exports;QT=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Hp.exports=i1(),Hp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YT;function a1(){if(YT)return Iu;YT=1;var n=r1(),e=Xg(),t=s1();function i(r){var s="https://react.dev/errors/"+r;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function l(r){var s=r,o=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,(s.flags&4098)!==0&&(o=s.return),r=s.return;while(r)}return s.tag===3?o:null}function c(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function d(r){if(l(r)!==r)throw Error(i(188))}function m(r){var s=r.alternate;if(!s){if(s=l(r),s===null)throw Error(i(188));return s!==r?null:r}for(var o=r,u=s;;){var f=o.return;if(f===null)break;var g=f.alternate;if(g===null){if(u=f.return,u!==null){o=u;continue}break}if(f.child===g.child){for(g=f.child;g;){if(g===o)return d(f),r;if(g===u)return d(f),s;g=g.sibling}throw Error(i(188))}if(o.return!==u.return)o=f,u=g;else{for(var E=!1,b=f.child;b;){if(b===o){E=!0,o=f,u=g;break}if(b===u){E=!0,u=f,o=g;break}b=b.sibling}if(!E){for(b=g.child;b;){if(b===o){E=!0,o=g,u=f;break}if(b===u){E=!0,u=g,o=f;break}b=b.sibling}if(!E)throw Error(i(189))}}if(o.alternate!==u)throw Error(i(190))}if(o.tag!==3)throw Error(i(188));return o.stateNode.current===o?r:s}function p(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r;for(r=r.child;r!==null;){if(s=p(r),s!==null)return s;r=r.sibling}return null}var _=Object.assign,T=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),q=Symbol.for("react.strict_mode"),U=Symbol.for("react.profiler"),$=Symbol.for("react.provider"),ie=Symbol.for("react.consumer"),ne=Symbol.for("react.context"),he=Symbol.for("react.forward_ref"),ce=Symbol.for("react.suspense"),Te=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),V=Symbol.iterator;function F(r){return r===null||typeof r!="object"?null:(r=V&&r[V]||r["@@iterator"],typeof r=="function"?r:null)}var D=Symbol.for("react.client.reference");function Qt(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===D?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case N:return"Fragment";case U:return"Profiler";case q:return"StrictMode";case ce:return"Suspense";case Te:return"SuspenseList";case R:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case S:return"Portal";case ne:return(r.displayName||"Context")+".Provider";case ie:return(r._context.displayName||"Context")+".Consumer";case he:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case P:return s=r.displayName||null,s!==null?s:Qt(r.type)||"Memo";case I:s=r._payload,r=r._init;try{return Qt(r(s))}catch{}}return null}var yt=Array.isArray,X=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oe=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ge={pending:!1,data:null,method:null,action:null},$e=[],M=-1;function te(r){return{current:r}}function le(r){0>M||(r.current=$e[M],$e[M]=null,M--)}function re(r,s){M++,$e[M]=r.current,r.current=s}var ye=te(null),Me=te(null),Re=te(null),Ft=te(null);function at(r,s){switch(re(Re,s),re(Me,r),re(ye,null),s.nodeType){case 9:case 11:r=(r=s.documentElement)&&(r=r.namespaceURI)?pT(r):0;break;default:if(r=s.tagName,s=s.namespaceURI)s=pT(s),r=gT(s,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}le(ye),re(ye,r)}function Tr(){le(ye),le(Me),le(Re)}function Vi(r){r.memoizedState!==null&&re(Ft,r);var s=ye.current,o=gT(s,r.type);s!==o&&(re(Me,r),re(ye,o))}function Zr(r){Me.current===r&&(le(ye),le(Me)),Ft.current===r&&(le(Ft),Tu._currentValue=ge)}var Bs=Object.prototype.hasOwnProperty,qs=n.unstable_scheduleCallback,Hs=n.unstable_cancelCallback,_l=n.unstable_shouldYield,xc=n.unstable_requestPaint,jn=n.unstable_now,zd=n.unstable_getCurrentPriorityLevel,vl=n.unstable_ImmediatePriority,$a=n.unstable_UserBlockingPriority,Gs=n.unstable_NormalPriority,Fd=n.unstable_LowPriority,Ka=n.unstable_IdlePriority,El=n.log,Vc=n.unstable_setDisableYieldValue,_t=null,Xe=null;function Rn(r){if(typeof El=="function"&&Vc(r),Xe&&typeof Xe.setStrictMode=="function")try{Xe.setStrictMode(_t,r)}catch{}}var sn=Math.clz32?Math.clz32:$s,kc=Math.log,jd=Math.LN2;function $s(r){return r>>>=0,r===0?32:31-(kc(r)/jd|0)|0}var Ks=256,Qs=4194304;function sr(r){var s=r&42;if(s!==0)return s;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function Qa(r,s,o){var u=r.pendingLanes;if(u===0)return 0;var f=0,g=r.suspendedLanes,E=r.pingedLanes;r=r.warmLanes;var b=u&134217727;return b!==0?(u=b&~g,u!==0?f=sr(u):(E&=b,E!==0?f=sr(E):o||(o=b&~r,o!==0&&(f=sr(o))))):(b=u&~g,b!==0?f=sr(b):E!==0?f=sr(E):o||(o=u&~r,o!==0&&(f=sr(o)))),f===0?0:s!==0&&s!==f&&(s&g)===0&&(g=f&-f,o=s&-s,g>=o||g===32&&(o&4194048)!==0)?s:f}function Ys(r,s){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&s)===0}function Tl(r,s){switch(r){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Al(){var r=Ks;return Ks<<=1,(Ks&4194048)===0&&(Ks=256),r}function bl(){var r=Qs;return Qs<<=1,(Qs&62914560)===0&&(Qs=4194304),r}function Jr(r){for(var s=[],o=0;31>o;o++)s.push(r);return s}function ei(r,s){r.pendingLanes|=s,s!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function wl(r,s,o,u,f,g){var E=r.pendingLanes;r.pendingLanes=o,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=o,r.entangledLanes&=o,r.errorRecoveryDisabledLanes&=o,r.shellSuspendCounter=0;var b=r.entanglements,C=r.expirationTimes,H=r.hiddenUpdates;for(o=E&~o;0<o;){var W=31-sn(o),J=1<<W;b[W]=0,C[W]=-1;var G=H[W];if(G!==null)for(H[W]=null,W=0;W<G.length;W++){var K=G[W];K!==null&&(K.lane&=-536870913)}o&=~J}u!==0&&Ar(r,u,0),g!==0&&f===0&&r.tag!==0&&(r.suspendedLanes|=g&~(E&~s))}function Ar(r,s,o){r.pendingLanes|=s,r.suspendedLanes&=~s;var u=31-sn(s);r.entangledLanes|=s,r.entanglements[u]=r.entanglements[u]|1073741824|o&4194090}function Sl(r,s){var o=r.entangledLanes|=s;for(r=r.entanglements;o;){var u=31-sn(o),f=1<<u;f&s|r[u]&s&&(r[u]|=s),o&=~f}}function ki(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function Ya(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function Li(){var r=oe.p;return r!==0?r:(r=window.event,r===void 0?32:VT(r.type))}function Lc(r,s){var o=oe.p;try{return oe.p=r,s()}finally{oe.p=o}}var ct=Math.random().toString(36).slice(2),Pt="__reactFiber$"+ct,Rt="__reactProps$"+ct,Bn="__reactContainer$"+ct,Rl="__reactEvents$"+ct,Bd="__reactListeners$"+ct,Ui="__reactHandles$"+ct,Uc="__reactResources$"+ct,Xs="__reactMarker$"+ct;function zi(r){delete r[Pt],delete r[Rt],delete r[Rl],delete r[Bd],delete r[Ui]}function ti(r){var s=r[Pt];if(s)return s;for(var o=r.parentNode;o;){if(s=o[Bn]||o[Pt]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(r=ET(r);r!==null;){if(o=r[Pt])return o;r=ET(r)}return s}r=o,o=r.parentNode}return null}function br(r){if(r=r[Pt]||r[Bn]){var s=r.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return r}return null}function wr(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r.stateNode;throw Error(i(33))}function pn(r){var s=r[Uc];return s||(s=r[Uc]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function At(r){r[Xs]=!0}var Il=new Set,Xa={};function ar(r,s){ni(r,s),ni(r+"Capture",s)}function ni(r,s){for(Xa[r]=s,r=0;r<s.length;r++)Il.add(s[r])}var zc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Fc={},Ws={};function jc(r){return Bs.call(Ws,r)?!0:Bs.call(Fc,r)?!1:zc.test(r)?Ws[r]=!0:(Fc[r]=!0,!1)}function Fi(r,s,o){if(jc(s))if(o===null)r.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":r.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){r.removeAttribute(s);return}}r.setAttribute(s,""+o)}}function Sr(r,s,o){if(o===null)r.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(s);return}r.setAttribute(s,""+o)}}function Yt(r,s,o,u){if(u===null)r.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(o);return}r.setAttributeNS(s,o,""+u)}}var Zs,Bc;function ri(r){if(Zs===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);Zs=s&&s[1]||"",Bc=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Zs+r+Bc}var Wa=!1;function Za(r,s){if(!r||Wa)return"";Wa=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var J=function(){throw Error()};if(Object.defineProperty(J.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(J,[])}catch(K){var G=K}Reflect.construct(r,[],J)}else{try{J.call()}catch(K){G=K}r.call(J.prototype)}}else{try{throw Error()}catch(K){G=K}(J=r())&&typeof J.catch=="function"&&J.catch(function(){})}}catch(K){if(K&&G&&typeof K.stack=="string")return[K.stack,G.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=u.DetermineComponentFrameRoot(),E=g[0],b=g[1];if(E&&b){var C=E.split(`
`),H=b.split(`
`);for(f=u=0;u<C.length&&!C[u].includes("DetermineComponentFrameRoot");)u++;for(;f<H.length&&!H[f].includes("DetermineComponentFrameRoot");)f++;if(u===C.length||f===H.length)for(u=C.length-1,f=H.length-1;1<=u&&0<=f&&C[u]!==H[f];)f--;for(;1<=u&&0<=f;u--,f--)if(C[u]!==H[f]){if(u!==1||f!==1)do if(u--,f--,0>f||C[u]!==H[f]){var W=`
`+C[u].replace(" at new "," at ");return r.displayName&&W.includes("<anonymous>")&&(W=W.replace("<anonymous>",r.displayName)),W}while(1<=u&&0<=f);break}}}finally{Wa=!1,Error.prepareStackTrace=o}return(o=r?r.displayName||r.name:"")?ri(o):""}function Cl(r){switch(r.tag){case 26:case 27:case 5:return ri(r.type);case 16:return ri("Lazy");case 13:return ri("Suspense");case 19:return ri("SuspenseList");case 0:case 15:return Za(r.type,!1);case 11:return Za(r.type.render,!1);case 1:return Za(r.type,!0);case 31:return ri("Activity");default:return""}}function Ja(r){try{var s="";do s+=Cl(r),r=r.return;while(r);return s}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function gn(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Nl(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function qd(r){var s=Nl(r)?"checked":"value",o=Object.getOwnPropertyDescriptor(r.constructor.prototype,s),u=""+r[s];if(!r.hasOwnProperty(s)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var f=o.get,g=o.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return f.call(this)},set:function(E){u=""+E,g.call(this,E)}}),Object.defineProperty(r,s,{enumerable:o.enumerable}),{getValue:function(){return u},setValue:function(E){u=""+E},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function eo(r){r._valueTracker||(r._valueTracker=qd(r))}function Dl(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var o=s.getValue(),u="";return r&&(u=Nl(r)?r.checked?"true":"false":r.value),r=u,r!==o?(s.setValue(r),!0):!1}function Js(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var Hd=/[\n"\\]/g;function It(r){return r.replace(Hd,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function In(r,s,o,u,f,g,E,b){r.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?r.type=E:r.removeAttribute("type"),s!=null?E==="number"?(s===0&&r.value===""||r.value!=s)&&(r.value=""+gn(s)):r.value!==""+gn(s)&&(r.value=""+gn(s)):E!=="submit"&&E!=="reset"||r.removeAttribute("value"),s!=null?ji(r,E,gn(s)):o!=null?ji(r,E,gn(o)):u!=null&&r.removeAttribute("value"),f==null&&g!=null&&(r.defaultChecked=!!g),f!=null&&(r.checked=f&&typeof f!="function"&&typeof f!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?r.name=""+gn(b):r.removeAttribute("name")}function ea(r,s,o,u,f,g,E,b){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(r.type=g),s!=null||o!=null){if(!(g!=="submit"&&g!=="reset"||s!=null))return;o=o!=null?""+gn(o):"",s=s!=null?""+gn(s):o,b||s===r.value||(r.value=s),r.defaultValue=s}u=u??f,u=typeof u!="function"&&typeof u!="symbol"&&!!u,r.checked=b?r.checked:!!u,r.defaultChecked=!!u,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(r.name=E)}function ji(r,s,o){s==="number"&&Js(r.ownerDocument)===r||r.defaultValue===""+o||(r.defaultValue=""+o)}function ii(r,s,o,u){if(r=r.options,s){s={};for(var f=0;f<o.length;f++)s["$"+o[f]]=!0;for(o=0;o<r.length;o++)f=s.hasOwnProperty("$"+r[o].value),r[o].selected!==f&&(r[o].selected=f),f&&u&&(r[o].defaultSelected=!0)}else{for(o=""+gn(o),s=null,f=0;f<r.length;f++){if(r[f].value===o){r[f].selected=!0,u&&(r[f].defaultSelected=!0);return}s!==null||r[f].disabled||(s=r[f])}s!==null&&(s.selected=!0)}}function et(r,s,o){if(s!=null&&(s=""+gn(s),s!==r.value&&(r.value=s),o==null)){r.defaultValue!==s&&(r.defaultValue=s);return}r.defaultValue=o!=null?""+gn(o):""}function ta(r,s,o,u){if(s==null){if(u!=null){if(o!=null)throw Error(i(92));if(yt(u)){if(1<u.length)throw Error(i(93));u=u[0]}o=u}o==null&&(o=""),s=o}o=gn(s),r.defaultValue=o,u=r.textContent,u===o&&u!==""&&u!==null&&(r.value=u)}function qn(r,s){if(s){var o=r.firstChild;if(o&&o===r.lastChild&&o.nodeType===3){o.nodeValue=s;return}}r.textContent=s}var na=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function qc(r,s,o){var u=s.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?r.setProperty(s,""):s==="float"?r.cssFloat="":r[s]="":u?r.setProperty(s,o):typeof o!="number"||o===0||na.has(s)?s==="float"?r.cssFloat=o:r[s]=(""+o).trim():r[s]=o+"px"}function Ol(r,s,o){if(s!=null&&typeof s!="object")throw Error(i(62));if(r=r.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?r.setProperty(u,""):u==="float"?r.cssFloat="":r[u]="");for(var f in s)u=s[f],s.hasOwnProperty(f)&&o[f]!==u&&qc(r,f,u)}else for(var g in s)s.hasOwnProperty(g)&&qc(r,g,s[g])}function Ml(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Gd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),$d=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function to(r){return $d.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}var si=null;function Hn(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var ai=null,oi=null;function Pl(r){var s=br(r);if(s&&(r=s.stateNode)){var o=r[Rt]||null;e:switch(r=s.stateNode,s.type){case"input":if(In(r,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),s=o.name,o.type==="radio"&&s!=null){for(o=r;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+It(""+s)+'"][type="radio"]'),s=0;s<o.length;s++){var u=o[s];if(u!==r&&u.form===r.form){var f=u[Rt]||null;if(!f)throw Error(i(90));In(u,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(s=0;s<o.length;s++)u=o[s],u.form===r.form&&Dl(u)}break e;case"textarea":et(r,o.value,o.defaultValue);break e;case"select":s=o.value,s!=null&&ii(r,!!o.multiple,s,!1)}}}var Rr=!1;function Hc(r,s,o){if(Rr)return r(s,o);Rr=!0;try{var u=r(s);return u}finally{if(Rr=!1,(ai!==null||oi!==null)&&(Lh(),ai&&(s=ai,r=oi,oi=ai=null,Pl(s),r)))for(s=0;s<r.length;s++)Pl(r[s])}}function ra(r,s){var o=r.stateNode;if(o===null)return null;var u=o[Rt]||null;if(u===null)return null;o=u[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(r=r.type,u=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!u;break e;default:r=!1}if(r)return null;if(o&&typeof o!="function")throw Error(i(231,s,typeof o));return o}var or=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Gn=!1;if(or)try{var ia={};Object.defineProperty(ia,"passive",{get:function(){Gn=!0}}),window.addEventListener("test",ia,ia),window.removeEventListener("test",ia,ia)}catch{Gn=!1}var Ir=null,Bi=null,li=null;function xl(){if(li)return li;var r,s=Bi,o=s.length,u,f="value"in Ir?Ir.value:Ir.textContent,g=f.length;for(r=0;r<o&&s[r]===f[r];r++);var E=o-r;for(u=1;u<=E&&s[o-u]===f[g-u];u++);return li=f.slice(r,1<u?1-u:void 0)}function Cr(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function Nr(){return!0}function Vl(){return!1}function jt(r){function s(o,u,f,g,E){this._reactName=o,this._targetInst=f,this.type=u,this.nativeEvent=g,this.target=E,this.currentTarget=null;for(var b in r)r.hasOwnProperty(b)&&(o=r[b],this[b]=o?o(g):g[b]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Nr:Vl,this.isPropagationStopped=Vl,this}return _(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Nr)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Nr)},persist:function(){},isPersistent:Nr}),s}var Qe={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},no=jt(Qe),sa=_({},Qe,{view:0,detail:0}),Gc=jt(sa),ro,io,Dr,aa=_({},sa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ua,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Dr&&(Dr&&r.type==="mousemove"?(ro=r.screenX-Dr.screenX,io=r.screenY-Dr.screenY):io=ro=0,Dr=r),ro)},movementY:function(r){return"movementY"in r?r.movementY:io}}),$n=jt(aa),$c=_({},aa,{dataTransfer:0}),Kd=jt($c),oa=_({},sa,{relatedTarget:0}),so=jt(oa),kl=_({},Qe,{animationName:0,elapsedTime:0,pseudoElement:0}),ao=jt(kl),Kc=_({},Qe,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),oo=jt(Kc),Qd=_({},Qe,{data:0}),Ll=jt(Qd),la={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Qc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Yc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ul(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=Yc[r])?!!s[r]:!1}function ua(){return Ul}var Xc=_({},sa,{key:function(r){if(r.key){var s=la[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=Cr(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Qc[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ua,charCode:function(r){return r.type==="keypress"?Cr(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Cr(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),lo=jt(Xc),Wc=_({},aa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),zl=jt(Wc),ui=_({},sa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ua}),Zc=jt(ui),Jc=_({},Qe,{propertyName:0,elapsedTime:0,pseudoElement:0}),eh=jt(Jc),th=_({},aa,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),uo=jt(th),yn=_({},Qe,{newState:0,oldState:0}),nh=jt(yn),rh=[9,13,27,32],Or=or&&"CompositionEvent"in window,h=null;or&&"documentMode"in document&&(h=document.documentMode);var y=or&&"TextEvent"in window&&!h,v=or&&(!Or||h&&8<h&&11>=h),w=" ",j=!1;function Q(r,s){switch(r){case"keyup":return rh.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ae(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var je=!1;function xt(r,s){switch(r){case"compositionend":return ae(s);case"keypress":return s.which!==32?null:(j=!0,w);case"textInput":return r=s.data,r===w&&j?null:r;default:return null}}function Be(r,s){if(je)return r==="compositionend"||!Or&&Q(r,s)?(r=xl(),li=Bi=Ir=null,je=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return v&&s.locale!=="ko"?null:s.data;default:return null}}var Bt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vt(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!Bt[r.type]:s==="textarea"}function ci(r,s,o,u){ai?oi?oi.push(u):oi=[u]:ai=u,s=qh(s,"onChange"),0<s.length&&(o=new no("onChange","change",null,o,u),r.push({event:o,listeners:s}))}var Xt=null,Mr=null;function Fl(r){cT(r,0)}function ih(r){var s=wr(r);if(Dl(s))return r}function O_(r,s){if(r==="change")return s}var M_=!1;if(or){var Yd;if(or){var Xd="oninput"in document;if(!Xd){var P_=document.createElement("div");P_.setAttribute("oninput","return;"),Xd=typeof P_.oninput=="function"}Yd=Xd}else Yd=!1;M_=Yd&&(!document.documentMode||9<document.documentMode)}function x_(){Xt&&(Xt.detachEvent("onpropertychange",V_),Mr=Xt=null)}function V_(r){if(r.propertyName==="value"&&ih(Mr)){var s=[];ci(s,Mr,r,Hn(r)),Hc(Fl,s)}}function CI(r,s,o){r==="focusin"?(x_(),Xt=s,Mr=o,Xt.attachEvent("onpropertychange",V_)):r==="focusout"&&x_()}function NI(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return ih(Mr)}function DI(r,s){if(r==="click")return ih(s)}function OI(r,s){if(r==="input"||r==="change")return ih(s)}function MI(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var Cn=typeof Object.is=="function"?Object.is:MI;function jl(r,s){if(Cn(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var o=Object.keys(r),u=Object.keys(s);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var f=o[u];if(!Bs.call(s,f)||!Cn(r[f],s[f]))return!1}return!0}function k_(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function L_(r,s){var o=k_(r);r=0;for(var u;o;){if(o.nodeType===3){if(u=r+o.textContent.length,r<=s&&u>=s)return{node:o,offset:s-r};r=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=k_(o)}}function U_(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?U_(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function z_(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var s=Js(r.document);s instanceof r.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)r=s.contentWindow;else break;s=Js(r.document)}return s}function Wd(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}var PI=or&&"documentMode"in document&&11>=document.documentMode,co=null,Zd=null,Bl=null,Jd=!1;function F_(r,s,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Jd||co==null||co!==Js(u)||(u=co,"selectionStart"in u&&Wd(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Bl&&jl(Bl,u)||(Bl=u,u=qh(Zd,"onSelect"),0<u.length&&(s=new no("onSelect","select",null,s,o),r.push({event:s,listeners:u}),s.target=co)))}function ca(r,s){var o={};return o[r.toLowerCase()]=s.toLowerCase(),o["Webkit"+r]="webkit"+s,o["Moz"+r]="moz"+s,o}var ho={animationend:ca("Animation","AnimationEnd"),animationiteration:ca("Animation","AnimationIteration"),animationstart:ca("Animation","AnimationStart"),transitionrun:ca("Transition","TransitionRun"),transitionstart:ca("Transition","TransitionStart"),transitioncancel:ca("Transition","TransitionCancel"),transitionend:ca("Transition","TransitionEnd")},em={},j_={};or&&(j_=document.createElement("div").style,"AnimationEvent"in window||(delete ho.animationend.animation,delete ho.animationiteration.animation,delete ho.animationstart.animation),"TransitionEvent"in window||delete ho.transitionend.transition);function ha(r){if(em[r])return em[r];if(!ho[r])return r;var s=ho[r],o;for(o in s)if(s.hasOwnProperty(o)&&o in j_)return em[r]=s[o];return r}var B_=ha("animationend"),q_=ha("animationiteration"),H_=ha("animationstart"),xI=ha("transitionrun"),VI=ha("transitionstart"),kI=ha("transitioncancel"),G_=ha("transitionend"),$_=new Map,tm="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");tm.push("scrollEnd");function lr(r,s){$_.set(r,s),ar(s,[r])}var K_=new WeakMap;function Kn(r,s){if(typeof r=="object"&&r!==null){var o=K_.get(r);return o!==void 0?o:(s={value:r,source:s,stack:Ja(s)},K_.set(r,s),s)}return{value:r,source:s,stack:Ja(s)}}var Qn=[],fo=0,nm=0;function sh(){for(var r=fo,s=nm=fo=0;s<r;){var o=Qn[s];Qn[s++]=null;var u=Qn[s];Qn[s++]=null;var f=Qn[s];Qn[s++]=null;var g=Qn[s];if(Qn[s++]=null,u!==null&&f!==null){var E=u.pending;E===null?f.next=f:(f.next=E.next,E.next=f),u.pending=f}g!==0&&Q_(o,f,g)}}function ah(r,s,o,u){Qn[fo++]=r,Qn[fo++]=s,Qn[fo++]=o,Qn[fo++]=u,nm|=u,r.lanes|=u,r=r.alternate,r!==null&&(r.lanes|=u)}function rm(r,s,o,u){return ah(r,s,o,u),oh(r)}function mo(r,s){return ah(r,null,null,s),oh(r)}function Q_(r,s,o){r.lanes|=o;var u=r.alternate;u!==null&&(u.lanes|=o);for(var f=!1,g=r.return;g!==null;)g.childLanes|=o,u=g.alternate,u!==null&&(u.childLanes|=o),g.tag===22&&(r=g.stateNode,r===null||r._visibility&1||(f=!0)),r=g,g=g.return;return r.tag===3?(g=r.stateNode,f&&s!==null&&(f=31-sn(o),r=g.hiddenUpdates,u=r[f],u===null?r[f]=[s]:u.push(s),s.lane=o|536870912),g):null}function oh(r){if(50<du)throw du=0,up=null,Error(i(185));for(var s=r.return;s!==null;)r=s,s=r.return;return r.tag===3?r.stateNode:null}var po={};function LI(r,s,o,u){this.tag=r,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nn(r,s,o,u){return new LI(r,s,o,u)}function im(r){return r=r.prototype,!(!r||!r.isReactComponent)}function hi(r,s){var o=r.alternate;return o===null?(o=Nn(r.tag,s,r.key,r.mode),o.elementType=r.elementType,o.type=r.type,o.stateNode=r.stateNode,o.alternate=r,r.alternate=o):(o.pendingProps=s,o.type=r.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=r.flags&65011712,o.childLanes=r.childLanes,o.lanes=r.lanes,o.child=r.child,o.memoizedProps=r.memoizedProps,o.memoizedState=r.memoizedState,o.updateQueue=r.updateQueue,s=r.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=r.sibling,o.index=r.index,o.ref=r.ref,o.refCleanup=r.refCleanup,o}function Y_(r,s){r.flags&=65011714;var o=r.alternate;return o===null?(r.childLanes=0,r.lanes=s,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,s=o.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),r}function lh(r,s,o,u,f,g){var E=0;if(u=r,typeof r=="function")im(r)&&(E=1);else if(typeof r=="string")E=zC(r,o,ye.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case R:return r=Nn(31,o,s,f),r.elementType=R,r.lanes=g,r;case N:return fa(o.children,f,g,s);case q:E=8,f|=24;break;case U:return r=Nn(12,o,s,f|2),r.elementType=U,r.lanes=g,r;case ce:return r=Nn(13,o,s,f),r.elementType=ce,r.lanes=g,r;case Te:return r=Nn(19,o,s,f),r.elementType=Te,r.lanes=g,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case $:case ne:E=10;break e;case ie:E=9;break e;case he:E=11;break e;case P:E=14;break e;case I:E=16,u=null;break e}E=29,o=Error(i(130,r===null?"null":typeof r,"")),u=null}return s=Nn(E,o,s,f),s.elementType=r,s.type=u,s.lanes=g,s}function fa(r,s,o,u){return r=Nn(7,r,u,s),r.lanes=o,r}function sm(r,s,o){return r=Nn(6,r,null,s),r.lanes=o,r}function am(r,s,o){return s=Nn(4,r.children!==null?r.children:[],r.key,s),s.lanes=o,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}var go=[],yo=0,uh=null,ch=0,Yn=[],Xn=0,da=null,fi=1,di="";function ma(r,s){go[yo++]=ch,go[yo++]=uh,uh=r,ch=s}function X_(r,s,o){Yn[Xn++]=fi,Yn[Xn++]=di,Yn[Xn++]=da,da=r;var u=fi;r=di;var f=32-sn(u)-1;u&=~(1<<f),o+=1;var g=32-sn(s)+f;if(30<g){var E=f-f%5;g=(u&(1<<E)-1).toString(32),u>>=E,f-=E,fi=1<<32-sn(s)+f|o<<f|u,di=g+r}else fi=1<<g|o<<f|u,di=r}function om(r){r.return!==null&&(ma(r,1),X_(r,1,0))}function lm(r){for(;r===uh;)uh=go[--yo],go[yo]=null,ch=go[--yo],go[yo]=null;for(;r===da;)da=Yn[--Xn],Yn[Xn]=null,di=Yn[--Xn],Yn[Xn]=null,fi=Yn[--Xn],Yn[Xn]=null}var _n=null,vt=null,Ke=!1,pa=null,Pr=!1,um=Error(i(519));function ga(r){var s=Error(i(418,""));throw Gl(Kn(s,r)),um}function W_(r){var s=r.stateNode,o=r.type,u=r.memoizedProps;switch(s[Pt]=r,s[Rt]=u,o){case"dialog":Ve("cancel",s),Ve("close",s);break;case"iframe":case"object":case"embed":Ve("load",s);break;case"video":case"audio":for(o=0;o<pu.length;o++)Ve(pu[o],s);break;case"source":Ve("error",s);break;case"img":case"image":case"link":Ve("error",s),Ve("load",s);break;case"details":Ve("toggle",s);break;case"input":Ve("invalid",s),ea(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),eo(s);break;case"select":Ve("invalid",s);break;case"textarea":Ve("invalid",s),ta(s,u.value,u.defaultValue,u.children),eo(s)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||s.textContent===""+o||u.suppressHydrationWarning===!0||mT(s.textContent,o)?(u.popover!=null&&(Ve("beforetoggle",s),Ve("toggle",s)),u.onScroll!=null&&Ve("scroll",s),u.onScrollEnd!=null&&Ve("scrollend",s),u.onClick!=null&&(s.onclick=Hh),s=!0):s=!1,s||ga(r)}function Z_(r){for(_n=r.return;_n;)switch(_n.tag){case 5:case 13:Pr=!1;return;case 27:case 3:Pr=!0;return;default:_n=_n.return}}function ql(r){if(r!==_n)return!1;if(!Ke)return Z_(r),Ke=!0,!1;var s=r.tag,o;if((o=s!==3&&s!==27)&&((o=s===5)&&(o=r.type,o=!(o!=="form"&&o!=="button")||Sp(r.type,r.memoizedProps)),o=!o),o&&vt&&ga(r),Z_(r),s===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));e:{for(r=r.nextSibling,s=0;r;){if(r.nodeType===8)if(o=r.data,o==="/$"){if(s===0){vt=cr(r.nextSibling);break e}s--}else o!=="$"&&o!=="$!"&&o!=="$?"||s++;r=r.nextSibling}vt=null}}else s===27?(s=vt,is(r.type)?(r=Np,Np=null,vt=r):vt=s):vt=_n?cr(r.stateNode.nextSibling):null;return!0}function Hl(){vt=_n=null,Ke=!1}function J_(){var r=pa;return r!==null&&(An===null?An=r:An.push.apply(An,r),pa=null),r}function Gl(r){pa===null?pa=[r]:pa.push(r)}var cm=te(null),ya=null,mi=null;function qi(r,s,o){re(cm,s._currentValue),s._currentValue=o}function pi(r){r._currentValue=cm.current,le(cm)}function hm(r,s,o){for(;r!==null;){var u=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),r===o)break;r=r.return}}function fm(r,s,o,u){var f=r.child;for(f!==null&&(f.return=r);f!==null;){var g=f.dependencies;if(g!==null){var E=f.child;g=g.firstContext;e:for(;g!==null;){var b=g;g=f;for(var C=0;C<s.length;C++)if(b.context===s[C]){g.lanes|=o,b=g.alternate,b!==null&&(b.lanes|=o),hm(g.return,o,r),u||(E=null);break e}g=b.next}}else if(f.tag===18){if(E=f.return,E===null)throw Error(i(341));E.lanes|=o,g=E.alternate,g!==null&&(g.lanes|=o),hm(E,o,r),E=null}else E=f.child;if(E!==null)E.return=f;else for(E=f;E!==null;){if(E===r){E=null;break}if(f=E.sibling,f!==null){f.return=E.return,E=f;break}E=E.return}f=E}}function $l(r,s,o,u){r=null;for(var f=s,g=!1;f!==null;){if(!g){if((f.flags&524288)!==0)g=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var E=f.alternate;if(E===null)throw Error(i(387));if(E=E.memoizedProps,E!==null){var b=f.type;Cn(f.pendingProps.value,E.value)||(r!==null?r.push(b):r=[b])}}else if(f===Ft.current){if(E=f.alternate,E===null)throw Error(i(387));E.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(r!==null?r.push(Tu):r=[Tu])}f=f.return}r!==null&&fm(s,r,o,u),s.flags|=262144}function hh(r){for(r=r.firstContext;r!==null;){if(!Cn(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function _a(r){ya=r,mi=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function an(r){return ev(ya,r)}function fh(r,s){return ya===null&&_a(r),ev(r,s)}function ev(r,s){var o=s._currentValue;if(s={context:s,memoizedValue:o,next:null},mi===null){if(r===null)throw Error(i(308));mi=s,r.dependencies={lanes:0,firstContext:s},r.flags|=524288}else mi=mi.next=s;return o}var UI=typeof AbortController<"u"?AbortController:function(){var r=[],s=this.signal={aborted:!1,addEventListener:function(o,u){r.push(u)}};this.abort=function(){s.aborted=!0,r.forEach(function(o){return o()})}},zI=n.unstable_scheduleCallback,FI=n.unstable_NormalPriority,kt={$$typeof:ne,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function dm(){return{controller:new UI,data:new Map,refCount:0}}function Kl(r){r.refCount--,r.refCount===0&&zI(FI,function(){r.controller.abort()})}var Ql=null,mm=0,_o=0,vo=null;function jI(r,s){if(Ql===null){var o=Ql=[];mm=0,_o=gp(),vo={status:"pending",value:void 0,then:function(u){o.push(u)}}}return mm++,s.then(tv,tv),s}function tv(){if(--mm===0&&Ql!==null){vo!==null&&(vo.status="fulfilled");var r=Ql;Ql=null,_o=0,vo=null;for(var s=0;s<r.length;s++)(0,r[s])()}}function BI(r,s){var o=[],u={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return r.then(function(){u.status="fulfilled",u.value=s;for(var f=0;f<o.length;f++)(0,o[f])(s)},function(f){for(u.status="rejected",u.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),u}var nv=X.S;X.S=function(r,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&jI(r,s),nv!==null&&nv(r,s)};var va=te(null);function pm(){var r=va.current;return r!==null?r:ot.pooledCache}function dh(r,s){s===null?re(va,va.current):re(va,s.pool)}function rv(){var r=pm();return r===null?null:{parent:kt._currentValue,pool:r}}var Yl=Error(i(460)),iv=Error(i(474)),mh=Error(i(542)),gm={then:function(){}};function sv(r){return r=r.status,r==="fulfilled"||r==="rejected"}function ph(){}function av(r,s,o){switch(o=r[o],o===void 0?r.push(s):o!==s&&(s.then(ph,ph),s=o),s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,lv(r),r;default:if(typeof s.status=="string")s.then(ph,ph);else{if(r=ot,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=s,r.status="pending",r.then(function(u){if(s.status==="pending"){var f=s;f.status="fulfilled",f.value=u}},function(u){if(s.status==="pending"){var f=s;f.status="rejected",f.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,lv(r),r}throw Xl=s,Yl}}var Xl=null;function ov(){if(Xl===null)throw Error(i(459));var r=Xl;return Xl=null,r}function lv(r){if(r===Yl||r===mh)throw Error(i(483))}var Hi=!1;function ym(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function _m(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Gi(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function $i(r,s,o){var u=r.updateQueue;if(u===null)return null;if(u=u.shared,(We&2)!==0){var f=u.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),u.pending=s,s=oh(r),Q_(r,null,o),s}return ah(r,u,s,o),oh(r)}function Wl(r,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194048)!==0)){var u=s.lanes;u&=r.pendingLanes,o|=u,s.lanes=o,Sl(r,o)}}function vm(r,s){var o=r.updateQueue,u=r.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var f=null,g=null;if(o=o.firstBaseUpdate,o!==null){do{var E={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};g===null?f=g=E:g=g.next=E,o=o.next}while(o!==null);g===null?f=g=s:g=g.next=s}else f=g=s;o={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:g,shared:u.shared,callbacks:u.callbacks},r.updateQueue=o;return}r=o.lastBaseUpdate,r===null?o.firstBaseUpdate=s:r.next=s,o.lastBaseUpdate=s}var Em=!1;function Zl(){if(Em){var r=vo;if(r!==null)throw r}}function Jl(r,s,o,u){Em=!1;var f=r.updateQueue;Hi=!1;var g=f.firstBaseUpdate,E=f.lastBaseUpdate,b=f.shared.pending;if(b!==null){f.shared.pending=null;var C=b,H=C.next;C.next=null,E===null?g=H:E.next=H,E=C;var W=r.alternate;W!==null&&(W=W.updateQueue,b=W.lastBaseUpdate,b!==E&&(b===null?W.firstBaseUpdate=H:b.next=H,W.lastBaseUpdate=C))}if(g!==null){var J=f.baseState;E=0,W=H=C=null,b=g;do{var G=b.lane&-536870913,K=G!==b.lane;if(K?(qe&G)===G:(u&G)===G){G!==0&&G===_o&&(Em=!0),W!==null&&(W=W.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});e:{var we=r,ve=b;G=s;var rt=o;switch(ve.tag){case 1:if(we=ve.payload,typeof we=="function"){J=we.call(rt,J,G);break e}J=we;break e;case 3:we.flags=we.flags&-65537|128;case 0:if(we=ve.payload,G=typeof we=="function"?we.call(rt,J,G):we,G==null)break e;J=_({},J,G);break e;case 2:Hi=!0}}G=b.callback,G!==null&&(r.flags|=64,K&&(r.flags|=8192),K=f.callbacks,K===null?f.callbacks=[G]:K.push(G))}else K={lane:G,tag:b.tag,payload:b.payload,callback:b.callback,next:null},W===null?(H=W=K,C=J):W=W.next=K,E|=G;if(b=b.next,b===null){if(b=f.shared.pending,b===null)break;K=b,b=K.next,K.next=null,f.lastBaseUpdate=K,f.shared.pending=null}}while(!0);W===null&&(C=J),f.baseState=C,f.firstBaseUpdate=H,f.lastBaseUpdate=W,g===null&&(f.shared.lanes=0),es|=E,r.lanes=E,r.memoizedState=J}}function uv(r,s){if(typeof r!="function")throw Error(i(191,r));r.call(s)}function cv(r,s){var o=r.callbacks;if(o!==null)for(r.callbacks=null,r=0;r<o.length;r++)uv(o[r],s)}var Eo=te(null),gh=te(0);function hv(r,s){r=Ai,re(gh,r),re(Eo,s),Ai=r|s.baseLanes}function Tm(){re(gh,Ai),re(Eo,Eo.current)}function Am(){Ai=gh.current,le(Eo),le(gh)}var Ki=0,De=null,tt=null,Ct=null,yh=!1,To=!1,Ea=!1,_h=0,eu=0,Ao=null,qI=0;function bt(){throw Error(i(321))}function bm(r,s){if(s===null)return!1;for(var o=0;o<s.length&&o<r.length;o++)if(!Cn(r[o],s[o]))return!1;return!0}function wm(r,s,o,u,f,g){return Ki=g,De=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,X.H=r===null||r.memoizedState===null?Qv:Yv,Ea=!1,g=o(u,f),Ea=!1,To&&(g=dv(s,o,u,f)),fv(r),g}function fv(r){X.H=wh;var s=tt!==null&&tt.next!==null;if(Ki=0,Ct=tt=De=null,yh=!1,eu=0,Ao=null,s)throw Error(i(300));r===null||qt||(r=r.dependencies,r!==null&&hh(r)&&(qt=!0))}function dv(r,s,o,u){De=r;var f=0;do{if(To&&(Ao=null),eu=0,To=!1,25<=f)throw Error(i(301));if(f+=1,Ct=tt=null,r.updateQueue!=null){var g=r.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}X.H=XI,g=s(o,u)}while(To);return g}function HI(){var r=X.H,s=r.useState()[0];return s=typeof s.then=="function"?tu(s):s,r=r.useState()[0],(tt!==null?tt.memoizedState:null)!==r&&(De.flags|=1024),s}function Sm(){var r=_h!==0;return _h=0,r}function Rm(r,s,o){s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~o}function Im(r){if(yh){for(r=r.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}yh=!1}Ki=0,Ct=tt=De=null,To=!1,eu=_h=0,Ao=null}function En(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ct===null?De.memoizedState=Ct=r:Ct=Ct.next=r,Ct}function Nt(){if(tt===null){var r=De.alternate;r=r!==null?r.memoizedState:null}else r=tt.next;var s=Ct===null?De.memoizedState:Ct.next;if(s!==null)Ct=s,tt=r;else{if(r===null)throw De.alternate===null?Error(i(467)):Error(i(310));tt=r,r={memoizedState:tt.memoizedState,baseState:tt.baseState,baseQueue:tt.baseQueue,queue:tt.queue,next:null},Ct===null?De.memoizedState=Ct=r:Ct=Ct.next=r}return Ct}function Cm(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function tu(r){var s=eu;return eu+=1,Ao===null&&(Ao=[]),r=av(Ao,r,s),s=De,(Ct===null?s.memoizedState:Ct.next)===null&&(s=s.alternate,X.H=s===null||s.memoizedState===null?Qv:Yv),r}function vh(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return tu(r);if(r.$$typeof===ne)return an(r)}throw Error(i(438,String(r)))}function Nm(r){var s=null,o=De.updateQueue;if(o!==null&&(s=o.memoCache),s==null){var u=De.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(f){return f.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),o===null&&(o=Cm(),De.updateQueue=o),o.memoCache=s,o=s.data[s.index],o===void 0)for(o=s.data[s.index]=Array(r),u=0;u<r;u++)o[u]=O;return s.index++,o}function gi(r,s){return typeof s=="function"?s(r):s}function Eh(r){var s=Nt();return Dm(s,tt,r)}function Dm(r,s,o){var u=r.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=o;var f=r.baseQueue,g=u.pending;if(g!==null){if(f!==null){var E=f.next;f.next=g.next,g.next=E}s.baseQueue=f=g,u.pending=null}if(g=r.baseState,f===null)r.memoizedState=g;else{s=f.next;var b=E=null,C=null,H=s,W=!1;do{var J=H.lane&-536870913;if(J!==H.lane?(qe&J)===J:(Ki&J)===J){var G=H.revertLane;if(G===0)C!==null&&(C=C.next={lane:0,revertLane:0,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null}),J===_o&&(W=!0);else if((Ki&G)===G){H=H.next,G===_o&&(W=!0);continue}else J={lane:0,revertLane:H.revertLane,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},C===null?(b=C=J,E=g):C=C.next=J,De.lanes|=G,es|=G;J=H.action,Ea&&o(g,J),g=H.hasEagerState?H.eagerState:o(g,J)}else G={lane:J,revertLane:H.revertLane,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},C===null?(b=C=G,E=g):C=C.next=G,De.lanes|=J,es|=J;H=H.next}while(H!==null&&H!==s);if(C===null?E=g:C.next=b,!Cn(g,r.memoizedState)&&(qt=!0,W&&(o=vo,o!==null)))throw o;r.memoizedState=g,r.baseState=E,r.baseQueue=C,u.lastRenderedState=g}return f===null&&(u.lanes=0),[r.memoizedState,u.dispatch]}function Om(r){var s=Nt(),o=s.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=r;var u=o.dispatch,f=o.pending,g=s.memoizedState;if(f!==null){o.pending=null;var E=f=f.next;do g=r(g,E.action),E=E.next;while(E!==f);Cn(g,s.memoizedState)||(qt=!0),s.memoizedState=g,s.baseQueue===null&&(s.baseState=g),o.lastRenderedState=g}return[g,u]}function mv(r,s,o){var u=De,f=Nt(),g=Ke;if(g){if(o===void 0)throw Error(i(407));o=o()}else o=s();var E=!Cn((tt||f).memoizedState,o);E&&(f.memoizedState=o,qt=!0),f=f.queue;var b=yv.bind(null,u,f,r);if(nu(2048,8,b,[r]),f.getSnapshot!==s||E||Ct!==null&&Ct.memoizedState.tag&1){if(u.flags|=2048,bo(9,Th(),gv.bind(null,u,f,o,s),null),ot===null)throw Error(i(349));g||(Ki&124)!==0||pv(u,s,o)}return o}function pv(r,s,o){r.flags|=16384,r={getSnapshot:s,value:o},s=De.updateQueue,s===null?(s=Cm(),De.updateQueue=s,s.stores=[r]):(o=s.stores,o===null?s.stores=[r]:o.push(r))}function gv(r,s,o,u){s.value=o,s.getSnapshot=u,_v(s)&&vv(r)}function yv(r,s,o){return o(function(){_v(s)&&vv(r)})}function _v(r){var s=r.getSnapshot;r=r.value;try{var o=s();return!Cn(r,o)}catch{return!0}}function vv(r){var s=mo(r,2);s!==null&&xn(s,r,2)}function Mm(r){var s=En();if(typeof r=="function"){var o=r;if(r=o(),Ea){Rn(!0);try{o()}finally{Rn(!1)}}}return s.memoizedState=s.baseState=r,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:gi,lastRenderedState:r},s}function Ev(r,s,o,u){return r.baseState=o,Dm(r,tt,typeof u=="function"?u:gi)}function GI(r,s,o,u,f){if(bh(r))throw Error(i(485));if(r=s.action,r!==null){var g={payload:f,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){g.listeners.push(E)}};X.T!==null?o(!0):g.isTransition=!1,u(g),o=s.pending,o===null?(g.next=s.pending=g,Tv(s,g)):(g.next=o.next,s.pending=o.next=g)}}function Tv(r,s){var o=s.action,u=s.payload,f=r.state;if(s.isTransition){var g=X.T,E={};X.T=E;try{var b=o(f,u),C=X.S;C!==null&&C(E,b),Av(r,s,b)}catch(H){Pm(r,s,H)}finally{X.T=g}}else try{g=o(f,u),Av(r,s,g)}catch(H){Pm(r,s,H)}}function Av(r,s,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){bv(r,s,u)},function(u){return Pm(r,s,u)}):bv(r,s,o)}function bv(r,s,o){s.status="fulfilled",s.value=o,wv(s),r.state=o,s=r.pending,s!==null&&(o=s.next,o===s?r.pending=null:(o=o.next,s.next=o,Tv(r,o)))}function Pm(r,s,o){var u=r.pending;if(r.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=o,wv(s),s=s.next;while(s!==u)}r.action=null}function wv(r){r=r.listeners;for(var s=0;s<r.length;s++)(0,r[s])()}function Sv(r,s){return s}function Rv(r,s){if(Ke){var o=ot.formState;if(o!==null){e:{var u=De;if(Ke){if(vt){t:{for(var f=vt,g=Pr;f.nodeType!==8;){if(!g){f=null;break t}if(f=cr(f.nextSibling),f===null){f=null;break t}}g=f.data,f=g==="F!"||g==="F"?f:null}if(f){vt=cr(f.nextSibling),u=f.data==="F!";break e}}ga(u)}u=!1}u&&(s=o[0])}}return o=En(),o.memoizedState=o.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sv,lastRenderedState:s},o.queue=u,o=Gv.bind(null,De,u),u.dispatch=o,u=Mm(!1),g=Um.bind(null,De,!1,u.queue),u=En(),f={state:s,dispatch:null,action:r,pending:null},u.queue=f,o=GI.bind(null,De,f,g,o),f.dispatch=o,u.memoizedState=r,[s,o,!1]}function Iv(r){var s=Nt();return Cv(s,tt,r)}function Cv(r,s,o){if(s=Dm(r,s,Sv)[0],r=Eh(gi)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var u=tu(s)}catch(E){throw E===Yl?mh:E}else u=s;s=Nt();var f=s.queue,g=f.dispatch;return o!==s.memoizedState&&(De.flags|=2048,bo(9,Th(),$I.bind(null,f,o),null)),[u,g,r]}function $I(r,s){r.action=s}function Nv(r){var s=Nt(),o=tt;if(o!==null)return Cv(s,o,r);Nt(),s=s.memoizedState,o=Nt();var u=o.queue.dispatch;return o.memoizedState=r,[s,u,!1]}function bo(r,s,o,u){return r={tag:r,create:o,deps:u,inst:s,next:null},s=De.updateQueue,s===null&&(s=Cm(),De.updateQueue=s),o=s.lastEffect,o===null?s.lastEffect=r.next=r:(u=o.next,o.next=r,r.next=u,s.lastEffect=r),r}function Th(){return{destroy:void 0,resource:void 0}}function Dv(){return Nt().memoizedState}function Ah(r,s,o,u){var f=En();u=u===void 0?null:u,De.flags|=r,f.memoizedState=bo(1|s,Th(),o,u)}function nu(r,s,o,u){var f=Nt();u=u===void 0?null:u;var g=f.memoizedState.inst;tt!==null&&u!==null&&bm(u,tt.memoizedState.deps)?f.memoizedState=bo(s,g,o,u):(De.flags|=r,f.memoizedState=bo(1|s,g,o,u))}function Ov(r,s){Ah(8390656,8,r,s)}function Mv(r,s){nu(2048,8,r,s)}function Pv(r,s){return nu(4,2,r,s)}function xv(r,s){return nu(4,4,r,s)}function Vv(r,s){if(typeof s=="function"){r=r();var o=s(r);return function(){typeof o=="function"?o():s(null)}}if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function kv(r,s,o){o=o!=null?o.concat([r]):null,nu(4,4,Vv.bind(null,s,r),o)}function xm(){}function Lv(r,s){var o=Nt();s=s===void 0?null:s;var u=o.memoizedState;return s!==null&&bm(s,u[1])?u[0]:(o.memoizedState=[r,s],r)}function Uv(r,s){var o=Nt();s=s===void 0?null:s;var u=o.memoizedState;if(s!==null&&bm(s,u[1]))return u[0];if(u=r(),Ea){Rn(!0);try{r()}finally{Rn(!1)}}return o.memoizedState=[u,s],u}function Vm(r,s,o){return o===void 0||(Ki&1073741824)!==0?r.memoizedState=s:(r.memoizedState=o,r=jE(),De.lanes|=r,es|=r,o)}function zv(r,s,o,u){return Cn(o,s)?o:Eo.current!==null?(r=Vm(r,o,u),Cn(r,s)||(qt=!0),r):(Ki&42)===0?(qt=!0,r.memoizedState=o):(r=jE(),De.lanes|=r,es|=r,s)}function Fv(r,s,o,u,f){var g=oe.p;oe.p=g!==0&&8>g?g:8;var E=X.T,b={};X.T=b,Um(r,!1,s,o);try{var C=f(),H=X.S;if(H!==null&&H(b,C),C!==null&&typeof C=="object"&&typeof C.then=="function"){var W=BI(C,u);ru(r,s,W,Pn(r))}else ru(r,s,u,Pn(r))}catch(J){ru(r,s,{then:function(){},status:"rejected",reason:J},Pn())}finally{oe.p=g,X.T=E}}function KI(){}function km(r,s,o,u){if(r.tag!==5)throw Error(i(476));var f=jv(r).queue;Fv(r,f,s,ge,o===null?KI:function(){return Bv(r),o(u)})}function jv(r){var s=r.memoizedState;if(s!==null)return s;s={memoizedState:ge,baseState:ge,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:gi,lastRenderedState:ge},next:null};var o={};return s.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:gi,lastRenderedState:o},next:null},r.memoizedState=s,r=r.alternate,r!==null&&(r.memoizedState=s),s}function Bv(r){var s=jv(r).next.queue;ru(r,s,{},Pn())}function Lm(){return an(Tu)}function qv(){return Nt().memoizedState}function Hv(){return Nt().memoizedState}function QI(r){for(var s=r.return;s!==null;){switch(s.tag){case 24:case 3:var o=Pn();r=Gi(o);var u=$i(s,r,o);u!==null&&(xn(u,s,o),Wl(u,s,o)),s={cache:dm()},r.payload=s;return}s=s.return}}function YI(r,s,o){var u=Pn();o={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},bh(r)?$v(s,o):(o=rm(r,s,o,u),o!==null&&(xn(o,r,u),Kv(o,s,u)))}function Gv(r,s,o){var u=Pn();ru(r,s,o,u)}function ru(r,s,o,u){var f={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(bh(r))$v(s,f);else{var g=r.alternate;if(r.lanes===0&&(g===null||g.lanes===0)&&(g=s.lastRenderedReducer,g!==null))try{var E=s.lastRenderedState,b=g(E,o);if(f.hasEagerState=!0,f.eagerState=b,Cn(b,E))return ah(r,s,f,0),ot===null&&sh(),!1}catch{}finally{}if(o=rm(r,s,f,u),o!==null)return xn(o,r,u),Kv(o,s,u),!0}return!1}function Um(r,s,o,u){if(u={lane:2,revertLane:gp(),action:u,hasEagerState:!1,eagerState:null,next:null},bh(r)){if(s)throw Error(i(479))}else s=rm(r,o,u,2),s!==null&&xn(s,r,2)}function bh(r){var s=r.alternate;return r===De||s!==null&&s===De}function $v(r,s){To=yh=!0;var o=r.pending;o===null?s.next=s:(s.next=o.next,o.next=s),r.pending=s}function Kv(r,s,o){if((o&4194048)!==0){var u=s.lanes;u&=r.pendingLanes,o|=u,s.lanes=o,Sl(r,o)}}var wh={readContext:an,use:vh,useCallback:bt,useContext:bt,useEffect:bt,useImperativeHandle:bt,useLayoutEffect:bt,useInsertionEffect:bt,useMemo:bt,useReducer:bt,useRef:bt,useState:bt,useDebugValue:bt,useDeferredValue:bt,useTransition:bt,useSyncExternalStore:bt,useId:bt,useHostTransitionStatus:bt,useFormState:bt,useActionState:bt,useOptimistic:bt,useMemoCache:bt,useCacheRefresh:bt},Qv={readContext:an,use:vh,useCallback:function(r,s){return En().memoizedState=[r,s===void 0?null:s],r},useContext:an,useEffect:Ov,useImperativeHandle:function(r,s,o){o=o!=null?o.concat([r]):null,Ah(4194308,4,Vv.bind(null,s,r),o)},useLayoutEffect:function(r,s){return Ah(4194308,4,r,s)},useInsertionEffect:function(r,s){Ah(4,2,r,s)},useMemo:function(r,s){var o=En();s=s===void 0?null:s;var u=r();if(Ea){Rn(!0);try{r()}finally{Rn(!1)}}return o.memoizedState=[u,s],u},useReducer:function(r,s,o){var u=En();if(o!==void 0){var f=o(s);if(Ea){Rn(!0);try{o(s)}finally{Rn(!1)}}}else f=s;return u.memoizedState=u.baseState=f,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:f},u.queue=r,r=r.dispatch=YI.bind(null,De,r),[u.memoizedState,r]},useRef:function(r){var s=En();return r={current:r},s.memoizedState=r},useState:function(r){r=Mm(r);var s=r.queue,o=Gv.bind(null,De,s);return s.dispatch=o,[r.memoizedState,o]},useDebugValue:xm,useDeferredValue:function(r,s){var o=En();return Vm(o,r,s)},useTransition:function(){var r=Mm(!1);return r=Fv.bind(null,De,r.queue,!0,!1),En().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,s,o){var u=De,f=En();if(Ke){if(o===void 0)throw Error(i(407));o=o()}else{if(o=s(),ot===null)throw Error(i(349));(qe&124)!==0||pv(u,s,o)}f.memoizedState=o;var g={value:o,getSnapshot:s};return f.queue=g,Ov(yv.bind(null,u,g,r),[r]),u.flags|=2048,bo(9,Th(),gv.bind(null,u,g,o,s),null),o},useId:function(){var r=En(),s=ot.identifierPrefix;if(Ke){var o=di,u=fi;o=(u&~(1<<32-sn(u)-1)).toString(32)+o,s="«"+s+"R"+o,o=_h++,0<o&&(s+="H"+o.toString(32)),s+="»"}else o=qI++,s="«"+s+"r"+o.toString(32)+"»";return r.memoizedState=s},useHostTransitionStatus:Lm,useFormState:Rv,useActionState:Rv,useOptimistic:function(r){var s=En();s.memoizedState=s.baseState=r;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=o,s=Um.bind(null,De,!0,o),o.dispatch=s,[r,s]},useMemoCache:Nm,useCacheRefresh:function(){return En().memoizedState=QI.bind(null,De)}},Yv={readContext:an,use:vh,useCallback:Lv,useContext:an,useEffect:Mv,useImperativeHandle:kv,useInsertionEffect:Pv,useLayoutEffect:xv,useMemo:Uv,useReducer:Eh,useRef:Dv,useState:function(){return Eh(gi)},useDebugValue:xm,useDeferredValue:function(r,s){var o=Nt();return zv(o,tt.memoizedState,r,s)},useTransition:function(){var r=Eh(gi)[0],s=Nt().memoizedState;return[typeof r=="boolean"?r:tu(r),s]},useSyncExternalStore:mv,useId:qv,useHostTransitionStatus:Lm,useFormState:Iv,useActionState:Iv,useOptimistic:function(r,s){var o=Nt();return Ev(o,tt,r,s)},useMemoCache:Nm,useCacheRefresh:Hv},XI={readContext:an,use:vh,useCallback:Lv,useContext:an,useEffect:Mv,useImperativeHandle:kv,useInsertionEffect:Pv,useLayoutEffect:xv,useMemo:Uv,useReducer:Om,useRef:Dv,useState:function(){return Om(gi)},useDebugValue:xm,useDeferredValue:function(r,s){var o=Nt();return tt===null?Vm(o,r,s):zv(o,tt.memoizedState,r,s)},useTransition:function(){var r=Om(gi)[0],s=Nt().memoizedState;return[typeof r=="boolean"?r:tu(r),s]},useSyncExternalStore:mv,useId:qv,useHostTransitionStatus:Lm,useFormState:Nv,useActionState:Nv,useOptimistic:function(r,s){var o=Nt();return tt!==null?Ev(o,tt,r,s):(o.baseState=r,[r,o.queue.dispatch])},useMemoCache:Nm,useCacheRefresh:Hv},wo=null,iu=0;function Sh(r){var s=iu;return iu+=1,wo===null&&(wo=[]),av(wo,r,s)}function su(r,s){s=s.props.ref,r.ref=s!==void 0?s:null}function Rh(r,s){throw s.$$typeof===T?Error(i(525)):(r=Object.prototype.toString.call(s),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r)))}function Xv(r){var s=r._init;return s(r._payload)}function Wv(r){function s(L,x){if(r){var B=L.deletions;B===null?(L.deletions=[x],L.flags|=16):B.push(x)}}function o(L,x){if(!r)return null;for(;x!==null;)s(L,x),x=x.sibling;return null}function u(L){for(var x=new Map;L!==null;)L.key!==null?x.set(L.key,L):x.set(L.index,L),L=L.sibling;return x}function f(L,x){return L=hi(L,x),L.index=0,L.sibling=null,L}function g(L,x,B){return L.index=B,r?(B=L.alternate,B!==null?(B=B.index,B<x?(L.flags|=67108866,x):B):(L.flags|=67108866,x)):(L.flags|=1048576,x)}function E(L){return r&&L.alternate===null&&(L.flags|=67108866),L}function b(L,x,B,Z){return x===null||x.tag!==6?(x=sm(B,L.mode,Z),x.return=L,x):(x=f(x,B),x.return=L,x)}function C(L,x,B,Z){var de=B.type;return de===N?W(L,x,B.props.children,Z,B.key):x!==null&&(x.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===I&&Xv(de)===x.type)?(x=f(x,B.props),su(x,B),x.return=L,x):(x=lh(B.type,B.key,B.props,null,L.mode,Z),su(x,B),x.return=L,x)}function H(L,x,B,Z){return x===null||x.tag!==4||x.stateNode.containerInfo!==B.containerInfo||x.stateNode.implementation!==B.implementation?(x=am(B,L.mode,Z),x.return=L,x):(x=f(x,B.children||[]),x.return=L,x)}function W(L,x,B,Z,de){return x===null||x.tag!==7?(x=fa(B,L.mode,Z,de),x.return=L,x):(x=f(x,B),x.return=L,x)}function J(L,x,B){if(typeof x=="string"&&x!==""||typeof x=="number"||typeof x=="bigint")return x=sm(""+x,L.mode,B),x.return=L,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case A:return B=lh(x.type,x.key,x.props,null,L.mode,B),su(B,x),B.return=L,B;case S:return x=am(x,L.mode,B),x.return=L,x;case I:var Z=x._init;return x=Z(x._payload),J(L,x,B)}if(yt(x)||F(x))return x=fa(x,L.mode,B,null),x.return=L,x;if(typeof x.then=="function")return J(L,Sh(x),B);if(x.$$typeof===ne)return J(L,fh(L,x),B);Rh(L,x)}return null}function G(L,x,B,Z){var de=x!==null?x.key:null;if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return de!==null?null:b(L,x,""+B,Z);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case A:return B.key===de?C(L,x,B,Z):null;case S:return B.key===de?H(L,x,B,Z):null;case I:return de=B._init,B=de(B._payload),G(L,x,B,Z)}if(yt(B)||F(B))return de!==null?null:W(L,x,B,Z,null);if(typeof B.then=="function")return G(L,x,Sh(B),Z);if(B.$$typeof===ne)return G(L,x,fh(L,B),Z);Rh(L,B)}return null}function K(L,x,B,Z,de){if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return L=L.get(B)||null,b(x,L,""+Z,de);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case A:return L=L.get(Z.key===null?B:Z.key)||null,C(x,L,Z,de);case S:return L=L.get(Z.key===null?B:Z.key)||null,H(x,L,Z,de);case I:var Pe=Z._init;return Z=Pe(Z._payload),K(L,x,B,Z,de)}if(yt(Z)||F(Z))return L=L.get(B)||null,W(x,L,Z,de,null);if(typeof Z.then=="function")return K(L,x,B,Sh(Z),de);if(Z.$$typeof===ne)return K(L,x,B,fh(x,Z),de);Rh(x,Z)}return null}function we(L,x,B,Z){for(var de=null,Pe=null,pe=x,Ee=x=0,Gt=null;pe!==null&&Ee<B.length;Ee++){pe.index>Ee?(Gt=pe,pe=null):Gt=pe.sibling;var Ge=G(L,pe,B[Ee],Z);if(Ge===null){pe===null&&(pe=Gt);break}r&&pe&&Ge.alternate===null&&s(L,pe),x=g(Ge,x,Ee),Pe===null?de=Ge:Pe.sibling=Ge,Pe=Ge,pe=Gt}if(Ee===B.length)return o(L,pe),Ke&&ma(L,Ee),de;if(pe===null){for(;Ee<B.length;Ee++)pe=J(L,B[Ee],Z),pe!==null&&(x=g(pe,x,Ee),Pe===null?de=pe:Pe.sibling=pe,Pe=pe);return Ke&&ma(L,Ee),de}for(pe=u(pe);Ee<B.length;Ee++)Gt=K(pe,L,Ee,B[Ee],Z),Gt!==null&&(r&&Gt.alternate!==null&&pe.delete(Gt.key===null?Ee:Gt.key),x=g(Gt,x,Ee),Pe===null?de=Gt:Pe.sibling=Gt,Pe=Gt);return r&&pe.forEach(function(us){return s(L,us)}),Ke&&ma(L,Ee),de}function ve(L,x,B,Z){if(B==null)throw Error(i(151));for(var de=null,Pe=null,pe=x,Ee=x=0,Gt=null,Ge=B.next();pe!==null&&!Ge.done;Ee++,Ge=B.next()){pe.index>Ee?(Gt=pe,pe=null):Gt=pe.sibling;var us=G(L,pe,Ge.value,Z);if(us===null){pe===null&&(pe=Gt);break}r&&pe&&us.alternate===null&&s(L,pe),x=g(us,x,Ee),Pe===null?de=us:Pe.sibling=us,Pe=us,pe=Gt}if(Ge.done)return o(L,pe),Ke&&ma(L,Ee),de;if(pe===null){for(;!Ge.done;Ee++,Ge=B.next())Ge=J(L,Ge.value,Z),Ge!==null&&(x=g(Ge,x,Ee),Pe===null?de=Ge:Pe.sibling=Ge,Pe=Ge);return Ke&&ma(L,Ee),de}for(pe=u(pe);!Ge.done;Ee++,Ge=B.next())Ge=K(pe,L,Ee,Ge.value,Z),Ge!==null&&(r&&Ge.alternate!==null&&pe.delete(Ge.key===null?Ee:Ge.key),x=g(Ge,x,Ee),Pe===null?de=Ge:Pe.sibling=Ge,Pe=Ge);return r&&pe.forEach(function(WC){return s(L,WC)}),Ke&&ma(L,Ee),de}function rt(L,x,B,Z){if(typeof B=="object"&&B!==null&&B.type===N&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case A:e:{for(var de=B.key;x!==null;){if(x.key===de){if(de=B.type,de===N){if(x.tag===7){o(L,x.sibling),Z=f(x,B.props.children),Z.return=L,L=Z;break e}}else if(x.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===I&&Xv(de)===x.type){o(L,x.sibling),Z=f(x,B.props),su(Z,B),Z.return=L,L=Z;break e}o(L,x);break}else s(L,x);x=x.sibling}B.type===N?(Z=fa(B.props.children,L.mode,Z,B.key),Z.return=L,L=Z):(Z=lh(B.type,B.key,B.props,null,L.mode,Z),su(Z,B),Z.return=L,L=Z)}return E(L);case S:e:{for(de=B.key;x!==null;){if(x.key===de)if(x.tag===4&&x.stateNode.containerInfo===B.containerInfo&&x.stateNode.implementation===B.implementation){o(L,x.sibling),Z=f(x,B.children||[]),Z.return=L,L=Z;break e}else{o(L,x);break}else s(L,x);x=x.sibling}Z=am(B,L.mode,Z),Z.return=L,L=Z}return E(L);case I:return de=B._init,B=de(B._payload),rt(L,x,B,Z)}if(yt(B))return we(L,x,B,Z);if(F(B)){if(de=F(B),typeof de!="function")throw Error(i(150));return B=de.call(B),ve(L,x,B,Z)}if(typeof B.then=="function")return rt(L,x,Sh(B),Z);if(B.$$typeof===ne)return rt(L,x,fh(L,B),Z);Rh(L,B)}return typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint"?(B=""+B,x!==null&&x.tag===6?(o(L,x.sibling),Z=f(x,B),Z.return=L,L=Z):(o(L,x),Z=sm(B,L.mode,Z),Z.return=L,L=Z),E(L)):o(L,x)}return function(L,x,B,Z){try{iu=0;var de=rt(L,x,B,Z);return wo=null,de}catch(pe){if(pe===Yl||pe===mh)throw pe;var Pe=Nn(29,pe,null,L.mode);return Pe.lanes=Z,Pe.return=L,Pe}finally{}}}var So=Wv(!0),Zv=Wv(!1),Wn=te(null),xr=null;function Qi(r){var s=r.alternate;re(Lt,Lt.current&1),re(Wn,r),xr===null&&(s===null||Eo.current!==null||s.memoizedState!==null)&&(xr=r)}function Jv(r){if(r.tag===22){if(re(Lt,Lt.current),re(Wn,r),xr===null){var s=r.alternate;s!==null&&s.memoizedState!==null&&(xr=r)}}else Yi()}function Yi(){re(Lt,Lt.current),re(Wn,Wn.current)}function yi(r){le(Wn),xr===r&&(xr=null),le(Lt)}var Lt=te(0);function Ih(r){for(var s=r;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||Cp(o)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function zm(r,s,o,u){s=r.memoizedState,o=o(u,s),o=o==null?s:_({},s,o),r.memoizedState=o,r.lanes===0&&(r.updateQueue.baseState=o)}var Fm={enqueueSetState:function(r,s,o){r=r._reactInternals;var u=Pn(),f=Gi(u);f.payload=s,o!=null&&(f.callback=o),s=$i(r,f,u),s!==null&&(xn(s,r,u),Wl(s,r,u))},enqueueReplaceState:function(r,s,o){r=r._reactInternals;var u=Pn(),f=Gi(u);f.tag=1,f.payload=s,o!=null&&(f.callback=o),s=$i(r,f,u),s!==null&&(xn(s,r,u),Wl(s,r,u))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var o=Pn(),u=Gi(o);u.tag=2,s!=null&&(u.callback=s),s=$i(r,u,o),s!==null&&(xn(s,r,o),Wl(s,r,o))}};function eE(r,s,o,u,f,g,E){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(u,g,E):s.prototype&&s.prototype.isPureReactComponent?!jl(o,u)||!jl(f,g):!0}function tE(r,s,o,u){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,u),s.state!==r&&Fm.enqueueReplaceState(s,s.state,null)}function Ta(r,s){var o=s;if("ref"in s){o={};for(var u in s)u!=="ref"&&(o[u]=s[u])}if(r=r.defaultProps){o===s&&(o=_({},o));for(var f in r)o[f]===void 0&&(o[f]=r[f])}return o}var Ch=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)};function nE(r){Ch(r)}function rE(r){console.error(r)}function iE(r){Ch(r)}function Nh(r,s){try{var o=r.onUncaughtError;o(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function sE(r,s,o){try{var u=r.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function jm(r,s,o){return o=Gi(o),o.tag=3,o.payload={element:null},o.callback=function(){Nh(r,s)},o}function aE(r){return r=Gi(r),r.tag=3,r}function oE(r,s,o,u){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var g=u.value;r.payload=function(){return f(g)},r.callback=function(){sE(s,o,u)}}var E=o.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(r.callback=function(){sE(s,o,u),typeof f!="function"&&(ts===null?ts=new Set([this]):ts.add(this));var b=u.stack;this.componentDidCatch(u.value,{componentStack:b!==null?b:""})})}function WI(r,s,o,u,f){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=o.alternate,s!==null&&$l(s,o,f,!0),o=Wn.current,o!==null){switch(o.tag){case 13:return xr===null?hp():o.alternate===null&&Et===0&&(Et=3),o.flags&=-257,o.flags|=65536,o.lanes=f,u===gm?o.flags|=16384:(s=o.updateQueue,s===null?o.updateQueue=new Set([u]):s.add(u),dp(r,u,f)),!1;case 22:return o.flags|=65536,u===gm?o.flags|=16384:(s=o.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=s):(o=s.retryQueue,o===null?s.retryQueue=new Set([u]):o.add(u)),dp(r,u,f)),!1}throw Error(i(435,o.tag))}return dp(r,u,f),hp(),!1}if(Ke)return s=Wn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=f,u!==um&&(r=Error(i(422),{cause:u}),Gl(Kn(r,o)))):(u!==um&&(s=Error(i(423),{cause:u}),Gl(Kn(s,o))),r=r.current.alternate,r.flags|=65536,f&=-f,r.lanes|=f,u=Kn(u,o),f=jm(r.stateNode,u,f),vm(r,f),Et!==4&&(Et=2)),!1;var g=Error(i(520),{cause:u});if(g=Kn(g,o),fu===null?fu=[g]:fu.push(g),Et!==4&&(Et=2),s===null)return!0;u=Kn(u,o),o=s;do{switch(o.tag){case 3:return o.flags|=65536,r=f&-f,o.lanes|=r,r=jm(o.stateNode,u,r),vm(o,r),!1;case 1:if(s=o.type,g=o.stateNode,(o.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(ts===null||!ts.has(g))))return o.flags|=65536,f&=-f,o.lanes|=f,f=aE(f),oE(f,r,o,u),vm(o,f),!1}o=o.return}while(o!==null);return!1}var lE=Error(i(461)),qt=!1;function Wt(r,s,o,u){s.child=r===null?Zv(s,null,o,u):So(s,r.child,o,u)}function uE(r,s,o,u,f){o=o.render;var g=s.ref;if("ref"in u){var E={};for(var b in u)b!=="ref"&&(E[b]=u[b])}else E=u;return _a(s),u=wm(r,s,o,E,g,f),b=Sm(),r!==null&&!qt?(Rm(r,s,f),_i(r,s,f)):(Ke&&b&&om(s),s.flags|=1,Wt(r,s,u,f),s.child)}function cE(r,s,o,u,f){if(r===null){var g=o.type;return typeof g=="function"&&!im(g)&&g.defaultProps===void 0&&o.compare===null?(s.tag=15,s.type=g,hE(r,s,g,u,f)):(r=lh(o.type,null,u,s,s.mode,f),r.ref=s.ref,r.return=s,s.child=r)}if(g=r.child,!Ym(r,f)){var E=g.memoizedProps;if(o=o.compare,o=o!==null?o:jl,o(E,u)&&r.ref===s.ref)return _i(r,s,f)}return s.flags|=1,r=hi(g,u),r.ref=s.ref,r.return=s,s.child=r}function hE(r,s,o,u,f){if(r!==null){var g=r.memoizedProps;if(jl(g,u)&&r.ref===s.ref)if(qt=!1,s.pendingProps=u=g,Ym(r,f))(r.flags&131072)!==0&&(qt=!0);else return s.lanes=r.lanes,_i(r,s,f)}return Bm(r,s,o,u,f)}function fE(r,s,o){var u=s.pendingProps,f=u.children,g=r!==null?r.memoizedState:null;if(u.mode==="hidden"){if((s.flags&128)!==0){if(u=g!==null?g.baseLanes|o:o,r!==null){for(f=s.child=r.child,g=0;f!==null;)g=g|f.lanes|f.childLanes,f=f.sibling;s.childLanes=g&~u}else s.childLanes=0,s.child=null;return dE(r,s,u,o)}if((o&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},r!==null&&dh(s,g!==null?g.cachePool:null),g!==null?hv(s,g):Tm(),Jv(s);else return s.lanes=s.childLanes=536870912,dE(r,s,g!==null?g.baseLanes|o:o,o)}else g!==null?(dh(s,g.cachePool),hv(s,g),Yi(),s.memoizedState=null):(r!==null&&dh(s,null),Tm(),Yi());return Wt(r,s,f,o),s.child}function dE(r,s,o,u){var f=pm();return f=f===null?null:{parent:kt._currentValue,pool:f},s.memoizedState={baseLanes:o,cachePool:f},r!==null&&dh(s,null),Tm(),Jv(s),r!==null&&$l(r,s,u,!0),null}function Dh(r,s){var o=s.ref;if(o===null)r!==null&&r.ref!==null&&(s.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(i(284));(r===null||r.ref!==o)&&(s.flags|=4194816)}}function Bm(r,s,o,u,f){return _a(s),o=wm(r,s,o,u,void 0,f),u=Sm(),r!==null&&!qt?(Rm(r,s,f),_i(r,s,f)):(Ke&&u&&om(s),s.flags|=1,Wt(r,s,o,f),s.child)}function mE(r,s,o,u,f,g){return _a(s),s.updateQueue=null,o=dv(s,u,o,f),fv(r),u=Sm(),r!==null&&!qt?(Rm(r,s,g),_i(r,s,g)):(Ke&&u&&om(s),s.flags|=1,Wt(r,s,o,g),s.child)}function pE(r,s,o,u,f){if(_a(s),s.stateNode===null){var g=po,E=o.contextType;typeof E=="object"&&E!==null&&(g=an(E)),g=new o(u,g),s.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=Fm,s.stateNode=g,g._reactInternals=s,g=s.stateNode,g.props=u,g.state=s.memoizedState,g.refs={},ym(s),E=o.contextType,g.context=typeof E=="object"&&E!==null?an(E):po,g.state=s.memoizedState,E=o.getDerivedStateFromProps,typeof E=="function"&&(zm(s,o,E,u),g.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(E=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),E!==g.state&&Fm.enqueueReplaceState(g,g.state,null),Jl(s,u,g,f),Zl(),g.state=s.memoizedState),typeof g.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(r===null){g=s.stateNode;var b=s.memoizedProps,C=Ta(o,b);g.props=C;var H=g.context,W=o.contextType;E=po,typeof W=="object"&&W!==null&&(E=an(W));var J=o.getDerivedStateFromProps;W=typeof J=="function"||typeof g.getSnapshotBeforeUpdate=="function",b=s.pendingProps!==b,W||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(b||H!==E)&&tE(s,g,u,E),Hi=!1;var G=s.memoizedState;g.state=G,Jl(s,u,g,f),Zl(),H=s.memoizedState,b||G!==H||Hi?(typeof J=="function"&&(zm(s,o,J,u),H=s.memoizedState),(C=Hi||eE(s,o,C,u,G,H,E))?(W||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(s.flags|=4194308)):(typeof g.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=H),g.props=u,g.state=H,g.context=E,u=C):(typeof g.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{g=s.stateNode,_m(r,s),E=s.memoizedProps,W=Ta(o,E),g.props=W,J=s.pendingProps,G=g.context,H=o.contextType,C=po,typeof H=="object"&&H!==null&&(C=an(H)),b=o.getDerivedStateFromProps,(H=typeof b=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(E!==J||G!==C)&&tE(s,g,u,C),Hi=!1,G=s.memoizedState,g.state=G,Jl(s,u,g,f),Zl();var K=s.memoizedState;E!==J||G!==K||Hi||r!==null&&r.dependencies!==null&&hh(r.dependencies)?(typeof b=="function"&&(zm(s,o,b,u),K=s.memoizedState),(W=Hi||eE(s,o,W,u,G,K,C)||r!==null&&r.dependencies!==null&&hh(r.dependencies))?(H||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(u,K,C),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(u,K,C)),typeof g.componentDidUpdate=="function"&&(s.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof g.componentDidUpdate!="function"||E===r.memoizedProps&&G===r.memoizedState||(s.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||E===r.memoizedProps&&G===r.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=K),g.props=u,g.state=K,g.context=C,u=W):(typeof g.componentDidUpdate!="function"||E===r.memoizedProps&&G===r.memoizedState||(s.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||E===r.memoizedProps&&G===r.memoizedState||(s.flags|=1024),u=!1)}return g=u,Dh(r,s),u=(s.flags&128)!==0,g||u?(g=s.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:g.render(),s.flags|=1,r!==null&&u?(s.child=So(s,r.child,null,f),s.child=So(s,null,o,f)):Wt(r,s,o,f),s.memoizedState=g.state,r=s.child):r=_i(r,s,f),r}function gE(r,s,o,u){return Hl(),s.flags|=256,Wt(r,s,o,u),s.child}var qm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Hm(r){return{baseLanes:r,cachePool:rv()}}function Gm(r,s,o){return r=r!==null?r.childLanes&~o:0,s&&(r|=Zn),r}function yE(r,s,o){var u=s.pendingProps,f=!1,g=(s.flags&128)!==0,E;if((E=g)||(E=r!==null&&r.memoizedState===null?!1:(Lt.current&2)!==0),E&&(f=!0,s.flags&=-129),E=(s.flags&32)!==0,s.flags&=-33,r===null){if(Ke){if(f?Qi(s):Yi(),Ke){var b=vt,C;if(C=b){e:{for(C=b,b=Pr;C.nodeType!==8;){if(!b){b=null;break e}if(C=cr(C.nextSibling),C===null){b=null;break e}}b=C}b!==null?(s.memoizedState={dehydrated:b,treeContext:da!==null?{id:fi,overflow:di}:null,retryLane:536870912,hydrationErrors:null},C=Nn(18,null,null,0),C.stateNode=b,C.return=s,s.child=C,_n=s,vt=null,C=!0):C=!1}C||ga(s)}if(b=s.memoizedState,b!==null&&(b=b.dehydrated,b!==null))return Cp(b)?s.lanes=32:s.lanes=536870912,null;yi(s)}return b=u.children,u=u.fallback,f?(Yi(),f=s.mode,b=Oh({mode:"hidden",children:b},f),u=fa(u,f,o,null),b.return=s,u.return=s,b.sibling=u,s.child=b,f=s.child,f.memoizedState=Hm(o),f.childLanes=Gm(r,E,o),s.memoizedState=qm,u):(Qi(s),$m(s,b))}if(C=r.memoizedState,C!==null&&(b=C.dehydrated,b!==null)){if(g)s.flags&256?(Qi(s),s.flags&=-257,s=Km(r,s,o)):s.memoizedState!==null?(Yi(),s.child=r.child,s.flags|=128,s=null):(Yi(),f=u.fallback,b=s.mode,u=Oh({mode:"visible",children:u.children},b),f=fa(f,b,o,null),f.flags|=2,u.return=s,f.return=s,u.sibling=f,s.child=u,So(s,r.child,null,o),u=s.child,u.memoizedState=Hm(o),u.childLanes=Gm(r,E,o),s.memoizedState=qm,s=f);else if(Qi(s),Cp(b)){if(E=b.nextSibling&&b.nextSibling.dataset,E)var H=E.dgst;E=H,u=Error(i(419)),u.stack="",u.digest=E,Gl({value:u,source:null,stack:null}),s=Km(r,s,o)}else if(qt||$l(r,s,o,!1),E=(o&r.childLanes)!==0,qt||E){if(E=ot,E!==null&&(u=o&-o,u=(u&42)!==0?1:ki(u),u=(u&(E.suspendedLanes|o))!==0?0:u,u!==0&&u!==C.retryLane))throw C.retryLane=u,mo(r,u),xn(E,r,u),lE;b.data==="$?"||hp(),s=Km(r,s,o)}else b.data==="$?"?(s.flags|=192,s.child=r.child,s=null):(r=C.treeContext,vt=cr(b.nextSibling),_n=s,Ke=!0,pa=null,Pr=!1,r!==null&&(Yn[Xn++]=fi,Yn[Xn++]=di,Yn[Xn++]=da,fi=r.id,di=r.overflow,da=s),s=$m(s,u.children),s.flags|=4096);return s}return f?(Yi(),f=u.fallback,b=s.mode,C=r.child,H=C.sibling,u=hi(C,{mode:"hidden",children:u.children}),u.subtreeFlags=C.subtreeFlags&65011712,H!==null?f=hi(H,f):(f=fa(f,b,o,null),f.flags|=2),f.return=s,u.return=s,u.sibling=f,s.child=u,u=f,f=s.child,b=r.child.memoizedState,b===null?b=Hm(o):(C=b.cachePool,C!==null?(H=kt._currentValue,C=C.parent!==H?{parent:H,pool:H}:C):C=rv(),b={baseLanes:b.baseLanes|o,cachePool:C}),f.memoizedState=b,f.childLanes=Gm(r,E,o),s.memoizedState=qm,u):(Qi(s),o=r.child,r=o.sibling,o=hi(o,{mode:"visible",children:u.children}),o.return=s,o.sibling=null,r!==null&&(E=s.deletions,E===null?(s.deletions=[r],s.flags|=16):E.push(r)),s.child=o,s.memoizedState=null,o)}function $m(r,s){return s=Oh({mode:"visible",children:s},r.mode),s.return=r,r.child=s}function Oh(r,s){return r=Nn(22,r,null,s),r.lanes=0,r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},r}function Km(r,s,o){return So(s,r.child,null,o),r=$m(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function _E(r,s,o){r.lanes|=s;var u=r.alternate;u!==null&&(u.lanes|=s),hm(r.return,s,o)}function Qm(r,s,o,u,f){var g=r.memoizedState;g===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:f}:(g.isBackwards=s,g.rendering=null,g.renderingStartTime=0,g.last=u,g.tail=o,g.tailMode=f)}function vE(r,s,o){var u=s.pendingProps,f=u.revealOrder,g=u.tail;if(Wt(r,s,u.children,o),u=Lt.current,(u&2)!==0)u=u&1|2,s.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&_E(r,o,s);else if(r.tag===19)_E(r,o,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}u&=1}switch(re(Lt,u),f){case"forwards":for(o=s.child,f=null;o!==null;)r=o.alternate,r!==null&&Ih(r)===null&&(f=o),o=o.sibling;o=f,o===null?(f=s.child,s.child=null):(f=o.sibling,o.sibling=null),Qm(s,!1,f,o,g);break;case"backwards":for(o=null,f=s.child,s.child=null;f!==null;){if(r=f.alternate,r!==null&&Ih(r)===null){s.child=f;break}r=f.sibling,f.sibling=o,o=f,f=r}Qm(s,!0,o,null,g);break;case"together":Qm(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function _i(r,s,o){if(r!==null&&(s.dependencies=r.dependencies),es|=s.lanes,(o&s.childLanes)===0)if(r!==null){if($l(r,s,o,!1),(o&s.childLanes)===0)return null}else return null;if(r!==null&&s.child!==r.child)throw Error(i(153));if(s.child!==null){for(r=s.child,o=hi(r,r.pendingProps),s.child=o,o.return=s;r.sibling!==null;)r=r.sibling,o=o.sibling=hi(r,r.pendingProps),o.return=s;o.sibling=null}return s.child}function Ym(r,s){return(r.lanes&s)!==0?!0:(r=r.dependencies,!!(r!==null&&hh(r)))}function ZI(r,s,o){switch(s.tag){case 3:at(s,s.stateNode.containerInfo),qi(s,kt,r.memoizedState.cache),Hl();break;case 27:case 5:Vi(s);break;case 4:at(s,s.stateNode.containerInfo);break;case 10:qi(s,s.type,s.memoizedProps.value);break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?(Qi(s),s.flags|=128,null):(o&s.child.childLanes)!==0?yE(r,s,o):(Qi(s),r=_i(r,s,o),r!==null?r.sibling:null);Qi(s);break;case 19:var f=(r.flags&128)!==0;if(u=(o&s.childLanes)!==0,u||($l(r,s,o,!1),u=(o&s.childLanes)!==0),f){if(u)return vE(r,s,o);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),re(Lt,Lt.current),u)break;return null;case 22:case 23:return s.lanes=0,fE(r,s,o);case 24:qi(s,kt,r.memoizedState.cache)}return _i(r,s,o)}function EE(r,s,o){if(r!==null)if(r.memoizedProps!==s.pendingProps)qt=!0;else{if(!Ym(r,o)&&(s.flags&128)===0)return qt=!1,ZI(r,s,o);qt=(r.flags&131072)!==0}else qt=!1,Ke&&(s.flags&1048576)!==0&&X_(s,ch,s.index);switch(s.lanes=0,s.tag){case 16:e:{r=s.pendingProps;var u=s.elementType,f=u._init;if(u=f(u._payload),s.type=u,typeof u=="function")im(u)?(r=Ta(u,r),s.tag=1,s=pE(null,s,u,r,o)):(s.tag=0,s=Bm(null,s,u,r,o));else{if(u!=null){if(f=u.$$typeof,f===he){s.tag=11,s=uE(null,s,u,r,o);break e}else if(f===P){s.tag=14,s=cE(null,s,u,r,o);break e}}throw s=Qt(u)||u,Error(i(306,s,""))}}return s;case 0:return Bm(r,s,s.type,s.pendingProps,o);case 1:return u=s.type,f=Ta(u,s.pendingProps),pE(r,s,u,f,o);case 3:e:{if(at(s,s.stateNode.containerInfo),r===null)throw Error(i(387));u=s.pendingProps;var g=s.memoizedState;f=g.element,_m(r,s),Jl(s,u,null,o);var E=s.memoizedState;if(u=E.cache,qi(s,kt,u),u!==g.cache&&fm(s,[kt],o,!0),Zl(),u=E.element,g.isDehydrated)if(g={element:u,isDehydrated:!1,cache:E.cache},s.updateQueue.baseState=g,s.memoizedState=g,s.flags&256){s=gE(r,s,u,o);break e}else if(u!==f){f=Kn(Error(i(424)),s),Gl(f),s=gE(r,s,u,o);break e}else{switch(r=s.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(vt=cr(r.firstChild),_n=s,Ke=!0,pa=null,Pr=!0,o=Zv(s,null,u,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(Hl(),u===f){s=_i(r,s,o);break e}Wt(r,s,u,o)}s=s.child}return s;case 26:return Dh(r,s),r===null?(o=wT(s.type,null,s.pendingProps,null))?s.memoizedState=o:Ke||(o=s.type,r=s.pendingProps,u=Gh(Re.current).createElement(o),u[Pt]=s,u[Rt]=r,Jt(u,o,r),At(u),s.stateNode=u):s.memoizedState=wT(s.type,r.memoizedProps,s.pendingProps,r.memoizedState),null;case 27:return Vi(s),r===null&&Ke&&(u=s.stateNode=TT(s.type,s.pendingProps,Re.current),_n=s,Pr=!0,f=vt,is(s.type)?(Np=f,vt=cr(u.firstChild)):vt=f),Wt(r,s,s.pendingProps.children,o),Dh(r,s),r===null&&(s.flags|=4194304),s.child;case 5:return r===null&&Ke&&((f=u=vt)&&(u=RC(u,s.type,s.pendingProps,Pr),u!==null?(s.stateNode=u,_n=s,vt=cr(u.firstChild),Pr=!1,f=!0):f=!1),f||ga(s)),Vi(s),f=s.type,g=s.pendingProps,E=r!==null?r.memoizedProps:null,u=g.children,Sp(f,g)?u=null:E!==null&&Sp(f,E)&&(s.flags|=32),s.memoizedState!==null&&(f=wm(r,s,HI,null,null,o),Tu._currentValue=f),Dh(r,s),Wt(r,s,u,o),s.child;case 6:return r===null&&Ke&&((r=o=vt)&&(o=IC(o,s.pendingProps,Pr),o!==null?(s.stateNode=o,_n=s,vt=null,r=!0):r=!1),r||ga(s)),null;case 13:return yE(r,s,o);case 4:return at(s,s.stateNode.containerInfo),u=s.pendingProps,r===null?s.child=So(s,null,u,o):Wt(r,s,u,o),s.child;case 11:return uE(r,s,s.type,s.pendingProps,o);case 7:return Wt(r,s,s.pendingProps,o),s.child;case 8:return Wt(r,s,s.pendingProps.children,o),s.child;case 12:return Wt(r,s,s.pendingProps.children,o),s.child;case 10:return u=s.pendingProps,qi(s,s.type,u.value),Wt(r,s,u.children,o),s.child;case 9:return f=s.type._context,u=s.pendingProps.children,_a(s),f=an(f),u=u(f),s.flags|=1,Wt(r,s,u,o),s.child;case 14:return cE(r,s,s.type,s.pendingProps,o);case 15:return hE(r,s,s.type,s.pendingProps,o);case 19:return vE(r,s,o);case 31:return u=s.pendingProps,o=s.mode,u={mode:u.mode,children:u.children},r===null?(o=Oh(u,o),o.ref=s.ref,s.child=o,o.return=s,s=o):(o=hi(r.child,u),o.ref=s.ref,s.child=o,o.return=s,s=o),s;case 22:return fE(r,s,o);case 24:return _a(s),u=an(kt),r===null?(f=pm(),f===null&&(f=ot,g=dm(),f.pooledCache=g,g.refCount++,g!==null&&(f.pooledCacheLanes|=o),f=g),s.memoizedState={parent:u,cache:f},ym(s),qi(s,kt,f)):((r.lanes&o)!==0&&(_m(r,s),Jl(s,null,null,o),Zl()),f=r.memoizedState,g=s.memoizedState,f.parent!==u?(f={parent:u,cache:u},s.memoizedState=f,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=f),qi(s,kt,u)):(u=g.cache,qi(s,kt,u),u!==f.cache&&fm(s,[kt],o,!0))),Wt(r,s,s.pendingProps.children,o),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function vi(r){r.flags|=4}function TE(r,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!NT(s)){if(s=Wn.current,s!==null&&((qe&4194048)===qe?xr!==null:(qe&62914560)!==qe&&(qe&536870912)===0||s!==xr))throw Xl=gm,iv;r.flags|=8192}}function Mh(r,s){s!==null&&(r.flags|=4),r.flags&16384&&(s=r.tag!==22?bl():536870912,r.lanes|=s,No|=s)}function au(r,s){if(!Ke)switch(r.tailMode){case"hidden":s=r.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?r.tail=null:o.sibling=null;break;case"collapsed":o=r.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:u.sibling=null}}function ft(r){var s=r.alternate!==null&&r.alternate.child===r.child,o=0,u=0;if(s)for(var f=r.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags&65011712,u|=f.flags&65011712,f.return=r,f=f.sibling;else for(f=r.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=r,f=f.sibling;return r.subtreeFlags|=u,r.childLanes=o,s}function JI(r,s,o){var u=s.pendingProps;switch(lm(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ft(s),null;case 1:return ft(s),null;case 3:return o=s.stateNode,u=null,r!==null&&(u=r.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),pi(kt),Tr(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(r===null||r.child===null)&&(ql(s)?vi(s):r===null||r.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,J_())),ft(s),null;case 26:return o=s.memoizedState,r===null?(vi(s),o!==null?(ft(s),TE(s,o)):(ft(s),s.flags&=-16777217)):o?o!==r.memoizedState?(vi(s),ft(s),TE(s,o)):(ft(s),s.flags&=-16777217):(r.memoizedProps!==u&&vi(s),ft(s),s.flags&=-16777217),null;case 27:Zr(s),o=Re.current;var f=s.type;if(r!==null&&s.stateNode!=null)r.memoizedProps!==u&&vi(s);else{if(!u){if(s.stateNode===null)throw Error(i(166));return ft(s),null}r=ye.current,ql(s)?W_(s):(r=TT(f,u,o),s.stateNode=r,vi(s))}return ft(s),null;case 5:if(Zr(s),o=s.type,r!==null&&s.stateNode!=null)r.memoizedProps!==u&&vi(s);else{if(!u){if(s.stateNode===null)throw Error(i(166));return ft(s),null}if(r=ye.current,ql(s))W_(s);else{switch(f=Gh(Re.current),r){case 1:r=f.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:r=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":r=f.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":r=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":r=f.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof u.is=="string"?f.createElement("select",{is:u.is}):f.createElement("select"),u.multiple?r.multiple=!0:u.size&&(r.size=u.size);break;default:r=typeof u.is=="string"?f.createElement(o,{is:u.is}):f.createElement(o)}}r[Pt]=s,r[Rt]=u;e:for(f=s.child;f!==null;){if(f.tag===5||f.tag===6)r.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===s)break e;for(;f.sibling===null;){if(f.return===null||f.return===s)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}s.stateNode=r;e:switch(Jt(r,o,u),o){case"button":case"input":case"select":case"textarea":r=!!u.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&vi(s)}}return ft(s),s.flags&=-16777217,null;case 6:if(r&&s.stateNode!=null)r.memoizedProps!==u&&vi(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(i(166));if(r=Re.current,ql(s)){if(r=s.stateNode,o=s.memoizedProps,u=null,f=_n,f!==null)switch(f.tag){case 27:case 5:u=f.memoizedProps}r[Pt]=s,r=!!(r.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||mT(r.nodeValue,o)),r||ga(s)}else r=Gh(r).createTextNode(u),r[Pt]=s,s.stateNode=r}return ft(s),null;case 13:if(u=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(f=ql(s),u!==null&&u.dehydrated!==null){if(r===null){if(!f)throw Error(i(318));if(f=s.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(i(317));f[Pt]=s}else Hl(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;ft(s),f=!1}else f=J_(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=f),f=!0;if(!f)return s.flags&256?(yi(s),s):(yi(s),null)}if(yi(s),(s.flags&128)!==0)return s.lanes=o,s;if(o=u!==null,r=r!==null&&r.memoizedState!==null,o){u=s.child,f=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(f=u.alternate.memoizedState.cachePool.pool);var g=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(g=u.memoizedState.cachePool.pool),g!==f&&(u.flags|=2048)}return o!==r&&o&&(s.child.flags|=8192),Mh(s,s.updateQueue),ft(s),null;case 4:return Tr(),r===null&&Ep(s.stateNode.containerInfo),ft(s),null;case 10:return pi(s.type),ft(s),null;case 19:if(le(Lt),f=s.memoizedState,f===null)return ft(s),null;if(u=(s.flags&128)!==0,g=f.rendering,g===null)if(u)au(f,!1);else{if(Et!==0||r!==null&&(r.flags&128)!==0)for(r=s.child;r!==null;){if(g=Ih(r),g!==null){for(s.flags|=128,au(f,!1),r=g.updateQueue,s.updateQueue=r,Mh(s,r),s.subtreeFlags=0,r=o,o=s.child;o!==null;)Y_(o,r),o=o.sibling;return re(Lt,Lt.current&1|2),s.child}r=r.sibling}f.tail!==null&&jn()>Vh&&(s.flags|=128,u=!0,au(f,!1),s.lanes=4194304)}else{if(!u)if(r=Ih(g),r!==null){if(s.flags|=128,u=!0,r=r.updateQueue,s.updateQueue=r,Mh(s,r),au(f,!0),f.tail===null&&f.tailMode==="hidden"&&!g.alternate&&!Ke)return ft(s),null}else 2*jn()-f.renderingStartTime>Vh&&o!==536870912&&(s.flags|=128,u=!0,au(f,!1),s.lanes=4194304);f.isBackwards?(g.sibling=s.child,s.child=g):(r=f.last,r!==null?r.sibling=g:s.child=g,f.last=g)}return f.tail!==null?(s=f.tail,f.rendering=s,f.tail=s.sibling,f.renderingStartTime=jn(),s.sibling=null,r=Lt.current,re(Lt,u?r&1|2:r&1),s):(ft(s),null);case 22:case 23:return yi(s),Am(),u=s.memoizedState!==null,r!==null?r.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(o&536870912)!==0&&(s.flags&128)===0&&(ft(s),s.subtreeFlags&6&&(s.flags|=8192)):ft(s),o=s.updateQueue,o!==null&&Mh(s,o.retryQueue),o=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==o&&(s.flags|=2048),r!==null&&le(va),null;case 24:return o=null,r!==null&&(o=r.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),pi(kt),ft(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function eC(r,s){switch(lm(s),s.tag){case 1:return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return pi(kt),Tr(),r=s.flags,(r&65536)!==0&&(r&128)===0?(s.flags=r&-65537|128,s):null;case 26:case 27:case 5:return Zr(s),null;case 13:if(yi(s),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(i(340));Hl()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return le(Lt),null;case 4:return Tr(),null;case 10:return pi(s.type),null;case 22:case 23:return yi(s),Am(),r!==null&&le(va),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 24:return pi(kt),null;case 25:return null;default:return null}}function AE(r,s){switch(lm(s),s.tag){case 3:pi(kt),Tr();break;case 26:case 27:case 5:Zr(s);break;case 4:Tr();break;case 13:yi(s);break;case 19:le(Lt);break;case 10:pi(s.type);break;case 22:case 23:yi(s),Am(),r!==null&&le(va);break;case 24:pi(kt)}}function ou(r,s){try{var o=s.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var f=u.next;o=f;do{if((o.tag&r)===r){u=void 0;var g=o.create,E=o.inst;u=g(),E.destroy=u}o=o.next}while(o!==f)}}catch(b){it(s,s.return,b)}}function Xi(r,s,o){try{var u=s.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var g=f.next;u=g;do{if((u.tag&r)===r){var E=u.inst,b=E.destroy;if(b!==void 0){E.destroy=void 0,f=s;var C=o,H=b;try{H()}catch(W){it(f,C,W)}}}u=u.next}while(u!==g)}}catch(W){it(s,s.return,W)}}function bE(r){var s=r.updateQueue;if(s!==null){var o=r.stateNode;try{cv(s,o)}catch(u){it(r,r.return,u)}}}function wE(r,s,o){o.props=Ta(r.type,r.memoizedProps),o.state=r.memoizedState;try{o.componentWillUnmount()}catch(u){it(r,s,u)}}function lu(r,s){try{var o=r.ref;if(o!==null){switch(r.tag){case 26:case 27:case 5:var u=r.stateNode;break;case 30:u=r.stateNode;break;default:u=r.stateNode}typeof o=="function"?r.refCleanup=o(u):o.current=u}}catch(f){it(r,s,f)}}function Vr(r,s){var o=r.ref,u=r.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(f){it(r,s,f)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){it(r,s,f)}else o.current=null}function SE(r){var s=r.type,o=r.memoizedProps,u=r.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(f){it(r,r.return,f)}}function Xm(r,s,o){try{var u=r.stateNode;TC(u,r.type,o,s),u[Rt]=s}catch(f){it(r,r.return,f)}}function RE(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&is(r.type)||r.tag===4}function Wm(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||RE(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&is(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Zm(r,s,o){var u=r.tag;if(u===5||u===6)r=r.stateNode,s?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(r,s):(s=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,s.appendChild(r),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=Hh));else if(u!==4&&(u===27&&is(r.type)&&(o=r.stateNode,s=null),r=r.child,r!==null))for(Zm(r,s,o),r=r.sibling;r!==null;)Zm(r,s,o),r=r.sibling}function Ph(r,s,o){var u=r.tag;if(u===5||u===6)r=r.stateNode,s?o.insertBefore(r,s):o.appendChild(r);else if(u!==4&&(u===27&&is(r.type)&&(o=r.stateNode),r=r.child,r!==null))for(Ph(r,s,o),r=r.sibling;r!==null;)Ph(r,s,o),r=r.sibling}function IE(r){var s=r.stateNode,o=r.memoizedProps;try{for(var u=r.type,f=s.attributes;f.length;)s.removeAttributeNode(f[0]);Jt(s,u,o),s[Pt]=r,s[Rt]=o}catch(g){it(r,r.return,g)}}var Ei=!1,wt=!1,Jm=!1,CE=typeof WeakSet=="function"?WeakSet:Set,Ht=null;function tC(r,s){if(r=r.containerInfo,bp=Wh,r=z_(r),Wd(r)){if("selectionStart"in r)var o={start:r.selectionStart,end:r.selectionEnd};else e:{o=(o=r.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var f=u.anchorOffset,g=u.focusNode;u=u.focusOffset;try{o.nodeType,g.nodeType}catch{o=null;break e}var E=0,b=-1,C=-1,H=0,W=0,J=r,G=null;t:for(;;){for(var K;J!==o||f!==0&&J.nodeType!==3||(b=E+f),J!==g||u!==0&&J.nodeType!==3||(C=E+u),J.nodeType===3&&(E+=J.nodeValue.length),(K=J.firstChild)!==null;)G=J,J=K;for(;;){if(J===r)break t;if(G===o&&++H===f&&(b=E),G===g&&++W===u&&(C=E),(K=J.nextSibling)!==null)break;J=G,G=J.parentNode}J=K}o=b===-1||C===-1?null:{start:b,end:C}}else o=null}o=o||{start:0,end:0}}else o=null;for(wp={focusedElem:r,selectionRange:o},Wh=!1,Ht=s;Ht!==null;)if(s=Ht,r=s.child,(s.subtreeFlags&1024)!==0&&r!==null)r.return=s,Ht=r;else for(;Ht!==null;){switch(s=Ht,g=s.alternate,r=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((r&1024)!==0&&g!==null){r=void 0,o=s,f=g.memoizedProps,g=g.memoizedState,u=o.stateNode;try{var we=Ta(o.type,f,o.elementType===o.type);r=u.getSnapshotBeforeUpdate(we,g),u.__reactInternalSnapshotBeforeUpdate=r}catch(ve){it(o,o.return,ve)}}break;case 3:if((r&1024)!==0){if(r=s.stateNode.containerInfo,o=r.nodeType,o===9)Ip(r);else if(o===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":Ip(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=s.sibling,r!==null){r.return=s.return,Ht=r;break}Ht=s.return}}function NE(r,s,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:Wi(r,o),u&4&&ou(5,o);break;case 1:if(Wi(r,o),u&4)if(r=o.stateNode,s===null)try{r.componentDidMount()}catch(E){it(o,o.return,E)}else{var f=Ta(o.type,s.memoizedProps);s=s.memoizedState;try{r.componentDidUpdate(f,s,r.__reactInternalSnapshotBeforeUpdate)}catch(E){it(o,o.return,E)}}u&64&&bE(o),u&512&&lu(o,o.return);break;case 3:if(Wi(r,o),u&64&&(r=o.updateQueue,r!==null)){if(s=null,o.child!==null)switch(o.child.tag){case 27:case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}try{cv(r,s)}catch(E){it(o,o.return,E)}}break;case 27:s===null&&u&4&&IE(o);case 26:case 5:Wi(r,o),s===null&&u&4&&SE(o),u&512&&lu(o,o.return);break;case 12:Wi(r,o);break;case 13:Wi(r,o),u&4&&ME(r,o),u&64&&(r=o.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(o=cC.bind(null,o),CC(r,o))));break;case 22:if(u=o.memoizedState!==null||Ei,!u){s=s!==null&&s.memoizedState!==null||wt,f=Ei;var g=wt;Ei=u,(wt=s)&&!g?Zi(r,o,(o.subtreeFlags&8772)!==0):Wi(r,o),Ei=f,wt=g}break;case 30:break;default:Wi(r,o)}}function DE(r){var s=r.alternate;s!==null&&(r.alternate=null,DE(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&zi(s)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var ht=null,Tn=!1;function Ti(r,s,o){for(o=o.child;o!==null;)OE(r,s,o),o=o.sibling}function OE(r,s,o){if(Xe&&typeof Xe.onCommitFiberUnmount=="function")try{Xe.onCommitFiberUnmount(_t,o)}catch{}switch(o.tag){case 26:wt||Vr(o,s),Ti(r,s,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:wt||Vr(o,s);var u=ht,f=Tn;is(o.type)&&(ht=o.stateNode,Tn=!1),Ti(r,s,o),yu(o.stateNode),ht=u,Tn=f;break;case 5:wt||Vr(o,s);case 6:if(u=ht,f=Tn,ht=null,Ti(r,s,o),ht=u,Tn=f,ht!==null)if(Tn)try{(ht.nodeType===9?ht.body:ht.nodeName==="HTML"?ht.ownerDocument.body:ht).removeChild(o.stateNode)}catch(g){it(o,s,g)}else try{ht.removeChild(o.stateNode)}catch(g){it(o,s,g)}break;case 18:ht!==null&&(Tn?(r=ht,vT(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,o.stateNode),Su(r)):vT(ht,o.stateNode));break;case 4:u=ht,f=Tn,ht=o.stateNode.containerInfo,Tn=!0,Ti(r,s,o),ht=u,Tn=f;break;case 0:case 11:case 14:case 15:wt||Xi(2,o,s),wt||Xi(4,o,s),Ti(r,s,o);break;case 1:wt||(Vr(o,s),u=o.stateNode,typeof u.componentWillUnmount=="function"&&wE(o,s,u)),Ti(r,s,o);break;case 21:Ti(r,s,o);break;case 22:wt=(u=wt)||o.memoizedState!==null,Ti(r,s,o),wt=u;break;default:Ti(r,s,o)}}function ME(r,s){if(s.memoizedState===null&&(r=s.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{Su(r)}catch(o){it(s,s.return,o)}}function nC(r){switch(r.tag){case 13:case 19:var s=r.stateNode;return s===null&&(s=r.stateNode=new CE),s;case 22:return r=r.stateNode,s=r._retryCache,s===null&&(s=r._retryCache=new CE),s;default:throw Error(i(435,r.tag))}}function ep(r,s){var o=nC(r);s.forEach(function(u){var f=hC.bind(null,r,u);o.has(u)||(o.add(u),u.then(f,f))})}function Dn(r,s){var o=s.deletions;if(o!==null)for(var u=0;u<o.length;u++){var f=o[u],g=r,E=s,b=E;e:for(;b!==null;){switch(b.tag){case 27:if(is(b.type)){ht=b.stateNode,Tn=!1;break e}break;case 5:ht=b.stateNode,Tn=!1;break e;case 3:case 4:ht=b.stateNode.containerInfo,Tn=!0;break e}b=b.return}if(ht===null)throw Error(i(160));OE(g,E,f),ht=null,Tn=!1,g=f.alternate,g!==null&&(g.return=null),f.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)PE(s,r),s=s.sibling}var ur=null;function PE(r,s){var o=r.alternate,u=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:Dn(s,r),On(r),u&4&&(Xi(3,r,r.return),ou(3,r),Xi(5,r,r.return));break;case 1:Dn(s,r),On(r),u&512&&(wt||o===null||Vr(o,o.return)),u&64&&Ei&&(r=r.updateQueue,r!==null&&(u=r.callbacks,u!==null&&(o=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var f=ur;if(Dn(s,r),On(r),u&512&&(wt||o===null||Vr(o,o.return)),u&4){var g=o!==null?o.memoizedState:null;if(u=r.memoizedState,o===null)if(u===null)if(r.stateNode===null){e:{u=r.type,o=r.memoizedProps,f=f.ownerDocument||f;t:switch(u){case"title":g=f.getElementsByTagName("title")[0],(!g||g[Xs]||g[Pt]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=f.createElement(u),f.head.insertBefore(g,f.querySelector("head > title"))),Jt(g,u,o),g[Pt]=r,At(g),u=g;break e;case"link":var E=IT("link","href",f).get(u+(o.href||""));if(E){for(var b=0;b<E.length;b++)if(g=E[b],g.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&g.getAttribute("rel")===(o.rel==null?null:o.rel)&&g.getAttribute("title")===(o.title==null?null:o.title)&&g.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){E.splice(b,1);break t}}g=f.createElement(u),Jt(g,u,o),f.head.appendChild(g);break;case"meta":if(E=IT("meta","content",f).get(u+(o.content||""))){for(b=0;b<E.length;b++)if(g=E[b],g.getAttribute("content")===(o.content==null?null:""+o.content)&&g.getAttribute("name")===(o.name==null?null:o.name)&&g.getAttribute("property")===(o.property==null?null:o.property)&&g.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&g.getAttribute("charset")===(o.charSet==null?null:o.charSet)){E.splice(b,1);break t}}g=f.createElement(u),Jt(g,u,o),f.head.appendChild(g);break;default:throw Error(i(468,u))}g[Pt]=r,At(g),u=g}r.stateNode=u}else CT(f,r.type,r.stateNode);else r.stateNode=RT(f,u,r.memoizedProps);else g!==u?(g===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):g.count--,u===null?CT(f,r.type,r.stateNode):RT(f,u,r.memoizedProps)):u===null&&r.stateNode!==null&&Xm(r,r.memoizedProps,o.memoizedProps)}break;case 27:Dn(s,r),On(r),u&512&&(wt||o===null||Vr(o,o.return)),o!==null&&u&4&&Xm(r,r.memoizedProps,o.memoizedProps);break;case 5:if(Dn(s,r),On(r),u&512&&(wt||o===null||Vr(o,o.return)),r.flags&32){f=r.stateNode;try{qn(f,"")}catch(K){it(r,r.return,K)}}u&4&&r.stateNode!=null&&(f=r.memoizedProps,Xm(r,f,o!==null?o.memoizedProps:f)),u&1024&&(Jm=!0);break;case 6:if(Dn(s,r),On(r),u&4){if(r.stateNode===null)throw Error(i(162));u=r.memoizedProps,o=r.stateNode;try{o.nodeValue=u}catch(K){it(r,r.return,K)}}break;case 3:if(Qh=null,f=ur,ur=$h(s.containerInfo),Dn(s,r),ur=f,On(r),u&4&&o!==null&&o.memoizedState.isDehydrated)try{Su(s.containerInfo)}catch(K){it(r,r.return,K)}Jm&&(Jm=!1,xE(r));break;case 4:u=ur,ur=$h(r.stateNode.containerInfo),Dn(s,r),On(r),ur=u;break;case 12:Dn(s,r),On(r);break;case 13:Dn(s,r),On(r),r.child.flags&8192&&r.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(ap=jn()),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,ep(r,u)));break;case 22:f=r.memoizedState!==null;var C=o!==null&&o.memoizedState!==null,H=Ei,W=wt;if(Ei=H||f,wt=W||C,Dn(s,r),wt=W,Ei=H,On(r),u&8192)e:for(s=r.stateNode,s._visibility=f?s._visibility&-2:s._visibility|1,f&&(o===null||C||Ei||wt||Aa(r)),o=null,s=r;;){if(s.tag===5||s.tag===26){if(o===null){C=o=s;try{if(g=C.stateNode,f)E=g.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{b=C.stateNode;var J=C.memoizedProps.style,G=J!=null&&J.hasOwnProperty("display")?J.display:null;b.style.display=G==null||typeof G=="boolean"?"":(""+G).trim()}}catch(K){it(C,C.return,K)}}}else if(s.tag===6){if(o===null){C=s;try{C.stateNode.nodeValue=f?"":C.memoizedProps}catch(K){it(C,C.return,K)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===r)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break e;for(;s.sibling===null;){if(s.return===null||s.return===r)break e;o===s&&(o=null),s=s.return}o===s&&(o=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=r.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,ep(r,o))));break;case 19:Dn(s,r),On(r),u&4&&(u=r.updateQueue,u!==null&&(r.updateQueue=null,ep(r,u)));break;case 30:break;case 21:break;default:Dn(s,r),On(r)}}function On(r){var s=r.flags;if(s&2){try{for(var o,u=r.return;u!==null;){if(RE(u)){o=u;break}u=u.return}if(o==null)throw Error(i(160));switch(o.tag){case 27:var f=o.stateNode,g=Wm(r);Ph(r,g,f);break;case 5:var E=o.stateNode;o.flags&32&&(qn(E,""),o.flags&=-33);var b=Wm(r);Ph(r,b,E);break;case 3:case 4:var C=o.stateNode.containerInfo,H=Wm(r);Zm(r,H,C);break;default:throw Error(i(161))}}catch(W){it(r,r.return,W)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function xE(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var s=r;xE(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),r=r.sibling}}function Wi(r,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)NE(r,s.alternate,s),s=s.sibling}function Aa(r){for(r=r.child;r!==null;){var s=r;switch(s.tag){case 0:case 11:case 14:case 15:Xi(4,s,s.return),Aa(s);break;case 1:Vr(s,s.return);var o=s.stateNode;typeof o.componentWillUnmount=="function"&&wE(s,s.return,o),Aa(s);break;case 27:yu(s.stateNode);case 26:case 5:Vr(s,s.return),Aa(s);break;case 22:s.memoizedState===null&&Aa(s);break;case 30:Aa(s);break;default:Aa(s)}r=r.sibling}}function Zi(r,s,o){for(o=o&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,f=r,g=s,E=g.flags;switch(g.tag){case 0:case 11:case 15:Zi(f,g,o),ou(4,g);break;case 1:if(Zi(f,g,o),u=g,f=u.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(H){it(u,u.return,H)}if(u=g,f=u.updateQueue,f!==null){var b=u.stateNode;try{var C=f.shared.hiddenCallbacks;if(C!==null)for(f.shared.hiddenCallbacks=null,f=0;f<C.length;f++)uv(C[f],b)}catch(H){it(u,u.return,H)}}o&&E&64&&bE(g),lu(g,g.return);break;case 27:IE(g);case 26:case 5:Zi(f,g,o),o&&u===null&&E&4&&SE(g),lu(g,g.return);break;case 12:Zi(f,g,o);break;case 13:Zi(f,g,o),o&&E&4&&ME(f,g);break;case 22:g.memoizedState===null&&Zi(f,g,o),lu(g,g.return);break;case 30:break;default:Zi(f,g,o)}s=s.sibling}}function tp(r,s){var o=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(o=r.memoizedState.cachePool.pool),r=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(r=s.memoizedState.cachePool.pool),r!==o&&(r!=null&&r.refCount++,o!=null&&Kl(o))}function np(r,s){r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&Kl(r))}function kr(r,s,o,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)VE(r,s,o,u),s=s.sibling}function VE(r,s,o,u){var f=s.flags;switch(s.tag){case 0:case 11:case 15:kr(r,s,o,u),f&2048&&ou(9,s);break;case 1:kr(r,s,o,u);break;case 3:kr(r,s,o,u),f&2048&&(r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&Kl(r)));break;case 12:if(f&2048){kr(r,s,o,u),r=s.stateNode;try{var g=s.memoizedProps,E=g.id,b=g.onPostCommit;typeof b=="function"&&b(E,s.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(C){it(s,s.return,C)}}else kr(r,s,o,u);break;case 13:kr(r,s,o,u);break;case 23:break;case 22:g=s.stateNode,E=s.alternate,s.memoizedState!==null?g._visibility&2?kr(r,s,o,u):uu(r,s):g._visibility&2?kr(r,s,o,u):(g._visibility|=2,Ro(r,s,o,u,(s.subtreeFlags&10256)!==0)),f&2048&&tp(E,s);break;case 24:kr(r,s,o,u),f&2048&&np(s.alternate,s);break;default:kr(r,s,o,u)}}function Ro(r,s,o,u,f){for(f=f&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var g=r,E=s,b=o,C=u,H=E.flags;switch(E.tag){case 0:case 11:case 15:Ro(g,E,b,C,f),ou(8,E);break;case 23:break;case 22:var W=E.stateNode;E.memoizedState!==null?W._visibility&2?Ro(g,E,b,C,f):uu(g,E):(W._visibility|=2,Ro(g,E,b,C,f)),f&&H&2048&&tp(E.alternate,E);break;case 24:Ro(g,E,b,C,f),f&&H&2048&&np(E.alternate,E);break;default:Ro(g,E,b,C,f)}s=s.sibling}}function uu(r,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var o=r,u=s,f=u.flags;switch(u.tag){case 22:uu(o,u),f&2048&&tp(u.alternate,u);break;case 24:uu(o,u),f&2048&&np(u.alternate,u);break;default:uu(o,u)}s=s.sibling}}var cu=8192;function Io(r){if(r.subtreeFlags&cu)for(r=r.child;r!==null;)kE(r),r=r.sibling}function kE(r){switch(r.tag){case 26:Io(r),r.flags&cu&&r.memoizedState!==null&&jC(ur,r.memoizedState,r.memoizedProps);break;case 5:Io(r);break;case 3:case 4:var s=ur;ur=$h(r.stateNode.containerInfo),Io(r),ur=s;break;case 22:r.memoizedState===null&&(s=r.alternate,s!==null&&s.memoizedState!==null?(s=cu,cu=16777216,Io(r),cu=s):Io(r));break;default:Io(r)}}function LE(r){var s=r.alternate;if(s!==null&&(r=s.child,r!==null)){s.child=null;do s=r.sibling,r.sibling=null,r=s;while(r!==null)}}function hu(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];Ht=u,zE(u,r)}LE(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)UE(r),r=r.sibling}function UE(r){switch(r.tag){case 0:case 11:case 15:hu(r),r.flags&2048&&Xi(9,r,r.return);break;case 3:hu(r);break;case 12:hu(r);break;case 22:var s=r.stateNode;r.memoizedState!==null&&s._visibility&2&&(r.return===null||r.return.tag!==13)?(s._visibility&=-3,xh(r)):hu(r);break;default:hu(r)}}function xh(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];Ht=u,zE(u,r)}LE(r)}for(r=r.child;r!==null;){switch(s=r,s.tag){case 0:case 11:case 15:Xi(8,s,s.return),xh(s);break;case 22:o=s.stateNode,o._visibility&2&&(o._visibility&=-3,xh(s));break;default:xh(s)}r=r.sibling}}function zE(r,s){for(;Ht!==null;){var o=Ht;switch(o.tag){case 0:case 11:case 15:Xi(8,o,s);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Kl(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,Ht=u;else e:for(o=r;Ht!==null;){u=Ht;var f=u.sibling,g=u.return;if(DE(u),u===o){Ht=null;break e}if(f!==null){f.return=g,Ht=f;break e}Ht=g}}}var rC={getCacheForType:function(r){var s=an(kt),o=s.data.get(r);return o===void 0&&(o=r(),s.data.set(r,o)),o}},iC=typeof WeakMap=="function"?WeakMap:Map,We=0,ot=null,xe=null,qe=0,Ze=0,Mn=null,Ji=!1,Co=!1,rp=!1,Ai=0,Et=0,es=0,ba=0,ip=0,Zn=0,No=0,fu=null,An=null,sp=!1,ap=0,Vh=1/0,kh=null,ts=null,Zt=0,ns=null,Do=null,Oo=0,op=0,lp=null,FE=null,du=0,up=null;function Pn(){if((We&2)!==0&&qe!==0)return qe&-qe;if(X.T!==null){var r=_o;return r!==0?r:gp()}return Li()}function jE(){Zn===0&&(Zn=(qe&536870912)===0||Ke?Al():536870912);var r=Wn.current;return r!==null&&(r.flags|=32),Zn}function xn(r,s,o){(r===ot&&(Ze===2||Ze===9)||r.cancelPendingCommit!==null)&&(Mo(r,0),rs(r,qe,Zn,!1)),ei(r,o),((We&2)===0||r!==ot)&&(r===ot&&((We&2)===0&&(ba|=o),Et===4&&rs(r,qe,Zn,!1)),Lr(r))}function BE(r,s,o){if((We&6)!==0)throw Error(i(327));var u=!o&&(s&124)===0&&(s&r.expiredLanes)===0||Ys(r,s),f=u?oC(r,s):fp(r,s,!0),g=u;do{if(f===0){Co&&!u&&rs(r,s,0,!1);break}else{if(o=r.current.alternate,g&&!sC(o)){f=fp(r,s,!1),g=!1;continue}if(f===2){if(g=s,r.errorRecoveryDisabledLanes&g)var E=0;else E=r.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){s=E;e:{var b=r;f=fu;var C=b.current.memoizedState.isDehydrated;if(C&&(Mo(b,E).flags|=256),E=fp(b,E,!1),E!==2){if(rp&&!C){b.errorRecoveryDisabledLanes|=g,ba|=g,f=4;break e}g=An,An=f,g!==null&&(An===null?An=g:An.push.apply(An,g))}f=E}if(g=!1,f!==2)continue}}if(f===1){Mo(r,0),rs(r,s,0,!0);break}e:{switch(u=r,g=f,g){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:rs(u,s,Zn,!Ji);break e;case 2:An=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(f=ap+300-jn(),10<f)){if(rs(u,s,Zn,!Ji),Qa(u,0,!0)!==0)break e;u.timeoutHandle=yT(qE.bind(null,u,o,An,kh,sp,s,Zn,ba,No,Ji,g,2,-0,0),f);break e}qE(u,o,An,kh,sp,s,Zn,ba,No,Ji,g,0,-0,0)}}break}while(!0);Lr(r)}function qE(r,s,o,u,f,g,E,b,C,H,W,J,G,K){if(r.timeoutHandle=-1,J=s.subtreeFlags,(J&8192||(J&16785408)===16785408)&&(Eu={stylesheets:null,count:0,unsuspend:FC},kE(s),J=BC(),J!==null)){r.cancelPendingCommit=J(XE.bind(null,r,s,g,o,u,f,E,b,C,W,1,G,K)),rs(r,g,E,!H);return}XE(r,s,g,o,u,f,E,b,C)}function sC(r){for(var s=r;;){var o=s.tag;if((o===0||o===11||o===15)&&s.flags&16384&&(o=s.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var f=o[u],g=f.getSnapshot;f=f.value;try{if(!Cn(g(),f))return!1}catch{return!1}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function rs(r,s,o,u){s&=~ip,s&=~ba,r.suspendedLanes|=s,r.pingedLanes&=~s,u&&(r.warmLanes|=s),u=r.expirationTimes;for(var f=s;0<f;){var g=31-sn(f),E=1<<g;u[g]=-1,f&=~E}o!==0&&Ar(r,o,s)}function Lh(){return(We&6)===0?(mu(0),!1):!0}function cp(){if(xe!==null){if(Ze===0)var r=xe.return;else r=xe,mi=ya=null,Im(r),wo=null,iu=0,r=xe;for(;r!==null;)AE(r.alternate,r),r=r.return;xe=null}}function Mo(r,s){var o=r.timeoutHandle;o!==-1&&(r.timeoutHandle=-1,bC(o)),o=r.cancelPendingCommit,o!==null&&(r.cancelPendingCommit=null,o()),cp(),ot=r,xe=o=hi(r.current,null),qe=s,Ze=0,Mn=null,Ji=!1,Co=Ys(r,s),rp=!1,No=Zn=ip=ba=es=Et=0,An=fu=null,sp=!1,(s&8)!==0&&(s|=s&32);var u=r.entangledLanes;if(u!==0)for(r=r.entanglements,u&=s;0<u;){var f=31-sn(u),g=1<<f;s|=r[f],u&=~g}return Ai=s,sh(),o}function HE(r,s){De=null,X.H=wh,s===Yl||s===mh?(s=ov(),Ze=3):s===iv?(s=ov(),Ze=4):Ze=s===lE?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Mn=s,xe===null&&(Et=1,Nh(r,Kn(s,r.current)))}function GE(){var r=X.H;return X.H=wh,r===null?wh:r}function $E(){var r=X.A;return X.A=rC,r}function hp(){Et=4,Ji||(qe&4194048)!==qe&&Wn.current!==null||(Co=!0),(es&134217727)===0&&(ba&134217727)===0||ot===null||rs(ot,qe,Zn,!1)}function fp(r,s,o){var u=We;We|=2;var f=GE(),g=$E();(ot!==r||qe!==s)&&(kh=null,Mo(r,s)),s=!1;var E=Et;e:do try{if(Ze!==0&&xe!==null){var b=xe,C=Mn;switch(Ze){case 8:cp(),E=6;break e;case 3:case 2:case 9:case 6:Wn.current===null&&(s=!0);var H=Ze;if(Ze=0,Mn=null,Po(r,b,C,H),o&&Co){E=0;break e}break;default:H=Ze,Ze=0,Mn=null,Po(r,b,C,H)}}aC(),E=Et;break}catch(W){HE(r,W)}while(!0);return s&&r.shellSuspendCounter++,mi=ya=null,We=u,X.H=f,X.A=g,xe===null&&(ot=null,qe=0,sh()),E}function aC(){for(;xe!==null;)KE(xe)}function oC(r,s){var o=We;We|=2;var u=GE(),f=$E();ot!==r||qe!==s?(kh=null,Vh=jn()+500,Mo(r,s)):Co=Ys(r,s);e:do try{if(Ze!==0&&xe!==null){s=xe;var g=Mn;t:switch(Ze){case 1:Ze=0,Mn=null,Po(r,s,g,1);break;case 2:case 9:if(sv(g)){Ze=0,Mn=null,QE(s);break}s=function(){Ze!==2&&Ze!==9||ot!==r||(Ze=7),Lr(r)},g.then(s,s);break e;case 3:Ze=7;break e;case 4:Ze=5;break e;case 7:sv(g)?(Ze=0,Mn=null,QE(s)):(Ze=0,Mn=null,Po(r,s,g,7));break;case 5:var E=null;switch(xe.tag){case 26:E=xe.memoizedState;case 5:case 27:var b=xe;if(!E||NT(E)){Ze=0,Mn=null;var C=b.sibling;if(C!==null)xe=C;else{var H=b.return;H!==null?(xe=H,Uh(H)):xe=null}break t}}Ze=0,Mn=null,Po(r,s,g,5);break;case 6:Ze=0,Mn=null,Po(r,s,g,6);break;case 8:cp(),Et=6;break e;default:throw Error(i(462))}}lC();break}catch(W){HE(r,W)}while(!0);return mi=ya=null,X.H=u,X.A=f,We=o,xe!==null?0:(ot=null,qe=0,sh(),Et)}function lC(){for(;xe!==null&&!_l();)KE(xe)}function KE(r){var s=EE(r.alternate,r,Ai);r.memoizedProps=r.pendingProps,s===null?Uh(r):xe=s}function QE(r){var s=r,o=s.alternate;switch(s.tag){case 15:case 0:s=mE(o,s,s.pendingProps,s.type,void 0,qe);break;case 11:s=mE(o,s,s.pendingProps,s.type.render,s.ref,qe);break;case 5:Im(s);default:AE(o,s),s=xe=Y_(s,Ai),s=EE(o,s,Ai)}r.memoizedProps=r.pendingProps,s===null?Uh(r):xe=s}function Po(r,s,o,u){mi=ya=null,Im(s),wo=null,iu=0;var f=s.return;try{if(WI(r,f,s,o,qe)){Et=1,Nh(r,Kn(o,r.current)),xe=null;return}}catch(g){if(f!==null)throw xe=f,g;Et=1,Nh(r,Kn(o,r.current)),xe=null;return}s.flags&32768?(Ke||u===1?r=!0:Co||(qe&536870912)!==0?r=!1:(Ji=r=!0,(u===2||u===9||u===3||u===6)&&(u=Wn.current,u!==null&&u.tag===13&&(u.flags|=16384))),YE(s,r)):Uh(s)}function Uh(r){var s=r;do{if((s.flags&32768)!==0){YE(s,Ji);return}r=s.return;var o=JI(s.alternate,s,Ai);if(o!==null){xe=o;return}if(s=s.sibling,s!==null){xe=s;return}xe=s=r}while(s!==null);Et===0&&(Et=5)}function YE(r,s){do{var o=eC(r.alternate,r);if(o!==null){o.flags&=32767,xe=o;return}if(o=r.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!s&&(r=r.sibling,r!==null)){xe=r;return}xe=r=o}while(r!==null);Et=6,xe=null}function XE(r,s,o,u,f,g,E,b,C){r.cancelPendingCommit=null;do zh();while(Zt!==0);if((We&6)!==0)throw Error(i(327));if(s!==null){if(s===r.current)throw Error(i(177));if(g=s.lanes|s.childLanes,g|=nm,wl(r,o,g,E,b,C),r===ot&&(xe=ot=null,qe=0),Do=s,ns=r,Oo=o,op=g,lp=f,FE=u,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,fC(Gs,function(){return tT(),null})):(r.callbackNode=null,r.callbackPriority=0),u=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||u){u=X.T,X.T=null,f=oe.p,oe.p=2,E=We,We|=4;try{tC(r,s,o)}finally{We=E,oe.p=f,X.T=u}}Zt=1,WE(),ZE(),JE()}}function WE(){if(Zt===1){Zt=0;var r=ns,s=Do,o=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||o){o=X.T,X.T=null;var u=oe.p;oe.p=2;var f=We;We|=4;try{PE(s,r);var g=wp,E=z_(r.containerInfo),b=g.focusedElem,C=g.selectionRange;if(E!==b&&b&&b.ownerDocument&&U_(b.ownerDocument.documentElement,b)){if(C!==null&&Wd(b)){var H=C.start,W=C.end;if(W===void 0&&(W=H),"selectionStart"in b)b.selectionStart=H,b.selectionEnd=Math.min(W,b.value.length);else{var J=b.ownerDocument||document,G=J&&J.defaultView||window;if(G.getSelection){var K=G.getSelection(),we=b.textContent.length,ve=Math.min(C.start,we),rt=C.end===void 0?ve:Math.min(C.end,we);!K.extend&&ve>rt&&(E=rt,rt=ve,ve=E);var L=L_(b,ve),x=L_(b,rt);if(L&&x&&(K.rangeCount!==1||K.anchorNode!==L.node||K.anchorOffset!==L.offset||K.focusNode!==x.node||K.focusOffset!==x.offset)){var B=J.createRange();B.setStart(L.node,L.offset),K.removeAllRanges(),ve>rt?(K.addRange(B),K.extend(x.node,x.offset)):(B.setEnd(x.node,x.offset),K.addRange(B))}}}}for(J=[],K=b;K=K.parentNode;)K.nodeType===1&&J.push({element:K,left:K.scrollLeft,top:K.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<J.length;b++){var Z=J[b];Z.element.scrollLeft=Z.left,Z.element.scrollTop=Z.top}}Wh=!!bp,wp=bp=null}finally{We=f,oe.p=u,X.T=o}}r.current=s,Zt=2}}function ZE(){if(Zt===2){Zt=0;var r=ns,s=Do,o=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||o){o=X.T,X.T=null;var u=oe.p;oe.p=2;var f=We;We|=4;try{NE(r,s.alternate,s)}finally{We=f,oe.p=u,X.T=o}}Zt=3}}function JE(){if(Zt===4||Zt===3){Zt=0,xc();var r=ns,s=Do,o=Oo,u=FE;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Zt=5:(Zt=0,Do=ns=null,eT(r,r.pendingLanes));var f=r.pendingLanes;if(f===0&&(ts=null),Ya(o),s=s.stateNode,Xe&&typeof Xe.onCommitFiberRoot=="function")try{Xe.onCommitFiberRoot(_t,s,void 0,(s.current.flags&128)===128)}catch{}if(u!==null){s=X.T,f=oe.p,oe.p=2,X.T=null;try{for(var g=r.onRecoverableError,E=0;E<u.length;E++){var b=u[E];g(b.value,{componentStack:b.stack})}}finally{X.T=s,oe.p=f}}(Oo&3)!==0&&zh(),Lr(r),f=r.pendingLanes,(o&4194090)!==0&&(f&42)!==0?r===up?du++:(du=0,up=r):du=0,mu(0)}}function eT(r,s){(r.pooledCacheLanes&=s)===0&&(s=r.pooledCache,s!=null&&(r.pooledCache=null,Kl(s)))}function zh(r){return WE(),ZE(),JE(),tT()}function tT(){if(Zt!==5)return!1;var r=ns,s=op;op=0;var o=Ya(Oo),u=X.T,f=oe.p;try{oe.p=32>o?32:o,X.T=null,o=lp,lp=null;var g=ns,E=Oo;if(Zt=0,Do=ns=null,Oo=0,(We&6)!==0)throw Error(i(331));var b=We;if(We|=4,UE(g.current),VE(g,g.current,E,o),We=b,mu(0,!1),Xe&&typeof Xe.onPostCommitFiberRoot=="function")try{Xe.onPostCommitFiberRoot(_t,g)}catch{}return!0}finally{oe.p=f,X.T=u,eT(r,s)}}function nT(r,s,o){s=Kn(o,s),s=jm(r.stateNode,s,2),r=$i(r,s,2),r!==null&&(ei(r,2),Lr(r))}function it(r,s,o){if(r.tag===3)nT(r,r,o);else for(;s!==null;){if(s.tag===3){nT(s,r,o);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(ts===null||!ts.has(u))){r=Kn(o,r),o=aE(2),u=$i(s,o,2),u!==null&&(oE(o,u,s,r),ei(u,2),Lr(u));break}}s=s.return}}function dp(r,s,o){var u=r.pingCache;if(u===null){u=r.pingCache=new iC;var f=new Set;u.set(s,f)}else f=u.get(s),f===void 0&&(f=new Set,u.set(s,f));f.has(o)||(rp=!0,f.add(o),r=uC.bind(null,r,s,o),s.then(r,r))}function uC(r,s,o){var u=r.pingCache;u!==null&&u.delete(s),r.pingedLanes|=r.suspendedLanes&o,r.warmLanes&=~o,ot===r&&(qe&o)===o&&(Et===4||Et===3&&(qe&62914560)===qe&&300>jn()-ap?(We&2)===0&&Mo(r,0):ip|=o,No===qe&&(No=0)),Lr(r)}function rT(r,s){s===0&&(s=bl()),r=mo(r,s),r!==null&&(ei(r,s),Lr(r))}function cC(r){var s=r.memoizedState,o=0;s!==null&&(o=s.retryLane),rT(r,o)}function hC(r,s){var o=0;switch(r.tag){case 13:var u=r.stateNode,f=r.memoizedState;f!==null&&(o=f.retryLane);break;case 19:u=r.stateNode;break;case 22:u=r.stateNode._retryCache;break;default:throw Error(i(314))}u!==null&&u.delete(s),rT(r,o)}function fC(r,s){return qs(r,s)}var Fh=null,xo=null,mp=!1,jh=!1,pp=!1,wa=0;function Lr(r){r!==xo&&r.next===null&&(xo===null?Fh=xo=r:xo=xo.next=r),jh=!0,mp||(mp=!0,mC())}function mu(r,s){if(!pp&&jh){pp=!0;do for(var o=!1,u=Fh;u!==null;){if(r!==0){var f=u.pendingLanes;if(f===0)var g=0;else{var E=u.suspendedLanes,b=u.pingedLanes;g=(1<<31-sn(42|r)+1)-1,g&=f&~(E&~b),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(o=!0,oT(u,g))}else g=qe,g=Qa(u,u===ot?g:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(g&3)===0||Ys(u,g)||(o=!0,oT(u,g));u=u.next}while(o);pp=!1}}function dC(){iT()}function iT(){jh=mp=!1;var r=0;wa!==0&&(AC()&&(r=wa),wa=0);for(var s=jn(),o=null,u=Fh;u!==null;){var f=u.next,g=sT(u,s);g===0?(u.next=null,o===null?Fh=f:o.next=f,f===null&&(xo=o)):(o=u,(r!==0||(g&3)!==0)&&(jh=!0)),u=f}mu(r)}function sT(r,s){for(var o=r.suspendedLanes,u=r.pingedLanes,f=r.expirationTimes,g=r.pendingLanes&-62914561;0<g;){var E=31-sn(g),b=1<<E,C=f[E];C===-1?((b&o)===0||(b&u)!==0)&&(f[E]=Tl(b,s)):C<=s&&(r.expiredLanes|=b),g&=~b}if(s=ot,o=qe,o=Qa(r,r===s?o:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u=r.callbackNode,o===0||r===s&&(Ze===2||Ze===9)||r.cancelPendingCommit!==null)return u!==null&&u!==null&&Hs(u),r.callbackNode=null,r.callbackPriority=0;if((o&3)===0||Ys(r,o)){if(s=o&-o,s===r.callbackPriority)return s;switch(u!==null&&Hs(u),Ya(o)){case 2:case 8:o=$a;break;case 32:o=Gs;break;case 268435456:o=Ka;break;default:o=Gs}return u=aT.bind(null,r),o=qs(o,u),r.callbackPriority=s,r.callbackNode=o,s}return u!==null&&u!==null&&Hs(u),r.callbackPriority=2,r.callbackNode=null,2}function aT(r,s){if(Zt!==0&&Zt!==5)return r.callbackNode=null,r.callbackPriority=0,null;var o=r.callbackNode;if(zh()&&r.callbackNode!==o)return null;var u=qe;return u=Qa(r,r===ot?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),u===0?null:(BE(r,u,s),sT(r,jn()),r.callbackNode!=null&&r.callbackNode===o?aT.bind(null,r):null)}function oT(r,s){if(zh())return null;BE(r,s,!0)}function mC(){wC(function(){(We&6)!==0?qs(vl,dC):iT()})}function gp(){return wa===0&&(wa=Al()),wa}function lT(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:to(""+r)}function uT(r,s){var o=s.ownerDocument.createElement("input");return o.name=s.name,o.value=s.value,r.id&&o.setAttribute("form",r.id),s.parentNode.insertBefore(o,s),r=new FormData(r),o.parentNode.removeChild(o),r}function pC(r,s,o,u,f){if(s==="submit"&&o&&o.stateNode===f){var g=lT((f[Rt]||null).action),E=u.submitter;E&&(s=(s=E[Rt]||null)?lT(s.formAction):E.getAttribute("formAction"),s!==null&&(g=s,E=null));var b=new no("action","action",null,u,f);r.push({event:b,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(wa!==0){var C=E?uT(f,E):new FormData(f);km(o,{pending:!0,data:C,method:f.method,action:g},null,C)}}else typeof g=="function"&&(b.preventDefault(),C=E?uT(f,E):new FormData(f),km(o,{pending:!0,data:C,method:f.method,action:g},g,C))},currentTarget:f}]})}}for(var yp=0;yp<tm.length;yp++){var _p=tm[yp],gC=_p.toLowerCase(),yC=_p[0].toUpperCase()+_p.slice(1);lr(gC,"on"+yC)}lr(B_,"onAnimationEnd"),lr(q_,"onAnimationIteration"),lr(H_,"onAnimationStart"),lr("dblclick","onDoubleClick"),lr("focusin","onFocus"),lr("focusout","onBlur"),lr(xI,"onTransitionRun"),lr(VI,"onTransitionStart"),lr(kI,"onTransitionCancel"),lr(G_,"onTransitionEnd"),ni("onMouseEnter",["mouseout","mouseover"]),ni("onMouseLeave",["mouseout","mouseover"]),ni("onPointerEnter",["pointerout","pointerover"]),ni("onPointerLeave",["pointerout","pointerover"]),ar("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ar("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ar("onBeforeInput",["compositionend","keypress","textInput","paste"]),ar("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ar("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ar("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_C=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(pu));function cT(r,s){s=(s&4)!==0;for(var o=0;o<r.length;o++){var u=r[o],f=u.event;u=u.listeners;e:{var g=void 0;if(s)for(var E=u.length-1;0<=E;E--){var b=u[E],C=b.instance,H=b.currentTarget;if(b=b.listener,C!==g&&f.isPropagationStopped())break e;g=b,f.currentTarget=H;try{g(f)}catch(W){Ch(W)}f.currentTarget=null,g=C}else for(E=0;E<u.length;E++){if(b=u[E],C=b.instance,H=b.currentTarget,b=b.listener,C!==g&&f.isPropagationStopped())break e;g=b,f.currentTarget=H;try{g(f)}catch(W){Ch(W)}f.currentTarget=null,g=C}}}}function Ve(r,s){var o=s[Rl];o===void 0&&(o=s[Rl]=new Set);var u=r+"__bubble";o.has(u)||(hT(s,r,2,!1),o.add(u))}function vp(r,s,o){var u=0;s&&(u|=4),hT(o,r,u,s)}var Bh="_reactListening"+Math.random().toString(36).slice(2);function Ep(r){if(!r[Bh]){r[Bh]=!0,Il.forEach(function(o){o!=="selectionchange"&&(_C.has(o)||vp(o,!1,r),vp(o,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[Bh]||(s[Bh]=!0,vp("selectionchange",!1,s))}}function hT(r,s,o,u){switch(VT(s)){case 2:var f=GC;break;case 8:f=$C;break;default:f=xp}o=f.bind(null,s,o,r),f=void 0,!Gn||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),u?f!==void 0?r.addEventListener(s,o,{capture:!0,passive:f}):r.addEventListener(s,o,!0):f!==void 0?r.addEventListener(s,o,{passive:f}):r.addEventListener(s,o,!1)}function Tp(r,s,o,u,f){var g=u;if((s&1)===0&&(s&2)===0&&u!==null)e:for(;;){if(u===null)return;var E=u.tag;if(E===3||E===4){var b=u.stateNode.containerInfo;if(b===f)break;if(E===4)for(E=u.return;E!==null;){var C=E.tag;if((C===3||C===4)&&E.stateNode.containerInfo===f)return;E=E.return}for(;b!==null;){if(E=ti(b),E===null)return;if(C=E.tag,C===5||C===6||C===26||C===27){u=g=E;continue e}b=b.parentNode}}u=u.return}Hc(function(){var H=g,W=Hn(o),J=[];e:{var G=$_.get(r);if(G!==void 0){var K=no,we=r;switch(r){case"keypress":if(Cr(o)===0)break e;case"keydown":case"keyup":K=lo;break;case"focusin":we="focus",K=so;break;case"focusout":we="blur",K=so;break;case"beforeblur":case"afterblur":K=so;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":K=$n;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":K=Kd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":K=Zc;break;case B_:case q_:case H_:K=ao;break;case G_:K=eh;break;case"scroll":case"scrollend":K=Gc;break;case"wheel":K=uo;break;case"copy":case"cut":case"paste":K=oo;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":K=zl;break;case"toggle":case"beforetoggle":K=nh}var ve=(s&4)!==0,rt=!ve&&(r==="scroll"||r==="scrollend"),L=ve?G!==null?G+"Capture":null:G;ve=[];for(var x=H,B;x!==null;){var Z=x;if(B=Z.stateNode,Z=Z.tag,Z!==5&&Z!==26&&Z!==27||B===null||L===null||(Z=ra(x,L),Z!=null&&ve.push(gu(x,Z,B))),rt)break;x=x.return}0<ve.length&&(G=new K(G,we,null,o,W),J.push({event:G,listeners:ve}))}}if((s&7)===0){e:{if(G=r==="mouseover"||r==="pointerover",K=r==="mouseout"||r==="pointerout",G&&o!==si&&(we=o.relatedTarget||o.fromElement)&&(ti(we)||we[Bn]))break e;if((K||G)&&(G=W.window===W?W:(G=W.ownerDocument)?G.defaultView||G.parentWindow:window,K?(we=o.relatedTarget||o.toElement,K=H,we=we?ti(we):null,we!==null&&(rt=l(we),ve=we.tag,we!==rt||ve!==5&&ve!==27&&ve!==6)&&(we=null)):(K=null,we=H),K!==we)){if(ve=$n,Z="onMouseLeave",L="onMouseEnter",x="mouse",(r==="pointerout"||r==="pointerover")&&(ve=zl,Z="onPointerLeave",L="onPointerEnter",x="pointer"),rt=K==null?G:wr(K),B=we==null?G:wr(we),G=new ve(Z,x+"leave",K,o,W),G.target=rt,G.relatedTarget=B,Z=null,ti(W)===H&&(ve=new ve(L,x+"enter",we,o,W),ve.target=B,ve.relatedTarget=rt,Z=ve),rt=Z,K&&we)t:{for(ve=K,L=we,x=0,B=ve;B;B=Vo(B))x++;for(B=0,Z=L;Z;Z=Vo(Z))B++;for(;0<x-B;)ve=Vo(ve),x--;for(;0<B-x;)L=Vo(L),B--;for(;x--;){if(ve===L||L!==null&&ve===L.alternate)break t;ve=Vo(ve),L=Vo(L)}ve=null}else ve=null;K!==null&&fT(J,G,K,ve,!1),we!==null&&rt!==null&&fT(J,rt,we,ve,!0)}}e:{if(G=H?wr(H):window,K=G.nodeName&&G.nodeName.toLowerCase(),K==="select"||K==="input"&&G.type==="file")var de=O_;else if(Vt(G))if(M_)de=OI;else{de=NI;var Pe=CI}else K=G.nodeName,!K||K.toLowerCase()!=="input"||G.type!=="checkbox"&&G.type!=="radio"?H&&Ml(H.elementType)&&(de=O_):de=DI;if(de&&(de=de(r,H))){ci(J,de,o,W);break e}Pe&&Pe(r,G,H),r==="focusout"&&H&&G.type==="number"&&H.memoizedProps.value!=null&&ji(G,"number",G.value)}switch(Pe=H?wr(H):window,r){case"focusin":(Vt(Pe)||Pe.contentEditable==="true")&&(co=Pe,Zd=H,Bl=null);break;case"focusout":Bl=Zd=co=null;break;case"mousedown":Jd=!0;break;case"contextmenu":case"mouseup":case"dragend":Jd=!1,F_(J,o,W);break;case"selectionchange":if(PI)break;case"keydown":case"keyup":F_(J,o,W)}var pe;if(Or)e:{switch(r){case"compositionstart":var Ee="onCompositionStart";break e;case"compositionend":Ee="onCompositionEnd";break e;case"compositionupdate":Ee="onCompositionUpdate";break e}Ee=void 0}else je?Q(r,o)&&(Ee="onCompositionEnd"):r==="keydown"&&o.keyCode===229&&(Ee="onCompositionStart");Ee&&(v&&o.locale!=="ko"&&(je||Ee!=="onCompositionStart"?Ee==="onCompositionEnd"&&je&&(pe=xl()):(Ir=W,Bi="value"in Ir?Ir.value:Ir.textContent,je=!0)),Pe=qh(H,Ee),0<Pe.length&&(Ee=new Ll(Ee,r,null,o,W),J.push({event:Ee,listeners:Pe}),pe?Ee.data=pe:(pe=ae(o),pe!==null&&(Ee.data=pe)))),(pe=y?xt(r,o):Be(r,o))&&(Ee=qh(H,"onBeforeInput"),0<Ee.length&&(Pe=new Ll("onBeforeInput","beforeinput",null,o,W),J.push({event:Pe,listeners:Ee}),Pe.data=pe)),pC(J,r,H,o,W)}cT(J,s)})}function gu(r,s,o){return{instance:r,listener:s,currentTarget:o}}function qh(r,s){for(var o=s+"Capture",u=[];r!==null;){var f=r,g=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||g===null||(f=ra(r,o),f!=null&&u.unshift(gu(r,f,g)),f=ra(r,s),f!=null&&u.push(gu(r,f,g))),r.tag===3)return u;r=r.return}return[]}function Vo(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function fT(r,s,o,u,f){for(var g=s._reactName,E=[];o!==null&&o!==u;){var b=o,C=b.alternate,H=b.stateNode;if(b=b.tag,C!==null&&C===u)break;b!==5&&b!==26&&b!==27||H===null||(C=H,f?(H=ra(o,g),H!=null&&E.unshift(gu(o,H,C))):f||(H=ra(o,g),H!=null&&E.push(gu(o,H,C)))),o=o.return}E.length!==0&&r.push({event:s,listeners:E})}var vC=/\r\n?/g,EC=/\u0000|\uFFFD/g;function dT(r){return(typeof r=="string"?r:""+r).replace(vC,`
`).replace(EC,"")}function mT(r,s){return s=dT(s),dT(r)===s}function Hh(){}function nt(r,s,o,u,f,g){switch(o){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||qn(r,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&qn(r,""+u);break;case"className":Sr(r,"class",u);break;case"tabIndex":Sr(r,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Sr(r,o,u);break;case"style":Ol(r,u,g);break;case"data":if(s!=="object"){Sr(r,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||o!=="href")){r.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(o);break}u=to(""+u),r.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){r.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(o==="formAction"?(s!=="input"&&nt(r,s,"name",f.name,f,null),nt(r,s,"formEncType",f.formEncType,f,null),nt(r,s,"formMethod",f.formMethod,f,null),nt(r,s,"formTarget",f.formTarget,f,null)):(nt(r,s,"encType",f.encType,f,null),nt(r,s,"method",f.method,f,null),nt(r,s,"target",f.target,f,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){r.removeAttribute(o);break}u=to(""+u),r.setAttribute(o,u);break;case"onClick":u!=null&&(r.onclick=Hh);break;case"onScroll":u!=null&&Ve("scroll",r);break;case"onScrollEnd":u!=null&&Ve("scrollend",r);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(i(60));r.innerHTML=o}}break;case"multiple":r.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":r.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){r.removeAttribute("xlink:href");break}o=to(""+u),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,""+u):r.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,""):r.removeAttribute(o);break;case"capture":case"download":u===!0?r.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?r.setAttribute(o,u):r.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?r.setAttribute(o,u):r.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?r.removeAttribute(o):r.setAttribute(o,u);break;case"popover":Ve("beforetoggle",r),Ve("toggle",r),Fi(r,"popover",u);break;case"xlinkActuate":Yt(r,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Yt(r,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Yt(r,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Yt(r,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Yt(r,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Yt(r,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Yt(r,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Yt(r,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Yt(r,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Fi(r,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Gd.get(o)||o,Fi(r,o,u))}}function Ap(r,s,o,u,f,g){switch(o){case"style":Ol(r,u,g);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(i(60));r.innerHTML=o}}break;case"children":typeof u=="string"?qn(r,u):(typeof u=="number"||typeof u=="bigint")&&qn(r,""+u);break;case"onScroll":u!=null&&Ve("scroll",r);break;case"onScrollEnd":u!=null&&Ve("scrollend",r);break;case"onClick":u!=null&&(r.onclick=Hh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Xa.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),s=o.slice(2,f?o.length-7:void 0),g=r[Rt]||null,g=g!=null?g[o]:null,typeof g=="function"&&r.removeEventListener(s,g,f),typeof u=="function")){typeof g!="function"&&g!==null&&(o in r?r[o]=null:r.hasAttribute(o)&&r.removeAttribute(o)),r.addEventListener(s,u,f);break e}o in r?r[o]=u:u===!0?r.setAttribute(o,""):Fi(r,o,u)}}}function Jt(r,s,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ve("error",r),Ve("load",r);var u=!1,f=!1,g;for(g in o)if(o.hasOwnProperty(g)){var E=o[g];if(E!=null)switch(g){case"src":u=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:nt(r,s,g,E,o,null)}}f&&nt(r,s,"srcSet",o.srcSet,o,null),u&&nt(r,s,"src",o.src,o,null);return;case"input":Ve("invalid",r);var b=g=E=f=null,C=null,H=null;for(u in o)if(o.hasOwnProperty(u)){var W=o[u];if(W!=null)switch(u){case"name":f=W;break;case"type":E=W;break;case"checked":C=W;break;case"defaultChecked":H=W;break;case"value":g=W;break;case"defaultValue":b=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(i(137,s));break;default:nt(r,s,u,W,o,null)}}ea(r,g,b,C,H,E,f,!1),eo(r);return;case"select":Ve("invalid",r),u=E=g=null;for(f in o)if(o.hasOwnProperty(f)&&(b=o[f],b!=null))switch(f){case"value":g=b;break;case"defaultValue":E=b;break;case"multiple":u=b;default:nt(r,s,f,b,o,null)}s=g,o=E,r.multiple=!!u,s!=null?ii(r,!!u,s,!1):o!=null&&ii(r,!!u,o,!0);return;case"textarea":Ve("invalid",r),g=f=u=null;for(E in o)if(o.hasOwnProperty(E)&&(b=o[E],b!=null))switch(E){case"value":u=b;break;case"defaultValue":f=b;break;case"children":g=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(i(91));break;default:nt(r,s,E,b,o,null)}ta(r,u,f,g),eo(r);return;case"option":for(C in o)if(o.hasOwnProperty(C)&&(u=o[C],u!=null))switch(C){case"selected":r.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:nt(r,s,C,u,o,null)}return;case"dialog":Ve("beforetoggle",r),Ve("toggle",r),Ve("cancel",r),Ve("close",r);break;case"iframe":case"object":Ve("load",r);break;case"video":case"audio":for(u=0;u<pu.length;u++)Ve(pu[u],r);break;case"image":Ve("error",r),Ve("load",r);break;case"details":Ve("toggle",r);break;case"embed":case"source":case"link":Ve("error",r),Ve("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(H in o)if(o.hasOwnProperty(H)&&(u=o[H],u!=null))switch(H){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:nt(r,s,H,u,o,null)}return;default:if(Ml(s)){for(W in o)o.hasOwnProperty(W)&&(u=o[W],u!==void 0&&Ap(r,s,W,u,o,void 0));return}}for(b in o)o.hasOwnProperty(b)&&(u=o[b],u!=null&&nt(r,s,b,u,o,null))}function TC(r,s,o,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,g=null,E=null,b=null,C=null,H=null,W=null;for(K in o){var J=o[K];if(o.hasOwnProperty(K)&&J!=null)switch(K){case"checked":break;case"value":break;case"defaultValue":C=J;default:u.hasOwnProperty(K)||nt(r,s,K,null,u,J)}}for(var G in u){var K=u[G];if(J=o[G],u.hasOwnProperty(G)&&(K!=null||J!=null))switch(G){case"type":g=K;break;case"name":f=K;break;case"checked":H=K;break;case"defaultChecked":W=K;break;case"value":E=K;break;case"defaultValue":b=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(i(137,s));break;default:K!==J&&nt(r,s,G,K,u,J)}}In(r,E,b,C,H,W,g,f);return;case"select":K=E=b=G=null;for(g in o)if(C=o[g],o.hasOwnProperty(g)&&C!=null)switch(g){case"value":break;case"multiple":K=C;default:u.hasOwnProperty(g)||nt(r,s,g,null,u,C)}for(f in u)if(g=u[f],C=o[f],u.hasOwnProperty(f)&&(g!=null||C!=null))switch(f){case"value":G=g;break;case"defaultValue":b=g;break;case"multiple":E=g;default:g!==C&&nt(r,s,f,g,u,C)}s=b,o=E,u=K,G!=null?ii(r,!!o,G,!1):!!u!=!!o&&(s!=null?ii(r,!!o,s,!0):ii(r,!!o,o?[]:"",!1));return;case"textarea":K=G=null;for(b in o)if(f=o[b],o.hasOwnProperty(b)&&f!=null&&!u.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:nt(r,s,b,null,u,f)}for(E in u)if(f=u[E],g=o[E],u.hasOwnProperty(E)&&(f!=null||g!=null))switch(E){case"value":G=f;break;case"defaultValue":K=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(i(91));break;default:f!==g&&nt(r,s,E,f,u,g)}et(r,G,K);return;case"option":for(var we in o)if(G=o[we],o.hasOwnProperty(we)&&G!=null&&!u.hasOwnProperty(we))switch(we){case"selected":r.selected=!1;break;default:nt(r,s,we,null,u,G)}for(C in u)if(G=u[C],K=o[C],u.hasOwnProperty(C)&&G!==K&&(G!=null||K!=null))switch(C){case"selected":r.selected=G&&typeof G!="function"&&typeof G!="symbol";break;default:nt(r,s,C,G,u,K)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ve in o)G=o[ve],o.hasOwnProperty(ve)&&G!=null&&!u.hasOwnProperty(ve)&&nt(r,s,ve,null,u,G);for(H in u)if(G=u[H],K=o[H],u.hasOwnProperty(H)&&G!==K&&(G!=null||K!=null))switch(H){case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(i(137,s));break;default:nt(r,s,H,G,u,K)}return;default:if(Ml(s)){for(var rt in o)G=o[rt],o.hasOwnProperty(rt)&&G!==void 0&&!u.hasOwnProperty(rt)&&Ap(r,s,rt,void 0,u,G);for(W in u)G=u[W],K=o[W],!u.hasOwnProperty(W)||G===K||G===void 0&&K===void 0||Ap(r,s,W,G,u,K);return}}for(var L in o)G=o[L],o.hasOwnProperty(L)&&G!=null&&!u.hasOwnProperty(L)&&nt(r,s,L,null,u,G);for(J in u)G=u[J],K=o[J],!u.hasOwnProperty(J)||G===K||G==null&&K==null||nt(r,s,J,G,u,K)}var bp=null,wp=null;function Gh(r){return r.nodeType===9?r:r.ownerDocument}function pT(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function gT(r,s){if(r===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&s==="foreignObject"?0:r}function Sp(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Rp=null;function AC(){var r=window.event;return r&&r.type==="popstate"?r===Rp?!1:(Rp=r,!0):(Rp=null,!1)}var yT=typeof setTimeout=="function"?setTimeout:void 0,bC=typeof clearTimeout=="function"?clearTimeout:void 0,_T=typeof Promise=="function"?Promise:void 0,wC=typeof queueMicrotask=="function"?queueMicrotask:typeof _T<"u"?function(r){return _T.resolve(null).then(r).catch(SC)}:yT;function SC(r){setTimeout(function(){throw r})}function is(r){return r==="head"}function vT(r,s){var o=s,u=0,f=0;do{var g=o.nextSibling;if(r.removeChild(o),g&&g.nodeType===8)if(o=g.data,o==="/$"){if(0<u&&8>u){o=u;var E=r.ownerDocument;if(o&1&&yu(E.documentElement),o&2&&yu(E.body),o&4)for(o=E.head,yu(o),E=o.firstChild;E;){var b=E.nextSibling,C=E.nodeName;E[Xs]||C==="SCRIPT"||C==="STYLE"||C==="LINK"&&E.rel.toLowerCase()==="stylesheet"||o.removeChild(E),E=b}}if(f===0){r.removeChild(g),Su(s);return}f--}else o==="$"||o==="$?"||o==="$!"?f++:u=o.charCodeAt(0)-48;else u=0;o=g}while(o);Su(s)}function Ip(r){var s=r.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var o=s;switch(s=s.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Ip(o),zi(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}r.removeChild(o)}}function RC(r,s,o,u){for(;r.nodeType===1;){var f=o;if(r.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(u){if(!r[Xs])switch(s){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(g=r.getAttribute("rel"),g==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(g!==f.rel||r.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||r.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||r.getAttribute("title")!==(f.title==null?null:f.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(g=r.getAttribute("src"),(g!==(f.src==null?null:f.src)||r.getAttribute("type")!==(f.type==null?null:f.type)||r.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&g&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(s==="input"&&r.type==="hidden"){var g=f.name==null?null:""+f.name;if(f.type==="hidden"&&r.getAttribute("name")===g)return r}else return r;if(r=cr(r.nextSibling),r===null)break}return null}function IC(r,s,o){if(s==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!o||(r=cr(r.nextSibling),r===null))return null;return r}function Cp(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState==="complete"}function CC(r,s){var o=r.ownerDocument;if(r.data!=="$?"||o.readyState==="complete")s();else{var u=function(){s(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),r._reactRetry=u}}function cr(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return r}var Np=null;function ET(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var o=r.data;if(o==="$"||o==="$!"||o==="$?"){if(s===0)return r;s--}else o==="/$"&&s++}r=r.previousSibling}return null}function TT(r,s,o){switch(s=Gh(o),r){case"html":if(r=s.documentElement,!r)throw Error(i(452));return r;case"head":if(r=s.head,!r)throw Error(i(453));return r;case"body":if(r=s.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}function yu(r){for(var s=r.attributes;s.length;)r.removeAttributeNode(s[0]);zi(r)}var Jn=new Map,AT=new Set;function $h(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var bi=oe.d;oe.d={f:NC,r:DC,D:OC,C:MC,L:PC,m:xC,X:kC,S:VC,M:LC};function NC(){var r=bi.f(),s=Lh();return r||s}function DC(r){var s=br(r);s!==null&&s.tag===5&&s.type==="form"?Bv(s):bi.r(r)}var ko=typeof document>"u"?null:document;function bT(r,s,o){var u=ko;if(u&&typeof s=="string"&&s){var f=It(s);f='link[rel="'+r+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),AT.has(f)||(AT.add(f),r={rel:r,crossOrigin:o,href:s},u.querySelector(f)===null&&(s=u.createElement("link"),Jt(s,"link",r),At(s),u.head.appendChild(s)))}}function OC(r){bi.D(r),bT("dns-prefetch",r,null)}function MC(r,s){bi.C(r,s),bT("preconnect",r,s)}function PC(r,s,o){bi.L(r,s,o);var u=ko;if(u&&r&&s){var f='link[rel="preload"][as="'+It(s)+'"]';s==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+It(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+It(o.imageSizes)+'"]')):f+='[href="'+It(r)+'"]';var g=f;switch(s){case"style":g=Lo(r);break;case"script":g=Uo(r)}Jn.has(g)||(r=_({rel:"preload",href:s==="image"&&o&&o.imageSrcSet?void 0:r,as:s},o),Jn.set(g,r),u.querySelector(f)!==null||s==="style"&&u.querySelector(_u(g))||s==="script"&&u.querySelector(vu(g))||(s=u.createElement("link"),Jt(s,"link",r),At(s),u.head.appendChild(s)))}}function xC(r,s){bi.m(r,s);var o=ko;if(o&&r){var u=s&&typeof s.as=="string"?s.as:"script",f='link[rel="modulepreload"][as="'+It(u)+'"][href="'+It(r)+'"]',g=f;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=Uo(r)}if(!Jn.has(g)&&(r=_({rel:"modulepreload",href:r},s),Jn.set(g,r),o.querySelector(f)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(vu(g)))return}u=o.createElement("link"),Jt(u,"link",r),At(u),o.head.appendChild(u)}}}function VC(r,s,o){bi.S(r,s,o);var u=ko;if(u&&r){var f=pn(u).hoistableStyles,g=Lo(r);s=s||"default";var E=f.get(g);if(!E){var b={loading:0,preload:null};if(E=u.querySelector(_u(g)))b.loading=5;else{r=_({rel:"stylesheet",href:r,"data-precedence":s},o),(o=Jn.get(g))&&Dp(r,o);var C=E=u.createElement("link");At(C),Jt(C,"link",r),C._p=new Promise(function(H,W){C.onload=H,C.onerror=W}),C.addEventListener("load",function(){b.loading|=1}),C.addEventListener("error",function(){b.loading|=2}),b.loading|=4,Kh(E,s,u)}E={type:"stylesheet",instance:E,count:1,state:b},f.set(g,E)}}}function kC(r,s){bi.X(r,s);var o=ko;if(o&&r){var u=pn(o).hoistableScripts,f=Uo(r),g=u.get(f);g||(g=o.querySelector(vu(f)),g||(r=_({src:r,async:!0},s),(s=Jn.get(f))&&Op(r,s),g=o.createElement("script"),At(g),Jt(g,"link",r),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},u.set(f,g))}}function LC(r,s){bi.M(r,s);var o=ko;if(o&&r){var u=pn(o).hoistableScripts,f=Uo(r),g=u.get(f);g||(g=o.querySelector(vu(f)),g||(r=_({src:r,async:!0,type:"module"},s),(s=Jn.get(f))&&Op(r,s),g=o.createElement("script"),At(g),Jt(g,"link",r),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},u.set(f,g))}}function wT(r,s,o,u){var f=(f=Re.current)?$h(f):null;if(!f)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(s=Lo(o.href),o=pn(f).hoistableStyles,u=o.get(s),u||(u={type:"style",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){r=Lo(o.href);var g=pn(f).hoistableStyles,E=g.get(r);if(E||(f=f.ownerDocument||f,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(r,E),(g=f.querySelector(_u(r)))&&!g._p&&(E.instance=g,E.state.loading=5),Jn.has(r)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Jn.set(r,o),g||UC(f,r,o,E.state))),s&&u===null)throw Error(i(528,""));return E}if(s&&u!==null)throw Error(i(529,""));return null;case"script":return s=o.async,o=o.src,typeof o=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Uo(o),o=pn(f).hoistableScripts,u=o.get(s),u||(u={type:"script",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function Lo(r){return'href="'+It(r)+'"'}function _u(r){return'link[rel="stylesheet"]['+r+"]"}function ST(r){return _({},r,{"data-precedence":r.precedence,precedence:null})}function UC(r,s,o,u){r.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=r.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),Jt(s,"link",o),At(s),r.head.appendChild(s))}function Uo(r){return'[src="'+It(r)+'"]'}function vu(r){return"script[async]"+r}function RT(r,s,o){if(s.count++,s.instance===null)switch(s.type){case"style":var u=r.querySelector('style[data-href~="'+It(o.href)+'"]');if(u)return s.instance=u,At(u),u;var f=_({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(r.ownerDocument||r).createElement("style"),At(u),Jt(u,"style",f),Kh(u,o.precedence,r),s.instance=u;case"stylesheet":f=Lo(o.href);var g=r.querySelector(_u(f));if(g)return s.state.loading|=4,s.instance=g,At(g),g;u=ST(o),(f=Jn.get(f))&&Dp(u,f),g=(r.ownerDocument||r).createElement("link"),At(g);var E=g;return E._p=new Promise(function(b,C){E.onload=b,E.onerror=C}),Jt(g,"link",u),s.state.loading|=4,Kh(g,o.precedence,r),s.instance=g;case"script":return g=Uo(o.src),(f=r.querySelector(vu(g)))?(s.instance=f,At(f),f):(u=o,(f=Jn.get(g))&&(u=_({},o),Op(u,f)),r=r.ownerDocument||r,f=r.createElement("script"),At(f),Jt(f,"link",u),r.head.appendChild(f),s.instance=f);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,Kh(u,o.precedence,r));return s.instance}function Kh(r,s,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=u.length?u[u.length-1]:null,g=f,E=0;E<u.length;E++){var b=u[E];if(b.dataset.precedence===s)g=b;else if(g!==f)break}g?g.parentNode.insertBefore(r,g.nextSibling):(s=o.nodeType===9?o.head:o,s.insertBefore(r,s.firstChild))}function Dp(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.title==null&&(r.title=s.title)}function Op(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.integrity==null&&(r.integrity=s.integrity)}var Qh=null;function IT(r,s,o){if(Qh===null){var u=new Map,f=Qh=new Map;f.set(o,u)}else f=Qh,u=f.get(o),u||(u=new Map,f.set(o,u));if(u.has(r))return u;for(u.set(r,null),o=o.getElementsByTagName(r),f=0;f<o.length;f++){var g=o[f];if(!(g[Xs]||g[Pt]||r==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var E=g.getAttribute(s)||"";E=r+E;var b=u.get(E);b?b.push(g):u.set(E,[g])}}return u}function CT(r,s,o){r=r.ownerDocument||r,r.head.insertBefore(o,s==="title"?r.querySelector("head > title"):null)}function zC(r,s,o){if(o===1||s.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return r=s.disabled,typeof s.precedence=="string"&&r==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function NT(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}var Eu=null;function FC(){}function jC(r,s,o){if(Eu===null)throw Error(i(475));var u=Eu;if(s.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var f=Lo(o.href),g=r.querySelector(_u(f));if(g){r=g._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(u.count++,u=Yh.bind(u),r.then(u,u)),s.state.loading|=4,s.instance=g,At(g);return}g=r.ownerDocument||r,o=ST(o),(f=Jn.get(f))&&Dp(o,f),g=g.createElement("link"),At(g);var E=g;E._p=new Promise(function(b,C){E.onload=b,E.onerror=C}),Jt(g,"link",o),s.instance=g}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(s,r),(r=s.state.preload)&&(s.state.loading&3)===0&&(u.count++,s=Yh.bind(u),r.addEventListener("load",s),r.addEventListener("error",s))}}function BC(){if(Eu===null)throw Error(i(475));var r=Eu;return r.stylesheets&&r.count===0&&Mp(r,r.stylesheets),0<r.count?function(s){var o=setTimeout(function(){if(r.stylesheets&&Mp(r,r.stylesheets),r.unsuspend){var u=r.unsuspend;r.unsuspend=null,u()}},6e4);return r.unsuspend=s,function(){r.unsuspend=null,clearTimeout(o)}}:null}function Yh(){if(this.count--,this.count===0){if(this.stylesheets)Mp(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var Xh=null;function Mp(r,s){r.stylesheets=null,r.unsuspend!==null&&(r.count++,Xh=new Map,s.forEach(qC,r),Xh=null,Yh.call(r))}function qC(r,s){if(!(s.state.loading&4)){var o=Xh.get(r);if(o)var u=o.get(null);else{o=new Map,Xh.set(r,o);for(var f=r.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<f.length;g++){var E=f[g];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(o.set(E.dataset.precedence,E),u=E)}u&&o.set(null,u)}f=s.instance,E=f.getAttribute("data-precedence"),g=o.get(E)||u,g===u&&o.set(null,f),o.set(E,f),this.count++,u=Yh.bind(this),f.addEventListener("load",u),f.addEventListener("error",u),g?g.parentNode.insertBefore(f,g.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(f,r.firstChild)),s.state.loading|=4}}var Tu={$$typeof:ne,Provider:null,Consumer:null,_currentValue:ge,_currentValue2:ge,_threadCount:0};function HC(r,s,o,u,f,g,E,b){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Jr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Jr(0),this.hiddenUpdates=Jr(null),this.identifierPrefix=u,this.onUncaughtError=f,this.onCaughtError=g,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=b,this.incompleteTransitions=new Map}function DT(r,s,o,u,f,g,E,b,C,H,W,J){return r=new HC(r,s,o,E,b,C,H,J),s=1,g===!0&&(s|=24),g=Nn(3,null,null,s),r.current=g,g.stateNode=r,s=dm(),s.refCount++,r.pooledCache=s,s.refCount++,g.memoizedState={element:u,isDehydrated:o,cache:s},ym(g),r}function OT(r){return r?(r=po,r):po}function MT(r,s,o,u,f,g){f=OT(f),u.context===null?u.context=f:u.pendingContext=f,u=Gi(s),u.payload={element:o},g=g===void 0?null:g,g!==null&&(u.callback=g),o=$i(r,u,s),o!==null&&(xn(o,r,s),Wl(o,r,s))}function PT(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var o=r.retryLane;r.retryLane=o!==0&&o<s?o:s}}function Pp(r,s){PT(r,s),(r=r.alternate)&&PT(r,s)}function xT(r){if(r.tag===13){var s=mo(r,67108864);s!==null&&xn(s,r,67108864),Pp(r,67108864)}}var Wh=!0;function GC(r,s,o,u){var f=X.T;X.T=null;var g=oe.p;try{oe.p=2,xp(r,s,o,u)}finally{oe.p=g,X.T=f}}function $C(r,s,o,u){var f=X.T;X.T=null;var g=oe.p;try{oe.p=8,xp(r,s,o,u)}finally{oe.p=g,X.T=f}}function xp(r,s,o,u){if(Wh){var f=Vp(u);if(f===null)Tp(r,s,u,Zh,o),kT(r,u);else if(QC(f,r,s,o,u))u.stopPropagation();else if(kT(r,u),s&4&&-1<KC.indexOf(r)){for(;f!==null;){var g=br(f);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var E=sr(g.pendingLanes);if(E!==0){var b=g;for(b.pendingLanes|=2,b.entangledLanes|=2;E;){var C=1<<31-sn(E);b.entanglements[1]|=C,E&=~C}Lr(g),(We&6)===0&&(Vh=jn()+500,mu(0))}}break;case 13:b=mo(g,2),b!==null&&xn(b,g,2),Lh(),Pp(g,2)}if(g=Vp(u),g===null&&Tp(r,s,u,Zh,o),g===f)break;f=g}f!==null&&u.stopPropagation()}else Tp(r,s,u,null,o)}}function Vp(r){return r=Hn(r),kp(r)}var Zh=null;function kp(r){if(Zh=null,r=ti(r),r!==null){var s=l(r);if(s===null)r=null;else{var o=s.tag;if(o===13){if(r=c(s),r!==null)return r;r=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null)}}return Zh=r,null}function VT(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(zd()){case vl:return 2;case $a:return 8;case Gs:case Fd:return 32;case Ka:return 268435456;default:return 32}default:return 32}}var Lp=!1,ss=null,as=null,os=null,Au=new Map,bu=new Map,ls=[],KC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function kT(r,s){switch(r){case"focusin":case"focusout":ss=null;break;case"dragenter":case"dragleave":as=null;break;case"mouseover":case"mouseout":os=null;break;case"pointerover":case"pointerout":Au.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":bu.delete(s.pointerId)}}function wu(r,s,o,u,f,g){return r===null||r.nativeEvent!==g?(r={blockedOn:s,domEventName:o,eventSystemFlags:u,nativeEvent:g,targetContainers:[f]},s!==null&&(s=br(s),s!==null&&xT(s)),r):(r.eventSystemFlags|=u,s=r.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),r)}function QC(r,s,o,u,f){switch(s){case"focusin":return ss=wu(ss,r,s,o,u,f),!0;case"dragenter":return as=wu(as,r,s,o,u,f),!0;case"mouseover":return os=wu(os,r,s,o,u,f),!0;case"pointerover":var g=f.pointerId;return Au.set(g,wu(Au.get(g)||null,r,s,o,u,f)),!0;case"gotpointercapture":return g=f.pointerId,bu.set(g,wu(bu.get(g)||null,r,s,o,u,f)),!0}return!1}function LT(r){var s=ti(r.target);if(s!==null){var o=l(s);if(o!==null){if(s=o.tag,s===13){if(s=c(o),s!==null){r.blockedOn=s,Lc(r.priority,function(){if(o.tag===13){var u=Pn();u=ki(u);var f=mo(o,u);f!==null&&xn(f,o,u),Pp(o,u)}});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){r.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Jh(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var o=Vp(r.nativeEvent);if(o===null){o=r.nativeEvent;var u=new o.constructor(o.type,o);si=u,o.target.dispatchEvent(u),si=null}else return s=br(o),s!==null&&xT(s),r.blockedOn=o,!1;s.shift()}return!0}function UT(r,s,o){Jh(r)&&o.delete(s)}function YC(){Lp=!1,ss!==null&&Jh(ss)&&(ss=null),as!==null&&Jh(as)&&(as=null),os!==null&&Jh(os)&&(os=null),Au.forEach(UT),bu.forEach(UT)}function ef(r,s){r.blockedOn===s&&(r.blockedOn=null,Lp||(Lp=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,YC)))}var tf=null;function zT(r){tf!==r&&(tf=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){tf===r&&(tf=null);for(var s=0;s<r.length;s+=3){var o=r[s],u=r[s+1],f=r[s+2];if(typeof u!="function"){if(kp(u||o)===null)continue;break}var g=br(o);g!==null&&(r.splice(s,3),s-=3,km(g,{pending:!0,data:f,method:o.method,action:u},u,f))}}))}function Su(r){function s(C){return ef(C,r)}ss!==null&&ef(ss,r),as!==null&&ef(as,r),os!==null&&ef(os,r),Au.forEach(s),bu.forEach(s);for(var o=0;o<ls.length;o++){var u=ls[o];u.blockedOn===r&&(u.blockedOn=null)}for(;0<ls.length&&(o=ls[0],o.blockedOn===null);)LT(o),o.blockedOn===null&&ls.shift();if(o=(r.ownerDocument||r).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var f=o[u],g=o[u+1],E=f[Rt]||null;if(typeof g=="function")E||zT(o);else if(E){var b=null;if(g&&g.hasAttribute("formAction")){if(f=g,E=g[Rt]||null)b=E.formAction;else if(kp(f)!==null)continue}else b=E.action;typeof b=="function"?o[u+1]=b:(o.splice(u,3),u-=3),zT(o)}}}function Up(r){this._internalRoot=r}nf.prototype.render=Up.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(i(409));var o=s.current,u=Pn();MT(o,u,r,s,null,null)},nf.prototype.unmount=Up.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;MT(r.current,2,null,r,null,null),Lh(),s[Bn]=null}};function nf(r){this._internalRoot=r}nf.prototype.unstable_scheduleHydration=function(r){if(r){var s=Li();r={blockedOn:null,target:r,priority:s};for(var o=0;o<ls.length&&s!==0&&s<ls[o].priority;o++);ls.splice(o,0,r),o===0&&LT(r)}};var FT=e.version;if(FT!=="19.1.0")throw Error(i(527,FT,"19.1.0"));oe.findDOMNode=function(r){var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=m(s),r=r!==null?p(r):null,r=r===null?null:r.stateNode,r};var XC={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:X,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var rf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rf.isDisabled&&rf.supportsFiber)try{_t=rf.inject(XC),Xe=rf}catch{}}return Iu.createRoot=function(r,s){if(!a(r))throw Error(i(299));var o=!1,u="",f=nE,g=rE,E=iE,b=null;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(f=s.onUncaughtError),s.onCaughtError!==void 0&&(g=s.onCaughtError),s.onRecoverableError!==void 0&&(E=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(b=s.unstable_transitionCallbacks)),s=DT(r,1,!1,null,null,o,u,f,g,E,b,null),r[Bn]=s.current,Ep(r),new Up(s)},Iu.hydrateRoot=function(r,s,o){if(!a(r))throw Error(i(299));var u=!1,f="",g=nE,E=rE,b=iE,C=null,H=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(g=o.onUncaughtError),o.onCaughtError!==void 0&&(E=o.onCaughtError),o.onRecoverableError!==void 0&&(b=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(C=o.unstable_transitionCallbacks),o.formState!==void 0&&(H=o.formState)),s=DT(r,1,!0,s,o??null,u,f,g,E,b,C,H),s.context=OT(null),o=s.current,u=Pn(),u=ki(u),f=Gi(u),f.callback=null,$i(o,f,u),o=u,s.current.lanes=o,ei(s,o),Lr(s),r[Bn]=s.current,Ep(r),new nf(s)},Iu.version="19.1.0",Iu}var XT;function o1(){if(XT)return jp.exports;XT=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),jp.exports=a1(),jp.exports}var l1=o1(),Cu={},WT;function u1(){if(WT)return Cu;WT=1,Object.defineProperty(Cu,"__esModule",{value:!0}),Cu.parse=c,Cu.serialize=p;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,i=/^[\u0020-\u003A\u003D-\u007E]*$/,a=Object.prototype.toString,l=(()=>{const A=function(){};return A.prototype=Object.create(null),A})();function c(A,S){const N=new l,q=A.length;if(q<2)return N;const U=S?.decode||_;let $=0;do{const ie=A.indexOf("=",$);if(ie===-1)break;const ne=A.indexOf(";",$),he=ne===-1?q:ne;if(ie>he){$=A.lastIndexOf(";",ie-1)+1;continue}const ce=d(A,$,ie),Te=m(A,ie,ce),P=A.slice(ce,Te);if(N[P]===void 0){let I=d(A,ie+1,he),R=m(A,he,I);const O=U(A.slice(I,R));N[P]=O}$=he+1}while($<q);return N}function d(A,S,N){do{const q=A.charCodeAt(S);if(q!==32&&q!==9)return S}while(++S<N);return N}function m(A,S,N){for(;S>N;){const q=A.charCodeAt(--S);if(q!==32&&q!==9)return S+1}return N}function p(A,S,N){const q=N?.encode||encodeURIComponent;if(!n.test(A))throw new TypeError(`argument name is invalid: ${A}`);const U=q(S);if(!e.test(U))throw new TypeError(`argument val is invalid: ${S}`);let $=A+"="+U;if(!N)return $;if(N.maxAge!==void 0){if(!Number.isInteger(N.maxAge))throw new TypeError(`option maxAge is invalid: ${N.maxAge}`);$+="; Max-Age="+N.maxAge}if(N.domain){if(!t.test(N.domain))throw new TypeError(`option domain is invalid: ${N.domain}`);$+="; Domain="+N.domain}if(N.path){if(!i.test(N.path))throw new TypeError(`option path is invalid: ${N.path}`);$+="; Path="+N.path}if(N.expires){if(!T(N.expires)||!Number.isFinite(N.expires.valueOf()))throw new TypeError(`option expires is invalid: ${N.expires}`);$+="; Expires="+N.expires.toUTCString()}if(N.httpOnly&&($+="; HttpOnly"),N.secure&&($+="; Secure"),N.partitioned&&($+="; Partitioned"),N.priority)switch(typeof N.priority=="string"?N.priority.toLowerCase():void 0){case"low":$+="; Priority=Low";break;case"medium":$+="; Priority=Medium";break;case"high":$+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${N.priority}`)}if(N.sameSite)switch(typeof N.sameSite=="string"?N.sameSite.toLowerCase():N.sameSite){case!0:case"strict":$+="; SameSite=Strict";break;case"lax":$+="; SameSite=Lax";break;case"none":$+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${N.sameSite}`)}return $}function _(A){if(A.indexOf("%")===-1)return A;try{return decodeURIComponent(A)}catch{return A}}function T(A){return a.call(A)==="[object Date]"}return Cu}u1();var ZT="popstate";function c1(n={}){function e(i,a){let{pathname:l,search:c,hash:d}=i.location;return mg("",{pathname:l,search:c,hash:d},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(i,a){return typeof a=="string"?a:Qu(a)}return f1(e,t,null,n)}function pt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Hr(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function h1(){return Math.random().toString(36).substring(2,10)}function JT(n,e){return{usr:n.state,key:n.key,idx:e}}function mg(n,e,t=null,i){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?ol(e):e,state:t,key:e&&e.key||i||h1()}}function Qu({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function ol(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substring(i),n=n.substring(0,i)),n&&(e.pathname=n)}return e}function f1(n,e,t,i={}){let{window:a=document.defaultView,v5Compat:l=!1}=i,c=a.history,d="POP",m=null,p=_();p==null&&(p=0,c.replaceState({...c.state,idx:p},""));function _(){return(c.state||{idx:null}).idx}function T(){d="POP";let U=_(),$=U==null?null:U-p;p=U,m&&m({action:d,location:q.location,delta:$})}function A(U,$){d="PUSH";let ie=mg(q.location,U,$);p=_()+1;let ne=JT(ie,p),he=q.createHref(ie);try{c.pushState(ne,"",he)}catch(ce){if(ce instanceof DOMException&&ce.name==="DataCloneError")throw ce;a.location.assign(he)}l&&m&&m({action:d,location:q.location,delta:1})}function S(U,$){d="REPLACE";let ie=mg(q.location,U,$);p=_();let ne=JT(ie,p),he=q.createHref(ie);c.replaceState(ne,"",he),l&&m&&m({action:d,location:q.location,delta:0})}function N(U){return d1(U)}let q={get action(){return d},get location(){return n(a,c)},listen(U){if(m)throw new Error("A history only accepts one active listener");return a.addEventListener(ZT,T),m=U,()=>{a.removeEventListener(ZT,T),m=null}},createHref(U){return e(a,U)},createURL:N,encodeLocation(U){let $=N(U);return{pathname:$.pathname,search:$.search,hash:$.hash}},push:A,replace:S,go(U){return c.go(U)}};return q}function d1(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),pt(t,"No window.location.(origin|href) available to create URL");let i=typeof n=="string"?n:Qu(n);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=t+i),new URL(i,t)}function pb(n,e,t="/"){return m1(n,e,t,!1)}function m1(n,e,t,i){let a=typeof e=="string"?ol(e):e,l=Ni(a.pathname||"/",t);if(l==null)return null;let c=gb(n);p1(c);let d=null;for(let m=0;d==null&&m<c.length;++m){let p=R1(l);d=w1(c[m],p,i)}return d}function gb(n,e=[],t=[],i=""){let a=(l,c,d)=>{let m={relativePath:d===void 0?l.path||"":d,caseSensitive:l.caseSensitive===!0,childrenIndex:c,route:l};m.relativePath.startsWith("/")&&(pt(m.relativePath.startsWith(i),`Absolute route path "${m.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),m.relativePath=m.relativePath.slice(i.length));let p=Ii([i,m.relativePath]),_=t.concat(m);l.children&&l.children.length>0&&(pt(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),gb(l.children,e,_,p)),!(l.path==null&&!l.index)&&e.push({path:p,score:A1(p,l.index),routesMeta:_})};return n.forEach((l,c)=>{if(l.path===""||!l.path?.includes("?"))a(l,c);else for(let d of yb(l.path))a(l,c,d)}),e}function yb(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,a=t.endsWith("?"),l=t.replace(/\?$/,"");if(i.length===0)return a?[l,""]:[l];let c=yb(i.join("/")),d=[];return d.push(...c.map(m=>m===""?l:[l,m].join("/"))),a&&d.push(...c),d.map(m=>n.startsWith("/")&&m===""?"/":m)}function p1(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:b1(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var g1=/^:[\w-]+$/,y1=3,_1=2,v1=1,E1=10,T1=-2,e0=n=>n==="*";function A1(n,e){let t=n.split("/"),i=t.length;return t.some(e0)&&(i+=T1),e&&(i+=_1),t.filter(a=>!e0(a)).reduce((a,l)=>a+(g1.test(l)?y1:l===""?v1:E1),i)}function b1(n,e){return n.length===e.length&&n.slice(0,-1).every((i,a)=>i===e[a])?n[n.length-1]-e[e.length-1]:0}function w1(n,e,t=!1){let{routesMeta:i}=n,a={},l="/",c=[];for(let d=0;d<i.length;++d){let m=i[d],p=d===i.length-1,_=l==="/"?e:e.slice(l.length)||"/",T=Df({path:m.relativePath,caseSensitive:m.caseSensitive,end:p},_),A=m.route;if(!T&&p&&t&&!i[i.length-1].route.index&&(T=Df({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},_)),!T)return null;Object.assign(a,T.params),c.push({params:a,pathname:Ii([l,T.pathname]),pathnameBase:D1(Ii([l,T.pathnameBase])),route:A}),T.pathnameBase!=="/"&&(l=Ii([l,T.pathnameBase]))}return c}function Df(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=S1(n.path,n.caseSensitive,n.end),a=e.match(t);if(!a)return null;let l=a[0],c=l.replace(/(.)\/+$/,"$1"),d=a.slice(1);return{params:i.reduce((p,{paramName:_,isOptional:T},A)=>{if(_==="*"){let N=d[A]||"";c=l.slice(0,l.length-N.length).replace(/(.)\/+$/,"$1")}const S=d[A];return T&&!S?p[_]=void 0:p[_]=(S||"").replace(/%2F/g,"/"),p},{}),pathname:l,pathnameBase:c,pattern:n}}function S1(n,e=!1,t=!0){Hr(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let i=[],a="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,m)=>(i.push({paramName:d,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),a+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":n!==""&&n!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),i]}function R1(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Hr(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Ni(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}function I1(n,e="/"){let{pathname:t,search:i="",hash:a=""}=typeof n=="string"?ol(n):n;return{pathname:t?t.startsWith("/")?t:C1(t,e):e,search:O1(i),hash:M1(a)}}function C1(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function Gp(n,e,t,i){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function N1(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function _b(n){let e=N1(n);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function vb(n,e,t,i=!1){let a;typeof n=="string"?a=ol(n):(a={...n},pt(!a.pathname||!a.pathname.includes("?"),Gp("?","pathname","search",a)),pt(!a.pathname||!a.pathname.includes("#"),Gp("#","pathname","hash",a)),pt(!a.search||!a.search.includes("#"),Gp("#","search","hash",a)));let l=n===""||a.pathname==="",c=l?"/":a.pathname,d;if(c==null)d=t;else{let T=e.length-1;if(!i&&c.startsWith("..")){let A=c.split("/");for(;A[0]==="..";)A.shift(),T-=1;a.pathname=A.join("/")}d=T>=0?e[T]:"/"}let m=I1(a,d),p=c&&c!=="/"&&c.endsWith("/"),_=(l||c===".")&&t.endsWith("/");return!m.pathname.endsWith("/")&&(p||_)&&(m.pathname+="/"),m}var Ii=n=>n.join("/").replace(/\/\/+/g,"/"),D1=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),O1=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,M1=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function P1(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var Eb=["POST","PUT","PATCH","DELETE"];new Set(Eb);var x1=["GET",...Eb];new Set(x1);var ll=z.createContext(null);ll.displayName="DataRouter";var rd=z.createContext(null);rd.displayName="DataRouterState";var Tb=z.createContext({isTransitioning:!1});Tb.displayName="ViewTransition";var V1=z.createContext(new Map);V1.displayName="Fetchers";var k1=z.createContext(null);k1.displayName="Await";var Kr=z.createContext(null);Kr.displayName="Navigation";var fc=z.createContext(null);fc.displayName="Location";var Qr=z.createContext({outlet:null,matches:[],isDataRoute:!1});Qr.displayName="Route";var Wg=z.createContext(null);Wg.displayName="RouteError";function L1(n,{relative:e}={}){pt(dc(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=z.useContext(Kr),{hash:a,pathname:l,search:c}=mc(n,{relative:e}),d=l;return t!=="/"&&(d=l==="/"?t:Ii([t,l])),i.createHref({pathname:d,search:c,hash:a})}function dc(){return z.useContext(fc)!=null}function Ps(){return pt(dc(),"useLocation() may be used only in the context of a <Router> component."),z.useContext(fc).location}var Ab="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function bb(n){z.useContext(Kr).static||z.useLayoutEffect(n)}function U1(){let{isDataRoute:n}=z.useContext(Qr);return n?J1():z1()}function z1(){pt(dc(),"useNavigate() may be used only in the context of a <Router> component.");let n=z.useContext(ll),{basename:e,navigator:t}=z.useContext(Kr),{matches:i}=z.useContext(Qr),{pathname:a}=Ps(),l=JSON.stringify(_b(i)),c=z.useRef(!1);return bb(()=>{c.current=!0}),z.useCallback((m,p={})=>{if(Hr(c.current,Ab),!c.current)return;if(typeof m=="number"){t.go(m);return}let _=vb(m,JSON.parse(l),a,p.relative==="path");n==null&&e!=="/"&&(_.pathname=_.pathname==="/"?e:Ii([e,_.pathname])),(p.replace?t.replace:t.push)(_,p.state,p)},[e,t,l,a,n])}var F1=z.createContext(null);function j1(n){let e=z.useContext(Qr).outlet;return e&&z.createElement(F1.Provider,{value:n},e)}function mc(n,{relative:e}={}){let{matches:t}=z.useContext(Qr),{pathname:i}=Ps(),a=JSON.stringify(_b(t));return z.useMemo(()=>vb(n,JSON.parse(a),i,e==="path"),[n,a,i,e])}function B1(n,e){return wb(n,e)}function wb(n,e,t,i){pt(dc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=z.useContext(Kr),{matches:l}=z.useContext(Qr),c=l[l.length-1],d=c?c.params:{},m=c?c.pathname:"/",p=c?c.pathnameBase:"/",_=c&&c.route;{let $=_&&_.path||"";Sb(m,!_||$.endsWith("*")||$.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${$}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${$}"> to <Route path="${$==="/"?"*":`${$}/*`}">.`)}let T=Ps(),A;if(e){let $=typeof e=="string"?ol(e):e;pt(p==="/"||$.pathname?.startsWith(p),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${$.pathname}" was given in the \`location\` prop.`),A=$}else A=T;let S=A.pathname||"/",N=S;if(p!=="/"){let $=p.replace(/^\//,"").split("/");N="/"+S.replace(/^\//,"").split("/").slice($.length).join("/")}let q=pb(n,{pathname:N});Hr(_||q!=null,`No routes matched location "${A.pathname}${A.search}${A.hash}" `),Hr(q==null||q[q.length-1].route.element!==void 0||q[q.length-1].route.Component!==void 0||q[q.length-1].route.lazy!==void 0,`Matched leaf route at location "${A.pathname}${A.search}${A.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let U=K1(q&&q.map($=>Object.assign({},$,{params:Object.assign({},d,$.params),pathname:Ii([p,a.encodeLocation?a.encodeLocation($.pathname).pathname:$.pathname]),pathnameBase:$.pathnameBase==="/"?p:Ii([p,a.encodeLocation?a.encodeLocation($.pathnameBase).pathname:$.pathnameBase])})),l,t,i);return e&&U?z.createElement(fc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...A},navigationType:"POP"}},U):U}function q1(){let n=Z1(),e=P1(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i},l={padding:"2px 4px",backgroundColor:i},c=null;return console.error("Error handled by React Router default ErrorBoundary:",n),c=z.createElement(z.Fragment,null,z.createElement("p",null,"💿 Hey developer 👋"),z.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",z.createElement("code",{style:l},"ErrorBoundary")," or"," ",z.createElement("code",{style:l},"errorElement")," prop on your route.")),z.createElement(z.Fragment,null,z.createElement("h2",null,"Unexpected Application Error!"),z.createElement("h3",{style:{fontStyle:"italic"}},e),t?z.createElement("pre",{style:a},t):null,c)}var H1=z.createElement(q1,null),G1=class extends z.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?z.createElement(Qr.Provider,{value:this.props.routeContext},z.createElement(Wg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function $1({routeContext:n,match:e,children:t}){let i=z.useContext(ll);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),z.createElement(Qr.Provider,{value:n},t)}function K1(n,e=[],t=null,i=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let a=n,l=t?.errors;if(l!=null){let m=a.findIndex(p=>p.route.id&&l?.[p.route.id]!==void 0);pt(m>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),a=a.slice(0,Math.min(a.length,m+1))}let c=!1,d=-1;if(t)for(let m=0;m<a.length;m++){let p=a[m];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(d=m),p.route.id){let{loaderData:_,errors:T}=t,A=p.route.loader&&!_.hasOwnProperty(p.route.id)&&(!T||T[p.route.id]===void 0);if(p.route.lazy||A){c=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}return a.reduceRight((m,p,_)=>{let T,A=!1,S=null,N=null;t&&(T=l&&p.route.id?l[p.route.id]:void 0,S=p.route.errorElement||H1,c&&(d<0&&_===0?(Sb("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),A=!0,N=null):d===_&&(A=!0,N=p.route.hydrateFallbackElement||null)));let q=e.concat(a.slice(0,_+1)),U=()=>{let $;return T?$=S:A?$=N:p.route.Component?$=z.createElement(p.route.Component,null):p.route.element?$=p.route.element:$=m,z.createElement($1,{match:p,routeContext:{outlet:m,matches:q,isDataRoute:t!=null},children:$})};return t&&(p.route.ErrorBoundary||p.route.errorElement||_===0)?z.createElement(G1,{location:t.location,revalidation:t.revalidation,component:S,error:T,children:U(),routeContext:{outlet:null,matches:q,isDataRoute:!0}}):U()},null)}function Zg(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Q1(n){let e=z.useContext(ll);return pt(e,Zg(n)),e}function Y1(n){let e=z.useContext(rd);return pt(e,Zg(n)),e}function X1(n){let e=z.useContext(Qr);return pt(e,Zg(n)),e}function Jg(n){let e=X1(n),t=e.matches[e.matches.length-1];return pt(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function W1(){return Jg("useRouteId")}function Z1(){let n=z.useContext(Wg),e=Y1("useRouteError"),t=Jg("useRouteError");return n!==void 0?n:e.errors?.[t]}function J1(){let{router:n}=Q1("useNavigate"),e=Jg("useNavigate"),t=z.useRef(!1);return bb(()=>{t.current=!0}),z.useCallback(async(a,l={})=>{Hr(t.current,Ab),t.current&&(typeof a=="number"?n.navigate(a):await n.navigate(a,{fromRouteId:e,...l}))},[n,e])}var t0={};function Sb(n,e,t){!e&&!t0[n]&&(t0[n]=!0,Hr(!1,t))}z.memo(eN);function eN({routes:n,future:e,state:t}){return wb(n,void 0,t,e)}function tN(n){return j1(n.context)}function er(n){pt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function nN({basename:n="/",children:e=null,location:t,navigationType:i="POP",navigator:a,static:l=!1}){pt(!dc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=n.replace(/^\/*/,"/"),d=z.useMemo(()=>({basename:c,navigator:a,static:l,future:{}}),[c,a,l]);typeof t=="string"&&(t=ol(t));let{pathname:m="/",search:p="",hash:_="",state:T=null,key:A="default"}=t,S=z.useMemo(()=>{let N=Ni(m,c);return N==null?null:{location:{pathname:N,search:p,hash:_,state:T,key:A},navigationType:i}},[c,m,p,_,T,A,i]);return Hr(S!=null,`<Router basename="${c}"> is not able to match the URL "${m}${p}${_}" because it does not start with the basename, so the <Router> won't render anything.`),S==null?null:z.createElement(Kr.Provider,{value:d},z.createElement(fc.Provider,{children:e,value:S}))}function rN({children:n,location:e}){return B1(pg(n),e)}function pg(n,e=[]){let t=[];return z.Children.forEach(n,(i,a)=>{if(!z.isValidElement(i))return;let l=[...e,a];if(i.type===z.Fragment){t.push.apply(t,pg(i.props.children,l));return}pt(i.type===er,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),pt(!i.props.index||!i.props.children,"An index route cannot have child routes.");let c={id:i.props.id||l.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(c.children=pg(i.props.children,l)),t.push(c)}),t}var pf="get",gf="application/x-www-form-urlencoded";function id(n){return n!=null&&typeof n.tagName=="string"}function iN(n){return id(n)&&n.tagName.toLowerCase()==="button"}function sN(n){return id(n)&&n.tagName.toLowerCase()==="form"}function aN(n){return id(n)&&n.tagName.toLowerCase()==="input"}function oN(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function lN(n,e){return n.button===0&&(!e||e==="_self")&&!oN(n)}var sf=null;function uN(){if(sf===null)try{new FormData(document.createElement("form"),0),sf=!1}catch{sf=!0}return sf}var cN=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function $p(n){return n!=null&&!cN.has(n)?(Hr(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${gf}"`),null):n}function hN(n,e){let t,i,a,l,c;if(sN(n)){let d=n.getAttribute("action");i=d?Ni(d,e):null,t=n.getAttribute("method")||pf,a=$p(n.getAttribute("enctype"))||gf,l=new FormData(n)}else if(iN(n)||aN(n)&&(n.type==="submit"||n.type==="image")){let d=n.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=n.getAttribute("formaction")||d.getAttribute("action");if(i=m?Ni(m,e):null,t=n.getAttribute("formmethod")||d.getAttribute("method")||pf,a=$p(n.getAttribute("formenctype"))||$p(d.getAttribute("enctype"))||gf,l=new FormData(d,n),!uN()){let{name:p,type:_,value:T}=n;if(_==="image"){let A=p?`${p}.`:"";l.append(`${A}x`,"0"),l.append(`${A}y`,"0")}else p&&l.append(p,T)}}else{if(id(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=pf,i=null,a=gf,c=n}return l&&a==="text/plain"&&(c=l,l=void 0),{action:i,method:t.toLowerCase(),encType:a,formData:l,body:c}}function ey(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function fN(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function dN(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function mN(n,e,t){let i=await Promise.all(n.map(async a=>{let l=e.routes[a.route.id];if(l){let c=await fN(l,t);return c.links?c.links():[]}return[]}));return _N(i.flat(1).filter(dN).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function n0(n,e,t,i,a,l){let c=(m,p)=>t[p]?m.route.id!==t[p].route.id:!0,d=(m,p)=>t[p].pathname!==m.pathname||t[p].route.path?.endsWith("*")&&t[p].params["*"]!==m.params["*"];return l==="assets"?e.filter((m,p)=>c(m,p)||d(m,p)):l==="data"?e.filter((m,p)=>{let _=i.routes[m.route.id];if(!_||!_.hasLoader)return!1;if(c(m,p)||d(m,p))return!0;if(m.route.shouldRevalidate){let T=m.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof T=="boolean")return T}return!0}):[]}function pN(n,e,{includeHydrateFallback:t}={}){return gN(n.map(i=>{let a=e.routes[i.route.id];if(!a)return[];let l=[a.module];return a.clientActionModule&&(l=l.concat(a.clientActionModule)),a.clientLoaderModule&&(l=l.concat(a.clientLoaderModule)),t&&a.hydrateFallbackModule&&(l=l.concat(a.hydrateFallbackModule)),a.imports&&(l=l.concat(a.imports)),l}).flat(1))}function gN(n){return[...new Set(n)]}function yN(n){let e={},t=Object.keys(n).sort();for(let i of t)e[i]=n[i];return e}function _N(n,e){let t=new Set;return new Set(e),n.reduce((i,a)=>{let l=JSON.stringify(yN(a));return t.has(l)||(t.add(l),i.push({key:l,link:a})),i},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var vN=new Set([100,101,204,205]);function EN(n,e){let t=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t.pathname==="/"?t.pathname="_root.data":e&&Ni(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function Rb(){let n=z.useContext(ll);return ey(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function TN(){let n=z.useContext(rd);return ey(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var ty=z.createContext(void 0);ty.displayName="FrameworkContext";function Ib(){let n=z.useContext(ty);return ey(n,"You must render this element inside a <HydratedRouter> element"),n}function AN(n,e){let t=z.useContext(ty),[i,a]=z.useState(!1),[l,c]=z.useState(!1),{onFocus:d,onBlur:m,onMouseEnter:p,onMouseLeave:_,onTouchStart:T}=e,A=z.useRef(null);z.useEffect(()=>{if(n==="render"&&c(!0),n==="viewport"){let q=$=>{$.forEach(ie=>{c(ie.isIntersecting)})},U=new IntersectionObserver(q,{threshold:.5});return A.current&&U.observe(A.current),()=>{U.disconnect()}}},[n]),z.useEffect(()=>{if(i){let q=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(q)}}},[i]);let S=()=>{a(!0)},N=()=>{a(!1),c(!1)};return t?n!=="intent"?[l,A,{}]:[l,A,{onFocus:Nu(d,S),onBlur:Nu(m,N),onMouseEnter:Nu(p,S),onMouseLeave:Nu(_,N),onTouchStart:Nu(T,S)}]:[!1,A,{}]}function Nu(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function bN({page:n,...e}){let{router:t}=Rb(),i=z.useMemo(()=>pb(t.routes,n,t.basename),[t.routes,n,t.basename]);return i?z.createElement(SN,{page:n,matches:i,...e}):null}function wN(n){let{manifest:e,routeModules:t}=Ib(),[i,a]=z.useState([]);return z.useEffect(()=>{let l=!1;return mN(n,e,t).then(c=>{l||a(c)}),()=>{l=!0}},[n,e,t]),i}function SN({page:n,matches:e,...t}){let i=Ps(),{manifest:a,routeModules:l}=Ib(),{basename:c}=Rb(),{loaderData:d,matches:m}=TN(),p=z.useMemo(()=>n0(n,e,m,a,i,"data"),[n,e,m,a,i]),_=z.useMemo(()=>n0(n,e,m,a,i,"assets"),[n,e,m,a,i]),T=z.useMemo(()=>{if(n===i.pathname+i.search+i.hash)return[];let N=new Set,q=!1;if(e.forEach($=>{let ie=a.routes[$.route.id];!ie||!ie.hasLoader||(!p.some(ne=>ne.route.id===$.route.id)&&$.route.id in d&&l[$.route.id]?.shouldRevalidate||ie.hasClientLoader?q=!0:N.add($.route.id))}),N.size===0)return[];let U=EN(n,c);return q&&N.size>0&&U.searchParams.set("_routes",e.filter($=>N.has($.route.id)).map($=>$.route.id).join(",")),[U.pathname+U.search]},[c,d,i,a,p,e,n,l]),A=z.useMemo(()=>pN(_,a),[_,a]),S=wN(_);return z.createElement(z.Fragment,null,T.map(N=>z.createElement("link",{key:N,rel:"prefetch",as:"fetch",href:N,...t})),A.map(N=>z.createElement("link",{key:N,rel:"modulepreload",href:N,...t})),S.map(({key:N,link:q})=>z.createElement("link",{key:N,...q})))}function RN(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var Cb=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Cb&&(window.__reactRouterVersion="7.6.3")}catch{}function IN({basename:n,children:e,window:t}){let i=z.useRef();i.current==null&&(i.current=c1({window:t,v5Compat:!0}));let a=i.current,[l,c]=z.useState({action:a.action,location:a.location}),d=z.useCallback(m=>{z.startTransition(()=>c(m))},[c]);return z.useLayoutEffect(()=>a.listen(d),[a,d]),z.createElement(nN,{basename:n,children:e,location:l.location,navigationType:l.action,navigator:a})}var Nb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ny=z.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:a,reloadDocument:l,replace:c,state:d,target:m,to:p,preventScrollReset:_,viewTransition:T,...A},S){let{basename:N}=z.useContext(Kr),q=typeof p=="string"&&Nb.test(p),U,$=!1;if(typeof p=="string"&&q&&(U=p,Cb))try{let R=new URL(window.location.href),O=p.startsWith("//")?new URL(R.protocol+p):new URL(p),V=Ni(O.pathname,N);O.origin===R.origin&&V!=null?p=V+O.search+O.hash:$=!0}catch{Hr(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let ie=L1(p,{relative:a}),[ne,he,ce]=AN(i,A),Te=ON(p,{replace:c,state:d,target:m,preventScrollReset:_,relative:a,viewTransition:T});function P(R){e&&e(R),R.defaultPrevented||Te(R)}let I=z.createElement("a",{...A,...ce,href:U||ie,onClick:$||l?e:P,ref:RN(S,he),target:m,"data-discover":!q&&t==="render"?"true":void 0});return ne&&!q?z.createElement(z.Fragment,null,I,z.createElement(bN,{page:ie})):I});ny.displayName="Link";var CN=z.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:a=!1,style:l,to:c,viewTransition:d,children:m,...p},_){let T=mc(c,{relative:p.relative}),A=Ps(),S=z.useContext(rd),{navigator:N,basename:q}=z.useContext(Kr),U=S!=null&&kN(T)&&d===!0,$=N.encodeLocation?N.encodeLocation(T).pathname:T.pathname,ie=A.pathname,ne=S&&S.navigation&&S.navigation.location?S.navigation.location.pathname:null;t||(ie=ie.toLowerCase(),ne=ne?ne.toLowerCase():null,$=$.toLowerCase()),ne&&q&&(ne=Ni(ne,q)||ne);const he=$!=="/"&&$.endsWith("/")?$.length-1:$.length;let ce=ie===$||!a&&ie.startsWith($)&&ie.charAt(he)==="/",Te=ne!=null&&(ne===$||!a&&ne.startsWith($)&&ne.charAt($.length)==="/"),P={isActive:ce,isPending:Te,isTransitioning:U},I=ce?e:void 0,R;typeof i=="function"?R=i(P):R=[i,ce?"active":null,Te?"pending":null,U?"transitioning":null].filter(Boolean).join(" ");let O=typeof l=="function"?l(P):l;return z.createElement(ny,{...p,"aria-current":I,className:R,ref:_,style:O,to:c,viewTransition:d},typeof m=="function"?m(P):m)});CN.displayName="NavLink";var NN=z.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:a,state:l,method:c=pf,action:d,onSubmit:m,relative:p,preventScrollReset:_,viewTransition:T,...A},S)=>{let N=xN(),q=VN(d,{relative:p}),U=c.toLowerCase()==="get"?"get":"post",$=typeof d=="string"&&Nb.test(d),ie=ne=>{if(m&&m(ne),ne.defaultPrevented)return;ne.preventDefault();let he=ne.nativeEvent.submitter,ce=he?.getAttribute("formmethod")||c;N(he||ne.currentTarget,{fetcherKey:e,method:ce,navigate:t,replace:a,state:l,relative:p,preventScrollReset:_,viewTransition:T})};return z.createElement("form",{ref:S,method:U,action:q,onSubmit:i?m:ie,...A,"data-discover":!$&&n==="render"?"true":void 0})});NN.displayName="Form";function DN(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Db(n){let e=z.useContext(ll);return pt(e,DN(n)),e}function ON(n,{target:e,replace:t,state:i,preventScrollReset:a,relative:l,viewTransition:c}={}){let d=U1(),m=Ps(),p=mc(n,{relative:l});return z.useCallback(_=>{if(lN(_,e)){_.preventDefault();let T=t!==void 0?t:Qu(m)===Qu(p);d(n,{replace:T,state:i,preventScrollReset:a,relative:l,viewTransition:c})}},[m,d,p,t,i,e,n,a,l,c])}var MN=0,PN=()=>`__${String(++MN)}__`;function xN(){let{router:n}=Db("useSubmit"),{basename:e}=z.useContext(Kr),t=W1();return z.useCallback(async(i,a={})=>{let{action:l,method:c,encType:d,formData:m,body:p}=hN(i,e);if(a.navigate===!1){let _=a.fetcherKey||PN();await n.fetch(_,t,a.action||l,{preventScrollReset:a.preventScrollReset,formData:m,body:p,formMethod:a.method||c,formEncType:a.encType||d,flushSync:a.flushSync})}else await n.navigate(a.action||l,{preventScrollReset:a.preventScrollReset,formData:m,body:p,formMethod:a.method||c,formEncType:a.encType||d,replace:a.replace,state:a.state,fromRouteId:t,flushSync:a.flushSync,viewTransition:a.viewTransition})},[n,e,t])}function VN(n,{relative:e}={}){let{basename:t}=z.useContext(Kr),i=z.useContext(Qr);pt(i,"useFormAction must be used inside a RouteContext");let[a]=i.matches.slice(-1),l={...mc(n||".",{relative:e})},c=Ps();if(n==null){l.search=c.search;let d=new URLSearchParams(l.search),m=d.getAll("index");if(m.some(_=>_==="")){d.delete("index"),m.filter(T=>T).forEach(T=>d.append("index",T));let _=d.toString();l.search=_?`?${_}`:""}}return(!n||n===".")&&a.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:Ii([t,l.pathname])),Qu(l)}function kN(n,e={}){let t=z.useContext(Tb);pt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=Db("useViewTransitionState"),a=mc(n,{relative:e.relative});if(!t.isTransitioning)return!1;let l=Ni(t.currentLocation.pathname,i)||t.currentLocation.pathname,c=Ni(t.nextLocation.pathname,i)||t.nextLocation.pathname;return Df(a.pathname,c)!=null||Df(a.pathname,l)!=null}[...vN];const LN="modulepreload",UN=function(n){return"/combustibles/"+n},r0={},Yr=function(e,t,i){let a=Promise.resolve();if(t&&t.length>0){let m=function(p){return Promise.all(p.map(_=>Promise.resolve(_).then(T=>({status:"fulfilled",value:T}),T=>({status:"rejected",reason:T}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),d=c?.nonce||c?.getAttribute("nonce");a=m(t.map(p=>{if(p=UN(p),p in r0)return;r0[p]=!0;const _=p.endsWith(".css"),T=_?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${T}`))return;const A=document.createElement("link");if(A.rel=_?"stylesheet":LN,_||(A.as="script"),A.crossOrigin="",A.href=p,d&&A.setAttribute("nonce",d),document.head.appendChild(A),_)return new Promise((S,N)=>{A.addEventListener("load",S),A.addEventListener("error",()=>N(new Error(`Unable to preload CSS for ${p}`)))})}))}function l(c){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=c,window.dispatchEvent(d),!d.defaultPrevented)throw c}return a.then(c=>{for(const d of c||[])d.status==="rejected"&&l(d.reason);return e().catch(l)})},zN=()=>{};var i0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ob=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let a=n.charCodeAt(i);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(a=65536+((a&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},FN=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const a=n[t++];if(a<128)e[i++]=String.fromCharCode(a);else if(a>191&&a<224){const l=n[t++];e[i++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=n[t++],c=n[t++],d=n[t++],m=((a&7)<<18|(l&63)<<12|(c&63)<<6|d&63)-65536;e[i++]=String.fromCharCode(55296+(m>>10)),e[i++]=String.fromCharCode(56320+(m&1023))}else{const l=n[t++],c=n[t++];e[i++]=String.fromCharCode((a&15)<<12|(l&63)<<6|c&63)}}return e.join("")},Mb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let a=0;a<n.length;a+=3){const l=n[a],c=a+1<n.length,d=c?n[a+1]:0,m=a+2<n.length,p=m?n[a+2]:0,_=l>>2,T=(l&3)<<4|d>>4;let A=(d&15)<<2|p>>6,S=p&63;m||(S=64,c||(A=64)),i.push(t[_],t[T],t[A],t[S])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Ob(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):FN(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let a=0;a<n.length;){const l=t[n.charAt(a++)],d=a<n.length?t[n.charAt(a)]:0;++a;const p=a<n.length?t[n.charAt(a)]:64;++a;const T=a<n.length?t[n.charAt(a)]:64;if(++a,l==null||d==null||p==null||T==null)throw new jN;const A=l<<2|d>>4;if(i.push(A),p!==64){const S=d<<4&240|p>>2;if(i.push(S),T!==64){const N=p<<6&192|T;i.push(N)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class jN extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const BN=function(n){const e=Ob(n);return Mb.encodeByteArray(e,!0)},Of=function(n){return BN(n).replace(/\./g,"")},Pb=function(n){try{return Mb.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HN=()=>qN().__FIREBASE_DEFAULTS__,GN=()=>{if(typeof process>"u"||typeof i0>"u")return;const n=i0.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},$N=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Pb(n[1]);return e&&JSON.parse(e)},sd=()=>{try{return zN()||HN()||GN()||$N()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},xb=n=>{var e,t;return(t=(e=sd())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},Vb=n=>{const e=xb(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},kb=()=>{var n;return(n=sd())===null||n===void 0?void 0:n.config},Lb=n=>{var e;return(e=sd())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function za(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function ry(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ub(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",a=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Of(JSON.stringify(t)),Of(JSON.stringify(c)),""].join(".")}const Lu={};function QN(){const n={prod:[],emulator:[]};for(const e of Object.keys(Lu))Lu[e]?n.emulator.push(e):n.prod.push(e);return n}function YN(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let s0=!1;function iy(n,e){if(typeof window>"u"||typeof document>"u"||!za(window.location.host)||Lu[n]===e||Lu[n]||s0)return;Lu[n]=e;function t(A){return`__firebase__banner__${A}`}const i="__firebase__banner",l=QN().prod.length>0;function c(){const A=document.getElementById(i);A&&A.remove()}function d(A){A.style.display="flex",A.style.background="#7faaf0",A.style.position="fixed",A.style.bottom="5px",A.style.left="5px",A.style.padding=".5em",A.style.borderRadius="5px",A.style.alignItems="center"}function m(A,S){A.setAttribute("width","24"),A.setAttribute("id",S),A.setAttribute("height","24"),A.setAttribute("viewBox","0 0 24 24"),A.setAttribute("fill","none"),A.style.marginLeft="-6px"}function p(){const A=document.createElement("span");return A.style.cursor="pointer",A.style.marginLeft="16px",A.style.fontSize="24px",A.innerHTML=" &times;",A.onclick=()=>{s0=!0,c()},A}function _(A,S){A.setAttribute("id",S),A.innerText="Learn more",A.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",A.setAttribute("target","__blank"),A.style.paddingLeft="5px",A.style.textDecoration="underline"}function T(){const A=YN(i),S=t("text"),N=document.getElementById(S)||document.createElement("span"),q=t("learnmore"),U=document.getElementById(q)||document.createElement("a"),$=t("preprendIcon"),ie=document.getElementById($)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(A.created){const ne=A.element;d(ne),_(U,q);const he=p();m(ie,$),ne.append(ie,N,U,he),document.body.appendChild(ne)}l?(N.innerText="Preview backend disconnected.",ie.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ie.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,N.innerText="Preview backend running in this workspace."),N.setAttribute("id",S)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function XN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(mn())}function WN(){var n;const e=(n=sd())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ZN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function sy(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function JN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function eD(){const n=mn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function tD(){return!WN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ad(){try{return typeof indexedDB=="object"}catch{return!1}}function od(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(i);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{var l;e(((l=a.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}function ay(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nD="FirebaseError";class ir extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=nD,Object.setPrototypeOf(this,ir.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,xs.prototype.create)}}class xs{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],c=l?rD(l,i):"Error",d=`${this.serviceName}: ${c} (${a}).`;return new ir(a,d,i)}}function rD(n,e){return n.replace(iD,(t,i)=>{const a=e[i];return a!=null?String(a):`<${i}?>`})}const iD=/\{\$([^}]+)}/g;function sD(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function As(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const a of t){if(!i.includes(a))return!1;const l=n[a],c=e[a];if(a0(l)&&a0(c)){if(!As(l,c))return!1}else if(l!==c)return!1}for(const a of i)if(!t.includes(a))return!1;return!0}function a0(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pc(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Du(n){const e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[a,l]=i.split("=");e[decodeURIComponent(a)]=decodeURIComponent(l)}}),e}function Ou(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function aD(n,e){const t=new oD(n,e);return t.subscribe.bind(t)}class oD{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let a;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");lD(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:i},a.next===void 0&&(a.next=Kp),a.error===void 0&&(a.error=Kp),a.complete===void 0&&(a.complete=Kp);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function lD(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Kp(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uD=1e3,cD=2,hD=4*60*60*1e3,fD=.5;function o0(n,e=uD,t=cD){const i=e*Math.pow(t,n),a=Math.round(fD*i*(Math.random()-.5)*2);return Math.min(hD,i+a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lt(n){return n&&n._delegate?n._delegate:n}class Fn{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dD{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new KN;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&i.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e?.identifier),a=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(a)return null;throw l}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(pD(e))try{this.getOrInitializeService({instanceIdentifier:Sa})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});i.resolve(l)}catch{}}}}clearInstance(e=Sa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Sa){return this.instances.has(e)}getOptions(e=Sa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);i===d&&c.resolve(a)}return a}onInit(e,t){var i;const a=this.normalizeInstanceIdentifier(t),l=(i=this.onInitCallbacks.get(a))!==null&&i!==void 0?i:new Set;l.add(e),this.onInitCallbacks.set(a,l);const c=this.instances.get(a);return c&&e(c,a),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const a of i)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:mD(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Sa){return this.component?this.component.multipleInstances?e:Sa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function mD(n){return n===Sa?void 0:n}function pD(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gD{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new dD(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ke;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(ke||(ke={}));const yD={debug:ke.DEBUG,verbose:ke.VERBOSE,info:ke.INFO,warn:ke.WARN,error:ke.ERROR,silent:ke.SILENT},_D=ke.INFO,vD={[ke.DEBUG]:"log",[ke.VERBOSE]:"log",[ke.INFO]:"info",[ke.WARN]:"warn",[ke.ERROR]:"error"},ED=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),a=vD[e];if(a)console[a](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class gc{constructor(e){this.name=e,this._logLevel=_D,this._logHandler=ED,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ke))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?yD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ke.DEBUG,...e),this._logHandler(this,ke.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ke.VERBOSE,...e),this._logHandler(this,ke.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ke.INFO,...e),this._logHandler(this,ke.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ke.WARN,...e),this._logHandler(this,ke.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ke.ERROR,...e),this._logHandler(this,ke.ERROR,...e)}}const TD=(n,e)=>e.some(t=>n instanceof t);let l0,u0;function AD(){return l0||(l0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function bD(){return u0||(u0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const zb=new WeakMap,gg=new WeakMap,Fb=new WeakMap,Qp=new WeakMap,oy=new WeakMap;function wD(n){const e=new Promise((t,i)=>{const a=()=>{n.removeEventListener("success",l),n.removeEventListener("error",c)},l=()=>{t(ys(n.result)),a()},c=()=>{i(n.error),a()};n.addEventListener("success",l),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&zb.set(t,n)}).catch(()=>{}),oy.set(e,n),e}function SD(n){if(gg.has(n))return;const e=new Promise((t,i)=>{const a=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",c),n.removeEventListener("abort",c)},l=()=>{t(),a()},c=()=>{i(n.error||new DOMException("AbortError","AbortError")),a()};n.addEventListener("complete",l),n.addEventListener("error",c),n.addEventListener("abort",c)});gg.set(n,e)}let yg={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return gg.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Fb.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ys(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function RD(n){yg=n(yg)}function ID(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(Yp(this),e,...t);return Fb.set(i,e.sort?e.sort():[e]),ys(i)}:bD().includes(n)?function(...e){return n.apply(Yp(this),e),ys(zb.get(this))}:function(...e){return ys(n.apply(Yp(this),e))}}function CD(n){return typeof n=="function"?ID(n):(n instanceof IDBTransaction&&SD(n),TD(n,AD())?new Proxy(n,yg):n)}function ys(n){if(n instanceof IDBRequest)return wD(n);if(Qp.has(n))return Qp.get(n);const e=CD(n);return e!==n&&(Qp.set(n,e),oy.set(e,n)),e}const Yp=n=>oy.get(n);function jb(n,e,{blocked:t,upgrade:i,blocking:a,terminated:l}={}){const c=indexedDB.open(n,e),d=ys(c);return i&&c.addEventListener("upgradeneeded",m=>{i(ys(c.result),m.oldVersion,m.newVersion,ys(c.transaction),m)}),t&&c.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),d.then(m=>{l&&m.addEventListener("close",()=>l()),a&&m.addEventListener("versionchange",p=>a(p.oldVersion,p.newVersion,p))}).catch(()=>{}),d}const ND=["get","getKey","getAll","getAllKeys","count"],DD=["put","add","delete","clear"],Xp=new Map;function c0(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Xp.get(e))return Xp.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,a=DD.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(a||ND.includes(t)))return;const l=async function(c,...d){const m=this.transaction(c,a?"readwrite":"readonly");let p=m.store;return i&&(p=p.index(d.shift())),(await Promise.all([p[t](...d),a&&m.done]))[0]};return Xp.set(e,l),l}RD(n=>({...n,get:(e,t,i)=>c0(e,t)||n.get(e,t,i),has:(e,t)=>!!c0(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OD{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(MD(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function MD(n){const e=n.getComponent();return e?.type==="VERSION"}const _g="@firebase/app",h0="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Di=new gc("@firebase/app"),PD="@firebase/app-compat",xD="@firebase/analytics-compat",VD="@firebase/analytics",kD="@firebase/app-check-compat",LD="@firebase/app-check",UD="@firebase/auth",zD="@firebase/auth-compat",FD="@firebase/database",jD="@firebase/data-connect",BD="@firebase/database-compat",qD="@firebase/functions",HD="@firebase/functions-compat",GD="@firebase/installations",$D="@firebase/installations-compat",KD="@firebase/messaging",QD="@firebase/messaging-compat",YD="@firebase/performance",XD="@firebase/performance-compat",WD="@firebase/remote-config",ZD="@firebase/remote-config-compat",JD="@firebase/storage",eO="@firebase/storage-compat",tO="@firebase/firestore",nO="@firebase/ai",rO="@firebase/firestore-compat",iO="firebase",sO="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vg="[DEFAULT]",aO={[_g]:"fire-core",[PD]:"fire-core-compat",[VD]:"fire-analytics",[xD]:"fire-analytics-compat",[LD]:"fire-app-check",[kD]:"fire-app-check-compat",[UD]:"fire-auth",[zD]:"fire-auth-compat",[FD]:"fire-rtdb",[jD]:"fire-data-connect",[BD]:"fire-rtdb-compat",[qD]:"fire-fn",[HD]:"fire-fn-compat",[GD]:"fire-iid",[$D]:"fire-iid-compat",[KD]:"fire-fcm",[QD]:"fire-fcm-compat",[YD]:"fire-perf",[XD]:"fire-perf-compat",[WD]:"fire-rc",[ZD]:"fire-rc-compat",[JD]:"fire-gcs",[eO]:"fire-gcs-compat",[tO]:"fire-fst",[rO]:"fire-fst-compat",[nO]:"fire-vertex","fire-js":"fire-js",[iO]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mf=new Map,oO=new Map,Eg=new Map;function f0(n,e){try{n.container.addComponent(e)}catch(t){Di.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function nr(n){const e=n.name;if(Eg.has(e))return Di.debug(`There were multiple attempts to register component ${e}.`),!1;Eg.set(e,n);for(const t of Mf.values())f0(t,n);for(const t of oO.values())f0(t,n);return!0}function xi(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function wn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lO={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},_s=new xs("app","Firebase",lO);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uO{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Fn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw _s.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fa=sO;function Bb(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i=Object.assign({name:vg,automaticDataCollectionEnabled:!0},e),a=i.name;if(typeof a!="string"||!a)throw _s.create("bad-app-name",{appName:String(a)});if(t||(t=kb()),!t)throw _s.create("no-options");const l=Mf.get(a);if(l){if(As(t,l.options)&&As(i,l.config))return l;throw _s.create("duplicate-app",{appName:a})}const c=new gD(a);for(const m of Eg.values())c.addComponent(m);const d=new uO(t,i,c);return Mf.set(a,d),d}function yc(n=vg){const e=Mf.get(n);if(!e&&n===vg&&kb())return Bb();if(!e)throw _s.create("no-app",{appName:n});return e}function fn(n,e,t){var i;let a=(i=aO[n])!==null&&i!==void 0?i:n;t&&(a+=`-${t}`);const l=a.match(/\s|\//),c=e.match(/\s|\//);if(l||c){const d=[`Unable to register library "${a}" with version "${e}":`];l&&d.push(`library name "${a}" contains illegal characters (whitespace or "/")`),l&&c&&d.push("and"),c&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Di.warn(d.join(" "));return}nr(new Fn(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cO="firebase-heartbeat-database",hO=1,Yu="firebase-heartbeat-store";let Wp=null;function qb(){return Wp||(Wp=jb(cO,hO,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Yu)}catch(t){console.warn(t)}}}}).catch(n=>{throw _s.create("idb-open",{originalErrorMessage:n.message})})),Wp}async function fO(n){try{const t=(await qb()).transaction(Yu),i=await t.objectStore(Yu).get(Hb(n));return await t.done,i}catch(e){if(e instanceof ir)Di.warn(e.message);else{const t=_s.create("idb-get",{originalErrorMessage:e?.message});Di.warn(t.message)}}}async function d0(n,e){try{const i=(await qb()).transaction(Yu,"readwrite");await i.objectStore(Yu).put(e,Hb(n)),await i.done}catch(t){if(t instanceof ir)Di.warn(t.message);else{const i=_s.create("idb-set",{originalErrorMessage:t?.message});Di.warn(i.message)}}}function Hb(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dO=1024,mO=30;class pO{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new yO(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=m0();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:a}),this._heartbeatsCache.heartbeats.length>mO){const c=_O(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Di.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=m0(),{heartbeatsToSend:i,unsentEntries:a}=gO(this._heartbeatsCache.heartbeats),l=Of(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Di.warn(t),""}}}function m0(){return new Date().toISOString().substring(0,10)}function gO(n,e=dO){const t=[];let i=n.slice();for(const a of n){const l=t.find(c=>c.agent===a.agent);if(l){if(l.dates.push(a.date),p0(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),p0(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class yO{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ad()?od().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await fO(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return d0(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return d0(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function p0(n){return Of(JSON.stringify({version:2,heartbeats:n})).length}function _O(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vO(n){nr(new Fn("platform-logger",e=>new OD(e),"PRIVATE")),nr(new Fn("heartbeat",e=>new pO(e),"PRIVATE")),fn(_g,h0,n),fn(_g,h0,"esm2017"),fn("fire-js","")}vO("");function ly(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(n);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(n,i[a])&&(t[i[a]]=n[i[a]]);return t}function Gb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const EO=Gb,$b=new xs("auth","Firebase",Gb());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pf=new gc("@firebase/auth");function TO(n,...e){Pf.logLevel<=ke.WARN&&Pf.warn(`Auth (${Fa}): ${n}`,...e)}function yf(n,...e){Pf.logLevel<=ke.ERROR&&Pf.error(`Auth (${Fa}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rr(n,...e){throw cy(n,...e)}function pr(n,...e){return cy(n,...e)}function uy(n,e,t){const i=Object.assign(Object.assign({},EO()),{[e]:t});return new xs("auth","Firebase",i).create(e,{appName:n.name})}function Ci(n){return uy(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function AO(n,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&rr(n,"argument-error"),uy(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function cy(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return $b.create(n,...e)}function be(n,e,...t){if(!n)throw cy(e,...t)}function Si(n){const e="INTERNAL ASSERTION FAILED: "+n;throw yf(e),new Error(e)}function Oi(n,e){n||Si(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tg(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function bO(){return g0()==="http:"||g0()==="https:"}function g0(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wO(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(bO()||sy()||"connection"in navigator)?navigator.onLine:!0}function SO(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c{constructor(e,t){this.shortDelay=e,this.longDelay=t,Oi(t>e,"Short delay should be less than long delay!"),this.isMobile=XN()||JN()}get(){return wO()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hy(n,e){Oi(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kb{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Si("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Si("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Si("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RO={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IO=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],CO=new _c(3e4,6e4);function Vs(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function ks(n,e,t,i,a={}){return Qb(n,a,async()=>{let l={},c={};i&&(e==="GET"?c=i:l={body:JSON.stringify(i)});const d=pc(Object.assign({key:n.config.apiKey},c)).slice(1),m=await n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);const p=Object.assign({method:e,headers:m},l);return ZN()||(p.referrerPolicy="no-referrer"),n.emulatorConfig&&za(n.emulatorConfig.host)&&(p.credentials="include"),Kb.fetch()(await Yb(n,n.config.apiHost,t,d),p)})}async function Qb(n,e,t){n._canInitEmulator=!1;const i=Object.assign(Object.assign({},RO),e);try{const a=new DO(n),l=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw af(n,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const d=l.ok?c.errorMessage:c.error.message,[m,p]=d.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw af(n,"credential-already-in-use",c);if(m==="EMAIL_EXISTS")throw af(n,"email-already-in-use",c);if(m==="USER_DISABLED")throw af(n,"user-disabled",c);const _=i[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw uy(n,_,p);rr(n,_)}}catch(a){if(a instanceof ir)throw a;rr(n,"network-request-failed",{message:String(a)})}}async function vc(n,e,t,i,a={}){const l=await ks(n,e,t,i,a);return"mfaPendingCredential"in l&&rr(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function Yb(n,e,t,i){const a=`${e}${t}?${i}`,l=n,c=l.config.emulator?hy(n.config,a):`${n.config.apiScheme}://${a}`;return IO.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}function NO(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class DO{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(pr(this.auth,"network-request-failed")),CO.get())})}}function af(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const a=pr(n,e,i);return a.customData._tokenResponse=t,a}function y0(n){return n!==void 0&&n.enterprise!==void 0}class OO{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return NO(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function MO(n,e){return ks(n,"GET","/v2/recaptchaConfig",Vs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PO(n,e){return ks(n,"POST","/v1/accounts:delete",e)}async function xf(n,e){return ks(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uu(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function xO(n,e=!1){const t=lt(n),i=await t.getIdToken(e),a=fy(i);be(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,c=l?.sign_in_provider;return{claims:a,token:i,authTime:Uu(Zp(a.auth_time)),issuedAtTime:Uu(Zp(a.iat)),expirationTime:Uu(Zp(a.exp)),signInProvider:c||null,signInSecondFactor:l?.sign_in_second_factor||null}}function Zp(n){return Number(n)*1e3}function fy(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return yf("JWT malformed, contained fewer than 3 sections"),null;try{const a=Pb(t);return a?JSON.parse(a):(yf("Failed to decode base64 JWT payload"),null)}catch(a){return yf("Caught error parsing JWT payload as JSON",a?.toString()),null}}function _0(n){const e=fy(n);return be(e,"internal-error"),be(typeof e.exp<"u","internal-error"),be(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xu(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof ir&&VO(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function VO({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kO{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const a=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ag{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Uu(this.lastLoginAt),this.creationTime=Uu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vf(n){var e;const t=n.auth,i=await n.getIdToken(),a=await Xu(n,xf(t,{idToken:i}));be(a?.users.length,t,"internal-error");const l=a.users[0];n._notifyReloadListener(l);const c=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?Xb(l.providerUserInfo):[],d=UO(n.providerData,c),m=n.isAnonymous,p=!(n.email&&l.passwordHash)&&!d?.length,_=m?p:!1,T={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:d,metadata:new Ag(l.createdAt,l.lastLoginAt),isAnonymous:_};Object.assign(n,T)}async function LO(n){const e=lt(n);await Vf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function UO(n,e){return[...n.filter(i=>!e.some(a=>a.providerId===i.providerId)),...e]}function Xb(n){return n.map(e=>{var{providerId:t}=e,i=ly(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zO(n,e){const t=await Qb(n,{},async()=>{const i=pc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=n.config,c=await Yb(n,a,"/v1/token",`key=${l}`),d=await n._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:d,body:i};return n.emulatorConfig&&za(n.emulatorConfig.host)&&(m.credentials="include"),Kb.fetch()(c,m)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function FO(n,e){return ks(n,"POST","/v2/accounts:revokeToken",Vs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){be(e.idToken,"internal-error"),be(typeof e.idToken<"u","internal-error"),be(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):_0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){be(e.length!==0,"internal-error");const t=_0(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(be(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:a,expiresIn:l}=await zO(e,t);this.updateTokensAndExpiration(i,a,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:a,expirationTime:l}=t,c=new Ho;return i&&(be(typeof i=="string","internal-error",{appName:e}),c.refreshToken=i),a&&(be(typeof a=="string","internal-error",{appName:e}),c.accessToken=a),l&&(be(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ho,this.toJSON())}_performRefresh(){return Si("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cs(n,e){be(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class dr{constructor(e){var{uid:t,auth:i,stsTokenManager:a}=e,l=ly(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new kO(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Ag(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await Xu(this,this.stsTokenManager.getToken(this.auth,e));return be(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return xO(this,e)}reload(){return LO(this)}_assign(e){this!==e&&(be(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new dr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){be(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Vf(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(wn(this.auth.app))return Promise.reject(Ci(this.auth));const e=await this.getIdToken();return await Xu(this,PO(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,a,l,c,d,m,p,_;const T=(i=t.displayName)!==null&&i!==void 0?i:void 0,A=(a=t.email)!==null&&a!==void 0?a:void 0,S=(l=t.phoneNumber)!==null&&l!==void 0?l:void 0,N=(c=t.photoURL)!==null&&c!==void 0?c:void 0,q=(d=t.tenantId)!==null&&d!==void 0?d:void 0,U=(m=t._redirectEventId)!==null&&m!==void 0?m:void 0,$=(p=t.createdAt)!==null&&p!==void 0?p:void 0,ie=(_=t.lastLoginAt)!==null&&_!==void 0?_:void 0,{uid:ne,emailVerified:he,isAnonymous:ce,providerData:Te,stsTokenManager:P}=t;be(ne&&P,e,"internal-error");const I=Ho.fromJSON(this.name,P);be(typeof ne=="string",e,"internal-error"),cs(T,e.name),cs(A,e.name),be(typeof he=="boolean",e,"internal-error"),be(typeof ce=="boolean",e,"internal-error"),cs(S,e.name),cs(N,e.name),cs(q,e.name),cs(U,e.name),cs($,e.name),cs(ie,e.name);const R=new dr({uid:ne,auth:e,email:A,emailVerified:he,displayName:T,isAnonymous:ce,photoURL:N,phoneNumber:S,tenantId:q,stsTokenManager:I,createdAt:$,lastLoginAt:ie});return Te&&Array.isArray(Te)&&(R.providerData=Te.map(O=>Object.assign({},O))),U&&(R._redirectEventId=U),R}static async _fromIdTokenResponse(e,t,i=!1){const a=new Ho;a.updateFromServerResponse(t);const l=new dr({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:i});return await Vf(l),l}static async _fromGetAccountInfoResponse(e,t,i){const a=t.users[0];be(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?Xb(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!l?.length,d=new Ho;d.updateFromIdToken(i);const m=new dr({uid:a.localId,auth:e,stsTokenManager:d,isAnonymous:c}),p={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new Ag(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!l?.length};return Object.assign(m,p),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v0=new Map;function Ri(n){Oi(n instanceof Function,"Expected a class definition");let e=v0.get(n);return e?(Oi(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,v0.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Wb.type="NONE";const E0=Wb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _f(n,e,t){return`firebase:${n}:${e}:${t}`}class Go{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:a,name:l}=this.auth;this.fullUserKey=_f(this.userKey,a.apiKey,l),this.fullPersistenceKey=_f("persistence",a.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await xf(this.auth,{idToken:e}).catch(()=>{});return t?dr._fromGetAccountInfoResponse(this.auth,t,e):null}return dr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Go(Ri(E0),e,i);const a=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let l=a[0]||Ri(E0);const c=_f(i,e.config.apiKey,e.name);let d=null;for(const p of t)try{const _=await p._get(c);if(_){let T;if(typeof _=="string"){const A=await xf(e,{idToken:_}).catch(()=>{});if(!A)break;T=await dr._fromGetAccountInfoResponse(e,A,_)}else T=dr._fromJSON(e,_);p!==l&&(d=T),l=p;break}}catch{}const m=a.filter(p=>p._shouldAllowMigration);return!l._shouldAllowMigration||!m.length?new Go(l,e,i):(l=m[0],d&&await l._set(c,d.toJSON()),await Promise.all(t.map(async p=>{if(p!==l)try{await p._remove(c)}catch{}})),new Go(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T0(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(tw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Zb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(rw(e))return"Blackberry";if(iw(e))return"Webos";if(Jb(e))return"Safari";if((e.includes("chrome/")||ew(e))&&!e.includes("edge/"))return"Chrome";if(nw(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if(i?.length===2)return i[1]}return"Other"}function Zb(n=mn()){return/firefox\//i.test(n)}function Jb(n=mn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ew(n=mn()){return/crios\//i.test(n)}function tw(n=mn()){return/iemobile/i.test(n)}function nw(n=mn()){return/android/i.test(n)}function rw(n=mn()){return/blackberry/i.test(n)}function iw(n=mn()){return/webos/i.test(n)}function dy(n=mn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function jO(n=mn()){var e;return dy(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function BO(){return eD()&&document.documentMode===10}function sw(n=mn()){return dy(n)||nw(n)||iw(n)||rw(n)||/windows phone/i.test(n)||tw(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aw(n,e=[]){let t;switch(n){case"Browser":t=T0(mn());break;case"Worker":t=`${T0(mn())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Fa}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qO{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((c,d)=>{try{const m=e(l);c(m)}catch(m){d(m)}});i.onAbort=t,this.queue.push(i);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HO(n,e={}){return ks(n,"GET","/v2/passwordPolicy",Vs(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GO=6;class $O{constructor(e){var t,i,a,l;const c=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=c.minPasswordLength)!==null&&t!==void 0?t:GO,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(a=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&a!==void 0?a:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,a,l,c,d;const m={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,m),this.validatePasswordCharacterOptions(e,m),m.isValid&&(m.isValid=(t=m.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),m.isValid&&(m.isValid=(i=m.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),m.isValid&&(m.isValid=(a=m.containsLowercaseLetter)!==null&&a!==void 0?a:!0),m.isValid&&(m.isValid=(l=m.containsUppercaseLetter)!==null&&l!==void 0?l:!0),m.isValid&&(m.isValid=(c=m.containsNumericCharacter)!==null&&c!==void 0?c:!0),m.isValid&&(m.isValid=(d=m.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),m}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let a=0;a<e.length;a++)i=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KO{constructor(e,t,i,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new A0(this),this.idTokenSubscription=new A0(this),this.beforeStateQueue=new qO(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=$b,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ri(t)),this._initializationPromise=this.queue(async()=>{var i,a,l;if(!this._deleted&&(this.persistenceManager=await Go.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((a=this._popupRedirectResolver)===null||a===void 0)&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await xf(this,{idToken:e}),i=await dr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(wn(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let a=i,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,d=a?._redirectEventId,m=await this.tryRedirectSignIn(e);(!c||c===d)&&m?.user&&(a=m.user,l=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(a)}catch(c){a=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return be(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Vf(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=SO()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(wn(this.app))return Promise.reject(Ci(this));const t=e?lt(e):null;return t&&be(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&be(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return wn(this.app)?Promise.reject(Ci(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return wn(this.app)?Promise.reject(Ci(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ri(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await HO(this),t=new $O(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new xs("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await FO(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ri(e)||this._popupRedirectResolver;be(t,this,"argument-error"),this.redirectPersistenceManager=await Go.create(this,[Ri(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,a){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(be(d,this,"internal-error"),d.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const m=e.addObserver(t,i,a);return()=>{c=!0,m()}}else{const m=e.addObserver(t);return()=>{c=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return be(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=aw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);const a=await this._getAppCheckToken();return a&&(t["X-Firebase-AppCheck"]=a),t}async _getAppCheckToken(){var e;if(wn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&TO(`Error while retrieving App Check token: ${t.error}`),t?.token}}function Ls(n){return lt(n)}class A0{constructor(e){this.auth=e,this.observer=null,this.addObserver=aD(t=>this.observer=t)}get next(){return be(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ld={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function QO(n){ld=n}function ow(n){return ld.loadJS(n)}function YO(){return ld.recaptchaEnterpriseScript}function XO(){return ld.gapiScript}function WO(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class ZO{constructor(){this.enterprise=new JO}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class JO{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const eM="recaptcha-enterprise",lw="NO_RECAPTCHA";class tM{constructor(e){this.type=eM,this.auth=Ls(e)}async verify(e="verify",t=!1){async function i(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(c,d)=>{MO(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(m=>{if(m.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const p=new OO(m);return l.tenantId==null?l._agentRecaptchaConfig=p:l._tenantRecaptchaConfigs[l.tenantId]=p,c(p.siteKey)}}).catch(m=>{d(m)})})}function a(l,c,d){const m=window.grecaptcha;y0(m)?m.enterprise.ready(()=>{m.enterprise.execute(l,{action:e}).then(p=>{c(p)}).catch(()=>{c(lw)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new ZO().execute("siteKey",{action:"verify"}):new Promise((l,c)=>{i(this.auth).then(d=>{if(!t&&y0(window.grecaptcha))a(d,l,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let m=YO();m.length!==0&&(m+=d),ow(m).then(()=>{a(d,l,c)}).catch(p=>{c(p)})}}).catch(d=>{c(d)})})}}async function b0(n,e,t,i=!1,a=!1){const l=new tM(n);let c;if(a)c=lw;else try{c=await l.verify(t)}catch{c=await l.verify(t,!0)}const d=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const m=d.phoneEnrollmentInfo.phoneNumber,p=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:m,recaptchaToken:p,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const m=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:m,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return i?Object.assign(d,{captchaResp:c}):Object.assign(d,{captchaResponse:c}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function bg(n,e,t,i,a){var l;if(!((l=n._getRecaptchaConfig())===null||l===void 0)&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await b0(n,e,t,t==="getOobCode");return i(n,c)}else return i(n,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await b0(n,e,t,t==="getOobCode");return i(n,d)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nM(n,e){const t=xi(n,"auth");if(t.isInitialized()){const a=t.getImmediate(),l=t.getOptions();if(As(l,e??{}))return a;rr(a,"already-initialized")}return t.initialize({options:e})}function rM(n,e){const t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(Ri);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e?.popupRedirectResolver)}function iM(n,e,t){const i=Ls(n);be(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const a=!1,l=uw(e),{host:c,port:d}=sM(e),m=d===null?"":`:${d}`,p={url:`${l}//${c}${m}/`},_=Object.freeze({host:c,port:d,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!i._canInitEmulator){be(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),be(As(p,i.config.emulator)&&As(_,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=p,i.emulatorConfig=_,i.settings.appVerificationDisabledForTesting=!0,za(c)?(ry(`${l}//${c}${m}`),iy("Auth",!0)):aM()}function uw(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function sM(n){const e=uw(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(i);if(a){const l=a[1];return{host:l,port:w0(i.substr(l.length+1))}}else{const[l,c]=i.split(":");return{host:l,port:w0(c)}}}function w0(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function aM(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class my{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Si("not implemented")}_getIdTokenResponse(e){return Si("not implemented")}_linkToIdToken(e,t){return Si("not implemented")}_getReauthenticationResolver(e){return Si("not implemented")}}async function oM(n,e){return ks(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lM(n,e){return vc(n,"POST","/v1/accounts:signInWithPassword",Vs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uM(n,e){return vc(n,"POST","/v1/accounts:signInWithEmailLink",Vs(n,e))}async function cM(n,e){return vc(n,"POST","/v1/accounts:signInWithEmailLink",Vs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wu extends my{constructor(e,t,i,a=null){super("password",i),this._email=e,this._password=t,this._tenantId=a}static _fromEmailAndPassword(e,t){return new Wu(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new Wu(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return bg(e,t,"signInWithPassword",lM);case"emailLink":return uM(e,{email:this._email,oobCode:this._password});default:rr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return bg(e,i,"signUpPassword",oM);case"emailLink":return cM(e,{idToken:t,email:this._email,oobCode:this._password});default:rr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $o(n,e){return vc(n,"POST","/v1/accounts:signInWithIdp",Vs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hM="http://localhost";class Pa extends my{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Pa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):rr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:a}=t,l=ly(t,["providerId","signInMethod"]);if(!i||!a)return null;const c=new Pa(i,a);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return $o(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,$o(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,$o(e,t)}buildRequest(){const e={requestUri:hM,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=pc(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fM(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function dM(n){const e=Du(Ou(n)).link,t=e?Du(Ou(e)).deep_link_id:null,i=Du(Ou(n)).deep_link_id;return(i?Du(Ou(i)).link:null)||i||t||e||n}class py{constructor(e){var t,i,a,l,c,d;const m=Du(Ou(e)),p=(t=m.apiKey)!==null&&t!==void 0?t:null,_=(i=m.oobCode)!==null&&i!==void 0?i:null,T=fM((a=m.mode)!==null&&a!==void 0?a:null);be(p&&_&&T,"argument-error"),this.apiKey=p,this.operation=T,this.code=_,this.continueUrl=(l=m.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(c=m.lang)!==null&&c!==void 0?c:null,this.tenantId=(d=m.tenantId)!==null&&d!==void 0?d:null}static parseLink(e){const t=dM(e);try{return new py(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul{constructor(){this.providerId=ul.PROVIDER_ID}static credential(e,t){return Wu._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=py.parseLink(t);return be(i,"argument-error"),Wu._fromEmailAndCode(e,i.code,i.tenantId)}}ul.PROVIDER_ID="password";ul.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ul.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gy{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ec extends gy{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs extends Ec{constructor(){super("facebook.com")}static credential(e){return Pa._fromParams({providerId:hs.PROVIDER_ID,signInMethod:hs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return hs.credentialFromTaggedObject(e)}static credentialFromError(e){return hs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return hs.credential(e.oauthAccessToken)}catch{return null}}}hs.FACEBOOK_SIGN_IN_METHOD="facebook.com";hs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi extends Ec{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Pa._fromParams({providerId:wi.PROVIDER_ID,signInMethod:wi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return wi.credentialFromTaggedObject(e)}static credentialFromError(e){return wi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return wi.credential(t,i)}catch{return null}}}wi.GOOGLE_SIGN_IN_METHOD="google.com";wi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs extends Ec{constructor(){super("github.com")}static credential(e){return Pa._fromParams({providerId:fs.PROVIDER_ID,signInMethod:fs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return fs.credentialFromTaggedObject(e)}static credentialFromError(e){return fs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return fs.credential(e.oauthAccessToken)}catch{return null}}}fs.GITHUB_SIGN_IN_METHOD="github.com";fs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds extends Ec{constructor(){super("twitter.com")}static credential(e,t){return Pa._fromParams({providerId:ds.PROVIDER_ID,signInMethod:ds.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ds.credentialFromTaggedObject(e)}static credentialFromError(e){return ds.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return ds.credential(t,i)}catch{return null}}}ds.TWITTER_SIGN_IN_METHOD="twitter.com";ds.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mM(n,e){return vc(n,"POST","/v1/accounts:signUp",Vs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,a=!1){const l=await dr._fromIdTokenResponse(e,i,a),c=S0(i);return new xa({user:l,providerId:c,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const a=S0(i);return new xa({user:e,providerId:a,_tokenResponse:i,operationType:t})}}function S0(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf extends ir{constructor(e,t,i,a){var l;super(t.code,t.message),this.operationType=i,this.user=a,Object.setPrototypeOf(this,kf.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,a){return new kf(e,t,i,a)}}function cw(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?kf._fromErrorAndOperation(n,l,e,i):l})}async function pM(n,e,t=!1){const i=await Xu(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return xa._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gM(n,e,t=!1){const{auth:i}=n;if(wn(i.app))return Promise.reject(Ci(i));const a="reauthenticate";try{const l=await Xu(n,cw(i,a,e,n),t);be(l.idToken,i,"internal-error");const c=fy(l.idToken);be(c,i,"internal-error");const{sub:d}=c;return be(n.uid===d,i,"user-mismatch"),xa._forOperation(n,a,l)}catch(l){throw l?.code==="auth/user-not-found"&&rr(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hw(n,e,t=!1){if(wn(n.app))return Promise.reject(Ci(n));const i="signIn",a=await cw(n,i,e),l=await xa._fromIdTokenResponse(n,i,a);return t||await n._updateCurrentUser(l.user),l}async function yM(n,e){return hw(Ls(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fw(n){const e=Ls(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function _M(n,e,t){if(wn(n.app))return Promise.reject(Ci(n));const i=Ls(n),c=await bg(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",mM).catch(m=>{throw m.code==="auth/password-does-not-meet-requirements"&&fw(n),m}),d=await xa._fromIdTokenResponse(i,"signIn",c);return await i._updateCurrentUser(d.user),d}function vM(n,e,t){return wn(n.app)?Promise.reject(Ci(n)):yM(lt(n),ul.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&fw(n),i})}function EM(n,e,t,i){return lt(n).onIdTokenChanged(e,t,i)}function TM(n,e,t){return lt(n).beforeAuthStateChanged(e,t)}function AM(n,e,t,i){return lt(n).onAuthStateChanged(e,t,i)}function bM(n){return lt(n).signOut()}const Lf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dw{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Lf,"1"),this.storage.removeItem(Lf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wM=1e3,SM=10;class mw extends dw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=sw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),a=this.localCache[t];i!==a&&e(t,a,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,d,m)=>{this.notifyListeners(c,m)});return}const i=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(i);!t&&this.localCache[i]===c||this.notifyListeners(i,c)},l=this.storage.getItem(i);BO()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,SM):a()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},wM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}mw.type="LOCAL";const RM=mw;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pw extends dw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}pw.type="SESSION";const gw=pw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IM(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const i=new ud(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:a,data:l}=t.data,c=this.handlersMap[a];if(!c?.size)return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:a});const d=Array.from(c).map(async p=>p(t.origin,l)),m=await IM(d);t.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:m})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ud.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yy(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CM{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,c;return new Promise((d,m)=>{const p=yy("",20);a.port1.start();const _=setTimeout(()=>{m(new Error("unsupported_event"))},i);c={messageChannel:a,onMessage(T){const A=T;if(A.data.eventId===p)switch(A.data.status){case"ack":clearTimeout(_),l=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),d(A.data.response);break;default:clearTimeout(_),clearTimeout(l),m(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fr(){return window}function NM(n){Fr().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yw(){return typeof Fr().WorkerGlobalScope<"u"&&typeof Fr().importScripts=="function"}async function DM(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function OM(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function MM(){return yw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _w="firebaseLocalStorageDb",PM=1,Uf="firebaseLocalStorage",vw="fbase_key";class Tc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function cd(n,e){return n.transaction([Uf],e?"readwrite":"readonly").objectStore(Uf)}function xM(){const n=indexedDB.deleteDatabase(_w);return new Tc(n).toPromise()}function wg(){const n=indexedDB.open(_w,PM);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(Uf,{keyPath:vw})}catch(a){t(a)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(Uf)?e(i):(i.close(),await xM(),e(await wg()))})})}async function R0(n,e,t){const i=cd(n,!0).put({[vw]:e,value:t});return new Tc(i).toPromise()}async function VM(n,e){const t=cd(n,!1).get(e),i=await new Tc(t).toPromise();return i===void 0?null:i.value}function I0(n,e){const t=cd(n,!0).delete(e);return new Tc(t).toPromise()}const kM=800,LM=3;class Ew{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await wg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>LM)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return yw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ud._getInstance(MM()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await DM(),!this.activeServiceWorker)return;this.sender=new CM(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((t=i[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||OM()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await wg();return await R0(e,Lf,"1"),await I0(e,Lf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>R0(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>VM(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>I0(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=cd(a,!1).getAll();return new Tc(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)i.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!i.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),kM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Ew.type="LOCAL";const UM=Ew;new _c(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tw(n,e){return e?Ri(e):(be(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _y extends my{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return $o(e,this._buildIdpRequest())}_linkToIdToken(e,t){return $o(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return $o(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function zM(n){return hw(n.auth,new _y(n),n.bypassAuthState)}function FM(n){const{auth:e,user:t}=n;return be(t,e,"internal-error"),gM(t,new _y(n),n.bypassAuthState)}async function jM(n){const{auth:e,user:t}=n;return be(t,e,"internal-error"),pM(t,new _y(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aw{constructor(e,t,i,a,l=!1){this.auth=e,this.resolver=i,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:a,tenantId:l,error:c,type:d}=e;if(c){this.reject(c);return}const m={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(m))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return zM;case"linkViaPopup":case"linkViaRedirect":return jM;case"reauthViaPopup":case"reauthViaRedirect":return FM;default:rr(this.auth,"internal-error")}}resolve(e){Oi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Oi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BM=new _c(2e3,1e4);async function qM(n,e,t){if(wn(n.app))return Promise.reject(pr(n,"operation-not-supported-in-this-environment"));const i=Ls(n);AO(n,e,gy);const a=Tw(i,t);return new Ia(i,"signInViaPopup",e,a).executeNotNull()}class Ia extends Aw{constructor(e,t,i,a,l){super(e,t,a,l),this.provider=i,this.authWindow=null,this.pollId=null,Ia.currentPopupAction&&Ia.currentPopupAction.cancel(),Ia.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return be(e,this.auth,"internal-error"),e}async onExecution(){Oi(this.filter.length===1,"Popup operations only handle one event");const e=yy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(pr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(pr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ia.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if(!((i=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(pr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,BM.get())};e()}}Ia.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HM="pendingRedirect",vf=new Map;class GM extends Aw{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=vf.get(this.auth._key());if(!e){try{const i=await $M(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}vf.set(this.auth._key(),e)}return this.bypassAuthState||vf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function $M(n,e){const t=YM(e),i=QM(n);if(!await i._isAvailable())return!1;const a=await i._get(t)==="true";return await i._remove(t),a}function KM(n,e){vf.set(n._key(),e)}function QM(n){return Ri(n._redirectPersistence)}function YM(n){return _f(HM,n.config.apiKey,n.name)}async function XM(n,e,t=!1){if(wn(n.app))return Promise.reject(Ci(n));const i=Ls(n),a=Tw(i,e),c=await new GM(i,a,t).execute();return c&&!t&&(delete c.user._redirectEventId,await i._persistUserIfCurrent(c.user),await i._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WM=10*60*1e3;class ZM{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!JM(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!bw(e)){const a=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(pr(this.auth,a))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=WM&&this.cachedEventUids.clear(),this.cachedEventUids.has(C0(e))}saveEventToCache(e){this.cachedEventUids.add(C0(e)),this.lastProcessedEventTime=Date.now()}}function C0(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function bw({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function JM(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return bw(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eP(n,e={}){return ks(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tP=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,nP=/^https?/;async function rP(n){if(n.config.emulator)return;const{authorizedDomains:e}=await eP(n);for(const t of e)try{if(iP(t))return}catch{}rr(n,"unauthorized-domain")}function iP(n){const e=Tg(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===i}if(!nP.test(t))return!1;if(tP.test(n))return i===n;const a=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sP=new _c(3e4,6e4);function N0(){const n=Fr().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function aP(n){return new Promise((e,t)=>{var i,a,l;function c(){N0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{N0(),t(pr(n,"network-request-failed"))},timeout:sP.get()})}if(!((a=(i=Fr().gapi)===null||i===void 0?void 0:i.iframes)===null||a===void 0)&&a.Iframe)e(gapi.iframes.getContext());else if(!((l=Fr().gapi)===null||l===void 0)&&l.load)c();else{const d=WO("iframefcb");return Fr()[d]=()=>{gapi.load?c():t(pr(n,"network-request-failed"))},ow(`${XO()}?onload=${d}`).catch(m=>t(m))}}).catch(e=>{throw Ef=null,e})}let Ef=null;function oP(n){return Ef=Ef||aP(n),Ef}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lP=new _c(5e3,15e3),uP="__/auth/iframe",cP="emulator/auth/iframe",hP={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},fP=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function dP(n){const e=n.config;be(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?hy(e,cP):`https://${n.config.authDomain}/${uP}`,i={apiKey:e.apiKey,appName:n.name,v:Fa},a=fP.get(n.config.apiHost);a&&(i.eid=a);const l=n._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${pc(i).slice(1)}`}async function mP(n){const e=await oP(n),t=Fr().gapi;return be(t,n,"internal-error"),e.open({where:document.body,url:dP(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:hP,dontclear:!0},i=>new Promise(async(a,l)=>{await i.restyle({setHideOnLeave:!1});const c=pr(n,"network-request-failed"),d=Fr().setTimeout(()=>{l(c)},lP.get());function m(){Fr().clearTimeout(d),a(i)}i.ping(m).then(m,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pP={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},gP=500,yP=600,_P="_blank",vP="http://localhost";class D0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function EP(n,e,t,i=gP,a=yP){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-i)/2,0).toString();let d="";const m=Object.assign(Object.assign({},pP),{width:i.toString(),height:a.toString(),top:l,left:c}),p=mn().toLowerCase();t&&(d=ew(p)?_P:t),Zb(p)&&(e=e||vP,m.scrollbars="yes");const _=Object.entries(m).reduce((A,[S,N])=>`${A}${S}=${N},`,"");if(jO(p)&&d!=="_self")return TP(e||"",d),new D0(null);const T=window.open(e||"",d,_);be(T,n,"popup-blocked");try{T.focus()}catch{}return new D0(T)}function TP(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AP="__/auth/handler",bP="emulator/auth/handler",wP=encodeURIComponent("fac");async function O0(n,e,t,i,a,l){be(n.config.authDomain,n,"auth-domain-config-required"),be(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:Fa,eventId:a};if(e instanceof gy){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",sD(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,T]of Object.entries({}))c[_]=T}if(e instanceof Ec){const _=e.getScopes().filter(T=>T!=="");_.length>0&&(c.scopes=_.join(","))}n.tenantId&&(c.tid=n.tenantId);const d=c;for(const _ of Object.keys(d))d[_]===void 0&&delete d[_];const m=await n._getAppCheckToken(),p=m?`#${wP}=${encodeURIComponent(m)}`:"";return`${SP(n)}?${pc(d).slice(1)}${p}`}function SP({config:n}){return n.emulator?hy(n,bP):`https://${n.authDomain}/${AP}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jp="webStorageSupport";class RP{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=gw,this._completeRedirectFn=XM,this._overrideRedirectResult=KM}async _openPopup(e,t,i,a){var l;Oi((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const c=await O0(e,t,i,Tg(),a);return EP(e,c,yy())}async _openRedirect(e,t,i,a){await this._originValidation(e);const l=await O0(e,t,i,Tg(),a);return NM(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:l}=this.eventManagers[t];return a?Promise.resolve(a):(Oi(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await mP(e),i=new ZM(e);return t.register("authEvent",a=>(be(a?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Jp,{type:Jp},a=>{var l;const c=(l=a?.[0])===null||l===void 0?void 0:l[Jp];c!==void 0&&t(!!c),rr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=rP(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return sw()||Jb()||dy()}}const IP=RP;var M0="@firebase/auth",P0="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CP{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){be(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NP(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function DP(n){nr(new Fn("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=i.options;be(c&&!c.includes(":"),"invalid-api-key",{appName:i.name});const m={apiKey:c,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:aw(n)},p=new KO(i,a,l,m);return rM(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),nr(new Fn("auth-internal",e=>{const t=Ls(e.getProvider("auth").getImmediate());return(i=>new CP(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),fn(M0,P0,NP(n)),fn(M0,P0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OP=5*60,MP=Lb("authIdTokenMaxAge")||OP;let x0=null;const PP=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>MP)return;const a=t?.token;x0!==a&&(x0=a,await fetch(n,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function xP(n=yc()){const e=xi(n,"auth");if(e.isInitialized())return e.getImmediate();const t=nM(n,{popupRedirectResolver:IP,persistence:[UM,RM,gw]}),i=Lb("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const c=PP(l.toString());TM(t,c,()=>c(t.currentUser)),EM(t,d=>c(d))}}const a=xb("auth");return a&&iM(t,`http://${a}`),t}function VP(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}QO({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=a=>{const l=pr("internal-error");l.customData=a,t(l)},i.type="text/javascript",i.charset="UTF-8",VP().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});DP("Browser");var kP="firebase",LP="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */fn(kP,LP,"app");var V0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var vs,ww;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(P,I){function R(){}R.prototype=I.prototype,P.D=I.prototype,P.prototype=new R,P.prototype.constructor=P,P.C=function(O,V,F){for(var D=Array(arguments.length-2),Qt=2;Qt<arguments.length;Qt++)D[Qt-2]=arguments[Qt];return I.prototype[V].apply(O,D)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(P,I,R){R||(R=0);var O=Array(16);if(typeof I=="string")for(var V=0;16>V;++V)O[V]=I.charCodeAt(R++)|I.charCodeAt(R++)<<8|I.charCodeAt(R++)<<16|I.charCodeAt(R++)<<24;else for(V=0;16>V;++V)O[V]=I[R++]|I[R++]<<8|I[R++]<<16|I[R++]<<24;I=P.g[0],R=P.g[1],V=P.g[2];var F=P.g[3],D=I+(F^R&(V^F))+O[0]+3614090360&4294967295;I=R+(D<<7&4294967295|D>>>25),D=F+(V^I&(R^V))+O[1]+3905402710&4294967295,F=I+(D<<12&4294967295|D>>>20),D=V+(R^F&(I^R))+O[2]+606105819&4294967295,V=F+(D<<17&4294967295|D>>>15),D=R+(I^V&(F^I))+O[3]+3250441966&4294967295,R=V+(D<<22&4294967295|D>>>10),D=I+(F^R&(V^F))+O[4]+4118548399&4294967295,I=R+(D<<7&4294967295|D>>>25),D=F+(V^I&(R^V))+O[5]+1200080426&4294967295,F=I+(D<<12&4294967295|D>>>20),D=V+(R^F&(I^R))+O[6]+2821735955&4294967295,V=F+(D<<17&4294967295|D>>>15),D=R+(I^V&(F^I))+O[7]+4249261313&4294967295,R=V+(D<<22&4294967295|D>>>10),D=I+(F^R&(V^F))+O[8]+1770035416&4294967295,I=R+(D<<7&4294967295|D>>>25),D=F+(V^I&(R^V))+O[9]+2336552879&4294967295,F=I+(D<<12&4294967295|D>>>20),D=V+(R^F&(I^R))+O[10]+4294925233&4294967295,V=F+(D<<17&4294967295|D>>>15),D=R+(I^V&(F^I))+O[11]+2304563134&4294967295,R=V+(D<<22&4294967295|D>>>10),D=I+(F^R&(V^F))+O[12]+1804603682&4294967295,I=R+(D<<7&4294967295|D>>>25),D=F+(V^I&(R^V))+O[13]+4254626195&4294967295,F=I+(D<<12&4294967295|D>>>20),D=V+(R^F&(I^R))+O[14]+2792965006&4294967295,V=F+(D<<17&4294967295|D>>>15),D=R+(I^V&(F^I))+O[15]+1236535329&4294967295,R=V+(D<<22&4294967295|D>>>10),D=I+(V^F&(R^V))+O[1]+4129170786&4294967295,I=R+(D<<5&4294967295|D>>>27),D=F+(R^V&(I^R))+O[6]+3225465664&4294967295,F=I+(D<<9&4294967295|D>>>23),D=V+(I^R&(F^I))+O[11]+643717713&4294967295,V=F+(D<<14&4294967295|D>>>18),D=R+(F^I&(V^F))+O[0]+3921069994&4294967295,R=V+(D<<20&4294967295|D>>>12),D=I+(V^F&(R^V))+O[5]+3593408605&4294967295,I=R+(D<<5&4294967295|D>>>27),D=F+(R^V&(I^R))+O[10]+38016083&4294967295,F=I+(D<<9&4294967295|D>>>23),D=V+(I^R&(F^I))+O[15]+3634488961&4294967295,V=F+(D<<14&4294967295|D>>>18),D=R+(F^I&(V^F))+O[4]+3889429448&4294967295,R=V+(D<<20&4294967295|D>>>12),D=I+(V^F&(R^V))+O[9]+568446438&4294967295,I=R+(D<<5&4294967295|D>>>27),D=F+(R^V&(I^R))+O[14]+3275163606&4294967295,F=I+(D<<9&4294967295|D>>>23),D=V+(I^R&(F^I))+O[3]+4107603335&4294967295,V=F+(D<<14&4294967295|D>>>18),D=R+(F^I&(V^F))+O[8]+1163531501&4294967295,R=V+(D<<20&4294967295|D>>>12),D=I+(V^F&(R^V))+O[13]+2850285829&4294967295,I=R+(D<<5&4294967295|D>>>27),D=F+(R^V&(I^R))+O[2]+4243563512&4294967295,F=I+(D<<9&4294967295|D>>>23),D=V+(I^R&(F^I))+O[7]+1735328473&4294967295,V=F+(D<<14&4294967295|D>>>18),D=R+(F^I&(V^F))+O[12]+2368359562&4294967295,R=V+(D<<20&4294967295|D>>>12),D=I+(R^V^F)+O[5]+4294588738&4294967295,I=R+(D<<4&4294967295|D>>>28),D=F+(I^R^V)+O[8]+2272392833&4294967295,F=I+(D<<11&4294967295|D>>>21),D=V+(F^I^R)+O[11]+1839030562&4294967295,V=F+(D<<16&4294967295|D>>>16),D=R+(V^F^I)+O[14]+4259657740&4294967295,R=V+(D<<23&4294967295|D>>>9),D=I+(R^V^F)+O[1]+2763975236&4294967295,I=R+(D<<4&4294967295|D>>>28),D=F+(I^R^V)+O[4]+1272893353&4294967295,F=I+(D<<11&4294967295|D>>>21),D=V+(F^I^R)+O[7]+4139469664&4294967295,V=F+(D<<16&4294967295|D>>>16),D=R+(V^F^I)+O[10]+3200236656&4294967295,R=V+(D<<23&4294967295|D>>>9),D=I+(R^V^F)+O[13]+681279174&4294967295,I=R+(D<<4&4294967295|D>>>28),D=F+(I^R^V)+O[0]+3936430074&4294967295,F=I+(D<<11&4294967295|D>>>21),D=V+(F^I^R)+O[3]+3572445317&4294967295,V=F+(D<<16&4294967295|D>>>16),D=R+(V^F^I)+O[6]+76029189&4294967295,R=V+(D<<23&4294967295|D>>>9),D=I+(R^V^F)+O[9]+3654602809&4294967295,I=R+(D<<4&4294967295|D>>>28),D=F+(I^R^V)+O[12]+3873151461&4294967295,F=I+(D<<11&4294967295|D>>>21),D=V+(F^I^R)+O[15]+530742520&4294967295,V=F+(D<<16&4294967295|D>>>16),D=R+(V^F^I)+O[2]+3299628645&4294967295,R=V+(D<<23&4294967295|D>>>9),D=I+(V^(R|~F))+O[0]+4096336452&4294967295,I=R+(D<<6&4294967295|D>>>26),D=F+(R^(I|~V))+O[7]+1126891415&4294967295,F=I+(D<<10&4294967295|D>>>22),D=V+(I^(F|~R))+O[14]+2878612391&4294967295,V=F+(D<<15&4294967295|D>>>17),D=R+(F^(V|~I))+O[5]+4237533241&4294967295,R=V+(D<<21&4294967295|D>>>11),D=I+(V^(R|~F))+O[12]+1700485571&4294967295,I=R+(D<<6&4294967295|D>>>26),D=F+(R^(I|~V))+O[3]+2399980690&4294967295,F=I+(D<<10&4294967295|D>>>22),D=V+(I^(F|~R))+O[10]+4293915773&4294967295,V=F+(D<<15&4294967295|D>>>17),D=R+(F^(V|~I))+O[1]+2240044497&4294967295,R=V+(D<<21&4294967295|D>>>11),D=I+(V^(R|~F))+O[8]+1873313359&4294967295,I=R+(D<<6&4294967295|D>>>26),D=F+(R^(I|~V))+O[15]+4264355552&4294967295,F=I+(D<<10&4294967295|D>>>22),D=V+(I^(F|~R))+O[6]+2734768916&4294967295,V=F+(D<<15&4294967295|D>>>17),D=R+(F^(V|~I))+O[13]+1309151649&4294967295,R=V+(D<<21&4294967295|D>>>11),D=I+(V^(R|~F))+O[4]+4149444226&4294967295,I=R+(D<<6&4294967295|D>>>26),D=F+(R^(I|~V))+O[11]+3174756917&4294967295,F=I+(D<<10&4294967295|D>>>22),D=V+(I^(F|~R))+O[2]+718787259&4294967295,V=F+(D<<15&4294967295|D>>>17),D=R+(F^(V|~I))+O[9]+3951481745&4294967295,P.g[0]=P.g[0]+I&4294967295,P.g[1]=P.g[1]+(V+(D<<21&4294967295|D>>>11))&4294967295,P.g[2]=P.g[2]+V&4294967295,P.g[3]=P.g[3]+F&4294967295}i.prototype.u=function(P,I){I===void 0&&(I=P.length);for(var R=I-this.blockSize,O=this.B,V=this.h,F=0;F<I;){if(V==0)for(;F<=R;)a(this,P,F),F+=this.blockSize;if(typeof P=="string"){for(;F<I;)if(O[V++]=P.charCodeAt(F++),V==this.blockSize){a(this,O),V=0;break}}else for(;F<I;)if(O[V++]=P[F++],V==this.blockSize){a(this,O),V=0;break}}this.h=V,this.o+=I},i.prototype.v=function(){var P=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);P[0]=128;for(var I=1;I<P.length-8;++I)P[I]=0;var R=8*this.o;for(I=P.length-8;I<P.length;++I)P[I]=R&255,R/=256;for(this.u(P),P=Array(16),I=R=0;4>I;++I)for(var O=0;32>O;O+=8)P[R++]=this.g[I]>>>O&255;return P};function l(P,I){var R=d;return Object.prototype.hasOwnProperty.call(R,P)?R[P]:R[P]=I(P)}function c(P,I){this.h=I;for(var R=[],O=!0,V=P.length-1;0<=V;V--){var F=P[V]|0;O&&F==I||(R[V]=F,O=!1)}this.g=R}var d={};function m(P){return-128<=P&&128>P?l(P,function(I){return new c([I|0],0>I?-1:0)}):new c([P|0],0>P?-1:0)}function p(P){if(isNaN(P)||!isFinite(P))return T;if(0>P)return U(p(-P));for(var I=[],R=1,O=0;P>=R;O++)I[O]=P/R|0,R*=4294967296;return new c(I,0)}function _(P,I){if(P.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(P.charAt(0)=="-")return U(_(P.substring(1),I));if(0<=P.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=p(Math.pow(I,8)),O=T,V=0;V<P.length;V+=8){var F=Math.min(8,P.length-V),D=parseInt(P.substring(V,V+F),I);8>F?(F=p(Math.pow(I,F)),O=O.j(F).add(p(D))):(O=O.j(R),O=O.add(p(D)))}return O}var T=m(0),A=m(1),S=m(16777216);n=c.prototype,n.m=function(){if(q(this))return-U(this).m();for(var P=0,I=1,R=0;R<this.g.length;R++){var O=this.i(R);P+=(0<=O?O:4294967296+O)*I,I*=4294967296}return P},n.toString=function(P){if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(N(this))return"0";if(q(this))return"-"+U(this).toString(P);for(var I=p(Math.pow(P,6)),R=this,O="";;){var V=he(R,I).g;R=$(R,V.j(I));var F=((0<R.g.length?R.g[0]:R.h)>>>0).toString(P);if(R=V,N(R))return F+O;for(;6>F.length;)F="0"+F;O=F+O}},n.i=function(P){return 0>P?0:P<this.g.length?this.g[P]:this.h};function N(P){if(P.h!=0)return!1;for(var I=0;I<P.g.length;I++)if(P.g[I]!=0)return!1;return!0}function q(P){return P.h==-1}n.l=function(P){return P=$(this,P),q(P)?-1:N(P)?0:1};function U(P){for(var I=P.g.length,R=[],O=0;O<I;O++)R[O]=~P.g[O];return new c(R,~P.h).add(A)}n.abs=function(){return q(this)?U(this):this},n.add=function(P){for(var I=Math.max(this.g.length,P.g.length),R=[],O=0,V=0;V<=I;V++){var F=O+(this.i(V)&65535)+(P.i(V)&65535),D=(F>>>16)+(this.i(V)>>>16)+(P.i(V)>>>16);O=D>>>16,F&=65535,D&=65535,R[V]=D<<16|F}return new c(R,R[R.length-1]&-2147483648?-1:0)};function $(P,I){return P.add(U(I))}n.j=function(P){if(N(this)||N(P))return T;if(q(this))return q(P)?U(this).j(U(P)):U(U(this).j(P));if(q(P))return U(this.j(U(P)));if(0>this.l(S)&&0>P.l(S))return p(this.m()*P.m());for(var I=this.g.length+P.g.length,R=[],O=0;O<2*I;O++)R[O]=0;for(O=0;O<this.g.length;O++)for(var V=0;V<P.g.length;V++){var F=this.i(O)>>>16,D=this.i(O)&65535,Qt=P.i(V)>>>16,yt=P.i(V)&65535;R[2*O+2*V]+=D*yt,ie(R,2*O+2*V),R[2*O+2*V+1]+=F*yt,ie(R,2*O+2*V+1),R[2*O+2*V+1]+=D*Qt,ie(R,2*O+2*V+1),R[2*O+2*V+2]+=F*Qt,ie(R,2*O+2*V+2)}for(O=0;O<I;O++)R[O]=R[2*O+1]<<16|R[2*O];for(O=I;O<2*I;O++)R[O]=0;return new c(R,0)};function ie(P,I){for(;(P[I]&65535)!=P[I];)P[I+1]+=P[I]>>>16,P[I]&=65535,I++}function ne(P,I){this.g=P,this.h=I}function he(P,I){if(N(I))throw Error("division by zero");if(N(P))return new ne(T,T);if(q(P))return I=he(U(P),I),new ne(U(I.g),U(I.h));if(q(I))return I=he(P,U(I)),new ne(U(I.g),I.h);if(30<P.g.length){if(q(P)||q(I))throw Error("slowDivide_ only works with positive integers.");for(var R=A,O=I;0>=O.l(P);)R=ce(R),O=ce(O);var V=Te(R,1),F=Te(O,1);for(O=Te(O,2),R=Te(R,2);!N(O);){var D=F.add(O);0>=D.l(P)&&(V=V.add(R),F=D),O=Te(O,1),R=Te(R,1)}return I=$(P,V.j(I)),new ne(V,I)}for(V=T;0<=P.l(I);){for(R=Math.max(1,Math.floor(P.m()/I.m())),O=Math.ceil(Math.log(R)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),F=p(R),D=F.j(I);q(D)||0<D.l(P);)R-=O,F=p(R),D=F.j(I);N(F)&&(F=A),V=V.add(F),P=$(P,D)}return new ne(V,P)}n.A=function(P){return he(this,P).h},n.and=function(P){for(var I=Math.max(this.g.length,P.g.length),R=[],O=0;O<I;O++)R[O]=this.i(O)&P.i(O);return new c(R,this.h&P.h)},n.or=function(P){for(var I=Math.max(this.g.length,P.g.length),R=[],O=0;O<I;O++)R[O]=this.i(O)|P.i(O);return new c(R,this.h|P.h)},n.xor=function(P){for(var I=Math.max(this.g.length,P.g.length),R=[],O=0;O<I;O++)R[O]=this.i(O)^P.i(O);return new c(R,this.h^P.h)};function ce(P){for(var I=P.g.length+1,R=[],O=0;O<I;O++)R[O]=P.i(O)<<1|P.i(O-1)>>>31;return new c(R,P.h)}function Te(P,I){var R=I>>5;I%=32;for(var O=P.g.length-R,V=[],F=0;F<O;F++)V[F]=0<I?P.i(F+R)>>>I|P.i(F+R+1)<<32-I:P.i(F+R);return new c(V,P.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,ww=i,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=p,c.fromString=_,vs=c}).apply(typeof V0<"u"?V0:typeof self<"u"?self:typeof window<"u"?window:{});var of=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Sw,Mu,Rw,Tf,Sg,Iw,Cw,Nw;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,y,v){return h==Array.prototype||h==Object.prototype||(h[y]=v.value),h};function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof of=="object"&&of];for(var y=0;y<h.length;++y){var v=h[y];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var i=t(this);function a(h,y){if(y)e:{var v=i;h=h.split(".");for(var w=0;w<h.length-1;w++){var j=h[w];if(!(j in v))break e;v=v[j]}h=h[h.length-1],w=v[h],y=y(w),y!=w&&y!=null&&e(v,h,{configurable:!0,writable:!0,value:y})}}function l(h,y){h instanceof String&&(h+="");var v=0,w=!1,j={next:function(){if(!w&&v<h.length){var Q=v++;return{value:y(Q,h[Q]),done:!1}}return w=!0,{done:!0,value:void 0}}};return j[Symbol.iterator]=function(){return j},j}a("Array.prototype.values",function(h){return h||function(){return l(this,function(y,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},d=this||self;function m(h){var y=typeof h;return y=y!="object"?y:h?Array.isArray(h)?"array":y:"null",y=="array"||y=="object"&&typeof h.length=="number"}function p(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function _(h,y,v){return h.call.apply(h.bind,arguments)}function T(h,y,v){if(!h)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var j=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(j,w),h.apply(y,j)}}return function(){return h.apply(y,arguments)}}function A(h,y,v){return A=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:T,A.apply(null,arguments)}function S(h,y){var v=Array.prototype.slice.call(arguments,1);return function(){var w=v.slice();return w.push.apply(w,arguments),h.apply(this,w)}}function N(h,y){function v(){}v.prototype=y.prototype,h.aa=y.prototype,h.prototype=new v,h.prototype.constructor=h,h.Qb=function(w,j,Q){for(var ae=Array(arguments.length-2),je=2;je<arguments.length;je++)ae[je-2]=arguments[je];return y.prototype[j].apply(w,ae)}}function q(h){const y=h.length;if(0<y){const v=Array(y);for(let w=0;w<y;w++)v[w]=h[w];return v}return[]}function U(h,y){for(let v=1;v<arguments.length;v++){const w=arguments[v];if(m(w)){const j=h.length||0,Q=w.length||0;h.length=j+Q;for(let ae=0;ae<Q;ae++)h[j+ae]=w[ae]}else h.push(w)}}class ${constructor(y,v){this.i=y,this.j=v,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function ie(h){return/^[\s\xa0]*$/.test(h)}function ne(){var h=d.navigator;return h&&(h=h.userAgent)?h:""}function he(h){return he[" "](h),h}he[" "]=function(){};var ce=ne().indexOf("Gecko")!=-1&&!(ne().toLowerCase().indexOf("webkit")!=-1&&ne().indexOf("Edge")==-1)&&!(ne().indexOf("Trident")!=-1||ne().indexOf("MSIE")!=-1)&&ne().indexOf("Edge")==-1;function Te(h,y,v){for(const w in h)y.call(v,h[w],w,h)}function P(h,y){for(const v in h)y.call(void 0,h[v],v,h)}function I(h){const y={};for(const v in h)y[v]=h[v];return y}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(h,y){let v,w;for(let j=1;j<arguments.length;j++){w=arguments[j];for(v in w)h[v]=w[v];for(let Q=0;Q<R.length;Q++)v=R[Q],Object.prototype.hasOwnProperty.call(w,v)&&(h[v]=w[v])}}function V(h){var y=1;h=h.split(":");const v=[];for(;0<y&&h.length;)v.push(h.shift()),y--;return h.length&&v.push(h.join(":")),v}function F(h){d.setTimeout(()=>{throw h},0)}function D(){var h=$e;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class Qt{constructor(){this.h=this.g=null}add(y,v){const w=yt.get();w.set(y,v),this.h?this.h.next=w:this.g=w,this.h=w}}var yt=new $(()=>new X,h=>h.reset());class X{constructor(){this.next=this.g=this.h=null}set(y,v){this.h=y,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let oe,ge=!1,$e=new Qt,M=()=>{const h=d.Promise.resolve(void 0);oe=()=>{h.then(te)}};var te=()=>{for(var h;h=D();){try{h.h.call(h.g)}catch(v){F(v)}var y=yt;y.j(h),100>y.h&&(y.h++,h.next=y.g,y.g=h)}ge=!1};function le(){this.s=this.s,this.C=this.C}le.prototype.s=!1,le.prototype.ma=function(){this.s||(this.s=!0,this.N())},le.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function re(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}re.prototype.h=function(){this.defaultPrevented=!0};var ye=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const v=()=>{};d.addEventListener("test",v,y),d.removeEventListener("test",v,y)}catch{}return h}();function Me(h,y){if(re.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var v=this.type=h.type,w=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget){if(ce){e:{try{he(y.nodeName);var j=!0;break e}catch{}j=!1}j||(y=null)}}else v=="mouseover"?y=h.fromElement:v=="mouseout"&&(y=h.toElement);this.relatedTarget=y,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:Re[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&Me.aa.h.call(this)}}N(Me,re);var Re={2:"touch",3:"pen",4:"mouse"};Me.prototype.h=function(){Me.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Ft="closure_listenable_"+(1e6*Math.random()|0),at=0;function Tr(h,y,v,w,j){this.listener=h,this.proxy=null,this.src=y,this.type=v,this.capture=!!w,this.ha=j,this.key=++at,this.da=this.fa=!1}function Vi(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Zr(h){this.src=h,this.g={},this.h=0}Zr.prototype.add=function(h,y,v,w,j){var Q=h.toString();h=this.g[Q],h||(h=this.g[Q]=[],this.h++);var ae=qs(h,y,w,j);return-1<ae?(y=h[ae],v||(y.fa=!1)):(y=new Tr(y,this.src,Q,!!w,j),y.fa=v,h.push(y)),y};function Bs(h,y){var v=y.type;if(v in h.g){var w=h.g[v],j=Array.prototype.indexOf.call(w,y,void 0),Q;(Q=0<=j)&&Array.prototype.splice.call(w,j,1),Q&&(Vi(y),h.g[v].length==0&&(delete h.g[v],h.h--))}}function qs(h,y,v,w){for(var j=0;j<h.length;++j){var Q=h[j];if(!Q.da&&Q.listener==y&&Q.capture==!!v&&Q.ha==w)return j}return-1}var Hs="closure_lm_"+(1e6*Math.random()|0),_l={};function xc(h,y,v,w,j){if(Array.isArray(y)){for(var Q=0;Q<y.length;Q++)xc(h,y[Q],v,w,j);return null}return v=Vc(v),h&&h[Ft]?h.K(y,v,p(w)?!!w.capture:!1,j):jn(h,y,v,!1,w,j)}function jn(h,y,v,w,j,Q){if(!y)throw Error("Invalid event type");var ae=p(j)?!!j.capture:!!j,je=Ka(h);if(je||(h[Hs]=je=new Zr(h)),v=je.add(y,v,w,ae,Q),v.proxy)return v;if(w=zd(),v.proxy=w,w.src=h,w.listener=v,h.addEventListener)ye||(j=ae),j===void 0&&(j=!1),h.addEventListener(y.toString(),w,j);else if(h.attachEvent)h.attachEvent(Gs(y.toString()),w);else if(h.addListener&&h.removeListener)h.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return v}function zd(){function h(v){return y.call(h.src,h.listener,v)}const y=Fd;return h}function vl(h,y,v,w,j){if(Array.isArray(y))for(var Q=0;Q<y.length;Q++)vl(h,y[Q],v,w,j);else w=p(w)?!!w.capture:!!w,v=Vc(v),h&&h[Ft]?(h=h.i,y=String(y).toString(),y in h.g&&(Q=h.g[y],v=qs(Q,v,w,j),-1<v&&(Vi(Q[v]),Array.prototype.splice.call(Q,v,1),Q.length==0&&(delete h.g[y],h.h--)))):h&&(h=Ka(h))&&(y=h.g[y.toString()],h=-1,y&&(h=qs(y,v,w,j)),(v=-1<h?y[h]:null)&&$a(v))}function $a(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[Ft])Bs(y.i,h);else{var v=h.type,w=h.proxy;y.removeEventListener?y.removeEventListener(v,w,h.capture):y.detachEvent?y.detachEvent(Gs(v),w):y.addListener&&y.removeListener&&y.removeListener(w),(v=Ka(y))?(Bs(v,h),v.h==0&&(v.src=null,y[Hs]=null)):Vi(h)}}}function Gs(h){return h in _l?_l[h]:_l[h]="on"+h}function Fd(h,y){if(h.da)h=!0;else{y=new Me(y,this);var v=h.listener,w=h.ha||h.src;h.fa&&$a(h),h=v.call(w,y)}return h}function Ka(h){return h=h[Hs],h instanceof Zr?h:null}var El="__closure_events_fn_"+(1e9*Math.random()>>>0);function Vc(h){return typeof h=="function"?h:(h[El]||(h[El]=function(y){return h.handleEvent(y)}),h[El])}function _t(){le.call(this),this.i=new Zr(this),this.M=this,this.F=null}N(_t,le),_t.prototype[Ft]=!0,_t.prototype.removeEventListener=function(h,y,v,w){vl(this,h,y,v,w)};function Xe(h,y){var v,w=h.F;if(w)for(v=[];w;w=w.F)v.push(w);if(h=h.M,w=y.type||y,typeof y=="string")y=new re(y,h);else if(y instanceof re)y.target=y.target||h;else{var j=y;y=new re(w,h),O(y,j)}if(j=!0,v)for(var Q=v.length-1;0<=Q;Q--){var ae=y.g=v[Q];j=Rn(ae,w,!0,y)&&j}if(ae=y.g=h,j=Rn(ae,w,!0,y)&&j,j=Rn(ae,w,!1,y)&&j,v)for(Q=0;Q<v.length;Q++)ae=y.g=v[Q],j=Rn(ae,w,!1,y)&&j}_t.prototype.N=function(){if(_t.aa.N.call(this),this.i){var h=this.i,y;for(y in h.g){for(var v=h.g[y],w=0;w<v.length;w++)Vi(v[w]);delete h.g[y],h.h--}}this.F=null},_t.prototype.K=function(h,y,v,w){return this.i.add(String(h),y,!1,v,w)},_t.prototype.L=function(h,y,v,w){return this.i.add(String(h),y,!0,v,w)};function Rn(h,y,v,w){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();for(var j=!0,Q=0;Q<y.length;++Q){var ae=y[Q];if(ae&&!ae.da&&ae.capture==v){var je=ae.listener,xt=ae.ha||ae.src;ae.fa&&Bs(h.i,ae),j=je.call(xt,w)!==!1&&j}}return j&&!w.defaultPrevented}function sn(h,y,v){if(typeof h=="function")v&&(h=A(h,v));else if(h&&typeof h.handleEvent=="function")h=A(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:d.setTimeout(h,y||0)}function kc(h){h.g=sn(()=>{h.g=null,h.i&&(h.i=!1,kc(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class jd extends le{constructor(y,v){super(),this.m=y,this.l=v,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:kc(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function $s(h){le.call(this),this.h=h,this.g={}}N($s,le);var Ks=[];function Qs(h){Te(h.g,function(y,v){this.g.hasOwnProperty(v)&&$a(y)},h),h.g={}}$s.prototype.N=function(){$s.aa.N.call(this),Qs(this)},$s.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var sr=d.JSON.stringify,Qa=d.JSON.parse,Ys=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function Tl(){}Tl.prototype.h=null;function Al(h){return h.h||(h.h=h.i())}function bl(){}var Jr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ei(){re.call(this,"d")}N(ei,re);function wl(){re.call(this,"c")}N(wl,re);var Ar={},Sl=null;function ki(){return Sl=Sl||new _t}Ar.La="serverreachability";function Ya(h){re.call(this,Ar.La,h)}N(Ya,re);function Li(h){const y=ki();Xe(y,new Ya(y))}Ar.STAT_EVENT="statevent";function Lc(h,y){re.call(this,Ar.STAT_EVENT,h),this.stat=y}N(Lc,re);function ct(h){const y=ki();Xe(y,new Lc(y,h))}Ar.Ma="timingevent";function Pt(h,y){re.call(this,Ar.Ma,h),this.size=y}N(Pt,re);function Rt(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},y)}function Bn(){this.g=!0}Bn.prototype.xa=function(){this.g=!1};function Rl(h,y,v,w,j,Q){h.info(function(){if(h.g)if(Q)for(var ae="",je=Q.split("&"),xt=0;xt<je.length;xt++){var Be=je[xt].split("=");if(1<Be.length){var Bt=Be[0];Be=Be[1];var Vt=Bt.split("_");ae=2<=Vt.length&&Vt[1]=="type"?ae+(Bt+"="+Be+"&"):ae+(Bt+"=redacted&")}}else ae=null;else ae=Q;return"XMLHTTP REQ ("+w+") [attempt "+j+"]: "+y+`
`+v+`
`+ae})}function Bd(h,y,v,w,j,Q,ae){h.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+j+"]: "+y+`
`+v+`
`+Q+" "+ae})}function Ui(h,y,v,w){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+Xs(h,v)+(w?" "+w:"")})}function Uc(h,y){h.info(function(){return"TIMEOUT: "+y})}Bn.prototype.info=function(){};function Xs(h,y){if(!h.g)return y;if(!y)return null;try{var v=JSON.parse(y);if(v){for(h=0;h<v.length;h++)if(Array.isArray(v[h])){var w=v[h];if(!(2>w.length)){var j=w[1];if(Array.isArray(j)&&!(1>j.length)){var Q=j[0];if(Q!="noop"&&Q!="stop"&&Q!="close")for(var ae=1;ae<j.length;ae++)j[ae]=""}}}}return sr(v)}catch{return y}}var zi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ti={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},br;function wr(){}N(wr,Tl),wr.prototype.g=function(){return new XMLHttpRequest},wr.prototype.i=function(){return{}},br=new wr;function pn(h,y,v,w){this.j=h,this.i=y,this.l=v,this.R=w||1,this.U=new $s(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new At}function At(){this.i=null,this.g="",this.h=!1}var Il={},Xa={};function ar(h,y,v){h.L=1,h.v=ta(In(y)),h.m=v,h.P=!0,ni(h,null)}function ni(h,y){h.F=Date.now(),Ws(h),h.A=In(h.v);var v=h.A,w=h.R;Array.isArray(w)||(w=[String(w)]),Pl(v.i,"t",w),h.C=0,v=h.j.J,h.h=new At,h.g=eh(h.j,v?y:null,!h.m),0<h.O&&(h.M=new jd(A(h.Y,h,h.g),h.O)),y=h.U,v=h.g,w=h.ca;var j="readystatechange";Array.isArray(j)||(j&&(Ks[0]=j.toString()),j=Ks);for(var Q=0;Q<j.length;Q++){var ae=xc(v,j[Q],w||y.handleEvent,!1,y.h||y);if(!ae)break;y.g[ae.key]=ae}y=h.H?I(h.H):{},h.m?(h.u||(h.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,y)):(h.u="GET",h.g.ea(h.A,h.u,null,y)),Li(),Rl(h.i,h.u,h.A,h.l,h.R,h.m)}pn.prototype.ca=function(h){h=h.target;const y=this.M;y&&$n(h)==3?y.j():this.Y(h)},pn.prototype.Y=function(h){try{if(h==this.g)e:{const Vt=$n(this.g);var y=this.g.Ba();const ci=this.g.Z();if(!(3>Vt)&&(Vt!=3||this.g&&(this.h.h||this.g.oa()||$c(this.g)))){this.J||Vt!=4||y==7||(y==8||0>=ci?Li(3):Li(2)),Fi(this);var v=this.g.Z();this.X=v;t:if(zc(this)){var w=$c(this.g);h="";var j=w.length,Q=$n(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Yt(this),Sr(this);var ae="";break t}this.h.i=new d.TextDecoder}for(y=0;y<j;y++)this.h.h=!0,h+=this.h.i.decode(w[y],{stream:!(Q&&y==j-1)});w.length=0,this.h.g+=h,this.C=0,ae=this.h.g}else ae=this.g.oa();if(this.o=v==200,Bd(this.i,this.u,this.A,this.l,this.R,Vt,v),this.o){if(this.T&&!this.K){t:{if(this.g){var je,xt=this.g;if((je=xt.g?xt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ie(je)){var Be=je;break t}}Be=null}if(v=Be)Ui(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Zs(this,v);else{this.o=!1,this.s=3,ct(12),Yt(this),Sr(this);break e}}if(this.P){v=!0;let Xt;for(;!this.J&&this.C<ae.length;)if(Xt=Fc(this,ae),Xt==Xa){Vt==4&&(this.s=4,ct(14),v=!1),Ui(this.i,this.l,null,"[Incomplete Response]");break}else if(Xt==Il){this.s=4,ct(15),Ui(this.i,this.l,ae,"[Invalid Chunk]"),v=!1;break}else Ui(this.i,this.l,Xt,null),Zs(this,Xt);if(zc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Vt!=4||ae.length!=0||this.h.h||(this.s=1,ct(16),v=!1),this.o=this.o&&v,!v)Ui(this.i,this.l,ae,"[Invalid Chunked Response]"),Yt(this),Sr(this);else if(0<ae.length&&!this.W){this.W=!0;var Bt=this.j;Bt.g==this&&Bt.ba&&!Bt.M&&(Bt.j.info("Great, no buffering proxy detected. Bytes received: "+ae.length),ua(Bt),Bt.M=!0,ct(11))}}else Ui(this.i,this.l,ae,null),Zs(this,ae);Vt==4&&Yt(this),this.o&&!this.J&&(Vt==4?Wc(this.j,this):(this.o=!1,Ws(this)))}else Kd(this.g),v==400&&0<ae.indexOf("Unknown SID")?(this.s=3,ct(12)):(this.s=0,ct(13)),Yt(this),Sr(this)}}}catch{}finally{}};function zc(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function Fc(h,y){var v=h.C,w=y.indexOf(`
`,v);return w==-1?Xa:(v=Number(y.substring(v,w)),isNaN(v)?Il:(w+=1,w+v>y.length?Xa:(y=y.slice(w,w+v),h.C=w+v,y)))}pn.prototype.cancel=function(){this.J=!0,Yt(this)};function Ws(h){h.S=Date.now()+h.I,jc(h,h.I)}function jc(h,y){if(h.B!=null)throw Error("WatchDog timer not null");h.B=Rt(A(h.ba,h),y)}function Fi(h){h.B&&(d.clearTimeout(h.B),h.B=null)}pn.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(Uc(this.i,this.A),this.L!=2&&(Li(),ct(17)),Yt(this),this.s=2,Sr(this)):jc(this,this.S-h)};function Sr(h){h.j.G==0||h.J||Wc(h.j,h)}function Yt(h){Fi(h);var y=h.M;y&&typeof y.ma=="function"&&y.ma(),h.M=null,Qs(h.U),h.g&&(y=h.g,h.g=null,y.abort(),y.ma())}function Zs(h,y){try{var v=h.j;if(v.G!=0&&(v.g==h||Cl(v.h,h))){if(!h.K&&Cl(v.h,h)&&v.G==3){try{var w=v.Da.g.parse(y)}catch{w=null}if(Array.isArray(w)&&w.length==3){var j=w;if(j[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<h.F)lo(v),ao(v);else break e;Ul(v),ct(18)}}else v.za=j[1],0<v.za-v.T&&37500>j[2]&&v.F&&v.v==0&&!v.C&&(v.C=Rt(A(v.Za,v),6e3));if(1>=Za(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else ui(v,11)}else if((h.K||v.g==h)&&lo(v),!ie(y))for(j=v.Da.g.parse(y),y=0;y<j.length;y++){let Be=j[y];if(v.T=Be[0],Be=Be[1],v.G==2)if(Be[0]=="c"){v.K=Be[1],v.ia=Be[2];const Bt=Be[3];Bt!=null&&(v.la=Bt,v.j.info("VER="+v.la));const Vt=Be[4];Vt!=null&&(v.Aa=Vt,v.j.info("SVER="+v.Aa));const ci=Be[5];ci!=null&&typeof ci=="number"&&0<ci&&(w=1.5*ci,v.L=w,v.j.info("backChannelRequestTimeoutMs_="+w)),w=v;const Xt=h.g;if(Xt){const Mr=Xt.g?Xt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Mr){var Q=w.h;Q.g||Mr.indexOf("spdy")==-1&&Mr.indexOf("quic")==-1&&Mr.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(Ja(Q,Q.h),Q.h=null))}if(w.D){const Fl=Xt.g?Xt.g.getResponseHeader("X-HTTP-Session-Id"):null;Fl&&(w.ya=Fl,et(w.I,w.D,Fl))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-h.F,v.j.info("Handshake RTT: "+v.R+"ms")),w=v;var ae=h;if(w.qa=Jc(w,w.J?w.ia:null,w.W),ae.K){gn(w.h,ae);var je=ae,xt=w.L;xt&&(je.I=xt),je.B&&(Fi(je),Ws(je)),w.g=ae}else Yc(w);0<v.i.length&&oo(v)}else Be[0]!="stop"&&Be[0]!="close"||ui(v,7);else v.G==3&&(Be[0]=="stop"||Be[0]=="close"?Be[0]=="stop"?ui(v,7):kl(v):Be[0]!="noop"&&v.l&&v.l.ta(Be),v.v=0)}}Li(4)}catch{}}var Bc=class{constructor(h,y){this.g=h,this.map=y}};function ri(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Wa(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Za(h){return h.h?1:h.g?h.g.size:0}function Cl(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function Ja(h,y){h.g?h.g.add(y):h.h=y}function gn(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}ri.prototype.cancel=function(){if(this.i=Nl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Nl(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const v of h.g.values())y=y.concat(v.D);return y}return q(h.i)}function qd(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(m(h)){for(var y=[],v=h.length,w=0;w<v;w++)y.push(h[w]);return y}y=[],v=0;for(w in h)y[v++]=h[w];return y}function eo(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(m(h)||typeof h=="string"){var y=[];h=h.length;for(var v=0;v<h;v++)y.push(v);return y}y=[],v=0;for(const w in h)y[v++]=w;return y}}}function Dl(h,y){if(h.forEach&&typeof h.forEach=="function")h.forEach(y,void 0);else if(m(h)||typeof h=="string")Array.prototype.forEach.call(h,y,void 0);else for(var v=eo(h),w=qd(h),j=w.length,Q=0;Q<j;Q++)y.call(void 0,w[Q],v&&v[Q],h)}var Js=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Hd(h,y){if(h){h=h.split("&");for(var v=0;v<h.length;v++){var w=h[v].indexOf("="),j=null;if(0<=w){var Q=h[v].substring(0,w);j=h[v].substring(w+1)}else Q=h[v];y(Q,j?decodeURIComponent(j.replace(/\+/g," ")):"")}}}function It(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof It){this.h=h.h,ea(this,h.j),this.o=h.o,this.g=h.g,ji(this,h.s),this.l=h.l;var y=h.i,v=new si;v.i=y.i,y.g&&(v.g=new Map(y.g),v.h=y.h),ii(this,v),this.m=h.m}else h&&(y=String(h).match(Js))?(this.h=!1,ea(this,y[1]||"",!0),this.o=qn(y[2]||""),this.g=qn(y[3]||"",!0),ji(this,y[4]),this.l=qn(y[5]||"",!0),ii(this,y[6]||"",!0),this.m=qn(y[7]||"")):(this.h=!1,this.i=new si(null,this.h))}It.prototype.toString=function(){var h=[],y=this.j;y&&h.push(na(y,Ol,!0),":");var v=this.g;return(v||y=="file")&&(h.push("//"),(y=this.o)&&h.push(na(y,Ol,!0),"@"),h.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&h.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&h.push("/"),h.push(na(v,v.charAt(0)=="/"?Gd:Ml,!0))),(v=this.i.toString())&&h.push("?",v),(v=this.m)&&h.push("#",na(v,to)),h.join("")};function In(h){return new It(h)}function ea(h,y,v){h.j=v?qn(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function ji(h,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);h.s=y}else h.s=null}function ii(h,y,v){y instanceof si?(h.i=y,Hc(h.i,h.h)):(v||(y=na(y,$d)),h.i=new si(y,h.h))}function et(h,y,v){h.i.set(y,v)}function ta(h){return et(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function qn(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function na(h,y,v){return typeof h=="string"?(h=encodeURI(h).replace(y,qc),v&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function qc(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Ol=/[#\/\?@]/g,Ml=/[#\?:]/g,Gd=/[#\?]/g,$d=/[#\?@]/g,to=/#/g;function si(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function Hn(h){h.g||(h.g=new Map,h.h=0,h.i&&Hd(h.i,function(y,v){h.add(decodeURIComponent(y.replace(/\+/g," ")),v)}))}n=si.prototype,n.add=function(h,y){Hn(this),this.i=null,h=Rr(this,h);var v=this.g.get(h);return v||this.g.set(h,v=[]),v.push(y),this.h+=1,this};function ai(h,y){Hn(h),y=Rr(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function oi(h,y){return Hn(h),y=Rr(h,y),h.g.has(y)}n.forEach=function(h,y){Hn(this),this.g.forEach(function(v,w){v.forEach(function(j){h.call(y,j,w,this)},this)},this)},n.na=function(){Hn(this);const h=Array.from(this.g.values()),y=Array.from(this.g.keys()),v=[];for(let w=0;w<y.length;w++){const j=h[w];for(let Q=0;Q<j.length;Q++)v.push(y[w])}return v},n.V=function(h){Hn(this);let y=[];if(typeof h=="string")oi(this,h)&&(y=y.concat(this.g.get(Rr(this,h))));else{h=Array.from(this.g.values());for(let v=0;v<h.length;v++)y=y.concat(h[v])}return y},n.set=function(h,y){return Hn(this),this.i=null,h=Rr(this,h),oi(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},n.get=function(h,y){return h?(h=this.V(h),0<h.length?String(h[0]):y):y};function Pl(h,y,v){ai(h,y),0<v.length&&(h.i=null,h.g.set(Rr(h,y),q(v)),h.h+=v.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(var v=0;v<y.length;v++){var w=y[v];const Q=encodeURIComponent(String(w)),ae=this.V(w);for(w=0;w<ae.length;w++){var j=Q;ae[w]!==""&&(j+="="+encodeURIComponent(String(ae[w]))),h.push(j)}}return this.i=h.join("&")};function Rr(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function Hc(h,y){y&&!h.j&&(Hn(h),h.i=null,h.g.forEach(function(v,w){var j=w.toLowerCase();w!=j&&(ai(this,w),Pl(this,j,v))},h)),h.j=y}function ra(h,y){const v=new Bn;if(d.Image){const w=new Image;w.onload=S(Gn,v,"TestLoadImage: loaded",!0,y,w),w.onerror=S(Gn,v,"TestLoadImage: error",!1,y,w),w.onabort=S(Gn,v,"TestLoadImage: abort",!1,y,w),w.ontimeout=S(Gn,v,"TestLoadImage: timeout",!1,y,w),d.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=h}else y(!1)}function or(h,y){const v=new Bn,w=new AbortController,j=setTimeout(()=>{w.abort(),Gn(v,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:w.signal}).then(Q=>{clearTimeout(j),Q.ok?Gn(v,"TestPingServer: ok",!0,y):Gn(v,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(j),Gn(v,"TestPingServer: error",!1,y)})}function Gn(h,y,v,w,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),w(v)}catch{}}function ia(){this.g=new Ys}function Ir(h,y,v){const w=v||"";try{Dl(h,function(j,Q){let ae=j;p(j)&&(ae=sr(j)),y.push(w+Q+"="+encodeURIComponent(ae))})}catch(j){throw y.push(w+"type="+encodeURIComponent("_badmap")),j}}function Bi(h){this.l=h.Ub||null,this.j=h.eb||!1}N(Bi,Tl),Bi.prototype.g=function(){return new li(this.l,this.j)},Bi.prototype.i=function(h){return function(){return h}}({});function li(h,y){_t.call(this),this.D=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}N(li,_t),n=li.prototype,n.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=y,this.readyState=1,Nr(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(y.body=h),(this.D||d).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Cr(this)),this.readyState=0},n.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Nr(this)),this.g&&(this.readyState=3,Nr(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;xl(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function xl(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}n.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?Cr(this):Nr(this),this.readyState==3&&xl(this)}},n.Ra=function(h){this.g&&(this.response=this.responseText=h,Cr(this))},n.Qa=function(h){this.g&&(this.response=h,Cr(this))},n.ga=function(){this.g&&Cr(this)};function Cr(h){h.readyState=4,h.l=null,h.j=null,h.v=null,Nr(h)}n.setRequestHeader=function(h,y){this.u.append(h,y)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var v=y.next();!v.done;)v=v.value,h.push(v[0]+": "+v[1]),v=y.next();return h.join(`\r
`)};function Nr(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(li.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Vl(h){let y="";return Te(h,function(v,w){y+=w,y+=":",y+=v,y+=`\r
`}),y}function jt(h,y,v){e:{for(w in v){var w=!1;break e}w=!0}w||(v=Vl(v),typeof h=="string"?v!=null&&encodeURIComponent(String(v)):et(h,y,v))}function Qe(h){_t.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}N(Qe,_t);var no=/^https?$/i,sa=["POST","PUT"];n=Qe.prototype,n.Ha=function(h){this.J=h},n.ea=function(h,y,v,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():br.g(),this.v=this.o?Al(this.o):Al(br),this.g.onreadystatechange=A(this.Ea,this);try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(Q){Gc(this,Q);return}if(h=v||"",v=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var j in w)v.set(j,w[j]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const Q of w.keys())v.set(Q,w.get(Q));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(v.keys()).find(Q=>Q.toLowerCase()=="content-type"),j=d.FormData&&h instanceof d.FormData,!(0<=Array.prototype.indexOf.call(sa,y,void 0))||w||j||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,ae]of v)this.g.setRequestHeader(Q,ae);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{aa(this),this.u=!0,this.g.send(h),this.u=!1}catch(Q){Gc(this,Q)}};function Gc(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.m=5,ro(h),Dr(h)}function ro(h){h.A||(h.A=!0,Xe(h,"complete"),Xe(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,Xe(this,"complete"),Xe(this,"abort"),Dr(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Dr(this,!0)),Qe.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?io(this):this.bb())},n.bb=function(){io(this)};function io(h){if(h.h&&typeof c<"u"&&(!h.v[1]||$n(h)!=4||h.Z()!=2)){if(h.u&&$n(h)==4)sn(h.Ea,0,h);else if(Xe(h,"readystatechange"),$n(h)==4){h.h=!1;try{const ae=h.Z();e:switch(ae){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var v;if(!(v=y)){var w;if(w=ae===0){var j=String(h.D).match(Js)[1]||null;!j&&d.self&&d.self.location&&(j=d.self.location.protocol.slice(0,-1)),w=!no.test(j?j.toLowerCase():"")}v=w}if(v)Xe(h,"complete"),Xe(h,"success");else{h.m=6;try{var Q=2<$n(h)?h.g.statusText:""}catch{Q=""}h.l=Q+" ["+h.Z()+"]",ro(h)}}finally{Dr(h)}}}}function Dr(h,y){if(h.g){aa(h);const v=h.g,w=h.v[0]?()=>{}:null;h.g=null,h.v=null,y||Xe(h,"ready");try{v.onreadystatechange=w}catch{}}}function aa(h){h.I&&(d.clearTimeout(h.I),h.I=null)}n.isActive=function(){return!!this.g};function $n(h){return h.g?h.g.readyState:0}n.Z=function(){try{return 2<$n(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),Qa(y)}};function $c(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Kd(h){const y={};h=(h.g&&2<=$n(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<h.length;w++){if(ie(h[w]))continue;var v=V(h[w]);const j=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const Q=y[j]||[];y[j]=Q,Q.push(v)}P(y,function(w){return w.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function oa(h,y,v){return v&&v.internalChannelParams&&v.internalChannelParams[h]||y}function so(h){this.Aa=0,this.i=[],this.j=new Bn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=oa("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=oa("baseRetryDelayMs",5e3,h),this.cb=oa("retryDelaySeedMs",1e4,h),this.Wa=oa("forwardChannelMaxRetries",2,h),this.wa=oa("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new ri(h&&h.concurrentRequestLimit),this.Da=new ia,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=so.prototype,n.la=8,n.G=1,n.connect=function(h,y,v,w){ct(0),this.W=h,this.H=y||{},v&&w!==void 0&&(this.H.OSID=v,this.H.OAID=w),this.F=this.X,this.I=Jc(this,null,this.W),oo(this)};function kl(h){if(Kc(h),h.G==3){var y=h.U++,v=In(h.I);if(et(v,"SID",h.K),et(v,"RID",y),et(v,"TYPE","terminate"),la(h,v),y=new pn(h,h.j,y),y.L=2,y.v=ta(In(v)),v=!1,d.navigator&&d.navigator.sendBeacon)try{v=d.navigator.sendBeacon(y.v.toString(),"")}catch{}!v&&d.Image&&(new Image().src=y.v,v=!0),v||(y.g=eh(y.j,null),y.g.ea(y.v)),y.F=Date.now(),Ws(y)}Zc(h)}function ao(h){h.g&&(ua(h),h.g.cancel(),h.g=null)}function Kc(h){ao(h),h.u&&(d.clearTimeout(h.u),h.u=null),lo(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&d.clearTimeout(h.s),h.s=null)}function oo(h){if(!Wa(h.h)&&!h.s){h.s=!0;var y=h.Ga;oe||M(),ge||(oe(),ge=!0),$e.add(y,h),h.B=0}}function Qd(h,y){return Za(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=y.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=Rt(A(h.Ga,h,y),zl(h,h.B)),h.B++,!0)}n.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const j=new pn(this,this.j,h);let Q=this.o;if(this.S&&(Q?(Q=I(Q),O(Q,this.S)):Q=this.S),this.m!==null||this.O||(j.H=Q,Q=null),this.P)e:{for(var y=0,v=0;v<this.i.length;v++){t:{var w=this.i[v];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(y+=w,4096<y){y=v;break e}if(y===4096||v===this.i.length-1){y=v+1;break e}}y=1e3}else y=1e3;y=Qc(this,j,y),v=In(this.I),et(v,"RID",h),et(v,"CVER",22),this.D&&et(v,"X-HTTP-Session-Id",this.D),la(this,v),Q&&(this.O?y="headers="+encodeURIComponent(String(Vl(Q)))+"&"+y:this.m&&jt(v,this.m,Q)),Ja(this.h,j),this.Ua&&et(v,"TYPE","init"),this.P?(et(v,"$req",y),et(v,"SID","null"),j.T=!0,ar(j,v,null)):ar(j,v,y),this.G=2}}else this.G==3&&(h?Ll(this,h):this.i.length==0||Wa(this.h)||Ll(this))};function Ll(h,y){var v;y?v=y.l:v=h.U++;const w=In(h.I);et(w,"SID",h.K),et(w,"RID",v),et(w,"AID",h.T),la(h,w),h.m&&h.o&&jt(w,h.m,h.o),v=new pn(h,h.j,v,h.B+1),h.m===null&&(v.H=h.o),y&&(h.i=y.D.concat(h.i)),y=Qc(h,v,1e3),v.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),Ja(h.h,v),ar(v,w,y)}function la(h,y){h.H&&Te(h.H,function(v,w){et(y,w,v)}),h.l&&Dl({},function(v,w){et(y,w,v)})}function Qc(h,y,v){v=Math.min(h.i.length,v);var w=h.l?A(h.l.Na,h.l,h):null;e:{var j=h.i;let Q=-1;for(;;){const ae=["count="+v];Q==-1?0<v?(Q=j[0].g,ae.push("ofs="+Q)):Q=0:ae.push("ofs="+Q);let je=!0;for(let xt=0;xt<v;xt++){let Be=j[xt].g;const Bt=j[xt].map;if(Be-=Q,0>Be)Q=Math.max(0,j[xt].g-100),je=!1;else try{Ir(Bt,ae,"req"+Be+"_")}catch{w&&w(Bt)}}if(je){w=ae.join("&");break e}}}return h=h.i.splice(0,v),y.D=h,w}function Yc(h){if(!h.g&&!h.u){h.Y=1;var y=h.Fa;oe||M(),ge||(oe(),ge=!0),$e.add(y,h),h.v=0}}function Ul(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=Rt(A(h.Fa,h),zl(h,h.v)),h.v++,!0)}n.Fa=function(){if(this.u=null,Xc(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=Rt(A(this.ab,this),h)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ct(10),ao(this),Xc(this))};function ua(h){h.A!=null&&(d.clearTimeout(h.A),h.A=null)}function Xc(h){h.g=new pn(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var y=In(h.qa);et(y,"RID","rpc"),et(y,"SID",h.K),et(y,"AID",h.T),et(y,"CI",h.F?"0":"1"),!h.F&&h.ja&&et(y,"TO",h.ja),et(y,"TYPE","xmlhttp"),la(h,y),h.m&&h.o&&jt(y,h.m,h.o),h.L&&(h.g.I=h.L);var v=h.g;h=h.ia,v.L=1,v.v=ta(In(y)),v.m=null,v.P=!0,ni(v,h)}n.Za=function(){this.C!=null&&(this.C=null,ao(this),Ul(this),ct(19))};function lo(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function Wc(h,y){var v=null;if(h.g==y){lo(h),ua(h),h.g=null;var w=2}else if(Cl(h.h,y))v=y.D,gn(h.h,y),w=1;else return;if(h.G!=0){if(y.o)if(w==1){v=y.m?y.m.length:0,y=Date.now()-y.F;var j=h.B;w=ki(),Xe(w,new Pt(w,v)),oo(h)}else Yc(h);else if(j=y.s,j==3||j==0&&0<y.X||!(w==1&&Qd(h,y)||w==2&&Ul(h)))switch(v&&0<v.length&&(y=h.h,y.i=y.i.concat(v)),j){case 1:ui(h,5);break;case 4:ui(h,10);break;case 3:ui(h,6);break;default:ui(h,2)}}}function zl(h,y){let v=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(v*=2),v*y}function ui(h,y){if(h.j.info("Error code "+y),y==2){var v=A(h.fb,h),w=h.Xa;const j=!w;w=new It(w||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||ea(w,"https"),ta(w),j?ra(w.toString(),v):or(w.toString(),v)}else ct(2);h.G=0,h.l&&h.l.sa(y),Zc(h),Kc(h)}n.fb=function(h){h?(this.j.info("Successfully pinged google.com"),ct(2)):(this.j.info("Failed to ping google.com"),ct(1))};function Zc(h){if(h.G=0,h.ka=[],h.l){const y=Nl(h.h);(y.length!=0||h.i.length!=0)&&(U(h.ka,y),U(h.ka,h.i),h.h.i.length=0,q(h.i),h.i.length=0),h.l.ra()}}function Jc(h,y,v){var w=v instanceof It?In(v):new It(v);if(w.g!="")y&&(w.g=y+"."+w.g),ji(w,w.s);else{var j=d.location;w=j.protocol,y=y?y+"."+j.hostname:j.hostname,j=+j.port;var Q=new It(null);w&&ea(Q,w),y&&(Q.g=y),j&&ji(Q,j),v&&(Q.l=v),w=Q}return v=h.D,y=h.ya,v&&y&&et(w,v,y),et(w,"VER",h.la),la(h,w),w}function eh(h,y,v){if(y&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Ca&&!h.pa?new Qe(new Bi({eb:v})):new Qe(h.pa),y.Ha(h.J),y}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function th(){}n=th.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function uo(){}uo.prototype.g=function(h,y){return new yn(h,y)};function yn(h,y){_t.call(this),this.g=new so(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(h?h["X-WebChannel-Client-Profile"]=y.va:h={"X-WebChannel-Client-Profile":y.va}),this.g.S=h,(h=y&&y.Sb)&&!ie(h)&&(this.g.m=h),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!ie(y)&&(this.g.D=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new Or(this)}N(yn,_t),yn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},yn.prototype.close=function(){kl(this.g)},yn.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var v={};v.__data__=h,h=v}else this.u&&(v={},v.__data__=sr(h),h=v);y.i.push(new Bc(y.Ya++,h)),y.G==3&&oo(y)},yn.prototype.N=function(){this.g.l=null,delete this.j,kl(this.g),delete this.g,yn.aa.N.call(this)};function nh(h){ei.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const v in y){h=v;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}N(nh,ei);function rh(){wl.call(this),this.status=1}N(rh,wl);function Or(h){this.g=h}N(Or,th),Or.prototype.ua=function(){Xe(this.g,"a")},Or.prototype.ta=function(h){Xe(this.g,new nh(h))},Or.prototype.sa=function(h){Xe(this.g,new rh)},Or.prototype.ra=function(){Xe(this.g,"b")},uo.prototype.createWebChannel=uo.prototype.g,yn.prototype.send=yn.prototype.o,yn.prototype.open=yn.prototype.m,yn.prototype.close=yn.prototype.close,Nw=function(){return new uo},Cw=function(){return ki()},Iw=Ar,Sg={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},zi.NO_ERROR=0,zi.TIMEOUT=8,zi.HTTP_ERROR=6,Tf=zi,ti.COMPLETE="complete",Rw=ti,bl.EventType=Jr,Jr.OPEN="a",Jr.CLOSE="b",Jr.ERROR="c",Jr.MESSAGE="d",_t.prototype.listen=_t.prototype.K,Mu=bl,Qe.prototype.listenOnce=Qe.prototype.L,Qe.prototype.getLastError=Qe.prototype.Ka,Qe.prototype.getLastErrorCode=Qe.prototype.Ba,Qe.prototype.getStatus=Qe.prototype.Z,Qe.prototype.getResponseJson=Qe.prototype.Oa,Qe.prototype.getResponseText=Qe.prototype.oa,Qe.prototype.send=Qe.prototype.ea,Qe.prototype.setWithCredentials=Qe.prototype.Ha,Sw=Qe}).apply(typeof of<"u"?of:typeof self<"u"?self:typeof window<"u"?window:{});const k0="@firebase/firestore",L0="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}cn.UNAUTHENTICATED=new cn(null),cn.GOOGLE_CREDENTIALS=new cn("google-credentials-uid"),cn.FIRST_PARTY=new cn("first-party-uid"),cn.MOCK_USER=new cn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cl="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Va=new gc("@firebase/firestore");function zo(){return Va.logLevel}function ue(n,...e){if(Va.logLevel<=ke.DEBUG){const t=e.map(vy);Va.debug(`Firestore (${cl}): ${n}`,...t)}}function Mi(n,...e){if(Va.logLevel<=ke.ERROR){const t=e.map(vy);Va.error(`Firestore (${cl}): ${n}`,...t)}}function bs(n,...e){if(Va.logLevel<=ke.WARN){const t=e.map(vy);Va.warn(`Firestore (${cl}): ${n}`,...t)}}function vy(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _e(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,Dw(n,i,t)}function Dw(n,e,t){let i=`FIRESTORE (${cl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw Mi(i),new Error(i)}function Fe(n,e,t,i){let a="Unexpected state";typeof t=="string"?a=t:i=t,n||Dw(e,a,i)}function Se(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class se extends ir{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ow{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class UP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(cn.UNAUTHENTICATED))}shutdown(){}}class zP{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class FP{constructor(e){this.t=e,this.currentUser=cn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Fe(this.o===void 0,42304);let i=this.i;const a=m=>this.i!==i?(i=this.i,t(m)):Promise.resolve();let l=new gr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new gr,e.enqueueRetryable(()=>a(this.currentUser))};const c=()=>{const m=l;e.enqueueRetryable(async()=>{await m.promise,await a(this.currentUser)})},d=m=>{ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(m=>d(m)),setTimeout(()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?d(m):(ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new gr)}},0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Fe(typeof i.accessToken=="string",31837,{l:i}),new Ow(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Fe(e===null||typeof e=="string",2055,{h:e}),new cn(e)}}class jP{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=cn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class BP{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new jP(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(cn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class U0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class qP{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,wn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Fe(this.o===void 0,3512);const i=l=>{l.error!=null&&ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,ue("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>i(l))};const a=l=>{ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(l=>a(l)),setTimeout(()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new U0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Fe(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new U0(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HP(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mw(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ey{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const a=HP(40);for(let l=0;l<a.length;++l)i.length<20&&a[l]<t&&(i+=e.charAt(a[l]%62))}return i}}function Oe(n,e){return n<e?-1:n>e?1:0}function Rg(n,e){let t=0;for(;t<n.length&&t<e.length;){const i=n.codePointAt(t),a=e.codePointAt(t);if(i!==a){if(i<128&&a<128)return Oe(i,a);{const l=Mw(),c=GP(l.encode(z0(n,t)),l.encode(z0(e,t)));return c!==0?c:Oe(i,a)}}t+=i>65535?2:1}return Oe(n.length,e.length)}function z0(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function GP(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return Oe(n[t],e[t]);return Oe(n.length,e.length)}function Zo(n,e,t){return n.length===e.length&&n.every((i,a)=>t(i,e[a]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F0="__name__";class Ur{constructor(e,t,i){t===void 0?t=0:t>e.length&&_e(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&_e(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Ur.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ur?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let a=0;a<i;a++){const l=Ur.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return Oe(e.length,t.length)}static compareSegments(e,t){const i=Ur.isNumericId(e),a=Ur.isNumericId(t);return i&&!a?-1:!i&&a?1:i&&a?Ur.extractNumericId(e).compare(Ur.extractNumericId(t)):Rg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return vs.fromString(e.substring(4,e.length-2))}}class Je extends Ur{construct(e,t,i){return new Je(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new se(Y.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(a=>a.length>0))}return new Je(t)}static emptyPath(){return new Je([])}}const $P=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class tn extends Ur{construct(e,t,i){return new tn(e,t,i)}static isValidIdentifier(e){return $P.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),tn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===F0}static keyField(){return new tn([F0])}static fromServerFormat(e){const t=[];let i="",a=0;const l=()=>{if(i.length===0)throw new se(Y.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let c=!1;for(;a<e.length;){const d=e[a];if(d==="\\"){if(a+1===e.length)throw new se(Y.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[a+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new se(Y.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=m,a+=2}else d==="`"?(c=!c,a++):d!=="."||c?(i+=d,a++):(l(),a++)}if(l(),c)throw new se(Y.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new tn(t)}static emptyPath(){return new tn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{constructor(e){this.path=e}static fromPath(e){return new me(Je.fromString(e))}static fromName(e){return new me(Je.fromString(e).popFirst(5))}static empty(){return new me(Je.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Je.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Je.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new me(new Je(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pw(n,e,t){if(!t)throw new se(Y.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function KP(n,e,t,i){if(e===!0&&i===!0)throw new se(Y.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function j0(n){if(!me.isDocumentKey(n))throw new se(Y.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function B0(n){if(me.isDocumentKey(n))throw new se(Y.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function xw(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function hd(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":_e(12329,{type:typeof n})}function dn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new se(Y.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=hd(n);throw new se(Y.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function QP(n,e){if(e<=0)throw new se(Y.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mt(n,e){const t={typeString:n};return e&&(t.value=e),t}function Ac(n,e){if(!xw(n))throw new se(Y.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const a=e[i].typeString,l="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}const c=n[i];if(a&&typeof c!==a){t=`JSON field '${i}' must be a ${a}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${i}' field to equal '${l.value}'`;break}}if(t)throw new se(Y.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q0=-62135596800,H0=1e6;class ut{static now(){return ut.fromMillis(Date.now())}static fromDate(e){return ut.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*H0);return new ut(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new se(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new se(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<q0)throw new se(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new se(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/H0}_compareTo(e){return this.seconds===e.seconds?Oe(this.nanoseconds,e.nanoseconds):Oe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ut._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ac(e,ut._jsonSchema))return new ut(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-q0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ut._jsonSchemaVersion="firestore/timestamp/1.0",ut._jsonSchema={type:Mt("string",ut._jsonSchemaVersion),seconds:Mt("number"),nanoseconds:Mt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{static fromTimestamp(e){return new Ae(e)}static min(){return new Ae(new ut(0,0))}static max(){return new Ae(new ut(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zu=-1;function YP(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,a=Ae.fromTimestamp(i===1e9?new ut(t+1,0):new ut(t,i));return new ws(a,me.empty(),e)}function XP(n){return new ws(n.readTime,n.key,Zu)}class ws{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new ws(Ae.min(),me.empty(),Zu)}static max(){return new ws(Ae.max(),me.empty(),Zu)}}function WP(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=me.comparator(n.documentKey,e.documentKey),t!==0?t:Oe(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class JP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hl(n){if(n.code!==Y.FAILED_PRECONDITION||n.message!==ZP)throw n;ue("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&_e(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ee((i,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,a)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ee?t:ee.resolve(t)}catch(t){return ee.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ee.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ee.reject(t)}static resolve(e){return new ee((t,i)=>{t(e)})}static reject(e){return new ee((t,i)=>{i(e)})}static waitFor(e){return new ee((t,i)=>{let a=0,l=0,c=!1;e.forEach(d=>{++a,d.next(()=>{++l,c&&l===a&&t()},m=>i(m))}),c=!0,l===a&&t()})}static or(e){let t=ee.resolve(!1);for(const i of e)t=t.next(a=>a?ee.resolve(a):i());return t}static forEach(e,t){const i=[];return e.forEach((a,l)=>{i.push(t.call(this,a,l))}),this.waitFor(i)}static mapArray(e,t){return new ee((i,a)=>{const l=e.length,c=new Array(l);let d=0;for(let m=0;m<l;m++){const p=m;t(e[p]).next(_=>{c[p]=_,++d,d===l&&i(c)},_=>a(_))}})}static doWhile(e,t){return new ee((i,a)=>{const l=()=>{e()===!0?t().next(()=>{l()},a):i()};l()})}}function e2(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function fl(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this._e(i),this.ae=i=>t.writeSequenceNumber(i))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}fd.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ty=-1;function bc(n){return n==null}function zf(n){return n===0&&1/n==-1/0}function t2(n){return typeof n=="number"&&Number.isInteger(n)&&!zf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vw="";function n2(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=G0(e)),e=r2(n.get(t),e);return G0(e)}function r2(n,e){let t=e;const i=n.length;for(let a=0;a<i;a++){const l=n.charAt(a);switch(l){case"\0":t+="";break;case Vw:t+="";break;default:t+=l}}return t}function G0(n){return n+Vw+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $0(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Us(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function i2(n,e){const t=[];for(const i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.push(e(n[i],i,n));return t}function kw(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e,t){this.comparator=e,this.root=t||en.EMPTY}insert(e,t){return new gt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,en.BLACK,null,null))}remove(e){return new gt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,en.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const a=this.comparator(e,i.key);if(a===0)return t+i.left.size;a<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new lf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new lf(this.root,e,this.comparator,!1)}getReverseIterator(){return new lf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new lf(this.root,e,this.comparator,!0)}}class lf{constructor(e,t,i,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class en{constructor(e,t,i,a,l){this.key=e,this.value=t,this.color=i??en.RED,this.left=a??en.EMPTY,this.right=l??en.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,a,l){return new en(e??this.key,t??this.value,i??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let a=this;const l=i(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,i),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,i)),a.fixUp()}removeMin(){if(this.left.isEmpty())return en.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return en.EMPTY;i=a.right.min(),a=a.copy(i.key,i.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,en.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,en.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw _e(43730,{key:this.key,value:this.value});if(this.right.isRed())throw _e(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw _e(27949);return e+(this.isRed()?0:1)}}en.EMPTY=null,en.RED=!0,en.BLACK=!1;en.EMPTY=new class{constructor(){this.size=0}get key(){throw _e(57766)}get value(){throw _e(16141)}get color(){throw _e(16727)}get left(){throw _e(29726)}get right(){throw _e(36894)}copy(e,t,i,a,l){return this}insert(e,t,i){return new en(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this.comparator=e,this.data=new gt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const a=i.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new K0(this.data.getIterator())}getIteratorFrom(e){return new K0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof Ut)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=i.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Ut(this.comparator);return t.data=e,t}}class K0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(e){this.fields=e,e.sort(tn.comparator)}static empty(){return new kn([])}unionWith(e){let t=new Ut(tn.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new kn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Zo(this.fields,e.fields,(t,i)=>t.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new Lw("Invalid base64 string: "+l):l}}(e);return new rn(t)}static fromUint8Array(e){const t=function(a){let l="";for(let c=0;c<a.length;++c)l+=String.fromCharCode(a[c]);return l}(e);return new rn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const i=new Uint8Array(t.length);for(let a=0;a<t.length;a++)i[a]=t.charCodeAt(a);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Oe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}rn.EMPTY_BYTE_STRING=new rn("");const s2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ss(n){if(Fe(!!n,39018),typeof n=="string"){let e=0;const t=s2.exec(n);if(Fe(!!t,46558,{timestamp:n}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:St(n.seconds),nanos:St(n.nanos)}}function St(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Rs(n){return typeof n=="string"?rn.fromBase64String(n):rn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uw="server_timestamp",zw="__type__",Fw="__previous_value__",jw="__local_write_time__";function dd(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[zw])===null||t===void 0?void 0:t.stringValue)===Uw}function md(n){const e=n.mapValue.fields[Fw];return dd(e)?md(e):e}function Ju(n){const e=Ss(n.mapValue.fields[jw].timestampValue);return new ut(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2{constructor(e,t,i,a,l,c,d,m,p,_){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=a,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=m,this.useFetchStreams=p,this.isUsingEmulator=_}}const Ff="(default)";class ec{constructor(e,t){this.projectId=e,this.database=t||Ff}static empty(){return new ec("","")}get isDefaultDatabase(){return this.database===Ff}isEqual(e){return e instanceof ec&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bw="__type__",o2="__max__",uf={mapValue:{}},qw="__vector__",jf="value";function Is(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?dd(n)?4:u2(n)?9007199254740991:l2(n)?10:11:_e(28295,{value:n})}function Gr(n,e){if(n===e)return!0;const t=Is(n);if(t!==Is(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Ju(n).isEqual(Ju(e));case 3:return function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const c=Ss(a.timestampValue),d=Ss(l.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(a,l){return Rs(a.bytesValue).isEqual(Rs(l.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(a,l){return St(a.geoPointValue.latitude)===St(l.geoPointValue.latitude)&&St(a.geoPointValue.longitude)===St(l.geoPointValue.longitude)}(n,e);case 2:return function(a,l){if("integerValue"in a&&"integerValue"in l)return St(a.integerValue)===St(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const c=St(a.doubleValue),d=St(l.doubleValue);return c===d?zf(c)===zf(d):isNaN(c)&&isNaN(d)}return!1}(n,e);case 9:return Zo(n.arrayValue.values||[],e.arrayValue.values||[],Gr);case 10:case 11:return function(a,l){const c=a.mapValue.fields||{},d=l.mapValue.fields||{};if($0(c)!==$0(d))return!1;for(const m in c)if(c.hasOwnProperty(m)&&(d[m]===void 0||!Gr(c[m],d[m])))return!1;return!0}(n,e);default:return _e(52216,{left:n})}}function tc(n,e){return(n.values||[]).find(t=>Gr(t,e))!==void 0}function Jo(n,e){if(n===e)return 0;const t=Is(n),i=Is(e);if(t!==i)return Oe(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Oe(n.booleanValue,e.booleanValue);case 2:return function(l,c){const d=St(l.integerValue||l.doubleValue),m=St(c.integerValue||c.doubleValue);return d<m?-1:d>m?1:d===m?0:isNaN(d)?isNaN(m)?0:-1:1}(n,e);case 3:return Q0(n.timestampValue,e.timestampValue);case 4:return Q0(Ju(n),Ju(e));case 5:return Rg(n.stringValue,e.stringValue);case 6:return function(l,c){const d=Rs(l),m=Rs(c);return d.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(l,c){const d=l.split("/"),m=c.split("/");for(let p=0;p<d.length&&p<m.length;p++){const _=Oe(d[p],m[p]);if(_!==0)return _}return Oe(d.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(l,c){const d=Oe(St(l.latitude),St(c.latitude));return d!==0?d:Oe(St(l.longitude),St(c.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return Y0(n.arrayValue,e.arrayValue);case 10:return function(l,c){var d,m,p,_;const T=l.fields||{},A=c.fields||{},S=(d=T[jf])===null||d===void 0?void 0:d.arrayValue,N=(m=A[jf])===null||m===void 0?void 0:m.arrayValue,q=Oe(((p=S?.values)===null||p===void 0?void 0:p.length)||0,((_=N?.values)===null||_===void 0?void 0:_.length)||0);return q!==0?q:Y0(S,N)}(n.mapValue,e.mapValue);case 11:return function(l,c){if(l===uf.mapValue&&c===uf.mapValue)return 0;if(l===uf.mapValue)return 1;if(c===uf.mapValue)return-1;const d=l.fields||{},m=Object.keys(d),p=c.fields||{},_=Object.keys(p);m.sort(),_.sort();for(let T=0;T<m.length&&T<_.length;++T){const A=Rg(m[T],_[T]);if(A!==0)return A;const S=Jo(d[m[T]],p[_[T]]);if(S!==0)return S}return Oe(m.length,_.length)}(n.mapValue,e.mapValue);default:throw _e(23264,{le:t})}}function Q0(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Oe(n,e);const t=Ss(n),i=Ss(e),a=Oe(t.seconds,i.seconds);return a!==0?a:Oe(t.nanos,i.nanos)}function Y0(n,e){const t=n.values||[],i=e.values||[];for(let a=0;a<t.length&&a<i.length;++a){const l=Jo(t[a],i[a]);if(l)return l}return Oe(t.length,i.length)}function el(n){return Ig(n)}function Ig(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const i=Ss(t);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Rs(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return me.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let i="[",a=!0;for(const l of t.values||[])a?a=!1:i+=",",i+=Ig(l);return i+"]"}(n.arrayValue):"mapValue"in n?function(t){const i=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const c of i)l?l=!1:a+=",",a+=`${c}:${Ig(t.fields[c])}`;return a+"}"}(n.mapValue):_e(61005,{value:n})}function Af(n){switch(Is(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=md(n);return e?16+Af(e):16;case 5:return 2*n.stringValue.length;case 6:return Rs(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((a,l)=>a+Af(l),0)}(n.arrayValue);case 10:case 11:return function(i){let a=0;return Us(i.fields,(l,c)=>{a+=l.length+Af(c)}),a}(n.mapValue);default:throw _e(13486,{value:n})}}function Bf(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Cg(n){return!!n&&"integerValue"in n}function Ay(n){return!!n&&"arrayValue"in n}function X0(n){return!!n&&"nullValue"in n}function W0(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function bf(n){return!!n&&"mapValue"in n}function l2(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[Bw])===null||t===void 0?void 0:t.stringValue)===qw}function zu(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Us(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=zu(i)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=zu(n.arrayValue.values[t]);return e}return Object.assign({},n)}function u2(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===o2}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e){this.value=e}static empty(){return new vn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!bf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=zu(t)}setAll(e){let t=tn.emptyPath(),i={},a=[];e.forEach((c,d)=>{if(!t.isImmediateParentOf(d)){const m=this.getFieldsMap(t);this.applyChanges(m,i,a),i={},a=[],t=d.popLast()}c?i[d.lastSegment()]=zu(c):a.push(d.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,i,a)}delete(e){const t=this.field(e.popLast());bf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Gr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let a=t.mapValue.fields[e.get(i)];bf(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,i){Us(t,(a,l)=>e[a]=l);for(const a of i)delete e[a]}clone(){return new vn(zu(this.value))}}function Hw(n){const e=[];return Us(n.fields,(t,i)=>{const a=new tn([t]);if(bf(i)){const l=Hw(i.mapValue).fields;if(l.length===0)e.push(a);else for(const c of l)e.push(a.child(c))}else e.push(a)}),new kn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e,t,i,a,l,c,d){this.key=e,this.documentType=t,this.version=i,this.readTime=a,this.createTime=l,this.data=c,this.documentState=d}static newInvalidDocument(e){return new Kt(e,0,Ae.min(),Ae.min(),Ae.min(),vn.empty(),0)}static newFoundDocument(e,t,i,a){return new Kt(e,1,t,Ae.min(),i,a,0)}static newNoDocument(e,t){return new Kt(e,2,t,Ae.min(),Ae.min(),vn.empty(),0)}static newUnknownDocument(e,t){return new Kt(e,3,t,Ae.min(),Ae.min(),vn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=vn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=vn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Kt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Kt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(e,t){this.position=e,this.inclusive=t}}function Z0(n,e,t){let i=0;for(let a=0;a<n.position.length;a++){const l=e[a],c=n.position[a];if(l.field.isKeyField()?i=me.comparator(me.fromName(c.referenceValue),t.key):i=Jo(c,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function J0(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Gr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc{constructor(e,t="asc"){this.field=e,this.dir=t}}function c2(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gw{}class Ot extends Gw{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new f2(e,t,i):t==="array-contains"?new p2(e,i):t==="in"?new g2(e,i):t==="not-in"?new y2(e,i):t==="array-contains-any"?new _2(e,i):new Ot(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new d2(e,i):new m2(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Jo(t,this.value)):t!==null&&Is(this.value)===Is(t)&&this.matchesComparison(Jo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return _e(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class yr extends Gw{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new yr(e,t)}matches(e){return $w(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function $w(n){return n.op==="and"}function Kw(n){return h2(n)&&$w(n)}function h2(n){for(const e of n.filters)if(e instanceof yr)return!1;return!0}function Ng(n){if(n instanceof Ot)return n.field.canonicalString()+n.op.toString()+el(n.value);if(Kw(n))return n.filters.map(e=>Ng(e)).join(",");{const e=n.filters.map(t=>Ng(t)).join(",");return`${n.op}(${e})`}}function Qw(n,e){return n instanceof Ot?function(i,a){return a instanceof Ot&&i.op===a.op&&i.field.isEqual(a.field)&&Gr(i.value,a.value)}(n,e):n instanceof yr?function(i,a){return a instanceof yr&&i.op===a.op&&i.filters.length===a.filters.length?i.filters.reduce((l,c,d)=>l&&Qw(c,a.filters[d]),!0):!1}(n,e):void _e(19439)}function Yw(n){return n instanceof Ot?function(t){return`${t.field.canonicalString()} ${t.op} ${el(t.value)}`}(n):n instanceof yr?function(t){return t.op.toString()+" {"+t.getFilters().map(Yw).join(" ,")+"}"}(n):"Filter"}class f2 extends Ot{constructor(e,t,i){super(e,t,i),this.key=me.fromName(i.referenceValue)}matches(e){const t=me.comparator(e.key,this.key);return this.matchesComparison(t)}}class d2 extends Ot{constructor(e,t){super(e,"in",t),this.keys=Xw("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class m2 extends Ot{constructor(e,t){super(e,"not-in",t),this.keys=Xw("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Xw(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(i=>me.fromName(i.referenceValue))}class p2 extends Ot{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ay(t)&&tc(t.arrayValue,this.value)}}class g2 extends Ot{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&tc(this.value.arrayValue,t)}}class y2 extends Ot{constructor(e,t){super(e,"not-in",t)}matches(e){if(tc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!tc(this.value.arrayValue,t)}}class _2 extends Ot{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ay(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>tc(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v2{constructor(e,t=null,i=[],a=[],l=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=a,this.limit=l,this.startAt=c,this.endAt=d,this.Pe=null}}function eA(n,e=null,t=[],i=[],a=null,l=null,c=null){return new v2(n,e,t,i,a,l,c)}function by(n){const e=Se(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>Ng(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>function(l){return l.field.canonicalString()+l.dir}(i)).join(","),bc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>el(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>el(i)).join(",")),e.Pe=t}return e.Pe}function wy(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!c2(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Qw(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!J0(n.startAt,e.startAt)&&J0(n.endAt,e.endAt)}function Dg(n){return me.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja{constructor(e,t=null,i=[],a=[],l=null,c="F",d=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=a,this.limit=l,this.limitType=c,this.startAt=d,this.endAt=m,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function E2(n,e,t,i,a,l,c,d){return new ja(n,e,t,i,a,l,c,d)}function pd(n){return new ja(n)}function tA(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Sy(n){return n.collectionGroup!==null}function Ko(n){const e=Se(n);if(e.Te===null){e.Te=[];const t=new Set;for(const l of e.explicitOrderBy)e.Te.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new Ut(tn.comparator);return c.filters.forEach(m=>{m.getFlattenedFilters().forEach(p=>{p.isInequality()&&(d=d.add(p.field))})}),d})(e).forEach(l=>{t.has(l.canonicalString())||l.isKeyField()||e.Te.push(new nc(l,i))}),t.has(tn.keyField().canonicalString())||e.Te.push(new nc(tn.keyField(),i))}return e.Te}function jr(n){const e=Se(n);return e.Ie||(e.Ie=Ww(e,Ko(n))),e.Ie}function T2(n){const e=Se(n);return e.de||(e.de=Ww(e,n.explicitOrderBy)),e.de}function Ww(n,e){if(n.limitType==="F")return eA(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(a=>{const l=a.dir==="desc"?"asc":"desc";return new nc(a.field,l)});const t=n.endAt?new tl(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new tl(n.startAt.position,n.startAt.inclusive):null;return eA(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function Og(n,e){const t=n.filters.concat([e]);return new ja(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function qf(n,e,t){return new ja(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function gd(n,e){return wy(jr(n),jr(e))&&n.limitType===e.limitType}function Zw(n){return`${by(jr(n))}|lt:${n.limitType}`}function Fo(n){return`Query(target=${function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(a=>Yw(a)).join(", ")}]`),bc(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(a=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(a)).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(a=>el(a)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(a=>el(a)).join(",")),`Target(${i})`}(jr(n))}; limitType=${n.limitType})`}function yd(n,e){return e.isFoundDocument()&&function(i,a){const l=a.key.path;return i.collectionGroup!==null?a.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):me.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)}(n,e)&&function(i,a){for(const l of Ko(i))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0}(n,e)&&function(i,a){for(const l of i.filters)if(!l.matches(a))return!1;return!0}(n,e)&&function(i,a){return!(i.startAt&&!function(c,d,m){const p=Z0(c,d,m);return c.inclusive?p<=0:p<0}(i.startAt,Ko(i),a)||i.endAt&&!function(c,d,m){const p=Z0(c,d,m);return c.inclusive?p>=0:p>0}(i.endAt,Ko(i),a))}(n,e)}function A2(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Jw(n){return(e,t)=>{let i=!1;for(const a of Ko(n)){const l=b2(a,e,t);if(l!==0)return l;i=i||a.field.isKeyField()}return 0}}function b2(n,e,t){const i=n.field.isKeyField()?me.comparator(e.key,t.key):function(l,c,d){const m=c.data.field(l),p=d.data.field(l);return m!==null&&p!==null?Jo(m,p):_e(42886)}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return _e(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[a,l]of i)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),a=this.inner[i];if(a===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return i.length===1?delete this.inner[t]:i.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Us(this.inner,(t,i)=>{for(const[a,l]of i)e(a,l)})}isEmpty(){return kw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w2=new gt(me.comparator);function Pi(){return w2}const eS=new gt(me.comparator);function Pu(...n){let e=eS;for(const t of n)e=e.insert(t.key,t);return e}function tS(n){let e=eS;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function Ca(){return Fu()}function nS(){return Fu()}function Fu(){return new Ba(n=>n.toString(),(n,e)=>n.isEqual(e))}const S2=new gt(me.comparator),R2=new Ut(me.comparator);function Ue(...n){let e=R2;for(const t of n)e=e.add(t);return e}const I2=new Ut(Oe);function C2(){return I2}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ry(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:zf(e)?"-0":e}}function rS(n){return{integerValue:""+n}}function N2(n,e){return t2(e)?rS(e):Ry(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _d{constructor(){this._=void 0}}function D2(n,e,t){return n instanceof rc?function(a,l){const c={fields:{[zw]:{stringValue:Uw},[jw]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&dd(l)&&(l=md(l)),l&&(c.fields[Fw]=l),{mapValue:c}}(t,e):n instanceof ic?sS(n,e):n instanceof sc?aS(n,e):function(a,l){const c=iS(a,l),d=nA(c)+nA(a.Ee);return Cg(c)&&Cg(a.Ee)?rS(d):Ry(a.serializer,d)}(n,e)}function O2(n,e,t){return n instanceof ic?sS(n,e):n instanceof sc?aS(n,e):t}function iS(n,e){return n instanceof Hf?function(i){return Cg(i)||function(l){return!!l&&"doubleValue"in l}(i)}(e)?e:{integerValue:0}:null}class rc extends _d{}class ic extends _d{constructor(e){super(),this.elements=e}}function sS(n,e){const t=oS(e);for(const i of n.elements)t.some(a=>Gr(a,i))||t.push(i);return{arrayValue:{values:t}}}class sc extends _d{constructor(e){super(),this.elements=e}}function aS(n,e){let t=oS(e);for(const i of n.elements)t=t.filter(a=>!Gr(a,i));return{arrayValue:{values:t}}}class Hf extends _d{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function nA(n){return St(n.integerValue||n.doubleValue)}function oS(n){return Ay(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M2{constructor(e,t){this.field=e,this.transform=t}}function P2(n,e){return n.field.isEqual(e.field)&&function(i,a){return i instanceof ic&&a instanceof ic||i instanceof sc&&a instanceof sc?Zo(i.elements,a.elements,Gr):i instanceof Hf&&a instanceof Hf?Gr(i.Ee,a.Ee):i instanceof rc&&a instanceof rc}(n.transform,e.transform)}class x2{constructor(e,t){this.version=e,this.transformResults=t}}class nn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new nn}static exists(e){return new nn(void 0,e)}static updateTime(e){return new nn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function wf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class vd{}function lS(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Ed(n.key,nn.none()):new wc(n.key,n.data,nn.none());{const t=n.data,i=vn.empty();let a=new Ut(tn.comparator);for(let l of e.fields)if(!a.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?i.delete(l):i.set(l,c),a=a.add(l)}return new zs(n.key,i,new kn(a.toArray()),nn.none())}}function V2(n,e,t){n instanceof wc?function(a,l,c){const d=a.value.clone(),m=iA(a.fieldTransforms,l,c.transformResults);d.setAll(m),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()}(n,e,t):n instanceof zs?function(a,l,c){if(!wf(a.precondition,l))return void l.convertToUnknownDocument(c.version);const d=iA(a.fieldTransforms,l,c.transformResults),m=l.data;m.setAll(uS(a)),m.setAll(d),l.convertToFoundDocument(c.version,m).setHasCommittedMutations()}(n,e,t):function(a,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()}(0,e,t)}function ju(n,e,t,i){return n instanceof wc?function(l,c,d,m){if(!wf(l.precondition,c))return d;const p=l.value.clone(),_=sA(l.fieldTransforms,m,c);return p.setAll(_),c.convertToFoundDocument(c.version,p).setHasLocalMutations(),null}(n,e,t,i):n instanceof zs?function(l,c,d,m){if(!wf(l.precondition,c))return d;const p=sA(l.fieldTransforms,m,c),_=c.data;return _.setAll(uS(l)),_.setAll(p),c.convertToFoundDocument(c.version,_).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(T=>T.field))}(n,e,t,i):function(l,c,d){return wf(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d}(n,e,t)}function k2(n,e){let t=null;for(const i of n.fieldTransforms){const a=e.data.field(i.field),l=iS(i.transform,a||null);l!=null&&(t===null&&(t=vn.empty()),t.set(i.field,l))}return t||null}function rA(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(i,a){return i===void 0&&a===void 0||!(!i||!a)&&Zo(i,a,(l,c)=>P2(l,c))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class wc extends vd{constructor(e,t,i,a=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class zs extends vd{constructor(e,t,i,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function uS(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}}),e}function iA(n,e,t){const i=new Map;Fe(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let a=0;a<t.length;a++){const l=n[a],c=l.transform,d=e.data.field(l.field);i.set(l.field,O2(c,d,t[a]))}return i}function sA(n,e,t){const i=new Map;for(const a of n){const l=a.transform,c=t.data.field(a.field);i.set(a.field,D2(l,c,e))}return i}class Ed extends vd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class cS extends vd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L2{constructor(e,t,i,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=a}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&V2(l,e,i[a])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=ju(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=ju(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=nS();return this.mutations.forEach(a=>{const l=e.get(a.key),c=l.overlayedDocument;let d=this.applyToLocalView(c,l.mutatedFields);d=t.has(a.key)?null:d;const m=lS(c,d);m!==null&&i.set(a.key,m),c.isValidDocument()||c.convertToNoDocument(Ae.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ue())}isEqual(e){return this.batchId===e.batchId&&Zo(this.mutations,e.mutations,(t,i)=>rA(t,i))&&Zo(this.baseMutations,e.baseMutations,(t,i)=>rA(t,i))}}class Iy{constructor(e,t,i,a){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=a}static from(e,t,i){Fe(e.mutations.length===i.length,58842,{Ve:e.mutations.length,me:i.length});let a=function(){return S2}();const l=e.mutations;for(let c=0;c<l.length;c++)a=a.insert(l[c].key,i[c].version);return new Iy(e,t,i,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U2{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z2{constructor(e,t,i){this.alias=e,this.aggregateType=t,this.fieldPath=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F2{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Dt,He;function hS(n){switch(n){case Y.OK:return _e(64938);case Y.CANCELLED:case Y.UNKNOWN:case Y.DEADLINE_EXCEEDED:case Y.RESOURCE_EXHAUSTED:case Y.INTERNAL:case Y.UNAVAILABLE:case Y.UNAUTHENTICATED:return!1;case Y.INVALID_ARGUMENT:case Y.NOT_FOUND:case Y.ALREADY_EXISTS:case Y.PERMISSION_DENIED:case Y.FAILED_PRECONDITION:case Y.ABORTED:case Y.OUT_OF_RANGE:case Y.UNIMPLEMENTED:case Y.DATA_LOSS:return!0;default:return _e(15467,{code:n})}}function fS(n){if(n===void 0)return Mi("GRPC error has no .code"),Y.UNKNOWN;switch(n){case Dt.OK:return Y.OK;case Dt.CANCELLED:return Y.CANCELLED;case Dt.UNKNOWN:return Y.UNKNOWN;case Dt.DEADLINE_EXCEEDED:return Y.DEADLINE_EXCEEDED;case Dt.RESOURCE_EXHAUSTED:return Y.RESOURCE_EXHAUSTED;case Dt.INTERNAL:return Y.INTERNAL;case Dt.UNAVAILABLE:return Y.UNAVAILABLE;case Dt.UNAUTHENTICATED:return Y.UNAUTHENTICATED;case Dt.INVALID_ARGUMENT:return Y.INVALID_ARGUMENT;case Dt.NOT_FOUND:return Y.NOT_FOUND;case Dt.ALREADY_EXISTS:return Y.ALREADY_EXISTS;case Dt.PERMISSION_DENIED:return Y.PERMISSION_DENIED;case Dt.FAILED_PRECONDITION:return Y.FAILED_PRECONDITION;case Dt.ABORTED:return Y.ABORTED;case Dt.OUT_OF_RANGE:return Y.OUT_OF_RANGE;case Dt.UNIMPLEMENTED:return Y.UNIMPLEMENTED;case Dt.DATA_LOSS:return Y.DATA_LOSS;default:return _e(39323,{code:n})}}(He=Dt||(Dt={}))[He.OK=0]="OK",He[He.CANCELLED=1]="CANCELLED",He[He.UNKNOWN=2]="UNKNOWN",He[He.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",He[He.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",He[He.NOT_FOUND=5]="NOT_FOUND",He[He.ALREADY_EXISTS=6]="ALREADY_EXISTS",He[He.PERMISSION_DENIED=7]="PERMISSION_DENIED",He[He.UNAUTHENTICATED=16]="UNAUTHENTICATED",He[He.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",He[He.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",He[He.ABORTED=10]="ABORTED",He[He.OUT_OF_RANGE=11]="OUT_OF_RANGE",He[He.UNIMPLEMENTED=12]="UNIMPLEMENTED",He[He.INTERNAL=13]="INTERNAL",He[He.UNAVAILABLE=14]="UNAVAILABLE",He[He.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j2=new vs([4294967295,4294967295],0);function aA(n){const e=Mw().encode(n),t=new ww;return t.update(e),new Uint8Array(t.digest())}function oA(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new vs([t,i],0),new vs([a,l],0)]}class Cy{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new xu(`Invalid padding: ${t}`);if(i<0)throw new xu(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new xu(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new xu(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=vs.fromNumber(this.fe)}pe(e,t,i){let a=e.add(t.multiply(vs.fromNumber(i)));return a.compare(j2)===1&&(a=new vs([a.getBits(0),a.getBits(1)],0)),a.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const t=aA(e),[i,a]=oA(t);for(let l=0;l<this.hashCount;l++){const c=this.pe(i,a,l);if(!this.ye(c))return!1}return!0}static create(e,t,i){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new Cy(l,a,t);return i.forEach(d=>c.insert(d)),c}insert(e){if(this.fe===0)return;const t=aA(e),[i,a]=oA(t);for(let l=0;l<this.hashCount;l++){const c=this.pe(i,a,l);this.we(c)}}we(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class xu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td{constructor(e,t,i,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const a=new Map;return a.set(e,Sc.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Td(Ae.min(),a,new gt(Oe),Pi(),Ue())}}class Sc{constructor(e,t,i,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Sc(i,t,Ue(),Ue(),Ue())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sf{constructor(e,t,i,a){this.Se=e,this.removedTargetIds=t,this.key=i,this.be=a}}class dS{constructor(e,t){this.targetId=e,this.De=t}}class mS{constructor(e,t,i=rn.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=a}}class lA{constructor(){this.ve=0,this.Ce=uA(),this.Fe=rn.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Ue(),t=Ue(),i=Ue();return this.Ce.forEach((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:i=i.add(a);break;default:_e(38017,{changeType:l})}}),new Sc(this.Fe,this.Me,e,t,i)}ke(){this.xe=!1,this.Ce=uA()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Fe(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class B2{constructor(e){this.We=e,this.Ge=new Map,this.ze=Pi(),this.je=cf(),this.Je=cf(),this.He=new gt(Oe)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{const i=this.tt(t);switch(e.state){case 0:this.nt(t)&&i.Be(e.resumeToken);break;case 1:i.Ue(),i.Oe||i.ke(),i.Be(e.resumeToken);break;case 2:i.Ue(),i.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(i.Ke(),i.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),i.Be(e.resumeToken));break;default:_e(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((i,a)=>{this.nt(a)&&t(a)})}it(e){const t=e.targetId,i=e.De.count,a=this.st(t);if(a){const l=a.target;if(Dg(l))if(i===0){const c=new me(l.path);this.Xe(t,c,Kt.newNoDocument(c,Ae.min()))}else Fe(i===1,20013,{expectedCount:i});else{const c=this.ot(t);if(c!==i){const d=this._t(e),m=d?this.ut(d,e,c):1;if(m!==0){this.rt(t);const p=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,p)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:a=0},hashCount:l=0}=t;let c,d;try{c=Rs(i).toUint8Array()}catch(m){if(m instanceof Lw)return bs("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{d=new Cy(c,a,l)}catch(m){return bs(m instanceof xu?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return d.fe===0?null:d}ut(e,t,i){return t.De.count===i-this.ht(e,t.targetId)?0:2}ht(e,t){const i=this.We.getRemoteKeysForTarget(t);let a=0;return i.forEach(l=>{const c=this.We.lt(),d=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.Xe(t,l,null),a++)}),a}Pt(e){const t=new Map;this.Ge.forEach((l,c)=>{const d=this.st(c);if(d){if(l.current&&Dg(d.target)){const m=new me(d.target.path);this.Tt(m).has(c)||this.It(c,m)||this.Xe(c,m,Kt.newNoDocument(m,e))}l.Ne&&(t.set(c,l.Le()),l.ke())}});let i=Ue();this.Je.forEach((l,c)=>{let d=!0;c.forEachWhile(m=>{const p=this.st(m);return!p||p.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)}),d&&(i=i.add(l))}),this.ze.forEach((l,c)=>c.setReadTime(e));const a=new Td(e,t,this.He,this.ze,i);return this.ze=Pi(),this.je=cf(),this.Je=cf(),this.He=new gt(Oe),a}Ze(e,t){if(!this.nt(e))return;const i=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,i),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,i){if(!this.nt(e))return;const a=this.tt(e);this.It(e,t)?a.qe(t,1):a.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),i&&(this.ze=this.ze.insert(t,i))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new lA,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new Ut(Oe),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new Ut(Oe),this.je=this.je.insert(e,t)),t}nt(e){const t=this.st(e)!==null;return t||ue("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new lA),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function cf(){return new gt(me.comparator)}function uA(){return new gt(me.comparator)}const q2={asc:"ASCENDING",desc:"DESCENDING"},H2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},G2={and:"AND",or:"OR"};class $2{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Mg(n,e){return n.useProto3Json||bc(e)?e:{value:e}}function Gf(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function pS(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function K2(n,e){return Gf(n,e.toTimestamp())}function Un(n){return Fe(!!n,49232),Ae.fromTimestamp(function(t){const i=Ss(t);return new ut(i.seconds,i.nanos)}(n))}function Ny(n,e){return Pg(n,e).canonicalString()}function Pg(n,e){const t=function(a){return new Je(["projects",a.projectId,"databases",a.database])}(n).child("documents");return e===void 0?t:t.child(e)}function gS(n){const e=Je.fromString(n);return Fe(bS(e),10190,{key:e.toString()}),e}function $f(n,e){return Ny(n.databaseId,e.path)}function Bu(n,e){const t=gS(e);if(t.get(1)!==n.databaseId.projectId)throw new se(Y.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new se(Y.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new me(_S(t))}function yS(n,e){return Ny(n.databaseId,e)}function Q2(n){const e=gS(n);return e.length===4?Je.emptyPath():_S(e)}function xg(n){return new Je(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function _S(n){return Fe(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function cA(n,e,t){return{name:$f(n,e),fields:t.value.mapValue.fields}}function Y2(n,e){return"found"in e?function(i,a){Fe(!!a.found,43571),a.found.name,a.found.updateTime;const l=Bu(i,a.found.name),c=Un(a.found.updateTime),d=a.found.createTime?Un(a.found.createTime):Ae.min(),m=new vn({mapValue:{fields:a.found.fields}});return Kt.newFoundDocument(l,c,d,m)}(n,e):"missing"in e?function(i,a){Fe(!!a.missing,3894),Fe(!!a.readTime,22933);const l=Bu(i,a.missing),c=Un(a.readTime);return Kt.newNoDocument(l,c)}(n,e):_e(7234,{result:e})}function X2(n,e){let t;if("targetChange"in e){e.targetChange;const i=function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:_e(39313,{state:p})}(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=function(p,_){return p.useProto3Json?(Fe(_===void 0||typeof _=="string",58123),rn.fromBase64String(_||"")):(Fe(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),rn.fromUint8Array(_||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&function(p){const _=p.code===void 0?Y.UNKNOWN:fS(p.code);return new se(_,p.message||"")}(c);t=new mS(i,a,l,d||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const a=Bu(n,i.document.name),l=Un(i.document.updateTime),c=i.document.createTime?Un(i.document.createTime):Ae.min(),d=new vn({mapValue:{fields:i.document.fields}}),m=Kt.newFoundDocument(a,l,c,d),p=i.targetIds||[],_=i.removedTargetIds||[];t=new Sf(p,_,m.key,m)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const a=Bu(n,i.document),l=i.readTime?Un(i.readTime):Ae.min(),c=Kt.newNoDocument(a,l),d=i.removedTargetIds||[];t=new Sf([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const a=Bu(n,i.document),l=i.removedTargetIds||[];t=new Sf([],l,a,null)}else{if(!("filter"in e))return _e(11601,{At:e});{e.filter;const i=e.filter;i.targetId;const{count:a=0,unchangedNames:l}=i,c=new F2(a,l),d=i.targetId;t=new dS(d,c)}}return t}function vS(n,e){let t;if(e instanceof wc)t={update:cA(n,e.key,e.value)};else if(e instanceof Ed)t={delete:$f(n,e.key)};else if(e instanceof zs)t={update:cA(n,e.key,e.data),updateMask:sx(e.fieldMask)};else{if(!(e instanceof cS))return _e(16599,{Rt:e.type});t={verify:$f(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(l,c){const d=c.transform;if(d instanceof rc)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof ic)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof sc)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Hf)return{fieldPath:c.field.canonicalString(),increment:d.Ee};throw _e(20930,{transform:c.transform})}(0,i))),e.precondition.isNone||(t.currentDocument=function(a,l){return l.updateTime!==void 0?{updateTime:K2(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:_e(27497)}(n,e.precondition)),t}function W2(n,e){return n&&n.length>0?(Fe(e!==void 0,14353),n.map(t=>function(a,l){let c=a.updateTime?Un(a.updateTime):Un(l);return c.isEqual(Ae.min())&&(c=Un(l)),new x2(c,a.transformResults||[])}(t,e))):[]}function Z2(n,e){return{documents:[yS(n,e.path)]}}function ES(n,e){const t={structuredQuery:{}},i=e.path;let a;e.collectionGroup!==null?(a=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=yS(n,a);const l=function(p){if(p.length!==0)return AS(yr.create(p,"and"))}(e.filters);l&&(t.structuredQuery.where=l);const c=function(p){if(p.length!==0)return p.map(_=>function(A){return{field:ms(A.field),direction:nx(A.dir)}}(_))}(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=Mg(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=function(p){return{before:p.inclusive,values:p.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(p){return{before:!p.inclusive,values:p.position}}(e.endAt)),{Vt:t,parent:a}}function J2(n,e,t,i){const{Vt:a,parent:l}=ES(n,e),c={},d=[];let m=0;return t.forEach(p=>{const _="aggregate_"+m++;c[_]=p.alias,p.aggregateType==="count"?d.push({alias:_,count:{}}):p.aggregateType==="avg"?d.push({alias:_,avg:{field:ms(p.fieldPath)}}):p.aggregateType==="sum"&&d.push({alias:_,sum:{field:ms(p.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:d,structuredQuery:a.structuredQuery},parent:a.parent},ft:c,parent:l}}function ex(n){let e=Q2(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let a=null;if(i>0){Fe(i===1,65062);const _=t.from[0];_.allDescendants?a=_.collectionId:e=e.child(_.collectionId)}let l=[];t.where&&(l=function(T){const A=TS(T);return A instanceof yr&&Kw(A)?A.getFilters():[A]}(t.where));let c=[];t.orderBy&&(c=function(T){return T.map(A=>function(N){return new nc(jo(N.field),function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction))}(A))}(t.orderBy));let d=null;t.limit&&(d=function(T){let A;return A=typeof T=="object"?T.value:T,bc(A)?null:A}(t.limit));let m=null;t.startAt&&(m=function(T){const A=!!T.before,S=T.values||[];return new tl(S,A)}(t.startAt));let p=null;return t.endAt&&(p=function(T){const A=!T.before,S=T.values||[];return new tl(S,A)}(t.endAt)),E2(e,a,c,l,d,"F",m,p)}function tx(n,e){const t=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return _e(28987,{purpose:a})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function TS(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=jo(t.unaryFilter.field);return Ot.create(i,"==",{doubleValue:NaN});case"IS_NULL":const a=jo(t.unaryFilter.field);return Ot.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=jo(t.unaryFilter.field);return Ot.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=jo(t.unaryFilter.field);return Ot.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return _e(61313);default:return _e(60726)}}(n):n.fieldFilter!==void 0?function(t){return Ot.create(jo(t.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return _e(58110);default:return _e(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return yr.create(t.compositeFilter.filters.map(i=>TS(i)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return _e(1026)}}(t.compositeFilter.op))}(n):_e(30097,{filter:n})}function nx(n){return q2[n]}function rx(n){return H2[n]}function ix(n){return G2[n]}function ms(n){return{fieldPath:n.canonicalString()}}function jo(n){return tn.fromServerFormat(n.fieldPath)}function AS(n){return n instanceof Ot?function(t){if(t.op==="=="){if(W0(t.value))return{unaryFilter:{field:ms(t.field),op:"IS_NAN"}};if(X0(t.value))return{unaryFilter:{field:ms(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(W0(t.value))return{unaryFilter:{field:ms(t.field),op:"IS_NOT_NAN"}};if(X0(t.value))return{unaryFilter:{field:ms(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ms(t.field),op:rx(t.op),value:t.value}}}(n):n instanceof yr?function(t){const i=t.getFilters().map(a=>AS(a));return i.length===1?i[0]:{compositeFilter:{op:ix(t.op),filters:i}}}(n):_e(54877,{filter:n})}function sx(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function bS(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs{constructor(e,t,i,a,l=Ae.min(),c=Ae.min(),d=rn.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=m}withSequenceNumber(e){return new gs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new gs(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new gs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new gs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ax{constructor(e){this.gt=e}}function ox(n){const e=ex({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?qf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lx{constructor(){this.Dn=new ux}addToCollectionParentIndex(e,t){return this.Dn.add(t),ee.resolve()}getCollectionParents(e,t){return ee.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return ee.resolve()}deleteFieldIndex(e,t){return ee.resolve()}deleteAllFieldIndexes(e){return ee.resolve()}createTargetIndexes(e,t){return ee.resolve()}getDocumentsMatchingTarget(e,t){return ee.resolve(null)}getIndexType(e,t){return ee.resolve(0)}getFieldIndexes(e,t){return ee.resolve([])}getNextCollectionGroupToUpdate(e){return ee.resolve(null)}getMinOffset(e,t){return ee.resolve(ws.min())}getMinOffsetFromCollectionGroup(e,t){return ee.resolve(ws.min())}updateCollectionGroup(e,t,i){return ee.resolve()}updateIndexEntries(e,t){return ee.resolve()}}class ux{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t]||new Ut(Je.comparator),l=!a.has(i);return this.index[t]=a.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t];return a&&a.has(i)}getEntries(e){return(this.index[e]||new Ut(Je.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hA={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},wS=41943040;class bn{static withCacheSize(e){return new bn(e,bn.DEFAULT_COLLECTION_PERCENTILE,bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */bn.DEFAULT_COLLECTION_PERCENTILE=10,bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,bn.DEFAULT=new bn(wS,bn.DEFAULT_COLLECTION_PERCENTILE,bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),bn.DISABLED=new bn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new nl(0)}static ur(){return new nl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fA="LruGarbageCollector",cx=1048576;function dA([n,e],[t,i]){const a=Oe(n,t);return a===0?Oe(e,i):a}class hx{constructor(e){this.Tr=e,this.buffer=new Ut(dA),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();dA(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class fx{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){ue(fA,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){fl(t)?ue(fA,"Ignoring IndexedDB error during garbage collection: ",t):await hl(t)}await this.Rr(3e5)})}}class dx{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(t===0)return ee.resolve(fd.ue);const i=new hx(t);return this.Vr.forEachTarget(e,a=>i.Er(a.sequenceNumber)).next(()=>this.Vr.gr(e,a=>i.Er(a))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.Vr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ue("LruGarbageCollector","Garbage collection skipped; disabled"),ee.resolve(hA)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(ue("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),hA):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let i,a,l,c,d,m,p;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(T=>(T>this.params.maximumSequenceNumbersToCollect?(ue("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),a=this.params.maximumSequenceNumbersToCollect):a=T,c=Date.now(),this.nthSequenceNumber(e,a))).next(T=>(i=T,d=Date.now(),this.removeTargets(e,i,t))).next(T=>(l=T,m=Date.now(),this.removeOrphanedDocuments(e,i))).next(T=>(p=Date.now(),zo()<=ke.DEBUG&&ue("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-_}ms
	Determined least recently used ${a} in `+(d-c)+`ms
	Removed ${l} targets in `+(m-d)+`ms
	Removed ${T} documents in `+(p-m)+`ms
Total Duration: ${p-_}ms`),ee.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:T})))}}function mx(n,e){return new dx(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class px{constructor(){this.changes=new Ba(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Kt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?ee.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gx{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yx{constructor(e,t,i,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=a}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(a=>(i=a,this.remoteDocumentCache.getEntry(e,t))).next(a=>(i!==null&&ju(i.mutation,a,kn.empty(),ut.now()),a))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,Ue()).next(()=>i))}getLocalViewOfDocuments(e,t,i=Ue()){const a=Ca();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,i).next(l=>{let c=Pu();return l.forEach((d,m)=>{c=c.insert(d,m.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const i=Ca();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,Ue()))}populateOverlays(e,t,i){const a=[];return i.forEach(l=>{t.has(l)||a.push(l)}),this.documentOverlayCache.getOverlays(e,a).next(l=>{l.forEach((c,d)=>{t.set(c,d)})})}computeViews(e,t,i,a){let l=Pi();const c=Fu(),d=function(){return Fu()}();return t.forEach((m,p)=>{const _=i.get(p.key);a.has(p.key)&&(_===void 0||_.mutation instanceof zs)?l=l.insert(p.key,p):_!==void 0?(c.set(p.key,_.mutation.getFieldMask()),ju(_.mutation,p,_.mutation.getFieldMask(),ut.now())):c.set(p.key,kn.empty())}),this.recalculateAndSaveOverlays(e,l).next(m=>(m.forEach((p,_)=>c.set(p,_)),t.forEach((p,_)=>{var T;return d.set(p,new gx(_,(T=c.get(p))!==null&&T!==void 0?T:null))}),d))}recalculateAndSaveOverlays(e,t){const i=Fu();let a=new gt((c,d)=>c-d),l=Ue();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const d of c)d.keys().forEach(m=>{const p=t.get(m);if(p===null)return;let _=i.get(m)||kn.empty();_=d.applyToLocalView(p,_),i.set(m,_);const T=(a.get(d.batchId)||Ue()).add(m);a=a.insert(d.batchId,T)})}).next(()=>{const c=[],d=a.getReverseIterator();for(;d.hasNext();){const m=d.getNext(),p=m.key,_=m.value,T=nS();_.forEach(A=>{if(!l.has(A)){const S=lS(t.get(A),i.get(A));S!==null&&T.set(A,S),l=l.add(A)}}),c.push(this.documentOverlayCache.saveOverlays(e,p,T))}return ee.waitFor(c)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i,a){return function(c){return me.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Sy(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,a):this.getDocumentsMatchingCollectionQuery(e,t,i,a)}getNextDocuments(e,t,i,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,a).next(l=>{const c=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,a-l.size):ee.resolve(Ca());let d=Zu,m=l;return c.next(p=>ee.forEach(p,(_,T)=>(d<T.largestBatchId&&(d=T.largestBatchId),l.get(_)?ee.resolve():this.remoteDocumentCache.getEntry(e,_).next(A=>{m=m.insert(_,A)}))).next(()=>this.populateOverlays(e,p,l)).next(()=>this.computeViews(e,m,p,Ue())).next(_=>({batchId:d,changes:tS(_)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new me(t)).next(i=>{let a=Pu();return i.isFoundDocument()&&(a=a.insert(i.key,i)),a})}getDocumentsMatchingCollectionGroupQuery(e,t,i,a){const l=t.collectionGroup;let c=Pu();return this.indexManager.getCollectionParents(e,l).next(d=>ee.forEach(d,m=>{const p=function(T,A){return new ja(A,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)}(t,m.child(l));return this.getDocumentsMatchingCollectionQuery(e,p,i,a).next(_=>{_.forEach((T,A)=>{c=c.insert(T,A)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,t,i,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,a))).next(c=>{l.forEach((m,p)=>{const _=p.getKey();c.get(_)===null&&(c=c.insert(_,Kt.newInvalidDocument(_)))});let d=Pu();return c.forEach((m,p)=>{const _=l.get(m);_!==void 0&&ju(_.mutation,p,kn.empty(),ut.now()),yd(t,p)&&(d=d.insert(m,p))}),d})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _x{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return ee.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,function(a){return{id:a.id,version:a.version,createTime:Un(a.createTime)}}(t)),ee.resolve()}getNamedQuery(e,t){return ee.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,function(a){return{name:a.name,query:ox(a.bundledQuery),readTime:Un(a.readTime)}}(t)),ee.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vx{constructor(){this.overlays=new gt(me.comparator),this.kr=new Map}getOverlay(e,t){return ee.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Ca();return ee.forEach(t,a=>this.getOverlay(e,a).next(l=>{l!==null&&i.set(a,l)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((a,l)=>{this.wt(e,t,l)}),ee.resolve()}removeOverlaysForBatchId(e,t,i){const a=this.kr.get(i);return a!==void 0&&(a.forEach(l=>this.overlays=this.overlays.remove(l)),this.kr.delete(i)),ee.resolve()}getOverlaysForCollection(e,t,i){const a=Ca(),l=t.length+1,c=new me(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const m=d.getNext().value,p=m.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===l&&m.largestBatchId>i&&a.set(m.getKey(),m)}return ee.resolve(a)}getOverlaysForCollectionGroup(e,t,i,a){let l=new gt((p,_)=>p-_);const c=this.overlays.getIterator();for(;c.hasNext();){const p=c.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>i){let _=l.get(p.largestBatchId);_===null&&(_=Ca(),l=l.insert(p.largestBatchId,_)),_.set(p.getKey(),p)}}const d=Ca(),m=l.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach((p,_)=>d.set(p,_)),!(d.size()>=a)););return ee.resolve(d)}wt(e,t,i){const a=this.overlays.get(i.key);if(a!==null){const c=this.kr.get(a.largestBatchId).delete(i.key);this.kr.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new U2(t,i));let l=this.kr.get(t);l===void 0&&(l=Ue(),this.kr.set(t,l)),this.kr.set(t,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ex{constructor(){this.sessionToken=rn.EMPTY_BYTE_STRING}getSessionToken(e){return ee.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ee.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dy{constructor(){this.qr=new Ut($t.Qr),this.$r=new Ut($t.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const i=new $t(e,t);this.qr=this.qr.add(i),this.$r=this.$r.add(i)}Kr(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.Wr(new $t(e,t))}Gr(e,t){e.forEach(i=>this.removeReference(i,t))}zr(e){const t=new me(new Je([])),i=new $t(t,e),a=new $t(t,e+1),l=[];return this.$r.forEachInRange([i,a],c=>{this.Wr(c),l.push(c.key)}),l}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new me(new Je([])),i=new $t(t,e),a=new $t(t,e+1);let l=Ue();return this.$r.forEachInRange([i,a],c=>{l=l.add(c.key)}),l}containsKey(e){const t=new $t(e,0),i=this.qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class $t{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return me.comparator(e.key,t.key)||Oe(e.Hr,t.Hr)}static Ur(e,t){return Oe(e.Hr,t.Hr)||me.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new Ut($t.Qr)}checkEmpty(e){return ee.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,a){const l=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new L2(l,t,i,a);this.mutationQueue.push(c);for(const d of a)this.Yr=this.Yr.add(new $t(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return ee.resolve(c)}lookupMutationBatch(e,t){return ee.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,a=this.Xr(i),l=a<0?0:a;return ee.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return ee.resolve(this.mutationQueue.length===0?Ty:this.er-1)}getAllMutationBatches(e){return ee.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new $t(t,0),a=new $t(t,Number.POSITIVE_INFINITY),l=[];return this.Yr.forEachInRange([i,a],c=>{const d=this.Zr(c.Hr);l.push(d)}),ee.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Ut(Oe);return t.forEach(a=>{const l=new $t(a,0),c=new $t(a,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([l,c],d=>{i=i.add(d.Hr)})}),ee.resolve(this.ei(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,a=i.length+1;let l=i;me.isDocumentKey(l)||(l=l.child(""));const c=new $t(new me(l),0);let d=new Ut(Oe);return this.Yr.forEachWhile(m=>{const p=m.key.path;return!!i.isPrefixOf(p)&&(p.length===a&&(d=d.add(m.Hr)),!0)},c),ee.resolve(this.ei(d))}ei(e){const t=[];return e.forEach(i=>{const a=this.Zr(i);a!==null&&t.push(a)}),t}removeMutationBatch(e,t){Fe(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Yr;return ee.forEach(t.mutations,a=>{const l=new $t(a.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.Yr=i})}rr(e){}containsKey(e,t){const i=new $t(t,0),a=this.Yr.firstAfterOrEqual(i);return ee.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,ee.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ax{constructor(e){this.ni=e,this.docs=function(){return new gt(me.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,a=this.docs.get(i),l=a?a.size:0,c=this.ni(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return ee.resolve(i?i.document.mutableCopy():Kt.newInvalidDocument(t))}getEntries(e,t){let i=Pi();return t.forEach(a=>{const l=this.docs.get(a);i=i.insert(a,l?l.document.mutableCopy():Kt.newInvalidDocument(a))}),ee.resolve(i)}getDocumentsMatchingQuery(e,t,i,a){let l=Pi();const c=t.path,d=new me(c.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(d);for(;m.hasNext();){const{key:p,value:{document:_}}=m.getNext();if(!c.isPrefixOf(p.path))break;p.path.length>c.length+1||WP(XP(_),i)<=0||(a.has(_.key)||yd(t,_))&&(l=l.insert(_.key,_.mutableCopy()))}return ee.resolve(l)}getAllFromCollectionGroup(e,t,i,a){_e(9500)}ri(e,t){return ee.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new bx(this)}getSize(e){return ee.resolve(this.size)}}class bx extends px{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach((i,a)=>{a.isValidDocument()?t.push(this.Or.addEntry(e,a)):this.Or.removeEntry(i)}),ee.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx{constructor(e){this.persistence=e,this.ii=new Ba(t=>by(t),wy),this.lastRemoteSnapshotVersion=Ae.min(),this.highestTargetId=0,this.si=0,this.oi=new Dy,this.targetCount=0,this._i=nl.ar()}forEachTarget(e,t){return this.ii.forEach((i,a)=>t(a)),ee.resolve()}getLastRemoteSnapshotVersion(e){return ee.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ee.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),ee.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.si&&(this.si=t),ee.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new nl(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,ee.resolve()}updateTargetData(e,t){return this.hr(t),ee.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,ee.resolve()}removeTargets(e,t,i){let a=0;const l=[];return this.ii.forEach((c,d)=>{d.sequenceNumber<=t&&i.get(d.targetId)===null&&(this.ii.delete(c),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),a++)}),ee.waitFor(l).next(()=>a)}getTargetCount(e){return ee.resolve(this.targetCount)}getTargetData(e,t){const i=this.ii.get(t)||null;return ee.resolve(i)}addMatchingKeys(e,t,i){return this.oi.Kr(t,i),ee.resolve()}removeMatchingKeys(e,t,i){this.oi.Gr(t,i);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach(c=>{l.push(a.markPotentiallyOrphaned(e,c))}),ee.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),ee.resolve()}getMatchingKeysForTargetId(e,t){const i=this.oi.Jr(t);return ee.resolve(i)}containsKey(e,t){return ee.resolve(this.oi.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SS{constructor(e,t){this.ai={},this.overlays={},this.ui=new fd(0),this.ci=!1,this.ci=!0,this.li=new Ex,this.referenceDelegate=e(this),this.hi=new wx(this),this.indexManager=new lx,this.remoteDocumentCache=function(a){return new Ax(a)}(i=>this.referenceDelegate.Pi(i)),this.serializer=new ax(t),this.Ti=new _x(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new vx,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ai[e.toKey()];return i||(i=new Tx(t,this.referenceDelegate),this.ai[e.toKey()]=i),i}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,i){ue("MemoryPersistence","Starting transaction:",e);const a=new Sx(this.ui.next());return this.referenceDelegate.Ii(),i(a).next(l=>this.referenceDelegate.di(a).next(()=>l)).toPromise().then(l=>(a.raiseOnCommittedEvent(),l))}Ei(e,t){return ee.or(Object.values(this.ai).map(i=>()=>i.containsKey(e,t)))}}class Sx extends JP{constructor(e){super(),this.currentSequenceNumber=e}}class Oy{constructor(e){this.persistence=e,this.Ai=new Dy,this.Ri=null}static Vi(e){return new Oy(e)}get mi(){if(this.Ri)return this.Ri;throw _e(60996)}addReference(e,t,i){return this.Ai.addReference(i,t),this.mi.delete(i.toString()),ee.resolve()}removeReference(e,t,i){return this.Ai.removeReference(i,t),this.mi.add(i.toString()),ee.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),ee.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(a=>this.mi.add(a.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(a=>{a.forEach(l=>this.mi.add(l.toString()))}).next(()=>i.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ee.forEach(this.mi,i=>{const a=me.fromPath(i);return this.fi(e,a).next(l=>{l||t.removeEntry(a,Ae.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(i=>{i?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return ee.or([()=>ee.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Kf{constructor(e,t){this.persistence=e,this.gi=new Ba(i=>n2(i.path),(i,a)=>i.isEqual(a)),this.garbageCollector=mx(this,t)}static Vi(e,t){return new Kf(e,t)}Ii(){}di(e){return ee.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>t.next(a=>i+a))}yr(e){let t=0;return this.gr(e,i=>{t++}).next(()=>t)}gr(e,t){return ee.forEach(this.gi,(i,a)=>this.Sr(e,i,a).next(l=>l?ee.resolve():t(a)))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.ri(e,c=>this.Sr(e,c,t).next(d=>{d||(i++,l.removeEntry(c,Ae.min()))})).next(()=>l.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),ee.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.gi.set(i,e.currentSequenceNumber),ee.resolve()}removeReference(e,t,i){return this.gi.set(i,e.currentSequenceNumber),ee.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),ee.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Af(e.data.value)),t}Sr(e,t,i){return ee.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.gi.get(t);return ee.resolve(a!==void 0&&a>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class My{constructor(e,t,i,a){this.targetId=e,this.fromCache=t,this.Is=i,this.ds=a}static Es(e,t){let i=Ue(),a=Ue();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new My(e,t.fromCache,i,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rx{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ix{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return tD()?8:e2(mn())>0?6:4}()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,i,a){const l={result:null};return this.ps(e,t).next(c=>{l.result=c}).next(()=>{if(!l.result)return this.ys(e,t,a,i).next(c=>{l.result=c})}).next(()=>{if(l.result)return;const c=new Rx;return this.ws(e,t,c).next(d=>{if(l.result=d,this.Rs)return this.Ss(e,t,c,d.size)})}).next(()=>l.result)}Ss(e,t,i,a){return i.documentReadCount<this.Vs?(zo()<=ke.DEBUG&&ue("QueryEngine","SDK will not create cache indexes for query:",Fo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),ee.resolve()):(zo()<=ke.DEBUG&&ue("QueryEngine","Query:",Fo(t),"scans",i.documentReadCount,"local documents and returns",a,"documents as results."),i.documentReadCount>this.fs*a?(zo()<=ke.DEBUG&&ue("QueryEngine","The SDK decides to create cache indexes for query:",Fo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,jr(t))):ee.resolve())}ps(e,t){if(tA(t))return ee.resolve(null);let i=jr(t);return this.indexManager.getIndexType(e,i).next(a=>a===0?null:(t.limit!==null&&a===1&&(t=qf(t,null,"F"),i=jr(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(l=>{const c=Ue(...l);return this.gs.getDocuments(e,c).next(d=>this.indexManager.getMinOffset(e,i).next(m=>{const p=this.bs(t,d);return this.Ds(t,p,c,m.readTime)?this.ps(e,qf(t,null,"F")):this.vs(e,p,t,m)}))})))}ys(e,t,i,a){return tA(t)||a.isEqual(Ae.min())?ee.resolve(null):this.gs.getDocuments(e,i).next(l=>{const c=this.bs(t,l);return this.Ds(t,c,i,a)?ee.resolve(null):(zo()<=ke.DEBUG&&ue("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Fo(t)),this.vs(e,c,t,YP(a,Zu)).next(d=>d))})}bs(e,t){let i=new Ut(Jw(e));return t.forEach((a,l)=>{yd(e,l)&&(i=i.add(l))}),i}Ds(e,t,i,a){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}ws(e,t,i){return zo()<=ke.DEBUG&&ue("QueryEngine","Using full collection scan to execute query:",Fo(t)),this.gs.getDocumentsMatchingQuery(e,t,ws.min(),i)}vs(e,t,i,a){return this.gs.getDocumentsMatchingQuery(e,i,a).next(l=>(t.forEach(c=>{l=l.insert(c.key,c)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Py="LocalStore",Cx=3e8;class Nx{constructor(e,t,i,a){this.persistence=e,this.Cs=t,this.serializer=a,this.Fs=new gt(Oe),this.Ms=new Ba(l=>by(l),wy),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(i)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new yx(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}}function Dx(n,e,t,i){return new Nx(n,e,t,i)}async function RS(n,e){const t=Se(n);return await t.persistence.runTransaction("Handle user change","readonly",i=>{let a;return t.mutationQueue.getAllMutationBatches(i).next(l=>(a=l,t.Ns(e),t.mutationQueue.getAllMutationBatches(i))).next(l=>{const c=[],d=[];let m=Ue();for(const p of a){c.push(p.batchId);for(const _ of p.mutations)m=m.add(_.key)}for(const p of l){d.push(p.batchId);for(const _ of p.mutations)m=m.add(_.key)}return t.localDocuments.getDocuments(i,m).next(p=>({Bs:p,removedBatchIds:c,addedBatchIds:d}))})})}function Ox(n,e){const t=Se(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const a=e.batch.keys(),l=t.Os.newChangeBuffer({trackRemovals:!0});return function(d,m,p,_){const T=p.batch,A=T.keys();let S=ee.resolve();return A.forEach(N=>{S=S.next(()=>_.getEntry(m,N)).next(q=>{const U=p.docVersions.get(N);Fe(U!==null,48541),q.version.compareTo(U)<0&&(T.applyToRemoteDocument(q,p),q.isValidDocument()&&(q.setReadTime(p.commitVersion),_.addEntry(q)))})}),S.next(()=>d.mutationQueue.removeMutationBatch(m,T))}(t,i,e,l).next(()=>l.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,a,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(d){let m=Ue();for(let p=0;p<d.mutationResults.length;++p)d.mutationResults[p].transformResults.length>0&&(m=m.add(d.batch.mutations[p].key));return m}(e))).next(()=>t.localDocuments.getDocuments(i,a))})}function IS(n){const e=Se(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function Mx(n,e){const t=Se(n),i=e.snapshotVersion;let a=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const c=t.Os.newChangeBuffer({trackRemovals:!0});a=t.Fs;const d=[];e.targetChanges.forEach((_,T)=>{const A=a.get(T);if(!A)return;d.push(t.hi.removeMatchingKeys(l,_.removedDocuments,T).next(()=>t.hi.addMatchingKeys(l,_.addedDocuments,T)));let S=A.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(T)!==null?S=S.withResumeToken(rn.EMPTY_BYTE_STRING,Ae.min()).withLastLimboFreeSnapshotVersion(Ae.min()):_.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(_.resumeToken,i)),a=a.insert(T,S),function(q,U,$){return q.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-q.snapshotVersion.toMicroseconds()>=Cx?!0:$.addedDocuments.size+$.modifiedDocuments.size+$.removedDocuments.size>0}(A,S,_)&&d.push(t.hi.updateTargetData(l,S))});let m=Pi(),p=Ue();if(e.documentUpdates.forEach(_=>{e.resolvedLimboDocuments.has(_)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,_))}),d.push(Px(l,c,e.documentUpdates).next(_=>{m=_.Ls,p=_.ks})),!i.isEqual(Ae.min())){const _=t.hi.getLastRemoteSnapshotVersion(l).next(T=>t.hi.setTargetsMetadata(l,l.currentSequenceNumber,i));d.push(_)}return ee.waitFor(d).next(()=>c.apply(l)).next(()=>t.localDocuments.getLocalViewOfDocuments(l,m,p)).next(()=>m)}).then(l=>(t.Fs=a,l))}function Px(n,e,t){let i=Ue(),a=Ue();return t.forEach(l=>i=i.add(l)),e.getEntries(n,i).next(l=>{let c=Pi();return t.forEach((d,m)=>{const p=l.get(d);m.isFoundDocument()!==p.isFoundDocument()&&(a=a.add(d)),m.isNoDocument()&&m.version.isEqual(Ae.min())?(e.removeEntry(d,m.readTime),c=c.insert(d,m)):!p.isValidDocument()||m.version.compareTo(p.version)>0||m.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(m),c=c.insert(d,m)):ue(Py,"Ignoring outdated watch update for ",d,". Current version:",p.version," Watch version:",m.version)}),{Ls:c,ks:a}})}function xx(n,e){const t=Se(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=Ty),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function Vx(n,e){const t=Se(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let a;return t.hi.getTargetData(i,e).next(l=>l?(a=l,ee.resolve(a)):t.hi.allocateTargetId(i).next(c=>(a=new gs(e,c,"TargetPurposeListen",i.currentSequenceNumber),t.hi.addTargetData(i,a).next(()=>a))))}).then(i=>{const a=t.Fs.get(i.targetId);return(a===null||i.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(i.targetId,i),t.Ms.set(e,i.targetId)),i})}async function Vg(n,e,t){const i=Se(n),a=i.Fs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,c=>i.persistence.referenceDelegate.removeTarget(c,a))}catch(c){if(!fl(c))throw c;ue(Py,`Failed to update sequence numbers for target ${e}: ${c}`)}i.Fs=i.Fs.remove(e),i.Ms.delete(a.target)}function mA(n,e,t){const i=Se(n);let a=Ae.min(),l=Ue();return i.persistence.runTransaction("Execute query","readwrite",c=>function(m,p,_){const T=Se(m),A=T.Ms.get(_);return A!==void 0?ee.resolve(T.Fs.get(A)):T.hi.getTargetData(p,_)}(i,c,jr(e)).next(d=>{if(d)return a=d.lastLimboFreeSnapshotVersion,i.hi.getMatchingKeysForTargetId(c,d.targetId).next(m=>{l=m})}).next(()=>i.Cs.getDocumentsMatchingQuery(c,e,t?a:Ae.min(),t?l:Ue())).next(d=>(kx(i,A2(e),d),{documents:d,qs:l})))}function kx(n,e,t){let i=n.xs.get(e)||Ae.min();t.forEach((a,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)}),n.xs.set(e,i)}class pA{constructor(){this.activeTargetIds=C2()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Lx{constructor(){this.Fo=new pA,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,i){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new pA,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ux{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gA="ConnectivityMonitor";class yA{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){ue(gA,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){ue(gA,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hf=null;function kg(){return hf===null?hf=function(){return 268435456+Math.round(2147483648*Math.random())}():hf++,"0x"+hf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eg="RestConnection",zx={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Fx{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${i}/databases/${a}`,this.Ko=this.databaseId.database===Ff?`project_id=${i}`:`project_id=${i}&database_id=${a}`}Wo(e,t,i,a,l){const c=kg(),d=this.Go(e,t.toUriEncodedString());ue(eg,`Sending RPC '${e}' ${c}:`,d,i);const m={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(m,a,l);const{host:p}=new URL(d),_=za(p);return this.jo(e,d,m,i,_).then(T=>(ue(eg,`Received RPC '${e}' ${c}: `,T),T),T=>{throw bs(eg,`RPC '${e}' ${c} failed with error: `,T,"url: ",d,"request:",i),T})}Jo(e,t,i,a,l,c){return this.Wo(e,t,i,a,l)}zo(e,t,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+cl}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((a,l)=>e[l]=a),i&&i.headers.forEach((a,l)=>e[l]=a)}Go(e,t){const i=zx[e];return`${this.$o}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jx{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ln="WebChannelConnection";class Bx extends Fx{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,i,a,l){const c=kg();return new Promise((d,m)=>{const p=new Sw;p.setWithCredentials(!0),p.listenOnce(Rw.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case Tf.NO_ERROR:const T=p.getResponseJson();ue(ln,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(T)),d(T);break;case Tf.TIMEOUT:ue(ln,`RPC '${e}' ${c} timed out`),m(new se(Y.DEADLINE_EXCEEDED,"Request time out"));break;case Tf.HTTP_ERROR:const A=p.getStatus();if(ue(ln,`RPC '${e}' ${c} failed with status:`,A,"response text:",p.getResponseText()),A>0){let S=p.getResponseJson();Array.isArray(S)&&(S=S[0]);const N=S?.error;if(N&&N.status&&N.message){const q=function($){const ie=$.toLowerCase().replace(/_/g,"-");return Object.values(Y).indexOf(ie)>=0?ie:Y.UNKNOWN}(N.status);m(new se(q,N.message))}else m(new se(Y.UNKNOWN,"Server responded with status "+p.getStatus()))}else m(new se(Y.UNAVAILABLE,"Connection failed."));break;default:_e(9055,{c_:e,streamId:c,l_:p.getLastErrorCode(),h_:p.getLastError()})}}finally{ue(ln,`RPC '${e}' ${c} completed.`)}});const _=JSON.stringify(a);ue(ln,`RPC '${e}' ${c} sending request:`,a),p.send(t,"POST",_,i,15)})}P_(e,t,i){const a=kg(),l=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=Nw(),d=Cw(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(m.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(m.useFetchStreams=!0),this.zo(m.initMessageHeaders,t,i),m.encodeInitMessageHeaders=!0;const _=l.join("");ue(ln,`Creating RPC '${e}' stream ${a}: ${_}`,m);const T=c.createWebChannel(_,m);this.T_(T);let A=!1,S=!1;const N=new jx({Ho:U=>{S?ue(ln,`Not sending because RPC '${e}' stream ${a} is closed:`,U):(A||(ue(ln,`Opening RPC '${e}' stream ${a} transport.`),T.open(),A=!0),ue(ln,`RPC '${e}' stream ${a} sending:`,U),T.send(U))},Yo:()=>T.close()}),q=(U,$,ie)=>{U.listen($,ne=>{try{ie(ne)}catch(he){setTimeout(()=>{throw he},0)}})};return q(T,Mu.EventType.OPEN,()=>{S||(ue(ln,`RPC '${e}' stream ${a} transport opened.`),N.s_())}),q(T,Mu.EventType.CLOSE,()=>{S||(S=!0,ue(ln,`RPC '${e}' stream ${a} transport closed`),N.__(),this.I_(T))}),q(T,Mu.EventType.ERROR,U=>{S||(S=!0,bs(ln,`RPC '${e}' stream ${a} transport errored. Name:`,U.name,"Message:",U.message),N.__(new se(Y.UNAVAILABLE,"The operation could not be completed")))}),q(T,Mu.EventType.MESSAGE,U=>{var $;if(!S){const ie=U.data[0];Fe(!!ie,16349);const ne=ie,he=ne?.error||(($=ne[0])===null||$===void 0?void 0:$.error);if(he){ue(ln,`RPC '${e}' stream ${a} received error:`,he);const ce=he.status;let Te=function(R){const O=Dt[R];if(O!==void 0)return fS(O)}(ce),P=he.message;Te===void 0&&(Te=Y.INTERNAL,P="Unknown error status: "+ce+" with message "+he.message),S=!0,N.__(new se(Te,P)),T.close()}else ue(ln,`RPC '${e}' stream ${a} received:`,ie),N.a_(ie)}}),q(d,Iw.STAT_EVENT,U=>{U.stat===Sg.PROXY?ue(ln,`RPC '${e}' stream ${a} detected buffering proxy`):U.stat===Sg.NOPROXY&&ue(ln,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{N.o_()},0),N}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}}function tg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ad(n){return new $2(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xy{constructor(e,t,i=1e3,a=1.5,l=6e4){this.Fi=e,this.timerId=t,this.d_=i,this.E_=a,this.A_=l,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),i=Math.max(0,Date.now()-this.m_),a=Math.max(0,t-i);a>0&&ue("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,a,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _A="PersistentStream";class CS{constructor(e,t,i,a,l,c,d,m){this.Fi=e,this.w_=i,this.S_=a,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=m,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new xy(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===Y.RESOURCE_EXHAUSTED?(Mi(t.toString()),Mi("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===Y.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,a])=>{this.b_===t&&this.W_(i,a)},i=>{e(()=>{const a=new se(Y.UNKNOWN,"Fetching auth token failed: "+i.message);return this.G_(a)})})}W_(e,t){const i=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{i(()=>this.listener.Zo())}),this.stream.e_(()=>{i(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(a=>{i(()=>this.G_(a))}),this.stream.onMessage(a=>{i(()=>++this.C_==1?this.j_(a):this.onNext(a))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return ue(_A,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(ue(_A,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class qx extends CS{constructor(e,t,i,a,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,a,c),this.serializer=l}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=X2(this.serializer,e),i=function(l){if(!("targetChange"in l))return Ae.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Ae.min():c.readTime?Un(c.readTime):Ae.min()}(e);return this.listener.J_(t,i)}H_(e){const t={};t.database=xg(this.serializer),t.addTarget=function(l,c){let d;const m=c.target;if(d=Dg(m)?{documents:Z2(l,m)}:{query:ES(l,m).Vt},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=pS(l,c.resumeToken);const p=Mg(l,c.expectedCount);p!==null&&(d.expectedCount=p)}else if(c.snapshotVersion.compareTo(Ae.min())>0){d.readTime=Gf(l,c.snapshotVersion.toTimestamp());const p=Mg(l,c.expectedCount);p!==null&&(d.expectedCount=p)}return d}(this.serializer,e);const i=tx(this.serializer,e);i&&(t.labels=i),this.k_(t)}Y_(e){const t={};t.database=xg(this.serializer),t.removeTarget=e,this.k_(t)}}class Hx extends CS{constructor(e,t,i,a,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,a,c),this.serializer=l}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return Fe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Fe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Fe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=W2(e.writeResults,e.commitTime),i=Un(e.commitTime);return this.listener.ta(i,t)}na(){const e={};e.database=xg(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>vS(this.serializer,i))};this.k_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gx{}class $x extends Gx{constructor(e,t,i,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=a,this.ra=!1}ia(){if(this.ra)throw new se(Y.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,i,a){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,c])=>this.connection.Wo(e,Pg(t,i),a,l,c)).catch(l=>{throw l.name==="FirebaseError"?(l.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new se(Y.UNKNOWN,l.toString())})}Jo(e,t,i,a,l){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,d])=>this.connection.Jo(e,Pg(t,i),a,c,d,l)).catch(c=>{throw c.name==="FirebaseError"?(c.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new se(Y.UNKNOWN,c.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class Kx{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Mi(t),this._a=!1):ue("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ka="RemoteStore";class Qx{constructor(e,t,i,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=l,this.Ea.xo(c=>{i.enqueueAndForget(async()=>{qa(this)&&(ue(ka,"Restarting streams for network reachability change."),await async function(m){const p=Se(m);p.Ia.add(4),await Rc(p),p.Aa.set("Unknown"),p.Ia.delete(4),await bd(p)}(this))})}),this.Aa=new Kx(i,a)}}async function bd(n){if(qa(n))for(const e of n.da)await e(!0)}async function Rc(n){for(const e of n.da)await e(!1)}function NS(n,e){const t=Se(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),Uy(t)?Ly(t):dl(t).x_()&&ky(t,e))}function Vy(n,e){const t=Se(n),i=dl(t);t.Ta.delete(e),i.x_()&&DS(t,e),t.Ta.size===0&&(i.x_()?i.B_():qa(t)&&t.Aa.set("Unknown"))}function ky(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ae.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}dl(n).H_(e)}function DS(n,e){n.Ra.$e(e),dl(n).Y_(e)}function Ly(n){n.Ra=new B2({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),dl(n).start(),n.Aa.aa()}function Uy(n){return qa(n)&&!dl(n).M_()&&n.Ta.size>0}function qa(n){return Se(n).Ia.size===0}function OS(n){n.Ra=void 0}async function Yx(n){n.Aa.set("Online")}async function Xx(n){n.Ta.forEach((e,t)=>{ky(n,e)})}async function Wx(n,e){OS(n),Uy(n)?(n.Aa.la(e),Ly(n)):n.Aa.set("Unknown")}async function Zx(n,e,t){if(n.Aa.set("Online"),e instanceof mS&&e.state===2&&e.cause)try{await async function(a,l){const c=l.cause;for(const d of l.targetIds)a.Ta.has(d)&&(await a.remoteSyncer.rejectListen(d,c),a.Ta.delete(d),a.Ra.removeTarget(d))}(n,e)}catch(i){ue(ka,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Qf(n,i)}else if(e instanceof Sf?n.Ra.Ye(e):e instanceof dS?n.Ra.it(e):n.Ra.et(e),!t.isEqual(Ae.min()))try{const i=await IS(n.localStore);t.compareTo(i)>=0&&await function(l,c){const d=l.Ra.Pt(c);return d.targetChanges.forEach((m,p)=>{if(m.resumeToken.approximateByteSize()>0){const _=l.Ta.get(p);_&&l.Ta.set(p,_.withResumeToken(m.resumeToken,c))}}),d.targetMismatches.forEach((m,p)=>{const _=l.Ta.get(m);if(!_)return;l.Ta.set(m,_.withResumeToken(rn.EMPTY_BYTE_STRING,_.snapshotVersion)),DS(l,m);const T=new gs(_.target,m,p,_.sequenceNumber);ky(l,T)}),l.remoteSyncer.applyRemoteEvent(d)}(n,t)}catch(i){ue(ka,"Failed to raise snapshot:",i),await Qf(n,i)}}async function Qf(n,e,t){if(!fl(e))throw e;n.Ia.add(1),await Rc(n),n.Aa.set("Offline"),t||(t=()=>IS(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{ue(ka,"Retrying IndexedDB access"),await t(),n.Ia.delete(1),await bd(n)})}function MS(n,e){return e().catch(t=>Qf(n,t,e))}async function wd(n){const e=Se(n),t=Cs(e);let i=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Ty;for(;Jx(e);)try{const a=await xx(e.localStore,i);if(a===null){e.Pa.length===0&&t.B_();break}i=a.batchId,eV(e,a)}catch(a){await Qf(e,a)}PS(e)&&xS(e)}function Jx(n){return qa(n)&&n.Pa.length<10}function eV(n,e){n.Pa.push(e);const t=Cs(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function PS(n){return qa(n)&&!Cs(n).M_()&&n.Pa.length>0}function xS(n){Cs(n).start()}async function tV(n){Cs(n).na()}async function nV(n){const e=Cs(n);for(const t of n.Pa)e.X_(t.mutations)}async function rV(n,e,t){const i=n.Pa.shift(),a=Iy.from(i,e,t);await MS(n,()=>n.remoteSyncer.applySuccessfulWrite(a)),await wd(n)}async function iV(n,e){e&&Cs(n).Z_&&await async function(i,a){if(function(c){return hS(c)&&c!==Y.ABORTED}(a.code)){const l=i.Pa.shift();Cs(i).N_(),await MS(i,()=>i.remoteSyncer.rejectFailedWrite(l.batchId,a)),await wd(i)}}(n,e),PS(n)&&xS(n)}async function vA(n,e){const t=Se(n);t.asyncQueue.verifyOperationInProgress(),ue(ka,"RemoteStore received new credentials");const i=qa(t);t.Ia.add(3),await Rc(t),i&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await bd(t)}async function sV(n,e){const t=Se(n);e?(t.Ia.delete(2),await bd(t)):e||(t.Ia.add(2),await Rc(t),t.Aa.set("Unknown"))}function dl(n){return n.Va||(n.Va=function(t,i,a){const l=Se(t);return l.ia(),new qx(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)}(n.datastore,n.asyncQueue,{Zo:Yx.bind(null,n),e_:Xx.bind(null,n),n_:Wx.bind(null,n),J_:Zx.bind(null,n)}),n.da.push(async e=>{e?(n.Va.N_(),Uy(n)?Ly(n):n.Aa.set("Unknown")):(await n.Va.stop(),OS(n))})),n.Va}function Cs(n){return n.ma||(n.ma=function(t,i,a){const l=Se(t);return l.ia(),new Hx(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)}(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:tV.bind(null,n),n_:iV.bind(null,n),ea:nV.bind(null,n),ta:rV.bind(null,n)}),n.da.push(async e=>{e?(n.ma.N_(),await wd(n)):(await n.ma.stop(),n.Pa.length>0&&(ue(ka,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))})),n.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zy{constructor(e,t,i,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=a,this.removalCallback=l,this.deferred=new gr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,a,l){const c=Date.now()+i,d=new zy(e,t,c,a,l);return d.start(i),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new se(Y.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Fy(n,e){if(Mi("AsyncQueue",`${e}: ${n}`),fl(n))return new se(Y.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{static emptySet(e){return new Qo(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||me.comparator(t.key,i.key):(t,i)=>me.comparator(t.key,i.key),this.keyedMap=Pu(),this.sortedSet=new gt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Qo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=i.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Qo;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EA{constructor(){this.fa=new gt(me.comparator)}track(e){const t=e.doc.key,i=this.fa.get(t);i?e.type!==0&&i.type===3?this.fa=this.fa.insert(t,e):e.type===3&&i.type!==1?this.fa=this.fa.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.fa=this.fa.remove(t):e.type===1&&i.type===2?this.fa=this.fa.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):_e(63341,{At:e,ga:i}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal((t,i)=>{e.push(i)}),e}}class rl{constructor(e,t,i,a,l,c,d,m,p){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=a,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=m,this.hasCachedResults=p}static fromInitialDocuments(e,t,i,a,l){const c=[];return t.forEach(d=>{c.push({type:0,doc:d})}),new rl(e,t,Qo.emptySet(t),c,i,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&gd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==i[a].type||!t[a].doc.isEqual(i[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aV{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class oV{constructor(){this.queries=TA(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,i){const a=Se(t),l=a.queries;a.queries=TA(),l.forEach((c,d)=>{for(const m of d.wa)m.onError(i)})})(this,new se(Y.ABORTED,"Firestore shutting down"))}}function TA(){return new Ba(n=>Zw(n),gd)}async function jy(n,e){const t=Se(n);let i=3;const a=e.query;let l=t.queries.get(a);l?!l.Sa()&&e.ba()&&(i=2):(l=new aV,i=e.ba()?0:1);try{switch(i){case 0:l.ya=await t.onListen(a,!0);break;case 1:l.ya=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(c){const d=Fy(c,`Initialization of query '${Fo(e.query)}' failed`);return void e.onError(d)}t.queries.set(a,l),l.wa.push(e),e.va(t.onlineState),l.ya&&e.Ca(l.ya)&&qy(t)}async function By(n,e){const t=Se(n),i=e.query;let a=3;const l=t.queries.get(i);if(l){const c=l.wa.indexOf(e);c>=0&&(l.wa.splice(c,1),l.wa.length===0?a=e.ba()?0:1:!l.Sa()&&e.ba()&&(a=2))}switch(a){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function lV(n,e){const t=Se(n);let i=!1;for(const a of e){const l=a.query,c=t.queries.get(l);if(c){for(const d of c.wa)d.Ca(a)&&(i=!0);c.ya=a}}i&&qy(t)}function uV(n,e,t){const i=Se(n),a=i.queries.get(e);if(a)for(const l of a.wa)l.onError(t);i.queries.delete(e)}function qy(n){n.Da.forEach(e=>{e.next()})}var Lg,AA;(AA=Lg||(Lg={})).Fa="default",AA.Cache="cache";class Hy{constructor(e,t,i){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=i||{}}Ca(e){if(!this.options.includeMetadataChanges){const i=[];for(const a of e.docChanges)a.type!==3&&i.push(a);e=new rl(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;const i=t!=="Offline";return(!this.options.ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=rl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Lg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VS{constructor(e){this.key=e}}class kS{constructor(e){this.key=e}}class cV{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Ue(),this.mutatedKeys=Ue(),this.Xa=Jw(e),this.eu=new Qo(this.Xa)}get tu(){return this.Ha}nu(e,t){const i=t?t.ru:new EA,a=t?t.eu:this.eu;let l=t?t.mutatedKeys:this.mutatedKeys,c=a,d=!1;const m=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,p=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((_,T)=>{const A=a.get(_),S=yd(this.query,T)?T:null,N=!!A&&this.mutatedKeys.has(A.key),q=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let U=!1;A&&S?A.data.isEqual(S.data)?N!==q&&(i.track({type:3,doc:S}),U=!0):this.iu(A,S)||(i.track({type:2,doc:S}),U=!0,(m&&this.Xa(S,m)>0||p&&this.Xa(S,p)<0)&&(d=!0)):!A&&S?(i.track({type:0,doc:S}),U=!0):A&&!S&&(i.track({type:1,doc:A}),U=!0,(m||p)&&(d=!0)),U&&(S?(c=c.add(S),l=q?l.add(_):l.delete(_)):(c=c.delete(_),l=l.delete(_)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const _=this.query.limitType==="F"?c.last():c.first();c=c.delete(_.key),l=l.delete(_.key),i.track({type:1,doc:_})}return{eu:c,ru:i,Ds:d,mutatedKeys:l}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,a){const l=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const c=e.ru.pa();c.sort((_,T)=>function(S,N){const q=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return _e(20277,{At:U})}};return q(S)-q(N)}(_.type,T.type)||this.Xa(_.doc,T.doc)),this.su(i),a=a!=null&&a;const d=t&&!a?this.ou():[],m=this.Za.size===0&&this.current&&!a?1:0,p=m!==this.Ya;return this.Ya=m,c.length!==0||p?{snapshot:new rl(this.query,e.eu,l,c,e.mutatedKeys,m===0,p,!1,!!i&&i.resumeToken.approximateByteSize()>0),_u:d}:{_u:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new EA,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=Ue(),this.eu.forEach(i=>{this.au(i.key)&&(this.Za=this.Za.add(i.key))});const t=[];return e.forEach(i=>{this.Za.has(i)||t.push(new kS(i))}),this.Za.forEach(i=>{e.has(i)||t.push(new VS(i))}),t}uu(e){this.Ha=e.qs,this.Za=Ue();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return rl.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const Gy="SyncEngine";class hV{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class fV{constructor(e){this.key=e,this.lu=!1}}class dV{constructor(e,t,i,a,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.hu={},this.Pu=new Ba(d=>Zw(d),gd),this.Tu=new Map,this.Iu=new Set,this.du=new gt(me.comparator),this.Eu=new Map,this.Au=new Dy,this.Ru={},this.Vu=new Map,this.mu=nl.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function mV(n,e,t=!0){const i=BS(n);let a;const l=i.Pu.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.cu()):a=await LS(i,e,t,!0),a}async function pV(n,e){const t=BS(n);await LS(t,e,!0,!1)}async function LS(n,e,t,i){const a=await Vx(n.localStore,jr(e)),l=a.targetId,c=n.sharedClientState.addLocalQueryTarget(l,t);let d;return i&&(d=await gV(n,e,l,c==="current",a.resumeToken)),n.isPrimaryClient&&t&&NS(n.remoteStore,a),d}async function gV(n,e,t,i,a){n.gu=(T,A,S)=>async function(q,U,$,ie){let ne=U.view.nu($);ne.Ds&&(ne=await mA(q.localStore,U.query,!1).then(({documents:P})=>U.view.nu(P,ne)));const he=ie&&ie.targetChanges.get(U.targetId),ce=ie&&ie.targetMismatches.get(U.targetId)!=null,Te=U.view.applyChanges(ne,q.isPrimaryClient,he,ce);return wA(q,U.targetId,Te._u),Te.snapshot}(n,T,A,S);const l=await mA(n.localStore,e,!0),c=new cV(e,l.qs),d=c.nu(l.documents),m=Sc.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",a),p=c.applyChanges(d,n.isPrimaryClient,m);wA(n,t,p._u);const _=new hV(e,t,c);return n.Pu.set(e,_),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),p.snapshot}async function yV(n,e,t){const i=Se(n),a=i.Pu.get(e),l=i.Tu.get(a.targetId);if(l.length>1)return i.Tu.set(a.targetId,l.filter(c=>!gd(c,e))),void i.Pu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(a.targetId),i.sharedClientState.isActiveQueryTarget(a.targetId)||await Vg(i.localStore,a.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(a.targetId),t&&Vy(i.remoteStore,a.targetId),Ug(i,a.targetId)}).catch(hl)):(Ug(i,a.targetId),await Vg(i.localStore,a.targetId,!0))}async function _V(n,e){const t=Se(n),i=t.Pu.get(e),a=t.Tu.get(i.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),Vy(t.remoteStore,i.targetId))}async function vV(n,e,t){const i=RV(n);try{const a=await function(c,d){const m=Se(c),p=ut.now(),_=d.reduce((S,N)=>S.add(N.key),Ue());let T,A;return m.persistence.runTransaction("Locally write mutations","readwrite",S=>{let N=Pi(),q=Ue();return m.Os.getEntries(S,_).next(U=>{N=U,N.forEach(($,ie)=>{ie.isValidDocument()||(q=q.add($))})}).next(()=>m.localDocuments.getOverlayedDocuments(S,N)).next(U=>{T=U;const $=[];for(const ie of d){const ne=k2(ie,T.get(ie.key).overlayedDocument);ne!=null&&$.push(new zs(ie.key,ne,Hw(ne.value.mapValue),nn.exists(!0)))}return m.mutationQueue.addMutationBatch(S,p,$,d)}).next(U=>{A=U;const $=U.applyToLocalDocumentSet(T,q);return m.documentOverlayCache.saveOverlays(S,U.batchId,$)})}).then(()=>({batchId:A.batchId,changes:tS(T)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(a.batchId),function(c,d,m){let p=c.Ru[c.currentUser.toKey()];p||(p=new gt(Oe)),p=p.insert(d,m),c.Ru[c.currentUser.toKey()]=p}(i,a.batchId,t),await Ic(i,a.changes),await wd(i.remoteStore)}catch(a){const l=Fy(a,"Failed to persist write");t.reject(l)}}async function US(n,e){const t=Se(n);try{const i=await Mx(t.localStore,e);e.targetChanges.forEach((a,l)=>{const c=t.Eu.get(l);c&&(Fe(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?c.lu=!0:a.modifiedDocuments.size>0?Fe(c.lu,14607):a.removedDocuments.size>0&&(Fe(c.lu,42227),c.lu=!1))}),await Ic(t,i,e)}catch(i){await hl(i)}}function bA(n,e,t){const i=Se(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const a=[];i.Pu.forEach((l,c)=>{const d=c.view.va(e);d.snapshot&&a.push(d.snapshot)}),function(c,d){const m=Se(c);m.onlineState=d;let p=!1;m.queries.forEach((_,T)=>{for(const A of T.wa)A.va(d)&&(p=!0)}),p&&qy(m)}(i.eventManager,e),a.length&&i.hu.J_(a),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function EV(n,e,t){const i=Se(n);i.sharedClientState.updateQueryState(e,"rejected",t);const a=i.Eu.get(e),l=a&&a.key;if(l){let c=new gt(me.comparator);c=c.insert(l,Kt.newNoDocument(l,Ae.min()));const d=Ue().add(l),m=new Td(Ae.min(),new Map,new gt(Oe),c,d);await US(i,m),i.du=i.du.remove(l),i.Eu.delete(e),$y(i)}else await Vg(i.localStore,e,!1).then(()=>Ug(i,e,t)).catch(hl)}async function TV(n,e){const t=Se(n),i=e.batch.batchId;try{const a=await Ox(t.localStore,e);FS(t,i,null),zS(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Ic(t,a)}catch(a){await hl(a)}}async function AV(n,e,t){const i=Se(n);try{const a=await function(c,d){const m=Se(c);return m.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let _;return m.mutationQueue.lookupMutationBatch(p,d).next(T=>(Fe(T!==null,37113),_=T.keys(),m.mutationQueue.removeMutationBatch(p,T))).next(()=>m.mutationQueue.performConsistencyCheck(p)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(p,_,d)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,_)).next(()=>m.localDocuments.getDocuments(p,_))})}(i.localStore,e);FS(i,e,t),zS(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Ic(i,a)}catch(a){await hl(a)}}function zS(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function FS(n,e,t){const i=Se(n);let a=i.Ru[i.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),i.Ru[i.currentUser.toKey()]=a}}function Ug(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Tu.get(e))n.Pu.delete(i),t&&n.hu.pu(i,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach(i=>{n.Au.containsKey(i)||jS(n,i)})}function jS(n,e){n.Iu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Vy(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),$y(n))}function wA(n,e,t){for(const i of t)i instanceof VS?(n.Au.addReference(i.key,e),bV(n,i)):i instanceof kS?(ue(Gy,"Document no longer in limbo: "+i.key),n.Au.removeReference(i.key,e),n.Au.containsKey(i.key)||jS(n,i.key)):_e(19791,{yu:i})}function bV(n,e){const t=e.key,i=t.path.canonicalString();n.du.get(t)||n.Iu.has(i)||(ue(Gy,"New document in limbo: "+t),n.Iu.add(i),$y(n))}function $y(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Iu.values().next().value;n.Iu.delete(e);const t=new me(Je.fromString(e)),i=n.mu.next();n.Eu.set(i,new fV(t)),n.du=n.du.insert(t,i),NS(n.remoteStore,new gs(jr(pd(t.path)),i,"TargetPurposeLimboResolution",fd.ue))}}async function Ic(n,e,t){const i=Se(n),a=[],l=[],c=[];i.Pu.isEmpty()||(i.Pu.forEach((d,m)=>{c.push(i.gu(m,e,t).then(p=>{var _;if((p||t)&&i.isPrimaryClient){const T=p?!p.fromCache:(_=t?.targetChanges.get(m.targetId))===null||_===void 0?void 0:_.current;i.sharedClientState.updateQueryState(m.targetId,T?"current":"not-current")}if(p){a.push(p);const T=My.Es(m.targetId,p);l.push(T)}}))}),await Promise.all(c),i.hu.J_(a),await async function(m,p){const _=Se(m);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",T=>ee.forEach(p,A=>ee.forEach(A.Is,S=>_.persistence.referenceDelegate.addReference(T,A.targetId,S)).next(()=>ee.forEach(A.ds,S=>_.persistence.referenceDelegate.removeReference(T,A.targetId,S)))))}catch(T){if(!fl(T))throw T;ue(Py,"Failed to update sequence numbers: "+T)}for(const T of p){const A=T.targetId;if(!T.fromCache){const S=_.Fs.get(A),N=S.snapshotVersion,q=S.withLastLimboFreeSnapshotVersion(N);_.Fs=_.Fs.insert(A,q)}}}(i.localStore,l))}async function wV(n,e){const t=Se(n);if(!t.currentUser.isEqual(e)){ue(Gy,"User change. New user:",e.toKey());const i=await RS(t.localStore,e);t.currentUser=e,function(l,c){l.Vu.forEach(d=>{d.forEach(m=>{m.reject(new se(Y.CANCELLED,c))})}),l.Vu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Ic(t,i.Bs)}}function SV(n,e){const t=Se(n),i=t.Eu.get(e);if(i&&i.lu)return Ue().add(i.key);{let a=Ue();const l=t.Tu.get(e);if(!l)return a;for(const c of l){const d=t.Pu.get(c);a=a.unionWith(d.view.tu)}return a}}function BS(n){const e=Se(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=US.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=SV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=EV.bind(null,e),e.hu.J_=lV.bind(null,e.eventManager),e.hu.pu=uV.bind(null,e.eventManager),e}function RV(n){const e=Se(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=TV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=AV.bind(null,e),e}class Yf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ad(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return Dx(this.persistence,new Ix,e.initialUser,this.serializer)}Du(e){return new SS(Oy.Vi,this.serializer)}bu(e){return new Lx}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Yf.provider={build:()=>new Yf};class IV extends Yf{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){Fe(this.persistence.referenceDelegate instanceof Kf,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new fx(i,e.asyncQueue,t)}Du(e){const t=this.cacheSizeBytes!==void 0?bn.withCacheSize(this.cacheSizeBytes):bn.DEFAULT;return new SS(i=>Kf.Vi(i,t),this.serializer)}}class zg{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>bA(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=wV.bind(null,this.syncEngine),await sV(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new oV}()}createDatastore(e){const t=Ad(e.databaseInfo.databaseId),i=function(l){return new Bx(l)}(e.databaseInfo);return function(l,c,d,m){return new $x(l,c,d,m)}(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return function(i,a,l,c,d){return new Qx(i,a,l,c,d)}(this.localStore,this.datastore,e.asyncQueue,t=>bA(this.syncEngine,t,0),function(){return yA.C()?new yA:new Ux}())}createSyncEngine(e,t){return function(a,l,c,d,m,p,_){const T=new dV(a,l,c,d,m,p);return _&&(T.fu=!0),T}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(a){const l=Se(a);ue(ka,"RemoteStore shutting down."),l.Ia.add(5),await Rc(l),l.Ea.shutdown(),l.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}zg.provider={build:()=>new zg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ky{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Mi("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CV{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new se(Y.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(a,l){const c=Se(a),d={documents:l.map(T=>$f(c.serializer,T))},m=await c.Jo("BatchGetDocuments",c.serializer.databaseId,Je.emptyPath(),d,l.length),p=new Map;m.forEach(T=>{const A=Y2(c.serializer,T);p.set(A.key.toString(),A)});const _=[];return l.forEach(T=>{const A=p.get(T.toString());Fe(!!A,55234,{key:T}),_.push(A)}),_}(this.datastore,e);return t.forEach(i=>this.recordVersion(i)),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ed(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,i)=>{const a=me.fromPath(i);this.mutations.push(new cS(a,this.precondition(a)))}),await async function(i,a){const l=Se(i),c={writes:a.map(d=>vS(l.serializer,d))};await l.Wo("Commit",l.serializer.databaseId,Je.emptyPath(),c)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw _e(50498,{Wu:e.constructor.name});t=Ae.min()}const i=this.readVersions.get(e.key.toString());if(i){if(!t.isEqual(i))throw new se(Y.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Ae.min())?nn.exists(!1):nn.updateTime(t):nn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ae.min()))throw new se(Y.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return nn.updateTime(t)}return nn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NV{constructor(e,t,i,a,l){this.asyncQueue=e,this.datastore=t,this.options=i,this.updateFunction=a,this.deferred=l,this.Gu=i.maxAttempts,this.F_=new xy(this.asyncQueue,"transaction_retry")}zu(){this.Gu-=1,this.ju()}ju(){this.F_.g_(async()=>{const e=new CV(this.datastore),t=this.Ju(e);t&&t.then(i=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(i)}).catch(a=>{this.Hu(a)}))}).catch(i=>{this.Hu(i)})})}Ju(e){try{const t=this.updateFunction(e);return!bc(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Hu(e){this.Gu>0&&this.Yu(e)?(this.Gu-=1,this.asyncQueue.enqueueAndForget(()=>(this.ju(),Promise.resolve()))):this.deferred.reject(e)}Yu(e){if(e.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!hS(t)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ns="FirestoreClient";class DV{constructor(e,t,i,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=a,this.user=cn.UNAUTHENTICATED,this.clientId=Ey.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,async c=>{ue(Ns,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(i,c=>(ue(Ns,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new gr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=Fy(t,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function ng(n,e){n.asyncQueue.verifyOperationInProgress(),ue(Ns,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(async a=>{i.isEqual(a)||(await RS(e.localStore,a),i=a)}),e.persistence.setDatabaseDeletedListener(()=>{bs("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{ue("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(a=>{bs("Terminating Firestore due to IndexedDb database deletion failed",a)})}),n._offlineComponents=e}async function SA(n,e){n.asyncQueue.verifyOperationInProgress();const t=await OV(n);ue(Ns,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(i=>vA(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>vA(e.remoteStore,a)),n._onlineComponents=e}async function OV(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ue(Ns,"Using user provided OfflineComponentProvider");try{await ng(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(a){return a.name==="FirebaseError"?a.code===Y.FAILED_PRECONDITION||a.code===Y.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(t))throw t;bs("Error using user provided cache. Falling back to memory cache: "+t),await ng(n,new Yf)}}else ue(Ns,"Using default OfflineComponentProvider"),await ng(n,new IV(void 0));return n._offlineComponents}async function Qy(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ue(Ns,"Using user provided OnlineComponentProvider"),await SA(n,n._uninitializedComponentsProvider._online)):(ue(Ns,"Using default OnlineComponentProvider"),await SA(n,new zg))),n._onlineComponents}function MV(n){return Qy(n).then(e=>e.syncEngine)}function qS(n){return Qy(n).then(e=>e.datastore)}async function Xf(n){const e=await Qy(n),t=e.eventManager;return t.onListen=mV.bind(null,e.syncEngine),t.onUnlisten=yV.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=pV.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=_V.bind(null,e.syncEngine),t}function PV(n,e,t={}){const i=new gr;return n.asyncQueue.enqueueAndForget(async()=>function(l,c,d,m,p){const _=new Ky({next:A=>{_.Ou(),c.enqueueAndForget(()=>By(l,T));const S=A.docs.has(d);!S&&A.fromCache?p.reject(new se(Y.UNAVAILABLE,"Failed to get document because the client is offline.")):S&&A.fromCache&&m&&m.source==="server"?p.reject(new se(Y.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(A)},error:A=>p.reject(A)}),T=new Hy(pd(d.path),_,{includeMetadataChanges:!0,ka:!0});return jy(l,T)}(await Xf(n),n.asyncQueue,e,t,i)),i.promise}function xV(n,e,t={}){const i=new gr;return n.asyncQueue.enqueueAndForget(async()=>function(l,c,d,m,p){const _=new Ky({next:A=>{_.Ou(),c.enqueueAndForget(()=>By(l,T)),A.fromCache&&m.source==="server"?p.reject(new se(Y.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(A)},error:A=>p.reject(A)}),T=new Hy(d,_,{includeMetadataChanges:!0,ka:!0});return jy(l,T)}(await Xf(n),n.asyncQueue,e,t,i)),i.promise}function VV(n,e,t){const i=new gr;return n.asyncQueue.enqueueAndForget(async()=>{try{const a=await qS(n);i.resolve(async function(c,d,m){var p;const _=Se(c),{request:T,ft:A,parent:S}=J2(_.serializer,T2(d),m);_.connection.Qo||delete T.parent;const N=(await _.Jo("RunAggregationQuery",_.serializer.databaseId,S,T,1)).filter(U=>!!U.result);Fe(N.length===1,64727);const q=(p=N[0].result)===null||p===void 0?void 0:p.aggregateFields;return Object.keys(q).reduce((U,$)=>(U[A[$]]=q[$],U),{})}(a,e,t))}catch(a){i.reject(a)}}),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HS(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RA=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GS="firestore.googleapis.com",IA=!0;class CA{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new se(Y.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=GS,this.ssl=IA}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:IA;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=wS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<cx)throw new se(Y.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}KP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=HS((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new se(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new se(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new se(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,a){return i.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Sd{constructor(e,t,i,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new CA({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new se(Y.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new se(Y.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new CA(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new UP;switch(i.type){case"firstParty":return new BP(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new se(Y.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const i=RA.get(t);i&&(ue("ComponentProvider","Removing Datastore"),RA.delete(t),i.terminate())}(this),Promise.resolve()}}function kV(n,e,t,i={}){var a;n=dn(n,Sd);const l=za(e),c=n._getSettings(),d=Object.assign(Object.assign({},c),{emulatorOptions:n._getEmulatorOptions()}),m=`${e}:${t}`;l&&(ry(`https://${m}`),iy("Firestore",!0)),c.host!==GS&&c.host!==m&&bs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p=Object.assign(Object.assign({},c),{host:m,ssl:l,emulatorOptions:i});if(!As(p,d)&&(n._setSettings(p),i.mockUserToken)){let _,T;if(typeof i.mockUserToken=="string")_=i.mockUserToken,T=cn.MOCK_USER;else{_=Ub(i.mockUserToken,(a=n._app)===null||a===void 0?void 0:a.options.projectId);const A=i.mockUserToken.sub||i.mockUserToken.user_id;if(!A)throw new se(Y.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new cn(A)}n._authCredentials=new zP(new Ow(_,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Xr(this.firestore,e,this._query)}}class mt{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Es(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new mt(this.firestore,e,this._key)}toJSON(){return{type:mt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Ac(t,mt._jsonSchema))return new mt(e,i||null,new me(Je.fromString(t.referencePath)))}}mt._jsonSchemaVersion="firestore/documentReference/1.0",mt._jsonSchema={type:Mt("string",mt._jsonSchemaVersion),referencePath:Mt("string")};class Es extends Xr{constructor(e,t,i){super(e,t,pd(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new mt(this.firestore,null,new me(e))}withConverter(e){return new Es(this.firestore,e,this._path)}}function ze(n,e,...t){if(n=lt(n),Pw("collection","path",e),n instanceof Sd){const i=Je.fromString(e,...t);return B0(i),new Es(n,null,i)}{if(!(n instanceof mt||n instanceof Es))throw new se(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Je.fromString(e,...t));return B0(i),new Es(n.firestore,null,i)}}function Ye(n,e,...t){if(n=lt(n),arguments.length===1&&(e=Ey.newId()),Pw("doc","path",e),n instanceof Sd){const i=Je.fromString(e,...t);return j0(i),new mt(n,null,new me(i))}{if(!(n instanceof mt||n instanceof Es))throw new se(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Je.fromString(e,...t));return j0(i),new mt(n.firestore,n instanceof Es?n.converter:null,new me(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NA="AsyncQueue";class DA{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new xy(this,"async_queue_retry"),this.oc=()=>{const i=tg();i&&ue(NA,"Visibility state changed to "+i.visibilityState),this.F_.y_()},this._c=e;const t=tg();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=tg();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const t=new gr;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!fl(e))throw e;ue(NA,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const t=this._c.then(()=>(this.nc=!0,e().catch(i=>{throw this.tc=i,this.nc=!1,Mi("INTERNAL UNHANDLED ERROR: ",OA(i)),i}).then(i=>(this.nc=!1,i))));return this._c=t,t}enqueueAfterDelay(e,t,i){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const a=zy.createAndSchedule(this,e,t,i,l=>this.lc(l));return this.ec.push(a),a}ac(){this.tc&&_e(47125,{hc:OA(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function OA(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MA(n){return function(t,i){if(typeof t!="object"||t===null)return!1;const a=t;for(const l of i)if(l in a&&typeof a[l]=="function")return!0;return!1}(n,["next","error","complete"])}class _r extends Sd{constructor(e,t,i,a){super(e,t,i,a),this.type="firestore",this._queue=new DA,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new DA(e),this._firestoreClient=void 0,await e}}}function LV(n,e){const t=typeof n=="object"?n:yc(),i=typeof n=="string"?n:Ff,a=xi(t,"firestore").getImmediate({identifier:i});if(!a._initialized){const l=Vb("firestore");l&&kV(a,...l)}return a}function ml(n){if(n._terminated)throw new se(Y.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||UV(n),n._firestoreClient}function UV(n){var e,t,i;const a=n._freezeSettings(),l=function(d,m,p,_){return new a2(d,m,p,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,HS(_.experimentalLongPollingOptions),_.useFetchStreams,_.isUsingEmulator)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,a);n._componentsProvider||!((t=a.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=a.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),n._firestoreClient=new DV(n._authCredentials,n._appCheckCredentials,n._queue,l,n._componentsProvider&&function(d){const m=d?._online.build();return{_offline:d?._offline.build(m),_online:m}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zV{constructor(e="count",t){this._internalFieldPath=t,this.type="AggregateField",this.aggregateType=e}}class FV{constructor(e,t,i){this._userDataWriter=t,this._data=i,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Vn(rn.fromBase64String(e))}catch(t){throw new se(Y.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Vn(rn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Vn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ac(e,Vn._jsonSchema))return Vn.fromBase64String(e.bytes)}}Vn._jsonSchemaVersion="firestore/bytes/1.0",Vn._jsonSchema={type:Mt("string",Vn._jsonSchemaVersion),bytes:Mt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cc{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new se(Y.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new tn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new se(Y.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new se(Y.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Oe(this._lat,e._lat)||Oe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Br._jsonSchemaVersion}}static fromJSON(e){if(Ac(e,Br._jsonSchema))return new Br(e.latitude,e.longitude)}}Br._jsonSchemaVersion="firestore/geoPoint/1.0",Br._jsonSchema={type:Mt("string",Br._jsonSchemaVersion),latitude:Mt("number"),longitude:Mt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,a){if(i.length!==a.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==a[l])return!1;return!0}(this._values,e._values)}toJSON(){return{type:qr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ac(e,qr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new qr(e.vectorValues);throw new se(Y.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}qr._jsonSchemaVersion="firestore/vectorValue/1.0",qr._jsonSchema={type:Mt("string",qr._jsonSchemaVersion),vectorValues:Mt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jV=/^__.*__$/;class BV{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new zs(e,this.data,this.fieldMask,t,this.fieldTransforms):new wc(e,this.data,t,this.fieldTransforms)}}class $S{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new zs(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function KS(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw _e(40011,{Ec:n})}}class Yy{constructor(e,t,i,a,l,c){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=a,l===void 0&&this.Ac(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new Yy(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),a=this.Rc({path:i,mc:!1});return a.fc(e),a}gc(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),a=this.Rc({path:i,mc:!1});return a.Ac(),a}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Wf(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(KS(this.Ec)&&jV.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class qV{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Ad(e)}Dc(e,t,i,a=!1){return new Yy({Ec:e,methodName:t,bc:i,path:tn.emptyPath(),mc:!1,Sc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function pl(n){const e=n._freezeSettings(),t=Ad(n._databaseId);return new qV(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Xy(n,e,t,i,a,l={}){const c=n.Dc(l.merge||l.mergeFields?2:0,e,t,a);Zy("Data must be an object, but it was:",c,i);const d=WS(i,c);let m,p;if(l.merge)m=new kn(c.fieldMask),p=c.fieldTransforms;else if(l.mergeFields){const _=[];for(const T of l.mergeFields){const A=Fg(e,T,t);if(!c.contains(A))throw new se(Y.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);JS(_,A)||_.push(A)}m=new kn(_),p=c.fieldTransforms.filter(T=>m.covers(T.field))}else m=null,p=c.fieldTransforms;return new BV(new vn(d),m,p)}class Id extends Rd{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Id}}class Wy extends Rd{_toFieldTransform(e){return new M2(e.path,new rc)}isEqual(e){return e instanceof Wy}}function QS(n,e,t,i){const a=n.Dc(1,e,t);Zy("Data must be an object, but it was:",a,i);const l=[],c=vn.empty();Us(i,(m,p)=>{const _=Jy(e,m,t);p=lt(p);const T=a.gc(_);if(p instanceof Id)l.push(_);else{const A=Nc(p,T);A!=null&&(l.push(_),c.set(_,A))}});const d=new kn(l);return new $S(c,d,a.fieldTransforms)}function YS(n,e,t,i,a,l){const c=n.Dc(1,e,t),d=[Fg(e,i,t)],m=[a];if(l.length%2!=0)throw new se(Y.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let A=0;A<l.length;A+=2)d.push(Fg(e,l[A])),m.push(l[A+1]);const p=[],_=vn.empty();for(let A=d.length-1;A>=0;--A)if(!JS(p,d[A])){const S=d[A];let N=m[A];N=lt(N);const q=c.gc(S);if(N instanceof Id)p.push(S);else{const U=Nc(N,q);U!=null&&(p.push(S),_.set(S,U))}}const T=new kn(p);return new $S(_,T,c.fieldTransforms)}function XS(n,e,t,i=!1){return Nc(t,n.Dc(i?4:3,e))}function Nc(n,e){if(ZS(n=lt(n)))return Zy("Unsupported field value:",e,n),WS(n,e);if(n instanceof Rd)return function(i,a){if(!KS(a.Ec))throw a.wc(`${i._methodName}() can only be used with update() and set()`);if(!a.path)throw a.wc(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(a);l&&a.fieldTransforms.push(l)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(i,a){const l=[];let c=0;for(const d of i){let m=Nc(d,a.yc(c));m==null&&(m={nullValue:"NULL_VALUE"}),l.push(m),c++}return{arrayValue:{values:l}}}(n,e)}return function(i,a){if((i=lt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return N2(a.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=ut.fromDate(i);return{timestampValue:Gf(a.serializer,l)}}if(i instanceof ut){const l=new ut(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Gf(a.serializer,l)}}if(i instanceof Br)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Vn)return{bytesValue:pS(a.serializer,i._byteString)};if(i instanceof mt){const l=a.databaseId,c=i.firestore._databaseId;if(!c.isEqual(l))throw a.wc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Ny(i.firestore._databaseId||a.databaseId,i._key.path)}}if(i instanceof qr)return function(c,d){return{mapValue:{fields:{[Bw]:{stringValue:qw},[jf]:{arrayValue:{values:c.toArray().map(p=>{if(typeof p!="number")throw d.wc("VectorValues must only contain numeric values.");return Ry(d.serializer,p)})}}}}}}(i,a);throw a.wc(`Unsupported field value: ${hd(i)}`)}(n,e)}function WS(n,e){const t={};return kw(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Us(n,(i,a)=>{const l=Nc(a,e.Vc(i));l!=null&&(t[i]=l)}),{mapValue:{fields:t}}}function ZS(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof ut||n instanceof Br||n instanceof Vn||n instanceof mt||n instanceof Rd||n instanceof qr)}function Zy(n,e,t){if(!ZS(t)||!xw(t)){const i=hd(t);throw i==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+i)}}function Fg(n,e,t){if((e=lt(e))instanceof Cc)return e._internalPath;if(typeof e=="string")return Jy(n,e);throw Wf("Field path arguments must be of type string or ",n,!1,void 0,t)}const HV=new RegExp("[~\\*/\\[\\]]");function Jy(n,e,t){if(e.search(HV)>=0)throw Wf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Cc(...e.split("."))._internalPath}catch{throw Wf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Wf(n,e,t,i,a){const l=i&&!i.isEmpty(),c=a!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let m="";return(l||c)&&(m+=" (found",l&&(m+=` in field ${i}`),c&&(m+=` in document ${a}`),m+=")"),new se(Y.INVALID_ARGUMENT,d+n+m)}function JS(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ac{constructor(e,t,i,a,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new mt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new GV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Cd("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class GV extends ac{data(){return super.data()}}function Cd(n,e){return typeof e=="string"?Jy(n,e):e instanceof Cc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eR(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new se(Y.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class e_{}class Nd extends e_{}function Ie(n,e,...t){let i=[];e instanceof e_&&i.push(e),i=i.concat(t),function(l){const c=l.filter(m=>m instanceof t_).length,d=l.filter(m=>m instanceof Dd).length;if(c>1||c>0&&d>0)throw new se(Y.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const a of i)n=a._apply(n);return n}class Dd extends Nd{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new Dd(e,t,i)}_apply(e){const t=this._parse(e);return tR(e._query,t),new Xr(e.firestore,e.converter,Og(e._query,t))}_parse(e){const t=pl(e.firestore);return function(l,c,d,m,p,_,T){let A;if(p.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new se(Y.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){xA(T,_);const N=[];for(const q of T)N.push(PA(m,l,q));A={arrayValue:{values:N}}}else A=PA(m,l,T)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||xA(T,_),A=XS(d,c,T,_==="in"||_==="not-in");return Ot.create(p,_,A)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Ne(n,e,t){const i=e,a=Cd("where",n);return Dd._create(a,i,t)}class t_ extends e_{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new t_(e,t)}_parse(e){const t=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return t.length===1?t[0]:yr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(a,l){let c=a;const d=l.getFlattenedFilters();for(const m of d)tR(c,m),c=Og(c,m)}(e._query,t),new Xr(e.firestore,e.converter,Og(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class n_ extends Nd{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n_(e,t)}_apply(e){const t=function(a,l,c){if(a.startAt!==null)throw new se(Y.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new se(Y.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new nc(l,c)}(e._query,this._field,this._direction);return new Xr(e.firestore,e.converter,function(a,l){const c=a.explicitOrderBy.concat([l]);return new ja(a.path,a.collectionGroup,c,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(e._query,t))}}function vr(n,e="asc"){const t=e,i=Cd("orderBy",n);return n_._create(i,t)}class r_ extends Nd{constructor(e,t,i){super(),this.type=e,this._limit=t,this._limitType=i}static _create(e,t,i){return new r_(e,t,i)}_apply(e){return new Xr(e.firestore,e.converter,qf(e._query,this._limit,this._limitType))}}function jg(n){return QP("limit",n),r_._create("limit",n,"F")}class i_ extends Nd{constructor(e,t,i){super(),this.type=e,this._docOrFields=t,this._inclusive=i}static _create(e,t,i){return new i_(e,t,i)}_apply(e){const t=KV(e,this.type,this._docOrFields,this._inclusive);return new Xr(e.firestore,e.converter,function(a,l){return new ja(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,l,a.endAt)}(e._query,t))}}function $V(...n){return i_._create("startAfter",n,!1)}function KV(n,e,t,i){if(t[0]=lt(t[0]),t[0]instanceof ac)return function(l,c,d,m,p){if(!m)throw new se(Y.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const _=[];for(const T of Ko(l))if(T.field.isKeyField())_.push(Bf(c,m.key));else{const A=m.data.field(T.field);if(dd(A))throw new se(Y.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+T.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(A===null){const S=T.field.canonicalString();throw new se(Y.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${S}' (used as the orderBy) does not exist.`)}_.push(A)}return new tl(_,p)}(n._query,n.firestore._databaseId,e,t[0]._document,i);{const a=pl(n.firestore);return function(c,d,m,p,_,T){const A=c.explicitOrderBy;if(_.length>A.length)throw new se(Y.INVALID_ARGUMENT,`Too many arguments provided to ${p}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const S=[];for(let N=0;N<_.length;N++){const q=_[N];if(A[N].field.isKeyField()){if(typeof q!="string")throw new se(Y.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${p}(), but got a ${typeof q}`);if(!Sy(c)&&q.indexOf("/")!==-1)throw new se(Y.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${p}() must be a plain document ID, but '${q}' contains a slash.`);const U=c.path.child(Je.fromString(q));if(!me.isDocumentKey(U))throw new se(Y.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${p}() must result in a valid document path, but '${U}' is not because it contains an odd number of segments.`);const $=new me(U);S.push(Bf(d,$))}else{const U=XS(m,p,q);S.push(U)}}return new tl(S,T)}(n._query,n.firestore._databaseId,a,e,t,i)}}function PA(n,e,t){if(typeof(t=lt(t))=="string"){if(t==="")throw new se(Y.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Sy(e)&&t.indexOf("/")!==-1)throw new se(Y.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(Je.fromString(t));if(!me.isDocumentKey(i))throw new se(Y.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Bf(n,new me(i))}if(t instanceof mt)return Bf(n,t._key);throw new se(Y.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${hd(t)}.`)}function xA(n,e){if(!Array.isArray(n)||n.length===0)throw new se(Y.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function tR(n,e){const t=function(a,l){for(const c of a)for(const d of c.getFlattenedFilters())if(l.indexOf(d.op)>=0)return d.op;return null}(n.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new se(Y.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new se(Y.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class nR{convertValue(e,t="none"){switch(Is(e)){case 0:return null;case 1:return e.booleanValue;case 2:return St(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Rs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw _e(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Us(e,(a,l)=>{i[a]=this.convertValue(l,t)}),i}convertVectorValue(e){var t,i,a;const l=(a=(i=(t=e.fields)===null||t===void 0?void 0:t[jf].arrayValue)===null||i===void 0?void 0:i.values)===null||a===void 0?void 0:a.map(c=>St(c.doubleValue));return new qr(l)}convertGeoPoint(e){return new Br(St(e.latitude),St(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=md(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Ju(e));default:return null}}convertTimestamp(e){const t=Ss(e);return new ut(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=Je.fromString(e);Fe(bS(i),9688,{name:e});const a=new ec(i.get(1),i.get(3)),l=new me(i.popFirst(5));return a.isEqual(t)||Mi(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s_(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class QV extends nR{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new mt(this.firestore,null,t)}}function YV(){return new zV("count")}class Bo{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ts extends ac{constructor(e,t,i,a,l,c){super(e,t,i,a,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Rf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(Cd("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new se(Y.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Ts._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Ts._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ts._jsonSchema={type:Mt("string",Ts._jsonSchemaVersion),bundleSource:Mt("string","DocumentSnapshot"),bundleName:Mt("string"),bundle:Mt("string")};class Rf extends Ts{data(e={}){return super.data(e)}}class Oa{constructor(e,t,i,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new Bo(a.hasPendingWrites,a.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new Rf(this._firestore,this._userDataWriter,i.key,i,new Bo(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new se(Y.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(a,l){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map(d=>{const m=new Rf(a._firestore,a._userDataWriter,d.doc.key,d.doc,new Bo(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);return d.doc,{type:"added",doc:m,oldIndex:-1,newIndex:c++}})}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(d=>l||d.type!==3).map(d=>{const m=new Rf(a._firestore,a._userDataWriter,d.doc.key,d.doc,new Bo(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);let p=-1,_=-1;return d.type!==0&&(p=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),_=c.indexOf(d.doc.key)),{type:XV(d.type),doc:m,oldIndex:p,newIndex:_}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new se(Y.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Oa._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Ey.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],a=[];return this.docs.forEach(l=>{l._document!==null&&(t.push(l._document),i.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),a.push(l.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function XV(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return _e(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fs(n){n=dn(n,mt);const e=dn(n.firestore,_r);return PV(ml(e),n._key).then(t=>iR(e,n,t))}Oa._jsonSchemaVersion="firestore/querySnapshot/1.0",Oa._jsonSchema={type:Mt("string",Oa._jsonSchemaVersion),bundleSource:Mt("string","QuerySnapshot"),bundleName:Mt("string"),bundle:Mt("string")};class Dc extends nR{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new mt(this.firestore,null,t)}}function Tt(n){n=dn(n,Xr);const e=dn(n.firestore,_r),t=ml(e),i=new Dc(e);return eR(n._query),xV(t,n._query).then(a=>new Oa(e,i,n,a))}function a_(n,e,t){n=dn(n,mt);const i=dn(n.firestore,_r),a=s_(n.converter,e,t);return Od(i,[Xy(pl(i),"setDoc",n._key,a,n.converter!==null,t).toMutation(n._key,nn.none())])}function Ha(n,e,t,...i){n=dn(n,mt);const a=dn(n.firestore,_r),l=pl(a);let c;return c=typeof(e=lt(e))=="string"||e instanceof Cc?YS(l,"updateDoc",n._key,e,t,i):QS(l,"updateDoc",n._key,e),Od(a,[c.toMutation(n._key,nn.exists(!0))])}function rR(n){return Od(dn(n.firestore,_r),[new Ed(n._key,nn.none())])}function o_(n,e){const t=dn(n.firestore,_r),i=Ye(n),a=s_(n.converter,e);return Od(t,[Xy(pl(n.firestore),"addDoc",i._key,a,n.converter!==null,{}).toMutation(i._key,nn.exists(!1))]).then(()=>i)}function gl(n,...e){var t,i,a;n=lt(n);let l={includeMetadataChanges:!1,source:"default"},c=0;typeof e[c]!="object"||MA(e[c])||(l=e[c++]);const d={includeMetadataChanges:l.includeMetadataChanges,source:l.source};if(MA(e[c])){const T=e[c];e[c]=(t=T.next)===null||t===void 0?void 0:t.bind(T),e[c+1]=(i=T.error)===null||i===void 0?void 0:i.bind(T),e[c+2]=(a=T.complete)===null||a===void 0?void 0:a.bind(T)}let m,p,_;if(n instanceof mt)p=dn(n.firestore,_r),_=pd(n._key.path),m={next:T=>{e[c]&&e[c](iR(p,n,T))},error:e[c+1],complete:e[c+2]};else{const T=dn(n,Xr);p=dn(T.firestore,_r),_=T._query;const A=new Dc(p);m={next:S=>{e[c]&&e[c](new Oa(p,A,T,S))},error:e[c+1],complete:e[c+2]},eR(n._query)}return function(A,S,N,q){const U=new Ky(q),$=new Hy(S,U,N);return A.asyncQueue.enqueueAndForget(async()=>jy(await Xf(A),$)),()=>{U.Ou(),A.asyncQueue.enqueueAndForget(async()=>By(await Xf(A),$))}}(ml(p),_,d,m)}function Od(n,e){return function(i,a){const l=new gr;return i.asyncQueue.enqueueAndForget(async()=>vV(await MV(i),a,l)),l.promise}(ml(n),e)}function iR(n,e,t){const i=t.docs.get(e._key),a=new Dc(n);return new Ts(n,a,e._key,i,new Bo(t.hasPendingWrites,t.fromCache),e.converter)}function WV(n){return ZV(n,{count:YV()})}function ZV(n,e){const t=dn(n.firestore,_r),i=ml(t),a=i2(e,(l,c)=>new z2(c,l.aggregateType,l._internalFieldPath));return VV(i,n._query,a).then(l=>function(d,m,p){const _=new Dc(d);return new FV(m,_,p)}(t,n,l))}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JV={maxAttempts:5};function Vu(n,e){if((n=lt(n)).firestore!==e)throw new se(Y.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ek{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=pl(e)}get(e){const t=Vu(e,this._firestore),i=new QV(this._firestore);return this._transaction.lookup([t._key]).then(a=>{if(!a||a.length!==1)return _e(24041);const l=a[0];if(l.isFoundDocument())return new ac(this._firestore,i,l.key,l,t.converter);if(l.isNoDocument())return new ac(this._firestore,i,t._key,null,t.converter);throw _e(18433,{doc:l})})}set(e,t,i){const a=Vu(e,this._firestore),l=s_(a.converter,t,i),c=Xy(this._dataReader,"Transaction.set",a._key,l,a.converter!==null,i);return this._transaction.set(a._key,c),this}update(e,t,i,...a){const l=Vu(e,this._firestore);let c;return c=typeof(t=lt(t))=="string"||t instanceof Cc?YS(this._dataReader,"Transaction.update",l._key,t,i,a):QS(this._dataReader,"Transaction.update",l._key,t),this._transaction.update(l._key,c),this}delete(e){const t=Vu(e,this._firestore);return this._transaction.delete(t._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tk extends ek{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Vu(e,this._firestore),i=new Dc(this._firestore);return super.get(e).then(a=>new Ts(this._firestore,i,t._key,a._document,new Bo(!1,!1),t.converter))}}function Oc(n,e,t){n=dn(n,_r);const i=Object.assign(Object.assign({},JV),t);return function(l){if(l.maxAttempts<1)throw new se(Y.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(l,c,d){const m=new gr;return l.asyncQueue.enqueueAndForget(async()=>{const p=await qS(l);new NV(l.asyncQueue,p,d,c,m).zu()}),m.promise}(ml(n),a=>e(new tk(n,a)),i)}function Le(){return new Wy("serverTimestamp")}(function(e,t=!0){(function(a){cl=a})(Fa),nr(new Fn("firestore",(i,{instanceIdentifier:a,options:l})=>{const c=i.getProvider("app").getImmediate(),d=new _r(new FP(i.getProvider("auth-internal")),new qP(c,i.getProvider("app-check-internal")),function(p,_){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new se(Y.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ec(p.options.projectId,_)}(c,a),c);return l=Object.assign({useFetchStreams:t},l),d._setSettings(l),d},"PUBLIC").setMultipleInstances(!0)),fn(k0,L0,e),fn(k0,L0,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sR="firebasestorage.googleapis.com",nk="storageBucket",rk=2*60*1e3,ik=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr extends ir{constructor(e,t,i=0){super(rg(e),`Firebase Storage: ${t} (${rg(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Wr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return rg(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var $r;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})($r||($r={}));function rg(n){return"storage/"+n}function sk(){const n="An unknown error occurred, please check the error payload for server response.";return new Wr($r.UNKNOWN,n)}function ak(){return new Wr($r.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function ok(){return new Wr($r.CANCELED,"User canceled the upload/download.")}function lk(n){return new Wr($r.INVALID_URL,"Invalid URL '"+n+"'.")}function uk(n){return new Wr($r.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function VA(n){return new Wr($r.INVALID_ARGUMENT,n)}function aR(){return new Wr($r.APP_DELETED,"The Firebase app was deleted.")}function ck(n){return new Wr($r.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let i;try{i=mr.makeFromUrl(e,t)}catch{return new mr(e,"")}if(i.path==="")return i;throw uk(e)}static makeFromUrl(e,t){let i=null;const a="([A-Za-z0-9.\\-_]+)";function l(he){he.path.charAt(he.path.length-1)==="/"&&(he.path_=he.path_.slice(0,-1))}const c="(/(.*))?$",d=new RegExp("^gs://"+a+c,"i"),m={bucket:1,path:3};function p(he){he.path_=decodeURIComponent(he.path)}const _="v[A-Za-z0-9_]+",T=t.replace(/[.]/g,"\\."),A="(/([^?#]*).*)?$",S=new RegExp(`^https?://${T}/${_}/b/${a}/o${A}`,"i"),N={bucket:1,path:3},q=t===sR?"(?:storage.googleapis.com|storage.cloud.google.com)":t,U="([^?#]*)",$=new RegExp(`^https?://${q}/${a}/${U}`,"i"),ne=[{regex:d,indices:m,postModify:l},{regex:S,indices:N,postModify:p},{regex:$,indices:{bucket:1,path:2},postModify:p}];for(let he=0;he<ne.length;he++){const ce=ne[he],Te=ce.regex.exec(e);if(Te){const P=Te[ce.indices.bucket];let I=Te[ce.indices.path];I||(I=""),i=new mr(P,I),ce.postModify(i);break}}if(i==null)throw lk(e);return i}}class hk{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fk(n,e,t){let i=1,a=null,l=null,c=!1,d=0;function m(){return d===2}let p=!1;function _(...U){p||(p=!0,e.apply(null,U))}function T(U){a=setTimeout(()=>{a=null,n(S,m())},U)}function A(){l&&clearTimeout(l)}function S(U,...$){if(p){A();return}if(U){A(),_.call(null,U,...$);return}if(m()||c){A(),_.call(null,U,...$);return}i<64&&(i*=2);let ne;d===1?(d=2,ne=0):ne=(i+Math.random())*1e3,T(ne)}let N=!1;function q(U){N||(N=!0,A(),!p&&(a!==null?(U||(d=2),clearTimeout(a),T(0)):U||(d=1)))}return T(0),l=setTimeout(()=>{c=!0,q(!0)},t),q}function dk(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mk(n){return n!==void 0}function kA(n,e,t,i){if(i<e)throw VA(`Invalid value for '${n}'. Expected ${e} or greater.`);if(i>t)throw VA(`Invalid value for '${n}'. Expected ${t} or less.`)}function pk(n){const e=encodeURIComponent;let t="?";for(const i in n)if(n.hasOwnProperty(i)){const a=e(i)+"="+e(n[i]);t=t+a+"&"}return t=t.slice(0,-1),t}var Zf;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Zf||(Zf={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gk(n,e){const t=n>=500&&n<600,a=[408,429].indexOf(n)!==-1,l=e.indexOf(n)!==-1;return t||a||l}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yk{constructor(e,t,i,a,l,c,d,m,p,_,T,A=!0,S=!1){this.url_=e,this.method_=t,this.headers_=i,this.body_=a,this.successCodes_=l,this.additionalRetryCodes_=c,this.callback_=d,this.errorCallback_=m,this.timeout_=p,this.progressCallback_=_,this.connectionFactory_=T,this.retry=A,this.isUsingEmulator=S,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((N,q)=>{this.resolve_=N,this.reject_=q,this.start_()})}start_(){const e=(i,a)=>{if(a){i(!1,new ff(!1,null,!0));return}const l=this.connectionFactory_();this.pendingConnection_=l;const c=d=>{const m=d.loaded,p=d.lengthComputable?d.total:-1;this.progressCallback_!==null&&this.progressCallback_(m,p)};this.progressCallback_!==null&&l.addUploadProgressListener(c),l.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&l.removeUploadProgressListener(c),this.pendingConnection_=null;const d=l.getErrorCode()===Zf.NO_ERROR,m=l.getStatus();if(!d||gk(m,this.additionalRetryCodes_)&&this.retry){const _=l.getErrorCode()===Zf.ABORT;i(!1,new ff(!1,null,_));return}const p=this.successCodes_.indexOf(m)!==-1;i(!0,new ff(p,l))})},t=(i,a)=>{const l=this.resolve_,c=this.reject_,d=a.connection;if(a.wasSuccessCode)try{const m=this.callback_(d,d.getResponse());mk(m)?l(m):l()}catch(m){c(m)}else if(d!==null){const m=sk();m.serverResponse=d.getErrorText(),this.errorCallback_?c(this.errorCallback_(d,m)):c(m)}else if(a.canceled){const m=this.appDelete_?aR():ok();c(m)}else{const m=ak();c(m)}};this.canceled_?t(!1,new ff(!1,null,!0)):this.backoffId_=fk(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&dk(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class ff{constructor(e,t,i){this.wasSuccessCode=e,this.connection=t,this.canceled=!!i}}function _k(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function vk(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Ek(n,e){e&&(n["X-Firebase-GMPID"]=e)}function Tk(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function Ak(n,e,t,i,a,l,c=!0,d=!1){const m=pk(n.urlParams),p=n.url+m,_=Object.assign({},n.headers);return Ek(_,e),_k(_,t),vk(_,l),Tk(_,i),new yk(p,n.method,_,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,a,c,d)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bk(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function wk(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf{constructor(e,t){this._service=e,t instanceof mr?this._location=t:this._location=mr.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Jf(e,t)}get root(){const e=new mr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return wk(this._location.path)}get storage(){return this._service}get parent(){const e=bk(this._location.path);if(e===null)return null;const t=new mr(this._location.bucket,e);return new Jf(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw ck(e)}}function LA(n,e){const t=e?.[nk];return t==null?null:mr.makeFromBucketSpec(t,n)}function Sk(n,e,t,i={}){n.host=`${e}:${t}`;const a=za(e);a&&(ry(`https://${n.host}/b`),iy("Storage",!0)),n._isUsingEmulator=!0,n._protocol=a?"https":"http";const{mockUserToken:l}=i;l&&(n._overrideAuthToken=typeof l=="string"?l:Ub(l,n.app.options.projectId))}class Rk{constructor(e,t,i,a,l,c=!1){this.app=e,this._authProvider=t,this._appCheckProvider=i,this._url=a,this._firebaseVersion=l,this._isUsingEmulator=c,this._bucket=null,this._host=sR,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=rk,this._maxUploadRetryTime=ik,this._requests=new Set,a!=null?this._bucket=mr.makeFromBucketSpec(a,this._host):this._bucket=LA(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=mr.makeFromBucketSpec(this._url,e):this._bucket=LA(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){kA("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){kA("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(wn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Jf(this,e)}_makeRequest(e,t,i,a,l=!0){if(this._deleted)return new hk(aR());{const c=Ak(e,this._appId,i,a,t,this._firebaseVersion,l,this._isUsingEmulator);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}async makeRequestWithTokens(e,t){const[i,a]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,i,a).getPromise()}}const UA="@firebase/storage",zA="0.13.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oR="storage";function Ik(n=yc(),e){n=lt(n);const i=xi(n,oR).getImmediate({identifier:e}),a=Vb("storage");return a&&Ck(i,...a),i}function Ck(n,e,t,i={}){Sk(n,e,t,i)}function Nk(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),a=n.getProvider("app-check-internal");return new Rk(t,i,a,e,Fa)}function Dk(){nr(new Fn(oR,Nk,"PUBLIC").setMultipleInstances(!0)),fn(UA,zA,""),fn(UA,zA,"esm2017")}Dk();const lR="@firebase/installations",l_="0.6.18";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uR=1e4,cR=`w:${l_}`,hR="FIS_v2",Ok="https://firebaseinstallations.googleapis.com/v1",Mk=60*60*1e3,Pk="installations",xk="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vk={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},La=new xs(Pk,xk,Vk);function fR(n){return n instanceof ir&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dR({projectId:n}){return`${Ok}/projects/${n}/installations`}function mR(n){return{token:n.token,requestStatus:2,expiresIn:Lk(n.expiresIn),creationTime:Date.now()}}async function pR(n,e){const i=(await e.json()).error;return La.create("request-failed",{requestName:n,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function gR({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function kk(n,{refreshToken:e}){const t=gR(n);return t.append("Authorization",Uk(e)),t}async function yR(n){const e=await n();return e.status>=500&&e.status<600?n():e}function Lk(n){return Number(n.replace("s","000"))}function Uk(n){return`${hR} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zk({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const i=dR(n),a=gR(n),l=e.getImmediate({optional:!0});if(l){const p=await l.getHeartbeatsHeader();p&&a.append("x-firebase-client",p)}const c={fid:t,authVersion:hR,appId:n.appId,sdkVersion:cR},d={method:"POST",headers:a,body:JSON.stringify(c)},m=await yR(()=>fetch(i,d));if(m.ok){const p=await m.json();return{fid:p.fid||t,registrationStatus:2,refreshToken:p.refreshToken,authToken:mR(p.authToken)}}else throw await pR("Create Installation",m)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _R(n){return new Promise(e=>{setTimeout(e,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fk(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jk=/^[cdef][\w-]{21}$/,Bg="";function Bk(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=qk(n);return jk.test(t)?t:Bg}catch{return Bg}}function qk(n){return Fk(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Md(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vR=new Map;function ER(n,e){const t=Md(n);TR(t,e),Hk(t,e)}function TR(n,e){const t=vR.get(n);if(t)for(const i of t)i(e)}function Hk(n,e){const t=Gk();t&&t.postMessage({key:n,fid:e}),$k()}let Na=null;function Gk(){return!Na&&"BroadcastChannel"in self&&(Na=new BroadcastChannel("[Firebase] FID Change"),Na.onmessage=n=>{TR(n.data.key,n.data.fid)}),Na}function $k(){vR.size===0&&Na&&(Na.close(),Na=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kk="firebase-installations-database",Qk=1,Ua="firebase-installations-store";let ig=null;function u_(){return ig||(ig=jb(Kk,Qk,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(Ua)}}})),ig}async function ed(n,e){const t=Md(n),a=(await u_()).transaction(Ua,"readwrite"),l=a.objectStore(Ua),c=await l.get(t);return await l.put(e,t),await a.done,(!c||c.fid!==e.fid)&&ER(n,e.fid),e}async function AR(n){const e=Md(n),i=(await u_()).transaction(Ua,"readwrite");await i.objectStore(Ua).delete(e),await i.done}async function Pd(n,e){const t=Md(n),a=(await u_()).transaction(Ua,"readwrite"),l=a.objectStore(Ua),c=await l.get(t),d=e(c);return d===void 0?await l.delete(t):await l.put(d,t),await a.done,d&&(!c||c.fid!==d.fid)&&ER(n,d.fid),d}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c_(n){let e;const t=await Pd(n.appConfig,i=>{const a=Yk(i),l=Xk(n,a);return e=l.registrationPromise,l.installationEntry});return t.fid===Bg?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function Yk(n){const e=n||{fid:Bk(),registrationStatus:0};return bR(e)}function Xk(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const a=Promise.reject(La.create("app-offline"));return{installationEntry:e,registrationPromise:a}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=Wk(n,t);return{installationEntry:t,registrationPromise:i}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:Zk(n)}:{installationEntry:e}}async function Wk(n,e){try{const t=await zk(n,e);return ed(n.appConfig,t)}catch(t){throw fR(t)&&t.customData.serverCode===409?await AR(n.appConfig):await ed(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function Zk(n){let e=await FA(n.appConfig);for(;e.registrationStatus===1;)await _R(100),e=await FA(n.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:i}=await c_(n);return i||t}return e}function FA(n){return Pd(n,e=>{if(!e)throw La.create("installation-not-found");return bR(e)})}function bR(n){return Jk(n)?{fid:n.fid,registrationStatus:0}:n}function Jk(n){return n.registrationStatus===1&&n.registrationTime+uR<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eL({appConfig:n,heartbeatServiceProvider:e},t){const i=tL(n,t),a=kk(n,t),l=e.getImmediate({optional:!0});if(l){const p=await l.getHeartbeatsHeader();p&&a.append("x-firebase-client",p)}const c={installation:{sdkVersion:cR,appId:n.appId}},d={method:"POST",headers:a,body:JSON.stringify(c)},m=await yR(()=>fetch(i,d));if(m.ok){const p=await m.json();return mR(p)}else throw await pR("Generate Auth Token",m)}function tL(n,{fid:e}){return`${dR(n)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function h_(n,e=!1){let t;const i=await Pd(n.appConfig,l=>{if(!wR(l))throw La.create("not-registered");const c=l.authToken;if(!e&&iL(c))return l;if(c.requestStatus===1)return t=nL(n,e),l;{if(!navigator.onLine)throw La.create("app-offline");const d=aL(l);return t=rL(n,d),d}});return t?await t:i.authToken}async function nL(n,e){let t=await jA(n.appConfig);for(;t.authToken.requestStatus===1;)await _R(100),t=await jA(n.appConfig);const i=t.authToken;return i.requestStatus===0?h_(n,e):i}function jA(n){return Pd(n,e=>{if(!wR(e))throw La.create("not-registered");const t=e.authToken;return oL(t)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function rL(n,e){try{const t=await eL(n,e),i=Object.assign(Object.assign({},e),{authToken:t});return await ed(n.appConfig,i),t}catch(t){if(fR(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await AR(n.appConfig);else{const i=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await ed(n.appConfig,i)}throw t}}function wR(n){return n!==void 0&&n.registrationStatus===2}function iL(n){return n.requestStatus===2&&!sL(n)}function sL(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+Mk}function aL(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}function oL(n){return n.requestStatus===1&&n.requestTime+uR<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lL(n){const e=n,{installationEntry:t,registrationPromise:i}=await c_(e);return i?i.catch(console.error):h_(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uL(n,e=!1){const t=n;return await cL(t),(await h_(t,e)).token}async function cL(n){const{registrationPromise:e}=await c_(n);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hL(n){if(!n||!n.options)throw sg("App Configuration");if(!n.name)throw sg("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw sg(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function sg(n){return La.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SR="installations",fL="installations-internal",dL=n=>{const e=n.getProvider("app").getImmediate(),t=hL(e),i=xi(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},mL=n=>{const e=n.getProvider("app").getImmediate(),t=xi(e,SR).getImmediate();return{getId:()=>lL(t),getToken:a=>uL(t,a)}};function pL(){nr(new Fn(SR,dL,"PUBLIC")),nr(new Fn(fL,mL,"PRIVATE"))}pL();fn(lR,l_);fn(lR,l_,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const td="analytics",gL="firebase_id",yL="origin",_L=60*1e3,vL="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",f_="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sn=new gc("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EL={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},zn=new xs("analytics","Analytics",EL);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TL(n){if(!n.startsWith(f_)){const e=zn.create("invalid-gtag-resource",{gtagURL:n});return Sn.warn(e.message),""}return n}function RR(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function AL(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function bL(n,e){const t=AL("firebase-js-sdk-policy",{createScriptURL:TL}),i=document.createElement("script"),a=`${f_}?l=${n}&id=${e}`;i.src=t?t?.createScriptURL(a):a,i.async=!0,document.head.appendChild(i)}function wL(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}async function SL(n,e,t,i,a,l){const c=i[a];try{if(c)await e[c];else{const m=(await RR(t)).find(p=>p.measurementId===a);m&&await e[m.appId]}}catch(d){Sn.error(d)}n("config",a,l)}async function RL(n,e,t,i,a){try{let l=[];if(a&&a.send_to){let c=a.send_to;Array.isArray(c)||(c=[c]);const d=await RR(t);for(const m of c){const p=d.find(T=>T.measurementId===m),_=p&&e[p.appId];if(_)l.push(_);else{l=[];break}}}l.length===0&&(l=Object.values(e)),await Promise.all(l),n("event",i,a||{})}catch(l){Sn.error(l)}}function IL(n,e,t,i){async function a(l,...c){try{if(l==="event"){const[d,m]=c;await RL(n,e,t,d,m)}else if(l==="config"){const[d,m]=c;await SL(n,e,t,i,d,m)}else if(l==="consent"){const[d,m]=c;n("consent",d,m)}else if(l==="get"){const[d,m,p]=c;n("get",d,m,p)}else if(l==="set"){const[d]=c;n("set",d)}else n(l,...c)}catch(d){Sn.error(d)}}return a}function CL(n,e,t,i,a){let l=function(...c){window[i].push(arguments)};return window[a]&&typeof window[a]=="function"&&(l=window[a]),window[a]=IL(l,n,e,t),{gtagCore:l,wrappedGtag:window[a]}}function NL(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(f_)&&t.src.includes(n))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DL=30,OL=1e3;class ML{constructor(e={},t=OL){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const IR=new ML;function PL(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function xL(n){var e;const{appId:t,apiKey:i}=n,a={method:"GET",headers:PL(i)},l=vL.replace("{app-id}",t),c=await fetch(l,a);if(c.status!==200&&c.status!==304){let d="";try{const m=await c.json();!((e=m.error)===null||e===void 0)&&e.message&&(d=m.error.message)}catch{}throw zn.create("config-fetch-failed",{httpStatus:c.status,responseMessage:d})}return c.json()}async function VL(n,e=IR,t){const{appId:i,apiKey:a,measurementId:l}=n.options;if(!i)throw zn.create("no-app-id");if(!a){if(l)return{measurementId:l,appId:i};throw zn.create("no-api-key")}const c=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},d=new UL;return setTimeout(async()=>{d.abort()},_L),CR({appId:i,apiKey:a,measurementId:l},c,d,e)}async function CR(n,{throttleEndTimeMillis:e,backoffCount:t},i,a=IR){var l;const{appId:c,measurementId:d}=n;try{await kL(i,e)}catch(m){if(d)return Sn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${m?.message}]`),{appId:c,measurementId:d};throw m}try{const m=await xL(n);return a.deleteThrottleMetadata(c),m}catch(m){const p=m;if(!LL(p)){if(a.deleteThrottleMetadata(c),d)return Sn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${p?.message}]`),{appId:c,measurementId:d};throw m}const _=Number((l=p?.customData)===null||l===void 0?void 0:l.httpStatus)===503?o0(t,a.intervalMillis,DL):o0(t,a.intervalMillis),T={throttleEndTimeMillis:Date.now()+_,backoffCount:t+1};return a.setThrottleMetadata(c,T),Sn.debug(`Calling attemptFetch again in ${_} millis`),CR(n,T,i,a)}}function kL(n,e){return new Promise((t,i)=>{const a=Math.max(e-Date.now(),0),l=setTimeout(t,a);n.addEventListener(()=>{clearTimeout(l),i(zn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function LL(n){if(!(n instanceof ir)||!n.customData)return!1;const e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}class UL{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function zL(n,e,t,i,a){if(a&&a.global){n("event",t,i);return}else{const l=await e,c=Object.assign(Object.assign({},i),{send_to:l});n("event",t,c)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FL(){if(ad())try{await od()}catch(n){return Sn.warn(zn.create("indexeddb-unavailable",{errorInfo:n?.toString()}).message),!1}else return Sn.warn(zn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function jL(n,e,t,i,a,l,c){var d;const m=VL(n);m.then(S=>{t[S.measurementId]=S.appId,n.options.measurementId&&S.measurementId!==n.options.measurementId&&Sn.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${S.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(S=>Sn.error(S)),e.push(m);const p=FL().then(S=>{if(S)return i.getId()}),[_,T]=await Promise.all([m,p]);NL(l)||bL(l,_.measurementId),a("js",new Date);const A=(d=c?.config)!==null&&d!==void 0?d:{};return A[yL]="firebase",A.update=!0,T!=null&&(A[gL]=T),a("config",_.measurementId,A),_.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BL{constructor(e){this.app=e}_delete(){return delete qu[this.app.options.appId],Promise.resolve()}}let qu={},BA=[];const qA={};let ag="dataLayer",qL="gtag",HA,NR,GA=!1;function HL(){const n=[];if(sy()&&n.push("This is a browser extension environment."),ay()||n.push("Cookies are not available."),n.length>0){const e=n.map((i,a)=>`(${a+1}) ${i}`).join(" "),t=zn.create("invalid-analytics-context",{errorInfo:e});Sn.warn(t.message)}}function GL(n,e,t){HL();const i=n.options.appId;if(!i)throw zn.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)Sn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw zn.create("no-api-key");if(qu[i]!=null)throw zn.create("already-exists",{id:i});if(!GA){wL(ag);const{wrappedGtag:l,gtagCore:c}=CL(qu,BA,qA,ag,qL);NR=l,HA=c,GA=!0}return qu[i]=jL(n,BA,qA,e,HA,ag,t),new BL(n)}function $L(n=yc()){n=lt(n);const e=xi(n,td);return e.isInitialized()?e.getImmediate():KL(n)}function KL(n,e={}){const t=xi(n,td);if(t.isInitialized()){const a=t.getImmediate();if(As(e,t.getOptions()))return a;throw zn.create("already-initialized")}return t.initialize({options:e})}async function QL(){if(sy()||!ay()||!ad())return!1;try{return await od()}catch{return!1}}function YL(n,e,t,i){n=lt(n),zL(NR,qu[n.app.options.appId],e,t,i).catch(a=>Sn.error(a))}const $A="@firebase/analytics",KA="0.10.17";function XL(){nr(new Fn(td,(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),a=e.getProvider("installations-internal").getImmediate();return GL(i,a,t)},"PUBLIC")),nr(new Fn("analytics-internal",n,"PRIVATE")),fn($A,KA),fn($A,KA,"esm2017");function n(e){try{const t=e.getProvider(td).getImmediate();return{logEvent:(i,a,l)=>YL(t,i,a,l)}}catch(t){throw zn.create("interop-component-reg-failed",{reason:t})}}}XL();var qg,QA,xd=function(){var n=self.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0];if(n&&n.responseStart>0&&n.responseStart<performance.now())return n},DR=function(n){if(document.readyState==="loading")return"loading";var e=xd();if(e){if(n<e.domInteractive)return"loading";if(e.domContentLoadedEventStart===0||n<e.domContentLoadedEventStart)return"dom-interactive";if(e.domComplete===0||n<e.domComplete)return"dom-content-loaded"}return"complete"},WL=function(n){var e=n.nodeName;return n.nodeType===1?e.toLowerCase():e.toUpperCase().replace(/^#/,"")},d_=function(n,e){var t="";try{for(;n&&n.nodeType!==9;){var i=n,a=i.id?"#"+i.id:WL(i)+(i.classList&&i.classList.value&&i.classList.value.trim()&&i.classList.value.trim().length?"."+i.classList.value.trim().replace(/\s+/g,"."):"");if(t.length+a.length>(e||100)-1)return t||a;if(t=t?a+">"+t:a,i.id)break;n=i.parentNode}}catch{}return t},OR=-1,ZL=function(){return OR},Mc=function(n){addEventListener("pageshow",function(e){e.persisted&&(OR=e.timeStamp,n(e))},!0)},m_=function(){var n=xd();return n&&n.activationStart||0},Ds=function(n,e){var t=xd(),i="navigate";return ZL()>=0?i="back-forward-cache":t&&(document.prerendering||m_()>0?i="prerender":document.wasDiscarded?i="restore":t.type&&(i=t.type.replace(/_/g,"-"))),{name:n,value:e===void 0?-1:e,rating:"good",delta:0,entries:[],id:"v4-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:i}},yl=function(n,e,t){try{if(PerformanceObserver.supportedEntryTypes.includes(n)){var i=new PerformanceObserver(function(a){Promise.resolve().then(function(){e(a.getEntries())})});return i.observe(Object.assign({type:n,buffered:!0},t||{})),i}}catch{}},Os=function(n,e,t,i){var a,l;return function(c){e.value>=0&&(c||i)&&((l=e.value-(a||0))||a===void 0)&&(a=e.value,e.delta=l,e.rating=function(d,m){return d>m[1]?"poor":d>m[0]?"needs-improvement":"good"}(e.value,t),n(e))}},p_=function(n){requestAnimationFrame(function(){return requestAnimationFrame(function(){return n()})})},Vd=function(n){document.addEventListener("visibilitychange",function(){document.visibilityState==="hidden"&&n()})},g_=function(n){var e=!1;return function(){e||(n(),e=!0)}},qo=-1,YA=function(){return document.visibilityState!=="hidden"||document.prerendering?1/0:0},nd=function(n){document.visibilityState==="hidden"&&qo>-1&&(qo=n.type==="visibilitychange"?n.timeStamp:0,JL())},XA=function(){addEventListener("visibilitychange",nd,!0),addEventListener("prerenderingchange",nd,!0)},JL=function(){removeEventListener("visibilitychange",nd,!0),removeEventListener("prerenderingchange",nd,!0)},MR=function(){return qo<0&&(qo=YA(),XA(),Mc(function(){setTimeout(function(){qo=YA(),XA()},0)})),{get firstHiddenTime(){return qo}}},y_=function(n){document.prerendering?addEventListener("prerenderingchange",function(){return n()},!0):n()},WA=[1800,3e3],eU=function(n,e){e=e||{},y_(function(){var t,i=MR(),a=Ds("FCP"),l=yl("paint",function(c){c.forEach(function(d){d.name==="first-contentful-paint"&&(l.disconnect(),d.startTime<i.firstHiddenTime&&(a.value=Math.max(d.startTime-m_(),0),a.entries.push(d),t(!0)))})});l&&(t=Os(n,a,WA,e.reportAllChanges),Mc(function(c){a=Ds("FCP"),t=Os(n,a,WA,e.reportAllChanges),p_(function(){a.value=performance.now()-c.timeStamp,t(!0)})}))})},ZA=[.1,.25],tU=function(n,e){(function(t,i){i=i||{},eU(g_(function(){var a,l=Ds("CLS",0),c=0,d=[],m=function(_){_.forEach(function(T){if(!T.hadRecentInput){var A=d[0],S=d[d.length-1];c&&T.startTime-S.startTime<1e3&&T.startTime-A.startTime<5e3?(c+=T.value,d.push(T)):(c=T.value,d=[T])}}),c>l.value&&(l.value=c,l.entries=d,a())},p=yl("layout-shift",m);p&&(a=Os(t,l,ZA,i.reportAllChanges),Vd(function(){m(p.takeRecords()),a(!0)}),Mc(function(){c=0,l=Ds("CLS",0),a=Os(t,l,ZA,i.reportAllChanges),p_(function(){return a()})}),setTimeout(a,0))}))})(function(t){var i=function(a){var l,c={};if(a.entries.length){var d=a.entries.reduce(function(p,_){return p&&p.value>_.value?p:_});if(d&&d.sources&&d.sources.length){var m=(l=d.sources).find(function(p){return p.node&&p.node.nodeType===1})||l[0];m&&(c={largestShiftTarget:d_(m.node),largestShiftTime:d.startTime,largestShiftValue:d.value,largestShiftSource:m,largestShiftEntry:d,loadState:DR(d.startTime)})}}return Object.assign(a,{attribution:c})}(t);n(i)},e)},PR=0,og=1/0,df=0,nU=function(n){n.forEach(function(e){e.interactionId&&(og=Math.min(og,e.interactionId),df=Math.max(df,e.interactionId),PR=df?(df-og)/7+1:0)})},xR=function(){return qg?PR:performance.interactionCount||0},rU=function(){"interactionCount"in performance||qg||(qg=yl("event",nU,{type:"event",buffered:!0,durationThreshold:0}))},fr=[],Hu=new Map,VR=0,iU=function(){var n=Math.min(fr.length-1,Math.floor((xR()-VR)/50));return fr[n]},kR=[],sU=function(n){if(kR.forEach(function(a){return a(n)}),n.interactionId||n.entryType==="first-input"){var e=fr[fr.length-1],t=Hu.get(n.interactionId);if(t||fr.length<10||n.duration>e.latency){if(t)n.duration>t.latency?(t.entries=[n],t.latency=n.duration):n.duration===t.latency&&n.startTime===t.entries[0].startTime&&t.entries.push(n);else{var i={id:n.interactionId,latency:n.duration,entries:[n]};Hu.set(i.id,i),fr.push(i)}fr.sort(function(a,l){return l.latency-a.latency}),fr.length>10&&fr.splice(10).forEach(function(a){return Hu.delete(a.id)})}}},__=function(n){var e=self.requestIdleCallback||self.setTimeout,t=-1;return n=g_(n),document.visibilityState==="hidden"?n():(t=e(n),Vd(n)),t},JA=[200,500],aU=function(n,e){"PerformanceEventTiming"in self&&"interactionId"in PerformanceEventTiming.prototype&&(e=e||{},y_(function(){var t;rU();var i,a=Ds("INP"),l=function(d){__(function(){d.forEach(sU);var m=iU();m&&m.latency!==a.value&&(a.value=m.latency,a.entries=m.entries,i())})},c=yl("event",l,{durationThreshold:(t=e.durationThreshold)!==null&&t!==void 0?t:40});i=Os(n,a,JA,e.reportAllChanges),c&&(c.observe({type:"first-input",buffered:!0}),Vd(function(){l(c.takeRecords()),i(!0)}),Mc(function(){VR=xR(),fr.length=0,Hu.clear(),a=Ds("INP"),i=Os(n,a,JA,e.reportAllChanges)}))}))},Yo=[],ps=[],Hg=0,v_=new WeakMap,Xo=new Map,Gg=-1,oU=function(n){Yo=Yo.concat(n),LR()},LR=function(){Gg<0&&(Gg=__(lU))},lU=function(){Xo.size>10&&Xo.forEach(function(c,d){Hu.has(d)||Xo.delete(d)});var n=fr.map(function(c){return v_.get(c.entries[0])}),e=ps.length-50;ps=ps.filter(function(c,d){return d>=e||n.includes(c)});for(var t=new Set,i=0;i<ps.length;i++){var a=ps[i];UR(a.startTime,a.processingEnd).forEach(function(c){t.add(c)})}var l=Yo.length-1-50;Yo=Yo.filter(function(c,d){return c.startTime>Hg&&d>l||t.has(c)}),Gg=-1};kR.push(function(n){n.interactionId&&n.target&&!Xo.has(n.interactionId)&&Xo.set(n.interactionId,n.target)},function(n){var e,t=n.startTime+n.duration;Hg=Math.max(Hg,n.processingEnd);for(var i=ps.length-1;i>=0;i--){var a=ps[i];if(Math.abs(t-a.renderTime)<=8){(e=a).startTime=Math.min(n.startTime,e.startTime),e.processingStart=Math.min(n.processingStart,e.processingStart),e.processingEnd=Math.max(n.processingEnd,e.processingEnd),e.entries.push(n);break}}e||(e={startTime:n.startTime,processingStart:n.processingStart,processingEnd:n.processingEnd,renderTime:t,entries:[n]},ps.push(e)),(n.interactionId||n.entryType==="first-input")&&v_.set(n,e),LR()});var UR=function(n,e){for(var t,i=[],a=0;t=Yo[a];a++)if(!(t.startTime+t.duration<n)){if(t.startTime>e)break;i.push(t)}return i},uU=function(n,e){QA||(QA=yl("long-animation-frame",oU)),aU(function(t){var i=function(a){var l=a.entries[0],c=v_.get(l),d=l.processingStart,m=c.processingEnd,p=c.entries.sort(function(U,$){return U.processingStart-$.processingStart}),_=UR(l.startTime,m),T=a.entries.find(function(U){return U.target}),A=T&&T.target||Xo.get(l.interactionId),S=[l.startTime+l.duration,m].concat(_.map(function(U){return U.startTime+U.duration})),N=Math.max.apply(Math,S),q={interactionTarget:d_(A),interactionTargetElement:A,interactionType:l.name.startsWith("key")?"keyboard":"pointer",interactionTime:l.startTime,nextPaintTime:N,processedEventEntries:p,longAnimationFrameEntries:_,inputDelay:d-l.startTime,processingDuration:m-d,presentationDelay:Math.max(N-m,0),loadState:DR(l.startTime)};return Object.assign(a,{attribution:q})}(t);n(i)},e)},eb=[2500,4e3],lg={},cU=function(n,e){(function(t,i){i=i||{},y_(function(){var a,l=MR(),c=Ds("LCP"),d=function(_){i.reportAllChanges||(_=_.slice(-1)),_.forEach(function(T){T.startTime<l.firstHiddenTime&&(c.value=Math.max(T.startTime-m_(),0),c.entries=[T],a())})},m=yl("largest-contentful-paint",d);if(m){a=Os(t,c,eb,i.reportAllChanges);var p=g_(function(){lg[c.id]||(d(m.takeRecords()),m.disconnect(),lg[c.id]=!0,a(!0))});["keydown","click"].forEach(function(_){addEventListener(_,function(){return __(p)},{once:!0,capture:!0})}),Vd(p),Mc(function(_){c=Ds("LCP"),a=Os(t,c,eb,i.reportAllChanges),p_(function(){c.value=performance.now()-_.timeStamp,lg[c.id]=!0,a(!0)})})}})})(function(t){var i=function(a){var l={timeToFirstByte:0,resourceLoadDelay:0,resourceLoadDuration:0,elementRenderDelay:a.value};if(a.entries.length){var c=xd();if(c){var d=c.activationStart||0,m=a.entries[a.entries.length-1],p=m.url&&performance.getEntriesByType("resource").filter(function(N){return N.name===m.url})[0],_=Math.max(0,c.responseStart-d),T=Math.max(_,p?(p.requestStart||p.startTime)-d:0),A=Math.max(T,p?p.responseEnd-d:0),S=Math.max(A,m.startTime-d);l={element:d_(m.element),timeToFirstByte:_,resourceLoadDelay:T-_,resourceLoadDuration:A-T,elementRenderDelay:S-A,navigationEntry:c,lcpEntry:m},m.url&&(l.url=m.url),p&&(l.lcpResourceEntry=p)}}return Object.assign(a,{attribution:l})}(t);n(i)},e)};const tb="@firebase/performance",$g="0.7.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zR=$g,hU="FB-PERF-TRACE-START",fU="FB-PERF-TRACE-STOP",Kg="FB-PERF-TRACE-MEASURE",FR="_wt_",jR="_fp",BR="_fcp",qR="_fid",HR="_lcp",dU="lcp_element",GR="_inp",mU="inp_interactionTarget",$R="_cls",pU="cls_largestShiftTarget",KR="@firebase/performance/config",QR="@firebase/performance/configexpire",gU="performance",YR="Performance";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yU={"trace started":"Trace {$traceName} was started before.","trace stopped":"Trace {$traceName} is not running.","nonpositive trace startTime":"Trace {$traceName} startTime should be positive.","nonpositive trace duration":"Trace {$traceName} duration should be positive.","no window":"Window is not available.","no app id":"App id is not available.","no project id":"Project id is not available.","no api key":"Api key is not available.","invalid cc log":"Attempted to queue invalid cc event","FB not default":"Performance can only start when Firebase app instance is the default one.","RC response not ok":"RC response is not ok","invalid attribute name":"Attribute name {$attributeName} is invalid.","invalid attribute value":"Attribute value {$attributeValue} is invalid.","invalid custom metric name":"Custom metric name {$customMetricName} is invalid","invalid String merger input":"Input for String merger is invalid, contact support team to resolve.","already initialized":"initializePerformance() has already been called with different options. To avoid this error, call initializePerformance() with the same options as when it was originally called, or call getPerformance() to return the already initialized instance."},hn=new xs(gU,YR,yU);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ms=new gc(YR);Ms.logLevel=ke.INFO;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ug,XR;class zt{constructor(e){if(this.window=e,!e)throw hn.create("no window");this.performance=e.performance,this.PerformanceObserver=e.PerformanceObserver,this.windowLocation=e.location,this.navigator=e.navigator,this.document=e.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=e.localStorage),e.perfMetrics&&e.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=e.perfMetrics.onFirstInputDelay),this.onLCP=cU,this.onINP=uU,this.onCLS=tU}getUrl(){return this.windowLocation.href.split("?")[0]}mark(e){!this.performance||!this.performance.mark||this.performance.mark(e)}measure(e,t,i){!this.performance||!this.performance.measure||this.performance.measure(e,t,i)}getEntriesByType(e){return!this.performance||!this.performance.getEntriesByType?[]:this.performance.getEntriesByType(e)}getEntriesByName(e){return!this.performance||!this.performance.getEntriesByName?[]:this.performance.getEntriesByName(e)}getTimeOrigin(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)}requiredApisAvailable(){return!fetch||!Promise||!ay()?(Ms.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1):ad()?!0:(Ms.info("IndexedDB is not supported by current browser"),!1)}setupObserver(e,t){if(!this.PerformanceObserver)return;new this.PerformanceObserver(a=>{for(const l of a.getEntries())t(l)}).observe({entryTypes:[e]})}static getInstance(){return ug===void 0&&(ug=new zt(XR)),ug}}function _U(n){XR=n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let WR;function vU(n){const e=n.getId();return e.then(t=>{WR=t}),e}function E_(){return WR}function EU(n){const e=n.getToken();return e.then(t=>{}),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nb(n,e){const t=n.length-e.length;if(t<0||t>1)throw hn.create("invalid String merger input");const i=[];for(let a=0;a<n.length;a++)i.push(n.charAt(a)),e.length>a&&i.push(e.charAt(a));return i.join("")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cg;class Ln{constructor(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=nb("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=nb("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}getFlTransportFullUrl(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)}static getInstance(){return cg===void 0&&(cg=new Ln),cg}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Gu;(function(n){n[n.UNKNOWN=0]="UNKNOWN",n[n.VISIBLE=1]="VISIBLE",n[n.HIDDEN=2]="HIDDEN"})(Gu||(Gu={}));const TU=["firebase_","google_","ga_"],AU=new RegExp("^[a-zA-Z]\\w*$"),bU=40,wU=100;function SU(){const n=zt.getInstance().navigator;return n?.serviceWorker?n.serviceWorker.controller?2:3:1}function RU(){switch(zt.getInstance().document.visibilityState){case"visible":return Gu.VISIBLE;case"hidden":return Gu.HIDDEN;default:return Gu.UNKNOWN}}function IU(){const e=zt.getInstance().navigator.connection;switch(e&&e.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}function CU(n){return n.length===0||n.length>bU?!1:!TU.some(t=>n.startsWith(t))&&!!n.match(AU)}function NU(n){return n.length!==0&&n.length<=wU}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZR(n){var e;const t=(e=n.options)===null||e===void 0?void 0:e.appId;if(!t)throw hn.create("no app id");return t}function DU(n){var e;const t=(e=n.options)===null||e===void 0?void 0:e.projectId;if(!t)throw hn.create("no project id");return t}function OU(n){var e;const t=(e=n.options)===null||e===void 0?void 0:e.apiKey;if(!t)throw hn.create("no api key");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MU="0.0.1",hr={loggingEnabled:!0},PU="FIREBASE_INSTALLATIONS_AUTH";function xU(n,e){const t=VU();return t?(rb(t),Promise.resolve()):UU(n,e).then(rb).then(i=>kU(i),()=>{})}function VU(){const n=zt.getInstance().localStorage;if(!n)return;const e=n.getItem(QR);if(!e||!zU(e))return;const t=n.getItem(KR);if(t)try{return JSON.parse(t)}catch{return}}function kU(n){const e=zt.getInstance().localStorage;!n||!e||(e.setItem(KR,JSON.stringify(n)),e.setItem(QR,String(Date.now()+Ln.getInstance().configTimeToLive*60*60*1e3)))}const LU="Could not fetch config, will use default configs";function UU(n,e){return EU(n.installations).then(t=>{const i=DU(n.app),a=OU(n.app),l=`https://firebaseremoteconfig.googleapis.com/v1/projects/${i}/namespaces/fireperf:fetch?key=${a}`,c=new Request(l,{method:"POST",headers:{Authorization:`${PU} ${t}`},body:JSON.stringify({app_instance_id:e,app_instance_id_token:t,app_id:ZR(n.app),app_version:zR,sdk_version:MU})});return fetch(c).then(d=>{if(d.ok)return d.json();throw hn.create("RC response not ok")})}).catch(()=>{Ms.info(LU)})}function rb(n){if(!n)return n;const e=Ln.getInstance(),t=n.entries||{};return t.fpr_enabled!==void 0?e.loggingEnabled=String(t.fpr_enabled)==="true":e.loggingEnabled=hr.loggingEnabled,t.fpr_log_source?e.logSource=Number(t.fpr_log_source):hr.logSource&&(e.logSource=hr.logSource),t.fpr_log_endpoint_url?e.logEndPointUrl=t.fpr_log_endpoint_url:hr.logEndPointUrl&&(e.logEndPointUrl=hr.logEndPointUrl),t.fpr_log_transport_key?e.transportKey=t.fpr_log_transport_key:hr.transportKey&&(e.transportKey=hr.transportKey),t.fpr_vc_network_request_sampling_rate!==void 0?e.networkRequestsSamplingRate=Number(t.fpr_vc_network_request_sampling_rate):hr.networkRequestsSamplingRate!==void 0&&(e.networkRequestsSamplingRate=hr.networkRequestsSamplingRate),t.fpr_vc_trace_sampling_rate!==void 0?e.tracesSamplingRate=Number(t.fpr_vc_trace_sampling_rate):hr.tracesSamplingRate!==void 0&&(e.tracesSamplingRate=hr.tracesSamplingRate),e.logTraceAfterSampling=ib(e.tracesSamplingRate),e.logNetworkAfterSampling=ib(e.networkRequestsSamplingRate),n}function zU(n){return Number(n)>Date.now()}function ib(n){return Math.random()<=n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let T_=1,hg;function JR(n){return T_=2,hg=hg||jU(n),hg}function FU(){return T_===3}function jU(n){return BU().then(()=>vU(n.installations)).then(e=>xU(n,e)).then(()=>sb(),()=>sb())}function BU(){const n=zt.getInstance().document;return new Promise(e=>{if(n&&n.readyState!=="complete"){const t=()=>{n.readyState==="complete"&&(n.removeEventListener("readystatechange",t),e())};n.addEventListener("readystatechange",t)}else e()})}function sb(){T_=3}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eI=10*1e3,qU=5.5*1e3,HU=1e3,tI=3;let If=tI,Ma=[],ab=!1;function GU(){ab||(A_(qU),ab=!0)}function A_(n){setTimeout(()=>{If<=0||(Ma.length>0&&nI(),A_(eI))},n)}function nI(){const n=Ma.splice(0,HU),e=n.map(i=>({source_extension_json_proto3:i.message,event_time_ms:String(i.eventTime)})),t={request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:Ln.getInstance().logSource,log_event:e};$U(t).then(()=>{If=tI}).catch(()=>{Ma=[...n,...Ma],If--,Ms.info(`Tries left: ${If}.`),A_(eI)})}function $U(n){const e=Ln.getInstance().getFlTransportFullUrl(),t=JSON.stringify(n);return navigator.sendBeacon&&navigator.sendBeacon(e,t)?Promise.resolve():fetch(e,{method:"POST",body:t,keepalive:!0}).then()}function KU(n){if(!n.eventTime||!n.message)throw hn.create("invalid cc log");Ma=[...Ma,n]}function QU(n){return(...e)=>{const t=n(...e);KU({message:t,eventTime:Date.now()})}}function YU(){for(;Ma.length>0;)nI()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $u;function rI(n,e){$u||($u={send:QU(ZU),flush:YU}),$u.send(n,e)}function mf(n){const e=Ln.getInstance();!e.instrumentationEnabled&&n.isAuto||!e.dataCollectionEnabled&&!n.isAuto||zt.getInstance().requiredApisAvailable()&&(FU()?fg(n):JR(n.performanceController).then(()=>fg(n),()=>fg(n)))}function XU(){$u&&$u.flush()}function fg(n){if(!E_())return;const e=Ln.getInstance();!e.loggingEnabled||!e.logTraceAfterSampling||rI(n,1)}function WU(n){const e=Ln.getInstance();if(!e.instrumentationEnabled)return;const t=n.url,i=e.logEndPointUrl.split("?")[0],a=e.flTransportEndpointUrl.split("?")[0];t===i||t===a||!e.loggingEnabled||!e.logNetworkAfterSampling||rI(n,0)}function ZU(n,e){return e===0?JU(n):e4(n)}function JU(n){const e={url:n.url,http_method:n.httpMethod||0,http_response_code:200,response_payload_bytes:n.responsePayloadBytes,client_start_time_us:n.startTimeUs,time_to_response_initiated_us:n.timeToResponseInitiatedUs,time_to_response_completed_us:n.timeToResponseCompletedUs},t={application_info:iI(n.performanceController.app),network_request_metric:e};return JSON.stringify(t)}function e4(n){const e={name:n.name,is_auto:n.isAuto,client_start_time_us:n.startTimeUs,duration_us:n.durationUs};Object.keys(n.counters).length!==0&&(e.counters=n.counters);const t=n.getAttributes();Object.keys(t).length!==0&&(e.custom_attributes=t);const i={application_info:iI(n.performanceController.app),trace_metric:e};return JSON.stringify(i)}function iI(n){return{google_app_id:ZR(n),app_instance_id:E_(),web_app_info:{sdk_version:zR,page_url:zt.getInstance().getUrl(),service_worker_status:SU(),visibility_state:RU(),effective_connection_type:IU()},application_process_state:0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ob(n,e){const t=e;if(!t||t.responseStart===void 0)return;const i=zt.getInstance().getTimeOrigin(),a=Math.floor((t.startTime+i)*1e3),l=t.responseStart?Math.floor((t.responseStart-t.startTime)*1e3):void 0,c=Math.floor((t.responseEnd-t.startTime)*1e3),d=t.name&&t.name.split("?")[0],m={performanceController:n,url:d,responsePayloadBytes:t.transferSize,startTimeUs:a,timeToResponseInitiatedUs:l,timeToResponseCompletedUs:c};WU(m)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t4=100,n4="_",r4=[jR,BR,qR,HR,$R,GR];function i4(n,e){return n.length===0||n.length>t4?!1:e&&e.startsWith(FR)&&r4.indexOf(n)>-1||!n.startsWith(n4)}function s4(n){const e=Math.floor(n);return e<n&&Ms.info(`Metric value should be an Integer, setting the value as : ${e}.`),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oc{constructor(e,t,i=!1,a){this.performanceController=e,this.name=t,this.isAuto=i,this.state=1,this.customAttributes={},this.counters={},this.api=zt.getInstance(),this.randomId=Math.floor(Math.random()*1e6),this.isAuto||(this.traceStartMark=`${hU}-${this.randomId}-${this.name}`,this.traceStopMark=`${fU}-${this.randomId}-${this.name}`,this.traceMeasure=a||`${Kg}-${this.randomId}-${this.name}`,a&&this.calculateTraceMetrics())}start(){if(this.state!==1)throw hn.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2}stop(){if(this.state!==2)throw hn.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),mf(this)}record(e,t,i){if(e<=0)throw hn.create("nonpositive trace startTime",{traceName:this.name});if(t<=0)throw hn.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(t*1e3),this.startTimeUs=Math.floor(e*1e3),i&&i.attributes&&(this.customAttributes=Object.assign({},i.attributes)),i&&i.metrics)for(const a of Object.keys(i.metrics))isNaN(Number(i.metrics[a]))||(this.counters[a]=Math.floor(Number(i.metrics[a])));mf(this)}incrementMetric(e,t=1){this.counters[e]===void 0?this.putMetric(e,t):this.putMetric(e,this.counters[e]+t)}putMetric(e,t){if(i4(e,this.name))this.counters[e]=s4(t??0);else throw hn.create("invalid custom metric name",{customMetricName:e})}getMetric(e){return this.counters[e]||0}putAttribute(e,t){const i=CU(e),a=NU(t);if(i&&a){this.customAttributes[e]=t;return}if(!i)throw hn.create("invalid attribute name",{attributeName:e});if(!a)throw hn.create("invalid attribute value",{attributeValue:t})}getAttribute(e){return this.customAttributes[e]}removeAttribute(e){this.customAttributes[e]!==void 0&&delete this.customAttributes[e]}getAttributes(){return Object.assign({},this.customAttributes)}setStartTime(e){this.startTimeUs=e}setDuration(e){this.durationUs=e}calculateTraceMetrics(){const e=this.api.getEntriesByName(this.traceMeasure),t=e&&e[0];t&&(this.durationUs=Math.floor(t.duration*1e3),this.startTimeUs=Math.floor((t.startTime+this.api.getTimeOrigin())*1e3))}static createOobTrace(e,t,i,a,l){const c=zt.getInstance().getUrl();if(!c)return;const d=new oc(e,FR+c,!0),m=Math.floor(zt.getInstance().getTimeOrigin()*1e3);d.setStartTime(m),t&&t[0]&&(d.setDuration(Math.floor(t[0].duration*1e3)),d.putMetric("domInteractive",Math.floor(t[0].domInteractive*1e3)),d.putMetric("domContentLoadedEventEnd",Math.floor(t[0].domContentLoadedEventEnd*1e3)),d.putMetric("loadEventEnd",Math.floor(t[0].loadEventEnd*1e3)));const p="first-paint",_="first-contentful-paint";if(i){const T=i.find(S=>S.name===p);T&&T.startTime&&d.putMetric(jR,Math.floor(T.startTime*1e3));const A=i.find(S=>S.name===_);A&&A.startTime&&d.putMetric(BR,Math.floor(A.startTime*1e3)),l&&d.putMetric(qR,Math.floor(l*1e3))}this.addWebVitalMetric(d,HR,dU,a.lcp),this.addWebVitalMetric(d,$R,pU,a.cls),this.addWebVitalMetric(d,GR,mU,a.inp),mf(d),XU()}static addWebVitalMetric(e,t,i,a){a&&(e.putMetric(t,Math.floor(a.value*1e3)),a.elementAttribution&&e.putAttribute(i,a.elementAttribution))}static createUserTimingTrace(e,t){const i=new oc(e,t,!1,t);mf(i)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cf={},lb=!1,sI;function ub(n){E_()&&(setTimeout(()=>o4(n),0),setTimeout(()=>a4(n),0),setTimeout(()=>l4(n),0))}function a4(n){const e=zt.getInstance(),t=e.getEntriesByType("resource");for(const i of t)ob(n,i);e.setupObserver("resource",i=>ob(n,i))}function o4(n){const e=zt.getInstance();"onpagehide"in window?e.document.addEventListener("pagehide",()=>dg(n)):e.document.addEventListener("unload",()=>dg(n)),e.document.addEventListener("visibilitychange",()=>{e.document.visibilityState==="hidden"&&dg(n)}),e.onFirstInputDelay&&e.onFirstInputDelay(t=>{sI=t}),e.onLCP(t=>{var i;Cf.lcp={value:t.value,elementAttribution:(i=t.attribution)===null||i===void 0?void 0:i.element}}),e.onCLS(t=>{var i;Cf.cls={value:t.value,elementAttribution:(i=t.attribution)===null||i===void 0?void 0:i.largestShiftTarget}}),e.onINP(t=>{var i;Cf.inp={value:t.value,elementAttribution:(i=t.attribution)===null||i===void 0?void 0:i.interactionTarget}})}function l4(n){const e=zt.getInstance(),t=e.getEntriesByType("measure");for(const i of t)cb(n,i);e.setupObserver("measure",i=>cb(n,i))}function cb(n,e){const t=e.name;t.substring(0,Kg.length)!==Kg&&oc.createUserTimingTrace(n,t)}function dg(n){if(!lb){lb=!0;const e=zt.getInstance(),t=e.getEntriesByType("navigation"),i=e.getEntriesByType("paint");setTimeout(()=>{oc.createOobTrace(n,t,i,Cf,sI)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u4{constructor(e,t){this.app=e,this.installations=t,this.initialized=!1}_init(e){this.initialized||(e?.dataCollectionEnabled!==void 0&&(this.dataCollectionEnabled=e.dataCollectionEnabled),e?.instrumentationEnabled!==void 0&&(this.instrumentationEnabled=e.instrumentationEnabled),zt.getInstance().requiredApisAvailable()?od().then(t=>{t&&(GU(),JR(this).then(()=>ub(this),()=>ub(this)),this.initialized=!0)}).catch(t=>{Ms.info(`Environment doesn't support IndexedDB: ${t}`)}):Ms.info('Firebase Performance cannot start if the browser does not support "Fetch" and "Promise", or cookies are disabled.'))}set instrumentationEnabled(e){Ln.getInstance().instrumentationEnabled=e}get instrumentationEnabled(){return Ln.getInstance().instrumentationEnabled}set dataCollectionEnabled(e){Ln.getInstance().dataCollectionEnabled=e}get dataCollectionEnabled(){return Ln.getInstance().dataCollectionEnabled}}const c4="[DEFAULT]";function h4(n=yc()){return n=lt(n),xi(n,"performance").getImmediate()}const f4=(n,{options:e})=>{const t=n.getProvider("app").getImmediate(),i=n.getProvider("installations-internal").getImmediate();if(t.name!==c4)throw hn.create("FB not default");if(typeof window>"u")throw hn.create("no window");_U(window);const a=new u4(t,i);return a._init(e),a};function d4(){nr(new Fn("performance",f4,"PUBLIC")),fn(tb,$g),fn(tb,$g,"esm2017")}d4();const m4={apiKey:void 0,authDomain:void 0,projectId:void 0,storageBucket:void 0,messagingSenderId:void 0,appId:void 0,measurementId:void 0},lc=Bb(m4),Ku=xP(lc),fe=LV(lc);Ik(lc);let p4=null,g4=null;try{QL().then(n=>{n&&(p4=$L(lc))}).catch(()=>{console.warn("Firebase Analytics no está soportado en este entorno")}),typeof window<"u"&&(g4=h4(lc))}catch(n){console.warn("Error al inicializar Firebase Analytics/Performance:",n)}const Wo={ADMIN:"admin",CONTADOR:"contador",CLIENTE:"cliente"},st={MANAGE_INVENTORY:"canManageInventory",CREATE_MOVEMENTS:"canCreateMovements",VIEW_ALL_MOVEMENTS:"canViewAllMovements",MANAGE_VEHICLES:"canManageVehicles",MANAGE_MAINTENANCE:"canManageMaintenance",MANAGE_SUPPLIERS:"canManageSuppliers",VIEW_REPORTS:"canViewReports",EXPORT_REPORTS:"canExportReports",MODIFY_SETTINGS:"canModifySettings"},y4="contacto.evert@gmail.com",aI=n=>{switch(n){case Wo.ADMIN:return{[st.MANAGE_INVENTORY]:!0,[st.CREATE_MOVEMENTS]:!0,[st.VIEW_ALL_MOVEMENTS]:!0,[st.MANAGE_VEHICLES]:!0,[st.MANAGE_MAINTENANCE]:!0,[st.MANAGE_SUPPLIERS]:!0,[st.VIEW_REPORTS]:!0,[st.EXPORT_REPORTS]:!0,[st.MODIFY_SETTINGS]:!0};case Wo.CONTADOR:return{[st.MANAGE_INVENTORY]:!0,[st.CREATE_MOVEMENTS]:!0,[st.VIEW_ALL_MOVEMENTS]:!0,[st.MANAGE_VEHICLES]:!1,[st.MANAGE_MAINTENANCE]:!0,[st.MANAGE_SUPPLIERS]:!1,[st.VIEW_REPORTS]:!0,[st.EXPORT_REPORTS]:!0,[st.MODIFY_SETTINGS]:!1};case Wo.CLIENTE:default:return{[st.MANAGE_INVENTORY]:!1,[st.CREATE_MOVEMENTS]:!0,[st.VIEW_ALL_MOVEMENTS]:!1,[st.MANAGE_VEHICLES]:!1,[st.MANAGE_MAINTENANCE]:!1,[st.MANAGE_SUPPLIERS]:!1,[st.VIEW_REPORTS]:!1,[st.EXPORT_REPORTS]:!1,[st.MODIFY_SETTINGS]:!1}}},_4=n=>n===y4?Wo.ADMIN:Wo.CLIENTE,il=()=>"artifacts/undefined/invitations",v4=()=>{const n="ABCDEFGHIJKLMNPQRSTUVWXYZ123456789";let e="";for(let t=0;t<8;t++)e+=n.charAt(Math.floor(Math.random()*n.length));return e},I6=async(n,e)=>{try{const t=await kd(e);if(!t.success||t.userData.role!=="admin")return{success:!1,error:"Solo administradores pueden crear invitaciones"};let i,a=!1,l=0;for(;!a&&l<10;){i=v4();const m=Ie(ze(fe,il()),Ne("code","==",i));(await Tt(m)).empty&&(a=!0),l++}if(!a)return{success:!1,error:"No se pudo generar un código único"};const c=Ye(ze(fe,il())),d={code:i,targetEmail:n.email.toLowerCase(),targetRole:n.role||Wo.CLIENTE,targetName:n.name||"",status:"pending",appContext:"combustibles",expiresAt:new Date(Date.now()+7*24*60*60*1e3),createdAt:Le(),createdBy:e,usedAt:null,usedBy:null};return await a_(c,d),console.log("🎫 Invitación creada:",{code:i,email:n.email,role:n.role}),{success:!0,invitation:{id:c.id,code:i,...d}}}catch(t){return console.error("Error creating invitation:",t),{success:!1,error:t.message}}},oI=async n=>{try{const e=Ie(ze(fe,il()),Ne("code","==",n.toUpperCase()),Ne("status","==","pending")),t=await Tt(e);if(t.empty)return{success:!1,error:"Código de invitación inválido o expirado"};const i=t.docs[0],a=i.data(),l=new Date,c=a.expiresAt.toDate();return l>c?{success:!1,error:"Código de invitación expirado"}:{success:!0,invitation:{id:i.id,...a}}}catch(e){return console.error("Error validating invitation:",e),{success:!1,error:e.message}}},E4=async(n,e)=>{try{const t=Ye(fe,il(),n);return await Ha(t,{status:"used",usedAt:Le(),usedBy:e}),{success:!0}}catch(t){return console.error("Error marking invitation as used:",t),{success:!1,error:t.message}}},C6=async n=>{try{const e=await kd(n);if(!e.success||e.userData.role!=="admin")return{success:!1,error:"Solo administradores pueden ver invitaciones"};const t=Ie(ze(fe,il())),i=await Tt(t),a=[];return i.forEach(l=>{a.push({id:l.id,...l.data()})}),a.sort((l,c)=>{const d=l.createdAt?.toDate()||new Date(0);return(c.createdAt?.toDate()||new Date(0))-d}),{success:!0,invitations:a}}catch(e){return console.error("Error getting invitations:",e),{success:!1,error:e.message}}},N6=async(n,e)=>{try{const t=await kd(e);if(!t.success||t.userData.role!=="admin")return{success:!1,error:"Solo administradores pueden cancelar invitaciones"};const i=Ye(fe,il(),n);return await Ha(i,{status:"cancelled",cancelledAt:Le(),cancelledBy:e}),{success:!0}}catch(t){return console.error("Error cancelling invitation:",t),{success:!1,error:t.message}}},T4=n=>aI(n.targetRole),lI=async(n,e={})=>{const t=Ye(fe,"artifacts/undefined/users",n.uid);try{const i=await Fs(t);if(i.exists())return{success:!0,userData:i.data(),isNewUser:!1};{const a=_4(n.email),l={uid:n.uid,email:n.email,displayName:n.displayName||"",photoURL:n.photoURL||"",role:a,emailVerified:n.emailVerified,combustiblesPermissions:aI(a),createdAt:new Date().toISOString(),lastLogin:new Date().toISOString(),...e};return await a_(t,l),{success:!0,userData:l,isNewUser:!0}}}catch(i){return console.error("Error creating/updating user profile:",i),{success:!1,error:i.message}}},hb=async(n,e,t={})=>{const i=Ye(fe,"artifacts/undefined/users",n.uid);try{const a=await Fs(i);if(a.exists())return{success:!0,userData:a.data(),isNewUser:!1};const l=await oI(e);if(!l.success)return l;const c=l.invitation;if(c.targetEmail!==n.email.toLowerCase())return{success:!1,error:"El código de invitación no corresponde a este email"};const d={uid:n.uid,email:n.email,displayName:n.displayName||c.targetName||"",photoURL:n.photoURL||"",role:c.targetRole,emailVerified:n.emailVerified,combustiblesPermissions:T4(c),invitationUsed:c.id,createdAt:new Date().toISOString(),lastLogin:new Date().toISOString(),...t};return await a_(i,d),await E4(c.id,n.uid),console.log("👤 Usuario creado con invitación:",{email:n.email,role:c.targetRole,invitationCode:c.code}),{success:!0,userData:d,isNewUser:!0}}catch(a){return console.error("Error creating user profile with invitation:",a),{success:!1,error:a.message}}},kd=async n=>{try{const e=Ye(fe,"artifacts/undefined/users",n),t=await Fs(e);return t.exists()?{success:!0,userData:t.data()}:{success:!1,error:"Usuario no encontrado"}}catch(e){return console.error("Error fetching user profile:",e),{success:!1,error:e.message}}},uI=z.createContext(),A4=()=>{const n=z.useContext(uI);if(n===void 0)throw new Error("useAuth must be used within an AuthProvider");return n},b4=({children:n})=>{const[e,t]=z.useState(null),[i,a]=z.useState(null),[l,c]=z.useState(!0),[d,m]=z.useState(null);z.useEffect(()=>{const S=AM(Ku,async N=>{try{if(c(!0),m(null),N){t(N);let q=await kd(N.uid);q.success||(q=await lI(N,{provider:"existing_account",appContext:"combustibles"})),q.success?a(q.userData):m("Error cargando perfil de usuario")}else t(null),a(null)}catch(q){console.error("Error en autenticación:",q),m("Error de autenticación")}finally{c(!1)}});return()=>S()},[]);const A={user:e,userProfile:i,loading:l,error:d,hasPermission:S=>i?.combustiblesPermissions?.[S]||!1,isAdmin:()=>i?.role==="admin",isCounterOrAbove:()=>i?.role==="admin"||i?.role==="contador"};return k.jsx(uI.Provider,{value:A,children:n})},Ra={DIESEL:"diesel",GASOLINE:"gasoline",ACPM:"acpm",LUBRICANTS:"lubricants",TWO_STROKE:"two_stroke",MIXED:"mixed"},w4={[Ra.DIESEL]:{name:"Diésel",description:"Combustible para maquinaria pesada",unit:"galones",category:"Combustible",color:"#fbbf24",icon:"🚛",density:.85,priceUnit:"COP/galón"},[Ra.GASOLINE]:{name:"Gasolina",description:"Combustible para vehículos livianos",unit:"galones",category:"Combustible",color:"#ef4444",icon:"⛽",density:.75,priceUnit:"COP/galón"},[Ra.ACPM]:{name:"ACPM",description:"Aceite Combustible Para Motor",unit:"galones",category:"Combustible",color:"#8b5cf6",icon:"🚜",density:.85,priceUnit:"COP/galón"},[Ra.LUBRICANTS]:{name:"Lubricantes",description:"Aceites y lubricantes para mantenimiento",unit:"litros",category:"Mantenimiento",color:"#06b6d4",icon:"🛢️",density:.9,priceUnit:"COP/litro"},[Ra.TWO_STROKE]:{name:"Mezcla 2T",description:"Mezcla para motores de 2 tiempos (motosierras)",unit:"litros",category:"Especializado",color:"#10b981",icon:"🪚",density:.78,priceUnit:"COP/litro"},[Ra.MIXED]:{name:"Mixto",description:"Compatible con múltiples tipos de combustible",unit:"galones",category:"Flexible",color:"#64748b",icon:"🔄",density:.8,priceUnit:"COP/galón"}},un={CRITICAL:"critical",LOW:"low",MEDIUM:"medium",HIGH:"high",FULL:"full"},ku={[un.CRITICAL]:{label:"Crítico",color:"#dc2626",icon:"🚨",threshold:.1},[un.LOW]:{label:"Bajo",color:"#ea580c",icon:"⚠️",threshold:.25},[un.MEDIUM]:{label:"Medio",color:"#ca8a04",icon:"📊",threshold:.5},[un.HIGH]:{label:"Alto",color:"#16a34a",icon:"✅",threshold:.75},[un.FULL]:{label:"Completo",color:"#059669",icon:"🟢",threshold:1}},b_=(n,e)=>{if(e===0)return un.CRITICAL;const t=n/e;return t<ku[un.CRITICAL].threshold?un.CRITICAL:t<ku[un.LOW].threshold?un.LOW:t<ku[un.MEDIUM].threshold?un.MEDIUM:t<ku[un.HIGH].threshold?un.HIGH:un.FULL},S4=(n=[])=>Array.isArray(n)?n.reduce((e,t)=>{const i=parseFloat(t.currentStock)||0,a=parseFloat(t.pricePerUnit)||0;return e+i*a},0):0,R4=(n=[],e=null)=>{if(!Array.isArray(n))return e?0:{};if(e)return n.filter(i=>i.fuelType===e).reduce((i,a)=>i+(parseFloat(a.currentStock)||0),0);const t={};return Object.values(Ra).forEach(i=>{t[i]=n.filter(a=>a.fuelType===i).reduce((a,l)=>a+(parseFloat(l.currentStock)||0),0)}),t},I4=(n,e)=>{if(!e||e===0)return 0;const t=(parseFloat(n)||0)/parseFloat(e);return Math.min(Math.max(t*100,0),100)},C4=(n=[],e=.15)=>Array.isArray(n)?n.map(t=>{const i=parseFloat(t.currentStock)||0,a=parseFloat(t.maxCapacity)||0,l=a>0?i/a:0,c=b_(i,a);return{...t,percentage:l*100,stockLevel:c,isLowStock:l<=e,stockInfo:ku[c]}}).filter(t=>t.isLowStock).sort((t,i)=>t.percentage-i.percentage):[],D6=(n=[])=>{if(!Array.isArray(n))return{totalValue:0,totalItems:0,activeItems:0,lowStockItems:0,criticalItems:0,averageStockLevel:0,stockByType:{}};const e=S4(n),t=n.length,i=n.filter(m=>m.status==="active").length,a=C4(n),l=a.filter(m=>m.stockLevel===un.CRITICAL).length,c=R4(n),d=n.length>0?n.reduce((m,p)=>{const _=I4(p.currentStock,p.maxCapacity);return m+_},0)/n.length:0;return{totalValue:e,totalItems:t,activeItems:i,lowStockItems:a.length,criticalItems:l,averageStockLevel:d,stockByType:c}},O6=(n,e=[])=>{if(!n||!n.fuelType||!n.quantity)return{isValid:!1,error:"Datos de movimiento incompletos",availableStock:0,requiredStock:0};const{fuelType:t,quantity:i,type:a,sourceLocation:l}=n,c=parseFloat(i)||0;if(a!=="outbound"&&a!=="transfer")return{isValid:!0,message:"Movimiento no requiere validación de stock",availableStock:0,requiredStock:c};const d=e.filter(_=>_.fuelType===t&&_.location?.toLowerCase()===l?.toLowerCase()&&_.status==="active").reduce((_,T)=>_+(parseFloat(T.currentStock)||0),0),m=d>=c,p=d-c;return console.log(`Validación de stock - Tipo: ${t}, Ubicación: ${l}`,{itemsEncontrados:e.filter(_=>_.fuelType===t&&_.location?.toLowerCase()===l?.toLowerCase()&&_.status==="active").length,disponible:d,requerido:c,valido:d>=c}),{isValid:m,availableStock:d,requiredStock:c,remainingStock:p,fuelType:t,location:l,error:m?null:`Stock insuficiente. Disponible: ${d}, Requerido: ${c}`,warning:p<d*.2&&p>=0?"Stock quedará bajo después del movimiento":null}},w_=(n=[],e={})=>{if(!Array.isArray(n))return{totalCost:0,costsByType:{},costsByLocation:{}};let t=0;const i={},a={};return n.forEach(l=>{const c=parseFloat(l.quantity)||0,d=l.fuelType,m=l.sourceLocation||l.location,p=e[d]||parseFloat(l.pricePerUnit)||0,_=c*p;t+=_,i[d]||(i[d]=0),i[d]+=_,m&&(a[m]||(a[m]=0),a[m]+=_)}),{totalCost:t,costsByType:i,costsByLocation:a,averageCostPerMovement:n.length>0?t/n.length:0}},M6=(n=[])=>Array.isArray(n)?{totalMovements:n.length,pendingMovements:n.filter(t=>t.status==="pending").length,completedMovements:n.filter(t=>t.status==="completed").length,cancelledMovements:n.filter(t=>t.status==="cancelled").length,movementsByType:{inbound:n.filter(t=>t.type==="inbound").length,outbound:n.filter(t=>t.type==="outbound").length,transfer:n.filter(t=>t.type==="transfer").length,adjustment:n.filter(t=>t.type==="adjustment").length},totalQuantity:n.reduce((t,i)=>t+(parseFloat(i.quantity)||0),0)}:{totalMovements:0,pendingMovements:0,completedMovements:0,cancelledMovements:0,movementsByType:{},totalQuantity:0},cI=(n,e=[])=>{if(!n)return{averageConsumption:0,totalConsumption:0,movementsCount:0};const t=e.filter(c=>c.vehicleId===n.id&&c.type==="outbound"&&c.status==="completed"),i=t.reduce((c,d)=>c+(parseFloat(d.quantity)||0),0),a=t.length;return{averageConsumption:a>0?i/a:0,totalConsumption:i,movementsCount:a,consumptionByFuelType:t.reduce((c,d)=>{const m=d.fuelType;return c[m]||(c[m]=0),c[m]+=parseFloat(d.quantity)||0,c},{})}},N4=(n,e=[])=>{if(!n)return{efficiency:0,unit:"L/h"};const t=cI(n,e),i=parseFloat(n.hoursWorked)||0;if(i===0||t.totalConsumption===0)return{efficiency:0,unit:"L/h",hoursWorked:i,totalConsumption:t.totalConsumption};const a=t.totalConsumption/i;return{efficiency:a,unit:"L/h",hoursWorked:i,totalConsumption:t.totalConsumption,efficiencyRating:a<10?"Excelente":a<20?"Buena":a<30?"Regular":"Necesita revisión"}},P6=(n,e=[],t={})=>{if(!n)return{totalCost:0,costPerHour:0,costPerMovement:0};const i=e.filter(c=>c.vehicleId===n.id&&c.type==="outbound"&&c.status==="completed"),a=w_(i,t),l=parseFloat(n.hoursWorked)||0;return{totalCost:a.totalCost,costPerHour:l>0?a.totalCost/l:0,costPerMovement:a.averageCostPerMovement,costsByFuelType:a.costsByType,movementsCount:i.length}},x6=(n=[],e=[])=>{if(!Array.isArray(n))return{totalVehicles:0,activeVehicles:0,totalHours:0,totalConsumption:0,averageEfficiency:0,vehiclesByType:{},vehiclesByStatus:{}};const t=n.length,i=n.filter(T=>T.status==="active").length,a=n.reduce((T,A)=>T+(parseFloat(A.hoursWorked)||0),0);let l=0,c=0,d=0;n.forEach(T=>{const A=cI(T,e),S=N4(T,e);l+=A.totalConsumption,S.efficiency>0&&(c+=S.efficiency,d++)});const m=d>0?c/d:0,p=n.reduce((T,A)=>{const S=A.type||"unknown";return T[S]=(T[S]||0)+1,T},{}),_=n.reduce((T,A)=>{const S=A.status||"unknown";return T[S]=(T[S]||0)+1,T},{});return{totalVehicles:t,activeVehicles:i,totalHours:a,totalConsumption:l,averageEfficiency:m,vehiclesByType:p,vehiclesByStatus:_}},V6=(n=[],e={},t={})=>{if(!Array.isArray(n))return{totalValue:0,movementsInPeriod:0};const{start:i,end:a}=e;let l=n;(i||a)&&(l=n.filter(d=>{const m=new Date(d.createdAt||d.date),p=i?new Date(i):new Date(0),_=a?new Date(a):new Date;return m>=p&&m<=_}));const c=w_(l,t);return{totalValue:c.totalCost,movementsInPeriod:l.length,averageValuePerMovement:c.averageCostPerMovement,valueByType:c.costsByType,valueByLocation:c.costsByLocation}},k6=(n=[],e,t={})=>{if(!Array.isArray(n)||!e)return{totalCost:0,movementsCount:0};const i=n.filter(l=>l.sourceLocation===e||l.targetLocation===e||l.location===e),a=w_(i,t);return{location:e,totalCost:a.totalCost,movementsCount:i.length,averageCostPerMovement:a.averageCostPerMovement,costsByType:a.costsByType}},L6=(n=[],e=30)=>{if(!Array.isArray(n)||n.length===0)return{projectedConsumption:{},recommendedPurchases:{},confidence:0};const t=n.filter(T=>T.type==="outbound"&&T.status==="completed");if(t.length===0)return{projectedConsumption:{},recommendedPurchases:{},confidence:0};const i=t.map(T=>new Date(T.createdAt||T.date)),a=new Date(Math.min(...i)),l=new Date(Math.max(...i)),c=Math.max(1,(l-a)/(1e3*60*60*24)),d=t.reduce((T,A)=>{const S=A.fuelType;return T[S]||(T[S]=0),T[S]+=parseFloat(A.quantity)||0,T},{}),m={},p={};Object.entries(d).forEach(([T,A])=>{const S=A/c,N=S*e;m[T]={dailyAverage:S,projectedTotal:N,projectionDays:e,historicalTotal:A,historicalDays:c},p[T]=Math.ceil(N*1.2)});const _=Math.min(100,t.length/10*100);return{projectedConsumption:m,recommendedPurchases:p,confidence:_,dataPoints:t.length,projectionDays:e}},U6=n=>typeof n!="number"||isNaN(n)?"$0":new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0,maximumFractionDigits:0}).format(n),z6=(n,e=2)=>typeof n!="number"||isNaN(n)?"0":new Intl.NumberFormat("es-CO",{minimumFractionDigits:e,maximumFractionDigits:e}).format(n),F6=(n,e=1)=>typeof n!="number"||isNaN(n)?"0%":`${(n*100).toFixed(e)}%`,uc=(n,e,t=2)=>{const i=parseFloat(n)||0,a=parseFloat(e)||0;return parseFloat((i+a).toFixed(t))},cc=(n,e,t=2)=>{const i=parseFloat(n)||0,a=parseFloat(e)||0;return parseFloat((i-a).toFixed(t))},sl=(n,e=2)=>{const t=parseFloat(n)||0;return parseFloat(t.toFixed(e))},Qg=["principal","bodega austria","bodega ilusion","campo operativo","estación móvil"],j6=["bodega austria","bodega ilusion"],B6=n=>n?n.split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" "):"",Ga="combustibles_movements",tr="combustibles_inventory",dt={ENTRADA:"entrada",SALIDA:"salida",TRANSFERENCIA:"transferencia",AJUSTE:"ajuste"},hc={PENDIENTE:"pendiente",COMPLETADO:"completado",CANCELADO:"cancelado"},D4=async n=>{try{k4(n);const e={...n,createdAt:Le(),updatedAt:Le(),status:hc.COMPLETADO,approvedAt:Le(),totalValue:fI(n),effectiveDate:n.effectiveDate||Le()},t=await Oc(fe,async i=>{const a=Ye(ze(fe,Ga));return i.set(a,e),await dI(i,e,a.id),a.id});return console.log("✅ Movimiento creado exitosamente:",t),t}catch(e){throw console.error("❌ Error al crear movimiento:",e),new Error(`Error al crear movimiento: ${e.message}`)}},hI=async(n={})=>{try{let e=ze(fe,Ga);n.type&&(e=Ie(e,Ne("type","==",n.type))),n.status&&(e=Ie(e,Ne("status","==",n.status))),n.fuelType&&(e=Ie(e,Ne("fuelType","==",n.fuelType))),n.vehicleId&&(e=Ie(e,Ne("vehicleId","==",n.vehicleId))),e=Ie(e,vr("createdAt","desc"));const t=await Tt(e),i=[];return t.forEach(a=>{i.push({id:a.id,...a.data(),createdAt:a.data().createdAt?.toDate?.()||a.data().createdAt,updatedAt:a.data().updatedAt?.toDate?.()||a.data().updatedAt,effectiveDate:a.data().effectiveDate?.toDate?.()||a.data().effectiveDate})}),i}catch(e){throw console.error("❌ Error al obtener movimientos:",e),new Error(`Error al obtener movimientos: ${e.message}`)}},S_=async n=>{try{if(!n)throw new Error("ID de movimiento requerido");const e=Ye(fe,Ga,n),t=await Fs(e);return t.exists()?{id:t.id,...t.data(),createdAt:t.data().createdAt?.toDate?.()||t.data().createdAt,updatedAt:t.data().updatedAt?.toDate?.()||t.data().updatedAt,effectiveDate:t.data().effectiveDate?.toDate?.()||t.data().effectiveDate}:null}catch(e){throw console.error("❌ Error al obtener movimiento:",e),new Error(`Error al obtener movimiento: ${e.message}`)}},O4=async(n,e)=>{try{if(!n)throw new Error("ID de movimiento requerido");const t={...e,updatedAt:Le(),...e.quantity||e.unitPrice?{totalValue:fI(e)}:{}},i=Ye(fe,Ga,n);await Ha(i,t),console.log("✅ Movimiento actualizado exitosamente")}catch(t){throw console.error("❌ Error al actualizar movimiento:",t),new Error(`Error al actualizar movimiento: ${t.message}`)}},M4=async n=>{try{if(!n)throw new Error("ID de movimiento requerido");const e=await S_(n);if(!e)throw new Error("Movimiento no encontrado");await Oc(fe,async t=>{const i=Ye(fe,Ga,n);e.status===hc.COMPLETADO&&await L4(t,e),t.delete(i)}),console.log("✅ Movimiento eliminado y cambios de inventario revertidos exitosamente")}catch(e){throw console.error("❌ Error al eliminar movimiento:",e),new Error(`Error al eliminar movimiento: ${e.message}`)}},P4=(n,e={})=>{try{let t=ze(fe,Ga);return e.type&&(t=Ie(t,Ne("type","==",e.type))),e.status&&(t=Ie(t,Ne("status","==",e.status))),t=Ie(t,vr("createdAt","desc")),gl(t,i=>{const a=[];i.forEach(l=>{a.push({id:l.id,...l.data(),createdAt:l.data().createdAt?.toDate?.()||l.data().createdAt,updatedAt:l.data().updatedAt?.toDate?.()||l.data().updatedAt,effectiveDate:l.data().effectiveDate?.toDate?.()||l.data().effectiveDate})}),n(a)},i=>{console.error("❌ Error en suscripción de movimientos:",i),n([],i)})}catch(t){throw console.error("❌ Error al configurar suscripción:",t),new Error(`Error en suscripción: ${t.message}`)}},x4=async n=>{try{const e=await S_(n);if(!e)throw new Error("Movimiento no encontrado");if(e.status!==hc.PENDIENTE)throw new Error("Solo se pueden aprobar movimientos pendientes");await Oc(fe,async t=>{const i=Ye(fe,Ga,n);t.update(i,{status:hc.COMPLETADO,approvedAt:Le(),updatedAt:Le()}),await dI(t,e,n)}),console.log("✅ Movimiento aprobado exitosamente")}catch(e){throw console.error("❌ Error al aprobar movimiento:",e),new Error(`Error al aprobar movimiento: ${e.message}`)}},V4=async(n={})=>{try{const e=await hI(n),t={totalMovements:e.length,byType:{},byStatus:{},byFuelType:{},totalValue:0,totalQuantity:0,averageValue:0,thisMonth:0,lastMonth:0,thisWeek:0},i=new Date,a=new Date(i.getFullYear(),i.getMonth(),1),l=new Date(i.getFullYear(),i.getMonth()-1,1),c=new Date(i.setDate(i.getDate()-i.getDay()));return e.forEach(d=>{t.byType[d.type]=(t.byType[d.type]||0)+1,t.byStatus[d.status]=(t.byStatus[d.status]||0)+1,t.byFuelType[d.fuelType]=(t.byFuelType[d.fuelType]||0)+1,t.totalValue+=d.totalValue||0,t.totalQuantity+=d.quantity||0;const m=new Date(d.createdAt);m>=a&&t.thisMonth++,m>=l&&m<a&&t.lastMonth++,m>=c&&t.thisWeek++}),t.averageValue=t.totalMovements>0?t.totalValue/t.totalMovements:0,t}catch(e){throw console.error("❌ Error al calcular estadísticas:",e),new Error(`Error al calcular estadísticas: ${e.message}`)}},fb=n=>n?Qg.includes(n.toLowerCase()):!1,k4=n=>{const e=["type","fuelType","quantity","unitPrice"];for(const t of e)if(!n[t])throw new Error(`Campo requerido: ${t}`);if(!Object.values(dt).includes(n.type))throw new Error("Tipo de movimiento inválido");if(n.quantity<=0)throw new Error("La cantidad debe ser mayor a cero");if(n.unitPrice<0)throw new Error("El precio unitario no puede ser negativo");if(n.type===dt.SALIDA&&!n.vehicleId)throw new Error("Las salidas deben tener un vehículo asociado");if(n.type===dt.TRANSFERENCIA&&!n.destinationLocation)throw new Error("Las transferencias deben tener una ubicación destino");if(n.type===dt.ENTRADA){if(!n.supplierName)throw new Error("Las entradas deben tener un proveedor");if(!n.destinationLocation)throw new Error("Las entradas deben tener una ubicación destino")}if(n.type!==dt.ENTRADA&&n.location&&!fb(n.location))throw new Error(`Ubicación origen inválida: ${n.location}. Ubicaciones válidas: ${Qg.join(", ")}`);if(n.destinationLocation&&!fb(n.destinationLocation))throw new Error(`Ubicación destino inválida: ${n.destinationLocation}. Ubicaciones válidas: ${Qg.join(", ")}`);if(n.type===dt.TRANSFERENCIA){const t=(n.location||"principal").toLowerCase(),i=n.destinationLocation.toLowerCase();if(t===i)throw new Error("La ubicación origen y destino no pueden ser la misma en una transferencia")}},fI=n=>(n.quantity||0)*(n.unitPrice||0),dI=async(n,e,t)=>{try{let i=e.location||"principal";e.type===dt.ENTRADA&&(i=e.destinationLocation||"principal");const a=Ie(ze(fe,tr),Ne("fuelType","==",e.fuelType),Ne("location","==",i)),l=await Tt(a);if(l.empty){if(e.type!==dt.ENTRADA)throw new Error(`No se encontró inventario para ${e.fuelType} en ${i} para realizar un movimiento de ${e.type}.`);console.log(`📦 Creando inventario automático para ${e.fuelType} en ${i}`);const c=Ye(ze(fe,tr)),d={fuelType:e.fuelType,location:i,name:e.fuelType,maxCapacity:1e4,currentStock:sl(e.quantity,2),minThreshold:1500,pricePerUnit:e.unitPrice||0,createdAt:Le(),updatedAt:Le(),status:"active",lastMovement:{movementId:t,type:e.type,quantity:e.quantity,date:Le()}};n.set(c,d)}else{const c=l.docs[0],d=c.data(),m=Ye(fe,tr,c.id);let p=d.currentStock;switch(e.type){case dt.ENTRADA:p=uc(p,e.quantity);break;case dt.SALIDA:if(p=cc(p,e.quantity),p<0)throw new Error("Stock insuficiente para realizar la salida");break;case dt.AJUSTE:p=uc(p,e.quantity),p<0&&(p=0);break;case dt.TRANSFERENCIA:if(p=cc(p,e.quantity),p<0)throw new Error("Stock insuficiente para realizar la transferencia");await U4(n,e,t);break}p=sl(p,2),n.update(m,{currentStock:p,lastMovement:{movementId:t,type:e.type,quantity:e.quantity,date:Le()},updatedAt:Le()})}e.type===dt.SALIDA&&e.vehicleId&&e.currentHours&&await mb(n,e.vehicleId,e.currentHours),e.type===dt.SALIDA&&e.vehicleId&&e.currentHours&&await mb(n,e.vehicleId,e.currentHours)}catch(i){throw console.error("❌ Error al actualizar inventario:",i),i}},L4=async(n,e)=>{try{console.log("🔄 Revirtiendo cambios de inventario para movimiento:",e.id);let t;switch(e.type){case dt.ENTRADA:t=e.destinationLocation||"principal";break;case dt.SALIDA:case dt.AJUSTE:t=e.location||"principal";break;case dt.TRANSFERENCIA:t=e.location||"principal";break;default:t=e.location||e.destinationLocation||"principal"}console.log(`🔍 Buscando inventario: ${e.fuelType} en ${t}`);const i=Ie(ze(fe,tr),Ne("fuelType","==",e.fuelType),Ne("location","==",t)),a=await Tt(i);if(a.empty){console.warn(`⚠️ No se encontró inventario para ${e.fuelType} en ${t}`);const m=Ie(ze(fe,tr),Ne("fuelType","==",e.fuelType)),p=await Tt(m);if(p.empty)throw console.error(`❌ No existe inventario para ${e.fuelType} en ninguna ubicación`),new Error(`No se puede revertir: no existe inventario para ${e.fuelType} en ninguna ubicación. Movimiento huérfano detectado.`);console.log(`🔄 Usando inventario fallback en ${p.docs[0].data().location}`);const _=p.docs[0],T=_.data(),A=Ye(fe,tr,_.id);await db(n,A,T,e);return}const l=a.docs[0],c=l.data(),d=Ye(fe,tr,l.id);await db(n,d,c,e)}catch(t){throw console.error("❌ Error al revertir cambios de inventario:",t),new Error(`Error al revertir inventario: ${t.message}`)}},db=async(n,e,t,i)=>{try{let a=t.currentStock;switch(i.type){case dt.ENTRADA:a=cc(a,i.quantity),a<0&&(console.warn("⚠️ Advertencia: La reversión resulta en stock negativo, ajustando a 0"),a=0);break;case dt.SALIDA:a=uc(a,i.quantity);break;case dt.AJUSTE:a=cc(a,i.quantity),a<0&&(console.warn("⚠️ Advertencia: La reversión de ajuste resulta en stock negativo, ajustando a 0"),a=0);break;case dt.TRANSFERENCIA:a=uc(a,i.quantity),await z4(n,i);break;default:throw new Error(`Tipo de movimiento no soportado para reversión: ${i.type}`)}a=sl(a,2),n.update(e,{currentStock:a,lastMovement:{movementId:null,type:"reversion",quantity:i.quantity,originalType:i.type,date:Le(),note:`Reversión de movimiento ${i.id} - Ubicación original: ${i.location||i.destinationLocation||"no especificada"}`},updatedAt:Le()}),console.log(`✅ Inventario revertido exitosamente. Stock anterior: ${t.currentStock}, Nuevo stock: ${a}`)}catch(a){throw console.error("❌ Error en procesamiento de reversión:",a),a}},U4=async(n,e,t)=>{try{if(!e.destinationLocation)throw new Error("Ubicación destino requerida para transferencias");console.log(`🔄 Transfiriendo ${e.quantity} ${e.fuelType} a ${e.destinationLocation}`);const i=Ie(ze(fe,tr),Ne("fuelType","==",e.fuelType),Ne("location","==",e.destinationLocation)),a=await Tt(i);if(a.empty){console.log(`📦 Creando inventario automático en destino: ${e.fuelType} en ${e.destinationLocation}`);const l=Ye(ze(fe,tr)),c={fuelType:e.fuelType,location:e.destinationLocation,name:e.fuelType,maxCapacity:1e4,currentStock:sl(e.quantity,2),minThreshold:1500,pricePerUnit:e.unitPrice||0,createdAt:Le(),updatedAt:Le(),status:"active",lastMovement:{movementId:t,type:"transferencia_entrada",quantity:e.quantity,date:Le(),originLocation:e.location}};n.set(l,c)}else{const l=a.docs[0],c=l.data(),d=Ye(fe,tr,l.id),m=sl(uc(c.currentStock,e.quantity),2);n.update(d,{currentStock:m,lastMovement:{movementId:t,type:"transferencia_entrada",quantity:e.quantity,date:Le(),originLocation:e.location},updatedAt:Le()})}console.log("✅ Transferencia al destino completada exitosamente")}catch(i){throw console.error("❌ Error al transferir a destino:",i),new Error(`Error en transferencia a destino: ${i.message}`)}},z4=async(n,e)=>{try{if(!e.destinationLocation){console.warn("⚠️ No hay ubicación destino para revertir");return}console.log(`🔄 Revirtiendo transferencia en destino: ${e.destinationLocation}`);const t=Ie(ze(fe,tr),Ne("fuelType","==",e.fuelType),Ne("location","==",e.destinationLocation)),i=await Tt(t);if(i.empty){console.warn(`⚠️ No se encontró inventario destino para revertir: ${e.fuelType} en ${e.destinationLocation}`);return}const a=i.docs[0],l=a.data(),c=Ye(fe,tr,a.id);let d=cc(l.currentStock,e.quantity);d<0&&(console.warn("⚠️ Advertencia: La reversión en destino resulta en stock negativo, ajustando a 0"),d=0),d=sl(d,2),n.update(c,{currentStock:d,lastMovement:{movementId:null,type:"reversion_transferencia",quantity:e.quantity,date:Le(),note:`Reversión de transferencia desde ${e.location}`},updatedAt:Le()}),console.log("✅ Reversión en destino completada exitosamente")}catch(t){throw console.error("❌ Error al revertir transferencia en destino:",t),new Error(`Error al revertir destino: ${t.message}`)}},mb=async(n,e,t)=>{try{console.log(`🕒 Actualizando horómetro del vehículo ${e} a ${t} horas`);const i=Ie(ze(fe,"combustibles_vehicles"),Ne("vehicleId","==",e)),a=await Tt(i);if(a.empty){console.warn(`⚠️ Vehículo ${e} no encontrado para actualizar horómetro`);return}const l=a.docs[0],c=l.data(),d=Ye(fe,"combustibles_vehicles",l.id),m=parseFloat(c.currentHours)||0,p=parseFloat(t);p<m&&console.warn(`⚠️ Nueva lectura horómetro (${p}) menor a la anterior (${m}). Actualizando de todas formas.`);const _=c.hourMeterHistory||[];_.push({previousHours:m,newHours:p,difference:p-m,updatedAt:new Date,updatedBy:"movement_service",source:"fuel_consumption"}),n.update(d,{currentHours:p,hourMeterHistory:_,lastHourMeterUpdate:Le(),updatedAt:Le()}),console.log(`✅ Horómetro actualizado: ${e} - ${m}h → ${p}h`)}catch(i){console.error("❌ Error al actualizar horómetro del vehículo:",i),console.warn("⚠️ Continuando con el movimiento sin actualización de horómetro")}},Nf={createMovement:D4,getAllMovements:hI,getMovement:S_,updateMovement:O4,deleteMovement:M4,subscribeToMovements:P4,approveMovement:x4,getMovementsStats:V4,MOVEMENT_TYPES:dt,MOVEMENT_STATUS:hc},al="combustibles_inventory",q6=async(n,e)=>{try{const t=w4[n.fuelType];if(!t)return{success:!1,error:"Tipo de combustible no válido"};const i=Ie(ze(fe,al),Ne("fuelType","==",n.fuelType),Ne("location","==",n.location.toLowerCase()));if(!(await Tt(i)).empty)return{success:!1,error:`Ya existe ${t.name} en ${n.location}`};const l={fuelType:n.fuelType,name:t.name,description:n.description||t.description,currentStock:Number(n.currentStock)||0,maxCapacity:Number(n.maxCapacity),minThreshold:Number(n.minThreshold)||n.maxCapacity*.15,unit:t.unit,location:n.location.toLowerCase(),pricePerUnit:Number(n.pricePerUnit)||0,supplier:n.supplier||"",status:n.status||"active",createdAt:new Date,createdBy:e,lastUpdated:new Date,updatedBy:e};return{success:!0,data:{id:(await o_(ze(fe,al),l)).id,...l},message:`${t.name} agregado al inventario exitosamente`}}catch(t){return console.error("Error creating inventory item:",t),{success:!1,error:t.message}}},F4=async()=>{try{const n=Ie(ze(fe,al),vr("fuelType","asc")),e=await Tt(n),t=[];return e.forEach(i=>{const a=i.data();t.push({id:i.id,...a,stockLevel:b_(a.currentStock,a.maxCapacity),stockPercentage:Math.round(a.currentStock/a.maxCapacity*100),needsRestock:a.currentStock<=a.minThreshold})}),{success:!0,data:t}}catch(n){return console.error("Error fetching inventory items:",n),{success:!1,error:n.message}}},H6=async(n,e,t)=>{try{const i=Ye(fe,al,n);if(!(await Fs(i)).exists())return{success:!1,error:"Item no encontrado"};const l={...e,lastUpdated:new Date,updatedBy:t};return delete l.id,delete l.createdAt,delete l.createdBy,await Ha(i,l),{success:!0,message:"Item actualizado exitosamente",data:{id:n,...l}}}catch(i){return console.error("Error updating inventory item:",i),{success:!1,error:i.message}}},G6=async n=>{try{const e=Ye(fe,al,n);return(await Fs(e)).exists()?(await rR(e),{success:!0,message:"Item eliminado exitosamente"}):{success:!1,error:"Item no encontrado"}}catch(e){return console.error("Error deleting inventory item:",e),{success:!1,error:e.message}}},j4=n=>{const e=Ie(ze(fe,al),vr("fuelType","asc"));return gl(e,t=>{const i=[];t.forEach(a=>{const l=a.data();i.push({id:a.id,...l,stockLevel:b_(l.currentStock,l.maxCapacity),stockPercentage:Math.round(l.currentStock/l.maxCapacity*100),needsRestock:l.currentStock<=l.minThreshold})}),n(i)},t=>{console.error("Error in inventory subscription:",t),n(null,t)})},$6=async()=>{try{const n=await F4();if(!n.success)return n;const e=n.data,t={totalItems:e.length,activeItems:e.filter(i=>i.status==="active").length,lowStockItems:e.filter(i=>i.needsRestock).length,totalValue:e.reduce((i,a)=>i+a.currentStock*a.pricePerUnit,0),averageStockLevel:e.length>0?Math.round(e.reduce((i,a)=>i+a.stockPercentage,0)/e.length):0,byFuelType:{}};return e.forEach(i=>{t.byFuelType[i.fuelType]||(t.byFuelType[i.fuelType]={count:0,totalStock:0,totalCapacity:0,totalValue:0}),t.byFuelType[i.fuelType].count++,t.byFuelType[i.fuelType].totalStock+=i.currentStock,t.byFuelType[i.fuelType].totalCapacity+=i.maxCapacity,t.byFuelType[i.fuelType].totalValue+=i.currentStock*i.pricePerUnit}),{success:!0,data:t}}catch(n){return console.error("Error calculating inventory stats:",n),{success:!1,error:n.message}}},Yg=[{id:"maquinaria_pesada",name:"Maquinaria Pesada",description:"Excavadoras, bulldozers, cargadores, grúas",icon:"🏗️",color:"#FF6B35",fuelTypes:["Diesel","ACPM"],fields:["enginePower","operatingWeight","bucketCapacity"]},{id:"transporte",name:"Transporte",description:"Camiones, camionetas, volquetas",icon:"🚛",color:"#2E86AB",fuelTypes:["Diesel","ACPM","Gasolina"],fields:["plateNumber","loadCapacity","enginePower"]},{id:"herramientas_motorizadas",name:"Herramientas Motorizadas",description:"Motosierras, guadañas, fumigadoras",icon:"🔧",color:"#A23B72",fuelTypes:["Gasolina","Mixto"],fields:["enginePower","weight"]},{id:"equipos_bombeo",name:"Equipos de Bombeo",description:"Motobombas, hidrolavadoras, plantas eléctricas",icon:"💧",color:"#F18F01",fuelTypes:["Diesel","Gasolina"],fields:["flow","pressure","enginePower"]},{id:"vehiculos_ligeros",name:"Vehículos Ligeros",description:"Motocicletas, cuatrimotos, vehículos de apoyo",icon:"🏍️",color:"#C73E1D",fuelTypes:["Gasolina"],fields:["plateNumber","enginePower"]},{id:"agricola",name:"Agrícola/Forestal",description:"Tractores, asperjadoras, equipos forestales",icon:"🚜",color:"#2F7D32",fuelTypes:["Diesel","ACPM"],fields:["enginePower","hasHourMeter","implementType"]},{id:"otros",name:"Otros",description:"Equipos especializados y otros vehículos",icon:"⚙️",color:"#616161",fuelTypes:["Diesel","Gasolina","ACPM","Mixto"],fields:["enginePower"]}],Pc={ACTIVO:"activo",MANTENIMIENTO:"mantenimiento",INACTIVO:"inactivo",REPARACION:"reparacion",FUERA_DE_SERVICIO:"fuera_de_servicio"},B4={DIESEL:"Diesel",GASOLINA:"Gasolina",ACPM:"ACPM",MIXTO:"Mixto"},K6=[{key:"plateNumber",label:"Número de Placa",type:"text",icon:"🏷️"},{key:"enginePower",label:"Potencia del Motor (HP)",type:"number",icon:"⚡"},{key:"fuelCapacity",label:"Capacidad de Combustible (Litros)",type:"number",icon:"⛽"},{key:"operatingWeight",label:"Peso Operativo (Toneladas)",type:"number",icon:"⚖️"},{key:"loadCapacity",label:"Capacidad de Carga (Toneladas)",type:"number",icon:"📦"},{key:"bucketCapacity",label:"Capacidad de Balde (m³)",type:"number",icon:"🪣"},{key:"hasHourMeter",label:"Tiene Horómetro",type:"boolean",icon:"⏰"},{key:"currentHours",label:"Horas Actuales",type:"number",icon:"🕐",dependsOn:"hasHourMeter"},{key:"implementType",label:"Tipo de Implemento",type:"text",icon:"🔧"},{key:"flow",label:"Caudal (L/min)",type:"number",icon:"💧"},{key:"pressure",label:"Presión (PSI)",type:"number",icon:"💨"},{key:"weight",label:"Peso (Kg)",type:"number",icon:"⚖️"}],Q6=(n,e=[])=>{const t=e.find(i=>i.id===n);return t||Yg.find(i=>i.id===n)||null},Y6=(n=[])=>{const e=Yg.map(i=>i.id),t=n.filter(i=>!e.includes(i.id));return[...Yg,...t]},X6=n=>{const e=[];return(!n.id||typeof n.id!="string")&&e.push("ID de categoría requerido y debe ser texto"),(!n.name||typeof n.name!="string")&&e.push("Nombre de categoría requerido y debe ser texto"),n.name&&n.name.length<2&&e.push("Nombre debe tener al menos 2 caracteres"),n.fuelTypes&&!Array.isArray(n.fuelTypes)&&e.push("Tipos de combustible debe ser un array"),n.fields&&!Array.isArray(n.fields)&&e.push("Campos debe ser un array"),{isValid:e.length===0,errors:e}},W6=(n,e=[])=>{const t=n.toLowerCase().replace(/[^a-z0-9]/g,"_").replace(/_+/g,"_").replace(/^_|_$/g,"");let i=t,a=1;for(;e.some(l=>l.id===i);)i=`${t}_${a}`,a++;return i},Er="combustibles_vehicles",q4="combustibles_movements",Da={DIESEL:"Diesel",GASOLINA:"Gasolina",ACPM:"ACPM",MIXTO:"Mixto"},mI=async n=>{try{if(H4(n),await js(n.vehicleId))throw new Error(`El código de vehículo '${n.vehicleId}' ya existe`);const t={...n,createdAt:Le(),updatedAt:Le(),status:n.status||Pc.ACTIVO,totalFuelConsumed:0,totalHoursWorked:0,totalMovements:0,lastMovementDate:null,estimatedConsumptionPerHour:bI(n)},i=await o_(ze(fe,Er),t);return console.log("✅ Vehículo creado exitosamente:",i.id),i.id}catch(e){throw console.error("❌ Error al crear vehículo:",e),new Error(`Error al crear vehículo: ${e.message}`)}},R_=async(n={})=>{try{let e=ze(fe,Er);n.type&&(e=Ie(e,Ne("type","==",n.type))),n.status&&(e=Ie(e,Ne("status","==",n.status))),n.fuelType&&(e=Ie(e,Ne("fuelType","==",n.fuelType))),n.location&&(e=Ie(e,Ne("currentLocation","==",n.location))),e=Ie(e,vr("vehicleId","asc"));const t=await Tt(e),i=[];return t.forEach(a=>{i.push({id:a.id,...a.data(),createdAt:a.data().createdAt?.toDate?.()||a.data().createdAt,updatedAt:a.data().updatedAt?.toDate?.()||a.data().updatedAt,lastMovementDate:a.data().lastMovementDate?.toDate?.()||a.data().lastMovementDate,lastMaintenanceDate:a.data().lastMaintenanceDate?.toDate?.()||a.data().lastMaintenanceDate})}),i}catch(e){throw console.error("❌ Error al obtener vehículos:",e),new Error(`Error al obtener vehículos: ${e.message}`)}},I_=async n=>{try{if(!n)throw new Error("ID de vehículo requerido");const e=Ye(fe,Er,n),t=await Fs(e);return t.exists()?{id:t.id,...t.data(),createdAt:t.data().createdAt?.toDate?.()||t.data().createdAt,updatedAt:t.data().updatedAt?.toDate?.()||t.data().updatedAt,lastMovementDate:t.data().lastMovementDate?.toDate?.()||t.data().lastMovementDate,lastMaintenanceDate:t.data().lastMaintenanceDate?.toDate?.()||t.data().lastMaintenanceDate}:null}catch(e){throw console.error("❌ Error al obtener vehículo:",e),new Error(`Error al obtener vehículo: ${e.message}`)}},js=async n=>{try{const e=Ie(ze(fe,Er),Ne("vehicleId","==",n)),t=await Tt(e);if(t.empty)return null;const i=t.docs[0];return{id:i.id,...i.data(),createdAt:i.data().createdAt?.toDate?.()||i.data().createdAt,updatedAt:i.data().updatedAt?.toDate?.()||i.data().updatedAt,lastMovementDate:i.data().lastMovementDate?.toDate?.()||i.data().lastMovementDate,lastMaintenanceDate:i.data().lastMaintenanceDate?.toDate?.()||i.data().lastMaintenanceDate}}catch(e){throw console.error("❌ Error al buscar vehículo por código:",e),new Error(`Error al buscar vehículo: ${e.message}`)}},C_=async(n,e)=>{try{if(!n)throw new Error("ID de vehículo requerido");if(e.vehicleId){const a=await js(e.vehicleId);if(a&&a.id!==n)throw new Error(`El código de vehículo '${e.vehicleId}' ya existe`)}const t={...e,updatedAt:Le(),...e.enginePower||e.type?{estimatedConsumptionPerHour:bI(e)}:{}},i=Ye(fe,Er,n);await Ha(i,t),console.log("✅ Vehículo actualizado exitosamente")}catch(t){throw console.error("❌ Error al actualizar vehículo:",t),new Error(`Error al actualizar vehículo: ${t.message}`)}},pI=async n=>{try{if(!n)throw new Error("ID de vehículo requerido");if((await D_(n,{limit:1})).length>0)throw new Error("No se puede eliminar un vehículo con movimientos asociados. Cambie el estado a inactivo en su lugar.");await rR(Ye(fe,Er,n)),console.log("✅ Vehículo eliminado exitosamente")}catch(e){throw console.error("❌ Error al eliminar vehículo:",e),new Error(`Error al eliminar vehículo: ${e.message}`)}},N_=(n,e={})=>{try{let t=ze(fe,Er);const i=[];e.category&&i.push(Ne("category","==",e.category)),e.status&&i.push(Ne("status","==",e.status)),e.fuelType&&i.push(Ne("fuelType","==",e.fuelType)),e.currentLocation&&i.push(Ne("currentLocation","==",e.currentLocation)),i.forEach(l=>{t=Ie(t,l)}),t=Ie(t,vr("updatedAt","desc"));let a=null;return gl(t,l=>{const c=Date.now();if(a&&c-a<500)return;a=c;const d=[],m={added:[],modified:[],removed:[]};l.docChanges().forEach(p=>{const _={id:p.doc.id,...p.doc.data(),createdAt:p.doc.data().createdAt?.toDate?.()||p.doc.data().createdAt,updatedAt:p.doc.data().updatedAt?.toDate?.()||p.doc.data().updatedAt,lastMovementDate:p.doc.data().lastMovementDate?.toDate?.()||p.doc.data().lastMovementDate,lastMaintenanceDate:p.doc.data().lastMaintenanceDate?.toDate?.()||p.doc.data().lastMaintenanceDate,lastHourMeterDate:p.doc.data().lastHourMeterDate?.toDate?.()||p.doc.data().lastHourMeterDate};p.type==="added"?m.added.push(_):p.type==="modified"?m.modified.push(_):p.type==="removed"&&m.removed.push({id:p.doc.id})}),l.forEach(p=>{d.push({id:p.id,...p.data(),createdAt:p.data().createdAt?.toDate?.()||p.data().createdAt,updatedAt:p.data().updatedAt?.toDate?.()||p.data().updatedAt,lastMovementDate:p.data().lastMovementDate?.toDate?.()||p.data().lastMovementDate,lastMaintenanceDate:p.data().lastMaintenanceDate?.toDate?.()||p.data().lastMaintenanceDate,lastHourMeterDate:p.data().lastHourMeterDate?.toDate?.()||p.data().lastHourMeterDate})}),n(d,null,m)},l=>{console.error("❌ Error en suscripción de vehículos:",l),n([],l)})}catch(t){throw console.error("❌ Error al configurar suscripción:",t),new Error(`Error en suscripción: ${t.message}`)}},gI=(n,e={})=>{try{let t=ze(fe,Er);return e.status&&(t=Ie(t,Ne("status","==",e.status))),gl(t,i=>{const a={total:0,byStatus:{},byCategory:{},byFuelType:{},totalFuelConsumed:0,totalHoursWorked:0,activeCount:0};i.forEach(l=>{const c=l.data();a.total++;const d=c.status||"unknown";a.byStatus[d]=(a.byStatus[d]||0)+1,d==="activo"&&a.activeCount++;const m=c.category||"sin_categoria";a.byCategory[m]=(a.byCategory[m]||0)+1;const p=c.fuelType||"unknown";a.byFuelType[p]=(a.byFuelType[p]||0)+1,a.totalFuelConsumed+=c.totalFuelConsumed||0,a.totalHoursWorked+=c.totalHoursWorked||0}),n(a)},i=>{console.error("❌ Error en suscripción de estadísticas:",i),n(null,i)})}catch(t){return console.error("❌ Error al configurar suscripción de estadísticas:",t),()=>{}}},D_=async(n,e={})=>{try{let t=Ie(ze(fe,q4),Ne("vehicleId","==",n));t=Ie(t,vr("createdAt","desc")),e.limit&&(t=Ie(t,jg(e.limit)));const i=await Tt(t),a=[];return i.forEach(l=>{a.push({id:l.id,...l.data(),createdAt:l.data().createdAt?.toDate?.()||l.data().createdAt,updatedAt:l.data().updatedAt?.toDate?.()||l.data().updatedAt})}),a}catch(t){throw console.error("❌ Error al obtener movimientos del vehículo:",t),new Error(`Error al obtener movimientos: ${t.message}`)}},yI=async(n,e)=>{try{const t=await js(n);if(!t){console.warn(`Vehículo ${n} no encontrado para actualizar métricas`);return}await Oc(fe,async i=>{const a=Ye(fe,Er,t.id),l=(t.totalFuelConsumed||0)+e.quantity,c=(t.totalMovements||0)+1;i.update(a,{totalFuelConsumed:l,totalMovements:c,lastMovementDate:Le(),...t.totalHoursWorked>0?{actualConsumptionPerHour:l/t.totalHoursWorked}:{},updatedAt:Le()})}),console.log(`✅ Métricas del vehículo ${n} actualizadas`)}catch(t){console.error("❌ Error al actualizar métricas del vehículo:",t)}},_I=async(n,e,t="")=>{try{const i=await js(n);if(!i)throw new Error(`Vehículo ${n} no encontrado`);if(!i.hasHourMeter)throw new Error(`El vehículo ${n} no tiene sistema de horómetro`);const a=i.currentHours||0;if(e<a)throw new Error(`La nueva lectura (${e}h) no puede ser menor a la actual (${a}h)`);const l=e-a;await Oc(fe,async c=>{const d=Ye(fe,Er,i.id),m=i.hourMeterHistory||[];m.push({previousReading:a,newReading:e,hoursWorked:l,date:Le(),notes:t,registeredBy:"system"}),c.update(d,{currentHours:e,lastHourMeterReading:e,lastHourMeterDate:Le(),totalHoursWorked:(i.totalHoursWorked||0)+l,hourMeterHistory:m,...i.totalFuelConsumed>0?{actualConsumptionPerHour:i.totalFuelConsumed/((i.totalHoursWorked||0)+l)}:{},updatedAt:Le()})}),console.log(`✅ Horómetro del tractor ${n} actualizado: ${a}h → ${e}h (+${l}h)`)}catch(i){throw console.error("❌ Error al actualizar horómetro:",i),new Error(`Error al actualizar horómetro: ${i.message}`)}},vI=async(n,e=50)=>{try{const t=await js(n);if(!t)throw new Error(`Vehículo ${n} no encontrado`);return t.hasHourMeter?(t.hourMeterHistory||[]).sort((a,l)=>{const c=a.date?.toDate?.()||a.date||new Date(0);return(l.date?.toDate?.()||l.date||new Date(0))-c}).slice(0,e).map(a=>({...a,date:a.date?.toDate?.()||a.date})):[]}catch(t){throw console.error("❌ Error al obtener historial de horómetro:",t),new Error(`Error al obtener historial: ${t.message}`)}},EI=async n=>{try{const e=await js(n);if(!e)throw new Error(`Vehículo ${n} no encontrado`);if(!e.hasHourMeter)throw new Error(`El vehículo ${n} no tiene sistema de horómetro`);const t=e.totalFuelConsumed||0,i=e.totalHoursWorked||0,a=e.currentHours||0,l=e.estimatedConsumptionPerHour||0,c={vehicleCode:n,totalFuelConsumed:t,totalHoursWorked:i,currentHoursReading:a,estimatedConsumptionPerHour:l,actualConsumptionPerHour:i>0?t/i:0,efficiencyPercentage:0,fuelSaved:0,projectedNextMaintenance:null};l>0&&c.actualConsumptionPerHour>0&&(c.efficiencyPercentage=(l-c.actualConsumptionPerHour)/l*100,c.fuelSaved=(l-c.actualConsumptionPerHour)*i);const d=250-a%250;return c.projectedNextMaintenance={hoursRemaining:d,projectedHours:a+d},c}catch(e){throw console.error("❌ Error al calcular consumo del tractor:",e),new Error(`Error al calcular métricas: ${e.message}`)}},TI=async(n={})=>{try{const e=await R_(n),t={totalVehicles:e.length,byType:{},byStatus:{},byFuelType:{},totalFuelConsumed:0,totalHoursWorked:0,averageConsumption:0,mostActiveVehicle:null,leastActiveVehicle:null};let i=0,a=1/0;return e.forEach(l=>{t.byType[l.type]=(t.byType[l.type]||0)+1,t.byStatus[l.status]=(t.byStatus[l.status]||0)+1,t.byFuelType[l.fuelType]=(t.byFuelType[l.fuelType]||0)+1,t.totalFuelConsumed+=l.totalFuelConsumed||0,t.totalHoursWorked+=l.totalHoursWorked||0;const c=l.totalMovements||0;c>i&&(i=c,t.mostActiveVehicle=l),c<a&&c>0&&(a=c,t.leastActiveVehicle=l)}),t.totalHoursWorked>0&&(t.averageConsumption=t.totalFuelConsumed/t.totalHoursWorked),t}catch(e){throw console.error("❌ Error al calcular estadísticas:",e),new Error(`Error al calcular estadísticas: ${e.message}`)}},AI=async(n,e)=>{try{const t=await I_(n);if(!t)throw new Error("Vehículo no encontrado");const i=t.maintenanceHistory||[];i.push({...e,date:Le(),registeredAt:Le()}),await C_(n,{maintenanceHistory:i,lastMaintenanceDate:Le(),...e.type==="major"?{status:Pc.MANTENIMIENTO}:{}}),console.log("✅ Mantenimiento registrado exitosamente")}catch(t){throw console.error("❌ Error al registrar mantenimiento:",t),new Error(`Error al registrar mantenimiento: ${t.message}`)}},H4=n=>{const e=["vehicleId","name","type","fuelType"];for(const t of e)if(!n[t])throw new Error(`Campo requerido: ${t}`);if(!n.type||n.type.trim().length===0)throw new Error("Tipo de vehículo requerido");if(!Object.values(Da).includes(n.fuelType))throw new Error("Tipo de combustible inválido");if(n.status&&!Object.values(Pc).includes(n.status))throw new Error("Estado de vehículo inválido");if(n.enginePower&&n.enginePower<=0)throw new Error("La potencia del motor debe ser mayor a cero");if(n.fuelCapacity&&n.fuelCapacity<=0)throw new Error("La capacidad de combustible debe ser mayor a cero")},bI=n=>{const{type:e,enginePower:t,fuelType:i}=n,a={excavadora:.04,bulldozer:.05,cargador:.035,camion:.03,camioneta:.03,grua:.045,motosierra:.02,tractor:.025,volqueta:.035,motobomba:.035,fumigadora:.025,guadana:.02,motocicleta:.015,planta_electrica:.08,otros:.03},l={[Da.DIESEL]:1,[Da.GASOLINA]:1.2,[Da.ACPM]:.95,[Da.MIXTO]:1.1},c=a[e]||.03,d=l[i]||1;return c*(t||100)*d},wI=async n=>{try{const e=Ie(ze(fe,Er),Ne("category","==",n));return(await Tt(e)).size}catch(e){return console.error("❌ Error al contar vehículos por categoría:",e),0}},G4={createVehicle:mI,getAllVehicles:R_,getVehicle:I_,getVehicleByCode:js,updateVehicle:C_,deleteVehicle:pI,subscribeToVehicles:N_,subscribeToVehiclesStats:gI,getVehicleMovements:D_,updateVehicleMetrics:yI,updateHourMeter:_I,getHourMeterHistory:vI,calculateTractorConsumption:EI,getVehiclesStats:TI,registerMaintenance:AI,countVehiclesByCategory:wI,VEHICLE_STATUS:Pc,FUEL_COMPATIBILITY:Da},Z6=Object.freeze(Object.defineProperty({__proto__:null,FUEL_COMPATIBILITY:Da,FUEL_TYPES:B4,VEHICLE_STATUS:Pc,calculateTractorConsumption:EI,countVehiclesByCategory:wI,createVehicle:mI,default:G4,deleteVehicle:pI,getAllVehicles:R_,getHourMeterHistory:vI,getVehicle:I_,getVehicleByCode:js,getVehicleMovements:D_,getVehiclesStats:TI,registerMaintenance:AI,subscribeToVehicles:N_,subscribeToVehiclesStats:gI,updateHourMeter:_I,updateVehicle:C_,updateVehicleMetrics:yI},Symbol.toStringTag,{value:"Module"})),zr="combustibles_suppliers",J6=async(n,e)=>{try{const t=Ie(ze(fe,zr),Ne("name","==",n.name.trim()));if(!(await Tt(t)).empty)return{success:!1,error:`Ya existe un proveedor con el nombre "${n.name}"`};if(n.taxId){const c=Ie(ze(fe,zr),Ne("taxId","==",n.taxId.trim()));if(!(await Tt(c)).empty)return{success:!1,error:`Ya existe un proveedor con el NIT/Documento "${n.taxId}"`}}const a={name:n.name.trim(),taxId:n.taxId?.trim()||"",type:n.type||"proveedor",category:n.category||"combustibles",contactPerson:n.contactPerson?.trim()||"",phone:n.phone?.trim()||"",email:n.email?.trim()||"",address:n.address?.trim()||"",city:n.city?.trim()||"",state:n.state?.trim()||"Colombia",fuelTypes:n.fuelTypes||[],paymentTerms:n.paymentTerms||"contado",creditLimit:Number(n.creditLimit)||0,priceList:n.priceList||{},rating:Number(n.rating)||5,evaluationNotes:n.evaluationNotes||"",status:n.status||"active",isPreferred:n.isPreferred||!1,totalOrders:0,totalPurchased:0,lastOrderDate:null,averageDeliveryTime:0,createdAt:new Date,createdBy:e,lastUpdated:new Date,updatedBy:e};return{success:!0,data:{id:(await o_(ze(fe,zr),a)).id,...a},message:`Proveedor "${a.name}" creado exitosamente`}}catch(t){return console.error("Error creating supplier:",t),{success:!1,error:t.message}}},$4=async()=>{try{const n=Ie(ze(fe,zr),vr("name","asc"));return{success:!0,data:(await Tt(n)).docs.map(i=>({id:i.id,...i.data()}))}}catch(n){return console.error("Error getting suppliers:",n),{success:!1,error:n.message}}},K4=n=>{const e=Ie(ze(fe,zr),vr("name","asc"));return gl(e,t=>{const i=t.docs.map(a=>({id:a.id,...a.data()}));n(i)})},e3=async(n,e,t)=>{try{const i=await Fs(Ye(fe,zr,n));if(!i.exists())return{success:!1,error:"Proveedor no encontrado"};if(e.name&&e.name.trim()!==i.data().name){const l=Ie(ze(fe,zr),Ne("name","==",e.name.trim()));if(!(await Tt(l)).empty)return{success:!1,error:`Ya existe un proveedor con el nombre "${e.name}"`}}if(e.taxId&&e.taxId.trim()!==i.data().taxId){const l=Ie(ze(fe,zr),Ne("taxId","==",e.taxId.trim()));if(!(await Tt(l)).empty)return{success:!1,error:`Ya existe un proveedor con el NIT/Documento "${e.taxId}"`}}const a={...e,lastUpdated:new Date,updatedBy:t};return a.name&&(a.name=a.name.trim()),a.taxId&&(a.taxId=a.taxId.trim()),a.contactPerson&&(a.contactPerson=a.contactPerson.trim()),a.phone&&(a.phone=a.phone.trim()),a.email&&(a.email=a.email.trim()),await Ha(Ye(fe,zr,n),a),{success:!0,message:"Proveedor actualizado exitosamente"}}catch(i){return console.error("Error updating supplier:",i),{success:!1,error:i.message}}},t3=async(n,e)=>{try{return await Ha(Ye(fe,zr,n),{status:"inactive",lastUpdated:new Date,updatedBy:e}),{success:!0,message:"Proveedor desactivado exitosamente"}}catch(t){return console.error("Error deleting supplier:",t),{success:!1,error:t.message}}},n3=async()=>{try{const n=await $4();if(!n.success)return n;const e=n.data,t={total:e.length,active:e.filter(i=>i.status==="active").length,inactive:e.filter(i=>i.status==="inactive").length,suspended:e.filter(i=>i.status==="suspended").length,preferred:e.filter(i=>i.isPreferred).length,averageRating:e.length>0?e.reduce((i,a)=>i+(a.rating||0),0)/e.length:0,byCategory:{},byType:{}};return e.forEach(i=>{const a=i.category||"sin_categoria";t.byCategory[a]=(t.byCategory[a]||0)+1}),e.forEach(i=>{const a=i.type||"sin_tipo";t.byType[a]=(t.byType[a]||0)+1}),{success:!0,data:t}}catch(n){return console.error("Error getting suppliers stats:",n),{success:!1,error:n.message}}};class Q4{constructor(){this.activeQueries=new Map,this.queryCache=new Map,this.CACHE_TTL=5*60*1e3}async getOptimizedQuery(e,t={}){const{filters:i=[],orderByField:a="createdAt",orderDirection:l="desc",limitCount:c=20,startAfterDoc:d=null,useCache:m=!0}=t,p=this.generateCacheKey(e,t);if(m&&this.queryCache.has(p)){const _=this.queryCache.get(p);if(Date.now()-_.timestamp<this.CACHE_TTL)return console.log(`📋 Cache hit para ${e}`),_.data}try{console.log(`🔥 Ejecutando consulta optimizada: ${e}`);let _=ze(fe,e);i.forEach(S=>{_=Ie(_,Ne(S.field,S.operator,S.value))}),_=Ie(_,vr(a,l)),_=Ie(_,jg(c)),d&&(_=Ie(_,$V(d)));const A=(await Tt(_)).docs.map(S=>({id:S.id,...S.data()}));return m&&this.queryCache.set(p,{data:A,timestamp:Date.now()}),A}catch(_){throw console.error(`Error en consulta optimizada ${e}:`,_),_}}subscribeOptimized(e,t,i={}){const{filters:a=[],orderByField:l="createdAt",orderDirection:c="desc",limitCount:d=50,debounceMs:m=300}=i,p=this.generateCacheKey(e,i);this.activeQueries.has(p)&&this.activeQueries.get(p)();let _=null;try{let T=ze(fe,e);a.forEach(S=>{T=Ie(T,Ne(S.field,S.operator,S.value))}),T=Ie(T,vr(l,c),jg(d));const A=gl(T,S=>{_&&clearTimeout(_),_=setTimeout(()=>{const N=S.docs.map(q=>({id:q.id,...q.data()}));console.log(`📡 Datos actualizados: ${e} (${N.length} items)`),t(N)},m)},S=>{console.error(`Error en suscripción ${e}:`,S),t([],S)});return this.activeQueries.set(p,A),A}catch(T){throw console.error(`Error creando suscripción ${e}:`,T),T}}async getCount(e,t=[]){try{let i=ze(fe,e);return t.forEach(l=>{i=Ie(i,Ne(l.field,l.operator,l.value))}),(await WV(i)).data().count}catch(i){return console.error(`Error obteniendo conteo ${e}:`,i),0}}clearCache(e=null){e?Array.from(this.queryCache.keys()).filter(i=>i.includes(e)).forEach(i=>this.queryCache.delete(i)):this.queryCache.clear()}cleanup(){this.activeQueries.forEach(e=>e()),this.activeQueries.clear(),this.queryCache.clear()}generateCacheKey(e,t){return`${e}_${JSON.stringify(t)}`}}const Y4=new Q4,Ld=(n,e=!0)=>{const[t,i]=z.useState([]),[a,l]=z.useState(!1),[c,d]=z.useState(null),m=z.useRef(null),p=z.useRef(!1),_=z.useCallback(()=>{if(!e||p.current)return;l(!0),d(null),p.current=!0;const A=n(S=>{i(S),l(!1)},S=>{d(S.message),l(!1)});m.current=A},[n,e]),T=z.useCallback(()=>{m.current&&(m.current(),m.current=null,p.current=!1)},[]);return z.useEffect(()=>(e?_():T(),()=>T()),[e,_,T]),{data:t,loading:a,error:c,subscribe:_,unsubscribe:T}},X4=(n=!1,e=!0)=>e?Ud("inventory",n,{orderByField:"name",limitCount:100}):Ld(j4,n),W4=(n=!1,e=!0)=>e?Ud("vehicles",n,{filters:[{field:"status",operator:"==",value:"active"}],orderByField:"plate",limitCount:50}):Ld(N_,n),Z4=(n=!1,e=!0)=>e?Ud("suppliers",n,{filters:[{field:"status",operator:"==",value:"active"}],orderByField:"name",limitCount:30}):Ld(K4,n),J4=(n=!1,e=!0)=>e?Ud("movements",n,{orderByField:"createdAt",orderDirection:"desc",limitCount:100}):Ld((t,i)=>Nf.subscribeToMovements(t,i),n),Ud=(n,e=!1,t={})=>{const[i,a]=z.useState([]),[l,c]=z.useState(!1),[d,m]=z.useState(null),p=z.useRef(null),_=z.useCallback(()=>{if(p.current)return;c(!0),m(null);const A=Y4.subscribeOptimized(n,(S,N)=>{N?m(N.message):a(S),c(!1)},t);p.current=A},[n,t]),T=z.useCallback(()=>{p.current&&(p.current(),p.current=null)},[]);return z.useEffect(()=>(e&&_(),()=>T()),[e,_,T]),{data:i,loading:l,error:d,subscribe:_,unsubscribe:T}},e6=(n=[])=>{const e=X4(n.includes("inventory")),t=W4(n.includes("vehicles")),i=Z4(n.includes("suppliers")),a=J4(n.includes("movements")),l=e.loading||t.loading||i.loading||a.loading,c=e.error||t.error||i.error||a.error;return{inventory:e.data,vehicles:t.data,suppliers:i.data,movements:a.data,loading:l,error:c,subscribeToInventory:e.subscribe,subscribeToVehicles:t.subscribe,subscribeToSuppliers:i.subscribe,subscribeToMovements:a.subscribe}},t6=()=>{const[n,e]=z.useState(!1),[t,i]=z.useState(null),a=z.useCallback(async A=>{try{return e(!0),i(null),await Nf.deleteMovement(A),{success:!0}}catch(S){return console.error("Error al eliminar el movimiento:",S),i(S.message),{success:!1,error:S.message}}finally{e(!1)}},[]),l=z.useCallback(async A=>{try{return e(!0),i(null),{success:!0,data:await Nf.createMovement(A)}}catch(S){return console.error("Error al crear el movimiento:",S),i(S.message),{success:!1,error:S.message}}finally{e(!1)}},[]),c=z.useCallback(async(A,S)=>{try{return e(!0),i(null),{success:!0,data:await Nf.updateMovement(A,S)}}catch(N){return console.error("Error al actualizar el movimiento:",N),i(N.message),{success:!1,error:N.message}}finally{e(!1)}},[]),d=z.useCallback(async()=>{console.log("Refresh manual del inventario...")},[]),m=z.useCallback(async()=>{console.log("Refresh manual de movimientos...")},[]),p=z.useCallback(async()=>{console.log("Refresh manual de vehículos...")},[]),_=z.useCallback(async()=>{console.log("Refresh manual de proveedores...")},[]),T=z.useCallback(()=>{i(null)},[]);return{loading:n,error:t,deleteMovement:a,createMovement:l,updateMovement:c,refreshInventory:d,refreshMovements:m,refreshVehicles:p,refreshSuppliers:_,clearError:T}},SI=z.createContext(),RI=()=>{const n=z.useContext(SI);if(n===void 0)throw new Error("useCombustibles must be used within a CombustiblesProvider");return n},n6=({children:n})=>{const e=A4(),t=t6(),i=e6([]),a={...e,inventory:i.inventory,movements:i.movements,vehicles:i.vehicles,suppliers:i.suppliers,dataLoading:i.loading,dataError:i.error,...t,subscribeToInventory:i.subscribeToInventory,subscribeToVehicles:i.subscribeToVehicles,subscribeToSuppliers:i.subscribeToSuppliers,subscribeToMovements:i.subscribeToMovements};return k.jsx(SI.Provider,{value:a,children:n})},II=z.createContext(),r6=({children:n})=>{const[e,t]=z.useState({totalRenders:0,totalFirebaseReads:0,totalCacheHits:0,optimizedComponents:0,unoptimizedComponents:0,averageRenderTime:0}),i=z.useCallback((l,c)=>{t(d=>({...d,[l]:d[l]+c}))},[]),a=z.useCallback(()=>{const l=e.totalCacheHits/(e.totalFirebaseReads+e.totalCacheHits)*100,c=e.optimizedComponents/(e.optimizedComponents+e.unoptimizedComponents)*100;console.log("📊 PERFORMANCE STATS - FASE 3:"),console.log(`🔄 Total renders: ${e.totalRenders}`),console.log(`🔥 Firebase reads: ${e.totalFirebaseReads}`),console.log(`⚡ Cache hits: ${e.totalCacheHits}`),console.log(`📈 Cache efficiency: ${l.toFixed(1)}%`),console.log(`✨ Components optimizados: ${e.optimizedComponents}`),console.log(`⚠️ Components sin optimizar: ${e.unoptimizedComponents}`),console.log(`🎯 Ratio optimización: ${c.toFixed(1)}%`)},[e]);return k.jsx(II.Provider,{value:{globalMetrics:e,updateGlobalMetrics:i,logOptimizationStats:a},children:n})},i6=(n,e)=>{const t=z.memo(n,e);return t.displayName=`Optimized(${n.displayName||n.name})`,t},r3=(n=[])=>(e,t)=>n.length===0?Object.keys(e).every(i=>e[i]===t[i]):n.every(i=>e[i]===t[i]),s6=({isVisible:n=!0})=>{const{globalMetrics:e,logOptimizationStats:t}=z.useContext(II),[i,a]=z.useState(!1),l=e.totalCacheHits/(e.totalFirebaseReads+e.totalCacheHits)*100||0,c=e.optimizedComponents/(e.optimizedComponents+e.unoptimizedComponents)*100||0;return z.useEffect(()=>{},[t]),z.useEffect(()=>{console.log("🔍 PerformanceDashboard renderizado:",{isVisible:n,MODE:"production",globalMetrics:e})},[n,e]),n?k.jsxs("div",{className:"performance-dashboard",children:[k.jsx("div",{className:"dashboard-toggle",children:k.jsxs("button",{className:"toggle-btn",onClick:()=>a(!i),title:"Toggle Performance Dashboard",children:["📊 Performance ",i?"▼":"▶"]})}),i&&k.jsxs("div",{className:"dashboard-content",children:[k.jsxs("div",{className:"metrics-grid",children:[k.jsxs("div",{className:"metric-card",children:[k.jsx("div",{className:"metric-icon",children:"🔄"}),k.jsxs("div",{className:"metric-info",children:[k.jsx("div",{className:"metric-value",children:e.totalRenders}),k.jsx("div",{className:"metric-label",children:"Total Renders"})]})]}),k.jsxs("div",{className:"metric-card",children:[k.jsx("div",{className:"metric-icon",children:"🔥"}),k.jsxs("div",{className:"metric-info",children:[k.jsx("div",{className:"metric-value",children:e.totalFirebaseReads}),k.jsx("div",{className:"metric-label",children:"Firebase Reads"})]})]}),k.jsxs("div",{className:"metric-card",children:[k.jsx("div",{className:"metric-icon",children:"⚡"}),k.jsxs("div",{className:"metric-info",children:[k.jsx("div",{className:"metric-value",children:e.totalCacheHits}),k.jsx("div",{className:"metric-label",children:"Cache Hits"})]})]}),k.jsxs("div",{className:"metric-card",children:[k.jsx("div",{className:"metric-icon",children:"📈"}),k.jsxs("div",{className:"metric-info",children:[k.jsxs("div",{className:"metric-value",children:[l.toFixed(1),"%"]}),k.jsx("div",{className:"metric-label",children:"Cache Efficiency"})]})]}),k.jsxs("div",{className:"metric-card",children:[k.jsx("div",{className:"metric-icon",children:"✨"}),k.jsxs("div",{className:"metric-info",children:[k.jsx("div",{className:"metric-value",children:e.optimizedComponents}),k.jsx("div",{className:"metric-label",children:"Optimized"})]})]}),k.jsxs("div",{className:"metric-card",children:[k.jsx("div",{className:"metric-icon",children:"🎯"}),k.jsxs("div",{className:"metric-info",children:[k.jsxs("div",{className:"metric-value",children:[c.toFixed(1),"%"]}),k.jsx("div",{className:"metric-label",children:"Optimization Ratio"})]})]})]}),k.jsx("div",{className:"performance-status",children:k.jsxs("div",{className:"status-item",children:[k.jsx("span",{className:"status-label",children:"Estado General:"}),k.jsx("span",{className:`status-badge ${a6(c,l)}`,children:o6(c,l)})]})}),k.jsxs("div",{className:"dashboard-actions",children:[k.jsx("button",{className:"btn btn-secondary",onClick:t,children:"📝 Log Stats"}),k.jsx("button",{className:"btn btn-primary",onClick:()=>console.log("📊 Métricas detalladas:",e),children:"🔍 Detalles"})]})]})]}):null},a6=(n,e)=>{const t=(n+e)/2;return t>=80?"excellent":t>=60?"good":t>=40?"fair":"poor"},o6=(n,e)=>{const t=(n+e)/2;return t>=80?"Excelente":t>=60?"Bueno":t>=40?"Regular":"Necesita Mejora"},l6=i6(s6),u6=({children:n})=>{const{userProfile:e,isAdmin:t,isCounterOrAbove:i}=RI(),[a,l]=z.useState(!1),c=Ps(),d=[{id:"dashboard",path:"/",name:"Dashboard",icon:"📊",description:"Vista general",requiredPermission:null},{id:"inventory",path:"/inventario",name:"Inventario",icon:"🛢️",description:"Gestión de stock",requiredPermission:"canManageInventory"},{id:"movements",path:"/movimientos",name:"Movimientos",icon:"📈",description:"Entradas y salidas",requiredPermission:"canCreateMovements"},{id:"vehicles",path:"/vehiculos",name:"Vehículos",icon:"🚜",description:"Maquinaria forestal",requiredPermission:null},{id:"maintenance",path:"/mantenimiento",name:"Mantenimiento",icon:"🔧",description:"Cambios de aceite y baterías",requiredPermission:null},{id:"products",path:"/productos",name:"Productos",icon:"🛢️",description:"Tipos de combustibles",requiredPermission:null},{id:"suppliers",path:"/proveedores",name:"Proveedores",icon:"🏪",description:"Gestión de proveedores",requiredPermission:"canManageSuppliers"},{id:"reports",path:"/reportes",name:"Reportes",icon:"📋",description:"Análisis y reportes",requiredPermission:"canViewReports"},{id:"migration",path:"/migracion",name:"Migración",icon:"🔄",description:"Datos históricos",requiredPermission:"admin"},{id:"admin",path:"/admin",name:"Administración",icon:"⚙️",description:"Gestión de usuarios",requiredPermission:"admin"}],m=()=>{l(!1)},p=A=>A?A==="admin"?t():e?.combustiblesPermissions?.[A]||!1:!0,_=d.filter(A=>p(A.requiredPermission)),T=async()=>{try{await bM(Ku)}catch(A){console.error("Error al cerrar sesión:",A)}};return k.jsxs("div",{className:"dashboard-layout",children:[k.jsx("header",{className:"dashboard-header",children:k.jsxs("div",{className:"header-content",children:[k.jsx("button",{className:"sidebar-toggle",onClick:()=>l(!a),children:"☰"}),k.jsxs("div",{className:"header-title",children:[k.jsx("h1",{children:"⛽ Gestión de Combustibles"}),k.jsx("span",{className:"subtitle",children:"Forestech Colombia"})]}),k.jsxs("div",{className:"header-user",children:[k.jsxs("div",{className:"user-info",children:[k.jsx("span",{className:"user-name",children:e?.displayName||e?.email}),k.jsx("span",{className:"user-role",children:e?.role})]}),k.jsx("div",{className:"user-avatar",children:e?.photoURL?k.jsx("img",{src:e.photoURL,alt:"Avatar"}):k.jsx("div",{className:"avatar-placeholder",children:(e?.displayName||e?.email||"U").charAt(0).toUpperCase()})}),k.jsx("button",{className:"logout-button",onClick:T,title:"Cerrar sesión",children:"🚪"})]})]})}),k.jsxs("div",{className:"dashboard-body",children:[k.jsxs("aside",{className:`dashboard-sidebar ${a?"open":""}`,children:[k.jsx("nav",{className:"sidebar-nav",children:_.map(A=>k.jsxs(ny,{to:A.path,className:`nav-item ${c.pathname===A.path?"active":""}`,onClick:m,children:[k.jsx("span",{className:"nav-icon",children:A.icon}),k.jsxs("div",{className:"nav-content",children:[k.jsx("span",{className:"nav-name",children:A.name}),k.jsx("span",{className:"nav-description",children:A.description})]})]},A.id))}),k.jsx("div",{className:"sidebar-footer",children:k.jsxs("div",{className:"user-permissions",children:[k.jsx("h4",{children:"Permisos Activos:"}),k.jsxs("div",{className:"permission-list",children:[t()&&k.jsx("span",{className:"permission admin",children:"👑 Administrador"}),i()&&k.jsx("span",{className:"permission counter",children:"📊 Gestión Operativa"}),p("canManageInventory")&&k.jsx("span",{className:"permission",children:"🛢️ Inventario"}),p("canManageVehicles")&&k.jsx("span",{className:"permission",children:"🚜 Vehículos"})]})]})})]}),k.jsx("main",{className:"dashboard-main",children:k.jsx("div",{className:"main-content",children:n})})]}),a&&k.jsx("div",{className:"sidebar-overlay",onClick:()=>l(!1)})]})},c6=()=>k.jsx(u6,{children:k.jsx(tN,{})}),h6=()=>{const[n,e]=z.useState("login"),[t,i]=z.useState(!1),[a,l]=z.useState(""),[c,d]=z.useState(""),[m,p]=z.useState(""),[_,T]=z.useState(""),[A,S]=z.useState({email:"",password:"",confirmPassword:"",invitationCode:""}),[N,q]=z.useState(""),[U,$]=z.useState(null),ie=async R=>{R.preventDefault(),i(!0),l("");try{await vM(Ku,m,_)}catch(O){console.error("Error en login:",O),l(Te(O.code))}finally{i(!1)}},ne=async()=>{i(!0),l("");try{const R=new wi,O=await qM(Ku,R);U?await hb(O.user,U.code):await lI(O.user)}catch(R){console.error("Error en login con Google:",R),l("Error al iniciar sesión con Google")}finally{i(!1)}},he=async R=>{R.preventDefault(),i(!0),l(""),d("");try{const O=await oI(N);O.success?($(O.invitation),d(`Invitación válida para: ${O.invitation.targetEmail}`),e("register"),S({...A,email:O.invitation.targetEmail,invitationCode:N})):l(O.error)}catch(O){console.error("Error validando invitación:",O),l("Error validando código de invitación")}finally{i(!1)}},ce=async R=>{if(R.preventDefault(),i(!0),l(""),A.password!==A.confirmPassword){l("Las contraseñas no coinciden"),i(!1);return}if(A.password.length<6){l("La contraseña debe tener al menos 6 caracteres"),i(!1);return}try{const O=await _M(Ku,A.email,A.password),V=await hb(O.user,A.invitationCode);V.success?d("¡Registro exitoso! Bienvenido al sistema."):l(V.error)}catch(O){console.error("Error en registro:",O),l(Te(O.code))}finally{i(!1)}},Te=R=>{switch(R){case"auth/invalid-email":return"El formato del email es inválido";case"auth/user-not-found":return"Usuario no encontrado";case"auth/wrong-password":return"Contraseña incorrecta";case"auth/invalid-credential":return"Email o contraseña incorrectos";case"auth/email-already-in-use":return"Este email ya está registrado";case"auth/weak-password":return"La contraseña es muy débil";default:return"Error de autenticación. Inténtalo de nuevo."}},P=()=>{l(""),d(""),p(""),T(""),q(""),$(null),S({email:"",password:"",confirmPassword:"",invitationCode:""})},I=()=>{switch(n){case"login":return k.jsxs(k.Fragment,{children:[k.jsxs("form",{onSubmit:ie,children:[k.jsxs("div",{className:"form-group",children:[k.jsx("label",{htmlFor:"email",children:"Email:"}),k.jsx("input",{id:"email",type:"email",value:m,onChange:R=>p(R.target.value),required:!0,disabled:t,placeholder:"tu-email@ejemplo.com"})]}),k.jsxs("div",{className:"form-group",children:[k.jsx("label",{htmlFor:"password",children:"Contraseña:"}),k.jsx("input",{id:"password",type:"password",value:_,onChange:R=>T(R.target.value),required:!0,disabled:t,placeholder:"Tu contraseña"})]}),k.jsx("button",{type:"submit",className:"auth-button primary",disabled:t,children:t?"Iniciando sesión...":"Iniciar Sesión"})]}),k.jsx("div",{className:"auth-divider",children:k.jsx("span",{children:"o"})}),k.jsxs("button",{onClick:ne,className:"auth-button google",disabled:t,children:[k.jsx("span",{children:"🔗"}),"Continuar con Google"]}),k.jsx("div",{className:"auth-actions",children:k.jsx("button",{className:"link-button",onClick:()=>{P(),e("invite")},children:"¿Tienes un código de invitación? Regístrate aquí"})})]});case"invite":return k.jsxs(k.Fragment,{children:[k.jsxs("form",{onSubmit:he,children:[k.jsxs("div",{className:"form-group",children:[k.jsx("label",{htmlFor:"inviteCode",children:"Código de invitación:"}),k.jsx("input",{id:"inviteCode",type:"text",value:N,onChange:R=>q(R.target.value.toUpperCase()),required:!0,disabled:t,placeholder:"XXXXXXXX",maxLength:8,style:{textTransform:"uppercase",fontFamily:"monospace"}}),k.jsx("small",{children:"Ingresa el código de 8 caracteres que recibiste"})]}),k.jsx("button",{type:"submit",className:"auth-button primary",disabled:t,children:t?"Validando...":"Validar Código"})]}),k.jsx("div",{className:"auth-actions",children:k.jsx("button",{className:"link-button",onClick:()=>{P(),e("login")},children:"Volver al inicio de sesión"})})]});case"register":return k.jsxs(k.Fragment,{children:[k.jsx("div",{className:"invitation-info",children:k.jsxs("div",{className:"success-message",children:["✅ Código válido para: ",U?.targetEmail]})}),k.jsxs("form",{onSubmit:ce,children:[k.jsxs("div",{className:"form-group",children:[k.jsx("label",{htmlFor:"registerEmail",children:"Email:"}),k.jsx("input",{id:"registerEmail",type:"email",value:A.email,disabled:!0,className:"disabled-input"})]}),k.jsxs("div",{className:"form-group",children:[k.jsx("label",{htmlFor:"registerPassword",children:"Contraseña:"}),k.jsx("input",{id:"registerPassword",type:"password",value:A.password,onChange:R=>S({...A,password:R.target.value}),required:!0,disabled:t,placeholder:"Mínimo 6 caracteres",minLength:6})]}),k.jsxs("div",{className:"form-group",children:[k.jsx("label",{htmlFor:"confirmPassword",children:"Confirmar contraseña:"}),k.jsx("input",{id:"confirmPassword",type:"password",value:A.confirmPassword,onChange:R=>S({...A,confirmPassword:R.target.value}),required:!0,disabled:t,placeholder:"Repite tu contraseña"})]}),k.jsx("button",{type:"submit",className:"auth-button primary",disabled:t,children:t?"Registrando...":"Crear Cuenta"})]}),k.jsx("div",{className:"auth-divider",children:k.jsx("span",{children:"o"})}),k.jsxs("button",{onClick:ne,className:"auth-button google",disabled:t,children:[k.jsx("span",{children:"🔗"}),"Registrarse con Google"]}),k.jsx("div",{className:"auth-actions",children:k.jsx("button",{className:"link-button",onClick:()=>{P(),e("invite")},children:"Usar otro código de invitación"})})]});default:return null}};return k.jsx("div",{className:"auth-container",children:k.jsxs("div",{className:"auth-card",children:[k.jsxs("div",{className:"auth-header",children:[k.jsx("h1",{children:"⛽ Combustibles"}),k.jsx("h2",{children:"Forestech Colombia"}),k.jsxs("p",{children:[n==="login"&&"Sistema de gestión de combustibles",n==="invite"&&"Validar código de invitación",n==="register"&&"Crear nueva cuenta"]})]}),k.jsxs("div",{className:"auth-form",children:[a&&k.jsx("div",{className:"error-message",children:a}),c&&k.jsx("div",{className:"success-message",children:c}),I(),k.jsx("div",{className:"auth-footer",children:k.jsx("p",{children:k.jsxs("small",{children:["Solo usuarios autorizados pueden acceder al sistema.",k.jsx("br",{}),n==="login"?"Contacta al administrador para obtener un código de invitación.":"Si no tienes código, contacta al administrador."]})})})]})]})})},f6=z.lazy(()=>Yr(()=>import("./DashboardMain-C2WwQeOK.js"),[])),d6=z.lazy(()=>Yr(()=>import("./MigrationPage-Ddo5Hfyp.js"),__vite__mapDeps([0,1,2]))),m6=z.lazy(()=>Yr(()=>import("./InventoryMain-CJrKigwH.js"),__vite__mapDeps([3,4]))),p6=z.lazy(()=>Yr(()=>import("./MovementsMain-CNpQbmS5.js"),__vite__mapDeps([5,1,6]))),g6=z.lazy(()=>Yr(()=>import("./VehiclesMain-DBflihJ3.js"),__vite__mapDeps([7,8]))),y6=z.lazy(()=>Yr(()=>import("./MaintenanceMain-BGaxxEtv.js"),__vite__mapDeps([9,10]))),_6=z.lazy(()=>Yr(()=>import("./ProductsMain-DGyNqtje.js"),__vite__mapDeps([11,1,12]))),v6=z.lazy(()=>Yr(()=>import("./SuppliersMain-CWs2-DZc.js"),__vite__mapDeps([13,14]))),E6=z.lazy(()=>Yr(()=>import("./AdminMain-D3S8UkMr.js"),__vite__mapDeps([15,16]))),T6=z.lazy(()=>Yr(()=>import("./ReportsMain-Cl5TfU9M.js"),__vite__mapDeps([17,18]))),A6=()=>k.jsx("div",{className:"loading-container",children:k.jsxs("div",{className:"loader",children:[k.jsx("div",{className:"spinner"}),k.jsx("p",{children:"Cargando vista..."})]})});function b6(){return k.jsx(b4,{children:k.jsx(n6,{children:k.jsxs(r6,{children:[k.jsx(l6,{isVisible:!1}),k.jsx(w6,{})]})})})}function w6(){const{user:n,loading:e}=RI();return e?k.jsx("div",{className:"loading-container",children:k.jsxs("div",{className:"loader",children:[k.jsx("div",{className:"spinner"}),k.jsx("p",{children:"Cargando..."})]})}):k.jsx("div",{className:"App",children:n?k.jsx(z.Suspense,{fallback:k.jsx(A6,{}),children:k.jsx(rN,{children:k.jsxs(er,{path:"/",element:k.jsx(c6,{}),children:[k.jsx(er,{index:!0,element:k.jsx(f6,{})}),k.jsx(er,{path:"inventario",element:k.jsx(m6,{})}),k.jsx(er,{path:"movimientos",element:k.jsx(p6,{})}),k.jsx(er,{path:"vehiculos",element:k.jsx(g6,{})}),k.jsx(er,{path:"mantenimiento",element:k.jsx(y6,{})}),k.jsx(er,{path:"productos",element:k.jsx(_6,{})}),k.jsx(er,{path:"proveedores",element:k.jsx(v6,{})}),k.jsx(er,{path:"reportes",element:k.jsx(T6,{})}),k.jsx(er,{path:"migracion",element:k.jsx(d6,{})}),k.jsx(er,{path:"admin",element:k.jsx(E6,{})})]})})}):k.jsx(h6,{})})}l1.createRoot(document.getElementById("root")).render(k.jsx(z.StrictMode,{children:k.jsx(IN,{basename:"/combustibles",children:k.jsx(b6,{})})}));export{N_ as $,O6 as A,j6 as B,D4 as C,P4 as D,V4 as E,w4 as F,O4 as G,x4 as H,Da as I,Y6 as J,Yg as K,Ie as L,hc as M,vr as N,Qg as O,gl as P,rR as Q,S6 as R,ku as S,X6 as T,W6 as U,Pc as V,o_ as W,K6 as X,B4 as Y,Q6 as Z,Yr as _,U6 as a,mI as a0,C_ as a1,TI as a2,Ne as a3,jg as a4,e3 as a5,J6 as a6,F6 as a7,K4 as a8,n3 as a9,t3 as aa,Wo as ab,C6 as ac,N6 as ad,I6 as ae,D6 as af,C4 as ag,R4 as ah,L6 as ai,x6 as aj,cI as ak,N4 as al,P6 as am,w_ as an,V6 as ao,k6 as ap,M6 as aq,Z6 as ar,fe as b,a_ as c,Ye as d,Ha as e,z6 as f,ZC as g,Fs as h,Tt as i,k as j,ze as k,dt as l,Nf as m,r3 as n,Ra as o,H6 as p,q6 as q,z as r,Le as s,j4 as t,RI as u,G4 as v,i6 as w,$6 as x,G6 as y,B6 as z};
