(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&r(d)}).observe(document,{childList:!0,subtree:!0});function t(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(o){if(o.ep)return;o.ep=!0;const c=t(o);fetch(o.href,c)}})();var Vm={exports:{}},$l={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mT;function OI(){if(mT)return $l;mT=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,o,c){var d=null;if(c!==void 0&&(d=""+c),o.key!==void 0&&(d=""+o.key),"key"in o){c={};for(var m in o)m!=="key"&&(c[m]=o[m])}else c=o;return o=c.ref,{$$typeof:i,type:r,key:d,ref:o!==void 0?o:null,props:c}}return $l.Fragment=e,$l.jsx=t,$l.jsxs=t,$l}var pT;function MI(){return pT||(pT=1,Vm.exports=OI()),Vm.exports}var p=MI(),Pm={exports:{}},Ne={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gT;function kI(){if(gT)return Ne;gT=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),A=Symbol.iterator;function b(D){return D===null||typeof D!="object"?null:(D=A&&D[A]||D["@@iterator"],typeof D=="function"?D:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},O=Object.assign,z={};function j(D,te,oe){this.props=D,this.context=te,this.refs=z,this.updater=oe||k}j.prototype.isReactComponent={},j.prototype.setState=function(D,te){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,te,"setState")},j.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function K(){}K.prototype=j.prototype;function ae(D,te,oe){this.props=D,this.context=te,this.refs=z,this.updater=oe||k}var ie=ae.prototype=new K;ie.constructor=ae,O(ie,j.prototype),ie.isPureReactComponent=!0;var ce=Array.isArray,W={H:null,A:null,T:null,S:null,V:null},de=Object.prototype.hasOwnProperty;function V(D,te,oe,ne,ye,xe){return oe=xe.ref,{$$typeof:i,type:D,key:te,ref:oe!==void 0?oe:null,props:xe}}function I(D,te){return V(D.type,te,void 0,void 0,void 0,D.props)}function N(D){return typeof D=="object"&&D!==null&&D.$$typeof===i}function x(D){var te={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(oe){return te[oe]})}var P=/\/+/g;function U(D,te){return typeof D=="object"&&D!==null&&D.key!=null?x(""+D.key):te.toString(36)}function C(){}function Be(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(C,C):(D.status="pending",D.then(function(te){D.status==="pending"&&(D.status="fulfilled",D.value=te)},function(te){D.status==="pending"&&(D.status="rejected",D.reason=te)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function Oe(D,te,oe,ne,ye){var xe=typeof D;(xe==="undefined"||xe==="boolean")&&(D=null);var Se=!1;if(D===null)Se=!0;else switch(xe){case"bigint":case"string":case"number":Se=!0;break;case"object":switch(D.$$typeof){case i:case e:Se=!0;break;case T:return Se=D._init,Oe(Se(D._payload),te,oe,ne,ye)}}if(Se)return ye=ye(D),Se=ne===""?"."+U(D,0):ne,ce(ye)?(oe="",Se!=null&&(oe=Se.replace(P,"$&/")+"/"),Oe(ye,te,oe,"",function(ai){return ai})):ye!=null&&(N(ye)&&(ye=I(ye,oe+(ye.key==null||D&&D.key===ye.key?"":(""+ye.key).replace(P,"$&/")+"/")+Se)),te.push(ye)),1;Se=0;var Ot=ne===""?".":ne+":";if(ce(D))for(var it=0;it<D.length;it++)ne=D[it],xe=Ot+U(ne,it),Se+=Oe(ne,te,oe,xe,ye);else if(it=b(D),typeof it=="function")for(D=it.call(D),it=0;!(ne=D.next()).done;)ne=ne.value,xe=Ot+U(ne,it++),Se+=Oe(ne,te,oe,xe,ye);else if(xe==="object"){if(typeof D.then=="function")return Oe(Be(D),te,oe,ne,ye);throw te=String(D),Error("Objects are not valid as a React child (found: "+(te==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":te)+"). If you meant to render a collection of children, use an array instead.")}return Se}function Q(D,te,oe){if(D==null)return D;var ne=[],ye=0;return Oe(D,ne,"","",function(xe){return te.call(oe,xe,ye++)}),ne}function re(D){if(D._status===-1){var te=D._result;te=te(),te.then(function(oe){(D._status===0||D._status===-1)&&(D._status=1,D._result=oe)},function(oe){(D._status===0||D._status===-1)&&(D._status=2,D._result=oe)}),D._status===-1&&(D._status=0,D._result=te)}if(D._status===1)return D._result.default;throw D._result}var me=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var te=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(te))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)};function Ge(){}return Ne.Children={map:Q,forEach:function(D,te,oe){Q(D,function(){te.apply(this,arguments)},oe)},count:function(D){var te=0;return Q(D,function(){te++}),te},toArray:function(D){return Q(D,function(te){return te})||[]},only:function(D){if(!N(D))throw Error("React.Children.only expected to receive a single React element child.");return D}},Ne.Component=j,Ne.Fragment=t,Ne.Profiler=o,Ne.PureComponent=ae,Ne.StrictMode=r,Ne.Suspense=g,Ne.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=W,Ne.__COMPILER_RUNTIME={__proto__:null,c:function(D){return W.H.useMemoCache(D)}},Ne.cache=function(D){return function(){return D.apply(null,arguments)}},Ne.cloneElement=function(D,te,oe){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var ne=O({},D.props),ye=D.key,xe=void 0;if(te!=null)for(Se in te.ref!==void 0&&(xe=void 0),te.key!==void 0&&(ye=""+te.key),te)!de.call(te,Se)||Se==="key"||Se==="__self"||Se==="__source"||Se==="ref"&&te.ref===void 0||(ne[Se]=te[Se]);var Se=arguments.length-2;if(Se===1)ne.children=oe;else if(1<Se){for(var Ot=Array(Se),it=0;it<Se;it++)Ot[it]=arguments[it+2];ne.children=Ot}return V(D.type,ye,void 0,void 0,xe,ne)},Ne.createContext=function(D){return D={$$typeof:d,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:c,_context:D},D},Ne.createElement=function(D,te,oe){var ne,ye={},xe=null;if(te!=null)for(ne in te.key!==void 0&&(xe=""+te.key),te)de.call(te,ne)&&ne!=="key"&&ne!=="__self"&&ne!=="__source"&&(ye[ne]=te[ne]);var Se=arguments.length-2;if(Se===1)ye.children=oe;else if(1<Se){for(var Ot=Array(Se),it=0;it<Se;it++)Ot[it]=arguments[it+2];ye.children=Ot}if(D&&D.defaultProps)for(ne in Se=D.defaultProps,Se)ye[ne]===void 0&&(ye[ne]=Se[ne]);return V(D,xe,void 0,void 0,null,ye)},Ne.createRef=function(){return{current:null}},Ne.forwardRef=function(D){return{$$typeof:m,render:D}},Ne.isValidElement=N,Ne.lazy=function(D){return{$$typeof:T,_payload:{_status:-1,_result:D},_init:re}},Ne.memo=function(D,te){return{$$typeof:v,type:D,compare:te===void 0?null:te}},Ne.startTransition=function(D){var te=W.T,oe={};W.T=oe;try{var ne=D(),ye=W.S;ye!==null&&ye(oe,ne),typeof ne=="object"&&ne!==null&&typeof ne.then=="function"&&ne.then(Ge,me)}catch(xe){me(xe)}finally{W.T=te}},Ne.unstable_useCacheRefresh=function(){return W.H.useCacheRefresh()},Ne.use=function(D){return W.H.use(D)},Ne.useActionState=function(D,te,oe){return W.H.useActionState(D,te,oe)},Ne.useCallback=function(D,te){return W.H.useCallback(D,te)},Ne.useContext=function(D){return W.H.useContext(D)},Ne.useDebugValue=function(){},Ne.useDeferredValue=function(D,te){return W.H.useDeferredValue(D,te)},Ne.useEffect=function(D,te,oe){var ne=W.H;if(typeof oe=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ne.useEffect(D,te)},Ne.useId=function(){return W.H.useId()},Ne.useImperativeHandle=function(D,te,oe){return W.H.useImperativeHandle(D,te,oe)},Ne.useInsertionEffect=function(D,te){return W.H.useInsertionEffect(D,te)},Ne.useLayoutEffect=function(D,te){return W.H.useLayoutEffect(D,te)},Ne.useMemo=function(D,te){return W.H.useMemo(D,te)},Ne.useOptimistic=function(D,te){return W.H.useOptimistic(D,te)},Ne.useReducer=function(D,te,oe){return W.H.useReducer(D,te,oe)},Ne.useRef=function(D){return W.H.useRef(D)},Ne.useState=function(D){return W.H.useState(D)},Ne.useSyncExternalStore=function(D,te,oe){return W.H.useSyncExternalStore(D,te,oe)},Ne.useTransition=function(){return W.H.useTransition()},Ne.version="19.1.0",Ne}var yT;function Lp(){return yT||(yT=1,Pm.exports=kI()),Pm.exports}var ge=Lp(),jm={exports:{}},Kl={},Um={exports:{}},Lm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vT;function VI(){return vT||(vT=1,function(i){function e(Q,re){var me=Q.length;Q.push(re);e:for(;0<me;){var Ge=me-1>>>1,D=Q[Ge];if(0<o(D,re))Q[Ge]=re,Q[me]=D,me=Ge;else break e}}function t(Q){return Q.length===0?null:Q[0]}function r(Q){if(Q.length===0)return null;var re=Q[0],me=Q.pop();if(me!==re){Q[0]=me;e:for(var Ge=0,D=Q.length,te=D>>>1;Ge<te;){var oe=2*(Ge+1)-1,ne=Q[oe],ye=oe+1,xe=Q[ye];if(0>o(ne,me))ye<D&&0>o(xe,ne)?(Q[Ge]=xe,Q[ye]=me,Ge=ye):(Q[Ge]=ne,Q[oe]=me,Ge=oe);else if(ye<D&&0>o(xe,me))Q[Ge]=xe,Q[ye]=me,Ge=ye;else break e}}return re}function o(Q,re){var me=Q.sortIndex-re.sortIndex;return me!==0?me:Q.id-re.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;i.unstable_now=function(){return c.now()}}else{var d=Date,m=d.now();i.unstable_now=function(){return d.now()-m}}var g=[],v=[],T=1,A=null,b=3,k=!1,O=!1,z=!1,j=!1,K=typeof setTimeout=="function"?setTimeout:null,ae=typeof clearTimeout=="function"?clearTimeout:null,ie=typeof setImmediate<"u"?setImmediate:null;function ce(Q){for(var re=t(v);re!==null;){if(re.callback===null)r(v);else if(re.startTime<=Q)r(v),re.sortIndex=re.expirationTime,e(g,re);else break;re=t(v)}}function W(Q){if(z=!1,ce(Q),!O)if(t(g)!==null)O=!0,de||(de=!0,U());else{var re=t(v);re!==null&&Oe(W,re.startTime-Q)}}var de=!1,V=-1,I=5,N=-1;function x(){return j?!0:!(i.unstable_now()-N<I)}function P(){if(j=!1,de){var Q=i.unstable_now();N=Q;var re=!0;try{e:{O=!1,z&&(z=!1,ae(V),V=-1),k=!0;var me=b;try{t:{for(ce(Q),A=t(g);A!==null&&!(A.expirationTime>Q&&x());){var Ge=A.callback;if(typeof Ge=="function"){A.callback=null,b=A.priorityLevel;var D=Ge(A.expirationTime<=Q);if(Q=i.unstable_now(),typeof D=="function"){A.callback=D,ce(Q),re=!0;break t}A===t(g)&&r(g),ce(Q)}else r(g);A=t(g)}if(A!==null)re=!0;else{var te=t(v);te!==null&&Oe(W,te.startTime-Q),re=!1}}break e}finally{A=null,b=me,k=!1}re=void 0}}finally{re?U():de=!1}}}var U;if(typeof ie=="function")U=function(){ie(P)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,Be=C.port2;C.port1.onmessage=P,U=function(){Be.postMessage(null)}}else U=function(){K(P,0)};function Oe(Q,re){V=K(function(){Q(i.unstable_now())},re)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(Q){Q.callback=null},i.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<Q?Math.floor(1e3/Q):5},i.unstable_getCurrentPriorityLevel=function(){return b},i.unstable_next=function(Q){switch(b){case 1:case 2:case 3:var re=3;break;default:re=b}var me=b;b=re;try{return Q()}finally{b=me}},i.unstable_requestPaint=function(){j=!0},i.unstable_runWithPriority=function(Q,re){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var me=b;b=Q;try{return re()}finally{b=me}},i.unstable_scheduleCallback=function(Q,re,me){var Ge=i.unstable_now();switch(typeof me=="object"&&me!==null?(me=me.delay,me=typeof me=="number"&&0<me?Ge+me:Ge):me=Ge,Q){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=me+D,Q={id:T++,callback:re,priorityLevel:Q,startTime:me,expirationTime:D,sortIndex:-1},me>Ge?(Q.sortIndex=me,e(v,Q),t(g)===null&&Q===t(v)&&(z?(ae(V),V=-1):z=!0,Oe(W,me-Ge))):(Q.sortIndex=D,e(g,Q),O||k||(O=!0,de||(de=!0,U()))),Q},i.unstable_shouldYield=x,i.unstable_wrapCallback=function(Q){var re=b;return function(){var me=b;b=re;try{return Q.apply(this,arguments)}finally{b=me}}}}(Lm)),Lm}var _T;function PI(){return _T||(_T=1,Um.exports=VI()),Um.exports}var zm={exports:{}},Wt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TT;function jI(){if(TT)return Wt;TT=1;var i=Lp();function e(g){var v="https://react.dev/errors/"+g;if(1<arguments.length){v+="?args[]="+encodeURIComponent(arguments[1]);for(var T=2;T<arguments.length;T++)v+="&args[]="+encodeURIComponent(arguments[T])}return"Minified React error #"+g+"; visit "+v+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function c(g,v,T){var A=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:A==null?null:""+A,children:g,containerInfo:v,implementation:T}}var d=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(g,v){if(g==="font")return"";if(typeof v=="string")return v==="use-credentials"?v:""}return Wt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Wt.createPortal=function(g,v){var T=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!v||v.nodeType!==1&&v.nodeType!==9&&v.nodeType!==11)throw Error(e(299));return c(g,v,null,T)},Wt.flushSync=function(g){var v=d.T,T=r.p;try{if(d.T=null,r.p=2,g)return g()}finally{d.T=v,r.p=T,r.d.f()}},Wt.preconnect=function(g,v){typeof g=="string"&&(v?(v=v.crossOrigin,v=typeof v=="string"?v==="use-credentials"?v:"":void 0):v=null,r.d.C(g,v))},Wt.prefetchDNS=function(g){typeof g=="string"&&r.d.D(g)},Wt.preinit=function(g,v){if(typeof g=="string"&&v&&typeof v.as=="string"){var T=v.as,A=m(T,v.crossOrigin),b=typeof v.integrity=="string"?v.integrity:void 0,k=typeof v.fetchPriority=="string"?v.fetchPriority:void 0;T==="style"?r.d.S(g,typeof v.precedence=="string"?v.precedence:void 0,{crossOrigin:A,integrity:b,fetchPriority:k}):T==="script"&&r.d.X(g,{crossOrigin:A,integrity:b,fetchPriority:k,nonce:typeof v.nonce=="string"?v.nonce:void 0})}},Wt.preinitModule=function(g,v){if(typeof g=="string")if(typeof v=="object"&&v!==null){if(v.as==null||v.as==="script"){var T=m(v.as,v.crossOrigin);r.d.M(g,{crossOrigin:T,integrity:typeof v.integrity=="string"?v.integrity:void 0,nonce:typeof v.nonce=="string"?v.nonce:void 0})}}else v==null&&r.d.M(g)},Wt.preload=function(g,v){if(typeof g=="string"&&typeof v=="object"&&v!==null&&typeof v.as=="string"){var T=v.as,A=m(T,v.crossOrigin);r.d.L(g,T,{crossOrigin:A,integrity:typeof v.integrity=="string"?v.integrity:void 0,nonce:typeof v.nonce=="string"?v.nonce:void 0,type:typeof v.type=="string"?v.type:void 0,fetchPriority:typeof v.fetchPriority=="string"?v.fetchPriority:void 0,referrerPolicy:typeof v.referrerPolicy=="string"?v.referrerPolicy:void 0,imageSrcSet:typeof v.imageSrcSet=="string"?v.imageSrcSet:void 0,imageSizes:typeof v.imageSizes=="string"?v.imageSizes:void 0,media:typeof v.media=="string"?v.media:void 0})}},Wt.preloadModule=function(g,v){if(typeof g=="string")if(v){var T=m(v.as,v.crossOrigin);r.d.m(g,{as:typeof v.as=="string"&&v.as!=="script"?v.as:void 0,crossOrigin:T,integrity:typeof v.integrity=="string"?v.integrity:void 0})}else r.d.m(g)},Wt.requestFormReset=function(g){r.d.r(g)},Wt.unstable_batchedUpdates=function(g,v){return g(v)},Wt.useFormState=function(g,v,T){return d.H.useFormState(g,v,T)},Wt.useFormStatus=function(){return d.H.useHostTransitionStatus()},Wt.version="19.1.0",Wt}var ET;function UI(){if(ET)return zm.exports;ET=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),zm.exports=jI(),zm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bT;function LI(){if(bT)return Kl;bT=1;var i=PI(),e=Lp(),t=UI();function r(n){var s="https://react.dev/errors/"+n;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function c(n){var s=n,a=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(a=s.return),n=s.return;while(n)}return s.tag===3?a:null}function d(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function m(n){if(c(n)!==n)throw Error(r(188))}function g(n){var s=n.alternate;if(!s){if(s=c(n),s===null)throw Error(r(188));return s!==n?null:n}for(var a=n,l=s;;){var h=a.return;if(h===null)break;var f=h.alternate;if(f===null){if(l=h.return,l!==null){a=l;continue}break}if(h.child===f.child){for(f=h.child;f;){if(f===a)return m(h),n;if(f===l)return m(h),s;f=f.sibling}throw Error(r(188))}if(a.return!==l.return)a=h,l=f;else{for(var E=!1,S=h.child;S;){if(S===a){E=!0,a=h,l=f;break}if(S===l){E=!0,l=h,a=f;break}S=S.sibling}if(!E){for(S=f.child;S;){if(S===a){E=!0,a=f,l=h;break}if(S===l){E=!0,l=f,a=h;break}S=S.sibling}if(!E)throw Error(r(189))}}if(a.alternate!==l)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?n:s}function v(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n;for(n=n.child;n!==null;){if(s=v(n),s!==null)return s;n=n.sibling}return null}var T=Object.assign,A=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),k=Symbol.for("react.portal"),O=Symbol.for("react.fragment"),z=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),K=Symbol.for("react.provider"),ae=Symbol.for("react.consumer"),ie=Symbol.for("react.context"),ce=Symbol.for("react.forward_ref"),W=Symbol.for("react.suspense"),de=Symbol.for("react.suspense_list"),V=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),x=Symbol.for("react.memo_cache_sentinel"),P=Symbol.iterator;function U(n){return n===null||typeof n!="object"?null:(n=P&&n[P]||n["@@iterator"],typeof n=="function"?n:null)}var C=Symbol.for("react.client.reference");function Be(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===C?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case O:return"Fragment";case j:return"Profiler";case z:return"StrictMode";case W:return"Suspense";case de:return"SuspenseList";case N:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case k:return"Portal";case ie:return(n.displayName||"Context")+".Provider";case ae:return(n._context.displayName||"Context")+".Consumer";case ce:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case V:return s=n.displayName||null,s!==null?s:Be(n.type)||"Memo";case I:s=n._payload,n=n._init;try{return Be(n(s))}catch{}}return null}var Oe=Array.isArray,Q=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,me={pending:!1,data:null,method:null,action:null},Ge=[],D=-1;function te(n){return{current:n}}function oe(n){0>D||(n.current=Ge[D],Ge[D]=null,D--)}function ne(n,s){D++,Ge[D]=n.current,n.current=s}var ye=te(null),xe=te(null),Se=te(null),Ot=te(null);function it(n,s){switch(ne(Se,s),ne(xe,n),ne(ye,null),s.nodeType){case 9:case 11:n=(n=s.documentElement)&&(n=n.namespaceURI)?B_(n):0;break;default:if(n=s.tagName,s=s.namespaceURI)s=B_(s),n=F_(s,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}oe(ye),ne(ye,n)}function ai(){oe(ye),oe(xe),oe(Se)}function ms(n){n.memoizedState!==null&&ne(Ot,n);var s=ye.current,a=F_(s,n.type);s!==a&&(ne(xe,n),ne(ye,a))}function Mi(n){xe.current===n&&(oe(ye),oe(xe)),Ot.current===n&&(oe(Ot),ql._currentValue=me)}var gr=Object.prototype.hasOwnProperty,yr=i.unstable_scheduleCallback,vr=i.unstable_cancelCallback,Uo=i.unstable_shouldYield,Uc=i.unstable_requestPaint,On=i.unstable_now,kd=i.unstable_getCurrentPriorityLevel,Lo=i.unstable_ImmediatePriority,pa=i.unstable_UserBlockingPriority,_r=i.unstable_NormalPriority,Vd=i.unstable_LowPriority,ga=i.unstable_IdlePriority,zo=i.log,Lc=i.unstable_setDisableYieldValue,ht=null,Qe=null;function vn(n){if(typeof zo=="function"&&Lc(n),Qe&&typeof Qe.setStrictMode=="function")try{Qe.setStrictMode(ht,n)}catch{}}var Xt=Math.clz32?Math.clz32:Tr,zc=Math.log,Pd=Math.LN2;function Tr(n){return n>>>=0,n===0?32:31-(zc(n)/Pd|0)|0}var Er=256,br=4194304;function Qn(n){var s=n&42;if(s!==0)return s;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function ya(n,s,a){var l=n.pendingLanes;if(l===0)return 0;var h=0,f=n.suspendedLanes,E=n.pingedLanes;n=n.warmLanes;var S=l&134217727;return S!==0?(l=S&~f,l!==0?h=Qn(l):(E&=S,E!==0?h=Qn(E):a||(a=S&~n,a!==0&&(h=Qn(a))))):(S=l&~f,S!==0?h=Qn(S):E!==0?h=Qn(E):a||(a=l&~n,a!==0&&(h=Qn(a)))),h===0?0:s!==0&&s!==h&&(s&f)===0&&(f=h&-h,a=s&-s,f>=a||f===32&&(a&4194048)!==0)?s:h}function Ar(n,s){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&s)===0}function qo(n,s){switch(n){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Bo(){var n=Er;return Er<<=1,(Er&4194048)===0&&(Er=256),n}function Fo(){var n=br;return br<<=1,(br&62914560)===0&&(br=4194304),n}function ki(n){for(var s=[],a=0;31>a;a++)s.push(n);return s}function Vi(n,s){n.pendingLanes|=s,s!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Ho(n,s,a,l,h,f){var E=n.pendingLanes;n.pendingLanes=a,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=a,n.entangledLanes&=a,n.errorRecoveryDisabledLanes&=a,n.shellSuspendCounter=0;var S=n.entanglements,R=n.expirationTimes,F=n.hiddenUpdates;for(a=E&~a;0<a;){var Y=31-Xt(a),J=1<<Y;S[Y]=0,R[Y]=-1;var H=F[Y];if(H!==null)for(F[Y]=null,Y=0;Y<H.length;Y++){var G=H[Y];G!==null&&(G.lane&=-536870913)}a&=~J}l!==0&&oi(n,l,0),f!==0&&h===0&&n.tag!==0&&(n.suspendedLanes|=f&~(E&~s))}function oi(n,s,a){n.pendingLanes|=s,n.suspendedLanes&=~s;var l=31-Xt(s);n.entangledLanes|=s,n.entanglements[l]=n.entanglements[l]|1073741824|a&4194090}function Go(n,s){var a=n.entangledLanes|=s;for(n=n.entanglements;a;){var l=31-Xt(a),h=1<<l;h&s|n[l]&s&&(n[l]|=s),a&=~h}}function ps(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function va(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function gs(){var n=re.p;return n!==0?n:(n=window.event,n===void 0?32:lT(n.type))}function qc(n,s){var a=re.p;try{return re.p=n,s()}finally{re.p=a}}var rt=Math.random().toString(36).slice(2),St="__reactFiber$"+rt,vt="__reactProps$"+rt,Mn="__reactContainer$"+rt,$o="__reactEvents$"+rt,jd="__reactListeners$"+rt,ys="__reactHandles$"+rt,Bc="__reactResources$"+rt,Sr="__reactMarker$"+rt;function vs(n){delete n[St],delete n[vt],delete n[$o],delete n[jd],delete n[ys]}function Pi(n){var s=n[St];if(s)return s;for(var a=n.parentNode;a;){if(s=a[Mn]||a[St]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(n=K_(n);n!==null;){if(a=n[St])return a;n=K_(n)}return s}n=a,a=n.parentNode}return null}function li(n){if(n=n[St]||n[Mn]){var s=n.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return n}return null}function ci(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n.stateNode;throw Error(r(33))}function rn(n){var s=n[Bc];return s||(s=n[Bc]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function mt(n){n[Sr]=!0}var Ko=new Set,_a={};function Yn(n,s){ji(n,s),ji(n+"Capture",s)}function ji(n,s){for(_a[n]=s,n=0;n<s.length;n++)Ko.add(s[n])}var Fc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Hc={},wr={};function Gc(n){return gr.call(wr,n)?!0:gr.call(Hc,n)?!1:Fc.test(n)?wr[n]=!0:(Hc[n]=!0,!1)}function _s(n,s,a){if(Gc(s))if(a===null)n.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":n.removeAttribute(s);return;case"boolean":var l=s.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){n.removeAttribute(s);return}}n.setAttribute(s,""+a)}}function ui(n,s,a){if(a===null)n.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(s);return}n.setAttribute(s,""+a)}}function zt(n,s,a,l){if(l===null)n.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(a);return}n.setAttributeNS(s,a,""+l)}}var Ir,$c;function Ui(n){if(Ir===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);Ir=s&&s[1]||"",$c=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ir+n+$c}var Ta=!1;function Ea(n,s){if(!n||Ta)return"";Ta=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(s){var J=function(){throw Error()};if(Object.defineProperty(J.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(J,[])}catch(G){var H=G}Reflect.construct(n,[],J)}else{try{J.call()}catch(G){H=G}n.call(J.prototype)}}else{try{throw Error()}catch(G){H=G}(J=n())&&typeof J.catch=="function"&&J.catch(function(){})}}catch(G){if(G&&H&&typeof G.stack=="string")return[G.stack,H.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=l.DetermineComponentFrameRoot(),E=f[0],S=f[1];if(E&&S){var R=E.split(`
`),F=S.split(`
`);for(h=l=0;l<R.length&&!R[l].includes("DetermineComponentFrameRoot");)l++;for(;h<F.length&&!F[h].includes("DetermineComponentFrameRoot");)h++;if(l===R.length||h===F.length)for(l=R.length-1,h=F.length-1;1<=l&&0<=h&&R[l]!==F[h];)h--;for(;1<=l&&0<=h;l--,h--)if(R[l]!==F[h]){if(l!==1||h!==1)do if(l--,h--,0>h||R[l]!==F[h]){var Y=`
`+R[l].replace(" at new "," at ");return n.displayName&&Y.includes("<anonymous>")&&(Y=Y.replace("<anonymous>",n.displayName)),Y}while(1<=l&&0<=h);break}}}finally{Ta=!1,Error.prepareStackTrace=a}return(a=n?n.displayName||n.name:"")?Ui(a):""}function Qo(n){switch(n.tag){case 26:case 27:case 5:return Ui(n.type);case 16:return Ui("Lazy");case 13:return Ui("Suspense");case 19:return Ui("SuspenseList");case 0:case 15:return Ea(n.type,!1);case 11:return Ea(n.type.render,!1);case 1:return Ea(n.type,!0);case 31:return Ui("Activity");default:return""}}function ba(n){try{var s="";do s+=Qo(n),n=n.return;while(n);return s}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function an(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Yo(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Ud(n){var s=Yo(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,s),l=""+n[s];if(!n.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,f=a.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return h.call(this)},set:function(E){l=""+E,f.call(this,E)}}),Object.defineProperty(n,s,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(E){l=""+E},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function Aa(n){n._valueTracker||(n._valueTracker=Ud(n))}function Xo(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var a=s.getValue(),l="";return n&&(l=Yo(n)?n.checked?"true":"false":n.value),n=l,n!==a?(s.setValue(n),!0):!1}function Nr(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Ld=/[\n"\\]/g;function _t(n){return n.replace(Ld,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function _n(n,s,a,l,h,f,E,S){n.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?n.type=E:n.removeAttribute("type"),s!=null?E==="number"?(s===0&&n.value===""||n.value!=s)&&(n.value=""+an(s)):n.value!==""+an(s)&&(n.value=""+an(s)):E!=="submit"&&E!=="reset"||n.removeAttribute("value"),s!=null?Ts(n,E,an(s)):a!=null?Ts(n,E,an(a)):l!=null&&n.removeAttribute("value"),h==null&&f!=null&&(n.defaultChecked=!!f),h!=null&&(n.checked=h&&typeof h!="function"&&typeof h!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?n.name=""+an(S):n.removeAttribute("name")}function Rr(n,s,a,l,h,f,E,S){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(n.type=f),s!=null||a!=null){if(!(f!=="submit"&&f!=="reset"||s!=null))return;a=a!=null?""+an(a):"",s=s!=null?""+an(s):a,S||s===n.value||(n.value=s),n.defaultValue=s}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,n.checked=S?n.checked:!!l,n.defaultChecked=!!l,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(n.name=E)}function Ts(n,s,a){s==="number"&&Nr(n.ownerDocument)===n||n.defaultValue===""+a||(n.defaultValue=""+a)}function Li(n,s,a,l){if(n=n.options,s){s={};for(var h=0;h<a.length;h++)s["$"+a[h]]=!0;for(a=0;a<n.length;a++)h=s.hasOwnProperty("$"+n[a].value),n[a].selected!==h&&(n[a].selected=h),h&&l&&(n[a].defaultSelected=!0)}else{for(a=""+an(a),s=null,h=0;h<n.length;h++){if(n[h].value===a){n[h].selected=!0,l&&(n[h].defaultSelected=!0);return}s!==null||n[h].disabled||(s=n[h])}s!==null&&(s.selected=!0)}}function Ze(n,s,a){if(s!=null&&(s=""+an(s),s!==n.value&&(n.value=s),a==null)){n.defaultValue!==s&&(n.defaultValue=s);return}n.defaultValue=a!=null?""+an(a):""}function Cr(n,s,a,l){if(s==null){if(l!=null){if(a!=null)throw Error(r(92));if(Oe(l)){if(1<l.length)throw Error(r(93));l=l[0]}a=l}a==null&&(a=""),s=a}a=an(s),n.defaultValue=a,l=n.textContent,l===a&&l!==""&&l!==null&&(n.value=l)}function kn(n,s){if(s){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=s;return}}n.textContent=s}var xr=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Kc(n,s,a){var l=s.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?n.setProperty(s,""):s==="float"?n.cssFloat="":n[s]="":l?n.setProperty(s,a):typeof a!="number"||a===0||xr.has(s)?s==="float"?n.cssFloat=a:n[s]=(""+a).trim():n[s]=a+"px"}function Zo(n,s,a){if(s!=null&&typeof s!="object")throw Error(r(62));if(n=n.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||s!=null&&s.hasOwnProperty(l)||(l.indexOf("--")===0?n.setProperty(l,""):l==="float"?n.cssFloat="":n[l]="");for(var h in s)l=s[h],s.hasOwnProperty(h)&&a[h]!==l&&Kc(n,h,l)}else for(var f in s)s.hasOwnProperty(f)&&Kc(n,f,s[f])}function Wo(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var zd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),qd=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Sa(n){return qd.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var zi=null;function Vn(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var qi=null,Bi=null;function Jo(n){var s=li(n);if(s&&(n=s.stateNode)){var a=n[vt]||null;e:switch(n=s.stateNode,s.type){case"input":if(_n(n,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),s=a.name,a.type==="radio"&&s!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+_t(""+s)+'"][type="radio"]'),s=0;s<a.length;s++){var l=a[s];if(l!==n&&l.form===n.form){var h=l[vt]||null;if(!h)throw Error(r(90));_n(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(s=0;s<a.length;s++)l=a[s],l.form===n.form&&Xo(l)}break e;case"textarea":Ze(n,a.value,a.defaultValue);break e;case"select":s=a.value,s!=null&&Li(n,!!a.multiple,s,!1)}}}var hi=!1;function Qc(n,s,a){if(hi)return n(s,a);hi=!0;try{var l=n(s);return l}finally{if(hi=!1,(qi!==null||Bi!==null)&&(qu(),qi&&(s=qi,n=Bi,Bi=qi=null,Jo(s),n)))for(s=0;s<n.length;s++)Jo(n[s])}}function Dr(n,s){var a=n.stateNode;if(a===null)return null;var l=a[vt]||null;if(l===null)return null;a=l[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(n=n.type,l=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!l;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(r(231,s,typeof a));return a}var Xn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Pn=!1;if(Xn)try{var Or={};Object.defineProperty(Or,"passive",{get:function(){Pn=!0}}),window.addEventListener("test",Or,Or),window.removeEventListener("test",Or,Or)}catch{Pn=!1}var di=null,Es=null,Fi=null;function el(){if(Fi)return Fi;var n,s=Es,a=s.length,l,h="value"in di?di.value:di.textContent,f=h.length;for(n=0;n<a&&s[n]===h[n];n++);var E=a-n;for(l=1;l<=E&&s[a-l]===h[f-l];l++);return Fi=h.slice(n,1<l?1-l:void 0)}function fi(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function mi(){return!0}function tl(){return!1}function Mt(n){function s(a,l,h,f,E){this._reactName=a,this._targetInst=h,this.type=l,this.nativeEvent=f,this.target=E,this.currentTarget=null;for(var S in n)n.hasOwnProperty(S)&&(a=n[S],this[S]=a?a(f):f[S]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?mi:tl,this.isPropagationStopped=tl,this}return T(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=mi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=mi)},persist:function(){},isPersistent:mi}),s}var Ke={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wa=Mt(Ke),Mr=T({},Ke,{view:0,detail:0}),Yc=Mt(Mr),Ia,Na,pi,kr=T({},Mr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:jr,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==pi&&(pi&&n.type==="mousemove"?(Ia=n.screenX-pi.screenX,Na=n.screenY-pi.screenY):Na=Ia=0,pi=n),Ia)},movementY:function(n){return"movementY"in n?n.movementY:Na}}),jn=Mt(kr),Xc=T({},kr,{dataTransfer:0}),Bd=Mt(Xc),Vr=T({},Mr,{relatedTarget:0}),Ra=Mt(Vr),nl=T({},Ke,{animationName:0,elapsedTime:0,pseudoElement:0}),Ca=Mt(nl),Zc=T({},Ke,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),xa=Mt(Zc),Fd=T({},Ke,{data:0}),il=Mt(Fd),Pr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Wc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Jc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function sl(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=Jc[n])?!!s[n]:!1}function jr(){return sl}var eu=T({},Mr,{key:function(n){if(n.key){var s=Pr[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=fi(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Wc[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:jr,charCode:function(n){return n.type==="keypress"?fi(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?fi(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Da=Mt(eu),tu=T({},kr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),rl=Mt(tu),Hi=T({},Mr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:jr}),nu=Mt(Hi),iu=T({},Ke,{propertyName:0,elapsedTime:0,pseudoElement:0}),su=Mt(iu),ru=T({},kr,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Oa=Mt(ru),on=T({},Ke,{newState:0,oldState:0}),au=Mt(on),ou=[9,13,27,32],gi=Xn&&"CompositionEvent"in window,u=null;Xn&&"documentMode"in document&&(u=document.documentMode);var y=Xn&&"TextEvent"in window&&!u,_=Xn&&(!gi||u&&8<u&&11>=u),w=" ",q=!1;function $(n,s){switch(n){case"keyup":return ou.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function se(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var je=!1;function wt(n,s){switch(n){case"compositionend":return se(s);case"keypress":return s.which!==32?null:(q=!0,w);case"textInput":return n=s.data,n===w&&q?null:n;default:return null}}function Ue(n,s){if(je)return n==="compositionend"||!gi&&$(n,s)?(n=el(),Fi=Es=di=null,je=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return _&&s.locale!=="ko"?null:s.data;default:return null}}var kt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function It(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!kt[n.type]:s==="textarea"}function Gi(n,s,a,l){qi?Bi?Bi.push(l):Bi=[l]:qi=l,s=Ku(s,"onChange"),0<s.length&&(a=new wa("onChange","change",null,a,l),n.push({event:a,listeners:s}))}var qt=null,yi=null;function al(n){j_(n,0)}function lu(n){var s=ci(n);if(Xo(s))return n}function sy(n,s){if(n==="change")return s}var ry=!1;if(Xn){var Hd;if(Xn){var Gd="oninput"in document;if(!Gd){var ay=document.createElement("div");ay.setAttribute("oninput","return;"),Gd=typeof ay.oninput=="function"}Hd=Gd}else Hd=!1;ry=Hd&&(!document.documentMode||9<document.documentMode)}function oy(){qt&&(qt.detachEvent("onpropertychange",ly),yi=qt=null)}function ly(n){if(n.propertyName==="value"&&lu(yi)){var s=[];Gi(s,yi,n,Vn(n)),Qc(al,s)}}function lw(n,s,a){n==="focusin"?(oy(),qt=s,yi=a,qt.attachEvent("onpropertychange",ly)):n==="focusout"&&oy()}function cw(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return lu(yi)}function uw(n,s){if(n==="click")return lu(s)}function hw(n,s){if(n==="input"||n==="change")return lu(s)}function dw(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var Tn=typeof Object.is=="function"?Object.is:dw;function ol(n,s){if(Tn(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var a=Object.keys(n),l=Object.keys(s);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var h=a[l];if(!gr.call(s,h)||!Tn(n[h],s[h]))return!1}return!0}function cy(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function uy(n,s){var a=cy(n);n=0;for(var l;a;){if(a.nodeType===3){if(l=n+a.textContent.length,n<=s&&l>=s)return{node:a,offset:s-n};n=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=cy(a)}}function hy(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?hy(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function dy(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var s=Nr(n.document);s instanceof n.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)n=s.contentWindow;else break;s=Nr(n.document)}return s}function $d(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}var fw=Xn&&"documentMode"in document&&11>=document.documentMode,Ma=null,Kd=null,ll=null,Qd=!1;function fy(n,s,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Qd||Ma==null||Ma!==Nr(l)||(l=Ma,"selectionStart"in l&&$d(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),ll&&ol(ll,l)||(ll=l,l=Ku(Kd,"onSelect"),0<l.length&&(s=new wa("onSelect","select",null,s,a),n.push({event:s,listeners:l}),s.target=Ma)))}function Ur(n,s){var a={};return a[n.toLowerCase()]=s.toLowerCase(),a["Webkit"+n]="webkit"+s,a["Moz"+n]="moz"+s,a}var ka={animationend:Ur("Animation","AnimationEnd"),animationiteration:Ur("Animation","AnimationIteration"),animationstart:Ur("Animation","AnimationStart"),transitionrun:Ur("Transition","TransitionRun"),transitionstart:Ur("Transition","TransitionStart"),transitioncancel:Ur("Transition","TransitionCancel"),transitionend:Ur("Transition","TransitionEnd")},Yd={},my={};Xn&&(my=document.createElement("div").style,"AnimationEvent"in window||(delete ka.animationend.animation,delete ka.animationiteration.animation,delete ka.animationstart.animation),"TransitionEvent"in window||delete ka.transitionend.transition);function Lr(n){if(Yd[n])return Yd[n];if(!ka[n])return n;var s=ka[n],a;for(a in s)if(s.hasOwnProperty(a)&&a in my)return Yd[n]=s[a];return n}var py=Lr("animationend"),gy=Lr("animationiteration"),yy=Lr("animationstart"),mw=Lr("transitionrun"),pw=Lr("transitionstart"),gw=Lr("transitioncancel"),vy=Lr("transitionend"),_y=new Map,Xd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Xd.push("scrollEnd");function Zn(n,s){_y.set(n,s),Yn(s,[n])}var Ty=new WeakMap;function Un(n,s){if(typeof n=="object"&&n!==null){var a=Ty.get(n);return a!==void 0?a:(s={value:n,source:s,stack:ba(s)},Ty.set(n,s),s)}return{value:n,source:s,stack:ba(s)}}var Ln=[],Va=0,Zd=0;function cu(){for(var n=Va,s=Zd=Va=0;s<n;){var a=Ln[s];Ln[s++]=null;var l=Ln[s];Ln[s++]=null;var h=Ln[s];Ln[s++]=null;var f=Ln[s];if(Ln[s++]=null,l!==null&&h!==null){var E=l.pending;E===null?h.next=h:(h.next=E.next,E.next=h),l.pending=h}f!==0&&Ey(a,h,f)}}function uu(n,s,a,l){Ln[Va++]=n,Ln[Va++]=s,Ln[Va++]=a,Ln[Va++]=l,Zd|=l,n.lanes|=l,n=n.alternate,n!==null&&(n.lanes|=l)}function Wd(n,s,a,l){return uu(n,s,a,l),hu(n)}function Pa(n,s){return uu(n,null,null,s),hu(n)}function Ey(n,s,a){n.lanes|=a;var l=n.alternate;l!==null&&(l.lanes|=a);for(var h=!1,f=n.return;f!==null;)f.childLanes|=a,l=f.alternate,l!==null&&(l.childLanes|=a),f.tag===22&&(n=f.stateNode,n===null||n._visibility&1||(h=!0)),n=f,f=f.return;return n.tag===3?(f=n.stateNode,h&&s!==null&&(h=31-Xt(a),n=f.hiddenUpdates,l=n[h],l===null?n[h]=[s]:l.push(s),s.lane=a|536870912),f):null}function hu(n){if(50<Ml)throw Ml=0,rm=null,Error(r(185));for(var s=n.return;s!==null;)n=s,s=n.return;return n.tag===3?n.stateNode:null}var ja={};function yw(n,s,a,l){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function En(n,s,a,l){return new yw(n,s,a,l)}function Jd(n){return n=n.prototype,!(!n||!n.isReactComponent)}function $i(n,s){var a=n.alternate;return a===null?(a=En(n.tag,s,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=s,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&65011712,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,s=n.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a.refCleanup=n.refCleanup,a}function by(n,s){n.flags&=65011714;var a=n.alternate;return a===null?(n.childLanes=0,n.lanes=s,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=a.childLanes,n.lanes=a.lanes,n.child=a.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=a.memoizedProps,n.memoizedState=a.memoizedState,n.updateQueue=a.updateQueue,n.type=a.type,s=a.dependencies,n.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),n}function du(n,s,a,l,h,f){var E=0;if(l=n,typeof n=="function")Jd(n)&&(E=1);else if(typeof n=="string")E=_I(n,a,ye.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case N:return n=En(31,a,s,h),n.elementType=N,n.lanes=f,n;case O:return zr(a.children,h,f,s);case z:E=8,h|=24;break;case j:return n=En(12,a,s,h|2),n.elementType=j,n.lanes=f,n;case W:return n=En(13,a,s,h),n.elementType=W,n.lanes=f,n;case de:return n=En(19,a,s,h),n.elementType=de,n.lanes=f,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case K:case ie:E=10;break e;case ae:E=9;break e;case ce:E=11;break e;case V:E=14;break e;case I:E=16,l=null;break e}E=29,a=Error(r(130,n===null?"null":typeof n,"")),l=null}return s=En(E,a,s,h),s.elementType=n,s.type=l,s.lanes=f,s}function zr(n,s,a,l){return n=En(7,n,l,s),n.lanes=a,n}function ef(n,s,a){return n=En(6,n,null,s),n.lanes=a,n}function tf(n,s,a){return s=En(4,n.children!==null?n.children:[],n.key,s),s.lanes=a,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}var Ua=[],La=0,fu=null,mu=0,zn=[],qn=0,qr=null,Ki=1,Qi="";function Br(n,s){Ua[La++]=mu,Ua[La++]=fu,fu=n,mu=s}function Ay(n,s,a){zn[qn++]=Ki,zn[qn++]=Qi,zn[qn++]=qr,qr=n;var l=Ki;n=Qi;var h=32-Xt(l)-1;l&=~(1<<h),a+=1;var f=32-Xt(s)+h;if(30<f){var E=h-h%5;f=(l&(1<<E)-1).toString(32),l>>=E,h-=E,Ki=1<<32-Xt(s)+h|a<<h|l,Qi=f+n}else Ki=1<<f|a<<h|l,Qi=n}function nf(n){n.return!==null&&(Br(n,1),Ay(n,1,0))}function sf(n){for(;n===fu;)fu=Ua[--La],Ua[La]=null,mu=Ua[--La],Ua[La]=null;for(;n===qr;)qr=zn[--qn],zn[qn]=null,Qi=zn[--qn],zn[qn]=null,Ki=zn[--qn],zn[qn]=null}var ln=null,dt=null,$e=!1,Fr=null,vi=!1,rf=Error(r(519));function Hr(n){var s=Error(r(418,""));throw hl(Un(s,n)),rf}function Sy(n){var s=n.stateNode,a=n.type,l=n.memoizedProps;switch(s[St]=n,s[vt]=l,a){case"dialog":ke("cancel",s),ke("close",s);break;case"iframe":case"object":case"embed":ke("load",s);break;case"video":case"audio":for(a=0;a<Vl.length;a++)ke(Vl[a],s);break;case"source":ke("error",s);break;case"img":case"image":case"link":ke("error",s),ke("load",s);break;case"details":ke("toggle",s);break;case"input":ke("invalid",s),Rr(s,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),Aa(s);break;case"select":ke("invalid",s);break;case"textarea":ke("invalid",s),Cr(s,l.value,l.defaultValue,l.children),Aa(s)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||s.textContent===""+a||l.suppressHydrationWarning===!0||q_(s.textContent,a)?(l.popover!=null&&(ke("beforetoggle",s),ke("toggle",s)),l.onScroll!=null&&ke("scroll",s),l.onScrollEnd!=null&&ke("scrollend",s),l.onClick!=null&&(s.onclick=Qu),s=!0):s=!1,s||Hr(n)}function wy(n){for(ln=n.return;ln;)switch(ln.tag){case 5:case 13:vi=!1;return;case 27:case 3:vi=!0;return;default:ln=ln.return}}function cl(n){if(n!==ln)return!1;if(!$e)return wy(n),$e=!0,!1;var s=n.tag,a;if((a=s!==3&&s!==27)&&((a=s===5)&&(a=n.type,a=!(a!=="form"&&a!=="button")||Em(n.type,n.memoizedProps)),a=!a),a&&dt&&Hr(n),wy(n),s===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));e:{for(n=n.nextSibling,s=0;n;){if(n.nodeType===8)if(a=n.data,a==="/$"){if(s===0){dt=Jn(n.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++;n=n.nextSibling}dt=null}}else s===27?(s=dt,js(n.type)?(n=wm,wm=null,dt=n):dt=s):dt=ln?Jn(n.stateNode.nextSibling):null;return!0}function ul(){dt=ln=null,$e=!1}function Iy(){var n=Fr;return n!==null&&(pn===null?pn=n:pn.push.apply(pn,n),Fr=null),n}function hl(n){Fr===null?Fr=[n]:Fr.push(n)}var af=te(null),Gr=null,Yi=null;function bs(n,s,a){ne(af,s._currentValue),s._currentValue=a}function Xi(n){n._currentValue=af.current,oe(af)}function of(n,s,a){for(;n!==null;){var l=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,l!==null&&(l.childLanes|=s)):l!==null&&(l.childLanes&s)!==s&&(l.childLanes|=s),n===a)break;n=n.return}}function lf(n,s,a,l){var h=n.child;for(h!==null&&(h.return=n);h!==null;){var f=h.dependencies;if(f!==null){var E=h.child;f=f.firstContext;e:for(;f!==null;){var S=f;f=h;for(var R=0;R<s.length;R++)if(S.context===s[R]){f.lanes|=a,S=f.alternate,S!==null&&(S.lanes|=a),of(f.return,a,n),l||(E=null);break e}f=S.next}}else if(h.tag===18){if(E=h.return,E===null)throw Error(r(341));E.lanes|=a,f=E.alternate,f!==null&&(f.lanes|=a),of(E,a,n),E=null}else E=h.child;if(E!==null)E.return=h;else for(E=h;E!==null;){if(E===n){E=null;break}if(h=E.sibling,h!==null){h.return=E.return,E=h;break}E=E.return}h=E}}function dl(n,s,a,l){n=null;for(var h=s,f=!1;h!==null;){if(!f){if((h.flags&524288)!==0)f=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var E=h.alternate;if(E===null)throw Error(r(387));if(E=E.memoizedProps,E!==null){var S=h.type;Tn(h.pendingProps.value,E.value)||(n!==null?n.push(S):n=[S])}}else if(h===Ot.current){if(E=h.alternate,E===null)throw Error(r(387));E.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(n!==null?n.push(ql):n=[ql])}h=h.return}n!==null&&lf(s,n,a,l),s.flags|=262144}function pu(n){for(n=n.firstContext;n!==null;){if(!Tn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function $r(n){Gr=n,Yi=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Zt(n){return Ny(Gr,n)}function gu(n,s){return Gr===null&&$r(n),Ny(n,s)}function Ny(n,s){var a=s._currentValue;if(s={context:s,memoizedValue:a,next:null},Yi===null){if(n===null)throw Error(r(308));Yi=s,n.dependencies={lanes:0,firstContext:s},n.flags|=524288}else Yi=Yi.next=s;return a}var vw=typeof AbortController<"u"?AbortController:function(){var n=[],s=this.signal={aborted:!1,addEventListener:function(a,l){n.push(l)}};this.abort=function(){s.aborted=!0,n.forEach(function(a){return a()})}},_w=i.unstable_scheduleCallback,Tw=i.unstable_NormalPriority,Nt={$$typeof:ie,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function cf(){return{controller:new vw,data:new Map,refCount:0}}function fl(n){n.refCount--,n.refCount===0&&_w(Tw,function(){n.controller.abort()})}var ml=null,uf=0,za=0,qa=null;function Ew(n,s){if(ml===null){var a=ml=[];uf=0,za=dm(),qa={status:"pending",value:void 0,then:function(l){a.push(l)}}}return uf++,s.then(Ry,Ry),s}function Ry(){if(--uf===0&&ml!==null){qa!==null&&(qa.status="fulfilled");var n=ml;ml=null,za=0,qa=null;for(var s=0;s<n.length;s++)(0,n[s])()}}function bw(n,s){var a=[],l={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return n.then(function(){l.status="fulfilled",l.value=s;for(var h=0;h<a.length;h++)(0,a[h])(s)},function(h){for(l.status="rejected",l.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),l}var Cy=Q.S;Q.S=function(n,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&Ew(n,s),Cy!==null&&Cy(n,s)};var Kr=te(null);function hf(){var n=Kr.current;return n!==null?n:st.pooledCache}function yu(n,s){s===null?ne(Kr,Kr.current):ne(Kr,s.pool)}function xy(){var n=hf();return n===null?null:{parent:Nt._currentValue,pool:n}}var pl=Error(r(460)),Dy=Error(r(474)),vu=Error(r(542)),df={then:function(){}};function Oy(n){return n=n.status,n==="fulfilled"||n==="rejected"}function _u(){}function My(n,s,a){switch(a=n[a],a===void 0?n.push(s):a!==s&&(s.then(_u,_u),s=a),s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,Vy(n),n;default:if(typeof s.status=="string")s.then(_u,_u);else{if(n=st,n!==null&&100<n.shellSuspendCounter)throw Error(r(482));n=s,n.status="pending",n.then(function(l){if(s.status==="pending"){var h=s;h.status="fulfilled",h.value=l}},function(l){if(s.status==="pending"){var h=s;h.status="rejected",h.reason=l}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,Vy(n),n}throw gl=s,pl}}var gl=null;function ky(){if(gl===null)throw Error(r(459));var n=gl;return gl=null,n}function Vy(n){if(n===pl||n===vu)throw Error(r(483))}var As=!1;function ff(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function mf(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Ss(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function ws(n,s,a){var l=n.updateQueue;if(l===null)return null;if(l=l.shared,(Ye&2)!==0){var h=l.pending;return h===null?s.next=s:(s.next=h.next,h.next=s),l.pending=s,s=hu(n),Ey(n,null,a),s}return uu(n,l,s,a),hu(n)}function yl(n,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194048)!==0)){var l=s.lanes;l&=n.pendingLanes,a|=l,s.lanes=a,Go(n,a)}}function pf(n,s){var a=n.updateQueue,l=n.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var h=null,f=null;if(a=a.firstBaseUpdate,a!==null){do{var E={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};f===null?h=f=E:f=f.next=E,a=a.next}while(a!==null);f===null?h=f=s:f=f.next=s}else h=f=s;a={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:f,shared:l.shared,callbacks:l.callbacks},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=s:n.next=s,a.lastBaseUpdate=s}var gf=!1;function vl(){if(gf){var n=qa;if(n!==null)throw n}}function _l(n,s,a,l){gf=!1;var h=n.updateQueue;As=!1;var f=h.firstBaseUpdate,E=h.lastBaseUpdate,S=h.shared.pending;if(S!==null){h.shared.pending=null;var R=S,F=R.next;R.next=null,E===null?f=F:E.next=F,E=R;var Y=n.alternate;Y!==null&&(Y=Y.updateQueue,S=Y.lastBaseUpdate,S!==E&&(S===null?Y.firstBaseUpdate=F:S.next=F,Y.lastBaseUpdate=R))}if(f!==null){var J=h.baseState;E=0,Y=F=R=null,S=f;do{var H=S.lane&-536870913,G=H!==S.lane;if(G?(Le&H)===H:(l&H)===H){H!==0&&H===za&&(gf=!0),Y!==null&&(Y=Y.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});e:{var be=n,_e=S;H=s;var et=a;switch(_e.tag){case 1:if(be=_e.payload,typeof be=="function"){J=be.call(et,J,H);break e}J=be;break e;case 3:be.flags=be.flags&-65537|128;case 0:if(be=_e.payload,H=typeof be=="function"?be.call(et,J,H):be,H==null)break e;J=T({},J,H);break e;case 2:As=!0}}H=S.callback,H!==null&&(n.flags|=64,G&&(n.flags|=8192),G=h.callbacks,G===null?h.callbacks=[H]:G.push(H))}else G={lane:H,tag:S.tag,payload:S.payload,callback:S.callback,next:null},Y===null?(F=Y=G,R=J):Y=Y.next=G,E|=H;if(S=S.next,S===null){if(S=h.shared.pending,S===null)break;G=S,S=G.next,G.next=null,h.lastBaseUpdate=G,h.shared.pending=null}}while(!0);Y===null&&(R=J),h.baseState=R,h.firstBaseUpdate=F,h.lastBaseUpdate=Y,f===null&&(h.shared.lanes=0),Ms|=E,n.lanes=E,n.memoizedState=J}}function Py(n,s){if(typeof n!="function")throw Error(r(191,n));n.call(s)}function jy(n,s){var a=n.callbacks;if(a!==null)for(n.callbacks=null,n=0;n<a.length;n++)Py(a[n],s)}var Ba=te(null),Tu=te(0);function Uy(n,s){n=is,ne(Tu,n),ne(Ba,s),is=n|s.baseLanes}function yf(){ne(Tu,is),ne(Ba,Ba.current)}function vf(){is=Tu.current,oe(Ba),oe(Tu)}var Is=0,Re=null,We=null,Tt=null,Eu=!1,Fa=!1,Qr=!1,bu=0,Tl=0,Ha=null,Aw=0;function pt(){throw Error(r(321))}function _f(n,s){if(s===null)return!1;for(var a=0;a<s.length&&a<n.length;a++)if(!Tn(n[a],s[a]))return!1;return!0}function Tf(n,s,a,l,h,f){return Is=f,Re=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Q.H=n===null||n.memoizedState===null?Ev:bv,Qr=!1,f=a(l,h),Qr=!1,Fa&&(f=zy(s,a,l,h)),Ly(n),f}function Ly(n){Q.H=Ru;var s=We!==null&&We.next!==null;if(Is=0,Tt=We=Re=null,Eu=!1,Tl=0,Ha=null,s)throw Error(r(300));n===null||Vt||(n=n.dependencies,n!==null&&pu(n)&&(Vt=!0))}function zy(n,s,a,l){Re=n;var h=0;do{if(Fa&&(Ha=null),Tl=0,Fa=!1,25<=h)throw Error(r(301));if(h+=1,Tt=We=null,n.updateQueue!=null){var f=n.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}Q.H=xw,f=s(a,l)}while(Fa);return f}function Sw(){var n=Q.H,s=n.useState()[0];return s=typeof s.then=="function"?El(s):s,n=n.useState()[0],(We!==null?We.memoizedState:null)!==n&&(Re.flags|=1024),s}function Ef(){var n=bu!==0;return bu=0,n}function bf(n,s,a){s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~a}function Af(n){if(Eu){for(n=n.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Eu=!1}Is=0,Tt=We=Re=null,Fa=!1,Tl=bu=0,Ha=null}function fn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Tt===null?Re.memoizedState=Tt=n:Tt=Tt.next=n,Tt}function Et(){if(We===null){var n=Re.alternate;n=n!==null?n.memoizedState:null}else n=We.next;var s=Tt===null?Re.memoizedState:Tt.next;if(s!==null)Tt=s,We=n;else{if(n===null)throw Re.alternate===null?Error(r(467)):Error(r(310));We=n,n={memoizedState:We.memoizedState,baseState:We.baseState,baseQueue:We.baseQueue,queue:We.queue,next:null},Tt===null?Re.memoizedState=Tt=n:Tt=Tt.next=n}return Tt}function Sf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function El(n){var s=Tl;return Tl+=1,Ha===null&&(Ha=[]),n=My(Ha,n,s),s=Re,(Tt===null?s.memoizedState:Tt.next)===null&&(s=s.alternate,Q.H=s===null||s.memoizedState===null?Ev:bv),n}function Au(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return El(n);if(n.$$typeof===ie)return Zt(n)}throw Error(r(438,String(n)))}function wf(n){var s=null,a=Re.updateQueue;if(a!==null&&(s=a.memoCache),s==null){var l=Re.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(s={data:l.data.map(function(h){return h.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),a===null&&(a=Sf(),Re.updateQueue=a),a.memoCache=s,a=s.data[s.index],a===void 0)for(a=s.data[s.index]=Array(n),l=0;l<n;l++)a[l]=x;return s.index++,a}function Zi(n,s){return typeof s=="function"?s(n):s}function Su(n){var s=Et();return If(s,We,n)}function If(n,s,a){var l=n.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=a;var h=n.baseQueue,f=l.pending;if(f!==null){if(h!==null){var E=h.next;h.next=f.next,f.next=E}s.baseQueue=h=f,l.pending=null}if(f=n.baseState,h===null)n.memoizedState=f;else{s=h.next;var S=E=null,R=null,F=s,Y=!1;do{var J=F.lane&-536870913;if(J!==F.lane?(Le&J)===J:(Is&J)===J){var H=F.revertLane;if(H===0)R!==null&&(R=R.next={lane:0,revertLane:0,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),J===za&&(Y=!0);else if((Is&H)===H){F=F.next,H===za&&(Y=!0);continue}else J={lane:0,revertLane:F.revertLane,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},R===null?(S=R=J,E=f):R=R.next=J,Re.lanes|=H,Ms|=H;J=F.action,Qr&&a(f,J),f=F.hasEagerState?F.eagerState:a(f,J)}else H={lane:J,revertLane:F.revertLane,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},R===null?(S=R=H,E=f):R=R.next=H,Re.lanes|=J,Ms|=J;F=F.next}while(F!==null&&F!==s);if(R===null?E=f:R.next=S,!Tn(f,n.memoizedState)&&(Vt=!0,Y&&(a=qa,a!==null)))throw a;n.memoizedState=f,n.baseState=E,n.baseQueue=R,l.lastRenderedState=f}return h===null&&(l.lanes=0),[n.memoizedState,l.dispatch]}function Nf(n){var s=Et(),a=s.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=n;var l=a.dispatch,h=a.pending,f=s.memoizedState;if(h!==null){a.pending=null;var E=h=h.next;do f=n(f,E.action),E=E.next;while(E!==h);Tn(f,s.memoizedState)||(Vt=!0),s.memoizedState=f,s.baseQueue===null&&(s.baseState=f),a.lastRenderedState=f}return[f,l]}function qy(n,s,a){var l=Re,h=Et(),f=$e;if(f){if(a===void 0)throw Error(r(407));a=a()}else a=s();var E=!Tn((We||h).memoizedState,a);E&&(h.memoizedState=a,Vt=!0),h=h.queue;var S=Hy.bind(null,l,h,n);if(bl(2048,8,S,[n]),h.getSnapshot!==s||E||Tt!==null&&Tt.memoizedState.tag&1){if(l.flags|=2048,Ga(9,wu(),Fy.bind(null,l,h,a,s),null),st===null)throw Error(r(349));f||(Is&124)!==0||By(l,s,a)}return a}function By(n,s,a){n.flags|=16384,n={getSnapshot:s,value:a},s=Re.updateQueue,s===null?(s=Sf(),Re.updateQueue=s,s.stores=[n]):(a=s.stores,a===null?s.stores=[n]:a.push(n))}function Fy(n,s,a,l){s.value=a,s.getSnapshot=l,Gy(s)&&$y(n)}function Hy(n,s,a){return a(function(){Gy(s)&&$y(n)})}function Gy(n){var s=n.getSnapshot;n=n.value;try{var a=s();return!Tn(n,a)}catch{return!0}}function $y(n){var s=Pa(n,2);s!==null&&In(s,n,2)}function Rf(n){var s=fn();if(typeof n=="function"){var a=n;if(n=a(),Qr){vn(!0);try{a()}finally{vn(!1)}}}return s.memoizedState=s.baseState=n,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zi,lastRenderedState:n},s}function Ky(n,s,a,l){return n.baseState=a,If(n,We,typeof l=="function"?l:Zi)}function ww(n,s,a,l,h){if(Nu(n))throw Error(r(485));if(n=s.action,n!==null){var f={payload:h,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){f.listeners.push(E)}};Q.T!==null?a(!0):f.isTransition=!1,l(f),a=s.pending,a===null?(f.next=s.pending=f,Qy(s,f)):(f.next=a.next,s.pending=a.next=f)}}function Qy(n,s){var a=s.action,l=s.payload,h=n.state;if(s.isTransition){var f=Q.T,E={};Q.T=E;try{var S=a(h,l),R=Q.S;R!==null&&R(E,S),Yy(n,s,S)}catch(F){Cf(n,s,F)}finally{Q.T=f}}else try{f=a(h,l),Yy(n,s,f)}catch(F){Cf(n,s,F)}}function Yy(n,s,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){Xy(n,s,l)},function(l){return Cf(n,s,l)}):Xy(n,s,a)}function Xy(n,s,a){s.status="fulfilled",s.value=a,Zy(s),n.state=a,s=n.pending,s!==null&&(a=s.next,a===s?n.pending=null:(a=a.next,s.next=a,Qy(n,a)))}function Cf(n,s,a){var l=n.pending;if(n.pending=null,l!==null){l=l.next;do s.status="rejected",s.reason=a,Zy(s),s=s.next;while(s!==l)}n.action=null}function Zy(n){n=n.listeners;for(var s=0;s<n.length;s++)(0,n[s])()}function Wy(n,s){return s}function Jy(n,s){if($e){var a=st.formState;if(a!==null){e:{var l=Re;if($e){if(dt){t:{for(var h=dt,f=vi;h.nodeType!==8;){if(!f){h=null;break t}if(h=Jn(h.nextSibling),h===null){h=null;break t}}f=h.data,h=f==="F!"||f==="F"?h:null}if(h){dt=Jn(h.nextSibling),l=h.data==="F!";break e}}Hr(l)}l=!1}l&&(s=a[0])}}return a=fn(),a.memoizedState=a.baseState=s,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wy,lastRenderedState:s},a.queue=l,a=vv.bind(null,Re,l),l.dispatch=a,l=Rf(!1),f=kf.bind(null,Re,!1,l.queue),l=fn(),h={state:s,dispatch:null,action:n,pending:null},l.queue=h,a=ww.bind(null,Re,h,f,a),h.dispatch=a,l.memoizedState=n,[s,a,!1]}function ev(n){var s=Et();return tv(s,We,n)}function tv(n,s,a){if(s=If(n,s,Wy)[0],n=Su(Zi)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var l=El(s)}catch(E){throw E===pl?vu:E}else l=s;s=Et();var h=s.queue,f=h.dispatch;return a!==s.memoizedState&&(Re.flags|=2048,Ga(9,wu(),Iw.bind(null,h,a),null)),[l,f,n]}function Iw(n,s){n.action=s}function nv(n){var s=Et(),a=We;if(a!==null)return tv(s,a,n);Et(),s=s.memoizedState,a=Et();var l=a.queue.dispatch;return a.memoizedState=n,[s,l,!1]}function Ga(n,s,a,l){return n={tag:n,create:a,deps:l,inst:s,next:null},s=Re.updateQueue,s===null&&(s=Sf(),Re.updateQueue=s),a=s.lastEffect,a===null?s.lastEffect=n.next=n:(l=a.next,a.next=n,n.next=l,s.lastEffect=n),n}function wu(){return{destroy:void 0,resource:void 0}}function iv(){return Et().memoizedState}function Iu(n,s,a,l){var h=fn();l=l===void 0?null:l,Re.flags|=n,h.memoizedState=Ga(1|s,wu(),a,l)}function bl(n,s,a,l){var h=Et();l=l===void 0?null:l;var f=h.memoizedState.inst;We!==null&&l!==null&&_f(l,We.memoizedState.deps)?h.memoizedState=Ga(s,f,a,l):(Re.flags|=n,h.memoizedState=Ga(1|s,f,a,l))}function sv(n,s){Iu(8390656,8,n,s)}function rv(n,s){bl(2048,8,n,s)}function av(n,s){return bl(4,2,n,s)}function ov(n,s){return bl(4,4,n,s)}function lv(n,s){if(typeof s=="function"){n=n();var a=s(n);return function(){typeof a=="function"?a():s(null)}}if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function cv(n,s,a){a=a!=null?a.concat([n]):null,bl(4,4,lv.bind(null,s,n),a)}function xf(){}function uv(n,s){var a=Et();s=s===void 0?null:s;var l=a.memoizedState;return s!==null&&_f(s,l[1])?l[0]:(a.memoizedState=[n,s],n)}function hv(n,s){var a=Et();s=s===void 0?null:s;var l=a.memoizedState;if(s!==null&&_f(s,l[1]))return l[0];if(l=n(),Qr){vn(!0);try{n()}finally{vn(!1)}}return a.memoizedState=[l,s],l}function Df(n,s,a){return a===void 0||(Is&1073741824)!==0?n.memoizedState=s:(n.memoizedState=a,n=m_(),Re.lanes|=n,Ms|=n,a)}function dv(n,s,a,l){return Tn(a,s)?a:Ba.current!==null?(n=Df(n,a,l),Tn(n,s)||(Vt=!0),n):(Is&42)===0?(Vt=!0,n.memoizedState=a):(n=m_(),Re.lanes|=n,Ms|=n,s)}function fv(n,s,a,l,h){var f=re.p;re.p=f!==0&&8>f?f:8;var E=Q.T,S={};Q.T=S,kf(n,!1,s,a);try{var R=h(),F=Q.S;if(F!==null&&F(S,R),R!==null&&typeof R=="object"&&typeof R.then=="function"){var Y=bw(R,l);Al(n,s,Y,wn(n))}else Al(n,s,l,wn(n))}catch(J){Al(n,s,{then:function(){},status:"rejected",reason:J},wn())}finally{re.p=f,Q.T=E}}function Nw(){}function Of(n,s,a,l){if(n.tag!==5)throw Error(r(476));var h=mv(n).queue;fv(n,h,s,me,a===null?Nw:function(){return pv(n),a(l)})}function mv(n){var s=n.memoizedState;if(s!==null)return s;s={memoizedState:me,baseState:me,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zi,lastRenderedState:me},next:null};var a={};return s.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zi,lastRenderedState:a},next:null},n.memoizedState=s,n=n.alternate,n!==null&&(n.memoizedState=s),s}function pv(n){var s=mv(n).next.queue;Al(n,s,{},wn())}function Mf(){return Zt(ql)}function gv(){return Et().memoizedState}function yv(){return Et().memoizedState}function Rw(n){for(var s=n.return;s!==null;){switch(s.tag){case 24:case 3:var a=wn();n=Ss(a);var l=ws(s,n,a);l!==null&&(In(l,s,a),yl(l,s,a)),s={cache:cf()},n.payload=s;return}s=s.return}}function Cw(n,s,a){var l=wn();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},Nu(n)?_v(s,a):(a=Wd(n,s,a,l),a!==null&&(In(a,n,l),Tv(a,s,l)))}function vv(n,s,a){var l=wn();Al(n,s,a,l)}function Al(n,s,a,l){var h={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(Nu(n))_v(s,h);else{var f=n.alternate;if(n.lanes===0&&(f===null||f.lanes===0)&&(f=s.lastRenderedReducer,f!==null))try{var E=s.lastRenderedState,S=f(E,a);if(h.hasEagerState=!0,h.eagerState=S,Tn(S,E))return uu(n,s,h,0),st===null&&cu(),!1}catch{}finally{}if(a=Wd(n,s,h,l),a!==null)return In(a,n,l),Tv(a,s,l),!0}return!1}function kf(n,s,a,l){if(l={lane:2,revertLane:dm(),action:l,hasEagerState:!1,eagerState:null,next:null},Nu(n)){if(s)throw Error(r(479))}else s=Wd(n,a,l,2),s!==null&&In(s,n,2)}function Nu(n){var s=n.alternate;return n===Re||s!==null&&s===Re}function _v(n,s){Fa=Eu=!0;var a=n.pending;a===null?s.next=s:(s.next=a.next,a.next=s),n.pending=s}function Tv(n,s,a){if((a&4194048)!==0){var l=s.lanes;l&=n.pendingLanes,a|=l,s.lanes=a,Go(n,a)}}var Ru={readContext:Zt,use:Au,useCallback:pt,useContext:pt,useEffect:pt,useImperativeHandle:pt,useLayoutEffect:pt,useInsertionEffect:pt,useMemo:pt,useReducer:pt,useRef:pt,useState:pt,useDebugValue:pt,useDeferredValue:pt,useTransition:pt,useSyncExternalStore:pt,useId:pt,useHostTransitionStatus:pt,useFormState:pt,useActionState:pt,useOptimistic:pt,useMemoCache:pt,useCacheRefresh:pt},Ev={readContext:Zt,use:Au,useCallback:function(n,s){return fn().memoizedState=[n,s===void 0?null:s],n},useContext:Zt,useEffect:sv,useImperativeHandle:function(n,s,a){a=a!=null?a.concat([n]):null,Iu(4194308,4,lv.bind(null,s,n),a)},useLayoutEffect:function(n,s){return Iu(4194308,4,n,s)},useInsertionEffect:function(n,s){Iu(4,2,n,s)},useMemo:function(n,s){var a=fn();s=s===void 0?null:s;var l=n();if(Qr){vn(!0);try{n()}finally{vn(!1)}}return a.memoizedState=[l,s],l},useReducer:function(n,s,a){var l=fn();if(a!==void 0){var h=a(s);if(Qr){vn(!0);try{a(s)}finally{vn(!1)}}}else h=s;return l.memoizedState=l.baseState=h,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:h},l.queue=n,n=n.dispatch=Cw.bind(null,Re,n),[l.memoizedState,n]},useRef:function(n){var s=fn();return n={current:n},s.memoizedState=n},useState:function(n){n=Rf(n);var s=n.queue,a=vv.bind(null,Re,s);return s.dispatch=a,[n.memoizedState,a]},useDebugValue:xf,useDeferredValue:function(n,s){var a=fn();return Df(a,n,s)},useTransition:function(){var n=Rf(!1);return n=fv.bind(null,Re,n.queue,!0,!1),fn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,s,a){var l=Re,h=fn();if($e){if(a===void 0)throw Error(r(407));a=a()}else{if(a=s(),st===null)throw Error(r(349));(Le&124)!==0||By(l,s,a)}h.memoizedState=a;var f={value:a,getSnapshot:s};return h.queue=f,sv(Hy.bind(null,l,f,n),[n]),l.flags|=2048,Ga(9,wu(),Fy.bind(null,l,f,a,s),null),a},useId:function(){var n=fn(),s=st.identifierPrefix;if($e){var a=Qi,l=Ki;a=(l&~(1<<32-Xt(l)-1)).toString(32)+a,s="«"+s+"R"+a,a=bu++,0<a&&(s+="H"+a.toString(32)),s+="»"}else a=Aw++,s="«"+s+"r"+a.toString(32)+"»";return n.memoizedState=s},useHostTransitionStatus:Mf,useFormState:Jy,useActionState:Jy,useOptimistic:function(n){var s=fn();s.memoizedState=s.baseState=n;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=a,s=kf.bind(null,Re,!0,a),a.dispatch=s,[n,s]},useMemoCache:wf,useCacheRefresh:function(){return fn().memoizedState=Rw.bind(null,Re)}},bv={readContext:Zt,use:Au,useCallback:uv,useContext:Zt,useEffect:rv,useImperativeHandle:cv,useInsertionEffect:av,useLayoutEffect:ov,useMemo:hv,useReducer:Su,useRef:iv,useState:function(){return Su(Zi)},useDebugValue:xf,useDeferredValue:function(n,s){var a=Et();return dv(a,We.memoizedState,n,s)},useTransition:function(){var n=Su(Zi)[0],s=Et().memoizedState;return[typeof n=="boolean"?n:El(n),s]},useSyncExternalStore:qy,useId:gv,useHostTransitionStatus:Mf,useFormState:ev,useActionState:ev,useOptimistic:function(n,s){var a=Et();return Ky(a,We,n,s)},useMemoCache:wf,useCacheRefresh:yv},xw={readContext:Zt,use:Au,useCallback:uv,useContext:Zt,useEffect:rv,useImperativeHandle:cv,useInsertionEffect:av,useLayoutEffect:ov,useMemo:hv,useReducer:Nf,useRef:iv,useState:function(){return Nf(Zi)},useDebugValue:xf,useDeferredValue:function(n,s){var a=Et();return We===null?Df(a,n,s):dv(a,We.memoizedState,n,s)},useTransition:function(){var n=Nf(Zi)[0],s=Et().memoizedState;return[typeof n=="boolean"?n:El(n),s]},useSyncExternalStore:qy,useId:gv,useHostTransitionStatus:Mf,useFormState:nv,useActionState:nv,useOptimistic:function(n,s){var a=Et();return We!==null?Ky(a,We,n,s):(a.baseState=n,[n,a.queue.dispatch])},useMemoCache:wf,useCacheRefresh:yv},$a=null,Sl=0;function Cu(n){var s=Sl;return Sl+=1,$a===null&&($a=[]),My($a,n,s)}function wl(n,s){s=s.props.ref,n.ref=s!==void 0?s:null}function xu(n,s){throw s.$$typeof===A?Error(r(525)):(n=Object.prototype.toString.call(s),Error(r(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n)))}function Av(n){var s=n._init;return s(n._payload)}function Sv(n){function s(L,M){if(n){var B=L.deletions;B===null?(L.deletions=[M],L.flags|=16):B.push(M)}}function a(L,M){if(!n)return null;for(;M!==null;)s(L,M),M=M.sibling;return null}function l(L){for(var M=new Map;L!==null;)L.key!==null?M.set(L.key,L):M.set(L.index,L),L=L.sibling;return M}function h(L,M){return L=$i(L,M),L.index=0,L.sibling=null,L}function f(L,M,B){return L.index=B,n?(B=L.alternate,B!==null?(B=B.index,B<M?(L.flags|=67108866,M):B):(L.flags|=67108866,M)):(L.flags|=1048576,M)}function E(L){return n&&L.alternate===null&&(L.flags|=67108866),L}function S(L,M,B,X){return M===null||M.tag!==6?(M=ef(B,L.mode,X),M.return=L,M):(M=h(M,B),M.return=L,M)}function R(L,M,B,X){var he=B.type;return he===O?Y(L,M,B.props.children,X,B.key):M!==null&&(M.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===I&&Av(he)===M.type)?(M=h(M,B.props),wl(M,B),M.return=L,M):(M=du(B.type,B.key,B.props,null,L.mode,X),wl(M,B),M.return=L,M)}function F(L,M,B,X){return M===null||M.tag!==4||M.stateNode.containerInfo!==B.containerInfo||M.stateNode.implementation!==B.implementation?(M=tf(B,L.mode,X),M.return=L,M):(M=h(M,B.children||[]),M.return=L,M)}function Y(L,M,B,X,he){return M===null||M.tag!==7?(M=zr(B,L.mode,X,he),M.return=L,M):(M=h(M,B),M.return=L,M)}function J(L,M,B){if(typeof M=="string"&&M!==""||typeof M=="number"||typeof M=="bigint")return M=ef(""+M,L.mode,B),M.return=L,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case b:return B=du(M.type,M.key,M.props,null,L.mode,B),wl(B,M),B.return=L,B;case k:return M=tf(M,L.mode,B),M.return=L,M;case I:var X=M._init;return M=X(M._payload),J(L,M,B)}if(Oe(M)||U(M))return M=zr(M,L.mode,B,null),M.return=L,M;if(typeof M.then=="function")return J(L,Cu(M),B);if(M.$$typeof===ie)return J(L,gu(L,M),B);xu(L,M)}return null}function H(L,M,B,X){var he=M!==null?M.key:null;if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return he!==null?null:S(L,M,""+B,X);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case b:return B.key===he?R(L,M,B,X):null;case k:return B.key===he?F(L,M,B,X):null;case I:return he=B._init,B=he(B._payload),H(L,M,B,X)}if(Oe(B)||U(B))return he!==null?null:Y(L,M,B,X,null);if(typeof B.then=="function")return H(L,M,Cu(B),X);if(B.$$typeof===ie)return H(L,M,gu(L,B),X);xu(L,B)}return null}function G(L,M,B,X,he){if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return L=L.get(B)||null,S(M,L,""+X,he);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case b:return L=L.get(X.key===null?B:X.key)||null,R(M,L,X,he);case k:return L=L.get(X.key===null?B:X.key)||null,F(M,L,X,he);case I:var De=X._init;return X=De(X._payload),G(L,M,B,X,he)}if(Oe(X)||U(X))return L=L.get(B)||null,Y(M,L,X,he,null);if(typeof X.then=="function")return G(L,M,B,Cu(X),he);if(X.$$typeof===ie)return G(L,M,B,gu(M,X),he);xu(M,X)}return null}function be(L,M,B,X){for(var he=null,De=null,fe=M,Te=M=0,jt=null;fe!==null&&Te<B.length;Te++){fe.index>Te?(jt=fe,fe=null):jt=fe.sibling;var He=H(L,fe,B[Te],X);if(He===null){fe===null&&(fe=jt);break}n&&fe&&He.alternate===null&&s(L,fe),M=f(He,M,Te),De===null?he=He:De.sibling=He,De=He,fe=jt}if(Te===B.length)return a(L,fe),$e&&Br(L,Te),he;if(fe===null){for(;Te<B.length;Te++)fe=J(L,B[Te],X),fe!==null&&(M=f(fe,M,Te),De===null?he=fe:De.sibling=fe,De=fe);return $e&&Br(L,Te),he}for(fe=l(fe);Te<B.length;Te++)jt=G(fe,L,Te,B[Te],X),jt!==null&&(n&&jt.alternate!==null&&fe.delete(jt.key===null?Te:jt.key),M=f(jt,M,Te),De===null?he=jt:De.sibling=jt,De=jt);return n&&fe.forEach(function(Bs){return s(L,Bs)}),$e&&Br(L,Te),he}function _e(L,M,B,X){if(B==null)throw Error(r(151));for(var he=null,De=null,fe=M,Te=M=0,jt=null,He=B.next();fe!==null&&!He.done;Te++,He=B.next()){fe.index>Te?(jt=fe,fe=null):jt=fe.sibling;var Bs=H(L,fe,He.value,X);if(Bs===null){fe===null&&(fe=jt);break}n&&fe&&Bs.alternate===null&&s(L,fe),M=f(Bs,M,Te),De===null?he=Bs:De.sibling=Bs,De=Bs,fe=jt}if(He.done)return a(L,fe),$e&&Br(L,Te),he;if(fe===null){for(;!He.done;Te++,He=B.next())He=J(L,He.value,X),He!==null&&(M=f(He,M,Te),De===null?he=He:De.sibling=He,De=He);return $e&&Br(L,Te),he}for(fe=l(fe);!He.done;Te++,He=B.next())He=G(fe,L,Te,He.value,X),He!==null&&(n&&He.alternate!==null&&fe.delete(He.key===null?Te:He.key),M=f(He,M,Te),De===null?he=He:De.sibling=He,De=He);return n&&fe.forEach(function(DI){return s(L,DI)}),$e&&Br(L,Te),he}function et(L,M,B,X){if(typeof B=="object"&&B!==null&&B.type===O&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case b:e:{for(var he=B.key;M!==null;){if(M.key===he){if(he=B.type,he===O){if(M.tag===7){a(L,M.sibling),X=h(M,B.props.children),X.return=L,L=X;break e}}else if(M.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===I&&Av(he)===M.type){a(L,M.sibling),X=h(M,B.props),wl(X,B),X.return=L,L=X;break e}a(L,M);break}else s(L,M);M=M.sibling}B.type===O?(X=zr(B.props.children,L.mode,X,B.key),X.return=L,L=X):(X=du(B.type,B.key,B.props,null,L.mode,X),wl(X,B),X.return=L,L=X)}return E(L);case k:e:{for(he=B.key;M!==null;){if(M.key===he)if(M.tag===4&&M.stateNode.containerInfo===B.containerInfo&&M.stateNode.implementation===B.implementation){a(L,M.sibling),X=h(M,B.children||[]),X.return=L,L=X;break e}else{a(L,M);break}else s(L,M);M=M.sibling}X=tf(B,L.mode,X),X.return=L,L=X}return E(L);case I:return he=B._init,B=he(B._payload),et(L,M,B,X)}if(Oe(B))return be(L,M,B,X);if(U(B)){if(he=U(B),typeof he!="function")throw Error(r(150));return B=he.call(B),_e(L,M,B,X)}if(typeof B.then=="function")return et(L,M,Cu(B),X);if(B.$$typeof===ie)return et(L,M,gu(L,B),X);xu(L,B)}return typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint"?(B=""+B,M!==null&&M.tag===6?(a(L,M.sibling),X=h(M,B),X.return=L,L=X):(a(L,M),X=ef(B,L.mode,X),X.return=L,L=X),E(L)):a(L,M)}return function(L,M,B,X){try{Sl=0;var he=et(L,M,B,X);return $a=null,he}catch(fe){if(fe===pl||fe===vu)throw fe;var De=En(29,fe,null,L.mode);return De.lanes=X,De.return=L,De}finally{}}}var Ka=Sv(!0),wv=Sv(!1),Bn=te(null),_i=null;function Ns(n){var s=n.alternate;ne(Rt,Rt.current&1),ne(Bn,n),_i===null&&(s===null||Ba.current!==null||s.memoizedState!==null)&&(_i=n)}function Iv(n){if(n.tag===22){if(ne(Rt,Rt.current),ne(Bn,n),_i===null){var s=n.alternate;s!==null&&s.memoizedState!==null&&(_i=n)}}else Rs()}function Rs(){ne(Rt,Rt.current),ne(Bn,Bn.current)}function Wi(n){oe(Bn),_i===n&&(_i=null),oe(Rt)}var Rt=te(0);function Du(n){for(var s=n;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||Sm(a)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function Vf(n,s,a,l){s=n.memoizedState,a=a(l,s),a=a==null?s:T({},s,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var Pf={enqueueSetState:function(n,s,a){n=n._reactInternals;var l=wn(),h=Ss(l);h.payload=s,a!=null&&(h.callback=a),s=ws(n,h,l),s!==null&&(In(s,n,l),yl(s,n,l))},enqueueReplaceState:function(n,s,a){n=n._reactInternals;var l=wn(),h=Ss(l);h.tag=1,h.payload=s,a!=null&&(h.callback=a),s=ws(n,h,l),s!==null&&(In(s,n,l),yl(s,n,l))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var a=wn(),l=Ss(a);l.tag=2,s!=null&&(l.callback=s),s=ws(n,l,a),s!==null&&(In(s,n,a),yl(s,n,a))}};function Nv(n,s,a,l,h,f,E){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(l,f,E):s.prototype&&s.prototype.isPureReactComponent?!ol(a,l)||!ol(h,f):!0}function Rv(n,s,a,l){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,l),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,l),s.state!==n&&Pf.enqueueReplaceState(s,s.state,null)}function Yr(n,s){var a=s;if("ref"in s){a={};for(var l in s)l!=="ref"&&(a[l]=s[l])}if(n=n.defaultProps){a===s&&(a=T({},a));for(var h in n)a[h]===void 0&&(a[h]=n[h])}return a}var Ou=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function Cv(n){Ou(n)}function xv(n){console.error(n)}function Dv(n){Ou(n)}function Mu(n,s){try{var a=n.onUncaughtError;a(s.value,{componentStack:s.stack})}catch(l){setTimeout(function(){throw l})}}function Ov(n,s,a){try{var l=n.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function jf(n,s,a){return a=Ss(a),a.tag=3,a.payload={element:null},a.callback=function(){Mu(n,s)},a}function Mv(n){return n=Ss(n),n.tag=3,n}function kv(n,s,a,l){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var f=l.value;n.payload=function(){return h(f)},n.callback=function(){Ov(s,a,l)}}var E=a.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(n.callback=function(){Ov(s,a,l),typeof h!="function"&&(ks===null?ks=new Set([this]):ks.add(this));var S=l.stack;this.componentDidCatch(l.value,{componentStack:S!==null?S:""})})}function Dw(n,s,a,l,h){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(s=a.alternate,s!==null&&dl(s,a,h,!0),a=Bn.current,a!==null){switch(a.tag){case 13:return _i===null?om():a.alternate===null&&ft===0&&(ft=3),a.flags&=-257,a.flags|=65536,a.lanes=h,l===df?a.flags|=16384:(s=a.updateQueue,s===null?a.updateQueue=new Set([l]):s.add(l),cm(n,l,h)),!1;case 22:return a.flags|=65536,l===df?a.flags|=16384:(s=a.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=s):(a=s.retryQueue,a===null?s.retryQueue=new Set([l]):a.add(l)),cm(n,l,h)),!1}throw Error(r(435,a.tag))}return cm(n,l,h),om(),!1}if($e)return s=Bn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=h,l!==rf&&(n=Error(r(422),{cause:l}),hl(Un(n,a)))):(l!==rf&&(s=Error(r(423),{cause:l}),hl(Un(s,a))),n=n.current.alternate,n.flags|=65536,h&=-h,n.lanes|=h,l=Un(l,a),h=jf(n.stateNode,l,h),pf(n,h),ft!==4&&(ft=2)),!1;var f=Error(r(520),{cause:l});if(f=Un(f,a),Ol===null?Ol=[f]:Ol.push(f),ft!==4&&(ft=2),s===null)return!0;l=Un(l,a),a=s;do{switch(a.tag){case 3:return a.flags|=65536,n=h&-h,a.lanes|=n,n=jf(a.stateNode,l,n),pf(a,n),!1;case 1:if(s=a.type,f=a.stateNode,(a.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(ks===null||!ks.has(f))))return a.flags|=65536,h&=-h,a.lanes|=h,h=Mv(h),kv(h,n,a,l),pf(a,h),!1}a=a.return}while(a!==null);return!1}var Vv=Error(r(461)),Vt=!1;function Bt(n,s,a,l){s.child=n===null?wv(s,null,a,l):Ka(s,n.child,a,l)}function Pv(n,s,a,l,h){a=a.render;var f=s.ref;if("ref"in l){var E={};for(var S in l)S!=="ref"&&(E[S]=l[S])}else E=l;return $r(s),l=Tf(n,s,a,E,f,h),S=Ef(),n!==null&&!Vt?(bf(n,s,h),Ji(n,s,h)):($e&&S&&nf(s),s.flags|=1,Bt(n,s,l,h),s.child)}function jv(n,s,a,l,h){if(n===null){var f=a.type;return typeof f=="function"&&!Jd(f)&&f.defaultProps===void 0&&a.compare===null?(s.tag=15,s.type=f,Uv(n,s,f,l,h)):(n=du(a.type,null,l,s,s.mode,h),n.ref=s.ref,n.return=s,s.child=n)}if(f=n.child,!Gf(n,h)){var E=f.memoizedProps;if(a=a.compare,a=a!==null?a:ol,a(E,l)&&n.ref===s.ref)return Ji(n,s,h)}return s.flags|=1,n=$i(f,l),n.ref=s.ref,n.return=s,s.child=n}function Uv(n,s,a,l,h){if(n!==null){var f=n.memoizedProps;if(ol(f,l)&&n.ref===s.ref)if(Vt=!1,s.pendingProps=l=f,Gf(n,h))(n.flags&131072)!==0&&(Vt=!0);else return s.lanes=n.lanes,Ji(n,s,h)}return Uf(n,s,a,l,h)}function Lv(n,s,a){var l=s.pendingProps,h=l.children,f=n!==null?n.memoizedState:null;if(l.mode==="hidden"){if((s.flags&128)!==0){if(l=f!==null?f.baseLanes|a:a,n!==null){for(h=s.child=n.child,f=0;h!==null;)f=f|h.lanes|h.childLanes,h=h.sibling;s.childLanes=f&~l}else s.childLanes=0,s.child=null;return zv(n,s,l,a)}if((a&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},n!==null&&yu(s,f!==null?f.cachePool:null),f!==null?Uy(s,f):yf(),Iv(s);else return s.lanes=s.childLanes=536870912,zv(n,s,f!==null?f.baseLanes|a:a,a)}else f!==null?(yu(s,f.cachePool),Uy(s,f),Rs(),s.memoizedState=null):(n!==null&&yu(s,null),yf(),Rs());return Bt(n,s,h,a),s.child}function zv(n,s,a,l){var h=hf();return h=h===null?null:{parent:Nt._currentValue,pool:h},s.memoizedState={baseLanes:a,cachePool:h},n!==null&&yu(s,null),yf(),Iv(s),n!==null&&dl(n,s,l,!0),null}function ku(n,s){var a=s.ref;if(a===null)n!==null&&n.ref!==null&&(s.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(n===null||n.ref!==a)&&(s.flags|=4194816)}}function Uf(n,s,a,l,h){return $r(s),a=Tf(n,s,a,l,void 0,h),l=Ef(),n!==null&&!Vt?(bf(n,s,h),Ji(n,s,h)):($e&&l&&nf(s),s.flags|=1,Bt(n,s,a,h),s.child)}function qv(n,s,a,l,h,f){return $r(s),s.updateQueue=null,a=zy(s,l,a,h),Ly(n),l=Ef(),n!==null&&!Vt?(bf(n,s,f),Ji(n,s,f)):($e&&l&&nf(s),s.flags|=1,Bt(n,s,a,f),s.child)}function Bv(n,s,a,l,h){if($r(s),s.stateNode===null){var f=ja,E=a.contextType;typeof E=="object"&&E!==null&&(f=Zt(E)),f=new a(l,f),s.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=Pf,s.stateNode=f,f._reactInternals=s,f=s.stateNode,f.props=l,f.state=s.memoizedState,f.refs={},ff(s),E=a.contextType,f.context=typeof E=="object"&&E!==null?Zt(E):ja,f.state=s.memoizedState,E=a.getDerivedStateFromProps,typeof E=="function"&&(Vf(s,a,E,l),f.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(E=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),E!==f.state&&Pf.enqueueReplaceState(f,f.state,null),_l(s,l,f,h),vl(),f.state=s.memoizedState),typeof f.componentDidMount=="function"&&(s.flags|=4194308),l=!0}else if(n===null){f=s.stateNode;var S=s.memoizedProps,R=Yr(a,S);f.props=R;var F=f.context,Y=a.contextType;E=ja,typeof Y=="object"&&Y!==null&&(E=Zt(Y));var J=a.getDerivedStateFromProps;Y=typeof J=="function"||typeof f.getSnapshotBeforeUpdate=="function",S=s.pendingProps!==S,Y||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(S||F!==E)&&Rv(s,f,l,E),As=!1;var H=s.memoizedState;f.state=H,_l(s,l,f,h),vl(),F=s.memoizedState,S||H!==F||As?(typeof J=="function"&&(Vf(s,a,J,l),F=s.memoizedState),(R=As||Nv(s,a,R,l,H,F,E))?(Y||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(s.flags|=4194308)):(typeof f.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=l,s.memoizedState=F),f.props=l,f.state=F,f.context=E,l=R):(typeof f.componentDidMount=="function"&&(s.flags|=4194308),l=!1)}else{f=s.stateNode,mf(n,s),E=s.memoizedProps,Y=Yr(a,E),f.props=Y,J=s.pendingProps,H=f.context,F=a.contextType,R=ja,typeof F=="object"&&F!==null&&(R=Zt(F)),S=a.getDerivedStateFromProps,(F=typeof S=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(E!==J||H!==R)&&Rv(s,f,l,R),As=!1,H=s.memoizedState,f.state=H,_l(s,l,f,h),vl();var G=s.memoizedState;E!==J||H!==G||As||n!==null&&n.dependencies!==null&&pu(n.dependencies)?(typeof S=="function"&&(Vf(s,a,S,l),G=s.memoizedState),(Y=As||Nv(s,a,Y,l,H,G,R)||n!==null&&n.dependencies!==null&&pu(n.dependencies))?(F||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(l,G,R),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(l,G,R)),typeof f.componentDidUpdate=="function"&&(s.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof f.componentDidUpdate!="function"||E===n.memoizedProps&&H===n.memoizedState||(s.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||E===n.memoizedProps&&H===n.memoizedState||(s.flags|=1024),s.memoizedProps=l,s.memoizedState=G),f.props=l,f.state=G,f.context=R,l=Y):(typeof f.componentDidUpdate!="function"||E===n.memoizedProps&&H===n.memoizedState||(s.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||E===n.memoizedProps&&H===n.memoizedState||(s.flags|=1024),l=!1)}return f=l,ku(n,s),l=(s.flags&128)!==0,f||l?(f=s.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:f.render(),s.flags|=1,n!==null&&l?(s.child=Ka(s,n.child,null,h),s.child=Ka(s,null,a,h)):Bt(n,s,a,h),s.memoizedState=f.state,n=s.child):n=Ji(n,s,h),n}function Fv(n,s,a,l){return ul(),s.flags|=256,Bt(n,s,a,l),s.child}var Lf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function zf(n){return{baseLanes:n,cachePool:xy()}}function qf(n,s,a){return n=n!==null?n.childLanes&~a:0,s&&(n|=Fn),n}function Hv(n,s,a){var l=s.pendingProps,h=!1,f=(s.flags&128)!==0,E;if((E=f)||(E=n!==null&&n.memoizedState===null?!1:(Rt.current&2)!==0),E&&(h=!0,s.flags&=-129),E=(s.flags&32)!==0,s.flags&=-33,n===null){if($e){if(h?Ns(s):Rs(),$e){var S=dt,R;if(R=S){e:{for(R=S,S=vi;R.nodeType!==8;){if(!S){S=null;break e}if(R=Jn(R.nextSibling),R===null){S=null;break e}}S=R}S!==null?(s.memoizedState={dehydrated:S,treeContext:qr!==null?{id:Ki,overflow:Qi}:null,retryLane:536870912,hydrationErrors:null},R=En(18,null,null,0),R.stateNode=S,R.return=s,s.child=R,ln=s,dt=null,R=!0):R=!1}R||Hr(s)}if(S=s.memoizedState,S!==null&&(S=S.dehydrated,S!==null))return Sm(S)?s.lanes=32:s.lanes=536870912,null;Wi(s)}return S=l.children,l=l.fallback,h?(Rs(),h=s.mode,S=Vu({mode:"hidden",children:S},h),l=zr(l,h,a,null),S.return=s,l.return=s,S.sibling=l,s.child=S,h=s.child,h.memoizedState=zf(a),h.childLanes=qf(n,E,a),s.memoizedState=Lf,l):(Ns(s),Bf(s,S))}if(R=n.memoizedState,R!==null&&(S=R.dehydrated,S!==null)){if(f)s.flags&256?(Ns(s),s.flags&=-257,s=Ff(n,s,a)):s.memoizedState!==null?(Rs(),s.child=n.child,s.flags|=128,s=null):(Rs(),h=l.fallback,S=s.mode,l=Vu({mode:"visible",children:l.children},S),h=zr(h,S,a,null),h.flags|=2,l.return=s,h.return=s,l.sibling=h,s.child=l,Ka(s,n.child,null,a),l=s.child,l.memoizedState=zf(a),l.childLanes=qf(n,E,a),s.memoizedState=Lf,s=h);else if(Ns(s),Sm(S)){if(E=S.nextSibling&&S.nextSibling.dataset,E)var F=E.dgst;E=F,l=Error(r(419)),l.stack="",l.digest=E,hl({value:l,source:null,stack:null}),s=Ff(n,s,a)}else if(Vt||dl(n,s,a,!1),E=(a&n.childLanes)!==0,Vt||E){if(E=st,E!==null&&(l=a&-a,l=(l&42)!==0?1:ps(l),l=(l&(E.suspendedLanes|a))!==0?0:l,l!==0&&l!==R.retryLane))throw R.retryLane=l,Pa(n,l),In(E,n,l),Vv;S.data==="$?"||om(),s=Ff(n,s,a)}else S.data==="$?"?(s.flags|=192,s.child=n.child,s=null):(n=R.treeContext,dt=Jn(S.nextSibling),ln=s,$e=!0,Fr=null,vi=!1,n!==null&&(zn[qn++]=Ki,zn[qn++]=Qi,zn[qn++]=qr,Ki=n.id,Qi=n.overflow,qr=s),s=Bf(s,l.children),s.flags|=4096);return s}return h?(Rs(),h=l.fallback,S=s.mode,R=n.child,F=R.sibling,l=$i(R,{mode:"hidden",children:l.children}),l.subtreeFlags=R.subtreeFlags&65011712,F!==null?h=$i(F,h):(h=zr(h,S,a,null),h.flags|=2),h.return=s,l.return=s,l.sibling=h,s.child=l,l=h,h=s.child,S=n.child.memoizedState,S===null?S=zf(a):(R=S.cachePool,R!==null?(F=Nt._currentValue,R=R.parent!==F?{parent:F,pool:F}:R):R=xy(),S={baseLanes:S.baseLanes|a,cachePool:R}),h.memoizedState=S,h.childLanes=qf(n,E,a),s.memoizedState=Lf,l):(Ns(s),a=n.child,n=a.sibling,a=$i(a,{mode:"visible",children:l.children}),a.return=s,a.sibling=null,n!==null&&(E=s.deletions,E===null?(s.deletions=[n],s.flags|=16):E.push(n)),s.child=a,s.memoizedState=null,a)}function Bf(n,s){return s=Vu({mode:"visible",children:s},n.mode),s.return=n,n.child=s}function Vu(n,s){return n=En(22,n,null,s),n.lanes=0,n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},n}function Ff(n,s,a){return Ka(s,n.child,null,a),n=Bf(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function Gv(n,s,a){n.lanes|=s;var l=n.alternate;l!==null&&(l.lanes|=s),of(n.return,s,a)}function Hf(n,s,a,l,h){var f=n.memoizedState;f===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:h}:(f.isBackwards=s,f.rendering=null,f.renderingStartTime=0,f.last=l,f.tail=a,f.tailMode=h)}function $v(n,s,a){var l=s.pendingProps,h=l.revealOrder,f=l.tail;if(Bt(n,s,l.children,a),l=Rt.current,(l&2)!==0)l=l&1|2,s.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Gv(n,a,s);else if(n.tag===19)Gv(n,a,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}l&=1}switch(ne(Rt,l),h){case"forwards":for(a=s.child,h=null;a!==null;)n=a.alternate,n!==null&&Du(n)===null&&(h=a),a=a.sibling;a=h,a===null?(h=s.child,s.child=null):(h=a.sibling,a.sibling=null),Hf(s,!1,h,a,f);break;case"backwards":for(a=null,h=s.child,s.child=null;h!==null;){if(n=h.alternate,n!==null&&Du(n)===null){s.child=h;break}n=h.sibling,h.sibling=a,a=h,h=n}Hf(s,!0,a,null,f);break;case"together":Hf(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Ji(n,s,a){if(n!==null&&(s.dependencies=n.dependencies),Ms|=s.lanes,(a&s.childLanes)===0)if(n!==null){if(dl(n,s,a,!1),(a&s.childLanes)===0)return null}else return null;if(n!==null&&s.child!==n.child)throw Error(r(153));if(s.child!==null){for(n=s.child,a=$i(n,n.pendingProps),s.child=a,a.return=s;n.sibling!==null;)n=n.sibling,a=a.sibling=$i(n,n.pendingProps),a.return=s;a.sibling=null}return s.child}function Gf(n,s){return(n.lanes&s)!==0?!0:(n=n.dependencies,!!(n!==null&&pu(n)))}function Ow(n,s,a){switch(s.tag){case 3:it(s,s.stateNode.containerInfo),bs(s,Nt,n.memoizedState.cache),ul();break;case 27:case 5:ms(s);break;case 4:it(s,s.stateNode.containerInfo);break;case 10:bs(s,s.type,s.memoizedProps.value);break;case 13:var l=s.memoizedState;if(l!==null)return l.dehydrated!==null?(Ns(s),s.flags|=128,null):(a&s.child.childLanes)!==0?Hv(n,s,a):(Ns(s),n=Ji(n,s,a),n!==null?n.sibling:null);Ns(s);break;case 19:var h=(n.flags&128)!==0;if(l=(a&s.childLanes)!==0,l||(dl(n,s,a,!1),l=(a&s.childLanes)!==0),h){if(l)return $v(n,s,a);s.flags|=128}if(h=s.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),ne(Rt,Rt.current),l)break;return null;case 22:case 23:return s.lanes=0,Lv(n,s,a);case 24:bs(s,Nt,n.memoizedState.cache)}return Ji(n,s,a)}function Kv(n,s,a){if(n!==null)if(n.memoizedProps!==s.pendingProps)Vt=!0;else{if(!Gf(n,a)&&(s.flags&128)===0)return Vt=!1,Ow(n,s,a);Vt=(n.flags&131072)!==0}else Vt=!1,$e&&(s.flags&1048576)!==0&&Ay(s,mu,s.index);switch(s.lanes=0,s.tag){case 16:e:{n=s.pendingProps;var l=s.elementType,h=l._init;if(l=h(l._payload),s.type=l,typeof l=="function")Jd(l)?(n=Yr(l,n),s.tag=1,s=Bv(null,s,l,n,a)):(s.tag=0,s=Uf(null,s,l,n,a));else{if(l!=null){if(h=l.$$typeof,h===ce){s.tag=11,s=Pv(null,s,l,n,a);break e}else if(h===V){s.tag=14,s=jv(null,s,l,n,a);break e}}throw s=Be(l)||l,Error(r(306,s,""))}}return s;case 0:return Uf(n,s,s.type,s.pendingProps,a);case 1:return l=s.type,h=Yr(l,s.pendingProps),Bv(n,s,l,h,a);case 3:e:{if(it(s,s.stateNode.containerInfo),n===null)throw Error(r(387));l=s.pendingProps;var f=s.memoizedState;h=f.element,mf(n,s),_l(s,l,null,a);var E=s.memoizedState;if(l=E.cache,bs(s,Nt,l),l!==f.cache&&lf(s,[Nt],a,!0),vl(),l=E.element,f.isDehydrated)if(f={element:l,isDehydrated:!1,cache:E.cache},s.updateQueue.baseState=f,s.memoizedState=f,s.flags&256){s=Fv(n,s,l,a);break e}else if(l!==h){h=Un(Error(r(424)),s),hl(h),s=Fv(n,s,l,a);break e}else{switch(n=s.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(dt=Jn(n.firstChild),ln=s,$e=!0,Fr=null,vi=!0,a=wv(s,null,l,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(ul(),l===h){s=Ji(n,s,a);break e}Bt(n,s,l,a)}s=s.child}return s;case 26:return ku(n,s),n===null?(a=Z_(s.type,null,s.pendingProps,null))?s.memoizedState=a:$e||(a=s.type,n=s.pendingProps,l=Yu(Se.current).createElement(a),l[St]=s,l[vt]=n,Ht(l,a,n),mt(l),s.stateNode=l):s.memoizedState=Z_(s.type,n.memoizedProps,s.pendingProps,n.memoizedState),null;case 27:return ms(s),n===null&&$e&&(l=s.stateNode=Q_(s.type,s.pendingProps,Se.current),ln=s,vi=!0,h=dt,js(s.type)?(wm=h,dt=Jn(l.firstChild)):dt=h),Bt(n,s,s.pendingProps.children,a),ku(n,s),n===null&&(s.flags|=4194304),s.child;case 5:return n===null&&$e&&((h=l=dt)&&(l=aI(l,s.type,s.pendingProps,vi),l!==null?(s.stateNode=l,ln=s,dt=Jn(l.firstChild),vi=!1,h=!0):h=!1),h||Hr(s)),ms(s),h=s.type,f=s.pendingProps,E=n!==null?n.memoizedProps:null,l=f.children,Em(h,f)?l=null:E!==null&&Em(h,E)&&(s.flags|=32),s.memoizedState!==null&&(h=Tf(n,s,Sw,null,null,a),ql._currentValue=h),ku(n,s),Bt(n,s,l,a),s.child;case 6:return n===null&&$e&&((n=a=dt)&&(a=oI(a,s.pendingProps,vi),a!==null?(s.stateNode=a,ln=s,dt=null,n=!0):n=!1),n||Hr(s)),null;case 13:return Hv(n,s,a);case 4:return it(s,s.stateNode.containerInfo),l=s.pendingProps,n===null?s.child=Ka(s,null,l,a):Bt(n,s,l,a),s.child;case 11:return Pv(n,s,s.type,s.pendingProps,a);case 7:return Bt(n,s,s.pendingProps,a),s.child;case 8:return Bt(n,s,s.pendingProps.children,a),s.child;case 12:return Bt(n,s,s.pendingProps.children,a),s.child;case 10:return l=s.pendingProps,bs(s,s.type,l.value),Bt(n,s,l.children,a),s.child;case 9:return h=s.type._context,l=s.pendingProps.children,$r(s),h=Zt(h),l=l(h),s.flags|=1,Bt(n,s,l,a),s.child;case 14:return jv(n,s,s.type,s.pendingProps,a);case 15:return Uv(n,s,s.type,s.pendingProps,a);case 19:return $v(n,s,a);case 31:return l=s.pendingProps,a=s.mode,l={mode:l.mode,children:l.children},n===null?(a=Vu(l,a),a.ref=s.ref,s.child=a,a.return=s,s=a):(a=$i(n.child,l),a.ref=s.ref,s.child=a,a.return=s,s=a),s;case 22:return Lv(n,s,a);case 24:return $r(s),l=Zt(Nt),n===null?(h=hf(),h===null&&(h=st,f=cf(),h.pooledCache=f,f.refCount++,f!==null&&(h.pooledCacheLanes|=a),h=f),s.memoizedState={parent:l,cache:h},ff(s),bs(s,Nt,h)):((n.lanes&a)!==0&&(mf(n,s),_l(s,null,null,a),vl()),h=n.memoizedState,f=s.memoizedState,h.parent!==l?(h={parent:l,cache:l},s.memoizedState=h,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=h),bs(s,Nt,l)):(l=f.cache,bs(s,Nt,l),l!==h.cache&&lf(s,[Nt],a,!0))),Bt(n,s,s.pendingProps.children,a),s.child;case 29:throw s.pendingProps}throw Error(r(156,s.tag))}function es(n){n.flags|=4}function Qv(n,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!nT(s)){if(s=Bn.current,s!==null&&((Le&4194048)===Le?_i!==null:(Le&62914560)!==Le&&(Le&536870912)===0||s!==_i))throw gl=df,Dy;n.flags|=8192}}function Pu(n,s){s!==null&&(n.flags|=4),n.flags&16384&&(s=n.tag!==22?Fo():536870912,n.lanes|=s,Za|=s)}function Il(n,s){if(!$e)switch(n.tailMode){case"hidden":s=n.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:l.sibling=null}}function lt(n){var s=n.alternate!==null&&n.alternate.child===n.child,a=0,l=0;if(s)for(var h=n.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=n,h=h.sibling;else for(h=n.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=n,h=h.sibling;return n.subtreeFlags|=l,n.childLanes=a,s}function Mw(n,s,a){var l=s.pendingProps;switch(sf(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return lt(s),null;case 1:return lt(s),null;case 3:return a=s.stateNode,l=null,n!==null&&(l=n.memoizedState.cache),s.memoizedState.cache!==l&&(s.flags|=2048),Xi(Nt),ai(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(n===null||n.child===null)&&(cl(s)?es(s):n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Iy())),lt(s),null;case 26:return a=s.memoizedState,n===null?(es(s),a!==null?(lt(s),Qv(s,a)):(lt(s),s.flags&=-16777217)):a?a!==n.memoizedState?(es(s),lt(s),Qv(s,a)):(lt(s),s.flags&=-16777217):(n.memoizedProps!==l&&es(s),lt(s),s.flags&=-16777217),null;case 27:Mi(s),a=Se.current;var h=s.type;if(n!==null&&s.stateNode!=null)n.memoizedProps!==l&&es(s);else{if(!l){if(s.stateNode===null)throw Error(r(166));return lt(s),null}n=ye.current,cl(s)?Sy(s):(n=Q_(h,l,a),s.stateNode=n,es(s))}return lt(s),null;case 5:if(Mi(s),a=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==l&&es(s);else{if(!l){if(s.stateNode===null)throw Error(r(166));return lt(s),null}if(n=ye.current,cl(s))Sy(s);else{switch(h=Yu(Se.current),n){case 1:n=h.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:n=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":n=h.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":n=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":n=h.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof l.is=="string"?h.createElement("select",{is:l.is}):h.createElement("select"),l.multiple?n.multiple=!0:l.size&&(n.size=l.size);break;default:n=typeof l.is=="string"?h.createElement(a,{is:l.is}):h.createElement(a)}}n[St]=s,n[vt]=l;e:for(h=s.child;h!==null;){if(h.tag===5||h.tag===6)n.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===s)break e;for(;h.sibling===null;){if(h.return===null||h.return===s)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}s.stateNode=n;e:switch(Ht(n,a,l),a){case"button":case"input":case"select":case"textarea":n=!!l.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&es(s)}}return lt(s),s.flags&=-16777217,null;case 6:if(n&&s.stateNode!=null)n.memoizedProps!==l&&es(s);else{if(typeof l!="string"&&s.stateNode===null)throw Error(r(166));if(n=Se.current,cl(s)){if(n=s.stateNode,a=s.memoizedProps,l=null,h=ln,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}n[St]=s,n=!!(n.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||q_(n.nodeValue,a)),n||Hr(s)}else n=Yu(n).createTextNode(l),n[St]=s,s.stateNode=n}return lt(s),null;case 13:if(l=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(h=cl(s),l!==null&&l.dehydrated!==null){if(n===null){if(!h)throw Error(r(318));if(h=s.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(r(317));h[St]=s}else ul(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;lt(s),h=!1}else h=Iy(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=h),h=!0;if(!h)return s.flags&256?(Wi(s),s):(Wi(s),null)}if(Wi(s),(s.flags&128)!==0)return s.lanes=a,s;if(a=l!==null,n=n!==null&&n.memoizedState!==null,a){l=s.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool);var f=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),f!==h&&(l.flags|=2048)}return a!==n&&a&&(s.child.flags|=8192),Pu(s,s.updateQueue),lt(s),null;case 4:return ai(),n===null&&gm(s.stateNode.containerInfo),lt(s),null;case 10:return Xi(s.type),lt(s),null;case 19:if(oe(Rt),h=s.memoizedState,h===null)return lt(s),null;if(l=(s.flags&128)!==0,f=h.rendering,f===null)if(l)Il(h,!1);else{if(ft!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(f=Du(n),f!==null){for(s.flags|=128,Il(h,!1),n=f.updateQueue,s.updateQueue=n,Pu(s,n),s.subtreeFlags=0,n=a,a=s.child;a!==null;)by(a,n),a=a.sibling;return ne(Rt,Rt.current&1|2),s.child}n=n.sibling}h.tail!==null&&On()>Lu&&(s.flags|=128,l=!0,Il(h,!1),s.lanes=4194304)}else{if(!l)if(n=Du(f),n!==null){if(s.flags|=128,l=!0,n=n.updateQueue,s.updateQueue=n,Pu(s,n),Il(h,!0),h.tail===null&&h.tailMode==="hidden"&&!f.alternate&&!$e)return lt(s),null}else 2*On()-h.renderingStartTime>Lu&&a!==536870912&&(s.flags|=128,l=!0,Il(h,!1),s.lanes=4194304);h.isBackwards?(f.sibling=s.child,s.child=f):(n=h.last,n!==null?n.sibling=f:s.child=f,h.last=f)}return h.tail!==null?(s=h.tail,h.rendering=s,h.tail=s.sibling,h.renderingStartTime=On(),s.sibling=null,n=Rt.current,ne(Rt,l?n&1|2:n&1),s):(lt(s),null);case 22:case 23:return Wi(s),vf(),l=s.memoizedState!==null,n!==null?n.memoizedState!==null!==l&&(s.flags|=8192):l&&(s.flags|=8192),l?(a&536870912)!==0&&(s.flags&128)===0&&(lt(s),s.subtreeFlags&6&&(s.flags|=8192)):lt(s),a=s.updateQueue,a!==null&&Pu(s,a.retryQueue),a=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),l=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),l!==a&&(s.flags|=2048),n!==null&&oe(Kr),null;case 24:return a=null,n!==null&&(a=n.memoizedState.cache),s.memoizedState.cache!==a&&(s.flags|=2048),Xi(Nt),lt(s),null;case 25:return null;case 30:return null}throw Error(r(156,s.tag))}function kw(n,s){switch(sf(s),s.tag){case 1:return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return Xi(Nt),ai(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 26:case 27:case 5:return Mi(s),null;case 13:if(Wi(s),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(r(340));ul()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return oe(Rt),null;case 4:return ai(),null;case 10:return Xi(s.type),null;case 22:case 23:return Wi(s),vf(),n!==null&&oe(Kr),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 24:return Xi(Nt),null;case 25:return null;default:return null}}function Yv(n,s){switch(sf(s),s.tag){case 3:Xi(Nt),ai();break;case 26:case 27:case 5:Mi(s);break;case 4:ai();break;case 13:Wi(s);break;case 19:oe(Rt);break;case 10:Xi(s.type);break;case 22:case 23:Wi(s),vf(),n!==null&&oe(Kr);break;case 24:Xi(Nt)}}function Nl(n,s){try{var a=s.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var h=l.next;a=h;do{if((a.tag&n)===n){l=void 0;var f=a.create,E=a.inst;l=f(),E.destroy=l}a=a.next}while(a!==h)}}catch(S){tt(s,s.return,S)}}function Cs(n,s,a){try{var l=s.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var f=h.next;l=f;do{if((l.tag&n)===n){var E=l.inst,S=E.destroy;if(S!==void 0){E.destroy=void 0,h=s;var R=a,F=S;try{F()}catch(Y){tt(h,R,Y)}}}l=l.next}while(l!==f)}}catch(Y){tt(s,s.return,Y)}}function Xv(n){var s=n.updateQueue;if(s!==null){var a=n.stateNode;try{jy(s,a)}catch(l){tt(n,n.return,l)}}}function Zv(n,s,a){a.props=Yr(n.type,n.memoizedProps),a.state=n.memoizedState;try{a.componentWillUnmount()}catch(l){tt(n,s,l)}}function Rl(n,s){try{var a=n.ref;if(a!==null){switch(n.tag){case 26:case 27:case 5:var l=n.stateNode;break;case 30:l=n.stateNode;break;default:l=n.stateNode}typeof a=="function"?n.refCleanup=a(l):a.current=l}}catch(h){tt(n,s,h)}}function Ti(n,s){var a=n.ref,l=n.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(h){tt(n,s,h)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){tt(n,s,h)}else a.current=null}function Wv(n){var s=n.type,a=n.memoizedProps,l=n.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(h){tt(n,n.return,h)}}function $f(n,s,a){try{var l=n.stateNode;tI(l,n.type,a,s),l[vt]=s}catch(h){tt(n,n.return,h)}}function Jv(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&js(n.type)||n.tag===4}function Kf(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Jv(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&js(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Qf(n,s,a){var l=n.tag;if(l===5||l===6)n=n.stateNode,s?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(n,s):(s=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,s.appendChild(n),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=Qu));else if(l!==4&&(l===27&&js(n.type)&&(a=n.stateNode,s=null),n=n.child,n!==null))for(Qf(n,s,a),n=n.sibling;n!==null;)Qf(n,s,a),n=n.sibling}function ju(n,s,a){var l=n.tag;if(l===5||l===6)n=n.stateNode,s?a.insertBefore(n,s):a.appendChild(n);else if(l!==4&&(l===27&&js(n.type)&&(a=n.stateNode),n=n.child,n!==null))for(ju(n,s,a),n=n.sibling;n!==null;)ju(n,s,a),n=n.sibling}function e_(n){var s=n.stateNode,a=n.memoizedProps;try{for(var l=n.type,h=s.attributes;h.length;)s.removeAttributeNode(h[0]);Ht(s,l,a),s[St]=n,s[vt]=a}catch(f){tt(n,n.return,f)}}var ts=!1,gt=!1,Yf=!1,t_=typeof WeakSet=="function"?WeakSet:Set,Pt=null;function Vw(n,s){if(n=n.containerInfo,_m=th,n=dy(n),$d(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var h=l.anchorOffset,f=l.focusNode;l=l.focusOffset;try{a.nodeType,f.nodeType}catch{a=null;break e}var E=0,S=-1,R=-1,F=0,Y=0,J=n,H=null;t:for(;;){for(var G;J!==a||h!==0&&J.nodeType!==3||(S=E+h),J!==f||l!==0&&J.nodeType!==3||(R=E+l),J.nodeType===3&&(E+=J.nodeValue.length),(G=J.firstChild)!==null;)H=J,J=G;for(;;){if(J===n)break t;if(H===a&&++F===h&&(S=E),H===f&&++Y===l&&(R=E),(G=J.nextSibling)!==null)break;J=H,H=J.parentNode}J=G}a=S===-1||R===-1?null:{start:S,end:R}}else a=null}a=a||{start:0,end:0}}else a=null;for(Tm={focusedElem:n,selectionRange:a},th=!1,Pt=s;Pt!==null;)if(s=Pt,n=s.child,(s.subtreeFlags&1024)!==0&&n!==null)n.return=s,Pt=n;else for(;Pt!==null;){switch(s=Pt,f=s.alternate,n=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((n&1024)!==0&&f!==null){n=void 0,a=s,h=f.memoizedProps,f=f.memoizedState,l=a.stateNode;try{var be=Yr(a.type,h,a.elementType===a.type);n=l.getSnapshotBeforeUpdate(be,f),l.__reactInternalSnapshotBeforeUpdate=n}catch(_e){tt(a,a.return,_e)}}break;case 3:if((n&1024)!==0){if(n=s.stateNode.containerInfo,a=n.nodeType,a===9)Am(n);else if(a===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Am(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(r(163))}if(n=s.sibling,n!==null){n.return=s.return,Pt=n;break}Pt=s.return}}function n_(n,s,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:xs(n,a),l&4&&Nl(5,a);break;case 1:if(xs(n,a),l&4)if(n=a.stateNode,s===null)try{n.componentDidMount()}catch(E){tt(a,a.return,E)}else{var h=Yr(a.type,s.memoizedProps);s=s.memoizedState;try{n.componentDidUpdate(h,s,n.__reactInternalSnapshotBeforeUpdate)}catch(E){tt(a,a.return,E)}}l&64&&Xv(a),l&512&&Rl(a,a.return);break;case 3:if(xs(n,a),l&64&&(n=a.updateQueue,n!==null)){if(s=null,a.child!==null)switch(a.child.tag){case 27:case 5:s=a.child.stateNode;break;case 1:s=a.child.stateNode}try{jy(n,s)}catch(E){tt(a,a.return,E)}}break;case 27:s===null&&l&4&&e_(a);case 26:case 5:xs(n,a),s===null&&l&4&&Wv(a),l&512&&Rl(a,a.return);break;case 12:xs(n,a);break;case 13:xs(n,a),l&4&&r_(n,a),l&64&&(n=a.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(a=Hw.bind(null,a),lI(n,a))));break;case 22:if(l=a.memoizedState!==null||ts,!l){s=s!==null&&s.memoizedState!==null||gt,h=ts;var f=gt;ts=l,(gt=s)&&!f?Ds(n,a,(a.subtreeFlags&8772)!==0):xs(n,a),ts=h,gt=f}break;case 30:break;default:xs(n,a)}}function i_(n){var s=n.alternate;s!==null&&(n.alternate=null,i_(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&vs(s)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var at=null,mn=!1;function ns(n,s,a){for(a=a.child;a!==null;)s_(n,s,a),a=a.sibling}function s_(n,s,a){if(Qe&&typeof Qe.onCommitFiberUnmount=="function")try{Qe.onCommitFiberUnmount(ht,a)}catch{}switch(a.tag){case 26:gt||Ti(a,s),ns(n,s,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:gt||Ti(a,s);var l=at,h=mn;js(a.type)&&(at=a.stateNode,mn=!1),ns(n,s,a),jl(a.stateNode),at=l,mn=h;break;case 5:gt||Ti(a,s);case 6:if(l=at,h=mn,at=null,ns(n,s,a),at=l,mn=h,at!==null)if(mn)try{(at.nodeType===9?at.body:at.nodeName==="HTML"?at.ownerDocument.body:at).removeChild(a.stateNode)}catch(f){tt(a,s,f)}else try{at.removeChild(a.stateNode)}catch(f){tt(a,s,f)}break;case 18:at!==null&&(mn?(n=at,$_(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,a.stateNode),Gl(n)):$_(at,a.stateNode));break;case 4:l=at,h=mn,at=a.stateNode.containerInfo,mn=!0,ns(n,s,a),at=l,mn=h;break;case 0:case 11:case 14:case 15:gt||Cs(2,a,s),gt||Cs(4,a,s),ns(n,s,a);break;case 1:gt||(Ti(a,s),l=a.stateNode,typeof l.componentWillUnmount=="function"&&Zv(a,s,l)),ns(n,s,a);break;case 21:ns(n,s,a);break;case 22:gt=(l=gt)||a.memoizedState!==null,ns(n,s,a),gt=l;break;default:ns(n,s,a)}}function r_(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Gl(n)}catch(a){tt(s,s.return,a)}}function Pw(n){switch(n.tag){case 13:case 19:var s=n.stateNode;return s===null&&(s=n.stateNode=new t_),s;case 22:return n=n.stateNode,s=n._retryCache,s===null&&(s=n._retryCache=new t_),s;default:throw Error(r(435,n.tag))}}function Xf(n,s){var a=Pw(n);s.forEach(function(l){var h=Gw.bind(null,n,l);a.has(l)||(a.add(l),l.then(h,h))})}function bn(n,s){var a=s.deletions;if(a!==null)for(var l=0;l<a.length;l++){var h=a[l],f=n,E=s,S=E;e:for(;S!==null;){switch(S.tag){case 27:if(js(S.type)){at=S.stateNode,mn=!1;break e}break;case 5:at=S.stateNode,mn=!1;break e;case 3:case 4:at=S.stateNode.containerInfo,mn=!0;break e}S=S.return}if(at===null)throw Error(r(160));s_(f,E,h),at=null,mn=!1,f=h.alternate,f!==null&&(f.return=null),h.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)a_(s,n),s=s.sibling}var Wn=null;function a_(n,s){var a=n.alternate,l=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:bn(s,n),An(n),l&4&&(Cs(3,n,n.return),Nl(3,n),Cs(5,n,n.return));break;case 1:bn(s,n),An(n),l&512&&(gt||a===null||Ti(a,a.return)),l&64&&ts&&(n=n.updateQueue,n!==null&&(l=n.callbacks,l!==null&&(a=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var h=Wn;if(bn(s,n),An(n),l&512&&(gt||a===null||Ti(a,a.return)),l&4){var f=a!==null?a.memoizedState:null;if(l=n.memoizedState,a===null)if(l===null)if(n.stateNode===null){e:{l=n.type,a=n.memoizedProps,h=h.ownerDocument||h;t:switch(l){case"title":f=h.getElementsByTagName("title")[0],(!f||f[Sr]||f[St]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=h.createElement(l),h.head.insertBefore(f,h.querySelector("head > title"))),Ht(f,l,a),f[St]=n,mt(f),l=f;break e;case"link":var E=eT("link","href",h).get(l+(a.href||""));if(E){for(var S=0;S<E.length;S++)if(f=E[S],f.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&f.getAttribute("rel")===(a.rel==null?null:a.rel)&&f.getAttribute("title")===(a.title==null?null:a.title)&&f.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){E.splice(S,1);break t}}f=h.createElement(l),Ht(f,l,a),h.head.appendChild(f);break;case"meta":if(E=eT("meta","content",h).get(l+(a.content||""))){for(S=0;S<E.length;S++)if(f=E[S],f.getAttribute("content")===(a.content==null?null:""+a.content)&&f.getAttribute("name")===(a.name==null?null:a.name)&&f.getAttribute("property")===(a.property==null?null:a.property)&&f.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&f.getAttribute("charset")===(a.charSet==null?null:a.charSet)){E.splice(S,1);break t}}f=h.createElement(l),Ht(f,l,a),h.head.appendChild(f);break;default:throw Error(r(468,l))}f[St]=n,mt(f),l=f}n.stateNode=l}else tT(h,n.type,n.stateNode);else n.stateNode=J_(h,l,n.memoizedProps);else f!==l?(f===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):f.count--,l===null?tT(h,n.type,n.stateNode):J_(h,l,n.memoizedProps)):l===null&&n.stateNode!==null&&$f(n,n.memoizedProps,a.memoizedProps)}break;case 27:bn(s,n),An(n),l&512&&(gt||a===null||Ti(a,a.return)),a!==null&&l&4&&$f(n,n.memoizedProps,a.memoizedProps);break;case 5:if(bn(s,n),An(n),l&512&&(gt||a===null||Ti(a,a.return)),n.flags&32){h=n.stateNode;try{kn(h,"")}catch(G){tt(n,n.return,G)}}l&4&&n.stateNode!=null&&(h=n.memoizedProps,$f(n,h,a!==null?a.memoizedProps:h)),l&1024&&(Yf=!0);break;case 6:if(bn(s,n),An(n),l&4){if(n.stateNode===null)throw Error(r(162));l=n.memoizedProps,a=n.stateNode;try{a.nodeValue=l}catch(G){tt(n,n.return,G)}}break;case 3:if(Wu=null,h=Wn,Wn=Xu(s.containerInfo),bn(s,n),Wn=h,An(n),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Gl(s.containerInfo)}catch(G){tt(n,n.return,G)}Yf&&(Yf=!1,o_(n));break;case 4:l=Wn,Wn=Xu(n.stateNode.containerInfo),bn(s,n),An(n),Wn=l;break;case 12:bn(s,n),An(n);break;case 13:bn(s,n),An(n),n.child.flags&8192&&n.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(nm=On()),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,Xf(n,l)));break;case 22:h=n.memoizedState!==null;var R=a!==null&&a.memoizedState!==null,F=ts,Y=gt;if(ts=F||h,gt=Y||R,bn(s,n),gt=Y,ts=F,An(n),l&8192)e:for(s=n.stateNode,s._visibility=h?s._visibility&-2:s._visibility|1,h&&(a===null||R||ts||gt||Xr(n)),a=null,s=n;;){if(s.tag===5||s.tag===26){if(a===null){R=a=s;try{if(f=R.stateNode,h)E=f.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{S=R.stateNode;var J=R.memoizedProps.style,H=J!=null&&J.hasOwnProperty("display")?J.display:null;S.style.display=H==null||typeof H=="boolean"?"":(""+H).trim()}}catch(G){tt(R,R.return,G)}}}else if(s.tag===6){if(a===null){R=s;try{R.stateNode.nodeValue=h?"":R.memoizedProps}catch(G){tt(R,R.return,G)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===n)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break e;for(;s.sibling===null;){if(s.return===null||s.return===n)break e;a===s&&(a=null),s=s.return}a===s&&(a=null),s.sibling.return=s.return,s=s.sibling}l&4&&(l=n.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Xf(n,a))));break;case 19:bn(s,n),An(n),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,Xf(n,l)));break;case 30:break;case 21:break;default:bn(s,n),An(n)}}function An(n){var s=n.flags;if(s&2){try{for(var a,l=n.return;l!==null;){if(Jv(l)){a=l;break}l=l.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var h=a.stateNode,f=Kf(n);ju(n,f,h);break;case 5:var E=a.stateNode;a.flags&32&&(kn(E,""),a.flags&=-33);var S=Kf(n);ju(n,S,E);break;case 3:case 4:var R=a.stateNode.containerInfo,F=Kf(n);Qf(n,F,R);break;default:throw Error(r(161))}}catch(Y){tt(n,n.return,Y)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function o_(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var s=n;o_(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),n=n.sibling}}function xs(n,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)n_(n,s.alternate,s),s=s.sibling}function Xr(n){for(n=n.child;n!==null;){var s=n;switch(s.tag){case 0:case 11:case 14:case 15:Cs(4,s,s.return),Xr(s);break;case 1:Ti(s,s.return);var a=s.stateNode;typeof a.componentWillUnmount=="function"&&Zv(s,s.return,a),Xr(s);break;case 27:jl(s.stateNode);case 26:case 5:Ti(s,s.return),Xr(s);break;case 22:s.memoizedState===null&&Xr(s);break;case 30:Xr(s);break;default:Xr(s)}n=n.sibling}}function Ds(n,s,a){for(a=a&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var l=s.alternate,h=n,f=s,E=f.flags;switch(f.tag){case 0:case 11:case 15:Ds(h,f,a),Nl(4,f);break;case 1:if(Ds(h,f,a),l=f,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(F){tt(l,l.return,F)}if(l=f,h=l.updateQueue,h!==null){var S=l.stateNode;try{var R=h.shared.hiddenCallbacks;if(R!==null)for(h.shared.hiddenCallbacks=null,h=0;h<R.length;h++)Py(R[h],S)}catch(F){tt(l,l.return,F)}}a&&E&64&&Xv(f),Rl(f,f.return);break;case 27:e_(f);case 26:case 5:Ds(h,f,a),a&&l===null&&E&4&&Wv(f),Rl(f,f.return);break;case 12:Ds(h,f,a);break;case 13:Ds(h,f,a),a&&E&4&&r_(h,f);break;case 22:f.memoizedState===null&&Ds(h,f,a),Rl(f,f.return);break;case 30:break;default:Ds(h,f,a)}s=s.sibling}}function Zf(n,s){var a=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),n=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(n=s.memoizedState.cachePool.pool),n!==a&&(n!=null&&n.refCount++,a!=null&&fl(a))}function Wf(n,s){n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&fl(n))}function Ei(n,s,a,l){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)l_(n,s,a,l),s=s.sibling}function l_(n,s,a,l){var h=s.flags;switch(s.tag){case 0:case 11:case 15:Ei(n,s,a,l),h&2048&&Nl(9,s);break;case 1:Ei(n,s,a,l);break;case 3:Ei(n,s,a,l),h&2048&&(n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&fl(n)));break;case 12:if(h&2048){Ei(n,s,a,l),n=s.stateNode;try{var f=s.memoizedProps,E=f.id,S=f.onPostCommit;typeof S=="function"&&S(E,s.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(R){tt(s,s.return,R)}}else Ei(n,s,a,l);break;case 13:Ei(n,s,a,l);break;case 23:break;case 22:f=s.stateNode,E=s.alternate,s.memoizedState!==null?f._visibility&2?Ei(n,s,a,l):Cl(n,s):f._visibility&2?Ei(n,s,a,l):(f._visibility|=2,Qa(n,s,a,l,(s.subtreeFlags&10256)!==0)),h&2048&&Zf(E,s);break;case 24:Ei(n,s,a,l),h&2048&&Wf(s.alternate,s);break;default:Ei(n,s,a,l)}}function Qa(n,s,a,l,h){for(h=h&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var f=n,E=s,S=a,R=l,F=E.flags;switch(E.tag){case 0:case 11:case 15:Qa(f,E,S,R,h),Nl(8,E);break;case 23:break;case 22:var Y=E.stateNode;E.memoizedState!==null?Y._visibility&2?Qa(f,E,S,R,h):Cl(f,E):(Y._visibility|=2,Qa(f,E,S,R,h)),h&&F&2048&&Zf(E.alternate,E);break;case 24:Qa(f,E,S,R,h),h&&F&2048&&Wf(E.alternate,E);break;default:Qa(f,E,S,R,h)}s=s.sibling}}function Cl(n,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var a=n,l=s,h=l.flags;switch(l.tag){case 22:Cl(a,l),h&2048&&Zf(l.alternate,l);break;case 24:Cl(a,l),h&2048&&Wf(l.alternate,l);break;default:Cl(a,l)}s=s.sibling}}var xl=8192;function Ya(n){if(n.subtreeFlags&xl)for(n=n.child;n!==null;)c_(n),n=n.sibling}function c_(n){switch(n.tag){case 26:Ya(n),n.flags&xl&&n.memoizedState!==null&&EI(Wn,n.memoizedState,n.memoizedProps);break;case 5:Ya(n);break;case 3:case 4:var s=Wn;Wn=Xu(n.stateNode.containerInfo),Ya(n),Wn=s;break;case 22:n.memoizedState===null&&(s=n.alternate,s!==null&&s.memoizedState!==null?(s=xl,xl=16777216,Ya(n),xl=s):Ya(n));break;default:Ya(n)}}function u_(n){var s=n.alternate;if(s!==null&&(n=s.child,n!==null)){s.child=null;do s=n.sibling,n.sibling=null,n=s;while(n!==null)}}function Dl(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var l=s[a];Pt=l,d_(l,n)}u_(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)h_(n),n=n.sibling}function h_(n){switch(n.tag){case 0:case 11:case 15:Dl(n),n.flags&2048&&Cs(9,n,n.return);break;case 3:Dl(n);break;case 12:Dl(n);break;case 22:var s=n.stateNode;n.memoizedState!==null&&s._visibility&2&&(n.return===null||n.return.tag!==13)?(s._visibility&=-3,Uu(n)):Dl(n);break;default:Dl(n)}}function Uu(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var l=s[a];Pt=l,d_(l,n)}u_(n)}for(n=n.child;n!==null;){switch(s=n,s.tag){case 0:case 11:case 15:Cs(8,s,s.return),Uu(s);break;case 22:a=s.stateNode,a._visibility&2&&(a._visibility&=-3,Uu(s));break;default:Uu(s)}n=n.sibling}}function d_(n,s){for(;Pt!==null;){var a=Pt;switch(a.tag){case 0:case 11:case 15:Cs(8,a,s);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:fl(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Pt=l;else e:for(a=n;Pt!==null;){l=Pt;var h=l.sibling,f=l.return;if(i_(l),l===a){Pt=null;break e}if(h!==null){h.return=f,Pt=h;break e}Pt=f}}}var jw={getCacheForType:function(n){var s=Zt(Nt),a=s.data.get(n);return a===void 0&&(a=n(),s.data.set(n,a)),a}},Uw=typeof WeakMap=="function"?WeakMap:Map,Ye=0,st=null,Me=null,Le=0,Xe=0,Sn=null,Os=!1,Xa=!1,Jf=!1,is=0,ft=0,Ms=0,Zr=0,em=0,Fn=0,Za=0,Ol=null,pn=null,tm=!1,nm=0,Lu=1/0,zu=null,ks=null,Ft=0,Vs=null,Wa=null,Ja=0,im=0,sm=null,f_=null,Ml=0,rm=null;function wn(){if((Ye&2)!==0&&Le!==0)return Le&-Le;if(Q.T!==null){var n=za;return n!==0?n:dm()}return gs()}function m_(){Fn===0&&(Fn=(Le&536870912)===0||$e?Bo():536870912);var n=Bn.current;return n!==null&&(n.flags|=32),Fn}function In(n,s,a){(n===st&&(Xe===2||Xe===9)||n.cancelPendingCommit!==null)&&(eo(n,0),Ps(n,Le,Fn,!1)),Vi(n,a),((Ye&2)===0||n!==st)&&(n===st&&((Ye&2)===0&&(Zr|=a),ft===4&&Ps(n,Le,Fn,!1)),bi(n))}function p_(n,s,a){if((Ye&6)!==0)throw Error(r(327));var l=!a&&(s&124)===0&&(s&n.expiredLanes)===0||Ar(n,s),h=l?qw(n,s):lm(n,s,!0),f=l;do{if(h===0){Xa&&!l&&Ps(n,s,0,!1);break}else{if(a=n.current.alternate,f&&!Lw(a)){h=lm(n,s,!1),f=!1;continue}if(h===2){if(f=s,n.errorRecoveryDisabledLanes&f)var E=0;else E=n.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){s=E;e:{var S=n;h=Ol;var R=S.current.memoizedState.isDehydrated;if(R&&(eo(S,E).flags|=256),E=lm(S,E,!1),E!==2){if(Jf&&!R){S.errorRecoveryDisabledLanes|=f,Zr|=f,h=4;break e}f=pn,pn=h,f!==null&&(pn===null?pn=f:pn.push.apply(pn,f))}h=E}if(f=!1,h!==2)continue}}if(h===1){eo(n,0),Ps(n,s,0,!0);break}e:{switch(l=n,f=h,f){case 0:case 1:throw Error(r(345));case 4:if((s&4194048)!==s)break;case 6:Ps(l,s,Fn,!Os);break e;case 2:pn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((s&62914560)===s&&(h=nm+300-On(),10<h)){if(Ps(l,s,Fn,!Os),ya(l,0,!0)!==0)break e;l.timeoutHandle=H_(g_.bind(null,l,a,pn,zu,tm,s,Fn,Zr,Za,Os,f,2,-0,0),h);break e}g_(l,a,pn,zu,tm,s,Fn,Zr,Za,Os,f,0,-0,0)}}break}while(!0);bi(n)}function g_(n,s,a,l,h,f,E,S,R,F,Y,J,H,G){if(n.timeoutHandle=-1,J=s.subtreeFlags,(J&8192||(J&16785408)===16785408)&&(zl={stylesheets:null,count:0,unsuspend:TI},c_(s),J=bI(),J!==null)){n.cancelPendingCommit=J(A_.bind(null,n,s,f,a,l,h,E,S,R,Y,1,H,G)),Ps(n,f,E,!F);return}A_(n,s,f,a,l,h,E,S,R)}function Lw(n){for(var s=n;;){var a=s.tag;if((a===0||a===11||a===15)&&s.flags&16384&&(a=s.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var h=a[l],f=h.getSnapshot;h=h.value;try{if(!Tn(f(),h))return!1}catch{return!1}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Ps(n,s,a,l){s&=~em,s&=~Zr,n.suspendedLanes|=s,n.pingedLanes&=~s,l&&(n.warmLanes|=s),l=n.expirationTimes;for(var h=s;0<h;){var f=31-Xt(h),E=1<<f;l[f]=-1,h&=~E}a!==0&&oi(n,a,s)}function qu(){return(Ye&6)===0?(kl(0),!1):!0}function am(){if(Me!==null){if(Xe===0)var n=Me.return;else n=Me,Yi=Gr=null,Af(n),$a=null,Sl=0,n=Me;for(;n!==null;)Yv(n.alternate,n),n=n.return;Me=null}}function eo(n,s){var a=n.timeoutHandle;a!==-1&&(n.timeoutHandle=-1,iI(a)),a=n.cancelPendingCommit,a!==null&&(n.cancelPendingCommit=null,a()),am(),st=n,Me=a=$i(n.current,null),Le=s,Xe=0,Sn=null,Os=!1,Xa=Ar(n,s),Jf=!1,Za=Fn=em=Zr=Ms=ft=0,pn=Ol=null,tm=!1,(s&8)!==0&&(s|=s&32);var l=n.entangledLanes;if(l!==0)for(n=n.entanglements,l&=s;0<l;){var h=31-Xt(l),f=1<<h;s|=n[h],l&=~f}return is=s,cu(),a}function y_(n,s){Re=null,Q.H=Ru,s===pl||s===vu?(s=ky(),Xe=3):s===Dy?(s=ky(),Xe=4):Xe=s===Vv?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Sn=s,Me===null&&(ft=1,Mu(n,Un(s,n.current)))}function v_(){var n=Q.H;return Q.H=Ru,n===null?Ru:n}function __(){var n=Q.A;return Q.A=jw,n}function om(){ft=4,Os||(Le&4194048)!==Le&&Bn.current!==null||(Xa=!0),(Ms&134217727)===0&&(Zr&134217727)===0||st===null||Ps(st,Le,Fn,!1)}function lm(n,s,a){var l=Ye;Ye|=2;var h=v_(),f=__();(st!==n||Le!==s)&&(zu=null,eo(n,s)),s=!1;var E=ft;e:do try{if(Xe!==0&&Me!==null){var S=Me,R=Sn;switch(Xe){case 8:am(),E=6;break e;case 3:case 2:case 9:case 6:Bn.current===null&&(s=!0);var F=Xe;if(Xe=0,Sn=null,to(n,S,R,F),a&&Xa){E=0;break e}break;default:F=Xe,Xe=0,Sn=null,to(n,S,R,F)}}zw(),E=ft;break}catch(Y){y_(n,Y)}while(!0);return s&&n.shellSuspendCounter++,Yi=Gr=null,Ye=l,Q.H=h,Q.A=f,Me===null&&(st=null,Le=0,cu()),E}function zw(){for(;Me!==null;)T_(Me)}function qw(n,s){var a=Ye;Ye|=2;var l=v_(),h=__();st!==n||Le!==s?(zu=null,Lu=On()+500,eo(n,s)):Xa=Ar(n,s);e:do try{if(Xe!==0&&Me!==null){s=Me;var f=Sn;t:switch(Xe){case 1:Xe=0,Sn=null,to(n,s,f,1);break;case 2:case 9:if(Oy(f)){Xe=0,Sn=null,E_(s);break}s=function(){Xe!==2&&Xe!==9||st!==n||(Xe=7),bi(n)},f.then(s,s);break e;case 3:Xe=7;break e;case 4:Xe=5;break e;case 7:Oy(f)?(Xe=0,Sn=null,E_(s)):(Xe=0,Sn=null,to(n,s,f,7));break;case 5:var E=null;switch(Me.tag){case 26:E=Me.memoizedState;case 5:case 27:var S=Me;if(!E||nT(E)){Xe=0,Sn=null;var R=S.sibling;if(R!==null)Me=R;else{var F=S.return;F!==null?(Me=F,Bu(F)):Me=null}break t}}Xe=0,Sn=null,to(n,s,f,5);break;case 6:Xe=0,Sn=null,to(n,s,f,6);break;case 8:am(),ft=6;break e;default:throw Error(r(462))}}Bw();break}catch(Y){y_(n,Y)}while(!0);return Yi=Gr=null,Q.H=l,Q.A=h,Ye=a,Me!==null?0:(st=null,Le=0,cu(),ft)}function Bw(){for(;Me!==null&&!Uo();)T_(Me)}function T_(n){var s=Kv(n.alternate,n,is);n.memoizedProps=n.pendingProps,s===null?Bu(n):Me=s}function E_(n){var s=n,a=s.alternate;switch(s.tag){case 15:case 0:s=qv(a,s,s.pendingProps,s.type,void 0,Le);break;case 11:s=qv(a,s,s.pendingProps,s.type.render,s.ref,Le);break;case 5:Af(s);default:Yv(a,s),s=Me=by(s,is),s=Kv(a,s,is)}n.memoizedProps=n.pendingProps,s===null?Bu(n):Me=s}function to(n,s,a,l){Yi=Gr=null,Af(s),$a=null,Sl=0;var h=s.return;try{if(Dw(n,h,s,a,Le)){ft=1,Mu(n,Un(a,n.current)),Me=null;return}}catch(f){if(h!==null)throw Me=h,f;ft=1,Mu(n,Un(a,n.current)),Me=null;return}s.flags&32768?($e||l===1?n=!0:Xa||(Le&536870912)!==0?n=!1:(Os=n=!0,(l===2||l===9||l===3||l===6)&&(l=Bn.current,l!==null&&l.tag===13&&(l.flags|=16384))),b_(s,n)):Bu(s)}function Bu(n){var s=n;do{if((s.flags&32768)!==0){b_(s,Os);return}n=s.return;var a=Mw(s.alternate,s,is);if(a!==null){Me=a;return}if(s=s.sibling,s!==null){Me=s;return}Me=s=n}while(s!==null);ft===0&&(ft=5)}function b_(n,s){do{var a=kw(n.alternate,n);if(a!==null){a.flags&=32767,Me=a;return}if(a=n.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!s&&(n=n.sibling,n!==null)){Me=n;return}Me=n=a}while(n!==null);ft=6,Me=null}function A_(n,s,a,l,h,f,E,S,R){n.cancelPendingCommit=null;do Fu();while(Ft!==0);if((Ye&6)!==0)throw Error(r(327));if(s!==null){if(s===n.current)throw Error(r(177));if(f=s.lanes|s.childLanes,f|=Zd,Ho(n,a,f,E,S,R),n===st&&(Me=st=null,Le=0),Wa=s,Vs=n,Ja=a,im=f,sm=h,f_=l,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,$w(_r,function(){return R_(),null})):(n.callbackNode=null,n.callbackPriority=0),l=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||l){l=Q.T,Q.T=null,h=re.p,re.p=2,E=Ye,Ye|=4;try{Vw(n,s,a)}finally{Ye=E,re.p=h,Q.T=l}}Ft=1,S_(),w_(),I_()}}function S_(){if(Ft===1){Ft=0;var n=Vs,s=Wa,a=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||a){a=Q.T,Q.T=null;var l=re.p;re.p=2;var h=Ye;Ye|=4;try{a_(s,n);var f=Tm,E=dy(n.containerInfo),S=f.focusedElem,R=f.selectionRange;if(E!==S&&S&&S.ownerDocument&&hy(S.ownerDocument.documentElement,S)){if(R!==null&&$d(S)){var F=R.start,Y=R.end;if(Y===void 0&&(Y=F),"selectionStart"in S)S.selectionStart=F,S.selectionEnd=Math.min(Y,S.value.length);else{var J=S.ownerDocument||document,H=J&&J.defaultView||window;if(H.getSelection){var G=H.getSelection(),be=S.textContent.length,_e=Math.min(R.start,be),et=R.end===void 0?_e:Math.min(R.end,be);!G.extend&&_e>et&&(E=et,et=_e,_e=E);var L=uy(S,_e),M=uy(S,et);if(L&&M&&(G.rangeCount!==1||G.anchorNode!==L.node||G.anchorOffset!==L.offset||G.focusNode!==M.node||G.focusOffset!==M.offset)){var B=J.createRange();B.setStart(L.node,L.offset),G.removeAllRanges(),_e>et?(G.addRange(B),G.extend(M.node,M.offset)):(B.setEnd(M.node,M.offset),G.addRange(B))}}}}for(J=[],G=S;G=G.parentNode;)G.nodeType===1&&J.push({element:G,left:G.scrollLeft,top:G.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<J.length;S++){var X=J[S];X.element.scrollLeft=X.left,X.element.scrollTop=X.top}}th=!!_m,Tm=_m=null}finally{Ye=h,re.p=l,Q.T=a}}n.current=s,Ft=2}}function w_(){if(Ft===2){Ft=0;var n=Vs,s=Wa,a=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||a){a=Q.T,Q.T=null;var l=re.p;re.p=2;var h=Ye;Ye|=4;try{n_(n,s.alternate,s)}finally{Ye=h,re.p=l,Q.T=a}}Ft=3}}function I_(){if(Ft===4||Ft===3){Ft=0,Uc();var n=Vs,s=Wa,a=Ja,l=f_;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Ft=5:(Ft=0,Wa=Vs=null,N_(n,n.pendingLanes));var h=n.pendingLanes;if(h===0&&(ks=null),va(a),s=s.stateNode,Qe&&typeof Qe.onCommitFiberRoot=="function")try{Qe.onCommitFiberRoot(ht,s,void 0,(s.current.flags&128)===128)}catch{}if(l!==null){s=Q.T,h=re.p,re.p=2,Q.T=null;try{for(var f=n.onRecoverableError,E=0;E<l.length;E++){var S=l[E];f(S.value,{componentStack:S.stack})}}finally{Q.T=s,re.p=h}}(Ja&3)!==0&&Fu(),bi(n),h=n.pendingLanes,(a&4194090)!==0&&(h&42)!==0?n===rm?Ml++:(Ml=0,rm=n):Ml=0,kl(0)}}function N_(n,s){(n.pooledCacheLanes&=s)===0&&(s=n.pooledCache,s!=null&&(n.pooledCache=null,fl(s)))}function Fu(n){return S_(),w_(),I_(),R_()}function R_(){if(Ft!==5)return!1;var n=Vs,s=im;im=0;var a=va(Ja),l=Q.T,h=re.p;try{re.p=32>a?32:a,Q.T=null,a=sm,sm=null;var f=Vs,E=Ja;if(Ft=0,Wa=Vs=null,Ja=0,(Ye&6)!==0)throw Error(r(331));var S=Ye;if(Ye|=4,h_(f.current),l_(f,f.current,E,a),Ye=S,kl(0,!1),Qe&&typeof Qe.onPostCommitFiberRoot=="function")try{Qe.onPostCommitFiberRoot(ht,f)}catch{}return!0}finally{re.p=h,Q.T=l,N_(n,s)}}function C_(n,s,a){s=Un(a,s),s=jf(n.stateNode,s,2),n=ws(n,s,2),n!==null&&(Vi(n,2),bi(n))}function tt(n,s,a){if(n.tag===3)C_(n,n,a);else for(;s!==null;){if(s.tag===3){C_(s,n,a);break}else if(s.tag===1){var l=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(ks===null||!ks.has(l))){n=Un(a,n),a=Mv(2),l=ws(s,a,2),l!==null&&(kv(a,l,s,n),Vi(l,2),bi(l));break}}s=s.return}}function cm(n,s,a){var l=n.pingCache;if(l===null){l=n.pingCache=new Uw;var h=new Set;l.set(s,h)}else h=l.get(s),h===void 0&&(h=new Set,l.set(s,h));h.has(a)||(Jf=!0,h.add(a),n=Fw.bind(null,n,s,a),s.then(n,n))}function Fw(n,s,a){var l=n.pingCache;l!==null&&l.delete(s),n.pingedLanes|=n.suspendedLanes&a,n.warmLanes&=~a,st===n&&(Le&a)===a&&(ft===4||ft===3&&(Le&62914560)===Le&&300>On()-nm?(Ye&2)===0&&eo(n,0):em|=a,Za===Le&&(Za=0)),bi(n)}function x_(n,s){s===0&&(s=Fo()),n=Pa(n,s),n!==null&&(Vi(n,s),bi(n))}function Hw(n){var s=n.memoizedState,a=0;s!==null&&(a=s.retryLane),x_(n,a)}function Gw(n,s){var a=0;switch(n.tag){case 13:var l=n.stateNode,h=n.memoizedState;h!==null&&(a=h.retryLane);break;case 19:l=n.stateNode;break;case 22:l=n.stateNode._retryCache;break;default:throw Error(r(314))}l!==null&&l.delete(s),x_(n,a)}function $w(n,s){return yr(n,s)}var Hu=null,no=null,um=!1,Gu=!1,hm=!1,Wr=0;function bi(n){n!==no&&n.next===null&&(no===null?Hu=no=n:no=no.next=n),Gu=!0,um||(um=!0,Qw())}function kl(n,s){if(!hm&&Gu){hm=!0;do for(var a=!1,l=Hu;l!==null;){if(n!==0){var h=l.pendingLanes;if(h===0)var f=0;else{var E=l.suspendedLanes,S=l.pingedLanes;f=(1<<31-Xt(42|n)+1)-1,f&=h&~(E&~S),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(a=!0,k_(l,f))}else f=Le,f=ya(l,l===st?f:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(f&3)===0||Ar(l,f)||(a=!0,k_(l,f));l=l.next}while(a);hm=!1}}function Kw(){D_()}function D_(){Gu=um=!1;var n=0;Wr!==0&&(nI()&&(n=Wr),Wr=0);for(var s=On(),a=null,l=Hu;l!==null;){var h=l.next,f=O_(l,s);f===0?(l.next=null,a===null?Hu=h:a.next=h,h===null&&(no=a)):(a=l,(n!==0||(f&3)!==0)&&(Gu=!0)),l=h}kl(n)}function O_(n,s){for(var a=n.suspendedLanes,l=n.pingedLanes,h=n.expirationTimes,f=n.pendingLanes&-62914561;0<f;){var E=31-Xt(f),S=1<<E,R=h[E];R===-1?((S&a)===0||(S&l)!==0)&&(h[E]=qo(S,s)):R<=s&&(n.expiredLanes|=S),f&=~S}if(s=st,a=Le,a=ya(n,n===s?a:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l=n.callbackNode,a===0||n===s&&(Xe===2||Xe===9)||n.cancelPendingCommit!==null)return l!==null&&l!==null&&vr(l),n.callbackNode=null,n.callbackPriority=0;if((a&3)===0||Ar(n,a)){if(s=a&-a,s===n.callbackPriority)return s;switch(l!==null&&vr(l),va(a)){case 2:case 8:a=pa;break;case 32:a=_r;break;case 268435456:a=ga;break;default:a=_r}return l=M_.bind(null,n),a=yr(a,l),n.callbackPriority=s,n.callbackNode=a,s}return l!==null&&l!==null&&vr(l),n.callbackPriority=2,n.callbackNode=null,2}function M_(n,s){if(Ft!==0&&Ft!==5)return n.callbackNode=null,n.callbackPriority=0,null;var a=n.callbackNode;if(Fu()&&n.callbackNode!==a)return null;var l=Le;return l=ya(n,n===st?l:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l===0?null:(p_(n,l,s),O_(n,On()),n.callbackNode!=null&&n.callbackNode===a?M_.bind(null,n):null)}function k_(n,s){if(Fu())return null;p_(n,s,!0)}function Qw(){sI(function(){(Ye&6)!==0?yr(Lo,Kw):D_()})}function dm(){return Wr===0&&(Wr=Bo()),Wr}function V_(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Sa(""+n)}function P_(n,s){var a=s.ownerDocument.createElement("input");return a.name=s.name,a.value=s.value,n.id&&a.setAttribute("form",n.id),s.parentNode.insertBefore(a,s),n=new FormData(n),a.parentNode.removeChild(a),n}function Yw(n,s,a,l,h){if(s==="submit"&&a&&a.stateNode===h){var f=V_((h[vt]||null).action),E=l.submitter;E&&(s=(s=E[vt]||null)?V_(s.formAction):E.getAttribute("formAction"),s!==null&&(f=s,E=null));var S=new wa("action","action",null,l,h);n.push({event:S,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Wr!==0){var R=E?P_(h,E):new FormData(h);Of(a,{pending:!0,data:R,method:h.method,action:f},null,R)}}else typeof f=="function"&&(S.preventDefault(),R=E?P_(h,E):new FormData(h),Of(a,{pending:!0,data:R,method:h.method,action:f},f,R))},currentTarget:h}]})}}for(var fm=0;fm<Xd.length;fm++){var mm=Xd[fm],Xw=mm.toLowerCase(),Zw=mm[0].toUpperCase()+mm.slice(1);Zn(Xw,"on"+Zw)}Zn(py,"onAnimationEnd"),Zn(gy,"onAnimationIteration"),Zn(yy,"onAnimationStart"),Zn("dblclick","onDoubleClick"),Zn("focusin","onFocus"),Zn("focusout","onBlur"),Zn(mw,"onTransitionRun"),Zn(pw,"onTransitionStart"),Zn(gw,"onTransitionCancel"),Zn(vy,"onTransitionEnd"),ji("onMouseEnter",["mouseout","mouseover"]),ji("onMouseLeave",["mouseout","mouseover"]),ji("onPointerEnter",["pointerout","pointerover"]),ji("onPointerLeave",["pointerout","pointerover"]),Yn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Yn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Yn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Yn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Yn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Yn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ww=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Vl));function j_(n,s){s=(s&4)!==0;for(var a=0;a<n.length;a++){var l=n[a],h=l.event;l=l.listeners;e:{var f=void 0;if(s)for(var E=l.length-1;0<=E;E--){var S=l[E],R=S.instance,F=S.currentTarget;if(S=S.listener,R!==f&&h.isPropagationStopped())break e;f=S,h.currentTarget=F;try{f(h)}catch(Y){Ou(Y)}h.currentTarget=null,f=R}else for(E=0;E<l.length;E++){if(S=l[E],R=S.instance,F=S.currentTarget,S=S.listener,R!==f&&h.isPropagationStopped())break e;f=S,h.currentTarget=F;try{f(h)}catch(Y){Ou(Y)}h.currentTarget=null,f=R}}}}function ke(n,s){var a=s[$o];a===void 0&&(a=s[$o]=new Set);var l=n+"__bubble";a.has(l)||(U_(s,n,2,!1),a.add(l))}function pm(n,s,a){var l=0;s&&(l|=4),U_(a,n,l,s)}var $u="_reactListening"+Math.random().toString(36).slice(2);function gm(n){if(!n[$u]){n[$u]=!0,Ko.forEach(function(a){a!=="selectionchange"&&(Ww.has(a)||pm(a,!1,n),pm(a,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[$u]||(s[$u]=!0,pm("selectionchange",!1,s))}}function U_(n,s,a,l){switch(lT(s)){case 2:var h=wI;break;case 8:h=II;break;default:h=xm}a=h.bind(null,s,a,n),h=void 0,!Pn||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(h=!0),l?h!==void 0?n.addEventListener(s,a,{capture:!0,passive:h}):n.addEventListener(s,a,!0):h!==void 0?n.addEventListener(s,a,{passive:h}):n.addEventListener(s,a,!1)}function ym(n,s,a,l,h){var f=l;if((s&1)===0&&(s&2)===0&&l!==null)e:for(;;){if(l===null)return;var E=l.tag;if(E===3||E===4){var S=l.stateNode.containerInfo;if(S===h)break;if(E===4)for(E=l.return;E!==null;){var R=E.tag;if((R===3||R===4)&&E.stateNode.containerInfo===h)return;E=E.return}for(;S!==null;){if(E=Pi(S),E===null)return;if(R=E.tag,R===5||R===6||R===26||R===27){l=f=E;continue e}S=S.parentNode}}l=l.return}Qc(function(){var F=f,Y=Vn(a),J=[];e:{var H=_y.get(n);if(H!==void 0){var G=wa,be=n;switch(n){case"keypress":if(fi(a)===0)break e;case"keydown":case"keyup":G=Da;break;case"focusin":be="focus",G=Ra;break;case"focusout":be="blur",G=Ra;break;case"beforeblur":case"afterblur":G=Ra;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":G=jn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":G=Bd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":G=nu;break;case py:case gy:case yy:G=Ca;break;case vy:G=su;break;case"scroll":case"scrollend":G=Yc;break;case"wheel":G=Oa;break;case"copy":case"cut":case"paste":G=xa;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":G=rl;break;case"toggle":case"beforetoggle":G=au}var _e=(s&4)!==0,et=!_e&&(n==="scroll"||n==="scrollend"),L=_e?H!==null?H+"Capture":null:H;_e=[];for(var M=F,B;M!==null;){var X=M;if(B=X.stateNode,X=X.tag,X!==5&&X!==26&&X!==27||B===null||L===null||(X=Dr(M,L),X!=null&&_e.push(Pl(M,X,B))),et)break;M=M.return}0<_e.length&&(H=new G(H,be,null,a,Y),J.push({event:H,listeners:_e}))}}if((s&7)===0){e:{if(H=n==="mouseover"||n==="pointerover",G=n==="mouseout"||n==="pointerout",H&&a!==zi&&(be=a.relatedTarget||a.fromElement)&&(Pi(be)||be[Mn]))break e;if((G||H)&&(H=Y.window===Y?Y:(H=Y.ownerDocument)?H.defaultView||H.parentWindow:window,G?(be=a.relatedTarget||a.toElement,G=F,be=be?Pi(be):null,be!==null&&(et=c(be),_e=be.tag,be!==et||_e!==5&&_e!==27&&_e!==6)&&(be=null)):(G=null,be=F),G!==be)){if(_e=jn,X="onMouseLeave",L="onMouseEnter",M="mouse",(n==="pointerout"||n==="pointerover")&&(_e=rl,X="onPointerLeave",L="onPointerEnter",M="pointer"),et=G==null?H:ci(G),B=be==null?H:ci(be),H=new _e(X,M+"leave",G,a,Y),H.target=et,H.relatedTarget=B,X=null,Pi(Y)===F&&(_e=new _e(L,M+"enter",be,a,Y),_e.target=B,_e.relatedTarget=et,X=_e),et=X,G&&be)t:{for(_e=G,L=be,M=0,B=_e;B;B=io(B))M++;for(B=0,X=L;X;X=io(X))B++;for(;0<M-B;)_e=io(_e),M--;for(;0<B-M;)L=io(L),B--;for(;M--;){if(_e===L||L!==null&&_e===L.alternate)break t;_e=io(_e),L=io(L)}_e=null}else _e=null;G!==null&&L_(J,H,G,_e,!1),be!==null&&et!==null&&L_(J,et,be,_e,!0)}}e:{if(H=F?ci(F):window,G=H.nodeName&&H.nodeName.toLowerCase(),G==="select"||G==="input"&&H.type==="file")var he=sy;else if(It(H))if(ry)he=hw;else{he=cw;var De=lw}else G=H.nodeName,!G||G.toLowerCase()!=="input"||H.type!=="checkbox"&&H.type!=="radio"?F&&Wo(F.elementType)&&(he=sy):he=uw;if(he&&(he=he(n,F))){Gi(J,he,a,Y);break e}De&&De(n,H,F),n==="focusout"&&F&&H.type==="number"&&F.memoizedProps.value!=null&&Ts(H,"number",H.value)}switch(De=F?ci(F):window,n){case"focusin":(It(De)||De.contentEditable==="true")&&(Ma=De,Kd=F,ll=null);break;case"focusout":ll=Kd=Ma=null;break;case"mousedown":Qd=!0;break;case"contextmenu":case"mouseup":case"dragend":Qd=!1,fy(J,a,Y);break;case"selectionchange":if(fw)break;case"keydown":case"keyup":fy(J,a,Y)}var fe;if(gi)e:{switch(n){case"compositionstart":var Te="onCompositionStart";break e;case"compositionend":Te="onCompositionEnd";break e;case"compositionupdate":Te="onCompositionUpdate";break e}Te=void 0}else je?$(n,a)&&(Te="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Te="onCompositionStart");Te&&(_&&a.locale!=="ko"&&(je||Te!=="onCompositionStart"?Te==="onCompositionEnd"&&je&&(fe=el()):(di=Y,Es="value"in di?di.value:di.textContent,je=!0)),De=Ku(F,Te),0<De.length&&(Te=new il(Te,n,null,a,Y),J.push({event:Te,listeners:De}),fe?Te.data=fe:(fe=se(a),fe!==null&&(Te.data=fe)))),(fe=y?wt(n,a):Ue(n,a))&&(Te=Ku(F,"onBeforeInput"),0<Te.length&&(De=new il("onBeforeInput","beforeinput",null,a,Y),J.push({event:De,listeners:Te}),De.data=fe)),Yw(J,n,F,a,Y)}j_(J,s)})}function Pl(n,s,a){return{instance:n,listener:s,currentTarget:a}}function Ku(n,s){for(var a=s+"Capture",l=[];n!==null;){var h=n,f=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||f===null||(h=Dr(n,a),h!=null&&l.unshift(Pl(n,h,f)),h=Dr(n,s),h!=null&&l.push(Pl(n,h,f))),n.tag===3)return l;n=n.return}return[]}function io(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function L_(n,s,a,l,h){for(var f=s._reactName,E=[];a!==null&&a!==l;){var S=a,R=S.alternate,F=S.stateNode;if(S=S.tag,R!==null&&R===l)break;S!==5&&S!==26&&S!==27||F===null||(R=F,h?(F=Dr(a,f),F!=null&&E.unshift(Pl(a,F,R))):h||(F=Dr(a,f),F!=null&&E.push(Pl(a,F,R)))),a=a.return}E.length!==0&&n.push({event:s,listeners:E})}var Jw=/\r\n?/g,eI=/\u0000|\uFFFD/g;function z_(n){return(typeof n=="string"?n:""+n).replace(Jw,`
`).replace(eI,"")}function q_(n,s){return s=z_(s),z_(n)===s}function Qu(){}function Je(n,s,a,l,h,f){switch(a){case"children":typeof l=="string"?s==="body"||s==="textarea"&&l===""||kn(n,l):(typeof l=="number"||typeof l=="bigint")&&s!=="body"&&kn(n,""+l);break;case"className":ui(n,"class",l);break;case"tabIndex":ui(n,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":ui(n,a,l);break;case"style":Zo(n,l,f);break;case"data":if(s!=="object"){ui(n,"data",l);break}case"src":case"href":if(l===""&&(s!=="a"||a!=="href")){n.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(a);break}l=Sa(""+l),n.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){n.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(a==="formAction"?(s!=="input"&&Je(n,s,"name",h.name,h,null),Je(n,s,"formEncType",h.formEncType,h,null),Je(n,s,"formMethod",h.formMethod,h,null),Je(n,s,"formTarget",h.formTarget,h,null)):(Je(n,s,"encType",h.encType,h,null),Je(n,s,"method",h.method,h,null),Je(n,s,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(a);break}l=Sa(""+l),n.setAttribute(a,l);break;case"onClick":l!=null&&(n.onclick=Qu);break;case"onScroll":l!=null&&ke("scroll",n);break;case"onScrollEnd":l!=null&&ke("scrollend",n);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(r(60));n.innerHTML=a}}break;case"multiple":n.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":n.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){n.removeAttribute("xlink:href");break}a=Sa(""+l),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,""+l):n.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,""):n.removeAttribute(a);break;case"capture":case"download":l===!0?n.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,l):n.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?n.setAttribute(a,l):n.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?n.removeAttribute(a):n.setAttribute(a,l);break;case"popover":ke("beforetoggle",n),ke("toggle",n),_s(n,"popover",l);break;case"xlinkActuate":zt(n,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":zt(n,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":zt(n,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":zt(n,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":zt(n,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":zt(n,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":zt(n,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":zt(n,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":zt(n,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":_s(n,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=zd.get(a)||a,_s(n,a,l))}}function vm(n,s,a,l,h,f){switch(a){case"style":Zo(n,l,f);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(r(60));n.innerHTML=a}}break;case"children":typeof l=="string"?kn(n,l):(typeof l=="number"||typeof l=="bigint")&&kn(n,""+l);break;case"onScroll":l!=null&&ke("scroll",n);break;case"onScrollEnd":l!=null&&ke("scrollend",n);break;case"onClick":l!=null&&(n.onclick=Qu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!_a.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),s=a.slice(2,h?a.length-7:void 0),f=n[vt]||null,f=f!=null?f[a]:null,typeof f=="function"&&n.removeEventListener(s,f,h),typeof l=="function")){typeof f!="function"&&f!==null&&(a in n?n[a]=null:n.hasAttribute(a)&&n.removeAttribute(a)),n.addEventListener(s,l,h);break e}a in n?n[a]=l:l===!0?n.setAttribute(a,""):_s(n,a,l)}}}function Ht(n,s,a){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ke("error",n),ke("load",n);var l=!1,h=!1,f;for(f in a)if(a.hasOwnProperty(f)){var E=a[f];if(E!=null)switch(f){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:Je(n,s,f,E,a,null)}}h&&Je(n,s,"srcSet",a.srcSet,a,null),l&&Je(n,s,"src",a.src,a,null);return;case"input":ke("invalid",n);var S=f=E=h=null,R=null,F=null;for(l in a)if(a.hasOwnProperty(l)){var Y=a[l];if(Y!=null)switch(l){case"name":h=Y;break;case"type":E=Y;break;case"checked":R=Y;break;case"defaultChecked":F=Y;break;case"value":f=Y;break;case"defaultValue":S=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(r(137,s));break;default:Je(n,s,l,Y,a,null)}}Rr(n,f,S,R,F,E,h,!1),Aa(n);return;case"select":ke("invalid",n),l=E=f=null;for(h in a)if(a.hasOwnProperty(h)&&(S=a[h],S!=null))switch(h){case"value":f=S;break;case"defaultValue":E=S;break;case"multiple":l=S;default:Je(n,s,h,S,a,null)}s=f,a=E,n.multiple=!!l,s!=null?Li(n,!!l,s,!1):a!=null&&Li(n,!!l,a,!0);return;case"textarea":ke("invalid",n),f=h=l=null;for(E in a)if(a.hasOwnProperty(E)&&(S=a[E],S!=null))switch(E){case"value":l=S;break;case"defaultValue":h=S;break;case"children":f=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(r(91));break;default:Je(n,s,E,S,a,null)}Cr(n,l,h,f),Aa(n);return;case"option":for(R in a)if(a.hasOwnProperty(R)&&(l=a[R],l!=null))switch(R){case"selected":n.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Je(n,s,R,l,a,null)}return;case"dialog":ke("beforetoggle",n),ke("toggle",n),ke("cancel",n),ke("close",n);break;case"iframe":case"object":ke("load",n);break;case"video":case"audio":for(l=0;l<Vl.length;l++)ke(Vl[l],n);break;case"image":ke("error",n),ke("load",n);break;case"details":ke("toggle",n);break;case"embed":case"source":case"link":ke("error",n),ke("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(F in a)if(a.hasOwnProperty(F)&&(l=a[F],l!=null))switch(F){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:Je(n,s,F,l,a,null)}return;default:if(Wo(s)){for(Y in a)a.hasOwnProperty(Y)&&(l=a[Y],l!==void 0&&vm(n,s,Y,l,a,void 0));return}}for(S in a)a.hasOwnProperty(S)&&(l=a[S],l!=null&&Je(n,s,S,l,a,null))}function tI(n,s,a,l){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,f=null,E=null,S=null,R=null,F=null,Y=null;for(G in a){var J=a[G];if(a.hasOwnProperty(G)&&J!=null)switch(G){case"checked":break;case"value":break;case"defaultValue":R=J;default:l.hasOwnProperty(G)||Je(n,s,G,null,l,J)}}for(var H in l){var G=l[H];if(J=a[H],l.hasOwnProperty(H)&&(G!=null||J!=null))switch(H){case"type":f=G;break;case"name":h=G;break;case"checked":F=G;break;case"defaultChecked":Y=G;break;case"value":E=G;break;case"defaultValue":S=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(r(137,s));break;default:G!==J&&Je(n,s,H,G,l,J)}}_n(n,E,S,R,F,Y,f,h);return;case"select":G=E=S=H=null;for(f in a)if(R=a[f],a.hasOwnProperty(f)&&R!=null)switch(f){case"value":break;case"multiple":G=R;default:l.hasOwnProperty(f)||Je(n,s,f,null,l,R)}for(h in l)if(f=l[h],R=a[h],l.hasOwnProperty(h)&&(f!=null||R!=null))switch(h){case"value":H=f;break;case"defaultValue":S=f;break;case"multiple":E=f;default:f!==R&&Je(n,s,h,f,l,R)}s=S,a=E,l=G,H!=null?Li(n,!!a,H,!1):!!l!=!!a&&(s!=null?Li(n,!!a,s,!0):Li(n,!!a,a?[]:"",!1));return;case"textarea":G=H=null;for(S in a)if(h=a[S],a.hasOwnProperty(S)&&h!=null&&!l.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:Je(n,s,S,null,l,h)}for(E in l)if(h=l[E],f=a[E],l.hasOwnProperty(E)&&(h!=null||f!=null))switch(E){case"value":H=h;break;case"defaultValue":G=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(r(91));break;default:h!==f&&Je(n,s,E,h,l,f)}Ze(n,H,G);return;case"option":for(var be in a)if(H=a[be],a.hasOwnProperty(be)&&H!=null&&!l.hasOwnProperty(be))switch(be){case"selected":n.selected=!1;break;default:Je(n,s,be,null,l,H)}for(R in l)if(H=l[R],G=a[R],l.hasOwnProperty(R)&&H!==G&&(H!=null||G!=null))switch(R){case"selected":n.selected=H&&typeof H!="function"&&typeof H!="symbol";break;default:Je(n,s,R,H,l,G)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var _e in a)H=a[_e],a.hasOwnProperty(_e)&&H!=null&&!l.hasOwnProperty(_e)&&Je(n,s,_e,null,l,H);for(F in l)if(H=l[F],G=a[F],l.hasOwnProperty(F)&&H!==G&&(H!=null||G!=null))switch(F){case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(r(137,s));break;default:Je(n,s,F,H,l,G)}return;default:if(Wo(s)){for(var et in a)H=a[et],a.hasOwnProperty(et)&&H!==void 0&&!l.hasOwnProperty(et)&&vm(n,s,et,void 0,l,H);for(Y in l)H=l[Y],G=a[Y],!l.hasOwnProperty(Y)||H===G||H===void 0&&G===void 0||vm(n,s,Y,H,l,G);return}}for(var L in a)H=a[L],a.hasOwnProperty(L)&&H!=null&&!l.hasOwnProperty(L)&&Je(n,s,L,null,l,H);for(J in l)H=l[J],G=a[J],!l.hasOwnProperty(J)||H===G||H==null&&G==null||Je(n,s,J,H,l,G)}var _m=null,Tm=null;function Yu(n){return n.nodeType===9?n:n.ownerDocument}function B_(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function F_(n,s){if(n===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&s==="foreignObject"?0:n}function Em(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var bm=null;function nI(){var n=window.event;return n&&n.type==="popstate"?n===bm?!1:(bm=n,!0):(bm=null,!1)}var H_=typeof setTimeout=="function"?setTimeout:void 0,iI=typeof clearTimeout=="function"?clearTimeout:void 0,G_=typeof Promise=="function"?Promise:void 0,sI=typeof queueMicrotask=="function"?queueMicrotask:typeof G_<"u"?function(n){return G_.resolve(null).then(n).catch(rI)}:H_;function rI(n){setTimeout(function(){throw n})}function js(n){return n==="head"}function $_(n,s){var a=s,l=0,h=0;do{var f=a.nextSibling;if(n.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(0<l&&8>l){a=l;var E=n.ownerDocument;if(a&1&&jl(E.documentElement),a&2&&jl(E.body),a&4)for(a=E.head,jl(a),E=a.firstChild;E;){var S=E.nextSibling,R=E.nodeName;E[Sr]||R==="SCRIPT"||R==="STYLE"||R==="LINK"&&E.rel.toLowerCase()==="stylesheet"||a.removeChild(E),E=S}}if(h===0){n.removeChild(f),Gl(s);return}h--}else a==="$"||a==="$?"||a==="$!"?h++:l=a.charCodeAt(0)-48;else l=0;a=f}while(a);Gl(s)}function Am(n){var s=n.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var a=s;switch(s=s.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Am(a),vs(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}n.removeChild(a)}}function aI(n,s,a,l){for(;n.nodeType===1;){var h=a;if(n.nodeName.toLowerCase()!==s.toLowerCase()){if(!l&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(l){if(!n[Sr])switch(s){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(f=n.getAttribute("rel"),f==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(f!==h.rel||n.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||n.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||n.getAttribute("title")!==(h.title==null?null:h.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(f=n.getAttribute("src"),(f!==(h.src==null?null:h.src)||n.getAttribute("type")!==(h.type==null?null:h.type)||n.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&f&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(s==="input"&&n.type==="hidden"){var f=h.name==null?null:""+h.name;if(h.type==="hidden"&&n.getAttribute("name")===f)return n}else return n;if(n=Jn(n.nextSibling),n===null)break}return null}function oI(n,s,a){if(s==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!a||(n=Jn(n.nextSibling),n===null))return null;return n}function Sm(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState==="complete"}function lI(n,s){var a=n.ownerDocument;if(n.data!=="$?"||a.readyState==="complete")s();else{var l=function(){s(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),n._reactRetry=l}}function Jn(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return n}var wm=null;function K_(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return n;s--}else a==="/$"&&s++}n=n.previousSibling}return null}function Q_(n,s,a){switch(s=Yu(a),n){case"html":if(n=s.documentElement,!n)throw Error(r(452));return n;case"head":if(n=s.head,!n)throw Error(r(453));return n;case"body":if(n=s.body,!n)throw Error(r(454));return n;default:throw Error(r(451))}}function jl(n){for(var s=n.attributes;s.length;)n.removeAttributeNode(s[0]);vs(n)}var Hn=new Map,Y_=new Set;function Xu(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var ss=re.d;re.d={f:cI,r:uI,D:hI,C:dI,L:fI,m:mI,X:gI,S:pI,M:yI};function cI(){var n=ss.f(),s=qu();return n||s}function uI(n){var s=li(n);s!==null&&s.tag===5&&s.type==="form"?pv(s):ss.r(n)}var so=typeof document>"u"?null:document;function X_(n,s,a){var l=so;if(l&&typeof s=="string"&&s){var h=_t(s);h='link[rel="'+n+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),Y_.has(h)||(Y_.add(h),n={rel:n,crossOrigin:a,href:s},l.querySelector(h)===null&&(s=l.createElement("link"),Ht(s,"link",n),mt(s),l.head.appendChild(s)))}}function hI(n){ss.D(n),X_("dns-prefetch",n,null)}function dI(n,s){ss.C(n,s),X_("preconnect",n,s)}function fI(n,s,a){ss.L(n,s,a);var l=so;if(l&&n&&s){var h='link[rel="preload"][as="'+_t(s)+'"]';s==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+_t(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+_t(a.imageSizes)+'"]')):h+='[href="'+_t(n)+'"]';var f=h;switch(s){case"style":f=ro(n);break;case"script":f=ao(n)}Hn.has(f)||(n=T({rel:"preload",href:s==="image"&&a&&a.imageSrcSet?void 0:n,as:s},a),Hn.set(f,n),l.querySelector(h)!==null||s==="style"&&l.querySelector(Ul(f))||s==="script"&&l.querySelector(Ll(f))||(s=l.createElement("link"),Ht(s,"link",n),mt(s),l.head.appendChild(s)))}}function mI(n,s){ss.m(n,s);var a=so;if(a&&n){var l=s&&typeof s.as=="string"?s.as:"script",h='link[rel="modulepreload"][as="'+_t(l)+'"][href="'+_t(n)+'"]',f=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=ao(n)}if(!Hn.has(f)&&(n=T({rel:"modulepreload",href:n},s),Hn.set(f,n),a.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Ll(f)))return}l=a.createElement("link"),Ht(l,"link",n),mt(l),a.head.appendChild(l)}}}function pI(n,s,a){ss.S(n,s,a);var l=so;if(l&&n){var h=rn(l).hoistableStyles,f=ro(n);s=s||"default";var E=h.get(f);if(!E){var S={loading:0,preload:null};if(E=l.querySelector(Ul(f)))S.loading=5;else{n=T({rel:"stylesheet",href:n,"data-precedence":s},a),(a=Hn.get(f))&&Im(n,a);var R=E=l.createElement("link");mt(R),Ht(R,"link",n),R._p=new Promise(function(F,Y){R.onload=F,R.onerror=Y}),R.addEventListener("load",function(){S.loading|=1}),R.addEventListener("error",function(){S.loading|=2}),S.loading|=4,Zu(E,s,l)}E={type:"stylesheet",instance:E,count:1,state:S},h.set(f,E)}}}function gI(n,s){ss.X(n,s);var a=so;if(a&&n){var l=rn(a).hoistableScripts,h=ao(n),f=l.get(h);f||(f=a.querySelector(Ll(h)),f||(n=T({src:n,async:!0},s),(s=Hn.get(h))&&Nm(n,s),f=a.createElement("script"),mt(f),Ht(f,"link",n),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(h,f))}}function yI(n,s){ss.M(n,s);var a=so;if(a&&n){var l=rn(a).hoistableScripts,h=ao(n),f=l.get(h);f||(f=a.querySelector(Ll(h)),f||(n=T({src:n,async:!0,type:"module"},s),(s=Hn.get(h))&&Nm(n,s),f=a.createElement("script"),mt(f),Ht(f,"link",n),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(h,f))}}function Z_(n,s,a,l){var h=(h=Se.current)?Xu(h):null;if(!h)throw Error(r(446));switch(n){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(s=ro(a.href),a=rn(h).hoistableStyles,l=a.get(s),l||(l={type:"style",instance:null,count:0,state:null},a.set(s,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){n=ro(a.href);var f=rn(h).hoistableStyles,E=f.get(n);if(E||(h=h.ownerDocument||h,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(n,E),(f=h.querySelector(Ul(n)))&&!f._p&&(E.instance=f,E.state.loading=5),Hn.has(n)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Hn.set(n,a),f||vI(h,n,a,E.state))),s&&l===null)throw Error(r(528,""));return E}if(s&&l!==null)throw Error(r(529,""));return null;case"script":return s=a.async,a=a.src,typeof a=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=ao(a),a=rn(h).hoistableScripts,l=a.get(s),l||(l={type:"script",instance:null,count:0,state:null},a.set(s,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,n))}}function ro(n){return'href="'+_t(n)+'"'}function Ul(n){return'link[rel="stylesheet"]['+n+"]"}function W_(n){return T({},n,{"data-precedence":n.precedence,precedence:null})}function vI(n,s,a,l){n.querySelector('link[rel="preload"][as="style"]['+s+"]")?l.loading=1:(s=n.createElement("link"),l.preload=s,s.addEventListener("load",function(){return l.loading|=1}),s.addEventListener("error",function(){return l.loading|=2}),Ht(s,"link",a),mt(s),n.head.appendChild(s))}function ao(n){return'[src="'+_t(n)+'"]'}function Ll(n){return"script[async]"+n}function J_(n,s,a){if(s.count++,s.instance===null)switch(s.type){case"style":var l=n.querySelector('style[data-href~="'+_t(a.href)+'"]');if(l)return s.instance=l,mt(l),l;var h=T({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(n.ownerDocument||n).createElement("style"),mt(l),Ht(l,"style",h),Zu(l,a.precedence,n),s.instance=l;case"stylesheet":h=ro(a.href);var f=n.querySelector(Ul(h));if(f)return s.state.loading|=4,s.instance=f,mt(f),f;l=W_(a),(h=Hn.get(h))&&Im(l,h),f=(n.ownerDocument||n).createElement("link"),mt(f);var E=f;return E._p=new Promise(function(S,R){E.onload=S,E.onerror=R}),Ht(f,"link",l),s.state.loading|=4,Zu(f,a.precedence,n),s.instance=f;case"script":return f=ao(a.src),(h=n.querySelector(Ll(f)))?(s.instance=h,mt(h),h):(l=a,(h=Hn.get(f))&&(l=T({},a),Nm(l,h)),n=n.ownerDocument||n,h=n.createElement("script"),mt(h),Ht(h,"link",l),n.head.appendChild(h),s.instance=h);case"void":return null;default:throw Error(r(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(l=s.instance,s.state.loading|=4,Zu(l,a.precedence,n));return s.instance}function Zu(n,s,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,f=h,E=0;E<l.length;E++){var S=l[E];if(S.dataset.precedence===s)f=S;else if(f!==h)break}f?f.parentNode.insertBefore(n,f.nextSibling):(s=a.nodeType===9?a.head:a,s.insertBefore(n,s.firstChild))}function Im(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.title==null&&(n.title=s.title)}function Nm(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.integrity==null&&(n.integrity=s.integrity)}var Wu=null;function eT(n,s,a){if(Wu===null){var l=new Map,h=Wu=new Map;h.set(a,l)}else h=Wu,l=h.get(a),l||(l=new Map,h.set(a,l));if(l.has(n))return l;for(l.set(n,null),a=a.getElementsByTagName(n),h=0;h<a.length;h++){var f=a[h];if(!(f[Sr]||f[St]||n==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var E=f.getAttribute(s)||"";E=n+E;var S=l.get(E);S?S.push(f):l.set(E,[f])}}return l}function tT(n,s,a){n=n.ownerDocument||n,n.head.insertBefore(a,s==="title"?n.querySelector("head > title"):null)}function _I(n,s,a){if(a===1||s.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return n=s.disabled,typeof s.precedence=="string"&&n==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function nT(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}var zl=null;function TI(){}function EI(n,s,a){if(zl===null)throw Error(r(475));var l=zl;if(s.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var h=ro(a.href),f=n.querySelector(Ul(h));if(f){n=f._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(l.count++,l=Ju.bind(l),n.then(l,l)),s.state.loading|=4,s.instance=f,mt(f);return}f=n.ownerDocument||n,a=W_(a),(h=Hn.get(h))&&Im(a,h),f=f.createElement("link"),mt(f);var E=f;E._p=new Promise(function(S,R){E.onload=S,E.onerror=R}),Ht(f,"link",a),s.instance=f}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(s,n),(n=s.state.preload)&&(s.state.loading&3)===0&&(l.count++,s=Ju.bind(l),n.addEventListener("load",s),n.addEventListener("error",s))}}function bI(){if(zl===null)throw Error(r(475));var n=zl;return n.stylesheets&&n.count===0&&Rm(n,n.stylesheets),0<n.count?function(s){var a=setTimeout(function(){if(n.stylesheets&&Rm(n,n.stylesheets),n.unsuspend){var l=n.unsuspend;n.unsuspend=null,l()}},6e4);return n.unsuspend=s,function(){n.unsuspend=null,clearTimeout(a)}}:null}function Ju(){if(this.count--,this.count===0){if(this.stylesheets)Rm(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var eh=null;function Rm(n,s){n.stylesheets=null,n.unsuspend!==null&&(n.count++,eh=new Map,s.forEach(AI,n),eh=null,Ju.call(n))}function AI(n,s){if(!(s.state.loading&4)){var a=eh.get(n);if(a)var l=a.get(null);else{a=new Map,eh.set(n,a);for(var h=n.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<h.length;f++){var E=h[f];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(a.set(E.dataset.precedence,E),l=E)}l&&a.set(null,l)}h=s.instance,E=h.getAttribute("data-precedence"),f=a.get(E)||l,f===l&&a.set(null,h),a.set(E,h),this.count++,l=Ju.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),f?f.parentNode.insertBefore(h,f.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(h,n.firstChild)),s.state.loading|=4}}var ql={$$typeof:ie,Provider:null,Consumer:null,_currentValue:me,_currentValue2:me,_threadCount:0};function SI(n,s,a,l,h,f,E,S){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ki(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ki(0),this.hiddenUpdates=ki(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=f,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=S,this.incompleteTransitions=new Map}function iT(n,s,a,l,h,f,E,S,R,F,Y,J){return n=new SI(n,s,a,E,S,R,F,J),s=1,f===!0&&(s|=24),f=En(3,null,null,s),n.current=f,f.stateNode=n,s=cf(),s.refCount++,n.pooledCache=s,s.refCount++,f.memoizedState={element:l,isDehydrated:a,cache:s},ff(f),n}function sT(n){return n?(n=ja,n):ja}function rT(n,s,a,l,h,f){h=sT(h),l.context===null?l.context=h:l.pendingContext=h,l=Ss(s),l.payload={element:a},f=f===void 0?null:f,f!==null&&(l.callback=f),a=ws(n,l,s),a!==null&&(In(a,n,s),yl(a,n,s))}function aT(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<s?a:s}}function Cm(n,s){aT(n,s),(n=n.alternate)&&aT(n,s)}function oT(n){if(n.tag===13){var s=Pa(n,67108864);s!==null&&In(s,n,67108864),Cm(n,67108864)}}var th=!0;function wI(n,s,a,l){var h=Q.T;Q.T=null;var f=re.p;try{re.p=2,xm(n,s,a,l)}finally{re.p=f,Q.T=h}}function II(n,s,a,l){var h=Q.T;Q.T=null;var f=re.p;try{re.p=8,xm(n,s,a,l)}finally{re.p=f,Q.T=h}}function xm(n,s,a,l){if(th){var h=Dm(l);if(h===null)ym(n,s,l,nh,a),cT(n,l);else if(RI(h,n,s,a,l))l.stopPropagation();else if(cT(n,l),s&4&&-1<NI.indexOf(n)){for(;h!==null;){var f=li(h);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var E=Qn(f.pendingLanes);if(E!==0){var S=f;for(S.pendingLanes|=2,S.entangledLanes|=2;E;){var R=1<<31-Xt(E);S.entanglements[1]|=R,E&=~R}bi(f),(Ye&6)===0&&(Lu=On()+500,kl(0))}}break;case 13:S=Pa(f,2),S!==null&&In(S,f,2),qu(),Cm(f,2)}if(f=Dm(l),f===null&&ym(n,s,l,nh,a),f===h)break;h=f}h!==null&&l.stopPropagation()}else ym(n,s,l,null,a)}}function Dm(n){return n=Vn(n),Om(n)}var nh=null;function Om(n){if(nh=null,n=Pi(n),n!==null){var s=c(n);if(s===null)n=null;else{var a=s.tag;if(a===13){if(n=d(s),n!==null)return n;n=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null)}}return nh=n,null}function lT(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(kd()){case Lo:return 2;case pa:return 8;case _r:case Vd:return 32;case ga:return 268435456;default:return 32}default:return 32}}var Mm=!1,Us=null,Ls=null,zs=null,Bl=new Map,Fl=new Map,qs=[],NI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function cT(n,s){switch(n){case"focusin":case"focusout":Us=null;break;case"dragenter":case"dragleave":Ls=null;break;case"mouseover":case"mouseout":zs=null;break;case"pointerover":case"pointerout":Bl.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fl.delete(s.pointerId)}}function Hl(n,s,a,l,h,f){return n===null||n.nativeEvent!==f?(n={blockedOn:s,domEventName:a,eventSystemFlags:l,nativeEvent:f,targetContainers:[h]},s!==null&&(s=li(s),s!==null&&oT(s)),n):(n.eventSystemFlags|=l,s=n.targetContainers,h!==null&&s.indexOf(h)===-1&&s.push(h),n)}function RI(n,s,a,l,h){switch(s){case"focusin":return Us=Hl(Us,n,s,a,l,h),!0;case"dragenter":return Ls=Hl(Ls,n,s,a,l,h),!0;case"mouseover":return zs=Hl(zs,n,s,a,l,h),!0;case"pointerover":var f=h.pointerId;return Bl.set(f,Hl(Bl.get(f)||null,n,s,a,l,h)),!0;case"gotpointercapture":return f=h.pointerId,Fl.set(f,Hl(Fl.get(f)||null,n,s,a,l,h)),!0}return!1}function uT(n){var s=Pi(n.target);if(s!==null){var a=c(s);if(a!==null){if(s=a.tag,s===13){if(s=d(a),s!==null){n.blockedOn=s,qc(n.priority,function(){if(a.tag===13){var l=wn();l=ps(l);var h=Pa(a,l);h!==null&&In(h,a,l),Cm(a,l)}});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function ih(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var a=Dm(n.nativeEvent);if(a===null){a=n.nativeEvent;var l=new a.constructor(a.type,a);zi=l,a.target.dispatchEvent(l),zi=null}else return s=li(a),s!==null&&oT(s),n.blockedOn=a,!1;s.shift()}return!0}function hT(n,s,a){ih(n)&&a.delete(s)}function CI(){Mm=!1,Us!==null&&ih(Us)&&(Us=null),Ls!==null&&ih(Ls)&&(Ls=null),zs!==null&&ih(zs)&&(zs=null),Bl.forEach(hT),Fl.forEach(hT)}function sh(n,s){n.blockedOn===s&&(n.blockedOn=null,Mm||(Mm=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,CI)))}var rh=null;function dT(n){rh!==n&&(rh=n,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){rh===n&&(rh=null);for(var s=0;s<n.length;s+=3){var a=n[s],l=n[s+1],h=n[s+2];if(typeof l!="function"){if(Om(l||a)===null)continue;break}var f=li(a);f!==null&&(n.splice(s,3),s-=3,Of(f,{pending:!0,data:h,method:a.method,action:l},l,h))}}))}function Gl(n){function s(R){return sh(R,n)}Us!==null&&sh(Us,n),Ls!==null&&sh(Ls,n),zs!==null&&sh(zs,n),Bl.forEach(s),Fl.forEach(s);for(var a=0;a<qs.length;a++){var l=qs[a];l.blockedOn===n&&(l.blockedOn=null)}for(;0<qs.length&&(a=qs[0],a.blockedOn===null);)uT(a),a.blockedOn===null&&qs.shift();if(a=(n.ownerDocument||n).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var h=a[l],f=a[l+1],E=h[vt]||null;if(typeof f=="function")E||dT(a);else if(E){var S=null;if(f&&f.hasAttribute("formAction")){if(h=f,E=f[vt]||null)S=E.formAction;else if(Om(h)!==null)continue}else S=E.action;typeof S=="function"?a[l+1]=S:(a.splice(l,3),l-=3),dT(a)}}}function km(n){this._internalRoot=n}ah.prototype.render=km.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(r(409));var a=s.current,l=wn();rT(a,l,n,s,null,null)},ah.prototype.unmount=km.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;rT(n.current,2,null,n,null,null),qu(),s[Mn]=null}};function ah(n){this._internalRoot=n}ah.prototype.unstable_scheduleHydration=function(n){if(n){var s=gs();n={blockedOn:null,target:n,priority:s};for(var a=0;a<qs.length&&s!==0&&s<qs[a].priority;a++);qs.splice(a,0,n),a===0&&uT(n)}};var fT=e.version;if(fT!=="19.1.0")throw Error(r(527,fT,"19.1.0"));re.findDOMNode=function(n){var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(r(188)):(n=Object.keys(n).join(","),Error(r(268,n)));return n=g(s),n=n!==null?v(n):null,n=n===null?null:n.stateNode,n};var xI={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:Q,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var oh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!oh.isDisabled&&oh.supportsFiber)try{ht=oh.inject(xI),Qe=oh}catch{}}return Kl.createRoot=function(n,s){if(!o(n))throw Error(r(299));var a=!1,l="",h=Cv,f=xv,E=Dv,S=null;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(l=s.identifierPrefix),s.onUncaughtError!==void 0&&(h=s.onUncaughtError),s.onCaughtError!==void 0&&(f=s.onCaughtError),s.onRecoverableError!==void 0&&(E=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(S=s.unstable_transitionCallbacks)),s=iT(n,1,!1,null,null,a,l,h,f,E,S,null),n[Mn]=s.current,gm(n),new km(s)},Kl.hydrateRoot=function(n,s,a){if(!o(n))throw Error(r(299));var l=!1,h="",f=Cv,E=xv,S=Dv,R=null,F=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(E=a.onCaughtError),a.onRecoverableError!==void 0&&(S=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(R=a.unstable_transitionCallbacks),a.formState!==void 0&&(F=a.formState)),s=iT(n,1,!0,s,a??null,l,h,f,E,S,R,F),s.context=sT(null),a=s.current,l=wn(),l=ps(l),h=Ss(l),h.callback=null,ws(a,h,l),a=l,s.current.lanes=a,Vi(s,a),bi(s),n[Mn]=s.current,gm(n),new ah(s)},Kl.version="19.1.0",Kl}var AT;function zI(){if(AT)return jm.exports;AT=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),jm.exports=LI(),jm.exports}var qI=zI();const BI=()=>{};var ST={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O0=function(i){const e=[];let t=0;for(let r=0;r<i.length;r++){let o=i.charCodeAt(r);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&r+1<i.length&&(i.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(i.charCodeAt(++r)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},FI=function(i){const e=[];let t=0,r=0;for(;t<i.length;){const o=i[t++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){const c=i[t++];e[r++]=String.fromCharCode((o&31)<<6|c&63)}else if(o>239&&o<365){const c=i[t++],d=i[t++],m=i[t++],g=((o&7)<<18|(c&63)<<12|(d&63)<<6|m&63)-65536;e[r++]=String.fromCharCode(55296+(g>>10)),e[r++]=String.fromCharCode(56320+(g&1023))}else{const c=i[t++],d=i[t++];e[r++]=String.fromCharCode((o&15)<<12|(c&63)<<6|d&63)}}return e.join("")},M0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<i.length;o+=3){const c=i[o],d=o+1<i.length,m=d?i[o+1]:0,g=o+2<i.length,v=g?i[o+2]:0,T=c>>2,A=(c&3)<<4|m>>4;let b=(m&15)<<2|v>>6,k=v&63;g||(k=64,d||(b=64)),r.push(t[T],t[A],t[b],t[k])}return r.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(O0(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):FI(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<i.length;){const c=t[i.charAt(o++)],m=o<i.length?t[i.charAt(o)]:0;++o;const v=o<i.length?t[i.charAt(o)]:64;++o;const A=o<i.length?t[i.charAt(o)]:64;if(++o,c==null||m==null||v==null||A==null)throw new HI;const b=c<<2|m>>4;if(r.push(b),v!==64){const k=m<<4&240|v>>2;if(r.push(k),A!==64){const O=v<<6&192|A;r.push(O)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class HI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const GI=function(i){const e=O0(i);return M0.encodeByteArray(e,!0)},Ch=function(i){return GI(i).replace(/\./g,"")},k0=function(i){try{return M0.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $I(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KI=()=>$I().__FIREBASE_DEFAULTS__,QI=()=>{if(typeof process>"u"||typeof ST>"u")return;const i=ST.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},YI=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&k0(i[1]);return e&&JSON.parse(e)},nd=()=>{try{return BI()||KI()||QI()||YI()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},V0=i=>{var e,t;return(t=(e=nd())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[i]},P0=i=>{const e=V0(i);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},j0=()=>{var i;return(i=nd())===null||i===void 0?void 0:i.config},U0=i=>{var e;return(e=nd())===null||e===void 0?void 0:e[`_${i}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ha(i){return i.endsWith(".cloudworkstations.dev")}async function zp(i){return(await fetch(i,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L0(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",o=i.iat||0,c=i.sub||i.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}}},i);return[Ch(JSON.stringify(t)),Ch(JSON.stringify(d)),""].join(".")}const Wl={};function ZI(){const i={prod:[],emulator:[]};for(const e of Object.keys(Wl))Wl[e]?i.emulator.push(e):i.prod.push(e);return i}function WI(i){let e=document.getElementById(i),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),t=!0),{created:t,element:e}}let wT=!1;function qp(i,e){if(typeof window>"u"||typeof document>"u"||!ha(window.location.host)||Wl[i]===e||Wl[i]||wT)return;Wl[i]=e;function t(b){return`__firebase__banner__${b}`}const r="__firebase__banner",c=ZI().prod.length>0;function d(){const b=document.getElementById(r);b&&b.remove()}function m(b){b.style.display="flex",b.style.background="#7faaf0",b.style.position="fixed",b.style.bottom="5px",b.style.left="5px",b.style.padding=".5em",b.style.borderRadius="5px",b.style.alignItems="center"}function g(b,k){b.setAttribute("width","24"),b.setAttribute("id",k),b.setAttribute("height","24"),b.setAttribute("viewBox","0 0 24 24"),b.setAttribute("fill","none"),b.style.marginLeft="-6px"}function v(){const b=document.createElement("span");return b.style.cursor="pointer",b.style.marginLeft="16px",b.style.fontSize="24px",b.innerHTML=" &times;",b.onclick=()=>{wT=!0,d()},b}function T(b,k){b.setAttribute("id",k),b.innerText="Learn more",b.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",b.setAttribute("target","__blank"),b.style.paddingLeft="5px",b.style.textDecoration="underline"}function A(){const b=WI(r),k=t("text"),O=document.getElementById(k)||document.createElement("span"),z=t("learnmore"),j=document.getElementById(z)||document.createElement("a"),K=t("preprendIcon"),ae=document.getElementById(K)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(b.created){const ie=b.element;m(ie),T(j,z);const ce=v();g(ae,K),ie.append(ae,O,j,ce),document.body.appendChild(ie)}c?(O.innerText="Preview backend disconnected.",ae.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ae.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,O.innerText="Preview backend running in this workspace."),O.setAttribute("id",k)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",A):A()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function JI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(sn())}function eN(){var i;const e=(i=nd())===null||i===void 0?void 0:i.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function tN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function z0(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function nN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function iN(){const i=sn();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function sN(){return!eN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Bp(){try{return typeof indexedDB=="object"}catch{return!1}}function Fp(){return new Promise((i,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(r),i(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var c;e(((c=o.error)===null||c===void 0?void 0:c.message)||"")}}catch(t){e(t)}})}function q0(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rN="FirebaseError";class Kn extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=rN,Object.setPrototypeOf(this,Kn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,hr.prototype.create)}}class hr{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},o=`${this.service}/${e}`,c=this.errors[e],d=c?aN(c,r):"Error",m=`${this.serviceName}: ${d} (${o}).`;return new Kn(o,m,r)}}function aN(i,e){return i.replace(oN,(t,r)=>{const o=e[r];return o!=null?String(o):`<${r}?>`})}const oN=/\{\$([^}]+)}/g;function lN(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function er(i,e){if(i===e)return!0;const t=Object.keys(i),r=Object.keys(e);for(const o of t){if(!r.includes(o))return!1;const c=i[o],d=e[o];if(IT(c)&&IT(d)){if(!er(c,d))return!1}else if(c!==d)return!1}for(const o of r)if(!t.includes(o))return!1;return!0}function IT(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ec(i){const e=[];for(const[t,r]of Object.entries(i))Array.isArray(r)?r.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function cN(i,e){const t=new uN(i,e);return t.subscribe.bind(t)}class uN{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let o;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");hN(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:r},o.next===void 0&&(o.next=qm),o.error===void 0&&(o.error=qm),o.complete===void 0&&(o.complete=qm);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function hN(i,e){if(typeof i!="object"||i===null)return!1;for(const t of e)if(t in i&&typeof i[t]=="function")return!0;return!1}function qm(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dN=1e3,fN=2,mN=4*60*60*1e3,pN=.5;function NT(i,e=dN,t=fN){const r=e*Math.pow(t,i),o=Math.round(pN*r*(Math.random()-.5)*2);return Math.min(mN,r+o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ct(i){return i&&i._delegate?i._delegate:i}class Dn{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gN{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new XI;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e?.identifier),o=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(c){if(o)return null;throw c}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(vN(e))try{this.getOrInitializeService({instanceIdentifier:Jr})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const c=this.getOrInitializeService({instanceIdentifier:o});r.resolve(c)}catch{}}}}clearInstance(e=Jr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Jr){return this.instances.has(e)}getOptions(e=Jr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[c,d]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(c);r===m&&d.resolve(o)}return o}onInit(e,t){var r;const o=this.normalizeInstanceIdentifier(t),c=(r=this.onInitCallbacks.get(o))!==null&&r!==void 0?r:new Set;c.add(e),this.onInitCallbacks.set(o,c);const d=this.instances.get(o);return d&&e(d,o),()=>{c.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const o of r)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:yN(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Jr){return this.component?this.component.multipleInstances?e:Jr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function yN(i){return i===Jr?void 0:i}function vN(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _N{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new gN(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ve;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(Ve||(Ve={}));const TN={debug:Ve.DEBUG,verbose:Ve.VERBOSE,info:Ve.INFO,warn:Ve.WARN,error:Ve.ERROR,silent:Ve.SILENT},EN=Ve.INFO,bN={[Ve.DEBUG]:"log",[Ve.VERBOSE]:"log",[Ve.INFO]:"info",[Ve.WARN]:"warn",[Ve.ERROR]:"error"},AN=(i,e,...t)=>{if(e<i.logLevel)return;const r=new Date().toISOString(),o=bN[e];if(o)console[o](`[${r}]  ${i.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class bc{constructor(e){this.name=e,this._logLevel=EN,this._logHandler=AN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ve))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?TN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ve.DEBUG,...e),this._logHandler(this,Ve.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ve.VERBOSE,...e),this._logHandler(this,Ve.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ve.INFO,...e),this._logHandler(this,Ve.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ve.WARN,...e),this._logHandler(this,Ve.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ve.ERROR,...e),this._logHandler(this,Ve.ERROR,...e)}}const SN=(i,e)=>e.some(t=>i instanceof t);let RT,CT;function wN(){return RT||(RT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function IN(){return CT||(CT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const B0=new WeakMap,lp=new WeakMap,F0=new WeakMap,Bm=new WeakMap,Hp=new WeakMap;function NN(i){const e=new Promise((t,r)=>{const o=()=>{i.removeEventListener("success",c),i.removeEventListener("error",d)},c=()=>{t(Xs(i.result)),o()},d=()=>{r(i.error),o()};i.addEventListener("success",c),i.addEventListener("error",d)});return e.then(t=>{t instanceof IDBCursor&&B0.set(t,i)}).catch(()=>{}),Hp.set(e,i),e}function RN(i){if(lp.has(i))return;const e=new Promise((t,r)=>{const o=()=>{i.removeEventListener("complete",c),i.removeEventListener("error",d),i.removeEventListener("abort",d)},c=()=>{t(),o()},d=()=>{r(i.error||new DOMException("AbortError","AbortError")),o()};i.addEventListener("complete",c),i.addEventListener("error",d),i.addEventListener("abort",d)});lp.set(i,e)}let cp={get(i,e,t){if(i instanceof IDBTransaction){if(e==="done")return lp.get(i);if(e==="objectStoreNames")return i.objectStoreNames||F0.get(i);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Xs(i[e])},set(i,e,t){return i[e]=t,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function CN(i){cp=i(cp)}function xN(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=i.call(Fm(this),e,...t);return F0.set(r,e.sort?e.sort():[e]),Xs(r)}:IN().includes(i)?function(...e){return i.apply(Fm(this),e),Xs(B0.get(this))}:function(...e){return Xs(i.apply(Fm(this),e))}}function DN(i){return typeof i=="function"?xN(i):(i instanceof IDBTransaction&&RN(i),SN(i,wN())?new Proxy(i,cp):i)}function Xs(i){if(i instanceof IDBRequest)return NN(i);if(Bm.has(i))return Bm.get(i);const e=DN(i);return e!==i&&(Bm.set(i,e),Hp.set(e,i)),e}const Fm=i=>Hp.get(i);function H0(i,e,{blocked:t,upgrade:r,blocking:o,terminated:c}={}){const d=indexedDB.open(i,e),m=Xs(d);return r&&d.addEventListener("upgradeneeded",g=>{r(Xs(d.result),g.oldVersion,g.newVersion,Xs(d.transaction),g)}),t&&d.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),m.then(g=>{c&&g.addEventListener("close",()=>c()),o&&g.addEventListener("versionchange",v=>o(v.oldVersion,v.newVersion,v))}).catch(()=>{}),m}const ON=["get","getKey","getAll","getAllKeys","count"],MN=["put","add","delete","clear"],Hm=new Map;function xT(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(Hm.get(e))return Hm.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,o=MN.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(o||ON.includes(t)))return;const c=async function(d,...m){const g=this.transaction(d,o?"readwrite":"readonly");let v=g.store;return r&&(v=v.index(m.shift())),(await Promise.all([v[t](...m),o&&g.done]))[0]};return Hm.set(e,c),c}CN(i=>({...i,get:(e,t,r)=>xT(e,t)||i.get(e,t,r),has:(e,t)=>!!xT(e,t)||i.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(VN(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function VN(i){const e=i.getComponent();return e?.type==="VERSION"}const up="@firebase/app",DT="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ls=new bc("@firebase/app"),PN="@firebase/app-compat",jN="@firebase/analytics-compat",UN="@firebase/analytics",LN="@firebase/app-check-compat",zN="@firebase/app-check",qN="@firebase/auth",BN="@firebase/auth-compat",FN="@firebase/database",HN="@firebase/data-connect",GN="@firebase/database-compat",$N="@firebase/functions",KN="@firebase/functions-compat",QN="@firebase/installations",YN="@firebase/installations-compat",XN="@firebase/messaging",ZN="@firebase/messaging-compat",WN="@firebase/performance",JN="@firebase/performance-compat",e1="@firebase/remote-config",t1="@firebase/remote-config-compat",n1="@firebase/storage",i1="@firebase/storage-compat",s1="@firebase/firestore",r1="@firebase/ai",a1="@firebase/firestore-compat",o1="firebase",l1="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hp="[DEFAULT]",c1={[up]:"fire-core",[PN]:"fire-core-compat",[UN]:"fire-analytics",[jN]:"fire-analytics-compat",[zN]:"fire-app-check",[LN]:"fire-app-check-compat",[qN]:"fire-auth",[BN]:"fire-auth-compat",[FN]:"fire-rtdb",[HN]:"fire-data-connect",[GN]:"fire-rtdb-compat",[$N]:"fire-fn",[KN]:"fire-fn-compat",[QN]:"fire-iid",[YN]:"fire-iid-compat",[XN]:"fire-fcm",[ZN]:"fire-fcm-compat",[WN]:"fire-perf",[JN]:"fire-perf-compat",[e1]:"fire-rc",[t1]:"fire-rc-compat",[n1]:"fire-gcs",[i1]:"fire-gcs-compat",[s1]:"fire-fst",[a1]:"fire-fst-compat",[r1]:"fire-vertex","fire-js":"fire-js",[o1]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xh=new Map,u1=new Map,dp=new Map;function OT(i,e){try{i.container.addComponent(e)}catch(t){ls.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,t)}}function $n(i){const e=i.name;if(dp.has(e))return ls.debug(`There were multiple attempts to register component ${e}.`),!1;dp.set(e,i);for(const t of xh.values())OT(t,i);for(const t of u1.values())OT(t,i);return!0}function fs(i,e){const t=i.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),i.container.getProvider(e)}function ni(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Zs=new hr("app","Firebase",h1);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d1{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Dn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Zs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const da=l1;function G0(i,e={}){let t=i;typeof e!="object"&&(e={name:e});const r=Object.assign({name:hp,automaticDataCollectionEnabled:!0},e),o=r.name;if(typeof o!="string"||!o)throw Zs.create("bad-app-name",{appName:String(o)});if(t||(t=j0()),!t)throw Zs.create("no-options");const c=xh.get(o);if(c){if(er(t,c.options)&&er(r,c.config))return c;throw Zs.create("duplicate-app",{appName:o})}const d=new _N(o);for(const g of dp.values())d.addComponent(g);const m=new d1(t,r,d);return xh.set(o,m),m}function Ac(i=hp){const e=xh.get(i);if(!e&&i===hp&&j0())return G0();if(!e)throw Zs.create("no-app",{appName:i});return e}function nn(i,e,t){var r;let o=(r=c1[i])!==null&&r!==void 0?r:i;t&&(o+=`-${t}`);const c=o.match(/\s|\//),d=e.match(/\s|\//);if(c||d){const m=[`Unable to register library "${o}" with version "${e}":`];c&&m.push(`library name "${o}" contains illegal characters (whitespace or "/")`),c&&d&&m.push("and"),d&&m.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ls.warn(m.join(" "));return}$n(new Dn(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f1="firebase-heartbeat-database",m1=1,uc="firebase-heartbeat-store";let Gm=null;function $0(){return Gm||(Gm=H0(f1,m1,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(uc)}catch(t){console.warn(t)}}}}).catch(i=>{throw Zs.create("idb-open",{originalErrorMessage:i.message})})),Gm}async function p1(i){try{const t=(await $0()).transaction(uc),r=await t.objectStore(uc).get(K0(i));return await t.done,r}catch(e){if(e instanceof Kn)ls.warn(e.message);else{const t=Zs.create("idb-get",{originalErrorMessage:e?.message});ls.warn(t.message)}}}async function MT(i,e){try{const r=(await $0()).transaction(uc,"readwrite");await r.objectStore(uc).put(e,K0(i)),await r.done}catch(t){if(t instanceof Kn)ls.warn(t.message);else{const r=Zs.create("idb-set",{originalErrorMessage:t?.message});ls.warn(r.message)}}}function K0(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g1=1024,y1=30;class v1{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new T1(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=kT();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(d=>d.date===c))return;if(this._heartbeatsCache.heartbeats.push({date:c,agent:o}),this._heartbeatsCache.heartbeats.length>y1){const d=E1(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(d,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){ls.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=kT(),{heartbeatsToSend:r,unsentEntries:o}=_1(this._heartbeatsCache.heartbeats),c=Ch(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(t){return ls.warn(t),""}}}function kT(){return new Date().toISOString().substring(0,10)}function _1(i,e=g1){const t=[];let r=i.slice();for(const o of i){const c=t.find(d=>d.agent===o.agent);if(c){if(c.dates.push(o.date),VT(t)>e){c.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),VT(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class T1{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Bp()?Fp().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await p1(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return MT(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return MT(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function VT(i){return Ch(JSON.stringify({version:2,heartbeats:i})).length}function E1(i){if(i.length===0)return-1;let e=0,t=i[0].date;for(let r=1;r<i.length;r++)i[r].date<t&&(t=i[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b1(i){$n(new Dn("platform-logger",e=>new kN(e),"PRIVATE")),$n(new Dn("heartbeat",e=>new v1(e),"PRIVATE")),nn(up,DT,i),nn(up,DT,"esm2017"),nn("fire-js","")}b1("");function Gp(i,e){var t={};for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&e.indexOf(r)<0&&(t[r]=i[r]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(i);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(i,r[o])&&(t[r[o]]=i[r[o]]);return t}function Q0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const A1=Q0,Y0=new hr("auth","Firebase",Q0());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dh=new bc("@firebase/auth");function S1(i,...e){Dh.logLevel<=Ve.WARN&&Dh.warn(`Auth (${da}): ${i}`,...e)}function yh(i,...e){Dh.logLevel<=Ve.ERROR&&Dh.error(`Auth (${da}): ${i}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cs(i,...e){throw $p(i,...e)}function wi(i,...e){return $p(i,...e)}function X0(i,e,t){const r=Object.assign(Object.assign({},A1()),{[e]:t});return new hr("auth","Firebase",r).create(e,{appName:i.name})}function ia(i){return X0(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function $p(i,...e){if(typeof i!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=i.name),i._errorFactory.create(t,...r)}return Y0.create(i,...e)}function Ae(i,e,...t){if(!i)throw $p(e,...t)}function rs(i){const e="INTERNAL ASSERTION FAILED: "+i;throw yh(e),new Error(e)}function us(i,e){i||rs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fp(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.href)||""}function w1(){return PT()==="http:"||PT()==="https:"}function PT(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I1(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(w1()||z0()||"connection"in navigator)?navigator.onLine:!0}function N1(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc{constructor(e,t){this.shortDelay=e,this.longDelay=t,us(t>e,"Short delay should be less than long delay!"),this.isMobile=JI()||nN()}get(){return I1()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kp(i,e){us(i.emulator,"Emulator should always be set here");const{url:t}=i.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z0{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;rs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;rs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;rs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R1={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C1=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],x1=new Sc(3e4,6e4);function Qp(i,e){return i.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:i.tenantId}):e}async function Do(i,e,t,r,o={}){return W0(i,o,async()=>{let c={},d={};r&&(e==="GET"?d=r:c={body:JSON.stringify(r)});const m=Ec(Object.assign({key:i.config.apiKey},d)).slice(1),g=await i._getAdditionalHeaders();g["Content-Type"]="application/json",i.languageCode&&(g["X-Firebase-Locale"]=i.languageCode);const v=Object.assign({method:e,headers:g},c);return tN()||(v.referrerPolicy="no-referrer"),i.emulatorConfig&&ha(i.emulatorConfig.host)&&(v.credentials="include"),Z0.fetch()(await J0(i,i.config.apiHost,t,m),v)})}async function W0(i,e,t){i._canInitEmulator=!1;const r=Object.assign(Object.assign({},R1),e);try{const o=new O1(i),c=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const d=await c.json();if("needConfirmation"in d)throw lh(i,"account-exists-with-different-credential",d);if(c.ok&&!("errorMessage"in d))return d;{const m=c.ok?d.errorMessage:d.error.message,[g,v]=m.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw lh(i,"credential-already-in-use",d);if(g==="EMAIL_EXISTS")throw lh(i,"email-already-in-use",d);if(g==="USER_DISABLED")throw lh(i,"user-disabled",d);const T=r[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(v)throw X0(i,T,v);cs(i,T)}}catch(o){if(o instanceof Kn)throw o;cs(i,"network-request-failed",{message:String(o)})}}async function D1(i,e,t,r,o={}){const c=await Do(i,e,t,r,o);return"mfaPendingCredential"in c&&cs(i,"multi-factor-auth-required",{_serverResponse:c}),c}async function J0(i,e,t,r){const o=`${e}${t}?${r}`,c=i,d=c.config.emulator?Kp(i.config,o):`${i.config.apiScheme}://${o}`;return C1.includes(t)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(d).toString():d}class O1{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(wi(this.auth,"network-request-failed")),x1.get())})}}function lh(i,e,t){const r={appName:i.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const o=wi(i,e,r);return o.customData._tokenResponse=t,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function M1(i,e){return Do(i,"POST","/v1/accounts:delete",e)}async function Oh(i,e){return Do(i,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jl(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function k1(i,e=!1){const t=ct(i),r=await t.getIdToken(e),o=Yp(r);Ae(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const c=typeof o.firebase=="object"?o.firebase:void 0,d=c?.sign_in_provider;return{claims:o,token:r,authTime:Jl($m(o.auth_time)),issuedAtTime:Jl($m(o.iat)),expirationTime:Jl($m(o.exp)),signInProvider:d||null,signInSecondFactor:c?.sign_in_second_factor||null}}function $m(i){return Number(i)*1e3}function Yp(i){const[e,t,r]=i.split(".");if(e===void 0||t===void 0||r===void 0)return yh("JWT malformed, contained fewer than 3 sections"),null;try{const o=k0(t);return o?JSON.parse(o):(yh("Failed to decode base64 JWT payload"),null)}catch(o){return yh("Caught error parsing JWT payload as JSON",o?.toString()),null}}function jT(i){const e=Yp(i);return Ae(e,"internal-error"),Ae(typeof e.exp<"u","internal-error"),Ae(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hc(i,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Kn&&V1(r)&&i.auth.currentUser===i&&await i.auth.signOut(),r}}function V1({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P1{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Jl(this.lastLoginAt),this.creationTime=Jl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mh(i){var e;const t=i.auth,r=await i.getIdToken(),o=await hc(i,Oh(t,{idToken:r}));Ae(o?.users.length,t,"internal-error");const c=o.users[0];i._notifyReloadListener(c);const d=!((e=c.providerUserInfo)===null||e===void 0)&&e.length?eb(c.providerUserInfo):[],m=U1(i.providerData,d),g=i.isAnonymous,v=!(i.email&&c.passwordHash)&&!m?.length,T=g?v:!1,A={uid:c.localId,displayName:c.displayName||null,photoURL:c.photoUrl||null,email:c.email||null,emailVerified:c.emailVerified||!1,phoneNumber:c.phoneNumber||null,tenantId:c.tenantId||null,providerData:m,metadata:new mp(c.createdAt,c.lastLoginAt),isAnonymous:T};Object.assign(i,A)}async function j1(i){const e=ct(i);await Mh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function U1(i,e){return[...i.filter(r=>!e.some(o=>o.providerId===r.providerId)),...e]}function eb(i){return i.map(e=>{var{providerId:t}=e,r=Gp(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function L1(i,e){const t=await W0(i,{},async()=>{const r=Ec({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:c}=i.config,d=await J0(i,o,"/v1/token",`key=${c}`),m=await i._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:m,body:r};return i.emulatorConfig&&ha(i.emulatorConfig.host)&&(g.credentials="include"),Z0.fetch()(d,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function z1(i,e){return Do(i,"POST","/v2/accounts:revokeToken",Qp(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ae(e.idToken,"internal-error"),Ae(typeof e.idToken<"u","internal-error"),Ae(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):jT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ae(e.length!==0,"internal-error");const t=jT(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ae(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:o,expiresIn:c}=await L1(e,t);this.updateTokensAndExpiration(r,o,Number(c))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:o,expirationTime:c}=t,d=new go;return r&&(Ae(typeof r=="string","internal-error",{appName:e}),d.refreshToken=r),o&&(Ae(typeof o=="string","internal-error",{appName:e}),d.accessToken=o),c&&(Ae(typeof c=="number","internal-error",{appName:e}),d.expirationTime=c),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new go,this.toJSON())}_performRefresh(){return rs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fs(i,e){Ae(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class ii{constructor(e){var{uid:t,auth:r,stsTokenManager:o}=e,c=Gp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new P1(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=c.displayName||null,this.email=c.email||null,this.emailVerified=c.emailVerified||!1,this.phoneNumber=c.phoneNumber||null,this.photoURL=c.photoURL||null,this.isAnonymous=c.isAnonymous||!1,this.tenantId=c.tenantId||null,this.providerData=c.providerData?[...c.providerData]:[],this.metadata=new mp(c.createdAt||void 0,c.lastLoginAt||void 0)}async getIdToken(e){const t=await hc(this,this.stsTokenManager.getToken(this.auth,e));return Ae(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return k1(this,e)}reload(){return j1(this)}_assign(e){this!==e&&(Ae(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ii(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ae(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Mh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ni(this.auth.app))return Promise.reject(ia(this.auth));const e=await this.getIdToken();return await hc(this,M1(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,o,c,d,m,g,v,T;const A=(r=t.displayName)!==null&&r!==void 0?r:void 0,b=(o=t.email)!==null&&o!==void 0?o:void 0,k=(c=t.phoneNumber)!==null&&c!==void 0?c:void 0,O=(d=t.photoURL)!==null&&d!==void 0?d:void 0,z=(m=t.tenantId)!==null&&m!==void 0?m:void 0,j=(g=t._redirectEventId)!==null&&g!==void 0?g:void 0,K=(v=t.createdAt)!==null&&v!==void 0?v:void 0,ae=(T=t.lastLoginAt)!==null&&T!==void 0?T:void 0,{uid:ie,emailVerified:ce,isAnonymous:W,providerData:de,stsTokenManager:V}=t;Ae(ie&&V,e,"internal-error");const I=go.fromJSON(this.name,V);Ae(typeof ie=="string",e,"internal-error"),Fs(A,e.name),Fs(b,e.name),Ae(typeof ce=="boolean",e,"internal-error"),Ae(typeof W=="boolean",e,"internal-error"),Fs(k,e.name),Fs(O,e.name),Fs(z,e.name),Fs(j,e.name),Fs(K,e.name),Fs(ae,e.name);const N=new ii({uid:ie,auth:e,email:b,emailVerified:ce,displayName:A,isAnonymous:W,photoURL:O,phoneNumber:k,tenantId:z,stsTokenManager:I,createdAt:K,lastLoginAt:ae});return de&&Array.isArray(de)&&(N.providerData=de.map(x=>Object.assign({},x))),j&&(N._redirectEventId=j),N}static async _fromIdTokenResponse(e,t,r=!1){const o=new go;o.updateFromServerResponse(t);const c=new ii({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:r});return await Mh(c),c}static async _fromGetAccountInfoResponse(e,t,r){const o=t.users[0];Ae(o.localId!==void 0,"internal-error");const c=o.providerUserInfo!==void 0?eb(o.providerUserInfo):[],d=!(o.email&&o.passwordHash)&&!c?.length,m=new go;m.updateFromIdToken(r);const g=new ii({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:d}),v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new mp(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!c?.length};return Object.assign(g,v),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UT=new Map;function as(i){us(i instanceof Function,"Expected a class definition");let e=UT.get(i);return e?(us(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,UT.set(i,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}tb.type="NONE";const LT=tb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vh(i,e,t){return`firebase:${i}:${e}:${t}`}class yo{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:o,name:c}=this.auth;this.fullUserKey=vh(this.userKey,o.apiKey,c),this.fullPersistenceKey=vh("persistence",o.apiKey,c),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Oh(this.auth,{idToken:e}).catch(()=>{});return t?ii._fromGetAccountInfoResponse(this.auth,t,e):null}return ii._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new yo(as(LT),e,r);const o=(await Promise.all(t.map(async v=>{if(await v._isAvailable())return v}))).filter(v=>v);let c=o[0]||as(LT);const d=vh(r,e.config.apiKey,e.name);let m=null;for(const v of t)try{const T=await v._get(d);if(T){let A;if(typeof T=="string"){const b=await Oh(e,{idToken:T}).catch(()=>{});if(!b)break;A=await ii._fromGetAccountInfoResponse(e,b,T)}else A=ii._fromJSON(e,T);v!==c&&(m=A),c=v;break}}catch{}const g=o.filter(v=>v._shouldAllowMigration);return!c._shouldAllowMigration||!g.length?new yo(c,e,r):(c=g[0],m&&await c._set(d,m.toJSON()),await Promise.all(t.map(async v=>{if(v!==c)try{await v._remove(d)}catch{}})),new yo(c,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zT(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(rb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(nb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ob(e))return"Blackberry";if(lb(e))return"Webos";if(ib(e))return"Safari";if((e.includes("chrome/")||sb(e))&&!e.includes("edge/"))return"Chrome";if(ab(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=i.match(t);if(r?.length===2)return r[1]}return"Other"}function nb(i=sn()){return/firefox\//i.test(i)}function ib(i=sn()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function sb(i=sn()){return/crios\//i.test(i)}function rb(i=sn()){return/iemobile/i.test(i)}function ab(i=sn()){return/android/i.test(i)}function ob(i=sn()){return/blackberry/i.test(i)}function lb(i=sn()){return/webos/i.test(i)}function Xp(i=sn()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function q1(i=sn()){var e;return Xp(i)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function B1(){return iN()&&document.documentMode===10}function cb(i=sn()){return Xp(i)||ab(i)||lb(i)||ob(i)||/windows phone/i.test(i)||rb(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ub(i,e=[]){let t;switch(i){case"Browser":t=zT(sn());break;case"Worker":t=`${zT(sn())}-${i}`;break;default:t=i}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${da}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F1{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=c=>new Promise((d,m)=>{try{const g=e(c);d(g)}catch(g){m(g)}});r.onAbort=t,this.queue.push(r);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function H1(i,e={}){return Do(i,"GET","/v2/passwordPolicy",Qp(i,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G1=6;class $1{constructor(e){var t,r,o,c;const d=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=d.minPasswordLength)!==null&&t!==void 0?t:G1,d.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=d.maxPasswordLength),d.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=d.containsLowercaseCharacter),d.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=d.containsUppercaseCharacter),d.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=d.containsNumericCharacter),d.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=d.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(c=e.forceUpgradeOnSignin)!==null&&c!==void 0?c:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,o,c,d,m;const g={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,g),this.validatePasswordCharacterOptions(e,g),g.isValid&&(g.isValid=(t=g.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),g.isValid&&(g.isValid=(r=g.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),g.isValid&&(g.isValid=(o=g.containsLowercaseLetter)!==null&&o!==void 0?o:!0),g.isValid&&(g.isValid=(c=g.containsUppercaseLetter)!==null&&c!==void 0?c:!0),g.isValid&&(g.isValid=(d=g.containsNumericCharacter)!==null&&d!==void 0?d:!0),g.isValid&&(g.isValid=(m=g.containsNonAlphanumericCharacter)!==null&&m!==void 0?m:!0),g}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let o=0;o<e.length;o++)r=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,o,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1{constructor(e,t,r,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new qT(this),this.idTokenSubscription=new qT(this),this.beforeStateQueue=new F1(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Y0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=as(t)),this._initializationPromise=this.queue(async()=>{var r,o,c;if(!this._deleted&&(this.persistenceManager=await yo.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((c=this.currentUser)===null||c===void 0?void 0:c.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Oh(this,{idToken:e}),r=await ii._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(ni(this.app)){const d=this.app.settings.authIdToken;return d?new Promise(m=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(d).then(m,m))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let o=r,c=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const d=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,m=o?._redirectEventId,g=await this.tryRedirectSignIn(e);(!d||d===m)&&g?.user&&(o=g.user,c=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(c)try{await this.beforeStateQueue.runMiddleware(o)}catch(d){o=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(d))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Ae(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Mh(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=N1()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ni(this.app))return Promise.reject(ia(this));const t=e?ct(e):null;return t&&Ae(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ae(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ni(this.app)?Promise.reject(ia(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ni(this.app)?Promise.reject(ia(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(as(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await H1(this),t=new $1(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new hr("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await z1(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&as(e)||this._popupRedirectResolver;Ae(t,this,"argument-error"),this.redirectPersistenceManager=await yo.create(this,[as(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,o){if(this._deleted)return()=>{};const c=typeof t=="function"?t:t.next.bind(t);let d=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ae(m,this,"internal-error"),m.then(()=>{d||c(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,r,o);return()=>{d=!0,g()}}else{const g=e.addObserver(t);return()=>{d=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ae(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ub(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;if(ni(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&S1(`Error while retrieving App Check token: ${t.error}`),t?.token}}function Zp(i){return ct(i)}class qT{constructor(e){this.auth=e,this.observer=null,this.addObserver=cN(t=>this.observer=t)}get next(){return Ae(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Q1(i){Wp=i}function Y1(i){return Wp.loadJS(i)}function X1(){return Wp.gapiScript}function Z1(i){return`__${i}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W1(i,e){const t=fs(i,"auth");if(t.isInitialized()){const o=t.getImmediate(),c=t.getOptions();if(er(c,e??{}))return o;cs(o,"already-initialized")}return t.initialize({options:e})}function J1(i,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(as);e?.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(r,e?.popupRedirectResolver)}function eR(i,e,t){const r=Zp(i);Ae(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const o=!1,c=hb(e),{host:d,port:m}=tR(e),g=m===null?"":`:${m}`,v={url:`${c}//${d}${g}/`},T=Object.freeze({host:d,port:m,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!r._canInitEmulator){Ae(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Ae(er(v,r.config.emulator)&&er(T,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=v,r.emulatorConfig=T,r.settings.appVerificationDisabledForTesting=!0,ha(d)?(zp(`${c}//${d}${g}`),qp("Auth",!0)):nR()}function hb(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function tR(i){const e=hb(i),t=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(r);if(o){const c=o[1];return{host:c,port:BT(r.substr(c.length+1))}}else{const[c,d]=r.split(":");return{host:c,port:BT(d)}}}function BT(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function nR(){function i(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class db{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return rs("not implemented")}_getIdTokenResponse(e){return rs("not implemented")}_linkToIdToken(e,t){return rs("not implemented")}_getReauthenticationResolver(e){return rs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vo(i,e){return D1(i,"POST","/v1/accounts:signInWithIdp",Qp(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iR="http://localhost";class ra extends db{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ra(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):cs("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:o}=t,c=Gp(t,["providerId","signInMethod"]);if(!r||!o)return null;const d=new ra(r,o);return d.idToken=c.idToken||void 0,d.accessToken=c.accessToken||void 0,d.secret=c.secret,d.nonce=c.nonce,d.pendingToken=c.pendingToken||null,d}_getIdTokenResponse(e){const t=this.buildRequest();return vo(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,vo(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,vo(e,t)}buildRequest(){const e={requestUri:iR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ec(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fb{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc extends fb{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs extends wc{constructor(){super("facebook.com")}static credential(e){return ra._fromParams({providerId:Hs.PROVIDER_ID,signInMethod:Hs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Hs.credentialFromTaggedObject(e)}static credentialFromError(e){return Hs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Hs.credential(e.oauthAccessToken)}catch{return null}}}Hs.FACEBOOK_SIGN_IN_METHOD="facebook.com";Hs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs extends wc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ra._fromParams({providerId:Gs.PROVIDER_ID,signInMethod:Gs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Gs.credentialFromTaggedObject(e)}static credentialFromError(e){return Gs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Gs.credential(t,r)}catch{return null}}}Gs.GOOGLE_SIGN_IN_METHOD="google.com";Gs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s extends wc{constructor(){super("github.com")}static credential(e){return ra._fromParams({providerId:$s.PROVIDER_ID,signInMethod:$s.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return $s.credentialFromTaggedObject(e)}static credentialFromError(e){return $s.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return $s.credential(e.oauthAccessToken)}catch{return null}}}$s.GITHUB_SIGN_IN_METHOD="github.com";$s.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks extends wc{constructor(){super("twitter.com")}static credential(e,t){return ra._fromParams({providerId:Ks.PROVIDER_ID,signInMethod:Ks.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ks.credentialFromTaggedObject(e)}static credentialFromError(e){return Ks.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Ks.credential(t,r)}catch{return null}}}Ks.TWITTER_SIGN_IN_METHOD="twitter.com";Ks.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,o=!1){const c=await ii._fromIdTokenResponse(e,r,o),d=FT(r);return new Ao({user:c,providerId:d,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const o=FT(r);return new Ao({user:e,providerId:o,_tokenResponse:r,operationType:t})}}function FT(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh extends Kn{constructor(e,t,r,o){var c;super(t.code,t.message),this.operationType=r,this.user=o,Object.setPrototypeOf(this,kh.prototype),this.customData={appName:e.name,tenantId:(c=e.tenantId)!==null&&c!==void 0?c:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,o){return new kh(e,t,r,o)}}function mb(i,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(i):t._getIdTokenResponse(i)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?kh._fromErrorAndOperation(i,c,e,r):c})}async function sR(i,e,t=!1){const r=await hc(i,e._linkToIdToken(i.auth,await i.getIdToken()),t);return Ao._forOperation(i,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rR(i,e,t=!1){const{auth:r}=i;if(ni(r.app))return Promise.reject(ia(r));const o="reauthenticate";try{const c=await hc(i,mb(r,o,e,i),t);Ae(c.idToken,r,"internal-error");const d=Yp(c.idToken);Ae(d,r,"internal-error");const{sub:m}=d;return Ae(i.uid===m,r,"user-mismatch"),Ao._forOperation(i,o,c)}catch(c){throw c?.code==="auth/user-not-found"&&cs(r,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aR(i,e,t=!1){if(ni(i.app))return Promise.reject(ia(i));const r="signIn",o=await mb(i,r,e),c=await Ao._fromIdTokenResponse(i,r,o);return t||await i._updateCurrentUser(c.user),c}function oR(i,e,t,r){return ct(i).onIdTokenChanged(e,t,r)}function lR(i,e,t){return ct(i).beforeAuthStateChanged(e,t)}function cR(i,e,t,r){return ct(i).onAuthStateChanged(e,t,r)}const Vh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pb{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Vh,"1"),this.storage.removeItem(Vh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uR=1e3,hR=10;class gb extends pb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=cb(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),o=this.localCache[t];r!==o&&e(t,o,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((d,m,g)=>{this.notifyListeners(d,g)});return}const r=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const d=this.storage.getItem(r);!t&&this.localCache[r]===d||this.notifyListeners(r,d)},c=this.storage.getItem(r);B1()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,hR):o()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},uR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}gb.type="LOCAL";const dR=gb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yb extends pb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}yb.type="SESSION";const vb=yb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fR(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const r=new id(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:o,data:c}=t.data,d=this.handlersMap[o];if(!d?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:o});const m=Array.from(d).map(async v=>v(t.origin,c)),g=await fR(m);t.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}id.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jp(i="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return i+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let c,d;return new Promise((m,g)=>{const v=Jp("",20);o.port1.start();const T=setTimeout(()=>{g(new Error("unsupported_event"))},r);d={messageChannel:o,onMessage(A){const b=A;if(b.data.eventId===v)switch(b.data.status){case"ack":clearTimeout(T),c=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),m(b.data.response);break;default:clearTimeout(T),clearTimeout(c),g(new Error("invalid_response"));break}}},this.handlers.add(d),o.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:v,data:t},[o.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ii(){return window}function pR(i){Ii().location.href=i}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _b(){return typeof Ii().WorkerGlobalScope<"u"&&typeof Ii().importScripts=="function"}async function gR(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function yR(){var i;return((i=navigator?.serviceWorker)===null||i===void 0?void 0:i.controller)||null}function vR(){return _b()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tb="firebaseLocalStorageDb",_R=1,Ph="firebaseLocalStorage",Eb="fbase_key";class Ic{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function sd(i,e){return i.transaction([Ph],e?"readwrite":"readonly").objectStore(Ph)}function TR(){const i=indexedDB.deleteDatabase(Tb);return new Ic(i).toPromise()}function pp(){const i=indexedDB.open(Tb,_R);return new Promise((e,t)=>{i.addEventListener("error",()=>{t(i.error)}),i.addEventListener("upgradeneeded",()=>{const r=i.result;try{r.createObjectStore(Ph,{keyPath:Eb})}catch(o){t(o)}}),i.addEventListener("success",async()=>{const r=i.result;r.objectStoreNames.contains(Ph)?e(r):(r.close(),await TR(),e(await pp()))})})}async function HT(i,e,t){const r=sd(i,!0).put({[Eb]:e,value:t});return new Ic(r).toPromise()}async function ER(i,e){const t=sd(i,!1).get(e),r=await new Ic(t).toPromise();return r===void 0?null:r.value}function GT(i,e){const t=sd(i,!0).delete(e);return new Ic(t).toPromise()}const bR=800,AR=3;class bb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await pp(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>AR)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return _b()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=id._getInstance(vR()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await gR(),!this.activeServiceWorker)return;this.sender=new mR(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||yR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await pp();return await HT(e,Vh,"1"),await GT(e,Vh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>HT(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>ER(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>GT(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const c=sd(o,!1).getAll();return new Ic(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:o,value:c}of e)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(c)&&(this.notifyListeners(o,c),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),bR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}bb.type="LOCAL";const SR=bb;new Sc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wR(i,e){return e?as(e):(Ae(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eg extends db{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return vo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return vo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return vo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function IR(i){return aR(i.auth,new eg(i),i.bypassAuthState)}function NR(i){const{auth:e,user:t}=i;return Ae(t,e,"internal-error"),rR(t,new eg(i),i.bypassAuthState)}async function RR(i){const{auth:e,user:t}=i;return Ae(t,e,"internal-error"),sR(t,new eg(i),i.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ab{constructor(e,t,r,o,c=!1){this.auth=e,this.resolver=r,this.user=o,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:o,tenantId:c,error:d,type:m}=e;if(d){this.reject(d);return}const g={auth:this.auth,requestUri:t,sessionId:r,tenantId:c||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(g))}catch(v){this.reject(v)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return IR;case"linkViaPopup":case"linkViaRedirect":return RR;case"reauthViaPopup":case"reauthViaRedirect":return NR;default:cs(this.auth,"internal-error")}}resolve(e){us(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){us(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CR=new Sc(2e3,1e4);class fo extends Ab{constructor(e,t,r,o,c){super(e,t,o,c),this.provider=r,this.authWindow=null,this.pollId=null,fo.currentPopupAction&&fo.currentPopupAction.cancel(),fo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ae(e,this.auth,"internal-error"),e}async onExecution(){us(this.filter.length===1,"Popup operations only handle one event");const e=Jp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(wi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(wi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,fo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(wi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,CR.get())};e()}}fo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xR="pendingRedirect",_h=new Map;class DR extends Ab{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=_h.get(this.auth._key());if(!e){try{const r=await OR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}_h.set(this.auth._key(),e)}return this.bypassAuthState||_h.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function OR(i,e){const t=VR(e),r=kR(i);if(!await r._isAvailable())return!1;const o=await r._get(t)==="true";return await r._remove(t),o}function MR(i,e){_h.set(i._key(),e)}function kR(i){return as(i._redirectPersistence)}function VR(i){return vh(xR,i.config.apiKey,i.name)}async function PR(i,e,t=!1){if(ni(i.app))return Promise.reject(ia(i));const r=Zp(i),o=wR(r,e),d=await new DR(r,o,t).execute();return d&&!t&&(delete d.user._redirectEventId,await r._persistUserIfCurrent(d.user),await r._setRedirectUser(null,e)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jR=10*60*1e3;class UR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!LR(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!Sb(e)){const o=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(wi(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=jR&&this.cachedEventUids.clear(),this.cachedEventUids.has($T(e))}saveEventToCache(e){this.cachedEventUids.add($T(e)),this.lastProcessedEventTime=Date.now()}}function $T(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function Sb({type:i,error:e}){return i==="unknown"&&e?.code==="auth/no-auth-event"}function LR(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Sb(i);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zR(i,e={}){return Do(i,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,BR=/^https?/;async function FR(i){if(i.config.emulator)return;const{authorizedDomains:e}=await zR(i);for(const t of e)try{if(HR(t))return}catch{}cs(i,"unauthorized-domain")}function HR(i){const e=fp(),{protocol:t,hostname:r}=new URL(e);if(i.startsWith("chrome-extension://")){const d=new URL(i);return d.hostname===""&&r===""?t==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&d.hostname===r}if(!BR.test(t))return!1;if(qR.test(i))return r===i;const o=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GR=new Sc(3e4,6e4);function KT(){const i=Ii().___jsl;if(i?.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let t=0;t<i.CP.length;t++)i.CP[t]=null}}function $R(i){return new Promise((e,t)=>{var r,o,c;function d(){KT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{KT(),t(wi(i,"network-request-failed"))},timeout:GR.get()})}if(!((o=(r=Ii().gapi)===null||r===void 0?void 0:r.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((c=Ii().gapi)===null||c===void 0)&&c.load)d();else{const m=Z1("iframefcb");return Ii()[m]=()=>{gapi.load?d():t(wi(i,"network-request-failed"))},Y1(`${X1()}?onload=${m}`).catch(g=>t(g))}}).catch(e=>{throw Th=null,e})}let Th=null;function KR(i){return Th=Th||$R(i),Th}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QR=new Sc(5e3,15e3),YR="__/auth/iframe",XR="emulator/auth/iframe",ZR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},WR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function JR(i){const e=i.config;Ae(e.authDomain,i,"auth-domain-config-required");const t=e.emulator?Kp(e,XR):`https://${i.config.authDomain}/${YR}`,r={apiKey:e.apiKey,appName:i.name,v:da},o=WR.get(i.config.apiHost);o&&(r.eid=o);const c=i._getFrameworks();return c.length&&(r.fw=c.join(",")),`${t}?${Ec(r).slice(1)}`}async function eC(i){const e=await KR(i),t=Ii().gapi;return Ae(t,i,"internal-error"),e.open({where:document.body,url:JR(i),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ZR,dontclear:!0},r=>new Promise(async(o,c)=>{await r.restyle({setHideOnLeave:!1});const d=wi(i,"network-request-failed"),m=Ii().setTimeout(()=>{c(d)},QR.get());function g(){Ii().clearTimeout(m),o(r)}r.ping(g).then(g,()=>{c(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},nC=500,iC=600,sC="_blank",rC="http://localhost";class QT{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function aC(i,e,t,r=nC,o=iC){const c=Math.max((window.screen.availHeight-o)/2,0).toString(),d=Math.max((window.screen.availWidth-r)/2,0).toString();let m="";const g=Object.assign(Object.assign({},tC),{width:r.toString(),height:o.toString(),top:c,left:d}),v=sn().toLowerCase();t&&(m=sb(v)?sC:t),nb(v)&&(e=e||rC,g.scrollbars="yes");const T=Object.entries(g).reduce((b,[k,O])=>`${b}${k}=${O},`,"");if(q1(v)&&m!=="_self")return oC(e||"",m),new QT(null);const A=window.open(e||"",m,T);Ae(A,i,"popup-blocked");try{A.focus()}catch{}return new QT(A)}function oC(i,e){const t=document.createElement("a");t.href=i,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lC="__/auth/handler",cC="emulator/auth/handler",uC=encodeURIComponent("fac");async function YT(i,e,t,r,o,c){Ae(i.config.authDomain,i,"auth-domain-config-required"),Ae(i.config.apiKey,i,"invalid-api-key");const d={apiKey:i.config.apiKey,appName:i.name,authType:t,redirectUrl:r,v:da,eventId:o};if(e instanceof fb){e.setDefaultLanguage(i.languageCode),d.providerId=e.providerId||"",lN(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[T,A]of Object.entries({}))d[T]=A}if(e instanceof wc){const T=e.getScopes().filter(A=>A!=="");T.length>0&&(d.scopes=T.join(","))}i.tenantId&&(d.tid=i.tenantId);const m=d;for(const T of Object.keys(m))m[T]===void 0&&delete m[T];const g=await i._getAppCheckToken(),v=g?`#${uC}=${encodeURIComponent(g)}`:"";return`${hC(i)}?${Ec(m).slice(1)}${v}`}function hC({config:i}){return i.emulator?Kp(i,cC):`https://${i.authDomain}/${lC}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Km="webStorageSupport";class dC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=vb,this._completeRedirectFn=PR,this._overrideRedirectResult=MR}async _openPopup(e,t,r,o){var c;us((c=this.eventManagers[e._key()])===null||c===void 0?void 0:c.manager,"_initialize() not called before _openPopup()");const d=await YT(e,t,r,fp(),o);return aC(e,d,Jp())}async _openRedirect(e,t,r,o){await this._originValidation(e);const c=await YT(e,t,r,fp(),o);return pR(c),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:c}=this.eventManagers[t];return o?Promise.resolve(o):(us(c,"If manager is not set, promise should be"),c)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await eC(e),r=new UR(e);return t.register("authEvent",o=>(Ae(o?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Km,{type:Km},o=>{var c;const d=(c=o?.[0])===null||c===void 0?void 0:c[Km];d!==void 0&&t(!!d),cs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=FR(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return cb()||ib()||Xp()}}const fC=dC;var XT="@firebase/auth",ZT="1.10.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mC{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ae(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pC(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function gC(i){$n(new Dn("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:d,authDomain:m}=r.options;Ae(d&&!d.includes(":"),"invalid-api-key",{appName:r.name});const g={apiKey:d,authDomain:m,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ub(i)},v=new K1(r,o,c,g);return J1(v,t),v},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),$n(new Dn("auth-internal",e=>{const t=Zp(e.getProvider("auth").getImmediate());return(r=>new mC(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),nn(XT,ZT,pC(i)),nn(XT,ZT,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yC=5*60,vC=U0("authIdTokenMaxAge")||yC;let WT=null;const _C=i=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>vC)return;const o=t?.token;WT!==o&&(WT=o,await fetch(i,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function TC(i=Ac()){const e=fs(i,"auth");if(e.isInitialized())return e.getImmediate();const t=W1(i,{popupRedirectResolver:fC,persistence:[SR,dR,vb]}),r=U0("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(r,location.origin);if(location.origin===c.origin){const d=_C(c.toString());lR(t,d,()=>d(t.currentUser)),oR(t,m=>d(m))}}const o=V0("auth");return o&&eR(t,`http://${o}`),t}function EC(){var i,e;return(e=(i=document.getElementsByTagName("head"))===null||i===void 0?void 0:i[0])!==null&&e!==void 0?e:document}Q1({loadJS(i){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",i),r.onload=e,r.onerror=o=>{const c=wi("internal-error");c.customData=o,t(c)},r.type="text/javascript",r.charset="UTF-8",EC().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});gC("Browser");var bC="firebase",AC="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */nn(bC,AC,"app");var JT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ws,wb;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(V,I){function N(){}N.prototype=I.prototype,V.D=I.prototype,V.prototype=new N,V.prototype.constructor=V,V.C=function(x,P,U){for(var C=Array(arguments.length-2),Be=2;Be<arguments.length;Be++)C[Be-2]=arguments[Be];return I.prototype[P].apply(x,C)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(V,I,N){N||(N=0);var x=Array(16);if(typeof I=="string")for(var P=0;16>P;++P)x[P]=I.charCodeAt(N++)|I.charCodeAt(N++)<<8|I.charCodeAt(N++)<<16|I.charCodeAt(N++)<<24;else for(P=0;16>P;++P)x[P]=I[N++]|I[N++]<<8|I[N++]<<16|I[N++]<<24;I=V.g[0],N=V.g[1],P=V.g[2];var U=V.g[3],C=I+(U^N&(P^U))+x[0]+3614090360&4294967295;I=N+(C<<7&4294967295|C>>>25),C=U+(P^I&(N^P))+x[1]+3905402710&4294967295,U=I+(C<<12&4294967295|C>>>20),C=P+(N^U&(I^N))+x[2]+606105819&4294967295,P=U+(C<<17&4294967295|C>>>15),C=N+(I^P&(U^I))+x[3]+3250441966&4294967295,N=P+(C<<22&4294967295|C>>>10),C=I+(U^N&(P^U))+x[4]+4118548399&4294967295,I=N+(C<<7&4294967295|C>>>25),C=U+(P^I&(N^P))+x[5]+1200080426&4294967295,U=I+(C<<12&4294967295|C>>>20),C=P+(N^U&(I^N))+x[6]+2821735955&4294967295,P=U+(C<<17&4294967295|C>>>15),C=N+(I^P&(U^I))+x[7]+4249261313&4294967295,N=P+(C<<22&4294967295|C>>>10),C=I+(U^N&(P^U))+x[8]+1770035416&4294967295,I=N+(C<<7&4294967295|C>>>25),C=U+(P^I&(N^P))+x[9]+2336552879&4294967295,U=I+(C<<12&4294967295|C>>>20),C=P+(N^U&(I^N))+x[10]+4294925233&4294967295,P=U+(C<<17&4294967295|C>>>15),C=N+(I^P&(U^I))+x[11]+2304563134&4294967295,N=P+(C<<22&4294967295|C>>>10),C=I+(U^N&(P^U))+x[12]+1804603682&4294967295,I=N+(C<<7&4294967295|C>>>25),C=U+(P^I&(N^P))+x[13]+4254626195&4294967295,U=I+(C<<12&4294967295|C>>>20),C=P+(N^U&(I^N))+x[14]+2792965006&4294967295,P=U+(C<<17&4294967295|C>>>15),C=N+(I^P&(U^I))+x[15]+1236535329&4294967295,N=P+(C<<22&4294967295|C>>>10),C=I+(P^U&(N^P))+x[1]+4129170786&4294967295,I=N+(C<<5&4294967295|C>>>27),C=U+(N^P&(I^N))+x[6]+3225465664&4294967295,U=I+(C<<9&4294967295|C>>>23),C=P+(I^N&(U^I))+x[11]+643717713&4294967295,P=U+(C<<14&4294967295|C>>>18),C=N+(U^I&(P^U))+x[0]+3921069994&4294967295,N=P+(C<<20&4294967295|C>>>12),C=I+(P^U&(N^P))+x[5]+3593408605&4294967295,I=N+(C<<5&4294967295|C>>>27),C=U+(N^P&(I^N))+x[10]+38016083&4294967295,U=I+(C<<9&4294967295|C>>>23),C=P+(I^N&(U^I))+x[15]+3634488961&4294967295,P=U+(C<<14&4294967295|C>>>18),C=N+(U^I&(P^U))+x[4]+3889429448&4294967295,N=P+(C<<20&4294967295|C>>>12),C=I+(P^U&(N^P))+x[9]+568446438&4294967295,I=N+(C<<5&4294967295|C>>>27),C=U+(N^P&(I^N))+x[14]+3275163606&4294967295,U=I+(C<<9&4294967295|C>>>23),C=P+(I^N&(U^I))+x[3]+4107603335&4294967295,P=U+(C<<14&4294967295|C>>>18),C=N+(U^I&(P^U))+x[8]+1163531501&4294967295,N=P+(C<<20&4294967295|C>>>12),C=I+(P^U&(N^P))+x[13]+2850285829&4294967295,I=N+(C<<5&4294967295|C>>>27),C=U+(N^P&(I^N))+x[2]+4243563512&4294967295,U=I+(C<<9&4294967295|C>>>23),C=P+(I^N&(U^I))+x[7]+1735328473&4294967295,P=U+(C<<14&4294967295|C>>>18),C=N+(U^I&(P^U))+x[12]+2368359562&4294967295,N=P+(C<<20&4294967295|C>>>12),C=I+(N^P^U)+x[5]+4294588738&4294967295,I=N+(C<<4&4294967295|C>>>28),C=U+(I^N^P)+x[8]+2272392833&4294967295,U=I+(C<<11&4294967295|C>>>21),C=P+(U^I^N)+x[11]+1839030562&4294967295,P=U+(C<<16&4294967295|C>>>16),C=N+(P^U^I)+x[14]+4259657740&4294967295,N=P+(C<<23&4294967295|C>>>9),C=I+(N^P^U)+x[1]+2763975236&4294967295,I=N+(C<<4&4294967295|C>>>28),C=U+(I^N^P)+x[4]+1272893353&4294967295,U=I+(C<<11&4294967295|C>>>21),C=P+(U^I^N)+x[7]+4139469664&4294967295,P=U+(C<<16&4294967295|C>>>16),C=N+(P^U^I)+x[10]+3200236656&4294967295,N=P+(C<<23&4294967295|C>>>9),C=I+(N^P^U)+x[13]+681279174&4294967295,I=N+(C<<4&4294967295|C>>>28),C=U+(I^N^P)+x[0]+3936430074&4294967295,U=I+(C<<11&4294967295|C>>>21),C=P+(U^I^N)+x[3]+3572445317&4294967295,P=U+(C<<16&4294967295|C>>>16),C=N+(P^U^I)+x[6]+76029189&4294967295,N=P+(C<<23&4294967295|C>>>9),C=I+(N^P^U)+x[9]+3654602809&4294967295,I=N+(C<<4&4294967295|C>>>28),C=U+(I^N^P)+x[12]+3873151461&4294967295,U=I+(C<<11&4294967295|C>>>21),C=P+(U^I^N)+x[15]+530742520&4294967295,P=U+(C<<16&4294967295|C>>>16),C=N+(P^U^I)+x[2]+3299628645&4294967295,N=P+(C<<23&4294967295|C>>>9),C=I+(P^(N|~U))+x[0]+4096336452&4294967295,I=N+(C<<6&4294967295|C>>>26),C=U+(N^(I|~P))+x[7]+1126891415&4294967295,U=I+(C<<10&4294967295|C>>>22),C=P+(I^(U|~N))+x[14]+2878612391&4294967295,P=U+(C<<15&4294967295|C>>>17),C=N+(U^(P|~I))+x[5]+4237533241&4294967295,N=P+(C<<21&4294967295|C>>>11),C=I+(P^(N|~U))+x[12]+1700485571&4294967295,I=N+(C<<6&4294967295|C>>>26),C=U+(N^(I|~P))+x[3]+2399980690&4294967295,U=I+(C<<10&4294967295|C>>>22),C=P+(I^(U|~N))+x[10]+4293915773&4294967295,P=U+(C<<15&4294967295|C>>>17),C=N+(U^(P|~I))+x[1]+2240044497&4294967295,N=P+(C<<21&4294967295|C>>>11),C=I+(P^(N|~U))+x[8]+1873313359&4294967295,I=N+(C<<6&4294967295|C>>>26),C=U+(N^(I|~P))+x[15]+4264355552&4294967295,U=I+(C<<10&4294967295|C>>>22),C=P+(I^(U|~N))+x[6]+2734768916&4294967295,P=U+(C<<15&4294967295|C>>>17),C=N+(U^(P|~I))+x[13]+1309151649&4294967295,N=P+(C<<21&4294967295|C>>>11),C=I+(P^(N|~U))+x[4]+4149444226&4294967295,I=N+(C<<6&4294967295|C>>>26),C=U+(N^(I|~P))+x[11]+3174756917&4294967295,U=I+(C<<10&4294967295|C>>>22),C=P+(I^(U|~N))+x[2]+718787259&4294967295,P=U+(C<<15&4294967295|C>>>17),C=N+(U^(P|~I))+x[9]+3951481745&4294967295,V.g[0]=V.g[0]+I&4294967295,V.g[1]=V.g[1]+(P+(C<<21&4294967295|C>>>11))&4294967295,V.g[2]=V.g[2]+P&4294967295,V.g[3]=V.g[3]+U&4294967295}r.prototype.u=function(V,I){I===void 0&&(I=V.length);for(var N=I-this.blockSize,x=this.B,P=this.h,U=0;U<I;){if(P==0)for(;U<=N;)o(this,V,U),U+=this.blockSize;if(typeof V=="string"){for(;U<I;)if(x[P++]=V.charCodeAt(U++),P==this.blockSize){o(this,x),P=0;break}}else for(;U<I;)if(x[P++]=V[U++],P==this.blockSize){o(this,x),P=0;break}}this.h=P,this.o+=I},r.prototype.v=function(){var V=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);V[0]=128;for(var I=1;I<V.length-8;++I)V[I]=0;var N=8*this.o;for(I=V.length-8;I<V.length;++I)V[I]=N&255,N/=256;for(this.u(V),V=Array(16),I=N=0;4>I;++I)for(var x=0;32>x;x+=8)V[N++]=this.g[I]>>>x&255;return V};function c(V,I){var N=m;return Object.prototype.hasOwnProperty.call(N,V)?N[V]:N[V]=I(V)}function d(V,I){this.h=I;for(var N=[],x=!0,P=V.length-1;0<=P;P--){var U=V[P]|0;x&&U==I||(N[P]=U,x=!1)}this.g=N}var m={};function g(V){return-128<=V&&128>V?c(V,function(I){return new d([I|0],0>I?-1:0)}):new d([V|0],0>V?-1:0)}function v(V){if(isNaN(V)||!isFinite(V))return A;if(0>V)return j(v(-V));for(var I=[],N=1,x=0;V>=N;x++)I[x]=V/N|0,N*=4294967296;return new d(I,0)}function T(V,I){if(V.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(V.charAt(0)=="-")return j(T(V.substring(1),I));if(0<=V.indexOf("-"))throw Error('number format error: interior "-" character');for(var N=v(Math.pow(I,8)),x=A,P=0;P<V.length;P+=8){var U=Math.min(8,V.length-P),C=parseInt(V.substring(P,P+U),I);8>U?(U=v(Math.pow(I,U)),x=x.j(U).add(v(C))):(x=x.j(N),x=x.add(v(C)))}return x}var A=g(0),b=g(1),k=g(16777216);i=d.prototype,i.m=function(){if(z(this))return-j(this).m();for(var V=0,I=1,N=0;N<this.g.length;N++){var x=this.i(N);V+=(0<=x?x:4294967296+x)*I,I*=4294967296}return V},i.toString=function(V){if(V=V||10,2>V||36<V)throw Error("radix out of range: "+V);if(O(this))return"0";if(z(this))return"-"+j(this).toString(V);for(var I=v(Math.pow(V,6)),N=this,x="";;){var P=ce(N,I).g;N=K(N,P.j(I));var U=((0<N.g.length?N.g[0]:N.h)>>>0).toString(V);if(N=P,O(N))return U+x;for(;6>U.length;)U="0"+U;x=U+x}},i.i=function(V){return 0>V?0:V<this.g.length?this.g[V]:this.h};function O(V){if(V.h!=0)return!1;for(var I=0;I<V.g.length;I++)if(V.g[I]!=0)return!1;return!0}function z(V){return V.h==-1}i.l=function(V){return V=K(this,V),z(V)?-1:O(V)?0:1};function j(V){for(var I=V.g.length,N=[],x=0;x<I;x++)N[x]=~V.g[x];return new d(N,~V.h).add(b)}i.abs=function(){return z(this)?j(this):this},i.add=function(V){for(var I=Math.max(this.g.length,V.g.length),N=[],x=0,P=0;P<=I;P++){var U=x+(this.i(P)&65535)+(V.i(P)&65535),C=(U>>>16)+(this.i(P)>>>16)+(V.i(P)>>>16);x=C>>>16,U&=65535,C&=65535,N[P]=C<<16|U}return new d(N,N[N.length-1]&-2147483648?-1:0)};function K(V,I){return V.add(j(I))}i.j=function(V){if(O(this)||O(V))return A;if(z(this))return z(V)?j(this).j(j(V)):j(j(this).j(V));if(z(V))return j(this.j(j(V)));if(0>this.l(k)&&0>V.l(k))return v(this.m()*V.m());for(var I=this.g.length+V.g.length,N=[],x=0;x<2*I;x++)N[x]=0;for(x=0;x<this.g.length;x++)for(var P=0;P<V.g.length;P++){var U=this.i(x)>>>16,C=this.i(x)&65535,Be=V.i(P)>>>16,Oe=V.i(P)&65535;N[2*x+2*P]+=C*Oe,ae(N,2*x+2*P),N[2*x+2*P+1]+=U*Oe,ae(N,2*x+2*P+1),N[2*x+2*P+1]+=C*Be,ae(N,2*x+2*P+1),N[2*x+2*P+2]+=U*Be,ae(N,2*x+2*P+2)}for(x=0;x<I;x++)N[x]=N[2*x+1]<<16|N[2*x];for(x=I;x<2*I;x++)N[x]=0;return new d(N,0)};function ae(V,I){for(;(V[I]&65535)!=V[I];)V[I+1]+=V[I]>>>16,V[I]&=65535,I++}function ie(V,I){this.g=V,this.h=I}function ce(V,I){if(O(I))throw Error("division by zero");if(O(V))return new ie(A,A);if(z(V))return I=ce(j(V),I),new ie(j(I.g),j(I.h));if(z(I))return I=ce(V,j(I)),new ie(j(I.g),I.h);if(30<V.g.length){if(z(V)||z(I))throw Error("slowDivide_ only works with positive integers.");for(var N=b,x=I;0>=x.l(V);)N=W(N),x=W(x);var P=de(N,1),U=de(x,1);for(x=de(x,2),N=de(N,2);!O(x);){var C=U.add(x);0>=C.l(V)&&(P=P.add(N),U=C),x=de(x,1),N=de(N,1)}return I=K(V,P.j(I)),new ie(P,I)}for(P=A;0<=V.l(I);){for(N=Math.max(1,Math.floor(V.m()/I.m())),x=Math.ceil(Math.log(N)/Math.LN2),x=48>=x?1:Math.pow(2,x-48),U=v(N),C=U.j(I);z(C)||0<C.l(V);)N-=x,U=v(N),C=U.j(I);O(U)&&(U=b),P=P.add(U),V=K(V,C)}return new ie(P,V)}i.A=function(V){return ce(this,V).h},i.and=function(V){for(var I=Math.max(this.g.length,V.g.length),N=[],x=0;x<I;x++)N[x]=this.i(x)&V.i(x);return new d(N,this.h&V.h)},i.or=function(V){for(var I=Math.max(this.g.length,V.g.length),N=[],x=0;x<I;x++)N[x]=this.i(x)|V.i(x);return new d(N,this.h|V.h)},i.xor=function(V){for(var I=Math.max(this.g.length,V.g.length),N=[],x=0;x<I;x++)N[x]=this.i(x)^V.i(x);return new d(N,this.h^V.h)};function W(V){for(var I=V.g.length+1,N=[],x=0;x<I;x++)N[x]=V.i(x)<<1|V.i(x-1)>>>31;return new d(N,V.h)}function de(V,I){var N=I>>5;I%=32;for(var x=V.g.length-N,P=[],U=0;U<x;U++)P[U]=0<I?V.i(U+N)>>>I|V.i(U+N+1)<<32-I:V.i(U+N);return new d(P,V.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,wb=r,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.A,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=v,d.fromString=T,Ws=d}).apply(typeof JT<"u"?JT:typeof self<"u"?self:typeof window<"u"?window:{});var ch=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ib,Ql,Nb,Eh,gp,Rb,Cb,xb;(function(){var i,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,y,_){return u==Array.prototype||u==Object.prototype||(u[y]=_.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof ch=="object"&&ch];for(var y=0;y<u.length;++y){var _=u[y];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var r=t(this);function o(u,y){if(y)e:{var _=r;u=u.split(".");for(var w=0;w<u.length-1;w++){var q=u[w];if(!(q in _))break e;_=_[q]}u=u[u.length-1],w=_[u],y=y(w),y!=w&&y!=null&&e(_,u,{configurable:!0,writable:!0,value:y})}}function c(u,y){u instanceof String&&(u+="");var _=0,w=!1,q={next:function(){if(!w&&_<u.length){var $=_++;return{value:y($,u[$]),done:!1}}return w=!0,{done:!0,value:void 0}}};return q[Symbol.iterator]=function(){return q},q}o("Array.prototype.values",function(u){return u||function(){return c(this,function(y,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},m=this||self;function g(u){var y=typeof u;return y=y!="object"?y:u?Array.isArray(u)?"array":y:"null",y=="array"||y=="object"&&typeof u.length=="number"}function v(u){var y=typeof u;return y=="object"&&u!=null||y=="function"}function T(u,y,_){return u.call.apply(u.bind,arguments)}function A(u,y,_){if(!u)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var q=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(q,w),u.apply(y,q)}}return function(){return u.apply(y,arguments)}}function b(u,y,_){return b=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?T:A,b.apply(null,arguments)}function k(u,y){var _=Array.prototype.slice.call(arguments,1);return function(){var w=_.slice();return w.push.apply(w,arguments),u.apply(this,w)}}function O(u,y){function _(){}_.prototype=y.prototype,u.aa=y.prototype,u.prototype=new _,u.prototype.constructor=u,u.Qb=function(w,q,$){for(var se=Array(arguments.length-2),je=2;je<arguments.length;je++)se[je-2]=arguments[je];return y.prototype[q].apply(w,se)}}function z(u){const y=u.length;if(0<y){const _=Array(y);for(let w=0;w<y;w++)_[w]=u[w];return _}return[]}function j(u,y){for(let _=1;_<arguments.length;_++){const w=arguments[_];if(g(w)){const q=u.length||0,$=w.length||0;u.length=q+$;for(let se=0;se<$;se++)u[q+se]=w[se]}else u.push(w)}}class K{constructor(y,_){this.i=y,this.j=_,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function ae(u){return/^[\s\xa0]*$/.test(u)}function ie(){var u=m.navigator;return u&&(u=u.userAgent)?u:""}function ce(u){return ce[" "](u),u}ce[" "]=function(){};var W=ie().indexOf("Gecko")!=-1&&!(ie().toLowerCase().indexOf("webkit")!=-1&&ie().indexOf("Edge")==-1)&&!(ie().indexOf("Trident")!=-1||ie().indexOf("MSIE")!=-1)&&ie().indexOf("Edge")==-1;function de(u,y,_){for(const w in u)y.call(_,u[w],w,u)}function V(u,y){for(const _ in u)y.call(void 0,u[_],_,u)}function I(u){const y={};for(const _ in u)y[_]=u[_];return y}const N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(u,y){let _,w;for(let q=1;q<arguments.length;q++){w=arguments[q];for(_ in w)u[_]=w[_];for(let $=0;$<N.length;$++)_=N[$],Object.prototype.hasOwnProperty.call(w,_)&&(u[_]=w[_])}}function P(u){var y=1;u=u.split(":");const _=[];for(;0<y&&u.length;)_.push(u.shift()),y--;return u.length&&_.push(u.join(":")),_}function U(u){m.setTimeout(()=>{throw u},0)}function C(){var u=Ge;let y=null;return u.g&&(y=u.g,u.g=u.g.next,u.g||(u.h=null),y.next=null),y}class Be{constructor(){this.h=this.g=null}add(y,_){const w=Oe.get();w.set(y,_),this.h?this.h.next=w:this.g=w,this.h=w}}var Oe=new K(()=>new Q,u=>u.reset());class Q{constructor(){this.next=this.g=this.h=null}set(y,_){this.h=y,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let re,me=!1,Ge=new Be,D=()=>{const u=m.Promise.resolve(void 0);re=()=>{u.then(te)}};var te=()=>{for(var u;u=C();){try{u.h.call(u.g)}catch(_){U(_)}var y=Oe;y.j(u),100>y.h&&(y.h++,u.next=y.g,y.g=u)}me=!1};function oe(){this.s=this.s,this.C=this.C}oe.prototype.s=!1,oe.prototype.ma=function(){this.s||(this.s=!0,this.N())},oe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ne(u,y){this.type=u,this.g=this.target=y,this.defaultPrevented=!1}ne.prototype.h=function(){this.defaultPrevented=!0};var ye=function(){if(!m.addEventListener||!Object.defineProperty)return!1;var u=!1,y=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};m.addEventListener("test",_,y),m.removeEventListener("test",_,y)}catch{}return u}();function xe(u,y){if(ne.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var _=this.type=u.type,w=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=y,y=u.relatedTarget){if(W){e:{try{ce(y.nodeName);var q=!0;break e}catch{}q=!1}q||(y=null)}}else _=="mouseover"?y=u.fromElement:_=="mouseout"&&(y=u.toElement);this.relatedTarget=y,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Se[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&xe.aa.h.call(this)}}O(xe,ne);var Se={2:"touch",3:"pen",4:"mouse"};xe.prototype.h=function(){xe.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Ot="closure_listenable_"+(1e6*Math.random()|0),it=0;function ai(u,y,_,w,q){this.listener=u,this.proxy=null,this.src=y,this.type=_,this.capture=!!w,this.ha=q,this.key=++it,this.da=this.fa=!1}function ms(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Mi(u){this.src=u,this.g={},this.h=0}Mi.prototype.add=function(u,y,_,w,q){var $=u.toString();u=this.g[$],u||(u=this.g[$]=[],this.h++);var se=yr(u,y,w,q);return-1<se?(y=u[se],_||(y.fa=!1)):(y=new ai(y,this.src,$,!!w,q),y.fa=_,u.push(y)),y};function gr(u,y){var _=y.type;if(_ in u.g){var w=u.g[_],q=Array.prototype.indexOf.call(w,y,void 0),$;($=0<=q)&&Array.prototype.splice.call(w,q,1),$&&(ms(y),u.g[_].length==0&&(delete u.g[_],u.h--))}}function yr(u,y,_,w){for(var q=0;q<u.length;++q){var $=u[q];if(!$.da&&$.listener==y&&$.capture==!!_&&$.ha==w)return q}return-1}var vr="closure_lm_"+(1e6*Math.random()|0),Uo={};function Uc(u,y,_,w,q){if(Array.isArray(y)){for(var $=0;$<y.length;$++)Uc(u,y[$],_,w,q);return null}return _=Lc(_),u&&u[Ot]?u.K(y,_,v(w)?!!w.capture:!1,q):On(u,y,_,!1,w,q)}function On(u,y,_,w,q,$){if(!y)throw Error("Invalid event type");var se=v(q)?!!q.capture:!!q,je=ga(u);if(je||(u[vr]=je=new Mi(u)),_=je.add(y,_,w,se,$),_.proxy)return _;if(w=kd(),_.proxy=w,w.src=u,w.listener=_,u.addEventListener)ye||(q=se),q===void 0&&(q=!1),u.addEventListener(y.toString(),w,q);else if(u.attachEvent)u.attachEvent(_r(y.toString()),w);else if(u.addListener&&u.removeListener)u.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return _}function kd(){function u(_){return y.call(u.src,u.listener,_)}const y=Vd;return u}function Lo(u,y,_,w,q){if(Array.isArray(y))for(var $=0;$<y.length;$++)Lo(u,y[$],_,w,q);else w=v(w)?!!w.capture:!!w,_=Lc(_),u&&u[Ot]?(u=u.i,y=String(y).toString(),y in u.g&&($=u.g[y],_=yr($,_,w,q),-1<_&&(ms($[_]),Array.prototype.splice.call($,_,1),$.length==0&&(delete u.g[y],u.h--)))):u&&(u=ga(u))&&(y=u.g[y.toString()],u=-1,y&&(u=yr(y,_,w,q)),(_=-1<u?y[u]:null)&&pa(_))}function pa(u){if(typeof u!="number"&&u&&!u.da){var y=u.src;if(y&&y[Ot])gr(y.i,u);else{var _=u.type,w=u.proxy;y.removeEventListener?y.removeEventListener(_,w,u.capture):y.detachEvent?y.detachEvent(_r(_),w):y.addListener&&y.removeListener&&y.removeListener(w),(_=ga(y))?(gr(_,u),_.h==0&&(_.src=null,y[vr]=null)):ms(u)}}}function _r(u){return u in Uo?Uo[u]:Uo[u]="on"+u}function Vd(u,y){if(u.da)u=!0;else{y=new xe(y,this);var _=u.listener,w=u.ha||u.src;u.fa&&pa(u),u=_.call(w,y)}return u}function ga(u){return u=u[vr],u instanceof Mi?u:null}var zo="__closure_events_fn_"+(1e9*Math.random()>>>0);function Lc(u){return typeof u=="function"?u:(u[zo]||(u[zo]=function(y){return u.handleEvent(y)}),u[zo])}function ht(){oe.call(this),this.i=new Mi(this),this.M=this,this.F=null}O(ht,oe),ht.prototype[Ot]=!0,ht.prototype.removeEventListener=function(u,y,_,w){Lo(this,u,y,_,w)};function Qe(u,y){var _,w=u.F;if(w)for(_=[];w;w=w.F)_.push(w);if(u=u.M,w=y.type||y,typeof y=="string")y=new ne(y,u);else if(y instanceof ne)y.target=y.target||u;else{var q=y;y=new ne(w,u),x(y,q)}if(q=!0,_)for(var $=_.length-1;0<=$;$--){var se=y.g=_[$];q=vn(se,w,!0,y)&&q}if(se=y.g=u,q=vn(se,w,!0,y)&&q,q=vn(se,w,!1,y)&&q,_)for($=0;$<_.length;$++)se=y.g=_[$],q=vn(se,w,!1,y)&&q}ht.prototype.N=function(){if(ht.aa.N.call(this),this.i){var u=this.i,y;for(y in u.g){for(var _=u.g[y],w=0;w<_.length;w++)ms(_[w]);delete u.g[y],u.h--}}this.F=null},ht.prototype.K=function(u,y,_,w){return this.i.add(String(u),y,!1,_,w)},ht.prototype.L=function(u,y,_,w){return this.i.add(String(u),y,!0,_,w)};function vn(u,y,_,w){if(y=u.i.g[String(y)],!y)return!0;y=y.concat();for(var q=!0,$=0;$<y.length;++$){var se=y[$];if(se&&!se.da&&se.capture==_){var je=se.listener,wt=se.ha||se.src;se.fa&&gr(u.i,se),q=je.call(wt,w)!==!1&&q}}return q&&!w.defaultPrevented}function Xt(u,y,_){if(typeof u=="function")_&&(u=b(u,_));else if(u&&typeof u.handleEvent=="function")u=b(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:m.setTimeout(u,y||0)}function zc(u){u.g=Xt(()=>{u.g=null,u.i&&(u.i=!1,zc(u))},u.l);const y=u.h;u.h=null,u.m.apply(null,y)}class Pd extends oe{constructor(y,_){super(),this.m=y,this.l=_,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:zc(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Tr(u){oe.call(this),this.h=u,this.g={}}O(Tr,oe);var Er=[];function br(u){de(u.g,function(y,_){this.g.hasOwnProperty(_)&&pa(y)},u),u.g={}}Tr.prototype.N=function(){Tr.aa.N.call(this),br(this)},Tr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Qn=m.JSON.stringify,ya=m.JSON.parse,Ar=class{stringify(u){return m.JSON.stringify(u,void 0)}parse(u){return m.JSON.parse(u,void 0)}};function qo(){}qo.prototype.h=null;function Bo(u){return u.h||(u.h=u.i())}function Fo(){}var ki={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Vi(){ne.call(this,"d")}O(Vi,ne);function Ho(){ne.call(this,"c")}O(Ho,ne);var oi={},Go=null;function ps(){return Go=Go||new ht}oi.La="serverreachability";function va(u){ne.call(this,oi.La,u)}O(va,ne);function gs(u){const y=ps();Qe(y,new va(y))}oi.STAT_EVENT="statevent";function qc(u,y){ne.call(this,oi.STAT_EVENT,u),this.stat=y}O(qc,ne);function rt(u){const y=ps();Qe(y,new qc(y,u))}oi.Ma="timingevent";function St(u,y){ne.call(this,oi.Ma,u),this.size=y}O(St,ne);function vt(u,y){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){u()},y)}function Mn(){this.g=!0}Mn.prototype.xa=function(){this.g=!1};function $o(u,y,_,w,q,$){u.info(function(){if(u.g)if($)for(var se="",je=$.split("&"),wt=0;wt<je.length;wt++){var Ue=je[wt].split("=");if(1<Ue.length){var kt=Ue[0];Ue=Ue[1];var It=kt.split("_");se=2<=It.length&&It[1]=="type"?se+(kt+"="+Ue+"&"):se+(kt+"=redacted&")}}else se=null;else se=$;return"XMLHTTP REQ ("+w+") [attempt "+q+"]: "+y+`
`+_+`
`+se})}function jd(u,y,_,w,q,$,se){u.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+q+"]: "+y+`
`+_+`
`+$+" "+se})}function ys(u,y,_,w){u.info(function(){return"XMLHTTP TEXT ("+y+"): "+Sr(u,_)+(w?" "+w:"")})}function Bc(u,y){u.info(function(){return"TIMEOUT: "+y})}Mn.prototype.info=function(){};function Sr(u,y){if(!u.g)return y;if(!y)return null;try{var _=JSON.parse(y);if(_){for(u=0;u<_.length;u++)if(Array.isArray(_[u])){var w=_[u];if(!(2>w.length)){var q=w[1];if(Array.isArray(q)&&!(1>q.length)){var $=q[0];if($!="noop"&&$!="stop"&&$!="close")for(var se=1;se<q.length;se++)q[se]=""}}}}return Qn(_)}catch{return y}}var vs={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Pi={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},li;function ci(){}O(ci,qo),ci.prototype.g=function(){return new XMLHttpRequest},ci.prototype.i=function(){return{}},li=new ci;function rn(u,y,_,w){this.j=u,this.i=y,this.l=_,this.R=w||1,this.U=new Tr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new mt}function mt(){this.i=null,this.g="",this.h=!1}var Ko={},_a={};function Yn(u,y,_){u.L=1,u.v=Cr(_n(y)),u.m=_,u.P=!0,ji(u,null)}function ji(u,y){u.F=Date.now(),wr(u),u.A=_n(u.v);var _=u.A,w=u.R;Array.isArray(w)||(w=[String(w)]),Jo(_.i,"t",w),u.C=0,_=u.j.J,u.h=new mt,u.g=su(u.j,_?y:null,!u.m),0<u.O&&(u.M=new Pd(b(u.Y,u,u.g),u.O)),y=u.U,_=u.g,w=u.ca;var q="readystatechange";Array.isArray(q)||(q&&(Er[0]=q.toString()),q=Er);for(var $=0;$<q.length;$++){var se=Uc(_,q[$],w||y.handleEvent,!1,y.h||y);if(!se)break;y.g[se.key]=se}y=u.H?I(u.H):{},u.m?(u.u||(u.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,y)):(u.u="GET",u.g.ea(u.A,u.u,null,y)),gs(),$o(u.i,u.u,u.A,u.l,u.R,u.m)}rn.prototype.ca=function(u){u=u.target;const y=this.M;y&&jn(u)==3?y.j():this.Y(u)},rn.prototype.Y=function(u){try{if(u==this.g)e:{const It=jn(this.g);var y=this.g.Ba();const Gi=this.g.Z();if(!(3>It)&&(It!=3||this.g&&(this.h.h||this.g.oa()||Xc(this.g)))){this.J||It!=4||y==7||(y==8||0>=Gi?gs(3):gs(2)),_s(this);var _=this.g.Z();this.X=_;t:if(Fc(this)){var w=Xc(this.g);u="";var q=w.length,$=jn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){zt(this),ui(this);var se="";break t}this.h.i=new m.TextDecoder}for(y=0;y<q;y++)this.h.h=!0,u+=this.h.i.decode(w[y],{stream:!($&&y==q-1)});w.length=0,this.h.g+=u,this.C=0,se=this.h.g}else se=this.g.oa();if(this.o=_==200,jd(this.i,this.u,this.A,this.l,this.R,It,_),this.o){if(this.T&&!this.K){t:{if(this.g){var je,wt=this.g;if((je=wt.g?wt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ae(je)){var Ue=je;break t}}Ue=null}if(_=Ue)ys(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ir(this,_);else{this.o=!1,this.s=3,rt(12),zt(this),ui(this);break e}}if(this.P){_=!0;let qt;for(;!this.J&&this.C<se.length;)if(qt=Hc(this,se),qt==_a){It==4&&(this.s=4,rt(14),_=!1),ys(this.i,this.l,null,"[Incomplete Response]");break}else if(qt==Ko){this.s=4,rt(15),ys(this.i,this.l,se,"[Invalid Chunk]"),_=!1;break}else ys(this.i,this.l,qt,null),Ir(this,qt);if(Fc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),It!=4||se.length!=0||this.h.h||(this.s=1,rt(16),_=!1),this.o=this.o&&_,!_)ys(this.i,this.l,se,"[Invalid Chunked Response]"),zt(this),ui(this);else if(0<se.length&&!this.W){this.W=!0;var kt=this.j;kt.g==this&&kt.ba&&!kt.M&&(kt.j.info("Great, no buffering proxy detected. Bytes received: "+se.length),jr(kt),kt.M=!0,rt(11))}}else ys(this.i,this.l,se,null),Ir(this,se);It==4&&zt(this),this.o&&!this.J&&(It==4?tu(this.j,this):(this.o=!1,wr(this)))}else Bd(this.g),_==400&&0<se.indexOf("Unknown SID")?(this.s=3,rt(12)):(this.s=0,rt(13)),zt(this),ui(this)}}}catch{}finally{}};function Fc(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Hc(u,y){var _=u.C,w=y.indexOf(`
`,_);return w==-1?_a:(_=Number(y.substring(_,w)),isNaN(_)?Ko:(w+=1,w+_>y.length?_a:(y=y.slice(w,w+_),u.C=w+_,y)))}rn.prototype.cancel=function(){this.J=!0,zt(this)};function wr(u){u.S=Date.now()+u.I,Gc(u,u.I)}function Gc(u,y){if(u.B!=null)throw Error("WatchDog timer not null");u.B=vt(b(u.ba,u),y)}function _s(u){u.B&&(m.clearTimeout(u.B),u.B=null)}rn.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(Bc(this.i,this.A),this.L!=2&&(gs(),rt(17)),zt(this),this.s=2,ui(this)):Gc(this,this.S-u)};function ui(u){u.j.G==0||u.J||tu(u.j,u)}function zt(u){_s(u);var y=u.M;y&&typeof y.ma=="function"&&y.ma(),u.M=null,br(u.U),u.g&&(y=u.g,u.g=null,y.abort(),y.ma())}function Ir(u,y){try{var _=u.j;if(_.G!=0&&(_.g==u||Qo(_.h,u))){if(!u.K&&Qo(_.h,u)&&_.G==3){try{var w=_.Da.g.parse(y)}catch{w=null}if(Array.isArray(w)&&w.length==3){var q=w;if(q[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<u.F)Da(_),Ca(_);else break e;sl(_),rt(18)}}else _.za=q[1],0<_.za-_.T&&37500>q[2]&&_.F&&_.v==0&&!_.C&&(_.C=vt(b(_.Za,_),6e3));if(1>=Ea(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else Hi(_,11)}else if((u.K||_.g==u)&&Da(_),!ae(y))for(q=_.Da.g.parse(y),y=0;y<q.length;y++){let Ue=q[y];if(_.T=Ue[0],Ue=Ue[1],_.G==2)if(Ue[0]=="c"){_.K=Ue[1],_.ia=Ue[2];const kt=Ue[3];kt!=null&&(_.la=kt,_.j.info("VER="+_.la));const It=Ue[4];It!=null&&(_.Aa=It,_.j.info("SVER="+_.Aa));const Gi=Ue[5];Gi!=null&&typeof Gi=="number"&&0<Gi&&(w=1.5*Gi,_.L=w,_.j.info("backChannelRequestTimeoutMs_="+w)),w=_;const qt=u.g;if(qt){const yi=qt.g?qt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(yi){var $=w.h;$.g||yi.indexOf("spdy")==-1&&yi.indexOf("quic")==-1&&yi.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&(ba($,$.h),$.h=null))}if(w.D){const al=qt.g?qt.g.getResponseHeader("X-HTTP-Session-Id"):null;al&&(w.ya=al,Ze(w.I,w.D,al))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-u.F,_.j.info("Handshake RTT: "+_.R+"ms")),w=_;var se=u;if(w.qa=iu(w,w.J?w.ia:null,w.W),se.K){an(w.h,se);var je=se,wt=w.L;wt&&(je.I=wt),je.B&&(_s(je),wr(je)),w.g=se}else Jc(w);0<_.i.length&&xa(_)}else Ue[0]!="stop"&&Ue[0]!="close"||Hi(_,7);else _.G==3&&(Ue[0]=="stop"||Ue[0]=="close"?Ue[0]=="stop"?Hi(_,7):nl(_):Ue[0]!="noop"&&_.l&&_.l.ta(Ue),_.v=0)}}gs(4)}catch{}}var $c=class{constructor(u,y){this.g=u,this.map=y}};function Ui(u){this.l=u||10,m.PerformanceNavigationTiming?(u=m.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ta(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Ea(u){return u.h?1:u.g?u.g.size:0}function Qo(u,y){return u.h?u.h==y:u.g?u.g.has(y):!1}function ba(u,y){u.g?u.g.add(y):u.h=y}function an(u,y){u.h&&u.h==y?u.h=null:u.g&&u.g.has(y)&&u.g.delete(y)}Ui.prototype.cancel=function(){if(this.i=Yo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Yo(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let y=u.i;for(const _ of u.g.values())y=y.concat(_.D);return y}return z(u.i)}function Ud(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(g(u)){for(var y=[],_=u.length,w=0;w<_;w++)y.push(u[w]);return y}y=[],_=0;for(w in u)y[_++]=u[w];return y}function Aa(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(g(u)||typeof u=="string"){var y=[];u=u.length;for(var _=0;_<u;_++)y.push(_);return y}y=[],_=0;for(const w in u)y[_++]=w;return y}}}function Xo(u,y){if(u.forEach&&typeof u.forEach=="function")u.forEach(y,void 0);else if(g(u)||typeof u=="string")Array.prototype.forEach.call(u,y,void 0);else for(var _=Aa(u),w=Ud(u),q=w.length,$=0;$<q;$++)y.call(void 0,w[$],_&&_[$],u)}var Nr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ld(u,y){if(u){u=u.split("&");for(var _=0;_<u.length;_++){var w=u[_].indexOf("="),q=null;if(0<=w){var $=u[_].substring(0,w);q=u[_].substring(w+1)}else $=u[_];y($,q?decodeURIComponent(q.replace(/\+/g," ")):"")}}}function _t(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof _t){this.h=u.h,Rr(this,u.j),this.o=u.o,this.g=u.g,Ts(this,u.s),this.l=u.l;var y=u.i,_=new zi;_.i=y.i,y.g&&(_.g=new Map(y.g),_.h=y.h),Li(this,_),this.m=u.m}else u&&(y=String(u).match(Nr))?(this.h=!1,Rr(this,y[1]||"",!0),this.o=kn(y[2]||""),this.g=kn(y[3]||"",!0),Ts(this,y[4]),this.l=kn(y[5]||"",!0),Li(this,y[6]||"",!0),this.m=kn(y[7]||"")):(this.h=!1,this.i=new zi(null,this.h))}_t.prototype.toString=function(){var u=[],y=this.j;y&&u.push(xr(y,Zo,!0),":");var _=this.g;return(_||y=="file")&&(u.push("//"),(y=this.o)&&u.push(xr(y,Zo,!0),"@"),u.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&u.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(xr(_,_.charAt(0)=="/"?zd:Wo,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",xr(_,Sa)),u.join("")};function _n(u){return new _t(u)}function Rr(u,y,_){u.j=_?kn(y,!0):y,u.j&&(u.j=u.j.replace(/:$/,""))}function Ts(u,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);u.s=y}else u.s=null}function Li(u,y,_){y instanceof zi?(u.i=y,Qc(u.i,u.h)):(_||(y=xr(y,qd)),u.i=new zi(y,u.h))}function Ze(u,y,_){u.i.set(y,_)}function Cr(u){return Ze(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function kn(u,y){return u?y?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function xr(u,y,_){return typeof u=="string"?(u=encodeURI(u).replace(y,Kc),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Kc(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Zo=/[#\/\?@]/g,Wo=/[#\?:]/g,zd=/[#\?]/g,qd=/[#\?@]/g,Sa=/#/g;function zi(u,y){this.h=this.g=null,this.i=u||null,this.j=!!y}function Vn(u){u.g||(u.g=new Map,u.h=0,u.i&&Ld(u.i,function(y,_){u.add(decodeURIComponent(y.replace(/\+/g," ")),_)}))}i=zi.prototype,i.add=function(u,y){Vn(this),this.i=null,u=hi(this,u);var _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(y),this.h+=1,this};function qi(u,y){Vn(u),y=hi(u,y),u.g.has(y)&&(u.i=null,u.h-=u.g.get(y).length,u.g.delete(y))}function Bi(u,y){return Vn(u),y=hi(u,y),u.g.has(y)}i.forEach=function(u,y){Vn(this),this.g.forEach(function(_,w){_.forEach(function(q){u.call(y,q,w,this)},this)},this)},i.na=function(){Vn(this);const u=Array.from(this.g.values()),y=Array.from(this.g.keys()),_=[];for(let w=0;w<y.length;w++){const q=u[w];for(let $=0;$<q.length;$++)_.push(y[w])}return _},i.V=function(u){Vn(this);let y=[];if(typeof u=="string")Bi(this,u)&&(y=y.concat(this.g.get(hi(this,u))));else{u=Array.from(this.g.values());for(let _=0;_<u.length;_++)y=y.concat(u[_])}return y},i.set=function(u,y){return Vn(this),this.i=null,u=hi(this,u),Bi(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[y]),this.h+=1,this},i.get=function(u,y){return u?(u=this.V(u),0<u.length?String(u[0]):y):y};function Jo(u,y,_){qi(u,y),0<_.length&&(u.i=null,u.g.set(hi(u,y),z(_)),u.h+=_.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],y=Array.from(this.g.keys());for(var _=0;_<y.length;_++){var w=y[_];const $=encodeURIComponent(String(w)),se=this.V(w);for(w=0;w<se.length;w++){var q=$;se[w]!==""&&(q+="="+encodeURIComponent(String(se[w]))),u.push(q)}}return this.i=u.join("&")};function hi(u,y){return y=String(y),u.j&&(y=y.toLowerCase()),y}function Qc(u,y){y&&!u.j&&(Vn(u),u.i=null,u.g.forEach(function(_,w){var q=w.toLowerCase();w!=q&&(qi(this,w),Jo(this,q,_))},u)),u.j=y}function Dr(u,y){const _=new Mn;if(m.Image){const w=new Image;w.onload=k(Pn,_,"TestLoadImage: loaded",!0,y,w),w.onerror=k(Pn,_,"TestLoadImage: error",!1,y,w),w.onabort=k(Pn,_,"TestLoadImage: abort",!1,y,w),w.ontimeout=k(Pn,_,"TestLoadImage: timeout",!1,y,w),m.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=u}else y(!1)}function Xn(u,y){const _=new Mn,w=new AbortController,q=setTimeout(()=>{w.abort(),Pn(_,"TestPingServer: timeout",!1,y)},1e4);fetch(u,{signal:w.signal}).then($=>{clearTimeout(q),$.ok?Pn(_,"TestPingServer: ok",!0,y):Pn(_,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(q),Pn(_,"TestPingServer: error",!1,y)})}function Pn(u,y,_,w,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),w(_)}catch{}}function Or(){this.g=new Ar}function di(u,y,_){const w=_||"";try{Xo(u,function(q,$){let se=q;v(q)&&(se=Qn(q)),y.push(w+$+"="+encodeURIComponent(se))})}catch(q){throw y.push(w+"type="+encodeURIComponent("_badmap")),q}}function Es(u){this.l=u.Ub||null,this.j=u.eb||!1}O(Es,qo),Es.prototype.g=function(){return new Fi(this.l,this.j)},Es.prototype.i=function(u){return function(){return u}}({});function Fi(u,y){ht.call(this),this.D=u,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}O(Fi,ht),i=Fi.prototype,i.open=function(u,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=y,this.readyState=1,mi(this)},i.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(y.body=u),(this.D||m).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,fi(this)),this.readyState=0},i.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,mi(this)),this.g&&(this.readyState=3,mi(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;el(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function el(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}i.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var y=u.value?u.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!u.done}))&&(this.response=this.responseText+=y)}u.done?fi(this):mi(this),this.readyState==3&&el(this)}},i.Ra=function(u){this.g&&(this.response=this.responseText=u,fi(this))},i.Qa=function(u){this.g&&(this.response=u,fi(this))},i.ga=function(){this.g&&fi(this)};function fi(u){u.readyState=4,u.l=null,u.j=null,u.v=null,mi(u)}i.setRequestHeader=function(u,y){this.u.append(u,y)},i.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],y=this.h.entries();for(var _=y.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=y.next();return u.join(`\r
`)};function mi(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Fi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function tl(u){let y="";return de(u,function(_,w){y+=w,y+=":",y+=_,y+=`\r
`}),y}function Mt(u,y,_){e:{for(w in _){var w=!1;break e}w=!0}w||(_=tl(_),typeof u=="string"?_!=null&&encodeURIComponent(String(_)):Ze(u,y,_))}function Ke(u){ht.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}O(Ke,ht);var wa=/^https?$/i,Mr=["POST","PUT"];i=Ke.prototype,i.Ha=function(u){this.J=u},i.ea=function(u,y,_,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);y=y?y.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():li.g(),this.v=this.o?Bo(this.o):Bo(li),this.g.onreadystatechange=b(this.Ea,this);try{this.B=!0,this.g.open(y,String(u),!0),this.B=!1}catch($){Yc(this,$);return}if(u=_||"",_=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var q in w)_.set(q,w[q]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const $ of w.keys())_.set($,w.get($));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(_.keys()).find($=>$.toLowerCase()=="content-type"),q=m.FormData&&u instanceof m.FormData,!(0<=Array.prototype.indexOf.call(Mr,y,void 0))||w||q||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$,se]of _)this.g.setRequestHeader($,se);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{kr(this),this.u=!0,this.g.send(u),this.u=!1}catch($){Yc(this,$)}};function Yc(u,y){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=y,u.m=5,Ia(u),pi(u)}function Ia(u){u.A||(u.A=!0,Qe(u,"complete"),Qe(u,"error"))}i.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Qe(this,"complete"),Qe(this,"abort"),pi(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),pi(this,!0)),Ke.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?Na(this):this.bb())},i.bb=function(){Na(this)};function Na(u){if(u.h&&typeof d<"u"&&(!u.v[1]||jn(u)!=4||u.Z()!=2)){if(u.u&&jn(u)==4)Xt(u.Ea,0,u);else if(Qe(u,"readystatechange"),jn(u)==4){u.h=!1;try{const se=u.Z();e:switch(se){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var _;if(!(_=y)){var w;if(w=se===0){var q=String(u.D).match(Nr)[1]||null;!q&&m.self&&m.self.location&&(q=m.self.location.protocol.slice(0,-1)),w=!wa.test(q?q.toLowerCase():"")}_=w}if(_)Qe(u,"complete"),Qe(u,"success");else{u.m=6;try{var $=2<jn(u)?u.g.statusText:""}catch{$=""}u.l=$+" ["+u.Z()+"]",Ia(u)}}finally{pi(u)}}}}function pi(u,y){if(u.g){kr(u);const _=u.g,w=u.v[0]?()=>{}:null;u.g=null,u.v=null,y||Qe(u,"ready");try{_.onreadystatechange=w}catch{}}}function kr(u){u.I&&(m.clearTimeout(u.I),u.I=null)}i.isActive=function(){return!!this.g};function jn(u){return u.g?u.g.readyState:0}i.Z=function(){try{return 2<jn(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(u){if(this.g){var y=this.g.responseText;return u&&y.indexOf(u)==0&&(y=y.substring(u.length)),ya(y)}};function Xc(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Bd(u){const y={};u=(u.g&&2<=jn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<u.length;w++){if(ae(u[w]))continue;var _=P(u[w]);const q=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const $=y[q]||[];y[q]=$,$.push(_)}V(y,function(w){return w.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Vr(u,y,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||y}function Ra(u){this.Aa=0,this.i=[],this.j=new Mn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Vr("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Vr("baseRetryDelayMs",5e3,u),this.cb=Vr("retryDelaySeedMs",1e4,u),this.Wa=Vr("forwardChannelMaxRetries",2,u),this.wa=Vr("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Ui(u&&u.concurrentRequestLimit),this.Da=new Or,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=Ra.prototype,i.la=8,i.G=1,i.connect=function(u,y,_,w){rt(0),this.W=u,this.H=y||{},_&&w!==void 0&&(this.H.OSID=_,this.H.OAID=w),this.F=this.X,this.I=iu(this,null,this.W),xa(this)};function nl(u){if(Zc(u),u.G==3){var y=u.U++,_=_n(u.I);if(Ze(_,"SID",u.K),Ze(_,"RID",y),Ze(_,"TYPE","terminate"),Pr(u,_),y=new rn(u,u.j,y),y.L=2,y.v=Cr(_n(_)),_=!1,m.navigator&&m.navigator.sendBeacon)try{_=m.navigator.sendBeacon(y.v.toString(),"")}catch{}!_&&m.Image&&(new Image().src=y.v,_=!0),_||(y.g=su(y.j,null),y.g.ea(y.v)),y.F=Date.now(),wr(y)}nu(u)}function Ca(u){u.g&&(jr(u),u.g.cancel(),u.g=null)}function Zc(u){Ca(u),u.u&&(m.clearTimeout(u.u),u.u=null),Da(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&m.clearTimeout(u.s),u.s=null)}function xa(u){if(!Ta(u.h)&&!u.s){u.s=!0;var y=u.Ga;re||D(),me||(re(),me=!0),Ge.add(y,u),u.B=0}}function Fd(u,y){return Ea(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=y.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=vt(b(u.Ga,u,y),rl(u,u.B)),u.B++,!0)}i.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const q=new rn(this,this.j,u);let $=this.o;if(this.S&&($?($=I($),x($,this.S)):$=this.S),this.m!==null||this.O||(q.H=$,$=null),this.P)e:{for(var y=0,_=0;_<this.i.length;_++){t:{var w=this.i[_];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(y+=w,4096<y){y=_;break e}if(y===4096||_===this.i.length-1){y=_+1;break e}}y=1e3}else y=1e3;y=Wc(this,q,y),_=_n(this.I),Ze(_,"RID",u),Ze(_,"CVER",22),this.D&&Ze(_,"X-HTTP-Session-Id",this.D),Pr(this,_),$&&(this.O?y="headers="+encodeURIComponent(String(tl($)))+"&"+y:this.m&&Mt(_,this.m,$)),ba(this.h,q),this.Ua&&Ze(_,"TYPE","init"),this.P?(Ze(_,"$req",y),Ze(_,"SID","null"),q.T=!0,Yn(q,_,null)):Yn(q,_,y),this.G=2}}else this.G==3&&(u?il(this,u):this.i.length==0||Ta(this.h)||il(this))};function il(u,y){var _;y?_=y.l:_=u.U++;const w=_n(u.I);Ze(w,"SID",u.K),Ze(w,"RID",_),Ze(w,"AID",u.T),Pr(u,w),u.m&&u.o&&Mt(w,u.m,u.o),_=new rn(u,u.j,_,u.B+1),u.m===null&&(_.H=u.o),y&&(u.i=y.D.concat(u.i)),y=Wc(u,_,1e3),_.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),ba(u.h,_),Yn(_,w,y)}function Pr(u,y){u.H&&de(u.H,function(_,w){Ze(y,w,_)}),u.l&&Xo({},function(_,w){Ze(y,w,_)})}function Wc(u,y,_){_=Math.min(u.i.length,_);var w=u.l?b(u.l.Na,u.l,u):null;e:{var q=u.i;let $=-1;for(;;){const se=["count="+_];$==-1?0<_?($=q[0].g,se.push("ofs="+$)):$=0:se.push("ofs="+$);let je=!0;for(let wt=0;wt<_;wt++){let Ue=q[wt].g;const kt=q[wt].map;if(Ue-=$,0>Ue)$=Math.max(0,q[wt].g-100),je=!1;else try{di(kt,se,"req"+Ue+"_")}catch{w&&w(kt)}}if(je){w=se.join("&");break e}}}return u=u.i.splice(0,_),y.D=u,w}function Jc(u){if(!u.g&&!u.u){u.Y=1;var y=u.Fa;re||D(),me||(re(),me=!0),Ge.add(y,u),u.v=0}}function sl(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=vt(b(u.Fa,u),rl(u,u.v)),u.v++,!0)}i.Fa=function(){if(this.u=null,eu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=vt(b(this.ab,this),u)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,rt(10),Ca(this),eu(this))};function jr(u){u.A!=null&&(m.clearTimeout(u.A),u.A=null)}function eu(u){u.g=new rn(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var y=_n(u.qa);Ze(y,"RID","rpc"),Ze(y,"SID",u.K),Ze(y,"AID",u.T),Ze(y,"CI",u.F?"0":"1"),!u.F&&u.ja&&Ze(y,"TO",u.ja),Ze(y,"TYPE","xmlhttp"),Pr(u,y),u.m&&u.o&&Mt(y,u.m,u.o),u.L&&(u.g.I=u.L);var _=u.g;u=u.ia,_.L=1,_.v=Cr(_n(y)),_.m=null,_.P=!0,ji(_,u)}i.Za=function(){this.C!=null&&(this.C=null,Ca(this),sl(this),rt(19))};function Da(u){u.C!=null&&(m.clearTimeout(u.C),u.C=null)}function tu(u,y){var _=null;if(u.g==y){Da(u),jr(u),u.g=null;var w=2}else if(Qo(u.h,y))_=y.D,an(u.h,y),w=1;else return;if(u.G!=0){if(y.o)if(w==1){_=y.m?y.m.length:0,y=Date.now()-y.F;var q=u.B;w=ps(),Qe(w,new St(w,_)),xa(u)}else Jc(u);else if(q=y.s,q==3||q==0&&0<y.X||!(w==1&&Fd(u,y)||w==2&&sl(u)))switch(_&&0<_.length&&(y=u.h,y.i=y.i.concat(_)),q){case 1:Hi(u,5);break;case 4:Hi(u,10);break;case 3:Hi(u,6);break;default:Hi(u,2)}}}function rl(u,y){let _=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(_*=2),_*y}function Hi(u,y){if(u.j.info("Error code "+y),y==2){var _=b(u.fb,u),w=u.Xa;const q=!w;w=new _t(w||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||Rr(w,"https"),Cr(w),q?Dr(w.toString(),_):Xn(w.toString(),_)}else rt(2);u.G=0,u.l&&u.l.sa(y),nu(u),Zc(u)}i.fb=function(u){u?(this.j.info("Successfully pinged google.com"),rt(2)):(this.j.info("Failed to ping google.com"),rt(1))};function nu(u){if(u.G=0,u.ka=[],u.l){const y=Yo(u.h);(y.length!=0||u.i.length!=0)&&(j(u.ka,y),j(u.ka,u.i),u.h.i.length=0,z(u.i),u.i.length=0),u.l.ra()}}function iu(u,y,_){var w=_ instanceof _t?_n(_):new _t(_);if(w.g!="")y&&(w.g=y+"."+w.g),Ts(w,w.s);else{var q=m.location;w=q.protocol,y=y?y+"."+q.hostname:q.hostname,q=+q.port;var $=new _t(null);w&&Rr($,w),y&&($.g=y),q&&Ts($,q),_&&($.l=_),w=$}return _=u.D,y=u.ya,_&&y&&Ze(w,_,y),Ze(w,"VER",u.la),Pr(u,w),w}function su(u,y,_){if(y&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=u.Ca&&!u.pa?new Ke(new Es({eb:_})):new Ke(u.pa),y.Ha(u.J),y}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function ru(){}i=ru.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function Oa(){}Oa.prototype.g=function(u,y){return new on(u,y)};function on(u,y){ht.call(this),this.g=new Ra(y),this.l=u,this.h=y&&y.messageUrlParams||null,u=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(u?u["X-WebChannel-Content-Type"]=y.messageContentType:u={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(u?u["X-WebChannel-Client-Profile"]=y.va:u={"X-WebChannel-Client-Profile":y.va}),this.g.S=u,(u=y&&y.Sb)&&!ae(u)&&(this.g.m=u),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!ae(y)&&(this.g.D=y,u=this.h,u!==null&&y in u&&(u=this.h,y in u&&delete u[y])),this.j=new gi(this)}O(on,ht),on.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},on.prototype.close=function(){nl(this.g)},on.prototype.o=function(u){var y=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.u&&(_={},_.__data__=Qn(u),u=_);y.i.push(new $c(y.Ya++,u)),y.G==3&&xa(y)},on.prototype.N=function(){this.g.l=null,delete this.j,nl(this.g),delete this.g,on.aa.N.call(this)};function au(u){Vi.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var y=u.__sm__;if(y){e:{for(const _ in y){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,y=y!==null&&u in y?y[u]:void 0),this.data=y}else this.data=u}O(au,Vi);function ou(){Ho.call(this),this.status=1}O(ou,Ho);function gi(u){this.g=u}O(gi,ru),gi.prototype.ua=function(){Qe(this.g,"a")},gi.prototype.ta=function(u){Qe(this.g,new au(u))},gi.prototype.sa=function(u){Qe(this.g,new ou)},gi.prototype.ra=function(){Qe(this.g,"b")},Oa.prototype.createWebChannel=Oa.prototype.g,on.prototype.send=on.prototype.o,on.prototype.open=on.prototype.m,on.prototype.close=on.prototype.close,xb=function(){return new Oa},Cb=function(){return ps()},Rb=oi,gp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},vs.NO_ERROR=0,vs.TIMEOUT=8,vs.HTTP_ERROR=6,Eh=vs,Pi.COMPLETE="complete",Nb=Pi,Fo.EventType=ki,ki.OPEN="a",ki.CLOSE="b",ki.ERROR="c",ki.MESSAGE="d",ht.prototype.listen=ht.prototype.K,Ql=Fo,Ke.prototype.listenOnce=Ke.prototype.L,Ke.prototype.getLastError=Ke.prototype.Ka,Ke.prototype.getLastErrorCode=Ke.prototype.Ba,Ke.prototype.getStatus=Ke.prototype.Z,Ke.prototype.getResponseJson=Ke.prototype.Oa,Ke.prototype.getResponseText=Ke.prototype.oa,Ke.prototype.send=Ke.prototype.ea,Ke.prototype.setWithCredentials=Ke.prototype.Ha,Ib=Ke}).apply(typeof ch<"u"?ch:typeof self<"u"?self:typeof window<"u"?window:{});const eE="@firebase/firestore",tE="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}en.UNAUTHENTICATED=new en(null),en.GOOGLE_CREDENTIALS=new en("google-credentials-uid"),en.FIRST_PARTY=new en("first-party-uid"),en.MOCK_USER=new en("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Oo="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aa=new bc("@firebase/firestore");function oo(){return aa.logLevel}function ue(i,...e){if(aa.logLevel<=Ve.DEBUG){const t=e.map(tg);aa.debug(`Firestore (${Oo}): ${i}`,...t)}}function hs(i,...e){if(aa.logLevel<=Ve.ERROR){const t=e.map(tg);aa.error(`Firestore (${Oo}): ${i}`,...t)}}function So(i,...e){if(aa.logLevel<=Ve.WARN){const t=e.map(tg);aa.warn(`Firestore (${Oo}): ${i}`,...t)}}function tg(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ve(i,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,Db(i,r,t)}function Db(i,e,t){let r=`FIRESTORE (${Oo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw hs(r),new Error(r)}function qe(i,e,t,r){let o="Unexpected state";typeof t=="string"?o=t:r=t,i||Db(e,o,r)}function we(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class le extends Kn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ob{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class SC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(en.UNAUTHENTICATED))}shutdown(){}}class wC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class IC{constructor(e){this.t=e,this.currentUser=en.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){qe(this.o===void 0,42304);let r=this.i;const o=g=>this.i!==r?(r=this.i,t(g)):Promise.resolve();let c=new Ni;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Ni,e.enqueueRetryable(()=>o(this.currentUser))};const d=()=>{const g=c;e.enqueueRetryable(async()=>{await g.promise,await o(this.currentUser)})},m=g=>{ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit(g=>m(g)),setTimeout(()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?m(g):(ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Ni)}},0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(qe(typeof r.accessToken=="string",31837,{l:r}),new Ob(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return qe(e===null||typeof e=="string",2055,{h:e}),new en(e)}}class NC{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=en.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class RC{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new NC(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(en.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class nE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class CC{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ni(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){qe(this.o===void 0,3512);const r=c=>{c.error!=null&&ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const d=c.token!==this.m;return this.m=c.token,ue("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable(()=>r(c))};const o=c=>{ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(c=>o(c)),setTimeout(()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?o(c):ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new nE(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(qe(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new nE(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xC(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<i;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mb(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kb{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const o=xC(40);for(let c=0;c<o.length;++c)r.length<20&&o[c]<t&&(r+=e.charAt(o[c]%62))}return r}}function Ce(i,e){return i<e?-1:i>e?1:0}function yp(i,e){let t=0;for(;t<i.length&&t<e.length;){const r=i.codePointAt(t),o=e.codePointAt(t);if(r!==o){if(r<128&&o<128)return Ce(r,o);{const c=Mb(),d=DC(c.encode(iE(i,t)),c.encode(iE(e,t)));return d!==0?d:Ce(r,o)}}t+=r>65535?2:1}return Ce(i.length,e.length)}function iE(i,e){return i.codePointAt(e)>65535?i.substring(e,e+2):i.substring(e,e+1)}function DC(i,e){for(let t=0;t<i.length&&t<e.length;++t)if(i[t]!==e[t])return Ce(i[t],e[t]);return Ce(i.length,e.length)}function wo(i,e,t){return i.length===e.length&&i.every((r,o)=>t(r,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sE=-62135596800,rE=1e6;class Ct{static now(){return Ct.fromMillis(Date.now())}static fromDate(e){return Ct.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*rE);return new Ct(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new le(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new le(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<sE)throw new le(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new le(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/rE}_compareTo(e){return this.seconds===e.seconds?Ce(this.nanoseconds,e.nanoseconds):Ce(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-sE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{static fromTimestamp(e){return new Ee(e)}static min(){return new Ee(new Ct(0,0))}static max(){return new Ee(new Ct(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aE="__name__";class Ai{constructor(e,t,r){t===void 0?t=0:t>e.length&&ve(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&ve(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Ai.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ai?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const c=Ai.compareSegments(e.get(o),t.get(o));if(c!==0)return c}return Ce(e.length,t.length)}static compareSegments(e,t){const r=Ai.isNumericId(e),o=Ai.isNumericId(t);return r&&!o?-1:!r&&o?1:r&&o?Ai.extractNumericId(e).compare(Ai.extractNumericId(t)):yp(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ws.fromString(e.substring(4,e.length-2))}}class nt extends Ai{construct(e,t,r){return new nt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new le(Z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new nt(t)}static emptyPath(){return new nt([])}}const OC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class $t extends Ai{construct(e,t,r){return new $t(e,t,r)}static isValidIdentifier(e){return OC.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),$t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===aE}static keyField(){return new $t([aE])}static fromServerFormat(e){const t=[];let r="",o=0;const c=()=>{if(r.length===0)throw new le(Z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let d=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new le(Z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new le(Z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=g,o+=2}else m==="`"?(d=!d,o++):m!=="."||d?(r+=m,o++):(c(),o++)}if(c(),d)throw new le(Z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new $t(t)}static emptyPath(){return new $t([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{constructor(e){this.path=e}static fromPath(e){return new pe(nt.fromString(e))}static fromName(e){return new pe(nt.fromString(e).popFirst(5))}static empty(){return new pe(nt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&nt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return nt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new pe(new nt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dc=-1;function MC(i,e){const t=i.toTimestamp().seconds,r=i.toTimestamp().nanoseconds+1,o=Ee.fromTimestamp(r===1e9?new Ct(t+1,0):new Ct(t,r));return new tr(o,pe.empty(),e)}function kC(i){return new tr(i.readTime,i.key,dc)}class tr{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new tr(Ee.min(),pe.empty(),dc)}static max(){return new tr(Ee.max(),pe.empty(),dc)}}function VC(i,e){let t=i.readTime.compareTo(e.readTime);return t!==0?t:(t=pe.comparator(i.documentKey,e.documentKey),t!==0?t:Ce(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class jC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mo(i){if(i.code!==Z.FAILED_PRECONDITION||i.message!==PC)throw i;ue("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ve(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ee((r,o)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(r,o)},this.catchCallback=c=>{this.wrapFailure(t,c).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ee?t:ee.resolve(t)}catch(t){return ee.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ee.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ee.reject(t)}static resolve(e){return new ee((t,r)=>{t(e)})}static reject(e){return new ee((t,r)=>{r(e)})}static waitFor(e){return new ee((t,r)=>{let o=0,c=0,d=!1;e.forEach(m=>{++o,m.next(()=>{++c,d&&c===o&&t()},g=>r(g))}),d=!0,c===o&&t()})}static or(e){let t=ee.resolve(!1);for(const r of e)t=t.next(o=>o?ee.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,c)=>{r.push(t.call(this,o,c))}),this.waitFor(r)}static mapArray(e,t){return new ee((r,o)=>{const c=e.length,d=new Array(c);let m=0;for(let g=0;g<c;g++){const v=g;t(e[v]).next(T=>{d[v]=T,++m,m===c&&r(d)},T=>o(T))}})}static doWhile(e,t){return new ee((r,o)=>{const c=()=>{e()===!0?t().next(()=>{c()},o):r()};c()})}}function UC(i){const e=i.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function ko(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>t.writeSequenceNumber(r))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}rd.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ng=-1;function Nc(i){return i==null}function jh(i){return i===0&&1/i==-1/0}function LC(i){return typeof i=="number"&&Number.isInteger(i)&&!jh(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vb="";function zC(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=oE(e)),e=qC(i.get(t),e);return oE(e)}function qC(i,e){let t=e;const r=i.length;for(let o=0;o<r;o++){const c=i.charAt(o);switch(c){case"\0":t+="";break;case Vb:t+="";break;default:t+=c}}return t}function oE(i){return i+Vb+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lE(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function dr(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function Pb(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e,t){this.comparator=e,this.root=t||Gt.EMPTY}insert(e,t){return new ut(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Gt.BLACK,null,null))}remove(e){return new ut(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Gt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(o===0)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new uh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new uh(this.root,e,this.comparator,!1)}getReverseIterator(){return new uh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new uh(this.root,e,this.comparator,!0)}}class uh{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=t?r(e.key,t):1,t&&o&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Gt{constructor(e,t,r,o,c){this.key=e,this.value=t,this.color=r??Gt.RED,this.left=o??Gt.EMPTY,this.right=c??Gt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,c){return new Gt(e??this.key,t??this.value,r??this.color,o??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const c=r(e,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(e,t,r),null):c===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Gt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Gt.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Gt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Gt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ve(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ve(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ve(27949);return e+(this.isRed()?0:1)}}Gt.EMPTY=null,Gt.RED=!0,Gt.BLACK=!1;Gt.EMPTY=new class{constructor(){this.size=0}get key(){throw ve(57766)}get value(){throw ve(16141)}get color(){throw ve(16727)}get left(){throw ve(29726)}get right(){throw ve(36894)}copy(e,t,r,o,c){return this}insert(e,t,r){return new Gt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e){this.comparator=e,this.data=new ut(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new cE(this.data.getIterator())}getIteratorFrom(e){return new cE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof xt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,c=r.getNext().key;if(this.comparator(o,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new xt(this.comparator);return t.data=e,t}}class cE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e){this.fields=e,e.sort($t.comparator)}static empty(){return new Nn([])}unionWith(e){let t=new xt($t.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Nn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return wo(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(o){try{return atob(o)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new jb("Invalid base64 string: "+c):c}}(e);return new Yt(t)}static fromUint8Array(e){const t=function(o){let c="";for(let d=0;d<o.length;++d)c+=String.fromCharCode(o[d]);return c}(e);return new Yt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ce(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Yt.EMPTY_BYTE_STRING=new Yt("");const BC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function nr(i){if(qe(!!i,39018),typeof i=="string"){let e=0;const t=BC.exec(i);if(qe(!!t,46558,{timestamp:i}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(i);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:yt(i.seconds),nanos:yt(i.nanos)}}function yt(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function ir(i){return typeof i=="string"?Yt.fromBase64String(i):Yt.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ub="server_timestamp",Lb="__type__",zb="__previous_value__",qb="__local_write_time__";function ig(i){var e,t;return((t=(((e=i?.mapValue)===null||e===void 0?void 0:e.fields)||{})[Lb])===null||t===void 0?void 0:t.stringValue)===Ub}function ad(i){const e=i.mapValue.fields[zb];return ig(e)?ad(e):e}function fc(i){const e=nr(i.mapValue.fields[qb].timestampValue);return new Ct(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FC{constructor(e,t,r,o,c,d,m,g,v,T){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=c,this.forceLongPolling=d,this.autoDetectLongPolling=m,this.longPollingOptions=g,this.useFetchStreams=v,this.isUsingEmulator=T}}const Uh="(default)";class mc{constructor(e,t){this.projectId=e,this.database=t||Uh}static empty(){return new mc("","")}get isDefaultDatabase(){return this.database===Uh}isEqual(e){return e instanceof mc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bb="__type__",HC="__max__",hh={mapValue:{}},Fb="__vector__",Lh="value";function sr(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?ig(i)?4:$C(i)?9007199254740991:GC(i)?10:11:ve(28295,{value:i})}function Ci(i,e){if(i===e)return!0;const t=sr(i);if(t!==sr(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return fc(i).isEqual(fc(e));case 3:return function(o,c){if(typeof o.timestampValue=="string"&&typeof c.timestampValue=="string"&&o.timestampValue.length===c.timestampValue.length)return o.timestampValue===c.timestampValue;const d=nr(o.timestampValue),m=nr(c.timestampValue);return d.seconds===m.seconds&&d.nanos===m.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return function(o,c){return ir(o.bytesValue).isEqual(ir(c.bytesValue))}(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return function(o,c){return yt(o.geoPointValue.latitude)===yt(c.geoPointValue.latitude)&&yt(o.geoPointValue.longitude)===yt(c.geoPointValue.longitude)}(i,e);case 2:return function(o,c){if("integerValue"in o&&"integerValue"in c)return yt(o.integerValue)===yt(c.integerValue);if("doubleValue"in o&&"doubleValue"in c){const d=yt(o.doubleValue),m=yt(c.doubleValue);return d===m?jh(d)===jh(m):isNaN(d)&&isNaN(m)}return!1}(i,e);case 9:return wo(i.arrayValue.values||[],e.arrayValue.values||[],Ci);case 10:case 11:return function(o,c){const d=o.mapValue.fields||{},m=c.mapValue.fields||{};if(lE(d)!==lE(m))return!1;for(const g in d)if(d.hasOwnProperty(g)&&(m[g]===void 0||!Ci(d[g],m[g])))return!1;return!0}(i,e);default:return ve(52216,{left:i})}}function pc(i,e){return(i.values||[]).find(t=>Ci(t,e))!==void 0}function Io(i,e){if(i===e)return 0;const t=sr(i),r=sr(e);if(t!==r)return Ce(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ce(i.booleanValue,e.booleanValue);case 2:return function(c,d){const m=yt(c.integerValue||c.doubleValue),g=yt(d.integerValue||d.doubleValue);return m<g?-1:m>g?1:m===g?0:isNaN(m)?isNaN(g)?0:-1:1}(i,e);case 3:return uE(i.timestampValue,e.timestampValue);case 4:return uE(fc(i),fc(e));case 5:return yp(i.stringValue,e.stringValue);case 6:return function(c,d){const m=ir(c),g=ir(d);return m.compareTo(g)}(i.bytesValue,e.bytesValue);case 7:return function(c,d){const m=c.split("/"),g=d.split("/");for(let v=0;v<m.length&&v<g.length;v++){const T=Ce(m[v],g[v]);if(T!==0)return T}return Ce(m.length,g.length)}(i.referenceValue,e.referenceValue);case 8:return function(c,d){const m=Ce(yt(c.latitude),yt(d.latitude));return m!==0?m:Ce(yt(c.longitude),yt(d.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return hE(i.arrayValue,e.arrayValue);case 10:return function(c,d){var m,g,v,T;const A=c.fields||{},b=d.fields||{},k=(m=A[Lh])===null||m===void 0?void 0:m.arrayValue,O=(g=b[Lh])===null||g===void 0?void 0:g.arrayValue,z=Ce(((v=k?.values)===null||v===void 0?void 0:v.length)||0,((T=O?.values)===null||T===void 0?void 0:T.length)||0);return z!==0?z:hE(k,O)}(i.mapValue,e.mapValue);case 11:return function(c,d){if(c===hh.mapValue&&d===hh.mapValue)return 0;if(c===hh.mapValue)return 1;if(d===hh.mapValue)return-1;const m=c.fields||{},g=Object.keys(m),v=d.fields||{},T=Object.keys(v);g.sort(),T.sort();for(let A=0;A<g.length&&A<T.length;++A){const b=yp(g[A],T[A]);if(b!==0)return b;const k=Io(m[g[A]],v[T[A]]);if(k!==0)return k}return Ce(g.length,T.length)}(i.mapValue,e.mapValue);default:throw ve(23264,{Pe:t})}}function uE(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return Ce(i,e);const t=nr(i),r=nr(e),o=Ce(t.seconds,r.seconds);return o!==0?o:Ce(t.nanos,r.nanos)}function hE(i,e){const t=i.values||[],r=e.values||[];for(let o=0;o<t.length&&o<r.length;++o){const c=Io(t[o],r[o]);if(c)return c}return Ce(t.length,r.length)}function No(i){return vp(i)}function vp(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(t){const r=nr(t);return`time(${r.seconds},${r.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?function(t){return ir(t).toBase64()}(i.bytesValue):"referenceValue"in i?function(t){return pe.fromName(t).toString()}(i.referenceValue):"geoPointValue"in i?function(t){return`geo(${t.latitude},${t.longitude})`}(i.geoPointValue):"arrayValue"in i?function(t){let r="[",o=!0;for(const c of t.values||[])o?o=!1:r+=",",r+=vp(c);return r+"]"}(i.arrayValue):"mapValue"in i?function(t){const r=Object.keys(t.fields||{}).sort();let o="{",c=!0;for(const d of r)c?c=!1:o+=",",o+=`${d}:${vp(t.fields[d])}`;return o+"}"}(i.mapValue):ve(61005,{value:i})}function bh(i){switch(sr(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ad(i);return e?16+bh(e):16;case 5:return 2*i.stringValue.length;case 6:return ir(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((o,c)=>o+bh(c),0)}(i.arrayValue);case 10:case 11:return function(r){let o=0;return dr(r.fields,(c,d)=>{o+=c.length+bh(d)}),o}(i.mapValue);default:throw ve(13486,{value:i})}}function dE(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function _p(i){return!!i&&"integerValue"in i}function sg(i){return!!i&&"arrayValue"in i}function fE(i){return!!i&&"nullValue"in i}function mE(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Ah(i){return!!i&&"mapValue"in i}function GC(i){var e,t;return((t=(((e=i?.mapValue)===null||e===void 0?void 0:e.fields)||{})[Bb])===null||t===void 0?void 0:t.stringValue)===Fb}function ec(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return dr(i.mapValue.fields,(t,r)=>e.mapValue.fields[t]=ec(r)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ec(i.arrayValue.values[t]);return e}return Object.assign({},i)}function $C(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===HC}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this.value=e}static empty(){return new un({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Ah(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ec(t)}setAll(e){let t=$t.emptyPath(),r={},o=[];e.forEach((d,m)=>{if(!t.isImmediateParentOf(m)){const g=this.getFieldsMap(t);this.applyChanges(g,r,o),r={},o=[],t=m.popLast()}d?r[m.lastSegment()]=ec(d):o.push(m.lastSegment())});const c=this.getFieldsMap(t);this.applyChanges(c,r,o)}delete(e){const t=this.field(e.popLast());Ah(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ci(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];Ah(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){dr(t,(o,c)=>e[o]=c);for(const o of r)delete e[o]}clone(){return new un(ec(this.value))}}function Hb(i){const e=[];return dr(i.fields,(t,r)=>{const o=new $t([t]);if(Ah(r)){const c=Hb(r.mapValue).fields;if(c.length===0)e.push(o);else for(const d of c)e.push(o.child(d))}else e.push(o)}),new Nn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e,t,r,o,c,d,m){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.createTime=c,this.data=d,this.documentState=m}static newInvalidDocument(e){return new Lt(e,0,Ee.min(),Ee.min(),Ee.min(),un.empty(),0)}static newFoundDocument(e,t,r,o){return new Lt(e,1,t,Ee.min(),r,o,0)}static newNoDocument(e,t){return new Lt(e,2,t,Ee.min(),Ee.min(),un.empty(),0)}static newUnknownDocument(e,t){return new Lt(e,3,t,Ee.min(),Ee.min(),un.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=un.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=un.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Lt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Lt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zh{constructor(e,t){this.position=e,this.inclusive=t}}function pE(i,e,t){let r=0;for(let o=0;o<i.position.length;o++){const c=e[o],d=i.position[o];if(c.field.isKeyField()?r=pe.comparator(pe.fromName(d.referenceValue),t.key):r=Io(d,t.data.field(c.field)),c.dir==="desc"&&(r*=-1),r!==0)break}return r}function gE(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!Ci(i.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc{constructor(e,t="asc"){this.field=e,this.dir=t}}function KC(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gb{}class At extends Gb{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new YC(e,t,r):t==="array-contains"?new WC(e,r):t==="in"?new JC(e,r):t==="not-in"?new ex(e,r):t==="array-contains-any"?new tx(e,r):new At(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new XC(e,r):new ZC(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Io(t,this.value)):t!==null&&sr(this.value)===sr(t)&&this.matchesComparison(Io(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ve(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ri extends Gb{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new ri(e,t)}matches(e){return $b(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function $b(i){return i.op==="and"}function Kb(i){return QC(i)&&$b(i)}function QC(i){for(const e of i.filters)if(e instanceof ri)return!1;return!0}function Tp(i){if(i instanceof At)return i.field.canonicalString()+i.op.toString()+No(i.value);if(Kb(i))return i.filters.map(e=>Tp(e)).join(",");{const e=i.filters.map(t=>Tp(t)).join(",");return`${i.op}(${e})`}}function Qb(i,e){return i instanceof At?function(r,o){return o instanceof At&&r.op===o.op&&r.field.isEqual(o.field)&&Ci(r.value,o.value)}(i,e):i instanceof ri?function(r,o){return o instanceof ri&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce((c,d,m)=>c&&Qb(d,o.filters[m]),!0):!1}(i,e):void ve(19439)}function Yb(i){return i instanceof At?function(t){return`${t.field.canonicalString()} ${t.op} ${No(t.value)}`}(i):i instanceof ri?function(t){return t.op.toString()+" {"+t.getFilters().map(Yb).join(" ,")+"}"}(i):"Filter"}class YC extends At{constructor(e,t,r){super(e,t,r),this.key=pe.fromName(r.referenceValue)}matches(e){const t=pe.comparator(e.key,this.key);return this.matchesComparison(t)}}class XC extends At{constructor(e,t){super(e,"in",t),this.keys=Xb("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class ZC extends At{constructor(e,t){super(e,"not-in",t),this.keys=Xb("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Xb(i,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>pe.fromName(r.referenceValue))}class WC extends At{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return sg(t)&&pc(t.arrayValue,this.value)}}class JC extends At{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&pc(this.value.arrayValue,t)}}class ex extends At{constructor(e,t){super(e,"not-in",t)}matches(e){if(pc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!pc(this.value.arrayValue,t)}}class tx extends At{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!sg(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>pc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nx{constructor(e,t=null,r=[],o=[],c=null,d=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=c,this.startAt=d,this.endAt=m,this.Ie=null}}function yE(i,e=null,t=[],r=[],o=null,c=null,d=null){return new nx(i,e,t,r,o,c,d)}function rg(i){const e=we(i);if(e.Ie===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Tp(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(c){return c.field.canonicalString()+c.dir}(r)).join(","),Nc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>No(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>No(r)).join(",")),e.Ie=t}return e.Ie}function ag(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<i.orderBy.length;t++)if(!KC(i.orderBy[t],e.orderBy[t]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let t=0;t<i.filters.length;t++)if(!Qb(i.filters[t],e.filters[t]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!gE(i.startAt,e.startAt)&&gE(i.endAt,e.endAt)}function Ep(i){return pe.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(e,t=null,r=[],o=[],c=null,d="F",m=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=c,this.limitType=d,this.startAt=m,this.endAt=g,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function ix(i,e,t,r,o,c,d,m){return new Vo(i,e,t,r,o,c,d,m)}function od(i){return new Vo(i)}function vE(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function Zb(i){return i.collectionGroup!==null}function tc(i){const e=we(i);if(e.Ee===null){e.Ee=[];const t=new Set;for(const c of e.explicitOrderBy)e.Ee.push(c),t.add(c.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let m=new xt($t.comparator);return d.filters.forEach(g=>{g.getFlattenedFilters().forEach(v=>{v.isInequality()&&(m=m.add(v.field))})}),m})(e).forEach(c=>{t.has(c.canonicalString())||c.isKeyField()||e.Ee.push(new gc(c,r))}),t.has($t.keyField().canonicalString())||e.Ee.push(new gc($t.keyField(),r))}return e.Ee}function Ri(i){const e=we(i);return e.de||(e.de=sx(e,tc(i))),e.de}function sx(i,e){if(i.limitType==="F")return yE(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map(o=>{const c=o.dir==="desc"?"asc":"desc";return new gc(o.field,c)});const t=i.endAt?new zh(i.endAt.position,i.endAt.inclusive):null,r=i.startAt?new zh(i.startAt.position,i.startAt.inclusive):null;return yE(i.path,i.collectionGroup,e,i.filters,i.limit,t,r)}}function bp(i,e){const t=i.filters.concat([e]);return new Vo(i.path,i.collectionGroup,i.explicitOrderBy.slice(),t,i.limit,i.limitType,i.startAt,i.endAt)}function Ap(i,e,t){return new Vo(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function ld(i,e){return ag(Ri(i),Ri(e))&&i.limitType===e.limitType}function Wb(i){return`${rg(Ri(i))}|lt:${i.limitType}`}function lo(i){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(o=>Yb(o)).join(", ")}]`),Nc(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(o=>function(d){return`${d.field.canonicalString()} (${d.dir})`}(o)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(o=>No(o)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(o=>No(o)).join(",")),`Target(${r})`}(Ri(i))}; limitType=${i.limitType})`}function cd(i,e){return e.isFoundDocument()&&function(r,o){const c=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(c):pe.isDocumentKey(r.path)?r.path.isEqual(c):r.path.isImmediateParentOf(c)}(i,e)&&function(r,o){for(const c of tc(r))if(!c.field.isKeyField()&&o.data.field(c.field)===null)return!1;return!0}(i,e)&&function(r,o){for(const c of r.filters)if(!c.matches(o))return!1;return!0}(i,e)&&function(r,o){return!(r.startAt&&!function(d,m,g){const v=pE(d,m,g);return d.inclusive?v<=0:v<0}(r.startAt,tc(r),o)||r.endAt&&!function(d,m,g){const v=pE(d,m,g);return d.inclusive?v>=0:v>0}(r.endAt,tc(r),o))}(i,e)}function rx(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function Jb(i){return(e,t)=>{let r=!1;for(const o of tc(i)){const c=ax(o,e,t);if(c!==0)return c;r=r||o.field.isKeyField()}return 0}}function ax(i,e,t){const r=i.field.isKeyField()?pe.comparator(e.key,t.key):function(c,d,m){const g=d.data.field(c),v=m.data.field(c);return g!==null&&v!==null?Io(g,v):ve(42886)}(i.field,e,t);switch(i.dir){case"asc":return r;case"desc":return-1*r;default:return ve(19790,{direction:i.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[o,c]of r)if(this.equalsFn(o,e))return c}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(o===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let c=0;c<o.length;c++)if(this.equalsFn(o[c][0],e))return void(o[c]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return r.length===1?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){dr(this.inner,(t,r)=>{for(const[o,c]of r)e(o,c)})}isEmpty(){return Pb(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ox=new ut(pe.comparator);function ds(){return ox}const eA=new ut(pe.comparator);function Yl(...i){let e=eA;for(const t of i)e=e.insert(t.key,t);return e}function tA(i){let e=eA;return i.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function ea(){return nc()}function nA(){return nc()}function nc(){return new fa(i=>i.toString(),(i,e)=>i.isEqual(e))}const lx=new ut(pe.comparator),cx=new xt(pe.comparator);function Pe(...i){let e=cx;for(const t of i)e=e.add(t);return e}const ux=new xt(Ce);function hx(){return ux}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function og(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:jh(e)?"-0":e}}function iA(i){return{integerValue:""+i}}function dx(i,e){return LC(e)?iA(e):og(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(){this._=void 0}}function fx(i,e,t){return i instanceof yc?function(o,c){const d={fields:{[Lb]:{stringValue:Ub},[qb]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return c&&ig(c)&&(c=ad(c)),c&&(d.fields[zb]=c),{mapValue:d}}(t,e):i instanceof vc?rA(i,e):i instanceof _c?aA(i,e):function(o,c){const d=sA(o,c),m=_E(d)+_E(o.Re);return _p(d)&&_p(o.Re)?iA(m):og(o.serializer,m)}(i,e)}function mx(i,e,t){return i instanceof vc?rA(i,e):i instanceof _c?aA(i,e):t}function sA(i,e){return i instanceof qh?function(r){return _p(r)||function(c){return!!c&&"doubleValue"in c}(r)}(e)?e:{integerValue:0}:null}class yc extends ud{}class vc extends ud{constructor(e){super(),this.elements=e}}function rA(i,e){const t=oA(e);for(const r of i.elements)t.some(o=>Ci(o,r))||t.push(r);return{arrayValue:{values:t}}}class _c extends ud{constructor(e){super(),this.elements=e}}function aA(i,e){let t=oA(e);for(const r of i.elements)t=t.filter(o=>!Ci(o,r));return{arrayValue:{values:t}}}class qh extends ud{constructor(e,t){super(),this.serializer=e,this.Re=t}}function _E(i){return yt(i.integerValue||i.doubleValue)}function oA(i){return sg(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class px{constructor(e,t){this.field=e,this.transform=t}}function gx(i,e){return i.field.isEqual(e.field)&&function(r,o){return r instanceof vc&&o instanceof vc||r instanceof _c&&o instanceof _c?wo(r.elements,o.elements,Ci):r instanceof qh&&o instanceof qh?Ci(r.Re,o.Re):r instanceof yc&&o instanceof yc}(i.transform,e.transform)}class yx{constructor(e,t){this.version=e,this.transformResults=t}}class Kt{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Kt}static exists(e){return new Kt(void 0,e)}static updateTime(e){return new Kt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Sh(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class hd{}function lA(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new dd(i.key,Kt.none()):new Rc(i.key,i.data,Kt.none());{const t=i.data,r=un.empty();let o=new xt($t.comparator);for(let c of e.fields)if(!o.has(c)){let d=t.field(c);d===null&&c.length>1&&(c=c.popLast(),d=t.field(c)),d===null?r.delete(c):r.set(c,d),o=o.add(c)}return new fr(i.key,r,new Nn(o.toArray()),Kt.none())}}function vx(i,e,t){i instanceof Rc?function(o,c,d){const m=o.value.clone(),g=EE(o.fieldTransforms,c,d.transformResults);m.setAll(g),c.convertToFoundDocument(d.version,m).setHasCommittedMutations()}(i,e,t):i instanceof fr?function(o,c,d){if(!Sh(o.precondition,c))return void c.convertToUnknownDocument(d.version);const m=EE(o.fieldTransforms,c,d.transformResults),g=c.data;g.setAll(cA(o)),g.setAll(m),c.convertToFoundDocument(d.version,g).setHasCommittedMutations()}(i,e,t):function(o,c,d){c.convertToNoDocument(d.version).setHasCommittedMutations()}(0,e,t)}function ic(i,e,t,r){return i instanceof Rc?function(c,d,m,g){if(!Sh(c.precondition,d))return m;const v=c.value.clone(),T=bE(c.fieldTransforms,g,d);return v.setAll(T),d.convertToFoundDocument(d.version,v).setHasLocalMutations(),null}(i,e,t,r):i instanceof fr?function(c,d,m,g){if(!Sh(c.precondition,d))return m;const v=bE(c.fieldTransforms,g,d),T=d.data;return T.setAll(cA(c)),T.setAll(v),d.convertToFoundDocument(d.version,T).setHasLocalMutations(),m===null?null:m.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map(A=>A.field))}(i,e,t,r):function(c,d,m){return Sh(c.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):m}(i,e,t)}function _x(i,e){let t=null;for(const r of i.fieldTransforms){const o=e.data.field(r.field),c=sA(r.transform,o||null);c!=null&&(t===null&&(t=un.empty()),t.set(r.field,c))}return t||null}function TE(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&wo(r,o,(c,d)=>gx(c,d))}(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class Rc extends hd{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class fr extends hd{constructor(e,t,r,o,c=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function cA(i){const e=new Map;return i.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=i.data.field(t);e.set(t,r)}}),e}function EE(i,e,t){const r=new Map;qe(i.length===t.length,32656,{Ve:t.length,me:i.length});for(let o=0;o<t.length;o++){const c=i[o],d=c.transform,m=e.data.field(c.field);r.set(c.field,mx(d,m,t[o]))}return r}function bE(i,e,t){const r=new Map;for(const o of i){const c=o.transform,d=t.data.field(o.field);r.set(o.field,fx(c,d,e))}return r}class dd extends hd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class uA extends hd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const c=this.mutations[o];c.key.isEqual(e.key)&&vx(c,e,r[o])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=ic(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=ic(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=nA();return this.mutations.forEach(o=>{const c=e.get(o.key),d=c.overlayedDocument;let m=this.applyToLocalView(d,c.mutatedFields);m=t.has(o.key)?null:m;const g=lA(d,m);g!==null&&r.set(o.key,g),d.isValidDocument()||d.convertToNoDocument(Ee.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Pe())}isEqual(e){return this.batchId===e.batchId&&wo(this.mutations,e.mutations,(t,r)=>TE(t,r))&&wo(this.baseMutations,e.baseMutations,(t,r)=>TE(t,r))}}class lg{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){qe(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let o=function(){return lx}();const c=e.mutations;for(let d=0;d<c.length;d++)o=o.insert(c[d].key,r[d].version);return new lg(e,t,r,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ex{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bx{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bt,ze;function hA(i){switch(i){case Z.OK:return ve(64938);case Z.CANCELLED:case Z.UNKNOWN:case Z.DEADLINE_EXCEEDED:case Z.RESOURCE_EXHAUSTED:case Z.INTERNAL:case Z.UNAVAILABLE:case Z.UNAUTHENTICATED:return!1;case Z.INVALID_ARGUMENT:case Z.NOT_FOUND:case Z.ALREADY_EXISTS:case Z.PERMISSION_DENIED:case Z.FAILED_PRECONDITION:case Z.ABORTED:case Z.OUT_OF_RANGE:case Z.UNIMPLEMENTED:case Z.DATA_LOSS:return!0;default:return ve(15467,{code:i})}}function dA(i){if(i===void 0)return hs("GRPC error has no .code"),Z.UNKNOWN;switch(i){case bt.OK:return Z.OK;case bt.CANCELLED:return Z.CANCELLED;case bt.UNKNOWN:return Z.UNKNOWN;case bt.DEADLINE_EXCEEDED:return Z.DEADLINE_EXCEEDED;case bt.RESOURCE_EXHAUSTED:return Z.RESOURCE_EXHAUSTED;case bt.INTERNAL:return Z.INTERNAL;case bt.UNAVAILABLE:return Z.UNAVAILABLE;case bt.UNAUTHENTICATED:return Z.UNAUTHENTICATED;case bt.INVALID_ARGUMENT:return Z.INVALID_ARGUMENT;case bt.NOT_FOUND:return Z.NOT_FOUND;case bt.ALREADY_EXISTS:return Z.ALREADY_EXISTS;case bt.PERMISSION_DENIED:return Z.PERMISSION_DENIED;case bt.FAILED_PRECONDITION:return Z.FAILED_PRECONDITION;case bt.ABORTED:return Z.ABORTED;case bt.OUT_OF_RANGE:return Z.OUT_OF_RANGE;case bt.UNIMPLEMENTED:return Z.UNIMPLEMENTED;case bt.DATA_LOSS:return Z.DATA_LOSS;default:return ve(39323,{code:i})}}(ze=bt||(bt={}))[ze.OK=0]="OK",ze[ze.CANCELLED=1]="CANCELLED",ze[ze.UNKNOWN=2]="UNKNOWN",ze[ze.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ze[ze.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ze[ze.NOT_FOUND=5]="NOT_FOUND",ze[ze.ALREADY_EXISTS=6]="ALREADY_EXISTS",ze[ze.PERMISSION_DENIED=7]="PERMISSION_DENIED",ze[ze.UNAUTHENTICATED=16]="UNAUTHENTICATED",ze[ze.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ze[ze.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ze[ze.ABORTED=10]="ABORTED",ze[ze.OUT_OF_RANGE=11]="OUT_OF_RANGE",ze[ze.UNIMPLEMENTED=12]="UNIMPLEMENTED",ze[ze.INTERNAL=13]="INTERNAL",ze[ze.UNAVAILABLE=14]="UNAVAILABLE",ze[ze.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ax=new Ws([4294967295,4294967295],0);function AE(i){const e=Mb().encode(i),t=new wb;return t.update(e),new Uint8Array(t.digest())}function SE(i){const e=new DataView(i.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),o=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new Ws([t,r],0),new Ws([o,c],0)]}class cg{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Xl(`Invalid padding: ${t}`);if(r<0)throw new Xl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Xl(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Xl(`Invalid padding when bitmap length is 0: ${t}`);this.pe=8*e.length-t,this.ye=Ws.fromNumber(this.pe)}we(e,t,r){let o=e.add(t.multiply(Ws.fromNumber(r)));return o.compare(Ax)===1&&(o=new Ws([o.getBits(0),o.getBits(1)],0)),o.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const t=AE(e),[r,o]=SE(t);for(let c=0;c<this.hashCount;c++){const d=this.we(r,o,c);if(!this.be(d))return!1}return!0}static create(e,t,r){const o=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),d=new cg(c,o,t);return r.forEach(m=>d.insert(m)),d}insert(e){if(this.pe===0)return;const t=AE(e),[r,o]=SE(t);for(let c=0;c<this.hashCount;c++){const d=this.we(r,o,c);this.Se(d)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Xl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd{constructor(e,t,r,o,c){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const o=new Map;return o.set(e,Cc.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new fd(Ee.min(),o,new ut(Ce),ds(),Pe())}}class Cc{constructor(e,t,r,o,c){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Cc(r,t,Pe(),Pe(),Pe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh{constructor(e,t,r,o){this.De=e,this.removedTargetIds=t,this.key=r,this.ve=o}}class fA{constructor(e,t){this.targetId=e,this.Ce=t}}class mA{constructor(e,t,r=Yt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class wE{constructor(){this.Fe=0,this.Me=IE(),this.xe=Yt.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=Pe(),t=Pe(),r=Pe();return this.Me.forEach((o,c)=>{switch(c){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:ve(38017,{changeType:c})}}),new Cc(this.xe,this.Oe,e,t,r)}Qe(){this.Ne=!1,this.Me=IE()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,qe(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class Sx{constructor(e){this.ze=e,this.je=new Map,this.He=ds(),this.Je=dh(),this.Ye=dh(),this.Ze=new ut(Ce)}Xe(e){for(const t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(const t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,t=>{const r=this.rt(t);switch(e.state){case 0:this.it(t)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(t);break;case 3:this.it(t)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),r.ke(e.resumeToken));break;default:ve(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach((r,o)=>{this.it(o)&&t(o)})}ot(e){const t=e.targetId,r=e.Ce.count,o=this._t(t);if(o){const c=o.target;if(Ep(c))if(r===0){const d=new pe(c.path);this.tt(t,d,Lt.newNoDocument(d,Ee.min()))}else qe(r===1,20013,{expectedCount:r});else{const d=this.ut(t);if(d!==r){const m=this.ct(e),g=m?this.lt(m,e,d):1;if(g!==0){this.st(t);const v=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,v)}}}}}ct(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:c=0}=t;let d,m;try{d=ir(r).toUint8Array()}catch(g){if(g instanceof jb)return So("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{m=new cg(d,o,c)}catch(g){return So(g instanceof Xl?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return m.pe===0?null:m}lt(e,t,r){return t.Ce.count===r-this.Tt(e,t.targetId)?0:2}Tt(e,t){const r=this.ze.getRemoteKeysForTarget(t);let o=0;return r.forEach(c=>{const d=this.ze.Pt(),m=`projects/${d.projectId}/databases/${d.database}/documents/${c.path.canonicalString()}`;e.mightContain(m)||(this.tt(t,c,null),o++)}),o}It(e){const t=new Map;this.je.forEach((c,d)=>{const m=this._t(d);if(m){if(c.current&&Ep(m.target)){const g=new pe(m.target.path);this.Et(g).has(d)||this.dt(d,g)||this.tt(d,g,Lt.newNoDocument(g,e))}c.Le&&(t.set(d,c.qe()),c.Qe())}});let r=Pe();this.Ye.forEach((c,d)=>{let m=!0;d.forEachWhile(g=>{const v=this._t(g);return!v||v.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)}),m&&(r=r.add(c))}),this.He.forEach((c,d)=>d.setReadTime(e));const o=new fd(e,t,this.Ze,this.He,r);return this.He=ds(),this.Je=dh(),this.Ye=dh(),this.Ze=new ut(Ce),o}et(e,t){if(!this.it(e))return;const r=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,r),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,r){if(!this.it(e))return;const o=this.rt(e);this.dt(e,t)?o.$e(t,1):o.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),r&&(this.He=this.He.insert(t,r))}removeTarget(e){this.je.delete(e)}ut(e){const t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new wE,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new xt(Ce),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new xt(Ce),this.Je=this.Je.insert(e,t)),t}it(e){const t=this._t(e)!==null;return t||ue("WatchChangeAggregator","Detected inactive target",e),t}_t(e){const t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new wE),this.ze.getRemoteKeysForTarget(e).forEach(t=>{this.tt(e,t,null)})}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}}function dh(){return new ut(pe.comparator)}function IE(){return new ut(pe.comparator)}const wx={asc:"ASCENDING",desc:"DESCENDING"},Ix={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Nx={and:"AND",or:"OR"};class Rx{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Sp(i,e){return i.useProto3Json||Nc(e)?e:{value:e}}function Bh(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function pA(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function Cx(i,e){return Bh(i,e.toTimestamp())}function Cn(i){return qe(!!i,49232),Ee.fromTimestamp(function(t){const r=nr(t);return new Ct(r.seconds,r.nanos)}(i))}function ug(i,e){return wp(i,e).canonicalString()}function wp(i,e){const t=function(o){return new nt(["projects",o.projectId,"databases",o.database])}(i).child("documents");return e===void 0?t:t.child(e)}function gA(i){const e=nt.fromString(i);return qe(bA(e),10190,{key:e.toString()}),e}function Fh(i,e){return ug(i.databaseId,e.path)}function sc(i,e){const t=gA(e);if(t.get(1)!==i.databaseId.projectId)throw new le(Z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new le(Z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new pe(vA(t))}function yA(i,e){return ug(i.databaseId,e)}function xx(i){const e=gA(i);return e.length===4?nt.emptyPath():vA(e)}function Ip(i){return new nt(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function vA(i){return qe(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function NE(i,e,t){return{name:Fh(i,e),fields:t.value.mapValue.fields}}function Dx(i,e){return"found"in e?function(r,o){qe(!!o.found,43571),o.found.name,o.found.updateTime;const c=sc(r,o.found.name),d=Cn(o.found.updateTime),m=o.found.createTime?Cn(o.found.createTime):Ee.min(),g=new un({mapValue:{fields:o.found.fields}});return Lt.newFoundDocument(c,d,m,g)}(i,e):"missing"in e?function(r,o){qe(!!o.missing,3894),qe(!!o.readTime,22933);const c=sc(r,o.missing),d=Cn(o.readTime);return Lt.newNoDocument(c,d)}(i,e):ve(7234,{result:e})}function Ox(i,e){let t;if("targetChange"in e){e.targetChange;const r=function(v){return v==="NO_CHANGE"?0:v==="ADD"?1:v==="REMOVE"?2:v==="CURRENT"?3:v==="RESET"?4:ve(39313,{state:v})}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],c=function(v,T){return v.useProto3Json?(qe(T===void 0||typeof T=="string",58123),Yt.fromBase64String(T||"")):(qe(T===void 0||T instanceof Buffer||T instanceof Uint8Array,16193),Yt.fromUint8Array(T||new Uint8Array))}(i,e.targetChange.resumeToken),d=e.targetChange.cause,m=d&&function(v){const T=v.code===void 0?Z.UNKNOWN:dA(v.code);return new le(T,v.message||"")}(d);t=new mA(r,o,c,m||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const o=sc(i,r.document.name),c=Cn(r.document.updateTime),d=r.document.createTime?Cn(r.document.createTime):Ee.min(),m=new un({mapValue:{fields:r.document.fields}}),g=Lt.newFoundDocument(o,c,d,m),v=r.targetIds||[],T=r.removedTargetIds||[];t=new wh(v,T,g.key,g)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const o=sc(i,r.document),c=r.readTime?Cn(r.readTime):Ee.min(),d=Lt.newNoDocument(o,c),m=r.removedTargetIds||[];t=new wh([],m,d.key,d)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const o=sc(i,r.document),c=r.removedTargetIds||[];t=new wh([],c,o,null)}else{if(!("filter"in e))return ve(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:o=0,unchangedNames:c}=r,d=new bx(o,c),m=r.targetId;t=new fA(m,d)}}return t}function _A(i,e){let t;if(e instanceof Rc)t={update:NE(i,e.key,e.value)};else if(e instanceof dd)t={delete:Fh(i,e.key)};else if(e instanceof fr)t={update:NE(i,e.key,e.data),updateMask:qx(e.fieldMask)};else{if(!(e instanceof uA))return ve(16599,{ft:e.type});t={verify:Fh(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(c,d){const m=d.transform;if(m instanceof yc)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof vc)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof _c)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof qh)return{fieldPath:d.field.canonicalString(),increment:m.Re};throw ve(20930,{transform:d.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(o,c){return c.updateTime!==void 0?{updateTime:Cx(o,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:ve(27497)}(i,e.precondition)),t}function Mx(i,e){return i&&i.length>0?(qe(e!==void 0,14353),i.map(t=>function(o,c){let d=o.updateTime?Cn(o.updateTime):Cn(c);return d.isEqual(Ee.min())&&(d=Cn(c)),new yx(d,o.transformResults||[])}(t,e))):[]}function kx(i,e){return{documents:[yA(i,e.path)]}}function Vx(i,e){const t={structuredQuery:{}},r=e.path;let o;e.collectionGroup!==null?(o=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=yA(i,o);const c=function(v){if(v.length!==0)return EA(ri.create(v,"and"))}(e.filters);c&&(t.structuredQuery.where=c);const d=function(v){if(v.length!==0)return v.map(T=>function(b){return{field:co(b.field),direction:Ux(b.dir)}}(T))}(e.orderBy);d&&(t.structuredQuery.orderBy=d);const m=Sp(i,e.limit);return m!==null&&(t.structuredQuery.limit=m),e.startAt&&(t.structuredQuery.startAt=function(v){return{before:v.inclusive,values:v.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(v){return{before:!v.inclusive,values:v.position}}(e.endAt)),{gt:t,parent:o}}function Px(i){let e=xx(i.parent);const t=i.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){qe(r===1,65062);const T=t.from[0];T.allDescendants?o=T.collectionId:e=e.child(T.collectionId)}let c=[];t.where&&(c=function(A){const b=TA(A);return b instanceof ri&&Kb(b)?b.getFilters():[b]}(t.where));let d=[];t.orderBy&&(d=function(A){return A.map(b=>function(O){return new gc(uo(O.field),function(j){switch(j){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(O.direction))}(b))}(t.orderBy));let m=null;t.limit&&(m=function(A){let b;return b=typeof A=="object"?A.value:A,Nc(b)?null:b}(t.limit));let g=null;t.startAt&&(g=function(A){const b=!!A.before,k=A.values||[];return new zh(k,b)}(t.startAt));let v=null;return t.endAt&&(v=function(A){const b=!A.before,k=A.values||[];return new zh(k,b)}(t.endAt)),ix(e,o,d,c,m,"F",g,v)}function jx(i,e){const t=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ve(28987,{purpose:o})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function TA(i){return i.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=uo(t.unaryFilter.field);return At.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=uo(t.unaryFilter.field);return At.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=uo(t.unaryFilter.field);return At.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=uo(t.unaryFilter.field);return At.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ve(61313);default:return ve(60726)}}(i):i.fieldFilter!==void 0?function(t){return At.create(uo(t.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ve(58110);default:return ve(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(i):i.compositeFilter!==void 0?function(t){return ri.create(t.compositeFilter.filters.map(r=>TA(r)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return ve(1026)}}(t.compositeFilter.op))}(i):ve(30097,{filter:i})}function Ux(i){return wx[i]}function Lx(i){return Ix[i]}function zx(i){return Nx[i]}function co(i){return{fieldPath:i.canonicalString()}}function uo(i){return $t.fromServerFormat(i.fieldPath)}function EA(i){return i instanceof At?function(t){if(t.op==="=="){if(mE(t.value))return{unaryFilter:{field:co(t.field),op:"IS_NAN"}};if(fE(t.value))return{unaryFilter:{field:co(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(mE(t.value))return{unaryFilter:{field:co(t.field),op:"IS_NOT_NAN"}};if(fE(t.value))return{unaryFilter:{field:co(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:co(t.field),op:Lx(t.op),value:t.value}}}(i):i instanceof ri?function(t){const r=t.getFilters().map(o=>EA(o));return r.length===1?r[0]:{compositeFilter:{op:zx(t.op),filters:r}}}(i):ve(54877,{filter:i})}function qx(i){const e=[];return i.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function bA(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys{constructor(e,t,r,o,c=Ee.min(),d=Ee.min(),m=Yt.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=m,this.expectedCount=g}withSequenceNumber(e){return new Ys(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ys(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ys(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ys(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bx{constructor(e){this.wt=e}}function Fx(i){const e=Px({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?Ap(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hx{constructor(){this.Cn=new Gx}addToCollectionParentIndex(e,t){return this.Cn.add(t),ee.resolve()}getCollectionParents(e,t){return ee.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return ee.resolve()}deleteFieldIndex(e,t){return ee.resolve()}deleteAllFieldIndexes(e){return ee.resolve()}createTargetIndexes(e,t){return ee.resolve()}getDocumentsMatchingTarget(e,t){return ee.resolve(null)}getIndexType(e,t){return ee.resolve(0)}getFieldIndexes(e,t){return ee.resolve([])}getNextCollectionGroupToUpdate(e){return ee.resolve(null)}getMinOffset(e,t){return ee.resolve(tr.min())}getMinOffsetFromCollectionGroup(e,t){return ee.resolve(tr.min())}updateCollectionGroup(e,t,r){return ee.resolve()}updateIndexEntries(e,t){return ee.resolve()}}class Gx{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new xt(nt.comparator),c=!o.has(r);return this.index[t]=o.add(r),c}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new xt(nt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},AA=41943040;class gn{static withCacheSize(e){return new gn(e,gn.DEFAULT_COLLECTION_PERCENTILE,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gn.DEFAULT_COLLECTION_PERCENTILE=10,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,gn.DEFAULT=new gn(AA,gn.DEFAULT_COLLECTION_PERCENTILE,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),gn.DISABLED=new gn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new Ro(0)}static lr(){return new Ro(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CE="LruGarbageCollector",$x=1048576;function xE([i,e],[t,r]){const o=Ce(i,t);return o===0?Ce(e,r):o}class Kx{constructor(e){this.Er=e,this.buffer=new xt(xE),this.dr=0}Ar(){return++this.dr}Rr(e){const t=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();xE(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Qx{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){ue(CE,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){ko(t)?ue(CE,"Ignoring IndexedDB error during garbage collection: ",t):await Mo(t)}await this.mr(3e5)})}}class Yx{constructor(e,t){this.gr=e,this.params=t}calculateTargetCount(e,t){return this.gr.pr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return ee.resolve(rd.le);const r=new Kx(t);return this.gr.forEachTarget(e,o=>r.Rr(o.sequenceNumber)).next(()=>this.gr.yr(e,o=>r.Rr(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.gr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.gr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ue("LruGarbageCollector","Garbage collection skipped; disabled"),ee.resolve(RE)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ue("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),RE):this.wr(e,t))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,t){let r,o,c,d,m,g,v;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(A=>(A>this.params.maximumSequenceNumbersToCollect?(ue("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${A}`),o=this.params.maximumSequenceNumbersToCollect):o=A,d=Date.now(),this.nthSequenceNumber(e,o))).next(A=>(r=A,m=Date.now(),this.removeTargets(e,r,t))).next(A=>(c=A,g=Date.now(),this.removeOrphanedDocuments(e,r))).next(A=>(v=Date.now(),oo()<=Ve.DEBUG&&ue("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-T}ms
	Determined least recently used ${o} in `+(m-d)+`ms
	Removed ${c} targets in `+(g-m)+`ms
	Removed ${A} documents in `+(v-g)+`ms
Total Duration: ${v-T}ms`),ee.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:c,documentsRemoved:A})))}}function Xx(i,e){return new Yx(i,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zx{constructor(){this.changes=new fa(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Lt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?ee.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wx{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jx{constructor(e,t,r,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(r=o,this.remoteDocumentCache.getEntry(e,t))).next(o=>(r!==null&&ic(r.mutation,o,Nn.empty(),Ct.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Pe()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Pe()){const o=ea();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,r).next(c=>{let d=Yl();return c.forEach((m,g)=>{d=d.insert(m,g.overlayedDocument)}),d}))}getOverlayedDocuments(e,t){const r=ea();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Pe()))}populateOverlays(e,t,r){const o=[];return r.forEach(c=>{t.has(c)||o.push(c)}),this.documentOverlayCache.getOverlays(e,o).next(c=>{c.forEach((d,m)=>{t.set(d,m)})})}computeViews(e,t,r,o){let c=ds();const d=nc(),m=function(){return nc()}();return t.forEach((g,v)=>{const T=r.get(v.key);o.has(v.key)&&(T===void 0||T.mutation instanceof fr)?c=c.insert(v.key,v):T!==void 0?(d.set(v.key,T.mutation.getFieldMask()),ic(T.mutation,v,T.mutation.getFieldMask(),Ct.now())):d.set(v.key,Nn.empty())}),this.recalculateAndSaveOverlays(e,c).next(g=>(g.forEach((v,T)=>d.set(v,T)),t.forEach((v,T)=>{var A;return m.set(v,new Wx(T,(A=d.get(v))!==null&&A!==void 0?A:null))}),m))}recalculateAndSaveOverlays(e,t){const r=nc();let o=new ut((d,m)=>d-m),c=Pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(d=>{for(const m of d)m.keys().forEach(g=>{const v=t.get(g);if(v===null)return;let T=r.get(g)||Nn.empty();T=m.applyToLocalView(v,T),r.set(g,T);const A=(o.get(m.batchId)||Pe()).add(g);o=o.insert(m.batchId,A)})}).next(()=>{const d=[],m=o.getReverseIterator();for(;m.hasNext();){const g=m.getNext(),v=g.key,T=g.value,A=nA();T.forEach(b=>{if(!c.has(b)){const k=lA(t.get(b),r.get(b));k!==null&&A.set(b,k),c=c.add(b)}}),d.push(this.documentOverlayCache.saveOverlays(e,v,A))}return ee.waitFor(d)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,o){return function(d){return pe.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Zb(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,o):this.getDocumentsMatchingCollectionQuery(e,t,r,o)}getNextDocuments(e,t,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,o).next(c=>{const d=o-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,o-c.size):ee.resolve(ea());let m=dc,g=c;return d.next(v=>ee.forEach(v,(T,A)=>(m<A.largestBatchId&&(m=A.largestBatchId),c.get(T)?ee.resolve():this.remoteDocumentCache.getEntry(e,T).next(b=>{g=g.insert(T,b)}))).next(()=>this.populateOverlays(e,v,c)).next(()=>this.computeViews(e,g,v,Pe())).next(T=>({batchId:m,changes:tA(T)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new pe(t)).next(r=>{let o=Yl();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,r,o){const c=t.collectionGroup;let d=Yl();return this.indexManager.getCollectionParents(e,c).next(m=>ee.forEach(m,g=>{const v=function(A,b){return new Vo(b,null,A.explicitOrderBy.slice(),A.filters.slice(),A.limit,A.limitType,A.startAt,A.endAt)}(t,g.child(c));return this.getDocumentsMatchingCollectionQuery(e,v,r,o).next(T=>{T.forEach((A,b)=>{d=d.insert(A,b)})})}).next(()=>d))}getDocumentsMatchingCollectionQuery(e,t,r,o){let c;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(d=>(c=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,c,o))).next(d=>{c.forEach((g,v)=>{const T=v.getKey();d.get(T)===null&&(d=d.insert(T,Lt.newInvalidDocument(T)))});let m=Yl();return d.forEach((g,v)=>{const T=c.get(g);T!==void 0&&ic(T.mutation,v,Nn.empty(),Ct.now()),cd(t,v)&&(m=m.insert(g,v))}),m})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eD{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,t){return ee.resolve(this.kr.get(t))}saveBundleMetadata(e,t){return this.kr.set(t.id,function(o){return{id:o.id,version:o.version,createTime:Cn(o.createTime)}}(t)),ee.resolve()}getNamedQuery(e,t){return ee.resolve(this.qr.get(t))}saveNamedQuery(e,t){return this.qr.set(t.name,function(o){return{name:o.name,query:Fx(o.bundledQuery),readTime:Cn(o.readTime)}}(t)),ee.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tD{constructor(){this.overlays=new ut(pe.comparator),this.Qr=new Map}getOverlay(e,t){return ee.resolve(this.overlays.get(t))}getOverlays(e,t){const r=ea();return ee.forEach(t,o=>this.getOverlay(e,o).next(c=>{c!==null&&r.set(o,c)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((o,c)=>{this.St(e,t,c)}),ee.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.Qr.get(r);return o!==void 0&&(o.forEach(c=>this.overlays=this.overlays.remove(c)),this.Qr.delete(r)),ee.resolve()}getOverlaysForCollection(e,t,r){const o=ea(),c=t.length+1,d=new pe(t.child("")),m=this.overlays.getIteratorFrom(d);for(;m.hasNext();){const g=m.getNext().value,v=g.getKey();if(!t.isPrefixOf(v.path))break;v.path.length===c&&g.largestBatchId>r&&o.set(g.getKey(),g)}return ee.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let c=new ut((v,T)=>v-T);const d=this.overlays.getIterator();for(;d.hasNext();){const v=d.getNext().value;if(v.getKey().getCollectionGroup()===t&&v.largestBatchId>r){let T=c.get(v.largestBatchId);T===null&&(T=ea(),c=c.insert(v.largestBatchId,T)),T.set(v.getKey(),v)}}const m=ea(),g=c.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach((v,T)=>m.set(v,T)),!(m.size()>=o)););return ee.resolve(m)}St(e,t,r){const o=this.overlays.get(r.key);if(o!==null){const d=this.Qr.get(o.largestBatchId).delete(r.key);this.Qr.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(r.key,new Ex(t,r));let c=this.Qr.get(t);c===void 0&&(c=Pe(),this.Qr.set(t,c)),this.Qr.set(t,c.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nD{constructor(){this.sessionToken=Yt.EMPTY_BYTE_STRING}getSessionToken(e){return ee.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ee.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hg{constructor(){this.$r=new xt(Ut.Ur),this.Kr=new xt(Ut.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,t){const r=new Ut(e,t);this.$r=this.$r.add(r),this.Kr=this.Kr.add(r)}Gr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.zr(new Ut(e,t))}jr(e,t){e.forEach(r=>this.removeReference(r,t))}Hr(e){const t=new pe(new nt([])),r=new Ut(t,e),o=new Ut(t,e+1),c=[];return this.Kr.forEachInRange([r,o],d=>{this.zr(d),c.push(d.key)}),c}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const t=new pe(new nt([])),r=new Ut(t,e),o=new Ut(t,e+1);let c=Pe();return this.Kr.forEachInRange([r,o],d=>{c=c.add(d.key)}),c}containsKey(e){const t=new Ut(e,0),r=this.$r.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Ut{constructor(e,t){this.key=e,this.Zr=t}static Ur(e,t){return pe.comparator(e.key,t.key)||Ce(e.Zr,t.Zr)}static Wr(e,t){return Ce(e.Zr,t.Zr)||pe.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iD{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.nr=1,this.Xr=new xt(Ut.Ur)}checkEmpty(e){return ee.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,o){const c=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new Tx(c,t,r,o);this.mutationQueue.push(d);for(const m of o)this.Xr=this.Xr.add(new Ut(m.key,c)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return ee.resolve(d)}lookupMutationBatch(e,t){return ee.resolve(this.ei(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=this.ti(r),c=o<0?0:o;return ee.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return ee.resolve(this.mutationQueue.length===0?ng:this.nr-1)}getAllMutationBatches(e){return ee.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ut(t,0),o=new Ut(t,Number.POSITIVE_INFINITY),c=[];return this.Xr.forEachInRange([r,o],d=>{const m=this.ei(d.Zr);c.push(m)}),ee.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new xt(Ce);return t.forEach(o=>{const c=new Ut(o,0),d=new Ut(o,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([c,d],m=>{r=r.add(m.Zr)})}),ee.resolve(this.ni(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let c=r;pe.isDocumentKey(c)||(c=c.child(""));const d=new Ut(new pe(c),0);let m=new xt(Ce);return this.Xr.forEachWhile(g=>{const v=g.key.path;return!!r.isPrefixOf(v)&&(v.length===o&&(m=m.add(g.Zr)),!0)},d),ee.resolve(this.ni(m))}ni(e){const t=[];return e.forEach(r=>{const o=this.ei(r);o!==null&&t.push(o)}),t}removeMutationBatch(e,t){qe(this.ri(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Xr;return ee.forEach(t.mutations,o=>{const c=new Ut(o.key,t.batchId);return r=r.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Xr=r})}sr(e){}containsKey(e,t){const r=new Ut(t,0),o=this.Xr.firstAfterOrEqual(r);return ee.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ee.resolve()}ri(e,t){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const t=this.ti(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sD{constructor(e){this.ii=e,this.docs=function(){return new ut(pe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),c=o?o.size:0,d=this.ii(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:d}),this.size+=d-c,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ee.resolve(r?r.document.mutableCopy():Lt.newInvalidDocument(t))}getEntries(e,t){let r=ds();return t.forEach(o=>{const c=this.docs.get(o);r=r.insert(o,c?c.document.mutableCopy():Lt.newInvalidDocument(o))}),ee.resolve(r)}getDocumentsMatchingQuery(e,t,r,o){let c=ds();const d=t.path,m=new pe(d.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(m);for(;g.hasNext();){const{key:v,value:{document:T}}=g.getNext();if(!d.isPrefixOf(v.path))break;v.path.length>d.length+1||VC(kC(T),r)<=0||(o.has(T.key)||cd(t,T))&&(c=c.insert(T.key,T.mutableCopy()))}return ee.resolve(c)}getAllFromCollectionGroup(e,t,r,o){ve(9500)}si(e,t){return ee.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new rD(this)}getSize(e){return ee.resolve(this.size)}}class rD extends Zx{constructor(e){super(),this.Br=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.Br.addEntry(e,o)):this.Br.removeEntry(r)}),ee.waitFor(t)}getFromCache(e,t){return this.Br.getEntry(e,t)}getAllFromCache(e,t){return this.Br.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aD{constructor(e){this.persistence=e,this.oi=new fa(t=>rg(t),ag),this.lastRemoteSnapshotVersion=Ee.min(),this.highestTargetId=0,this._i=0,this.ai=new hg,this.targetCount=0,this.ui=Ro.cr()}forEachTarget(e,t){return this.oi.forEach((r,o)=>t(o)),ee.resolve()}getLastRemoteSnapshotVersion(e){return ee.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ee.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),ee.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this._i&&(this._i=t),ee.resolve()}Tr(e){this.oi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ui=new Ro(t),this.highestTargetId=t),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,t){return this.Tr(t),this.targetCount+=1,ee.resolve()}updateTargetData(e,t){return this.Tr(t),ee.resolve()}removeTargetData(e,t){return this.oi.delete(t.target),this.ai.Hr(t.targetId),this.targetCount-=1,ee.resolve()}removeTargets(e,t,r){let o=0;const c=[];return this.oi.forEach((d,m)=>{m.sequenceNumber<=t&&r.get(m.targetId)===null&&(this.oi.delete(d),c.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),ee.waitFor(c).next(()=>o)}getTargetCount(e){return ee.resolve(this.targetCount)}getTargetData(e,t){const r=this.oi.get(t)||null;return ee.resolve(r)}addMatchingKeys(e,t,r){return this.ai.Gr(t,r),ee.resolve()}removeMatchingKeys(e,t,r){this.ai.jr(t,r);const o=this.persistence.referenceDelegate,c=[];return o&&t.forEach(d=>{c.push(o.markPotentiallyOrphaned(e,d))}),ee.waitFor(c)}removeMatchingKeysForTargetId(e,t){return this.ai.Hr(t),ee.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ai.Yr(t);return ee.resolve(r)}containsKey(e,t){return ee.resolve(this.ai.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SA{constructor(e,t){this.ci={},this.overlays={},this.li=new rd(0),this.hi=!1,this.hi=!0,this.Pi=new nD,this.referenceDelegate=e(this),this.Ti=new aD(this),this.indexManager=new Hx,this.remoteDocumentCache=function(o){return new sD(o)}(r=>this.referenceDelegate.Ii(r)),this.serializer=new Bx(t),this.Ei=new eD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new tD,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ci[e.toKey()];return r||(r=new iD(t,this.referenceDelegate),this.ci[e.toKey()]=r),r}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,t,r){ue("MemoryPersistence","Starting transaction:",e);const o=new oD(this.li.next());return this.referenceDelegate.di(),r(o).next(c=>this.referenceDelegate.Ai(o).next(()=>c)).toPromise().then(c=>(o.raiseOnCommittedEvent(),c))}Ri(e,t){return ee.or(Object.values(this.ci).map(r=>()=>r.containsKey(e,t)))}}class oD extends jC{constructor(e){super(),this.currentSequenceNumber=e}}class dg{constructor(e){this.persistence=e,this.Vi=new hg,this.mi=null}static fi(e){return new dg(e)}get gi(){if(this.mi)return this.mi;throw ve(60996)}addReference(e,t,r){return this.Vi.addReference(r,t),this.gi.delete(r.toString()),ee.resolve()}removeReference(e,t,r){return this.Vi.removeReference(r,t),this.gi.add(r.toString()),ee.resolve()}markPotentiallyOrphaned(e,t){return this.gi.add(t.toString()),ee.resolve()}removeTarget(e,t){this.Vi.Hr(t.targetId).forEach(o=>this.gi.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(c=>this.gi.add(c.toString()))}).next(()=>r.removeTargetData(e,t))}di(){this.mi=new Set}Ai(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ee.forEach(this.gi,r=>{const o=pe.fromPath(r);return this.pi(e,o).next(c=>{c||t.removeEntry(o,Ee.min())})}).next(()=>(this.mi=null,t.apply(e)))}updateLimboDocument(e,t){return this.pi(e,t).next(r=>{r?this.gi.delete(t.toString()):this.gi.add(t.toString())})}Ii(e){return 0}pi(e,t){return ee.or([()=>ee.resolve(this.Vi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ri(e,t)])}}class Hh{constructor(e,t){this.persistence=e,this.yi=new fa(r=>zC(r.path),(r,o)=>r.isEqual(o)),this.garbageCollector=Xx(this,t)}static fi(e,t){return new Hh(e,t)}di(){}Ai(e){return ee.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}pr(e){const t=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}br(e){let t=0;return this.yr(e,r=>{t++}).next(()=>t)}yr(e,t){return ee.forEach(this.yi,(r,o)=>this.Dr(e,r,o).next(c=>c?ee.resolve():t(o)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const o=this.persistence.getRemoteDocumentCache(),c=o.newChangeBuffer();return o.si(e,d=>this.Dr(e,d,t).next(m=>{m||(r++,c.removeEntry(d,Ee.min()))})).next(()=>c.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.yi.set(t,e.currentSequenceNumber),ee.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.yi.set(r,e.currentSequenceNumber),ee.resolve()}removeReference(e,t,r){return this.yi.set(r,e.currentSequenceNumber),ee.resolve()}updateLimboDocument(e,t){return this.yi.set(t,e.currentSequenceNumber),ee.resolve()}Ii(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=bh(e.data.value)),t}Dr(e,t,r){return ee.or([()=>this.persistence.Ri(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.yi.get(t);return ee.resolve(o!==void 0&&o>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fg{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.ds=r,this.As=o}static Rs(e,t){let r=Pe(),o=Pe();for(const c of t.docChanges)switch(c.type){case 0:r=r.add(c.doc.key);break;case 1:o=o.add(c.doc.key)}return new fg(e,t.fromCache,r,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lD{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cD{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return sN()?8:UC(sn())>0?6:4}()}initialize(e,t){this.ys=e,this.indexManager=t,this.Vs=!0}getDocumentsMatchingQuery(e,t,r,o){const c={result:null};return this.ws(e,t).next(d=>{c.result=d}).next(()=>{if(!c.result)return this.bs(e,t,o,r).next(d=>{c.result=d})}).next(()=>{if(c.result)return;const d=new lD;return this.Ss(e,t,d).next(m=>{if(c.result=m,this.fs)return this.Ds(e,t,d,m.size)})}).next(()=>c.result)}Ds(e,t,r,o){return r.documentReadCount<this.gs?(oo()<=Ve.DEBUG&&ue("QueryEngine","SDK will not create cache indexes for query:",lo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),ee.resolve()):(oo()<=Ve.DEBUG&&ue("QueryEngine","Query:",lo(t),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.ps*o?(oo()<=Ve.DEBUG&&ue("QueryEngine","The SDK decides to create cache indexes for query:",lo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ri(t))):ee.resolve())}ws(e,t){if(vE(t))return ee.resolve(null);let r=Ri(t);return this.indexManager.getIndexType(e,r).next(o=>o===0?null:(t.limit!==null&&o===1&&(t=Ap(t,null,"F"),r=Ri(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(c=>{const d=Pe(...c);return this.ys.getDocuments(e,d).next(m=>this.indexManager.getMinOffset(e,r).next(g=>{const v=this.vs(t,m);return this.Cs(t,v,d,g.readTime)?this.ws(e,Ap(t,null,"F")):this.Fs(e,v,t,g)}))})))}bs(e,t,r,o){return vE(t)||o.isEqual(Ee.min())?ee.resolve(null):this.ys.getDocuments(e,r).next(c=>{const d=this.vs(t,c);return this.Cs(t,d,r,o)?ee.resolve(null):(oo()<=Ve.DEBUG&&ue("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),lo(t)),this.Fs(e,d,t,MC(o,dc)).next(m=>m))})}vs(e,t){let r=new xt(Jb(e));return t.forEach((o,c)=>{cd(e,c)&&(r=r.add(c))}),r}Cs(e,t,r,o){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const c=e.limitType==="F"?t.last():t.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(o)>0)}Ss(e,t,r){return oo()<=Ve.DEBUG&&ue("QueryEngine","Using full collection scan to execute query:",lo(t)),this.ys.getDocumentsMatchingQuery(e,t,tr.min(),r)}Fs(e,t,r,o){return this.ys.getDocumentsMatchingQuery(e,r,o).next(c=>(t.forEach(d=>{c=c.insert(d.key,d)}),c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mg="LocalStore",uD=3e8;class hD{constructor(e,t,r,o){this.persistence=e,this.Ms=t,this.serializer=o,this.xs=new ut(Ce),this.Os=new fa(c=>rg(c),ag),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(r)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Jx(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.xs))}}function dD(i,e,t,r){return new hD(i,e,t,r)}async function wA(i,e){const t=we(i);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.mutationQueue.getAllMutationBatches(r).next(c=>(o=c,t.Ls(e),t.mutationQueue.getAllMutationBatches(r))).next(c=>{const d=[],m=[];let g=Pe();for(const v of o){d.push(v.batchId);for(const T of v.mutations)g=g.add(T.key)}for(const v of c){m.push(v.batchId);for(const T of v.mutations)g=g.add(T.key)}return t.localDocuments.getDocuments(r,g).next(v=>({ks:v,removedBatchIds:d,addedBatchIds:m}))})})}function fD(i,e){const t=we(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),c=t.Bs.newChangeBuffer({trackRemovals:!0});return function(m,g,v,T){const A=v.batch,b=A.keys();let k=ee.resolve();return b.forEach(O=>{k=k.next(()=>T.getEntry(g,O)).next(z=>{const j=v.docVersions.get(O);qe(j!==null,48541),z.version.compareTo(j)<0&&(A.applyToRemoteDocument(z,v),z.isValidDocument()&&(z.setReadTime(v.commitVersion),T.addEntry(z)))})}),k.next(()=>m.mutationQueue.removeMutationBatch(g,A))}(t,r,e,c).next(()=>c.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(m){let g=Pe();for(let v=0;v<m.mutationResults.length;++v)m.mutationResults[v].transformResults.length>0&&(g=g.add(m.batch.mutations[v].key));return g}(e))).next(()=>t.localDocuments.getDocuments(r,o))})}function IA(i){const e=we(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ti.getLastRemoteSnapshotVersion(t))}function mD(i,e){const t=we(i),r=e.snapshotVersion;let o=t.xs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",c=>{const d=t.Bs.newChangeBuffer({trackRemovals:!0});o=t.xs;const m=[];e.targetChanges.forEach((T,A)=>{const b=o.get(A);if(!b)return;m.push(t.Ti.removeMatchingKeys(c,T.removedDocuments,A).next(()=>t.Ti.addMatchingKeys(c,T.addedDocuments,A)));let k=b.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(A)!==null?k=k.withResumeToken(Yt.EMPTY_BYTE_STRING,Ee.min()).withLastLimboFreeSnapshotVersion(Ee.min()):T.resumeToken.approximateByteSize()>0&&(k=k.withResumeToken(T.resumeToken,r)),o=o.insert(A,k),function(z,j,K){return z.resumeToken.approximateByteSize()===0||j.snapshotVersion.toMicroseconds()-z.snapshotVersion.toMicroseconds()>=uD?!0:K.addedDocuments.size+K.modifiedDocuments.size+K.removedDocuments.size>0}(b,k,T)&&m.push(t.Ti.updateTargetData(c,k))});let g=ds(),v=Pe();if(e.documentUpdates.forEach(T=>{e.resolvedLimboDocuments.has(T)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(c,T))}),m.push(pD(c,d,e.documentUpdates).next(T=>{g=T.qs,v=T.Qs})),!r.isEqual(Ee.min())){const T=t.Ti.getLastRemoteSnapshotVersion(c).next(A=>t.Ti.setTargetsMetadata(c,c.currentSequenceNumber,r));m.push(T)}return ee.waitFor(m).next(()=>d.apply(c)).next(()=>t.localDocuments.getLocalViewOfDocuments(c,g,v)).next(()=>g)}).then(c=>(t.xs=o,c))}function pD(i,e,t){let r=Pe(),o=Pe();return t.forEach(c=>r=r.add(c)),e.getEntries(i,r).next(c=>{let d=ds();return t.forEach((m,g)=>{const v=c.get(m);g.isFoundDocument()!==v.isFoundDocument()&&(o=o.add(m)),g.isNoDocument()&&g.version.isEqual(Ee.min())?(e.removeEntry(m,g.readTime),d=d.insert(m,g)):!v.isValidDocument()||g.version.compareTo(v.version)>0||g.version.compareTo(v.version)===0&&v.hasPendingWrites?(e.addEntry(g),d=d.insert(m,g)):ue(mg,"Ignoring outdated watch update for ",m,". Current version:",v.version," Watch version:",g.version)}),{qs:d,Qs:o}})}function gD(i,e){const t=we(i);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=ng),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function yD(i,e){const t=we(i);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.Ti.getTargetData(r,e).next(c=>c?(o=c,ee.resolve(o)):t.Ti.allocateTargetId(r).next(d=>(o=new Ys(e,d,"TargetPurposeListen",r.currentSequenceNumber),t.Ti.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.xs.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.xs=t.xs.insert(r.targetId,r),t.Os.set(e,r.targetId)),r})}async function Np(i,e,t){const r=we(i),o=r.xs.get(e),c=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",c,d=>r.persistence.referenceDelegate.removeTarget(d,o))}catch(d){if(!ko(d))throw d;ue(mg,`Failed to update sequence numbers for target ${e}: ${d}`)}r.xs=r.xs.remove(e),r.Os.delete(o.target)}function DE(i,e,t){const r=we(i);let o=Ee.min(),c=Pe();return r.persistence.runTransaction("Execute query","readwrite",d=>function(g,v,T){const A=we(g),b=A.Os.get(T);return b!==void 0?ee.resolve(A.xs.get(b)):A.Ti.getTargetData(v,T)}(r,d,Ri(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(d,m.targetId).next(g=>{c=g})}).next(()=>r.Ms.getDocumentsMatchingQuery(d,e,t?o:Ee.min(),t?c:Pe())).next(m=>(vD(r,rx(e),m),{documents:m,$s:c})))}function vD(i,e,t){let r=i.Ns.get(e)||Ee.min();t.forEach((o,c)=>{c.readTime.compareTo(r)>0&&(r=c.readTime)}),i.Ns.set(e,r)}class OE{constructor(){this.activeTargetIds=hx()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class _D{constructor(){this.xo=new OE,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,t,r){this.Oo[e]=t}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new OE,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TD{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ME="ConnectivityMonitor";class kE{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){ue(ME,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){ue(ME,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fh=null;function Rp(){return fh===null?fh=function(){return 268435456+Math.round(2147483648*Math.random())}():fh++,"0x"+fh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qm="RestConnection",ED={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class bD{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Ko=t+"://"+e.host,this.Wo=`projects/${r}/databases/${o}`,this.Go=this.databaseId.database===Uh?`project_id=${r}`:`project_id=${r}&database_id=${o}`}zo(e,t,r,o,c){const d=Rp(),m=this.jo(e,t.toUriEncodedString());ue(Qm,`Sending RPC '${e}' ${d}:`,m,r);const g={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(g,o,c);const{host:v}=new URL(m),T=ha(v);return this.Jo(e,m,g,r,T).then(A=>(ue(Qm,`Received RPC '${e}' ${d}: `,A),A),A=>{throw So(Qm,`RPC '${e}' ${d} failed with error: `,A,"url: ",m,"request:",r),A})}Yo(e,t,r,o,c,d){return this.zo(e,t,r,o,c)}Ho(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Oo}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,c)=>e[c]=o),r&&r.headers.forEach((o,c)=>e[c]=o)}jo(e,t){const r=ED[e];return`${this.Ko}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AD{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jt="WebChannelConnection";class SD extends bD{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,o,c){const d=Rp();return new Promise((m,g)=>{const v=new Ib;v.setWithCredentials(!0),v.listenOnce(Nb.COMPLETE,()=>{try{switch(v.getLastErrorCode()){case Eh.NO_ERROR:const A=v.getResponseJson();ue(Jt,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(A)),m(A);break;case Eh.TIMEOUT:ue(Jt,`RPC '${e}' ${d} timed out`),g(new le(Z.DEADLINE_EXCEEDED,"Request time out"));break;case Eh.HTTP_ERROR:const b=v.getStatus();if(ue(Jt,`RPC '${e}' ${d} failed with status:`,b,"response text:",v.getResponseText()),b>0){let k=v.getResponseJson();Array.isArray(k)&&(k=k[0]);const O=k?.error;if(O&&O.status&&O.message){const z=function(K){const ae=K.toLowerCase().replace(/_/g,"-");return Object.values(Z).indexOf(ae)>=0?ae:Z.UNKNOWN}(O.status);g(new le(z,O.message))}else g(new le(Z.UNKNOWN,"Server responded with status "+v.getStatus()))}else g(new le(Z.UNAVAILABLE,"Connection failed."));break;default:ve(9055,{h_:e,streamId:d,P_:v.getLastErrorCode(),T_:v.getLastError()})}}finally{ue(Jt,`RPC '${e}' ${d} completed.`)}});const T=JSON.stringify(o);ue(Jt,`RPC '${e}' ${d} sending request:`,o),v.send(t,"POST",T,r,15)})}I_(e,t,r){const o=Rp(),c=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=xb(),m=Cb(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;v!==void 0&&(g.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(g.useFetchStreams=!0),this.Ho(g.initMessageHeaders,t,r),g.encodeInitMessageHeaders=!0;const T=c.join("");ue(Jt,`Creating RPC '${e}' stream ${o}: ${T}`,g);const A=d.createWebChannel(T,g);this.E_(A);let b=!1,k=!1;const O=new AD({Zo:j=>{k?ue(Jt,`Not sending because RPC '${e}' stream ${o} is closed:`,j):(b||(ue(Jt,`Opening RPC '${e}' stream ${o} transport.`),A.open(),b=!0),ue(Jt,`RPC '${e}' stream ${o} sending:`,j),A.send(j))},Xo:()=>A.close()}),z=(j,K,ae)=>{j.listen(K,ie=>{try{ae(ie)}catch(ce){setTimeout(()=>{throw ce},0)}})};return z(A,Ql.EventType.OPEN,()=>{k||(ue(Jt,`RPC '${e}' stream ${o} transport opened.`),O.__())}),z(A,Ql.EventType.CLOSE,()=>{k||(k=!0,ue(Jt,`RPC '${e}' stream ${o} transport closed`),O.u_(),this.d_(A))}),z(A,Ql.EventType.ERROR,j=>{k||(k=!0,So(Jt,`RPC '${e}' stream ${o} transport errored. Name:`,j.name,"Message:",j.message),O.u_(new le(Z.UNAVAILABLE,"The operation could not be completed")))}),z(A,Ql.EventType.MESSAGE,j=>{var K;if(!k){const ae=j.data[0];qe(!!ae,16349);const ie=ae,ce=ie?.error||((K=ie[0])===null||K===void 0?void 0:K.error);if(ce){ue(Jt,`RPC '${e}' stream ${o} received error:`,ce);const W=ce.status;let de=function(N){const x=bt[N];if(x!==void 0)return dA(x)}(W),V=ce.message;de===void 0&&(de=Z.INTERNAL,V="Unknown error status: "+W+" with message "+ce.message),k=!0,O.u_(new le(de,V)),A.close()}else ue(Jt,`RPC '${e}' stream ${o} received:`,ae),O.c_(ae)}}),z(m,Rb.STAT_EVENT,j=>{j.stat===gp.PROXY?ue(Jt,`RPC '${e}' stream ${o} detected buffering proxy`):j.stat===gp.NOPROXY&&ue(Jt,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{O.a_()},0),O}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(t=>t===e)}}function Ym(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function md(i){return new Rx(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pg{constructor(e,t,r=1e3,o=1.5,c=6e4){this.xi=e,this.timerId=t,this.A_=r,this.R_=o,this.V_=c,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();const t=Math.floor(this.m_+this.w_()),r=Math.max(0,Date.now()-this.g_),o=Math.max(0,t-r);o>0&&ue("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.m_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,o,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VE="PersistentStream";class NA{constructor(e,t,r,o,c,d,m,g){this.xi=e,this.S_=r,this.D_=o,this.connection=c,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=m,this.listener=g,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new pg(e,t)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(e,t){this.U_(),this.K_(),this.x_.cancel(),this.v_++,e!==4?this.x_.reset():t&&t.code===Z.RESOURCE_EXHAUSTED?(hs(t.toString()),hs("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):t&&t.code===Z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(t)}W_(){}auth(){this.state=1;const e=this.G_(this.v_),t=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.v_===t&&this.z_(r,o)},r=>{e(()=>{const o=new le(Z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.j_(o)})})}z_(e,t){const r=this.G_(this.v_);this.stream=this.H_(e,t),this.stream.e_(()=>{r(()=>this.listener.e_())}),this.stream.n_(()=>{r(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(o=>{r(()=>this.j_(o))}),this.stream.onMessage(o=>{r(()=>++this.M_==1?this.J_(o):this.onNext(o))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(e){return ue(VE,`close with error: ${e}`),this.stream=null,this.close(4,e)}G_(e){return t=>{this.xi.enqueueAndForget(()=>this.v_===e?t():(ue(VE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class wD extends NA{constructor(e,t,r,o,c,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,d),this.serializer=c}H_(e,t){return this.connection.I_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();const t=Ox(this.serializer,e),r=function(c){if(!("targetChange"in c))return Ee.min();const d=c.targetChange;return d.targetIds&&d.targetIds.length?Ee.min():d.readTime?Cn(d.readTime):Ee.min()}(e);return this.listener.Y_(t,r)}Z_(e){const t={};t.database=Ip(this.serializer),t.addTarget=function(c,d){let m;const g=d.target;if(m=Ep(g)?{documents:kx(c,g)}:{query:Vx(c,g).gt},m.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){m.resumeToken=pA(c,d.resumeToken);const v=Sp(c,d.expectedCount);v!==null&&(m.expectedCount=v)}else if(d.snapshotVersion.compareTo(Ee.min())>0){m.readTime=Bh(c,d.snapshotVersion.toTimestamp());const v=Sp(c,d.expectedCount);v!==null&&(m.expectedCount=v)}return m}(this.serializer,e);const r=jx(this.serializer,e);r&&(t.labels=r),this.Q_(t)}X_(e){const t={};t.database=Ip(this.serializer),t.removeTarget=e,this.Q_(t)}}class ID extends NA{constructor(e,t,r,o,c,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,d),this.serializer=c}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,t){return this.connection.I_("Write",e,t)}J_(e){return qe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,qe(!e.writeResults||e.writeResults.length===0,55816),this.listener.na()}onNext(e){qe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();const t=Mx(e.writeResults,e.commitTime),r=Cn(e.commitTime);return this.listener.ra(r,t)}ia(){const e={};e.database=Ip(this.serializer),this.Q_(e)}ta(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>_A(this.serializer,r))};this.Q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ND{}class RD extends ND{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=o,this.sa=!1}oa(){if(this.sa)throw new le(Z.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,t,r,o){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,d])=>this.connection.zo(e,wp(t,r),o,c,d)).catch(c=>{throw c.name==="FirebaseError"?(c.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new le(Z.UNKNOWN,c.toString())})}Yo(e,t,r,o,c){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,m])=>this.connection.Yo(e,wp(t,r),o,d,m,c)).catch(d=>{throw d.name==="FirebaseError"?(d.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new le(Z.UNKNOWN,d.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class CD{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.la("Offline")))}set(e){this.Ta(),this._a=0,e==="Online"&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(hs(t),this.ua=!1):ue("OnlineStateTracker",t)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oa="RemoteStore";class xD{constructor(e,t,r,o,c){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=c,this.Ra.No(d=>{r.enqueueAndForget(async()=>{ma(this)&&(ue(oa,"Restarting streams for network reachability change."),await async function(g){const v=we(g);v.da.add(4),await xc(v),v.Va.set("Unknown"),v.da.delete(4),await pd(v)}(this))})}),this.Va=new CD(r,o)}}async function pd(i){if(ma(i))for(const e of i.Aa)await e(!0)}async function xc(i){for(const e of i.Aa)await e(!1)}function RA(i,e){const t=we(i);t.Ea.has(e.targetId)||(t.Ea.set(e.targetId,e),_g(t)?vg(t):Po(t).N_()&&yg(t,e))}function gg(i,e){const t=we(i),r=Po(t);t.Ea.delete(e),r.N_()&&CA(t,e),t.Ea.size===0&&(r.N_()?r.k_():ma(t)&&t.Va.set("Unknown"))}function yg(i,e){if(i.ma.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ee.min())>0){const t=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Po(i).Z_(e)}function CA(i,e){i.ma.Ke(e),Po(i).X_(e)}function vg(i){i.ma=new Sx({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>i.Ea.get(e)||null,Pt:()=>i.datastore.serializer.databaseId}),Po(i).start(),i.Va.ca()}function _g(i){return ma(i)&&!Po(i).O_()&&i.Ea.size>0}function ma(i){return we(i).da.size===0}function xA(i){i.ma=void 0}async function DD(i){i.Va.set("Online")}async function OD(i){i.Ea.forEach((e,t)=>{yg(i,e)})}async function MD(i,e){xA(i),_g(i)?(i.Va.Pa(e),vg(i)):i.Va.set("Unknown")}async function kD(i,e,t){if(i.Va.set("Online"),e instanceof mA&&e.state===2&&e.cause)try{await async function(o,c){const d=c.cause;for(const m of c.targetIds)o.Ea.has(m)&&(await o.remoteSyncer.rejectListen(m,d),o.Ea.delete(m),o.ma.removeTarget(m))}(i,e)}catch(r){ue(oa,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Gh(i,r)}else if(e instanceof wh?i.ma.Xe(e):e instanceof fA?i.ma.ot(e):i.ma.nt(e),!t.isEqual(Ee.min()))try{const r=await IA(i.localStore);t.compareTo(r)>=0&&await function(c,d){const m=c.ma.It(d);return m.targetChanges.forEach((g,v)=>{if(g.resumeToken.approximateByteSize()>0){const T=c.Ea.get(v);T&&c.Ea.set(v,T.withResumeToken(g.resumeToken,d))}}),m.targetMismatches.forEach((g,v)=>{const T=c.Ea.get(g);if(!T)return;c.Ea.set(g,T.withResumeToken(Yt.EMPTY_BYTE_STRING,T.snapshotVersion)),CA(c,g);const A=new Ys(T.target,g,v,T.sequenceNumber);yg(c,A)}),c.remoteSyncer.applyRemoteEvent(m)}(i,t)}catch(r){ue(oa,"Failed to raise snapshot:",r),await Gh(i,r)}}async function Gh(i,e,t){if(!ko(e))throw e;i.da.add(1),await xc(i),i.Va.set("Offline"),t||(t=()=>IA(i.localStore)),i.asyncQueue.enqueueRetryable(async()=>{ue(oa,"Retrying IndexedDB access"),await t(),i.da.delete(1),await pd(i)})}function DA(i,e){return e().catch(t=>Gh(i,t,e))}async function gd(i){const e=we(i),t=rr(e);let r=e.Ia.length>0?e.Ia[e.Ia.length-1].batchId:ng;for(;VD(e);)try{const o=await gD(e.localStore,r);if(o===null){e.Ia.length===0&&t.k_();break}r=o.batchId,PD(e,o)}catch(o){await Gh(e,o)}OA(e)&&MA(e)}function VD(i){return ma(i)&&i.Ia.length<10}function PD(i,e){i.Ia.push(e);const t=rr(i);t.N_()&&t.ea&&t.ta(e.mutations)}function OA(i){return ma(i)&&!rr(i).O_()&&i.Ia.length>0}function MA(i){rr(i).start()}async function jD(i){rr(i).ia()}async function UD(i){const e=rr(i);for(const t of i.Ia)e.ta(t.mutations)}async function LD(i,e,t){const r=i.Ia.shift(),o=lg.from(r,e,t);await DA(i,()=>i.remoteSyncer.applySuccessfulWrite(o)),await gd(i)}async function zD(i,e){e&&rr(i).ea&&await async function(r,o){if(function(d){return hA(d)&&d!==Z.ABORTED}(o.code)){const c=r.Ia.shift();rr(r).L_(),await DA(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,o)),await gd(r)}}(i,e),OA(i)&&MA(i)}async function PE(i,e){const t=we(i);t.asyncQueue.verifyOperationInProgress(),ue(oa,"RemoteStore received new credentials");const r=ma(t);t.da.add(3),await xc(t),r&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.da.delete(3),await pd(t)}async function qD(i,e){const t=we(i);e?(t.da.delete(2),await pd(t)):e||(t.da.add(2),await xc(t),t.Va.set("Unknown"))}function Po(i){return i.fa||(i.fa=function(t,r,o){const c=we(t);return c.oa(),new wD(r,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)}(i.datastore,i.asyncQueue,{e_:DD.bind(null,i),n_:OD.bind(null,i),i_:MD.bind(null,i),Y_:kD.bind(null,i)}),i.Aa.push(async e=>{e?(i.fa.L_(),_g(i)?vg(i):i.Va.set("Unknown")):(await i.fa.stop(),xA(i))})),i.fa}function rr(i){return i.ga||(i.ga=function(t,r,o){const c=we(t);return c.oa(),new ID(r,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)}(i.datastore,i.asyncQueue,{e_:()=>Promise.resolve(),n_:jD.bind(null,i),i_:zD.bind(null,i),na:UD.bind(null,i),ra:LD.bind(null,i)}),i.Aa.push(async e=>{e?(i.ga.L_(),await gd(i)):(await i.ga.stop(),i.Ia.length>0&&(ue(oa,`Stopping write stream with ${i.Ia.length} pending writes`),i.Ia=[]))})),i.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tg{constructor(e,t,r,o,c){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=c,this.deferred=new Ni,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,o,c){const d=Date.now()+r,m=new Tg(e,t,d,o,c);return m.start(r),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new le(Z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Eg(i,e){if(hs("AsyncQueue",`${e}: ${i}`),ko(i))return new le(Z.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{static emptySet(e){return new _o(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||pe.comparator(t.key,r.key):(t,r)=>pe.comparator(t.key,r.key),this.keyedMap=Yl(),this.sortedSet=new ut(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof _o)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,c=r.getNext().key;if(!o.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new _o;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jE{constructor(){this.pa=new ut(pe.comparator)}track(e){const t=e.doc.key,r=this.pa.get(t);r?e.type!==0&&r.type===3?this.pa=this.pa.insert(t,e):e.type===3&&r.type!==1?this.pa=this.pa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.pa=this.pa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.pa=this.pa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.pa=this.pa.remove(t):e.type===1&&r.type===2?this.pa=this.pa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.pa=this.pa.insert(t,{type:2,doc:e.doc}):ve(63341,{Vt:e,ya:r}):this.pa=this.pa.insert(t,e)}wa(){const e=[];return this.pa.inorderTraversal((t,r)=>{e.push(r)}),e}}class Co{constructor(e,t,r,o,c,d,m,g,v){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=c,this.fromCache=d,this.syncStateChanged=m,this.excludesMetadataChanges=g,this.hasCachedResults=v}static fromInitialDocuments(e,t,r,o,c){const d=[];return t.forEach(m=>{d.push({type:0,doc:m})}),new Co(e,t,_o.emptySet(t),d,r,o,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ld(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BD{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}}class FD{constructor(){this.queries=UE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const o=we(t),c=o.queries;o.queries=UE(),c.forEach((d,m)=>{for(const g of m.Sa)g.onError(r)})})(this,new le(Z.ABORTED,"Firestore shutting down"))}}function UE(){return new fa(i=>Wb(i),ld)}async function bg(i,e){const t=we(i);let r=3;const o=e.query;let c=t.queries.get(o);c?!c.Da()&&e.va()&&(r=2):(c=new BD,r=e.va()?0:1);try{switch(r){case 0:c.ba=await t.onListen(o,!0);break;case 1:c.ba=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(d){const m=Eg(d,`Initialization of query '${lo(e.query)}' failed`);return void e.onError(m)}t.queries.set(o,c),c.Sa.push(e),e.Fa(t.onlineState),c.ba&&e.Ma(c.ba)&&Sg(t)}async function Ag(i,e){const t=we(i),r=e.query;let o=3;const c=t.queries.get(r);if(c){const d=c.Sa.indexOf(e);d>=0&&(c.Sa.splice(d,1),c.Sa.length===0?o=e.va()?0:1:!c.Da()&&e.va()&&(o=2))}switch(o){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function HD(i,e){const t=we(i);let r=!1;for(const o of e){const c=o.query,d=t.queries.get(c);if(d){for(const m of d.Sa)m.Ma(o)&&(r=!0);d.ba=o}}r&&Sg(t)}function GD(i,e,t){const r=we(i),o=r.queries.get(e);if(o)for(const c of o.Sa)c.onError(t);r.queries.delete(e)}function Sg(i){i.Ca.forEach(e=>{e.next()})}var Cp,LE;(LE=Cp||(Cp={})).xa="default",LE.Cache="cache";class wg{constructor(e,t,r){this.query=e,this.Oa=t,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=r||{}}Ma(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)o.type!==3&&r.push(o);e=new Co(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Na?this.La(e)&&(this.Oa.next(e),t=!0):this.ka(e,this.onlineState)&&(this.qa(e),t=!0),this.Ba=e,t}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let t=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),t=!0),t}ka(e,t){if(!e.fromCache||!this.va())return!0;const r=t!=="Offline";return(!this.options.Qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}La(e){if(e.docChanges.length>0)return!0;const t=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}qa(e){e=Co.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==Cp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA{constructor(e){this.key=e}}class VA{constructor(e){this.key=e}}class $D{constructor(e,t){this.query=e,this.Ha=t,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Pe(),this.mutatedKeys=Pe(),this.Za=Jb(e),this.Xa=new _o(this.Za)}get eu(){return this.Ha}tu(e,t){const r=t?t.nu:new jE,o=t?t.Xa:this.Xa;let c=t?t.mutatedKeys:this.mutatedKeys,d=o,m=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,v=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((T,A)=>{const b=o.get(T),k=cd(this.query,A)?A:null,O=!!b&&this.mutatedKeys.has(b.key),z=!!k&&(k.hasLocalMutations||this.mutatedKeys.has(k.key)&&k.hasCommittedMutations);let j=!1;b&&k?b.data.isEqual(k.data)?O!==z&&(r.track({type:3,doc:k}),j=!0):this.ru(b,k)||(r.track({type:2,doc:k}),j=!0,(g&&this.Za(k,g)>0||v&&this.Za(k,v)<0)&&(m=!0)):!b&&k?(r.track({type:0,doc:k}),j=!0):b&&!k&&(r.track({type:1,doc:b}),j=!0,(g||v)&&(m=!0)),j&&(k?(d=d.add(k),c=z?c.add(T):c.delete(T)):(d=d.delete(T),c=c.delete(T)))}),this.query.limit!==null)for(;d.size>this.query.limit;){const T=this.query.limitType==="F"?d.last():d.first();d=d.delete(T.key),c=c.delete(T.key),r.track({type:1,doc:T})}return{Xa:d,nu:r,Cs:m,mutatedKeys:c}}ru(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,o){const c=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;const d=e.nu.wa();d.sort((T,A)=>function(k,O){const z=j=>{switch(j){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ve(20277,{Vt:j})}};return z(k)-z(O)}(T.type,A.type)||this.Za(T.doc,A.doc)),this.iu(r),o=o!=null&&o;const m=t&&!o?this.su():[],g=this.Ya.size===0&&this.current&&!o?1:0,v=g!==this.Ja;return this.Ja=g,d.length!==0||v?{snapshot:new Co(this.query,e.Xa,c,d,e.mutatedKeys,g===0,v,!1,!!r&&r.resumeToken.approximateByteSize()>0),ou:m}:{ou:m}}Fa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new jE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}su(){if(!this.current)return[];const e=this.Ya;this.Ya=Pe(),this.Xa.forEach(r=>{this._u(r.key)&&(this.Ya=this.Ya.add(r.key))});const t=[];return e.forEach(r=>{this.Ya.has(r)||t.push(new VA(r))}),this.Ya.forEach(r=>{e.has(r)||t.push(new kA(r))}),t}au(e){this.Ha=e.$s,this.Ya=Pe();const t=this.tu(e.documents);return this.applyChanges(t,!0)}uu(){return Co.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const Ig="SyncEngine";class KD{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class QD{constructor(e){this.key=e,this.cu=!1}}class YD{constructor(e,t,r,o,c,d){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=c,this.maxConcurrentLimboResolutions=d,this.lu={},this.hu=new fa(m=>Wb(m),ld),this.Pu=new Map,this.Tu=new Set,this.Iu=new ut(pe.comparator),this.Eu=new Map,this.du=new hg,this.Au={},this.Ru=new Map,this.Vu=Ro.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function XD(i,e,t=!0){const r=qA(i);let o;const c=r.hu.get(e);return c?(r.sharedClientState.addLocalQueryTarget(c.targetId),o=c.view.uu()):o=await PA(r,e,t,!0),o}async function ZD(i,e){const t=qA(i);await PA(t,e,!0,!1)}async function PA(i,e,t,r){const o=await yD(i.localStore,Ri(e)),c=o.targetId,d=i.sharedClientState.addLocalQueryTarget(c,t);let m;return r&&(m=await WD(i,e,c,d==="current",o.resumeToken)),i.isPrimaryClient&&t&&RA(i.remoteStore,o),m}async function WD(i,e,t,r,o){i.fu=(A,b,k)=>async function(z,j,K,ae){let ie=j.view.tu(K);ie.Cs&&(ie=await DE(z.localStore,j.query,!1).then(({documents:V})=>j.view.tu(V,ie)));const ce=ae&&ae.targetChanges.get(j.targetId),W=ae&&ae.targetMismatches.get(j.targetId)!=null,de=j.view.applyChanges(ie,z.isPrimaryClient,ce,W);return qE(z,j.targetId,de.ou),de.snapshot}(i,A,b,k);const c=await DE(i.localStore,e,!0),d=new $D(e,c.$s),m=d.tu(c.documents),g=Cc.createSynthesizedTargetChangeForCurrentChange(t,r&&i.onlineState!=="Offline",o),v=d.applyChanges(m,i.isPrimaryClient,g);qE(i,t,v.ou);const T=new KD(e,t,d);return i.hu.set(e,T),i.Pu.has(t)?i.Pu.get(t).push(e):i.Pu.set(t,[e]),v.snapshot}async function JD(i,e,t){const r=we(i),o=r.hu.get(e),c=r.Pu.get(o.targetId);if(c.length>1)return r.Pu.set(o.targetId,c.filter(d=>!ld(d,e))),void r.hu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await Np(r.localStore,o.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(o.targetId),t&&gg(r.remoteStore,o.targetId),xp(r,o.targetId)}).catch(Mo)):(xp(r,o.targetId),await Np(r.localStore,o.targetId,!0))}async function eO(i,e){const t=we(i),r=t.hu.get(e),o=t.Pu.get(r.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),gg(t.remoteStore,r.targetId))}async function tO(i,e,t){const r=lO(i);try{const o=await function(d,m){const g=we(d),v=Ct.now(),T=m.reduce((k,O)=>k.add(O.key),Pe());let A,b;return g.persistence.runTransaction("Locally write mutations","readwrite",k=>{let O=ds(),z=Pe();return g.Bs.getEntries(k,T).next(j=>{O=j,O.forEach((K,ae)=>{ae.isValidDocument()||(z=z.add(K))})}).next(()=>g.localDocuments.getOverlayedDocuments(k,O)).next(j=>{A=j;const K=[];for(const ae of m){const ie=_x(ae,A.get(ae.key).overlayedDocument);ie!=null&&K.push(new fr(ae.key,ie,Hb(ie.value.mapValue),Kt.exists(!0)))}return g.mutationQueue.addMutationBatch(k,v,K,m)}).next(j=>{b=j;const K=j.applyToLocalDocumentSet(A,z);return g.documentOverlayCache.saveOverlays(k,j.batchId,K)})}).then(()=>({batchId:b.batchId,changes:tA(A)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(d,m,g){let v=d.Au[d.currentUser.toKey()];v||(v=new ut(Ce)),v=v.insert(m,g),d.Au[d.currentUser.toKey()]=v}(r,o.batchId,t),await Dc(r,o.changes),await gd(r.remoteStore)}catch(o){const c=Eg(o,"Failed to persist write");t.reject(c)}}async function jA(i,e){const t=we(i);try{const r=await mD(t.localStore,e);e.targetChanges.forEach((o,c)=>{const d=t.Eu.get(c);d&&(qe(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?d.cu=!0:o.modifiedDocuments.size>0?qe(d.cu,14607):o.removedDocuments.size>0&&(qe(d.cu,42227),d.cu=!1))}),await Dc(t,r,e)}catch(r){await Mo(r)}}function zE(i,e,t){const r=we(i);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const o=[];r.hu.forEach((c,d)=>{const m=d.view.Fa(e);m.snapshot&&o.push(m.snapshot)}),function(d,m){const g=we(d);g.onlineState=m;let v=!1;g.queries.forEach((T,A)=>{for(const b of A.Sa)b.Fa(m)&&(v=!0)}),v&&Sg(g)}(r.eventManager,e),o.length&&r.lu.Y_(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function nO(i,e,t){const r=we(i);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.Eu.get(e),c=o&&o.key;if(c){let d=new ut(pe.comparator);d=d.insert(c,Lt.newNoDocument(c,Ee.min()));const m=Pe().add(c),g=new fd(Ee.min(),new Map,new ut(Ce),d,m);await jA(r,g),r.Iu=r.Iu.remove(c),r.Eu.delete(e),Ng(r)}else await Np(r.localStore,e,!1).then(()=>xp(r,e,t)).catch(Mo)}async function iO(i,e){const t=we(i),r=e.batch.batchId;try{const o=await fD(t.localStore,e);LA(t,r,null),UA(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Dc(t,o)}catch(o){await Mo(o)}}async function sO(i,e,t){const r=we(i);try{const o=await function(d,m){const g=we(d);return g.persistence.runTransaction("Reject batch","readwrite-primary",v=>{let T;return g.mutationQueue.lookupMutationBatch(v,m).next(A=>(qe(A!==null,37113),T=A.keys(),g.mutationQueue.removeMutationBatch(v,A))).next(()=>g.mutationQueue.performConsistencyCheck(v)).next(()=>g.documentOverlayCache.removeOverlaysForBatchId(v,T,m)).next(()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,T)).next(()=>g.localDocuments.getDocuments(v,T))})}(r.localStore,e);LA(r,e,t),UA(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Dc(r,o)}catch(o){await Mo(o)}}function UA(i,e){(i.Ru.get(e)||[]).forEach(t=>{t.resolve()}),i.Ru.delete(e)}function LA(i,e,t){const r=we(i);let o=r.Au[r.currentUser.toKey()];if(o){const c=o.get(e);c&&(t?c.reject(t):c.resolve(),o=o.remove(e)),r.Au[r.currentUser.toKey()]=o}}function xp(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const r of i.Pu.get(e))i.hu.delete(r),t&&i.lu.gu(r,t);i.Pu.delete(e),i.isPrimaryClient&&i.du.Hr(e).forEach(r=>{i.du.containsKey(r)||zA(i,r)})}function zA(i,e){i.Tu.delete(e.path.canonicalString());const t=i.Iu.get(e);t!==null&&(gg(i.remoteStore,t),i.Iu=i.Iu.remove(e),i.Eu.delete(t),Ng(i))}function qE(i,e,t){for(const r of t)r instanceof kA?(i.du.addReference(r.key,e),rO(i,r)):r instanceof VA?(ue(Ig,"Document no longer in limbo: "+r.key),i.du.removeReference(r.key,e),i.du.containsKey(r.key)||zA(i,r.key)):ve(19791,{pu:r})}function rO(i,e){const t=e.key,r=t.path.canonicalString();i.Iu.get(t)||i.Tu.has(r)||(ue(Ig,"New document in limbo: "+t),i.Tu.add(r),Ng(i))}function Ng(i){for(;i.Tu.size>0&&i.Iu.size<i.maxConcurrentLimboResolutions;){const e=i.Tu.values().next().value;i.Tu.delete(e);const t=new pe(nt.fromString(e)),r=i.Vu.next();i.Eu.set(r,new QD(t)),i.Iu=i.Iu.insert(t,r),RA(i.remoteStore,new Ys(Ri(od(t.path)),r,"TargetPurposeLimboResolution",rd.le))}}async function Dc(i,e,t){const r=we(i),o=[],c=[],d=[];r.hu.isEmpty()||(r.hu.forEach((m,g)=>{d.push(r.fu(g,e,t).then(v=>{var T;if((v||t)&&r.isPrimaryClient){const A=v?!v.fromCache:(T=t?.targetChanges.get(g.targetId))===null||T===void 0?void 0:T.current;r.sharedClientState.updateQueryState(g.targetId,A?"current":"not-current")}if(v){o.push(v);const A=fg.Rs(g.targetId,v);c.push(A)}}))}),await Promise.all(d),r.lu.Y_(o),await async function(g,v){const T=we(g);try{await T.persistence.runTransaction("notifyLocalViewChanges","readwrite",A=>ee.forEach(v,b=>ee.forEach(b.ds,k=>T.persistence.referenceDelegate.addReference(A,b.targetId,k)).next(()=>ee.forEach(b.As,k=>T.persistence.referenceDelegate.removeReference(A,b.targetId,k)))))}catch(A){if(!ko(A))throw A;ue(mg,"Failed to update sequence numbers: "+A)}for(const A of v){const b=A.targetId;if(!A.fromCache){const k=T.xs.get(b),O=k.snapshotVersion,z=k.withLastLimboFreeSnapshotVersion(O);T.xs=T.xs.insert(b,z)}}}(r.localStore,c))}async function aO(i,e){const t=we(i);if(!t.currentUser.isEqual(e)){ue(Ig,"User change. New user:",e.toKey());const r=await wA(t.localStore,e);t.currentUser=e,function(c,d){c.Ru.forEach(m=>{m.forEach(g=>{g.reject(new le(Z.CANCELLED,d))})}),c.Ru.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Dc(t,r.ks)}}function oO(i,e){const t=we(i),r=t.Eu.get(e);if(r&&r.cu)return Pe().add(r.key);{let o=Pe();const c=t.Pu.get(e);if(!c)return o;for(const d of c){const m=t.hu.get(d);o=o.unionWith(m.view.eu)}return o}}function qA(i){const e=we(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=jA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=oO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=nO.bind(null,e),e.lu.Y_=HD.bind(null,e.eventManager),e.lu.gu=GD.bind(null,e.eventManager),e}function lO(i){const e=we(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=iO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=sO.bind(null,e),e}class $h{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=md(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Su(e),await this.persistence.start(),this.localStore=this.Du(e),this.gcScheduler=this.vu(e,this.localStore),this.indexBackfillerScheduler=this.Cu(e,this.localStore)}vu(e,t){return null}Cu(e,t){return null}Du(e){return dD(this.persistence,new cD,e.initialUser,this.serializer)}Su(e){return new SA(dg.fi,this.serializer)}bu(e){return new _D}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}$h.provider={build:()=>new $h};class cO extends $h{constructor(e){super(),this.cacheSizeBytes=e}vu(e,t){qe(this.persistence.referenceDelegate instanceof Hh,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new Qx(r,e.asyncQueue,t)}Su(e){const t=this.cacheSizeBytes!==void 0?gn.withCacheSize(this.cacheSizeBytes):gn.DEFAULT;return new SA(r=>Hh.fi(r,t),this.serializer)}}class Dp{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>zE(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=aO.bind(null,this.syncEngine),await qD(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new FD}()}createDatastore(e){const t=md(e.databaseInfo.databaseId),r=function(c){return new SD(c)}(e.databaseInfo);return function(c,d,m,g){return new RD(c,d,m,g)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,o,c,d,m){return new xD(r,o,c,d,m)}(this.localStore,this.datastore,e.asyncQueue,t=>zE(this.syncEngine,t,0),function(){return kE.C()?new kE:new TD}())}createSyncEngine(e,t){return function(o,c,d,m,g,v,T){const A=new YD(o,c,d,m,g,v);return T&&(A.mu=!0),A}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(o){const c=we(o);ue(oa,"RemoteStore shutting down."),c.da.add(5),await xc(c),c.Ra.shutdown(),c.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Dp.provider={build:()=>new Dp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):hs("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uO{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new le(Z.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(o,c){const d=we(o),m={documents:c.map(A=>Fh(d.serializer,A))},g=await d.Yo("BatchGetDocuments",d.serializer.databaseId,nt.emptyPath(),m,c.length),v=new Map;g.forEach(A=>{const b=Dx(d.serializer,A);v.set(b.key.toString(),b)});const T=[];return c.forEach(A=>{const b=v.get(A.toString());qe(!!b,55234,{key:A}),T.push(b)}),T}(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new dd(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{const o=pe.fromPath(r);this.mutations.push(new uA(o,this.precondition(o)))}),await async function(r,o){const c=we(r),d={writes:o.map(m=>_A(c.serializer,m))};await c.zo("Commit",c.serializer.databaseId,nt.emptyPath(),d)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ve(50498,{Uu:e.constructor.name});t=Ee.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new le(Z.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Ee.min())?Kt.exists(!1):Kt.updateTime(t):Kt.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ee.min()))throw new le(Z.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Kt.updateTime(t)}return Kt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hO{constructor(e,t,r,o,c){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=o,this.deferred=c,this.Ku=r.maxAttempts,this.x_=new pg(this.asyncQueue,"transaction_retry")}Wu(){this.Ku-=1,this.Gu()}Gu(){this.x_.y_(async()=>{const e=new uO(this.datastore),t=this.zu(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(o=>{this.ju(o)}))}).catch(r=>{this.ju(r)})})}zu(e){try{const t=this.updateFunction(e);return!Nc(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}ju(e){this.Ku>0&&this.Hu(e)?(this.Ku-=1,this.asyncQueue.enqueueAndForget(()=>(this.Gu(),Promise.resolve()))):this.deferred.reject(e)}Hu(e){if(e.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!hA(t)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ar="FirestoreClient";class dO{constructor(e,t,r,o,c){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=en.UNAUTHENTICATED,this.clientId=kb.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(r,async d=>{ue(ar,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d}),this.appCheckCredentials.start(r,d=>(ue(ar,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ni;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Eg(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Xm(i,e){i.asyncQueue.verifyOperationInProgress(),ue(ar,"Initializing OfflineComponentProvider");const t=i.configuration;await e.initialize(t);let r=t.initialUser;i.setCredentialChangeListener(async o=>{r.isEqual(o)||(await wA(e.localStore,o),r=o)}),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=e}async function BE(i,e){i.asyncQueue.verifyOperationInProgress();const t=await fO(i);ue(ar,"Initializing OnlineComponentProvider"),await e.initialize(t,i.configuration),i.setCredentialChangeListener(r=>PE(e.remoteStore,r)),i.setAppCheckTokenChangeListener((r,o)=>PE(e.remoteStore,o)),i._onlineComponents=e}async function fO(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){ue(ar,"Using user provided OfflineComponentProvider");try{await Xm(i,i._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(o){return o.name==="FirebaseError"?o.code===Z.FAILED_PRECONDITION||o.code===Z.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(t))throw t;So("Error using user provided cache. Falling back to memory cache: "+t),await Xm(i,new $h)}}else ue(ar,"Using default OfflineComponentProvider"),await Xm(i,new cO(void 0));return i._offlineComponents}async function Cg(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(ue(ar,"Using user provided OnlineComponentProvider"),await BE(i,i._uninitializedComponentsProvider._online)):(ue(ar,"Using default OnlineComponentProvider"),await BE(i,new Dp))),i._onlineComponents}function mO(i){return Cg(i).then(e=>e.syncEngine)}function pO(i){return Cg(i).then(e=>e.datastore)}async function Kh(i){const e=await Cg(i),t=e.eventManager;return t.onListen=XD.bind(null,e.syncEngine),t.onUnlisten=JD.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=ZD.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=eO.bind(null,e.syncEngine),t}function gO(i,e,t={}){const r=new Ni;return i.asyncQueue.enqueueAndForget(async()=>function(c,d,m,g,v){const T=new Rg({next:b=>{T.xu(),d.enqueueAndForget(()=>Ag(c,A));const k=b.docs.has(m);!k&&b.fromCache?v.reject(new le(Z.UNAVAILABLE,"Failed to get document because the client is offline.")):k&&b.fromCache&&g&&g.source==="server"?v.reject(new le(Z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(b)},error:b=>v.reject(b)}),A=new wg(od(m.path),T,{includeMetadataChanges:!0,Qa:!0});return bg(c,A)}(await Kh(i),i.asyncQueue,e,t,r)),r.promise}function yO(i,e,t={}){const r=new Ni;return i.asyncQueue.enqueueAndForget(async()=>function(c,d,m,g,v){const T=new Rg({next:b=>{T.xu(),d.enqueueAndForget(()=>Ag(c,A)),b.fromCache&&g.source==="server"?v.reject(new le(Z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(b)},error:b=>v.reject(b)}),A=new wg(m,T,{includeMetadataChanges:!0,Qa:!0});return bg(c,A)}(await Kh(i),i.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BA(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FE=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FA(i,e,t){if(!t)throw new le(Z.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function vO(i,e,t,r){if(e===!0&&r===!0)throw new le(Z.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function HE(i){if(!pe.isDocumentKey(i))throw new le(Z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function GE(i){if(pe.isDocumentKey(i))throw new le(Z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function yd(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":ve(12329,{type:typeof i})}function hn(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new le(Z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=yd(i);throw new le(Z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HA="firestore.googleapis.com",$E=!0;class KE{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new le(Z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=HA,this.ssl=$E}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:$E;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=AA;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<$x)throw new le(Z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}vO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=BA((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(c){if(c.timeoutSeconds!==void 0){if(isNaN(c.timeoutSeconds))throw new le(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (must not be NaN)`);if(c.timeoutSeconds<5)throw new le(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (minimum allowed value is 5)`);if(c.timeoutSeconds>30)throw new le(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,o){return r.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class vd{constructor(e,t,r,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new KE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new le(Z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new le(Z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new KE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new SC;switch(r.type){case"firstParty":return new RC(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new le(Z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=FE.get(t);r&&(ue("ComponentProvider","Removing Datastore"),FE.delete(t),r.terminate())}(this),Promise.resolve()}}function _O(i,e,t,r={}){var o;i=hn(i,vd);const c=ha(e),d=i._getSettings(),m=Object.assign(Object.assign({},d),{emulatorOptions:i._getEmulatorOptions()}),g=`${e}:${t}`;c&&(zp(`https://${g}`),qp("Firestore",!0)),d.host!==HA&&d.host!==g&&So("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const v=Object.assign(Object.assign({},d),{host:g,ssl:c,emulatorOptions:r});if(!er(v,m)&&(i._setSettings(v),r.mockUserToken)){let T,A;if(typeof r.mockUserToken=="string")T=r.mockUserToken,A=en.MOCK_USER;else{T=L0(r.mockUserToken,(o=i._app)===null||o===void 0?void 0:o.options.projectId);const b=r.mockUserToken.sub||r.mockUserToken.user_id;if(!b)throw new le(Z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");A=new en(b)}i._authCredentials=new wC(new Ob(T,A))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new mr(this.firestore,e,this._query)}}class Qt{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Js(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Qt(this.firestore,e,this._key)}}class Js extends mr{constructor(e,t,r){super(e,t,od(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Qt(this.firestore,null,new pe(e))}withConverter(e){return new Js(this.firestore,e,this._path)}}function or(i,e,...t){if(i=ct(i),FA("collection","path",e),i instanceof vd){const r=nt.fromString(e,...t);return GE(r),new Js(i,null,r)}{if(!(i instanceof Qt||i instanceof Js))throw new le(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(nt.fromString(e,...t));return GE(r),new Js(i.firestore,null,r)}}function pr(i,e,...t){if(i=ct(i),arguments.length===1&&(e=kb.newId()),FA("doc","path",e),i instanceof vd){const r=nt.fromString(e,...t);return HE(r),new Qt(i,null,new pe(r))}{if(!(i instanceof Qt||i instanceof Js))throw new le(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(nt.fromString(e,...t));return HE(r),new Qt(i.firestore,i instanceof Js?i.converter:null,new pe(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QE="AsyncQueue";class YE{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new pg(this,"async_queue_retry"),this.rc=()=>{const r=Ym();r&&ue(QE,"Visibility state changed to "+r.visibilityState),this.x_.b_()},this.sc=e;const t=Ym();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;const t=Ym();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});const t=new Ni;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!ko(e))throw e;ue(QE,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(e){const t=this.sc.then(()=>(this.ec=!0,e().catch(r=>{throw this.Xu=r,this.ec=!1,hs("INTERNAL UNHANDLED ERROR: ",XE(r)),r}).then(r=>(this.ec=!1,r))));return this.sc=t,t}enqueueAfterDelay(e,t,r){this.oc(),this.nc.indexOf(e)>-1&&(t=0);const o=Tg.createAndSchedule(this,e,t,r,c=>this.uc(c));return this.Zu.push(o),o}oc(){this.Xu&&ve(47125,{cc:XE(this.Xu)})}verifyOperationInProgress(){}async lc(){let e;do e=this.sc,await e;while(e!==this.sc)}hc(e){for(const t of this.Zu)if(t.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Zu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){const t=this.Zu.indexOf(e);this.Zu.splice(t,1)}}function XE(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZE(i){return function(t,r){if(typeof t!="object"||t===null)return!1;const o=t;for(const c of r)if(c in o&&typeof o[c]=="function")return!0;return!1}(i,["next","error","complete"])}class xi extends vd{constructor(e,t,r,o){super(e,t,r,o),this.type="firestore",this._queue=new YE,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new YE(e),this._firestoreClient=void 0,await e}}}function TO(i,e){const t=typeof i=="object"?i:Ac(),r=typeof i=="string"?i:Uh,o=fs(t,"firestore").getImmediate({identifier:r});if(!o._initialized){const c=P0("firestore");c&&_O(o,...c)}return o}function Oc(i){if(i._terminated)throw new le(Z.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||EO(i),i._firestoreClient}function EO(i){var e,t,r;const o=i._freezeSettings(),c=function(m,g,v,T){return new FC(m,g,v,T.host,T.ssl,T.experimentalForceLongPolling,T.experimentalAutoDetectLongPolling,BA(T.experimentalLongPollingOptions),T.useFetchStreams,T.isUsingEmulator)}(i._databaseId,((e=i._app)===null||e===void 0?void 0:e.options.appId)||"",i._persistenceKey,o);i._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=o.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(i._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),i._firestoreClient=new dO(i._authCredentials,i._appCheckCredentials,i._queue,c,i._componentsProvider&&function(m){const g=m?._online.build();return{_offline:m?._offline.build(g),_online:g}}(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la{constructor(e){this._byteString=e}static fromBase64String(e){try{return new la(Yt.fromBase64String(e))}catch(t){throw new le(Z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new la(Yt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new le(Z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new $t(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _d{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xg{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new le(Z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new le(Z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ce(this._lat,e._lat)||Ce(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dg{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,o){if(r.length!==o.length)return!1;for(let c=0;c<r.length;++c)if(r[c]!==o[c])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bO=/^__.*__$/;class AO{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new fr(e,this.data,this.fieldMask,t,this.fieldTransforms):new Rc(e,this.data,t,this.fieldTransforms)}}class GA{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new fr(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function $A(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ve(40011,{Ic:i})}}class Og{constructor(e,t,r,o,c,d){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=o,c===void 0&&this.Ec(),this.fieldTransforms=c||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new Og(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.dc({path:r,Rc:!1});return o.Vc(e),o}mc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.dc({path:r,Rc:!1});return o.Ec(),o}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return Qh(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(e.length===0)throw this.gc("Document fields must not be empty");if($A(this.Ic)&&bO.test(e))throw this.gc('Document fields cannot begin and end with "__"')}}class SO{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||md(e)}bc(e,t,r,o=!1){return new Og({Ic:e,methodName:t,wc:r,path:$t.emptyPath(),Rc:!1,yc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function kc(i){const e=i._freezeSettings(),t=md(i._databaseId);return new SO(i._databaseId,!!e.ignoreUndefinedProperties,t)}function Mg(i,e,t,r,o,c={}){const d=i.bc(c.merge||c.mergeFields?2:0,e,t,o);Vg("Data must be an object, but it was:",d,r);const m=YA(r,d);let g,v;if(c.merge)g=new Nn(d.fieldMask),v=d.fieldTransforms;else if(c.mergeFields){const T=[];for(const A of c.mergeFields){const b=Op(e,A,t);if(!d.contains(b))throw new le(Z.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);ZA(T,b)||T.push(b)}g=new Nn(T),v=d.fieldTransforms.filter(A=>g.covers(A.field))}else g=null,v=d.fieldTransforms;return new AO(new un(m),g,v)}class Td extends _d{_toFieldTransform(e){if(e.Ic!==2)throw e.Ic===1?e.gc(`${this._methodName}() can only appear at the top level of your update data`):e.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Td}}class kg extends _d{_toFieldTransform(e){return new px(e.path,new yc)}isEqual(e){return e instanceof kg}}function KA(i,e,t,r){const o=i.bc(1,e,t);Vg("Data must be an object, but it was:",o,r);const c=[],d=un.empty();dr(r,(g,v)=>{const T=Pg(e,g,t);v=ct(v);const A=o.mc(T);if(v instanceof Td)c.push(T);else{const b=Vc(v,A);b!=null&&(c.push(T),d.set(T,b))}});const m=new Nn(c);return new GA(d,m,o.fieldTransforms)}function QA(i,e,t,r,o,c){const d=i.bc(1,e,t),m=[Op(e,r,t)],g=[o];if(c.length%2!=0)throw new le(Z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let b=0;b<c.length;b+=2)m.push(Op(e,c[b])),g.push(c[b+1]);const v=[],T=un.empty();for(let b=m.length-1;b>=0;--b)if(!ZA(v,m[b])){const k=m[b];let O=g[b];O=ct(O);const z=d.mc(k);if(O instanceof Td)v.push(k);else{const j=Vc(O,z);j!=null&&(v.push(k),T.set(k,j))}}const A=new Nn(v);return new GA(T,A,d.fieldTransforms)}function wO(i,e,t,r=!1){return Vc(t,i.bc(r?4:3,e))}function Vc(i,e){if(XA(i=ct(i)))return Vg("Unsupported field value:",e,i),YA(i,e);if(i instanceof _d)return function(r,o){if(!$A(o.Ic))throw o.gc(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.gc(`${r._methodName}() is not currently supported inside arrays`);const c=r._toFieldTransform(o);c&&o.fieldTransforms.push(c)}(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.Rc&&e.Ic!==4)throw e.gc("Nested arrays are not supported");return function(r,o){const c=[];let d=0;for(const m of r){let g=Vc(m,o.fc(d));g==null&&(g={nullValue:"NULL_VALUE"}),c.push(g),d++}return{arrayValue:{values:c}}}(i,e)}return function(r,o){if((r=ct(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return dx(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const c=Ct.fromDate(r);return{timestampValue:Bh(o.serializer,c)}}if(r instanceof Ct){const c=new Ct(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Bh(o.serializer,c)}}if(r instanceof xg)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof la)return{bytesValue:pA(o.serializer,r._byteString)};if(r instanceof Qt){const c=o.databaseId,d=r.firestore._databaseId;if(!d.isEqual(c))throw o.gc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:ug(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof Dg)return function(d,m){return{mapValue:{fields:{[Bb]:{stringValue:Fb},[Lh]:{arrayValue:{values:d.toArray().map(v=>{if(typeof v!="number")throw m.gc("VectorValues must only contain numeric values.");return og(m.serializer,v)})}}}}}}(r,o);throw o.gc(`Unsupported field value: ${yd(r)}`)}(i,e)}function YA(i,e){const t={};return Pb(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):dr(i,(r,o)=>{const c=Vc(o,e.Ac(r));c!=null&&(t[r]=c)}),{mapValue:{fields:t}}}function XA(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof Ct||i instanceof xg||i instanceof la||i instanceof Qt||i instanceof _d||i instanceof Dg)}function Vg(i,e,t){if(!XA(t)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(t)){const r=yd(t);throw r==="an object"?e.gc(i+" a custom object"):e.gc(i+" "+r)}}function Op(i,e,t){if((e=ct(e))instanceof Mc)return e._internalPath;if(typeof e=="string")return Pg(i,e);throw Qh("Field path arguments must be of type string or ",i,!1,void 0,t)}const IO=new RegExp("[~\\*/\\[\\]]");function Pg(i,e,t){if(e.search(IO)>=0)throw Qh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new Mc(...e.split("."))._internalPath}catch{throw Qh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function Qh(i,e,t,r,o){const c=r&&!r.isEmpty(),d=o!==void 0;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let g="";return(c||d)&&(g+=" (found",c&&(g+=` in field ${r}`),d&&(g+=` in document ${o}`),g+=")"),new le(Z.INVALID_ARGUMENT,m+i+g)}function ZA(i,e){return i.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(e,t,r,o,c){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Qt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new NO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Ed("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class NO extends Yh{data(){return super.data()}}function Ed(i,e){return typeof e=="string"?Pg(i,e):e instanceof Mc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WA(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new le(Z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class jg{}class JA extends jg{}function Gn(i,e,...t){let r=[];e instanceof jg&&r.push(e),r=r.concat(t),function(c){const d=c.filter(g=>g instanceof Ug).length,m=c.filter(g=>g instanceof bd).length;if(d>1||d>0&&m>0)throw new le(Z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const o of r)i=o._apply(i);return i}class bd extends JA{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new bd(e,t,r)}_apply(e){const t=this._parse(e);return eS(e._query,t),new mr(e.firestore,e.converter,bp(e._query,t))}_parse(e){const t=kc(e.firestore);return function(c,d,m,g,v,T,A){let b;if(v.isKeyField()){if(T==="array-contains"||T==="array-contains-any")throw new le(Z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${T}' queries on documentId().`);if(T==="in"||T==="not-in"){JE(A,T);const O=[];for(const z of A)O.push(WE(g,c,z));b={arrayValue:{values:O}}}else b=WE(g,c,A)}else T!=="in"&&T!=="not-in"&&T!=="array-contains-any"||JE(A,T),b=wO(m,d,A,T==="in"||T==="not-in");return At.create(v,T,b)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Si(i,e,t){const r=e,o=Ed("where",i);return bd._create(o,r,t)}class Ug extends jg{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Ug(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:ri.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(o,c){let d=o;const m=c.getFlattenedFilters();for(const g of m)eS(d,g),d=bp(d,g)}(e._query,t),new mr(e.firestore,e.converter,bp(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Lg extends JA{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Lg(e,t)}_apply(e){const t=function(o,c,d){if(o.startAt!==null)throw new le(Z.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new le(Z.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new gc(c,d)}(e._query,this._field,this._direction);return new mr(e.firestore,e.converter,function(o,c){const d=o.explicitOrderBy.concat([c]);return new Vo(o.path,o.collectionGroup,d,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(e._query,t))}}function Ad(i,e="asc"){const t=e,r=Ed("orderBy",i);return Lg._create(r,t)}function WE(i,e,t){if(typeof(t=ct(t))=="string"){if(t==="")throw new le(Z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Zb(e)&&t.indexOf("/")!==-1)throw new le(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(nt.fromString(t));if(!pe.isDocumentKey(r))throw new le(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return dE(i,new pe(r))}if(t instanceof Qt)return dE(i,t._key);throw new le(Z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${yd(t)}.`)}function JE(i,e){if(!Array.isArray(i)||i.length===0)throw new le(Z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function eS(i,e){const t=function(o,c){for(const d of o)for(const m of d.getFlattenedFilters())if(c.indexOf(m.op)>=0)return m.op;return null}(i.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new le(Z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new le(Z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class tS{convertValue(e,t="none"){switch(sr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return yt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ir(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ve(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return dr(e,(o,c)=>{r[o]=this.convertValue(c,t)}),r}convertVectorValue(e){var t,r,o;const c=(o=(r=(t=e.fields)===null||t===void 0?void 0:t[Lh].arrayValue)===null||r===void 0?void 0:r.values)===null||o===void 0?void 0:o.map(d=>yt(d.doubleValue));return new Dg(c)}convertGeoPoint(e){return new xg(yt(e.latitude),yt(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=ad(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(fc(e));default:return null}}convertTimestamp(e){const t=nr(e);return new Ct(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=nt.fromString(e);qe(bA(r),9688,{name:e});const o=new mc(r.get(1),r.get(3)),c=new pe(r.popFirst(5));return o.isEqual(t)||hs(`Document ${c} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zg(i,e,t){let r;return r=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,r}class RO extends tS{constructor(e){super(),this.firestore=e}convertBytes(e){return new la(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Qt(this.firestore,null,t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class qg extends Yh{constructor(e,t,r,o,c,d){super(e,t,r,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Ih(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Ed("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Ih extends qg{data(e={}){return super.data(e)}}class nS{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new mo(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Ih(this._firestore,this._userDataWriter,r.key,r,new mo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new le(Z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,c){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map(m=>{const g=new Ih(o._firestore,o._userDataWriter,m.doc.key,m.doc,new mo(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:g,oldIndex:-1,newIndex:d++}})}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(m=>c||m.type!==3).map(m=>{const g=new Ih(o._firestore,o._userDataWriter,m.doc.key,m.doc,new mo(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let v=-1,T=-1;return m.type!==0&&(v=d.indexOf(m.doc.key),d=d.delete(m.doc.key)),m.type!==1&&(d=d.add(m.doc),T=d.indexOf(m.doc.key)),{type:CO(m.type),doc:g,oldIndex:v,newIndex:T}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function CO(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ve(61501,{type:i})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sd(i){i=hn(i,Qt);const e=hn(i.firestore,xi);return gO(Oc(e),i._key).then(t=>rS(e,i,t))}class wd extends tS{constructor(e){super(),this.firestore=e}convertBytes(e){return new la(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Qt(this.firestore,null,t)}}function Id(i){i=hn(i,mr);const e=hn(i.firestore,xi),t=Oc(e),r=new wd(e);return WA(i._query),yO(t,i._query).then(o=>new nS(e,r,i,o))}function xO(i,e,t){i=hn(i,Qt);const r=hn(i.firestore,xi),o=zg(i.converter,e,t);return Nd(r,[Mg(kc(r),"setDoc",i._key,o,i.converter!==null,t).toMutation(i._key,Kt.none())])}function iS(i,e,t,...r){i=hn(i,Qt);const o=hn(i.firestore,xi),c=kc(o);let d;return d=typeof(e=ct(e))=="string"||e instanceof Mc?QA(c,"updateDoc",i._key,e,t,r):KA(c,"updateDoc",i._key,e),Nd(o,[d.toMutation(i._key,Kt.exists(!0))])}function DO(i){return Nd(hn(i.firestore,xi),[new dd(i._key,Kt.none())])}function OO(i,e){const t=hn(i.firestore,xi),r=pr(i),o=zg(i.converter,e);return Nd(t,[Mg(kc(i.firestore),"addDoc",r._key,o,i.converter!==null,{}).toMutation(r._key,Kt.exists(!1))]).then(()=>r)}function sS(i,...e){var t,r,o;i=ct(i);let c={includeMetadataChanges:!1,source:"default"},d=0;typeof e[d]!="object"||ZE(e[d])||(c=e[d],d++);const m={includeMetadataChanges:c.includeMetadataChanges,source:c.source};if(ZE(e[d])){const A=e[d];e[d]=(t=A.next)===null||t===void 0?void 0:t.bind(A),e[d+1]=(r=A.error)===null||r===void 0?void 0:r.bind(A),e[d+2]=(o=A.complete)===null||o===void 0?void 0:o.bind(A)}let g,v,T;if(i instanceof Qt)v=hn(i.firestore,xi),T=od(i._key.path),g={next:A=>{e[d]&&e[d](rS(v,i,A))},error:e[d+1],complete:e[d+2]};else{const A=hn(i,mr);v=hn(A.firestore,xi),T=A._query;const b=new wd(v);g={next:k=>{e[d]&&e[d](new nS(v,b,A,k))},error:e[d+1],complete:e[d+2]},WA(i._query)}return function(b,k,O,z){const j=new Rg(z),K=new wg(k,j,O);return b.asyncQueue.enqueueAndForget(async()=>bg(await Kh(b),K)),()=>{j.xu(),b.asyncQueue.enqueueAndForget(async()=>Ag(await Kh(b),K))}}(Oc(v),T,m,g)}function Nd(i,e){return function(r,o){const c=new Ni;return r.asyncQueue.enqueueAndForget(async()=>tO(await mO(r),o,c)),c.promise}(Oc(i),e)}function rS(i,e,t){const r=t.docs.get(e._key),o=new wd(i);return new qg(i,o,e._key,r,new mo(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MO={maxAttempts:5};function Zl(i,e){if((i=ct(i)).firestore!==e)throw new le(Z.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kO{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=kc(e)}get(e){const t=Zl(e,this._firestore),r=new RO(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||o.length!==1)return ve(24041);const c=o[0];if(c.isFoundDocument())return new Yh(this._firestore,r,c.key,c,t.converter);if(c.isNoDocument())return new Yh(this._firestore,r,t._key,null,t.converter);throw ve(18433,{doc:c})})}set(e,t,r){const o=Zl(e,this._firestore),c=zg(o.converter,t,r),d=Mg(this._dataReader,"Transaction.set",o._key,c,o.converter!==null,r);return this._transaction.set(o._key,d),this}update(e,t,r,...o){const c=Zl(e,this._firestore);let d;return d=typeof(t=ct(t))=="string"||t instanceof Mc?QA(this._dataReader,"Transaction.update",c._key,t,r,o):KA(this._dataReader,"Transaction.update",c._key,t),this._transaction.update(c._key,d),this}delete(e){const t=Zl(e,this._firestore);return this._transaction.delete(t._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VO extends kO{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Zl(e,this._firestore),r=new wd(this._firestore);return super.get(e).then(o=>new qg(this._firestore,r,t._key,o._document,new mo(!1,!1),t.converter))}}function PO(i,e,t){i=hn(i,xi);const r=Object.assign(Object.assign({},MO),t);return function(c){if(c.maxAttempts<1)throw new le(Z.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(c,d,m){const g=new Ni;return c.asyncQueue.enqueueAndForget(async()=>{const v=await pO(c);new hO(c.asyncQueue,v,m,d,g).Wu()}),g.promise}(Oc(i),o=>e(new VO(i,o)),r)}function To(){return new kg("serverTimestamp")}(function(e,t=!0){(function(o){Oo=o})(da),$n(new Dn("firestore",(r,{instanceIdentifier:o,options:c})=>{const d=r.getProvider("app").getImmediate(),m=new xi(new IC(r.getProvider("auth-internal")),new CC(d,r.getProvider("app-check-internal")),function(v,T){if(!Object.prototype.hasOwnProperty.apply(v.options,["projectId"]))throw new le(Z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new mc(v.options.projectId,T)}(d,o),d);return c=Object.assign({useFetchStreams:t},c),m._setSettings(c),m},"PUBLIC").setMultipleInstances(!0)),nn(eE,tE,e),nn(eE,tE,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aS="firebasestorage.googleapis.com",jO="storageBucket",UO=2*60*1e3,LO=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi extends Kn{constructor(e,t,r=0){super(Zm(e),`Firebase Storage: ${t} (${Zm(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Oi.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Zm(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Di;(function(i){i.UNKNOWN="unknown",i.OBJECT_NOT_FOUND="object-not-found",i.BUCKET_NOT_FOUND="bucket-not-found",i.PROJECT_NOT_FOUND="project-not-found",i.QUOTA_EXCEEDED="quota-exceeded",i.UNAUTHENTICATED="unauthenticated",i.UNAUTHORIZED="unauthorized",i.UNAUTHORIZED_APP="unauthorized-app",i.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",i.INVALID_CHECKSUM="invalid-checksum",i.CANCELED="canceled",i.INVALID_EVENT_NAME="invalid-event-name",i.INVALID_URL="invalid-url",i.INVALID_DEFAULT_BUCKET="invalid-default-bucket",i.NO_DEFAULT_BUCKET="no-default-bucket",i.CANNOT_SLICE_BLOB="cannot-slice-blob",i.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",i.NO_DOWNLOAD_URL="no-download-url",i.INVALID_ARGUMENT="invalid-argument",i.INVALID_ARGUMENT_COUNT="invalid-argument-count",i.APP_DELETED="app-deleted",i.INVALID_ROOT_OPERATION="invalid-root-operation",i.INVALID_FORMAT="invalid-format",i.INTERNAL_ERROR="internal-error",i.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Di||(Di={}));function Zm(i){return"storage/"+i}function zO(){const i="An unknown error occurred, please check the error payload for server response.";return new Oi(Di.UNKNOWN,i)}function qO(){return new Oi(Di.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function BO(){return new Oi(Di.CANCELED,"User canceled the upload/download.")}function FO(i){return new Oi(Di.INVALID_URL,"Invalid URL '"+i+"'.")}function HO(i){return new Oi(Di.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+i+"'.")}function e0(i){return new Oi(Di.INVALID_ARGUMENT,i)}function oS(){return new Oi(Di.APP_DELETED,"The Firebase app was deleted.")}function GO(i){return new Oi(Di.INVALID_ROOT_OPERATION,"The operation '"+i+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=si.makeFromUrl(e,t)}catch{return new si(e,"")}if(r.path==="")return r;throw HO(e)}static makeFromUrl(e,t){let r=null;const o="([A-Za-z0-9.\\-_]+)";function c(ce){ce.path.charAt(ce.path.length-1)==="/"&&(ce.path_=ce.path_.slice(0,-1))}const d="(/(.*))?$",m=new RegExp("^gs://"+o+d,"i"),g={bucket:1,path:3};function v(ce){ce.path_=decodeURIComponent(ce.path)}const T="v[A-Za-z0-9_]+",A=t.replace(/[.]/g,"\\."),b="(/([^?#]*).*)?$",k=new RegExp(`^https?://${A}/${T}/b/${o}/o${b}`,"i"),O={bucket:1,path:3},z=t===aS?"(?:storage.googleapis.com|storage.cloud.google.com)":t,j="([^?#]*)",K=new RegExp(`^https?://${z}/${o}/${j}`,"i"),ie=[{regex:m,indices:g,postModify:c},{regex:k,indices:O,postModify:v},{regex:K,indices:{bucket:1,path:2},postModify:v}];for(let ce=0;ce<ie.length;ce++){const W=ie[ce],de=W.regex.exec(e);if(de){const V=de[W.indices.bucket];let I=de[W.indices.path];I||(I=""),r=new si(V,I),W.postModify(r);break}}if(r==null)throw FO(e);return r}}class $O{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KO(i,e,t){let r=1,o=null,c=null,d=!1,m=0;function g(){return m===2}let v=!1;function T(...j){v||(v=!0,e.apply(null,j))}function A(j){o=setTimeout(()=>{o=null,i(k,g())},j)}function b(){c&&clearTimeout(c)}function k(j,...K){if(v){b();return}if(j){b(),T.call(null,j,...K);return}if(g()||d){b(),T.call(null,j,...K);return}r<64&&(r*=2);let ie;m===1?(m=2,ie=0):ie=(r+Math.random())*1e3,A(ie)}let O=!1;function z(j){O||(O=!0,b(),!v&&(o!==null?(j||(m=2),clearTimeout(o),A(0)):j||(m=1)))}return A(0),c=setTimeout(()=>{d=!0,z(!0)},t),z}function QO(i){i(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YO(i){return i!==void 0}function t0(i,e,t,r){if(r<e)throw e0(`Invalid value for '${i}'. Expected ${e} or greater.`);if(r>t)throw e0(`Invalid value for '${i}'. Expected ${t} or less.`)}function XO(i){const e=encodeURIComponent;let t="?";for(const r in i)if(i.hasOwnProperty(r)){const o=e(r)+"="+e(i[r]);t=t+o+"&"}return t=t.slice(0,-1),t}var Xh;(function(i){i[i.NO_ERROR=0]="NO_ERROR",i[i.NETWORK_ERROR=1]="NETWORK_ERROR",i[i.ABORT=2]="ABORT"})(Xh||(Xh={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZO(i,e){const t=i>=500&&i<600,o=[408,429].indexOf(i)!==-1,c=e.indexOf(i)!==-1;return t||o||c}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WO{constructor(e,t,r,o,c,d,m,g,v,T,A,b=!0,k=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=o,this.successCodes_=c,this.additionalRetryCodes_=d,this.callback_=m,this.errorCallback_=g,this.timeout_=v,this.progressCallback_=T,this.connectionFactory_=A,this.retry=b,this.isUsingEmulator=k,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((O,z)=>{this.resolve_=O,this.reject_=z,this.start_()})}start_(){const e=(r,o)=>{if(o){r(!1,new mh(!1,null,!0));return}const c=this.connectionFactory_();this.pendingConnection_=c;const d=m=>{const g=m.loaded,v=m.lengthComputable?m.total:-1;this.progressCallback_!==null&&this.progressCallback_(g,v)};this.progressCallback_!==null&&c.addUploadProgressListener(d),c.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&c.removeUploadProgressListener(d),this.pendingConnection_=null;const m=c.getErrorCode()===Xh.NO_ERROR,g=c.getStatus();if(!m||ZO(g,this.additionalRetryCodes_)&&this.retry){const T=c.getErrorCode()===Xh.ABORT;r(!1,new mh(!1,null,T));return}const v=this.successCodes_.indexOf(g)!==-1;r(!0,new mh(v,c))})},t=(r,o)=>{const c=this.resolve_,d=this.reject_,m=o.connection;if(o.wasSuccessCode)try{const g=this.callback_(m,m.getResponse());YO(g)?c(g):c()}catch(g){d(g)}else if(m!==null){const g=zO();g.serverResponse=m.getErrorText(),this.errorCallback_?d(this.errorCallback_(m,g)):d(g)}else if(o.canceled){const g=this.appDelete_?oS():BO();d(g)}else{const g=qO();d(g)}};this.canceled_?t(!1,new mh(!1,null,!0)):this.backoffId_=KO(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&QO(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class mh{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function JO(i,e){e!==null&&e.length>0&&(i.Authorization="Firebase "+e)}function eM(i,e){i["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function tM(i,e){e&&(i["X-Firebase-GMPID"]=e)}function nM(i,e){e!==null&&(i["X-Firebase-AppCheck"]=e)}function iM(i,e,t,r,o,c,d=!0,m=!1){const g=XO(i.urlParams),v=i.url+g,T=Object.assign({},i.headers);return tM(T,e),JO(T,t),eM(T,c),nM(T,r),new WO(v,i.method,T,i.body,i.successCodes,i.additionalRetryCodes,i.handler,i.errorHandler,i.timeout,i.progressCallback,o,d,m)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sM(i){if(i.length===0)return null;const e=i.lastIndexOf("/");return e===-1?"":i.slice(0,e)}function rM(i){const e=i.lastIndexOf("/",i.length-2);return e===-1?i:i.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zh{constructor(e,t){this._service=e,t instanceof si?this._location=t:this._location=si.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Zh(e,t)}get root(){const e=new si(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return rM(this._location.path)}get storage(){return this._service}get parent(){const e=sM(this._location.path);if(e===null)return null;const t=new si(this._location.bucket,e);return new Zh(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw GO(e)}}function n0(i,e){const t=e?.[jO];return t==null?null:si.makeFromBucketSpec(t,i)}function aM(i,e,t,r={}){i.host=`${e}:${t}`;const o=ha(e);o&&(zp(`https://${i.host}/b`),qp("Storage",!0)),i._isUsingEmulator=!0,i._protocol=o?"https":"http";const{mockUserToken:c}=r;c&&(i._overrideAuthToken=typeof c=="string"?c:L0(c,i.app.options.projectId))}class oM{constructor(e,t,r,o,c,d=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=o,this._firebaseVersion=c,this._isUsingEmulator=d,this._bucket=null,this._host=aS,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=UO,this._maxUploadRetryTime=LO,this._requests=new Set,o!=null?this._bucket=si.makeFromBucketSpec(o,this._host):this._bucket=n0(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=si.makeFromBucketSpec(this._url,e):this._bucket=n0(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){t0("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){t0("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(ni(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Zh(this,e)}_makeRequest(e,t,r,o,c=!0){if(this._deleted)return new $O(oS());{const d=iM(e,this._appId,r,o,t,this._firebaseVersion,c,this._isUsingEmulator);return this._requests.add(d),d.getPromise().then(()=>this._requests.delete(d),()=>this._requests.delete(d)),d}}async makeRequestWithTokens(e,t){const[r,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,o).getPromise()}}const i0="@firebase/storage",s0="0.13.13";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lS="storage";function lM(i=Ac(),e){i=ct(i);const r=fs(i,lS).getImmediate({identifier:e}),o=P0("storage");return o&&cM(r,...o),r}function cM(i,e,t,r={}){aM(i,e,t,r)}function uM(i,{instanceIdentifier:e}){const t=i.getProvider("app").getImmediate(),r=i.getProvider("auth-internal"),o=i.getProvider("app-check-internal");return new oM(t,r,o,e,da)}function hM(){$n(new Dn(lS,uM,"PUBLIC").setMultipleInstances(!0)),nn(i0,s0,""),nn(i0,s0,"esm2017")}hM();const cS="@firebase/installations",Bg="0.6.17";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uS=1e4,hS=`w:${Bg}`,dS="FIS_v2",dM="https://firebaseinstallations.googleapis.com/v1",fM=60*60*1e3,mM="installations",pM="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gM={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},ca=new hr(mM,pM,gM);function fS(i){return i instanceof Kn&&i.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mS({projectId:i}){return`${dM}/projects/${i}/installations`}function pS(i){return{token:i.token,requestStatus:2,expiresIn:vM(i.expiresIn),creationTime:Date.now()}}async function gS(i,e){const r=(await e.json()).error;return ca.create("request-failed",{requestName:i,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function yS({apiKey:i}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":i})}function yM(i,{refreshToken:e}){const t=yS(i);return t.append("Authorization",_M(e)),t}async function vS(i){const e=await i();return e.status>=500&&e.status<600?i():e}function vM(i){return Number(i.replace("s","000"))}function _M(i){return`${dS} ${i}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TM({appConfig:i,heartbeatServiceProvider:e},{fid:t}){const r=mS(i),o=yS(i),c=e.getImmediate({optional:!0});if(c){const v=await c.getHeartbeatsHeader();v&&o.append("x-firebase-client",v)}const d={fid:t,authVersion:dS,appId:i.appId,sdkVersion:hS},m={method:"POST",headers:o,body:JSON.stringify(d)},g=await vS(()=>fetch(r,m));if(g.ok){const v=await g.json();return{fid:v.fid||t,registrationStatus:2,refreshToken:v.refreshToken,authToken:pS(v.authToken)}}else throw await gS("Create Installation",g)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _S(i){return new Promise(e=>{setTimeout(e,i)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EM(i){return btoa(String.fromCharCode(...i)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bM=/^[cdef][\w-]{21}$/,Mp="";function AM(){try{const i=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(i),i[0]=112+i[0]%16;const t=SM(i);return bM.test(t)?t:Mp}catch{return Mp}}function SM(i){return EM(i).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rd(i){return`${i.appName}!${i.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TS=new Map;function ES(i,e){const t=Rd(i);bS(t,e),wM(t,e)}function bS(i,e){const t=TS.get(i);if(t)for(const r of t)r(e)}function wM(i,e){const t=IM();t&&t.postMessage({key:i,fid:e}),NM()}let ta=null;function IM(){return!ta&&"BroadcastChannel"in self&&(ta=new BroadcastChannel("[Firebase] FID Change"),ta.onmessage=i=>{bS(i.data.key,i.data.fid)}),ta}function NM(){TS.size===0&&ta&&(ta.close(),ta=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RM="firebase-installations-database",CM=1,ua="firebase-installations-store";let Wm=null;function Fg(){return Wm||(Wm=H0(RM,CM,{upgrade:(i,e)=>{switch(e){case 0:i.createObjectStore(ua)}}})),Wm}async function Wh(i,e){const t=Rd(i),o=(await Fg()).transaction(ua,"readwrite"),c=o.objectStore(ua),d=await c.get(t);return await c.put(e,t),await o.done,(!d||d.fid!==e.fid)&&ES(i,e.fid),e}async function AS(i){const e=Rd(i),r=(await Fg()).transaction(ua,"readwrite");await r.objectStore(ua).delete(e),await r.done}async function Cd(i,e){const t=Rd(i),o=(await Fg()).transaction(ua,"readwrite"),c=o.objectStore(ua),d=await c.get(t),m=e(d);return m===void 0?await c.delete(t):await c.put(m,t),await o.done,m&&(!d||d.fid!==m.fid)&&ES(i,m.fid),m}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hg(i){let e;const t=await Cd(i.appConfig,r=>{const o=xM(r),c=DM(i,o);return e=c.registrationPromise,c.installationEntry});return t.fid===Mp?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function xM(i){const e=i||{fid:AM(),registrationStatus:0};return SS(e)}function DM(i,e){if(e.registrationStatus===0){if(!navigator.onLine){const o=Promise.reject(ca.create("app-offline"));return{installationEntry:e,registrationPromise:o}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=OM(i,t);return{installationEntry:t,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:MM(i)}:{installationEntry:e}}async function OM(i,e){try{const t=await TM(i,e);return Wh(i.appConfig,t)}catch(t){throw fS(t)&&t.customData.serverCode===409?await AS(i.appConfig):await Wh(i.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function MM(i){let e=await r0(i.appConfig);for(;e.registrationStatus===1;)await _S(100),e=await r0(i.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:r}=await Hg(i);return r||t}return e}function r0(i){return Cd(i,e=>{if(!e)throw ca.create("installation-not-found");return SS(e)})}function SS(i){return kM(i)?{fid:i.fid,registrationStatus:0}:i}function kM(i){return i.registrationStatus===1&&i.registrationTime+uS<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VM({appConfig:i,heartbeatServiceProvider:e},t){const r=PM(i,t),o=yM(i,t),c=e.getImmediate({optional:!0});if(c){const v=await c.getHeartbeatsHeader();v&&o.append("x-firebase-client",v)}const d={installation:{sdkVersion:hS,appId:i.appId}},m={method:"POST",headers:o,body:JSON.stringify(d)},g=await vS(()=>fetch(r,m));if(g.ok){const v=await g.json();return pS(v)}else throw await gS("Generate Auth Token",g)}function PM(i,{fid:e}){return`${mS(i)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gg(i,e=!1){let t;const r=await Cd(i.appConfig,c=>{if(!wS(c))throw ca.create("not-registered");const d=c.authToken;if(!e&&LM(d))return c;if(d.requestStatus===1)return t=jM(i,e),c;{if(!navigator.onLine)throw ca.create("app-offline");const m=qM(c);return t=UM(i,m),m}});return t?await t:r.authToken}async function jM(i,e){let t=await a0(i.appConfig);for(;t.authToken.requestStatus===1;)await _S(100),t=await a0(i.appConfig);const r=t.authToken;return r.requestStatus===0?Gg(i,e):r}function a0(i){return Cd(i,e=>{if(!wS(e))throw ca.create("not-registered");const t=e.authToken;return BM(t)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function UM(i,e){try{const t=await VM(i,e),r=Object.assign(Object.assign({},e),{authToken:t});return await Wh(i.appConfig,r),t}catch(t){if(fS(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await AS(i.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Wh(i.appConfig,r)}throw t}}function wS(i){return i!==void 0&&i.registrationStatus===2}function LM(i){return i.requestStatus===2&&!zM(i)}function zM(i){const e=Date.now();return e<i.creationTime||i.creationTime+i.expiresIn<e+fM}function qM(i){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},i),{authToken:e})}function BM(i){return i.requestStatus===1&&i.requestTime+uS<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FM(i){const e=i,{installationEntry:t,registrationPromise:r}=await Hg(e);return r?r.catch(console.error):Gg(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HM(i,e=!1){const t=i;return await GM(t),(await Gg(t,e)).token}async function GM(i){const{registrationPromise:e}=await Hg(i);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $M(i){if(!i||!i.options)throw Jm("App Configuration");if(!i.name)throw Jm("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!i.options[t])throw Jm(t);return{appName:i.name,projectId:i.options.projectId,apiKey:i.options.apiKey,appId:i.options.appId}}function Jm(i){return ca.create("missing-app-config-values",{valueName:i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IS="installations",KM="installations-internal",QM=i=>{const e=i.getProvider("app").getImmediate(),t=$M(e),r=fs(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},YM=i=>{const e=i.getProvider("app").getImmediate(),t=fs(e,IS).getImmediate();return{getId:()=>FM(t),getToken:o=>HM(t,o)}};function XM(){$n(new Dn(IS,QM,"PUBLIC")),$n(new Dn(KM,YM,"PRIVATE"))}XM();nn(cS,Bg);nn(cS,Bg,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jh="analytics",ZM="firebase_id",WM="origin",JM=60*1e3,e2="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",$g="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yn=new bc("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t2={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},xn=new hr("analytics","Analytics",t2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n2(i){if(!i.startsWith($g)){const e=xn.create("invalid-gtag-resource",{gtagURL:i});return yn.warn(e.message),""}return i}function NS(i){return Promise.all(i.map(e=>e.catch(t=>t)))}function i2(i,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(i,e)),t}function s2(i,e){const t=i2("firebase-js-sdk-policy",{createScriptURL:n2}),r=document.createElement("script"),o=`${$g}?l=${i}&id=${e}`;r.src=t?t?.createScriptURL(o):o,r.async=!0,document.head.appendChild(r)}function r2(i){let e=[];return Array.isArray(window[i])?e=window[i]:window[i]=e,e}async function a2(i,e,t,r,o,c){const d=r[o];try{if(d)await e[d];else{const g=(await NS(t)).find(v=>v.measurementId===o);g&&await e[g.appId]}}catch(m){yn.error(m)}i("config",o,c)}async function o2(i,e,t,r,o){try{let c=[];if(o&&o.send_to){let d=o.send_to;Array.isArray(d)||(d=[d]);const m=await NS(t);for(const g of d){const v=m.find(A=>A.measurementId===g),T=v&&e[v.appId];if(T)c.push(T);else{c=[];break}}}c.length===0&&(c=Object.values(e)),await Promise.all(c),i("event",r,o||{})}catch(c){yn.error(c)}}function l2(i,e,t,r){async function o(c,...d){try{if(c==="event"){const[m,g]=d;await o2(i,e,t,m,g)}else if(c==="config"){const[m,g]=d;await a2(i,e,t,r,m,g)}else if(c==="consent"){const[m,g]=d;i("consent",m,g)}else if(c==="get"){const[m,g,v]=d;i("get",m,g,v)}else if(c==="set"){const[m]=d;i("set",m)}else i(c,...d)}catch(m){yn.error(m)}}return o}function c2(i,e,t,r,o){let c=function(...d){window[r].push(arguments)};return window[o]&&typeof window[o]=="function"&&(c=window[o]),window[o]=l2(c,i,e,t),{gtagCore:c,wrappedGtag:window[o]}}function u2(i){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes($g)&&t.src.includes(i))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h2=30,d2=1e3;class f2{constructor(e={},t=d2){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const RS=new f2;function m2(i){return new Headers({Accept:"application/json","x-goog-api-key":i})}async function p2(i){var e;const{appId:t,apiKey:r}=i,o={method:"GET",headers:m2(r)},c=e2.replace("{app-id}",t),d=await fetch(c,o);if(d.status!==200&&d.status!==304){let m="";try{const g=await d.json();!((e=g.error)===null||e===void 0)&&e.message&&(m=g.error.message)}catch{}throw xn.create("config-fetch-failed",{httpStatus:d.status,responseMessage:m})}return d.json()}async function g2(i,e=RS,t){const{appId:r,apiKey:o,measurementId:c}=i.options;if(!r)throw xn.create("no-app-id");if(!o){if(c)return{measurementId:c,appId:r};throw xn.create("no-api-key")}const d=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},m=new _2;return setTimeout(async()=>{m.abort()},JM),CS({appId:r,apiKey:o,measurementId:c},d,m,e)}async function CS(i,{throttleEndTimeMillis:e,backoffCount:t},r,o=RS){var c;const{appId:d,measurementId:m}=i;try{await y2(r,e)}catch(g){if(m)return yn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${m} provided in the "measurementId" field in the local Firebase config. [${g?.message}]`),{appId:d,measurementId:m};throw g}try{const g=await p2(i);return o.deleteThrottleMetadata(d),g}catch(g){const v=g;if(!v2(v)){if(o.deleteThrottleMetadata(d),m)return yn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${m} provided in the "measurementId" field in the local Firebase config. [${v?.message}]`),{appId:d,measurementId:m};throw g}const T=Number((c=v?.customData)===null||c===void 0?void 0:c.httpStatus)===503?NT(t,o.intervalMillis,h2):NT(t,o.intervalMillis),A={throttleEndTimeMillis:Date.now()+T,backoffCount:t+1};return o.setThrottleMetadata(d,A),yn.debug(`Calling attemptFetch again in ${T} millis`),CS(i,A,r,o)}}function y2(i,e){return new Promise((t,r)=>{const o=Math.max(e-Date.now(),0),c=setTimeout(t,o);i.addEventListener(()=>{clearTimeout(c),r(xn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function v2(i){if(!(i instanceof Kn)||!i.customData)return!1;const e=Number(i.customData.httpStatus);return e===429||e===500||e===503||e===504}class _2{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function T2(i,e,t,r,o){if(o&&o.global){i("event",t,r);return}else{const c=await e,d=Object.assign(Object.assign({},r),{send_to:c});i("event",t,d)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E2(){if(Bp())try{await Fp()}catch(i){return yn.warn(xn.create("indexeddb-unavailable",{errorInfo:i?.toString()}).message),!1}else return yn.warn(xn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function b2(i,e,t,r,o,c,d){var m;const g=g2(i);g.then(k=>{t[k.measurementId]=k.appId,i.options.measurementId&&k.measurementId!==i.options.measurementId&&yn.warn(`The measurement ID in the local Firebase config (${i.options.measurementId}) does not match the measurement ID fetched from the server (${k.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(k=>yn.error(k)),e.push(g);const v=E2().then(k=>{if(k)return r.getId()}),[T,A]=await Promise.all([g,v]);u2(c)||s2(c,T.measurementId),o("js",new Date);const b=(m=d?.config)!==null&&m!==void 0?m:{};return b[WM]="firebase",b.update=!0,A!=null&&(b[ZM]=A),o("config",T.measurementId,b),T.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A2{constructor(e){this.app=e}_delete(){return delete rc[this.app.options.appId],Promise.resolve()}}let rc={},o0=[];const l0={};let ep="dataLayer",S2="gtag",c0,xS,u0=!1;function w2(){const i=[];if(z0()&&i.push("This is a browser extension environment."),q0()||i.push("Cookies are not available."),i.length>0){const e=i.map((r,o)=>`(${o+1}) ${r}`).join(" "),t=xn.create("invalid-analytics-context",{errorInfo:e});yn.warn(t.message)}}function I2(i,e,t){w2();const r=i.options.appId;if(!r)throw xn.create("no-app-id");if(!i.options.apiKey)if(i.options.measurementId)yn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${i.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw xn.create("no-api-key");if(rc[r]!=null)throw xn.create("already-exists",{id:r});if(!u0){r2(ep);const{wrappedGtag:c,gtagCore:d}=c2(rc,o0,l0,ep,S2);xS=c,c0=d,u0=!0}return rc[r]=b2(i,o0,l0,e,c0,ep,t),new A2(i)}function N2(i=Ac()){i=ct(i);const e=fs(i,Jh);return e.isInitialized()?e.getImmediate():R2(i)}function R2(i,e={}){const t=fs(i,Jh);if(t.isInitialized()){const o=t.getImmediate();if(er(e,t.getOptions()))return o;throw xn.create("already-initialized")}return t.initialize({options:e})}function C2(i,e,t,r){i=ct(i),T2(xS,rc[i.app.options.appId],e,t,r).catch(o=>yn.error(o))}const h0="@firebase/analytics",d0="0.10.16";function x2(){$n(new Dn(Jh,(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("installations-internal").getImmediate();return I2(r,o,t)},"PUBLIC")),$n(new Dn("analytics-internal",i,"PRIVATE")),nn(h0,d0),nn(h0,d0,"esm2017");function i(e){try{const t=e.getProvider(Jh).getImmediate();return{logEvent:(r,o,c)=>C2(t,r,o,c)}}catch(t){throw xn.create("interop-component-reg-failed",{reason:t})}}}x2();var kp,f0,xd=function(){var i=self.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0];if(i&&i.responseStart>0&&i.responseStart<performance.now())return i},DS=function(i){if(document.readyState==="loading")return"loading";var e=xd();if(e){if(i<e.domInteractive)return"loading";if(e.domContentLoadedEventStart===0||i<e.domContentLoadedEventStart)return"dom-interactive";if(e.domComplete===0||i<e.domComplete)return"dom-content-loaded"}return"complete"},D2=function(i){var e=i.nodeName;return i.nodeType===1?e.toLowerCase():e.toUpperCase().replace(/^#/,"")},Kg=function(i,e){var t="";try{for(;i&&i.nodeType!==9;){var r=i,o=r.id?"#"+r.id:D2(r)+(r.classList&&r.classList.value&&r.classList.value.trim()&&r.classList.value.trim().length?"."+r.classList.value.trim().replace(/\s+/g,"."):"");if(t.length+o.length>(e||100)-1)return t||o;if(t=t?o+">"+t:o,r.id)break;i=r.parentNode}}catch{}return t},OS=-1,O2=function(){return OS},Pc=function(i){addEventListener("pageshow",function(e){e.persisted&&(OS=e.timeStamp,i(e))},!0)},Qg=function(){var i=xd();return i&&i.activationStart||0},lr=function(i,e){var t=xd(),r="navigate";return O2()>=0?r="back-forward-cache":t&&(document.prerendering||Qg()>0?r="prerender":document.wasDiscarded?r="restore":t.type&&(r=t.type.replace(/_/g,"-"))),{name:i,value:e===void 0?-1:e,rating:"good",delta:0,entries:[],id:"v4-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:r}},jo=function(i,e,t){try{if(PerformanceObserver.supportedEntryTypes.includes(i)){var r=new PerformanceObserver(function(o){Promise.resolve().then(function(){e(o.getEntries())})});return r.observe(Object.assign({type:i,buffered:!0},t||{})),r}}catch{}},cr=function(i,e,t,r){var o,c;return function(d){e.value>=0&&(d||r)&&((c=e.value-(o||0))||o===void 0)&&(o=e.value,e.delta=c,e.rating=function(m,g){return m>g[1]?"poor":m>g[0]?"needs-improvement":"good"}(e.value,t),i(e))}},Yg=function(i){requestAnimationFrame(function(){return requestAnimationFrame(function(){return i()})})},Dd=function(i){document.addEventListener("visibilitychange",function(){document.visibilityState==="hidden"&&i()})},Xg=function(i){var e=!1;return function(){e||(i(),e=!0)}},po=-1,m0=function(){return document.visibilityState!=="hidden"||document.prerendering?1/0:0},ed=function(i){document.visibilityState==="hidden"&&po>-1&&(po=i.type==="visibilitychange"?i.timeStamp:0,M2())},p0=function(){addEventListener("visibilitychange",ed,!0),addEventListener("prerenderingchange",ed,!0)},M2=function(){removeEventListener("visibilitychange",ed,!0),removeEventListener("prerenderingchange",ed,!0)},MS=function(){return po<0&&(po=m0(),p0(),Pc(function(){setTimeout(function(){po=m0(),p0()},0)})),{get firstHiddenTime(){return po}}},Zg=function(i){document.prerendering?addEventListener("prerenderingchange",function(){return i()},!0):i()},g0=[1800,3e3],k2=function(i,e){e=e||{},Zg(function(){var t,r=MS(),o=lr("FCP"),c=jo("paint",function(d){d.forEach(function(m){m.name==="first-contentful-paint"&&(c.disconnect(),m.startTime<r.firstHiddenTime&&(o.value=Math.max(m.startTime-Qg(),0),o.entries.push(m),t(!0)))})});c&&(t=cr(i,o,g0,e.reportAllChanges),Pc(function(d){o=lr("FCP"),t=cr(i,o,g0,e.reportAllChanges),Yg(function(){o.value=performance.now()-d.timeStamp,t(!0)})}))})},y0=[.1,.25],V2=function(i,e){(function(t,r){r=r||{},k2(Xg(function(){var o,c=lr("CLS",0),d=0,m=[],g=function(T){T.forEach(function(A){if(!A.hadRecentInput){var b=m[0],k=m[m.length-1];d&&A.startTime-k.startTime<1e3&&A.startTime-b.startTime<5e3?(d+=A.value,m.push(A)):(d=A.value,m=[A])}}),d>c.value&&(c.value=d,c.entries=m,o())},v=jo("layout-shift",g);v&&(o=cr(t,c,y0,r.reportAllChanges),Dd(function(){g(v.takeRecords()),o(!0)}),Pc(function(){d=0,c=lr("CLS",0),o=cr(t,c,y0,r.reportAllChanges),Yg(function(){return o()})}),setTimeout(o,0))}))})(function(t){var r=function(o){var c,d={};if(o.entries.length){var m=o.entries.reduce(function(v,T){return v&&v.value>T.value?v:T});if(m&&m.sources&&m.sources.length){var g=(c=m.sources).find(function(v){return v.node&&v.node.nodeType===1})||c[0];g&&(d={largestShiftTarget:Kg(g.node),largestShiftTime:m.startTime,largestShiftValue:m.value,largestShiftSource:g,largestShiftEntry:m,loadState:DS(m.startTime)})}}return Object.assign(o,{attribution:d})}(t);i(r)},e)},kS=0,tp=1/0,ph=0,P2=function(i){i.forEach(function(e){e.interactionId&&(tp=Math.min(tp,e.interactionId),ph=Math.max(ph,e.interactionId),kS=ph?(ph-tp)/7+1:0)})},VS=function(){return kp?kS:performance.interactionCount||0},j2=function(){"interactionCount"in performance||kp||(kp=jo("event",P2,{type:"event",buffered:!0,durationThreshold:0}))},ti=[],ac=new Map,PS=0,U2=function(){var i=Math.min(ti.length-1,Math.floor((VS()-PS)/50));return ti[i]},jS=[],L2=function(i){if(jS.forEach(function(o){return o(i)}),i.interactionId||i.entryType==="first-input"){var e=ti[ti.length-1],t=ac.get(i.interactionId);if(t||ti.length<10||i.duration>e.latency){if(t)i.duration>t.latency?(t.entries=[i],t.latency=i.duration):i.duration===t.latency&&i.startTime===t.entries[0].startTime&&t.entries.push(i);else{var r={id:i.interactionId,latency:i.duration,entries:[i]};ac.set(r.id,r),ti.push(r)}ti.sort(function(o,c){return c.latency-o.latency}),ti.length>10&&ti.splice(10).forEach(function(o){return ac.delete(o.id)})}}},Wg=function(i){var e=self.requestIdleCallback||self.setTimeout,t=-1;return i=Xg(i),document.visibilityState==="hidden"?i():(t=e(i),Dd(i)),t},v0=[200,500],z2=function(i,e){"PerformanceEventTiming"in self&&"interactionId"in PerformanceEventTiming.prototype&&(e=e||{},Zg(function(){var t;j2();var r,o=lr("INP"),c=function(m){Wg(function(){m.forEach(L2);var g=U2();g&&g.latency!==o.value&&(o.value=g.latency,o.entries=g.entries,r())})},d=jo("event",c,{durationThreshold:(t=e.durationThreshold)!==null&&t!==void 0?t:40});r=cr(i,o,v0,e.reportAllChanges),d&&(d.observe({type:"first-input",buffered:!0}),Dd(function(){c(d.takeRecords()),r(!0)}),Pc(function(){PS=VS(),ti.length=0,ac.clear(),o=lr("INP"),r=cr(i,o,v0,e.reportAllChanges)}))}))},Eo=[],Qs=[],Vp=0,Jg=new WeakMap,bo=new Map,Pp=-1,q2=function(i){Eo=Eo.concat(i),US()},US=function(){Pp<0&&(Pp=Wg(B2))},B2=function(){bo.size>10&&bo.forEach(function(d,m){ac.has(m)||bo.delete(m)});var i=ti.map(function(d){return Jg.get(d.entries[0])}),e=Qs.length-50;Qs=Qs.filter(function(d,m){return m>=e||i.includes(d)});for(var t=new Set,r=0;r<Qs.length;r++){var o=Qs[r];LS(o.startTime,o.processingEnd).forEach(function(d){t.add(d)})}var c=Eo.length-1-50;Eo=Eo.filter(function(d,m){return d.startTime>Vp&&m>c||t.has(d)}),Pp=-1};jS.push(function(i){i.interactionId&&i.target&&!bo.has(i.interactionId)&&bo.set(i.interactionId,i.target)},function(i){var e,t=i.startTime+i.duration;Vp=Math.max(Vp,i.processingEnd);for(var r=Qs.length-1;r>=0;r--){var o=Qs[r];if(Math.abs(t-o.renderTime)<=8){(e=o).startTime=Math.min(i.startTime,e.startTime),e.processingStart=Math.min(i.processingStart,e.processingStart),e.processingEnd=Math.max(i.processingEnd,e.processingEnd),e.entries.push(i);break}}e||(e={startTime:i.startTime,processingStart:i.processingStart,processingEnd:i.processingEnd,renderTime:t,entries:[i]},Qs.push(e)),(i.interactionId||i.entryType==="first-input")&&Jg.set(i,e),US()});var LS=function(i,e){for(var t,r=[],o=0;t=Eo[o];o++)if(!(t.startTime+t.duration<i)){if(t.startTime>e)break;r.push(t)}return r},F2=function(i,e){f0||(f0=jo("long-animation-frame",q2)),z2(function(t){var r=function(o){var c=o.entries[0],d=Jg.get(c),m=c.processingStart,g=d.processingEnd,v=d.entries.sort(function(j,K){return j.processingStart-K.processingStart}),T=LS(c.startTime,g),A=o.entries.find(function(j){return j.target}),b=A&&A.target||bo.get(c.interactionId),k=[c.startTime+c.duration,g].concat(T.map(function(j){return j.startTime+j.duration})),O=Math.max.apply(Math,k),z={interactionTarget:Kg(b),interactionTargetElement:b,interactionType:c.name.startsWith("key")?"keyboard":"pointer",interactionTime:c.startTime,nextPaintTime:O,processedEventEntries:v,longAnimationFrameEntries:T,inputDelay:m-c.startTime,processingDuration:g-m,presentationDelay:Math.max(O-g,0),loadState:DS(c.startTime)};return Object.assign(o,{attribution:z})}(t);i(r)},e)},_0=[2500,4e3],np={},H2=function(i,e){(function(t,r){r=r||{},Zg(function(){var o,c=MS(),d=lr("LCP"),m=function(T){r.reportAllChanges||(T=T.slice(-1)),T.forEach(function(A){A.startTime<c.firstHiddenTime&&(d.value=Math.max(A.startTime-Qg(),0),d.entries=[A],o())})},g=jo("largest-contentful-paint",m);if(g){o=cr(t,d,_0,r.reportAllChanges);var v=Xg(function(){np[d.id]||(m(g.takeRecords()),g.disconnect(),np[d.id]=!0,o(!0))});["keydown","click"].forEach(function(T){addEventListener(T,function(){return Wg(v)},{once:!0,capture:!0})}),Dd(v),Pc(function(T){d=lr("LCP"),o=cr(t,d,_0,r.reportAllChanges),Yg(function(){d.value=performance.now()-T.timeStamp,np[d.id]=!0,o(!0)})})}})})(function(t){var r=function(o){var c={timeToFirstByte:0,resourceLoadDelay:0,resourceLoadDuration:0,elementRenderDelay:o.value};if(o.entries.length){var d=xd();if(d){var m=d.activationStart||0,g=o.entries[o.entries.length-1],v=g.url&&performance.getEntriesByType("resource").filter(function(O){return O.name===g.url})[0],T=Math.max(0,d.responseStart-m),A=Math.max(T,v?(v.requestStart||v.startTime)-m:0),b=Math.max(A,v?v.responseEnd-m:0),k=Math.max(b,g.startTime-m);c={element:Kg(g.element),timeToFirstByte:T,resourceLoadDelay:A-T,resourceLoadDuration:b-A,elementRenderDelay:k-b,navigationEntry:d,lcpEntry:g},g.url&&(c.url=g.url),v&&(c.lcpResourceEntry=v)}}return Object.assign(o,{attribution:c})}(t);i(r)},e)};const T0="@firebase/performance",jp="0.7.6";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zS=jp,G2="FB-PERF-TRACE-START",$2="FB-PERF-TRACE-STOP",Up="FB-PERF-TRACE-MEASURE",qS="_wt_",BS="_fp",FS="_fcp",HS="_fid",GS="_lcp",K2="lcp_element",$S="_inp",Q2="inp_interactionTarget",KS="_cls",Y2="cls_largestShiftTarget",QS="@firebase/performance/config",YS="@firebase/performance/configexpire",X2="performance",XS="Performance";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z2={"trace started":"Trace {$traceName} was started before.","trace stopped":"Trace {$traceName} is not running.","nonpositive trace startTime":"Trace {$traceName} startTime should be positive.","nonpositive trace duration":"Trace {$traceName} duration should be positive.","no window":"Window is not available.","no app id":"App id is not available.","no project id":"Project id is not available.","no api key":"Api key is not available.","invalid cc log":"Attempted to queue invalid cc event","FB not default":"Performance can only start when Firebase app instance is the default one.","RC response not ok":"RC response is not ok","invalid attribute name":"Attribute name {$attributeName} is invalid.","invalid attribute value":"Attribute value {$attributeValue} is invalid.","invalid custom metric name":"Custom metric name {$customMetricName} is invalid","invalid String merger input":"Input for String merger is invalid, contact support team to resolve.","already initialized":"initializePerformance() has already been called with different options. To avoid this error, call initializePerformance() with the same options as when it was originally called, or call getPerformance() to return the already initialized instance."},tn=new hr(X2,XS,Z2);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ur=new bc(XS);ur.logLevel=Ve.INFO;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ip,ZS;class Dt{constructor(e){if(this.window=e,!e)throw tn.create("no window");this.performance=e.performance,this.PerformanceObserver=e.PerformanceObserver,this.windowLocation=e.location,this.navigator=e.navigator,this.document=e.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=e.localStorage),e.perfMetrics&&e.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=e.perfMetrics.onFirstInputDelay),this.onLCP=H2,this.onINP=F2,this.onCLS=V2}getUrl(){return this.windowLocation.href.split("?")[0]}mark(e){!this.performance||!this.performance.mark||this.performance.mark(e)}measure(e,t,r){!this.performance||!this.performance.measure||this.performance.measure(e,t,r)}getEntriesByType(e){return!this.performance||!this.performance.getEntriesByType?[]:this.performance.getEntriesByType(e)}getEntriesByName(e){return!this.performance||!this.performance.getEntriesByName?[]:this.performance.getEntriesByName(e)}getTimeOrigin(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)}requiredApisAvailable(){return!fetch||!Promise||!q0()?(ur.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1):Bp()?!0:(ur.info("IndexedDB is not supported by current browser"),!1)}setupObserver(e,t){if(!this.PerformanceObserver)return;new this.PerformanceObserver(o=>{for(const c of o.getEntries())t(c)}).observe({entryTypes:[e]})}static getInstance(){return ip===void 0&&(ip=new Dt(ZS)),ip}}function W2(i){ZS=i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let WS;function J2(i){const e=i.getId();return e.then(t=>{WS=t}),e}function ey(){return WS}function ek(i){const e=i.getToken();return e.then(t=>{}),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E0(i,e){const t=i.length-e.length;if(t<0||t>1)throw tn.create("invalid String merger input");const r=[];for(let o=0;o<i.length;o++)r.push(i.charAt(o)),e.length>o&&r.push(e.charAt(o));return r.join("")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sp;class Rn{constructor(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=E0("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=E0("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}getFlTransportFullUrl(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)}static getInstance(){return sp===void 0&&(sp=new Rn),sp}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var oc;(function(i){i[i.UNKNOWN=0]="UNKNOWN",i[i.VISIBLE=1]="VISIBLE",i[i.HIDDEN=2]="HIDDEN"})(oc||(oc={}));const tk=["firebase_","google_","ga_"],nk=new RegExp("^[a-zA-Z]\\w*$"),ik=40,sk=100;function rk(){const i=Dt.getInstance().navigator;return i?.serviceWorker?i.serviceWorker.controller?2:3:1}function ak(){switch(Dt.getInstance().document.visibilityState){case"visible":return oc.VISIBLE;case"hidden":return oc.HIDDEN;default:return oc.UNKNOWN}}function ok(){const e=Dt.getInstance().navigator.connection;switch(e&&e.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}function lk(i){return i.length===0||i.length>ik?!1:!tk.some(t=>i.startsWith(t))&&!!i.match(nk)}function ck(i){return i.length!==0&&i.length<=sk}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JS(i){var e;const t=(e=i.options)===null||e===void 0?void 0:e.appId;if(!t)throw tn.create("no app id");return t}function uk(i){var e;const t=(e=i.options)===null||e===void 0?void 0:e.projectId;if(!t)throw tn.create("no project id");return t}function hk(i){var e;const t=(e=i.options)===null||e===void 0?void 0:e.apiKey;if(!t)throw tn.create("no api key");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dk="0.0.1",ei={loggingEnabled:!0},fk="FIREBASE_INSTALLATIONS_AUTH";function mk(i,e){const t=pk();return t?(b0(t),Promise.resolve()):vk(i,e).then(b0).then(r=>gk(r),()=>{})}function pk(){const i=Dt.getInstance().localStorage;if(!i)return;const e=i.getItem(YS);if(!e||!_k(e))return;const t=i.getItem(QS);if(t)try{return JSON.parse(t)}catch{return}}function gk(i){const e=Dt.getInstance().localStorage;!i||!e||(e.setItem(QS,JSON.stringify(i)),e.setItem(YS,String(Date.now()+Rn.getInstance().configTimeToLive*60*60*1e3)))}const yk="Could not fetch config, will use default configs";function vk(i,e){return ek(i.installations).then(t=>{const r=uk(i.app),o=hk(i.app),c=`https://firebaseremoteconfig.googleapis.com/v1/projects/${r}/namespaces/fireperf:fetch?key=${o}`,d=new Request(c,{method:"POST",headers:{Authorization:`${fk} ${t}`},body:JSON.stringify({app_instance_id:e,app_instance_id_token:t,app_id:JS(i.app),app_version:zS,sdk_version:dk})});return fetch(d).then(m=>{if(m.ok)return m.json();throw tn.create("RC response not ok")})}).catch(()=>{ur.info(yk)})}function b0(i){if(!i)return i;const e=Rn.getInstance(),t=i.entries||{};return t.fpr_enabled!==void 0?e.loggingEnabled=String(t.fpr_enabled)==="true":e.loggingEnabled=ei.loggingEnabled,t.fpr_log_source?e.logSource=Number(t.fpr_log_source):ei.logSource&&(e.logSource=ei.logSource),t.fpr_log_endpoint_url?e.logEndPointUrl=t.fpr_log_endpoint_url:ei.logEndPointUrl&&(e.logEndPointUrl=ei.logEndPointUrl),t.fpr_log_transport_key?e.transportKey=t.fpr_log_transport_key:ei.transportKey&&(e.transportKey=ei.transportKey),t.fpr_vc_network_request_sampling_rate!==void 0?e.networkRequestsSamplingRate=Number(t.fpr_vc_network_request_sampling_rate):ei.networkRequestsSamplingRate!==void 0&&(e.networkRequestsSamplingRate=ei.networkRequestsSamplingRate),t.fpr_vc_trace_sampling_rate!==void 0?e.tracesSamplingRate=Number(t.fpr_vc_trace_sampling_rate):ei.tracesSamplingRate!==void 0&&(e.tracesSamplingRate=ei.tracesSamplingRate),e.logTraceAfterSampling=A0(e.tracesSamplingRate),e.logNetworkAfterSampling=A0(e.networkRequestsSamplingRate),i}function _k(i){return Number(i)>Date.now()}function A0(i){return Math.random()<=i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ty=1,rp;function ew(i){return ty=2,rp=rp||Ek(i),rp}function Tk(){return ty===3}function Ek(i){return bk().then(()=>J2(i.installations)).then(e=>mk(i,e)).then(()=>S0(),()=>S0())}function bk(){const i=Dt.getInstance().document;return new Promise(e=>{if(i&&i.readyState!=="complete"){const t=()=>{i.readyState==="complete"&&(i.removeEventListener("readystatechange",t),e())};i.addEventListener("readystatechange",t)}else e()})}function S0(){ty=3}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tw=10*1e3,Ak=5.5*1e3,Sk=1e3,nw=3;let Nh=nw,sa=[],w0=!1;function wk(){w0||(ny(Ak),w0=!0)}function ny(i){setTimeout(()=>{Nh<=0||(sa.length>0&&iw(),ny(tw))},i)}function iw(){const i=sa.splice(0,Sk),e=i.map(r=>({source_extension_json_proto3:r.message,event_time_ms:String(r.eventTime)})),t={request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:Rn.getInstance().logSource,log_event:e};Ik(t).then(()=>{Nh=nw}).catch(()=>{sa=[...i,...sa],Nh--,ur.info(`Tries left: ${Nh}.`),ny(tw)})}function Ik(i){const e=Rn.getInstance().getFlTransportFullUrl(),t=JSON.stringify(i);return navigator.sendBeacon&&navigator.sendBeacon(e,t)?Promise.resolve():fetch(e,{method:"POST",body:t,keepalive:!0}).then()}function Nk(i){if(!i.eventTime||!i.message)throw tn.create("invalid cc log");sa=[...sa,i]}function Rk(i){return(...e)=>{const t=i(...e);Nk({message:t,eventTime:Date.now()})}}function Ck(){for(;sa.length>0;)iw()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lc;function sw(i,e){lc||(lc={send:Rk(Ok),flush:Ck}),lc.send(i,e)}function gh(i){const e=Rn.getInstance();!e.instrumentationEnabled&&i.isAuto||!e.dataCollectionEnabled&&!i.isAuto||Dt.getInstance().requiredApisAvailable()&&(Tk()?ap(i):ew(i.performanceController).then(()=>ap(i),()=>ap(i)))}function xk(){lc&&lc.flush()}function ap(i){if(!ey())return;const e=Rn.getInstance();!e.loggingEnabled||!e.logTraceAfterSampling||sw(i,1)}function Dk(i){const e=Rn.getInstance();if(!e.instrumentationEnabled)return;const t=i.url,r=e.logEndPointUrl.split("?")[0],o=e.flTransportEndpointUrl.split("?")[0];t===r||t===o||!e.loggingEnabled||!e.logNetworkAfterSampling||sw(i,0)}function Ok(i,e){return e===0?Mk(i):kk(i)}function Mk(i){const e={url:i.url,http_method:i.httpMethod||0,http_response_code:200,response_payload_bytes:i.responsePayloadBytes,client_start_time_us:i.startTimeUs,time_to_response_initiated_us:i.timeToResponseInitiatedUs,time_to_response_completed_us:i.timeToResponseCompletedUs},t={application_info:rw(i.performanceController.app),network_request_metric:e};return JSON.stringify(t)}function kk(i){const e={name:i.name,is_auto:i.isAuto,client_start_time_us:i.startTimeUs,duration_us:i.durationUs};Object.keys(i.counters).length!==0&&(e.counters=i.counters);const t=i.getAttributes();Object.keys(t).length!==0&&(e.custom_attributes=t);const r={application_info:rw(i.performanceController.app),trace_metric:e};return JSON.stringify(r)}function rw(i){return{google_app_id:JS(i),app_instance_id:ey(),web_app_info:{sdk_version:zS,page_url:Dt.getInstance().getUrl(),service_worker_status:rk(),visibility_state:ak(),effective_connection_type:ok()},application_process_state:0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I0(i,e){const t=e;if(!t||t.responseStart===void 0)return;const r=Dt.getInstance().getTimeOrigin(),o=Math.floor((t.startTime+r)*1e3),c=t.responseStart?Math.floor((t.responseStart-t.startTime)*1e3):void 0,d=Math.floor((t.responseEnd-t.startTime)*1e3),m=t.name&&t.name.split("?")[0],g={performanceController:i,url:m,responsePayloadBytes:t.transferSize,startTimeUs:o,timeToResponseInitiatedUs:c,timeToResponseCompletedUs:d};Dk(g)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vk=100,Pk="_",jk=[BS,FS,HS,GS,KS,$S];function Uk(i,e){return i.length===0||i.length>Vk?!1:e&&e.startsWith(qS)&&jk.indexOf(i)>-1||!i.startsWith(Pk)}function Lk(i){const e=Math.floor(i);return e<i&&ur.info(`Metric value should be an Integer, setting the value as : ${e}.`),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc{constructor(e,t,r=!1,o){this.performanceController=e,this.name=t,this.isAuto=r,this.state=1,this.customAttributes={},this.counters={},this.api=Dt.getInstance(),this.randomId=Math.floor(Math.random()*1e6),this.isAuto||(this.traceStartMark=`${G2}-${this.randomId}-${this.name}`,this.traceStopMark=`${$2}-${this.randomId}-${this.name}`,this.traceMeasure=o||`${Up}-${this.randomId}-${this.name}`,o&&this.calculateTraceMetrics())}start(){if(this.state!==1)throw tn.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2}stop(){if(this.state!==2)throw tn.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),gh(this)}record(e,t,r){if(e<=0)throw tn.create("nonpositive trace startTime",{traceName:this.name});if(t<=0)throw tn.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(t*1e3),this.startTimeUs=Math.floor(e*1e3),r&&r.attributes&&(this.customAttributes=Object.assign({},r.attributes)),r&&r.metrics)for(const o of Object.keys(r.metrics))isNaN(Number(r.metrics[o]))||(this.counters[o]=Math.floor(Number(r.metrics[o])));gh(this)}incrementMetric(e,t=1){this.counters[e]===void 0?this.putMetric(e,t):this.putMetric(e,this.counters[e]+t)}putMetric(e,t){if(Uk(e,this.name))this.counters[e]=Lk(t??0);else throw tn.create("invalid custom metric name",{customMetricName:e})}getMetric(e){return this.counters[e]||0}putAttribute(e,t){const r=lk(e),o=ck(t);if(r&&o){this.customAttributes[e]=t;return}if(!r)throw tn.create("invalid attribute name",{attributeName:e});if(!o)throw tn.create("invalid attribute value",{attributeValue:t})}getAttribute(e){return this.customAttributes[e]}removeAttribute(e){this.customAttributes[e]!==void 0&&delete this.customAttributes[e]}getAttributes(){return Object.assign({},this.customAttributes)}setStartTime(e){this.startTimeUs=e}setDuration(e){this.durationUs=e}calculateTraceMetrics(){const e=this.api.getEntriesByName(this.traceMeasure),t=e&&e[0];t&&(this.durationUs=Math.floor(t.duration*1e3),this.startTimeUs=Math.floor((t.startTime+this.api.getTimeOrigin())*1e3))}static createOobTrace(e,t,r,o,c){const d=Dt.getInstance().getUrl();if(!d)return;const m=new Tc(e,qS+d,!0),g=Math.floor(Dt.getInstance().getTimeOrigin()*1e3);m.setStartTime(g),t&&t[0]&&(m.setDuration(Math.floor(t[0].duration*1e3)),m.putMetric("domInteractive",Math.floor(t[0].domInteractive*1e3)),m.putMetric("domContentLoadedEventEnd",Math.floor(t[0].domContentLoadedEventEnd*1e3)),m.putMetric("loadEventEnd",Math.floor(t[0].loadEventEnd*1e3)));const v="first-paint",T="first-contentful-paint";if(r){const A=r.find(k=>k.name===v);A&&A.startTime&&m.putMetric(BS,Math.floor(A.startTime*1e3));const b=r.find(k=>k.name===T);b&&b.startTime&&m.putMetric(FS,Math.floor(b.startTime*1e3)),c&&m.putMetric(HS,Math.floor(c*1e3))}this.addWebVitalMetric(m,GS,K2,o.lcp),this.addWebVitalMetric(m,KS,Y2,o.cls),this.addWebVitalMetric(m,$S,Q2,o.inp),gh(m),xk()}static addWebVitalMetric(e,t,r,o){o&&(e.putMetric(t,Math.floor(o.value*1e3)),o.elementAttribution&&e.putAttribute(r,o.elementAttribution))}static createUserTimingTrace(e,t){const r=new Tc(e,t,!1,t);gh(r)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rh={},N0=!1,aw;function R0(i){ey()&&(setTimeout(()=>qk(i),0),setTimeout(()=>zk(i),0),setTimeout(()=>Bk(i),0))}function zk(i){const e=Dt.getInstance(),t=e.getEntriesByType("resource");for(const r of t)I0(i,r);e.setupObserver("resource",r=>I0(i,r))}function qk(i){const e=Dt.getInstance();"onpagehide"in window?e.document.addEventListener("pagehide",()=>op(i)):e.document.addEventListener("unload",()=>op(i)),e.document.addEventListener("visibilitychange",()=>{e.document.visibilityState==="hidden"&&op(i)}),e.onFirstInputDelay&&e.onFirstInputDelay(t=>{aw=t}),e.onLCP(t=>{var r;Rh.lcp={value:t.value,elementAttribution:(r=t.attribution)===null||r===void 0?void 0:r.element}}),e.onCLS(t=>{var r;Rh.cls={value:t.value,elementAttribution:(r=t.attribution)===null||r===void 0?void 0:r.largestShiftTarget}}),e.onINP(t=>{var r;Rh.inp={value:t.value,elementAttribution:(r=t.attribution)===null||r===void 0?void 0:r.interactionTarget}})}function Bk(i){const e=Dt.getInstance(),t=e.getEntriesByType("measure");for(const r of t)C0(i,r);e.setupObserver("measure",r=>C0(i,r))}function C0(i,e){const t=e.name;t.substring(0,Up.length)!==Up&&Tc.createUserTimingTrace(i,t)}function op(i){if(!N0){N0=!0;const e=Dt.getInstance(),t=e.getEntriesByType("navigation"),r=e.getEntriesByType("paint");setTimeout(()=>{Tc.createOobTrace(i,t,r,Rh,aw)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fk{constructor(e,t){this.app=e,this.installations=t,this.initialized=!1}_init(e){this.initialized||(e?.dataCollectionEnabled!==void 0&&(this.dataCollectionEnabled=e.dataCollectionEnabled),e?.instrumentationEnabled!==void 0&&(this.instrumentationEnabled=e.instrumentationEnabled),Dt.getInstance().requiredApisAvailable()?Fp().then(t=>{t&&(wk(),ew(this).then(()=>R0(this),()=>R0(this)),this.initialized=!0)}).catch(t=>{ur.info(`Environment doesn't support IndexedDB: ${t}`)}):ur.info('Firebase Performance cannot start if the browser does not support "Fetch" and "Promise", or cookies are disabled.'))}set instrumentationEnabled(e){Rn.getInstance().instrumentationEnabled=e}get instrumentationEnabled(){return Rn.getInstance().instrumentationEnabled}set dataCollectionEnabled(e){Rn.getInstance().dataCollectionEnabled=e}get dataCollectionEnabled(){return Rn.getInstance().dataCollectionEnabled}}const Hk="[DEFAULT]";function Gk(i=Ac()){return i=ct(i),fs(i,"performance").getImmediate()}const $k=(i,{options:e})=>{const t=i.getProvider("app").getImmediate(),r=i.getProvider("installations-internal").getImmediate();if(t.name!==Hk)throw tn.create("FB not default");if(typeof window>"u")throw tn.create("no window");W2(window);const o=new Fk(t,r);return o._init(e),o};function Kk(){$n(new Dn("performance",$k,"PUBLIC")),nn(T0,jp),nn(T0,jp,"esm2017")}Kk();const Qk={apiKey:"AIzaSyCbU834quCY8hjSffRwljJLgZrcxK8i2F4",authDomain:"liquidacionapp-62962.firebaseapp.com",projectId:"liquidacionapp-62962",storageBucket:"liquidacionapp-62962.firebasestorage.app",messagingSenderId:"851382130132",appId:"1:851382130132:web:eaba38fab449f14fb5b241"},jc=G0(Qk);typeof window<"u"&&N2(jc);typeof window<"u"&&Gk(jc);const Yk=TC(jc),dn=TO(jc);lM(jc);const cc={ADMIN:"admin",CONTADOR:"contador",CLIENTE:"cliente"},ot={MANAGE_INVENTORY:"canManageInventory",CREATE_MOVEMENTS:"canCreateMovements",VIEW_ALL_MOVEMENTS:"canViewAllMovements",MANAGE_VEHICLES:"canManageVehicles",MANAGE_SUPPLIERS:"canManageSuppliers",VIEW_REPORTS:"canViewReports",EXPORT_REPORTS:"canExportReports",MODIFY_SETTINGS:"canModifySettings"},Xk="contacto.evert@gmail.com",Zk=i=>{switch(i){case cc.ADMIN:return{[ot.MANAGE_INVENTORY]:!0,[ot.CREATE_MOVEMENTS]:!0,[ot.VIEW_ALL_MOVEMENTS]:!0,[ot.MANAGE_VEHICLES]:!0,[ot.MANAGE_SUPPLIERS]:!0,[ot.VIEW_REPORTS]:!0,[ot.EXPORT_REPORTS]:!0,[ot.MODIFY_SETTINGS]:!0};case cc.CONTADOR:return{[ot.MANAGE_INVENTORY]:!0,[ot.CREATE_MOVEMENTS]:!0,[ot.VIEW_ALL_MOVEMENTS]:!0,[ot.MANAGE_VEHICLES]:!1,[ot.MANAGE_SUPPLIERS]:!1,[ot.VIEW_REPORTS]:!0,[ot.EXPORT_REPORTS]:!0,[ot.MODIFY_SETTINGS]:!1};case cc.CLIENTE:default:return{[ot.MANAGE_INVENTORY]:!1,[ot.CREATE_MOVEMENTS]:!0,[ot.VIEW_ALL_MOVEMENTS]:!1,[ot.MANAGE_VEHICLES]:!1,[ot.MANAGE_SUPPLIERS]:!1,[ot.VIEW_REPORTS]:!1,[ot.EXPORT_REPORTS]:!1,[ot.MODIFY_SETTINGS]:!1}}},Wk=i=>i===Xk?cc.ADMIN:cc.CLIENTE,Jk=async(i,e={})=>{const t=pr(dn,"artifacts/1:851382130132:web:eaba38fab449f14fb5b241/users",i.uid);try{const r=await Sd(t);if(r.exists())return{success:!0,userData:r.data(),isNewUser:!1};{const o=Wk(i.email),c={uid:i.uid,email:i.email,displayName:i.displayName||"",photoURL:i.photoURL||"",role:o,emailVerified:i.emailVerified,combustiblesPermissions:Zk(o),createdAt:new Date().toISOString(),lastLogin:new Date().toISOString(),...e};return await xO(t,c),{success:!0,userData:c,isNewUser:!0}}}catch(r){return console.error("Error creating/updating user profile:",r),{success:!1,error:r.message}}},eV=async i=>{try{const e=pr(dn,"artifacts/1:851382130132:web:eaba38fab449f14fb5b241/users",i),t=await Sd(e);return t.exists()?{success:!0,userData:t.data()}:{success:!1,error:"Usuario no encontrado"}}catch(e){return console.error("Error fetching user profile:",e),{success:!1,error:e.message}}},iy=ge.createContext(),Od=()=>{const i=ge.useContext(iy);if(i===void 0)throw new Error("useCombustibles must be used within a CombustiblesProvider");return i},tV=({children:i})=>{const[e,t]=ge.useState(null),[r,o]=ge.useState(null),[c,d]=ge.useState(!0),[m,g]=ge.useState(null),[v,T]=ge.useState([]),[A,b]=ge.useState([]),[k,O]=ge.useState([]),[z,j]=ge.useState([]);ge.useEffect(()=>{const N=cR(Yk,async x=>{try{if(d(!0),x){t(x);let P=await eV(x.uid);P.success||(P=await Jk(x,{provider:"existing_account",appContext:"combustibles"})),P.success?o(P.userData):g("Error cargando perfil de usuario")}else t(null),o(null),T([]),b([]),O([]),j([])}catch(P){console.error("Error en autenticación:",P),g("Error de autenticación")}finally{d(!1)}});return()=>N()},[]);const I={user:e,userProfile:r,loading:c,error:m,hasPermission:N=>r?.combustiblesPermissions?.[N]||!1,isAdmin:()=>r?.role==="admin",isCounterOrAbove:()=>r?.role==="admin"||r?.role==="contador",inventory:v,movements:A,vehicles:k,suppliers:z,setInventory:T,setMovements:b,setVehicles:O,setSuppliers:j,refreshInventory:async()=>{console.log("Refrescando inventario...")},refreshMovements:async()=>{console.log("Refrescando movimientos...")},refreshVehicles:async()=>{console.log("Refrescando vehículos...")},refreshSuppliers:async()=>{console.log("Refrescando proveedores...")}};return p.jsx(iy.Provider,{value:I,children:i})},nV=({children:i,currentView:e,onViewChange:t})=>{const{userProfile:r,isAdmin:o,isCounterOrAbove:c}=Od(),[d,m]=ge.useState(!1),g=[{id:"dashboard",name:"Dashboard",icon:"📊",description:"Vista general",requiredPermission:null},{id:"inventory",name:"Inventario",icon:"🛢️",description:"Gestión de stock",requiredPermission:"canManageInventory"},{id:"movements",name:"Movimientos",icon:"📈",description:"Entradas y salidas",requiredPermission:"canCreateMovements"},{id:"vehicles",name:"Vehículos",icon:"🚜",description:"Maquinaria forestal",requiredPermission:null},{id:"suppliers",name:"Proveedores",icon:"🏪",description:"Gestión de proveedores",requiredPermission:"canManageSuppliers"},{id:"reports",name:"Reportes",icon:"📋",description:"Análisis y reportes",requiredPermission:"canViewReports"}],v=b=>{t(b),m(!1)},T=b=>b?r?.combustiblesPermissions?.[b]||!1:!0,A=g.filter(b=>T(b.requiredPermission));return p.jsxs("div",{className:"dashboard-layout",children:[p.jsx("header",{className:"dashboard-header",children:p.jsxs("div",{className:"header-content",children:[p.jsx("button",{className:"sidebar-toggle",onClick:()=>m(!d),children:"☰"}),p.jsxs("div",{className:"header-title",children:[p.jsx("h1",{children:"⛽ Gestión de Combustibles"}),p.jsx("span",{className:"subtitle",children:"Forestech Colombia"})]}),p.jsxs("div",{className:"header-user",children:[p.jsxs("div",{className:"user-info",children:[p.jsx("span",{className:"user-name",children:r?.displayName||r?.email}),p.jsx("span",{className:"user-role",children:r?.role})]}),p.jsx("div",{className:"user-avatar",children:r?.photoURL?p.jsx("img",{src:r.photoURL,alt:"Avatar"}):p.jsx("div",{className:"avatar-placeholder",children:(r?.displayName||r?.email||"U").charAt(0).toUpperCase()})})]})]})}),p.jsxs("div",{className:"dashboard-body",children:[p.jsxs("aside",{className:`dashboard-sidebar ${d?"open":""}`,children:[p.jsx("nav",{className:"sidebar-nav",children:A.map(b=>p.jsxs("button",{className:`nav-item ${e===b.id?"active":""}`,onClick:()=>v(b.id),children:[p.jsx("span",{className:"nav-icon",children:b.icon}),p.jsxs("div",{className:"nav-content",children:[p.jsx("span",{className:"nav-name",children:b.name}),p.jsx("span",{className:"nav-description",children:b.description})]})]},b.id))}),p.jsx("div",{className:"sidebar-footer",children:p.jsxs("div",{className:"user-permissions",children:[p.jsx("h4",{children:"Permisos Activos:"}),p.jsxs("div",{className:"permission-list",children:[o()&&p.jsx("span",{className:"permission admin",children:"👑 Administrador"}),c()&&p.jsx("span",{className:"permission counter",children:"📊 Gestión Operativa"}),T("canManageInventory")&&p.jsx("span",{className:"permission",children:"🛢️ Inventario"}),T("canManageVehicles")&&p.jsx("span",{className:"permission",children:"🚜 Vehículos"})]})]})})]}),p.jsx("main",{className:"dashboard-main",children:p.jsx("div",{className:"main-content",children:i})})]}),d&&p.jsx("div",{className:"sidebar-overlay",onClick:()=>m(!1)})]})},ho={DIESEL:"diesel",GASOLINE:"gasoline",ACPM:"acpm",LUBRICANTS:"lubricants",TWO_STROKE:"two_stroke"},os={[ho.DIESEL]:{name:"Diésel",description:"Combustible para maquinaria pesada",unit:"galones",category:"Combustible",color:"#fbbf24",icon:"🚛",density:.85,priceUnit:"COP/galón"},[ho.GASOLINE]:{name:"Gasolina",description:"Combustible para vehículos livianos",unit:"galones",category:"Combustible",color:"#ef4444",icon:"⛽",density:.75,priceUnit:"COP/galón"},[ho.ACPM]:{name:"ACPM",description:"Aceite Combustible Para Motor",unit:"galones",category:"Combustible",color:"#8b5cf6",icon:"🚜",density:.85,priceUnit:"COP/galón"},[ho.LUBRICANTS]:{name:"Lubricantes",description:"Aceites y lubricantes para mantenimiento",unit:"litros",category:"Mantenimiento",color:"#06b6d4",icon:"🛢️",density:.9,priceUnit:"COP/litro"},[ho.TWO_STROKE]:{name:"Mezcla 2T",description:"Mezcla para motores de 2 tiempos (motosierras)",unit:"litros",category:"Especializado",color:"#10b981",icon:"🪚",density:.78,priceUnit:"COP/litro"}},cn={CRITICAL:"critical",LOW:"low",MEDIUM:"medium",HIGH:"high",FULL:"full"},na={[cn.CRITICAL]:{label:"Crítico",color:"#dc2626",icon:"🚨",threshold:.1},[cn.LOW]:{label:"Bajo",color:"#ea580c",icon:"⚠️",threshold:.25},[cn.MEDIUM]:{label:"Medio",color:"#ca8a04",icon:"📊",threshold:.5},[cn.HIGH]:{label:"Alto",color:"#16a34a",icon:"✅",threshold:.75},[cn.FULL]:{label:"Completo",color:"#059669",icon:"🟢",threshold:1}},td=(i,e)=>{if(e===0)return cn.CRITICAL;const t=i/e;return t<na[cn.CRITICAL].threshold?cn.CRITICAL:t<na[cn.LOW].threshold?cn.LOW:t<na[cn.MEDIUM].threshold?cn.MEDIUM:t<na[cn.HIGH].threshold?cn.HIGH:cn.FULL},x0=()=>{const{userProfile:i}=Od(),e=[{fuelType:"diesel",currentStock:1250,maxCapacity:2e3,location:"Tanque Principal",lastUpdated:new Date(Date.now()-2*60*60*1e3)},{fuelType:"gasoline",currentStock:180,maxCapacity:500,location:"Tanque Auxiliar",lastUpdated:new Date(Date.now()-4*60*60*1e3)},{fuelType:"acpm",currentStock:95,maxCapacity:1200,location:"Depósito Central",lastUpdated:new Date(Date.now()-1*60*60*1e3)},{fuelType:"lubricants",currentStock:85,maxCapacity:200,location:"Bodega",lastUpdated:new Date(Date.now()-6*60*60*1e3)}],t=[{type:"entry",quantity:500,fuelType:"diesel",date:new Date(Date.now()-1*24*60*60*1e3)},{type:"exit",quantity:120,fuelType:"gasoline",date:new Date(Date.now()-1*60*60*1e3)},{type:"exit",quantity:250,fuelType:"diesel",date:new Date(Date.now()-3*60*60*1e3)},{type:"entry",quantity:200,fuelType:"acpm",date:new Date(Date.now()-2*24*60*60*1e3)}],r=[{vehicleType:"harvester",name:"Cosechadora 001",status:"active",fuelType:"diesel",lastUsed:new Date},{vehicleType:"chainsaw",name:"Motosierra 015",status:"active",fuelType:"two_stroke",lastUsed:new Date},{vehicleType:"log_truck",name:"Camión MD-789",status:"maintenance",fuelType:"acpm",lastUsed:new Date(Date.now()-2*24*60*60*1e3)},{vehicleType:"pickup_truck",name:"Toyota Hilux",status:"active",fuelType:"gasoline",lastUsed:new Date}],o=e.reduce((T,A)=>{const b=os[A.fuelType];return T+A.currentStock*(b?12e3:0)},0),c=t.filter(T=>T.date.toDateString()===new Date().toDateString()).length,d=r.filter(T=>T.status==="active").length,m=e.filter(T=>{const A=td(T.currentStock,T.maxCapacity);return A==="critical"||A==="low"}),g=T=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(T),v=T=>new Intl.NumberFormat("es-CO").format(T);return p.jsxs("div",{className:"dashboard-main-content",children:[p.jsxs("div",{className:"dashboard-welcome",children:[p.jsxs("h2",{children:["Bienvenido, ",i?.displayName||"Usuario"]}),p.jsxs("p",{children:["Dashboard de Gestión de Combustibles - ",new Date().toLocaleDateString("es-CO",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]})]}),p.jsxs("div",{className:"dashboard-cards",children:[p.jsxs("div",{className:"dashboard-card",children:[p.jsx("div",{className:"card-header",children:p.jsxs("div",{className:"card-title",children:[p.jsx("span",{className:"card-icon",children:"💰"}),"Valor Total Inventario"]})}),p.jsx("div",{className:"card-value",children:g(o)}),p.jsxs("div",{className:"card-description",children:[e.length," tipos de combustible en stock"]}),p.jsx("div",{className:"card-trend trend-positive",children:"↗ +5.2% vs mes anterior"})]}),p.jsxs("div",{className:"dashboard-card",children:[p.jsx("div",{className:"card-header",children:p.jsxs("div",{className:"card-title",children:[p.jsx("span",{className:"card-icon",children:"📈"}),"Movimientos Hoy"]})}),p.jsx("div",{className:"card-value",children:c}),p.jsx("div",{className:"card-description",children:"Entradas y salidas registradas"}),p.jsx("div",{className:"card-trend trend-positive",children:"↗ Actividad normal"})]}),p.jsxs("div",{className:"dashboard-card",children:[p.jsx("div",{className:"card-header",children:p.jsxs("div",{className:"card-title",children:[p.jsx("span",{className:"card-icon",children:"🚜"}),"Vehículos Activos"]})}),p.jsx("div",{className:"card-value",children:d}),p.jsxs("div",{className:"card-description",children:["de ",r.length," vehículos totales"]}),p.jsxs("div",{className:"card-trend trend-positive",children:["↗ ",Math.round(d/r.length*100),"% operatividad"]})]}),p.jsxs("div",{className:"dashboard-card",children:[p.jsx("div",{className:"card-header",children:p.jsxs("div",{className:"card-title",children:[p.jsx("span",{className:"card-icon",children:"⚠️"}),"Alertas de Stock"]})}),p.jsx("div",{className:"card-value",style:{color:m.length>0?"#dc2626":"#16a34a"},children:m.length}),p.jsx("div",{className:"card-description",children:m.length>0?"Requieren atención":"Niveles normales"}),m.length>0&&p.jsx("div",{className:"card-trend trend-negative",children:"⚠ Revisar stock crítico"})]})]}),p.jsxs("div",{className:"dashboard-section",children:[p.jsx("h3",{children:"🛢️ Resumen de Inventario"}),p.jsx("div",{className:"inventory-grid",children:e.map((T,A)=>{const b=os[T.fuelType],k=td(T.currentStock,T.maxCapacity),O=na[k],z=Math.round(T.currentStock/T.maxCapacity*100);return p.jsxs("div",{className:"inventory-card",children:[p.jsxs("div",{className:"inventory-header",children:[p.jsx("span",{className:"fuel-icon",style:{color:b?.color},children:b?.icon}),p.jsxs("div",{children:[p.jsx("h4",{children:b?.name}),p.jsx("p",{children:T.location})]}),p.jsx("span",{className:"stock-badge",style:{background:O?.color,color:"white"},children:O?.icon})]}),p.jsxs("div",{className:"inventory-progress",children:[p.jsx("div",{className:"progress-bar",children:p.jsx("div",{className:"progress-fill",style:{width:`${z}%`,background:O?.color}})}),p.jsxs("div",{className:"progress-text",children:[v(T.currentStock)," / ",v(T.maxCapacity)," ",b?.unit]})]}),p.jsxs("div",{className:"inventory-meta",children:[p.jsxs("span",{children:[z,"% capacidad"]}),p.jsxs("span",{children:["Actualizado: ",T.lastUpdated.toLocaleTimeString("es-CO",{hour:"2-digit",minute:"2-digit"})]})]})]},A)})})]}),p.jsxs("div",{className:"dashboard-section",children:[p.jsx("h3",{children:"📊 Actividad Reciente"}),p.jsx("div",{className:"activity-list",children:t.slice(0,5).map((T,A)=>{const b=os[T.fuelType],k=T.type==="entry";return p.jsxs("div",{className:"activity-item",children:[p.jsx("div",{className:"activity-icon",style:{background:k?"#dcfce7":"#fef2f2"},children:k?"📥":"📤"}),p.jsxs("div",{className:"activity-content",children:[p.jsxs("div",{className:"activity-title",children:[k?"Entrada":"Salida"," de ",b?.name]}),p.jsxs("div",{className:"activity-description",children:[v(T.quantity)," ",b?.unit," - ",T.date.toLocaleString("es-CO")]})]}),p.jsxs("div",{className:"activity-amount",style:{color:k?"#16a34a":"#dc2626"},children:[k?"+":"-",v(T.quantity)]})]},A)})})]})]})},xo="combustibles_inventory",iV=async(i,e)=>{try{const t=os[i.fuelType];if(!t)return{success:!1,error:"Tipo de combustible no válido"};const r=Gn(or(dn,xo),Si("fuelType","==",i.fuelType),Si("location","==",i.location));if(!(await Id(r)).empty)return{success:!1,error:`Ya existe ${t.name} en ${i.location}`};const c={fuelType:i.fuelType,name:t.name,description:i.description||t.description,currentStock:Number(i.currentStock)||0,maxCapacity:Number(i.maxCapacity),minThreshold:Number(i.minThreshold)||i.maxCapacity*.15,unit:t.unit,location:i.location,pricePerUnit:Number(i.pricePerUnit)||0,supplier:i.supplier||"",status:i.status||"active",createdAt:new Date,createdBy:e,lastUpdated:new Date,updatedBy:e};return{success:!0,data:{id:(await OO(or(dn,xo),c)).id,...c},message:`${t.name} agregado al inventario exitosamente`}}catch(t){return console.error("Error creating inventory item:",t),{success:!1,error:t.message}}},sV=async()=>{try{const i=Gn(or(dn,xo),Ad("fuelType","asc")),e=await Id(i),t=[];return e.forEach(r=>{const o=r.data();t.push({id:r.id,...o,stockLevel:td(o.currentStock,o.maxCapacity),stockPercentage:Math.round(o.currentStock/o.maxCapacity*100),needsRestock:o.currentStock<=o.minThreshold})}),{success:!0,data:t}}catch(i){return console.error("Error fetching inventory items:",i),{success:!1,error:i.message}}},rV=async(i,e,t)=>{try{const r=pr(dn,xo,i);if(!(await Sd(r)).exists())return{success:!1,error:"Item no encontrado"};const c={...e,lastUpdated:new Date,updatedBy:t};return delete c.id,delete c.createdAt,delete c.createdBy,await iS(r,c),{success:!0,message:"Item actualizado exitosamente",data:{id:i,...c}}}catch(r){return console.error("Error updating inventory item:",r),{success:!1,error:r.message}}},aV=async i=>{try{const e=pr(dn,xo,i);return(await Sd(e)).exists()?(await DO(e),{success:!0,message:"Item eliminado exitosamente"}):{success:!1,error:"Item no encontrado"}}catch(e){return console.error("Error deleting inventory item:",e),{success:!1,error:e.message}}},oV=i=>{const e=Gn(or(dn,xo),Ad("fuelType","asc"));return sS(e,t=>{const r=[];t.forEach(o=>{const c=o.data();r.push({id:o.id,...c,stockLevel:td(c.currentStock,c.maxCapacity),stockPercentage:Math.round(c.currentStock/c.maxCapacity*100),needsRestock:c.currentStock<=c.minThreshold})}),i(r)},t=>{console.error("Error in inventory subscription:",t),i(null,t)})},lV=async()=>{try{const i=await sV();if(!i.success)return i;const e=i.data,t={totalItems:e.length,activeItems:e.filter(r=>r.status==="active").length,lowStockItems:e.filter(r=>r.needsRestock).length,totalValue:e.reduce((r,o)=>r+o.currentStock*o.pricePerUnit,0),averageStockLevel:e.length>0?Math.round(e.reduce((r,o)=>r+o.stockPercentage,0)/e.length):0,byFuelType:{}};return e.forEach(r=>{t.byFuelType[r.fuelType]||(t.byFuelType[r.fuelType]={count:0,totalStock:0,totalCapacity:0,totalValue:0}),t.byFuelType[r.fuelType].count++,t.byFuelType[r.fuelType].totalStock+=r.currentStock,t.byFuelType[r.fuelType].totalCapacity+=r.maxCapacity,t.byFuelType[r.fuelType].totalValue+=r.currentStock*r.pricePerUnit}),{success:!0,data:t}}catch(i){return console.error("Error calculating inventory stats:",i),{success:!1,error:i.message}}},cV=({items:i,onEdit:e,onDelete:t,canManage:r})=>{const[o,c]=ge.useState("name"),[d,m]=ge.useState("asc"),g=O=>new Intl.NumberFormat("es-CO").format(O),v=O=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(O),T=O=>{const j=new Date-new Date(O.seconds?O.seconds*1e3:O),K=Math.floor(j/(1e3*60*60)),ae=Math.floor(K/24);return ae>0?`${ae}d`:K>0?`${K}h`:"ahora"},A=O=>{o===O?m(d==="asc"?"desc":"asc"):(c(O),m("asc"))},b=[...i].sort((O,z)=>{let j=O[o],K=z[o];return o==="lastUpdated"&&(j=new Date(j.seconds?j.seconds*1e3:j),K=new Date(K.seconds?K.seconds*1e3:K)),j<K?d==="asc"?-1:1:j>K?d==="asc"?1:-1:0}),k=O=>o!==O?"↕️":d==="asc"?"↑":"↓";return p.jsxs("div",{className:"inventory-table-container",children:[p.jsx("div",{className:"table-wrapper",children:p.jsxs("table",{className:"inventory-table",children:[p.jsx("thead",{children:p.jsxs("tr",{children:[p.jsxs("th",{onClick:()=>A("name"),className:"sortable",children:["Combustible ",k("name")]}),p.jsxs("th",{onClick:()=>A("location"),className:"sortable",children:["Ubicación ",k("location")]}),p.jsxs("th",{onClick:()=>A("currentStock"),className:"sortable",children:["Stock Actual ",k("currentStock")]}),p.jsxs("th",{onClick:()=>A("stockPercentage"),className:"sortable",children:["Nivel ",k("stockPercentage")]}),p.jsxs("th",{onClick:()=>A("pricePerUnit"),className:"sortable",children:["Precio ",k("pricePerUnit")]}),p.jsx("th",{children:"Valor Total"}),p.jsxs("th",{onClick:()=>A("status"),className:"sortable",children:["Estado ",k("status")]}),p.jsxs("th",{onClick:()=>A("lastUpdated"),className:"sortable",children:["Actualizado ",k("lastUpdated")]}),r&&p.jsx("th",{children:"Acciones"})]})}),p.jsx("tbody",{children:b.map(O=>{const z=os[O.fuelType],j=na[O.stockLevel],K=O.currentStock*O.pricePerUnit;return p.jsxs("tr",{className:O.needsRestock?"needs-restock":"",children:[p.jsx("td",{className:"fuel-cell",children:p.jsxs("div",{className:"fuel-info",children:[p.jsx("span",{className:"fuel-icon",style:{color:z?.color},children:z?.icon}),p.jsxs("div",{children:[p.jsx("div",{className:"fuel-name",children:z?.name}),p.jsx("div",{className:"fuel-type",children:O.fuelType})]})]})}),p.jsx("td",{children:O.location}),p.jsxs("td",{className:"stock-cell",children:[p.jsxs("div",{className:"stock-info",children:[p.jsx("span",{className:"stock-amount",children:g(O.currentStock)}),p.jsxs("span",{className:"stock-unit",children:["/ ",g(O.maxCapacity)," ",O.unit]})]}),O.needsRestock&&p.jsx("div",{className:"restock-indicator",children:"⚠️ Bajo mínimo"})]}),p.jsx("td",{className:"level-cell",children:p.jsxs("div",{className:"level-info",children:[p.jsxs("div",{className:"level-badge",style:{backgroundColor:j?.color,color:"white"},children:[O.stockPercentage,"%"]}),p.jsx("div",{className:"level-bar",children:p.jsx("div",{className:"level-fill",style:{width:`${O.stockPercentage}%`,backgroundColor:j?.color}})})]})}),p.jsx("td",{className:"price-cell",children:p.jsxs("div",{className:"price-info",children:[p.jsx("span",{className:"price-amount",children:v(O.pricePerUnit)}),p.jsxs("span",{className:"price-unit",children:["/ ",O.unit]})]})}),p.jsx("td",{className:"value-cell",children:p.jsx("span",{className:"total-value",children:v(K)})}),p.jsx("td",{className:"status-cell",children:p.jsxs("span",{className:`status-badge ${O.status}`,children:[p.jsx("span",{className:"status-dot"}),O.status==="active"?"Activo":O.status==="inactive"?"Inactivo":O.status==="maintenance"?"Mantenimiento":O.status]})}),p.jsx("td",{className:"updated-cell",children:p.jsx("span",{className:"time-ago",children:T(O.lastUpdated)})}),r&&p.jsx("td",{className:"actions-cell",children:p.jsxs("div",{className:"action-buttons",children:[p.jsx("button",{className:"btn btn-sm btn-secondary",onClick:()=>e(O),title:"Editar",children:"✏️"}),p.jsx("button",{className:"btn btn-sm btn-danger",onClick:()=>t(O),title:"Eliminar",children:"🗑️"})]})})]},O.id)})})]})}),p.jsxs("div",{className:"table-footer",children:[p.jsxs("div",{className:"table-info",children:[b.length," items ordenados por ",o,"(",d==="asc"?"ascendente":"descendente",")"]}),p.jsxs("div",{className:"table-legend",children:[p.jsxs("span",{className:"legend-item",children:[p.jsx("span",{className:"legend-dot critical"}),"Crítico"]}),p.jsxs("span",{className:"legend-item",children:[p.jsx("span",{className:"legend-dot low"}),"Bajo"]}),p.jsxs("span",{className:"legend-item",children:[p.jsx("span",{className:"legend-dot normal"}),"Normal"]}),p.jsxs("span",{className:"legend-item",children:[p.jsx("span",{className:"legend-dot high"}),"Alto"]})]})]})]})},uV=({items:i,onEdit:e,onDelete:t,canManage:r})=>{const o=m=>new Intl.NumberFormat("es-CO").format(m),c=m=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(m),d=m=>{const v=new Date-new Date(m.seconds?m.seconds*1e3:m),T=Math.floor(v/(1e3*60*60)),A=Math.floor(T/24);return A>0?`hace ${A} día${A>1?"s":""}`:T>0?`hace ${T} hora${T>1?"s":""}`:"hace unos minutos"};return p.jsx("div",{className:"inventory-cards-grid",children:i.map(m=>{const g=os[m.fuelType],v=na[m.stockLevel],T=m.currentStock*m.pricePerUnit;return p.jsxs("div",{className:"inventory-card",children:[p.jsxs("div",{className:"card-header",children:[p.jsxs("div",{className:"fuel-info",children:[p.jsx("span",{className:"fuel-icon",style:{color:g?.color},children:g?.icon}),p.jsxs("div",{className:"fuel-details",children:[p.jsx("h3",{children:g?.name}),p.jsx("p",{className:"location",children:m.location})]})]}),p.jsx("div",{className:"stock-status",children:p.jsxs("span",{className:"status-badge",style:{backgroundColor:v?.color,color:"white"},children:[v?.icon," ",v?.label]})})]}),p.jsxs("div",{className:"stock-progress",children:[p.jsxs("div",{className:"progress-header",children:[p.jsxs("span",{className:"stock-text",children:[o(m.currentStock)," / ",o(m.maxCapacity)," ",m.unit]}),p.jsxs("span",{className:"percentage",children:[m.stockPercentage,"%"]})]}),p.jsx("div",{className:"progress-bar",children:p.jsx("div",{className:"progress-fill",style:{width:`${m.stockPercentage}%`,backgroundColor:v?.color}})}),m.needsRestock&&p.jsxs("div",{className:"restock-warning",children:["⚠️ Bajo nivel mínimo (",o(m.minThreshold)," ",m.unit,")"]})]}),p.jsxs("div",{className:"card-metrics",children:[p.jsxs("div",{className:"metric",children:[p.jsxs("span",{className:"metric-label",children:["Precio por ",m.unit,":"]}),p.jsx("span",{className:"metric-value",children:c(m.pricePerUnit)})]}),p.jsxs("div",{className:"metric",children:[p.jsx("span",{className:"metric-label",children:"Valor total:"}),p.jsx("span",{className:"metric-value",children:c(T)})]}),m.supplier&&p.jsxs("div",{className:"metric",children:[p.jsx("span",{className:"metric-label",children:"Proveedor:"}),p.jsx("span",{className:"metric-value",children:m.supplier})]})]}),p.jsxs("div",{className:"card-footer",children:[p.jsxs("div",{className:"status-info",children:[p.jsx("span",{className:`status-dot ${m.status}`}),p.jsx("span",{className:"status-text",children:m.status==="active"?"Activo":m.status==="inactive"?"Inactivo":m.status==="maintenance"?"Mantenimiento":m.status})]}),p.jsxs("div",{className:"last-update",children:["Actualizado ",d(m.lastUpdated)]})]}),r&&p.jsxs("div",{className:"card-actions",children:[p.jsx("button",{className:"btn btn-secondary btn-sm",onClick:()=>e(m),title:"Editar combustible",children:"✏️ Editar"}),p.jsx("button",{className:"btn btn-danger btn-sm",onClick:()=>t(m),title:"Eliminar combustible",children:"🗑️ Eliminar"})]}),m.description&&m.description!==g?.description&&p.jsx("div",{className:"card-description",children:p.jsx("p",{children:m.description})})]},m.id)})})},hV=({item:i,onClose:e,onSuccess:t})=>{const{userProfile:r}=Od(),o=!!i,[c,d]=ge.useState({fuelType:"",location:"",currentStock:"",maxCapacity:"",minThreshold:"",pricePerUnit:"",supplier:"",description:"",status:"active"}),[m,g]=ge.useState({}),[v,T]=ge.useState(!1);ge.useEffect(()=>{o&&i&&d({fuelType:i.fuelType||"",location:i.location||"",currentStock:i.currentStock||"",maxCapacity:i.maxCapacity||"",minThreshold:i.minThreshold||"",pricePerUnit:i.pricePerUnit||"",supplier:i.supplier||"",description:i.description||"",status:i.status||"active"})},[o,i]),ge.useEffect(()=>{if(c.maxCapacity&&!c.minThreshold){const z=Math.round(Number(c.maxCapacity)*.15);d(j=>({...j,minThreshold:z}))}},[c.maxCapacity]);const A=z=>{const{name:j,value:K}=z.target;d(ae=>({...ae,[j]:K})),m[j]&&g(ae=>({...ae,[j]:null}))},b=()=>{const z={};c.fuelType||(z.fuelType="Tipo de combustible es requerido"),c.location||(z.location="Ubicación es requerida"),c.maxCapacity||(z.maxCapacity="Capacidad máxima es requerida");const j=Number(c.currentStock),K=Number(c.maxCapacity),ae=Number(c.minThreshold),ie=Number(c.pricePerUnit);return c.currentStock&&(isNaN(j)||j<0)&&(z.currentStock="Stock actual debe ser un número válido mayor o igual a 0"),c.maxCapacity&&(isNaN(K)||K<=0)&&(z.maxCapacity="Capacidad máxima debe ser un número válido mayor a 0"),c.minThreshold&&(isNaN(ae)||ae<0)&&(z.minThreshold="Umbral mínimo debe ser un número válido mayor o igual a 0"),c.pricePerUnit&&(isNaN(ie)||ie<0)&&(z.pricePerUnit="Precio debe ser un número válido mayor o igual a 0"),j>K&&(z.currentStock="Stock actual no puede ser mayor a la capacidad máxima"),ae>K&&(z.minThreshold="Umbral mínimo no puede ser mayor a la capacidad máxima"),g(z),Object.keys(z).length===0},k=async z=>{if(z.preventDefault(),!!b()){T(!0);try{let j;o?j=await rV(i.id,{location:c.location,currentStock:Number(c.currentStock)||0,maxCapacity:Number(c.maxCapacity),minThreshold:Number(c.minThreshold)||Number(c.maxCapacity)*.15,pricePerUnit:Number(c.pricePerUnit)||0,supplier:c.supplier,description:c.description,status:c.status},r.uid):j=await iV({fuelType:c.fuelType,location:c.location,currentStock:Number(c.currentStock)||0,maxCapacity:Number(c.maxCapacity),minThreshold:Number(c.minThreshold)||Number(c.maxCapacity)*.15,pricePerUnit:Number(c.pricePerUnit)||0,supplier:c.supplier,description:c.description,status:c.status},r.uid),j.success?(alert(j.message),t()):alert(`Error: ${j.error}`)}catch(j){console.error("Error saving inventory item:",j),alert("Error inesperado al guardar el item")}finally{T(!1)}}},O=os[c.fuelType];return p.jsx("div",{className:"modal-overlay",onClick:e,children:p.jsxs("div",{className:"modal-content inventory-modal",onClick:z=>z.stopPropagation(),children:[p.jsxs("div",{className:"modal-header",children:[p.jsx("h2",{children:o?"✏️ Editar Combustible":"➕ Agregar Nuevo Combustible"}),p.jsx("button",{className:"modal-close",onClick:e,children:"✕"})]}),p.jsxs("form",{onSubmit:k,className:"modal-form",children:[p.jsxs("div",{className:"form-grid",children:[p.jsxs("div",{className:"form-group",children:[p.jsxs("label",{htmlFor:"fuelType",children:["Tipo de Combustible *",O&&p.jsxs("span",{className:"fuel-preview",children:[O.icon," ",O.name]})]}),p.jsxs("select",{id:"fuelType",name:"fuelType",value:c.fuelType,onChange:A,disabled:o,className:m.fuelType?"error":"",required:!0,children:[p.jsx("option",{value:"",children:"Seleccionar tipo..."}),Object.entries(ho).map(([z,j])=>{const K=os[j];return p.jsxs("option",{value:j,children:[K.icon," ",K.name," (",K.unit,")"]},z)})]}),m.fuelType&&p.jsx("span",{className:"error-text",children:m.fuelType})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"location",children:"Ubicación / Tanque *"}),p.jsx("input",{type:"text",id:"location",name:"location",value:c.location,onChange:A,placeholder:"ej. Tanque Principal, Depósito A, Bodega Norte",className:m.location?"error":"",required:!0}),m.location&&p.jsx("span",{className:"error-text",children:m.location})]}),p.jsxs("div",{className:"form-group",children:[p.jsxs("label",{htmlFor:"currentStock",children:["Stock Actual ",O&&`(${O.unit})`]}),p.jsx("input",{type:"number",id:"currentStock",name:"currentStock",value:c.currentStock,onChange:A,placeholder:"0",min:"0",step:"0.01",className:m.currentStock?"error":""}),m.currentStock&&p.jsx("span",{className:"error-text",children:m.currentStock})]}),p.jsxs("div",{className:"form-group",children:[p.jsxs("label",{htmlFor:"maxCapacity",children:["Capacidad Máxima * ",O&&`(${O.unit})`]}),p.jsx("input",{type:"number",id:"maxCapacity",name:"maxCapacity",value:c.maxCapacity,onChange:A,placeholder:"1000",min:"1",step:"0.01",className:m.maxCapacity?"error":"",required:!0}),m.maxCapacity&&p.jsx("span",{className:"error-text",children:m.maxCapacity})]}),p.jsxs("div",{className:"form-group",children:[p.jsxs("label",{htmlFor:"minThreshold",children:["Umbral Mínimo ",O&&`(${O.unit})`,p.jsx("span",{className:"field-hint",children:"Para alertas de stock bajo"})]}),p.jsx("input",{type:"number",id:"minThreshold",name:"minThreshold",value:c.minThreshold,onChange:A,placeholder:"Auto: 15% de capacidad máxima",min:"0",step:"0.01",className:m.minThreshold?"error":""}),m.minThreshold&&p.jsx("span",{className:"error-text",children:m.minThreshold}),c.maxCapacity&&p.jsxs("span",{className:"field-hint",children:["Sugerido: ",Math.round(Number(c.maxCapacity)*.15)," ",O?.unit||"unidades"]})]}),p.jsxs("div",{className:"form-group",children:[p.jsxs("label",{htmlFor:"pricePerUnit",children:["Precio por ",O?.unit||"Unidad"]}),p.jsx("input",{type:"number",id:"pricePerUnit",name:"pricePerUnit",value:c.pricePerUnit,onChange:A,placeholder:"12000",min:"0",step:"0.01",className:m.pricePerUnit?"error":""}),m.pricePerUnit&&p.jsx("span",{className:"error-text",children:m.pricePerUnit})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"supplier",children:"Proveedor Principal"}),p.jsx("input",{type:"text",id:"supplier",name:"supplier",value:c.supplier,onChange:A,placeholder:"ej. Petrobras, Terpel, Mobil"})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{htmlFor:"status",children:"Estado"}),p.jsxs("select",{id:"status",name:"status",value:c.status,onChange:A,children:[p.jsx("option",{value:"active",children:"Activo"}),p.jsx("option",{value:"inactive",children:"Inactivo"}),p.jsx("option",{value:"maintenance",children:"Mantenimiento"})]})]}),p.jsxs("div",{className:"form-group full-width",children:[p.jsx("label",{htmlFor:"description",children:"Descripción / Notas"}),p.jsx("textarea",{id:"description",name:"description",value:c.description,onChange:A,placeholder:"Información adicional sobre este combustible...",rows:"3"})]})]}),O&&c.maxCapacity&&p.jsxs("div",{className:"form-preview",children:[p.jsx("h4",{children:"📊 Vista Previa"}),p.jsxs("div",{className:"preview-card",children:[p.jsxs("div",{className:"preview-header",children:[p.jsxs("span",{style:{color:O.color},children:[O.icon," ",O.name]}),p.jsx("span",{children:c.location})]}),p.jsxs("div",{className:"preview-capacity",children:[c.currentStock||0," / ",c.maxCapacity," ",O.unit,c.currentStock&&c.maxCapacity&&p.jsxs("span",{className:"preview-percentage",children:["(",Math.round(Number(c.currentStock)/Number(c.maxCapacity)*100),"%)"]})]}),c.pricePerUnit&&p.jsxs("div",{className:"preview-value",children:["Valor total: ",new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format((Number(c.currentStock)||0)*Number(c.pricePerUnit))]})]})]}),p.jsxs("div",{className:"modal-actions",children:[p.jsx("button",{type:"button",onClick:e,className:"btn btn-secondary",children:"Cancelar"}),p.jsx("button",{type:"submit",className:"btn btn-primary",disabled:v,children:v?"Guardando...":o?"Actualizar":"Crear"})]})]})]})})},dV=({stats:i})=>{const e=r=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(r),t=r=>new Intl.NumberFormat("es-CO").format(r);return p.jsxs("div",{className:"inventory-stats",children:[p.jsxs("div",{className:"stats-grid",children:[p.jsxs("div",{className:"stat-card primary",children:[p.jsx("div",{className:"stat-icon",children:"💰"}),p.jsxs("div",{className:"stat-content",children:[p.jsx("h3",{children:"Valor Total"}),p.jsx("div",{className:"stat-value",children:e(i.totalValue)}),p.jsxs("div",{className:"stat-subtitle",children:[t(i.totalItems)," tipos de combustible"]})]})]}),p.jsxs("div",{className:"stat-card success",children:[p.jsx("div",{className:"stat-icon",children:"✅"}),p.jsxs("div",{className:"stat-content",children:[p.jsx("h3",{children:"Items Activos"}),p.jsx("div",{className:"stat-value",children:i.activeItems}),p.jsxs("div",{className:"stat-subtitle",children:[Math.round(i.activeItems/i.totalItems*100),"% del total"]})]})]}),p.jsxs("div",{className:`stat-card ${i.lowStockItems>0?"warning":"info"}`,children:[p.jsx("div",{className:"stat-icon",children:i.lowStockItems>0?"⚠️":"📊"}),p.jsxs("div",{className:"stat-content",children:[p.jsx("h3",{children:"Stock Bajo"}),p.jsx("div",{className:"stat-value",children:i.lowStockItems}),p.jsx("div",{className:"stat-subtitle",children:i.lowStockItems>0?"Requieren atención":"Niveles normales"})]})]}),p.jsxs("div",{className:"stat-card info",children:[p.jsx("div",{className:"stat-icon",children:"📈"}),p.jsxs("div",{className:"stat-content",children:[p.jsx("h3",{children:"Nivel Promedio"}),p.jsxs("div",{className:"stat-value",children:[i.averageStockLevel,"%"]}),p.jsx("div",{className:"stat-subtitle",children:"Capacidad promedio utilizada"})]})]})]}),p.jsxs("div",{className:"fuel-type-summary",children:[p.jsx("h4",{children:"📊 Resumen por Tipo de Combustible"}),p.jsx("div",{className:"fuel-types-grid",children:Object.entries(i.byFuelType).map(([r,o])=>{const c=os[r],d=o.totalCapacity>0?Math.round(o.totalStock/o.totalCapacity*100):0;return p.jsxs("div",{className:"fuel-type-card",children:[p.jsxs("div",{className:"fuel-header",children:[p.jsx("span",{className:"fuel-icon",style:{color:c?.color||"#6b7280"},children:c?.icon||"⛽"}),p.jsxs("div",{className:"fuel-info",children:[p.jsx("h5",{children:c?.name||r}),p.jsxs("span",{className:"fuel-count",children:[o.count," ubicaciones"]})]})]}),p.jsxs("div",{className:"fuel-metrics",children:[p.jsxs("div",{className:"metric",children:[p.jsx("span",{className:"metric-label",children:"Stock Total:"}),p.jsxs("span",{className:"metric-value",children:[t(o.totalStock)," ",c?.unit||"unidades"]})]}),p.jsxs("div",{className:"metric",children:[p.jsx("span",{className:"metric-label",children:"Capacidad:"}),p.jsxs("span",{className:"metric-value",children:[t(o.totalCapacity)," ",c?.unit||"unidades"]})]}),p.jsxs("div",{className:"metric",children:[p.jsx("span",{className:"metric-label",children:"Utilización:"}),p.jsxs("span",{className:`metric-value ${d<25?"low":d>75?"high":"normal"}`,children:[d,"%"]})]}),p.jsxs("div",{className:"metric",children:[p.jsx("span",{className:"metric-label",children:"Valor:"}),p.jsx("span",{className:"metric-value",children:e(o.totalValue)})]})]}),p.jsx("div",{className:"progress-bar",children:p.jsx("div",{className:"progress-fill",style:{width:`${d}%`,backgroundColor:c?.color||"#6b7280"}})})]},r)})}),Object.keys(i.byFuelType).length===0&&p.jsx("div",{className:"empty-fuel-types",children:p.jsx("p",{children:"No hay tipos de combustible registrados en el inventario."})})]})]})},fV=()=>{const{hasPermission:i}=Od(),[e,t]=ge.useState([]),[r,o]=ge.useState(null),[c,d]=ge.useState(!0),[m,g]=ge.useState(null),[v,T]=ge.useState("cards"),[A,b]=ge.useState(!1),[k,O]=ge.useState(null),[z,j]=ge.useState("all"),[K,ae]=ge.useState("");ge.useEffect(()=>{let N=null;return(()=>{N=oV((P,U)=>{if(U){console.error("Error in inventory subscription:",U),g("Error cargando inventario en tiempo real");return}t(P||[]),d(!1)})})(),()=>{N&&N()}},[]),ge.useEffect(()=>{(async()=>{const x=await lV();x.success&&o(x.data)})()},[e]);const ie=e.filter(N=>{if(z==="active"&&N.status!=="active"||z==="low-stock"&&!N.needsRestock)return!1;if(K){const x=K.toLowerCase();return N.name.toLowerCase().includes(x)||N.location.toLowerCase().includes(x)||N.fuelType.toLowerCase().includes(x)}return!0}),ce=()=>{if(!i("canManageInventory")){alert("No tienes permisos para crear items de inventario");return}O(null),b(!0)},W=N=>{if(!i("canManageInventory")){alert("No tienes permisos para editar items de inventario");return}O(N),b(!0)},de=async N=>{if(!i("canManageInventory")){alert("No tienes permisos para eliminar items de inventario");return}if(!window.confirm(`¿Estás seguro de eliminar ${N.name} de ${N.location}?

Esta acción no se puede deshacer.`))return;d(!0);const P=await aV(N.id);P.success?alert("Item eliminado exitosamente"):(g(P.error),alert(`Error al eliminar: ${P.error}`)),d(!1)},V=()=>{b(!1),O(null)},I=()=>{V()};return c&&e.length===0?p.jsxs("div",{className:"inventory-loading",children:[p.jsx("div",{className:"loading-spinner"}),p.jsx("p",{children:"Cargando inventario..."})]}):p.jsxs("div",{className:"inventory-main",children:[p.jsxs("div",{className:"inventory-header",children:[p.jsxs("div",{className:"header-title",children:[p.jsx("h2",{children:"🛢️ Gestión de Inventario"}),p.jsx("p",{children:"Control de stock de combustibles en tiempo real"})]}),i("canManageInventory")&&p.jsx("button",{className:"btn btn-primary",onClick:ce,children:"➕ Agregar Combustible"})]}),r&&p.jsx(dV,{stats:r}),p.jsxs("div",{className:"inventory-controls",children:[p.jsxs("div",{className:"search-filters",children:[p.jsx("input",{type:"text",placeholder:"Buscar por nombre, ubicación o tipo...",value:K,onChange:N=>ae(N.target.value),className:"search-input"}),p.jsxs("select",{value:z,onChange:N=>j(N.target.value),className:"filter-select",children:[p.jsx("option",{value:"all",children:"Todos los items"}),p.jsx("option",{value:"active",children:"Solo activos"}),p.jsx("option",{value:"low-stock",children:"Stock bajo"})]})]}),p.jsxs("div",{className:"view-toggle",children:[p.jsx("button",{className:`toggle-btn ${v==="cards"?"active":""}`,onClick:()=>T("cards"),children:"📱 Cards"}),p.jsx("button",{className:`toggle-btn ${v==="table"?"active":""}`,onClick:()=>T("table"),children:"📊 Tabla"})]})]}),m&&p.jsxs("div",{className:"error-banner",children:[p.jsxs("span",{children:["⚠️ ",m]}),p.jsx("button",{onClick:()=>g(null),children:"✕"})]}),p.jsx("div",{className:"inventory-content",children:ie.length===0?p.jsxs("div",{className:"empty-state",children:[p.jsx("div",{className:"empty-icon",children:"📦"}),p.jsx("h3",{children:"No hay items de inventario"}),p.jsx("p",{children:K||z!=="all"?"No se encontraron items con los filtros aplicados":"Comienza agregando tu primer tipo de combustible al inventario"}),i("canManageInventory")&&p.jsx("button",{className:"btn btn-primary",onClick:ce,children:"➕ Agregar Primer Combustible"})]}):p.jsx(p.Fragment,{children:v==="cards"?p.jsx(uV,{items:ie,onEdit:W,onDelete:de,canManage:i("canManageInventory")}):p.jsx(cV,{items:ie,onEdit:W,onDelete:de,canManage:i("canManageInventory")})})}),ie.length>0&&p.jsx("div",{className:"results-footer",children:p.jsxs("p",{children:["Mostrando ",ie.length," de ",e.length," items",K&&` · Filtro: "${K}"`,z!=="all"&&` · Estado: ${z}`]})}),A&&p.jsx(hV,{item:k,onClose:V,onSuccess:I})]})},Md="combustibles_movements",D0="combustibles_inventory",Ie={ENTRADA:"entrada",SALIDA:"salida",TRANSFERENCIA:"transferencia",AJUSTE:"ajuste"},Fe={PENDIENTE:"pendiente",COMPLETADO:"completado",CANCELADO:"cancelado"},mV=async i=>{try{_V(i);const e={...i,createdAt:To(),updatedAt:To(),status:Fe.PENDIENTE,totalValue:ow(i),effectiveDate:i.effectiveDate||To()},t=await PO(dn,async r=>{const o=pr(or(dn,Md));return r.set(o,e),await TV(r,e,o.id),o.id});return console.log("✅ Movimiento creado exitosamente:",t),t}catch(e){throw console.error("❌ Error al crear movimiento:",e),new Error(`Error al crear movimiento: ${e.message}`)}},pV=async(i={})=>{try{let e=or(dn,Md);i.type&&(e=Gn(e,Si("type","==",i.type))),i.status&&(e=Gn(e,Si("status","==",i.status))),i.fuelType&&(e=Gn(e,Si("fuelType","==",i.fuelType))),i.vehicleId&&(e=Gn(e,Si("vehicleId","==",i.vehicleId))),e=Gn(e,Ad("createdAt","desc"));const t=await Id(e),r=[];return t.forEach(o=>{r.push({id:o.id,...o.data(),createdAt:o.data().createdAt?.toDate?.()||o.data().createdAt,updatedAt:o.data().updatedAt?.toDate?.()||o.data().updatedAt,effectiveDate:o.data().effectiveDate?.toDate?.()||o.data().effectiveDate})}),r}catch(e){throw console.error("❌ Error al obtener movimientos:",e),new Error(`Error al obtener movimientos: ${e.message}`)}},gV=async(i,e)=>{try{if(!i)throw new Error("ID de movimiento requerido");const t={...e,updatedAt:To(),...e.quantity||e.unitPrice?{totalValue:ow(e)}:{}},r=pr(dn,Md,i);await iS(r,t),console.log("✅ Movimiento actualizado exitosamente")}catch(t){throw console.error("❌ Error al actualizar movimiento:",t),new Error(`Error al actualizar movimiento: ${t.message}`)}},yV=(i,e={})=>{try{let t=or(dn,Md);return e.type&&(t=Gn(t,Si("type","==",e.type))),e.status&&(t=Gn(t,Si("status","==",e.status))),t=Gn(t,Ad("createdAt","desc")),sS(t,r=>{const o=[];r.forEach(c=>{o.push({id:c.id,...c.data(),createdAt:c.data().createdAt?.toDate?.()||c.data().createdAt,updatedAt:c.data().updatedAt?.toDate?.()||c.data().updatedAt,effectiveDate:c.data().effectiveDate?.toDate?.()||c.data().effectiveDate})}),i(o)},r=>{console.error("❌ Error en suscripción de movimientos:",r),i([],r)})}catch(t){throw console.error("❌ Error al configurar suscripción:",t),new Error(`Error en suscripción: ${t.message}`)}},vV=async(i={})=>{try{const e=await pV(i),t={totalMovements:e.length,byType:{},byStatus:{},byFuelType:{},totalValue:0,totalQuantity:0,averageValue:0,thisMonth:0,lastMonth:0,thisWeek:0},r=new Date,o=new Date(r.getFullYear(),r.getMonth(),1),c=new Date(r.getFullYear(),r.getMonth()-1,1),d=new Date(r.setDate(r.getDate()-r.getDay()));return e.forEach(m=>{t.byType[m.type]=(t.byType[m.type]||0)+1,t.byStatus[m.status]=(t.byStatus[m.status]||0)+1,t.byFuelType[m.fuelType]=(t.byFuelType[m.fuelType]||0)+1,t.totalValue+=m.totalValue||0,t.totalQuantity+=m.quantity||0;const g=new Date(m.createdAt);g>=o&&t.thisMonth++,g>=c&&g<o&&t.lastMonth++,g>=d&&t.thisWeek++}),t.averageValue=t.totalMovements>0?t.totalValue/t.totalMovements:0,t}catch(e){throw console.error("❌ Error al calcular estadísticas:",e),new Error(`Error al calcular estadísticas: ${e.message}`)}},_V=i=>{const e=["type","fuelType","quantity","unitPrice"];for(const t of e)if(!i[t])throw new Error(`Campo requerido: ${t}`);if(!Object.values(Ie).includes(i.type))throw new Error("Tipo de movimiento inválido");if(i.quantity<=0)throw new Error("La cantidad debe ser mayor a cero");if(i.unitPrice<0)throw new Error("El precio unitario no puede ser negativo");if(i.type===Ie.SALIDA&&!i.vehicleId)throw new Error("Las salidas deben tener un vehículo asociado");if(i.type===Ie.TRANSFERENCIA&&!i.destinationLocation)throw new Error("Las transferencias deben tener una ubicación destino")},ow=i=>(i.quantity||0)*(i.unitPrice||0),TV=async(i,e,t)=>{try{const r=Gn(or(dn,D0),Si("fuelType","==",e.fuelType),Si("location","==",e.location||"principal")),o=await Id(r);if(o.empty)throw new Error(`No se encontró inventario para ${e.fuelType} en ${e.location||"ubicación principal"}`);const c=o.docs[0],d=c.data(),m=pr(dn,D0,c.id);let g=d.currentStock;switch(e.type){case Ie.ENTRADA:g+=e.quantity;break;case Ie.SALIDA:if(g-=e.quantity,g<0)throw new Error("Stock insuficiente para realizar la salida");break;case Ie.AJUSTE:g+=e.quantity,g<0&&(g=0);break;case Ie.TRANSFERENCIA:if(g-=e.quantity,g<0)throw new Error("Stock insuficiente para realizar la transferencia");break}i.update(m,{currentStock:g,lastMovement:{movementId:t,type:e.type,quantity:e.quantity,date:To()},updatedAt:To()})}catch(r){throw console.error("❌ Error al actualizar inventario:",r),r}},EV=({stats:i,filters:e})=>{if(!i)return null;const t=g=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0,maximumFractionDigits:0}).format(g),r=g=>new Intl.NumberFormat("es-CO").format(g),o=(g,v)=>v===0?g>0?100:0:((g-v)/v*100).toFixed(1),c=g=>{switch(g){case Ie.ENTRADA:return"#10b981";case Ie.SALIDA:return"#ef4444";case Ie.TRANSFERENCIA:return"#3b82f6";case Ie.AJUSTE:return"#f59e0b";default:return"#6b7280"}},d=g=>{switch(g){case Ie.ENTRADA:return"📥";case Ie.SALIDA:return"📤";case Ie.TRANSFERENCIA:return"🔄";case Ie.AJUSTE:return"⚖️";default:return"📋"}},m=o(i.thisMonth,i.lastMonth);return p.jsxs("div",{className:"movements-stats",children:[p.jsxs("div",{className:"stats-grid",children:[p.jsxs("div",{className:"stat-card primary",children:[p.jsx("div",{className:"stat-icon",children:"📊"}),p.jsxs("div",{className:"stat-content",children:[p.jsx("div",{className:"stat-value",children:r(i.totalMovements)}),p.jsx("div",{className:"stat-label",children:"Total Movimientos"}),p.jsxs("div",{className:"stat-trend",children:[p.jsxs("span",{className:`trend ${m>=0?"positive":"negative"}`,children:[m>=0?"📈":"📉"," ",Math.abs(m),"%"]}),p.jsx("span",{className:"trend-label",children:"vs mes anterior"})]})]})]}),p.jsxs("div",{className:"stat-card",children:[p.jsx("div",{className:"stat-icon",children:"💰"}),p.jsxs("div",{className:"stat-content",children:[p.jsx("div",{className:"stat-value",children:t(i.totalValue)}),p.jsx("div",{className:"stat-label",children:"Valor Total"}),p.jsxs("div",{className:"stat-secondary",children:["Promedio: ",t(i.averageValue)]})]})]}),p.jsxs("div",{className:"stat-card",children:[p.jsx("div",{className:"stat-icon",children:"⛽"}),p.jsxs("div",{className:"stat-content",children:[p.jsx("div",{className:"stat-value",children:r(i.totalQuantity)}),p.jsx("div",{className:"stat-label",children:"Galones Total"}),p.jsxs("div",{className:"stat-secondary",children:["Promedio: ",r(i.totalQuantity/(i.totalMovements||1))," gal/mov"]})]})]}),p.jsxs("div",{className:"stat-card",children:[p.jsx("div",{className:"stat-icon",children:"📅"}),p.jsxs("div",{className:"stat-content",children:[p.jsx("div",{className:"stat-value",children:r(i.thisWeek)}),p.jsx("div",{className:"stat-label",children:"Esta Semana"}),p.jsxs("div",{className:"stat-secondary",children:[r(i.thisMonth)," este mes"]})]})]})]}),p.jsxs("div",{className:"stats-breakdown",children:[p.jsxs("div",{className:"breakdown-section",children:[p.jsx("h4",{children:"📋 Por Tipo de Movimiento"}),p.jsx("div",{className:"breakdown-grid",children:Object.entries(i.byType).map(([g,v])=>{const T=(v/i.totalMovements*100).toFixed(1);return p.jsxs("div",{className:"breakdown-item",children:[p.jsxs("div",{className:"breakdown-header",children:[p.jsx("span",{className:"breakdown-icon",children:d(g)}),p.jsx("span",{className:"breakdown-label",children:g.charAt(0).toUpperCase()+g.slice(1)})]}),p.jsx("div",{className:"breakdown-value",children:v}),p.jsx("div",{className:"breakdown-bar",children:p.jsx("div",{className:"breakdown-fill",style:{width:`${T}%`,backgroundColor:c(g)}})}),p.jsxs("div",{className:"breakdown-percentage",children:[T,"%"]})]},g)})})]}),p.jsxs("div",{className:"breakdown-section",children:[p.jsx("h4",{children:"⚡ Por Estado"}),p.jsx("div",{className:"breakdown-grid",children:Object.entries(i.byStatus).map(([g,v])=>{const T=(v/i.totalMovements*100).toFixed(1),A=k=>{switch(k){case Fe.COMPLETADO:return"#10b981";case Fe.PENDIENTE:return"#f59e0b";case Fe.CANCELADO:return"#ef4444";default:return"#6b7280"}},b=k=>{switch(k){case Fe.COMPLETADO:return"✅";case Fe.PENDIENTE:return"⏳";case Fe.CANCELADO:return"❌";default:return"❓"}};return p.jsxs("div",{className:"breakdown-item",children:[p.jsxs("div",{className:"breakdown-header",children:[p.jsx("span",{className:"breakdown-icon",children:b(g)}),p.jsx("span",{className:"breakdown-label",children:g.charAt(0).toUpperCase()+g.slice(1)})]}),p.jsx("div",{className:"breakdown-value",children:v}),p.jsx("div",{className:"breakdown-bar",children:p.jsx("div",{className:"breakdown-fill",style:{width:`${T}%`,backgroundColor:A(g)}})}),p.jsxs("div",{className:"breakdown-percentage",children:[T,"%"]})]},g)})})]}),p.jsxs("div",{className:"breakdown-section",children:[p.jsx("h4",{children:"⛽ Por Tipo de Combustible"}),p.jsx("div",{className:"breakdown-grid",children:Object.entries(i.byFuelType).map(([g,v])=>{const T=(v/i.totalMovements*100).toFixed(1),A=b=>{switch(b?.toLowerCase()){case"diesel":return"🚛";case"gasolina":return"🚗";case"acpm":return"🚚";case"lubricante":return"🛢️";default:return"⛽"}};return p.jsxs("div",{className:"breakdown-item",children:[p.jsxs("div",{className:"breakdown-header",children:[p.jsx("span",{className:"breakdown-icon",children:A(g)}),p.jsx("span",{className:"breakdown-label",children:g})]}),p.jsx("div",{className:"breakdown-value",children:v}),p.jsx("div",{className:"breakdown-bar",children:p.jsx("div",{className:"breakdown-fill",style:{width:`${T}%`,backgroundColor:"#059669"}})}),p.jsxs("div",{className:"breakdown-percentage",children:[T,"%"]})]},g)})})]})]}),(e.type||e.status||e.fuelType||e.vehicleId)&&p.jsxs("div",{className:"active-filters",children:[p.jsx("h4",{children:"🔍 Filtros Activos"}),p.jsxs("div",{className:"filters-list",children:[e.type&&p.jsxs("span",{className:"filter-tag",children:["Tipo: ",e.type]}),e.status&&p.jsxs("span",{className:"filter-tag",children:["Estado: ",e.status]}),e.fuelType&&p.jsxs("span",{className:"filter-tag",children:["Combustible: ",e.fuelType]}),e.vehicleId&&p.jsxs("span",{className:"filter-tag",children:["Vehículo: ",e.vehicleId]})]})]})]})},bV=({filters:i,onFilterChange:e,onClearFilters:t,searchTerm:r,onSearchChange:o,viewMode:c,onViewModeChange:d,totalResults:m})=>{const[g,v]=ge.useState(!1),T=[{value:"Diesel",label:"Diesel 🚛"},{value:"Gasolina",label:"Gasolina 🚗"},{value:"ACPM",label:"ACPM 🚚"},{value:"Lubricante",label:"Lubricante 🛢️"}],A=[{value:"all",label:"Todos los períodos"},{value:"today",label:"Hoy"},{value:"week",label:"Esta semana"},{value:"month",label:"Este mes"},{value:"quarter",label:"Este trimestre"},{value:"year",label:"Este año"}],b=Object.values(i).filter(z=>z&&z!==""&&z!=="all").length,k=(z,j)=>{e({[z]:j})},O=z=>{e(z)};return p.jsxs("div",{className:"movements-filters",children:[p.jsxs("div",{className:"filters-main",children:[p.jsx("div",{className:"search-section",children:p.jsxs("div",{className:"search-box",children:[p.jsx("span",{className:"search-icon",children:"🔍"}),p.jsx("input",{type:"text",placeholder:"Buscar por combustible, vehículo, referencia...",value:r,onChange:z=>o(z.target.value),className:"search-input"}),r&&p.jsx("button",{className:"search-clear",onClick:()=>o(""),title:"Limpiar búsqueda",children:"✕"})]})}),p.jsxs("div",{className:"filters-controls",children:[p.jsxs("div",{className:"quick-filters",children:[p.jsx("button",{className:`quick-filter ${i.type===Ie.ENTRADA?"active":""}`,onClick:()=>O({type:Ie.ENTRADA}),children:"📥 Entradas"}),p.jsx("button",{className:`quick-filter ${i.type===Ie.SALIDA?"active":""}`,onClick:()=>O({type:Ie.SALIDA}),children:"📤 Salidas"}),p.jsx("button",{className:`quick-filter ${i.status===Fe.PENDIENTE?"active":""}`,onClick:()=>O({status:Fe.PENDIENTE}),children:"⏳ Pendientes"})]}),p.jsxs("button",{className:`btn-advanced-filters ${g?"active":""}`,onClick:()=>v(!g),children:["🎛️ Filtros",b>0&&p.jsx("span",{className:"filters-count",children:b})]}),p.jsxs("div",{className:"view-modes",children:[p.jsx("button",{className:`view-mode ${c==="cards"?"active":""}`,onClick:()=>d("cards"),title:"Vista en tarjetas",children:"🎴"}),p.jsx("button",{className:`view-mode ${c==="table"?"active":""}`,onClick:()=>d("table"),title:"Vista en tabla",children:"📋"})]})]})]}),g&&p.jsxs("div",{className:"filters-advanced",children:[p.jsxs("div",{className:"filters-grid",children:[p.jsxs("div",{className:"filter-group",children:[p.jsx("label",{children:"Tipo de Movimiento"}),p.jsxs("select",{value:i.type,onChange:z=>k("type",z.target.value),className:"filter-select",children:[p.jsx("option",{value:"",children:"Todos los tipos"}),p.jsx("option",{value:Ie.ENTRADA,children:"📥 Entrada"}),p.jsx("option",{value:Ie.SALIDA,children:"📤 Salida"}),p.jsx("option",{value:Ie.TRANSFERENCIA,children:"🔄 Transferencia"}),p.jsx("option",{value:Ie.AJUSTE,children:"⚖️ Ajuste"})]})]}),p.jsxs("div",{className:"filter-group",children:[p.jsx("label",{children:"Estado"}),p.jsxs("select",{value:i.status,onChange:z=>k("status",z.target.value),className:"filter-select",children:[p.jsx("option",{value:"",children:"Todos los estados"}),p.jsx("option",{value:Fe.PENDIENTE,children:"⏳ Pendiente"}),p.jsx("option",{value:Fe.COMPLETADO,children:"✅ Completado"}),p.jsx("option",{value:Fe.CANCELADO,children:"❌ Cancelado"})]})]}),p.jsxs("div",{className:"filter-group",children:[p.jsx("label",{children:"Tipo de Combustible"}),p.jsxs("select",{value:i.fuelType,onChange:z=>k("fuelType",z.target.value),className:"filter-select",children:[p.jsx("option",{value:"",children:"Todos los combustibles"}),T.map(z=>p.jsx("option",{value:z.value,children:z.label},z.value))]})]}),p.jsxs("div",{className:"filter-group",children:[p.jsx("label",{children:"Período"}),p.jsx("select",{value:i.dateRange,onChange:z=>k("dateRange",z.target.value),className:"filter-select",children:A.map(z=>p.jsx("option",{value:z.value,children:z.label},z.value))})]}),p.jsxs("div",{className:"filter-group",children:[p.jsx("label",{children:"Vehículo/Equipo"}),p.jsx("input",{type:"text",placeholder:"ID del vehículo...",value:i.vehicleId,onChange:z=>k("vehicleId",z.target.value),className:"filter-input"})]})]}),p.jsxs("div",{className:"filters-actions",children:[p.jsx("button",{className:"btn-clear-filters",onClick:t,disabled:b===0,children:"🗑️ Limpiar Filtros"}),p.jsxs("div",{className:"filters-info",children:[p.jsxs("span",{className:"results-count",children:[m," resultado",m!==1?"s":""]}),b>0&&p.jsxs("span",{className:"active-filters-text",children:["(",b," filtro",b!==1?"s":""," activo",b!==1?"s":"",")"]})]})]})]}),p.jsx("div",{className:"keyboard-shortcuts",style:{display:"none"},children:p.jsx("small",{children:"💡 Atajos: Ctrl+F (buscar), Ctrl+1 (entradas), Ctrl+2 (salidas), Ctrl+3 (pendientes)"})})]})},AV=({movements:i,onEdit:e,onView:t,userRole:r})=>{const o=b=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0,maximumFractionDigits:0}).format(b),c=b=>b?(b instanceof Date?b:new Date(b)).toLocaleDateString("es-CO",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"Sin fecha",d=b=>{if(!b)return"";const k=new Date,O=b instanceof Date?b:new Date(b),z=Math.abs(k-O),j=Math.ceil(z/(1e3*60*60*24));return j===1?"hace 1 día":j<7?`hace ${j} días`:j<30?`hace ${Math.ceil(j/7)} semanas`:j<365?`hace ${Math.ceil(j/30)} meses`:`hace ${Math.ceil(j/365)} años`},m=b=>{switch(b){case Ie.ENTRADA:return"movement-entrada";case Ie.SALIDA:return"movement-salida";case Ie.TRANSFERENCIA:return"movement-transferencia";case Ie.AJUSTE:return"movement-ajuste";default:return"movement-default"}},g=b=>{switch(b){case Fe.COMPLETADO:return"status-completado";case Fe.PENDIENTE:return"status-pendiente";case Fe.CANCELADO:return"status-cancelado";default:return"status-default"}},v=b=>{switch(b){case Ie.ENTRADA:return"📥";case Ie.SALIDA:return"📤";case Ie.TRANSFERENCIA:return"🔄";case Ie.AJUSTE:return"⚖️";default:return"📋"}},T=b=>{switch(b?.toLowerCase()){case"diesel":return"🚛";case"gasolina":return"🚗";case"acpm":return"🚚";case"lubricante":return"🛢️";default:return"⛽"}},A=b=>{switch(b){case Fe.COMPLETADO:return"✅";case Fe.PENDIENTE:return"⏳";case Fe.CANCELADO:return"❌";default:return"❓"}};return p.jsx("div",{className:"movements-cards",children:i.map(b=>p.jsxs("div",{className:`movement-card ${m(b.type)}`,children:[p.jsxs("div",{className:"card-header",children:[p.jsxs("div",{className:"movement-type",children:[p.jsx("span",{className:"type-icon",children:v(b.type)}),p.jsx("span",{className:"type-label",children:b.type.charAt(0).toUpperCase()+b.type.slice(1)})]}),p.jsxs("div",{className:`status-badge ${g(b.status)}`,children:[p.jsx("span",{className:"status-icon",children:A(b.status)}),p.jsx("span",{className:"status-label",children:b.status.charAt(0).toUpperCase()+b.status.slice(1)})]})]}),p.jsxs("div",{className:"card-content",children:[p.jsxs("div",{className:"fuel-info",children:[p.jsx("span",{className:"fuel-icon",children:T(b.fuelType)}),p.jsx("span",{className:"fuel-type",children:b.fuelType}),p.jsxs("span",{className:"quantity",children:[b.quantity," galones"]})]}),p.jsxs("div",{className:"value-info",children:[p.jsx("div",{className:"total-value",children:o(b.totalValue)}),p.jsxs("div",{className:"unit-price",children:[o(b.unitPrice),"/galón"]})]}),b.vehicleId&&p.jsxs("div",{className:"vehicle-info",children:[p.jsx("span",{className:"vehicle-icon",children:"🚜"}),p.jsxs("span",{className:"vehicle-id",children:["Vehículo: ",b.vehicleId]})]}),b.location&&p.jsxs("div",{className:"location-info",children:[p.jsx("span",{className:"location-icon",children:"📍"}),p.jsx("span",{className:"location",children:b.location})]}),b.description&&p.jsx("div",{className:"description",children:p.jsx("p",{children:b.description})}),b.reference&&p.jsxs("div",{className:"reference",children:[p.jsx("span",{className:"reference-label",children:"Ref:"}),p.jsx("span",{className:"reference-value",children:b.reference})]})]}),p.jsxs("div",{className:"card-footer",children:[p.jsxs("div",{className:"date-info",children:[p.jsx("div",{className:"created-date",children:c(b.createdAt)}),p.jsx("div",{className:"relative-time",children:d(b.createdAt)})]}),p.jsxs("div",{className:"card-actions",children:[p.jsx("button",{className:"btn-view",onClick:()=>t(b),title:"Ver detalles",children:"👁️"}),e&&b.status===Fe.PENDIENTE&&p.jsx("button",{className:"btn-edit",onClick:()=>e(b),title:"Editar movimiento",children:"✏️"}),b.status===Fe.PENDIENTE&&r==="admin"&&p.jsx("button",{className:"btn-approve",onClick:()=>{console.log("Aprobar movimiento:",b.id)},title:"Aprobar movimiento",children:"✓"})]})]}),b.status===Fe.PENDIENTE&&p.jsx("div",{className:"urgency-indicator",children:p.jsx("div",{className:"urgency-pulse"})}),b.type===Ie.AJUSTE&&p.jsx("div",{className:"adjustment-badge",children:p.jsx("span",{children:"Ajuste"})}),b.type===Ie.TRANSFERENCIA&&b.destinationLocation&&p.jsxs("div",{className:"transfer-info",children:[p.jsx("span",{className:"transfer-arrow",children:"→"}),p.jsx("span",{className:"destination",children:b.destinationLocation})]})]},b.id))})},SV=({movements:i,onEdit:e,onView:t,userRole:r})=>{const[o,c]=ge.useState("createdAt"),[d,m]=ge.useState("desc"),g=K=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0,maximumFractionDigits:0}).format(K),v=K=>K?(K instanceof Date?K:new Date(K)).toLocaleDateString("es-CO",{day:"2-digit",month:"2-digit",year:"2-digit",hour:"2-digit",minute:"2-digit"}):"Sin fecha",T=K=>{switch(K){case Ie.ENTRADA:return"📥";case Ie.SALIDA:return"📤";case Ie.TRANSFERENCIA:return"🔄";case Ie.AJUSTE:return"⚖️";default:return"📋"}},A=K=>{switch(K?.toLowerCase()){case"diesel":return"🚛";case"gasolina":return"🚗";case"acpm":return"🚚";case"lubricante":return"🛢️";default:return"⛽"}},b=K=>{switch(K){case Fe.COMPLETADO:return"✅";case Fe.PENDIENTE:return"⏳";case Fe.CANCELADO:return"❌";default:return"❓"}},k=K=>{switch(K){case Fe.COMPLETADO:return"status-completado";case Fe.PENDIENTE:return"status-pendiente";case Fe.CANCELADO:return"status-cancelado";default:return"status-default"}},O=K=>{o===K?m(d==="asc"?"desc":"asc"):(c(K),m("asc"))},z=[...i].sort((K,ae)=>{let ie=K[o],ce=ae[o];return(o.includes("Date")||o.includes("At"))&&(ie=new Date(ie),ce=new Date(ce)),typeof ie=="number"&&typeof ce=="number"?d==="asc"?ie-ce:ce-ie:typeof ie=="string"&&typeof ce=="string"?d==="asc"?ie.localeCompare(ce):ce.localeCompare(ie):ie instanceof Date&&ce instanceof Date?d==="asc"?ie-ce:ce-ie:0}),j=K=>o!==K?"↕️":d==="asc"?"↑":"↓";return p.jsxs("div",{className:"movements-table-container",children:[p.jsx("div",{className:"table-wrapper",children:p.jsxs("table",{className:"movements-table",children:[p.jsx("thead",{children:p.jsxs("tr",{children:[p.jsxs("th",{className:"sortable",onClick:()=>O("type"),children:["Tipo ",j("type")]}),p.jsxs("th",{className:"sortable",onClick:()=>O("fuelType"),children:["Combustible ",j("fuelType")]}),p.jsxs("th",{className:"sortable text-right",onClick:()=>O("quantity"),children:["Cantidad ",j("quantity")]}),p.jsxs("th",{className:"sortable text-right",onClick:()=>O("unitPrice"),children:["Precio/Gal ",j("unitPrice")]}),p.jsxs("th",{className:"sortable text-right",onClick:()=>O("totalValue"),children:["Valor Total ",j("totalValue")]}),p.jsx("th",{children:"Vehículo"}),p.jsx("th",{children:"Ubicación"}),p.jsxs("th",{className:"sortable",onClick:()=>O("status"),children:["Estado ",j("status")]}),p.jsxs("th",{className:"sortable",onClick:()=>O("createdAt"),children:["Fecha ",j("createdAt")]}),p.jsx("th",{className:"actions-column",children:"Acciones"})]})}),p.jsx("tbody",{children:z.map(K=>p.jsxs("tr",{className:`movement-row ${K.status===Fe.PENDIENTE?"pending-row":""}`,children:[p.jsx("td",{className:"type-cell",children:p.jsxs("div",{className:"type-content",children:[p.jsx("span",{className:"type-icon",children:T(K.type)}),p.jsx("span",{className:"type-text",children:K.type.charAt(0).toUpperCase()+K.type.slice(1)})]})}),p.jsx("td",{className:"fuel-cell",children:p.jsxs("div",{className:"fuel-content",children:[p.jsx("span",{className:"fuel-icon",children:A(K.fuelType)}),p.jsx("span",{className:"fuel-text",children:K.fuelType})]})}),p.jsxs("td",{className:"quantity-cell text-right",children:[p.jsx("span",{className:"quantity-value",children:K.quantity}),p.jsx("span",{className:"quantity-unit",children:"gal"})]}),p.jsx("td",{className:"price-cell text-right",children:g(K.unitPrice)}),p.jsx("td",{className:"value-cell text-right",children:p.jsx("strong",{children:g(K.totalValue)})}),p.jsx("td",{className:"vehicle-cell",children:K.vehicleId?p.jsxs("span",{className:"vehicle-id",children:["🚜 ",K.vehicleId]}):p.jsx("span",{className:"no-vehicle",children:"-"})}),p.jsx("td",{className:"location-cell",children:p.jsxs("span",{className:"location-text",children:["📍 ",K.location||"Principal"]})}),p.jsx("td",{className:"status-cell",children:p.jsxs("div",{className:`status-badge ${k(K.status)}`,children:[p.jsx("span",{className:"status-icon",children:b(K.status)}),p.jsx("span",{className:"status-text",children:K.status.charAt(0).toUpperCase()+K.status.slice(1)})]})}),p.jsx("td",{className:"date-cell",children:p.jsxs("div",{className:"date-content",children:[p.jsx("span",{className:"date-value",children:v(K.createdAt)}),K.reference&&p.jsxs("span",{className:"reference-small",children:["#",K.reference]})]})}),p.jsx("td",{className:"actions-cell",children:p.jsxs("div",{className:"action-buttons",children:[p.jsx("button",{className:"btn-action btn-view",onClick:()=>t(K),title:"Ver detalles",children:"👁️"}),e&&K.status===Fe.PENDIENTE&&p.jsx("button",{className:"btn-action btn-edit",onClick:()=>e(K),title:"Editar movimiento",children:"✏️"}),K.status===Fe.PENDIENTE&&r==="admin"&&p.jsx("button",{className:"btn-action btn-approve",onClick:()=>{console.log("Aprobar movimiento:",K.id)},title:"Aprobar movimiento",children:"✓"})]})})]},K.id))})]})}),p.jsxs("div",{className:"table-info",children:[p.jsxs("div",{className:"table-summary",children:[p.jsxs("span",{className:"total-rows",children:[i.length," movimiento",i.length!==1?"s":""]}),o&&p.jsxs("span",{className:"sort-info",children:["Ordenado por ",o," (",d==="asc"?"ascendente":"descendente",")"]})]}),p.jsxs("div",{className:"table-legend",children:[p.jsxs("span",{className:"legend-item",children:[p.jsx("span",{className:"legend-icon",children:"⏳"})," Pendiente"]}),p.jsxs("span",{className:"legend-item",children:[p.jsx("span",{className:"legend-icon",children:"✅"})," Completado"]}),p.jsxs("span",{className:"legend-item",children:[p.jsx("span",{className:"legend-icon",children:"❌"})," Cancelado"]})]})]})]})},wV=({movements:i,viewMode:e,onEdit:t,onView:r,userRole:o})=>e==="table"?p.jsx(SV,{movements:i,onEdit:t,onView:r,userRole:o}):p.jsx(AV,{movements:i,onEdit:t,onView:r,userRole:o}),IV=({isOpen:i,onClose:e,movement:t,mode:r,onSuccess:o})=>{const[c,d]=ge.useState({type:"",fuelType:"",quantity:"",unitPrice:"",location:"Principal",vehicleId:"",destinationLocation:"",description:"",reference:"",effectiveDate:new Date().toISOString().slice(0,16)}),[m,g]=ge.useState(!1),[v,T]=ge.useState(""),[A,b]=ge.useState({}),k=[{value:"Diesel",label:"Diesel 🚛",price:12500},{value:"Gasolina",label:"Gasolina 🚗",price:14200},{value:"ACPM",label:"ACPM 🚚",price:13800},{value:"Lubricante",label:"Lubricante 🛢️",price:45e3}],O=["Principal","Bodega Norte","Bodega Sur","Campo Operativo","Estación Móvil"];ge.useEffect(()=>{t&&(r==="edit"||r==="view")?d({type:t.type||"",fuelType:t.fuelType||"",quantity:t.quantity?.toString()||"",unitPrice:t.unitPrice?.toString()||"",location:t.location||"Principal",vehicleId:t.vehicleId||"",destinationLocation:t.destinationLocation||"",description:t.description||"",reference:t.reference||"",effectiveDate:t.effectiveDate?new Date(t.effectiveDate).toISOString().slice(0,16):new Date().toISOString().slice(0,16)}):r==="create"&&d({type:"",fuelType:"",quantity:"",unitPrice:"",location:"Principal",vehicleId:"",destinationLocation:"",description:"",reference:"",effectiveDate:new Date().toISOString().slice(0,16)}),T(""),b({})},[t,r,i]),ge.useEffect(()=>{if(c.fuelType&&!c.unitPrice){const W=k.find(de=>de.value===c.fuelType);W&&d(de=>({...de,unitPrice:W.price.toString()}))}},[c.fuelType]);const z=(W,de)=>{d(V=>({...V,[W]:de})),A[W]&&b(V=>({...V,[W]:""}))},j=()=>{const W={};return c.type||(W.type="Tipo de movimiento requerido"),c.fuelType||(W.fuelType="Tipo de combustible requerido"),c.quantity?parseFloat(c.quantity)<=0&&(W.quantity="La cantidad debe ser mayor a cero"):W.quantity="Cantidad requerida",c.unitPrice?parseFloat(c.unitPrice)<0&&(W.unitPrice="El precio no puede ser negativo"):W.unitPrice="Precio unitario requerido",c.type===Ie.SALIDA&&!c.vehicleId&&(W.vehicleId="Las salidas requieren un vehículo"),c.type===Ie.TRANSFERENCIA&&!c.destinationLocation&&(W.destinationLocation="Las transferencias requieren una ubicación destino"),b(W),Object.keys(W).length===0},K=async W=>{if(W.preventDefault(),!j()){T("Por favor corrige los errores en el formulario");return}g(!0),T("");try{const de={...c,quantity:parseFloat(c.quantity),unitPrice:parseFloat(c.unitPrice),effectiveDate:new Date(c.effectiveDate)};r==="create"?await mV(de):r==="edit"&&await gV(t.id,de),o()}catch(de){console.error("Error al guardar movimiento:",de),T(de.message||"Error al guardar el movimiento")}finally{g(!1)}},ae=(parseFloat(c.quantity)||0)*(parseFloat(c.unitPrice)||0),ie=W=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0,maximumFractionDigits:0}).format(W),ce=()=>{switch(r){case"create":return"➕ Nuevo Movimiento";case"edit":return"✏️ Editar Movimiento";case"view":return"👁️ Detalles del Movimiento";default:return"Movimiento"}};return i?p.jsx("div",{className:"modal-overlay",onClick:e,children:p.jsxs("div",{className:"modal-content movement-modal",onClick:W=>W.stopPropagation(),children:[p.jsxs("div",{className:"modal-header",children:[p.jsx("h3",{children:ce()}),p.jsx("button",{className:"modal-close",onClick:e,children:"✕"})]}),p.jsxs("div",{className:"modal-body",children:[v&&p.jsxs("div",{className:"error-message",children:[p.jsx("span",{className:"error-icon",children:"⚠️"}),v]}),p.jsxs("form",{onSubmit:K,className:"movement-form",children:[p.jsxs("div",{className:"form-row",children:[p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"Tipo de Movimiento *"}),p.jsxs("select",{value:c.type,onChange:W=>z("type",W.target.value),disabled:r==="view",className:A.type?"error":"",children:[p.jsx("option",{value:"",children:"Seleccionar tipo..."}),p.jsx("option",{value:Ie.ENTRADA,children:"📥 Entrada"}),p.jsx("option",{value:Ie.SALIDA,children:"📤 Salida"}),p.jsx("option",{value:Ie.TRANSFERENCIA,children:"🔄 Transferencia"}),p.jsx("option",{value:Ie.AJUSTE,children:"⚖️ Ajuste"})]}),A.type&&p.jsx("span",{className:"field-error",children:A.type})]}),r==="view"&&t&&p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"Estado"}),p.jsx("div",{className:"status-display",children:p.jsxs("span",{className:`status-badge status-${t.status}`,children:[t.status===Fe.COMPLETADO&&"✅",t.status===Fe.PENDIENTE&&"⏳",t.status===Fe.CANCELADO&&"❌",t.status.charAt(0).toUpperCase()+t.status.slice(1)]})})]})]}),p.jsxs("div",{className:"form-row",children:[p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"Tipo de Combustible *"}),p.jsxs("select",{value:c.fuelType,onChange:W=>z("fuelType",W.target.value),disabled:r==="view",className:A.fuelType?"error":"",children:[p.jsx("option",{value:"",children:"Seleccionar combustible..."}),k.map(W=>p.jsx("option",{value:W.value,children:W.label},W.value))]}),A.fuelType&&p.jsx("span",{className:"field-error",children:A.fuelType})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"Cantidad (galones) *"}),p.jsx("input",{type:"number",step:"0.01",min:"0",value:c.quantity,onChange:W=>z("quantity",W.target.value),disabled:r==="view",placeholder:"0.00",className:A.quantity?"error":""}),A.quantity&&p.jsx("span",{className:"field-error",children:A.quantity})]})]}),p.jsxs("div",{className:"form-row",children:[p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"Precio Unitario (COP) *"}),p.jsx("input",{type:"number",step:"1",min:"0",value:c.unitPrice,onChange:W=>z("unitPrice",W.target.value),disabled:r==="view",placeholder:"0",className:A.unitPrice?"error":""}),A.unitPrice&&p.jsx("span",{className:"field-error",children:A.unitPrice})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"Valor Total"}),p.jsx("div",{className:"total-value-display",children:ie(ae)})]})]}),p.jsxs("div",{className:"form-row",children:[p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"Ubicación"}),p.jsx("select",{value:c.location,onChange:W=>z("location",W.target.value),disabled:r==="view",children:O.map(W=>p.jsxs("option",{value:W,children:["📍 ",W]},W))})]}),p.jsxs("div",{className:"form-group",children:[p.jsxs("label",{children:["Vehículo/Equipo ",c.type===Ie.SALIDA&&"*"]}),p.jsx("input",{type:"text",value:c.vehicleId,onChange:W=>z("vehicleId",W.target.value),disabled:r==="view",placeholder:"ID del vehículo o equipo",className:A.vehicleId?"error":""}),A.vehicleId&&p.jsx("span",{className:"field-error",children:A.vehicleId})]})]}),c.type===Ie.TRANSFERENCIA&&p.jsx("div",{className:"form-row",children:p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"Ubicación Destino *"}),p.jsxs("select",{value:c.destinationLocation,onChange:W=>z("destinationLocation",W.target.value),disabled:r==="view",className:A.destinationLocation?"error":"",children:[p.jsx("option",{value:"",children:"Seleccionar destino..."}),O.filter(W=>W!==c.location).map(W=>p.jsxs("option",{value:W,children:["📍 ",W]},W))]}),A.destinationLocation&&p.jsx("span",{className:"field-error",children:A.destinationLocation})]})}),p.jsxs("div",{className:"form-row",children:[p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"Fecha Efectiva"}),p.jsx("input",{type:"datetime-local",value:c.effectiveDate,onChange:W=>z("effectiveDate",W.target.value),disabled:r==="view"})]}),p.jsxs("div",{className:"form-group",children:[p.jsx("label",{children:"Referencia"}),p.jsx("input",{type:"text",value:c.reference,onChange:W=>z("reference",W.target.value),disabled:r==="view",placeholder:"Factura, orden, etc."})]})]}),p.jsx("div",{className:"form-row",children:p.jsxs("div",{className:"form-group full-width",children:[p.jsx("label",{children:"Descripción"}),p.jsx("textarea",{value:c.description,onChange:W=>z("description",W.target.value),disabled:r==="view",placeholder:"Detalles adicionales del movimiento...",rows:"3"})]})}),r==="view"&&t&&p.jsx("div",{className:"movement-details",children:p.jsxs("div",{className:"details-section",children:[p.jsx("h4",{children:"📋 Información del Sistema"}),p.jsxs("div",{className:"details-grid",children:[p.jsxs("div",{className:"detail-item",children:[p.jsx("label",{children:"ID:"}),p.jsx("span",{children:t.id})]}),p.jsxs("div",{className:"detail-item",children:[p.jsx("label",{children:"Creado:"}),p.jsx("span",{children:new Date(t.createdAt).toLocaleString("es-CO")})]}),t.updatedAt&&p.jsxs("div",{className:"detail-item",children:[p.jsx("label",{children:"Actualizado:"}),p.jsx("span",{children:new Date(t.updatedAt).toLocaleString("es-CO")})]}),t.approvedAt&&p.jsxs("div",{className:"detail-item",children:[p.jsx("label",{children:"Aprobado:"}),p.jsx("span",{children:new Date(t.approvedAt).toLocaleString("es-CO")})]})]})]})})]})]}),p.jsxs("div",{className:"modal-footer",children:[p.jsx("button",{type:"button",className:"btn-cancel",onClick:e,children:r==="view"?"Cerrar":"Cancelar"}),r!=="view"&&p.jsx("button",{type:"submit",className:"btn-primary",onClick:K,disabled:m,children:m?p.jsxs(p.Fragment,{children:[p.jsx("span",{className:"loading-spinner small"}),"Guardando..."]}):r==="create"?"Crear Movimiento":"Actualizar Movimiento"})]})]})}):null},NV=()=>{const{user:i}=ge.useContext(iy),[e,t]=ge.useState([]),[r,o]=ge.useState(null),[c,d]=ge.useState(!0),[m,g]=ge.useState(null),[v,T]=ge.useState({type:"",status:"",fuelType:"",vehicleId:"",dateRange:"all"}),[A,b]=ge.useState("cards"),[k,O]=ge.useState(""),[z,j]=ge.useState(!1),[K,ae]=ge.useState(null),[ie,ce]=ge.useState("create");ge.useEffect(()=>{if(!i)return;d(!0);const Be=yV((Oe,Q)=>{if(Q){console.error("Error en suscripción de movimientos:",Q),g("Error al cargar movimientos"),d(!1);return}t(Oe),g(null),d(!1)},v);return()=>Be()},[i,v]),ge.useEffect(()=>{i&&(async()=>{try{const Oe=await vV(v);o(Oe)}catch(Oe){console.error("Error al cargar estadísticas:",Oe)}})()},[i,e,v]);const W=e.filter(Be=>{if(!k)return!0;const Oe=k.toLowerCase();return Be.fuelType?.toLowerCase().includes(Oe)||Be.type?.toLowerCase().includes(Oe)||Be.location?.toLowerCase().includes(Oe)||Be.vehicleId?.toLowerCase().includes(Oe)||Be.description?.toLowerCase().includes(Oe)||Be.reference?.toLowerCase().includes(Oe)}),de=()=>{ae(null),ce("create"),j(!0)},V=Be=>{ae(Be),ce("edit"),j(!0)},I=Be=>{ae(Be),ce("view"),j(!0)},N=()=>{j(!1),ae(null)},x=Be=>{T(Oe=>({...Oe,...Be}))},P=()=>{T({type:"",status:"",fuelType:"",vehicleId:"",dateRange:"all"}),O("")},U=i?.role==="admin"||i?.role==="contador",C=i?.role==="admin";return c?p.jsx("div",{className:"movements-main",children:p.jsxs("div",{className:"loading-container",children:[p.jsx("div",{className:"loading-spinner"}),p.jsx("p",{children:"Cargando movimientos..."})]})}):m?p.jsx("div",{className:"movements-main",children:p.jsxs("div",{className:"error-container",children:[p.jsx("div",{className:"error-icon",children:"⚠️"}),p.jsx("h3",{children:"Error al cargar movimientos"}),p.jsx("p",{children:m}),p.jsx("button",{className:"btn-retry",onClick:()=>window.location.reload(),children:"Reintentar"})]})}):p.jsxs("div",{className:"movements-main",children:[p.jsxs("div",{className:"movements-header",children:[p.jsxs("div",{className:"header-title",children:[p.jsx("h2",{children:"📊 Movimientos de Combustibles"}),p.jsx("p",{children:"Gestiona entradas, salidas, transferencias y ajustes de inventario"})]}),U&&p.jsx("button",{className:"btn-create-movement",onClick:de,children:"➕ Nuevo Movimiento"})]}),r&&p.jsx(EV,{stats:r,filters:v}),p.jsx(bV,{filters:v,onFilterChange:x,onClearFilters:P,searchTerm:k,onSearchChange:O,viewMode:A,onViewModeChange:b,totalResults:W.length}),W.length===0?p.jsxs("div",{className:"empty-state",children:[p.jsx("div",{className:"empty-icon",children:"📋"}),p.jsx("h3",{children:e.length===0?"No hay movimientos registrados":"No se encontraron movimientos"}),p.jsx("p",{children:e.length===0?"Comienza creando tu primer movimiento de combustible":"Intenta ajustar los filtros de búsqueda"}),e.length===0&&U&&p.jsx("button",{className:"btn-create-first",onClick:de,children:"➕ Crear Primer Movimiento"})]}):p.jsx(wV,{movements:W,viewMode:A,onEdit:C?V:null,onView:I,userRole:i?.role}),z&&p.jsx(IV,{isOpen:z,onClose:N,movement:K,mode:ie,onSuccess:()=>{N()}})]})},RV=()=>p.jsxs("div",{className:"module-placeholder",children:[p.jsx("h2",{children:"🚜 Módulo de Vehículos"}),p.jsx("p",{children:"Gestión de maquinaria forestal"}),p.jsxs("div",{className:"coming-soon",children:[p.jsx("span",{children:"🚧 En desarrollo"}),p.jsx("p",{children:"Próximamente: Catálogo de vehículos, tracking de consumo, y mantenimientos."})]})]}),CV=()=>p.jsxs("div",{className:"module-placeholder",children:[p.jsx("h2",{children:"🏪 Módulo de Proveedores"}),p.jsx("p",{children:"Gestión de proveedores de combustible"}),p.jsxs("div",{className:"coming-soon",children:[p.jsx("span",{children:"🚧 En desarrollo"}),p.jsx("p",{children:"Próximamente: Base de datos de proveedores, comparación de precios, y evaluación."})]})]}),xV=()=>p.jsxs("div",{className:"module-placeholder",children:[p.jsx("h2",{children:"📋 Módulo de Reportes"}),p.jsx("p",{children:"Análisis y reportes de combustibles"}),p.jsxs("div",{className:"coming-soon",children:[p.jsx("span",{children:"🚧 En desarrollo"}),p.jsx("p",{children:"Próximamente: Reportes personalizables, gráficos interactivos, y exportación."})]})]}),DV=()=>{const[i,e]=ge.useState("dashboard"),t=()=>{switch(i){case"dashboard":return p.jsx(x0,{});case"inventory":return p.jsx(fV,{});case"movements":return p.jsx(NV,{});case"vehicles":return p.jsx(RV,{});case"suppliers":return p.jsx(CV,{});case"reports":return p.jsx(xV,{});default:return p.jsx(x0,{})}};return p.jsx(nV,{currentView:i,onViewChange:e,children:t()})};function OV(){return p.jsx(tV,{children:p.jsx("div",{className:"App",children:p.jsx(DV,{})})})}qI.createRoot(document.getElementById("root")).render(p.jsx(ge.StrictMode,{children:p.jsx(OV,{})}));
